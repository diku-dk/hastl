// Generated by Futhark 0.21.5
// git: e1c63b2 (Tue Feb 1 22:06:34 2022 +0100)

// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers\n")
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t param_value);
int futhark_get_tuning_param_count(void);
const char *futhark_get_tuning_param_name(int);
const char *futhark_get_tuning_param_class(int);

// Arrays
struct futhark_f32_1d;
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0);
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0);
int futhark_free_f32_1d(struct futhark_context *ctx,
                        struct futhark_f32_1d *arr);
int futhark_values_f32_1d(struct futhark_context *ctx,
                          struct futhark_f32_1d *arr, float *data);
unsigned char *futhark_values_raw_f32_1d(struct futhark_context *ctx,
                                         struct futhark_f32_1d *arr);
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx,
                                    struct futhark_f32_1d *arr);
struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
unsigned char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                         struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7, const
                       int64_t in8, const int64_t in9, const int64_t in10, const
                       int64_t in11, const int64_t in12, const int64_t in13,
                       const int64_t in14, const int64_t in15, const
                       int64_t in16);
int futhark_entry_seasonal_amplitude(struct futhark_context *ctx,
                                     struct futhark_f32_1d **out0, const
                                     struct futhark_f32_2d *in0);
int futhark_entry_trend_magnitude(struct futhark_context *ctx,
                                  struct futhark_f32_1d **out0, const
                                  struct futhark_f32_2d *in0);

// Miscellaneous
int futhark_context_sync(struct futhark_context *ctx);
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_c
#define FUTHARK_SUCCESS 0
#define FUTHARK_PROGRAM_ERROR 2
#define FUTHARK_OUT_OF_MEMORY 3

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

static uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

static float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>



// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

static inline uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

static inline uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

static inline uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

static inline uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

static inline uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

static inline uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

static inline uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

static inline uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

static inline uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

static inline uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

static inline uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

static inline uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

static inline int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

static inline int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

static inline int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

static inline uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

static inline uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

static inline uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

static inline uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

static inline int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

static inline int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

static inline int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

static inline int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

static inline uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

static inline uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

static inline uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

static inline uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

static inline uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

static inline uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

static inline uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

static inline uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

static inline uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

static inline uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

static inline uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

static inline uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

static inline int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

static inline int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

static inline int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

static inline int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

static inline uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

static inline uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

static inline uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

static inline uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

static inline uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

static inline uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

static inline uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

static inline uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

static inline uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

static inline uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

static inline uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

static inline uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

static inline bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

static inline bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

static inline bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

static inline bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

static inline bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

static inline bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

static inline bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

static inline bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

static inline bool slt8(int8_t x, int8_t y) {
  return x < y;
}

static inline bool slt16(int16_t x, int16_t y) {
  return x < y;
}

static inline bool slt32(int32_t x, int32_t y) {
  return x < y;
}

static inline bool slt64(int64_t x, int64_t y) {
  return x < y;
}

static inline bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

static inline bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

static inline bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

static inline bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

static inline uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline bool itob_i8_bool(int8_t x) {
  return x;
}

static inline bool itob_i16_bool(int16_t x) {
  return x;
}

static inline bool itob_i32_bool(int32_t x) {
  return x;
}

static inline bool itob_i64_bool(int64_t x) {
  return x;
}

static inline int8_t btoi_bool_i8(bool x) {
  return x;
}

static inline int16_t btoi_bool_i16(bool x) {
  return x;
}

static inline int32_t btoi_bool_i32(bool x) {
  return x;
}

static inline int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

static int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

static int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

static int32_t abs32(int32_t x) {
  return abs(x);
}

static int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

static int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

static int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

static int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

static int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

static int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

static int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

static int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  return mul_hi(a, b);
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  return mul_hi(a, b);
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mul_hi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul_hi(a, b);
}

#elif defined(__CUDA_ARCH__)

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mulhi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul64hi(a, b);
}

#else // Not OpenCL or CUDA, but plain C.

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  uint64_t aa = a;
  uint64_t bb = b;

  return aa * bb >> 32;
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  __uint128_t aa = a;
  __uint128_t bb = b;

  return aa * bb >> 64;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return mad_hi(a, b, c);
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return mad_hi(a, b, c);
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return mad_hi(a, b, c);
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return mad_hi(a, b, c);
}

#else // Not OpenCL

static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return futrts_mul_hi8(a, b) + c;
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return futrts_mul_hi16(a, b) + c;
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return futrts_mul_hi32(a, b) + c;
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return futrts_mul_hi64(a, b) + c;
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

static int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

static int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

static int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

static int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

static int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

static int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

static inline float fdiv32(float x, float y) {
  return x / y;
}

static inline float fadd32(float x, float y) {
  return x + y;
}

static inline float fsub32(float x, float y) {
  return x - y;
}

static inline float fmul32(float x, float y) {
  return x * y;
}

static inline bool cmplt32(float x, float y) {
  return x < y;
}

static inline bool cmple32(float x, float y) {
  return x <= y;
}

static inline float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

static inline float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

static inline float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

static inline float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

static inline float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

static inline float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

static inline float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

static inline float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

static inline int8_t fptosi_f32_i8(float x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f32_i16(float x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f32_i32(float x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f32_i64(float x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f32_i8(float x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f32_i16(float x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f32_i32(float x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f32_i64(float x) {
  return (uint64_t) x;
}

#ifdef __OPENCL_VERSION__
static inline float fabs32(float x) {
  return fabs(x);
}

static inline float fmax32(float x, float y) {
  return fmax(x, y);
}

static inline float fmin32(float x, float y) {
  return fmin(x, y);
}

static inline float fpow32(float x, float y) {
  return pow(x, y);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float fabs32(float x) {
  return fabsf(x);
}

static inline float fmax32(float x, float y) {
  return fmaxf(x, y);
}

static inline float fmin32(float x, float y) {
  return fminf(x, y);
}

static inline float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan32(float x) {
  return isnan(x);
}

static inline bool futrts_isinf32(float x) {
  return isinf(x);
}

#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x) {
  return log(x);
}

static inline float futrts_log2_32(float x) {
  return log2(x);
}

static inline float futrts_log10_32(float x) {
  return log10(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return cosh(x);
}

static inline float futrts_sinh32(float x) {
  return sinh(x);
}

static inline float futrts_tanh32(float x) {
  return tanh(x);
}

static inline float futrts_acosh32(float x) {
  return acosh(x);
}

static inline float futrts_asinh32(float x) {
  return asinh(x);
}

static inline float futrts_atanh32(float x) {
  return atanh(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgamma(x);
}

static inline float futrts_lgamma32(float x) {
  return lgamma(x);
}

static inline float fmod32(float x, float y) {
  return fmod(x, y);
}

static inline float futrts_round32(float x) {
  return rint(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

static inline float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

static inline float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float futrts_log32(float x) {
  return logf(x);
}

static inline float futrts_log2_32(float x) {
  return log2f(x);
}

static inline float futrts_log10_32(float x) {
  return log10f(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrtf(x);
}

static inline float futrts_exp32(float x) {
  return expf(x);
}

static inline float futrts_cos32(float x) {
  return cosf(x);
}

static inline float futrts_sin32(float x) {
  return sinf(x);
}

static inline float futrts_tan32(float x) {
  return tanf(x);
}

static inline float futrts_acos32(float x) {
  return acosf(x);
}

static inline float futrts_asin32(float x) {
  return asinf(x);
}

static inline float futrts_atan32(float x) {
  return atanf(x);
}

static inline float futrts_cosh32(float x) {
  return coshf(x);
}

static inline float futrts_sinh32(float x) {
  return sinhf(x);
}

static inline float futrts_tanh32(float x) {
  return tanhf(x);
}

static inline float futrts_acosh32(float x) {
  return acoshf(x);
}

static inline float futrts_asinh32(float x) {
  return asinhf(x);
}

static inline float futrts_atanh32(float x) {
  return atanhf(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgammaf(x);
}

static inline float futrts_lgamma32(float x) {
  return lgammaf(x);
}

static inline float fmod32(float x, float y) {
  return fmodf(x, y);
}

static inline float futrts_round32(float x) {
  return rintf(x);
}

static inline float futrts_floor32(float x) {
  return floorf(x);
}

static inline float futrts_ceil32(float x) {
  return ceilf(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

static inline int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}

static inline float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}

#ifdef FUTHARK_F64_ENABLED

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline int8_t fptosi_f64_i8(double x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f64_i16(double x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f64_i32(double x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f64_i64(double x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f64_i8(double x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f64_i16(double x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f64_i32(double x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f64_i64(double x) {
  return (uint64_t) x;
}

static inline double fabs64(double x) {
  return fabs(x);
}

static inline double fmax64(double x, double y) {
  return fmax(x, y);
}

static inline double fmin64(double x, double y) {
  return fmin(x, y);
}

static inline double fpow64(double x, double y) {
  return pow(x, y);
}

static inline double futrts_log64(double x) {
  return log(x);
}

static inline double futrts_log2_64(double x) {
  return log2(x);
}

static inline double futrts_log10_64(double x) {
  return log10(x);
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return cosh(x);
}

static inline double futrts_sinh64(double x) {
  return sinh(x);
}

static inline double futrts_tanh64(double x) {
  return tanh(x);
}

static inline double futrts_acosh64(double x) {
  return acosh(x);
}

static inline double futrts_asinh64(double x) {
  return asinh(x);
}

static inline double futrts_atanh64(double x) {
  return atanh(x);
}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

static inline double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

static inline double futrts_gamma64(double x) {
  return tgamma(x);
}

static inline double futrts_lgamma64(double x) {
  return lgamma(x);
}

static inline double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

static inline double futrts_round64(double x) {
  return rint(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline bool futrts_isinf64(double x) {
  return isinf(x);
}

static inline int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

static inline double fmod64(double x, double y) {
  return fmod(x, y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

static inline double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600)
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

static inline f16 fadd16(f16 x, f16 y) {
  return x + y;
}

static inline f16 fsub16(f16 x, f16 y) {
  return x - y;
}

static inline f16 fmul16(f16 x, f16 y) {
  return x * y;
}

static inline bool cmplt16(f16 x, f16 y) {
  return x < y;
}

static inline bool cmple16(f16 x, f16 y) {
  return x <= y;
}

static inline f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

static inline f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

static inline f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

static inline f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

static inline f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

static inline f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

static inline f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

static inline f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

static inline int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

static inline int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

static inline uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

#ifndef EMULATE_F16

#ifdef __OPENCL_VERSION__
static inline f16 fabs16(f16 x) {
  return fabs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#else // Assuming CUDA.

static inline f16 fabs16(f16 x) {
  return fabsf(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

static inline bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}

#ifdef __OPENCL_VERSION__
static inline f16 futrts_log16(f16 x) {
  return log(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return log2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return log10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return cos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return sin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tan(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acos(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asin(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atan(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rint(x);
}

static inline f16 futrts_floor16(f16 x) {
  return floor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}

#else // Assume CUDA.

static inline f16 futrts_log16(f16 x) {
  return hlog(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return hexp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return hcos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return hsin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tanf(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acosf(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asinf(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atanf(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rintf(x);
}

static inline f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
static inline int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
static inline f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#else
static inline int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

static inline f16 fabs16(f16 x) {
  return fabs32(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

static inline bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

static inline bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

static inline f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

static inline f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

static inline f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

static inline f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

static inline f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

static inline f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

static inline f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

static inline f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

static inline f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

static inline int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

static inline int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

static inline f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

static inline f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0) - (x < 0);
}

#endif

#endif

static inline float fpconv_f16_f16(f16 x) {
  return x;
}

static inline float fpconv_f16_f32(f16 x) {
  return x;
}

static inline f16 fpconv_f32_f16(float x) {
  return x;
}

#ifdef FUTHARK_F64_ENABLED

static inline double fpconv_f16_f64(f16 x) {
  return (double) x;
}

static inline f16 fpconv_f64_f16(double x) {
  return (f16) x;
}

#endif


// End of scalar_f16.h.

static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
struct futhark_context_config {
    int debugging;
    int in_use;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->in_use = 0;
    cfg->debugging = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    (void) cfg;
    (void) flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    // Does nothing for this backend.
    (void) cfg;
    (void) detail;
}
struct futhark_context {
    struct futhark_context_config *cfg;
    int detail_memory;
    int debugging;
    int profiling;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int profiling_paused;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    ctx->cfg = cfg;
    ctx->cfg->in_use = 1;
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->debugging;
    ctx->logging = cfg->debugging;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    free_lock(&ctx->lock);
    ctx->cfg->in_use = 0;
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *tuning_param_names[0];
static const char *tuning_param_vars[0];
static const char *tuning_param_classes[0];
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t param_value)
{
    (void) cfg;
    (void) param_name;
    (void) param_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    if (ret != FUTHARK_SUCCESS)
        return ret;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default + size);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (unsigned char *) malloc((size_t) size);
    if (ctx->error == NULL) {
        block->references = (int *) malloc(sizeof(int));
        *block->references = 1;
        block->size = size;
        block->desc = desc;
        ctx->cur_mem_usage_default += size;
        return FUTHARK_SUCCESS;
    } else {
        char *old_error = ctx->error;
        
        ctx->error =
            msgprintf("Failed to allocate memory in %s.\nAttempted allocation: %12lld bytes\nCurrently allocated:  %12lld bytes\n%s",
                      "default space", (long long) size,
                      (long long) ctx->cur_mem_usage_default, old_error);
        free(old_error);
        return FUTHARK_OUT_OF_MEMORY;
    }
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_tuning_param_count(void)
{
    return sizeof(tuning_param_names) / sizeof(tuning_param_names[0]);
}
const char *futhark_get_tuning_param_name(int i)
{
    return tuning_param_names[i];
}
const char *futhark_get_tuning_param_class(int i)
{
    return tuning_param_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) { }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_304344,
                             struct memblock *mem_out_p_304345,
                             struct memblock *mem_out_p_304346,
                             struct memblock Y_mem_296966, int64_t m_290261,
                             int64_t n_290262, int64_t n_p_290264,
                             int64_t q_s_290265, int64_t q_t_290266,
                             int64_t q_l_290267, int64_t d_s_290268,
                             int64_t d_t_290269, int64_t d_l_290270,
                             int64_t jump_s_290271, int64_t jump_t_290272,
                             int64_t jump_l_290273, int64_t n_inner_290274,
                             int64_t n_outer_290275,
                             int64_t jump_threshold_1_290276,
                             int64_t jump_threshold_2_290277,
                             int64_t q_threshold_1_290278,
                             int64_t q_threshold_2_290279);
static int futrts_entry_seasonal_amplitude(struct futhark_context *ctx,
                                           struct memblock *mem_out_p_304454,
                                           struct memblock seasonal_l_mem_296966,
                                           int64_t m_290196, int64_t n_290197);
static int futrts_entry_trend_magnitude(struct futhark_context *ctx,
                                        struct memblock *mem_out_p_304456,
                                        struct memblock trend_l_mem_296966,
                                        int64_t m_290213, int64_t n_290214);

static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_f32_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr =
                          (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 4 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) dim0 * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr =
                          (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 4 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) dim0 * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_1d(struct futhark_context *ctx,
                          struct futhark_f32_1d *arr, float *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 4 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_f32_1d(struct futhark_context *ctx,
                                         struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx,
                                    struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 4 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 4 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) (arr->shape[0] * arr->shape[1]) * 4 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                      arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                         struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_304344,
                             struct memblock *mem_out_p_304345,
                             struct memblock *mem_out_p_304346,
                             struct memblock Y_mem_296966, int64_t m_290261,
                             int64_t n_290262, int64_t n_p_290264,
                             int64_t q_s_290265, int64_t q_t_290266,
                             int64_t q_l_290267, int64_t d_s_290268,
                             int64_t d_t_290269, int64_t d_l_290270,
                             int64_t jump_s_290271, int64_t jump_t_290272,
                             int64_t jump_l_290273, int64_t n_inner_290274,
                             int64_t n_outer_290275,
                             int64_t jump_threshold_1_290276,
                             int64_t jump_threshold_2_290277,
                             int64_t q_threshold_1_290278,
                             int64_t q_threshold_2_290279)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_296969_cached_sizze_304347 = 0;
    unsigned char *mem_296969 = NULL;
    size_t mem_296972_cached_sizze_304348 = 0;
    unsigned char *mem_296972 = NULL;
    size_t mem_297000_cached_sizze_304349 = 0;
    unsigned char *mem_297000 = NULL;
    size_t mem_297003_cached_sizze_304350 = 0;
    unsigned char *mem_297003 = NULL;
    size_t mem_297023_cached_sizze_304351 = 0;
    unsigned char *mem_297023 = NULL;
    size_t mem_297040_cached_sizze_304352 = 0;
    unsigned char *mem_297040 = NULL;
    size_t mem_297043_cached_sizze_304353 = 0;
    unsigned char *mem_297043 = NULL;
    size_t mem_297063_cached_sizze_304354 = 0;
    unsigned char *mem_297063 = NULL;
    size_t mem_297078_cached_sizze_304355 = 0;
    unsigned char *mem_297078 = NULL;
    size_t mem_297118_cached_sizze_304356 = 0;
    unsigned char *mem_297118 = NULL;
    size_t mem_297221_cached_sizze_304357 = 0;
    unsigned char *mem_297221 = NULL;
    size_t mem_297225_cached_sizze_304358 = 0;
    unsigned char *mem_297225 = NULL;
    size_t mem_297278_cached_sizze_304359 = 0;
    unsigned char *mem_297278 = NULL;
    size_t mem_297293_cached_sizze_304360 = 0;
    unsigned char *mem_297293 = NULL;
    size_t mem_297386_cached_sizze_304361 = 0;
    unsigned char *mem_297386 = NULL;
    size_t mem_297391_cached_sizze_304362 = 0;
    unsigned char *mem_297391 = NULL;
    size_t mem_297452_cached_sizze_304363 = 0;
    unsigned char *mem_297452 = NULL;
    size_t mem_297606_cached_sizze_304364 = 0;
    unsigned char *mem_297606 = NULL;
    size_t mem_297610_cached_sizze_304365 = 0;
    unsigned char *mem_297610 = NULL;
    size_t mem_297633_cached_sizze_304366 = 0;
    unsigned char *mem_297633 = NULL;
    size_t mem_297715_cached_sizze_304367 = 0;
    unsigned char *mem_297715 = NULL;
    size_t mem_297719_cached_sizze_304368 = 0;
    unsigned char *mem_297719 = NULL;
    size_t mem_297742_cached_sizze_304369 = 0;
    unsigned char *mem_297742 = NULL;
    size_t mem_297878_cached_sizze_304370 = 0;
    unsigned char *mem_297878 = NULL;
    size_t mem_297926_cached_sizze_304371 = 0;
    unsigned char *mem_297926 = NULL;
    size_t mem_297931_cached_sizze_304372 = 0;
    unsigned char *mem_297931 = NULL;
    size_t mem_298752_cached_sizze_304373 = 0;
    unsigned char *mem_298752 = NULL;
    size_t mem_298922_cached_sizze_304374 = 0;
    unsigned char *mem_298922 = NULL;
    size_t mem_298925_cached_sizze_304375 = 0;
    unsigned char *mem_298925 = NULL;
    size_t mem_299158_cached_sizze_304376 = 0;
    unsigned char *mem_299158 = NULL;
    size_t mem_299161_cached_sizze_304377 = 0;
    unsigned char *mem_299161 = NULL;
    size_t mem_299188_cached_sizze_304378 = 0;
    unsigned char *mem_299188 = NULL;
    size_t mem_299191_cached_sizze_304379 = 0;
    unsigned char *mem_299191 = NULL;
    size_t mem_300086_cached_sizze_304380 = 0;
    unsigned char *mem_300086 = NULL;
    size_t mem_300132_cached_sizze_304381 = 0;
    unsigned char *mem_300132 = NULL;
    size_t mem_300148_cached_sizze_304382 = 0;
    unsigned char *mem_300148 = NULL;
    size_t mem_300161_cached_sizze_304383 = 0;
    unsigned char *mem_300161 = NULL;
    size_t mem_300184_cached_sizze_304384 = 0;
    unsigned char *mem_300184 = NULL;
    size_t mem_300200_cached_sizze_304385 = 0;
    unsigned char *mem_300200 = NULL;
    size_t mem_300213_cached_sizze_304386 = 0;
    unsigned char *mem_300213 = NULL;
    size_t mem_300236_cached_sizze_304387 = 0;
    unsigned char *mem_300236 = NULL;
    size_t mem_300252_cached_sizze_304388 = 0;
    unsigned char *mem_300252 = NULL;
    size_t mem_300265_cached_sizze_304389 = 0;
    unsigned char *mem_300265 = NULL;
    size_t mem_300588_cached_sizze_304390 = 0;
    unsigned char *mem_300588 = NULL;
    size_t mem_300675_cached_sizze_304391 = 0;
    unsigned char *mem_300675 = NULL;
    size_t mem_300678_cached_sizze_304392 = 0;
    unsigned char *mem_300678 = NULL;
    size_t mem_300799_cached_sizze_304393 = 0;
    unsigned char *mem_300799 = NULL;
    size_t mem_300802_cached_sizze_304394 = 0;
    unsigned char *mem_300802 = NULL;
    size_t mem_300829_cached_sizze_304395 = 0;
    unsigned char *mem_300829 = NULL;
    size_t mem_300832_cached_sizze_304396 = 0;
    unsigned char *mem_300832 = NULL;
    size_t mem_301358_cached_sizze_304397 = 0;
    unsigned char *mem_301358 = NULL;
    size_t mem_301373_cached_sizze_304398 = 0;
    unsigned char *mem_301373 = NULL;
    size_t mem_301376_cached_sizze_304399 = 0;
    unsigned char *mem_301376 = NULL;
    size_t mem_301464_cached_sizze_304400 = 0;
    unsigned char *mem_301464 = NULL;
    size_t mem_301479_cached_sizze_304401 = 0;
    unsigned char *mem_301479 = NULL;
    size_t mem_301482_cached_sizze_304402 = 0;
    unsigned char *mem_301482 = NULL;
    size_t mem_301603_cached_sizze_304403 = 0;
    unsigned char *mem_301603 = NULL;
    size_t mem_301618_cached_sizze_304404 = 0;
    unsigned char *mem_301618 = NULL;
    size_t mem_301621_cached_sizze_304405 = 0;
    unsigned char *mem_301621 = NULL;
    size_t mem_301764_cached_sizze_304406 = 0;
    unsigned char *mem_301764 = NULL;
    size_t mem_301779_cached_sizze_304407 = 0;
    unsigned char *mem_301779 = NULL;
    size_t mem_301782_cached_sizze_304408 = 0;
    unsigned char *mem_301782 = NULL;
    size_t mem_301820_cached_sizze_304409 = 0;
    unsigned char *mem_301820 = NULL;
    size_t mem_301885_cached_sizze_304410 = 0;
    unsigned char *mem_301885 = NULL;
    size_t mem_301900_cached_sizze_304411 = 0;
    unsigned char *mem_301900 = NULL;
    size_t mem_301903_cached_sizze_304412 = 0;
    unsigned char *mem_301903 = NULL;
    size_t mem_301952_cached_sizze_304413 = 0;
    unsigned char *mem_301952 = NULL;
    size_t mem_301955_cached_sizze_304414 = 0;
    unsigned char *mem_301955 = NULL;
    size_t mem_302054_cached_sizze_304415 = 0;
    unsigned char *mem_302054 = NULL;
    size_t mem_302069_cached_sizze_304416 = 0;
    unsigned char *mem_302069 = NULL;
    size_t mem_302072_cached_sizze_304417 = 0;
    unsigned char *mem_302072 = NULL;
    size_t mem_302121_cached_sizze_304418 = 0;
    unsigned char *mem_302121 = NULL;
    size_t mem_302124_cached_sizze_304419 = 0;
    unsigned char *mem_302124 = NULL;
    size_t mem_302151_cached_sizze_304420 = 0;
    unsigned char *mem_302151 = NULL;
    size_t mem_302154_cached_sizze_304421 = 0;
    unsigned char *mem_302154 = NULL;
    size_t mem_302275_cached_sizze_304422 = 0;
    unsigned char *mem_302275 = NULL;
    size_t mem_302290_cached_sizze_304423 = 0;
    unsigned char *mem_302290 = NULL;
    size_t mem_302293_cached_sizze_304424 = 0;
    unsigned char *mem_302293 = NULL;
    size_t mem_302381_cached_sizze_304425 = 0;
    unsigned char *mem_302381 = NULL;
    size_t mem_302396_cached_sizze_304426 = 0;
    unsigned char *mem_302396 = NULL;
    size_t mem_302399_cached_sizze_304427 = 0;
    unsigned char *mem_302399 = NULL;
    size_t mem_302520_cached_sizze_304428 = 0;
    unsigned char *mem_302520 = NULL;
    size_t mem_302535_cached_sizze_304429 = 0;
    unsigned char *mem_302535 = NULL;
    size_t mem_302538_cached_sizze_304430 = 0;
    unsigned char *mem_302538 = NULL;
    size_t mem_302767_cached_sizze_304431 = 0;
    unsigned char *mem_302767 = NULL;
    size_t mem_302771_cached_sizze_304432 = 0;
    unsigned char *mem_302771 = NULL;
    size_t mem_302860_cached_sizze_304433 = 0;
    unsigned char *mem_302860 = NULL;
    size_t mem_302879_cached_sizze_304434 = 0;
    unsigned char *mem_302879 = NULL;
    size_t mem_302882_cached_sizze_304435 = 0;
    unsigned char *mem_302882 = NULL;
    size_t mem_302902_cached_sizze_304436 = 0;
    unsigned char *mem_302902 = NULL;
    size_t mem_302942_cached_sizze_304437 = 0;
    unsigned char *mem_302942 = NULL;
    size_t mem_302996_cached_sizze_304438 = 0;
    unsigned char *mem_302996 = NULL;
    size_t mem_303011_cached_sizze_304439 = 0;
    unsigned char *mem_303011 = NULL;
    size_t mem_303027_cached_sizze_304440 = 0;
    unsigned char *mem_303027 = NULL;
    size_t mem_303029_cached_sizze_304441 = 0;
    unsigned char *mem_303029 = NULL;
    size_t mem_303032_cached_sizze_304442 = 0;
    unsigned char *mem_303032 = NULL;
    size_t mem_303086_cached_sizze_304443 = 0;
    unsigned char *mem_303086 = NULL;
    size_t mem_303101_cached_sizze_304444 = 0;
    unsigned char *mem_303101 = NULL;
    size_t mem_303175_cached_sizze_304445 = 0;
    unsigned char *mem_303175 = NULL;
    size_t mem_303178_cached_sizze_304446 = 0;
    unsigned char *mem_303178 = NULL;
    size_t mem_303181_cached_sizze_304447 = 0;
    unsigned char *mem_303181 = NULL;
    size_t mem_303300_cached_sizze_304448 = 0;
    unsigned char *mem_303300 = NULL;
    size_t mem_303304_cached_sizze_304449 = 0;
    unsigned char *mem_303304 = NULL;
    size_t mem_303308_cached_sizze_304450 = 0;
    unsigned char *mem_303308 = NULL;
    size_t mem_303341_cached_sizze_304451 = 0;
    unsigned char *mem_303341 = NULL;
    size_t mem_303344_cached_sizze_304452 = 0;
    unsigned char *mem_303344 = NULL;
    size_t mem_303347_cached_sizze_304453 = 0;
    unsigned char *mem_303347 = NULL;
    struct memblock mem_out_303838;
    
    mem_out_303838.references = NULL;
    
    struct memblock mem_out_303839;
    
    mem_out_303839.references = NULL;
    
    struct memblock mem_out_303840;
    
    mem_out_303840.references = NULL;
    
    double i64_res_290280 = sitofp_i64_f64(n_290262);
    double i64_res_290281 = sitofp_i64_f64(n_p_290264);
    double ceil_arg_290282 = i64_res_290280 / i64_res_290281;
    double ceil_res_290283;
    
    ceil_res_290283 = futrts_ceil64(ceil_arg_290282);
    
    int64_t defunc_0_f_res_290284 = fptosi_f64_i64(ceil_res_290283);
    bool bounds_invalid_upwards_290285 = slt64(n_p_290264, (int64_t) 0);
    bool valid_290286 = !bounds_invalid_upwards_290285;
    bool range_valid_c_290287;
    
    if (!valid_290286) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_p_290264, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:407:29-412:37\n   #4  stl.fut:406:22-413:28\n   #5  stl.fut:463:3-479:36\n   #6  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_290289 = slt64(defunc_0_f_res_290284,
                                               (int64_t) 0);
    bool valid_290290 = !bounds_invalid_upwards_290289;
    bool range_valid_c_290291;
    
    if (!valid_290290) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) defunc_0_f_res_290284,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:408:36-411:52\n   #4  /prelude/soacs.fut:59:3-10\n   #5  /prelude/array.fut:195:3-17\n   #6  utils.fut:6:3-16\n   #7  stl.fut:407:29-412:37\n   #8  stl.fut:406:22-413:28\n   #9  stl.fut:463:3-479:36\n   #10 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_296967 = (int64_t) 8 * m_290261;
    int64_t bytes_296968 = smax64((int64_t) 0, binop_y_296967);
    
    if (mem_296969_cached_sizze_304347 < (size_t) bytes_296968) {
        mem_296969 = realloc(mem_296969, bytes_296968);
        mem_296969_cached_sizze_304347 = bytes_296968;
    }
    if (mem_296972_cached_sizze_304348 < (size_t) bytes_296968) {
        mem_296972 = realloc(mem_296972, bytes_296968);
        mem_296972_cached_sizze_304348 = bytes_296968;
    }
    
    int64_t discard_294928;
    int64_t scanacc_294920 = (int64_t) 0;
    
    for (int64_t i_294924 = 0; i_294924 < m_290261; i_294924++) {
        bool defunc_2_reduce_res_290323;
        bool redout_294915 = 0;
        
        for (int64_t i_294916 = 0; i_294916 < n_p_290264; i_294916++) {
            bool defunc_2_reduce_res_290328;
            bool redout_294913 = 1;
            
            for (int64_t i_294914 = 0; i_294914 < defunc_0_f_res_290284;
                 i_294914++) {
                int64_t x_290333 = mul64(n_p_290264, i_294914);
                int64_t idx_290334 = add64(x_290333, i_294916);
                bool cond_290335 = sle64(n_290262, idx_290334);
                bool defunc_0_f_res_290336;
                
                if (cond_290335) {
                    defunc_0_f_res_290336 = 1;
                } else {
                    bool x_290337 = sle64((int64_t) 0, idx_290334);
                    bool y_290338 = slt64(idx_290334, n_290262);
                    bool bounds_check_290339 = x_290337 && y_290338;
                    bool index_certs_290340;
                    
                    if (!bounds_check_290339) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) idx_290334,
                                      "] out of bounds for array of shape [",
                                      (long long) n_290262, "].",
                                      "-> #0  stl.fut:410:68-73\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:408:36-411:52\n   #5  /prelude/soacs.fut:59:3-10\n   #6  /prelude/array.fut:195:3-17\n   #7  utils.fut:6:3-16\n   #8  stl.fut:407:29-412:37\n   #9  stl.fut:406:22-413:28\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_303840,
                                           "mem_out_303840") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303839,
                                           "mem_out_303839") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303838,
                                           "mem_out_303838") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    float isnan_arg_290341;
                    
                    isnan_arg_290341 = ((float *) Y_mem_296966.mem)[i_294924 *
                                                                    n_290262 +
                                                                    idx_290334];
                    
                    bool isnan_res_290342;
                    
                    isnan_res_290342 = futrts_isnan32(isnan_arg_290341);
                    defunc_0_f_res_290336 = isnan_res_290342;
                }
                
                bool x_290331 = defunc_0_f_res_290336 && redout_294913;
                bool redout_tmp_303845 = x_290331;
                
                redout_294913 = redout_tmp_303845;
            }
            defunc_2_reduce_res_290328 = redout_294913;
            
            bool defunc_1_op_res_290326 = defunc_2_reduce_res_290328 ||
                 redout_294915;
            bool redout_tmp_303844 = defunc_1_op_res_290326;
            
            redout_294915 = redout_tmp_303844;
        }
        defunc_2_reduce_res_290323 = redout_294915;
        
        int64_t defunc_2_lifted_lambda_res_290343 =
                btoi_bool_i64(defunc_2_reduce_res_290323);
        bool is_i_290344 = defunc_2_lifted_lambda_res_290343 == (int64_t) 0;
        bool cond_neg_290345 = !is_i_290344;
        int64_t part_res_290346 = btoi_bool_i64(cond_neg_290345);
        int64_t part_res_290347 = btoi_bool_i64(is_i_290344);
        int64_t zz_290321 = part_res_290347 + scanacc_294920;
        
        ((int64_t *) mem_296969)[i_294924] = zz_290321;
        ((int64_t *) mem_296972)[i_294924] = part_res_290346;
        
        int64_t scanacc_tmp_303841 = zz_290321;
        
        scanacc_294920 = scanacc_tmp_303841;
    }
    discard_294928 = scanacc_294920;
    
    int64_t last_index_290351 = m_290261 - (int64_t) 1;
    bool is_empty_290352 = m_290261 == (int64_t) 0;
    int64_t partition_sizze_290353;
    
    if (is_empty_290352) {
        partition_sizze_290353 = (int64_t) 0;
    } else {
        int64_t last_offset_290354;
        
        last_offset_290354 = ((int64_t *) mem_296969)[last_index_290351];
        partition_sizze_290353 = last_offset_290354;
    }
    
    int64_t binop_x_296997 = m_290261 * n_290262;
    int64_t binop_y_296998 = (int64_t) 4 * binop_x_296997;
    int64_t bytes_296999 = smax64((int64_t) 0, binop_y_296998);
    
    if (mem_297000_cached_sizze_304349 < (size_t) bytes_296999) {
        mem_297000 = realloc(mem_297000, bytes_296999);
        mem_297000_cached_sizze_304349 = bytes_296999;
    }
    if (mem_297003_cached_sizze_304350 < (size_t) bytes_296968) {
        mem_297003 = realloc(mem_297003, bytes_296968);
        mem_297003_cached_sizze_304350 = bytes_296968;
    }
    
    int64_t binop_y_297021 = (int64_t) 4 * n_290262;
    int64_t bytes_297022 = smax64((int64_t) 0, binop_y_297021);
    
    if (mem_297023_cached_sizze_304351 < (size_t) bytes_297022) {
        mem_297023 = realloc(mem_297023, bytes_297022);
        mem_297023_cached_sizze_304351 = bytes_297022;
    }
    for (int64_t write_iter_294929 = 0; write_iter_294929 < m_290261;
         write_iter_294929++) {
        int64_t write_iv_294932;
        
        write_iv_294932 = ((int64_t *) mem_296972)[write_iter_294929];
        
        int64_t write_iv_294933;
        
        write_iv_294933 = ((int64_t *) mem_296969)[write_iter_294929];
        if (n_290262 * (int64_t) 4 > 0)
            memmove(mem_297023 + (int64_t) 0, Y_mem_296966.mem +
                    write_iter_294929 * n_290262 * (int64_t) 4, n_290262 *
                    (int64_t) 4);
        
        bool is_this_one_290364 = write_iv_294932 == (int64_t) 0;
        int64_t this_offset_290365 = (int64_t) -1 + write_iv_294933;
        int64_t total_res_290366;
        
        if (is_this_one_290364) {
            total_res_290366 = this_offset_290365;
        } else {
            total_res_290366 = (int64_t) -1;
        }
        if ((sle64((int64_t) 0, total_res_290366) && slt64(total_res_290366,
                                                           m_290261)) &&
            (sle64((int64_t) 0, (int64_t) 0) && slt64(n_290262 - (int64_t) 1,
                                                      n_290262))) {
            if (n_290262 * (int64_t) 4 > 0)
                memmove(mem_297000 + total_res_290366 * n_290262 * (int64_t) 4,
                        mem_297023 + (int64_t) 0, n_290262 * (int64_t) 4);
        }
        if (sle64((int64_t) 0, total_res_290366) && slt64(total_res_290366,
                                                          m_290261)) {
            ((int64_t *) mem_297003)[total_res_290366] = write_iter_294929;
        }
    }
    
    bool empty_slice_290367 = partition_sizze_290353 == (int64_t) 0;
    int64_t m_290368 = sub64(partition_sizze_290353, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_290369 = sle64((int64_t) 0, m_290368);
    bool i_p_m_t_s_leq_w_290370 = slt64(m_290368, m_290261);
    bool i_lte_j_290371 = sle64((int64_t) 0, partition_sizze_290353);
    bool y_290372 = zzero_leq_i_p_m_t_s_290369 && i_p_m_t_s_leq_w_290370;
    bool y_290373 = i_lte_j_290371 && y_290372;
    bool ok_or_empty_290374 = empty_slice_290367 || y_290373;
    bool index_certs_290375;
    
    if (!ok_or_empty_290374) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) partition_sizze_290353,
                               "] out of bounds for array of shape [",
                               (long long) m_290261, "].",
                               "-> #0  /prelude/soacs.fut:163:6-16\n   #1  stl.fut:416:7-66\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_290378 = sle64((int64_t) 4, n_p_290264);
    bool assert_c_290379;
    
    if (!assert_cond_290378) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (n_p >= 4)",
                               "-> #0  stl.fut:74:13-33\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t x_290380 = smod64(q_t_290266, (int64_t) 2);
    bool assert_cond_290381 = x_290380 == (int64_t) 1;
    bool assert_c_290382;
    
    if (!assert_cond_290381) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x % 2 == 1)",
                               "-> #0  utils.fut:20:3-23\n   #1  /prelude/functional.fut:39:62-64\n   #2  stl.fut:76:13-25\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_290383 = slt64((int64_t) 0, q_t_290266);
    bool assert_c_290384;
    
    if (!assert_cond_290383) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  /prelude/functional.fut:39:59-65\n   #2  stl.fut:76:13-25\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t x_290385 = smod64(q_l_290267, (int64_t) 2);
    bool assert_cond_290386 = x_290385 == (int64_t) 1;
    bool assert_c_290387;
    
    if (!assert_cond_290386) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x % 2 == 1)",
                               "-> #0  utils.fut:20:3-23\n   #1  /prelude/functional.fut:39:62-64\n   #2  stl.fut:77:13-25\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_290388 = slt64((int64_t) 0, q_l_290267);
    bool assert_c_290389;
    
    if (!assert_cond_290388) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  /prelude/functional.fut:39:59-65\n   #2  stl.fut:77:13-25\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_290398 = slt64((int64_t) 0, jump_t_290272);
    bool assert_c_290399;
    
    if (!assert_cond_290398) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  stl.fut:82:16-31\n   #2  stl.fut:419:61-435:77\n   #3  stl.fut:463:3-479:36\n   #4  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_290400 = slt64((int64_t) 0, jump_l_290273);
    bool assert_c_290401;
    
    if (!assert_cond_290400) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  stl.fut:83:16-31\n   #2  stl.fut:419:61-435:77\n   #3  stl.fut:463:3-479:36\n   #4  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_290402 = slt64((int64_t) 0, n_inner_290274);
    bool assert_c_290403;
    
    if (!assert_cond_290402) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  stl.fut:85:17-33\n   #2  stl.fut:419:61-435:77\n   #3  stl.fut:463:3-479:36\n   #4  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_290404 = slt64((int64_t) 0, n_outer_290275);
    bool assert_c_290405;
    
    if (!assert_cond_290404) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  stl.fut:86:17-33\n   #2  stl.fut:419:61-435:77\n   #3  stl.fut:463:3-479:36\n   #4  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    double ceil_res_290406;
    
    ceil_res_290406 = futrts_ceil64(ceil_arg_290282);
    
    int64_t defunc_0_f_res_290407 = fptosi_f64_i64(ceil_res_290406);
    int64_t pad_css_len_290408 = add64((int64_t) 2, defunc_0_f_res_290407);
    int64_t y_290409 = mul64((int64_t) 2, n_p_290264);
    int64_t C_len_290410 = add64(n_290262, y_290409);
    bool cond_290411 = jump_s_290271 == (int64_t) 1;
    int64_t s_n_m_290412;
    
    if (cond_290411) {
        s_n_m_290412 = pad_css_len_290408;
    } else {
        bool zzero_290413 = jump_s_290271 == (int64_t) 0;
        bool nonzzero_290414 = !zzero_290413;
        bool nonzzero_cert_290415;
        
        if (!nonzzero_290414) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:93:52-71\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
            if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
                return 1;
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t x_290416 = sdiv64(defunc_0_f_res_290407, jump_s_290271);
        int64_t s_n_m_f_res_290417 = add64((int64_t) 3, x_290416);
        
        s_n_m_290412 = s_n_m_f_res_290417;
    }
    
    bool cond_290418 = jump_l_290273 == (int64_t) 1;
    int64_t l_n_m_290419;
    
    if (cond_290418) {
        l_n_m_290419 = n_290262;
    } else {
        bool zzero_290420 = jump_l_290273 == (int64_t) 0;
        bool nonzzero_290421 = !zzero_290420;
        bool nonzzero_cert_290422;
        
        if (!nonzzero_290421) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:99:42-51\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
            if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
                return 1;
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t x_290423 = sdiv64(n_290262, jump_l_290273);
        int64_t l_n_m_f_res_290424 = add64((int64_t) 1, x_290423);
        
        l_n_m_290419 = l_n_m_f_res_290424;
    }
    
    bool cond_290425 = jump_t_290272 == (int64_t) 1;
    int64_t t_n_m_290426;
    
    if (cond_290425) {
        t_n_m_290426 = n_290262;
    } else {
        bool zzero_290427 = jump_t_290272 == (int64_t) 0;
        bool nonzzero_290428 = !zzero_290427;
        bool nonzzero_cert_290429;
        
        if (!nonzzero_290428) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:103:42-51\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
            if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
                return 1;
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t x_290430 = sdiv64(n_290262, jump_t_290272);
        int64_t t_n_m_f_res_290431 = add64((int64_t) 1, x_290430);
        
        t_n_m_290426 = t_n_m_f_res_290431;
    }
    
    int64_t i_290433 = sub64(n_290262, (int64_t) 1);
    bool x_290434 = sle64((int64_t) 0, i_290433);
    bool y_290435 = slt64(i_290433, n_290262);
    bool bounds_check_290436 = x_290434 && y_290435;
    bool index_certs_290437;
    
    if (!bounds_check_290436) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_290433,
                               "] out of bounds for array of shape [",
                               (long long) n_290262, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:45:13-20\n   #2  stl.fut:110:31-51\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_x_297037 = n_290262 * partition_sizze_290353;
    int64_t binop_y_297038 = (int64_t) 8 * binop_x_297037;
    int64_t bytes_297039 = smax64((int64_t) 0, binop_y_297038);
    
    if (mem_297040_cached_sizze_304352 < (size_t) bytes_297039) {
        mem_297040 = realloc(mem_297040, bytes_297039);
        mem_297040_cached_sizze_304352 = bytes_297039;
    }
    
    int64_t binop_y_297041 = (int64_t) 8 * partition_sizze_290353;
    int64_t bytes_297042 = smax64((int64_t) 0, binop_y_297041);
    
    if (mem_297043_cached_sizze_304353 < (size_t) bytes_297042) {
        mem_297043 = realloc(mem_297043, bytes_297042);
        mem_297043_cached_sizze_304353 = bytes_297042;
    }
    
    int64_t binop_y_297061 = (int64_t) 8 * n_290262;
    int64_t bytes_297062 = smax64((int64_t) 0, binop_y_297061);
    
    if (mem_297063_cached_sizze_304354 < (size_t) bytes_297062) {
        mem_297063 = realloc(mem_297063, bytes_297062);
        mem_297063_cached_sizze_304354 = bytes_297062;
    }
    if (mem_297078_cached_sizze_304355 < (size_t) bytes_297062) {
        mem_297078 = realloc(mem_297078, bytes_297062);
        mem_297078_cached_sizze_304355 = bytes_297062;
    }
    for (int64_t i_303848 = 0; i_303848 < n_290262; i_303848++) {
        ((int64_t *) mem_297078)[i_303848] = (int64_t) -1;
    }
    for (int64_t i_294955 = 0; i_294955 < partition_sizze_290353; i_294955++) {
        int64_t discard_294944;
        int64_t scanacc_294940 = (int64_t) 0;
        
        for (int64_t i_294942 = 0; i_294942 < n_290262; i_294942++) {
            float x_290445;
            
            x_290445 = ((float *) mem_297000)[i_294955 * n_290262 + i_294942];
            
            bool isnan_res_290446;
            
            isnan_res_290446 = futrts_isnan32(x_290445);
            
            bool defunc_0_p_res_290447 = !isnan_res_290446;
            int64_t defunc_0_f_res_290448 =
                    btoi_bool_i64(defunc_0_p_res_290447);
            int64_t defunc_1_op_res_290444 = add64(defunc_0_f_res_290448,
                                                   scanacc_294940);
            
            ((int64_t *) mem_297063)[i_294942] = defunc_1_op_res_290444;
            
            int64_t scanacc_tmp_303851 = defunc_1_op_res_290444;
            
            scanacc_294940 = scanacc_tmp_303851;
        }
        discard_294944 = scanacc_294940;
        if (n_290262 * (int64_t) 8 > 0)
            memmove(mem_297040 + i_294955 * n_290262 * (int64_t) 8, mem_297078 +
                    (int64_t) 0, n_290262 * (int64_t) 8);
        for (int64_t write_iter_294945 = 0; write_iter_294945 < n_290262;
             write_iter_294945++) {
            float write_iv_294947;
            
            write_iv_294947 = ((float *) mem_297000)[i_294955 * n_290262 +
                                                     write_iter_294945];
            
            int64_t write_iv_294948;
            
            write_iv_294948 = ((int64_t *) mem_297063)[write_iter_294945];
            
            bool isnan_res_290455;
            
            isnan_res_290455 = futrts_isnan32(write_iv_294947);
            
            bool defunc_0_p_res_290456 = !isnan_res_290455;
            int64_t defunc_1_f_res_290457;
            
            if (defunc_0_p_res_290456) {
                int64_t defunc_1_f_res_t_res_290458 = sub64(write_iv_294948,
                                                            (int64_t) 1);
                
                defunc_1_f_res_290457 = defunc_1_f_res_t_res_290458;
            } else {
                defunc_1_f_res_290457 = (int64_t) -1;
            }
            if ((sle64((int64_t) 0, i_294955) && slt64(i_294955,
                                                       partition_sizze_290353)) &&
                (sle64((int64_t) 0, defunc_1_f_res_290457) &&
                 slt64(defunc_1_f_res_290457, n_290262))) {
                ((int64_t *) mem_297040)[i_294955 * n_290262 +
                                         defunc_1_f_res_290457] =
                    write_iter_294945;
            }
        }
        if ((int64_t) 8 > 0)
            memmove(mem_297043 + i_294955 * (int64_t) 8, mem_297063 +
                    ((int64_t) 0 + (int64_t) 1 * i_290433) * (int64_t) 8,
                    (int64_t) 8);
    }
    
    bool bounds_invalid_upwards_290461 = slt64(defunc_0_f_res_290407,
                                               (int64_t) 0);
    bool valid_290462 = !bounds_invalid_upwards_290461;
    bool range_valid_c_290463;
    
    if (!valid_290462) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) defunc_0_f_res_290407,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:117:20-123:36\n   #4  /prelude/soacs.fut:59:3-10\n   #5  /prelude/array.fut:195:3-17\n   #6  utils.fut:6:3-16\n   #7  stl.fut:115:12-124:20\n   #8  stl.fut:114:5-125:11\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_x_297114 = n_p_290264 * partition_sizze_290353;
    int64_t binop_x_297115 = defunc_0_f_res_290407 * binop_x_297114;
    int64_t binop_y_297116 = (int64_t) 8 * binop_x_297115;
    int64_t bytes_297117 = smax64((int64_t) 0, binop_y_297116);
    
    if (mem_297118_cached_sizze_304356 < (size_t) bytes_297117) {
        mem_297118 = realloc(mem_297118, bytes_297117);
        mem_297118_cached_sizze_304356 = bytes_297117;
    }
    
    int64_t ctx_val_297131 = n_p_290264 * defunc_0_f_res_290407;
    
    for (int64_t i_294968 = 0; i_294968 < partition_sizze_290353; i_294968++) {
        for (int64_t i_294964 = 0; i_294964 < n_p_290264; i_294964++) {
            for (int64_t i_294960 = 0; i_294960 < defunc_0_f_res_290407;
                 i_294960++) {
                int64_t y_290471 = mul64(n_p_290264, i_294960);
                int64_t new_i_290472 = add64(y_290471, i_294964);
                bool cond_290473 = slt64(i_290433, new_i_290472);
                double defunc_0_f_res_290474;
                
                if (cond_290473) {
                    defunc_0_f_res_290474 = NAN;
                } else {
                    bool x_290475 = sle64((int64_t) 0, new_i_290472);
                    bool y_290476 = slt64(new_i_290472, n_290262);
                    bool bounds_check_290477 = x_290475 && y_290476;
                    bool index_certs_290478;
                    
                    if (!bounds_check_290477) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) new_i_290472,
                                      "] out of bounds for array of shape [",
                                      (long long) n_290262, "].",
                                      "-> #0  stl.fut:122:39-46\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:117:20-123:36\n   #5  /prelude/soacs.fut:59:3-10\n   #6  /prelude/array.fut:195:3-17\n   #7  utils.fut:6:3-16\n   #8  stl.fut:115:12-124:20\n   #9  stl.fut:114:5-125:11\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_303840,
                                           "mem_out_303840") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303839,
                                           "mem_out_303839") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303838,
                                           "mem_out_303838") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    float f32_arg_290479;
                    
                    f32_arg_290479 = ((float *) mem_297000)[i_294968 *
                                                            n_290262 +
                                                            new_i_290472];
                    
                    double f32_res_290480 = fpconv_f32_f64(f32_arg_290479);
                    
                    defunc_0_f_res_290474 = f32_res_290480;
                }
                ((double *) mem_297118)[i_294968 * ctx_val_297131 + i_294964 *
                                        defunc_0_f_res_290407 + i_294960] =
                    defunc_0_f_res_290474;
            }
        }
    }
    
    int64_t i_290482 = sub64(defunc_0_f_res_290407, (int64_t) 1);
    bool x_290483 = sle64((int64_t) 0, i_290482);
    bool y_290484 = slt64(i_290482, defunc_0_f_res_290407);
    bool bounds_check_290485 = x_290483 && y_290484;
    bool index_certs_290486;
    
    if (!bounds_check_290485) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_290482,
                               "] out of bounds for array of shape [",
                               (long long) defunc_0_f_res_290407, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:45:13-20\n   #2  stl.fut:131:51-67\n   #3  stl.fut:130:12-133:21\n   #4  stl.fut:129:5-134:16\n   #5  stl.fut:419:61-435:77\n   #6  stl.fut:463:3-479:36\n   #7  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (mem_297221_cached_sizze_304357 < (size_t) bytes_297117) {
        mem_297221 = realloc(mem_297221, bytes_297117);
        mem_297221_cached_sizze_304357 = bytes_297117;
    }
    
    int64_t binop_y_297223 = (int64_t) 8 * binop_x_297114;
    int64_t bytes_297224 = smax64((int64_t) 0, binop_y_297223);
    
    if (mem_297225_cached_sizze_304358 < (size_t) bytes_297224) {
        mem_297225 = realloc(mem_297225, bytes_297224);
        mem_297225_cached_sizze_304358 = bytes_297224;
    }
    
    int64_t binop_y_297276 = (int64_t) 8 * defunc_0_f_res_290407;
    int64_t bytes_297277 = smax64((int64_t) 0, binop_y_297276);
    
    if (mem_297278_cached_sizze_304359 < (size_t) bytes_297277) {
        mem_297278 = realloc(mem_297278, bytes_297277);
        mem_297278_cached_sizze_304359 = bytes_297277;
    }
    if (mem_297293_cached_sizze_304360 < (size_t) bytes_297277) {
        mem_297293 = realloc(mem_297293, bytes_297277);
        mem_297293_cached_sizze_304360 = bytes_297277;
    }
    for (int64_t i_303857 = 0; i_303857 < defunc_0_f_res_290407; i_303857++) {
        ((int64_t *) mem_297293)[i_303857] = (int64_t) -1;
    }
    for (int64_t i_294993 = 0; i_294993 < partition_sizze_290353; i_294993++) {
        for (int64_t i_294986 = 0; i_294986 < n_p_290264; i_294986++) {
            int64_t discard_294975;
            int64_t scanacc_294971 = (int64_t) 0;
            
            for (int64_t i_294973 = 0; i_294973 < defunc_0_f_res_290407;
                 i_294973++) {
                double x_290497;
                
                x_290497 = ((double *) mem_297118)[i_294993 * ctx_val_297131 +
                                                   i_294986 *
                                                   defunc_0_f_res_290407 +
                                                   i_294973];
                
                bool isnan_res_290498;
                
                isnan_res_290498 = futrts_isnan64(x_290497);
                
                bool defunc_0_p_res_290499 = !isnan_res_290498;
                int64_t defunc_0_f_res_290500 =
                        btoi_bool_i64(defunc_0_p_res_290499);
                int64_t defunc_1_op_res_290496 = add64(defunc_0_f_res_290500,
                                                       scanacc_294971);
                
                ((int64_t *) mem_297278)[i_294973] = defunc_1_op_res_290496;
                
                int64_t scanacc_tmp_303862 = defunc_1_op_res_290496;
                
                scanacc_294971 = scanacc_tmp_303862;
            }
            discard_294975 = scanacc_294971;
            if (defunc_0_f_res_290407 * (int64_t) 8 > 0)
                memmove(mem_297221 + (i_294993 * ctx_val_297131 + i_294986 *
                                      defunc_0_f_res_290407) * (int64_t) 8,
                        mem_297293 + (int64_t) 0, defunc_0_f_res_290407 *
                        (int64_t) 8);
            for (int64_t write_iter_294976 = 0; write_iter_294976 <
                 defunc_0_f_res_290407; write_iter_294976++) {
                double write_iv_294978;
                
                write_iv_294978 = ((double *) mem_297118)[i_294993 *
                                                          ctx_val_297131 +
                                                          i_294986 *
                                                          defunc_0_f_res_290407 +
                                                          write_iter_294976];
                
                int64_t write_iv_294979;
                
                write_iv_294979 = ((int64_t *) mem_297278)[write_iter_294976];
                
                bool isnan_res_290507;
                
                isnan_res_290507 = futrts_isnan64(write_iv_294978);
                
                bool defunc_0_p_res_290508 = !isnan_res_290507;
                int64_t defunc_1_f_res_290509;
                
                if (defunc_0_p_res_290508) {
                    int64_t defunc_1_f_res_t_res_290510 = sub64(write_iv_294979,
                                                                (int64_t) 1);
                    
                    defunc_1_f_res_290509 = defunc_1_f_res_t_res_290510;
                } else {
                    defunc_1_f_res_290509 = (int64_t) -1;
                }
                if (((sle64((int64_t) 0, i_294993) && slt64(i_294993,
                                                            partition_sizze_290353)) &&
                     (sle64((int64_t) 0, i_294986) && slt64(i_294986,
                                                            n_p_290264))) &&
                    (sle64((int64_t) 0, defunc_1_f_res_290509) &&
                     slt64(defunc_1_f_res_290509, defunc_0_f_res_290407))) {
                    ((int64_t *) mem_297221)[i_294993 * ctx_val_297131 +
                                             i_294986 * defunc_0_f_res_290407 +
                                             defunc_1_f_res_290509] =
                        write_iter_294976;
                }
            }
            if ((int64_t) 8 > 0)
                memmove(mem_297225 + (i_294993 * n_p_290264 + i_294986) *
                        (int64_t) 8, mem_297278 + ((int64_t) 0 + (int64_t) 1 *
                                                   i_290482) * (int64_t) 8,
                        (int64_t) 8);
        }
    }
    
    int64_t min_res_290513 = smin64(q_s_290265, defunc_0_f_res_290407);
    bool bounds_invalid_upwards_290514 = slt64(s_n_m_290412, (int64_t) 0);
    bool valid_290515 = !bounds_invalid_upwards_290514;
    bool range_valid_c_290516;
    
    if (!valid_290515) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) s_n_m_290412, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:638:3-665:10\n   #4  loess.fut:712:15-50\n   #5  stl.fut:140:20-80\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:139:12-141:40\n   #9  /prelude/soacs.fut:67:19-23\n   #10 /prelude/soacs.fut:67:3-37\n   #11 stl.fut:138:5-142:36\n   #12 stl.fut:419:61-435:77\n   #13 stl.fut:463:3-479:36\n   #14 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool loop_cond_290518 = slt64((int64_t) 1, min_res_290513);
    double i64_res_290519 = sitofp_i64_f64(q_s_290265);
    int64_t binop_x_297383 = s_n_m_290412 * binop_x_297114;
    int64_t binop_y_297384 = (int64_t) 8 * binop_x_297383;
    int64_t bytes_297385 = smax64((int64_t) 0, binop_y_297384);
    
    if (mem_297386_cached_sizze_304361 < (size_t) bytes_297385) {
        mem_297386 = realloc(mem_297386, bytes_297385);
        mem_297386_cached_sizze_304361 = bytes_297385;
    }
    if (mem_297391_cached_sizze_304362 < (size_t) bytes_297385) {
        mem_297391 = realloc(mem_297391, bytes_297385);
        mem_297391_cached_sizze_304362 = bytes_297385;
    }
    
    int64_t ctx_val_297415 = n_p_290264 * s_n_m_290412;
    int64_t binop_y_297450 = (int64_t) 8 * defunc_0_f_res_290407;
    int64_t bytes_297451 = smax64((int64_t) 0, binop_y_297450);
    
    if (mem_297452_cached_sizze_304363 < (size_t) bytes_297451) {
        mem_297452 = realloc(mem_297452, bytes_297451);
        mem_297452_cached_sizze_304363 = bytes_297451;
    }
    for (int64_t i_295018 = 0; i_295018 < partition_sizze_290353; i_295018++) {
        for (int64_t i_295011 = 0; i_295011 < n_p_290264; i_295011++) {
            int64_t x_290527;
            
            x_290527 = ((int64_t *) mem_297225)[i_295018 * n_p_290264 +
                                                i_295011];
            for (int64_t i_294998 = 0; i_294998 < defunc_0_f_res_290407;
                 i_294998++) {
                int64_t x_290529;
                
                x_290529 = ((int64_t *) mem_297221)[i_295018 * ctx_val_297131 +
                                                    i_295011 *
                                                    defunc_0_f_res_290407 +
                                                    i_294998];
                
                int64_t defunc_0_f_res_290530 = add64((int64_t) 1, x_290529);
                
                ((int64_t *) mem_297452)[i_294998] = defunc_0_f_res_290530;
            }
            
            int64_t min_arg_290531 = sub64(x_290527, (int64_t) 1);
            int64_t min_arg_290532 = sub64(x_290527, min_res_290513);
            int64_t min_res_290533 = smin64(q_s_290265, x_290527);
            double i64_res_290534 = sitofp_i64_f64(x_290527);
            double x_290535 = i64_res_290519 - i64_res_290534;
            double max_arg_290536 = x_290535 / 2.0;
            double max_res_290537 = fmax64(0.0, max_arg_290536);
            
            for (int64_t i_295004 = 0; i_295004 < s_n_m_290412; i_295004++) {
                bool cond_290541 = i_295004 == (int64_t) 0;
                int64_t defunc_0_m_fun_res_290542;
                
                if (cond_290541) {
                    defunc_0_m_fun_res_290542 = (int64_t) 0;
                } else {
                    int64_t y_290543 = sub64(s_n_m_290412, (int64_t) 1);
                    bool cond_290544 = i_295004 == y_290543;
                    int64_t defunc_0_m_fun_res_f_res_290545;
                    
                    if (cond_290544) {
                        int64_t defunc_0_m_fun_res_f_res_t_res_290546 =
                                sub64(pad_css_len_290408, (int64_t) 1);
                        
                        defunc_0_m_fun_res_f_res_290545 =
                            defunc_0_m_fun_res_f_res_t_res_290546;
                    } else {
                        int64_t x_290547 = sub64(i_295004, (int64_t) 1);
                        int64_t x_290548 = mul64(jump_s_290271, x_290547);
                        int64_t min_arg_290549 = add64((int64_t) 1, x_290548);
                        int64_t min_res_290550 = smin64(defunc_0_f_res_290407,
                                                        min_arg_290549);
                        
                        defunc_0_m_fun_res_f_res_290545 = min_res_290550;
                    }
                    defunc_0_m_fun_res_290542 = defunc_0_m_fun_res_f_res_290545;
                }
                
                bool init_idx_290551;
                int64_t init_idx_290552;
                int64_t init_idx_290553;
                bool loop_while_290554;
                int64_t low_290555;
                int64_t high_290556;
                
                loop_while_290554 = x_290483;
                low_290555 = (int64_t) 0;
                high_290556 = i_290482;
                while (loop_while_290554) {
                    int64_t x_290557 = add64(low_290555, high_290556);
                    int64_t mid_290558 = sdiv64(x_290557, (int64_t) 2);
                    bool x_290559 = sle64((int64_t) 0, mid_290558);
                    bool y_290560 = slt64(mid_290558, defunc_0_f_res_290407);
                    bool bounds_check_290561 = x_290559 && y_290560;
                    bool index_certs_290562;
                    
                    if (!bounds_check_290561) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) mid_290558,
                                      "] out of bounds for array of shape [",
                                      (long long) defunc_0_f_res_290407, "].",
                                      "-> #0  loess.fut:645:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:712:15-50\n   #6  stl.fut:140:20-80\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:139:12-141:40\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:138:5-142:36\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_303840,
                                           "mem_out_303840") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303839,
                                           "mem_out_303839") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303838,
                                           "mem_out_303838") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t mid_id_290563;
                    
                    mid_id_290563 = ((int64_t *) mem_297452)[mid_290558];
                    
                    bool cond_290564 = slt64(mid_id_290563, (int64_t) 0);
                    int64_t mid_idx_290565;
                    
                    if (cond_290564) {
                        mid_idx_290565 = (int64_t) 9223372036854775807;
                    } else {
                        mid_idx_290565 = mid_id_290563;
                    }
                    
                    bool cond_290566 = sle64(defunc_0_m_fun_res_290542,
                                             mid_idx_290565);
                    int64_t loopres_290567;
                    int64_t loopres_290568;
                    
                    if (cond_290566) {
                        int64_t loopres_t_res_290569 = sub64(mid_290558,
                                                             (int64_t) 1);
                        
                        loopres_290567 = low_290555;
                        loopres_290568 = loopres_t_res_290569;
                    } else {
                        int64_t loopres_f_res_290570 = add64((int64_t) 1,
                                                             mid_290558);
                        
                        loopres_290567 = loopres_f_res_290570;
                        loopres_290568 = high_290556;
                    }
                    
                    bool loop_cond_290571 = sle64(loopres_290567,
                                                  loopres_290568);
                    bool loop_while_tmp_303872 = loop_cond_290571;
                    int64_t low_tmp_303873 = loopres_290567;
                    int64_t high_tmp_303874 = loopres_290568;
                    
                    loop_while_290554 = loop_while_tmp_303872;
                    low_290555 = low_tmp_303873;
                    high_290556 = high_tmp_303874;
                }
                init_idx_290551 = loop_while_290554;
                init_idx_290552 = low_290555;
                init_idx_290553 = high_290556;
                
                bool idx_290572;
                int64_t idx_290573;
                int64_t idx_290574;
                int64_t idx_290575;
                bool loop_while_290576;
                int64_t l_idx_290577;
                int64_t r_idx_290578;
                int64_t span_290579;
                
                loop_while_290576 = loop_cond_290518;
                l_idx_290577 = init_idx_290552;
                r_idx_290578 = init_idx_290552;
                span_290579 = (int64_t) 1;
                while (loop_while_290576) {
                    int64_t max_arg_290580 = sub64(l_idx_290577, (int64_t) 1);
                    int64_t max_res_290581 = smax64((int64_t) 0,
                                                    max_arg_290580);
                    int64_t min_arg_290582 = add64((int64_t) 1, r_idx_290578);
                    int64_t min_res_290583 = smin64(min_arg_290531,
                                                    min_arg_290582);
                    bool x_290584 = sle64((int64_t) 0, max_res_290581);
                    bool y_290585 = slt64(max_res_290581,
                                          defunc_0_f_res_290407);
                    bool bounds_check_290586 = x_290584 && y_290585;
                    bool index_certs_290587;
                    
                    if (!bounds_check_290586) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) max_res_290581,
                                      "] out of bounds for array of shape [",
                                      (long long) defunc_0_f_res_290407, "].",
                                      "-> #0  loess.fut:655:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:712:15-50\n   #6  stl.fut:140:20-80\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:139:12-141:40\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:138:5-142:36\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_303840,
                                           "mem_out_303840") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303839,
                                           "mem_out_303839") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303838,
                                           "mem_out_303838") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t x_290588;
                    
                    x_290588 = ((int64_t *) mem_297452)[max_res_290581];
                    
                    int64_t abs_arg_290589 = sub64(x_290588,
                                                   defunc_0_m_fun_res_290542);
                    int64_t abs_res_290590 = abs64(abs_arg_290589);
                    bool x_290591 = sle64((int64_t) 0, min_res_290583);
                    bool y_290592 = slt64(min_res_290583,
                                          defunc_0_f_res_290407);
                    bool bounds_check_290593 = x_290591 && y_290592;
                    bool index_certs_290594;
                    
                    if (!bounds_check_290593) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_290583,
                                      "] out of bounds for array of shape [",
                                      (long long) defunc_0_f_res_290407, "].",
                                      "-> #0  loess.fut:656:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:712:15-50\n   #6  stl.fut:140:20-80\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:139:12-141:40\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:138:5-142:36\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_303840,
                                           "mem_out_303840") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303839,
                                           "mem_out_303839") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303838,
                                           "mem_out_303838") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t x_290595;
                    
                    x_290595 = ((int64_t *) mem_297452)[min_res_290583];
                    
                    int64_t abs_arg_290596 = sub64(x_290595,
                                                   defunc_0_m_fun_res_290542);
                    int64_t abs_res_290597 = abs64(abs_arg_290596);
                    bool cond_290598 = max_res_290581 == l_idx_290577;
                    int64_t loopres_290599;
                    int64_t loopres_290600;
                    int64_t loopres_290601;
                    
                    if (cond_290598) {
                        loopres_290599 = l_idx_290577;
                        loopres_290600 = r_idx_290578;
                        loopres_290601 = min_res_290513;
                    } else {
                        bool cond_290602 = slt64(abs_res_290590,
                                                 abs_res_290597);
                        bool cond_f_res_290603 = min_res_290583 == r_idx_290578;
                        bool x_290604 = !cond_290602;
                        bool y_290605 = cond_f_res_290603 && x_290604;
                        bool cond_290606 = cond_290602 || y_290605;
                        int64_t loopres_f_res_290607;
                        
                        if (cond_290606) {
                            loopres_f_res_290607 = max_res_290581;
                        } else {
                            loopres_f_res_290607 = l_idx_290577;
                        }
                        
                        int64_t loopres_f_res_290608;
                        
                        if (cond_290606) {
                            loopres_f_res_290608 = r_idx_290578;
                        } else {
                            loopres_f_res_290608 = min_res_290583;
                        }
                        
                        int64_t loopres_f_res_290609;
                        
                        if (cond_290606) {
                            int64_t loopres_f_res_t_res_290610 =
                                    add64((int64_t) 1, span_290579);
                            
                            loopres_f_res_290609 = loopres_f_res_t_res_290610;
                        } else {
                            int64_t loopres_f_res_f_res_290611 =
                                    add64((int64_t) 1, span_290579);
                            
                            loopres_f_res_290609 = loopres_f_res_f_res_290611;
                        }
                        loopres_290599 = loopres_f_res_290607;
                        loopres_290600 = loopres_f_res_290608;
                        loopres_290601 = loopres_f_res_290609;
                    }
                    
                    bool loop_cond_290612 = slt64(loopres_290601,
                                                  min_res_290513);
                    bool loop_while_tmp_303875 = loop_cond_290612;
                    int64_t l_idx_tmp_303876 = loopres_290599;
                    int64_t r_idx_tmp_303877 = loopres_290600;
                    int64_t span_tmp_303878 = loopres_290601;
                    
                    loop_while_290576 = loop_while_tmp_303875;
                    l_idx_290577 = l_idx_tmp_303876;
                    r_idx_290578 = r_idx_tmp_303877;
                    span_290579 = span_tmp_303878;
                }
                idx_290572 = loop_while_290576;
                idx_290573 = l_idx_290577;
                idx_290574 = r_idx_290578;
                idx_290575 = span_290579;
                
                int64_t min_res_290613 = smin64(min_arg_290532, idx_290573);
                int64_t max_res_290614 = smax64((int64_t) 0, min_res_290613);
                int64_t defunc_0_m_fun_res_290615;
                
                if (cond_290541) {
                    defunc_0_m_fun_res_290615 = (int64_t) 0;
                } else {
                    int64_t y_290616 = sub64(s_n_m_290412, (int64_t) 1);
                    bool cond_290617 = i_295004 == y_290616;
                    int64_t defunc_0_m_fun_res_f_res_290618;
                    
                    if (cond_290617) {
                        int64_t defunc_0_m_fun_res_f_res_t_res_290619 =
                                sub64(pad_css_len_290408, (int64_t) 1);
                        
                        defunc_0_m_fun_res_f_res_290618 =
                            defunc_0_m_fun_res_f_res_t_res_290619;
                    } else {
                        int64_t x_290620 = sub64(i_295004, (int64_t) 1);
                        int64_t x_290621 = mul64(jump_s_290271, x_290620);
                        int64_t min_arg_290622 = add64((int64_t) 1, x_290621);
                        int64_t min_res_290623 = smin64(defunc_0_f_res_290407,
                                                        min_arg_290622);
                        
                        defunc_0_m_fun_res_f_res_290618 = min_res_290623;
                    }
                    defunc_0_m_fun_res_290615 = defunc_0_m_fun_res_f_res_290618;
                }
                
                int64_t x_290624 = add64(min_res_290533, max_res_290614);
                int64_t r_290625 = sub64(x_290624, (int64_t) 1);
                bool x_290626 = sle64((int64_t) 0, r_290625);
                bool y_290627 = slt64(r_290625, defunc_0_f_res_290407);
                bool bounds_check_290628 = x_290626 && y_290627;
                bool index_certs_290629;
                
                if (!bounds_check_290628) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) r_290625,
                                  "] out of bounds for array of shape [",
                                  (long long) defunc_0_f_res_290407, "].",
                                  "-> #0  loess.fut:680:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:675:3-683:25\n   #4  loess.fut:713:16-54\n   #5  stl.fut:140:20-80\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:139:12-141:40\n   #9  /prelude/soacs.fut:67:19-23\n   #10 /prelude/soacs.fut:67:3-37\n   #11 stl.fut:138:5-142:36\n   #12 stl.fut:419:61-435:77\n   #13 stl.fut:463:3-479:36\n   #14 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_290630;
                
                x_290630 = ((int64_t *) mem_297452)[r_290625];
                
                int64_t abs_arg_290631 = sub64(x_290630,
                                               defunc_0_m_fun_res_290615);
                int64_t abs_res_290632 = abs64(abs_arg_290631);
                bool x_290633 = sle64((int64_t) 0, max_res_290614);
                bool y_290634 = slt64(max_res_290614, defunc_0_f_res_290407);
                bool bounds_check_290635 = x_290633 && y_290634;
                bool index_certs_290636;
                
                if (!bounds_check_290635) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_290614,
                                  "] out of bounds for array of shape [",
                                  (long long) defunc_0_f_res_290407, "].",
                                  "-> #0  loess.fut:679:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:675:3-683:25\n   #4  loess.fut:713:16-54\n   #5  stl.fut:140:20-80\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:139:12-141:40\n   #9  /prelude/soacs.fut:67:19-23\n   #10 /prelude/soacs.fut:67:3-37\n   #11 stl.fut:138:5-142:36\n   #12 stl.fut:419:61-435:77\n   #13 stl.fut:463:3-479:36\n   #14 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_290637;
                
                x_290637 = ((int64_t *) mem_297452)[max_res_290614];
                
                int64_t abs_arg_290638 = sub64(x_290637,
                                               defunc_0_m_fun_res_290615);
                int64_t abs_res_290639 = abs64(abs_arg_290638);
                int64_t max_res_290640 = smax64(abs_res_290632, abs_res_290639);
                double defunc_0_f_res_290641 = sitofp_i64_f64(max_res_290640);
                double defunc_1_f_res_290642 = max_res_290537 +
                       defunc_0_f_res_290641;
                
                ((double *) mem_297391)[i_295018 * ctx_val_297415 + i_295011 *
                                        s_n_m_290412 + i_295004] =
                    defunc_1_f_res_290642;
                ((int64_t *) mem_297386)[i_295018 * ctx_val_297415 + i_295011 *
                                         s_n_m_290412 + i_295004] =
                    max_res_290614;
            }
        }
    }
    
    int64_t min_res_290645 = smin64(n_290262, q_l_290267);
    bool bounds_invalid_upwards_290646 = slt64(l_n_m_290419, (int64_t) 0);
    bool valid_290647 = !bounds_invalid_upwards_290646;
    bool range_valid_c_290648;
    
    if (!valid_290647) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) l_n_m_290419, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:638:3-665:10\n   #4  loess.fut:698:15-61\n   #5  stl.fut:148:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:146:5-149:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool loop_cond_290650 = slt64((int64_t) 1, min_res_290645);
    double i64_res_290651 = sitofp_i64_f64(q_l_290267);
    int64_t binop_x_297603 = partition_sizze_290353 * l_n_m_290419;
    int64_t binop_y_297604 = (int64_t) 8 * binop_x_297603;
    int64_t bytes_297605 = smax64((int64_t) 0, binop_y_297604);
    
    if (mem_297606_cached_sizze_304364 < (size_t) bytes_297605) {
        mem_297606 = realloc(mem_297606, bytes_297605);
        mem_297606_cached_sizze_304364 = bytes_297605;
    }
    if (mem_297610_cached_sizze_304365 < (size_t) bytes_297605) {
        mem_297610 = realloc(mem_297610, bytes_297605);
        mem_297610_cached_sizze_304365 = bytes_297605;
    }
    
    int64_t binop_y_297631 = (int64_t) 8 * n_290262;
    int64_t bytes_297632 = smax64((int64_t) 0, binop_y_297631);
    
    if (mem_297633_cached_sizze_304366 < (size_t) bytes_297632) {
        mem_297633 = realloc(mem_297633, bytes_297632);
        mem_297633_cached_sizze_304366 = bytes_297632;
    }
    for (int64_t i_295036 = 0; i_295036 < partition_sizze_290353; i_295036++) {
        int64_t x_290655;
        
        x_290655 = ((int64_t *) mem_297043)[i_295036];
        for (int64_t i_295023 = 0; i_295023 < n_290262; i_295023++) {
            int64_t x_290657;
            
            x_290657 = ((int64_t *) mem_297040)[i_295036 * n_290262 + i_295023];
            
            int64_t defunc_0_f_res_290658 = add64((int64_t) 1, x_290657);
            
            ((int64_t *) mem_297633)[i_295023] = defunc_0_f_res_290658;
        }
        
        int64_t min_arg_290659 = sub64(x_290655, (int64_t) 1);
        int64_t min_arg_290660 = sub64(x_290655, min_res_290645);
        int64_t min_res_290661 = smin64(q_l_290267, x_290655);
        double i64_res_290662 = sitofp_i64_f64(x_290655);
        double x_290663 = i64_res_290651 - i64_res_290662;
        double max_arg_290664 = x_290663 / 2.0;
        double max_res_290665 = fmax64(0.0, max_arg_290664);
        
        for (int64_t i_295029 = 0; i_295029 < l_n_m_290419; i_295029++) {
            int64_t min_arg_290669 = mul64(jump_l_290273, i_295029);
            int64_t min_res_290670 = smin64(i_290433, min_arg_290669);
            int64_t defunc_0_g_res_290671 = add64((int64_t) 1, min_res_290670);
            bool init_idx_290672;
            int64_t init_idx_290673;
            int64_t init_idx_290674;
            bool loop_while_290675;
            int64_t low_290676;
            int64_t high_290677;
            
            loop_while_290675 = x_290434;
            low_290676 = (int64_t) 0;
            high_290677 = i_290433;
            while (loop_while_290675) {
                int64_t x_290678 = add64(low_290676, high_290677);
                int64_t mid_290679 = sdiv64(x_290678, (int64_t) 2);
                bool x_290680 = sle64((int64_t) 0, mid_290679);
                bool y_290681 = slt64(mid_290679, n_290262);
                bool bounds_check_290682 = x_290680 && y_290681;
                bool index_certs_290683;
                
                if (!bounds_check_290682) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_290679,
                                  "] out of bounds for array of shape [",
                                  (long long) n_290262, "].",
                                  "-> #0  loess.fut:645:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:698:15-61\n   #6  stl.fut:148:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:146:5-149:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t mid_id_290684;
                
                mid_id_290684 = ((int64_t *) mem_297633)[mid_290679];
                
                bool cond_290685 = slt64(mid_id_290684, (int64_t) 0);
                int64_t mid_idx_290686;
                
                if (cond_290685) {
                    mid_idx_290686 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_290686 = mid_id_290684;
                }
                
                bool cond_290687 = sle64(defunc_0_g_res_290671, mid_idx_290686);
                int64_t loopres_290688;
                int64_t loopres_290689;
                
                if (cond_290687) {
                    int64_t loopres_t_res_290690 = sub64(mid_290679,
                                                         (int64_t) 1);
                    
                    loopres_290688 = low_290676;
                    loopres_290689 = loopres_t_res_290690;
                } else {
                    int64_t loopres_f_res_290691 = add64((int64_t) 1,
                                                         mid_290679);
                    
                    loopres_290688 = loopres_f_res_290691;
                    loopres_290689 = high_290677;
                }
                
                bool loop_cond_290692 = sle64(loopres_290688, loopres_290689);
                bool loop_while_tmp_303884 = loop_cond_290692;
                int64_t low_tmp_303885 = loopres_290688;
                int64_t high_tmp_303886 = loopres_290689;
                
                loop_while_290675 = loop_while_tmp_303884;
                low_290676 = low_tmp_303885;
                high_290677 = high_tmp_303886;
            }
            init_idx_290672 = loop_while_290675;
            init_idx_290673 = low_290676;
            init_idx_290674 = high_290677;
            
            bool idx_290693;
            int64_t idx_290694;
            int64_t idx_290695;
            int64_t idx_290696;
            bool loop_while_290697;
            int64_t l_idx_290698;
            int64_t r_idx_290699;
            int64_t span_290700;
            
            loop_while_290697 = loop_cond_290650;
            l_idx_290698 = init_idx_290673;
            r_idx_290699 = init_idx_290673;
            span_290700 = (int64_t) 1;
            while (loop_while_290697) {
                int64_t max_arg_290701 = sub64(l_idx_290698, (int64_t) 1);
                int64_t max_res_290702 = smax64((int64_t) 0, max_arg_290701);
                int64_t min_arg_290703 = add64((int64_t) 1, r_idx_290699);
                int64_t min_res_290704 = smin64(min_arg_290659, min_arg_290703);
                bool x_290705 = sle64((int64_t) 0, max_res_290702);
                bool y_290706 = slt64(max_res_290702, n_290262);
                bool bounds_check_290707 = x_290705 && y_290706;
                bool index_certs_290708;
                
                if (!bounds_check_290707) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_290702,
                                  "] out of bounds for array of shape [",
                                  (long long) n_290262, "].",
                                  "-> #0  loess.fut:655:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:698:15-61\n   #6  stl.fut:148:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:146:5-149:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_290709;
                
                x_290709 = ((int64_t *) mem_297633)[max_res_290702];
                
                int64_t abs_arg_290710 = sub64(x_290709, defunc_0_g_res_290671);
                int64_t abs_res_290711 = abs64(abs_arg_290710);
                bool x_290712 = sle64((int64_t) 0, min_res_290704);
                bool y_290713 = slt64(min_res_290704, n_290262);
                bool bounds_check_290714 = x_290712 && y_290713;
                bool index_certs_290715;
                
                if (!bounds_check_290714) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_290704,
                                  "] out of bounds for array of shape [",
                                  (long long) n_290262, "].",
                                  "-> #0  loess.fut:656:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:698:15-61\n   #6  stl.fut:148:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:146:5-149:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_290716;
                
                x_290716 = ((int64_t *) mem_297633)[min_res_290704];
                
                int64_t abs_arg_290717 = sub64(x_290716, defunc_0_g_res_290671);
                int64_t abs_res_290718 = abs64(abs_arg_290717);
                bool cond_290719 = max_res_290702 == l_idx_290698;
                int64_t loopres_290720;
                int64_t loopres_290721;
                int64_t loopres_290722;
                
                if (cond_290719) {
                    loopres_290720 = l_idx_290698;
                    loopres_290721 = r_idx_290699;
                    loopres_290722 = min_res_290645;
                } else {
                    bool cond_290723 = slt64(abs_res_290711, abs_res_290718);
                    bool cond_f_res_290724 = min_res_290704 == r_idx_290699;
                    bool x_290725 = !cond_290723;
                    bool y_290726 = cond_f_res_290724 && x_290725;
                    bool cond_290727 = cond_290723 || y_290726;
                    int64_t loopres_f_res_290728;
                    
                    if (cond_290727) {
                        loopres_f_res_290728 = max_res_290702;
                    } else {
                        loopres_f_res_290728 = l_idx_290698;
                    }
                    
                    int64_t loopres_f_res_290729;
                    
                    if (cond_290727) {
                        loopres_f_res_290729 = r_idx_290699;
                    } else {
                        loopres_f_res_290729 = min_res_290704;
                    }
                    
                    int64_t loopres_f_res_290730;
                    
                    if (cond_290727) {
                        int64_t loopres_f_res_t_res_290731 = add64((int64_t) 1,
                                                                   span_290700);
                        
                        loopres_f_res_290730 = loopres_f_res_t_res_290731;
                    } else {
                        int64_t loopres_f_res_f_res_290732 = add64((int64_t) 1,
                                                                   span_290700);
                        
                        loopres_f_res_290730 = loopres_f_res_f_res_290732;
                    }
                    loopres_290720 = loopres_f_res_290728;
                    loopres_290721 = loopres_f_res_290729;
                    loopres_290722 = loopres_f_res_290730;
                }
                
                bool loop_cond_290733 = slt64(loopres_290722, min_res_290645);
                bool loop_while_tmp_303887 = loop_cond_290733;
                int64_t l_idx_tmp_303888 = loopres_290720;
                int64_t r_idx_tmp_303889 = loopres_290721;
                int64_t span_tmp_303890 = loopres_290722;
                
                loop_while_290697 = loop_while_tmp_303887;
                l_idx_290698 = l_idx_tmp_303888;
                r_idx_290699 = r_idx_tmp_303889;
                span_290700 = span_tmp_303890;
            }
            idx_290693 = loop_while_290697;
            idx_290694 = l_idx_290698;
            idx_290695 = r_idx_290699;
            idx_290696 = span_290700;
            
            int64_t min_res_290734 = smin64(min_arg_290660, idx_290694);
            int64_t max_res_290735 = smax64((int64_t) 0, min_res_290734);
            int64_t x_290736 = add64(min_res_290661, max_res_290735);
            int64_t r_290737 = sub64(x_290736, (int64_t) 1);
            bool x_290738 = sle64((int64_t) 0, r_290737);
            bool y_290739 = slt64(r_290737, n_290262);
            bool bounds_check_290740 = x_290738 && y_290739;
            bool index_certs_290741;
            
            if (!bounds_check_290740) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_290737,
                              "] out of bounds for array of shape [",
                              (long long) n_290262, "].",
                              "-> #0  loess.fut:680:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:675:3-683:25\n   #4  loess.fut:699:16-51\n   #5  stl.fut:148:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:146:5-149:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
                    return 1;
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t x_290742;
            
            x_290742 = ((int64_t *) mem_297040)[i_295036 * n_290262 + r_290737];
            
            int64_t abs_arg_290743 = sub64(x_290742, min_res_290670);
            int64_t abs_res_290744 = abs64(abs_arg_290743);
            bool x_290745 = sle64((int64_t) 0, max_res_290735);
            bool y_290746 = slt64(max_res_290735, n_290262);
            bool bounds_check_290747 = x_290745 && y_290746;
            bool index_certs_290748;
            
            if (!bounds_check_290747) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_290735,
                              "] out of bounds for array of shape [",
                              (long long) n_290262, "].",
                              "-> #0  loess.fut:679:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:675:3-683:25\n   #4  loess.fut:699:16-51\n   #5  stl.fut:148:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:146:5-149:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
                    return 1;
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t x_290749;
            
            x_290749 = ((int64_t *) mem_297040)[i_295036 * n_290262 +
                                                max_res_290735];
            
            int64_t abs_arg_290750 = sub64(x_290749, min_res_290670);
            int64_t abs_res_290751 = abs64(abs_arg_290750);
            int64_t max_res_290752 = smax64(abs_res_290744, abs_res_290751);
            double defunc_0_f_res_290753 = sitofp_i64_f64(max_res_290752);
            double defunc_1_f_res_290754 = max_res_290665 +
                   defunc_0_f_res_290753;
            
            ((double *) mem_297610)[i_295036 * l_n_m_290419 + i_295029] =
                defunc_1_f_res_290754;
            ((int64_t *) mem_297606)[i_295036 * l_n_m_290419 + i_295029] =
                max_res_290735;
        }
    }
    
    int64_t min_res_290757 = smin64(n_290262, q_t_290266);
    bool bounds_invalid_upwards_290758 = slt64(t_n_m_290426, (int64_t) 0);
    bool valid_290759 = !bounds_invalid_upwards_290758;
    bool range_valid_c_290760;
    
    if (!valid_290759) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) t_n_m_290426, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:638:3-665:10\n   #4  loess.fut:698:15-61\n   #5  stl.fut:155:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:153:5-156:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool loop_cond_290762 = slt64((int64_t) 1, min_res_290757);
    double i64_res_290763 = sitofp_i64_f64(q_t_290266);
    int64_t binop_x_297712 = partition_sizze_290353 * t_n_m_290426;
    int64_t binop_y_297713 = (int64_t) 8 * binop_x_297712;
    int64_t bytes_297714 = smax64((int64_t) 0, binop_y_297713);
    
    if (mem_297715_cached_sizze_304367 < (size_t) bytes_297714) {
        mem_297715 = realloc(mem_297715, bytes_297714);
        mem_297715_cached_sizze_304367 = bytes_297714;
    }
    if (mem_297719_cached_sizze_304368 < (size_t) bytes_297714) {
        mem_297719 = realloc(mem_297719, bytes_297714);
        mem_297719_cached_sizze_304368 = bytes_297714;
    }
    
    int64_t binop_y_297740 = (int64_t) 8 * n_290262;
    int64_t bytes_297741 = smax64((int64_t) 0, binop_y_297740);
    
    if (mem_297742_cached_sizze_304369 < (size_t) bytes_297741) {
        mem_297742 = realloc(mem_297742, bytes_297741);
        mem_297742_cached_sizze_304369 = bytes_297741;
    }
    for (int64_t i_295054 = 0; i_295054 < partition_sizze_290353; i_295054++) {
        int64_t x_290767;
        
        x_290767 = ((int64_t *) mem_297043)[i_295054];
        for (int64_t i_295041 = 0; i_295041 < n_290262; i_295041++) {
            int64_t x_290769;
            
            x_290769 = ((int64_t *) mem_297040)[i_295054 * n_290262 + i_295041];
            
            int64_t defunc_0_f_res_290770 = add64((int64_t) 1, x_290769);
            
            ((int64_t *) mem_297742)[i_295041] = defunc_0_f_res_290770;
        }
        
        int64_t min_arg_290771 = sub64(x_290767, (int64_t) 1);
        int64_t min_arg_290772 = sub64(x_290767, min_res_290757);
        int64_t min_res_290773 = smin64(q_t_290266, x_290767);
        double i64_res_290774 = sitofp_i64_f64(x_290767);
        double x_290775 = i64_res_290763 - i64_res_290774;
        double max_arg_290776 = x_290775 / 2.0;
        double max_res_290777 = fmax64(0.0, max_arg_290776);
        
        for (int64_t i_295047 = 0; i_295047 < t_n_m_290426; i_295047++) {
            int64_t min_arg_290781 = mul64(jump_t_290272, i_295047);
            int64_t min_res_290782 = smin64(i_290433, min_arg_290781);
            int64_t defunc_0_g_res_290783 = add64((int64_t) 1, min_res_290782);
            bool init_idx_290784;
            int64_t init_idx_290785;
            int64_t init_idx_290786;
            bool loop_while_290787;
            int64_t low_290788;
            int64_t high_290789;
            
            loop_while_290787 = x_290434;
            low_290788 = (int64_t) 0;
            high_290789 = i_290433;
            while (loop_while_290787) {
                int64_t x_290790 = add64(low_290788, high_290789);
                int64_t mid_290791 = sdiv64(x_290790, (int64_t) 2);
                bool x_290792 = sle64((int64_t) 0, mid_290791);
                bool y_290793 = slt64(mid_290791, n_290262);
                bool bounds_check_290794 = x_290792 && y_290793;
                bool index_certs_290795;
                
                if (!bounds_check_290794) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_290791,
                                  "] out of bounds for array of shape [",
                                  (long long) n_290262, "].",
                                  "-> #0  loess.fut:645:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:698:15-61\n   #6  stl.fut:155:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:153:5-156:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t mid_id_290796;
                
                mid_id_290796 = ((int64_t *) mem_297742)[mid_290791];
                
                bool cond_290797 = slt64(mid_id_290796, (int64_t) 0);
                int64_t mid_idx_290798;
                
                if (cond_290797) {
                    mid_idx_290798 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_290798 = mid_id_290796;
                }
                
                bool cond_290799 = sle64(defunc_0_g_res_290783, mid_idx_290798);
                int64_t loopres_290800;
                int64_t loopres_290801;
                
                if (cond_290799) {
                    int64_t loopres_t_res_290802 = sub64(mid_290791,
                                                         (int64_t) 1);
                    
                    loopres_290800 = low_290788;
                    loopres_290801 = loopres_t_res_290802;
                } else {
                    int64_t loopres_f_res_290803 = add64((int64_t) 1,
                                                         mid_290791);
                    
                    loopres_290800 = loopres_f_res_290803;
                    loopres_290801 = high_290789;
                }
                
                bool loop_cond_290804 = sle64(loopres_290800, loopres_290801);
                bool loop_while_tmp_303896 = loop_cond_290804;
                int64_t low_tmp_303897 = loopres_290800;
                int64_t high_tmp_303898 = loopres_290801;
                
                loop_while_290787 = loop_while_tmp_303896;
                low_290788 = low_tmp_303897;
                high_290789 = high_tmp_303898;
            }
            init_idx_290784 = loop_while_290787;
            init_idx_290785 = low_290788;
            init_idx_290786 = high_290789;
            
            bool idx_290805;
            int64_t idx_290806;
            int64_t idx_290807;
            int64_t idx_290808;
            bool loop_while_290809;
            int64_t l_idx_290810;
            int64_t r_idx_290811;
            int64_t span_290812;
            
            loop_while_290809 = loop_cond_290762;
            l_idx_290810 = init_idx_290785;
            r_idx_290811 = init_idx_290785;
            span_290812 = (int64_t) 1;
            while (loop_while_290809) {
                int64_t max_arg_290813 = sub64(l_idx_290810, (int64_t) 1);
                int64_t max_res_290814 = smax64((int64_t) 0, max_arg_290813);
                int64_t min_arg_290815 = add64((int64_t) 1, r_idx_290811);
                int64_t min_res_290816 = smin64(min_arg_290771, min_arg_290815);
                bool x_290817 = sle64((int64_t) 0, max_res_290814);
                bool y_290818 = slt64(max_res_290814, n_290262);
                bool bounds_check_290819 = x_290817 && y_290818;
                bool index_certs_290820;
                
                if (!bounds_check_290819) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_290814,
                                  "] out of bounds for array of shape [",
                                  (long long) n_290262, "].",
                                  "-> #0  loess.fut:655:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:698:15-61\n   #6  stl.fut:155:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:153:5-156:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_290821;
                
                x_290821 = ((int64_t *) mem_297742)[max_res_290814];
                
                int64_t abs_arg_290822 = sub64(x_290821, defunc_0_g_res_290783);
                int64_t abs_res_290823 = abs64(abs_arg_290822);
                bool x_290824 = sle64((int64_t) 0, min_res_290816);
                bool y_290825 = slt64(min_res_290816, n_290262);
                bool bounds_check_290826 = x_290824 && y_290825;
                bool index_certs_290827;
                
                if (!bounds_check_290826) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_290816,
                                  "] out of bounds for array of shape [",
                                  (long long) n_290262, "].",
                                  "-> #0  loess.fut:656:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:698:15-61\n   #6  stl.fut:155:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:153:5-156:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_290828;
                
                x_290828 = ((int64_t *) mem_297742)[min_res_290816];
                
                int64_t abs_arg_290829 = sub64(x_290828, defunc_0_g_res_290783);
                int64_t abs_res_290830 = abs64(abs_arg_290829);
                bool cond_290831 = max_res_290814 == l_idx_290810;
                int64_t loopres_290832;
                int64_t loopres_290833;
                int64_t loopres_290834;
                
                if (cond_290831) {
                    loopres_290832 = l_idx_290810;
                    loopres_290833 = r_idx_290811;
                    loopres_290834 = min_res_290757;
                } else {
                    bool cond_290835 = slt64(abs_res_290823, abs_res_290830);
                    bool cond_f_res_290836 = min_res_290816 == r_idx_290811;
                    bool x_290837 = !cond_290835;
                    bool y_290838 = cond_f_res_290836 && x_290837;
                    bool cond_290839 = cond_290835 || y_290838;
                    int64_t loopres_f_res_290840;
                    
                    if (cond_290839) {
                        loopres_f_res_290840 = max_res_290814;
                    } else {
                        loopres_f_res_290840 = l_idx_290810;
                    }
                    
                    int64_t loopres_f_res_290841;
                    
                    if (cond_290839) {
                        loopres_f_res_290841 = r_idx_290811;
                    } else {
                        loopres_f_res_290841 = min_res_290816;
                    }
                    
                    int64_t loopres_f_res_290842;
                    
                    if (cond_290839) {
                        int64_t loopres_f_res_t_res_290843 = add64((int64_t) 1,
                                                                   span_290812);
                        
                        loopres_f_res_290842 = loopres_f_res_t_res_290843;
                    } else {
                        int64_t loopres_f_res_f_res_290844 = add64((int64_t) 1,
                                                                   span_290812);
                        
                        loopres_f_res_290842 = loopres_f_res_f_res_290844;
                    }
                    loopres_290832 = loopres_f_res_290840;
                    loopres_290833 = loopres_f_res_290841;
                    loopres_290834 = loopres_f_res_290842;
                }
                
                bool loop_cond_290845 = slt64(loopres_290834, min_res_290757);
                bool loop_while_tmp_303899 = loop_cond_290845;
                int64_t l_idx_tmp_303900 = loopres_290832;
                int64_t r_idx_tmp_303901 = loopres_290833;
                int64_t span_tmp_303902 = loopres_290834;
                
                loop_while_290809 = loop_while_tmp_303899;
                l_idx_290810 = l_idx_tmp_303900;
                r_idx_290811 = r_idx_tmp_303901;
                span_290812 = span_tmp_303902;
            }
            idx_290805 = loop_while_290809;
            idx_290806 = l_idx_290810;
            idx_290807 = r_idx_290811;
            idx_290808 = span_290812;
            
            int64_t min_res_290846 = smin64(min_arg_290772, idx_290806);
            int64_t max_res_290847 = smax64((int64_t) 0, min_res_290846);
            int64_t x_290848 = add64(min_res_290773, max_res_290847);
            int64_t r_290849 = sub64(x_290848, (int64_t) 1);
            bool x_290850 = sle64((int64_t) 0, r_290849);
            bool y_290851 = slt64(r_290849, n_290262);
            bool bounds_check_290852 = x_290850 && y_290851;
            bool index_certs_290853;
            
            if (!bounds_check_290852) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_290849,
                              "] out of bounds for array of shape [",
                              (long long) n_290262, "].",
                              "-> #0  loess.fut:680:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:675:3-683:25\n   #4  loess.fut:699:16-51\n   #5  stl.fut:155:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:153:5-156:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
                    return 1;
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t x_290854;
            
            x_290854 = ((int64_t *) mem_297040)[i_295054 * n_290262 + r_290849];
            
            int64_t abs_arg_290855 = sub64(x_290854, min_res_290782);
            int64_t abs_res_290856 = abs64(abs_arg_290855);
            bool x_290857 = sle64((int64_t) 0, max_res_290847);
            bool y_290858 = slt64(max_res_290847, n_290262);
            bool bounds_check_290859 = x_290857 && y_290858;
            bool index_certs_290860;
            
            if (!bounds_check_290859) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_290847,
                              "] out of bounds for array of shape [",
                              (long long) n_290262, "].",
                              "-> #0  loess.fut:679:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:675:3-683:25\n   #4  loess.fut:699:16-51\n   #5  stl.fut:155:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:153:5-156:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
                    return 1;
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t x_290861;
            
            x_290861 = ((int64_t *) mem_297040)[i_295054 * n_290262 +
                                                max_res_290847];
            
            int64_t abs_arg_290862 = sub64(x_290861, min_res_290782);
            int64_t abs_res_290863 = abs64(abs_arg_290862);
            int64_t max_res_290864 = smax64(abs_res_290856, abs_res_290863);
            double defunc_0_f_res_290865 = sitofp_i64_f64(max_res_290864);
            double defunc_1_f_res_290866 = max_res_290777 +
                   defunc_0_f_res_290865;
            
            ((double *) mem_297719)[i_295054 * t_n_m_290426 + i_295047] =
                defunc_1_f_res_290866;
            ((int64_t *) mem_297715)[i_295054 * t_n_m_290426 + i_295047] =
                max_res_290847;
        }
    }
    
    int64_t replicate_arg_290869 = mul64(n_290262, partition_sizze_290353);
    struct memblock mem_297824;
    
    mem_297824.references = NULL;
    if (memblock_alloc(ctx, &mem_297824, bytes_297039, "mem_297824")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_303903 = 0; i_303903 < partition_sizze_290353; i_303903++) {
        for (int64_t i_303904 = 0; i_303904 < n_290262; i_303904++) {
            ((double *) mem_297824.mem)[i_303903 * n_290262 + i_303904] = 0.0;
        }
    }
    
    struct memblock mem_297828;
    
    mem_297828.references = NULL;
    if (memblock_alloc(ctx, &mem_297828, bytes_297039, "mem_297828")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_303905 = 0; i_303905 < partition_sizze_290353; i_303905++) {
        for (int64_t i_303906 = 0; i_303906 < n_290262; i_303906++) {
            ((double *) mem_297828.mem)[i_303905 * n_290262 + i_303906] = 1.0;
        }
    }
    
    bool cond_290872 = slt64((int64_t) 1, jump_l_290273);
    bool cond_290873 = slt64((int64_t) 1, jump_t_290272);
    int64_t y_290874 = sub64(n_outer_290275, (int64_t) 1);
    int64_t css_results_l_290875;
    
    if (cond_290411) {
        css_results_l_290875 = s_n_m_290412;
    } else {
        css_results_l_290875 = pad_css_len_290408;
    }
    
    bool zzero_290876 = n_p_290264 == (int64_t) 0;
    bool nonzzero_290877 = !zzero_290876;
    bool loop_not_taken_290878 = !assert_cond_290402;
    bool protect_assert_disj_290879 = nonzzero_290877 || loop_not_taken_290878;
    bool loop_not_taken_290880 = !assert_cond_290404;
    bool protect_assert_disj_290881 = protect_assert_disj_290879 ||
         loop_not_taken_290880;
    bool nonzzero_cert_290882;
    
    if (!protect_assert_disj_290881) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "division by zero",
                               "-> #0  stl.fut:228:51-57\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:228:28-74\n   #5  stl.fut:227:21-229:39\n   #6  stl.fut:419:61-435:77\n   #7  stl.fut:463:3-479:36\n   #8  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t j_290883 = add64(n_290262, n_p_290264);
    bool empty_slice_290884 = n_290262 == (int64_t) 0;
    int64_t i_p_m_t_s_290885 = add64(n_p_290264, i_290433);
    bool zzero_leq_i_p_m_t_s_290886 = sle64((int64_t) 0, i_p_m_t_s_290885);
    bool i_p_m_t_s_leq_w_290887 = slt64(i_p_m_t_s_290885, C_len_290410);
    bool zzero_lte_i_290888 = sle64((int64_t) 0, n_p_290264);
    bool i_lte_j_290889 = sle64(n_p_290264, j_290883);
    bool y_290890 = i_p_m_t_s_leq_w_290887 && zzero_lte_i_290888;
    bool y_290891 = zzero_leq_i_p_m_t_s_290886 && y_290890;
    bool y_290892 = i_lte_j_290889 && y_290891;
    bool forwards_ok_290893 = zzero_lte_i_290888 && y_290892;
    bool ok_or_empty_290894 = empty_slice_290884 || forwards_ok_290893;
    bool protect_assert_disj_290895 = loop_not_taken_290878 ||
         ok_or_empty_290894;
    bool protect_assert_disj_290896 = loop_not_taken_290880 ||
         protect_assert_disj_290895;
    bool index_certs_290897;
    
    if (!protect_assert_disj_290896) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) n_p_290264, ":",
                               (long long) j_290883,
                               "] out of bounds for array of shape [",
                               (long long) C_len_290410, "].",
                               "-> #0  stl.fut:266:35-50\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  stl.fut:264:13-269:26\n   #4  stl.fut:419:61-435:77\n   #5  stl.fut:463:3-479:36\n   #6  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t lifted_single_ma_l_arg_290898 = add64((int64_t) 1, j_290883);
    int64_t m_290899 = sub64(n_p_290264, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_290900 = sle64((int64_t) 0, m_290899);
    bool i_p_m_t_s_leq_w_290901 = slt64(m_290899, C_len_290410);
    bool y_290902 = zzero_leq_i_p_m_t_s_290900 && i_p_m_t_s_leq_w_290901;
    bool y_290903 = zzero_lte_i_290888 && y_290902;
    bool ok_or_empty_290904 = zzero_290876 || y_290903;
    bool protect_assert_disj_290905 = loop_not_taken_290878 ||
         ok_or_empty_290904;
    bool protect_assert_disj_290906 = loop_not_taken_290880 ||
         protect_assert_disj_290905;
    bool index_certs_290907;
    
    if (!protect_assert_disj_290906) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) n_p_290264,
                               "] out of bounds for array of shape [",
                               (long long) C_len_290410, "].",
                               "-> #0  stl.fut:26:37-43\n   #1  stl.fut:26:20-48\n   #2  stl.fut:40:3-36\n   #3  stl.fut:233:23-47\n   #4  stl.fut:419:61-435:77\n   #5  stl.fut:463:3-479:36\n   #6  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t dyn_lifted_single_ma_l_arg_290908 = add64((int64_t) 2, n_290262);
    bool i_p_m_t_s_leq_w_290909 = slt64(m_290899,
                                        lifted_single_ma_l_arg_290898);
    bool y_290910 = zzero_leq_i_p_m_t_s_290900 && i_p_m_t_s_leq_w_290909;
    bool y_290911 = zzero_lte_i_290888 && y_290910;
    bool ok_or_empty_290912 = zzero_290876 || y_290911;
    bool protect_assert_disj_290913 = loop_not_taken_290878 ||
         ok_or_empty_290912;
    bool protect_assert_disj_290914 = loop_not_taken_290880 ||
         protect_assert_disj_290913;
    bool index_certs_290915;
    
    if (!protect_assert_disj_290914) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) n_p_290264,
                               "] out of bounds for array of shape [",
                               (long long) lifted_single_ma_l_arg_290898, "].",
                               "-> #0  stl.fut:26:37-43\n   #1  stl.fut:26:20-48\n   #2  /prelude/functional.fut:9:42-44\n   #3  stl.fut:40:3-64\n   #4  stl.fut:233:23-47\n   #5  stl.fut:419:61-435:77\n   #6  stl.fut:463:3-479:36\n   #7  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool i_p_m_t_s_leq_w_290916 = slt64((int64_t) 2,
                                        dyn_lifted_single_ma_l_arg_290908);
    bool protect_assert_disj_290917 = loop_not_taken_290878 ||
         i_p_m_t_s_leq_w_290916;
    bool protect_assert_disj_290918 = loop_not_taken_290880 ||
         protect_assert_disj_290917;
    bool index_certs_290919;
    
    if (!protect_assert_disj_290918) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) (int64_t) 3,
                               "] out of bounds for array of shape [",
                               (long long) dyn_lifted_single_ma_l_arg_290908,
                               "].",
                               "-> #0  stl.fut:26:37-43\n   #1  stl.fut:26:20-48\n   #2  /prelude/functional.fut:9:42-44\n   #3  stl.fut:40:3-84\n   #4  stl.fut:233:23-47\n   #5  stl.fut:419:61-435:77\n   #6  stl.fut:463:3-479:36\n   #7  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_290920 = slt64(jump_l_290273, jump_threshold_1_290276);
    bool cond_290921 = slt64(jump_l_290273, jump_threshold_2_290277);
    bool cond_f_res_t_res_290922 = slt64(q_l_290267, q_threshold_2_290279);
    bool x_290923 = cond_290921 && cond_f_res_t_res_290922;
    bool x_290924 = !cond_290920;
    bool y_290925 = x_290923 && x_290924;
    bool cond_290926 = cond_290920 || y_290925;
    bool cond_290927 = slt64(jump_t_290272, jump_threshold_1_290276);
    bool cond_290928 = slt64(jump_t_290272, jump_threshold_2_290277);
    bool cond_f_res_t_res_290929 = slt64(q_t_290266, q_threshold_2_290279);
    bool x_290930 = cond_290928 && cond_f_res_t_res_290929;
    bool x_290931 = !cond_290927;
    bool y_290932 = x_290930 && x_290931;
    bool cond_290933 = cond_290927 || y_290932;
    bool cond_290934 = slt64(jump_s_290271, jump_threshold_1_290276);
    bool cond_290935 = slt64(jump_s_290271, jump_threshold_2_290277);
    bool cond_f_res_t_res_290936 = slt64(q_s_290265, q_threshold_2_290279);
    bool x_290937 = cond_290935 && cond_f_res_t_res_290936;
    bool x_290938 = !cond_290934;
    bool y_290939 = x_290937 && x_290938;
    bool cond_290940 = cond_290934 || y_290939;
    bool bounds_invalid_upwards_290941 = slt64(C_len_290410, (int64_t) 0);
    bool valid_290942 = !bounds_invalid_upwards_290941;
    bool protect_assert_disj_290943 = loop_not_taken_290878 || valid_290942;
    bool protect_assert_disj_290944 = loop_not_taken_290880 ||
         protect_assert_disj_290943;
    bool range_valid_c_290945;
    
    if (!protect_assert_disj_290944) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) C_len_290410, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:228:28-74\n   #4  stl.fut:227:21-229:39\n   #5  stl.fut:419:61-435:77\n   #6  stl.fut:463:3-479:36\n   #7  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_290947 = slt64(lifted_single_ma_l_arg_290898,
                                               (int64_t) 0);
    bool valid_290948 = !bounds_invalid_upwards_290947;
    bool protect_assert_disj_290949 = loop_not_taken_290878 || valid_290948;
    bool protect_assert_disj_290950 = loop_not_taken_290880 ||
         protect_assert_disj_290949;
    bool range_valid_c_290951;
    
    if (!protect_assert_disj_290950) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) lifted_single_ma_l_arg_290898,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:29:13-35:19\n   #4  /prelude/soacs.fut:67:19-23\n   #5  /prelude/soacs.fut:67:3-37\n   #6  stl.fut:28:5-36:23\n   #7  stl.fut:40:3-36\n   #8  stl.fut:233:23-47\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_290953 =
         slt64(dyn_lifted_single_ma_l_arg_290908, (int64_t) 0);
    bool valid_290954 = !bounds_invalid_upwards_290953;
    bool protect_assert_disj_290955 = loop_not_taken_290878 || valid_290954;
    bool protect_assert_disj_290956 = loop_not_taken_290880 ||
         protect_assert_disj_290955;
    bool range_valid_c_290957;
    
    if (!protect_assert_disj_290956) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) dyn_lifted_single_ma_l_arg_290908,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:29:13-35:19\n   #4  /prelude/soacs.fut:67:19-23\n   #5  /prelude/soacs.fut:67:3-37\n   #6  stl.fut:28:5-36:23\n   #7  /prelude/functional.fut:9:42-44\n   #8  stl.fut:40:3-64\n   #9  stl.fut:233:23-47\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (mem_297878_cached_sizze_304370 < (size_t) bytes_297039) {
        mem_297878 = realloc(mem_297878, bytes_297039);
        mem_297878_cached_sizze_304370 = bytes_297039;
    }
    if (mem_297926_cached_sizze_304371 < (size_t) bytes_297117) {
        mem_297926 = realloc(mem_297926, bytes_297117);
        mem_297926_cached_sizze_304371 = bytes_297117;
    }
    if (mem_297931_cached_sizze_304372 < (size_t) bytes_297117) {
        mem_297931 = realloc(mem_297931, bytes_297117);
        mem_297931_cached_sizze_304372 = bytes_297117;
    }
    
    int64_t binop_x_299973 = pad_css_len_290408 * binop_x_297114;
    int64_t binop_y_299974 = (int64_t) 8 * binop_x_299973;
    int64_t bytes_299975 = smax64((int64_t) 0, binop_y_299974);
    int64_t binop_x_300083 = partition_sizze_290353 * C_len_290410;
    int64_t binop_y_300084 = (int64_t) 8 * binop_x_300083;
    int64_t bytes_300085 = smax64((int64_t) 0, binop_y_300084);
    
    if (mem_300086_cached_sizze_304380 < (size_t) bytes_300085) {
        mem_300086 = realloc(mem_300086, bytes_300085);
        mem_300086_cached_sizze_304380 = bytes_300085;
    }
    if (mem_300132_cached_sizze_304381 < (size_t) bytes_297042) {
        mem_300132 = realloc(mem_300132, bytes_297042);
        mem_300132_cached_sizze_304381 = bytes_297042;
    }
    
    int64_t binop_x_300145 = partition_sizze_290353 *
            lifted_single_ma_l_arg_290898;
    int64_t binop_y_300146 = (int64_t) 8 * binop_x_300145;
    int64_t bytes_300147 = smax64((int64_t) 0, binop_y_300146);
    
    if (mem_300148_cached_sizze_304382 < (size_t) bytes_300147) {
        mem_300148 = realloc(mem_300148, bytes_300147);
        mem_300148_cached_sizze_304382 = bytes_300147;
    }
    
    int64_t binop_y_300159 = (int64_t) 8 * lifted_single_ma_l_arg_290898;
    int64_t bytes_300160 = smax64((int64_t) 0, binop_y_300159);
    
    if (mem_300161_cached_sizze_304383 < (size_t) bytes_300160) {
        mem_300161 = realloc(mem_300161, bytes_300160);
        mem_300161_cached_sizze_304383 = bytes_300160;
    }
    if (mem_300184_cached_sizze_304384 < (size_t) bytes_297042) {
        mem_300184 = realloc(mem_300184, bytes_297042);
        mem_300184_cached_sizze_304384 = bytes_297042;
    }
    
    int64_t binop_x_300197 = partition_sizze_290353 *
            dyn_lifted_single_ma_l_arg_290908;
    int64_t binop_y_300198 = (int64_t) 8 * binop_x_300197;
    int64_t bytes_300199 = smax64((int64_t) 0, binop_y_300198);
    
    if (mem_300200_cached_sizze_304385 < (size_t) bytes_300199) {
        mem_300200 = realloc(mem_300200, bytes_300199);
        mem_300200_cached_sizze_304385 = bytes_300199;
    }
    
    int64_t binop_y_300211 = (int64_t) 8 * dyn_lifted_single_ma_l_arg_290908;
    int64_t bytes_300212 = smax64((int64_t) 0, binop_y_300211);
    
    if (mem_300213_cached_sizze_304386 < (size_t) bytes_300212) {
        mem_300213 = realloc(mem_300213, bytes_300212);
        mem_300213_cached_sizze_304386 = bytes_300212;
    }
    if (mem_300236_cached_sizze_304387 < (size_t) bytes_297042) {
        mem_300236 = realloc(mem_300236, bytes_297042);
        mem_300236_cached_sizze_304387 = bytes_297042;
    }
    if (mem_300252_cached_sizze_304388 < (size_t) bytes_297039) {
        mem_300252 = realloc(mem_300252, bytes_297039);
        mem_300252_cached_sizze_304388 = bytes_297039;
    }
    
    int64_t binop_y_300263 = (int64_t) 8 * n_290262;
    int64_t bytes_300264 = smax64((int64_t) 0, binop_y_300263);
    
    if (mem_300265_cached_sizze_304389 < (size_t) bytes_300264) {
        mem_300265 = realloc(mem_300265, bytes_300264);
        mem_300265_cached_sizze_304389 = bytes_300264;
    }
    
    int64_t binop_y_302873 = (int64_t) 4 * partition_sizze_290353;
    int64_t bytes_302874 = smax64((int64_t) 0, binop_y_302873);
    int64_t binop_y_302877 = (int64_t) 4 * binop_x_297037;
    int64_t bytes_302878 = smax64((int64_t) 0, binop_y_302877);
    int64_t binop_y_302900 = (int64_t) 4 * n_290262;
    int64_t bytes_302901 = smax64((int64_t) 0, binop_y_302900);
    int64_t binop_y_302916 = (int64_t) 8 * replicate_arg_290869;
    int64_t bytes_302917 = smax64((int64_t) 0, binop_y_302916);
    int64_t binop_y_302934 = (int64_t) 4 * replicate_arg_290869;
    int64_t bytes_302935 = smax64((int64_t) 0, binop_y_302934);
    bool loop_cond_294610 = slt64((int64_t) 0, replicate_arg_290869);
    int64_t replicate_arg_294611 = mul64((int64_t) 2, partition_sizze_290353);
    int64_t binop_y_303009 = (int64_t) 4 * replicate_arg_294611;
    int64_t bytes_303010 = smax64((int64_t) 0, binop_y_303009);
    int64_t bytes_303028 = smax64((int64_t) 0, partition_sizze_290353);
    int64_t ext_301287;
    
    if (cond_290872) {
        ext_301287 = n_290262;
    } else {
        ext_301287 = l_n_m_290419;
    }
    
    int64_t ext_301286;
    
    if (cond_290872) {
        ext_301286 = n_290262;
    } else {
        ext_301286 = l_n_m_290419;
    }
    
    int64_t ext_302744;
    
    if (cond_290873) {
        ext_302744 = n_290262;
    } else {
        ext_302744 = t_n_m_290426;
    }
    
    int64_t ext_302743;
    
    if (cond_290873) {
        ext_302743 = n_290262;
    } else {
        ext_302743 = t_n_m_290426;
    }
    
    int64_t ext_300080;
    
    if (cond_290411) {
        ext_300080 = s_n_m_290412;
    } else {
        ext_300080 = pad_css_len_290408;
    }
    
    int64_t ext_300078;
    
    if (cond_290411) {
        ext_300078 = s_n_m_290412;
    } else {
        ext_300078 = pad_css_len_290408;
    }
    
    int64_t ext_303288;
    int64_t ext_303286;
    int64_t ext_303282;
    int64_t ext_303281;
    int64_t ext_303280;
    int64_t ext_303279;
    int64_t ext_303278;
    int64_t ext_303277;
    int64_t ext_303276;
    struct memblock ext_mem_303275;
    
    ext_mem_303275.references = NULL;
    
    struct memblock ext_mem_303274;
    
    ext_mem_303274.references = NULL;
    
    struct memblock ext_mem_303273;
    
    ext_mem_303273.references = NULL;
    
    struct memblock mem_param_297836;
    
    mem_param_297836.references = NULL;
    
    int64_t ctx_param_ext_297838;
    int64_t ctx_param_ext_297840;
    struct memblock mem_param_297844;
    
    mem_param_297844.references = NULL;
    
    int64_t ctx_param_ext_297845;
    int64_t ctx_param_ext_297846;
    int64_t ctx_param_ext_297847;
    int64_t ctx_param_ext_297848;
    int64_t ctx_param_ext_297849;
    int64_t ctx_param_ext_297850;
    int64_t ctx_param_ext_297851;
    struct memblock mem_param_297852;
    
    mem_param_297852.references = NULL;
    ctx_param_ext_297838 = n_290262;
    ctx_param_ext_297840 = n_290262;
    ctx_param_ext_297845 = partition_sizze_290353;
    ctx_param_ext_297846 = n_290262;
    ctx_param_ext_297847 = (int64_t) 0;
    ctx_param_ext_297848 = n_290262;
    ctx_param_ext_297849 = partition_sizze_290353;
    ctx_param_ext_297850 = (int64_t) 1;
    ctx_param_ext_297851 = n_290262;
    if (memblock_set(ctx, &mem_param_297836, &mem_297824, "mem_297824") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_297844, &mem_297824, "mem_297824") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_297852, &mem_297828, "mem_297828") != 0)
        return 1;
    for (int64_t i_outer_290962 = 0; i_outer_290962 < n_outer_290275;
         i_outer_290962++) {
        int64_t ext_302755;
        int64_t ext_302753;
        struct memblock ext_mem_302749;
        
        ext_mem_302749.references = NULL;
        
        struct memblock ext_mem_302748;
        
        ext_mem_302748.references = NULL;
        
        struct memblock mem_param_297866;
        
        mem_param_297866.references = NULL;
        
        int64_t ctx_param_ext_297868;
        int64_t ctx_param_ext_297870;
        struct memblock mem_param_297874;
        
        mem_param_297874.references = NULL;
        ctx_param_ext_297868 = ctx_param_ext_297838;
        ctx_param_ext_297870 = ctx_param_ext_297840;
        if (memblock_set(ctx, &mem_param_297866, &mem_param_297836,
                         "mem_param_297836") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_297874, &mem_param_297844,
                         "mem_param_297844") != 0)
            return 1;
        for (int64_t _i_inner_290968 = 0; _i_inner_290968 < n_inner_290274;
             _i_inner_290968++) {
            for (int64_t i_295063 = 0; i_295063 < partition_sizze_290353;
                 i_295063++) {
                for (int64_t i_295059 = 0; i_295059 < n_290262; i_295059++) {
                    float x_290975;
                    
                    x_290975 = ((float *) mem_297000)[i_295063 * n_290262 +
                                                      i_295059];
                    
                    double x_290976;
                    
                    x_290976 = ((double *) mem_param_297874.mem)[i_295063 *
                                                                 ctx_param_ext_297870 +
                                                                 i_295059];
                    
                    double f32_res_290977 = fpconv_f32_f64(x_290975);
                    double defunc_1_f_res_290978 = f32_res_290977 - x_290976;
                    
                    ((double *) mem_297878)[i_295063 * n_290262 + i_295059] =
                        defunc_1_f_res_290978;
                }
            }
            for (int64_t i_295083 = 0; i_295083 < partition_sizze_290353;
                 i_295083++) {
                for (int64_t i_295076 = 0; i_295076 < n_p_290264; i_295076++) {
                    for (int64_t i_295069 = 0; i_295069 < defunc_0_f_res_290407;
                         i_295069++) {
                        int64_t x_290991;
                        
                        x_290991 = ((int64_t *) mem_297221)[i_295083 *
                                                            ctx_val_297131 +
                                                            i_295076 *
                                                            defunc_0_f_res_290407 +
                                                            i_295069];
                        
                        int64_t x_290992 = mul64(n_p_290264, x_290991);
                        int64_t idx_290993 = add64(x_290992, i_295076);
                        bool cond_290994 = slt64(i_290433, idx_290993);
                        bool cond_f_res_290995 = slt64(x_290991, (int64_t) 0);
                        bool x_290996 = !cond_290994;
                        bool y_290997 = cond_f_res_290995 && x_290996;
                        bool cond_290998 = cond_290994 || y_290997;
                        double defunc_0_f_res_290999;
                        double defunc_0_f_res_291000;
                        
                        if (cond_290998) {
                            defunc_0_f_res_290999 = 0.0;
                            defunc_0_f_res_291000 = 0.0;
                        } else {
                            bool x_291001 = sle64((int64_t) 0, idx_290993);
                            bool y_291002 = slt64(idx_290993, n_290262);
                            bool bounds_check_291003 = x_291001 && y_291002;
                            bool index_certs_291004;
                            
                            if (!bounds_check_291003) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) idx_290993,
                                              "] out of bounds for array of shape [",
                                              (long long) n_290262, "].",
                                              "-> #0  stl.fut:193:42-57\n   #1  stl.fut:188:28-194:44\n   #2  /prelude/soacs.fut:67:19-23\n   #3  /prelude/soacs.fut:67:3-37\n   #4  stl.fut:186:21-195:50\n   #5  /prelude/soacs.fut:75:22-28\n   #6  /prelude/soacs.fut:75:3-45\n   #7  stl.fut:184:13-196:57\n   #8  stl.fut:419:61-435:77\n   #9  stl.fut:463:3-479:36\n   #10 stl.fut:445:1-479:36\n");
                                if (memblock_unref(ctx, &mem_param_297874,
                                                   "mem_param_297874") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297866,
                                                   "mem_param_297866") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_302748,
                                                   "ext_mem_302748") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_302749,
                                                   "ext_mem_302749") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297852,
                                                   "mem_param_297852") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297844,
                                                   "mem_param_297844") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297836,
                                                   "mem_param_297836") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303273,
                                                   "ext_mem_303273") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303274,
                                                   "ext_mem_303274") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303275,
                                                   "ext_mem_303275") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_297828,
                                                   "mem_297828") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_297824,
                                                   "mem_297824") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_303840,
                                                   "mem_out_303840") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_303839,
                                                   "mem_out_303839") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_303838,
                                                   "mem_out_303838") != 0)
                                    return 1;
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            double defunc_0_f_res_f_res_291005;
                            
                            defunc_0_f_res_f_res_291005 =
                                ((double *) mem_297878)[i_295083 * n_290262 +
                                                        idx_290993];
                            
                            double defunc_0_f_res_f_res_291006;
                            
                            defunc_0_f_res_f_res_291006 =
                                ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                  (i_295083 *
                                                                   ctx_param_ext_297848 +
                                                                   idx_290993 *
                                                                   ctx_param_ext_297850)];
                            defunc_0_f_res_290999 = defunc_0_f_res_f_res_291005;
                            defunc_0_f_res_291000 = defunc_0_f_res_f_res_291006;
                        }
                        ((double *) mem_297926)[i_295083 * ctx_val_297131 +
                                                i_295076 *
                                                defunc_0_f_res_290407 +
                                                i_295069] =
                            defunc_0_f_res_290999;
                        ((double *) mem_297931)[i_295083 * ctx_val_297131 +
                                                i_295076 *
                                                defunc_0_f_res_290407 +
                                                i_295069] =
                            defunc_0_f_res_291000;
                    }
                }
            }
            
            struct memblock ext_mem_299961;
            
            ext_mem_299961.references = NULL;
            
            struct memblock ext_mem_299950;
            
            ext_mem_299950.references = NULL;
            if (cond_290940) {
                bool match_lit_291011 = (int64_t) 0 == d_s_290268;
                struct memblock ext_mem_298682;
                
                ext_mem_298682.references = NULL;
                
                struct memblock ext_mem_298671;
                
                ext_mem_298671.references = NULL;
                if (match_lit_291011) {
                    struct memblock mem_298132;
                    
                    mem_298132.references = NULL;
                    if (memblock_alloc(ctx, &mem_298132, bytes_297385,
                                       "mem_298132")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_303936 = 0; i_303936 <
                         partition_sizze_290353; i_303936++) {
                        for (int64_t i_303937 = 0; i_303937 < n_p_290264;
                             i_303937++) {
                            for (int64_t i_303938 = 0; i_303938 < s_n_m_290412;
                                 i_303938++) {
                                ((double *) mem_298132.mem)[i_303936 *
                                                            (s_n_m_290412 *
                                                             n_p_290264) +
                                                            i_303937 *
                                                            s_n_m_290412 +
                                                            i_303938] = 0.0;
                            }
                        }
                    }
                    
                    struct memblock mem_298137;
                    
                    mem_298137.references = NULL;
                    if (memblock_alloc(ctx, &mem_298137, bytes_297385,
                                       "mem_298137")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_295100 = 0; i_295100 <
                         partition_sizze_290353; i_295100++) {
                        for (int64_t i_295096 = 0; i_295096 < n_p_290264;
                             i_295096++) {
                            int64_t x_291027;
                            
                            x_291027 = ((int64_t *) mem_297225)[i_295100 *
                                                                n_p_290264 +
                                                                i_295096];
                            for (int64_t i_295092 = 0; i_295092 < s_n_m_290412;
                                 i_295092++) {
                                int64_t x_291032;
                                
                                x_291032 = ((int64_t *) mem_297386)[i_295100 *
                                                                    ctx_val_297415 +
                                                                    i_295096 *
                                                                    s_n_m_290412 +
                                                                    i_295092];
                                
                                double x_291033;
                                
                                x_291033 = ((double *) mem_297391)[i_295100 *
                                                                   ctx_val_297415 +
                                                                   i_295096 *
                                                                   s_n_m_290412 +
                                                                   i_295092];
                                
                                bool cond_291034 = i_295092 == (int64_t) 0;
                                int64_t defunc_0_m_fun_res_291035;
                                
                                if (cond_291034) {
                                    defunc_0_m_fun_res_291035 = (int64_t) 0;
                                } else {
                                    int64_t y_291036 = sub64(s_n_m_290412,
                                                             (int64_t) 1);
                                    bool cond_291037 = i_295092 == y_291036;
                                    int64_t defunc_0_m_fun_res_f_res_291038;
                                    
                                    if (cond_291037) {
                                        int64_t
                                        defunc_0_m_fun_res_f_res_t_res_291039 =
                                        sub64(pad_css_len_290408, (int64_t) 1);
                                        
                                        defunc_0_m_fun_res_f_res_291038 =
                                            defunc_0_m_fun_res_f_res_t_res_291039;
                                    } else {
                                        int64_t x_291040 = sub64(i_295092,
                                                                 (int64_t) 1);
                                        int64_t x_291041 = mul64(jump_s_290271,
                                                                 x_291040);
                                        int64_t min_arg_291042 =
                                                add64((int64_t) 1, x_291041);
                                        int64_t min_res_291043 =
                                                smin64(defunc_0_f_res_290407,
                                                       min_arg_291042);
                                        
                                        defunc_0_m_fun_res_f_res_291038 =
                                            min_res_291043;
                                    }
                                    defunc_0_m_fun_res_291035 =
                                        defunc_0_m_fun_res_f_res_291038;
                                }
                                
                                double defunc_2_reduce_res_291044;
                                double redout_295086 = 0.0;
                                
                                for (int64_t i_295087 = 0; i_295087 <
                                     q_s_290265; i_295087++) {
                                    bool cond_291049 = sle64(x_291027,
                                                             i_295087);
                                    int64_t defunc_0_f_res_291050;
                                    
                                    if (cond_291049) {
                                        defunc_0_f_res_291050 = (int64_t) 0;
                                    } else {
                                        int64_t i_291051 = add64(x_291032,
                                                                 i_295087);
                                        int64_t defunc_0_add_arg_291052;
                                        
                                        defunc_0_add_arg_291052 =
                                            ((int64_t *) mem_297221)[i_295100 *
                                                                     ctx_val_297131 +
                                                                     i_295096 *
                                                                     defunc_0_f_res_290407 +
                                                                     i_291051];
                                        
                                        int64_t defunc_1_add_res_291053 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_291052);
                                        
                                        defunc_0_f_res_291050 =
                                            defunc_1_add_res_291053;
                                    }
                                    
                                    double defunc_0_f_res_291054;
                                    
                                    if (cond_291049) {
                                        defunc_0_f_res_291054 = 0.0;
                                    } else {
                                        int64_t i_291055 = add64(x_291032,
                                                                 i_295087);
                                        double defunc_0_add_arg_291056;
                                        
                                        defunc_0_add_arg_291056 =
                                            ((double *) mem_297931)[i_295100 *
                                                                    ctx_val_297131 +
                                                                    i_295096 *
                                                                    defunc_0_f_res_290407 +
                                                                    i_291055];
                                        defunc_0_f_res_291054 =
                                            defunc_0_add_arg_291056;
                                    }
                                    
                                    int64_t binop_p_291057 =
                                            sub64(defunc_0_f_res_291050,
                                                  defunc_0_m_fun_res_291035);
                                    double defunc_0_f_res_291058 =
                                           sitofp_i64_f64(binop_p_291057);
                                    double abs_res_291059 =
                                           fabs(defunc_0_f_res_291058);
                                    double tmp1_291060 = abs_res_291059 /
                                           x_291033;
                                    double x_291061 = tmp1_291060 * tmp1_291060;
                                    double y_291062 = tmp1_291060 * x_291061;
                                    double tmp2_291063 = 1.0 - y_291062;
                                    double x_291064 = tmp2_291063 * tmp2_291063;
                                    double tmp3_291065 = tmp2_291063 * x_291064;
                                    double w_j_291066 = defunc_0_f_res_291054 *
                                           tmp3_291065;
                                    double defunc_1_op_res_291047 = w_j_291066 +
                                           redout_295086;
                                    double redout_tmp_303942 =
                                           defunc_1_op_res_291047;
                                    
                                    redout_295086 = redout_tmp_303942;
                                }
                                defunc_2_reduce_res_291044 = redout_295086;
                                
                                double a_291067 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_291044;
                                double a0_291068 = 1.0 / a_291067;
                                int64_t defunc_0_m_fun_res_291069;
                                
                                if (cond_291034) {
                                    defunc_0_m_fun_res_291069 = (int64_t) 0;
                                } else {
                                    int64_t y_291070 = sub64(s_n_m_290412,
                                                             (int64_t) 1);
                                    bool cond_291071 = i_295092 == y_291070;
                                    int64_t defunc_0_m_fun_res_f_res_291072;
                                    
                                    if (cond_291071) {
                                        int64_t
                                        defunc_0_m_fun_res_f_res_t_res_291073 =
                                        sub64(pad_css_len_290408, (int64_t) 1);
                                        
                                        defunc_0_m_fun_res_f_res_291072 =
                                            defunc_0_m_fun_res_f_res_t_res_291073;
                                    } else {
                                        int64_t x_291074 = sub64(i_295092,
                                                                 (int64_t) 1);
                                        int64_t x_291075 = mul64(jump_s_290271,
                                                                 x_291074);
                                        int64_t min_arg_291076 =
                                                add64((int64_t) 1, x_291075);
                                        int64_t min_res_291077 =
                                                smin64(defunc_0_f_res_290407,
                                                       min_arg_291076);
                                        
                                        defunc_0_m_fun_res_f_res_291072 =
                                            min_res_291077;
                                    }
                                    defunc_0_m_fun_res_291069 =
                                        defunc_0_m_fun_res_f_res_291072;
                                }
                                
                                double defunc_2_reduce_res_291078;
                                double redout_295088 = 0.0;
                                
                                for (int64_t i_295089 = 0; i_295089 <
                                     q_s_290265; i_295089++) {
                                    bool cond_291083 = sle64(x_291027,
                                                             i_295089);
                                    int64_t defunc_0_f_res_291084;
                                    
                                    if (cond_291083) {
                                        defunc_0_f_res_291084 = (int64_t) 0;
                                    } else {
                                        int64_t i_291085 = add64(x_291032,
                                                                 i_295089);
                                        int64_t defunc_0_add_arg_291086;
                                        
                                        defunc_0_add_arg_291086 =
                                            ((int64_t *) mem_297221)[i_295100 *
                                                                     ctx_val_297131 +
                                                                     i_295096 *
                                                                     defunc_0_f_res_290407 +
                                                                     i_291085];
                                        
                                        int64_t defunc_1_add_res_291087 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_291086);
                                        
                                        defunc_0_f_res_291084 =
                                            defunc_1_add_res_291087;
                                    }
                                    
                                    double defunc_0_f_res_291088;
                                    
                                    if (cond_291083) {
                                        defunc_0_f_res_291088 = 0.0;
                                    } else {
                                        int64_t i_291089 = add64(x_291032,
                                                                 i_295089);
                                        double defunc_0_add_arg_291090;
                                        
                                        defunc_0_add_arg_291090 =
                                            ((double *) mem_297931)[i_295100 *
                                                                    ctx_val_297131 +
                                                                    i_295096 *
                                                                    defunc_0_f_res_290407 +
                                                                    i_291089];
                                        defunc_0_f_res_291088 =
                                            defunc_0_add_arg_291090;
                                    }
                                    
                                    int64_t binop_p_291091 =
                                            sub64(defunc_0_f_res_291084,
                                                  defunc_0_m_fun_res_291069);
                                    double defunc_0_f_res_291092 =
                                           sitofp_i64_f64(binop_p_291091);
                                    double abs_res_291093 =
                                           fabs(defunc_0_f_res_291092);
                                    double tmp1_291094 = abs_res_291093 /
                                           x_291033;
                                    double x_291095 = tmp1_291094 * tmp1_291094;
                                    double y_291096 = tmp1_291094 * x_291095;
                                    double tmp2_291097 = 1.0 - y_291096;
                                    double x_291098 = tmp2_291097 * tmp2_291097;
                                    double tmp3_291099 = tmp2_291097 * x_291098;
                                    double tmp4_291100 = defunc_0_f_res_291088 *
                                           tmp3_291099;
                                    double defunc_0_f_res_291101;
                                    
                                    if (cond_291083) {
                                        defunc_0_f_res_291101 = 0.0;
                                    } else {
                                        int64_t i_291102 = add64(x_291032,
                                                                 i_295089);
                                        double defunc_0_add_arg_291103;
                                        
                                        defunc_0_add_arg_291103 =
                                            ((double *) mem_297926)[i_295100 *
                                                                    ctx_val_297131 +
                                                                    i_295096 *
                                                                    defunc_0_f_res_290407 +
                                                                    i_291102];
                                        defunc_0_f_res_291101 =
                                            defunc_0_add_arg_291103;
                                    }
                                    
                                    double x_291104 = a0_291068 * tmp4_291100;
                                    double defunc_9_fit_fun_res_291105 =
                                           defunc_0_f_res_291101 * x_291104;
                                    double defunc_1_op_res_291081 =
                                           defunc_9_fit_fun_res_291105 +
                                           redout_295088;
                                    double redout_tmp_303943 =
                                           defunc_1_op_res_291081;
                                    
                                    redout_295088 = redout_tmp_303943;
                                }
                                defunc_2_reduce_res_291078 = redout_295088;
                                ((double *) mem_298137.mem)[i_295100 *
                                                            ctx_val_297415 +
                                                            i_295096 *
                                                            s_n_m_290412 +
                                                            i_295092] =
                                    defunc_2_reduce_res_291078;
                            }
                        }
                    }
                    if (memblock_set(ctx, &ext_mem_298682, &mem_298137,
                                     "mem_298137") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_298671, &mem_298132,
                                     "mem_298132") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_298137, "mem_298137") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_298132, "mem_298132") != 0)
                        return 1;
                } else {
                    bool match_lit_291108 = (int64_t) 1 == d_s_290268;
                    struct memblock ext_mem_298659;
                    
                    ext_mem_298659.references = NULL;
                    
                    struct memblock ext_mem_298648;
                    
                    ext_mem_298648.references = NULL;
                    if (match_lit_291108) {
                        struct memblock mem_298240;
                        
                        mem_298240.references = NULL;
                        if (memblock_alloc(ctx, &mem_298240, bytes_297385,
                                           "mem_298240")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_298245;
                        
                        mem_298245.references = NULL;
                        if (memblock_alloc(ctx, &mem_298245, bytes_297385,
                                           "mem_298245")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_295127 = 0; i_295127 <
                             partition_sizze_290353; i_295127++) {
                            for (int64_t i_295120 = 0; i_295120 < n_p_290264;
                                 i_295120++) {
                                int64_t x_291125;
                                
                                x_291125 = ((int64_t *) mem_297225)[i_295127 *
                                                                    n_p_290264 +
                                                                    i_295120];
                                for (int64_t i_295113 = 0; i_295113 <
                                     s_n_m_290412; i_295113++) {
                                    int64_t x_291131;
                                    
                                    x_291131 =
                                        ((int64_t *) mem_297386)[i_295127 *
                                                                 ctx_val_297415 +
                                                                 i_295120 *
                                                                 s_n_m_290412 +
                                                                 i_295113];
                                    
                                    double x_291132;
                                    
                                    x_291132 =
                                        ((double *) mem_297391)[i_295127 *
                                                                ctx_val_297415 +
                                                                i_295120 *
                                                                s_n_m_290412 +
                                                                i_295113];
                                    
                                    bool cond_291133 = i_295113 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_291134;
                                    
                                    if (cond_291133) {
                                        defunc_0_m_fun_res_291134 = (int64_t) 0;
                                    } else {
                                        int64_t y_291135 = sub64(s_n_m_290412,
                                                                 (int64_t) 1);
                                        bool cond_291136 = i_295113 == y_291135;
                                        int64_t defunc_0_m_fun_res_f_res_291137;
                                        
                                        if (cond_291136) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_291138
                                            = sub64(pad_css_len_290408,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_291137 =
                                                defunc_0_m_fun_res_f_res_t_res_291138;
                                        } else {
                                            int64_t x_291139 = sub64(i_295113,
                                                                     (int64_t) 1);
                                            int64_t x_291140 =
                                                    mul64(jump_s_290271,
                                                          x_291139);
                                            int64_t min_arg_291141 =
                                                    add64((int64_t) 1,
                                                          x_291140);
                                            int64_t min_res_291142 =
                                                    smin64(defunc_0_f_res_290407,
                                                           min_arg_291141);
                                            
                                            defunc_0_m_fun_res_f_res_291137 =
                                                min_res_291142;
                                        }
                                        defunc_0_m_fun_res_291134 =
                                            defunc_0_m_fun_res_f_res_291137;
                                    }
                                    
                                    double defunc_2_reduce_res_291143;
                                    double defunc_2_reduce_res_291144;
                                    double defunc_2_reduce_res_291145;
                                    double redout_295102;
                                    double redout_295103;
                                    double redout_295104;
                                    
                                    redout_295102 = 0.0;
                                    redout_295103 = 0.0;
                                    redout_295104 = 0.0;
                                    for (int64_t i_295105 = 0; i_295105 <
                                         q_s_290265; i_295105++) {
                                        bool cond_291156 = sle64(x_291125,
                                                                 i_295105);
                                        int64_t defunc_0_f_res_291157;
                                        
                                        if (cond_291156) {
                                            defunc_0_f_res_291157 = (int64_t) 0;
                                        } else {
                                            int64_t i_291158 = add64(x_291131,
                                                                     i_295105);
                                            int64_t defunc_0_add_arg_291159;
                                            
                                            defunc_0_add_arg_291159 =
                                                ((int64_t *) mem_297221)[i_295127 *
                                                                         ctx_val_297131 +
                                                                         i_295120 *
                                                                         defunc_0_f_res_290407 +
                                                                         i_291158];
                                            
                                            int64_t defunc_1_add_res_291160 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_291159);
                                            
                                            defunc_0_f_res_291157 =
                                                defunc_1_add_res_291160;
                                        }
                                        
                                        double defunc_0_f_res_291161;
                                        
                                        if (cond_291156) {
                                            defunc_0_f_res_291161 = 0.0;
                                        } else {
                                            int64_t i_291162 = add64(x_291131,
                                                                     i_295105);
                                            double defunc_0_add_arg_291163;
                                            
                                            defunc_0_add_arg_291163 =
                                                ((double *) mem_297931)[i_295127 *
                                                                        ctx_val_297131 +
                                                                        i_295120 *
                                                                        defunc_0_f_res_290407 +
                                                                        i_291162];
                                            defunc_0_f_res_291161 =
                                                defunc_0_add_arg_291163;
                                        }
                                        
                                        int64_t binop_p_291164 =
                                                sub64(defunc_0_f_res_291157,
                                                      defunc_0_m_fun_res_291134);
                                        double defunc_0_f_res_291165 =
                                               sitofp_i64_f64(binop_p_291164);
                                        double abs_res_291166 =
                                               fabs(defunc_0_f_res_291165);
                                        double tmp1_291167 = abs_res_291166 /
                                               x_291132;
                                        double x_291168 = tmp1_291167 *
                                               tmp1_291167;
                                        double y_291169 = tmp1_291167 *
                                               x_291168;
                                        double tmp2_291170 = 1.0 - y_291169;
                                        double x_291171 = tmp2_291170 *
                                               tmp2_291170;
                                        double tmp3_291172 = tmp2_291170 *
                                               x_291171;
                                        double w_j_291173 =
                                               defunc_0_f_res_291161 *
                                               tmp3_291172;
                                        double xw_j_291174 =
                                               defunc_0_f_res_291165 *
                                               w_j_291173;
                                        double x2w_j_291175 =
                                               defunc_0_f_res_291165 *
                                               xw_j_291174;
                                        double defunc_1_op_res_291148 =
                                               w_j_291173 + redout_295102;
                                        double defunc_1_op_res_291151 =
                                               xw_j_291174 + redout_295103;
                                        double defunc_1_op_res_291154 =
                                               x2w_j_291175 + redout_295104;
                                        double redout_tmp_303950 =
                                               defunc_1_op_res_291148;
                                        double redout_tmp_303951 =
                                               defunc_1_op_res_291151;
                                        double redout_tmp_303952 =
                                               defunc_1_op_res_291154;
                                        
                                        redout_295102 = redout_tmp_303950;
                                        redout_295103 = redout_tmp_303951;
                                        redout_295104 = redout_tmp_303952;
                                    }
                                    defunc_2_reduce_res_291143 = redout_295102;
                                    defunc_2_reduce_res_291144 = redout_295103;
                                    defunc_2_reduce_res_291145 = redout_295104;
                                    
                                    double a_291176 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_291143;
                                    double b_291177 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_291144;
                                    double c_291178 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_291145;
                                    double x_291179 = a_291176 * c_291178;
                                    double y_291180 = b_291177 * b_291177;
                                    double y_291181 = x_291179 - y_291180;
                                    double det1_291182 = 1.0 / y_291181;
                                    double a11_291183 = c_291178 * det1_291182;
                                    double x_291184 = 0.0 - b_291177;
                                    double b11_291185 = det1_291182 * x_291184;
                                    double c11_291186 = a_291176 * det1_291182;
                                    int64_t defunc_0_m_fun_res_291187;
                                    
                                    if (cond_291133) {
                                        defunc_0_m_fun_res_291187 = (int64_t) 0;
                                    } else {
                                        int64_t y_291188 = sub64(s_n_m_290412,
                                                                 (int64_t) 1);
                                        bool cond_291189 = i_295113 == y_291188;
                                        int64_t defunc_0_m_fun_res_f_res_291190;
                                        
                                        if (cond_291189) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_291191
                                            = sub64(pad_css_len_290408,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_291190 =
                                                defunc_0_m_fun_res_f_res_t_res_291191;
                                        } else {
                                            int64_t x_291192 = sub64(i_295113,
                                                                     (int64_t) 1);
                                            int64_t x_291193 =
                                                    mul64(jump_s_290271,
                                                          x_291192);
                                            int64_t min_arg_291194 =
                                                    add64((int64_t) 1,
                                                          x_291193);
                                            int64_t min_res_291195 =
                                                    smin64(defunc_0_f_res_290407,
                                                           min_arg_291194);
                                            
                                            defunc_0_m_fun_res_f_res_291190 =
                                                min_res_291195;
                                        }
                                        defunc_0_m_fun_res_291187 =
                                            defunc_0_m_fun_res_f_res_291190;
                                    }
                                    
                                    double defunc_2_reduce_res_291196;
                                    double defunc_2_reduce_res_291197;
                                    double redout_295106;
                                    double redout_295107;
                                    
                                    redout_295106 = 0.0;
                                    redout_295107 = 0.0;
                                    for (int64_t i_295108 = 0; i_295108 <
                                         q_s_290265; i_295108++) {
                                        bool cond_291205 = sle64(x_291125,
                                                                 i_295108);
                                        int64_t defunc_0_f_res_291206;
                                        
                                        if (cond_291205) {
                                            defunc_0_f_res_291206 = (int64_t) 0;
                                        } else {
                                            int64_t i_291207 = add64(x_291131,
                                                                     i_295108);
                                            int64_t defunc_0_add_arg_291208;
                                            
                                            defunc_0_add_arg_291208 =
                                                ((int64_t *) mem_297221)[i_295127 *
                                                                         ctx_val_297131 +
                                                                         i_295120 *
                                                                         defunc_0_f_res_290407 +
                                                                         i_291207];
                                            
                                            int64_t defunc_1_add_res_291209 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_291208);
                                            
                                            defunc_0_f_res_291206 =
                                                defunc_1_add_res_291209;
                                        }
                                        
                                        double defunc_0_f_res_291210;
                                        
                                        if (cond_291205) {
                                            defunc_0_f_res_291210 = 0.0;
                                        } else {
                                            int64_t i_291211 = add64(x_291131,
                                                                     i_295108);
                                            double defunc_0_add_arg_291212;
                                            
                                            defunc_0_add_arg_291212 =
                                                ((double *) mem_297931)[i_295127 *
                                                                        ctx_val_297131 +
                                                                        i_295120 *
                                                                        defunc_0_f_res_290407 +
                                                                        i_291211];
                                            defunc_0_f_res_291210 =
                                                defunc_0_add_arg_291212;
                                        }
                                        
                                        int64_t binop_p_291213 =
                                                sub64(defunc_0_f_res_291206,
                                                      defunc_0_m_fun_res_291187);
                                        double defunc_0_f_res_291214 =
                                               sitofp_i64_f64(binop_p_291213);
                                        double abs_res_291215 =
                                               fabs(defunc_0_f_res_291214);
                                        double tmp1_291216 = abs_res_291215 /
                                               x_291132;
                                        double x_291217 = tmp1_291216 *
                                               tmp1_291216;
                                        double y_291218 = tmp1_291216 *
                                               x_291217;
                                        double tmp2_291219 = 1.0 - y_291218;
                                        double x_291220 = tmp2_291219 *
                                               tmp2_291219;
                                        double tmp3_291221 = tmp2_291219 *
                                               x_291220;
                                        double tmp4_291222 =
                                               defunc_0_f_res_291210 *
                                               tmp3_291221;
                                        double defunc_1_f_res_291223 =
                                               defunc_0_f_res_291214 *
                                               tmp4_291222;
                                        double defunc_0_f_res_291224;
                                        
                                        if (cond_291205) {
                                            defunc_0_f_res_291224 = 0.0;
                                        } else {
                                            int64_t i_291225 = add64(x_291131,
                                                                     i_295108);
                                            double defunc_0_add_arg_291226;
                                            
                                            defunc_0_add_arg_291226 =
                                                ((double *) mem_297926)[i_295127 *
                                                                        ctx_val_297131 +
                                                                        i_295120 *
                                                                        defunc_0_f_res_290407 +
                                                                        i_291225];
                                            defunc_0_f_res_291224 =
                                                defunc_0_add_arg_291226;
                                        }
                                        
                                        double x_291227 = a11_291183 *
                                               tmp4_291222;
                                        double y_291228 = b11_291185 *
                                               defunc_1_f_res_291223;
                                        double x_291229 = x_291227 + y_291228;
                                        double defunc_9_fit_fun_res_291230 =
                                               defunc_0_f_res_291224 * x_291229;
                                        double x_291231 = b11_291185 *
                                               tmp4_291222;
                                        double y_291232 = c11_291186 *
                                               defunc_1_f_res_291223;
                                        double x_291233 = x_291231 + y_291232;
                                        double defunc_9_slope_fun_res_291234 =
                                               defunc_0_f_res_291224 * x_291233;
                                        double defunc_1_op_res_291200 =
                                               defunc_9_fit_fun_res_291230 +
                                               redout_295106;
                                        double defunc_1_op_res_291203 =
                                               defunc_9_slope_fun_res_291234 +
                                               redout_295107;
                                        double redout_tmp_303953 =
                                               defunc_1_op_res_291200;
                                        double redout_tmp_303954 =
                                               defunc_1_op_res_291203;
                                        
                                        redout_295106 = redout_tmp_303953;
                                        redout_295107 = redout_tmp_303954;
                                    }
                                    defunc_2_reduce_res_291196 = redout_295106;
                                    defunc_2_reduce_res_291197 = redout_295107;
                                    ((double *) mem_298240.mem)[i_295127 *
                                                                ctx_val_297415 +
                                                                i_295120 *
                                                                s_n_m_290412 +
                                                                i_295113] =
                                        defunc_2_reduce_res_291196;
                                    ((double *) mem_298245.mem)[i_295127 *
                                                                ctx_val_297415 +
                                                                i_295120 *
                                                                s_n_m_290412 +
                                                                i_295113] =
                                        defunc_2_reduce_res_291197;
                                }
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_298659, &mem_298240,
                                         "mem_298240") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_298648, &mem_298245,
                                         "mem_298245") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_298245, "mem_298245") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_298240, "mem_298240") != 0)
                            return 1;
                    } else {
                        struct memblock mem_298446;
                        
                        mem_298446.references = NULL;
                        if (memblock_alloc(ctx, &mem_298446, bytes_297385,
                                           "mem_298446")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_298451;
                        
                        mem_298451.references = NULL;
                        if (memblock_alloc(ctx, &mem_298451, bytes_297385,
                                           "mem_298451")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_295157 = 0; i_295157 <
                             partition_sizze_290353; i_295157++) {
                            for (int64_t i_295150 = 0; i_295150 < n_p_290264;
                                 i_295150++) {
                                int64_t x_291251;
                                
                                x_291251 = ((int64_t *) mem_297225)[i_295157 *
                                                                    n_p_290264 +
                                                                    i_295150];
                                for (int64_t i_295143 = 0; i_295143 <
                                     s_n_m_290412; i_295143++) {
                                    int64_t x_291257;
                                    
                                    x_291257 =
                                        ((int64_t *) mem_297386)[i_295157 *
                                                                 ctx_val_297415 +
                                                                 i_295150 *
                                                                 s_n_m_290412 +
                                                                 i_295143];
                                    
                                    double x_291258;
                                    
                                    x_291258 =
                                        ((double *) mem_297391)[i_295157 *
                                                                ctx_val_297415 +
                                                                i_295150 *
                                                                s_n_m_290412 +
                                                                i_295143];
                                    
                                    bool cond_291259 = i_295143 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_291260;
                                    
                                    if (cond_291259) {
                                        defunc_0_m_fun_res_291260 = (int64_t) 0;
                                    } else {
                                        int64_t y_291261 = sub64(s_n_m_290412,
                                                                 (int64_t) 1);
                                        bool cond_291262 = i_295143 == y_291261;
                                        int64_t defunc_0_m_fun_res_f_res_291263;
                                        
                                        if (cond_291262) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_291264
                                            = sub64(pad_css_len_290408,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_291263 =
                                                defunc_0_m_fun_res_f_res_t_res_291264;
                                        } else {
                                            int64_t x_291265 = sub64(i_295143,
                                                                     (int64_t) 1);
                                            int64_t x_291266 =
                                                    mul64(jump_s_290271,
                                                          x_291265);
                                            int64_t min_arg_291267 =
                                                    add64((int64_t) 1,
                                                          x_291266);
                                            int64_t min_res_291268 =
                                                    smin64(defunc_0_f_res_290407,
                                                           min_arg_291267);
                                            
                                            defunc_0_m_fun_res_f_res_291263 =
                                                min_res_291268;
                                        }
                                        defunc_0_m_fun_res_291260 =
                                            defunc_0_m_fun_res_f_res_291263;
                                    }
                                    
                                    double defunc_2_reduce_res_291269;
                                    double defunc_2_reduce_res_291270;
                                    double defunc_2_reduce_res_291271;
                                    double defunc_2_reduce_res_291272;
                                    double defunc_2_reduce_res_291273;
                                    double redout_295130;
                                    double redout_295131;
                                    double redout_295132;
                                    double redout_295133;
                                    double redout_295134;
                                    
                                    redout_295130 = 0.0;
                                    redout_295131 = 0.0;
                                    redout_295132 = 0.0;
                                    redout_295133 = 0.0;
                                    redout_295134 = 0.0;
                                    for (int64_t i_295135 = 0; i_295135 <
                                         q_s_290265; i_295135++) {
                                        bool cond_291290 = sle64(x_291251,
                                                                 i_295135);
                                        int64_t defunc_0_f_res_291291;
                                        
                                        if (cond_291290) {
                                            defunc_0_f_res_291291 = (int64_t) 0;
                                        } else {
                                            int64_t i_291292 = add64(x_291257,
                                                                     i_295135);
                                            int64_t defunc_0_add_arg_291293;
                                            
                                            defunc_0_add_arg_291293 =
                                                ((int64_t *) mem_297221)[i_295157 *
                                                                         ctx_val_297131 +
                                                                         i_295150 *
                                                                         defunc_0_f_res_290407 +
                                                                         i_291292];
                                            
                                            int64_t defunc_1_add_res_291294 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_291293);
                                            
                                            defunc_0_f_res_291291 =
                                                defunc_1_add_res_291294;
                                        }
                                        
                                        double defunc_0_f_res_291295;
                                        
                                        if (cond_291290) {
                                            defunc_0_f_res_291295 = 0.0;
                                        } else {
                                            int64_t i_291296 = add64(x_291257,
                                                                     i_295135);
                                            double defunc_0_add_arg_291297;
                                            
                                            defunc_0_add_arg_291297 =
                                                ((double *) mem_297931)[i_295157 *
                                                                        ctx_val_297131 +
                                                                        i_295150 *
                                                                        defunc_0_f_res_290407 +
                                                                        i_291296];
                                            defunc_0_f_res_291295 =
                                                defunc_0_add_arg_291297;
                                        }
                                        
                                        int64_t binop_p_291298 =
                                                sub64(defunc_0_f_res_291291,
                                                      defunc_0_m_fun_res_291260);
                                        double defunc_0_f_res_291299 =
                                               sitofp_i64_f64(binop_p_291298);
                                        double abs_res_291300 =
                                               fabs(defunc_0_f_res_291299);
                                        double tmp1_291301 = abs_res_291300 /
                                               x_291258;
                                        double x_291302 = tmp1_291301 *
                                               tmp1_291301;
                                        double y_291303 = tmp1_291301 *
                                               x_291302;
                                        double tmp2_291304 = 1.0 - y_291303;
                                        double x_291305 = tmp2_291304 *
                                               tmp2_291304;
                                        double tmp3_291306 = tmp2_291304 *
                                               x_291305;
                                        double w_j_291307 =
                                               defunc_0_f_res_291295 *
                                               tmp3_291306;
                                        double xw_j_291308 =
                                               defunc_0_f_res_291299 *
                                               w_j_291307;
                                        double x2w_j_291309 =
                                               defunc_0_f_res_291299 *
                                               xw_j_291308;
                                        double x3w_j_291310 =
                                               defunc_0_f_res_291299 *
                                               x2w_j_291309;
                                        double x4w_j_291311 =
                                               defunc_0_f_res_291299 *
                                               x3w_j_291310;
                                        double defunc_1_op_res_291276 =
                                               w_j_291307 + redout_295130;
                                        double defunc_1_op_res_291279 =
                                               xw_j_291308 + redout_295131;
                                        double defunc_1_op_res_291282 =
                                               x2w_j_291309 + redout_295132;
                                        double defunc_1_op_res_291285 =
                                               x3w_j_291310 + redout_295133;
                                        double defunc_1_op_res_291288 =
                                               x4w_j_291311 + redout_295134;
                                        double redout_tmp_303961 =
                                               defunc_1_op_res_291276;
                                        double redout_tmp_303962 =
                                               defunc_1_op_res_291279;
                                        double redout_tmp_303963 =
                                               defunc_1_op_res_291282;
                                        double redout_tmp_303964 =
                                               defunc_1_op_res_291285;
                                        double redout_tmp_303965 =
                                               defunc_1_op_res_291288;
                                        
                                        redout_295130 = redout_tmp_303961;
                                        redout_295131 = redout_tmp_303962;
                                        redout_295132 = redout_tmp_303963;
                                        redout_295133 = redout_tmp_303964;
                                        redout_295134 = redout_tmp_303965;
                                    }
                                    defunc_2_reduce_res_291269 = redout_295130;
                                    defunc_2_reduce_res_291270 = redout_295131;
                                    defunc_2_reduce_res_291271 = redout_295132;
                                    defunc_2_reduce_res_291272 = redout_295133;
                                    defunc_2_reduce_res_291273 = redout_295134;
                                    
                                    double a_291312 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_291269;
                                    double b_291313 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_291270;
                                    double c_291314 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_291271;
                                    double d_291315 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_291272;
                                    double e_291316 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_291273;
                                    double x_291317 = c_291314 * e_291316;
                                    double y_291318 = d_291315 * d_291315;
                                    double a12_291319 = x_291317 - y_291318;
                                    double x_291320 = c_291314 * d_291315;
                                    double y_291321 = b_291313 * e_291316;
                                    double b12_291322 = x_291320 - y_291321;
                                    double x_291323 = b_291313 * d_291315;
                                    double y_291324 = c_291314 * c_291314;
                                    double c12_291325 = x_291323 - y_291324;
                                    double x_291326 = a_291312 * e_291316;
                                    double b2_291327 = x_291326 - y_291324;
                                    double x_291328 = b_291313 * c_291314;
                                    double y_291329 = a_291312 * d_291315;
                                    double c2_291330 = x_291328 - y_291329;
                                    double x_291331 = a_291312 * a12_291319;
                                    double y_291332 = b_291313 * b12_291322;
                                    double x_291333 = x_291331 + y_291332;
                                    double y_291334 = c_291314 * c12_291325;
                                    double y_291335 = x_291333 + y_291334;
                                    double det_291336 = 1.0 / y_291335;
                                    double a12_291337 = a12_291319 * det_291336;
                                    double b12_291338 = b12_291322 * det_291336;
                                    double c12_291339 = c12_291325 * det_291336;
                                    double b2_291340 = b2_291327 * det_291336;
                                    double c2_291341 = c2_291330 * det_291336;
                                    int64_t defunc_0_m_fun_res_291342;
                                    
                                    if (cond_291259) {
                                        defunc_0_m_fun_res_291342 = (int64_t) 0;
                                    } else {
                                        int64_t y_291343 = sub64(s_n_m_290412,
                                                                 (int64_t) 1);
                                        bool cond_291344 = i_295143 == y_291343;
                                        int64_t defunc_0_m_fun_res_f_res_291345;
                                        
                                        if (cond_291344) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_291346
                                            = sub64(pad_css_len_290408,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_291345 =
                                                defunc_0_m_fun_res_f_res_t_res_291346;
                                        } else {
                                            int64_t x_291347 = sub64(i_295143,
                                                                     (int64_t) 1);
                                            int64_t x_291348 =
                                                    mul64(jump_s_290271,
                                                          x_291347);
                                            int64_t min_arg_291349 =
                                                    add64((int64_t) 1,
                                                          x_291348);
                                            int64_t min_res_291350 =
                                                    smin64(defunc_0_f_res_290407,
                                                           min_arg_291349);
                                            
                                            defunc_0_m_fun_res_f_res_291345 =
                                                min_res_291350;
                                        }
                                        defunc_0_m_fun_res_291342 =
                                            defunc_0_m_fun_res_f_res_291345;
                                    }
                                    
                                    double defunc_2_reduce_res_291351;
                                    double defunc_2_reduce_res_291352;
                                    double redout_295136;
                                    double redout_295137;
                                    
                                    redout_295136 = 0.0;
                                    redout_295137 = 0.0;
                                    for (int64_t i_295138 = 0; i_295138 <
                                         q_s_290265; i_295138++) {
                                        bool cond_291360 = sle64(x_291251,
                                                                 i_295138);
                                        int64_t defunc_0_f_res_291361;
                                        
                                        if (cond_291360) {
                                            defunc_0_f_res_291361 = (int64_t) 0;
                                        } else {
                                            int64_t i_291362 = add64(x_291257,
                                                                     i_295138);
                                            int64_t defunc_0_add_arg_291363;
                                            
                                            defunc_0_add_arg_291363 =
                                                ((int64_t *) mem_297221)[i_295157 *
                                                                         ctx_val_297131 +
                                                                         i_295150 *
                                                                         defunc_0_f_res_290407 +
                                                                         i_291362];
                                            
                                            int64_t defunc_1_add_res_291364 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_291363);
                                            
                                            defunc_0_f_res_291361 =
                                                defunc_1_add_res_291364;
                                        }
                                        
                                        double defunc_0_f_res_291365;
                                        
                                        if (cond_291360) {
                                            defunc_0_f_res_291365 = 0.0;
                                        } else {
                                            int64_t i_291366 = add64(x_291257,
                                                                     i_295138);
                                            double defunc_0_add_arg_291367;
                                            
                                            defunc_0_add_arg_291367 =
                                                ((double *) mem_297931)[i_295157 *
                                                                        ctx_val_297131 +
                                                                        i_295150 *
                                                                        defunc_0_f_res_290407 +
                                                                        i_291366];
                                            defunc_0_f_res_291365 =
                                                defunc_0_add_arg_291367;
                                        }
                                        
                                        int64_t binop_p_291368 =
                                                sub64(defunc_0_f_res_291361,
                                                      defunc_0_m_fun_res_291342);
                                        double defunc_0_f_res_291369 =
                                               sitofp_i64_f64(binop_p_291368);
                                        double abs_res_291370 =
                                               fabs(defunc_0_f_res_291369);
                                        double tmp1_291371 = abs_res_291370 /
                                               x_291258;
                                        double x_291372 = tmp1_291371 *
                                               tmp1_291371;
                                        double y_291373 = tmp1_291371 *
                                               x_291372;
                                        double tmp2_291374 = 1.0 - y_291373;
                                        double x_291375 = tmp2_291374 *
                                               tmp2_291374;
                                        double tmp3_291376 = tmp2_291374 *
                                               x_291375;
                                        double tmp4_291377 =
                                               defunc_0_f_res_291365 *
                                               tmp3_291376;
                                        double defunc_1_f_res_291378 =
                                               defunc_0_f_res_291369 *
                                               tmp4_291377;
                                        double defunc_1_f_res_291379 =
                                               defunc_0_f_res_291369 *
                                               defunc_1_f_res_291378;
                                        double defunc_0_f_res_291380;
                                        
                                        if (cond_291360) {
                                            defunc_0_f_res_291380 = 0.0;
                                        } else {
                                            int64_t i_291381 = add64(x_291257,
                                                                     i_295138);
                                            double defunc_0_add_arg_291382;
                                            
                                            defunc_0_add_arg_291382 =
                                                ((double *) mem_297926)[i_295157 *
                                                                        ctx_val_297131 +
                                                                        i_295150 *
                                                                        defunc_0_f_res_290407 +
                                                                        i_291381];
                                            defunc_0_f_res_291380 =
                                                defunc_0_add_arg_291382;
                                        }
                                        
                                        double x_291383 = a12_291337 *
                                               tmp4_291377;
                                        double y_291384 = b12_291338 *
                                               defunc_1_f_res_291378;
                                        double x_291385 = x_291383 + y_291384;
                                        double y_291386 = c12_291339 *
                                               defunc_1_f_res_291379;
                                        double x_291387 = x_291385 + y_291386;
                                        double defunc_9_fit_fun_res_291388 =
                                               defunc_0_f_res_291380 * x_291387;
                                        double x_291389 = b12_291338 *
                                               tmp4_291377;
                                        double y_291390 = b2_291340 *
                                               defunc_1_f_res_291378;
                                        double x_291391 = x_291389 + y_291390;
                                        double y_291392 = c2_291341 *
                                               defunc_1_f_res_291379;
                                        double x_291393 = x_291391 + y_291392;
                                        double defunc_9_slope_fun_res_291394 =
                                               defunc_0_f_res_291380 * x_291393;
                                        double defunc_1_op_res_291355 =
                                               defunc_9_fit_fun_res_291388 +
                                               redout_295136;
                                        double defunc_1_op_res_291358 =
                                               defunc_9_slope_fun_res_291394 +
                                               redout_295137;
                                        double redout_tmp_303966 =
                                               defunc_1_op_res_291355;
                                        double redout_tmp_303967 =
                                               defunc_1_op_res_291358;
                                        
                                        redout_295136 = redout_tmp_303966;
                                        redout_295137 = redout_tmp_303967;
                                    }
                                    defunc_2_reduce_res_291351 = redout_295136;
                                    defunc_2_reduce_res_291352 = redout_295137;
                                    ((double *) mem_298446.mem)[i_295157 *
                                                                ctx_val_297415 +
                                                                i_295150 *
                                                                s_n_m_290412 +
                                                                i_295143] =
                                        defunc_2_reduce_res_291351;
                                    ((double *) mem_298451.mem)[i_295157 *
                                                                ctx_val_297415 +
                                                                i_295150 *
                                                                s_n_m_290412 +
                                                                i_295143] =
                                        defunc_2_reduce_res_291352;
                                }
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_298659, &mem_298446,
                                         "mem_298446") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_298648, &mem_298451,
                                         "mem_298451") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_298451, "mem_298451") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_298446, "mem_298446") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_298682, &ext_mem_298659,
                                     "ext_mem_298659") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_298671, &ext_mem_298648,
                                     "ext_mem_298648") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_298648,
                                       "ext_mem_298648") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_298659,
                                       "ext_mem_298659") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_299961, &ext_mem_298682,
                                 "ext_mem_298682") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_299950, &ext_mem_298671,
                                 "ext_mem_298671") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_298671, "ext_mem_298671") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_298682, "ext_mem_298682") != 0)
                    return 1;
            } else {
                bool cond_291397 = sle64(jump_threshold_2_290277,
                                         jump_s_290271);
                bool cond_t_res_291398 = slt64(q_s_290265,
                                               q_threshold_1_290278);
                bool x_291399 = cond_291397 && cond_t_res_291398;
                struct memblock ext_mem_299939;
                
                ext_mem_299939.references = NULL;
                
                struct memblock ext_mem_299928;
                
                ext_mem_299928.references = NULL;
                if (x_291399) {
                    bool match_lit_291402 = (int64_t) 0 == d_s_290268;
                    int64_t binop_y_298750 = (int64_t) 8 * q_s_290265;
                    int64_t bytes_298751 = smax64((int64_t) 0, binop_y_298750);
                    struct memblock ext_mem_299352;
                    
                    ext_mem_299352.references = NULL;
                    
                    struct memblock ext_mem_299341;
                    
                    ext_mem_299341.references = NULL;
                    if (match_lit_291402) {
                        struct memblock mem_298697;
                        
                        mem_298697.references = NULL;
                        if (memblock_alloc(ctx, &mem_298697, bytes_297385,
                                           "mem_298697")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_303968 = 0; i_303968 <
                             partition_sizze_290353; i_303968++) {
                            for (int64_t i_303969 = 0; i_303969 < n_p_290264;
                                 i_303969++) {
                                for (int64_t i_303970 = 0; i_303970 <
                                     s_n_m_290412; i_303970++) {
                                    ((double *) mem_298697.mem)[i_303968 *
                                                                (s_n_m_290412 *
                                                                 n_p_290264) +
                                                                i_303969 *
                                                                s_n_m_290412 +
                                                                i_303970] = 0.0;
                                }
                            }
                        }
                        
                        struct memblock mem_298702;
                        
                        mem_298702.references = NULL;
                        if (memblock_alloc(ctx, &mem_298702, bytes_297385,
                                           "mem_298702")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_298752_cached_sizze_304373 <
                            (size_t) bytes_298751) {
                            mem_298752 = realloc(mem_298752, bytes_298751);
                            mem_298752_cached_sizze_304373 = bytes_298751;
                        }
                        for (int64_t i_295177 = 0; i_295177 <
                             partition_sizze_290353; i_295177++) {
                            for (int64_t i_295173 = 0; i_295173 < n_p_290264;
                                 i_295173++) {
                                int64_t x_291418;
                                
                                x_291418 = ((int64_t *) mem_297225)[i_295177 *
                                                                    n_p_290264 +
                                                                    i_295173];
                                for (int64_t i_295169 = 0; i_295169 <
                                     s_n_m_290412; i_295169++) {
                                    int64_t x_291423;
                                    
                                    x_291423 =
                                        ((int64_t *) mem_297386)[i_295177 *
                                                                 ctx_val_297415 +
                                                                 i_295173 *
                                                                 s_n_m_290412 +
                                                                 i_295169];
                                    
                                    double x_291424;
                                    
                                    x_291424 =
                                        ((double *) mem_297391)[i_295177 *
                                                                ctx_val_297415 +
                                                                i_295173 *
                                                                s_n_m_290412 +
                                                                i_295169];
                                    
                                    bool cond_291425 = i_295169 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_291426;
                                    
                                    if (cond_291425) {
                                        defunc_0_m_fun_res_291426 = (int64_t) 0;
                                    } else {
                                        int64_t y_291427 = sub64(s_n_m_290412,
                                                                 (int64_t) 1);
                                        bool cond_291428 = i_295169 == y_291427;
                                        int64_t defunc_0_m_fun_res_f_res_291429;
                                        
                                        if (cond_291428) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_291430
                                            = sub64(pad_css_len_290408,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_291429 =
                                                defunc_0_m_fun_res_f_res_t_res_291430;
                                        } else {
                                            int64_t x_291431 = sub64(i_295169,
                                                                     (int64_t) 1);
                                            int64_t x_291432 =
                                                    mul64(jump_s_290271,
                                                          x_291431);
                                            int64_t min_arg_291433 =
                                                    add64((int64_t) 1,
                                                          x_291432);
                                            int64_t min_res_291434 =
                                                    smin64(defunc_0_f_res_290407,
                                                           min_arg_291433);
                                            
                                            defunc_0_m_fun_res_f_res_291429 =
                                                min_res_291434;
                                        }
                                        defunc_0_m_fun_res_291426 =
                                            defunc_0_m_fun_res_f_res_291429;
                                    }
                                    
                                    double defunc_2_reduce_res_291435;
                                    double redout_295161 = 0.0;
                                    
                                    for (int64_t i_295163 = 0; i_295163 <
                                         q_s_290265; i_295163++) {
                                        bool cond_291441 = sle64(x_291418,
                                                                 i_295163);
                                        int64_t defunc_0_f_res_291442;
                                        
                                        if (cond_291441) {
                                            defunc_0_f_res_291442 = (int64_t) 0;
                                        } else {
                                            int64_t i_291443 = add64(x_291423,
                                                                     i_295163);
                                            int64_t defunc_0_add_arg_291444;
                                            
                                            defunc_0_add_arg_291444 =
                                                ((int64_t *) mem_297221)[i_295177 *
                                                                         ctx_val_297131 +
                                                                         i_295173 *
                                                                         defunc_0_f_res_290407 +
                                                                         i_291443];
                                            
                                            int64_t defunc_1_add_res_291445 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_291444);
                                            
                                            defunc_0_f_res_291442 =
                                                defunc_1_add_res_291445;
                                        }
                                        
                                        double defunc_0_f_res_291446;
                                        
                                        if (cond_291441) {
                                            defunc_0_f_res_291446 = 0.0;
                                        } else {
                                            int64_t i_291447 = add64(x_291423,
                                                                     i_295163);
                                            double defunc_0_add_arg_291448;
                                            
                                            defunc_0_add_arg_291448 =
                                                ((double *) mem_297931)[i_295177 *
                                                                        ctx_val_297131 +
                                                                        i_295173 *
                                                                        defunc_0_f_res_290407 +
                                                                        i_291447];
                                            defunc_0_f_res_291446 =
                                                defunc_0_add_arg_291448;
                                        }
                                        
                                        int64_t binop_p_291449 =
                                                sub64(defunc_0_f_res_291442,
                                                      defunc_0_m_fun_res_291426);
                                        double defunc_0_f_res_291450 =
                                               sitofp_i64_f64(binop_p_291449);
                                        double abs_res_291451 =
                                               fabs(defunc_0_f_res_291450);
                                        double tmp1_291452 = abs_res_291451 /
                                               x_291424;
                                        double x_291453 = tmp1_291452 *
                                               tmp1_291452;
                                        double y_291454 = tmp1_291452 *
                                               x_291453;
                                        double tmp2_291455 = 1.0 - y_291454;
                                        double x_291456 = tmp2_291455 *
                                               tmp2_291455;
                                        double tmp3_291457 = tmp2_291455 *
                                               x_291456;
                                        double tmp4_291458 =
                                               defunc_0_f_res_291446 *
                                               tmp3_291457;
                                        double defunc_1_op_res_291439 =
                                               tmp4_291458 + redout_295161;
                                        
                                        ((double *) mem_298752)[i_295163] =
                                            tmp4_291458;
                                        
                                        double redout_tmp_303974 =
                                               defunc_1_op_res_291439;
                                        
                                        redout_295161 = redout_tmp_303974;
                                    }
                                    defunc_2_reduce_res_291435 = redout_295161;
                                    
                                    double a_291459 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_291435;
                                    double a0_291460 = 1.0 / a_291459;
                                    double defunc_2_reduce_res_291461;
                                    double redout_295165 = 0.0;
                                    
                                    for (int64_t i_295166 = 0; i_295166 <
                                         q_s_290265; i_295166++) {
                                        double x_291466;
                                        
                                        x_291466 =
                                            ((double *) mem_298752)[i_295166];
                                        
                                        bool cond_291467 = sle64(x_291418,
                                                                 i_295166);
                                        double defunc_0_f_res_291468;
                                        
                                        if (cond_291467) {
                                            defunc_0_f_res_291468 = 0.0;
                                        } else {
                                            int64_t i_291469 = add64(x_291423,
                                                                     i_295166);
                                            double defunc_0_add_arg_291470;
                                            
                                            defunc_0_add_arg_291470 =
                                                ((double *) mem_297926)[i_295177 *
                                                                        ctx_val_297131 +
                                                                        i_295173 *
                                                                        defunc_0_f_res_290407 +
                                                                        i_291469];
                                            defunc_0_f_res_291468 =
                                                defunc_0_add_arg_291470;
                                        }
                                        
                                        double x_291471 = a0_291460 * x_291466;
                                        double defunc_9_fit_fun_res_291472 =
                                               defunc_0_f_res_291468 * x_291471;
                                        double defunc_1_op_res_291464 =
                                               defunc_9_fit_fun_res_291472 +
                                               redout_295165;
                                        double redout_tmp_303976 =
                                               defunc_1_op_res_291464;
                                        
                                        redout_295165 = redout_tmp_303976;
                                    }
                                    defunc_2_reduce_res_291461 = redout_295165;
                                    ((double *) mem_298702.mem)[i_295177 *
                                                                ctx_val_297415 +
                                                                i_295173 *
                                                                s_n_m_290412 +
                                                                i_295169] =
                                        defunc_2_reduce_res_291461;
                                }
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_299352, &mem_298702,
                                         "mem_298702") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_299341, &mem_298697,
                                         "mem_298697") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_298702, "mem_298702") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_298697, "mem_298697") != 0)
                            return 1;
                    } else {
                        bool match_lit_291475 = (int64_t) 1 == d_s_290268;
                        int64_t binop_y_298920 = (int64_t) 8 * q_s_290265;
                        int64_t bytes_298921 = smax64((int64_t) 0,
                                                      binop_y_298920);
                        int64_t binop_y_299156 = (int64_t) 8 * q_s_290265;
                        int64_t bytes_299157 = smax64((int64_t) 0,
                                                      binop_y_299156);
                        struct memblock ext_mem_299329;
                        
                        ext_mem_299329.references = NULL;
                        
                        struct memblock ext_mem_299318;
                        
                        ext_mem_299318.references = NULL;
                        if (match_lit_291475) {
                            struct memblock mem_298820;
                            
                            mem_298820.references = NULL;
                            if (memblock_alloc(ctx, &mem_298820, bytes_297385,
                                               "mem_298820")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_298825;
                            
                            mem_298825.references = NULL;
                            if (memblock_alloc(ctx, &mem_298825, bytes_297385,
                                               "mem_298825")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_298922_cached_sizze_304374 <
                                (size_t) bytes_298921) {
                                mem_298922 = realloc(mem_298922, bytes_298921);
                                mem_298922_cached_sizze_304374 = bytes_298921;
                            }
                            if (mem_298925_cached_sizze_304375 <
                                (size_t) bytes_298921) {
                                mem_298925 = realloc(mem_298925, bytes_298921);
                                mem_298925_cached_sizze_304375 = bytes_298921;
                            }
                            for (int64_t i_295210 = 0; i_295210 <
                                 partition_sizze_290353; i_295210++) {
                                for (int64_t i_295203 = 0; i_295203 <
                                     n_p_290264; i_295203++) {
                                    int64_t x_291492;
                                    
                                    x_291492 =
                                        ((int64_t *) mem_297225)[i_295210 *
                                                                 n_p_290264 +
                                                                 i_295203];
                                    for (int64_t i_295196 = 0; i_295196 <
                                         s_n_m_290412; i_295196++) {
                                        int64_t x_291498;
                                        
                                        x_291498 =
                                            ((int64_t *) mem_297386)[i_295210 *
                                                                     ctx_val_297415 +
                                                                     i_295203 *
                                                                     s_n_m_290412 +
                                                                     i_295196];
                                        
                                        double x_291499;
                                        
                                        x_291499 =
                                            ((double *) mem_297391)[i_295210 *
                                                                    ctx_val_297415 +
                                                                    i_295203 *
                                                                    s_n_m_290412 +
                                                                    i_295196];
                                        
                                        bool cond_291500 = i_295196 ==
                                             (int64_t) 0;
                                        int64_t defunc_0_m_fun_res_291501;
                                        
                                        if (cond_291500) {
                                            defunc_0_m_fun_res_291501 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_291502 =
                                                    sub64(s_n_m_290412,
                                                          (int64_t) 1);
                                            bool cond_291503 = i_295196 ==
                                                 y_291502;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_291504;
                                            
                                            if (cond_291503) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_291505
                                                = sub64(pad_css_len_290408,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_291504 =
                                                    defunc_0_m_fun_res_f_res_t_res_291505;
                                            } else {
                                                int64_t x_291506 =
                                                        sub64(i_295196,
                                                              (int64_t) 1);
                                                int64_t x_291507 =
                                                        mul64(jump_s_290271,
                                                              x_291506);
                                                int64_t min_arg_291508 =
                                                        add64((int64_t) 1,
                                                              x_291507);
                                                int64_t min_res_291509 =
                                                        smin64(defunc_0_f_res_290407,
                                                               min_arg_291508);
                                                
                                                defunc_0_m_fun_res_f_res_291504 =
                                                    min_res_291509;
                                            }
                                            defunc_0_m_fun_res_291501 =
                                                defunc_0_m_fun_res_f_res_291504;
                                        }
                                        
                                        double defunc_2_reduce_res_291533;
                                        double defunc_2_reduce_res_291534;
                                        double defunc_2_reduce_res_291535;
                                        double redout_295181;
                                        double redout_295182;
                                        double redout_295183;
                                        
                                        redout_295181 = 0.0;
                                        redout_295182 = 0.0;
                                        redout_295183 = 0.0;
                                        for (int64_t i_295186 = 0; i_295186 <
                                             q_s_290265; i_295186++) {
                                            bool cond_291548 = sle64(x_291492,
                                                                     i_295186);
                                            int64_t defunc_0_f_res_291549;
                                            
                                            if (cond_291548) {
                                                defunc_0_f_res_291549 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_291550 =
                                                        add64(x_291498,
                                                              i_295186);
                                                int64_t defunc_0_add_arg_291551;
                                                
                                                defunc_0_add_arg_291551 =
                                                    ((int64_t *) mem_297221)[i_295210 *
                                                                             ctx_val_297131 +
                                                                             i_295203 *
                                                                             defunc_0_f_res_290407 +
                                                                             i_291550];
                                                
                                                int64_t defunc_1_add_res_291552
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_291551);
                                                
                                                defunc_0_f_res_291549 =
                                                    defunc_1_add_res_291552;
                                            }
                                            
                                            double defunc_0_f_res_291553;
                                            
                                            if (cond_291548) {
                                                defunc_0_f_res_291553 = 0.0;
                                            } else {
                                                int64_t i_291554 =
                                                        add64(x_291498,
                                                              i_295186);
                                                double defunc_0_add_arg_291555;
                                                
                                                defunc_0_add_arg_291555 =
                                                    ((double *) mem_297931)[i_295210 *
                                                                            ctx_val_297131 +
                                                                            i_295203 *
                                                                            defunc_0_f_res_290407 +
                                                                            i_291554];
                                                defunc_0_f_res_291553 =
                                                    defunc_0_add_arg_291555;
                                            }
                                            
                                            int64_t binop_p_291556 =
                                                    sub64(defunc_0_f_res_291549,
                                                          defunc_0_m_fun_res_291501);
                                            double defunc_0_f_res_291557 =
                                                   sitofp_i64_f64(binop_p_291556);
                                            double abs_res_291558 =
                                                   fabs(defunc_0_f_res_291557);
                                            double tmp1_291559 =
                                                   abs_res_291558 / x_291499;
                                            double x_291560 = tmp1_291559 *
                                                   tmp1_291559;
                                            double y_291561 = tmp1_291559 *
                                                   x_291560;
                                            double tmp2_291562 = 1.0 - y_291561;
                                            double x_291563 = tmp2_291562 *
                                                   tmp2_291562;
                                            double tmp3_291564 = tmp2_291562 *
                                                   x_291563;
                                            double tmp4_291565 =
                                                   defunc_0_f_res_291553 *
                                                   tmp3_291564;
                                            double defunc_1_f_res_291566 =
                                                   defunc_0_f_res_291557 *
                                                   tmp4_291565;
                                            double defunc_1_f_res_291567 =
                                                   defunc_0_f_res_291557 *
                                                   defunc_1_f_res_291566;
                                            double defunc_1_op_res_291540 =
                                                   tmp4_291565 + redout_295181;
                                            double defunc_1_op_res_291543 =
                                                   defunc_1_f_res_291566 +
                                                   redout_295182;
                                            double defunc_1_op_res_291546 =
                                                   defunc_1_f_res_291567 +
                                                   redout_295183;
                                            
                                            ((double *) mem_298922)[i_295186] =
                                                defunc_1_f_res_291566;
                                            ((double *) mem_298925)[i_295186] =
                                                tmp4_291565;
                                            
                                            double redout_tmp_303983 =
                                                   defunc_1_op_res_291540;
                                            double redout_tmp_303984 =
                                                   defunc_1_op_res_291543;
                                            double redout_tmp_303985 =
                                                   defunc_1_op_res_291546;
                                            
                                            redout_295181 = redout_tmp_303983;
                                            redout_295182 = redout_tmp_303984;
                                            redout_295183 = redout_tmp_303985;
                                        }
                                        defunc_2_reduce_res_291533 =
                                            redout_295181;
                                        defunc_2_reduce_res_291534 =
                                            redout_295182;
                                        defunc_2_reduce_res_291535 =
                                            redout_295183;
                                        
                                        double a_291573 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291533;
                                        double b_291574 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291534;
                                        double c_291575 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291535;
                                        double x_291576 = a_291573 * c_291575;
                                        double y_291577 = b_291574 * b_291574;
                                        double y_291578 = x_291576 - y_291577;
                                        double det1_291579 = 1.0 / y_291578;
                                        double a11_291580 = c_291575 *
                                               det1_291579;
                                        double x_291581 = 0.0 - b_291574;
                                        double b11_291582 = det1_291579 *
                                               x_291581;
                                        double c11_291583 = a_291573 *
                                               det1_291579;
                                        double defunc_2_reduce_res_291584;
                                        double defunc_2_reduce_res_291585;
                                        double redout_295189;
                                        double redout_295190;
                                        
                                        redout_295189 = 0.0;
                                        redout_295190 = 0.0;
                                        for (int64_t i_295191 = 0; i_295191 <
                                             q_s_290265; i_295191++) {
                                            double x_291593;
                                            
                                            x_291593 =
                                                ((double *) mem_298925)[i_295191];
                                            
                                            double x_291594;
                                            
                                            x_291594 =
                                                ((double *) mem_298922)[i_295191];
                                            
                                            bool cond_291595 = sle64(x_291492,
                                                                     i_295191);
                                            double defunc_0_f_res_291596;
                                            
                                            if (cond_291595) {
                                                defunc_0_f_res_291596 = 0.0;
                                            } else {
                                                int64_t i_291597 =
                                                        add64(x_291498,
                                                              i_295191);
                                                double defunc_0_add_arg_291598;
                                                
                                                defunc_0_add_arg_291598 =
                                                    ((double *) mem_297926)[i_295210 *
                                                                            ctx_val_297131 +
                                                                            i_295203 *
                                                                            defunc_0_f_res_290407 +
                                                                            i_291597];
                                                defunc_0_f_res_291596 =
                                                    defunc_0_add_arg_291598;
                                            }
                                            
                                            double x_291599 = a11_291580 *
                                                   x_291593;
                                            double y_291600 = b11_291582 *
                                                   x_291594;
                                            double x_291601 = x_291599 +
                                                   y_291600;
                                            double defunc_9_fit_fun_res_291602 =
                                                   defunc_0_f_res_291596 *
                                                   x_291601;
                                            double x_291603 = b11_291582 *
                                                   x_291593;
                                            double y_291604 = c11_291583 *
                                                   x_291594;
                                            double x_291605 = x_291603 +
                                                   y_291604;
                                            double defunc_9_slope_fun_res_291606
                                                   = defunc_0_f_res_291596 *
                                                   x_291605;
                                            double defunc_1_op_res_291588 =
                                                   defunc_9_fit_fun_res_291602 +
                                                   redout_295189;
                                            double defunc_1_op_res_291591 =
                                                   defunc_9_slope_fun_res_291606 +
                                                   redout_295190;
                                            double redout_tmp_303988 =
                                                   defunc_1_op_res_291588;
                                            double redout_tmp_303989 =
                                                   defunc_1_op_res_291591;
                                            
                                            redout_295189 = redout_tmp_303988;
                                            redout_295190 = redout_tmp_303989;
                                        }
                                        defunc_2_reduce_res_291584 =
                                            redout_295189;
                                        defunc_2_reduce_res_291585 =
                                            redout_295190;
                                        ((double *) mem_298820.mem)[i_295210 *
                                                                    ctx_val_297415 +
                                                                    i_295203 *
                                                                    s_n_m_290412 +
                                                                    i_295196] =
                                            defunc_2_reduce_res_291584;
                                        ((double *) mem_298825.mem)[i_295210 *
                                                                    ctx_val_297415 +
                                                                    i_295203 *
                                                                    s_n_m_290412 +
                                                                    i_295196] =
                                            defunc_2_reduce_res_291585;
                                    }
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_299329, &mem_298820,
                                             "mem_298820") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_299318, &mem_298825,
                                             "mem_298825") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_298825,
                                               "mem_298825") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_298820,
                                               "mem_298820") != 0)
                                return 1;
                        } else {
                            struct memblock mem_299056;
                            
                            mem_299056.references = NULL;
                            if (memblock_alloc(ctx, &mem_299056, bytes_297385,
                                               "mem_299056")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_299061;
                            
                            mem_299061.references = NULL;
                            if (memblock_alloc(ctx, &mem_299061, bytes_297385,
                                               "mem_299061")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_299158_cached_sizze_304376 <
                                (size_t) bytes_299157) {
                                mem_299158 = realloc(mem_299158, bytes_299157);
                                mem_299158_cached_sizze_304376 = bytes_299157;
                            }
                            if (mem_299161_cached_sizze_304377 <
                                (size_t) bytes_299157) {
                                mem_299161 = realloc(mem_299161, bytes_299157);
                                mem_299161_cached_sizze_304377 = bytes_299157;
                            }
                            if (mem_299188_cached_sizze_304378 <
                                (size_t) bytes_299157) {
                                mem_299188 = realloc(mem_299188, bytes_299157);
                                mem_299188_cached_sizze_304378 = bytes_299157;
                            }
                            if (mem_299191_cached_sizze_304379 <
                                (size_t) bytes_299157) {
                                mem_299191 = realloc(mem_299191, bytes_299157);
                                mem_299191_cached_sizze_304379 = bytes_299157;
                            }
                            for (int64_t i_295253 = 0; i_295253 <
                                 partition_sizze_290353; i_295253++) {
                                for (int64_t i_295246 = 0; i_295246 <
                                     n_p_290264; i_295246++) {
                                    int64_t x_291623;
                                    
                                    x_291623 =
                                        ((int64_t *) mem_297225)[i_295253 *
                                                                 n_p_290264 +
                                                                 i_295246];
                                    for (int64_t i_295239 = 0; i_295239 <
                                         s_n_m_290412; i_295239++) {
                                        int64_t x_291629;
                                        
                                        x_291629 =
                                            ((int64_t *) mem_297386)[i_295253 *
                                                                     ctx_val_297415 +
                                                                     i_295246 *
                                                                     s_n_m_290412 +
                                                                     i_295239];
                                        
                                        double x_291630;
                                        
                                        x_291630 =
                                            ((double *) mem_297391)[i_295253 *
                                                                    ctx_val_297415 +
                                                                    i_295246 *
                                                                    s_n_m_290412 +
                                                                    i_295239];
                                        
                                        bool cond_291631 = i_295239 ==
                                             (int64_t) 0;
                                        int64_t defunc_0_m_fun_res_291632;
                                        
                                        if (cond_291631) {
                                            defunc_0_m_fun_res_291632 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_291633 =
                                                    sub64(s_n_m_290412,
                                                          (int64_t) 1);
                                            bool cond_291634 = i_295239 ==
                                                 y_291633;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_291635;
                                            
                                            if (cond_291634) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_291636
                                                = sub64(pad_css_len_290408,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_291635 =
                                                    defunc_0_m_fun_res_f_res_t_res_291636;
                                            } else {
                                                int64_t x_291637 =
                                                        sub64(i_295239,
                                                              (int64_t) 1);
                                                int64_t x_291638 =
                                                        mul64(jump_s_290271,
                                                              x_291637);
                                                int64_t min_arg_291639 =
                                                        add64((int64_t) 1,
                                                              x_291638);
                                                int64_t min_res_291640 =
                                                        smin64(defunc_0_f_res_290407,
                                                               min_arg_291639);
                                                
                                                defunc_0_m_fun_res_f_res_291635 =
                                                    min_res_291640;
                                            }
                                            defunc_0_m_fun_res_291632 =
                                                defunc_0_m_fun_res_f_res_291635;
                                        }
                                        for (int64_t i_295217 = 0; i_295217 <
                                             q_s_290265; i_295217++) {
                                            bool cond_291644 = sle64(x_291623,
                                                                     i_295217);
                                            int64_t defunc_0_f_res_291645;
                                            
                                            if (cond_291644) {
                                                defunc_0_f_res_291645 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_291646 =
                                                        add64(x_291629,
                                                              i_295217);
                                                int64_t defunc_0_add_arg_291647;
                                                
                                                defunc_0_add_arg_291647 =
                                                    ((int64_t *) mem_297221)[i_295253 *
                                                                             ctx_val_297131 +
                                                                             i_295246 *
                                                                             defunc_0_f_res_290407 +
                                                                             i_291646];
                                                
                                                int64_t defunc_1_add_res_291648
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_291647);
                                                
                                                defunc_0_f_res_291645 =
                                                    defunc_1_add_res_291648;
                                            }
                                            
                                            double defunc_0_f_res_291649;
                                            
                                            if (cond_291644) {
                                                defunc_0_f_res_291649 = 0.0;
                                            } else {
                                                int64_t i_291650 =
                                                        add64(x_291629,
                                                              i_295217);
                                                double defunc_0_add_arg_291651;
                                                
                                                defunc_0_add_arg_291651 =
                                                    ((double *) mem_297931)[i_295253 *
                                                                            ctx_val_297131 +
                                                                            i_295246 *
                                                                            defunc_0_f_res_290407 +
                                                                            i_291650];
                                                defunc_0_f_res_291649 =
                                                    defunc_0_add_arg_291651;
                                            }
                                            
                                            int64_t binop_p_291652 =
                                                    sub64(defunc_0_f_res_291645,
                                                          defunc_0_m_fun_res_291632);
                                            double defunc_0_f_res_291653 =
                                                   sitofp_i64_f64(binop_p_291652);
                                            double abs_res_291654 =
                                                   fabs(defunc_0_f_res_291653);
                                            double tmp1_291655 =
                                                   abs_res_291654 / x_291630;
                                            double x_291656 = tmp1_291655 *
                                                   tmp1_291655;
                                            double y_291657 = tmp1_291655 *
                                                   x_291656;
                                            double tmp2_291658 = 1.0 - y_291657;
                                            double x_291659 = tmp2_291658 *
                                                   tmp2_291658;
                                            double tmp3_291660 = tmp2_291658 *
                                                   x_291659;
                                            double tmp4_291661 =
                                                   defunc_0_f_res_291649 *
                                                   tmp3_291660;
                                            
                                            ((double *) mem_299158)[i_295217] =
                                                defunc_0_f_res_291653;
                                            ((double *) mem_299161)[i_295217] =
                                                tmp4_291661;
                                        }
                                        
                                        double defunc_2_reduce_res_291668;
                                        double defunc_2_reduce_res_291669;
                                        double defunc_2_reduce_res_291670;
                                        double defunc_2_reduce_res_291671;
                                        double defunc_2_reduce_res_291672;
                                        double redout_295222;
                                        double redout_295223;
                                        double redout_295224;
                                        double redout_295225;
                                        double redout_295226;
                                        
                                        redout_295222 = 0.0;
                                        redout_295223 = 0.0;
                                        redout_295224 = 0.0;
                                        redout_295225 = 0.0;
                                        redout_295226 = 0.0;
                                        for (int64_t i_295229 = 0; i_295229 <
                                             q_s_290265; i_295229++) {
                                            double x_291690;
                                            
                                            x_291690 =
                                                ((double *) mem_299158)[i_295229];
                                            
                                            double x_291691;
                                            
                                            x_291691 =
                                                ((double *) mem_299161)[i_295229];
                                            
                                            double defunc_1_f_res_291692 =
                                                   x_291690 * x_291691;
                                            double defunc_1_f_res_291693 =
                                                   x_291690 *
                                                   defunc_1_f_res_291692;
                                            double defunc_1_f_res_291694 =
                                                   x_291690 *
                                                   defunc_1_f_res_291693;
                                            double defunc_1_f_res_291695 =
                                                   x_291690 *
                                                   defunc_1_f_res_291694;
                                            double defunc_1_op_res_291677 =
                                                   x_291691 + redout_295222;
                                            double defunc_1_op_res_291680 =
                                                   defunc_1_f_res_291692 +
                                                   redout_295223;
                                            double defunc_1_op_res_291683 =
                                                   defunc_1_f_res_291693 +
                                                   redout_295224;
                                            double defunc_1_op_res_291686 =
                                                   defunc_1_f_res_291694 +
                                                   redout_295225;
                                            double defunc_1_op_res_291689 =
                                                   defunc_1_f_res_291695 +
                                                   redout_295226;
                                            
                                            ((double *) mem_299188)[i_295229] =
                                                defunc_1_f_res_291693;
                                            ((double *) mem_299191)[i_295229] =
                                                defunc_1_f_res_291692;
                                            
                                            double redout_tmp_303998 =
                                                   defunc_1_op_res_291677;
                                            double redout_tmp_303999 =
                                                   defunc_1_op_res_291680;
                                            double redout_tmp_304000 =
                                                   defunc_1_op_res_291683;
                                            double redout_tmp_304001 =
                                                   defunc_1_op_res_291686;
                                            double redout_tmp_304002 =
                                                   defunc_1_op_res_291689;
                                            
                                            redout_295222 = redout_tmp_303998;
                                            redout_295223 = redout_tmp_303999;
                                            redout_295224 = redout_tmp_304000;
                                            redout_295225 = redout_tmp_304001;
                                            redout_295226 = redout_tmp_304002;
                                        }
                                        defunc_2_reduce_res_291668 =
                                            redout_295222;
                                        defunc_2_reduce_res_291669 =
                                            redout_295223;
                                        defunc_2_reduce_res_291670 =
                                            redout_295224;
                                        defunc_2_reduce_res_291671 =
                                            redout_295225;
                                        defunc_2_reduce_res_291672 =
                                            redout_295226;
                                        
                                        double a_291703 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291668;
                                        double b_291704 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291669;
                                        double c_291705 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291670;
                                        double d_291706 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291671;
                                        double e_291707 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291672;
                                        double x_291708 = c_291705 * e_291707;
                                        double y_291709 = d_291706 * d_291706;
                                        double a12_291710 = x_291708 - y_291709;
                                        double x_291711 = c_291705 * d_291706;
                                        double y_291712 = b_291704 * e_291707;
                                        double b12_291713 = x_291711 - y_291712;
                                        double x_291714 = b_291704 * d_291706;
                                        double y_291715 = c_291705 * c_291705;
                                        double c12_291716 = x_291714 - y_291715;
                                        double x_291717 = a_291703 * e_291707;
                                        double b2_291718 = x_291717 - y_291715;
                                        double x_291719 = b_291704 * c_291705;
                                        double y_291720 = a_291703 * d_291706;
                                        double c2_291721 = x_291719 - y_291720;
                                        double x_291722 = a_291703 * a12_291710;
                                        double y_291723 = b_291704 * b12_291713;
                                        double x_291724 = x_291722 + y_291723;
                                        double y_291725 = c_291705 * c12_291716;
                                        double y_291726 = x_291724 + y_291725;
                                        double det_291727 = 1.0 / y_291726;
                                        double a12_291728 = a12_291710 *
                                               det_291727;
                                        double b12_291729 = b12_291713 *
                                               det_291727;
                                        double c12_291730 = c12_291716 *
                                               det_291727;
                                        double b2_291731 = b2_291718 *
                                               det_291727;
                                        double c2_291732 = c2_291721 *
                                               det_291727;
                                        double defunc_2_reduce_res_291733;
                                        double defunc_2_reduce_res_291734;
                                        double redout_295232;
                                        double redout_295233;
                                        
                                        redout_295232 = 0.0;
                                        redout_295233 = 0.0;
                                        for (int64_t i_295234 = 0; i_295234 <
                                             q_s_290265; i_295234++) {
                                            double x_291742;
                                            
                                            x_291742 =
                                                ((double *) mem_299161)[i_295234];
                                            
                                            double x_291743;
                                            
                                            x_291743 =
                                                ((double *) mem_299191)[i_295234];
                                            
                                            double x_291744;
                                            
                                            x_291744 =
                                                ((double *) mem_299188)[i_295234];
                                            
                                            bool cond_291745 = sle64(x_291623,
                                                                     i_295234);
                                            double defunc_0_f_res_291746;
                                            
                                            if (cond_291745) {
                                                defunc_0_f_res_291746 = 0.0;
                                            } else {
                                                int64_t i_291747 =
                                                        add64(x_291629,
                                                              i_295234);
                                                double defunc_0_add_arg_291748;
                                                
                                                defunc_0_add_arg_291748 =
                                                    ((double *) mem_297926)[i_295253 *
                                                                            ctx_val_297131 +
                                                                            i_295246 *
                                                                            defunc_0_f_res_290407 +
                                                                            i_291747];
                                                defunc_0_f_res_291746 =
                                                    defunc_0_add_arg_291748;
                                            }
                                            
                                            double x_291749 = a12_291728 *
                                                   x_291742;
                                            double y_291750 = b12_291729 *
                                                   x_291743;
                                            double x_291751 = x_291749 +
                                                   y_291750;
                                            double y_291752 = c12_291730 *
                                                   x_291744;
                                            double x_291753 = x_291751 +
                                                   y_291752;
                                            double defunc_9_fit_fun_res_291754 =
                                                   defunc_0_f_res_291746 *
                                                   x_291753;
                                            double x_291755 = b12_291729 *
                                                   x_291742;
                                            double y_291756 = b2_291731 *
                                                   x_291743;
                                            double x_291757 = x_291755 +
                                                   y_291756;
                                            double y_291758 = c2_291732 *
                                                   x_291744;
                                            double x_291759 = x_291757 +
                                                   y_291758;
                                            double defunc_9_slope_fun_res_291760
                                                   = defunc_0_f_res_291746 *
                                                   x_291759;
                                            double defunc_1_op_res_291737 =
                                                   defunc_9_fit_fun_res_291754 +
                                                   redout_295232;
                                            double defunc_1_op_res_291740 =
                                                   defunc_9_slope_fun_res_291760 +
                                                   redout_295233;
                                            double redout_tmp_304005 =
                                                   defunc_1_op_res_291737;
                                            double redout_tmp_304006 =
                                                   defunc_1_op_res_291740;
                                            
                                            redout_295232 = redout_tmp_304005;
                                            redout_295233 = redout_tmp_304006;
                                        }
                                        defunc_2_reduce_res_291733 =
                                            redout_295232;
                                        defunc_2_reduce_res_291734 =
                                            redout_295233;
                                        ((double *) mem_299056.mem)[i_295253 *
                                                                    ctx_val_297415 +
                                                                    i_295246 *
                                                                    s_n_m_290412 +
                                                                    i_295239] =
                                            defunc_2_reduce_res_291733;
                                        ((double *) mem_299061.mem)[i_295253 *
                                                                    ctx_val_297415 +
                                                                    i_295246 *
                                                                    s_n_m_290412 +
                                                                    i_295239] =
                                            defunc_2_reduce_res_291734;
                                    }
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_299329, &mem_299056,
                                             "mem_299056") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_299318, &mem_299061,
                                             "mem_299061") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_299061,
                                               "mem_299061") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_299056,
                                               "mem_299056") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_299352, &ext_mem_299329,
                                         "ext_mem_299329") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_299341, &ext_mem_299318,
                                         "ext_mem_299318") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_299318,
                                           "ext_mem_299318") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_299329,
                                           "ext_mem_299329") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_299939, &ext_mem_299352,
                                     "ext_mem_299352") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_299928, &ext_mem_299341,
                                     "ext_mem_299341") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299341,
                                       "ext_mem_299341") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299352,
                                       "ext_mem_299352") != 0)
                        return 1;
                } else {
                    bool match_lit_291763 = (int64_t) 0 == d_s_290268;
                    struct memblock ext_mem_299917;
                    
                    ext_mem_299917.references = NULL;
                    
                    struct memblock ext_mem_299906;
                    
                    ext_mem_299906.references = NULL;
                    if (match_lit_291763) {
                        struct memblock mem_299367;
                        
                        mem_299367.references = NULL;
                        if (memblock_alloc(ctx, &mem_299367, bytes_297385,
                                           "mem_299367")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_304007 = 0; i_304007 <
                             partition_sizze_290353; i_304007++) {
                            for (int64_t i_304008 = 0; i_304008 < n_p_290264;
                                 i_304008++) {
                                for (int64_t i_304009 = 0; i_304009 <
                                     s_n_m_290412; i_304009++) {
                                    ((double *) mem_299367.mem)[i_304007 *
                                                                (s_n_m_290412 *
                                                                 n_p_290264) +
                                                                i_304008 *
                                                                s_n_m_290412 +
                                                                i_304009] = 0.0;
                                }
                            }
                        }
                        
                        struct memblock mem_299372;
                        
                        mem_299372.references = NULL;
                        if (memblock_alloc(ctx, &mem_299372, bytes_297385,
                                           "mem_299372")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_295270 = 0; i_295270 <
                             partition_sizze_290353; i_295270++) {
                            for (int64_t i_295266 = 0; i_295266 < n_p_290264;
                                 i_295266++) {
                                int64_t x_291779;
                                
                                x_291779 = ((int64_t *) mem_297225)[i_295270 *
                                                                    n_p_290264 +
                                                                    i_295266];
                                for (int64_t i_295262 = 0; i_295262 <
                                     s_n_m_290412; i_295262++) {
                                    int64_t x_291784;
                                    
                                    x_291784 =
                                        ((int64_t *) mem_297386)[i_295270 *
                                                                 ctx_val_297415 +
                                                                 i_295266 *
                                                                 s_n_m_290412 +
                                                                 i_295262];
                                    
                                    double x_291785;
                                    
                                    x_291785 =
                                        ((double *) mem_297391)[i_295270 *
                                                                ctx_val_297415 +
                                                                i_295266 *
                                                                s_n_m_290412 +
                                                                i_295262];
                                    
                                    bool cond_291786 = i_295262 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_291787;
                                    
                                    if (cond_291786) {
                                        defunc_0_m_fun_res_291787 = (int64_t) 0;
                                    } else {
                                        int64_t y_291788 = sub64(s_n_m_290412,
                                                                 (int64_t) 1);
                                        bool cond_291789 = i_295262 == y_291788;
                                        int64_t defunc_0_m_fun_res_f_res_291790;
                                        
                                        if (cond_291789) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_291791
                                            = sub64(pad_css_len_290408,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_291790 =
                                                defunc_0_m_fun_res_f_res_t_res_291791;
                                        } else {
                                            int64_t x_291792 = sub64(i_295262,
                                                                     (int64_t) 1);
                                            int64_t x_291793 =
                                                    mul64(jump_s_290271,
                                                          x_291792);
                                            int64_t min_arg_291794 =
                                                    add64((int64_t) 1,
                                                          x_291793);
                                            int64_t min_res_291795 =
                                                    smin64(defunc_0_f_res_290407,
                                                           min_arg_291794);
                                            
                                            defunc_0_m_fun_res_f_res_291790 =
                                                min_res_291795;
                                        }
                                        defunc_0_m_fun_res_291787 =
                                            defunc_0_m_fun_res_f_res_291790;
                                    }
                                    
                                    double defunc_2_reduce_res_291796;
                                    double redout_295256 = 0.0;
                                    
                                    for (int64_t i_295257 = 0; i_295257 <
                                         q_s_290265; i_295257++) {
                                        bool cond_291801 = sle64(x_291779,
                                                                 i_295257);
                                        int64_t defunc_0_f_res_291802;
                                        
                                        if (cond_291801) {
                                            defunc_0_f_res_291802 = (int64_t) 0;
                                        } else {
                                            int64_t i_291803 = add64(x_291784,
                                                                     i_295257);
                                            int64_t defunc_0_add_arg_291804;
                                            
                                            defunc_0_add_arg_291804 =
                                                ((int64_t *) mem_297221)[i_295270 *
                                                                         ctx_val_297131 +
                                                                         i_295266 *
                                                                         defunc_0_f_res_290407 +
                                                                         i_291803];
                                            
                                            int64_t defunc_1_add_res_291805 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_291804);
                                            
                                            defunc_0_f_res_291802 =
                                                defunc_1_add_res_291805;
                                        }
                                        
                                        double defunc_0_f_res_291806;
                                        
                                        if (cond_291801) {
                                            defunc_0_f_res_291806 = 0.0;
                                        } else {
                                            int64_t i_291807 = add64(x_291784,
                                                                     i_295257);
                                            double defunc_0_add_arg_291808;
                                            
                                            defunc_0_add_arg_291808 =
                                                ((double *) mem_297931)[i_295270 *
                                                                        ctx_val_297131 +
                                                                        i_295266 *
                                                                        defunc_0_f_res_290407 +
                                                                        i_291807];
                                            defunc_0_f_res_291806 =
                                                defunc_0_add_arg_291808;
                                        }
                                        
                                        int64_t binop_p_291809 =
                                                sub64(defunc_0_f_res_291802,
                                                      defunc_0_m_fun_res_291787);
                                        double defunc_0_f_res_291810 =
                                               sitofp_i64_f64(binop_p_291809);
                                        double abs_res_291811 =
                                               fabs(defunc_0_f_res_291810);
                                        double tmp1_291812 = abs_res_291811 /
                                               x_291785;
                                        double x_291813 = tmp1_291812 *
                                               tmp1_291812;
                                        double y_291814 = tmp1_291812 *
                                               x_291813;
                                        double tmp2_291815 = 1.0 - y_291814;
                                        double x_291816 = tmp2_291815 *
                                               tmp2_291815;
                                        double tmp3_291817 = tmp2_291815 *
                                               x_291816;
                                        double w_j_291818 =
                                               defunc_0_f_res_291806 *
                                               tmp3_291817;
                                        double defunc_1_op_res_291799 =
                                               w_j_291818 + redout_295256;
                                        double redout_tmp_304013 =
                                               defunc_1_op_res_291799;
                                        
                                        redout_295256 = redout_tmp_304013;
                                    }
                                    defunc_2_reduce_res_291796 = redout_295256;
                                    
                                    double a_291819 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_291796;
                                    double a0_291820 = 1.0 / a_291819;
                                    int64_t defunc_0_m_fun_res_291821;
                                    
                                    if (cond_291786) {
                                        defunc_0_m_fun_res_291821 = (int64_t) 0;
                                    } else {
                                        int64_t y_291822 = sub64(s_n_m_290412,
                                                                 (int64_t) 1);
                                        bool cond_291823 = i_295262 == y_291822;
                                        int64_t defunc_0_m_fun_res_f_res_291824;
                                        
                                        if (cond_291823) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_291825
                                            = sub64(pad_css_len_290408,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_291824 =
                                                defunc_0_m_fun_res_f_res_t_res_291825;
                                        } else {
                                            int64_t x_291826 = sub64(i_295262,
                                                                     (int64_t) 1);
                                            int64_t x_291827 =
                                                    mul64(jump_s_290271,
                                                          x_291826);
                                            int64_t min_arg_291828 =
                                                    add64((int64_t) 1,
                                                          x_291827);
                                            int64_t min_res_291829 =
                                                    smin64(defunc_0_f_res_290407,
                                                           min_arg_291828);
                                            
                                            defunc_0_m_fun_res_f_res_291824 =
                                                min_res_291829;
                                        }
                                        defunc_0_m_fun_res_291821 =
                                            defunc_0_m_fun_res_f_res_291824;
                                    }
                                    
                                    double defunc_2_reduce_res_291830;
                                    double redout_295258 = 0.0;
                                    
                                    for (int64_t i_295259 = 0; i_295259 <
                                         q_s_290265; i_295259++) {
                                        bool cond_291835 = sle64(x_291779,
                                                                 i_295259);
                                        int64_t defunc_0_f_res_291836;
                                        
                                        if (cond_291835) {
                                            defunc_0_f_res_291836 = (int64_t) 0;
                                        } else {
                                            int64_t i_291837 = add64(x_291784,
                                                                     i_295259);
                                            int64_t defunc_0_add_arg_291838;
                                            
                                            defunc_0_add_arg_291838 =
                                                ((int64_t *) mem_297221)[i_295270 *
                                                                         ctx_val_297131 +
                                                                         i_295266 *
                                                                         defunc_0_f_res_290407 +
                                                                         i_291837];
                                            
                                            int64_t defunc_1_add_res_291839 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_291838);
                                            
                                            defunc_0_f_res_291836 =
                                                defunc_1_add_res_291839;
                                        }
                                        
                                        double defunc_0_f_res_291840;
                                        
                                        if (cond_291835) {
                                            defunc_0_f_res_291840 = 0.0;
                                        } else {
                                            int64_t i_291841 = add64(x_291784,
                                                                     i_295259);
                                            double defunc_0_add_arg_291842;
                                            
                                            defunc_0_add_arg_291842 =
                                                ((double *) mem_297931)[i_295270 *
                                                                        ctx_val_297131 +
                                                                        i_295266 *
                                                                        defunc_0_f_res_290407 +
                                                                        i_291841];
                                            defunc_0_f_res_291840 =
                                                defunc_0_add_arg_291842;
                                        }
                                        
                                        int64_t binop_p_291843 =
                                                sub64(defunc_0_f_res_291836,
                                                      defunc_0_m_fun_res_291821);
                                        double defunc_0_f_res_291844 =
                                               sitofp_i64_f64(binop_p_291843);
                                        double abs_res_291845 =
                                               fabs(defunc_0_f_res_291844);
                                        double tmp1_291846 = abs_res_291845 /
                                               x_291785;
                                        double x_291847 = tmp1_291846 *
                                               tmp1_291846;
                                        double y_291848 = tmp1_291846 *
                                               x_291847;
                                        double tmp2_291849 = 1.0 - y_291848;
                                        double x_291850 = tmp2_291849 *
                                               tmp2_291849;
                                        double tmp3_291851 = tmp2_291849 *
                                               x_291850;
                                        double tmp4_291852 =
                                               defunc_0_f_res_291840 *
                                               tmp3_291851;
                                        double defunc_0_f_res_291853;
                                        
                                        if (cond_291835) {
                                            defunc_0_f_res_291853 = 0.0;
                                        } else {
                                            int64_t i_291854 = add64(x_291784,
                                                                     i_295259);
                                            double defunc_0_add_arg_291855;
                                            
                                            defunc_0_add_arg_291855 =
                                                ((double *) mem_297926)[i_295270 *
                                                                        ctx_val_297131 +
                                                                        i_295266 *
                                                                        defunc_0_f_res_290407 +
                                                                        i_291854];
                                            defunc_0_f_res_291853 =
                                                defunc_0_add_arg_291855;
                                        }
                                        
                                        double x_291856 = a0_291820 *
                                               tmp4_291852;
                                        double defunc_9_fit_fun_res_291857 =
                                               defunc_0_f_res_291853 * x_291856;
                                        double defunc_1_op_res_291833 =
                                               defunc_9_fit_fun_res_291857 +
                                               redout_295258;
                                        double redout_tmp_304014 =
                                               defunc_1_op_res_291833;
                                        
                                        redout_295258 = redout_tmp_304014;
                                    }
                                    defunc_2_reduce_res_291830 = redout_295258;
                                    ((double *) mem_299372.mem)[i_295270 *
                                                                ctx_val_297415 +
                                                                i_295266 *
                                                                s_n_m_290412 +
                                                                i_295262] =
                                        defunc_2_reduce_res_291830;
                                }
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_299917, &mem_299372,
                                         "mem_299372") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_299906, &mem_299367,
                                         "mem_299367") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_299372, "mem_299372") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_299367, "mem_299367") != 0)
                            return 1;
                    } else {
                        bool match_lit_291860 = (int64_t) 1 == d_s_290268;
                        struct memblock ext_mem_299894;
                        
                        ext_mem_299894.references = NULL;
                        
                        struct memblock ext_mem_299883;
                        
                        ext_mem_299883.references = NULL;
                        if (match_lit_291860) {
                            struct memblock mem_299475;
                            
                            mem_299475.references = NULL;
                            if (memblock_alloc(ctx, &mem_299475, bytes_297385,
                                               "mem_299475")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_299480;
                            
                            mem_299480.references = NULL;
                            if (memblock_alloc(ctx, &mem_299480, bytes_297385,
                                               "mem_299480")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t i_295297 = 0; i_295297 <
                                 partition_sizze_290353; i_295297++) {
                                for (int64_t i_295290 = 0; i_295290 <
                                     n_p_290264; i_295290++) {
                                    int64_t x_291877;
                                    
                                    x_291877 =
                                        ((int64_t *) mem_297225)[i_295297 *
                                                                 n_p_290264 +
                                                                 i_295290];
                                    for (int64_t i_295283 = 0; i_295283 <
                                         s_n_m_290412; i_295283++) {
                                        int64_t x_291883;
                                        
                                        x_291883 =
                                            ((int64_t *) mem_297386)[i_295297 *
                                                                     ctx_val_297415 +
                                                                     i_295290 *
                                                                     s_n_m_290412 +
                                                                     i_295283];
                                        
                                        double x_291884;
                                        
                                        x_291884 =
                                            ((double *) mem_297391)[i_295297 *
                                                                    ctx_val_297415 +
                                                                    i_295290 *
                                                                    s_n_m_290412 +
                                                                    i_295283];
                                        
                                        bool cond_291885 = i_295283 ==
                                             (int64_t) 0;
                                        int64_t defunc_0_m_fun_res_291886;
                                        
                                        if (cond_291885) {
                                            defunc_0_m_fun_res_291886 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_291887 =
                                                    sub64(s_n_m_290412,
                                                          (int64_t) 1);
                                            bool cond_291888 = i_295283 ==
                                                 y_291887;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_291889;
                                            
                                            if (cond_291888) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_291890
                                                = sub64(pad_css_len_290408,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_291889 =
                                                    defunc_0_m_fun_res_f_res_t_res_291890;
                                            } else {
                                                int64_t x_291891 =
                                                        sub64(i_295283,
                                                              (int64_t) 1);
                                                int64_t x_291892 =
                                                        mul64(jump_s_290271,
                                                              x_291891);
                                                int64_t min_arg_291893 =
                                                        add64((int64_t) 1,
                                                              x_291892);
                                                int64_t min_res_291894 =
                                                        smin64(defunc_0_f_res_290407,
                                                               min_arg_291893);
                                                
                                                defunc_0_m_fun_res_f_res_291889 =
                                                    min_res_291894;
                                            }
                                            defunc_0_m_fun_res_291886 =
                                                defunc_0_m_fun_res_f_res_291889;
                                        }
                                        
                                        double defunc_2_reduce_res_291895;
                                        double defunc_2_reduce_res_291896;
                                        double defunc_2_reduce_res_291897;
                                        double redout_295272;
                                        double redout_295273;
                                        double redout_295274;
                                        
                                        redout_295272 = 0.0;
                                        redout_295273 = 0.0;
                                        redout_295274 = 0.0;
                                        for (int64_t i_295275 = 0; i_295275 <
                                             q_s_290265; i_295275++) {
                                            bool cond_291908 = sle64(x_291877,
                                                                     i_295275);
                                            int64_t defunc_0_f_res_291909;
                                            
                                            if (cond_291908) {
                                                defunc_0_f_res_291909 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_291910 =
                                                        add64(x_291883,
                                                              i_295275);
                                                int64_t defunc_0_add_arg_291911;
                                                
                                                defunc_0_add_arg_291911 =
                                                    ((int64_t *) mem_297221)[i_295297 *
                                                                             ctx_val_297131 +
                                                                             i_295290 *
                                                                             defunc_0_f_res_290407 +
                                                                             i_291910];
                                                
                                                int64_t defunc_1_add_res_291912
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_291911);
                                                
                                                defunc_0_f_res_291909 =
                                                    defunc_1_add_res_291912;
                                            }
                                            
                                            double defunc_0_f_res_291913;
                                            
                                            if (cond_291908) {
                                                defunc_0_f_res_291913 = 0.0;
                                            } else {
                                                int64_t i_291914 =
                                                        add64(x_291883,
                                                              i_295275);
                                                double defunc_0_add_arg_291915;
                                                
                                                defunc_0_add_arg_291915 =
                                                    ((double *) mem_297931)[i_295297 *
                                                                            ctx_val_297131 +
                                                                            i_295290 *
                                                                            defunc_0_f_res_290407 +
                                                                            i_291914];
                                                defunc_0_f_res_291913 =
                                                    defunc_0_add_arg_291915;
                                            }
                                            
                                            int64_t binop_p_291916 =
                                                    sub64(defunc_0_f_res_291909,
                                                          defunc_0_m_fun_res_291886);
                                            double defunc_0_f_res_291917 =
                                                   sitofp_i64_f64(binop_p_291916);
                                            double abs_res_291918 =
                                                   fabs(defunc_0_f_res_291917);
                                            double tmp1_291919 =
                                                   abs_res_291918 / x_291884;
                                            double x_291920 = tmp1_291919 *
                                                   tmp1_291919;
                                            double y_291921 = tmp1_291919 *
                                                   x_291920;
                                            double tmp2_291922 = 1.0 - y_291921;
                                            double x_291923 = tmp2_291922 *
                                                   tmp2_291922;
                                            double tmp3_291924 = tmp2_291922 *
                                                   x_291923;
                                            double w_j_291925 =
                                                   defunc_0_f_res_291913 *
                                                   tmp3_291924;
                                            double xw_j_291926 =
                                                   defunc_0_f_res_291917 *
                                                   w_j_291925;
                                            double x2w_j_291927 =
                                                   defunc_0_f_res_291917 *
                                                   xw_j_291926;
                                            double defunc_1_op_res_291900 =
                                                   w_j_291925 + redout_295272;
                                            double defunc_1_op_res_291903 =
                                                   xw_j_291926 + redout_295273;
                                            double defunc_1_op_res_291906 =
                                                   x2w_j_291927 + redout_295274;
                                            double redout_tmp_304021 =
                                                   defunc_1_op_res_291900;
                                            double redout_tmp_304022 =
                                                   defunc_1_op_res_291903;
                                            double redout_tmp_304023 =
                                                   defunc_1_op_res_291906;
                                            
                                            redout_295272 = redout_tmp_304021;
                                            redout_295273 = redout_tmp_304022;
                                            redout_295274 = redout_tmp_304023;
                                        }
                                        defunc_2_reduce_res_291895 =
                                            redout_295272;
                                        defunc_2_reduce_res_291896 =
                                            redout_295273;
                                        defunc_2_reduce_res_291897 =
                                            redout_295274;
                                        
                                        double a_291928 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291895;
                                        double b_291929 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291896;
                                        double c_291930 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291897;
                                        double x_291931 = a_291928 * c_291930;
                                        double y_291932 = b_291929 * b_291929;
                                        double y_291933 = x_291931 - y_291932;
                                        double det1_291934 = 1.0 / y_291933;
                                        double a11_291935 = c_291930 *
                                               det1_291934;
                                        double x_291936 = 0.0 - b_291929;
                                        double b11_291937 = det1_291934 *
                                               x_291936;
                                        double c11_291938 = a_291928 *
                                               det1_291934;
                                        int64_t defunc_0_m_fun_res_291939;
                                        
                                        if (cond_291885) {
                                            defunc_0_m_fun_res_291939 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_291940 =
                                                    sub64(s_n_m_290412,
                                                          (int64_t) 1);
                                            bool cond_291941 = i_295283 ==
                                                 y_291940;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_291942;
                                            
                                            if (cond_291941) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_291943
                                                = sub64(pad_css_len_290408,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_291942 =
                                                    defunc_0_m_fun_res_f_res_t_res_291943;
                                            } else {
                                                int64_t x_291944 =
                                                        sub64(i_295283,
                                                              (int64_t) 1);
                                                int64_t x_291945 =
                                                        mul64(jump_s_290271,
                                                              x_291944);
                                                int64_t min_arg_291946 =
                                                        add64((int64_t) 1,
                                                              x_291945);
                                                int64_t min_res_291947 =
                                                        smin64(defunc_0_f_res_290407,
                                                               min_arg_291946);
                                                
                                                defunc_0_m_fun_res_f_res_291942 =
                                                    min_res_291947;
                                            }
                                            defunc_0_m_fun_res_291939 =
                                                defunc_0_m_fun_res_f_res_291942;
                                        }
                                        
                                        double defunc_2_reduce_res_291948;
                                        double defunc_2_reduce_res_291949;
                                        double redout_295276;
                                        double redout_295277;
                                        
                                        redout_295276 = 0.0;
                                        redout_295277 = 0.0;
                                        for (int64_t i_295278 = 0; i_295278 <
                                             q_s_290265; i_295278++) {
                                            bool cond_291957 = sle64(x_291877,
                                                                     i_295278);
                                            int64_t defunc_0_f_res_291958;
                                            
                                            if (cond_291957) {
                                                defunc_0_f_res_291958 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_291959 =
                                                        add64(x_291883,
                                                              i_295278);
                                                int64_t defunc_0_add_arg_291960;
                                                
                                                defunc_0_add_arg_291960 =
                                                    ((int64_t *) mem_297221)[i_295297 *
                                                                             ctx_val_297131 +
                                                                             i_295290 *
                                                                             defunc_0_f_res_290407 +
                                                                             i_291959];
                                                
                                                int64_t defunc_1_add_res_291961
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_291960);
                                                
                                                defunc_0_f_res_291958 =
                                                    defunc_1_add_res_291961;
                                            }
                                            
                                            double defunc_0_f_res_291962;
                                            
                                            if (cond_291957) {
                                                defunc_0_f_res_291962 = 0.0;
                                            } else {
                                                int64_t i_291963 =
                                                        add64(x_291883,
                                                              i_295278);
                                                double defunc_0_add_arg_291964;
                                                
                                                defunc_0_add_arg_291964 =
                                                    ((double *) mem_297931)[i_295297 *
                                                                            ctx_val_297131 +
                                                                            i_295290 *
                                                                            defunc_0_f_res_290407 +
                                                                            i_291963];
                                                defunc_0_f_res_291962 =
                                                    defunc_0_add_arg_291964;
                                            }
                                            
                                            int64_t binop_p_291965 =
                                                    sub64(defunc_0_f_res_291958,
                                                          defunc_0_m_fun_res_291939);
                                            double defunc_0_f_res_291966 =
                                                   sitofp_i64_f64(binop_p_291965);
                                            double abs_res_291967 =
                                                   fabs(defunc_0_f_res_291966);
                                            double tmp1_291968 =
                                                   abs_res_291967 / x_291884;
                                            double x_291969 = tmp1_291968 *
                                                   tmp1_291968;
                                            double y_291970 = tmp1_291968 *
                                                   x_291969;
                                            double tmp2_291971 = 1.0 - y_291970;
                                            double x_291972 = tmp2_291971 *
                                                   tmp2_291971;
                                            double tmp3_291973 = tmp2_291971 *
                                                   x_291972;
                                            double tmp4_291974 =
                                                   defunc_0_f_res_291962 *
                                                   tmp3_291973;
                                            double defunc_1_f_res_291975 =
                                                   defunc_0_f_res_291966 *
                                                   tmp4_291974;
                                            double defunc_0_f_res_291976;
                                            
                                            if (cond_291957) {
                                                defunc_0_f_res_291976 = 0.0;
                                            } else {
                                                int64_t i_291977 =
                                                        add64(x_291883,
                                                              i_295278);
                                                double defunc_0_add_arg_291978;
                                                
                                                defunc_0_add_arg_291978 =
                                                    ((double *) mem_297926)[i_295297 *
                                                                            ctx_val_297131 +
                                                                            i_295290 *
                                                                            defunc_0_f_res_290407 +
                                                                            i_291977];
                                                defunc_0_f_res_291976 =
                                                    defunc_0_add_arg_291978;
                                            }
                                            
                                            double x_291979 = a11_291935 *
                                                   tmp4_291974;
                                            double y_291980 = b11_291937 *
                                                   defunc_1_f_res_291975;
                                            double x_291981 = x_291979 +
                                                   y_291980;
                                            double defunc_9_fit_fun_res_291982 =
                                                   defunc_0_f_res_291976 *
                                                   x_291981;
                                            double x_291983 = b11_291937 *
                                                   tmp4_291974;
                                            double y_291984 = c11_291938 *
                                                   defunc_1_f_res_291975;
                                            double x_291985 = x_291983 +
                                                   y_291984;
                                            double defunc_9_slope_fun_res_291986
                                                   = defunc_0_f_res_291976 *
                                                   x_291985;
                                            double defunc_1_op_res_291952 =
                                                   defunc_9_fit_fun_res_291982 +
                                                   redout_295276;
                                            double defunc_1_op_res_291955 =
                                                   defunc_9_slope_fun_res_291986 +
                                                   redout_295277;
                                            double redout_tmp_304024 =
                                                   defunc_1_op_res_291952;
                                            double redout_tmp_304025 =
                                                   defunc_1_op_res_291955;
                                            
                                            redout_295276 = redout_tmp_304024;
                                            redout_295277 = redout_tmp_304025;
                                        }
                                        defunc_2_reduce_res_291948 =
                                            redout_295276;
                                        defunc_2_reduce_res_291949 =
                                            redout_295277;
                                        ((double *) mem_299475.mem)[i_295297 *
                                                                    ctx_val_297415 +
                                                                    i_295290 *
                                                                    s_n_m_290412 +
                                                                    i_295283] =
                                            defunc_2_reduce_res_291948;
                                        ((double *) mem_299480.mem)[i_295297 *
                                                                    ctx_val_297415 +
                                                                    i_295290 *
                                                                    s_n_m_290412 +
                                                                    i_295283] =
                                            defunc_2_reduce_res_291949;
                                    }
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_299894, &mem_299475,
                                             "mem_299475") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_299883, &mem_299480,
                                             "mem_299480") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_299480,
                                               "mem_299480") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_299475,
                                               "mem_299475") != 0)
                                return 1;
                        } else {
                            struct memblock mem_299681;
                            
                            mem_299681.references = NULL;
                            if (memblock_alloc(ctx, &mem_299681, bytes_297385,
                                               "mem_299681")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_299686;
                            
                            mem_299686.references = NULL;
                            if (memblock_alloc(ctx, &mem_299686, bytes_297385,
                                               "mem_299686")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t i_295327 = 0; i_295327 <
                                 partition_sizze_290353; i_295327++) {
                                for (int64_t i_295320 = 0; i_295320 <
                                     n_p_290264; i_295320++) {
                                    int64_t x_292003;
                                    
                                    x_292003 =
                                        ((int64_t *) mem_297225)[i_295327 *
                                                                 n_p_290264 +
                                                                 i_295320];
                                    for (int64_t i_295313 = 0; i_295313 <
                                         s_n_m_290412; i_295313++) {
                                        int64_t x_292009;
                                        
                                        x_292009 =
                                            ((int64_t *) mem_297386)[i_295327 *
                                                                     ctx_val_297415 +
                                                                     i_295320 *
                                                                     s_n_m_290412 +
                                                                     i_295313];
                                        
                                        double x_292010;
                                        
                                        x_292010 =
                                            ((double *) mem_297391)[i_295327 *
                                                                    ctx_val_297415 +
                                                                    i_295320 *
                                                                    s_n_m_290412 +
                                                                    i_295313];
                                        
                                        bool cond_292011 = i_295313 ==
                                             (int64_t) 0;
                                        int64_t defunc_0_m_fun_res_292012;
                                        
                                        if (cond_292011) {
                                            defunc_0_m_fun_res_292012 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_292013 =
                                                    sub64(s_n_m_290412,
                                                          (int64_t) 1);
                                            bool cond_292014 = i_295313 ==
                                                 y_292013;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_292015;
                                            
                                            if (cond_292014) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_292016
                                                = sub64(pad_css_len_290408,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_292015 =
                                                    defunc_0_m_fun_res_f_res_t_res_292016;
                                            } else {
                                                int64_t x_292017 =
                                                        sub64(i_295313,
                                                              (int64_t) 1);
                                                int64_t x_292018 =
                                                        mul64(jump_s_290271,
                                                              x_292017);
                                                int64_t min_arg_292019 =
                                                        add64((int64_t) 1,
                                                              x_292018);
                                                int64_t min_res_292020 =
                                                        smin64(defunc_0_f_res_290407,
                                                               min_arg_292019);
                                                
                                                defunc_0_m_fun_res_f_res_292015 =
                                                    min_res_292020;
                                            }
                                            defunc_0_m_fun_res_292012 =
                                                defunc_0_m_fun_res_f_res_292015;
                                        }
                                        
                                        double defunc_2_reduce_res_292021;
                                        double defunc_2_reduce_res_292022;
                                        double defunc_2_reduce_res_292023;
                                        double defunc_2_reduce_res_292024;
                                        double defunc_2_reduce_res_292025;
                                        double redout_295300;
                                        double redout_295301;
                                        double redout_295302;
                                        double redout_295303;
                                        double redout_295304;
                                        
                                        redout_295300 = 0.0;
                                        redout_295301 = 0.0;
                                        redout_295302 = 0.0;
                                        redout_295303 = 0.0;
                                        redout_295304 = 0.0;
                                        for (int64_t i_295305 = 0; i_295305 <
                                             q_s_290265; i_295305++) {
                                            bool cond_292042 = sle64(x_292003,
                                                                     i_295305);
                                            int64_t defunc_0_f_res_292043;
                                            
                                            if (cond_292042) {
                                                defunc_0_f_res_292043 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_292044 =
                                                        add64(x_292009,
                                                              i_295305);
                                                int64_t defunc_0_add_arg_292045;
                                                
                                                defunc_0_add_arg_292045 =
                                                    ((int64_t *) mem_297221)[i_295327 *
                                                                             ctx_val_297131 +
                                                                             i_295320 *
                                                                             defunc_0_f_res_290407 +
                                                                             i_292044];
                                                
                                                int64_t defunc_1_add_res_292046
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_292045);
                                                
                                                defunc_0_f_res_292043 =
                                                    defunc_1_add_res_292046;
                                            }
                                            
                                            double defunc_0_f_res_292047;
                                            
                                            if (cond_292042) {
                                                defunc_0_f_res_292047 = 0.0;
                                            } else {
                                                int64_t i_292048 =
                                                        add64(x_292009,
                                                              i_295305);
                                                double defunc_0_add_arg_292049;
                                                
                                                defunc_0_add_arg_292049 =
                                                    ((double *) mem_297931)[i_295327 *
                                                                            ctx_val_297131 +
                                                                            i_295320 *
                                                                            defunc_0_f_res_290407 +
                                                                            i_292048];
                                                defunc_0_f_res_292047 =
                                                    defunc_0_add_arg_292049;
                                            }
                                            
                                            int64_t binop_p_292050 =
                                                    sub64(defunc_0_f_res_292043,
                                                          defunc_0_m_fun_res_292012);
                                            double defunc_0_f_res_292051 =
                                                   sitofp_i64_f64(binop_p_292050);
                                            double abs_res_292052 =
                                                   fabs(defunc_0_f_res_292051);
                                            double tmp1_292053 =
                                                   abs_res_292052 / x_292010;
                                            double x_292054 = tmp1_292053 *
                                                   tmp1_292053;
                                            double y_292055 = tmp1_292053 *
                                                   x_292054;
                                            double tmp2_292056 = 1.0 - y_292055;
                                            double x_292057 = tmp2_292056 *
                                                   tmp2_292056;
                                            double tmp3_292058 = tmp2_292056 *
                                                   x_292057;
                                            double w_j_292059 =
                                                   defunc_0_f_res_292047 *
                                                   tmp3_292058;
                                            double xw_j_292060 =
                                                   defunc_0_f_res_292051 *
                                                   w_j_292059;
                                            double x2w_j_292061 =
                                                   defunc_0_f_res_292051 *
                                                   xw_j_292060;
                                            double x3w_j_292062 =
                                                   defunc_0_f_res_292051 *
                                                   x2w_j_292061;
                                            double x4w_j_292063 =
                                                   defunc_0_f_res_292051 *
                                                   x3w_j_292062;
                                            double defunc_1_op_res_292028 =
                                                   w_j_292059 + redout_295300;
                                            double defunc_1_op_res_292031 =
                                                   xw_j_292060 + redout_295301;
                                            double defunc_1_op_res_292034 =
                                                   x2w_j_292061 + redout_295302;
                                            double defunc_1_op_res_292037 =
                                                   x3w_j_292062 + redout_295303;
                                            double defunc_1_op_res_292040 =
                                                   x4w_j_292063 + redout_295304;
                                            double redout_tmp_304032 =
                                                   defunc_1_op_res_292028;
                                            double redout_tmp_304033 =
                                                   defunc_1_op_res_292031;
                                            double redout_tmp_304034 =
                                                   defunc_1_op_res_292034;
                                            double redout_tmp_304035 =
                                                   defunc_1_op_res_292037;
                                            double redout_tmp_304036 =
                                                   defunc_1_op_res_292040;
                                            
                                            redout_295300 = redout_tmp_304032;
                                            redout_295301 = redout_tmp_304033;
                                            redout_295302 = redout_tmp_304034;
                                            redout_295303 = redout_tmp_304035;
                                            redout_295304 = redout_tmp_304036;
                                        }
                                        defunc_2_reduce_res_292021 =
                                            redout_295300;
                                        defunc_2_reduce_res_292022 =
                                            redout_295301;
                                        defunc_2_reduce_res_292023 =
                                            redout_295302;
                                        defunc_2_reduce_res_292024 =
                                            redout_295303;
                                        defunc_2_reduce_res_292025 =
                                            redout_295304;
                                        
                                        double a_292064 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_292021;
                                        double b_292065 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_292022;
                                        double c_292066 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_292023;
                                        double d_292067 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_292024;
                                        double e_292068 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_292025;
                                        double x_292069 = c_292066 * e_292068;
                                        double y_292070 = d_292067 * d_292067;
                                        double a12_292071 = x_292069 - y_292070;
                                        double x_292072 = c_292066 * d_292067;
                                        double y_292073 = b_292065 * e_292068;
                                        double b12_292074 = x_292072 - y_292073;
                                        double x_292075 = b_292065 * d_292067;
                                        double y_292076 = c_292066 * c_292066;
                                        double c12_292077 = x_292075 - y_292076;
                                        double x_292078 = a_292064 * e_292068;
                                        double b2_292079 = x_292078 - y_292076;
                                        double x_292080 = b_292065 * c_292066;
                                        double y_292081 = a_292064 * d_292067;
                                        double c2_292082 = x_292080 - y_292081;
                                        double x_292083 = a_292064 * a12_292071;
                                        double y_292084 = b_292065 * b12_292074;
                                        double x_292085 = x_292083 + y_292084;
                                        double y_292086 = c_292066 * c12_292077;
                                        double y_292087 = x_292085 + y_292086;
                                        double det_292088 = 1.0 / y_292087;
                                        double a12_292089 = a12_292071 *
                                               det_292088;
                                        double b12_292090 = b12_292074 *
                                               det_292088;
                                        double c12_292091 = c12_292077 *
                                               det_292088;
                                        double b2_292092 = b2_292079 *
                                               det_292088;
                                        double c2_292093 = c2_292082 *
                                               det_292088;
                                        int64_t defunc_0_m_fun_res_292094;
                                        
                                        if (cond_292011) {
                                            defunc_0_m_fun_res_292094 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_292095 =
                                                    sub64(s_n_m_290412,
                                                          (int64_t) 1);
                                            bool cond_292096 = i_295313 ==
                                                 y_292095;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_292097;
                                            
                                            if (cond_292096) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_292098
                                                = sub64(pad_css_len_290408,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_292097 =
                                                    defunc_0_m_fun_res_f_res_t_res_292098;
                                            } else {
                                                int64_t x_292099 =
                                                        sub64(i_295313,
                                                              (int64_t) 1);
                                                int64_t x_292100 =
                                                        mul64(jump_s_290271,
                                                              x_292099);
                                                int64_t min_arg_292101 =
                                                        add64((int64_t) 1,
                                                              x_292100);
                                                int64_t min_res_292102 =
                                                        smin64(defunc_0_f_res_290407,
                                                               min_arg_292101);
                                                
                                                defunc_0_m_fun_res_f_res_292097 =
                                                    min_res_292102;
                                            }
                                            defunc_0_m_fun_res_292094 =
                                                defunc_0_m_fun_res_f_res_292097;
                                        }
                                        
                                        double defunc_2_reduce_res_292103;
                                        double defunc_2_reduce_res_292104;
                                        double redout_295306;
                                        double redout_295307;
                                        
                                        redout_295306 = 0.0;
                                        redout_295307 = 0.0;
                                        for (int64_t i_295308 = 0; i_295308 <
                                             q_s_290265; i_295308++) {
                                            bool cond_292112 = sle64(x_292003,
                                                                     i_295308);
                                            int64_t defunc_0_f_res_292113;
                                            
                                            if (cond_292112) {
                                                defunc_0_f_res_292113 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_292114 =
                                                        add64(x_292009,
                                                              i_295308);
                                                int64_t defunc_0_add_arg_292115;
                                                
                                                defunc_0_add_arg_292115 =
                                                    ((int64_t *) mem_297221)[i_295327 *
                                                                             ctx_val_297131 +
                                                                             i_295320 *
                                                                             defunc_0_f_res_290407 +
                                                                             i_292114];
                                                
                                                int64_t defunc_1_add_res_292116
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_292115);
                                                
                                                defunc_0_f_res_292113 =
                                                    defunc_1_add_res_292116;
                                            }
                                            
                                            double defunc_0_f_res_292117;
                                            
                                            if (cond_292112) {
                                                defunc_0_f_res_292117 = 0.0;
                                            } else {
                                                int64_t i_292118 =
                                                        add64(x_292009,
                                                              i_295308);
                                                double defunc_0_add_arg_292119;
                                                
                                                defunc_0_add_arg_292119 =
                                                    ((double *) mem_297931)[i_295327 *
                                                                            ctx_val_297131 +
                                                                            i_295320 *
                                                                            defunc_0_f_res_290407 +
                                                                            i_292118];
                                                defunc_0_f_res_292117 =
                                                    defunc_0_add_arg_292119;
                                            }
                                            
                                            int64_t binop_p_292120 =
                                                    sub64(defunc_0_f_res_292113,
                                                          defunc_0_m_fun_res_292094);
                                            double defunc_0_f_res_292121 =
                                                   sitofp_i64_f64(binop_p_292120);
                                            double abs_res_292122 =
                                                   fabs(defunc_0_f_res_292121);
                                            double tmp1_292123 =
                                                   abs_res_292122 / x_292010;
                                            double x_292124 = tmp1_292123 *
                                                   tmp1_292123;
                                            double y_292125 = tmp1_292123 *
                                                   x_292124;
                                            double tmp2_292126 = 1.0 - y_292125;
                                            double x_292127 = tmp2_292126 *
                                                   tmp2_292126;
                                            double tmp3_292128 = tmp2_292126 *
                                                   x_292127;
                                            double tmp4_292129 =
                                                   defunc_0_f_res_292117 *
                                                   tmp3_292128;
                                            double defunc_1_f_res_292130 =
                                                   defunc_0_f_res_292121 *
                                                   tmp4_292129;
                                            double defunc_1_f_res_292131 =
                                                   defunc_0_f_res_292121 *
                                                   defunc_1_f_res_292130;
                                            double defunc_0_f_res_292132;
                                            
                                            if (cond_292112) {
                                                defunc_0_f_res_292132 = 0.0;
                                            } else {
                                                int64_t i_292133 =
                                                        add64(x_292009,
                                                              i_295308);
                                                double defunc_0_add_arg_292134;
                                                
                                                defunc_0_add_arg_292134 =
                                                    ((double *) mem_297926)[i_295327 *
                                                                            ctx_val_297131 +
                                                                            i_295320 *
                                                                            defunc_0_f_res_290407 +
                                                                            i_292133];
                                                defunc_0_f_res_292132 =
                                                    defunc_0_add_arg_292134;
                                            }
                                            
                                            double x_292135 = a12_292089 *
                                                   tmp4_292129;
                                            double y_292136 = b12_292090 *
                                                   defunc_1_f_res_292130;
                                            double x_292137 = x_292135 +
                                                   y_292136;
                                            double y_292138 = c12_292091 *
                                                   defunc_1_f_res_292131;
                                            double x_292139 = x_292137 +
                                                   y_292138;
                                            double defunc_9_fit_fun_res_292140 =
                                                   defunc_0_f_res_292132 *
                                                   x_292139;
                                            double x_292141 = b12_292090 *
                                                   tmp4_292129;
                                            double y_292142 = b2_292092 *
                                                   defunc_1_f_res_292130;
                                            double x_292143 = x_292141 +
                                                   y_292142;
                                            double y_292144 = c2_292093 *
                                                   defunc_1_f_res_292131;
                                            double x_292145 = x_292143 +
                                                   y_292144;
                                            double defunc_9_slope_fun_res_292146
                                                   = defunc_0_f_res_292132 *
                                                   x_292145;
                                            double defunc_1_op_res_292107 =
                                                   defunc_9_fit_fun_res_292140 +
                                                   redout_295306;
                                            double defunc_1_op_res_292110 =
                                                   defunc_9_slope_fun_res_292146 +
                                                   redout_295307;
                                            double redout_tmp_304037 =
                                                   defunc_1_op_res_292107;
                                            double redout_tmp_304038 =
                                                   defunc_1_op_res_292110;
                                            
                                            redout_295306 = redout_tmp_304037;
                                            redout_295307 = redout_tmp_304038;
                                        }
                                        defunc_2_reduce_res_292103 =
                                            redout_295306;
                                        defunc_2_reduce_res_292104 =
                                            redout_295307;
                                        ((double *) mem_299681.mem)[i_295327 *
                                                                    ctx_val_297415 +
                                                                    i_295320 *
                                                                    s_n_m_290412 +
                                                                    i_295313] =
                                            defunc_2_reduce_res_292103;
                                        ((double *) mem_299686.mem)[i_295327 *
                                                                    ctx_val_297415 +
                                                                    i_295320 *
                                                                    s_n_m_290412 +
                                                                    i_295313] =
                                            defunc_2_reduce_res_292104;
                                    }
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_299894, &mem_299681,
                                             "mem_299681") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_299883, &mem_299686,
                                             "mem_299686") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_299686,
                                               "mem_299686") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_299681,
                                               "mem_299681") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_299917, &ext_mem_299894,
                                         "ext_mem_299894") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_299906, &ext_mem_299883,
                                         "ext_mem_299883") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_299883,
                                           "ext_mem_299883") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_299894,
                                           "ext_mem_299894") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_299939, &ext_mem_299917,
                                     "ext_mem_299917") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_299928, &ext_mem_299906,
                                     "ext_mem_299906") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299906,
                                       "ext_mem_299906") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299917,
                                       "ext_mem_299917") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_299961, &ext_mem_299939,
                                 "ext_mem_299939") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_299950, &ext_mem_299928,
                                 "ext_mem_299928") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_299928, "ext_mem_299928") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_299939, "ext_mem_299939") != 0)
                    return 1;
            }
            
            int64_t ext_300079;
            struct memblock ext_mem_300075;
            
            ext_mem_300075.references = NULL;
            if (cond_290411) {
                ext_300079 = ctx_val_297415;
                if (memblock_set(ctx, &ext_mem_300075, &ext_mem_299961,
                                 "ext_mem_299961") != 0)
                    return 1;
            } else {
                bool bounds_invalid_upwards_292151 = slt64(pad_css_len_290408,
                                                           (int64_t) 0);
                bool valid_292152 = !bounds_invalid_upwards_292151;
                bool range_valid_c_292153;
                
                if (!valid_292152) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Range ", (long long) (int64_t) 0, "..",
                                  (long long) (int64_t) 1, "..<",
                                  (long long) pad_css_len_290408,
                                  " is invalid.",
                                  "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:752:3-761:9\n   #4  stl.fut:222:31-96\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:221:23-223:48\n   #8  /prelude/soacs.fut:67:19-23\n   #9  /prelude/soacs.fut:67:3-37\n   #10 stl.fut:220:15-224:44\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_300075,
                                       "ext_mem_300075") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299950,
                                       "ext_mem_299950") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299961,
                                       "ext_mem_299961") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297874,
                                       "mem_param_297874") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297866,
                                       "mem_param_297866") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302748,
                                       "ext_mem_302748") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302749,
                                       "ext_mem_302749") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297852,
                                       "mem_param_297852") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297844,
                                       "mem_param_297844") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297836,
                                       "mem_param_297836") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303273,
                                       "ext_mem_303273") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303274,
                                       "ext_mem_303274") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303275,
                                       "ext_mem_303275") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                struct memblock mem_299976;
                
                mem_299976.references = NULL;
                if (memblock_alloc(ctx, &mem_299976, bytes_299975,
                                   "mem_299976")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t ctx_val_299989 = n_p_290264 * pad_css_len_290408;
                
                for (int64_t i_295340 = 0; i_295340 < partition_sizze_290353;
                     i_295340++) {
                    for (int64_t i_295336 = 0; i_295336 < n_p_290264;
                         i_295336++) {
                        for (int64_t i_295332 = 0; i_295332 <
                             pad_css_len_290408; i_295332++) {
                            bool cond_292163 = i_295332 == (int64_t) 0;
                            double defunc_0_f_res_292164;
                            
                            if (cond_292163) {
                                bool y_292165 = slt64((int64_t) 0,
                                                      s_n_m_290412);
                                bool index_certs_292166;
                                
                                if (!y_292165) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) (int64_t) 0,
                                                  "] out of bounds for array of shape [",
                                                  (long long) s_n_m_290412,
                                                  "].",
                                                  "-> #0  /prelude/array.fut:21:29-32\n   #1  loess.fut:754:12-20\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:752:3-761:9\n   #6  stl.fut:222:31-96\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:221:23-223:48\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:220:15-224:44\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                                    if (memblock_unref(ctx, &mem_299976,
                                                       "mem_299976") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_300075,
                                                       "ext_mem_300075") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_299950,
                                                       "ext_mem_299950") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_299961,
                                                       "ext_mem_299961") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297874,
                                                       "mem_param_297874") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297866,
                                                       "mem_param_297866") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302748,
                                                       "ext_mem_302748") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302749,
                                                       "ext_mem_302749") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297852,
                                                       "mem_param_297852") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297844,
                                                       "mem_param_297844") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297836,
                                                       "mem_param_297836") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303273,
                                                       "ext_mem_303273") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303274,
                                                       "ext_mem_303274") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303275,
                                                       "ext_mem_303275") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_297828,
                                                       "mem_297828") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_297824,
                                                       "mem_297824") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_303840,
                                                       "mem_out_303840") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_303839,
                                                       "mem_out_303839") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_303838,
                                                       "mem_out_303838") != 0)
                                        return 1;
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                double head_res_292167;
                                
                                head_res_292167 =
                                    ((double *) ext_mem_299961.mem)[i_295340 *
                                                                    ctx_val_297415 +
                                                                    i_295336 *
                                                                    s_n_m_290412];
                                defunc_0_f_res_292164 = head_res_292167;
                            } else {
                                int64_t y_292168 = sub64(pad_css_len_290408,
                                                         (int64_t) 1);
                                bool cond_292169 = i_295332 == y_292168;
                                double defunc_0_f_res_f_res_292170;
                                
                                if (cond_292169) {
                                    int64_t i_292171 = sub64(s_n_m_290412,
                                                             (int64_t) 1);
                                    bool x_292172 = sle64((int64_t) 0,
                                                          i_292171);
                                    bool y_292173 = slt64(i_292171,
                                                          s_n_m_290412);
                                    bool bounds_check_292174 = x_292172 &&
                                         y_292173;
                                    bool index_certs_292175;
                                    
                                    if (!bounds_check_292174) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) i_292171,
                                                      "] out of bounds for array of shape [",
                                                      (long long) s_n_m_290412,
                                                      "].",
                                                      "-> #0  /prelude/array.fut:26:29-34\n   #1  loess.fut:756:12-20\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:752:3-761:9\n   #6  stl.fut:222:31-96\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:221:23-223:48\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:220:15-224:44\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_299976,
                                                           "mem_299976") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300075,
                                                           "ext_mem_300075") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299950,
                                                           "ext_mem_299950") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299961,
                                                           "ext_mem_299961") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297874,
                                                           "mem_param_297874") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297866,
                                                           "mem_param_297866") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302748,
                                                           "ext_mem_302748") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302749,
                                                           "ext_mem_302749") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297852,
                                                           "mem_param_297852") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297844,
                                                           "mem_param_297844") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297836,
                                                           "mem_param_297836") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303273,
                                                           "ext_mem_303273") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303274,
                                                           "ext_mem_303274") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303275,
                                                           "ext_mem_303275") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297828,
                                                           "mem_297828") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297824,
                                                           "mem_297824") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303840,
                                                           "mem_out_303840") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303839,
                                                           "mem_out_303839") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303838,
                                                           "mem_out_303838") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double last_res_292176;
                                    
                                    last_res_292176 =
                                        ((double *) ext_mem_299961.mem)[i_295340 *
                                                                        ctx_val_297415 +
                                                                        i_295336 *
                                                                        s_n_m_290412 +
                                                                        i_292171];
                                    defunc_0_f_res_f_res_292170 =
                                        last_res_292176;
                                } else {
                                    int64_t x_292177 = sub64(i_295332,
                                                             (int64_t) 1);
                                    bool zzero_292178 = jump_s_290271 ==
                                         (int64_t) 0;
                                    bool nonzzero_292179 = !zzero_292178;
                                    bool nonzzero_cert_292180;
                                    
                                    if (!nonzzero_292179) {
                                        ctx->error =
                                            msgprintf("Error: %s\n\nBacktrace:\n%s",
                                                      "division by zero",
                                                      "-> #0  loess.fut:758:22-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:752:3-761:9\n   #5  stl.fut:222:31-96\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:221:23-223:48\n   #9  /prelude/soacs.fut:67:19-23\n   #10 /prelude/soacs.fut:67:3-37\n   #11 stl.fut:220:15-224:44\n   #12 stl.fut:419:61-435:77\n   #13 stl.fut:463:3-479:36\n   #14 stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_299976,
                                                           "mem_299976") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300075,
                                                           "ext_mem_300075") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299950,
                                                           "ext_mem_299950") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299961,
                                                           "ext_mem_299961") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297874,
                                                           "mem_param_297874") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297866,
                                                           "mem_param_297866") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302748,
                                                           "ext_mem_302748") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302749,
                                                           "ext_mem_302749") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297852,
                                                           "mem_param_297852") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297844,
                                                           "mem_param_297844") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297836,
                                                           "mem_param_297836") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303273,
                                                           "ext_mem_303273") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303274,
                                                           "ext_mem_303274") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303275,
                                                           "ext_mem_303275") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297828,
                                                           "mem_297828") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297824,
                                                           "mem_297824") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303840,
                                                           "mem_out_303840") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303839,
                                                           "mem_out_303839") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303838,
                                                           "mem_out_303838") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t x_292181 = sdiv64(x_292177,
                                                              jump_s_290271);
                                    int64_t m_v_292182 = add64((int64_t) 1,
                                                               x_292181);
                                    int64_t j_292183;
                                    
                                    if (cond_292163) {
                                        j_292183 = (int64_t) 0;
                                    } else {
                                        int64_t y_292184 = sub64(s_n_m_290412,
                                                                 (int64_t) 1);
                                        bool cond_292185 = m_v_292182 ==
                                             y_292184;
                                        int64_t j_f_res_292186;
                                        
                                        if (cond_292185) {
                                            j_f_res_292186 = x_292181;
                                        } else {
                                            j_f_res_292186 = m_v_292182;
                                        }
                                        j_292183 = j_f_res_292186;
                                    }
                                    
                                    bool cond_292187 = j_292183 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_292188;
                                    
                                    if (cond_292187) {
                                        defunc_0_m_fun_res_292188 = (int64_t) 0;
                                    } else {
                                        int64_t y_292189 = sub64(s_n_m_290412,
                                                                 (int64_t) 1);
                                        bool cond_292190 = j_292183 == y_292189;
                                        int64_t defunc_0_m_fun_res_f_res_292191;
                                        
                                        if (cond_292190) {
                                            defunc_0_m_fun_res_f_res_292191 =
                                                y_292168;
                                        } else {
                                            int64_t x_292192 = sub64(j_292183,
                                                                     (int64_t) 1);
                                            int64_t x_292193 =
                                                    mul64(jump_s_290271,
                                                          x_292192);
                                            int64_t min_arg_292194 =
                                                    add64((int64_t) 1,
                                                          x_292193);
                                            int64_t min_res_292195 =
                                                    smin64(defunc_0_f_res_290407,
                                                           min_arg_292194);
                                            
                                            defunc_0_m_fun_res_f_res_292191 =
                                                min_res_292195;
                                        }
                                        defunc_0_m_fun_res_292188 =
                                            defunc_0_m_fun_res_f_res_292191;
                                    }
                                    
                                    int64_t defunc_0_m_fun_arg_292196 =
                                            add64((int64_t) 1, j_292183);
                                    bool cond_292197 =
                                         defunc_0_m_fun_arg_292196 ==
                                         (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_292198;
                                    
                                    if (cond_292197) {
                                        defunc_0_m_fun_res_292198 = (int64_t) 0;
                                    } else {
                                        int64_t y_292199 = sub64(s_n_m_290412,
                                                                 (int64_t) 1);
                                        bool cond_292200 =
                                             defunc_0_m_fun_arg_292196 ==
                                             y_292199;
                                        int64_t defunc_0_m_fun_res_f_res_292201;
                                        
                                        if (cond_292200) {
                                            defunc_0_m_fun_res_f_res_292201 =
                                                y_292168;
                                        } else {
                                            int64_t x_292202 =
                                                    mul64(jump_s_290271,
                                                          j_292183);
                                            int64_t min_arg_292203 =
                                                    add64((int64_t) 1,
                                                          x_292202);
                                            int64_t min_res_292204 =
                                                    smin64(defunc_0_f_res_290407,
                                                           min_arg_292203);
                                            
                                            defunc_0_m_fun_res_f_res_292201 =
                                                min_res_292204;
                                        }
                                        defunc_0_m_fun_res_292198 =
                                            defunc_0_m_fun_res_f_res_292201;
                                    }
                                    
                                    int64_t i64_arg_292205 =
                                            sub64(defunc_0_m_fun_res_292198,
                                                  defunc_0_m_fun_res_292188);
                                    double i64_res_292206 =
                                           sitofp_i64_f64(i64_arg_292205);
                                    int64_t i64_arg_292207 = sub64(i_295332,
                                                                   defunc_0_m_fun_res_292188);
                                    double i64_res_292208 =
                                           sitofp_i64_f64(i64_arg_292207);
                                    double u_292209 = i64_res_292208 /
                                           i64_res_292206;
                                    double u2_292210 = u_292209 * u_292209;
                                    double u3_292211 = u_292209 * u2_292210;
                                    double x_292212 = 2.0 * u3_292211;
                                    double y_292213 = 3.0 * u2_292210;
                                    double x_292214 = x_292212 - y_292213;
                                    double x_292215 = 1.0 + x_292214;
                                    bool x_292216 = sle64((int64_t) 0,
                                                          j_292183);
                                    bool y_292217 = slt64(j_292183,
                                                          s_n_m_290412);
                                    bool bounds_check_292218 = x_292216 &&
                                         y_292217;
                                    bool index_certs_292219;
                                    
                                    if (!bounds_check_292218) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) j_292183,
                                                      "] out of bounds for array of shape [",
                                                      (long long) s_n_m_290412,
                                                      "].",
                                                      "-> #0  loess.fut:731:27-33\n   #1  loess.fut:760:15-52\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:752:3-761:9\n   #6  stl.fut:222:31-96\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:221:23-223:48\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:220:15-224:44\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_299976,
                                                           "mem_299976") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300075,
                                                           "ext_mem_300075") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299950,
                                                           "ext_mem_299950") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299961,
                                                           "ext_mem_299961") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297874,
                                                           "mem_param_297874") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297866,
                                                           "mem_param_297866") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302748,
                                                           "ext_mem_302748") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302749,
                                                           "ext_mem_302749") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297852,
                                                           "mem_param_297852") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297844,
                                                           "mem_param_297844") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297836,
                                                           "mem_param_297836") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303273,
                                                           "ext_mem_303273") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303274,
                                                           "ext_mem_303274") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303275,
                                                           "ext_mem_303275") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297828,
                                                           "mem_297828") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297824,
                                                           "mem_297824") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303840,
                                                           "mem_out_303840") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303839,
                                                           "mem_out_303839") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303838,
                                                           "mem_out_303838") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double y_292220;
                                    
                                    y_292220 =
                                        ((double *) ext_mem_299961.mem)[i_295340 *
                                                                        ctx_val_297415 +
                                                                        i_295336 *
                                                                        s_n_m_290412 +
                                                                        j_292183];
                                    
                                    double x_292221 = x_292215 * y_292220;
                                    double x_292222 = y_292213 - x_292212;
                                    bool x_292223 = sle64((int64_t) 0,
                                                          defunc_0_m_fun_arg_292196);
                                    bool y_292224 =
                                         slt64(defunc_0_m_fun_arg_292196,
                                               s_n_m_290412);
                                    bool bounds_check_292225 = x_292223 &&
                                         y_292224;
                                    bool index_certs_292226;
                                    
                                    if (!bounds_check_292225) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) defunc_0_m_fun_arg_292196,
                                                      "] out of bounds for array of shape [",
                                                      (long long) s_n_m_290412,
                                                      "].",
                                                      "-> #0  loess.fut:732:27-37\n   #1  loess.fut:760:15-52\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:752:3-761:9\n   #6  stl.fut:222:31-96\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:221:23-223:48\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:220:15-224:44\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_299976,
                                                           "mem_299976") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300075,
                                                           "ext_mem_300075") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299950,
                                                           "ext_mem_299950") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299961,
                                                           "ext_mem_299961") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297874,
                                                           "mem_param_297874") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297866,
                                                           "mem_param_297866") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302748,
                                                           "ext_mem_302748") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302749,
                                                           "ext_mem_302749") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297852,
                                                           "mem_param_297852") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297844,
                                                           "mem_param_297844") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297836,
                                                           "mem_param_297836") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303273,
                                                           "ext_mem_303273") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303274,
                                                           "ext_mem_303274") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303275,
                                                           "ext_mem_303275") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297828,
                                                           "mem_297828") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297824,
                                                           "mem_297824") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303840,
                                                           "mem_out_303840") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303839,
                                                           "mem_out_303839") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303838,
                                                           "mem_out_303838") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double y_292227;
                                    
                                    y_292227 =
                                        ((double *) ext_mem_299961.mem)[i_295340 *
                                                                        ctx_val_297415 +
                                                                        i_295336 *
                                                                        s_n_m_290412 +
                                                                        defunc_0_m_fun_arg_292196];
                                    
                                    double y_292228 = x_292222 * y_292227;
                                    double x_292229 = x_292221 + y_292228;
                                    double y_292230 = 2.0 * u2_292210;
                                    double x_292231 = u3_292211 - y_292230;
                                    double x_292232 = u_292209 + x_292231;
                                    double y_292233;
                                    
                                    y_292233 =
                                        ((double *) ext_mem_299950.mem)[i_295340 *
                                                                        ctx_val_297415 +
                                                                        i_295336 *
                                                                        s_n_m_290412 +
                                                                        j_292183];
                                    
                                    double x_292234 = x_292232 * y_292233;
                                    double y_292235 = i64_res_292206 * x_292234;
                                    double x_292236 = x_292229 + y_292235;
                                    double x_292237 = u3_292211 - u2_292210;
                                    double y_292238;
                                    
                                    y_292238 =
                                        ((double *) ext_mem_299950.mem)[i_295340 *
                                                                        ctx_val_297415 +
                                                                        i_295336 *
                                                                        s_n_m_290412 +
                                                                        defunc_0_m_fun_arg_292196];
                                    
                                    double x_292239 = x_292237 * y_292238;
                                    double y_292240 = i64_res_292206 * x_292239;
                                    double defunc_4_interpolate_proc_res_292241
                                           = x_292236 + y_292240;
                                    
                                    defunc_0_f_res_f_res_292170 =
                                        defunc_4_interpolate_proc_res_292241;
                                }
                                defunc_0_f_res_292164 =
                                    defunc_0_f_res_f_res_292170;
                            }
                            ((double *) mem_299976.mem)[i_295340 *
                                                        ctx_val_299989 +
                                                        i_295336 *
                                                        pad_css_len_290408 +
                                                        i_295332] =
                                defunc_0_f_res_292164;
                        }
                    }
                }
                ext_300079 = ctx_val_299989;
                if (memblock_set(ctx, &ext_mem_300075, &mem_299976,
                                 "mem_299976") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_299976, "mem_299976") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_299950, "ext_mem_299950") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_299961, "ext_mem_299961") != 0)
                return 1;
            for (int64_t i_295348 = 0; i_295348 < partition_sizze_290353;
                 i_295348++) {
                for (int64_t i_295344 = 0; i_295344 < C_len_290410;
                     i_295344++) {
                    int64_t i_292248 = smod64(i_295344, n_p_290264);
                    bool x_292249 = sle64((int64_t) 0, i_292248);
                    bool y_292250 = slt64(i_292248, n_p_290264);
                    bool bounds_check_292251 = x_292249 && y_292250;
                    int64_t i_292252 = sdiv64(i_295344, n_p_290264);
                    bool x_292253 = sle64((int64_t) 0, i_292252);
                    bool y_292254 = slt64(i_292252, css_results_l_290875);
                    bool bounds_check_292255 = x_292253 && y_292254;
                    bool index_ok_292256 = bounds_check_292251 &&
                         bounds_check_292255;
                    bool index_certs_292257;
                    
                    if (!index_ok_292256) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) i_292248, ", ",
                                      (long long) i_292252,
                                      "] out of bounds for array of shape [",
                                      (long long) n_p_290264, "][",
                                      (long long) css_results_l_290875, "].",
                                      "-> #0  stl.fut:228:39-67\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:228:28-74\n   #5  stl.fut:227:21-229:39\n   #6  stl.fut:419:61-435:77\n   #7  stl.fut:463:3-479:36\n   #8  stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &ext_mem_300075,
                                           "ext_mem_300075") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_299950,
                                           "ext_mem_299950") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_299961,
                                           "ext_mem_299961") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297874,
                                           "mem_param_297874") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297866,
                                           "mem_param_297866") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302748,
                                           "ext_mem_302748") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302749,
                                           "ext_mem_302749") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297852,
                                           "mem_param_297852") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297844,
                                           "mem_param_297844") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297836,
                                           "mem_param_297836") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303273,
                                           "ext_mem_303273") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303274,
                                           "ext_mem_303274") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303275,
                                           "ext_mem_303275") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303840,
                                           "mem_out_303840") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303839,
                                           "mem_out_303839") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303838,
                                           "mem_out_303838") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    if ((int64_t) 8 > 0)
                        memmove(mem_300086 + (i_295348 * C_len_290410 +
                                              i_295344) * (int64_t) 8,
                                ext_mem_300075.mem + ((int64_t) 0 + i_295348 *
                                                      ext_300079 + i_292248 *
                                                      ext_300078 + (int64_t) 1 *
                                                      i_292252) * (int64_t) 8,
                                (int64_t) 8);
                }
            }
            if (memblock_unref(ctx, &ext_mem_300075, "ext_mem_300075") != 0)
                return 1;
            for (int64_t i_295354 = 0; i_295354 < partition_sizze_290353;
                 i_295354++) {
                double defunc_2_reduce_res_292263;
                double redout_295350 = 0.0;
                
                for (int64_t i_295351 = 0; i_295351 < n_p_290264; i_295351++) {
                    double x_292267;
                    
                    x_292267 = ((double *) mem_300086)[i_295354 * C_len_290410 +
                                                       i_295351];
                    
                    double defunc_1_op_res_292266 = x_292267 + redout_295350;
                    double redout_tmp_304045 = defunc_1_op_res_292266;
                    
                    redout_295350 = redout_tmp_304045;
                }
                defunc_2_reduce_res_292263 = redout_295350;
                ((double *) mem_300132)[i_295354] = defunc_2_reduce_res_292263;
            }
            for (int64_t i_295364 = 0; i_295364 < partition_sizze_290353;
                 i_295364++) {
                double x_292271;
                
                x_292271 = ((double *) mem_300132)[i_295364];
                
                double discard_295361;
                double scanacc_295357 = 0.0;
                
                for (int64_t i_295359 = 0; i_295359 <
                     lifted_single_ma_l_arg_290898; i_295359++) {
                    bool cond_292277 = i_295359 == (int64_t) 0;
                    double defunc_0_f_res_292278;
                    
                    if (cond_292277) {
                        double defunc_0_f_res_t_res_292279 = x_292271 /
                               i64_res_290281;
                        
                        defunc_0_f_res_292278 = defunc_0_f_res_t_res_292279;
                    } else {
                        int64_t x_292280 = add64(n_p_290264, i_295359);
                        int64_t i_292281 = sub64(x_292280, (int64_t) 1);
                        bool x_292282 = sle64((int64_t) 0, i_292281);
                        bool y_292283 = slt64(i_292281, C_len_290410);
                        bool bounds_check_292284 = x_292282 && y_292283;
                        bool index_certs_292285;
                        
                        if (!bounds_check_292284) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_292281,
                                          "] out of bounds for array of shape [",
                                          (long long) C_len_290410, "].",
                                          "-> #0  stl.fut:34:23-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  stl.fut:40:3-36\n   #9  stl.fut:233:23-47\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_300075,
                                               "ext_mem_300075") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299950,
                                               "ext_mem_299950") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299961,
                                               "ext_mem_299961") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297874,
                                               "mem_param_297874") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297866,
                                               "mem_param_297866") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302748,
                                               "ext_mem_302748") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302749,
                                               "ext_mem_302749") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297852,
                                               "mem_param_297852") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297844,
                                               "mem_param_297844") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297836,
                                               "mem_param_297836") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303273,
                                               "ext_mem_303273") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303274,
                                               "ext_mem_303274") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303275,
                                               "ext_mem_303275") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297828,
                                               "mem_297828") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297824,
                                               "mem_297824") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303840,
                                               "mem_out_303840") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303839,
                                               "mem_out_303839") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303838,
                                               "mem_out_303838") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double x_292286;
                        
                        x_292286 = ((double *) mem_300086)[i_295364 *
                                                           C_len_290410 +
                                                           i_292281];
                        
                        int64_t i_292287 = sub64(i_295359, (int64_t) 1);
                        bool x_292288 = sle64((int64_t) 0, i_292287);
                        bool y_292289 = slt64(i_292287, C_len_290410);
                        bool bounds_check_292290 = x_292288 && y_292289;
                        bool index_certs_292291;
                        
                        if (!bounds_check_292290) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_292287,
                                          "] out of bounds for array of shape [",
                                          (long long) C_len_290410, "].",
                                          "-> #0  stl.fut:34:40-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  stl.fut:40:3-36\n   #9  stl.fut:233:23-47\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_300075,
                                               "ext_mem_300075") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299950,
                                               "ext_mem_299950") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299961,
                                               "ext_mem_299961") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297874,
                                               "mem_param_297874") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297866,
                                               "mem_param_297866") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302748,
                                               "ext_mem_302748") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302749,
                                               "ext_mem_302749") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297852,
                                               "mem_param_297852") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297844,
                                               "mem_param_297844") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297836,
                                               "mem_param_297836") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303273,
                                               "ext_mem_303273") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303274,
                                               "ext_mem_303274") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303275,
                                               "ext_mem_303275") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297828,
                                               "mem_297828") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297824,
                                               "mem_297824") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303840,
                                               "mem_out_303840") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303839,
                                               "mem_out_303839") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303838,
                                               "mem_out_303838") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_292292;
                        
                        y_292292 = ((double *) mem_300086)[i_295364 *
                                                           C_len_290410 +
                                                           i_292287];
                        
                        double x_292293 = x_292286 - y_292292;
                        double defunc_0_f_res_f_res_292294 = x_292293 /
                               i64_res_290281;
                        
                        defunc_0_f_res_292278 = defunc_0_f_res_f_res_292294;
                    }
                    
                    double defunc_1_op_res_292275 = defunc_0_f_res_292278 +
                           scanacc_295357;
                    
                    ((double *) mem_300161)[i_295359] = defunc_1_op_res_292275;
                    
                    double scanacc_tmp_304047 = defunc_1_op_res_292275;
                    
                    scanacc_295357 = scanacc_tmp_304047;
                }
                discard_295361 = scanacc_295357;
                if (lifted_single_ma_l_arg_290898 * (int64_t) 8 > 0)
                    memmove(mem_300148 + i_295364 *
                            lifted_single_ma_l_arg_290898 * (int64_t) 8,
                            mem_300161 + (int64_t) 0,
                            lifted_single_ma_l_arg_290898 * (int64_t) 8);
            }
            for (int64_t i_295370 = 0; i_295370 < partition_sizze_290353;
                 i_295370++) {
                double defunc_2_reduce_res_292299;
                double redout_295366 = 0.0;
                
                for (int64_t i_295367 = 0; i_295367 < n_p_290264; i_295367++) {
                    double x_292303;
                    
                    x_292303 = ((double *) mem_300148)[i_295370 *
                                                       lifted_single_ma_l_arg_290898 +
                                                       i_295367];
                    
                    double defunc_1_op_res_292302 = x_292303 + redout_295366;
                    double redout_tmp_304050 = defunc_1_op_res_292302;
                    
                    redout_295366 = redout_tmp_304050;
                }
                defunc_2_reduce_res_292299 = redout_295366;
                ((double *) mem_300184)[i_295370] = defunc_2_reduce_res_292299;
            }
            for (int64_t i_295380 = 0; i_295380 < partition_sizze_290353;
                 i_295380++) {
                double x_292307;
                
                x_292307 = ((double *) mem_300184)[i_295380];
                
                double discard_295377;
                double scanacc_295373 = 0.0;
                
                for (int64_t i_295375 = 0; i_295375 <
                     dyn_lifted_single_ma_l_arg_290908; i_295375++) {
                    bool cond_292313 = i_295375 == (int64_t) 0;
                    double defunc_0_f_res_292314;
                    
                    if (cond_292313) {
                        double defunc_0_f_res_t_res_292315 = x_292307 /
                               i64_res_290281;
                        
                        defunc_0_f_res_292314 = defunc_0_f_res_t_res_292315;
                    } else {
                        int64_t x_292316 = add64(n_p_290264, i_295375);
                        int64_t i_292317 = sub64(x_292316, (int64_t) 1);
                        bool x_292318 = sle64((int64_t) 0, i_292317);
                        bool y_292319 = slt64(i_292317,
                                              lifted_single_ma_l_arg_290898);
                        bool bounds_check_292320 = x_292318 && y_292319;
                        bool index_certs_292321;
                        
                        if (!bounds_check_292320) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_292317,
                                          "] out of bounds for array of shape [",
                                          (long long) lifted_single_ma_l_arg_290898,
                                          "].",
                                          "-> #0  stl.fut:34:23-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  /prelude/functional.fut:9:42-44\n   #9  stl.fut:40:3-64\n   #10 stl.fut:233:23-47\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_300075,
                                               "ext_mem_300075") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299950,
                                               "ext_mem_299950") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299961,
                                               "ext_mem_299961") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297874,
                                               "mem_param_297874") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297866,
                                               "mem_param_297866") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302748,
                                               "ext_mem_302748") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302749,
                                               "ext_mem_302749") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297852,
                                               "mem_param_297852") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297844,
                                               "mem_param_297844") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297836,
                                               "mem_param_297836") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303273,
                                               "ext_mem_303273") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303274,
                                               "ext_mem_303274") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303275,
                                               "ext_mem_303275") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297828,
                                               "mem_297828") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297824,
                                               "mem_297824") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303840,
                                               "mem_out_303840") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303839,
                                               "mem_out_303839") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303838,
                                               "mem_out_303838") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double x_292322;
                        
                        x_292322 = ((double *) mem_300148)[i_295380 *
                                                           lifted_single_ma_l_arg_290898 +
                                                           i_292317];
                        
                        int64_t i_292323 = sub64(i_295375, (int64_t) 1);
                        bool x_292324 = sle64((int64_t) 0, i_292323);
                        bool y_292325 = slt64(i_292323,
                                              lifted_single_ma_l_arg_290898);
                        bool bounds_check_292326 = x_292324 && y_292325;
                        bool index_certs_292327;
                        
                        if (!bounds_check_292326) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_292323,
                                          "] out of bounds for array of shape [",
                                          (long long) lifted_single_ma_l_arg_290898,
                                          "].",
                                          "-> #0  stl.fut:34:40-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  /prelude/functional.fut:9:42-44\n   #9  stl.fut:40:3-64\n   #10 stl.fut:233:23-47\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_300075,
                                               "ext_mem_300075") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299950,
                                               "ext_mem_299950") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299961,
                                               "ext_mem_299961") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297874,
                                               "mem_param_297874") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297866,
                                               "mem_param_297866") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302748,
                                               "ext_mem_302748") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302749,
                                               "ext_mem_302749") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297852,
                                               "mem_param_297852") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297844,
                                               "mem_param_297844") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297836,
                                               "mem_param_297836") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303273,
                                               "ext_mem_303273") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303274,
                                               "ext_mem_303274") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303275,
                                               "ext_mem_303275") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297828,
                                               "mem_297828") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297824,
                                               "mem_297824") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303840,
                                               "mem_out_303840") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303839,
                                               "mem_out_303839") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303838,
                                               "mem_out_303838") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_292328;
                        
                        y_292328 = ((double *) mem_300148)[i_295380 *
                                                           lifted_single_ma_l_arg_290898 +
                                                           i_292323];
                        
                        double x_292329 = x_292322 - y_292328;
                        double defunc_0_f_res_f_res_292330 = x_292329 /
                               i64_res_290281;
                        
                        defunc_0_f_res_292314 = defunc_0_f_res_f_res_292330;
                    }
                    
                    double defunc_1_op_res_292311 = defunc_0_f_res_292314 +
                           scanacc_295373;
                    
                    ((double *) mem_300213)[i_295375] = defunc_1_op_res_292311;
                    
                    double scanacc_tmp_304052 = defunc_1_op_res_292311;
                    
                    scanacc_295373 = scanacc_tmp_304052;
                }
                discard_295377 = scanacc_295373;
                if (dyn_lifted_single_ma_l_arg_290908 * (int64_t) 8 > 0)
                    memmove(mem_300200 + i_295380 *
                            dyn_lifted_single_ma_l_arg_290908 * (int64_t) 8,
                            mem_300213 + (int64_t) 0,
                            dyn_lifted_single_ma_l_arg_290908 * (int64_t) 8);
            }
            for (int64_t i_295386 = 0; i_295386 < partition_sizze_290353;
                 i_295386++) {
                double defunc_2_reduce_res_292335;
                double redout_295382 = 0.0;
                
                for (int32_t i_296193 = 0; i_296193 < 3; i_296193++) {
                    int64_t i_295383 = sext_i32_i64(i_296193);
                    double x_292339;
                    
                    x_292339 = ((double *) mem_300200)[i_295386 *
                                                       dyn_lifted_single_ma_l_arg_290908 +
                                                       i_295383];
                    
                    double defunc_1_op_res_292338 = x_292339 + redout_295382;
                    double redout_tmp_304055 = defunc_1_op_res_292338;
                    
                    redout_295382 = redout_tmp_304055;
                }
                defunc_2_reduce_res_292335 = redout_295382;
                ((double *) mem_300236)[i_295386] = defunc_2_reduce_res_292335;
            }
            for (int64_t i_295396 = 0; i_295396 < partition_sizze_290353;
                 i_295396++) {
                double x_292343;
                
                x_292343 = ((double *) mem_300236)[i_295396];
                
                double discard_295393;
                double scanacc_295389 = 0.0;
                
                for (int64_t i_295391 = 0; i_295391 < n_290262; i_295391++) {
                    bool cond_292349 = i_295391 == (int64_t) 0;
                    double defunc_0_f_res_292350;
                    
                    if (cond_292349) {
                        double defunc_0_f_res_t_res_292351 = x_292343 / 3.0;
                        
                        defunc_0_f_res_292350 = defunc_0_f_res_t_res_292351;
                    } else {
                        int64_t x_292352 = add64((int64_t) 3, i_295391);
                        int64_t i_292353 = sub64(x_292352, (int64_t) 1);
                        bool x_292354 = sle64((int64_t) 0, i_292353);
                        bool y_292355 = slt64(i_292353,
                                              dyn_lifted_single_ma_l_arg_290908);
                        bool bounds_check_292356 = x_292354 && y_292355;
                        bool index_certs_292357;
                        
                        if (!bounds_check_292356) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_292353,
                                          "] out of bounds for array of shape [",
                                          (long long) dyn_lifted_single_ma_l_arg_290908,
                                          "].",
                                          "-> #0  stl.fut:34:23-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  /prelude/functional.fut:9:42-44\n   #9  stl.fut:40:3-84\n   #10 stl.fut:233:23-47\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_300075,
                                               "ext_mem_300075") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299950,
                                               "ext_mem_299950") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299961,
                                               "ext_mem_299961") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297874,
                                               "mem_param_297874") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297866,
                                               "mem_param_297866") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302748,
                                               "ext_mem_302748") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302749,
                                               "ext_mem_302749") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297852,
                                               "mem_param_297852") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297844,
                                               "mem_param_297844") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297836,
                                               "mem_param_297836") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303273,
                                               "ext_mem_303273") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303274,
                                               "ext_mem_303274") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303275,
                                               "ext_mem_303275") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297828,
                                               "mem_297828") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297824,
                                               "mem_297824") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303840,
                                               "mem_out_303840") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303839,
                                               "mem_out_303839") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303838,
                                               "mem_out_303838") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double x_292358;
                        
                        x_292358 = ((double *) mem_300200)[i_295396 *
                                                           dyn_lifted_single_ma_l_arg_290908 +
                                                           i_292353];
                        
                        int64_t i_292359 = sub64(i_295391, (int64_t) 1);
                        bool x_292360 = sle64((int64_t) 0, i_292359);
                        bool y_292361 = slt64(i_292359,
                                              dyn_lifted_single_ma_l_arg_290908);
                        bool bounds_check_292362 = x_292360 && y_292361;
                        bool index_certs_292363;
                        
                        if (!bounds_check_292362) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_292359,
                                          "] out of bounds for array of shape [",
                                          (long long) dyn_lifted_single_ma_l_arg_290908,
                                          "].",
                                          "-> #0  stl.fut:34:40-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  /prelude/functional.fut:9:42-44\n   #9  stl.fut:40:3-84\n   #10 stl.fut:233:23-47\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_300075,
                                               "ext_mem_300075") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299950,
                                               "ext_mem_299950") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299961,
                                               "ext_mem_299961") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297874,
                                               "mem_param_297874") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297866,
                                               "mem_param_297866") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302748,
                                               "ext_mem_302748") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302749,
                                               "ext_mem_302749") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297852,
                                               "mem_param_297852") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297844,
                                               "mem_param_297844") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297836,
                                               "mem_param_297836") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303273,
                                               "ext_mem_303273") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303274,
                                               "ext_mem_303274") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303275,
                                               "ext_mem_303275") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297828,
                                               "mem_297828") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297824,
                                               "mem_297824") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303840,
                                               "mem_out_303840") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303839,
                                               "mem_out_303839") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303838,
                                               "mem_out_303838") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_292364;
                        
                        y_292364 = ((double *) mem_300200)[i_295396 *
                                                           dyn_lifted_single_ma_l_arg_290908 +
                                                           i_292359];
                        
                        double x_292365 = x_292358 - y_292364;
                        double defunc_0_f_res_f_res_292366 = x_292365 / 3.0;
                        
                        defunc_0_f_res_292350 = defunc_0_f_res_f_res_292366;
                    }
                    
                    double defunc_1_op_res_292347 = defunc_0_f_res_292350 +
                           scanacc_295389;
                    
                    ((double *) mem_300265)[i_295391] = defunc_1_op_res_292347;
                    
                    double scanacc_tmp_304057 = defunc_1_op_res_292347;
                    
                    scanacc_295389 = scanacc_tmp_304057;
                }
                discard_295393 = scanacc_295389;
                if (n_290262 * (int64_t) 8 > 0)
                    memmove(mem_300252 + i_295396 * n_290262 * (int64_t) 8,
                            mem_300265 + (int64_t) 0, n_290262 * (int64_t) 8);
            }
            
            struct memblock ext_mem_301228;
            
            ext_mem_301228.references = NULL;
            
            struct memblock ext_mem_301220;
            
            ext_mem_301220.references = NULL;
            if (cond_290926) {
                bool match_lit_292370 = (int64_t) 0 == d_l_290270;
                struct memblock ext_mem_300549;
                
                ext_mem_300549.references = NULL;
                
                struct memblock ext_mem_300541;
                
                ext_mem_300541.references = NULL;
                if (match_lit_292370) {
                    struct memblock mem_300289;
                    
                    mem_300289.references = NULL;
                    if (memblock_alloc(ctx, &mem_300289, bytes_297605,
                                       "mem_300289")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_304059 = 0; i_304059 <
                         partition_sizze_290353; i_304059++) {
                        for (int64_t i_304060 = 0; i_304060 < l_n_m_290419;
                             i_304060++) {
                            ((double *) mem_300289.mem)[i_304059 *
                                                        l_n_m_290419 +
                                                        i_304060] = 0.0;
                        }
                    }
                    
                    struct memblock mem_300293;
                    
                    mem_300293.references = NULL;
                    if (memblock_alloc(ctx, &mem_300293, bytes_297605,
                                       "mem_300293")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_295408 = 0; i_295408 <
                         partition_sizze_290353; i_295408++) {
                        for (int64_t i_295404 = 0; i_295404 < l_n_m_290419;
                             i_295404++) {
                            int64_t x_292382;
                            
                            x_292382 = ((int64_t *) mem_297606)[i_295408 *
                                                                l_n_m_290419 +
                                                                i_295404];
                            
                            double x_292383;
                            
                            x_292383 = ((double *) mem_297610)[i_295408 *
                                                               l_n_m_290419 +
                                                               i_295404];
                            
                            int64_t min_arg_292384 = mul64(jump_t_290272,
                                                           i_295404);
                            int64_t min_res_292385 = smin64(i_290433,
                                                            min_arg_292384);
                            int64_t defunc_0_g_res_292386 = add64((int64_t) 1,
                                                                  min_res_292385);
                            double defunc_2_reduce_res_292387;
                            double redout_295398 = 0.0;
                            
                            for (int64_t i_295399 = 0; i_295399 < q_l_290267;
                                 i_295399++) {
                                bool cond_292392 = sle64(n_290262, i_295399);
                                int64_t defunc_0_f_res_292393;
                                
                                if (cond_292392) {
                                    defunc_0_f_res_292393 = (int64_t) 0;
                                } else {
                                    int64_t i_292394 = add64(x_292382,
                                                             i_295399);
                                    int64_t defunc_1_add_res_292395 =
                                            add64((int64_t) 1, i_292394);
                                    
                                    defunc_0_f_res_292393 =
                                        defunc_1_add_res_292395;
                                }
                                
                                double defunc_0_f_res_292396;
                                
                                if (cond_292392) {
                                    defunc_0_f_res_292396 = 0.0;
                                } else {
                                    int64_t i_292397 = add64(x_292382,
                                                             i_295399);
                                    double defunc_0_add_arg_292398;
                                    
                                    defunc_0_add_arg_292398 =
                                        ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                          (i_295408 *
                                                                           ctx_param_ext_297848 +
                                                                           i_292397 *
                                                                           ctx_param_ext_297850)];
                                    defunc_0_f_res_292396 =
                                        defunc_0_add_arg_292398;
                                }
                                
                                int64_t binop_p_292399 =
                                        sub64(defunc_0_f_res_292393,
                                              defunc_0_g_res_292386);
                                double defunc_0_f_res_292400 =
                                       sitofp_i64_f64(binop_p_292399);
                                double abs_res_292401 =
                                       fabs(defunc_0_f_res_292400);
                                double tmp1_292402 = abs_res_292401 / x_292383;
                                double x_292403 = tmp1_292402 * tmp1_292402;
                                double y_292404 = tmp1_292402 * x_292403;
                                double tmp2_292405 = 1.0 - y_292404;
                                double x_292406 = tmp2_292405 * tmp2_292405;
                                double tmp3_292407 = tmp2_292405 * x_292406;
                                double w_j_292408 = defunc_0_f_res_292396 *
                                       tmp3_292407;
                                double defunc_1_op_res_292390 = w_j_292408 +
                                       redout_295398;
                                double redout_tmp_304063 =
                                       defunc_1_op_res_292390;
                                
                                redout_295398 = redout_tmp_304063;
                            }
                            defunc_2_reduce_res_292387 = redout_295398;
                            
                            double a_292409 = 2.220446049250313e-16 +
                                   defunc_2_reduce_res_292387;
                            double a0_292410 = 1.0 / a_292409;
                            double defunc_2_reduce_res_292411;
                            double redout_295400 = 0.0;
                            
                            for (int64_t i_295401 = 0; i_295401 < q_l_290267;
                                 i_295401++) {
                                bool cond_292416 = sle64(n_290262, i_295401);
                                int64_t defunc_0_f_res_292417;
                                
                                if (cond_292416) {
                                    defunc_0_f_res_292417 = (int64_t) 0;
                                } else {
                                    int64_t i_292418 = add64(x_292382,
                                                             i_295401);
                                    int64_t defunc_1_add_res_292419 =
                                            add64((int64_t) 1, i_292418);
                                    
                                    defunc_0_f_res_292417 =
                                        defunc_1_add_res_292419;
                                }
                                
                                double defunc_0_f_res_292420;
                                
                                if (cond_292416) {
                                    defunc_0_f_res_292420 = 0.0;
                                } else {
                                    int64_t i_292421 = add64(x_292382,
                                                             i_295401);
                                    double defunc_0_add_arg_292422;
                                    
                                    defunc_0_add_arg_292422 =
                                        ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                          (i_295408 *
                                                                           ctx_param_ext_297848 +
                                                                           i_292421 *
                                                                           ctx_param_ext_297850)];
                                    defunc_0_f_res_292420 =
                                        defunc_0_add_arg_292422;
                                }
                                
                                int64_t binop_p_292423 =
                                        sub64(defunc_0_f_res_292417,
                                              defunc_0_g_res_292386);
                                double defunc_0_f_res_292424 =
                                       sitofp_i64_f64(binop_p_292423);
                                double abs_res_292425 =
                                       fabs(defunc_0_f_res_292424);
                                double tmp1_292426 = abs_res_292425 / x_292383;
                                double x_292427 = tmp1_292426 * tmp1_292426;
                                double y_292428 = tmp1_292426 * x_292427;
                                double tmp2_292429 = 1.0 - y_292428;
                                double x_292430 = tmp2_292429 * tmp2_292429;
                                double tmp3_292431 = tmp2_292429 * x_292430;
                                double tmp4_292432 = defunc_0_f_res_292420 *
                                       tmp3_292431;
                                double defunc_0_f_res_292433;
                                
                                if (cond_292416) {
                                    defunc_0_f_res_292433 = 0.0;
                                } else {
                                    int64_t i_292434 = add64(x_292382,
                                                             i_295401);
                                    double defunc_0_add_arg_292435;
                                    
                                    defunc_0_add_arg_292435 =
                                        ((double *) mem_300252)[i_295408 *
                                                                n_290262 +
                                                                i_292434];
                                    defunc_0_f_res_292433 =
                                        defunc_0_add_arg_292435;
                                }
                                
                                double x_292436 = a0_292410 * tmp4_292432;
                                double defunc_9_fit_fun_res_292437 =
                                       defunc_0_f_res_292433 * x_292436;
                                double defunc_1_op_res_292414 =
                                       defunc_9_fit_fun_res_292437 +
                                       redout_295400;
                                double redout_tmp_304064 =
                                       defunc_1_op_res_292414;
                                
                                redout_295400 = redout_tmp_304064;
                            }
                            defunc_2_reduce_res_292411 = redout_295400;
                            ((double *) mem_300293.mem)[i_295408 *
                                                        l_n_m_290419 +
                                                        i_295404] =
                                defunc_2_reduce_res_292411;
                        }
                    }
                    if (memblock_set(ctx, &ext_mem_300549, &mem_300293,
                                     "mem_300293") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_300541, &mem_300289,
                                     "mem_300289") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300289, "mem_300289") != 0)
                        return 1;
                } else {
                    bool match_lit_292440 = (int64_t) 1 == d_l_290270;
                    struct memblock ext_mem_300533;
                    
                    ext_mem_300533.references = NULL;
                    
                    struct memblock ext_mem_300525;
                    
                    ext_mem_300525.references = NULL;
                    if (match_lit_292440) {
                        struct memblock mem_300340;
                        
                        mem_300340.references = NULL;
                        if (memblock_alloc(ctx, &mem_300340, bytes_297605,
                                           "mem_300340")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_300344;
                        
                        mem_300344.references = NULL;
                        if (memblock_alloc(ctx, &mem_300344, bytes_297605,
                                           "mem_300344")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_295428 = 0; i_295428 <
                             partition_sizze_290353; i_295428++) {
                            for (int64_t i_295421 = 0; i_295421 < l_n_m_290419;
                                 i_295421++) {
                                int64_t x_292453;
                                
                                x_292453 = ((int64_t *) mem_297606)[i_295428 *
                                                                    l_n_m_290419 +
                                                                    i_295421];
                                
                                double x_292454;
                                
                                x_292454 = ((double *) mem_297610)[i_295428 *
                                                                   l_n_m_290419 +
                                                                   i_295421];
                                
                                int64_t min_arg_292455 = mul64(jump_t_290272,
                                                               i_295421);
                                int64_t min_res_292456 = smin64(i_290433,
                                                                min_arg_292455);
                                int64_t defunc_0_g_res_292457 =
                                        add64((int64_t) 1, min_res_292456);
                                double defunc_2_reduce_res_292458;
                                double defunc_2_reduce_res_292459;
                                double defunc_2_reduce_res_292460;
                                double redout_295410;
                                double redout_295411;
                                double redout_295412;
                                
                                redout_295410 = 0.0;
                                redout_295411 = 0.0;
                                redout_295412 = 0.0;
                                for (int64_t i_295413 = 0; i_295413 <
                                     q_l_290267; i_295413++) {
                                    bool cond_292471 = sle64(n_290262,
                                                             i_295413);
                                    int64_t defunc_0_f_res_292472;
                                    
                                    if (cond_292471) {
                                        defunc_0_f_res_292472 = (int64_t) 0;
                                    } else {
                                        int64_t i_292473 = add64(x_292453,
                                                                 i_295413);
                                        int64_t defunc_1_add_res_292474 =
                                                add64((int64_t) 1, i_292473);
                                        
                                        defunc_0_f_res_292472 =
                                            defunc_1_add_res_292474;
                                    }
                                    
                                    double defunc_0_f_res_292475;
                                    
                                    if (cond_292471) {
                                        defunc_0_f_res_292475 = 0.0;
                                    } else {
                                        int64_t i_292476 = add64(x_292453,
                                                                 i_295413);
                                        double defunc_0_add_arg_292477;
                                        
                                        defunc_0_add_arg_292477 =
                                            ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                              (i_295428 *
                                                                               ctx_param_ext_297848 +
                                                                               i_292476 *
                                                                               ctx_param_ext_297850)];
                                        defunc_0_f_res_292475 =
                                            defunc_0_add_arg_292477;
                                    }
                                    
                                    int64_t binop_p_292478 =
                                            sub64(defunc_0_f_res_292472,
                                                  defunc_0_g_res_292457);
                                    double defunc_0_f_res_292479 =
                                           sitofp_i64_f64(binop_p_292478);
                                    double abs_res_292480 =
                                           fabs(defunc_0_f_res_292479);
                                    double tmp1_292481 = abs_res_292480 /
                                           x_292454;
                                    double x_292482 = tmp1_292481 * tmp1_292481;
                                    double y_292483 = tmp1_292481 * x_292482;
                                    double tmp2_292484 = 1.0 - y_292483;
                                    double x_292485 = tmp2_292484 * tmp2_292484;
                                    double tmp3_292486 = tmp2_292484 * x_292485;
                                    double w_j_292487 = defunc_0_f_res_292475 *
                                           tmp3_292486;
                                    double xw_j_292488 = defunc_0_f_res_292479 *
                                           w_j_292487;
                                    double x2w_j_292489 =
                                           defunc_0_f_res_292479 * xw_j_292488;
                                    double defunc_1_op_res_292463 = w_j_292487 +
                                           redout_295410;
                                    double defunc_1_op_res_292466 =
                                           xw_j_292488 + redout_295411;
                                    double defunc_1_op_res_292469 =
                                           x2w_j_292489 + redout_295412;
                                    double redout_tmp_304069 =
                                           defunc_1_op_res_292463;
                                    double redout_tmp_304070 =
                                           defunc_1_op_res_292466;
                                    double redout_tmp_304071 =
                                           defunc_1_op_res_292469;
                                    
                                    redout_295410 = redout_tmp_304069;
                                    redout_295411 = redout_tmp_304070;
                                    redout_295412 = redout_tmp_304071;
                                }
                                defunc_2_reduce_res_292458 = redout_295410;
                                defunc_2_reduce_res_292459 = redout_295411;
                                defunc_2_reduce_res_292460 = redout_295412;
                                
                                double a_292490 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292458;
                                double b_292491 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292459;
                                double c_292492 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292460;
                                double x_292493 = a_292490 * c_292492;
                                double y_292494 = b_292491 * b_292491;
                                double y_292495 = x_292493 - y_292494;
                                double det1_292496 = 1.0 / y_292495;
                                double a11_292497 = c_292492 * det1_292496;
                                double x_292498 = 0.0 - b_292491;
                                double b11_292499 = det1_292496 * x_292498;
                                double c11_292500 = a_292490 * det1_292496;
                                double defunc_2_reduce_res_292501;
                                double defunc_2_reduce_res_292502;
                                double redout_295414;
                                double redout_295415;
                                
                                redout_295414 = 0.0;
                                redout_295415 = 0.0;
                                for (int64_t i_295416 = 0; i_295416 <
                                     q_l_290267; i_295416++) {
                                    bool cond_292510 = sle64(n_290262,
                                                             i_295416);
                                    int64_t defunc_0_f_res_292511;
                                    
                                    if (cond_292510) {
                                        defunc_0_f_res_292511 = (int64_t) 0;
                                    } else {
                                        int64_t i_292512 = add64(x_292453,
                                                                 i_295416);
                                        int64_t defunc_1_add_res_292513 =
                                                add64((int64_t) 1, i_292512);
                                        
                                        defunc_0_f_res_292511 =
                                            defunc_1_add_res_292513;
                                    }
                                    
                                    double defunc_0_f_res_292514;
                                    
                                    if (cond_292510) {
                                        defunc_0_f_res_292514 = 0.0;
                                    } else {
                                        int64_t i_292515 = add64(x_292453,
                                                                 i_295416);
                                        double defunc_0_add_arg_292516;
                                        
                                        defunc_0_add_arg_292516 =
                                            ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                              (i_295428 *
                                                                               ctx_param_ext_297848 +
                                                                               i_292515 *
                                                                               ctx_param_ext_297850)];
                                        defunc_0_f_res_292514 =
                                            defunc_0_add_arg_292516;
                                    }
                                    
                                    int64_t binop_p_292517 =
                                            sub64(defunc_0_f_res_292511,
                                                  defunc_0_g_res_292457);
                                    double defunc_0_f_res_292518 =
                                           sitofp_i64_f64(binop_p_292517);
                                    double abs_res_292519 =
                                           fabs(defunc_0_f_res_292518);
                                    double tmp1_292520 = abs_res_292519 /
                                           x_292454;
                                    double x_292521 = tmp1_292520 * tmp1_292520;
                                    double y_292522 = tmp1_292520 * x_292521;
                                    double tmp2_292523 = 1.0 - y_292522;
                                    double x_292524 = tmp2_292523 * tmp2_292523;
                                    double tmp3_292525 = tmp2_292523 * x_292524;
                                    double tmp4_292526 = defunc_0_f_res_292514 *
                                           tmp3_292525;
                                    double defunc_1_f_res_292527 =
                                           defunc_0_f_res_292518 * tmp4_292526;
                                    double defunc_0_f_res_292528;
                                    
                                    if (cond_292510) {
                                        defunc_0_f_res_292528 = 0.0;
                                    } else {
                                        int64_t i_292529 = add64(x_292453,
                                                                 i_295416);
                                        double defunc_0_add_arg_292530;
                                        
                                        defunc_0_add_arg_292530 =
                                            ((double *) mem_300252)[i_295428 *
                                                                    n_290262 +
                                                                    i_292529];
                                        defunc_0_f_res_292528 =
                                            defunc_0_add_arg_292530;
                                    }
                                    
                                    double x_292531 = a11_292497 * tmp4_292526;
                                    double y_292532 = b11_292499 *
                                           defunc_1_f_res_292527;
                                    double x_292533 = x_292531 + y_292532;
                                    double defunc_9_fit_fun_res_292534 =
                                           defunc_0_f_res_292528 * x_292533;
                                    double x_292535 = b11_292499 * tmp4_292526;
                                    double y_292536 = c11_292500 *
                                           defunc_1_f_res_292527;
                                    double x_292537 = x_292535 + y_292536;
                                    double defunc_9_slope_fun_res_292538 =
                                           defunc_0_f_res_292528 * x_292537;
                                    double defunc_1_op_res_292505 =
                                           defunc_9_fit_fun_res_292534 +
                                           redout_295414;
                                    double defunc_1_op_res_292508 =
                                           defunc_9_slope_fun_res_292538 +
                                           redout_295415;
                                    double redout_tmp_304072 =
                                           defunc_1_op_res_292505;
                                    double redout_tmp_304073 =
                                           defunc_1_op_res_292508;
                                    
                                    redout_295414 = redout_tmp_304072;
                                    redout_295415 = redout_tmp_304073;
                                }
                                defunc_2_reduce_res_292501 = redout_295414;
                                defunc_2_reduce_res_292502 = redout_295415;
                                ((double *) mem_300340.mem)[i_295428 *
                                                            l_n_m_290419 +
                                                            i_295421] =
                                    defunc_2_reduce_res_292501;
                                ((double *) mem_300344.mem)[i_295428 *
                                                            l_n_m_290419 +
                                                            i_295421] =
                                    defunc_2_reduce_res_292502;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_300533, &mem_300340,
                                         "mem_300340") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_300525, &mem_300344,
                                         "mem_300344") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300344, "mem_300344") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300340, "mem_300340") != 0)
                            return 1;
                    } else {
                        struct memblock mem_300434;
                        
                        mem_300434.references = NULL;
                        if (memblock_alloc(ctx, &mem_300434, bytes_297605,
                                           "mem_300434")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_300438;
                        
                        mem_300438.references = NULL;
                        if (memblock_alloc(ctx, &mem_300438, bytes_297605,
                                           "mem_300438")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_295451 = 0; i_295451 <
                             partition_sizze_290353; i_295451++) {
                            for (int64_t i_295444 = 0; i_295444 < l_n_m_290419;
                                 i_295444++) {
                                int64_t x_292551;
                                
                                x_292551 = ((int64_t *) mem_297606)[i_295451 *
                                                                    l_n_m_290419 +
                                                                    i_295444];
                                
                                double x_292552;
                                
                                x_292552 = ((double *) mem_297610)[i_295451 *
                                                                   l_n_m_290419 +
                                                                   i_295444];
                                
                                int64_t min_arg_292553 = mul64(jump_t_290272,
                                                               i_295444);
                                int64_t min_res_292554 = smin64(i_290433,
                                                                min_arg_292553);
                                int64_t defunc_0_g_res_292555 =
                                        add64((int64_t) 1, min_res_292554);
                                double defunc_2_reduce_res_292556;
                                double defunc_2_reduce_res_292557;
                                double defunc_2_reduce_res_292558;
                                double defunc_2_reduce_res_292559;
                                double defunc_2_reduce_res_292560;
                                double redout_295431;
                                double redout_295432;
                                double redout_295433;
                                double redout_295434;
                                double redout_295435;
                                
                                redout_295431 = 0.0;
                                redout_295432 = 0.0;
                                redout_295433 = 0.0;
                                redout_295434 = 0.0;
                                redout_295435 = 0.0;
                                for (int64_t i_295436 = 0; i_295436 <
                                     q_l_290267; i_295436++) {
                                    bool cond_292577 = sle64(n_290262,
                                                             i_295436);
                                    int64_t defunc_0_f_res_292578;
                                    
                                    if (cond_292577) {
                                        defunc_0_f_res_292578 = (int64_t) 0;
                                    } else {
                                        int64_t i_292579 = add64(x_292551,
                                                                 i_295436);
                                        int64_t defunc_1_add_res_292580 =
                                                add64((int64_t) 1, i_292579);
                                        
                                        defunc_0_f_res_292578 =
                                            defunc_1_add_res_292580;
                                    }
                                    
                                    double defunc_0_f_res_292581;
                                    
                                    if (cond_292577) {
                                        defunc_0_f_res_292581 = 0.0;
                                    } else {
                                        int64_t i_292582 = add64(x_292551,
                                                                 i_295436);
                                        double defunc_0_add_arg_292583;
                                        
                                        defunc_0_add_arg_292583 =
                                            ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                              (i_295451 *
                                                                               ctx_param_ext_297848 +
                                                                               i_292582 *
                                                                               ctx_param_ext_297850)];
                                        defunc_0_f_res_292581 =
                                            defunc_0_add_arg_292583;
                                    }
                                    
                                    int64_t binop_p_292584 =
                                            sub64(defunc_0_f_res_292578,
                                                  defunc_0_g_res_292555);
                                    double defunc_0_f_res_292585 =
                                           sitofp_i64_f64(binop_p_292584);
                                    double abs_res_292586 =
                                           fabs(defunc_0_f_res_292585);
                                    double tmp1_292587 = abs_res_292586 /
                                           x_292552;
                                    double x_292588 = tmp1_292587 * tmp1_292587;
                                    double y_292589 = tmp1_292587 * x_292588;
                                    double tmp2_292590 = 1.0 - y_292589;
                                    double x_292591 = tmp2_292590 * tmp2_292590;
                                    double tmp3_292592 = tmp2_292590 * x_292591;
                                    double w_j_292593 = defunc_0_f_res_292581 *
                                           tmp3_292592;
                                    double xw_j_292594 = defunc_0_f_res_292585 *
                                           w_j_292593;
                                    double x2w_j_292595 =
                                           defunc_0_f_res_292585 * xw_j_292594;
                                    double x3w_j_292596 =
                                           defunc_0_f_res_292585 * x2w_j_292595;
                                    double x4w_j_292597 =
                                           defunc_0_f_res_292585 * x3w_j_292596;
                                    double defunc_1_op_res_292563 = w_j_292593 +
                                           redout_295431;
                                    double defunc_1_op_res_292566 =
                                           xw_j_292594 + redout_295432;
                                    double defunc_1_op_res_292569 =
                                           x2w_j_292595 + redout_295433;
                                    double defunc_1_op_res_292572 =
                                           x3w_j_292596 + redout_295434;
                                    double defunc_1_op_res_292575 =
                                           x4w_j_292597 + redout_295435;
                                    double redout_tmp_304078 =
                                           defunc_1_op_res_292563;
                                    double redout_tmp_304079 =
                                           defunc_1_op_res_292566;
                                    double redout_tmp_304080 =
                                           defunc_1_op_res_292569;
                                    double redout_tmp_304081 =
                                           defunc_1_op_res_292572;
                                    double redout_tmp_304082 =
                                           defunc_1_op_res_292575;
                                    
                                    redout_295431 = redout_tmp_304078;
                                    redout_295432 = redout_tmp_304079;
                                    redout_295433 = redout_tmp_304080;
                                    redout_295434 = redout_tmp_304081;
                                    redout_295435 = redout_tmp_304082;
                                }
                                defunc_2_reduce_res_292556 = redout_295431;
                                defunc_2_reduce_res_292557 = redout_295432;
                                defunc_2_reduce_res_292558 = redout_295433;
                                defunc_2_reduce_res_292559 = redout_295434;
                                defunc_2_reduce_res_292560 = redout_295435;
                                
                                double a_292598 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292556;
                                double b_292599 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292557;
                                double c_292600 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292558;
                                double d_292601 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292559;
                                double e_292602 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292560;
                                double x_292603 = c_292600 * e_292602;
                                double y_292604 = d_292601 * d_292601;
                                double a12_292605 = x_292603 - y_292604;
                                double x_292606 = c_292600 * d_292601;
                                double y_292607 = b_292599 * e_292602;
                                double b12_292608 = x_292606 - y_292607;
                                double x_292609 = b_292599 * d_292601;
                                double y_292610 = c_292600 * c_292600;
                                double c12_292611 = x_292609 - y_292610;
                                double x_292612 = a_292598 * e_292602;
                                double b2_292613 = x_292612 - y_292610;
                                double x_292614 = b_292599 * c_292600;
                                double y_292615 = a_292598 * d_292601;
                                double c2_292616 = x_292614 - y_292615;
                                double x_292617 = a_292598 * a12_292605;
                                double y_292618 = b_292599 * b12_292608;
                                double x_292619 = x_292617 + y_292618;
                                double y_292620 = c_292600 * c12_292611;
                                double y_292621 = x_292619 + y_292620;
                                double det_292622 = 1.0 / y_292621;
                                double a12_292623 = a12_292605 * det_292622;
                                double b12_292624 = b12_292608 * det_292622;
                                double c12_292625 = c12_292611 * det_292622;
                                double b2_292626 = b2_292613 * det_292622;
                                double c2_292627 = c2_292616 * det_292622;
                                double defunc_2_reduce_res_292628;
                                double defunc_2_reduce_res_292629;
                                double redout_295437;
                                double redout_295438;
                                
                                redout_295437 = 0.0;
                                redout_295438 = 0.0;
                                for (int64_t i_295439 = 0; i_295439 <
                                     q_l_290267; i_295439++) {
                                    bool cond_292637 = sle64(n_290262,
                                                             i_295439);
                                    int64_t defunc_0_f_res_292638;
                                    
                                    if (cond_292637) {
                                        defunc_0_f_res_292638 = (int64_t) 0;
                                    } else {
                                        int64_t i_292639 = add64(x_292551,
                                                                 i_295439);
                                        int64_t defunc_1_add_res_292640 =
                                                add64((int64_t) 1, i_292639);
                                        
                                        defunc_0_f_res_292638 =
                                            defunc_1_add_res_292640;
                                    }
                                    
                                    double defunc_0_f_res_292641;
                                    
                                    if (cond_292637) {
                                        defunc_0_f_res_292641 = 0.0;
                                    } else {
                                        int64_t i_292642 = add64(x_292551,
                                                                 i_295439);
                                        double defunc_0_add_arg_292643;
                                        
                                        defunc_0_add_arg_292643 =
                                            ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                              (i_295451 *
                                                                               ctx_param_ext_297848 +
                                                                               i_292642 *
                                                                               ctx_param_ext_297850)];
                                        defunc_0_f_res_292641 =
                                            defunc_0_add_arg_292643;
                                    }
                                    
                                    int64_t binop_p_292644 =
                                            sub64(defunc_0_f_res_292638,
                                                  defunc_0_g_res_292555);
                                    double defunc_0_f_res_292645 =
                                           sitofp_i64_f64(binop_p_292644);
                                    double abs_res_292646 =
                                           fabs(defunc_0_f_res_292645);
                                    double tmp1_292647 = abs_res_292646 /
                                           x_292552;
                                    double x_292648 = tmp1_292647 * tmp1_292647;
                                    double y_292649 = tmp1_292647 * x_292648;
                                    double tmp2_292650 = 1.0 - y_292649;
                                    double x_292651 = tmp2_292650 * tmp2_292650;
                                    double tmp3_292652 = tmp2_292650 * x_292651;
                                    double tmp4_292653 = defunc_0_f_res_292641 *
                                           tmp3_292652;
                                    double defunc_1_f_res_292654 =
                                           defunc_0_f_res_292645 * tmp4_292653;
                                    double defunc_1_f_res_292655 =
                                           defunc_0_f_res_292645 *
                                           defunc_1_f_res_292654;
                                    double defunc_0_f_res_292656;
                                    
                                    if (cond_292637) {
                                        defunc_0_f_res_292656 = 0.0;
                                    } else {
                                        int64_t i_292657 = add64(x_292551,
                                                                 i_295439);
                                        double defunc_0_add_arg_292658;
                                        
                                        defunc_0_add_arg_292658 =
                                            ((double *) mem_300252)[i_295451 *
                                                                    n_290262 +
                                                                    i_292657];
                                        defunc_0_f_res_292656 =
                                            defunc_0_add_arg_292658;
                                    }
                                    
                                    double x_292659 = a12_292623 * tmp4_292653;
                                    double y_292660 = b12_292624 *
                                           defunc_1_f_res_292654;
                                    double x_292661 = x_292659 + y_292660;
                                    double y_292662 = c12_292625 *
                                           defunc_1_f_res_292655;
                                    double x_292663 = x_292661 + y_292662;
                                    double defunc_9_fit_fun_res_292664 =
                                           defunc_0_f_res_292656 * x_292663;
                                    double x_292665 = b12_292624 * tmp4_292653;
                                    double y_292666 = b2_292626 *
                                           defunc_1_f_res_292654;
                                    double x_292667 = x_292665 + y_292666;
                                    double y_292668 = c2_292627 *
                                           defunc_1_f_res_292655;
                                    double x_292669 = x_292667 + y_292668;
                                    double defunc_9_slope_fun_res_292670 =
                                           defunc_0_f_res_292656 * x_292669;
                                    double defunc_1_op_res_292632 =
                                           defunc_9_fit_fun_res_292664 +
                                           redout_295437;
                                    double defunc_1_op_res_292635 =
                                           defunc_9_slope_fun_res_292670 +
                                           redout_295438;
                                    double redout_tmp_304083 =
                                           defunc_1_op_res_292632;
                                    double redout_tmp_304084 =
                                           defunc_1_op_res_292635;
                                    
                                    redout_295437 = redout_tmp_304083;
                                    redout_295438 = redout_tmp_304084;
                                }
                                defunc_2_reduce_res_292628 = redout_295437;
                                defunc_2_reduce_res_292629 = redout_295438;
                                ((double *) mem_300434.mem)[i_295451 *
                                                            l_n_m_290419 +
                                                            i_295444] =
                                    defunc_2_reduce_res_292628;
                                ((double *) mem_300438.mem)[i_295451 *
                                                            l_n_m_290419 +
                                                            i_295444] =
                                    defunc_2_reduce_res_292629;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_300533, &mem_300434,
                                         "mem_300434") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_300525, &mem_300438,
                                         "mem_300438") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300438, "mem_300438") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300434, "mem_300434") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_300549, &ext_mem_300533,
                                     "ext_mem_300533") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_300541, &ext_mem_300525,
                                     "ext_mem_300525") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_300525,
                                       "ext_mem_300525") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_300533,
                                       "ext_mem_300533") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_301228, &ext_mem_300549,
                                 "ext_mem_300549") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_301220, &ext_mem_300541,
                                 "ext_mem_300541") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_300541, "ext_mem_300541") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_300549, "ext_mem_300549") != 0)
                    return 1;
            } else {
                bool cond_292673 = sle64(jump_threshold_2_290277,
                                         jump_l_290273);
                bool cond_t_res_292674 = slt64(q_l_290267,
                                               q_threshold_1_290278);
                bool x_292675 = cond_292673 && cond_t_res_292674;
                struct memblock ext_mem_301212;
                
                ext_mem_301212.references = NULL;
                
                struct memblock ext_mem_301204;
                
                ext_mem_301204.references = NULL;
                if (x_292675) {
                    bool match_lit_292678 = (int64_t) 0 == d_l_290270;
                    int64_t binop_y_300586 = (int64_t) 8 * q_l_290267;
                    int64_t bytes_300587 = smax64((int64_t) 0, binop_y_300586);
                    struct memblock ext_mem_300925;
                    
                    ext_mem_300925.references = NULL;
                    
                    struct memblock ext_mem_300917;
                    
                    ext_mem_300917.references = NULL;
                    if (match_lit_292678) {
                        struct memblock mem_300560;
                        
                        mem_300560.references = NULL;
                        if (memblock_alloc(ctx, &mem_300560, bytes_297605,
                                           "mem_300560")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_304085 = 0; i_304085 <
                             partition_sizze_290353; i_304085++) {
                            for (int64_t i_304086 = 0; i_304086 < l_n_m_290419;
                                 i_304086++) {
                                ((double *) mem_300560.mem)[i_304085 *
                                                            l_n_m_290419 +
                                                            i_304086] = 0.0;
                            }
                        }
                        
                        struct memblock mem_300564;
                        
                        mem_300564.references = NULL;
                        if (memblock_alloc(ctx, &mem_300564, bytes_297605,
                                           "mem_300564")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_300588_cached_sizze_304390 <
                            (size_t) bytes_300587) {
                            mem_300588 = realloc(mem_300588, bytes_300587);
                            mem_300588_cached_sizze_304390 = bytes_300587;
                        }
                        for (int64_t i_295467 = 0; i_295467 <
                             partition_sizze_290353; i_295467++) {
                            for (int64_t i_295463 = 0; i_295463 < l_n_m_290419;
                                 i_295463++) {
                                int64_t x_292690;
                                
                                x_292690 = ((int64_t *) mem_297606)[i_295467 *
                                                                    l_n_m_290419 +
                                                                    i_295463];
                                
                                double x_292691;
                                
                                x_292691 = ((double *) mem_297610)[i_295467 *
                                                                   l_n_m_290419 +
                                                                   i_295463];
                                
                                int64_t min_arg_292692 = mul64(jump_t_290272,
                                                               i_295463);
                                int64_t min_res_292693 = smin64(i_290433,
                                                                min_arg_292692);
                                int64_t defunc_0_g_res_292694 =
                                        add64((int64_t) 1, min_res_292693);
                                double defunc_2_reduce_res_292695;
                                double redout_295455 = 0.0;
                                
                                for (int64_t i_295457 = 0; i_295457 <
                                     q_l_290267; i_295457++) {
                                    bool cond_292701 = sle64(n_290262,
                                                             i_295457);
                                    int64_t defunc_0_f_res_292702;
                                    
                                    if (cond_292701) {
                                        defunc_0_f_res_292702 = (int64_t) 0;
                                    } else {
                                        int64_t i_292703 = add64(x_292690,
                                                                 i_295457);
                                        int64_t defunc_1_add_res_292704 =
                                                add64((int64_t) 1, i_292703);
                                        
                                        defunc_0_f_res_292702 =
                                            defunc_1_add_res_292704;
                                    }
                                    
                                    double defunc_0_f_res_292705;
                                    
                                    if (cond_292701) {
                                        defunc_0_f_res_292705 = 0.0;
                                    } else {
                                        int64_t i_292706 = add64(x_292690,
                                                                 i_295457);
                                        double defunc_0_add_arg_292707;
                                        
                                        defunc_0_add_arg_292707 =
                                            ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                              (i_295467 *
                                                                               ctx_param_ext_297848 +
                                                                               i_292706 *
                                                                               ctx_param_ext_297850)];
                                        defunc_0_f_res_292705 =
                                            defunc_0_add_arg_292707;
                                    }
                                    
                                    int64_t binop_p_292708 =
                                            sub64(defunc_0_f_res_292702,
                                                  defunc_0_g_res_292694);
                                    double defunc_0_f_res_292709 =
                                           sitofp_i64_f64(binop_p_292708);
                                    double abs_res_292710 =
                                           fabs(defunc_0_f_res_292709);
                                    double tmp1_292711 = abs_res_292710 /
                                           x_292691;
                                    double x_292712 = tmp1_292711 * tmp1_292711;
                                    double y_292713 = tmp1_292711 * x_292712;
                                    double tmp2_292714 = 1.0 - y_292713;
                                    double x_292715 = tmp2_292714 * tmp2_292714;
                                    double tmp3_292716 = tmp2_292714 * x_292715;
                                    double tmp4_292717 = defunc_0_f_res_292705 *
                                           tmp3_292716;
                                    double defunc_1_op_res_292699 =
                                           tmp4_292717 + redout_295455;
                                    
                                    ((double *) mem_300588)[i_295457] =
                                        tmp4_292717;
                                    
                                    double redout_tmp_304089 =
                                           defunc_1_op_res_292699;
                                    
                                    redout_295455 = redout_tmp_304089;
                                }
                                defunc_2_reduce_res_292695 = redout_295455;
                                
                                double a_292718 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292695;
                                double a0_292719 = 1.0 / a_292718;
                                double defunc_2_reduce_res_292720;
                                double redout_295459 = 0.0;
                                
                                for (int64_t i_295460 = 0; i_295460 <
                                     q_l_290267; i_295460++) {
                                    double x_292725;
                                    
                                    x_292725 =
                                        ((double *) mem_300588)[i_295460];
                                    
                                    bool cond_292726 = sle64(n_290262,
                                                             i_295460);
                                    double defunc_0_f_res_292727;
                                    
                                    if (cond_292726) {
                                        defunc_0_f_res_292727 = 0.0;
                                    } else {
                                        int64_t i_292728 = add64(x_292690,
                                                                 i_295460);
                                        double defunc_0_add_arg_292729;
                                        
                                        defunc_0_add_arg_292729 =
                                            ((double *) mem_300252)[i_295467 *
                                                                    n_290262 +
                                                                    i_292728];
                                        defunc_0_f_res_292727 =
                                            defunc_0_add_arg_292729;
                                    }
                                    
                                    double x_292730 = a0_292719 * x_292725;
                                    double defunc_9_fit_fun_res_292731 =
                                           defunc_0_f_res_292727 * x_292730;
                                    double defunc_1_op_res_292723 =
                                           defunc_9_fit_fun_res_292731 +
                                           redout_295459;
                                    double redout_tmp_304091 =
                                           defunc_1_op_res_292723;
                                    
                                    redout_295459 = redout_tmp_304091;
                                }
                                defunc_2_reduce_res_292720 = redout_295459;
                                ((double *) mem_300564.mem)[i_295467 *
                                                            l_n_m_290419 +
                                                            i_295463] =
                                    defunc_2_reduce_res_292720;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_300925, &mem_300564,
                                         "mem_300564") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_300917, &mem_300560,
                                         "mem_300560") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300564, "mem_300564") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300560, "mem_300560") != 0)
                            return 1;
                    } else {
                        bool match_lit_292734 = (int64_t) 1 == d_l_290270;
                        int64_t binop_y_300673 = (int64_t) 8 * q_l_290267;
                        int64_t bytes_300674 = smax64((int64_t) 0,
                                                      binop_y_300673);
                        int64_t binop_y_300797 = (int64_t) 8 * q_l_290267;
                        int64_t bytes_300798 = smax64((int64_t) 0,
                                                      binop_y_300797);
                        struct memblock ext_mem_300909;
                        
                        ext_mem_300909.references = NULL;
                        
                        struct memblock ext_mem_300901;
                        
                        ext_mem_300901.references = NULL;
                        if (match_lit_292734) {
                            struct memblock mem_300626;
                            
                            mem_300626.references = NULL;
                            if (memblock_alloc(ctx, &mem_300626, bytes_297605,
                                               "mem_300626")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_300630;
                            
                            mem_300630.references = NULL;
                            if (memblock_alloc(ctx, &mem_300630, bytes_297605,
                                               "mem_300630")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_300675_cached_sizze_304391 <
                                (size_t) bytes_300674) {
                                mem_300675 = realloc(mem_300675, bytes_300674);
                                mem_300675_cached_sizze_304391 = bytes_300674;
                            }
                            if (mem_300678_cached_sizze_304392 <
                                (size_t) bytes_300674) {
                                mem_300678 = realloc(mem_300678, bytes_300674);
                                mem_300678_cached_sizze_304392 = bytes_300674;
                            }
                            for (int64_t i_295493 = 0; i_295493 <
                                 partition_sizze_290353; i_295493++) {
                                for (int64_t i_295486 = 0; i_295486 <
                                     l_n_m_290419; i_295486++) {
                                    int64_t x_292747;
                                    
                                    x_292747 =
                                        ((int64_t *) mem_297606)[i_295493 *
                                                                 l_n_m_290419 +
                                                                 i_295486];
                                    
                                    double x_292748;
                                    
                                    x_292748 =
                                        ((double *) mem_297610)[i_295493 *
                                                                l_n_m_290419 +
                                                                i_295486];
                                    
                                    int64_t min_arg_292749 =
                                            mul64(jump_t_290272, i_295486);
                                    int64_t min_res_292750 = smin64(i_290433,
                                                                    min_arg_292749);
                                    int64_t defunc_0_g_res_292751 =
                                            add64((int64_t) 1, min_res_292750);
                                    double defunc_2_reduce_res_292774;
                                    double defunc_2_reduce_res_292775;
                                    double defunc_2_reduce_res_292776;
                                    double redout_295471;
                                    double redout_295472;
                                    double redout_295473;
                                    
                                    redout_295471 = 0.0;
                                    redout_295472 = 0.0;
                                    redout_295473 = 0.0;
                                    for (int64_t i_295476 = 0; i_295476 <
                                         q_l_290267; i_295476++) {
                                        bool cond_292789 = sle64(n_290262,
                                                                 i_295476);
                                        int64_t defunc_0_f_res_292790;
                                        
                                        if (cond_292789) {
                                            defunc_0_f_res_292790 = (int64_t) 0;
                                        } else {
                                            int64_t i_292791 = add64(x_292747,
                                                                     i_295476);
                                            int64_t defunc_1_add_res_292792 =
                                                    add64((int64_t) 1,
                                                          i_292791);
                                            
                                            defunc_0_f_res_292790 =
                                                defunc_1_add_res_292792;
                                        }
                                        
                                        double defunc_0_f_res_292793;
                                        
                                        if (cond_292789) {
                                            defunc_0_f_res_292793 = 0.0;
                                        } else {
                                            int64_t i_292794 = add64(x_292747,
                                                                     i_295476);
                                            double defunc_0_add_arg_292795;
                                            
                                            defunc_0_add_arg_292795 =
                                                ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                                  (i_295493 *
                                                                                   ctx_param_ext_297848 +
                                                                                   i_292794 *
                                                                                   ctx_param_ext_297850)];
                                            defunc_0_f_res_292793 =
                                                defunc_0_add_arg_292795;
                                        }
                                        
                                        int64_t binop_p_292796 =
                                                sub64(defunc_0_f_res_292790,
                                                      defunc_0_g_res_292751);
                                        double defunc_0_f_res_292797 =
                                               sitofp_i64_f64(binop_p_292796);
                                        double abs_res_292798 =
                                               fabs(defunc_0_f_res_292797);
                                        double tmp1_292799 = abs_res_292798 /
                                               x_292748;
                                        double x_292800 = tmp1_292799 *
                                               tmp1_292799;
                                        double y_292801 = tmp1_292799 *
                                               x_292800;
                                        double tmp2_292802 = 1.0 - y_292801;
                                        double x_292803 = tmp2_292802 *
                                               tmp2_292802;
                                        double tmp3_292804 = tmp2_292802 *
                                               x_292803;
                                        double tmp4_292805 =
                                               defunc_0_f_res_292793 *
                                               tmp3_292804;
                                        double defunc_1_f_res_292806 =
                                               defunc_0_f_res_292797 *
                                               tmp4_292805;
                                        double defunc_1_f_res_292807 =
                                               defunc_0_f_res_292797 *
                                               defunc_1_f_res_292806;
                                        double defunc_1_op_res_292781 =
                                               tmp4_292805 + redout_295471;
                                        double defunc_1_op_res_292784 =
                                               defunc_1_f_res_292806 +
                                               redout_295472;
                                        double defunc_1_op_res_292787 =
                                               defunc_1_f_res_292807 +
                                               redout_295473;
                                        
                                        ((double *) mem_300675)[i_295476] =
                                            defunc_1_f_res_292806;
                                        ((double *) mem_300678)[i_295476] =
                                            tmp4_292805;
                                        
                                        double redout_tmp_304096 =
                                               defunc_1_op_res_292781;
                                        double redout_tmp_304097 =
                                               defunc_1_op_res_292784;
                                        double redout_tmp_304098 =
                                               defunc_1_op_res_292787;
                                        
                                        redout_295471 = redout_tmp_304096;
                                        redout_295472 = redout_tmp_304097;
                                        redout_295473 = redout_tmp_304098;
                                    }
                                    defunc_2_reduce_res_292774 = redout_295471;
                                    defunc_2_reduce_res_292775 = redout_295472;
                                    defunc_2_reduce_res_292776 = redout_295473;
                                    
                                    double a_292813 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292774;
                                    double b_292814 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292775;
                                    double c_292815 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292776;
                                    double x_292816 = a_292813 * c_292815;
                                    double y_292817 = b_292814 * b_292814;
                                    double y_292818 = x_292816 - y_292817;
                                    double det1_292819 = 1.0 / y_292818;
                                    double a11_292820 = c_292815 * det1_292819;
                                    double x_292821 = 0.0 - b_292814;
                                    double b11_292822 = det1_292819 * x_292821;
                                    double c11_292823 = a_292813 * det1_292819;
                                    double defunc_2_reduce_res_292824;
                                    double defunc_2_reduce_res_292825;
                                    double redout_295479;
                                    double redout_295480;
                                    
                                    redout_295479 = 0.0;
                                    redout_295480 = 0.0;
                                    for (int64_t i_295481 = 0; i_295481 <
                                         q_l_290267; i_295481++) {
                                        double x_292833;
                                        
                                        x_292833 =
                                            ((double *) mem_300678)[i_295481];
                                        
                                        double x_292834;
                                        
                                        x_292834 =
                                            ((double *) mem_300675)[i_295481];
                                        
                                        bool cond_292835 = sle64(n_290262,
                                                                 i_295481);
                                        double defunc_0_f_res_292836;
                                        
                                        if (cond_292835) {
                                            defunc_0_f_res_292836 = 0.0;
                                        } else {
                                            int64_t i_292837 = add64(x_292747,
                                                                     i_295481);
                                            double defunc_0_add_arg_292838;
                                            
                                            defunc_0_add_arg_292838 =
                                                ((double *) mem_300252)[i_295493 *
                                                                        n_290262 +
                                                                        i_292837];
                                            defunc_0_f_res_292836 =
                                                defunc_0_add_arg_292838;
                                        }
                                        
                                        double x_292839 = a11_292820 * x_292833;
                                        double y_292840 = b11_292822 * x_292834;
                                        double x_292841 = x_292839 + y_292840;
                                        double defunc_9_fit_fun_res_292842 =
                                               defunc_0_f_res_292836 * x_292841;
                                        double x_292843 = b11_292822 * x_292833;
                                        double y_292844 = c11_292823 * x_292834;
                                        double x_292845 = x_292843 + y_292844;
                                        double defunc_9_slope_fun_res_292846 =
                                               defunc_0_f_res_292836 * x_292845;
                                        double defunc_1_op_res_292828 =
                                               defunc_9_fit_fun_res_292842 +
                                               redout_295479;
                                        double defunc_1_op_res_292831 =
                                               defunc_9_slope_fun_res_292846 +
                                               redout_295480;
                                        double redout_tmp_304101 =
                                               defunc_1_op_res_292828;
                                        double redout_tmp_304102 =
                                               defunc_1_op_res_292831;
                                        
                                        redout_295479 = redout_tmp_304101;
                                        redout_295480 = redout_tmp_304102;
                                    }
                                    defunc_2_reduce_res_292824 = redout_295479;
                                    defunc_2_reduce_res_292825 = redout_295480;
                                    ((double *) mem_300626.mem)[i_295493 *
                                                                l_n_m_290419 +
                                                                i_295486] =
                                        defunc_2_reduce_res_292824;
                                    ((double *) mem_300630.mem)[i_295493 *
                                                                l_n_m_290419 +
                                                                i_295486] =
                                        defunc_2_reduce_res_292825;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_300909, &mem_300626,
                                             "mem_300626") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_300901, &mem_300630,
                                             "mem_300630") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300630,
                                               "mem_300630") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300626,
                                               "mem_300626") != 0)
                                return 1;
                        } else {
                            struct memblock mem_300750;
                            
                            mem_300750.references = NULL;
                            if (memblock_alloc(ctx, &mem_300750, bytes_297605,
                                               "mem_300750")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_300754;
                            
                            mem_300754.references = NULL;
                            if (memblock_alloc(ctx, &mem_300754, bytes_297605,
                                               "mem_300754")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_300799_cached_sizze_304393 <
                                (size_t) bytes_300798) {
                                mem_300799 = realloc(mem_300799, bytes_300798);
                                mem_300799_cached_sizze_304393 = bytes_300798;
                            }
                            if (mem_300802_cached_sizze_304394 <
                                (size_t) bytes_300798) {
                                mem_300802 = realloc(mem_300802, bytes_300798);
                                mem_300802_cached_sizze_304394 = bytes_300798;
                            }
                            if (mem_300829_cached_sizze_304395 <
                                (size_t) bytes_300798) {
                                mem_300829 = realloc(mem_300829, bytes_300798);
                                mem_300829_cached_sizze_304395 = bytes_300798;
                            }
                            if (mem_300832_cached_sizze_304396 <
                                (size_t) bytes_300798) {
                                mem_300832 = realloc(mem_300832, bytes_300798);
                                mem_300832_cached_sizze_304396 = bytes_300798;
                            }
                            for (int64_t i_295529 = 0; i_295529 <
                                 partition_sizze_290353; i_295529++) {
                                for (int64_t i_295522 = 0; i_295522 <
                                     l_n_m_290419; i_295522++) {
                                    int64_t x_292859;
                                    
                                    x_292859 =
                                        ((int64_t *) mem_297606)[i_295529 *
                                                                 l_n_m_290419 +
                                                                 i_295522];
                                    
                                    double x_292860;
                                    
                                    x_292860 =
                                        ((double *) mem_297610)[i_295529 *
                                                                l_n_m_290419 +
                                                                i_295522];
                                    
                                    int64_t min_arg_292861 =
                                            mul64(jump_t_290272, i_295522);
                                    int64_t min_res_292862 = smin64(i_290433,
                                                                    min_arg_292861);
                                    int64_t defunc_0_g_res_292863 =
                                            add64((int64_t) 1, min_res_292862);
                                    
                                    for (int64_t i_295500 = 0; i_295500 <
                                         q_l_290267; i_295500++) {
                                        bool cond_292867 = sle64(n_290262,
                                                                 i_295500);
                                        int64_t defunc_0_f_res_292868;
                                        
                                        if (cond_292867) {
                                            defunc_0_f_res_292868 = (int64_t) 0;
                                        } else {
                                            int64_t i_292869 = add64(x_292859,
                                                                     i_295500);
                                            int64_t defunc_1_add_res_292870 =
                                                    add64((int64_t) 1,
                                                          i_292869);
                                            
                                            defunc_0_f_res_292868 =
                                                defunc_1_add_res_292870;
                                        }
                                        
                                        double defunc_0_f_res_292871;
                                        
                                        if (cond_292867) {
                                            defunc_0_f_res_292871 = 0.0;
                                        } else {
                                            int64_t i_292872 = add64(x_292859,
                                                                     i_295500);
                                            double defunc_0_add_arg_292873;
                                            
                                            defunc_0_add_arg_292873 =
                                                ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                                  (i_295529 *
                                                                                   ctx_param_ext_297848 +
                                                                                   i_292872 *
                                                                                   ctx_param_ext_297850)];
                                            defunc_0_f_res_292871 =
                                                defunc_0_add_arg_292873;
                                        }
                                        
                                        int64_t binop_p_292874 =
                                                sub64(defunc_0_f_res_292868,
                                                      defunc_0_g_res_292863);
                                        double defunc_0_f_res_292875 =
                                               sitofp_i64_f64(binop_p_292874);
                                        double abs_res_292876 =
                                               fabs(defunc_0_f_res_292875);
                                        double tmp1_292877 = abs_res_292876 /
                                               x_292860;
                                        double x_292878 = tmp1_292877 *
                                               tmp1_292877;
                                        double y_292879 = tmp1_292877 *
                                               x_292878;
                                        double tmp2_292880 = 1.0 - y_292879;
                                        double x_292881 = tmp2_292880 *
                                               tmp2_292880;
                                        double tmp3_292882 = tmp2_292880 *
                                               x_292881;
                                        double tmp4_292883 =
                                               defunc_0_f_res_292871 *
                                               tmp3_292882;
                                        
                                        ((double *) mem_300799)[i_295500] =
                                            defunc_0_f_res_292875;
                                        ((double *) mem_300802)[i_295500] =
                                            tmp4_292883;
                                    }
                                    
                                    double defunc_2_reduce_res_292890;
                                    double defunc_2_reduce_res_292891;
                                    double defunc_2_reduce_res_292892;
                                    double defunc_2_reduce_res_292893;
                                    double defunc_2_reduce_res_292894;
                                    double redout_295505;
                                    double redout_295506;
                                    double redout_295507;
                                    double redout_295508;
                                    double redout_295509;
                                    
                                    redout_295505 = 0.0;
                                    redout_295506 = 0.0;
                                    redout_295507 = 0.0;
                                    redout_295508 = 0.0;
                                    redout_295509 = 0.0;
                                    for (int64_t i_295512 = 0; i_295512 <
                                         q_l_290267; i_295512++) {
                                        double x_292912;
                                        
                                        x_292912 =
                                            ((double *) mem_300799)[i_295512];
                                        
                                        double x_292913;
                                        
                                        x_292913 =
                                            ((double *) mem_300802)[i_295512];
                                        
                                        double defunc_1_f_res_292914 =
                                               x_292912 * x_292913;
                                        double defunc_1_f_res_292915 =
                                               x_292912 * defunc_1_f_res_292914;
                                        double defunc_1_f_res_292916 =
                                               x_292912 * defunc_1_f_res_292915;
                                        double defunc_1_f_res_292917 =
                                               x_292912 * defunc_1_f_res_292916;
                                        double defunc_1_op_res_292899 =
                                               x_292913 + redout_295505;
                                        double defunc_1_op_res_292902 =
                                               defunc_1_f_res_292914 +
                                               redout_295506;
                                        double defunc_1_op_res_292905 =
                                               defunc_1_f_res_292915 +
                                               redout_295507;
                                        double defunc_1_op_res_292908 =
                                               defunc_1_f_res_292916 +
                                               redout_295508;
                                        double defunc_1_op_res_292911 =
                                               defunc_1_f_res_292917 +
                                               redout_295509;
                                        
                                        ((double *) mem_300829)[i_295512] =
                                            defunc_1_f_res_292915;
                                        ((double *) mem_300832)[i_295512] =
                                            defunc_1_f_res_292914;
                                        
                                        double redout_tmp_304109 =
                                               defunc_1_op_res_292899;
                                        double redout_tmp_304110 =
                                               defunc_1_op_res_292902;
                                        double redout_tmp_304111 =
                                               defunc_1_op_res_292905;
                                        double redout_tmp_304112 =
                                               defunc_1_op_res_292908;
                                        double redout_tmp_304113 =
                                               defunc_1_op_res_292911;
                                        
                                        redout_295505 = redout_tmp_304109;
                                        redout_295506 = redout_tmp_304110;
                                        redout_295507 = redout_tmp_304111;
                                        redout_295508 = redout_tmp_304112;
                                        redout_295509 = redout_tmp_304113;
                                    }
                                    defunc_2_reduce_res_292890 = redout_295505;
                                    defunc_2_reduce_res_292891 = redout_295506;
                                    defunc_2_reduce_res_292892 = redout_295507;
                                    defunc_2_reduce_res_292893 = redout_295508;
                                    defunc_2_reduce_res_292894 = redout_295509;
                                    
                                    double a_292925 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292890;
                                    double b_292926 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292891;
                                    double c_292927 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292892;
                                    double d_292928 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292893;
                                    double e_292929 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292894;
                                    double x_292930 = c_292927 * e_292929;
                                    double y_292931 = d_292928 * d_292928;
                                    double a12_292932 = x_292930 - y_292931;
                                    double x_292933 = c_292927 * d_292928;
                                    double y_292934 = b_292926 * e_292929;
                                    double b12_292935 = x_292933 - y_292934;
                                    double x_292936 = b_292926 * d_292928;
                                    double y_292937 = c_292927 * c_292927;
                                    double c12_292938 = x_292936 - y_292937;
                                    double x_292939 = a_292925 * e_292929;
                                    double b2_292940 = x_292939 - y_292937;
                                    double x_292941 = b_292926 * c_292927;
                                    double y_292942 = a_292925 * d_292928;
                                    double c2_292943 = x_292941 - y_292942;
                                    double x_292944 = a_292925 * a12_292932;
                                    double y_292945 = b_292926 * b12_292935;
                                    double x_292946 = x_292944 + y_292945;
                                    double y_292947 = c_292927 * c12_292938;
                                    double y_292948 = x_292946 + y_292947;
                                    double det_292949 = 1.0 / y_292948;
                                    double a12_292950 = a12_292932 * det_292949;
                                    double b12_292951 = b12_292935 * det_292949;
                                    double c12_292952 = c12_292938 * det_292949;
                                    double b2_292953 = b2_292940 * det_292949;
                                    double c2_292954 = c2_292943 * det_292949;
                                    double defunc_2_reduce_res_292955;
                                    double defunc_2_reduce_res_292956;
                                    double redout_295515;
                                    double redout_295516;
                                    
                                    redout_295515 = 0.0;
                                    redout_295516 = 0.0;
                                    for (int64_t i_295517 = 0; i_295517 <
                                         q_l_290267; i_295517++) {
                                        double x_292964;
                                        
                                        x_292964 =
                                            ((double *) mem_300802)[i_295517];
                                        
                                        double x_292965;
                                        
                                        x_292965 =
                                            ((double *) mem_300832)[i_295517];
                                        
                                        double x_292966;
                                        
                                        x_292966 =
                                            ((double *) mem_300829)[i_295517];
                                        
                                        bool cond_292967 = sle64(n_290262,
                                                                 i_295517);
                                        double defunc_0_f_res_292968;
                                        
                                        if (cond_292967) {
                                            defunc_0_f_res_292968 = 0.0;
                                        } else {
                                            int64_t i_292969 = add64(x_292859,
                                                                     i_295517);
                                            double defunc_0_add_arg_292970;
                                            
                                            defunc_0_add_arg_292970 =
                                                ((double *) mem_300252)[i_295529 *
                                                                        n_290262 +
                                                                        i_292969];
                                            defunc_0_f_res_292968 =
                                                defunc_0_add_arg_292970;
                                        }
                                        
                                        double x_292971 = a12_292950 * x_292964;
                                        double y_292972 = b12_292951 * x_292965;
                                        double x_292973 = x_292971 + y_292972;
                                        double y_292974 = c12_292952 * x_292966;
                                        double x_292975 = x_292973 + y_292974;
                                        double defunc_9_fit_fun_res_292976 =
                                               defunc_0_f_res_292968 * x_292975;
                                        double x_292977 = b12_292951 * x_292964;
                                        double y_292978 = b2_292953 * x_292965;
                                        double x_292979 = x_292977 + y_292978;
                                        double y_292980 = c2_292954 * x_292966;
                                        double x_292981 = x_292979 + y_292980;
                                        double defunc_9_slope_fun_res_292982 =
                                               defunc_0_f_res_292968 * x_292981;
                                        double defunc_1_op_res_292959 =
                                               defunc_9_fit_fun_res_292976 +
                                               redout_295515;
                                        double defunc_1_op_res_292962 =
                                               defunc_9_slope_fun_res_292982 +
                                               redout_295516;
                                        double redout_tmp_304116 =
                                               defunc_1_op_res_292959;
                                        double redout_tmp_304117 =
                                               defunc_1_op_res_292962;
                                        
                                        redout_295515 = redout_tmp_304116;
                                        redout_295516 = redout_tmp_304117;
                                    }
                                    defunc_2_reduce_res_292955 = redout_295515;
                                    defunc_2_reduce_res_292956 = redout_295516;
                                    ((double *) mem_300750.mem)[i_295529 *
                                                                l_n_m_290419 +
                                                                i_295522] =
                                        defunc_2_reduce_res_292955;
                                    ((double *) mem_300754.mem)[i_295529 *
                                                                l_n_m_290419 +
                                                                i_295522] =
                                        defunc_2_reduce_res_292956;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_300909, &mem_300750,
                                             "mem_300750") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_300901, &mem_300754,
                                             "mem_300754") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300754,
                                               "mem_300754") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300750,
                                               "mem_300750") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_300925, &ext_mem_300909,
                                         "ext_mem_300909") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_300917, &ext_mem_300901,
                                         "ext_mem_300901") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_300901,
                                           "ext_mem_300901") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_300909,
                                           "ext_mem_300909") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_301212, &ext_mem_300925,
                                     "ext_mem_300925") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_301204, &ext_mem_300917,
                                     "ext_mem_300917") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_300917,
                                       "ext_mem_300917") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_300925,
                                       "ext_mem_300925") != 0)
                        return 1;
                } else {
                    bool match_lit_292985 = (int64_t) 0 == d_l_290270;
                    struct memblock ext_mem_301196;
                    
                    ext_mem_301196.references = NULL;
                    
                    struct memblock ext_mem_301188;
                    
                    ext_mem_301188.references = NULL;
                    if (match_lit_292985) {
                        struct memblock mem_300936;
                        
                        mem_300936.references = NULL;
                        if (memblock_alloc(ctx, &mem_300936, bytes_297605,
                                           "mem_300936")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_304118 = 0; i_304118 <
                             partition_sizze_290353; i_304118++) {
                            for (int64_t i_304119 = 0; i_304119 < l_n_m_290419;
                                 i_304119++) {
                                ((double *) mem_300936.mem)[i_304118 *
                                                            l_n_m_290419 +
                                                            i_304119] = 0.0;
                            }
                        }
                        
                        struct memblock mem_300940;
                        
                        mem_300940.references = NULL;
                        if (memblock_alloc(ctx, &mem_300940, bytes_297605,
                                           "mem_300940")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_295542 = 0; i_295542 <
                             partition_sizze_290353; i_295542++) {
                            for (int64_t i_295538 = 0; i_295538 < l_n_m_290419;
                                 i_295538++) {
                                int64_t x_292997;
                                
                                x_292997 = ((int64_t *) mem_297606)[i_295542 *
                                                                    l_n_m_290419 +
                                                                    i_295538];
                                
                                double x_292998;
                                
                                x_292998 = ((double *) mem_297610)[i_295542 *
                                                                   l_n_m_290419 +
                                                                   i_295538];
                                
                                int64_t min_arg_292999 = mul64(jump_t_290272,
                                                               i_295538);
                                int64_t min_res_293000 = smin64(i_290433,
                                                                min_arg_292999);
                                int64_t defunc_0_g_res_293001 =
                                        add64((int64_t) 1, min_res_293000);
                                double defunc_2_reduce_res_293002;
                                double redout_295532 = 0.0;
                                
                                for (int64_t i_295533 = 0; i_295533 <
                                     q_l_290267; i_295533++) {
                                    bool cond_293007 = sle64(n_290262,
                                                             i_295533);
                                    int64_t defunc_0_f_res_293008;
                                    
                                    if (cond_293007) {
                                        defunc_0_f_res_293008 = (int64_t) 0;
                                    } else {
                                        int64_t i_293009 = add64(x_292997,
                                                                 i_295533);
                                        int64_t defunc_1_add_res_293010 =
                                                add64((int64_t) 1, i_293009);
                                        
                                        defunc_0_f_res_293008 =
                                            defunc_1_add_res_293010;
                                    }
                                    
                                    double defunc_0_f_res_293011;
                                    
                                    if (cond_293007) {
                                        defunc_0_f_res_293011 = 0.0;
                                    } else {
                                        int64_t i_293012 = add64(x_292997,
                                                                 i_295533);
                                        double defunc_0_add_arg_293013;
                                        
                                        defunc_0_add_arg_293013 =
                                            ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                              (i_295542 *
                                                                               ctx_param_ext_297848 +
                                                                               i_293012 *
                                                                               ctx_param_ext_297850)];
                                        defunc_0_f_res_293011 =
                                            defunc_0_add_arg_293013;
                                    }
                                    
                                    int64_t binop_p_293014 =
                                            sub64(defunc_0_f_res_293008,
                                                  defunc_0_g_res_293001);
                                    double defunc_0_f_res_293015 =
                                           sitofp_i64_f64(binop_p_293014);
                                    double abs_res_293016 =
                                           fabs(defunc_0_f_res_293015);
                                    double tmp1_293017 = abs_res_293016 /
                                           x_292998;
                                    double x_293018 = tmp1_293017 * tmp1_293017;
                                    double y_293019 = tmp1_293017 * x_293018;
                                    double tmp2_293020 = 1.0 - y_293019;
                                    double x_293021 = tmp2_293020 * tmp2_293020;
                                    double tmp3_293022 = tmp2_293020 * x_293021;
                                    double w_j_293023 = defunc_0_f_res_293011 *
                                           tmp3_293022;
                                    double defunc_1_op_res_293005 = w_j_293023 +
                                           redout_295532;
                                    double redout_tmp_304122 =
                                           defunc_1_op_res_293005;
                                    
                                    redout_295532 = redout_tmp_304122;
                                }
                                defunc_2_reduce_res_293002 = redout_295532;
                                
                                double a_293024 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293002;
                                double a0_293025 = 1.0 / a_293024;
                                double defunc_2_reduce_res_293026;
                                double redout_295534 = 0.0;
                                
                                for (int64_t i_295535 = 0; i_295535 <
                                     q_l_290267; i_295535++) {
                                    bool cond_293031 = sle64(n_290262,
                                                             i_295535);
                                    int64_t defunc_0_f_res_293032;
                                    
                                    if (cond_293031) {
                                        defunc_0_f_res_293032 = (int64_t) 0;
                                    } else {
                                        int64_t i_293033 = add64(x_292997,
                                                                 i_295535);
                                        int64_t defunc_1_add_res_293034 =
                                                add64((int64_t) 1, i_293033);
                                        
                                        defunc_0_f_res_293032 =
                                            defunc_1_add_res_293034;
                                    }
                                    
                                    double defunc_0_f_res_293035;
                                    
                                    if (cond_293031) {
                                        defunc_0_f_res_293035 = 0.0;
                                    } else {
                                        int64_t i_293036 = add64(x_292997,
                                                                 i_295535);
                                        double defunc_0_add_arg_293037;
                                        
                                        defunc_0_add_arg_293037 =
                                            ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                              (i_295542 *
                                                                               ctx_param_ext_297848 +
                                                                               i_293036 *
                                                                               ctx_param_ext_297850)];
                                        defunc_0_f_res_293035 =
                                            defunc_0_add_arg_293037;
                                    }
                                    
                                    int64_t binop_p_293038 =
                                            sub64(defunc_0_f_res_293032,
                                                  defunc_0_g_res_293001);
                                    double defunc_0_f_res_293039 =
                                           sitofp_i64_f64(binop_p_293038);
                                    double abs_res_293040 =
                                           fabs(defunc_0_f_res_293039);
                                    double tmp1_293041 = abs_res_293040 /
                                           x_292998;
                                    double x_293042 = tmp1_293041 * tmp1_293041;
                                    double y_293043 = tmp1_293041 * x_293042;
                                    double tmp2_293044 = 1.0 - y_293043;
                                    double x_293045 = tmp2_293044 * tmp2_293044;
                                    double tmp3_293046 = tmp2_293044 * x_293045;
                                    double tmp4_293047 = defunc_0_f_res_293035 *
                                           tmp3_293046;
                                    double defunc_0_f_res_293048;
                                    
                                    if (cond_293031) {
                                        defunc_0_f_res_293048 = 0.0;
                                    } else {
                                        int64_t i_293049 = add64(x_292997,
                                                                 i_295535);
                                        double defunc_0_add_arg_293050;
                                        
                                        defunc_0_add_arg_293050 =
                                            ((double *) mem_300252)[i_295542 *
                                                                    n_290262 +
                                                                    i_293049];
                                        defunc_0_f_res_293048 =
                                            defunc_0_add_arg_293050;
                                    }
                                    
                                    double x_293051 = a0_293025 * tmp4_293047;
                                    double defunc_9_fit_fun_res_293052 =
                                           defunc_0_f_res_293048 * x_293051;
                                    double defunc_1_op_res_293029 =
                                           defunc_9_fit_fun_res_293052 +
                                           redout_295534;
                                    double redout_tmp_304123 =
                                           defunc_1_op_res_293029;
                                    
                                    redout_295534 = redout_tmp_304123;
                                }
                                defunc_2_reduce_res_293026 = redout_295534;
                                ((double *) mem_300940.mem)[i_295542 *
                                                            l_n_m_290419 +
                                                            i_295538] =
                                    defunc_2_reduce_res_293026;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_301196, &mem_300940,
                                         "mem_300940") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_301188, &mem_300936,
                                         "mem_300936") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300940, "mem_300940") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300936, "mem_300936") != 0)
                            return 1;
                    } else {
                        bool match_lit_293055 = (int64_t) 1 == d_l_290270;
                        struct memblock ext_mem_301180;
                        
                        ext_mem_301180.references = NULL;
                        
                        struct memblock ext_mem_301172;
                        
                        ext_mem_301172.references = NULL;
                        if (match_lit_293055) {
                            struct memblock mem_300987;
                            
                            mem_300987.references = NULL;
                            if (memblock_alloc(ctx, &mem_300987, bytes_297605,
                                               "mem_300987")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_300991;
                            
                            mem_300991.references = NULL;
                            if (memblock_alloc(ctx, &mem_300991, bytes_297605,
                                               "mem_300991")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t i_295562 = 0; i_295562 <
                                 partition_sizze_290353; i_295562++) {
                                for (int64_t i_295555 = 0; i_295555 <
                                     l_n_m_290419; i_295555++) {
                                    int64_t x_293068;
                                    
                                    x_293068 =
                                        ((int64_t *) mem_297606)[i_295562 *
                                                                 l_n_m_290419 +
                                                                 i_295555];
                                    
                                    double x_293069;
                                    
                                    x_293069 =
                                        ((double *) mem_297610)[i_295562 *
                                                                l_n_m_290419 +
                                                                i_295555];
                                    
                                    int64_t min_arg_293070 =
                                            mul64(jump_t_290272, i_295555);
                                    int64_t min_res_293071 = smin64(i_290433,
                                                                    min_arg_293070);
                                    int64_t defunc_0_g_res_293072 =
                                            add64((int64_t) 1, min_res_293071);
                                    double defunc_2_reduce_res_293073;
                                    double defunc_2_reduce_res_293074;
                                    double defunc_2_reduce_res_293075;
                                    double redout_295544;
                                    double redout_295545;
                                    double redout_295546;
                                    
                                    redout_295544 = 0.0;
                                    redout_295545 = 0.0;
                                    redout_295546 = 0.0;
                                    for (int64_t i_295547 = 0; i_295547 <
                                         q_l_290267; i_295547++) {
                                        bool cond_293086 = sle64(n_290262,
                                                                 i_295547);
                                        int64_t defunc_0_f_res_293087;
                                        
                                        if (cond_293086) {
                                            defunc_0_f_res_293087 = (int64_t) 0;
                                        } else {
                                            int64_t i_293088 = add64(x_293068,
                                                                     i_295547);
                                            int64_t defunc_1_add_res_293089 =
                                                    add64((int64_t) 1,
                                                          i_293088);
                                            
                                            defunc_0_f_res_293087 =
                                                defunc_1_add_res_293089;
                                        }
                                        
                                        double defunc_0_f_res_293090;
                                        
                                        if (cond_293086) {
                                            defunc_0_f_res_293090 = 0.0;
                                        } else {
                                            int64_t i_293091 = add64(x_293068,
                                                                     i_295547);
                                            double defunc_0_add_arg_293092;
                                            
                                            defunc_0_add_arg_293092 =
                                                ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                                  (i_295562 *
                                                                                   ctx_param_ext_297848 +
                                                                                   i_293091 *
                                                                                   ctx_param_ext_297850)];
                                            defunc_0_f_res_293090 =
                                                defunc_0_add_arg_293092;
                                        }
                                        
                                        int64_t binop_p_293093 =
                                                sub64(defunc_0_f_res_293087,
                                                      defunc_0_g_res_293072);
                                        double defunc_0_f_res_293094 =
                                               sitofp_i64_f64(binop_p_293093);
                                        double abs_res_293095 =
                                               fabs(defunc_0_f_res_293094);
                                        double tmp1_293096 = abs_res_293095 /
                                               x_293069;
                                        double x_293097 = tmp1_293096 *
                                               tmp1_293096;
                                        double y_293098 = tmp1_293096 *
                                               x_293097;
                                        double tmp2_293099 = 1.0 - y_293098;
                                        double x_293100 = tmp2_293099 *
                                               tmp2_293099;
                                        double tmp3_293101 = tmp2_293099 *
                                               x_293100;
                                        double w_j_293102 =
                                               defunc_0_f_res_293090 *
                                               tmp3_293101;
                                        double xw_j_293103 =
                                               defunc_0_f_res_293094 *
                                               w_j_293102;
                                        double x2w_j_293104 =
                                               defunc_0_f_res_293094 *
                                               xw_j_293103;
                                        double defunc_1_op_res_293078 =
                                               w_j_293102 + redout_295544;
                                        double defunc_1_op_res_293081 =
                                               xw_j_293103 + redout_295545;
                                        double defunc_1_op_res_293084 =
                                               x2w_j_293104 + redout_295546;
                                        double redout_tmp_304128 =
                                               defunc_1_op_res_293078;
                                        double redout_tmp_304129 =
                                               defunc_1_op_res_293081;
                                        double redout_tmp_304130 =
                                               defunc_1_op_res_293084;
                                        
                                        redout_295544 = redout_tmp_304128;
                                        redout_295545 = redout_tmp_304129;
                                        redout_295546 = redout_tmp_304130;
                                    }
                                    defunc_2_reduce_res_293073 = redout_295544;
                                    defunc_2_reduce_res_293074 = redout_295545;
                                    defunc_2_reduce_res_293075 = redout_295546;
                                    
                                    double a_293105 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293073;
                                    double b_293106 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293074;
                                    double c_293107 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293075;
                                    double x_293108 = a_293105 * c_293107;
                                    double y_293109 = b_293106 * b_293106;
                                    double y_293110 = x_293108 - y_293109;
                                    double det1_293111 = 1.0 / y_293110;
                                    double a11_293112 = c_293107 * det1_293111;
                                    double x_293113 = 0.0 - b_293106;
                                    double b11_293114 = det1_293111 * x_293113;
                                    double c11_293115 = a_293105 * det1_293111;
                                    double defunc_2_reduce_res_293116;
                                    double defunc_2_reduce_res_293117;
                                    double redout_295548;
                                    double redout_295549;
                                    
                                    redout_295548 = 0.0;
                                    redout_295549 = 0.0;
                                    for (int64_t i_295550 = 0; i_295550 <
                                         q_l_290267; i_295550++) {
                                        bool cond_293125 = sle64(n_290262,
                                                                 i_295550);
                                        int64_t defunc_0_f_res_293126;
                                        
                                        if (cond_293125) {
                                            defunc_0_f_res_293126 = (int64_t) 0;
                                        } else {
                                            int64_t i_293127 = add64(x_293068,
                                                                     i_295550);
                                            int64_t defunc_1_add_res_293128 =
                                                    add64((int64_t) 1,
                                                          i_293127);
                                            
                                            defunc_0_f_res_293126 =
                                                defunc_1_add_res_293128;
                                        }
                                        
                                        double defunc_0_f_res_293129;
                                        
                                        if (cond_293125) {
                                            defunc_0_f_res_293129 = 0.0;
                                        } else {
                                            int64_t i_293130 = add64(x_293068,
                                                                     i_295550);
                                            double defunc_0_add_arg_293131;
                                            
                                            defunc_0_add_arg_293131 =
                                                ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                                  (i_295562 *
                                                                                   ctx_param_ext_297848 +
                                                                                   i_293130 *
                                                                                   ctx_param_ext_297850)];
                                            defunc_0_f_res_293129 =
                                                defunc_0_add_arg_293131;
                                        }
                                        
                                        int64_t binop_p_293132 =
                                                sub64(defunc_0_f_res_293126,
                                                      defunc_0_g_res_293072);
                                        double defunc_0_f_res_293133 =
                                               sitofp_i64_f64(binop_p_293132);
                                        double abs_res_293134 =
                                               fabs(defunc_0_f_res_293133);
                                        double tmp1_293135 = abs_res_293134 /
                                               x_293069;
                                        double x_293136 = tmp1_293135 *
                                               tmp1_293135;
                                        double y_293137 = tmp1_293135 *
                                               x_293136;
                                        double tmp2_293138 = 1.0 - y_293137;
                                        double x_293139 = tmp2_293138 *
                                               tmp2_293138;
                                        double tmp3_293140 = tmp2_293138 *
                                               x_293139;
                                        double tmp4_293141 =
                                               defunc_0_f_res_293129 *
                                               tmp3_293140;
                                        double defunc_1_f_res_293142 =
                                               defunc_0_f_res_293133 *
                                               tmp4_293141;
                                        double defunc_0_f_res_293143;
                                        
                                        if (cond_293125) {
                                            defunc_0_f_res_293143 = 0.0;
                                        } else {
                                            int64_t i_293144 = add64(x_293068,
                                                                     i_295550);
                                            double defunc_0_add_arg_293145;
                                            
                                            defunc_0_add_arg_293145 =
                                                ((double *) mem_300252)[i_295562 *
                                                                        n_290262 +
                                                                        i_293144];
                                            defunc_0_f_res_293143 =
                                                defunc_0_add_arg_293145;
                                        }
                                        
                                        double x_293146 = a11_293112 *
                                               tmp4_293141;
                                        double y_293147 = b11_293114 *
                                               defunc_1_f_res_293142;
                                        double x_293148 = x_293146 + y_293147;
                                        double defunc_9_fit_fun_res_293149 =
                                               defunc_0_f_res_293143 * x_293148;
                                        double x_293150 = b11_293114 *
                                               tmp4_293141;
                                        double y_293151 = c11_293115 *
                                               defunc_1_f_res_293142;
                                        double x_293152 = x_293150 + y_293151;
                                        double defunc_9_slope_fun_res_293153 =
                                               defunc_0_f_res_293143 * x_293152;
                                        double defunc_1_op_res_293120 =
                                               defunc_9_fit_fun_res_293149 +
                                               redout_295548;
                                        double defunc_1_op_res_293123 =
                                               defunc_9_slope_fun_res_293153 +
                                               redout_295549;
                                        double redout_tmp_304131 =
                                               defunc_1_op_res_293120;
                                        double redout_tmp_304132 =
                                               defunc_1_op_res_293123;
                                        
                                        redout_295548 = redout_tmp_304131;
                                        redout_295549 = redout_tmp_304132;
                                    }
                                    defunc_2_reduce_res_293116 = redout_295548;
                                    defunc_2_reduce_res_293117 = redout_295549;
                                    ((double *) mem_300987.mem)[i_295562 *
                                                                l_n_m_290419 +
                                                                i_295555] =
                                        defunc_2_reduce_res_293116;
                                    ((double *) mem_300991.mem)[i_295562 *
                                                                l_n_m_290419 +
                                                                i_295555] =
                                        defunc_2_reduce_res_293117;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_301180, &mem_300987,
                                             "mem_300987") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_301172, &mem_300991,
                                             "mem_300991") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300991,
                                               "mem_300991") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300987,
                                               "mem_300987") != 0)
                                return 1;
                        } else {
                            struct memblock mem_301081;
                            
                            mem_301081.references = NULL;
                            if (memblock_alloc(ctx, &mem_301081, bytes_297605,
                                               "mem_301081")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_301085;
                            
                            mem_301085.references = NULL;
                            if (memblock_alloc(ctx, &mem_301085, bytes_297605,
                                               "mem_301085")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t i_295585 = 0; i_295585 <
                                 partition_sizze_290353; i_295585++) {
                                for (int64_t i_295578 = 0; i_295578 <
                                     l_n_m_290419; i_295578++) {
                                    int64_t x_293166;
                                    
                                    x_293166 =
                                        ((int64_t *) mem_297606)[i_295585 *
                                                                 l_n_m_290419 +
                                                                 i_295578];
                                    
                                    double x_293167;
                                    
                                    x_293167 =
                                        ((double *) mem_297610)[i_295585 *
                                                                l_n_m_290419 +
                                                                i_295578];
                                    
                                    int64_t min_arg_293168 =
                                            mul64(jump_t_290272, i_295578);
                                    int64_t min_res_293169 = smin64(i_290433,
                                                                    min_arg_293168);
                                    int64_t defunc_0_g_res_293170 =
                                            add64((int64_t) 1, min_res_293169);
                                    double defunc_2_reduce_res_293171;
                                    double defunc_2_reduce_res_293172;
                                    double defunc_2_reduce_res_293173;
                                    double defunc_2_reduce_res_293174;
                                    double defunc_2_reduce_res_293175;
                                    double redout_295565;
                                    double redout_295566;
                                    double redout_295567;
                                    double redout_295568;
                                    double redout_295569;
                                    
                                    redout_295565 = 0.0;
                                    redout_295566 = 0.0;
                                    redout_295567 = 0.0;
                                    redout_295568 = 0.0;
                                    redout_295569 = 0.0;
                                    for (int64_t i_295570 = 0; i_295570 <
                                         q_l_290267; i_295570++) {
                                        bool cond_293192 = sle64(n_290262,
                                                                 i_295570);
                                        int64_t defunc_0_f_res_293193;
                                        
                                        if (cond_293192) {
                                            defunc_0_f_res_293193 = (int64_t) 0;
                                        } else {
                                            int64_t i_293194 = add64(x_293166,
                                                                     i_295570);
                                            int64_t defunc_1_add_res_293195 =
                                                    add64((int64_t) 1,
                                                          i_293194);
                                            
                                            defunc_0_f_res_293193 =
                                                defunc_1_add_res_293195;
                                        }
                                        
                                        double defunc_0_f_res_293196;
                                        
                                        if (cond_293192) {
                                            defunc_0_f_res_293196 = 0.0;
                                        } else {
                                            int64_t i_293197 = add64(x_293166,
                                                                     i_295570);
                                            double defunc_0_add_arg_293198;
                                            
                                            defunc_0_add_arg_293198 =
                                                ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                                  (i_295585 *
                                                                                   ctx_param_ext_297848 +
                                                                                   i_293197 *
                                                                                   ctx_param_ext_297850)];
                                            defunc_0_f_res_293196 =
                                                defunc_0_add_arg_293198;
                                        }
                                        
                                        int64_t binop_p_293199 =
                                                sub64(defunc_0_f_res_293193,
                                                      defunc_0_g_res_293170);
                                        double defunc_0_f_res_293200 =
                                               sitofp_i64_f64(binop_p_293199);
                                        double abs_res_293201 =
                                               fabs(defunc_0_f_res_293200);
                                        double tmp1_293202 = abs_res_293201 /
                                               x_293167;
                                        double x_293203 = tmp1_293202 *
                                               tmp1_293202;
                                        double y_293204 = tmp1_293202 *
                                               x_293203;
                                        double tmp2_293205 = 1.0 - y_293204;
                                        double x_293206 = tmp2_293205 *
                                               tmp2_293205;
                                        double tmp3_293207 = tmp2_293205 *
                                               x_293206;
                                        double w_j_293208 =
                                               defunc_0_f_res_293196 *
                                               tmp3_293207;
                                        double xw_j_293209 =
                                               defunc_0_f_res_293200 *
                                               w_j_293208;
                                        double x2w_j_293210 =
                                               defunc_0_f_res_293200 *
                                               xw_j_293209;
                                        double x3w_j_293211 =
                                               defunc_0_f_res_293200 *
                                               x2w_j_293210;
                                        double x4w_j_293212 =
                                               defunc_0_f_res_293200 *
                                               x3w_j_293211;
                                        double defunc_1_op_res_293178 =
                                               w_j_293208 + redout_295565;
                                        double defunc_1_op_res_293181 =
                                               xw_j_293209 + redout_295566;
                                        double defunc_1_op_res_293184 =
                                               x2w_j_293210 + redout_295567;
                                        double defunc_1_op_res_293187 =
                                               x3w_j_293211 + redout_295568;
                                        double defunc_1_op_res_293190 =
                                               x4w_j_293212 + redout_295569;
                                        double redout_tmp_304137 =
                                               defunc_1_op_res_293178;
                                        double redout_tmp_304138 =
                                               defunc_1_op_res_293181;
                                        double redout_tmp_304139 =
                                               defunc_1_op_res_293184;
                                        double redout_tmp_304140 =
                                               defunc_1_op_res_293187;
                                        double redout_tmp_304141 =
                                               defunc_1_op_res_293190;
                                        
                                        redout_295565 = redout_tmp_304137;
                                        redout_295566 = redout_tmp_304138;
                                        redout_295567 = redout_tmp_304139;
                                        redout_295568 = redout_tmp_304140;
                                        redout_295569 = redout_tmp_304141;
                                    }
                                    defunc_2_reduce_res_293171 = redout_295565;
                                    defunc_2_reduce_res_293172 = redout_295566;
                                    defunc_2_reduce_res_293173 = redout_295567;
                                    defunc_2_reduce_res_293174 = redout_295568;
                                    defunc_2_reduce_res_293175 = redout_295569;
                                    
                                    double a_293213 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293171;
                                    double b_293214 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293172;
                                    double c_293215 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293173;
                                    double d_293216 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293174;
                                    double e_293217 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293175;
                                    double x_293218 = c_293215 * e_293217;
                                    double y_293219 = d_293216 * d_293216;
                                    double a12_293220 = x_293218 - y_293219;
                                    double x_293221 = c_293215 * d_293216;
                                    double y_293222 = b_293214 * e_293217;
                                    double b12_293223 = x_293221 - y_293222;
                                    double x_293224 = b_293214 * d_293216;
                                    double y_293225 = c_293215 * c_293215;
                                    double c12_293226 = x_293224 - y_293225;
                                    double x_293227 = a_293213 * e_293217;
                                    double b2_293228 = x_293227 - y_293225;
                                    double x_293229 = b_293214 * c_293215;
                                    double y_293230 = a_293213 * d_293216;
                                    double c2_293231 = x_293229 - y_293230;
                                    double x_293232 = a_293213 * a12_293220;
                                    double y_293233 = b_293214 * b12_293223;
                                    double x_293234 = x_293232 + y_293233;
                                    double y_293235 = c_293215 * c12_293226;
                                    double y_293236 = x_293234 + y_293235;
                                    double det_293237 = 1.0 / y_293236;
                                    double a12_293238 = a12_293220 * det_293237;
                                    double b12_293239 = b12_293223 * det_293237;
                                    double c12_293240 = c12_293226 * det_293237;
                                    double b2_293241 = b2_293228 * det_293237;
                                    double c2_293242 = c2_293231 * det_293237;
                                    double defunc_2_reduce_res_293243;
                                    double defunc_2_reduce_res_293244;
                                    double redout_295571;
                                    double redout_295572;
                                    
                                    redout_295571 = 0.0;
                                    redout_295572 = 0.0;
                                    for (int64_t i_295573 = 0; i_295573 <
                                         q_l_290267; i_295573++) {
                                        bool cond_293252 = sle64(n_290262,
                                                                 i_295573);
                                        int64_t defunc_0_f_res_293253;
                                        
                                        if (cond_293252) {
                                            defunc_0_f_res_293253 = (int64_t) 0;
                                        } else {
                                            int64_t i_293254 = add64(x_293166,
                                                                     i_295573);
                                            int64_t defunc_1_add_res_293255 =
                                                    add64((int64_t) 1,
                                                          i_293254);
                                            
                                            defunc_0_f_res_293253 =
                                                defunc_1_add_res_293255;
                                        }
                                        
                                        double defunc_0_f_res_293256;
                                        
                                        if (cond_293252) {
                                            defunc_0_f_res_293256 = 0.0;
                                        } else {
                                            int64_t i_293257 = add64(x_293166,
                                                                     i_295573);
                                            double defunc_0_add_arg_293258;
                                            
                                            defunc_0_add_arg_293258 =
                                                ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                                  (i_295585 *
                                                                                   ctx_param_ext_297848 +
                                                                                   i_293257 *
                                                                                   ctx_param_ext_297850)];
                                            defunc_0_f_res_293256 =
                                                defunc_0_add_arg_293258;
                                        }
                                        
                                        int64_t binop_p_293259 =
                                                sub64(defunc_0_f_res_293253,
                                                      defunc_0_g_res_293170);
                                        double defunc_0_f_res_293260 =
                                               sitofp_i64_f64(binop_p_293259);
                                        double abs_res_293261 =
                                               fabs(defunc_0_f_res_293260);
                                        double tmp1_293262 = abs_res_293261 /
                                               x_293167;
                                        double x_293263 = tmp1_293262 *
                                               tmp1_293262;
                                        double y_293264 = tmp1_293262 *
                                               x_293263;
                                        double tmp2_293265 = 1.0 - y_293264;
                                        double x_293266 = tmp2_293265 *
                                               tmp2_293265;
                                        double tmp3_293267 = tmp2_293265 *
                                               x_293266;
                                        double tmp4_293268 =
                                               defunc_0_f_res_293256 *
                                               tmp3_293267;
                                        double defunc_1_f_res_293269 =
                                               defunc_0_f_res_293260 *
                                               tmp4_293268;
                                        double defunc_1_f_res_293270 =
                                               defunc_0_f_res_293260 *
                                               defunc_1_f_res_293269;
                                        double defunc_0_f_res_293271;
                                        
                                        if (cond_293252) {
                                            defunc_0_f_res_293271 = 0.0;
                                        } else {
                                            int64_t i_293272 = add64(x_293166,
                                                                     i_295573);
                                            double defunc_0_add_arg_293273;
                                            
                                            defunc_0_add_arg_293273 =
                                                ((double *) mem_300252)[i_295585 *
                                                                        n_290262 +
                                                                        i_293272];
                                            defunc_0_f_res_293271 =
                                                defunc_0_add_arg_293273;
                                        }
                                        
                                        double x_293274 = a12_293238 *
                                               tmp4_293268;
                                        double y_293275 = b12_293239 *
                                               defunc_1_f_res_293269;
                                        double x_293276 = x_293274 + y_293275;
                                        double y_293277 = c12_293240 *
                                               defunc_1_f_res_293270;
                                        double x_293278 = x_293276 + y_293277;
                                        double defunc_9_fit_fun_res_293279 =
                                               defunc_0_f_res_293271 * x_293278;
                                        double x_293280 = b12_293239 *
                                               tmp4_293268;
                                        double y_293281 = b2_293241 *
                                               defunc_1_f_res_293269;
                                        double x_293282 = x_293280 + y_293281;
                                        double y_293283 = c2_293242 *
                                               defunc_1_f_res_293270;
                                        double x_293284 = x_293282 + y_293283;
                                        double defunc_9_slope_fun_res_293285 =
                                               defunc_0_f_res_293271 * x_293284;
                                        double defunc_1_op_res_293247 =
                                               defunc_9_fit_fun_res_293279 +
                                               redout_295571;
                                        double defunc_1_op_res_293250 =
                                               defunc_9_slope_fun_res_293285 +
                                               redout_295572;
                                        double redout_tmp_304142 =
                                               defunc_1_op_res_293247;
                                        double redout_tmp_304143 =
                                               defunc_1_op_res_293250;
                                        
                                        redout_295571 = redout_tmp_304142;
                                        redout_295572 = redout_tmp_304143;
                                    }
                                    defunc_2_reduce_res_293243 = redout_295571;
                                    defunc_2_reduce_res_293244 = redout_295572;
                                    ((double *) mem_301081.mem)[i_295585 *
                                                                l_n_m_290419 +
                                                                i_295578] =
                                        defunc_2_reduce_res_293243;
                                    ((double *) mem_301085.mem)[i_295585 *
                                                                l_n_m_290419 +
                                                                i_295578] =
                                        defunc_2_reduce_res_293244;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_301180, &mem_301081,
                                             "mem_301081") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_301172, &mem_301085,
                                             "mem_301085") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301085,
                                               "mem_301085") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301081,
                                               "mem_301081") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_301196, &ext_mem_301180,
                                         "ext_mem_301180") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_301188, &ext_mem_301172,
                                         "ext_mem_301172") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_301172,
                                           "ext_mem_301172") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_301180,
                                           "ext_mem_301180") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_301212, &ext_mem_301196,
                                     "ext_mem_301196") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_301204, &ext_mem_301188,
                                     "ext_mem_301188") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301188,
                                       "ext_mem_301188") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301196,
                                       "ext_mem_301196") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_301228, &ext_mem_301212,
                                 "ext_mem_301212") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_301220, &ext_mem_301204,
                                 "ext_mem_301204") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_301204, "ext_mem_301204") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_301212, "ext_mem_301212") != 0)
                    return 1;
            }
            
            struct memblock ext_mem_301283;
            
            ext_mem_301283.references = NULL;
            if (cond_290872) {
                bool zzero_293289 = jump_l_290273 == (int64_t) 0;
                bool nonzzero_293290 = !zzero_293289;
                bool nonzzero_cert_293291;
                
                if (!nonzzero_293290) {
                    ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                           "division by zero",
                                           "-> #0  loess.fut:742:20-27\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:741:3-745:9\n   #5  stl.fut:256:23-75\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:254:15-257:43\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_301283,
                                       "ext_mem_301283") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301220,
                                       "ext_mem_301220") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301228,
                                       "ext_mem_301228") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_300075,
                                       "ext_mem_300075") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299950,
                                       "ext_mem_299950") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299961,
                                       "ext_mem_299961") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297874,
                                       "mem_param_297874") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297866,
                                       "mem_param_297866") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302748,
                                       "ext_mem_302748") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302749,
                                       "ext_mem_302749") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297852,
                                       "mem_param_297852") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297844,
                                       "mem_param_297844") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297836,
                                       "mem_param_297836") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303273,
                                       "ext_mem_303273") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303274,
                                       "ext_mem_303274") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303275,
                                       "ext_mem_303275") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t y_293292 = sub64(l_n_m_290419, (int64_t) 1);
                struct memblock mem_301239;
                
                mem_301239.references = NULL;
                if (memblock_alloc(ctx, &mem_301239, bytes_297039,
                                   "mem_301239")) {
                    err = 1;
                    goto cleanup;
                }
                for (int64_t i_295594 = 0; i_295594 < partition_sizze_290353;
                     i_295594++) {
                    for (int64_t i_295590 = 0; i_295590 < n_290262;
                         i_295590++) {
                        int64_t m_v_293298 = sdiv64(i_295590, jump_l_290273);
                        bool cond_293299 = m_v_293298 == y_293292;
                        int64_t j_293300;
                        
                        if (cond_293299) {
                            int64_t j_t_res_293301 = sub64(m_v_293298,
                                                           (int64_t) 1);
                            
                            j_293300 = j_t_res_293301;
                        } else {
                            j_293300 = m_v_293298;
                        }
                        
                        int64_t min_arg_293302 = mul64(jump_l_290273, j_293300);
                        int64_t min_res_293303 = smin64(i_290433,
                                                        min_arg_293302);
                        int64_t defunc_0_m_fun_arg_293304 = add64((int64_t) 1,
                                                                  j_293300);
                        int64_t min_arg_293305 = mul64(jump_l_290273,
                                                       defunc_0_m_fun_arg_293304);
                        int64_t min_res_293306 = smin64(i_290433,
                                                        min_arg_293305);
                        int64_t i64_arg_293307 = sub64(min_res_293306,
                                                       min_res_293303);
                        double i64_res_293308 = sitofp_i64_f64(i64_arg_293307);
                        int64_t i64_arg_293309 = sub64(i_295590,
                                                       min_res_293303);
                        double i64_res_293310 = sitofp_i64_f64(i64_arg_293309);
                        double u_293311 = i64_res_293310 / i64_res_293308;
                        double u2_293312 = u_293311 * u_293311;
                        double u3_293313 = u_293311 * u2_293312;
                        double x_293314 = 2.0 * u3_293313;
                        double y_293315 = 3.0 * u2_293312;
                        double x_293316 = x_293314 - y_293315;
                        double x_293317 = 1.0 + x_293316;
                        bool x_293318 = sle64((int64_t) 0, j_293300);
                        bool y_293319 = slt64(j_293300, l_n_m_290419);
                        bool bounds_check_293320 = x_293318 && y_293319;
                        bool index_certs_293321;
                        
                        if (!bounds_check_293320) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) j_293300,
                                          "] out of bounds for array of shape [",
                                          (long long) l_n_m_290419, "].",
                                          "-> #0  loess.fut:731:27-33\n   #1  loess.fut:744:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:741:3-745:9\n   #6  stl.fut:256:23-75\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:254:15-257:43\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_301239,
                                               "mem_301239") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301283,
                                               "ext_mem_301283") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301220,
                                               "ext_mem_301220") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301228,
                                               "ext_mem_301228") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_300075,
                                               "ext_mem_300075") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299950,
                                               "ext_mem_299950") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299961,
                                               "ext_mem_299961") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297874,
                                               "mem_param_297874") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297866,
                                               "mem_param_297866") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302748,
                                               "ext_mem_302748") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302749,
                                               "ext_mem_302749") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297852,
                                               "mem_param_297852") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297844,
                                               "mem_param_297844") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297836,
                                               "mem_param_297836") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303273,
                                               "ext_mem_303273") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303274,
                                               "ext_mem_303274") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303275,
                                               "ext_mem_303275") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297828,
                                               "mem_297828") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297824,
                                               "mem_297824") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303840,
                                               "mem_out_303840") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303839,
                                               "mem_out_303839") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303838,
                                               "mem_out_303838") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_293322;
                        
                        y_293322 = ((double *) ext_mem_301228.mem)[i_295594 *
                                                                   l_n_m_290419 +
                                                                   j_293300];
                        
                        double x_293323 = x_293317 * y_293322;
                        double x_293324 = y_293315 - x_293314;
                        bool x_293325 = sle64((int64_t) 0,
                                              defunc_0_m_fun_arg_293304);
                        bool y_293326 = slt64(defunc_0_m_fun_arg_293304,
                                              l_n_m_290419);
                        bool bounds_check_293327 = x_293325 && y_293326;
                        bool index_certs_293328;
                        
                        if (!bounds_check_293327) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [",
                                          (long long) defunc_0_m_fun_arg_293304,
                                          "] out of bounds for array of shape [",
                                          (long long) l_n_m_290419, "].",
                                          "-> #0  loess.fut:732:27-37\n   #1  loess.fut:744:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:741:3-745:9\n   #6  stl.fut:256:23-75\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:254:15-257:43\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_301239,
                                               "mem_301239") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301283,
                                               "ext_mem_301283") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301220,
                                               "ext_mem_301220") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301228,
                                               "ext_mem_301228") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_300075,
                                               "ext_mem_300075") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299950,
                                               "ext_mem_299950") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299961,
                                               "ext_mem_299961") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297874,
                                               "mem_param_297874") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297866,
                                               "mem_param_297866") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302748,
                                               "ext_mem_302748") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302749,
                                               "ext_mem_302749") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297852,
                                               "mem_param_297852") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297844,
                                               "mem_param_297844") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297836,
                                               "mem_param_297836") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303273,
                                               "ext_mem_303273") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303274,
                                               "ext_mem_303274") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303275,
                                               "ext_mem_303275") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297828,
                                               "mem_297828") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297824,
                                               "mem_297824") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303840,
                                               "mem_out_303840") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303839,
                                               "mem_out_303839") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303838,
                                               "mem_out_303838") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_293329;
                        
                        y_293329 = ((double *) ext_mem_301228.mem)[i_295594 *
                                                                   l_n_m_290419 +
                                                                   defunc_0_m_fun_arg_293304];
                        
                        double y_293330 = x_293324 * y_293329;
                        double x_293331 = x_293323 + y_293330;
                        double y_293332 = 2.0 * u2_293312;
                        double x_293333 = u3_293313 - y_293332;
                        double x_293334 = u_293311 + x_293333;
                        double y_293335;
                        
                        y_293335 = ((double *) ext_mem_301220.mem)[i_295594 *
                                                                   l_n_m_290419 +
                                                                   j_293300];
                        
                        double x_293336 = x_293334 * y_293335;
                        double y_293337 = i64_res_293308 * x_293336;
                        double x_293338 = x_293331 + y_293337;
                        double x_293339 = u3_293313 - u2_293312;
                        double y_293340;
                        
                        y_293340 = ((double *) ext_mem_301220.mem)[i_295594 *
                                                                   l_n_m_290419 +
                                                                   defunc_0_m_fun_arg_293304];
                        
                        double x_293341 = x_293339 * y_293340;
                        double y_293342 = i64_res_293308 * x_293341;
                        double defunc_4_interpolate_proc_res_293343 = x_293338 +
                               y_293342;
                        
                        ((double *) mem_301239.mem)[i_295594 * n_290262 +
                                                    i_295590] =
                            defunc_4_interpolate_proc_res_293343;
                    }
                }
                if (memblock_set(ctx, &ext_mem_301283, &mem_301239,
                                 "mem_301239") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_301239, "mem_301239") != 0)
                    return 1;
            } else {
                bool dim_match_293344 = n_290262 == l_n_m_290419;
                bool empty_or_match_cert_293345;
                
                if (!dim_match_293344) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Value of (core language) shape (",
                                  (long long) partition_sizze_290353, ", ",
                                  (long long) l_n_m_290419,
                                  ") cannot match shape of type `[",
                                  (long long) partition_sizze_290353, "][",
                                  (long long) n_290262, "]t`.",
                                  "-> #0  stl.fut:259:15-36\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_301283,
                                       "ext_mem_301283") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301220,
                                       "ext_mem_301220") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301228,
                                       "ext_mem_301228") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_300075,
                                       "ext_mem_300075") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299950,
                                       "ext_mem_299950") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299961,
                                       "ext_mem_299961") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297874,
                                       "mem_param_297874") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297866,
                                       "mem_param_297866") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302748,
                                       "ext_mem_302748") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302749,
                                       "ext_mem_302749") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297852,
                                       "mem_param_297852") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297844,
                                       "mem_param_297844") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297836,
                                       "mem_param_297836") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303273,
                                       "ext_mem_303273") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303274,
                                       "ext_mem_303274") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303275,
                                       "ext_mem_303275") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_301283, &ext_mem_301228,
                                 "ext_mem_301228") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_301220, "ext_mem_301220") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_301228, "ext_mem_301228") != 0)
                return 1;
            
            struct memblock mem_301294;
            
            mem_301294.references = NULL;
            if (memblock_alloc(ctx, &mem_301294, bytes_297039, "mem_301294")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_295602 = 0; i_295602 < partition_sizze_290353;
                 i_295602++) {
                for (int64_t i_295598 = 0; i_295598 < n_290262; i_295598++) {
                    int64_t slice_296134 = n_p_290264 + i_295598;
                    double x_293352;
                    
                    x_293352 = ((double *) mem_300086)[i_295602 * C_len_290410 +
                                                       slice_296134];
                    
                    double x_293353;
                    
                    x_293353 = ((double *) ext_mem_301283.mem)[i_295602 *
                                                               ext_301286 +
                                                               i_295598];
                    
                    double defunc_1_f_res_293354 = x_293352 - x_293353;
                    
                    ((double *) mem_301294.mem)[i_295602 * n_290262 +
                                                i_295598] =
                        defunc_1_f_res_293354;
                }
            }
            if (memblock_unref(ctx, &ext_mem_301283, "ext_mem_301283") != 0)
                return 1;
            
            struct memblock ext_mem_302685;
            
            ext_mem_302685.references = NULL;
            
            struct memblock ext_mem_302677;
            
            ext_mem_302677.references = NULL;
            if (cond_290933) {
                bool match_lit_293357 = (int64_t) 0 == d_t_290269;
                int64_t binop_y_301356 = (int64_t) 8 * n_290262;
                int64_t bytes_301357 = smax64((int64_t) 0, binop_y_301356);
                struct memblock ext_mem_301736;
                
                ext_mem_301736.references = NULL;
                
                struct memblock ext_mem_301728;
                
                ext_mem_301728.references = NULL;
                if (match_lit_293357) {
                    struct memblock mem_301341;
                    
                    mem_301341.references = NULL;
                    if (memblock_alloc(ctx, &mem_301341, bytes_297714,
                                       "mem_301341")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_304148 = 0; i_304148 <
                         partition_sizze_290353; i_304148++) {
                        for (int64_t i_304149 = 0; i_304149 < t_n_m_290426;
                             i_304149++) {
                            ((double *) mem_301341.mem)[i_304148 *
                                                        t_n_m_290426 +
                                                        i_304149] = 0.0;
                        }
                    }
                    
                    struct memblock mem_301345;
                    
                    mem_301345.references = NULL;
                    if (memblock_alloc(ctx, &mem_301345, bytes_297714,
                                       "mem_301345")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (mem_301358_cached_sizze_304397 <
                        (size_t) bytes_301357) {
                        mem_301358 = realloc(mem_301358, bytes_301357);
                        mem_301358_cached_sizze_304397 = bytes_301357;
                    }
                    if (mem_301373_cached_sizze_304398 <
                        (size_t) bytes_301357) {
                        mem_301373 = realloc(mem_301373, bytes_301357);
                        mem_301373_cached_sizze_304398 = bytes_301357;
                    }
                    if (mem_301376_cached_sizze_304399 <
                        (size_t) bytes_301357) {
                        mem_301376 = realloc(mem_301376, bytes_301357);
                        mem_301376_cached_sizze_304399 = bytes_301357;
                    }
                    for (int64_t i_295625 = 0; i_295625 <
                         partition_sizze_290353; i_295625++) {
                        int64_t x_293367;
                        
                        x_293367 = ((int64_t *) mem_297043)[i_295625];
                        for (int64_t i_295606 = 0; i_295606 < n_290262;
                             i_295606++) {
                            float x_293371;
                            
                            x_293371 = ((float *) mem_297000)[i_295625 *
                                                              n_290262 +
                                                              i_295606];
                            
                            double x_293372;
                            
                            x_293372 = ((double *) mem_301294.mem)[i_295625 *
                                                                   n_290262 +
                                                                   i_295606];
                            
                            double f32_res_293373 = fpconv_f32_f64(x_293371);
                            double defunc_1_f_res_293374 = f32_res_293373 -
                                   x_293372;
                            
                            ((double *) mem_301358)[i_295606] =
                                defunc_1_f_res_293374;
                        }
                        for (int64_t i_295612 = 0; i_295612 < n_290262;
                             i_295612++) {
                            int64_t x_293377;
                            
                            x_293377 = ((int64_t *) mem_297040)[i_295625 *
                                                                n_290262 +
                                                                i_295612];
                            
                            bool cond_293378 = sle64((int64_t) 0, x_293377);
                            double defunc_0_f_res_293379;
                            
                            if (cond_293378) {
                                bool y_293380 = slt64(x_293377, n_290262);
                                bool bounds_check_293381 = cond_293378 &&
                                     y_293380;
                                bool index_certs_293382;
                                
                                if (!bounds_check_293381) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) x_293377,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_290262, "].",
                                                  "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                    if (memblock_unref(ctx, &mem_301345,
                                                       "mem_301345") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_301341,
                                                       "mem_301341") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301728,
                                                       "ext_mem_301728") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301736,
                                                       "ext_mem_301736") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302677,
                                                       "ext_mem_302677") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302685,
                                                       "ext_mem_302685") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_301294,
                                                       "mem_301294") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301283,
                                                       "ext_mem_301283") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301220,
                                                       "ext_mem_301220") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301228,
                                                       "ext_mem_301228") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_300075,
                                                       "ext_mem_300075") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_299950,
                                                       "ext_mem_299950") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_299961,
                                                       "ext_mem_299961") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297874,
                                                       "mem_param_297874") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297866,
                                                       "mem_param_297866") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302748,
                                                       "ext_mem_302748") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302749,
                                                       "ext_mem_302749") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297852,
                                                       "mem_param_297852") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297844,
                                                       "mem_param_297844") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297836,
                                                       "mem_param_297836") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303273,
                                                       "ext_mem_303273") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303274,
                                                       "ext_mem_303274") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303275,
                                                       "ext_mem_303275") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_297828,
                                                       "mem_297828") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_297824,
                                                       "mem_297824") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_303840,
                                                       "mem_out_303840") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_303839,
                                                       "mem_out_303839") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_303838,
                                                       "mem_out_303838") != 0)
                                        return 1;
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                double defunc_0_f_res_t_res_293383;
                                
                                defunc_0_f_res_t_res_293383 =
                                    ((double *) mem_301358)[x_293377];
                                defunc_0_f_res_293379 =
                                    defunc_0_f_res_t_res_293383;
                            } else {
                                defunc_0_f_res_293379 = 0.0;
                            }
                            
                            double defunc_0_f_res_293384;
                            
                            if (cond_293378) {
                                bool y_293385 = slt64(x_293377, n_290262);
                                bool bounds_check_293386 = cond_293378 &&
                                     y_293385;
                                bool index_certs_293387;
                                
                                if (!bounds_check_293386) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) x_293377,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_290262, "].",
                                                  "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                    if (memblock_unref(ctx, &mem_301345,
                                                       "mem_301345") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_301341,
                                                       "mem_301341") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301728,
                                                       "ext_mem_301728") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301736,
                                                       "ext_mem_301736") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302677,
                                                       "ext_mem_302677") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302685,
                                                       "ext_mem_302685") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_301294,
                                                       "mem_301294") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301283,
                                                       "ext_mem_301283") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301220,
                                                       "ext_mem_301220") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301228,
                                                       "ext_mem_301228") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_300075,
                                                       "ext_mem_300075") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_299950,
                                                       "ext_mem_299950") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_299961,
                                                       "ext_mem_299961") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297874,
                                                       "mem_param_297874") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297866,
                                                       "mem_param_297866") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302748,
                                                       "ext_mem_302748") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302749,
                                                       "ext_mem_302749") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297852,
                                                       "mem_param_297852") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297844,
                                                       "mem_param_297844") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297836,
                                                       "mem_param_297836") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303273,
                                                       "ext_mem_303273") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303274,
                                                       "ext_mem_303274") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303275,
                                                       "ext_mem_303275") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_297828,
                                                       "mem_297828") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_297824,
                                                       "mem_297824") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_303840,
                                                       "mem_out_303840") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_303839,
                                                       "mem_out_303839") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_303838,
                                                       "mem_out_303838") != 0)
                                        return 1;
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                double defunc_0_f_res_t_res_293388;
                                
                                defunc_0_f_res_t_res_293388 =
                                    ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                      (i_295625 *
                                                                       ctx_param_ext_297848 +
                                                                       x_293377 *
                                                                       ctx_param_ext_297850)];
                                defunc_0_f_res_293384 =
                                    defunc_0_f_res_t_res_293388;
                            } else {
                                defunc_0_f_res_293384 = 0.0;
                            }
                            ((double *) mem_301373)[i_295612] =
                                defunc_0_f_res_293384;
                            ((double *) mem_301376)[i_295612] =
                                defunc_0_f_res_293379;
                        }
                        for (int64_t i_295621 = 0; i_295621 < t_n_m_290426;
                             i_295621++) {
                            int64_t x_293391;
                            
                            x_293391 = ((int64_t *) mem_297715)[i_295625 *
                                                                t_n_m_290426 +
                                                                i_295621];
                            
                            double x_293392;
                            
                            x_293392 = ((double *) mem_297719)[i_295625 *
                                                               t_n_m_290426 +
                                                               i_295621];
                            
                            int64_t min_arg_293393 = mul64(jump_t_290272,
                                                           i_295621);
                            int64_t min_res_293394 = smin64(i_290433,
                                                            min_arg_293393);
                            int64_t defunc_0_g_res_293395 = add64((int64_t) 1,
                                                                  min_res_293394);
                            double defunc_2_reduce_res_293396;
                            double redout_295615 = 0.0;
                            
                            for (int64_t i_295616 = 0; i_295616 < q_t_290266;
                                 i_295616++) {
                                bool cond_293401 = sle64(x_293367, i_295616);
                                int64_t defunc_0_f_res_293402;
                                
                                if (cond_293401) {
                                    defunc_0_f_res_293402 = (int64_t) 0;
                                } else {
                                    int64_t i_293403 = add64(x_293391,
                                                             i_295616);
                                    int64_t defunc_0_add_arg_293404;
                                    
                                    defunc_0_add_arg_293404 =
                                        ((int64_t *) mem_297040)[i_295625 *
                                                                 n_290262 +
                                                                 i_293403];
                                    
                                    int64_t defunc_1_add_res_293405 =
                                            add64((int64_t) 1,
                                                  defunc_0_add_arg_293404);
                                    
                                    defunc_0_f_res_293402 =
                                        defunc_1_add_res_293405;
                                }
                                
                                double defunc_0_f_res_293406;
                                
                                if (cond_293401) {
                                    defunc_0_f_res_293406 = 0.0;
                                } else {
                                    int64_t i_293407 = add64(x_293391,
                                                             i_295616);
                                    double defunc_0_add_arg_293408;
                                    
                                    defunc_0_add_arg_293408 =
                                        ((double *) mem_301373)[i_293407];
                                    defunc_0_f_res_293406 =
                                        defunc_0_add_arg_293408;
                                }
                                
                                int64_t binop_p_293409 =
                                        sub64(defunc_0_f_res_293402,
                                              defunc_0_g_res_293395);
                                double defunc_0_f_res_293410 =
                                       sitofp_i64_f64(binop_p_293409);
                                double abs_res_293411 =
                                       fabs(defunc_0_f_res_293410);
                                double tmp1_293412 = abs_res_293411 / x_293392;
                                double x_293413 = tmp1_293412 * tmp1_293412;
                                double y_293414 = tmp1_293412 * x_293413;
                                double tmp2_293415 = 1.0 - y_293414;
                                double x_293416 = tmp2_293415 * tmp2_293415;
                                double tmp3_293417 = tmp2_293415 * x_293416;
                                double w_j_293418 = defunc_0_f_res_293406 *
                                       tmp3_293417;
                                double defunc_1_op_res_293399 = w_j_293418 +
                                       redout_295615;
                                double redout_tmp_304155 =
                                       defunc_1_op_res_293399;
                                
                                redout_295615 = redout_tmp_304155;
                            }
                            defunc_2_reduce_res_293396 = redout_295615;
                            
                            double a_293419 = 2.220446049250313e-16 +
                                   defunc_2_reduce_res_293396;
                            double a0_293420 = 1.0 / a_293419;
                            double defunc_2_reduce_res_293421;
                            double redout_295617 = 0.0;
                            
                            for (int64_t i_295618 = 0; i_295618 < q_t_290266;
                                 i_295618++) {
                                bool cond_293426 = sle64(x_293367, i_295618);
                                int64_t defunc_0_f_res_293427;
                                
                                if (cond_293426) {
                                    defunc_0_f_res_293427 = (int64_t) 0;
                                } else {
                                    int64_t i_293428 = add64(x_293391,
                                                             i_295618);
                                    int64_t defunc_0_add_arg_293429;
                                    
                                    defunc_0_add_arg_293429 =
                                        ((int64_t *) mem_297040)[i_295625 *
                                                                 n_290262 +
                                                                 i_293428];
                                    
                                    int64_t defunc_1_add_res_293430 =
                                            add64((int64_t) 1,
                                                  defunc_0_add_arg_293429);
                                    
                                    defunc_0_f_res_293427 =
                                        defunc_1_add_res_293430;
                                }
                                
                                double defunc_0_f_res_293431;
                                
                                if (cond_293426) {
                                    defunc_0_f_res_293431 = 0.0;
                                } else {
                                    int64_t i_293432 = add64(x_293391,
                                                             i_295618);
                                    double defunc_0_add_arg_293433;
                                    
                                    defunc_0_add_arg_293433 =
                                        ((double *) mem_301373)[i_293432];
                                    defunc_0_f_res_293431 =
                                        defunc_0_add_arg_293433;
                                }
                                
                                int64_t binop_p_293434 =
                                        sub64(defunc_0_f_res_293427,
                                              defunc_0_g_res_293395);
                                double defunc_0_f_res_293435 =
                                       sitofp_i64_f64(binop_p_293434);
                                double abs_res_293436 =
                                       fabs(defunc_0_f_res_293435);
                                double tmp1_293437 = abs_res_293436 / x_293392;
                                double x_293438 = tmp1_293437 * tmp1_293437;
                                double y_293439 = tmp1_293437 * x_293438;
                                double tmp2_293440 = 1.0 - y_293439;
                                double x_293441 = tmp2_293440 * tmp2_293440;
                                double tmp3_293442 = tmp2_293440 * x_293441;
                                double tmp4_293443 = defunc_0_f_res_293431 *
                                       tmp3_293442;
                                double defunc_0_f_res_293444;
                                
                                if (cond_293426) {
                                    defunc_0_f_res_293444 = 0.0;
                                } else {
                                    int64_t i_293445 = add64(x_293391,
                                                             i_295618);
                                    double defunc_0_add_arg_293446;
                                    
                                    defunc_0_add_arg_293446 =
                                        ((double *) mem_301376)[i_293445];
                                    defunc_0_f_res_293444 =
                                        defunc_0_add_arg_293446;
                                }
                                
                                double x_293447 = a0_293420 * tmp4_293443;
                                double defunc_9_fit_fun_res_293448 =
                                       defunc_0_f_res_293444 * x_293447;
                                double defunc_1_op_res_293424 =
                                       defunc_9_fit_fun_res_293448 +
                                       redout_295617;
                                double redout_tmp_304156 =
                                       defunc_1_op_res_293424;
                                
                                redout_295617 = redout_tmp_304156;
                            }
                            defunc_2_reduce_res_293421 = redout_295617;
                            ((double *) mem_301345.mem)[i_295625 *
                                                        t_n_m_290426 +
                                                        i_295621] =
                                defunc_2_reduce_res_293421;
                        }
                    }
                    if (memblock_set(ctx, &ext_mem_301736, &mem_301345,
                                     "mem_301345") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_301728, &mem_301341,
                                     "mem_301341") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_301345, "mem_301345") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_301341, "mem_301341") != 0)
                        return 1;
                } else {
                    bool match_lit_293451 = (int64_t) 1 == d_t_290269;
                    int64_t binop_y_301462 = (int64_t) 8 * n_290262;
                    int64_t bytes_301463 = smax64((int64_t) 0, binop_y_301462);
                    int64_t binop_y_301601 = (int64_t) 8 * n_290262;
                    int64_t bytes_301602 = smax64((int64_t) 0, binop_y_301601);
                    struct memblock ext_mem_301720;
                    
                    ext_mem_301720.references = NULL;
                    
                    struct memblock ext_mem_301712;
                    
                    ext_mem_301712.references = NULL;
                    if (match_lit_293451) {
                        struct memblock mem_301437;
                        
                        mem_301437.references = NULL;
                        if (memblock_alloc(ctx, &mem_301437, bytes_297714,
                                           "mem_301437")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_301441;
                        
                        mem_301441.references = NULL;
                        if (memblock_alloc(ctx, &mem_301441, bytes_297714,
                                           "mem_301441")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_301464_cached_sizze_304400 <
                            (size_t) bytes_301463) {
                            mem_301464 = realloc(mem_301464, bytes_301463);
                            mem_301464_cached_sizze_304400 = bytes_301463;
                        }
                        if (mem_301479_cached_sizze_304401 <
                            (size_t) bytes_301463) {
                            mem_301479 = realloc(mem_301479, bytes_301463);
                            mem_301479_cached_sizze_304401 = bytes_301463;
                        }
                        if (mem_301482_cached_sizze_304402 <
                            (size_t) bytes_301463) {
                            mem_301482 = realloc(mem_301482, bytes_301463);
                            mem_301482_cached_sizze_304402 = bytes_301463;
                        }
                        for (int64_t i_295656 = 0; i_295656 <
                             partition_sizze_290353; i_295656++) {
                            int64_t x_293461;
                            
                            x_293461 = ((int64_t *) mem_297043)[i_295656];
                            for (int64_t i_295629 = 0; i_295629 < n_290262;
                                 i_295629++) {
                                float x_293465;
                                
                                x_293465 = ((float *) mem_297000)[i_295656 *
                                                                  n_290262 +
                                                                  i_295629];
                                
                                double x_293466;
                                
                                x_293466 =
                                    ((double *) mem_301294.mem)[i_295656 *
                                                                n_290262 +
                                                                i_295629];
                                
                                double f32_res_293467 =
                                       fpconv_f32_f64(x_293465);
                                double defunc_1_f_res_293468 = f32_res_293467 -
                                       x_293466;
                                
                                ((double *) mem_301464)[i_295629] =
                                    defunc_1_f_res_293468;
                            }
                            for (int64_t i_295635 = 0; i_295635 < n_290262;
                                 i_295635++) {
                                int64_t x_293471;
                                
                                x_293471 = ((int64_t *) mem_297040)[i_295656 *
                                                                    n_290262 +
                                                                    i_295635];
                                
                                bool cond_293472 = sle64((int64_t) 0, x_293471);
                                double defunc_0_f_res_293473;
                                
                                if (cond_293472) {
                                    bool y_293474 = slt64(x_293471, n_290262);
                                    bool bounds_check_293475 = cond_293472 &&
                                         y_293474;
                                    bool index_certs_293476;
                                    
                                    if (!bounds_check_293475) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_293471,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_290262,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_301441,
                                                           "mem_301441") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301437,
                                                           "mem_301437") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301712,
                                                           "ext_mem_301712") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301720,
                                                           "ext_mem_301720") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301728,
                                                           "ext_mem_301728") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301736,
                                                           "ext_mem_301736") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302677,
                                                           "ext_mem_302677") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302685,
                                                           "ext_mem_302685") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301294,
                                                           "mem_301294") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301283,
                                                           "ext_mem_301283") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301220,
                                                           "ext_mem_301220") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301228,
                                                           "ext_mem_301228") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300075,
                                                           "ext_mem_300075") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299950,
                                                           "ext_mem_299950") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299961,
                                                           "ext_mem_299961") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297874,
                                                           "mem_param_297874") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297866,
                                                           "mem_param_297866") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302748,
                                                           "ext_mem_302748") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302749,
                                                           "ext_mem_302749") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297852,
                                                           "mem_param_297852") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297844,
                                                           "mem_param_297844") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297836,
                                                           "mem_param_297836") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303273,
                                                           "ext_mem_303273") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303274,
                                                           "ext_mem_303274") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303275,
                                                           "ext_mem_303275") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297828,
                                                           "mem_297828") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297824,
                                                           "mem_297824") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303840,
                                                           "mem_out_303840") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303839,
                                                           "mem_out_303839") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303838,
                                                           "mem_out_303838") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_293477;
                                    
                                    defunc_0_f_res_t_res_293477 =
                                        ((double *) mem_301464)[x_293471];
                                    defunc_0_f_res_293473 =
                                        defunc_0_f_res_t_res_293477;
                                } else {
                                    defunc_0_f_res_293473 = 0.0;
                                }
                                
                                double defunc_0_f_res_293478;
                                
                                if (cond_293472) {
                                    bool y_293479 = slt64(x_293471, n_290262);
                                    bool bounds_check_293480 = cond_293472 &&
                                         y_293479;
                                    bool index_certs_293481;
                                    
                                    if (!bounds_check_293480) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_293471,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_290262,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_301441,
                                                           "mem_301441") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301437,
                                                           "mem_301437") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301712,
                                                           "ext_mem_301712") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301720,
                                                           "ext_mem_301720") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301728,
                                                           "ext_mem_301728") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301736,
                                                           "ext_mem_301736") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302677,
                                                           "ext_mem_302677") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302685,
                                                           "ext_mem_302685") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301294,
                                                           "mem_301294") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301283,
                                                           "ext_mem_301283") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301220,
                                                           "ext_mem_301220") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301228,
                                                           "ext_mem_301228") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300075,
                                                           "ext_mem_300075") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299950,
                                                           "ext_mem_299950") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299961,
                                                           "ext_mem_299961") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297874,
                                                           "mem_param_297874") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297866,
                                                           "mem_param_297866") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302748,
                                                           "ext_mem_302748") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302749,
                                                           "ext_mem_302749") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297852,
                                                           "mem_param_297852") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297844,
                                                           "mem_param_297844") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297836,
                                                           "mem_param_297836") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303273,
                                                           "ext_mem_303273") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303274,
                                                           "ext_mem_303274") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303275,
                                                           "ext_mem_303275") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297828,
                                                           "mem_297828") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297824,
                                                           "mem_297824") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303840,
                                                           "mem_out_303840") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303839,
                                                           "mem_out_303839") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303838,
                                                           "mem_out_303838") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_293482;
                                    
                                    defunc_0_f_res_t_res_293482 =
                                        ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                          (i_295656 *
                                                                           ctx_param_ext_297848 +
                                                                           x_293471 *
                                                                           ctx_param_ext_297850)];
                                    defunc_0_f_res_293478 =
                                        defunc_0_f_res_t_res_293482;
                                } else {
                                    defunc_0_f_res_293478 = 0.0;
                                }
                                ((double *) mem_301479)[i_295635] =
                                    defunc_0_f_res_293478;
                                ((double *) mem_301482)[i_295635] =
                                    defunc_0_f_res_293473;
                            }
                            for (int64_t i_295649 = 0; i_295649 < t_n_m_290426;
                                 i_295649++) {
                                int64_t x_293486;
                                
                                x_293486 = ((int64_t *) mem_297715)[i_295656 *
                                                                    t_n_m_290426 +
                                                                    i_295649];
                                
                                double x_293487;
                                
                                x_293487 = ((double *) mem_297719)[i_295656 *
                                                                   t_n_m_290426 +
                                                                   i_295649];
                                
                                int64_t min_arg_293488 = mul64(jump_t_290272,
                                                               i_295649);
                                int64_t min_res_293489 = smin64(i_290433,
                                                                min_arg_293488);
                                int64_t defunc_0_g_res_293490 =
                                        add64((int64_t) 1, min_res_293489);
                                double defunc_2_reduce_res_293491;
                                double defunc_2_reduce_res_293492;
                                double defunc_2_reduce_res_293493;
                                double redout_295638;
                                double redout_295639;
                                double redout_295640;
                                
                                redout_295638 = 0.0;
                                redout_295639 = 0.0;
                                redout_295640 = 0.0;
                                for (int64_t i_295641 = 0; i_295641 <
                                     q_t_290266; i_295641++) {
                                    bool cond_293504 = sle64(x_293461,
                                                             i_295641);
                                    int64_t defunc_0_f_res_293505;
                                    
                                    if (cond_293504) {
                                        defunc_0_f_res_293505 = (int64_t) 0;
                                    } else {
                                        int64_t i_293506 = add64(x_293486,
                                                                 i_295641);
                                        int64_t defunc_0_add_arg_293507;
                                        
                                        defunc_0_add_arg_293507 =
                                            ((int64_t *) mem_297040)[i_295656 *
                                                                     n_290262 +
                                                                     i_293506];
                                        
                                        int64_t defunc_1_add_res_293508 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_293507);
                                        
                                        defunc_0_f_res_293505 =
                                            defunc_1_add_res_293508;
                                    }
                                    
                                    double defunc_0_f_res_293509;
                                    
                                    if (cond_293504) {
                                        defunc_0_f_res_293509 = 0.0;
                                    } else {
                                        int64_t i_293510 = add64(x_293486,
                                                                 i_295641);
                                        double defunc_0_add_arg_293511;
                                        
                                        defunc_0_add_arg_293511 =
                                            ((double *) mem_301479)[i_293510];
                                        defunc_0_f_res_293509 =
                                            defunc_0_add_arg_293511;
                                    }
                                    
                                    int64_t binop_p_293512 =
                                            sub64(defunc_0_f_res_293505,
                                                  defunc_0_g_res_293490);
                                    double defunc_0_f_res_293513 =
                                           sitofp_i64_f64(binop_p_293512);
                                    double abs_res_293514 =
                                           fabs(defunc_0_f_res_293513);
                                    double tmp1_293515 = abs_res_293514 /
                                           x_293487;
                                    double x_293516 = tmp1_293515 * tmp1_293515;
                                    double y_293517 = tmp1_293515 * x_293516;
                                    double tmp2_293518 = 1.0 - y_293517;
                                    double x_293519 = tmp2_293518 * tmp2_293518;
                                    double tmp3_293520 = tmp2_293518 * x_293519;
                                    double w_j_293521 = defunc_0_f_res_293509 *
                                           tmp3_293520;
                                    double xw_j_293522 = defunc_0_f_res_293513 *
                                           w_j_293521;
                                    double x2w_j_293523 =
                                           defunc_0_f_res_293513 * xw_j_293522;
                                    double defunc_1_op_res_293496 = w_j_293521 +
                                           redout_295638;
                                    double defunc_1_op_res_293499 =
                                           xw_j_293522 + redout_295639;
                                    double defunc_1_op_res_293502 =
                                           x2w_j_293523 + redout_295640;
                                    double redout_tmp_304164 =
                                           defunc_1_op_res_293496;
                                    double redout_tmp_304165 =
                                           defunc_1_op_res_293499;
                                    double redout_tmp_304166 =
                                           defunc_1_op_res_293502;
                                    
                                    redout_295638 = redout_tmp_304164;
                                    redout_295639 = redout_tmp_304165;
                                    redout_295640 = redout_tmp_304166;
                                }
                                defunc_2_reduce_res_293491 = redout_295638;
                                defunc_2_reduce_res_293492 = redout_295639;
                                defunc_2_reduce_res_293493 = redout_295640;
                                
                                double a_293524 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293491;
                                double b_293525 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293492;
                                double c_293526 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293493;
                                double x_293527 = a_293524 * c_293526;
                                double y_293528 = b_293525 * b_293525;
                                double y_293529 = x_293527 - y_293528;
                                double det1_293530 = 1.0 / y_293529;
                                double a11_293531 = c_293526 * det1_293530;
                                double x_293532 = 0.0 - b_293525;
                                double b11_293533 = det1_293530 * x_293532;
                                double c11_293534 = a_293524 * det1_293530;
                                double defunc_2_reduce_res_293535;
                                double defunc_2_reduce_res_293536;
                                double redout_295642;
                                double redout_295643;
                                
                                redout_295642 = 0.0;
                                redout_295643 = 0.0;
                                for (int64_t i_295644 = 0; i_295644 <
                                     q_t_290266; i_295644++) {
                                    bool cond_293544 = sle64(x_293461,
                                                             i_295644);
                                    int64_t defunc_0_f_res_293545;
                                    
                                    if (cond_293544) {
                                        defunc_0_f_res_293545 = (int64_t) 0;
                                    } else {
                                        int64_t i_293546 = add64(x_293486,
                                                                 i_295644);
                                        int64_t defunc_0_add_arg_293547;
                                        
                                        defunc_0_add_arg_293547 =
                                            ((int64_t *) mem_297040)[i_295656 *
                                                                     n_290262 +
                                                                     i_293546];
                                        
                                        int64_t defunc_1_add_res_293548 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_293547);
                                        
                                        defunc_0_f_res_293545 =
                                            defunc_1_add_res_293548;
                                    }
                                    
                                    double defunc_0_f_res_293549;
                                    
                                    if (cond_293544) {
                                        defunc_0_f_res_293549 = 0.0;
                                    } else {
                                        int64_t i_293550 = add64(x_293486,
                                                                 i_295644);
                                        double defunc_0_add_arg_293551;
                                        
                                        defunc_0_add_arg_293551 =
                                            ((double *) mem_301479)[i_293550];
                                        defunc_0_f_res_293549 =
                                            defunc_0_add_arg_293551;
                                    }
                                    
                                    int64_t binop_p_293552 =
                                            sub64(defunc_0_f_res_293545,
                                                  defunc_0_g_res_293490);
                                    double defunc_0_f_res_293553 =
                                           sitofp_i64_f64(binop_p_293552);
                                    double abs_res_293554 =
                                           fabs(defunc_0_f_res_293553);
                                    double tmp1_293555 = abs_res_293554 /
                                           x_293487;
                                    double x_293556 = tmp1_293555 * tmp1_293555;
                                    double y_293557 = tmp1_293555 * x_293556;
                                    double tmp2_293558 = 1.0 - y_293557;
                                    double x_293559 = tmp2_293558 * tmp2_293558;
                                    double tmp3_293560 = tmp2_293558 * x_293559;
                                    double tmp4_293561 = defunc_0_f_res_293549 *
                                           tmp3_293560;
                                    double defunc_1_f_res_293562 =
                                           defunc_0_f_res_293553 * tmp4_293561;
                                    double defunc_0_f_res_293563;
                                    
                                    if (cond_293544) {
                                        defunc_0_f_res_293563 = 0.0;
                                    } else {
                                        int64_t i_293564 = add64(x_293486,
                                                                 i_295644);
                                        double defunc_0_add_arg_293565;
                                        
                                        defunc_0_add_arg_293565 =
                                            ((double *) mem_301482)[i_293564];
                                        defunc_0_f_res_293563 =
                                            defunc_0_add_arg_293565;
                                    }
                                    
                                    double x_293566 = a11_293531 * tmp4_293561;
                                    double y_293567 = b11_293533 *
                                           defunc_1_f_res_293562;
                                    double x_293568 = x_293566 + y_293567;
                                    double defunc_9_fit_fun_res_293569 =
                                           defunc_0_f_res_293563 * x_293568;
                                    double x_293570 = b11_293533 * tmp4_293561;
                                    double y_293571 = c11_293534 *
                                           defunc_1_f_res_293562;
                                    double x_293572 = x_293570 + y_293571;
                                    double defunc_9_slope_fun_res_293573 =
                                           defunc_0_f_res_293563 * x_293572;
                                    double defunc_1_op_res_293539 =
                                           defunc_9_fit_fun_res_293569 +
                                           redout_295642;
                                    double defunc_1_op_res_293542 =
                                           defunc_9_slope_fun_res_293573 +
                                           redout_295643;
                                    double redout_tmp_304167 =
                                           defunc_1_op_res_293539;
                                    double redout_tmp_304168 =
                                           defunc_1_op_res_293542;
                                    
                                    redout_295642 = redout_tmp_304167;
                                    redout_295643 = redout_tmp_304168;
                                }
                                defunc_2_reduce_res_293535 = redout_295642;
                                defunc_2_reduce_res_293536 = redout_295643;
                                ((double *) mem_301437.mem)[i_295656 *
                                                            t_n_m_290426 +
                                                            i_295649] =
                                    defunc_2_reduce_res_293535;
                                ((double *) mem_301441.mem)[i_295656 *
                                                            t_n_m_290426 +
                                                            i_295649] =
                                    defunc_2_reduce_res_293536;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_301720, &mem_301437,
                                         "mem_301437") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_301712, &mem_301441,
                                         "mem_301441") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301441, "mem_301441") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301437, "mem_301437") != 0)
                            return 1;
                    } else {
                        struct memblock mem_301576;
                        
                        mem_301576.references = NULL;
                        if (memblock_alloc(ctx, &mem_301576, bytes_297714,
                                           "mem_301576")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_301580;
                        
                        mem_301580.references = NULL;
                        if (memblock_alloc(ctx, &mem_301580, bytes_297714,
                                           "mem_301580")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_301603_cached_sizze_304403 <
                            (size_t) bytes_301602) {
                            mem_301603 = realloc(mem_301603, bytes_301602);
                            mem_301603_cached_sizze_304403 = bytes_301602;
                        }
                        if (mem_301618_cached_sizze_304404 <
                            (size_t) bytes_301602) {
                            mem_301618 = realloc(mem_301618, bytes_301602);
                            mem_301618_cached_sizze_304404 = bytes_301602;
                        }
                        if (mem_301621_cached_sizze_304405 <
                            (size_t) bytes_301602) {
                            mem_301621 = realloc(mem_301621, bytes_301602);
                            mem_301621_cached_sizze_304405 = bytes_301602;
                        }
                        for (int64_t i_295690 = 0; i_295690 <
                             partition_sizze_290353; i_295690++) {
                            int64_t x_293583;
                            
                            x_293583 = ((int64_t *) mem_297043)[i_295690];
                            for (int64_t i_295661 = 0; i_295661 < n_290262;
                                 i_295661++) {
                                float x_293587;
                                
                                x_293587 = ((float *) mem_297000)[i_295690 *
                                                                  n_290262 +
                                                                  i_295661];
                                
                                double x_293588;
                                
                                x_293588 =
                                    ((double *) mem_301294.mem)[i_295690 *
                                                                n_290262 +
                                                                i_295661];
                                
                                double f32_res_293589 =
                                       fpconv_f32_f64(x_293587);
                                double defunc_1_f_res_293590 = f32_res_293589 -
                                       x_293588;
                                
                                ((double *) mem_301603)[i_295661] =
                                    defunc_1_f_res_293590;
                            }
                            for (int64_t i_295667 = 0; i_295667 < n_290262;
                                 i_295667++) {
                                int64_t x_293593;
                                
                                x_293593 = ((int64_t *) mem_297040)[i_295690 *
                                                                    n_290262 +
                                                                    i_295667];
                                
                                bool cond_293594 = sle64((int64_t) 0, x_293593);
                                double defunc_0_f_res_293595;
                                
                                if (cond_293594) {
                                    bool y_293596 = slt64(x_293593, n_290262);
                                    bool bounds_check_293597 = cond_293594 &&
                                         y_293596;
                                    bool index_certs_293598;
                                    
                                    if (!bounds_check_293597) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_293593,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_290262,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_301580,
                                                           "mem_301580") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301576,
                                                           "mem_301576") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301712,
                                                           "ext_mem_301712") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301720,
                                                           "ext_mem_301720") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301728,
                                                           "ext_mem_301728") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301736,
                                                           "ext_mem_301736") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302677,
                                                           "ext_mem_302677") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302685,
                                                           "ext_mem_302685") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301294,
                                                           "mem_301294") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301283,
                                                           "ext_mem_301283") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301220,
                                                           "ext_mem_301220") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301228,
                                                           "ext_mem_301228") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300075,
                                                           "ext_mem_300075") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299950,
                                                           "ext_mem_299950") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299961,
                                                           "ext_mem_299961") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297874,
                                                           "mem_param_297874") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297866,
                                                           "mem_param_297866") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302748,
                                                           "ext_mem_302748") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302749,
                                                           "ext_mem_302749") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297852,
                                                           "mem_param_297852") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297844,
                                                           "mem_param_297844") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297836,
                                                           "mem_param_297836") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303273,
                                                           "ext_mem_303273") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303274,
                                                           "ext_mem_303274") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303275,
                                                           "ext_mem_303275") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297828,
                                                           "mem_297828") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297824,
                                                           "mem_297824") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303840,
                                                           "mem_out_303840") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303839,
                                                           "mem_out_303839") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303838,
                                                           "mem_out_303838") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_293599;
                                    
                                    defunc_0_f_res_t_res_293599 =
                                        ((double *) mem_301603)[x_293593];
                                    defunc_0_f_res_293595 =
                                        defunc_0_f_res_t_res_293599;
                                } else {
                                    defunc_0_f_res_293595 = 0.0;
                                }
                                
                                double defunc_0_f_res_293600;
                                
                                if (cond_293594) {
                                    bool y_293601 = slt64(x_293593, n_290262);
                                    bool bounds_check_293602 = cond_293594 &&
                                         y_293601;
                                    bool index_certs_293603;
                                    
                                    if (!bounds_check_293602) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_293593,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_290262,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_301580,
                                                           "mem_301580") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301576,
                                                           "mem_301576") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301712,
                                                           "ext_mem_301712") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301720,
                                                           "ext_mem_301720") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301728,
                                                           "ext_mem_301728") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301736,
                                                           "ext_mem_301736") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302677,
                                                           "ext_mem_302677") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302685,
                                                           "ext_mem_302685") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301294,
                                                           "mem_301294") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301283,
                                                           "ext_mem_301283") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301220,
                                                           "ext_mem_301220") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301228,
                                                           "ext_mem_301228") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300075,
                                                           "ext_mem_300075") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299950,
                                                           "ext_mem_299950") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299961,
                                                           "ext_mem_299961") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297874,
                                                           "mem_param_297874") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297866,
                                                           "mem_param_297866") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302748,
                                                           "ext_mem_302748") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302749,
                                                           "ext_mem_302749") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297852,
                                                           "mem_param_297852") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297844,
                                                           "mem_param_297844") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297836,
                                                           "mem_param_297836") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303273,
                                                           "ext_mem_303273") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303274,
                                                           "ext_mem_303274") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303275,
                                                           "ext_mem_303275") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297828,
                                                           "mem_297828") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297824,
                                                           "mem_297824") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303840,
                                                           "mem_out_303840") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303839,
                                                           "mem_out_303839") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303838,
                                                           "mem_out_303838") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_293604;
                                    
                                    defunc_0_f_res_t_res_293604 =
                                        ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                          (i_295690 *
                                                                           ctx_param_ext_297848 +
                                                                           x_293593 *
                                                                           ctx_param_ext_297850)];
                                    defunc_0_f_res_293600 =
                                        defunc_0_f_res_t_res_293604;
                                } else {
                                    defunc_0_f_res_293600 = 0.0;
                                }
                                ((double *) mem_301618)[i_295667] =
                                    defunc_0_f_res_293600;
                                ((double *) mem_301621)[i_295667] =
                                    defunc_0_f_res_293595;
                            }
                            for (int64_t i_295683 = 0; i_295683 < t_n_m_290426;
                                 i_295683++) {
                                int64_t x_293608;
                                
                                x_293608 = ((int64_t *) mem_297715)[i_295690 *
                                                                    t_n_m_290426 +
                                                                    i_295683];
                                
                                double x_293609;
                                
                                x_293609 = ((double *) mem_297719)[i_295690 *
                                                                   t_n_m_290426 +
                                                                   i_295683];
                                
                                int64_t min_arg_293610 = mul64(jump_t_290272,
                                                               i_295683);
                                int64_t min_res_293611 = smin64(i_290433,
                                                                min_arg_293610);
                                int64_t defunc_0_g_res_293612 =
                                        add64((int64_t) 1, min_res_293611);
                                double defunc_2_reduce_res_293613;
                                double defunc_2_reduce_res_293614;
                                double defunc_2_reduce_res_293615;
                                double defunc_2_reduce_res_293616;
                                double defunc_2_reduce_res_293617;
                                double redout_295670;
                                double redout_295671;
                                double redout_295672;
                                double redout_295673;
                                double redout_295674;
                                
                                redout_295670 = 0.0;
                                redout_295671 = 0.0;
                                redout_295672 = 0.0;
                                redout_295673 = 0.0;
                                redout_295674 = 0.0;
                                for (int64_t i_295675 = 0; i_295675 <
                                     q_t_290266; i_295675++) {
                                    bool cond_293634 = sle64(x_293583,
                                                             i_295675);
                                    int64_t defunc_0_f_res_293635;
                                    
                                    if (cond_293634) {
                                        defunc_0_f_res_293635 = (int64_t) 0;
                                    } else {
                                        int64_t i_293636 = add64(x_293608,
                                                                 i_295675);
                                        int64_t defunc_0_add_arg_293637;
                                        
                                        defunc_0_add_arg_293637 =
                                            ((int64_t *) mem_297040)[i_295690 *
                                                                     n_290262 +
                                                                     i_293636];
                                        
                                        int64_t defunc_1_add_res_293638 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_293637);
                                        
                                        defunc_0_f_res_293635 =
                                            defunc_1_add_res_293638;
                                    }
                                    
                                    double defunc_0_f_res_293639;
                                    
                                    if (cond_293634) {
                                        defunc_0_f_res_293639 = 0.0;
                                    } else {
                                        int64_t i_293640 = add64(x_293608,
                                                                 i_295675);
                                        double defunc_0_add_arg_293641;
                                        
                                        defunc_0_add_arg_293641 =
                                            ((double *) mem_301618)[i_293640];
                                        defunc_0_f_res_293639 =
                                            defunc_0_add_arg_293641;
                                    }
                                    
                                    int64_t binop_p_293642 =
                                            sub64(defunc_0_f_res_293635,
                                                  defunc_0_g_res_293612);
                                    double defunc_0_f_res_293643 =
                                           sitofp_i64_f64(binop_p_293642);
                                    double abs_res_293644 =
                                           fabs(defunc_0_f_res_293643);
                                    double tmp1_293645 = abs_res_293644 /
                                           x_293609;
                                    double x_293646 = tmp1_293645 * tmp1_293645;
                                    double y_293647 = tmp1_293645 * x_293646;
                                    double tmp2_293648 = 1.0 - y_293647;
                                    double x_293649 = tmp2_293648 * tmp2_293648;
                                    double tmp3_293650 = tmp2_293648 * x_293649;
                                    double w_j_293651 = defunc_0_f_res_293639 *
                                           tmp3_293650;
                                    double xw_j_293652 = defunc_0_f_res_293643 *
                                           w_j_293651;
                                    double x2w_j_293653 =
                                           defunc_0_f_res_293643 * xw_j_293652;
                                    double x3w_j_293654 =
                                           defunc_0_f_res_293643 * x2w_j_293653;
                                    double x4w_j_293655 =
                                           defunc_0_f_res_293643 * x3w_j_293654;
                                    double defunc_1_op_res_293620 = w_j_293651 +
                                           redout_295670;
                                    double defunc_1_op_res_293623 =
                                           xw_j_293652 + redout_295671;
                                    double defunc_1_op_res_293626 =
                                           x2w_j_293653 + redout_295672;
                                    double defunc_1_op_res_293629 =
                                           x3w_j_293654 + redout_295673;
                                    double defunc_1_op_res_293632 =
                                           x4w_j_293655 + redout_295674;
                                    double redout_tmp_304176 =
                                           defunc_1_op_res_293620;
                                    double redout_tmp_304177 =
                                           defunc_1_op_res_293623;
                                    double redout_tmp_304178 =
                                           defunc_1_op_res_293626;
                                    double redout_tmp_304179 =
                                           defunc_1_op_res_293629;
                                    double redout_tmp_304180 =
                                           defunc_1_op_res_293632;
                                    
                                    redout_295670 = redout_tmp_304176;
                                    redout_295671 = redout_tmp_304177;
                                    redout_295672 = redout_tmp_304178;
                                    redout_295673 = redout_tmp_304179;
                                    redout_295674 = redout_tmp_304180;
                                }
                                defunc_2_reduce_res_293613 = redout_295670;
                                defunc_2_reduce_res_293614 = redout_295671;
                                defunc_2_reduce_res_293615 = redout_295672;
                                defunc_2_reduce_res_293616 = redout_295673;
                                defunc_2_reduce_res_293617 = redout_295674;
                                
                                double a_293656 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293613;
                                double b_293657 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293614;
                                double c_293658 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293615;
                                double d_293659 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293616;
                                double e_293660 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293617;
                                double x_293661 = c_293658 * e_293660;
                                double y_293662 = d_293659 * d_293659;
                                double a12_293663 = x_293661 - y_293662;
                                double x_293664 = c_293658 * d_293659;
                                double y_293665 = b_293657 * e_293660;
                                double b12_293666 = x_293664 - y_293665;
                                double x_293667 = b_293657 * d_293659;
                                double y_293668 = c_293658 * c_293658;
                                double c12_293669 = x_293667 - y_293668;
                                double x_293670 = a_293656 * e_293660;
                                double b2_293671 = x_293670 - y_293668;
                                double x_293672 = b_293657 * c_293658;
                                double y_293673 = a_293656 * d_293659;
                                double c2_293674 = x_293672 - y_293673;
                                double x_293675 = a_293656 * a12_293663;
                                double y_293676 = b_293657 * b12_293666;
                                double x_293677 = x_293675 + y_293676;
                                double y_293678 = c_293658 * c12_293669;
                                double y_293679 = x_293677 + y_293678;
                                double det_293680 = 1.0 / y_293679;
                                double a12_293681 = a12_293663 * det_293680;
                                double b12_293682 = b12_293666 * det_293680;
                                double c12_293683 = c12_293669 * det_293680;
                                double b2_293684 = b2_293671 * det_293680;
                                double c2_293685 = c2_293674 * det_293680;
                                double defunc_2_reduce_res_293686;
                                double defunc_2_reduce_res_293687;
                                double redout_295676;
                                double redout_295677;
                                
                                redout_295676 = 0.0;
                                redout_295677 = 0.0;
                                for (int64_t i_295678 = 0; i_295678 <
                                     q_t_290266; i_295678++) {
                                    bool cond_293695 = sle64(x_293583,
                                                             i_295678);
                                    int64_t defunc_0_f_res_293696;
                                    
                                    if (cond_293695) {
                                        defunc_0_f_res_293696 = (int64_t) 0;
                                    } else {
                                        int64_t i_293697 = add64(x_293608,
                                                                 i_295678);
                                        int64_t defunc_0_add_arg_293698;
                                        
                                        defunc_0_add_arg_293698 =
                                            ((int64_t *) mem_297040)[i_295690 *
                                                                     n_290262 +
                                                                     i_293697];
                                        
                                        int64_t defunc_1_add_res_293699 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_293698);
                                        
                                        defunc_0_f_res_293696 =
                                            defunc_1_add_res_293699;
                                    }
                                    
                                    double defunc_0_f_res_293700;
                                    
                                    if (cond_293695) {
                                        defunc_0_f_res_293700 = 0.0;
                                    } else {
                                        int64_t i_293701 = add64(x_293608,
                                                                 i_295678);
                                        double defunc_0_add_arg_293702;
                                        
                                        defunc_0_add_arg_293702 =
                                            ((double *) mem_301618)[i_293701];
                                        defunc_0_f_res_293700 =
                                            defunc_0_add_arg_293702;
                                    }
                                    
                                    int64_t binop_p_293703 =
                                            sub64(defunc_0_f_res_293696,
                                                  defunc_0_g_res_293612);
                                    double defunc_0_f_res_293704 =
                                           sitofp_i64_f64(binop_p_293703);
                                    double abs_res_293705 =
                                           fabs(defunc_0_f_res_293704);
                                    double tmp1_293706 = abs_res_293705 /
                                           x_293609;
                                    double x_293707 = tmp1_293706 * tmp1_293706;
                                    double y_293708 = tmp1_293706 * x_293707;
                                    double tmp2_293709 = 1.0 - y_293708;
                                    double x_293710 = tmp2_293709 * tmp2_293709;
                                    double tmp3_293711 = tmp2_293709 * x_293710;
                                    double tmp4_293712 = defunc_0_f_res_293700 *
                                           tmp3_293711;
                                    double defunc_1_f_res_293713 =
                                           defunc_0_f_res_293704 * tmp4_293712;
                                    double defunc_1_f_res_293714 =
                                           defunc_0_f_res_293704 *
                                           defunc_1_f_res_293713;
                                    double defunc_0_f_res_293715;
                                    
                                    if (cond_293695) {
                                        defunc_0_f_res_293715 = 0.0;
                                    } else {
                                        int64_t i_293716 = add64(x_293608,
                                                                 i_295678);
                                        double defunc_0_add_arg_293717;
                                        
                                        defunc_0_add_arg_293717 =
                                            ((double *) mem_301621)[i_293716];
                                        defunc_0_f_res_293715 =
                                            defunc_0_add_arg_293717;
                                    }
                                    
                                    double x_293718 = a12_293681 * tmp4_293712;
                                    double y_293719 = b12_293682 *
                                           defunc_1_f_res_293713;
                                    double x_293720 = x_293718 + y_293719;
                                    double y_293721 = c12_293683 *
                                           defunc_1_f_res_293714;
                                    double x_293722 = x_293720 + y_293721;
                                    double defunc_9_fit_fun_res_293723 =
                                           defunc_0_f_res_293715 * x_293722;
                                    double x_293724 = b12_293682 * tmp4_293712;
                                    double y_293725 = b2_293684 *
                                           defunc_1_f_res_293713;
                                    double x_293726 = x_293724 + y_293725;
                                    double y_293727 = c2_293685 *
                                           defunc_1_f_res_293714;
                                    double x_293728 = x_293726 + y_293727;
                                    double defunc_9_slope_fun_res_293729 =
                                           defunc_0_f_res_293715 * x_293728;
                                    double defunc_1_op_res_293690 =
                                           defunc_9_fit_fun_res_293723 +
                                           redout_295676;
                                    double defunc_1_op_res_293693 =
                                           defunc_9_slope_fun_res_293729 +
                                           redout_295677;
                                    double redout_tmp_304181 =
                                           defunc_1_op_res_293690;
                                    double redout_tmp_304182 =
                                           defunc_1_op_res_293693;
                                    
                                    redout_295676 = redout_tmp_304181;
                                    redout_295677 = redout_tmp_304182;
                                }
                                defunc_2_reduce_res_293686 = redout_295676;
                                defunc_2_reduce_res_293687 = redout_295677;
                                ((double *) mem_301576.mem)[i_295690 *
                                                            t_n_m_290426 +
                                                            i_295683] =
                                    defunc_2_reduce_res_293686;
                                ((double *) mem_301580.mem)[i_295690 *
                                                            t_n_m_290426 +
                                                            i_295683] =
                                    defunc_2_reduce_res_293687;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_301720, &mem_301576,
                                         "mem_301576") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_301712, &mem_301580,
                                         "mem_301580") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301580, "mem_301580") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301576, "mem_301576") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_301736, &ext_mem_301720,
                                     "ext_mem_301720") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_301728, &ext_mem_301712,
                                     "ext_mem_301712") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301712,
                                       "ext_mem_301712") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301720,
                                       "ext_mem_301720") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_302685, &ext_mem_301736,
                                 "ext_mem_301736") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_302677, &ext_mem_301728,
                                 "ext_mem_301728") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_301728, "ext_mem_301728") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_301736, "ext_mem_301736") != 0)
                    return 1;
            } else {
                bool cond_293732 = sle64(jump_threshold_2_290277,
                                         jump_t_290272);
                bool cond_t_res_293733 = slt64(q_t_290266,
                                               q_threshold_1_290278);
                bool x_293734 = cond_293732 && cond_t_res_293733;
                struct memblock ext_mem_302669;
                
                ext_mem_302669.references = NULL;
                
                struct memblock ext_mem_302661;
                
                ext_mem_302661.references = NULL;
                if (x_293734) {
                    bool match_lit_293737 = (int64_t) 0 == d_t_290269;
                    int64_t binop_y_301762 = (int64_t) 8 * n_290262;
                    int64_t bytes_301763 = smax64((int64_t) 0, binop_y_301762);
                    int64_t binop_y_301818 = (int64_t) 8 * q_t_290266;
                    int64_t bytes_301819 = smax64((int64_t) 0, binop_y_301818);
                    struct memblock ext_mem_302247;
                    
                    ext_mem_302247.references = NULL;
                    
                    struct memblock ext_mem_302239;
                    
                    ext_mem_302239.references = NULL;
                    if (match_lit_293737) {
                        struct memblock mem_301747;
                        
                        mem_301747.references = NULL;
                        if (memblock_alloc(ctx, &mem_301747, bytes_297714,
                                           "mem_301747")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_304183 = 0; i_304183 <
                             partition_sizze_290353; i_304183++) {
                            for (int64_t i_304184 = 0; i_304184 < t_n_m_290426;
                                 i_304184++) {
                                ((double *) mem_301747.mem)[i_304183 *
                                                            t_n_m_290426 +
                                                            i_304184] = 0.0;
                            }
                        }
                        
                        struct memblock mem_301751;
                        
                        mem_301751.references = NULL;
                        if (memblock_alloc(ctx, &mem_301751, bytes_297714,
                                           "mem_301751")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_301764_cached_sizze_304406 <
                            (size_t) bytes_301763) {
                            mem_301764 = realloc(mem_301764, bytes_301763);
                            mem_301764_cached_sizze_304406 = bytes_301763;
                        }
                        if (mem_301779_cached_sizze_304407 <
                            (size_t) bytes_301763) {
                            mem_301779 = realloc(mem_301779, bytes_301763);
                            mem_301779_cached_sizze_304407 = bytes_301763;
                        }
                        if (mem_301782_cached_sizze_304408 <
                            (size_t) bytes_301763) {
                            mem_301782 = realloc(mem_301782, bytes_301763);
                            mem_301782_cached_sizze_304408 = bytes_301763;
                        }
                        if (mem_301820_cached_sizze_304409 <
                            (size_t) bytes_301819) {
                            mem_301820 = realloc(mem_301820, bytes_301819);
                            mem_301820_cached_sizze_304409 = bytes_301819;
                        }
                        for (int64_t i_295717 = 0; i_295717 <
                             partition_sizze_290353; i_295717++) {
                            int64_t x_293747;
                            
                            x_293747 = ((int64_t *) mem_297043)[i_295717];
                            for (int64_t i_295695 = 0; i_295695 < n_290262;
                                 i_295695++) {
                                float x_293751;
                                
                                x_293751 = ((float *) mem_297000)[i_295717 *
                                                                  n_290262 +
                                                                  i_295695];
                                
                                double x_293752;
                                
                                x_293752 =
                                    ((double *) mem_301294.mem)[i_295717 *
                                                                n_290262 +
                                                                i_295695];
                                
                                double f32_res_293753 =
                                       fpconv_f32_f64(x_293751);
                                double defunc_1_f_res_293754 = f32_res_293753 -
                                       x_293752;
                                
                                ((double *) mem_301764)[i_295695] =
                                    defunc_1_f_res_293754;
                            }
                            for (int64_t i_295701 = 0; i_295701 < n_290262;
                                 i_295701++) {
                                int64_t x_293757;
                                
                                x_293757 = ((int64_t *) mem_297040)[i_295717 *
                                                                    n_290262 +
                                                                    i_295701];
                                
                                bool cond_293758 = sle64((int64_t) 0, x_293757);
                                double defunc_0_f_res_293759;
                                
                                if (cond_293758) {
                                    bool y_293760 = slt64(x_293757, n_290262);
                                    bool bounds_check_293761 = cond_293758 &&
                                         y_293760;
                                    bool index_certs_293762;
                                    
                                    if (!bounds_check_293761) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_293757,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_290262,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_301751,
                                                           "mem_301751") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301747,
                                                           "mem_301747") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302239,
                                                           "ext_mem_302239") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302247,
                                                           "ext_mem_302247") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302661,
                                                           "ext_mem_302661") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302669,
                                                           "ext_mem_302669") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302677,
                                                           "ext_mem_302677") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302685,
                                                           "ext_mem_302685") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301294,
                                                           "mem_301294") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301283,
                                                           "ext_mem_301283") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301220,
                                                           "ext_mem_301220") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301228,
                                                           "ext_mem_301228") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300075,
                                                           "ext_mem_300075") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299950,
                                                           "ext_mem_299950") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299961,
                                                           "ext_mem_299961") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297874,
                                                           "mem_param_297874") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297866,
                                                           "mem_param_297866") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302748,
                                                           "ext_mem_302748") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302749,
                                                           "ext_mem_302749") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297852,
                                                           "mem_param_297852") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297844,
                                                           "mem_param_297844") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297836,
                                                           "mem_param_297836") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303273,
                                                           "ext_mem_303273") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303274,
                                                           "ext_mem_303274") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303275,
                                                           "ext_mem_303275") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297828,
                                                           "mem_297828") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297824,
                                                           "mem_297824") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303840,
                                                           "mem_out_303840") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303839,
                                                           "mem_out_303839") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303838,
                                                           "mem_out_303838") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_293763;
                                    
                                    defunc_0_f_res_t_res_293763 =
                                        ((double *) mem_301764)[x_293757];
                                    defunc_0_f_res_293759 =
                                        defunc_0_f_res_t_res_293763;
                                } else {
                                    defunc_0_f_res_293759 = 0.0;
                                }
                                
                                double defunc_0_f_res_293764;
                                
                                if (cond_293758) {
                                    bool y_293765 = slt64(x_293757, n_290262);
                                    bool bounds_check_293766 = cond_293758 &&
                                         y_293765;
                                    bool index_certs_293767;
                                    
                                    if (!bounds_check_293766) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_293757,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_290262,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_301751,
                                                           "mem_301751") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301747,
                                                           "mem_301747") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302239,
                                                           "ext_mem_302239") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302247,
                                                           "ext_mem_302247") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302661,
                                                           "ext_mem_302661") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302669,
                                                           "ext_mem_302669") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302677,
                                                           "ext_mem_302677") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302685,
                                                           "ext_mem_302685") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301294,
                                                           "mem_301294") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301283,
                                                           "ext_mem_301283") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301220,
                                                           "ext_mem_301220") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301228,
                                                           "ext_mem_301228") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300075,
                                                           "ext_mem_300075") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299950,
                                                           "ext_mem_299950") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299961,
                                                           "ext_mem_299961") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297874,
                                                           "mem_param_297874") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297866,
                                                           "mem_param_297866") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302748,
                                                           "ext_mem_302748") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302749,
                                                           "ext_mem_302749") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297852,
                                                           "mem_param_297852") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297844,
                                                           "mem_param_297844") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297836,
                                                           "mem_param_297836") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303273,
                                                           "ext_mem_303273") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303274,
                                                           "ext_mem_303274") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303275,
                                                           "ext_mem_303275") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297828,
                                                           "mem_297828") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297824,
                                                           "mem_297824") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303840,
                                                           "mem_out_303840") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303839,
                                                           "mem_out_303839") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303838,
                                                           "mem_out_303838") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_293768;
                                    
                                    defunc_0_f_res_t_res_293768 =
                                        ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                          (i_295717 *
                                                                           ctx_param_ext_297848 +
                                                                           x_293757 *
                                                                           ctx_param_ext_297850)];
                                    defunc_0_f_res_293764 =
                                        defunc_0_f_res_t_res_293768;
                                } else {
                                    defunc_0_f_res_293764 = 0.0;
                                }
                                ((double *) mem_301779)[i_295701] =
                                    defunc_0_f_res_293764;
                                ((double *) mem_301782)[i_295701] =
                                    defunc_0_f_res_293759;
                            }
                            for (int64_t i_295713 = 0; i_295713 < t_n_m_290426;
                                 i_295713++) {
                                int64_t x_293771;
                                
                                x_293771 = ((int64_t *) mem_297715)[i_295717 *
                                                                    t_n_m_290426 +
                                                                    i_295713];
                                
                                double x_293772;
                                
                                x_293772 = ((double *) mem_297719)[i_295717 *
                                                                   t_n_m_290426 +
                                                                   i_295713];
                                
                                int64_t min_arg_293773 = mul64(jump_t_290272,
                                                               i_295713);
                                int64_t min_res_293774 = smin64(i_290433,
                                                                min_arg_293773);
                                int64_t defunc_0_g_res_293775 =
                                        add64((int64_t) 1, min_res_293774);
                                double defunc_2_reduce_res_293776;
                                double redout_295705 = 0.0;
                                
                                for (int64_t i_295707 = 0; i_295707 <
                                     q_t_290266; i_295707++) {
                                    bool cond_293782 = sle64(x_293747,
                                                             i_295707);
                                    int64_t defunc_0_f_res_293783;
                                    
                                    if (cond_293782) {
                                        defunc_0_f_res_293783 = (int64_t) 0;
                                    } else {
                                        int64_t i_293784 = add64(x_293771,
                                                                 i_295707);
                                        int64_t defunc_0_add_arg_293785;
                                        
                                        defunc_0_add_arg_293785 =
                                            ((int64_t *) mem_297040)[i_295717 *
                                                                     n_290262 +
                                                                     i_293784];
                                        
                                        int64_t defunc_1_add_res_293786 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_293785);
                                        
                                        defunc_0_f_res_293783 =
                                            defunc_1_add_res_293786;
                                    }
                                    
                                    double defunc_0_f_res_293787;
                                    
                                    if (cond_293782) {
                                        defunc_0_f_res_293787 = 0.0;
                                    } else {
                                        int64_t i_293788 = add64(x_293771,
                                                                 i_295707);
                                        double defunc_0_add_arg_293789;
                                        
                                        defunc_0_add_arg_293789 =
                                            ((double *) mem_301779)[i_293788];
                                        defunc_0_f_res_293787 =
                                            defunc_0_add_arg_293789;
                                    }
                                    
                                    int64_t binop_p_293790 =
                                            sub64(defunc_0_f_res_293783,
                                                  defunc_0_g_res_293775);
                                    double defunc_0_f_res_293791 =
                                           sitofp_i64_f64(binop_p_293790);
                                    double abs_res_293792 =
                                           fabs(defunc_0_f_res_293791);
                                    double tmp1_293793 = abs_res_293792 /
                                           x_293772;
                                    double x_293794 = tmp1_293793 * tmp1_293793;
                                    double y_293795 = tmp1_293793 * x_293794;
                                    double tmp2_293796 = 1.0 - y_293795;
                                    double x_293797 = tmp2_293796 * tmp2_293796;
                                    double tmp3_293798 = tmp2_293796 * x_293797;
                                    double tmp4_293799 = defunc_0_f_res_293787 *
                                           tmp3_293798;
                                    double defunc_1_op_res_293780 =
                                           tmp4_293799 + redout_295705;
                                    
                                    ((double *) mem_301820)[i_295707] =
                                        tmp4_293799;
                                    
                                    double redout_tmp_304190 =
                                           defunc_1_op_res_293780;
                                    
                                    redout_295705 = redout_tmp_304190;
                                }
                                defunc_2_reduce_res_293776 = redout_295705;
                                
                                double a_293800 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293776;
                                double a0_293801 = 1.0 / a_293800;
                                double defunc_2_reduce_res_293802;
                                double redout_295709 = 0.0;
                                
                                for (int64_t i_295710 = 0; i_295710 <
                                     q_t_290266; i_295710++) {
                                    double x_293807;
                                    
                                    x_293807 =
                                        ((double *) mem_301820)[i_295710];
                                    
                                    bool cond_293808 = sle64(x_293747,
                                                             i_295710);
                                    double defunc_0_f_res_293809;
                                    
                                    if (cond_293808) {
                                        defunc_0_f_res_293809 = 0.0;
                                    } else {
                                        int64_t i_293810 = add64(x_293771,
                                                                 i_295710);
                                        double defunc_0_add_arg_293811;
                                        
                                        defunc_0_add_arg_293811 =
                                            ((double *) mem_301782)[i_293810];
                                        defunc_0_f_res_293809 =
                                            defunc_0_add_arg_293811;
                                    }
                                    
                                    double x_293812 = a0_293801 * x_293807;
                                    double defunc_9_fit_fun_res_293813 =
                                           defunc_0_f_res_293809 * x_293812;
                                    double defunc_1_op_res_293805 =
                                           defunc_9_fit_fun_res_293813 +
                                           redout_295709;
                                    double redout_tmp_304192 =
                                           defunc_1_op_res_293805;
                                    
                                    redout_295709 = redout_tmp_304192;
                                }
                                defunc_2_reduce_res_293802 = redout_295709;
                                ((double *) mem_301751.mem)[i_295717 *
                                                            t_n_m_290426 +
                                                            i_295713] =
                                    defunc_2_reduce_res_293802;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_302247, &mem_301751,
                                         "mem_301751") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_302239, &mem_301747,
                                         "mem_301747") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301751, "mem_301751") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301747, "mem_301747") != 0)
                            return 1;
                    } else {
                        bool match_lit_293816 = (int64_t) 1 == d_t_290269;
                        int64_t binop_y_301883 = (int64_t) 8 * n_290262;
                        int64_t bytes_301884 = smax64((int64_t) 0,
                                                      binop_y_301883);
                        int64_t binop_y_301950 = (int64_t) 8 * q_t_290266;
                        int64_t bytes_301951 = smax64((int64_t) 0,
                                                      binop_y_301950);
                        int64_t binop_y_302052 = (int64_t) 8 * n_290262;
                        int64_t bytes_302053 = smax64((int64_t) 0,
                                                      binop_y_302052);
                        int64_t binop_y_302119 = (int64_t) 8 * q_t_290266;
                        int64_t bytes_302120 = smax64((int64_t) 0,
                                                      binop_y_302119);
                        struct memblock ext_mem_302231;
                        
                        ext_mem_302231.references = NULL;
                        
                        struct memblock ext_mem_302223;
                        
                        ext_mem_302223.references = NULL;
                        if (match_lit_293816) {
                            struct memblock mem_301858;
                            
                            mem_301858.references = NULL;
                            if (memblock_alloc(ctx, &mem_301858, bytes_297714,
                                               "mem_301858")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_301862;
                            
                            mem_301862.references = NULL;
                            if (memblock_alloc(ctx, &mem_301862, bytes_297714,
                                               "mem_301862")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_301885_cached_sizze_304410 <
                                (size_t) bytes_301884) {
                                mem_301885 = realloc(mem_301885, bytes_301884);
                                mem_301885_cached_sizze_304410 = bytes_301884;
                            }
                            if (mem_301900_cached_sizze_304411 <
                                (size_t) bytes_301884) {
                                mem_301900 = realloc(mem_301900, bytes_301884);
                                mem_301900_cached_sizze_304411 = bytes_301884;
                            }
                            if (mem_301903_cached_sizze_304412 <
                                (size_t) bytes_301884) {
                                mem_301903 = realloc(mem_301903, bytes_301884);
                                mem_301903_cached_sizze_304412 = bytes_301884;
                            }
                            if (mem_301952_cached_sizze_304413 <
                                (size_t) bytes_301951) {
                                mem_301952 = realloc(mem_301952, bytes_301951);
                                mem_301952_cached_sizze_304413 = bytes_301951;
                            }
                            if (mem_301955_cached_sizze_304414 <
                                (size_t) bytes_301951) {
                                mem_301955 = realloc(mem_301955, bytes_301951);
                                mem_301955_cached_sizze_304414 = bytes_301951;
                            }
                            for (int64_t i_295754 = 0; i_295754 <
                                 partition_sizze_290353; i_295754++) {
                                int64_t x_293826;
                                
                                x_293826 = ((int64_t *) mem_297043)[i_295754];
                                for (int64_t i_295721 = 0; i_295721 < n_290262;
                                     i_295721++) {
                                    float x_293830;
                                    
                                    x_293830 = ((float *) mem_297000)[i_295754 *
                                                                      n_290262 +
                                                                      i_295721];
                                    
                                    double x_293831;
                                    
                                    x_293831 =
                                        ((double *) mem_301294.mem)[i_295754 *
                                                                    n_290262 +
                                                                    i_295721];
                                    
                                    double f32_res_293832 =
                                           fpconv_f32_f64(x_293830);
                                    double defunc_1_f_res_293833 =
                                           f32_res_293832 - x_293831;
                                    
                                    ((double *) mem_301885)[i_295721] =
                                        defunc_1_f_res_293833;
                                }
                                for (int64_t i_295727 = 0; i_295727 < n_290262;
                                     i_295727++) {
                                    int64_t x_293836;
                                    
                                    x_293836 =
                                        ((int64_t *) mem_297040)[i_295754 *
                                                                 n_290262 +
                                                                 i_295727];
                                    
                                    bool cond_293837 = sle64((int64_t) 0,
                                                             x_293836);
                                    double defunc_0_f_res_293838;
                                    
                                    if (cond_293837) {
                                        bool y_293839 = slt64(x_293836,
                                                              n_290262);
                                        bool bounds_check_293840 =
                                             cond_293837 && y_293839;
                                        bool index_certs_293841;
                                        
                                        if (!bounds_check_293840) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_293836,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_290262,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_301862,
                                                               "mem_301862") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301858,
                                                               "mem_301858") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302223,
                                                               "ext_mem_302223") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302231,
                                                               "ext_mem_302231") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302239,
                                                               "ext_mem_302239") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302247,
                                                               "ext_mem_302247") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302661,
                                                               "ext_mem_302661") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302669,
                                                               "ext_mem_302669") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302677,
                                                               "ext_mem_302677") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302685,
                                                               "ext_mem_302685") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301294,
                                                               "mem_301294") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301283,
                                                               "ext_mem_301283") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301220,
                                                               "ext_mem_301220") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301228,
                                                               "ext_mem_301228") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300075,
                                                               "ext_mem_300075") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299950,
                                                               "ext_mem_299950") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299961,
                                                               "ext_mem_299961") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297874,
                                                               "mem_param_297874") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297866,
                                                               "mem_param_297866") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302748,
                                                               "ext_mem_302748") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302749,
                                                               "ext_mem_302749") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297852,
                                                               "mem_param_297852") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297844,
                                                               "mem_param_297844") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297836,
                                                               "mem_param_297836") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303273,
                                                               "ext_mem_303273") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303274,
                                                               "ext_mem_303274") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303275,
                                                               "ext_mem_303275") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297828,
                                                               "mem_297828") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297824,
                                                               "mem_297824") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303840,
                                                               "mem_out_303840") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303839,
                                                               "mem_out_303839") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303838,
                                                               "mem_out_303838") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_293842;
                                        
                                        defunc_0_f_res_t_res_293842 =
                                            ((double *) mem_301885)[x_293836];
                                        defunc_0_f_res_293838 =
                                            defunc_0_f_res_t_res_293842;
                                    } else {
                                        defunc_0_f_res_293838 = 0.0;
                                    }
                                    
                                    double defunc_0_f_res_293843;
                                    
                                    if (cond_293837) {
                                        bool y_293844 = slt64(x_293836,
                                                              n_290262);
                                        bool bounds_check_293845 =
                                             cond_293837 && y_293844;
                                        bool index_certs_293846;
                                        
                                        if (!bounds_check_293845) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_293836,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_290262,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_301862,
                                                               "mem_301862") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301858,
                                                               "mem_301858") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302223,
                                                               "ext_mem_302223") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302231,
                                                               "ext_mem_302231") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302239,
                                                               "ext_mem_302239") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302247,
                                                               "ext_mem_302247") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302661,
                                                               "ext_mem_302661") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302669,
                                                               "ext_mem_302669") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302677,
                                                               "ext_mem_302677") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302685,
                                                               "ext_mem_302685") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301294,
                                                               "mem_301294") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301283,
                                                               "ext_mem_301283") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301220,
                                                               "ext_mem_301220") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301228,
                                                               "ext_mem_301228") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300075,
                                                               "ext_mem_300075") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299950,
                                                               "ext_mem_299950") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299961,
                                                               "ext_mem_299961") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297874,
                                                               "mem_param_297874") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297866,
                                                               "mem_param_297866") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302748,
                                                               "ext_mem_302748") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302749,
                                                               "ext_mem_302749") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297852,
                                                               "mem_param_297852") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297844,
                                                               "mem_param_297844") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297836,
                                                               "mem_param_297836") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303273,
                                                               "ext_mem_303273") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303274,
                                                               "ext_mem_303274") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303275,
                                                               "ext_mem_303275") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297828,
                                                               "mem_297828") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297824,
                                                               "mem_297824") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303840,
                                                               "mem_out_303840") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303839,
                                                               "mem_out_303839") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303838,
                                                               "mem_out_303838") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_293847;
                                        
                                        defunc_0_f_res_t_res_293847 =
                                            ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                              (i_295754 *
                                                                               ctx_param_ext_297848 +
                                                                               x_293836 *
                                                                               ctx_param_ext_297850)];
                                        defunc_0_f_res_293843 =
                                            defunc_0_f_res_t_res_293847;
                                    } else {
                                        defunc_0_f_res_293843 = 0.0;
                                    }
                                    ((double *) mem_301900)[i_295727] =
                                        defunc_0_f_res_293843;
                                    ((double *) mem_301903)[i_295727] =
                                        defunc_0_f_res_293838;
                                }
                                for (int64_t i_295747 = 0; i_295747 <
                                     t_n_m_290426; i_295747++) {
                                    int64_t x_293851;
                                    
                                    x_293851 =
                                        ((int64_t *) mem_297715)[i_295754 *
                                                                 t_n_m_290426 +
                                                                 i_295747];
                                    
                                    double x_293852;
                                    
                                    x_293852 =
                                        ((double *) mem_297719)[i_295754 *
                                                                t_n_m_290426 +
                                                                i_295747];
                                    
                                    int64_t min_arg_293853 =
                                            mul64(jump_t_290272, i_295747);
                                    int64_t min_res_293854 = smin64(i_290433,
                                                                    min_arg_293853);
                                    int64_t defunc_0_g_res_293855 =
                                            add64((int64_t) 1, min_res_293854);
                                    double defunc_2_reduce_res_293879;
                                    double defunc_2_reduce_res_293880;
                                    double defunc_2_reduce_res_293881;
                                    double redout_295732;
                                    double redout_295733;
                                    double redout_295734;
                                    
                                    redout_295732 = 0.0;
                                    redout_295733 = 0.0;
                                    redout_295734 = 0.0;
                                    for (int64_t i_295737 = 0; i_295737 <
                                         q_t_290266; i_295737++) {
                                        bool cond_293894 = sle64(x_293826,
                                                                 i_295737);
                                        int64_t defunc_0_f_res_293895;
                                        
                                        if (cond_293894) {
                                            defunc_0_f_res_293895 = (int64_t) 0;
                                        } else {
                                            int64_t i_293896 = add64(x_293851,
                                                                     i_295737);
                                            int64_t defunc_0_add_arg_293897;
                                            
                                            defunc_0_add_arg_293897 =
                                                ((int64_t *) mem_297040)[i_295754 *
                                                                         n_290262 +
                                                                         i_293896];
                                            
                                            int64_t defunc_1_add_res_293898 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_293897);
                                            
                                            defunc_0_f_res_293895 =
                                                defunc_1_add_res_293898;
                                        }
                                        
                                        double defunc_0_f_res_293899;
                                        
                                        if (cond_293894) {
                                            defunc_0_f_res_293899 = 0.0;
                                        } else {
                                            int64_t i_293900 = add64(x_293851,
                                                                     i_295737);
                                            double defunc_0_add_arg_293901;
                                            
                                            defunc_0_add_arg_293901 =
                                                ((double *) mem_301900)[i_293900];
                                            defunc_0_f_res_293899 =
                                                defunc_0_add_arg_293901;
                                        }
                                        
                                        int64_t binop_p_293902 =
                                                sub64(defunc_0_f_res_293895,
                                                      defunc_0_g_res_293855);
                                        double defunc_0_f_res_293903 =
                                               sitofp_i64_f64(binop_p_293902);
                                        double abs_res_293904 =
                                               fabs(defunc_0_f_res_293903);
                                        double tmp1_293905 = abs_res_293904 /
                                               x_293852;
                                        double x_293906 = tmp1_293905 *
                                               tmp1_293905;
                                        double y_293907 = tmp1_293905 *
                                               x_293906;
                                        double tmp2_293908 = 1.0 - y_293907;
                                        double x_293909 = tmp2_293908 *
                                               tmp2_293908;
                                        double tmp3_293910 = tmp2_293908 *
                                               x_293909;
                                        double tmp4_293911 =
                                               defunc_0_f_res_293899 *
                                               tmp3_293910;
                                        double defunc_1_f_res_293912 =
                                               defunc_0_f_res_293903 *
                                               tmp4_293911;
                                        double defunc_1_f_res_293913 =
                                               defunc_0_f_res_293903 *
                                               defunc_1_f_res_293912;
                                        double defunc_1_op_res_293886 =
                                               tmp4_293911 + redout_295732;
                                        double defunc_1_op_res_293889 =
                                               defunc_1_f_res_293912 +
                                               redout_295733;
                                        double defunc_1_op_res_293892 =
                                               defunc_1_f_res_293913 +
                                               redout_295734;
                                        
                                        ((double *) mem_301952)[i_295737] =
                                            defunc_1_f_res_293912;
                                        ((double *) mem_301955)[i_295737] =
                                            tmp4_293911;
                                        
                                        double redout_tmp_304200 =
                                               defunc_1_op_res_293886;
                                        double redout_tmp_304201 =
                                               defunc_1_op_res_293889;
                                        double redout_tmp_304202 =
                                               defunc_1_op_res_293892;
                                        
                                        redout_295732 = redout_tmp_304200;
                                        redout_295733 = redout_tmp_304201;
                                        redout_295734 = redout_tmp_304202;
                                    }
                                    defunc_2_reduce_res_293879 = redout_295732;
                                    defunc_2_reduce_res_293880 = redout_295733;
                                    defunc_2_reduce_res_293881 = redout_295734;
                                    
                                    double a_293919 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293879;
                                    double b_293920 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293880;
                                    double c_293921 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293881;
                                    double x_293922 = a_293919 * c_293921;
                                    double y_293923 = b_293920 * b_293920;
                                    double y_293924 = x_293922 - y_293923;
                                    double det1_293925 = 1.0 / y_293924;
                                    double a11_293926 = c_293921 * det1_293925;
                                    double x_293927 = 0.0 - b_293920;
                                    double b11_293928 = det1_293925 * x_293927;
                                    double c11_293929 = a_293919 * det1_293925;
                                    double defunc_2_reduce_res_293930;
                                    double defunc_2_reduce_res_293931;
                                    double redout_295740;
                                    double redout_295741;
                                    
                                    redout_295740 = 0.0;
                                    redout_295741 = 0.0;
                                    for (int64_t i_295742 = 0; i_295742 <
                                         q_t_290266; i_295742++) {
                                        double x_293939;
                                        
                                        x_293939 =
                                            ((double *) mem_301955)[i_295742];
                                        
                                        double x_293940;
                                        
                                        x_293940 =
                                            ((double *) mem_301952)[i_295742];
                                        
                                        bool cond_293941 = sle64(x_293826,
                                                                 i_295742);
                                        double defunc_0_f_res_293942;
                                        
                                        if (cond_293941) {
                                            defunc_0_f_res_293942 = 0.0;
                                        } else {
                                            int64_t i_293943 = add64(x_293851,
                                                                     i_295742);
                                            double defunc_0_add_arg_293944;
                                            
                                            defunc_0_add_arg_293944 =
                                                ((double *) mem_301903)[i_293943];
                                            defunc_0_f_res_293942 =
                                                defunc_0_add_arg_293944;
                                        }
                                        
                                        double x_293945 = a11_293926 * x_293939;
                                        double y_293946 = b11_293928 * x_293940;
                                        double x_293947 = x_293945 + y_293946;
                                        double defunc_9_fit_fun_res_293948 =
                                               defunc_0_f_res_293942 * x_293947;
                                        double x_293949 = b11_293928 * x_293939;
                                        double y_293950 = c11_293929 * x_293940;
                                        double x_293951 = x_293949 + y_293950;
                                        double defunc_9_slope_fun_res_293952 =
                                               defunc_0_f_res_293942 * x_293951;
                                        double defunc_1_op_res_293934 =
                                               defunc_9_fit_fun_res_293948 +
                                               redout_295740;
                                        double defunc_1_op_res_293937 =
                                               defunc_9_slope_fun_res_293952 +
                                               redout_295741;
                                        double redout_tmp_304205 =
                                               defunc_1_op_res_293934;
                                        double redout_tmp_304206 =
                                               defunc_1_op_res_293937;
                                        
                                        redout_295740 = redout_tmp_304205;
                                        redout_295741 = redout_tmp_304206;
                                    }
                                    defunc_2_reduce_res_293930 = redout_295740;
                                    defunc_2_reduce_res_293931 = redout_295741;
                                    ((double *) mem_301858.mem)[i_295754 *
                                                                t_n_m_290426 +
                                                                i_295747] =
                                        defunc_2_reduce_res_293930;
                                    ((double *) mem_301862.mem)[i_295754 *
                                                                t_n_m_290426 +
                                                                i_295747] =
                                        defunc_2_reduce_res_293931;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_302231, &mem_301858,
                                             "mem_301858") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_302223, &mem_301862,
                                             "mem_301862") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301862,
                                               "mem_301862") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301858,
                                               "mem_301858") != 0)
                                return 1;
                        } else {
                            struct memblock mem_302027;
                            
                            mem_302027.references = NULL;
                            if (memblock_alloc(ctx, &mem_302027, bytes_297714,
                                               "mem_302027")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_302031;
                            
                            mem_302031.references = NULL;
                            if (memblock_alloc(ctx, &mem_302031, bytes_297714,
                                               "mem_302031")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_302054_cached_sizze_304415 <
                                (size_t) bytes_302053) {
                                mem_302054 = realloc(mem_302054, bytes_302053);
                                mem_302054_cached_sizze_304415 = bytes_302053;
                            }
                            if (mem_302069_cached_sizze_304416 <
                                (size_t) bytes_302053) {
                                mem_302069 = realloc(mem_302069, bytes_302053);
                                mem_302069_cached_sizze_304416 = bytes_302053;
                            }
                            if (mem_302072_cached_sizze_304417 <
                                (size_t) bytes_302053) {
                                mem_302072 = realloc(mem_302072, bytes_302053);
                                mem_302072_cached_sizze_304417 = bytes_302053;
                            }
                            if (mem_302121_cached_sizze_304418 <
                                (size_t) bytes_302120) {
                                mem_302121 = realloc(mem_302121, bytes_302120);
                                mem_302121_cached_sizze_304418 = bytes_302120;
                            }
                            if (mem_302124_cached_sizze_304419 <
                                (size_t) bytes_302120) {
                                mem_302124 = realloc(mem_302124, bytes_302120);
                                mem_302124_cached_sizze_304419 = bytes_302120;
                            }
                            if (mem_302151_cached_sizze_304420 <
                                (size_t) bytes_302120) {
                                mem_302151 = realloc(mem_302151, bytes_302120);
                                mem_302151_cached_sizze_304420 = bytes_302120;
                            }
                            if (mem_302154_cached_sizze_304421 <
                                (size_t) bytes_302120) {
                                mem_302154 = realloc(mem_302154, bytes_302120);
                                mem_302154_cached_sizze_304421 = bytes_302120;
                            }
                            for (int64_t i_295801 = 0; i_295801 <
                                 partition_sizze_290353; i_295801++) {
                                int64_t x_293962;
                                
                                x_293962 = ((int64_t *) mem_297043)[i_295801];
                                for (int64_t i_295759 = 0; i_295759 < n_290262;
                                     i_295759++) {
                                    float x_293966;
                                    
                                    x_293966 = ((float *) mem_297000)[i_295801 *
                                                                      n_290262 +
                                                                      i_295759];
                                    
                                    double x_293967;
                                    
                                    x_293967 =
                                        ((double *) mem_301294.mem)[i_295801 *
                                                                    n_290262 +
                                                                    i_295759];
                                    
                                    double f32_res_293968 =
                                           fpconv_f32_f64(x_293966);
                                    double defunc_1_f_res_293969 =
                                           f32_res_293968 - x_293967;
                                    
                                    ((double *) mem_302054)[i_295759] =
                                        defunc_1_f_res_293969;
                                }
                                for (int64_t i_295765 = 0; i_295765 < n_290262;
                                     i_295765++) {
                                    int64_t x_293972;
                                    
                                    x_293972 =
                                        ((int64_t *) mem_297040)[i_295801 *
                                                                 n_290262 +
                                                                 i_295765];
                                    
                                    bool cond_293973 = sle64((int64_t) 0,
                                                             x_293972);
                                    double defunc_0_f_res_293974;
                                    
                                    if (cond_293973) {
                                        bool y_293975 = slt64(x_293972,
                                                              n_290262);
                                        bool bounds_check_293976 =
                                             cond_293973 && y_293975;
                                        bool index_certs_293977;
                                        
                                        if (!bounds_check_293976) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_293972,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_290262,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_302031,
                                                               "mem_302031") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_302027,
                                                               "mem_302027") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302223,
                                                               "ext_mem_302223") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302231,
                                                               "ext_mem_302231") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302239,
                                                               "ext_mem_302239") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302247,
                                                               "ext_mem_302247") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302661,
                                                               "ext_mem_302661") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302669,
                                                               "ext_mem_302669") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302677,
                                                               "ext_mem_302677") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302685,
                                                               "ext_mem_302685") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301294,
                                                               "mem_301294") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301283,
                                                               "ext_mem_301283") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301220,
                                                               "ext_mem_301220") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301228,
                                                               "ext_mem_301228") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300075,
                                                               "ext_mem_300075") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299950,
                                                               "ext_mem_299950") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299961,
                                                               "ext_mem_299961") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297874,
                                                               "mem_param_297874") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297866,
                                                               "mem_param_297866") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302748,
                                                               "ext_mem_302748") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302749,
                                                               "ext_mem_302749") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297852,
                                                               "mem_param_297852") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297844,
                                                               "mem_param_297844") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297836,
                                                               "mem_param_297836") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303273,
                                                               "ext_mem_303273") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303274,
                                                               "ext_mem_303274") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303275,
                                                               "ext_mem_303275") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297828,
                                                               "mem_297828") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297824,
                                                               "mem_297824") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303840,
                                                               "mem_out_303840") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303839,
                                                               "mem_out_303839") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303838,
                                                               "mem_out_303838") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_293978;
                                        
                                        defunc_0_f_res_t_res_293978 =
                                            ((double *) mem_302054)[x_293972];
                                        defunc_0_f_res_293974 =
                                            defunc_0_f_res_t_res_293978;
                                    } else {
                                        defunc_0_f_res_293974 = 0.0;
                                    }
                                    
                                    double defunc_0_f_res_293979;
                                    
                                    if (cond_293973) {
                                        bool y_293980 = slt64(x_293972,
                                                              n_290262);
                                        bool bounds_check_293981 =
                                             cond_293973 && y_293980;
                                        bool index_certs_293982;
                                        
                                        if (!bounds_check_293981) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_293972,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_290262,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_302031,
                                                               "mem_302031") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_302027,
                                                               "mem_302027") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302223,
                                                               "ext_mem_302223") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302231,
                                                               "ext_mem_302231") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302239,
                                                               "ext_mem_302239") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302247,
                                                               "ext_mem_302247") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302661,
                                                               "ext_mem_302661") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302669,
                                                               "ext_mem_302669") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302677,
                                                               "ext_mem_302677") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302685,
                                                               "ext_mem_302685") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301294,
                                                               "mem_301294") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301283,
                                                               "ext_mem_301283") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301220,
                                                               "ext_mem_301220") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301228,
                                                               "ext_mem_301228") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300075,
                                                               "ext_mem_300075") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299950,
                                                               "ext_mem_299950") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299961,
                                                               "ext_mem_299961") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297874,
                                                               "mem_param_297874") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297866,
                                                               "mem_param_297866") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302748,
                                                               "ext_mem_302748") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302749,
                                                               "ext_mem_302749") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297852,
                                                               "mem_param_297852") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297844,
                                                               "mem_param_297844") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297836,
                                                               "mem_param_297836") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303273,
                                                               "ext_mem_303273") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303274,
                                                               "ext_mem_303274") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303275,
                                                               "ext_mem_303275") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297828,
                                                               "mem_297828") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297824,
                                                               "mem_297824") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303840,
                                                               "mem_out_303840") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303839,
                                                               "mem_out_303839") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303838,
                                                               "mem_out_303838") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_293983;
                                        
                                        defunc_0_f_res_t_res_293983 =
                                            ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                              (i_295801 *
                                                                               ctx_param_ext_297848 +
                                                                               x_293972 *
                                                                               ctx_param_ext_297850)];
                                        defunc_0_f_res_293979 =
                                            defunc_0_f_res_t_res_293983;
                                    } else {
                                        defunc_0_f_res_293979 = 0.0;
                                    }
                                    ((double *) mem_302069)[i_295765] =
                                        defunc_0_f_res_293979;
                                    ((double *) mem_302072)[i_295765] =
                                        defunc_0_f_res_293974;
                                }
                                for (int64_t i_295794 = 0; i_295794 <
                                     t_n_m_290426; i_295794++) {
                                    int64_t x_293987;
                                    
                                    x_293987 =
                                        ((int64_t *) mem_297715)[i_295801 *
                                                                 t_n_m_290426 +
                                                                 i_295794];
                                    
                                    double x_293988;
                                    
                                    x_293988 =
                                        ((double *) mem_297719)[i_295801 *
                                                                t_n_m_290426 +
                                                                i_295794];
                                    
                                    int64_t min_arg_293989 =
                                            mul64(jump_t_290272, i_295794);
                                    int64_t min_res_293990 = smin64(i_290433,
                                                                    min_arg_293989);
                                    int64_t defunc_0_g_res_293991 =
                                            add64((int64_t) 1, min_res_293990);
                                    
                                    for (int64_t i_295772 = 0; i_295772 <
                                         q_t_290266; i_295772++) {
                                        bool cond_293995 = sle64(x_293962,
                                                                 i_295772);
                                        int64_t defunc_0_f_res_293996;
                                        
                                        if (cond_293995) {
                                            defunc_0_f_res_293996 = (int64_t) 0;
                                        } else {
                                            int64_t i_293997 = add64(x_293987,
                                                                     i_295772);
                                            int64_t defunc_0_add_arg_293998;
                                            
                                            defunc_0_add_arg_293998 =
                                                ((int64_t *) mem_297040)[i_295801 *
                                                                         n_290262 +
                                                                         i_293997];
                                            
                                            int64_t defunc_1_add_res_293999 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_293998);
                                            
                                            defunc_0_f_res_293996 =
                                                defunc_1_add_res_293999;
                                        }
                                        
                                        double defunc_0_f_res_294000;
                                        
                                        if (cond_293995) {
                                            defunc_0_f_res_294000 = 0.0;
                                        } else {
                                            int64_t i_294001 = add64(x_293987,
                                                                     i_295772);
                                            double defunc_0_add_arg_294002;
                                            
                                            defunc_0_add_arg_294002 =
                                                ((double *) mem_302069)[i_294001];
                                            defunc_0_f_res_294000 =
                                                defunc_0_add_arg_294002;
                                        }
                                        
                                        int64_t binop_p_294003 =
                                                sub64(defunc_0_f_res_293996,
                                                      defunc_0_g_res_293991);
                                        double defunc_0_f_res_294004 =
                                               sitofp_i64_f64(binop_p_294003);
                                        double abs_res_294005 =
                                               fabs(defunc_0_f_res_294004);
                                        double tmp1_294006 = abs_res_294005 /
                                               x_293988;
                                        double x_294007 = tmp1_294006 *
                                               tmp1_294006;
                                        double y_294008 = tmp1_294006 *
                                               x_294007;
                                        double tmp2_294009 = 1.0 - y_294008;
                                        double x_294010 = tmp2_294009 *
                                               tmp2_294009;
                                        double tmp3_294011 = tmp2_294009 *
                                               x_294010;
                                        double tmp4_294012 =
                                               defunc_0_f_res_294000 *
                                               tmp3_294011;
                                        
                                        ((double *) mem_302121)[i_295772] =
                                            defunc_0_f_res_294004;
                                        ((double *) mem_302124)[i_295772] =
                                            tmp4_294012;
                                    }
                                    
                                    double defunc_2_reduce_res_294019;
                                    double defunc_2_reduce_res_294020;
                                    double defunc_2_reduce_res_294021;
                                    double defunc_2_reduce_res_294022;
                                    double defunc_2_reduce_res_294023;
                                    double redout_295777;
                                    double redout_295778;
                                    double redout_295779;
                                    double redout_295780;
                                    double redout_295781;
                                    
                                    redout_295777 = 0.0;
                                    redout_295778 = 0.0;
                                    redout_295779 = 0.0;
                                    redout_295780 = 0.0;
                                    redout_295781 = 0.0;
                                    for (int64_t i_295784 = 0; i_295784 <
                                         q_t_290266; i_295784++) {
                                        double x_294041;
                                        
                                        x_294041 =
                                            ((double *) mem_302121)[i_295784];
                                        
                                        double x_294042;
                                        
                                        x_294042 =
                                            ((double *) mem_302124)[i_295784];
                                        
                                        double defunc_1_f_res_294043 =
                                               x_294041 * x_294042;
                                        double defunc_1_f_res_294044 =
                                               x_294041 * defunc_1_f_res_294043;
                                        double defunc_1_f_res_294045 =
                                               x_294041 * defunc_1_f_res_294044;
                                        double defunc_1_f_res_294046 =
                                               x_294041 * defunc_1_f_res_294045;
                                        double defunc_1_op_res_294028 =
                                               x_294042 + redout_295777;
                                        double defunc_1_op_res_294031 =
                                               defunc_1_f_res_294043 +
                                               redout_295778;
                                        double defunc_1_op_res_294034 =
                                               defunc_1_f_res_294044 +
                                               redout_295779;
                                        double defunc_1_op_res_294037 =
                                               defunc_1_f_res_294045 +
                                               redout_295780;
                                        double defunc_1_op_res_294040 =
                                               defunc_1_f_res_294046 +
                                               redout_295781;
                                        
                                        ((double *) mem_302151)[i_295784] =
                                            defunc_1_f_res_294044;
                                        ((double *) mem_302154)[i_295784] =
                                            defunc_1_f_res_294043;
                                        
                                        double redout_tmp_304216 =
                                               defunc_1_op_res_294028;
                                        double redout_tmp_304217 =
                                               defunc_1_op_res_294031;
                                        double redout_tmp_304218 =
                                               defunc_1_op_res_294034;
                                        double redout_tmp_304219 =
                                               defunc_1_op_res_294037;
                                        double redout_tmp_304220 =
                                               defunc_1_op_res_294040;
                                        
                                        redout_295777 = redout_tmp_304216;
                                        redout_295778 = redout_tmp_304217;
                                        redout_295779 = redout_tmp_304218;
                                        redout_295780 = redout_tmp_304219;
                                        redout_295781 = redout_tmp_304220;
                                    }
                                    defunc_2_reduce_res_294019 = redout_295777;
                                    defunc_2_reduce_res_294020 = redout_295778;
                                    defunc_2_reduce_res_294021 = redout_295779;
                                    defunc_2_reduce_res_294022 = redout_295780;
                                    defunc_2_reduce_res_294023 = redout_295781;
                                    
                                    double a_294054 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_294019;
                                    double b_294055 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_294020;
                                    double c_294056 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_294021;
                                    double d_294057 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_294022;
                                    double e_294058 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_294023;
                                    double x_294059 = c_294056 * e_294058;
                                    double y_294060 = d_294057 * d_294057;
                                    double a12_294061 = x_294059 - y_294060;
                                    double x_294062 = c_294056 * d_294057;
                                    double y_294063 = b_294055 * e_294058;
                                    double b12_294064 = x_294062 - y_294063;
                                    double x_294065 = b_294055 * d_294057;
                                    double y_294066 = c_294056 * c_294056;
                                    double c12_294067 = x_294065 - y_294066;
                                    double x_294068 = a_294054 * e_294058;
                                    double b2_294069 = x_294068 - y_294066;
                                    double x_294070 = b_294055 * c_294056;
                                    double y_294071 = a_294054 * d_294057;
                                    double c2_294072 = x_294070 - y_294071;
                                    double x_294073 = a_294054 * a12_294061;
                                    double y_294074 = b_294055 * b12_294064;
                                    double x_294075 = x_294073 + y_294074;
                                    double y_294076 = c_294056 * c12_294067;
                                    double y_294077 = x_294075 + y_294076;
                                    double det_294078 = 1.0 / y_294077;
                                    double a12_294079 = a12_294061 * det_294078;
                                    double b12_294080 = b12_294064 * det_294078;
                                    double c12_294081 = c12_294067 * det_294078;
                                    double b2_294082 = b2_294069 * det_294078;
                                    double c2_294083 = c2_294072 * det_294078;
                                    double defunc_2_reduce_res_294084;
                                    double defunc_2_reduce_res_294085;
                                    double redout_295787;
                                    double redout_295788;
                                    
                                    redout_295787 = 0.0;
                                    redout_295788 = 0.0;
                                    for (int64_t i_295789 = 0; i_295789 <
                                         q_t_290266; i_295789++) {
                                        double x_294093;
                                        
                                        x_294093 =
                                            ((double *) mem_302124)[i_295789];
                                        
                                        double x_294094;
                                        
                                        x_294094 =
                                            ((double *) mem_302154)[i_295789];
                                        
                                        double x_294095;
                                        
                                        x_294095 =
                                            ((double *) mem_302151)[i_295789];
                                        
                                        bool cond_294096 = sle64(x_293962,
                                                                 i_295789);
                                        double defunc_0_f_res_294097;
                                        
                                        if (cond_294096) {
                                            defunc_0_f_res_294097 = 0.0;
                                        } else {
                                            int64_t i_294098 = add64(x_293987,
                                                                     i_295789);
                                            double defunc_0_add_arg_294099;
                                            
                                            defunc_0_add_arg_294099 =
                                                ((double *) mem_302072)[i_294098];
                                            defunc_0_f_res_294097 =
                                                defunc_0_add_arg_294099;
                                        }
                                        
                                        double x_294100 = a12_294079 * x_294093;
                                        double y_294101 = b12_294080 * x_294094;
                                        double x_294102 = x_294100 + y_294101;
                                        double y_294103 = c12_294081 * x_294095;
                                        double x_294104 = x_294102 + y_294103;
                                        double defunc_9_fit_fun_res_294105 =
                                               defunc_0_f_res_294097 * x_294104;
                                        double x_294106 = b12_294080 * x_294093;
                                        double y_294107 = b2_294082 * x_294094;
                                        double x_294108 = x_294106 + y_294107;
                                        double y_294109 = c2_294083 * x_294095;
                                        double x_294110 = x_294108 + y_294109;
                                        double defunc_9_slope_fun_res_294111 =
                                               defunc_0_f_res_294097 * x_294110;
                                        double defunc_1_op_res_294088 =
                                               defunc_9_fit_fun_res_294105 +
                                               redout_295787;
                                        double defunc_1_op_res_294091 =
                                               defunc_9_slope_fun_res_294111 +
                                               redout_295788;
                                        double redout_tmp_304223 =
                                               defunc_1_op_res_294088;
                                        double redout_tmp_304224 =
                                               defunc_1_op_res_294091;
                                        
                                        redout_295787 = redout_tmp_304223;
                                        redout_295788 = redout_tmp_304224;
                                    }
                                    defunc_2_reduce_res_294084 = redout_295787;
                                    defunc_2_reduce_res_294085 = redout_295788;
                                    ((double *) mem_302027.mem)[i_295801 *
                                                                t_n_m_290426 +
                                                                i_295794] =
                                        defunc_2_reduce_res_294084;
                                    ((double *) mem_302031.mem)[i_295801 *
                                                                t_n_m_290426 +
                                                                i_295794] =
                                        defunc_2_reduce_res_294085;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_302231, &mem_302027,
                                             "mem_302027") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_302223, &mem_302031,
                                             "mem_302031") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302031,
                                               "mem_302031") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302027,
                                               "mem_302027") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_302247, &ext_mem_302231,
                                         "ext_mem_302231") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_302239, &ext_mem_302223,
                                         "ext_mem_302223") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302223,
                                           "ext_mem_302223") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302231,
                                           "ext_mem_302231") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_302669, &ext_mem_302247,
                                     "ext_mem_302247") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_302661, &ext_mem_302239,
                                     "ext_mem_302239") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302239,
                                       "ext_mem_302239") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302247,
                                       "ext_mem_302247") != 0)
                        return 1;
                } else {
                    bool match_lit_294114 = (int64_t) 0 == d_t_290269;
                    int64_t binop_y_302273 = (int64_t) 8 * n_290262;
                    int64_t bytes_302274 = smax64((int64_t) 0, binop_y_302273);
                    struct memblock ext_mem_302653;
                    
                    ext_mem_302653.references = NULL;
                    
                    struct memblock ext_mem_302645;
                    
                    ext_mem_302645.references = NULL;
                    if (match_lit_294114) {
                        struct memblock mem_302258;
                        
                        mem_302258.references = NULL;
                        if (memblock_alloc(ctx, &mem_302258, bytes_297714,
                                           "mem_302258")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_304225 = 0; i_304225 <
                             partition_sizze_290353; i_304225++) {
                            for (int64_t i_304226 = 0; i_304226 < t_n_m_290426;
                                 i_304226++) {
                                ((double *) mem_302258.mem)[i_304225 *
                                                            t_n_m_290426 +
                                                            i_304226] = 0.0;
                            }
                        }
                        
                        struct memblock mem_302262;
                        
                        mem_302262.references = NULL;
                        if (memblock_alloc(ctx, &mem_302262, bytes_297714,
                                           "mem_302262")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_302275_cached_sizze_304422 <
                            (size_t) bytes_302274) {
                            mem_302275 = realloc(mem_302275, bytes_302274);
                            mem_302275_cached_sizze_304422 = bytes_302274;
                        }
                        if (mem_302290_cached_sizze_304423 <
                            (size_t) bytes_302274) {
                            mem_302290 = realloc(mem_302290, bytes_302274);
                            mem_302290_cached_sizze_304423 = bytes_302274;
                        }
                        if (mem_302293_cached_sizze_304424 <
                            (size_t) bytes_302274) {
                            mem_302293 = realloc(mem_302293, bytes_302274);
                            mem_302293_cached_sizze_304424 = bytes_302274;
                        }
                        for (int64_t i_295825 = 0; i_295825 <
                             partition_sizze_290353; i_295825++) {
                            int64_t x_294124;
                            
                            x_294124 = ((int64_t *) mem_297043)[i_295825];
                            for (int64_t i_295806 = 0; i_295806 < n_290262;
                                 i_295806++) {
                                float x_294128;
                                
                                x_294128 = ((float *) mem_297000)[i_295825 *
                                                                  n_290262 +
                                                                  i_295806];
                                
                                double x_294129;
                                
                                x_294129 =
                                    ((double *) mem_301294.mem)[i_295825 *
                                                                n_290262 +
                                                                i_295806];
                                
                                double f32_res_294130 =
                                       fpconv_f32_f64(x_294128);
                                double defunc_1_f_res_294131 = f32_res_294130 -
                                       x_294129;
                                
                                ((double *) mem_302275)[i_295806] =
                                    defunc_1_f_res_294131;
                            }
                            for (int64_t i_295812 = 0; i_295812 < n_290262;
                                 i_295812++) {
                                int64_t x_294134;
                                
                                x_294134 = ((int64_t *) mem_297040)[i_295825 *
                                                                    n_290262 +
                                                                    i_295812];
                                
                                bool cond_294135 = sle64((int64_t) 0, x_294134);
                                double defunc_0_f_res_294136;
                                
                                if (cond_294135) {
                                    bool y_294137 = slt64(x_294134, n_290262);
                                    bool bounds_check_294138 = cond_294135 &&
                                         y_294137;
                                    bool index_certs_294139;
                                    
                                    if (!bounds_check_294138) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_294134,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_290262,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_302262,
                                                           "mem_302262") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_302258,
                                                           "mem_302258") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302645,
                                                           "ext_mem_302645") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302653,
                                                           "ext_mem_302653") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302661,
                                                           "ext_mem_302661") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302669,
                                                           "ext_mem_302669") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302677,
                                                           "ext_mem_302677") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302685,
                                                           "ext_mem_302685") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301294,
                                                           "mem_301294") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301283,
                                                           "ext_mem_301283") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301220,
                                                           "ext_mem_301220") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301228,
                                                           "ext_mem_301228") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300075,
                                                           "ext_mem_300075") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299950,
                                                           "ext_mem_299950") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299961,
                                                           "ext_mem_299961") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297874,
                                                           "mem_param_297874") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297866,
                                                           "mem_param_297866") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302748,
                                                           "ext_mem_302748") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302749,
                                                           "ext_mem_302749") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297852,
                                                           "mem_param_297852") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297844,
                                                           "mem_param_297844") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297836,
                                                           "mem_param_297836") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303273,
                                                           "ext_mem_303273") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303274,
                                                           "ext_mem_303274") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303275,
                                                           "ext_mem_303275") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297828,
                                                           "mem_297828") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297824,
                                                           "mem_297824") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303840,
                                                           "mem_out_303840") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303839,
                                                           "mem_out_303839") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303838,
                                                           "mem_out_303838") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_294140;
                                    
                                    defunc_0_f_res_t_res_294140 =
                                        ((double *) mem_302275)[x_294134];
                                    defunc_0_f_res_294136 =
                                        defunc_0_f_res_t_res_294140;
                                } else {
                                    defunc_0_f_res_294136 = 0.0;
                                }
                                
                                double defunc_0_f_res_294141;
                                
                                if (cond_294135) {
                                    bool y_294142 = slt64(x_294134, n_290262);
                                    bool bounds_check_294143 = cond_294135 &&
                                         y_294142;
                                    bool index_certs_294144;
                                    
                                    if (!bounds_check_294143) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_294134,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_290262,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_302262,
                                                           "mem_302262") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_302258,
                                                           "mem_302258") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302645,
                                                           "ext_mem_302645") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302653,
                                                           "ext_mem_302653") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302661,
                                                           "ext_mem_302661") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302669,
                                                           "ext_mem_302669") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302677,
                                                           "ext_mem_302677") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302685,
                                                           "ext_mem_302685") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301294,
                                                           "mem_301294") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301283,
                                                           "ext_mem_301283") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301220,
                                                           "ext_mem_301220") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301228,
                                                           "ext_mem_301228") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300075,
                                                           "ext_mem_300075") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299950,
                                                           "ext_mem_299950") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299961,
                                                           "ext_mem_299961") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297874,
                                                           "mem_param_297874") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297866,
                                                           "mem_param_297866") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302748,
                                                           "ext_mem_302748") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302749,
                                                           "ext_mem_302749") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297852,
                                                           "mem_param_297852") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297844,
                                                           "mem_param_297844") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297836,
                                                           "mem_param_297836") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303273,
                                                           "ext_mem_303273") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303274,
                                                           "ext_mem_303274") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303275,
                                                           "ext_mem_303275") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297828,
                                                           "mem_297828") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297824,
                                                           "mem_297824") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303840,
                                                           "mem_out_303840") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303839,
                                                           "mem_out_303839") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_303838,
                                                           "mem_out_303838") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_294145;
                                    
                                    defunc_0_f_res_t_res_294145 =
                                        ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                          (i_295825 *
                                                                           ctx_param_ext_297848 +
                                                                           x_294134 *
                                                                           ctx_param_ext_297850)];
                                    defunc_0_f_res_294141 =
                                        defunc_0_f_res_t_res_294145;
                                } else {
                                    defunc_0_f_res_294141 = 0.0;
                                }
                                ((double *) mem_302290)[i_295812] =
                                    defunc_0_f_res_294141;
                                ((double *) mem_302293)[i_295812] =
                                    defunc_0_f_res_294136;
                            }
                            for (int64_t i_295821 = 0; i_295821 < t_n_m_290426;
                                 i_295821++) {
                                int64_t x_294148;
                                
                                x_294148 = ((int64_t *) mem_297715)[i_295825 *
                                                                    t_n_m_290426 +
                                                                    i_295821];
                                
                                double x_294149;
                                
                                x_294149 = ((double *) mem_297719)[i_295825 *
                                                                   t_n_m_290426 +
                                                                   i_295821];
                                
                                int64_t min_arg_294150 = mul64(jump_t_290272,
                                                               i_295821);
                                int64_t min_res_294151 = smin64(i_290433,
                                                                min_arg_294150);
                                int64_t defunc_0_g_res_294152 =
                                        add64((int64_t) 1, min_res_294151);
                                double defunc_2_reduce_res_294153;
                                double redout_295815 = 0.0;
                                
                                for (int64_t i_295816 = 0; i_295816 <
                                     q_t_290266; i_295816++) {
                                    bool cond_294158 = sle64(x_294124,
                                                             i_295816);
                                    int64_t defunc_0_f_res_294159;
                                    
                                    if (cond_294158) {
                                        defunc_0_f_res_294159 = (int64_t) 0;
                                    } else {
                                        int64_t i_294160 = add64(x_294148,
                                                                 i_295816);
                                        int64_t defunc_0_add_arg_294161;
                                        
                                        defunc_0_add_arg_294161 =
                                            ((int64_t *) mem_297040)[i_295825 *
                                                                     n_290262 +
                                                                     i_294160];
                                        
                                        int64_t defunc_1_add_res_294162 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_294161);
                                        
                                        defunc_0_f_res_294159 =
                                            defunc_1_add_res_294162;
                                    }
                                    
                                    double defunc_0_f_res_294163;
                                    
                                    if (cond_294158) {
                                        defunc_0_f_res_294163 = 0.0;
                                    } else {
                                        int64_t i_294164 = add64(x_294148,
                                                                 i_295816);
                                        double defunc_0_add_arg_294165;
                                        
                                        defunc_0_add_arg_294165 =
                                            ((double *) mem_302290)[i_294164];
                                        defunc_0_f_res_294163 =
                                            defunc_0_add_arg_294165;
                                    }
                                    
                                    int64_t binop_p_294166 =
                                            sub64(defunc_0_f_res_294159,
                                                  defunc_0_g_res_294152);
                                    double defunc_0_f_res_294167 =
                                           sitofp_i64_f64(binop_p_294166);
                                    double abs_res_294168 =
                                           fabs(defunc_0_f_res_294167);
                                    double tmp1_294169 = abs_res_294168 /
                                           x_294149;
                                    double x_294170 = tmp1_294169 * tmp1_294169;
                                    double y_294171 = tmp1_294169 * x_294170;
                                    double tmp2_294172 = 1.0 - y_294171;
                                    double x_294173 = tmp2_294172 * tmp2_294172;
                                    double tmp3_294174 = tmp2_294172 * x_294173;
                                    double w_j_294175 = defunc_0_f_res_294163 *
                                           tmp3_294174;
                                    double defunc_1_op_res_294156 = w_j_294175 +
                                           redout_295815;
                                    double redout_tmp_304232 =
                                           defunc_1_op_res_294156;
                                    
                                    redout_295815 = redout_tmp_304232;
                                }
                                defunc_2_reduce_res_294153 = redout_295815;
                                
                                double a_294176 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_294153;
                                double a0_294177 = 1.0 / a_294176;
                                double defunc_2_reduce_res_294178;
                                double redout_295817 = 0.0;
                                
                                for (int64_t i_295818 = 0; i_295818 <
                                     q_t_290266; i_295818++) {
                                    bool cond_294183 = sle64(x_294124,
                                                             i_295818);
                                    int64_t defunc_0_f_res_294184;
                                    
                                    if (cond_294183) {
                                        defunc_0_f_res_294184 = (int64_t) 0;
                                    } else {
                                        int64_t i_294185 = add64(x_294148,
                                                                 i_295818);
                                        int64_t defunc_0_add_arg_294186;
                                        
                                        defunc_0_add_arg_294186 =
                                            ((int64_t *) mem_297040)[i_295825 *
                                                                     n_290262 +
                                                                     i_294185];
                                        
                                        int64_t defunc_1_add_res_294187 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_294186);
                                        
                                        defunc_0_f_res_294184 =
                                            defunc_1_add_res_294187;
                                    }
                                    
                                    double defunc_0_f_res_294188;
                                    
                                    if (cond_294183) {
                                        defunc_0_f_res_294188 = 0.0;
                                    } else {
                                        int64_t i_294189 = add64(x_294148,
                                                                 i_295818);
                                        double defunc_0_add_arg_294190;
                                        
                                        defunc_0_add_arg_294190 =
                                            ((double *) mem_302290)[i_294189];
                                        defunc_0_f_res_294188 =
                                            defunc_0_add_arg_294190;
                                    }
                                    
                                    int64_t binop_p_294191 =
                                            sub64(defunc_0_f_res_294184,
                                                  defunc_0_g_res_294152);
                                    double defunc_0_f_res_294192 =
                                           sitofp_i64_f64(binop_p_294191);
                                    double abs_res_294193 =
                                           fabs(defunc_0_f_res_294192);
                                    double tmp1_294194 = abs_res_294193 /
                                           x_294149;
                                    double x_294195 = tmp1_294194 * tmp1_294194;
                                    double y_294196 = tmp1_294194 * x_294195;
                                    double tmp2_294197 = 1.0 - y_294196;
                                    double x_294198 = tmp2_294197 * tmp2_294197;
                                    double tmp3_294199 = tmp2_294197 * x_294198;
                                    double tmp4_294200 = defunc_0_f_res_294188 *
                                           tmp3_294199;
                                    double defunc_0_f_res_294201;
                                    
                                    if (cond_294183) {
                                        defunc_0_f_res_294201 = 0.0;
                                    } else {
                                        int64_t i_294202 = add64(x_294148,
                                                                 i_295818);
                                        double defunc_0_add_arg_294203;
                                        
                                        defunc_0_add_arg_294203 =
                                            ((double *) mem_302293)[i_294202];
                                        defunc_0_f_res_294201 =
                                            defunc_0_add_arg_294203;
                                    }
                                    
                                    double x_294204 = a0_294177 * tmp4_294200;
                                    double defunc_9_fit_fun_res_294205 =
                                           defunc_0_f_res_294201 * x_294204;
                                    double defunc_1_op_res_294181 =
                                           defunc_9_fit_fun_res_294205 +
                                           redout_295817;
                                    double redout_tmp_304233 =
                                           defunc_1_op_res_294181;
                                    
                                    redout_295817 = redout_tmp_304233;
                                }
                                defunc_2_reduce_res_294178 = redout_295817;
                                ((double *) mem_302262.mem)[i_295825 *
                                                            t_n_m_290426 +
                                                            i_295821] =
                                    defunc_2_reduce_res_294178;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_302653, &mem_302262,
                                         "mem_302262") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_302645, &mem_302258,
                                         "mem_302258") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302262, "mem_302262") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302258, "mem_302258") != 0)
                            return 1;
                    } else {
                        bool match_lit_294208 = (int64_t) 1 == d_t_290269;
                        int64_t binop_y_302379 = (int64_t) 8 * n_290262;
                        int64_t bytes_302380 = smax64((int64_t) 0,
                                                      binop_y_302379);
                        int64_t binop_y_302518 = (int64_t) 8 * n_290262;
                        int64_t bytes_302519 = smax64((int64_t) 0,
                                                      binop_y_302518);
                        struct memblock ext_mem_302637;
                        
                        ext_mem_302637.references = NULL;
                        
                        struct memblock ext_mem_302629;
                        
                        ext_mem_302629.references = NULL;
                        if (match_lit_294208) {
                            struct memblock mem_302354;
                            
                            mem_302354.references = NULL;
                            if (memblock_alloc(ctx, &mem_302354, bytes_297714,
                                               "mem_302354")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_302358;
                            
                            mem_302358.references = NULL;
                            if (memblock_alloc(ctx, &mem_302358, bytes_297714,
                                               "mem_302358")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_302381_cached_sizze_304425 <
                                (size_t) bytes_302380) {
                                mem_302381 = realloc(mem_302381, bytes_302380);
                                mem_302381_cached_sizze_304425 = bytes_302380;
                            }
                            if (mem_302396_cached_sizze_304426 <
                                (size_t) bytes_302380) {
                                mem_302396 = realloc(mem_302396, bytes_302380);
                                mem_302396_cached_sizze_304426 = bytes_302380;
                            }
                            if (mem_302399_cached_sizze_304427 <
                                (size_t) bytes_302380) {
                                mem_302399 = realloc(mem_302399, bytes_302380);
                                mem_302399_cached_sizze_304427 = bytes_302380;
                            }
                            for (int64_t i_295856 = 0; i_295856 <
                                 partition_sizze_290353; i_295856++) {
                                int64_t x_294218;
                                
                                x_294218 = ((int64_t *) mem_297043)[i_295856];
                                for (int64_t i_295829 = 0; i_295829 < n_290262;
                                     i_295829++) {
                                    float x_294222;
                                    
                                    x_294222 = ((float *) mem_297000)[i_295856 *
                                                                      n_290262 +
                                                                      i_295829];
                                    
                                    double x_294223;
                                    
                                    x_294223 =
                                        ((double *) mem_301294.mem)[i_295856 *
                                                                    n_290262 +
                                                                    i_295829];
                                    
                                    double f32_res_294224 =
                                           fpconv_f32_f64(x_294222);
                                    double defunc_1_f_res_294225 =
                                           f32_res_294224 - x_294223;
                                    
                                    ((double *) mem_302381)[i_295829] =
                                        defunc_1_f_res_294225;
                                }
                                for (int64_t i_295835 = 0; i_295835 < n_290262;
                                     i_295835++) {
                                    int64_t x_294228;
                                    
                                    x_294228 =
                                        ((int64_t *) mem_297040)[i_295856 *
                                                                 n_290262 +
                                                                 i_295835];
                                    
                                    bool cond_294229 = sle64((int64_t) 0,
                                                             x_294228);
                                    double defunc_0_f_res_294230;
                                    
                                    if (cond_294229) {
                                        bool y_294231 = slt64(x_294228,
                                                              n_290262);
                                        bool bounds_check_294232 =
                                             cond_294229 && y_294231;
                                        bool index_certs_294233;
                                        
                                        if (!bounds_check_294232) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_294228,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_290262,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_302358,
                                                               "mem_302358") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_302354,
                                                               "mem_302354") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302629,
                                                               "ext_mem_302629") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302637,
                                                               "ext_mem_302637") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302645,
                                                               "ext_mem_302645") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302653,
                                                               "ext_mem_302653") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302661,
                                                               "ext_mem_302661") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302669,
                                                               "ext_mem_302669") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302677,
                                                               "ext_mem_302677") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302685,
                                                               "ext_mem_302685") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301294,
                                                               "mem_301294") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301283,
                                                               "ext_mem_301283") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301220,
                                                               "ext_mem_301220") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301228,
                                                               "ext_mem_301228") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300075,
                                                               "ext_mem_300075") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299950,
                                                               "ext_mem_299950") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299961,
                                                               "ext_mem_299961") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297874,
                                                               "mem_param_297874") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297866,
                                                               "mem_param_297866") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302748,
                                                               "ext_mem_302748") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302749,
                                                               "ext_mem_302749") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297852,
                                                               "mem_param_297852") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297844,
                                                               "mem_param_297844") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297836,
                                                               "mem_param_297836") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303273,
                                                               "ext_mem_303273") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303274,
                                                               "ext_mem_303274") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303275,
                                                               "ext_mem_303275") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297828,
                                                               "mem_297828") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297824,
                                                               "mem_297824") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303840,
                                                               "mem_out_303840") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303839,
                                                               "mem_out_303839") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303838,
                                                               "mem_out_303838") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_294234;
                                        
                                        defunc_0_f_res_t_res_294234 =
                                            ((double *) mem_302381)[x_294228];
                                        defunc_0_f_res_294230 =
                                            defunc_0_f_res_t_res_294234;
                                    } else {
                                        defunc_0_f_res_294230 = 0.0;
                                    }
                                    
                                    double defunc_0_f_res_294235;
                                    
                                    if (cond_294229) {
                                        bool y_294236 = slt64(x_294228,
                                                              n_290262);
                                        bool bounds_check_294237 =
                                             cond_294229 && y_294236;
                                        bool index_certs_294238;
                                        
                                        if (!bounds_check_294237) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_294228,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_290262,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_302358,
                                                               "mem_302358") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_302354,
                                                               "mem_302354") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302629,
                                                               "ext_mem_302629") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302637,
                                                               "ext_mem_302637") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302645,
                                                               "ext_mem_302645") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302653,
                                                               "ext_mem_302653") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302661,
                                                               "ext_mem_302661") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302669,
                                                               "ext_mem_302669") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302677,
                                                               "ext_mem_302677") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302685,
                                                               "ext_mem_302685") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301294,
                                                               "mem_301294") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301283,
                                                               "ext_mem_301283") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301220,
                                                               "ext_mem_301220") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301228,
                                                               "ext_mem_301228") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300075,
                                                               "ext_mem_300075") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299950,
                                                               "ext_mem_299950") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299961,
                                                               "ext_mem_299961") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297874,
                                                               "mem_param_297874") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297866,
                                                               "mem_param_297866") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302748,
                                                               "ext_mem_302748") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302749,
                                                               "ext_mem_302749") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297852,
                                                               "mem_param_297852") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297844,
                                                               "mem_param_297844") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297836,
                                                               "mem_param_297836") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303273,
                                                               "ext_mem_303273") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303274,
                                                               "ext_mem_303274") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303275,
                                                               "ext_mem_303275") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297828,
                                                               "mem_297828") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297824,
                                                               "mem_297824") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303840,
                                                               "mem_out_303840") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303839,
                                                               "mem_out_303839") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303838,
                                                               "mem_out_303838") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_294239;
                                        
                                        defunc_0_f_res_t_res_294239 =
                                            ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                              (i_295856 *
                                                                               ctx_param_ext_297848 +
                                                                               x_294228 *
                                                                               ctx_param_ext_297850)];
                                        defunc_0_f_res_294235 =
                                            defunc_0_f_res_t_res_294239;
                                    } else {
                                        defunc_0_f_res_294235 = 0.0;
                                    }
                                    ((double *) mem_302396)[i_295835] =
                                        defunc_0_f_res_294235;
                                    ((double *) mem_302399)[i_295835] =
                                        defunc_0_f_res_294230;
                                }
                                for (int64_t i_295849 = 0; i_295849 <
                                     t_n_m_290426; i_295849++) {
                                    int64_t x_294243;
                                    
                                    x_294243 =
                                        ((int64_t *) mem_297715)[i_295856 *
                                                                 t_n_m_290426 +
                                                                 i_295849];
                                    
                                    double x_294244;
                                    
                                    x_294244 =
                                        ((double *) mem_297719)[i_295856 *
                                                                t_n_m_290426 +
                                                                i_295849];
                                    
                                    int64_t min_arg_294245 =
                                            mul64(jump_t_290272, i_295849);
                                    int64_t min_res_294246 = smin64(i_290433,
                                                                    min_arg_294245);
                                    int64_t defunc_0_g_res_294247 =
                                            add64((int64_t) 1, min_res_294246);
                                    double defunc_2_reduce_res_294248;
                                    double defunc_2_reduce_res_294249;
                                    double defunc_2_reduce_res_294250;
                                    double redout_295838;
                                    double redout_295839;
                                    double redout_295840;
                                    
                                    redout_295838 = 0.0;
                                    redout_295839 = 0.0;
                                    redout_295840 = 0.0;
                                    for (int64_t i_295841 = 0; i_295841 <
                                         q_t_290266; i_295841++) {
                                        bool cond_294261 = sle64(x_294218,
                                                                 i_295841);
                                        int64_t defunc_0_f_res_294262;
                                        
                                        if (cond_294261) {
                                            defunc_0_f_res_294262 = (int64_t) 0;
                                        } else {
                                            int64_t i_294263 = add64(x_294243,
                                                                     i_295841);
                                            int64_t defunc_0_add_arg_294264;
                                            
                                            defunc_0_add_arg_294264 =
                                                ((int64_t *) mem_297040)[i_295856 *
                                                                         n_290262 +
                                                                         i_294263];
                                            
                                            int64_t defunc_1_add_res_294265 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_294264);
                                            
                                            defunc_0_f_res_294262 =
                                                defunc_1_add_res_294265;
                                        }
                                        
                                        double defunc_0_f_res_294266;
                                        
                                        if (cond_294261) {
                                            defunc_0_f_res_294266 = 0.0;
                                        } else {
                                            int64_t i_294267 = add64(x_294243,
                                                                     i_295841);
                                            double defunc_0_add_arg_294268;
                                            
                                            defunc_0_add_arg_294268 =
                                                ((double *) mem_302396)[i_294267];
                                            defunc_0_f_res_294266 =
                                                defunc_0_add_arg_294268;
                                        }
                                        
                                        int64_t binop_p_294269 =
                                                sub64(defunc_0_f_res_294262,
                                                      defunc_0_g_res_294247);
                                        double defunc_0_f_res_294270 =
                                               sitofp_i64_f64(binop_p_294269);
                                        double abs_res_294271 =
                                               fabs(defunc_0_f_res_294270);
                                        double tmp1_294272 = abs_res_294271 /
                                               x_294244;
                                        double x_294273 = tmp1_294272 *
                                               tmp1_294272;
                                        double y_294274 = tmp1_294272 *
                                               x_294273;
                                        double tmp2_294275 = 1.0 - y_294274;
                                        double x_294276 = tmp2_294275 *
                                               tmp2_294275;
                                        double tmp3_294277 = tmp2_294275 *
                                               x_294276;
                                        double w_j_294278 =
                                               defunc_0_f_res_294266 *
                                               tmp3_294277;
                                        double xw_j_294279 =
                                               defunc_0_f_res_294270 *
                                               w_j_294278;
                                        double x2w_j_294280 =
                                               defunc_0_f_res_294270 *
                                               xw_j_294279;
                                        double defunc_1_op_res_294253 =
                                               w_j_294278 + redout_295838;
                                        double defunc_1_op_res_294256 =
                                               xw_j_294279 + redout_295839;
                                        double defunc_1_op_res_294259 =
                                               x2w_j_294280 + redout_295840;
                                        double redout_tmp_304241 =
                                               defunc_1_op_res_294253;
                                        double redout_tmp_304242 =
                                               defunc_1_op_res_294256;
                                        double redout_tmp_304243 =
                                               defunc_1_op_res_294259;
                                        
                                        redout_295838 = redout_tmp_304241;
                                        redout_295839 = redout_tmp_304242;
                                        redout_295840 = redout_tmp_304243;
                                    }
                                    defunc_2_reduce_res_294248 = redout_295838;
                                    defunc_2_reduce_res_294249 = redout_295839;
                                    defunc_2_reduce_res_294250 = redout_295840;
                                    
                                    double a_294281 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_294248;
                                    double b_294282 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_294249;
                                    double c_294283 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_294250;
                                    double x_294284 = a_294281 * c_294283;
                                    double y_294285 = b_294282 * b_294282;
                                    double y_294286 = x_294284 - y_294285;
                                    double det1_294287 = 1.0 / y_294286;
                                    double a11_294288 = c_294283 * det1_294287;
                                    double x_294289 = 0.0 - b_294282;
                                    double b11_294290 = det1_294287 * x_294289;
                                    double c11_294291 = a_294281 * det1_294287;
                                    double defunc_2_reduce_res_294292;
                                    double defunc_2_reduce_res_294293;
                                    double redout_295842;
                                    double redout_295843;
                                    
                                    redout_295842 = 0.0;
                                    redout_295843 = 0.0;
                                    for (int64_t i_295844 = 0; i_295844 <
                                         q_t_290266; i_295844++) {
                                        bool cond_294301 = sle64(x_294218,
                                                                 i_295844);
                                        int64_t defunc_0_f_res_294302;
                                        
                                        if (cond_294301) {
                                            defunc_0_f_res_294302 = (int64_t) 0;
                                        } else {
                                            int64_t i_294303 = add64(x_294243,
                                                                     i_295844);
                                            int64_t defunc_0_add_arg_294304;
                                            
                                            defunc_0_add_arg_294304 =
                                                ((int64_t *) mem_297040)[i_295856 *
                                                                         n_290262 +
                                                                         i_294303];
                                            
                                            int64_t defunc_1_add_res_294305 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_294304);
                                            
                                            defunc_0_f_res_294302 =
                                                defunc_1_add_res_294305;
                                        }
                                        
                                        double defunc_0_f_res_294306;
                                        
                                        if (cond_294301) {
                                            defunc_0_f_res_294306 = 0.0;
                                        } else {
                                            int64_t i_294307 = add64(x_294243,
                                                                     i_295844);
                                            double defunc_0_add_arg_294308;
                                            
                                            defunc_0_add_arg_294308 =
                                                ((double *) mem_302396)[i_294307];
                                            defunc_0_f_res_294306 =
                                                defunc_0_add_arg_294308;
                                        }
                                        
                                        int64_t binop_p_294309 =
                                                sub64(defunc_0_f_res_294302,
                                                      defunc_0_g_res_294247);
                                        double defunc_0_f_res_294310 =
                                               sitofp_i64_f64(binop_p_294309);
                                        double abs_res_294311 =
                                               fabs(defunc_0_f_res_294310);
                                        double tmp1_294312 = abs_res_294311 /
                                               x_294244;
                                        double x_294313 = tmp1_294312 *
                                               tmp1_294312;
                                        double y_294314 = tmp1_294312 *
                                               x_294313;
                                        double tmp2_294315 = 1.0 - y_294314;
                                        double x_294316 = tmp2_294315 *
                                               tmp2_294315;
                                        double tmp3_294317 = tmp2_294315 *
                                               x_294316;
                                        double tmp4_294318 =
                                               defunc_0_f_res_294306 *
                                               tmp3_294317;
                                        double defunc_1_f_res_294319 =
                                               defunc_0_f_res_294310 *
                                               tmp4_294318;
                                        double defunc_0_f_res_294320;
                                        
                                        if (cond_294301) {
                                            defunc_0_f_res_294320 = 0.0;
                                        } else {
                                            int64_t i_294321 = add64(x_294243,
                                                                     i_295844);
                                            double defunc_0_add_arg_294322;
                                            
                                            defunc_0_add_arg_294322 =
                                                ((double *) mem_302399)[i_294321];
                                            defunc_0_f_res_294320 =
                                                defunc_0_add_arg_294322;
                                        }
                                        
                                        double x_294323 = a11_294288 *
                                               tmp4_294318;
                                        double y_294324 = b11_294290 *
                                               defunc_1_f_res_294319;
                                        double x_294325 = x_294323 + y_294324;
                                        double defunc_9_fit_fun_res_294326 =
                                               defunc_0_f_res_294320 * x_294325;
                                        double x_294327 = b11_294290 *
                                               tmp4_294318;
                                        double y_294328 = c11_294291 *
                                               defunc_1_f_res_294319;
                                        double x_294329 = x_294327 + y_294328;
                                        double defunc_9_slope_fun_res_294330 =
                                               defunc_0_f_res_294320 * x_294329;
                                        double defunc_1_op_res_294296 =
                                               defunc_9_fit_fun_res_294326 +
                                               redout_295842;
                                        double defunc_1_op_res_294299 =
                                               defunc_9_slope_fun_res_294330 +
                                               redout_295843;
                                        double redout_tmp_304244 =
                                               defunc_1_op_res_294296;
                                        double redout_tmp_304245 =
                                               defunc_1_op_res_294299;
                                        
                                        redout_295842 = redout_tmp_304244;
                                        redout_295843 = redout_tmp_304245;
                                    }
                                    defunc_2_reduce_res_294292 = redout_295842;
                                    defunc_2_reduce_res_294293 = redout_295843;
                                    ((double *) mem_302354.mem)[i_295856 *
                                                                t_n_m_290426 +
                                                                i_295849] =
                                        defunc_2_reduce_res_294292;
                                    ((double *) mem_302358.mem)[i_295856 *
                                                                t_n_m_290426 +
                                                                i_295849] =
                                        defunc_2_reduce_res_294293;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_302637, &mem_302354,
                                             "mem_302354") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_302629, &mem_302358,
                                             "mem_302358") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302358,
                                               "mem_302358") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302354,
                                               "mem_302354") != 0)
                                return 1;
                        } else {
                            struct memblock mem_302493;
                            
                            mem_302493.references = NULL;
                            if (memblock_alloc(ctx, &mem_302493, bytes_297714,
                                               "mem_302493")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_302497;
                            
                            mem_302497.references = NULL;
                            if (memblock_alloc(ctx, &mem_302497, bytes_297714,
                                               "mem_302497")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_302520_cached_sizze_304428 <
                                (size_t) bytes_302519) {
                                mem_302520 = realloc(mem_302520, bytes_302519);
                                mem_302520_cached_sizze_304428 = bytes_302519;
                            }
                            if (mem_302535_cached_sizze_304429 <
                                (size_t) bytes_302519) {
                                mem_302535 = realloc(mem_302535, bytes_302519);
                                mem_302535_cached_sizze_304429 = bytes_302519;
                            }
                            if (mem_302538_cached_sizze_304430 <
                                (size_t) bytes_302519) {
                                mem_302538 = realloc(mem_302538, bytes_302519);
                                mem_302538_cached_sizze_304430 = bytes_302519;
                            }
                            for (int64_t i_295890 = 0; i_295890 <
                                 partition_sizze_290353; i_295890++) {
                                int64_t x_294340;
                                
                                x_294340 = ((int64_t *) mem_297043)[i_295890];
                                for (int64_t i_295861 = 0; i_295861 < n_290262;
                                     i_295861++) {
                                    float x_294344;
                                    
                                    x_294344 = ((float *) mem_297000)[i_295890 *
                                                                      n_290262 +
                                                                      i_295861];
                                    
                                    double x_294345;
                                    
                                    x_294345 =
                                        ((double *) mem_301294.mem)[i_295890 *
                                                                    n_290262 +
                                                                    i_295861];
                                    
                                    double f32_res_294346 =
                                           fpconv_f32_f64(x_294344);
                                    double defunc_1_f_res_294347 =
                                           f32_res_294346 - x_294345;
                                    
                                    ((double *) mem_302520)[i_295861] =
                                        defunc_1_f_res_294347;
                                }
                                for (int64_t i_295867 = 0; i_295867 < n_290262;
                                     i_295867++) {
                                    int64_t x_294350;
                                    
                                    x_294350 =
                                        ((int64_t *) mem_297040)[i_295890 *
                                                                 n_290262 +
                                                                 i_295867];
                                    
                                    bool cond_294351 = sle64((int64_t) 0,
                                                             x_294350);
                                    double defunc_0_f_res_294352;
                                    
                                    if (cond_294351) {
                                        bool y_294353 = slt64(x_294350,
                                                              n_290262);
                                        bool bounds_check_294354 =
                                             cond_294351 && y_294353;
                                        bool index_certs_294355;
                                        
                                        if (!bounds_check_294354) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_294350,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_290262,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_302497,
                                                               "mem_302497") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_302493,
                                                               "mem_302493") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302629,
                                                               "ext_mem_302629") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302637,
                                                               "ext_mem_302637") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302645,
                                                               "ext_mem_302645") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302653,
                                                               "ext_mem_302653") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302661,
                                                               "ext_mem_302661") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302669,
                                                               "ext_mem_302669") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302677,
                                                               "ext_mem_302677") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302685,
                                                               "ext_mem_302685") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301294,
                                                               "mem_301294") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301283,
                                                               "ext_mem_301283") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301220,
                                                               "ext_mem_301220") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301228,
                                                               "ext_mem_301228") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300075,
                                                               "ext_mem_300075") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299950,
                                                               "ext_mem_299950") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299961,
                                                               "ext_mem_299961") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297874,
                                                               "mem_param_297874") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297866,
                                                               "mem_param_297866") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302748,
                                                               "ext_mem_302748") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302749,
                                                               "ext_mem_302749") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297852,
                                                               "mem_param_297852") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297844,
                                                               "mem_param_297844") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297836,
                                                               "mem_param_297836") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303273,
                                                               "ext_mem_303273") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303274,
                                                               "ext_mem_303274") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303275,
                                                               "ext_mem_303275") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297828,
                                                               "mem_297828") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297824,
                                                               "mem_297824") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303840,
                                                               "mem_out_303840") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303839,
                                                               "mem_out_303839") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303838,
                                                               "mem_out_303838") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_294356;
                                        
                                        defunc_0_f_res_t_res_294356 =
                                            ((double *) mem_302520)[x_294350];
                                        defunc_0_f_res_294352 =
                                            defunc_0_f_res_t_res_294356;
                                    } else {
                                        defunc_0_f_res_294352 = 0.0;
                                    }
                                    
                                    double defunc_0_f_res_294357;
                                    
                                    if (cond_294351) {
                                        bool y_294358 = slt64(x_294350,
                                                              n_290262);
                                        bool bounds_check_294359 =
                                             cond_294351 && y_294358;
                                        bool index_certs_294360;
                                        
                                        if (!bounds_check_294359) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_294350,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_290262,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_302497,
                                                               "mem_302497") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_302493,
                                                               "mem_302493") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302629,
                                                               "ext_mem_302629") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302637,
                                                               "ext_mem_302637") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302645,
                                                               "ext_mem_302645") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302653,
                                                               "ext_mem_302653") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302661,
                                                               "ext_mem_302661") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302669,
                                                               "ext_mem_302669") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302677,
                                                               "ext_mem_302677") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302685,
                                                               "ext_mem_302685") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301294,
                                                               "mem_301294") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301283,
                                                               "ext_mem_301283") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301220,
                                                               "ext_mem_301220") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301228,
                                                               "ext_mem_301228") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300075,
                                                               "ext_mem_300075") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299950,
                                                               "ext_mem_299950") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299961,
                                                               "ext_mem_299961") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297874,
                                                               "mem_param_297874") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297866,
                                                               "mem_param_297866") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302748,
                                                               "ext_mem_302748") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302749,
                                                               "ext_mem_302749") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297852,
                                                               "mem_param_297852") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297844,
                                                               "mem_param_297844") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297836,
                                                               "mem_param_297836") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303273,
                                                               "ext_mem_303273") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303274,
                                                               "ext_mem_303274") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303275,
                                                               "ext_mem_303275") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297828,
                                                               "mem_297828") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297824,
                                                               "mem_297824") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303840,
                                                               "mem_out_303840") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303839,
                                                               "mem_out_303839") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_303838,
                                                               "mem_out_303838") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_294361;
                                        
                                        defunc_0_f_res_t_res_294361 =
                                            ((double *) mem_param_297852.mem)[ctx_param_ext_297847 +
                                                                              (i_295890 *
                                                                               ctx_param_ext_297848 +
                                                                               x_294350 *
                                                                               ctx_param_ext_297850)];
                                        defunc_0_f_res_294357 =
                                            defunc_0_f_res_t_res_294361;
                                    } else {
                                        defunc_0_f_res_294357 = 0.0;
                                    }
                                    ((double *) mem_302535)[i_295867] =
                                        defunc_0_f_res_294357;
                                    ((double *) mem_302538)[i_295867] =
                                        defunc_0_f_res_294352;
                                }
                                for (int64_t i_295883 = 0; i_295883 <
                                     t_n_m_290426; i_295883++) {
                                    int64_t x_294365;
                                    
                                    x_294365 =
                                        ((int64_t *) mem_297715)[i_295890 *
                                                                 t_n_m_290426 +
                                                                 i_295883];
                                    
                                    double x_294366;
                                    
                                    x_294366 =
                                        ((double *) mem_297719)[i_295890 *
                                                                t_n_m_290426 +
                                                                i_295883];
                                    
                                    int64_t min_arg_294367 =
                                            mul64(jump_t_290272, i_295883);
                                    int64_t min_res_294368 = smin64(i_290433,
                                                                    min_arg_294367);
                                    int64_t defunc_0_g_res_294369 =
                                            add64((int64_t) 1, min_res_294368);
                                    double defunc_2_reduce_res_294370;
                                    double defunc_2_reduce_res_294371;
                                    double defunc_2_reduce_res_294372;
                                    double defunc_2_reduce_res_294373;
                                    double defunc_2_reduce_res_294374;
                                    double redout_295870;
                                    double redout_295871;
                                    double redout_295872;
                                    double redout_295873;
                                    double redout_295874;
                                    
                                    redout_295870 = 0.0;
                                    redout_295871 = 0.0;
                                    redout_295872 = 0.0;
                                    redout_295873 = 0.0;
                                    redout_295874 = 0.0;
                                    for (int64_t i_295875 = 0; i_295875 <
                                         q_t_290266; i_295875++) {
                                        bool cond_294391 = sle64(x_294340,
                                                                 i_295875);
                                        int64_t defunc_0_f_res_294392;
                                        
                                        if (cond_294391) {
                                            defunc_0_f_res_294392 = (int64_t) 0;
                                        } else {
                                            int64_t i_294393 = add64(x_294365,
                                                                     i_295875);
                                            int64_t defunc_0_add_arg_294394;
                                            
                                            defunc_0_add_arg_294394 =
                                                ((int64_t *) mem_297040)[i_295890 *
                                                                         n_290262 +
                                                                         i_294393];
                                            
                                            int64_t defunc_1_add_res_294395 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_294394);
                                            
                                            defunc_0_f_res_294392 =
                                                defunc_1_add_res_294395;
                                        }
                                        
                                        double defunc_0_f_res_294396;
                                        
                                        if (cond_294391) {
                                            defunc_0_f_res_294396 = 0.0;
                                        } else {
                                            int64_t i_294397 = add64(x_294365,
                                                                     i_295875);
                                            double defunc_0_add_arg_294398;
                                            
                                            defunc_0_add_arg_294398 =
                                                ((double *) mem_302535)[i_294397];
                                            defunc_0_f_res_294396 =
                                                defunc_0_add_arg_294398;
                                        }
                                        
                                        int64_t binop_p_294399 =
                                                sub64(defunc_0_f_res_294392,
                                                      defunc_0_g_res_294369);
                                        double defunc_0_f_res_294400 =
                                               sitofp_i64_f64(binop_p_294399);
                                        double abs_res_294401 =
                                               fabs(defunc_0_f_res_294400);
                                        double tmp1_294402 = abs_res_294401 /
                                               x_294366;
                                        double x_294403 = tmp1_294402 *
                                               tmp1_294402;
                                        double y_294404 = tmp1_294402 *
                                               x_294403;
                                        double tmp2_294405 = 1.0 - y_294404;
                                        double x_294406 = tmp2_294405 *
                                               tmp2_294405;
                                        double tmp3_294407 = tmp2_294405 *
                                               x_294406;
                                        double w_j_294408 =
                                               defunc_0_f_res_294396 *
                                               tmp3_294407;
                                        double xw_j_294409 =
                                               defunc_0_f_res_294400 *
                                               w_j_294408;
                                        double x2w_j_294410 =
                                               defunc_0_f_res_294400 *
                                               xw_j_294409;
                                        double x3w_j_294411 =
                                               defunc_0_f_res_294400 *
                                               x2w_j_294410;
                                        double x4w_j_294412 =
                                               defunc_0_f_res_294400 *
                                               x3w_j_294411;
                                        double defunc_1_op_res_294377 =
                                               w_j_294408 + redout_295870;
                                        double defunc_1_op_res_294380 =
                                               xw_j_294409 + redout_295871;
                                        double defunc_1_op_res_294383 =
                                               x2w_j_294410 + redout_295872;
                                        double defunc_1_op_res_294386 =
                                               x3w_j_294411 + redout_295873;
                                        double defunc_1_op_res_294389 =
                                               x4w_j_294412 + redout_295874;
                                        double redout_tmp_304253 =
                                               defunc_1_op_res_294377;
                                        double redout_tmp_304254 =
                                               defunc_1_op_res_294380;
                                        double redout_tmp_304255 =
                                               defunc_1_op_res_294383;
                                        double redout_tmp_304256 =
                                               defunc_1_op_res_294386;
                                        double redout_tmp_304257 =
                                               defunc_1_op_res_294389;
                                        
                                        redout_295870 = redout_tmp_304253;
                                        redout_295871 = redout_tmp_304254;
                                        redout_295872 = redout_tmp_304255;
                                        redout_295873 = redout_tmp_304256;
                                        redout_295874 = redout_tmp_304257;
                                    }
                                    defunc_2_reduce_res_294370 = redout_295870;
                                    defunc_2_reduce_res_294371 = redout_295871;
                                    defunc_2_reduce_res_294372 = redout_295872;
                                    defunc_2_reduce_res_294373 = redout_295873;
                                    defunc_2_reduce_res_294374 = redout_295874;
                                    
                                    double a_294413 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_294370;
                                    double b_294414 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_294371;
                                    double c_294415 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_294372;
                                    double d_294416 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_294373;
                                    double e_294417 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_294374;
                                    double x_294418 = c_294415 * e_294417;
                                    double y_294419 = d_294416 * d_294416;
                                    double a12_294420 = x_294418 - y_294419;
                                    double x_294421 = c_294415 * d_294416;
                                    double y_294422 = b_294414 * e_294417;
                                    double b12_294423 = x_294421 - y_294422;
                                    double x_294424 = b_294414 * d_294416;
                                    double y_294425 = c_294415 * c_294415;
                                    double c12_294426 = x_294424 - y_294425;
                                    double x_294427 = a_294413 * e_294417;
                                    double b2_294428 = x_294427 - y_294425;
                                    double x_294429 = b_294414 * c_294415;
                                    double y_294430 = a_294413 * d_294416;
                                    double c2_294431 = x_294429 - y_294430;
                                    double x_294432 = a_294413 * a12_294420;
                                    double y_294433 = b_294414 * b12_294423;
                                    double x_294434 = x_294432 + y_294433;
                                    double y_294435 = c_294415 * c12_294426;
                                    double y_294436 = x_294434 + y_294435;
                                    double det_294437 = 1.0 / y_294436;
                                    double a12_294438 = a12_294420 * det_294437;
                                    double b12_294439 = b12_294423 * det_294437;
                                    double c12_294440 = c12_294426 * det_294437;
                                    double b2_294441 = b2_294428 * det_294437;
                                    double c2_294442 = c2_294431 * det_294437;
                                    double defunc_2_reduce_res_294443;
                                    double defunc_2_reduce_res_294444;
                                    double redout_295876;
                                    double redout_295877;
                                    
                                    redout_295876 = 0.0;
                                    redout_295877 = 0.0;
                                    for (int64_t i_295878 = 0; i_295878 <
                                         q_t_290266; i_295878++) {
                                        bool cond_294452 = sle64(x_294340,
                                                                 i_295878);
                                        int64_t defunc_0_f_res_294453;
                                        
                                        if (cond_294452) {
                                            defunc_0_f_res_294453 = (int64_t) 0;
                                        } else {
                                            int64_t i_294454 = add64(x_294365,
                                                                     i_295878);
                                            int64_t defunc_0_add_arg_294455;
                                            
                                            defunc_0_add_arg_294455 =
                                                ((int64_t *) mem_297040)[i_295890 *
                                                                         n_290262 +
                                                                         i_294454];
                                            
                                            int64_t defunc_1_add_res_294456 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_294455);
                                            
                                            defunc_0_f_res_294453 =
                                                defunc_1_add_res_294456;
                                        }
                                        
                                        double defunc_0_f_res_294457;
                                        
                                        if (cond_294452) {
                                            defunc_0_f_res_294457 = 0.0;
                                        } else {
                                            int64_t i_294458 = add64(x_294365,
                                                                     i_295878);
                                            double defunc_0_add_arg_294459;
                                            
                                            defunc_0_add_arg_294459 =
                                                ((double *) mem_302535)[i_294458];
                                            defunc_0_f_res_294457 =
                                                defunc_0_add_arg_294459;
                                        }
                                        
                                        int64_t binop_p_294460 =
                                                sub64(defunc_0_f_res_294453,
                                                      defunc_0_g_res_294369);
                                        double defunc_0_f_res_294461 =
                                               sitofp_i64_f64(binop_p_294460);
                                        double abs_res_294462 =
                                               fabs(defunc_0_f_res_294461);
                                        double tmp1_294463 = abs_res_294462 /
                                               x_294366;
                                        double x_294464 = tmp1_294463 *
                                               tmp1_294463;
                                        double y_294465 = tmp1_294463 *
                                               x_294464;
                                        double tmp2_294466 = 1.0 - y_294465;
                                        double x_294467 = tmp2_294466 *
                                               tmp2_294466;
                                        double tmp3_294468 = tmp2_294466 *
                                               x_294467;
                                        double tmp4_294469 =
                                               defunc_0_f_res_294457 *
                                               tmp3_294468;
                                        double defunc_1_f_res_294470 =
                                               defunc_0_f_res_294461 *
                                               tmp4_294469;
                                        double defunc_1_f_res_294471 =
                                               defunc_0_f_res_294461 *
                                               defunc_1_f_res_294470;
                                        double defunc_0_f_res_294472;
                                        
                                        if (cond_294452) {
                                            defunc_0_f_res_294472 = 0.0;
                                        } else {
                                            int64_t i_294473 = add64(x_294365,
                                                                     i_295878);
                                            double defunc_0_add_arg_294474;
                                            
                                            defunc_0_add_arg_294474 =
                                                ((double *) mem_302538)[i_294473];
                                            defunc_0_f_res_294472 =
                                                defunc_0_add_arg_294474;
                                        }
                                        
                                        double x_294475 = a12_294438 *
                                               tmp4_294469;
                                        double y_294476 = b12_294439 *
                                               defunc_1_f_res_294470;
                                        double x_294477 = x_294475 + y_294476;
                                        double y_294478 = c12_294440 *
                                               defunc_1_f_res_294471;
                                        double x_294479 = x_294477 + y_294478;
                                        double defunc_9_fit_fun_res_294480 =
                                               defunc_0_f_res_294472 * x_294479;
                                        double x_294481 = b12_294439 *
                                               tmp4_294469;
                                        double y_294482 = b2_294441 *
                                               defunc_1_f_res_294470;
                                        double x_294483 = x_294481 + y_294482;
                                        double y_294484 = c2_294442 *
                                               defunc_1_f_res_294471;
                                        double x_294485 = x_294483 + y_294484;
                                        double defunc_9_slope_fun_res_294486 =
                                               defunc_0_f_res_294472 * x_294485;
                                        double defunc_1_op_res_294447 =
                                               defunc_9_fit_fun_res_294480 +
                                               redout_295876;
                                        double defunc_1_op_res_294450 =
                                               defunc_9_slope_fun_res_294486 +
                                               redout_295877;
                                        double redout_tmp_304258 =
                                               defunc_1_op_res_294447;
                                        double redout_tmp_304259 =
                                               defunc_1_op_res_294450;
                                        
                                        redout_295876 = redout_tmp_304258;
                                        redout_295877 = redout_tmp_304259;
                                    }
                                    defunc_2_reduce_res_294443 = redout_295876;
                                    defunc_2_reduce_res_294444 = redout_295877;
                                    ((double *) mem_302493.mem)[i_295890 *
                                                                t_n_m_290426 +
                                                                i_295883] =
                                        defunc_2_reduce_res_294443;
                                    ((double *) mem_302497.mem)[i_295890 *
                                                                t_n_m_290426 +
                                                                i_295883] =
                                        defunc_2_reduce_res_294444;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_302637, &mem_302493,
                                             "mem_302493") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_302629, &mem_302497,
                                             "mem_302497") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302497,
                                               "mem_302497") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302493,
                                               "mem_302493") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_302653, &ext_mem_302637,
                                         "ext_mem_302637") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_302645, &ext_mem_302629,
                                         "ext_mem_302629") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302629,
                                           "ext_mem_302629") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302637,
                                           "ext_mem_302637") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_302669, &ext_mem_302653,
                                     "ext_mem_302653") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_302661, &ext_mem_302645,
                                     "ext_mem_302645") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302645,
                                       "ext_mem_302645") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302653,
                                       "ext_mem_302653") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_302685, &ext_mem_302669,
                                 "ext_mem_302669") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_302677, &ext_mem_302661,
                                 "ext_mem_302661") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_302661, "ext_mem_302661") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_302669, "ext_mem_302669") != 0)
                    return 1;
            }
            
            struct memblock ext_mem_302740;
            
            ext_mem_302740.references = NULL;
            if (cond_290873) {
                bool zzero_294490 = jump_t_290272 == (int64_t) 0;
                bool nonzzero_294491 = !zzero_294490;
                bool nonzzero_cert_294492;
                
                if (!nonzzero_294491) {
                    ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                           "division by zero",
                                           "-> #0  loess.fut:742:20-27\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:741:3-745:9\n   #5  stl.fut:310:23-75\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:309:15-311:43\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_302740,
                                       "ext_mem_302740") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302677,
                                       "ext_mem_302677") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302685,
                                       "ext_mem_302685") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_301294, "mem_301294") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301283,
                                       "ext_mem_301283") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301220,
                                       "ext_mem_301220") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301228,
                                       "ext_mem_301228") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_300075,
                                       "ext_mem_300075") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299950,
                                       "ext_mem_299950") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299961,
                                       "ext_mem_299961") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297874,
                                       "mem_param_297874") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297866,
                                       "mem_param_297866") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302748,
                                       "ext_mem_302748") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302749,
                                       "ext_mem_302749") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297852,
                                       "mem_param_297852") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297844,
                                       "mem_param_297844") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297836,
                                       "mem_param_297836") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303273,
                                       "ext_mem_303273") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303274,
                                       "ext_mem_303274") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303275,
                                       "ext_mem_303275") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t y_294493 = sub64(t_n_m_290426, (int64_t) 1);
                struct memblock mem_302696;
                
                mem_302696.references = NULL;
                if (memblock_alloc(ctx, &mem_302696, bytes_297039,
                                   "mem_302696")) {
                    err = 1;
                    goto cleanup;
                }
                for (int64_t i_295899 = 0; i_295899 < partition_sizze_290353;
                     i_295899++) {
                    for (int64_t i_295895 = 0; i_295895 < n_290262;
                         i_295895++) {
                        int64_t m_v_294499 = sdiv64(i_295895, jump_t_290272);
                        bool cond_294500 = m_v_294499 == y_294493;
                        int64_t j_294501;
                        
                        if (cond_294500) {
                            int64_t j_t_res_294502 = sub64(m_v_294499,
                                                           (int64_t) 1);
                            
                            j_294501 = j_t_res_294502;
                        } else {
                            j_294501 = m_v_294499;
                        }
                        
                        int64_t min_arg_294503 = mul64(jump_t_290272, j_294501);
                        int64_t min_res_294504 = smin64(i_290433,
                                                        min_arg_294503);
                        int64_t defunc_0_m_fun_arg_294505 = add64((int64_t) 1,
                                                                  j_294501);
                        int64_t min_arg_294506 = mul64(jump_t_290272,
                                                       defunc_0_m_fun_arg_294505);
                        int64_t min_res_294507 = smin64(i_290433,
                                                        min_arg_294506);
                        int64_t i64_arg_294508 = sub64(min_res_294507,
                                                       min_res_294504);
                        double i64_res_294509 = sitofp_i64_f64(i64_arg_294508);
                        int64_t i64_arg_294510 = sub64(i_295895,
                                                       min_res_294504);
                        double i64_res_294511 = sitofp_i64_f64(i64_arg_294510);
                        double u_294512 = i64_res_294511 / i64_res_294509;
                        double u2_294513 = u_294512 * u_294512;
                        double u3_294514 = u_294512 * u2_294513;
                        double x_294515 = 2.0 * u3_294514;
                        double y_294516 = 3.0 * u2_294513;
                        double x_294517 = x_294515 - y_294516;
                        double x_294518 = 1.0 + x_294517;
                        bool x_294519 = sle64((int64_t) 0, j_294501);
                        bool y_294520 = slt64(j_294501, t_n_m_290426);
                        bool bounds_check_294521 = x_294519 && y_294520;
                        bool index_certs_294522;
                        
                        if (!bounds_check_294521) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) j_294501,
                                          "] out of bounds for array of shape [",
                                          (long long) t_n_m_290426, "].",
                                          "-> #0  loess.fut:731:27-33\n   #1  loess.fut:744:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:741:3-745:9\n   #6  stl.fut:310:23-75\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:309:15-311:43\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_302696,
                                               "mem_302696") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302740,
                                               "ext_mem_302740") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302677,
                                               "ext_mem_302677") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302685,
                                               "ext_mem_302685") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301294,
                                               "mem_301294") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301283,
                                               "ext_mem_301283") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301220,
                                               "ext_mem_301220") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301228,
                                               "ext_mem_301228") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_300075,
                                               "ext_mem_300075") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299950,
                                               "ext_mem_299950") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299961,
                                               "ext_mem_299961") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297874,
                                               "mem_param_297874") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297866,
                                               "mem_param_297866") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302748,
                                               "ext_mem_302748") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302749,
                                               "ext_mem_302749") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297852,
                                               "mem_param_297852") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297844,
                                               "mem_param_297844") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297836,
                                               "mem_param_297836") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303273,
                                               "ext_mem_303273") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303274,
                                               "ext_mem_303274") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303275,
                                               "ext_mem_303275") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297828,
                                               "mem_297828") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297824,
                                               "mem_297824") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303840,
                                               "mem_out_303840") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303839,
                                               "mem_out_303839") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303838,
                                               "mem_out_303838") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_294523;
                        
                        y_294523 = ((double *) ext_mem_302685.mem)[i_295899 *
                                                                   t_n_m_290426 +
                                                                   j_294501];
                        
                        double x_294524 = x_294518 * y_294523;
                        double x_294525 = y_294516 - x_294515;
                        bool x_294526 = sle64((int64_t) 0,
                                              defunc_0_m_fun_arg_294505);
                        bool y_294527 = slt64(defunc_0_m_fun_arg_294505,
                                              t_n_m_290426);
                        bool bounds_check_294528 = x_294526 && y_294527;
                        bool index_certs_294529;
                        
                        if (!bounds_check_294528) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [",
                                          (long long) defunc_0_m_fun_arg_294505,
                                          "] out of bounds for array of shape [",
                                          (long long) t_n_m_290426, "].",
                                          "-> #0  loess.fut:732:27-37\n   #1  loess.fut:744:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:741:3-745:9\n   #6  stl.fut:310:23-75\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:309:15-311:43\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_302696,
                                               "mem_302696") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302740,
                                               "ext_mem_302740") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302677,
                                               "ext_mem_302677") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302685,
                                               "ext_mem_302685") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301294,
                                               "mem_301294") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301283,
                                               "ext_mem_301283") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301220,
                                               "ext_mem_301220") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301228,
                                               "ext_mem_301228") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_300075,
                                               "ext_mem_300075") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299950,
                                               "ext_mem_299950") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299961,
                                               "ext_mem_299961") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297874,
                                               "mem_param_297874") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297866,
                                               "mem_param_297866") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302748,
                                               "ext_mem_302748") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302749,
                                               "ext_mem_302749") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297852,
                                               "mem_param_297852") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297844,
                                               "mem_param_297844") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297836,
                                               "mem_param_297836") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303273,
                                               "ext_mem_303273") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303274,
                                               "ext_mem_303274") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303275,
                                               "ext_mem_303275") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297828,
                                               "mem_297828") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297824,
                                               "mem_297824") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303840,
                                               "mem_out_303840") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303839,
                                               "mem_out_303839") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303838,
                                               "mem_out_303838") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_294530;
                        
                        y_294530 = ((double *) ext_mem_302685.mem)[i_295899 *
                                                                   t_n_m_290426 +
                                                                   defunc_0_m_fun_arg_294505];
                        
                        double y_294531 = x_294525 * y_294530;
                        double x_294532 = x_294524 + y_294531;
                        double y_294533 = 2.0 * u2_294513;
                        double x_294534 = u3_294514 - y_294533;
                        double x_294535 = u_294512 + x_294534;
                        double y_294536;
                        
                        y_294536 = ((double *) ext_mem_302677.mem)[i_295899 *
                                                                   t_n_m_290426 +
                                                                   j_294501];
                        
                        double x_294537 = x_294535 * y_294536;
                        double y_294538 = i64_res_294509 * x_294537;
                        double x_294539 = x_294532 + y_294538;
                        double x_294540 = u3_294514 - u2_294513;
                        double y_294541;
                        
                        y_294541 = ((double *) ext_mem_302677.mem)[i_295899 *
                                                                   t_n_m_290426 +
                                                                   defunc_0_m_fun_arg_294505];
                        
                        double x_294542 = x_294540 * y_294541;
                        double y_294543 = i64_res_294509 * x_294542;
                        double defunc_4_interpolate_proc_res_294544 = x_294539 +
                               y_294543;
                        
                        ((double *) mem_302696.mem)[i_295899 * n_290262 +
                                                    i_295895] =
                            defunc_4_interpolate_proc_res_294544;
                    }
                }
                if (memblock_set(ctx, &ext_mem_302740, &mem_302696,
                                 "mem_302696") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_302696, "mem_302696") != 0)
                    return 1;
            } else {
                bool dim_match_294546 = n_290262 == t_n_m_290426;
                bool empty_or_match_cert_294547;
                
                if (!dim_match_294546) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Value of (core language) shape (",
                                  (long long) partition_sizze_290353, ", ",
                                  (long long) t_n_m_290426,
                                  ") cannot match shape of type `[",
                                  (long long) partition_sizze_290353, "][",
                                  (long long) n_290262, "]t`.",
                                  "-> #0  stl.fut:313:15-36\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_302740,
                                       "ext_mem_302740") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302677,
                                       "ext_mem_302677") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302685,
                                       "ext_mem_302685") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_301294, "mem_301294") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301283,
                                       "ext_mem_301283") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301220,
                                       "ext_mem_301220") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301228,
                                       "ext_mem_301228") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_300075,
                                       "ext_mem_300075") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299950,
                                       "ext_mem_299950") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299961,
                                       "ext_mem_299961") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297874,
                                       "mem_param_297874") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297866,
                                       "mem_param_297866") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302748,
                                       "ext_mem_302748") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302749,
                                       "ext_mem_302749") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297852,
                                       "mem_param_297852") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297844,
                                       "mem_param_297844") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297836,
                                       "mem_param_297836") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303273,
                                       "ext_mem_303273") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303274,
                                       "ext_mem_303274") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303275,
                                       "ext_mem_303275") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_302740, &ext_mem_302685,
                                 "ext_mem_302685") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_302677, "ext_mem_302677") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_302685, "ext_mem_302685") != 0)
                return 1;
            
            int64_t ctx_param_ext_tmp_303922 = ext_302744;
            int64_t ctx_param_ext_tmp_303923 = ext_302743;
            struct memblock mem_param_tmp_303924;
            
            mem_param_tmp_303924.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_303924, &mem_301294,
                             "mem_301294") != 0)
                return 1;
            
            struct memblock mem_param_tmp_303925;
            
            mem_param_tmp_303925.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_303925, &ext_mem_302740,
                             "ext_mem_302740") != 0)
                return 1;
            ctx_param_ext_297868 = ctx_param_ext_tmp_303922;
            ctx_param_ext_297870 = ctx_param_ext_tmp_303923;
            if (memblock_set(ctx, &mem_param_297866, &mem_param_tmp_303924,
                             "mem_param_tmp_303924") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_297874, &mem_param_tmp_303925,
                             "mem_param_tmp_303925") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_303925,
                               "mem_param_tmp_303925") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_303924,
                               "mem_param_tmp_303924") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_302740, "ext_mem_302740") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_302677, "ext_mem_302677") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_302685, "ext_mem_302685") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_301294, "mem_301294") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_301283, "ext_mem_301283") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_301220, "ext_mem_301220") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_301228, "ext_mem_301228") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_300075, "ext_mem_300075") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_299950, "ext_mem_299950") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_299961, "ext_mem_299961") != 0)
                return 1;
        }
        ext_302755 = ctx_param_ext_297868;
        ext_302753 = ctx_param_ext_297870;
        if (memblock_set(ctx, &ext_mem_302749, &mem_param_297866,
                         "mem_param_297866") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_302748, &mem_param_297874,
                         "mem_param_297874") != 0)
            return 1;
        
        bool cond_294549 = slt64(i_outer_290962, y_290874);
        int64_t ext_303272;
        
        if (cond_294549) {
            ext_303272 = partition_sizze_290353;
        } else {
            ext_303272 = ctx_param_ext_297849;
        }
        
        int64_t ext_303271;
        
        if (cond_294549) {
            ext_303271 = n_290262;
        } else {
            ext_303271 = ctx_param_ext_297851;
        }
        
        int64_t ext_303270;
        
        if (cond_294549) {
            ext_303270 = partition_sizze_290353;
        } else {
            ext_303270 = ctx_param_ext_297845;
        }
        
        int64_t ext_303269;
        
        if (cond_294549) {
            ext_303269 = n_290262;
        } else {
            ext_303269 = ctx_param_ext_297846;
        }
        
        int64_t ext_303268;
        
        if (cond_294549) {
            ext_303268 = n_290262;
        } else {
            ext_303268 = ctx_param_ext_297848;
        }
        
        int64_t ext_303267;
        
        if (cond_294549) {
            ext_303267 = (int64_t) 1;
        } else {
            ext_303267 = ctx_param_ext_297850;
        }
        
        int64_t ext_303266;
        
        if (cond_294549) {
            ext_303266 = (int64_t) 0;
        } else {
            ext_303266 = ctx_param_ext_297847;
        }
        
        struct memblock ext_mem_303265;
        
        ext_mem_303265.references = NULL;
        if (cond_294549) {
            if (mem_302767_cached_sizze_304431 < (size_t) bytes_297039) {
                mem_302767 = realloc(mem_302767, bytes_297039);
                mem_302767_cached_sizze_304431 = bytes_297039;
            }
            if (mem_302771_cached_sizze_304432 < (size_t) bytes_297039) {
                mem_302771 = realloc(mem_302771, bytes_297039);
                mem_302771_cached_sizze_304432 = bytes_297039;
            }
            for (int64_t i_295913 = 0; i_295913 < partition_sizze_290353;
                 i_295913++) {
                for (int64_t i_295903 = 0; i_295903 < n_290262; i_295903++) {
                    float x_294558;
                    
                    x_294558 = ((float *) mem_297000)[i_295913 * n_290262 +
                                                      i_295903];
                    
                    double x_294559;
                    
                    x_294559 = ((double *) ext_mem_302749.mem)[i_295913 *
                                                               n_290262 +
                                                               i_295903];
                    
                    double x_294560;
                    
                    x_294560 = ((double *) ext_mem_302748.mem)[i_295913 *
                                                               ext_302753 +
                                                               i_295903];
                    
                    double f32_res_294561 = fpconv_f32_f64(x_294558);
                    double x_294562 = f32_res_294561 - x_294559;
                    double defunc_2_f_res_294563 = x_294562 - x_294560;
                    bool isnan_res_294564;
                    
                    isnan_res_294564 = futrts_isnan64(defunc_2_f_res_294563);
                    
                    double defunc_0_f_res_294565;
                    
                    if (isnan_res_294564) {
                        defunc_0_f_res_294565 = defunc_2_f_res_294563;
                    } else {
                        double abs_res_294566 = fabs(defunc_2_f_res_294563);
                        
                        defunc_0_f_res_294565 = abs_res_294566;
                    }
                    ((double *) mem_302771)[i_295913 * n_290262 + i_295903] =
                        defunc_0_f_res_294565;
                }
                for (int64_t i_295907 = 0; i_295907 < n_290262; i_295907++) {
                    int64_t x_294568;
                    
                    x_294568 = ((int64_t *) mem_297040)[i_295913 * n_290262 +
                                                        i_295907];
                    
                    bool cond_294569 = sle64((int64_t) 0, x_294568);
                    double defunc_0_f_res_294570;
                    
                    if (cond_294569) {
                        bool y_294571 = slt64(x_294568, n_290262);
                        bool bounds_check_294572 = cond_294569 && y_294571;
                        bool index_certs_294573;
                        
                        if (!bounds_check_294572) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) x_294568,
                                          "] out of bounds for array of shape [",
                                          (long long) n_290262, "].",
                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:340:21-49\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:338:13-341:35\n   #6  stl.fut:419:61-435:77\n   #7  stl.fut:463:3-479:36\n   #8  stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_303265,
                                               "ext_mem_303265") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297874,
                                               "mem_param_297874") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297866,
                                               "mem_param_297866") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302748,
                                               "ext_mem_302748") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302749,
                                               "ext_mem_302749") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297852,
                                               "mem_param_297852") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297844,
                                               "mem_param_297844") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297836,
                                               "mem_param_297836") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303273,
                                               "ext_mem_303273") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303274,
                                               "ext_mem_303274") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303275,
                                               "ext_mem_303275") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297828,
                                               "mem_297828") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297824,
                                               "mem_297824") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303840,
                                               "mem_out_303840") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303839,
                                               "mem_out_303839") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303838,
                                               "mem_out_303838") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double defunc_0_f_res_t_res_294574;
                        
                        defunc_0_f_res_t_res_294574 =
                            ((double *) mem_302771)[i_295913 * n_290262 +
                                                    x_294568];
                        defunc_0_f_res_294570 = defunc_0_f_res_t_res_294574;
                    } else {
                        defunc_0_f_res_294570 = INFINITY;
                    }
                    ((double *) mem_302767)[i_295913 * n_290262 + i_295907] =
                        defunc_0_f_res_294570;
                }
            }
            if (mem_302860_cached_sizze_304433 < (size_t) bytes_297042) {
                mem_302860 = realloc(mem_302860, bytes_297042);
                mem_302860_cached_sizze_304433 = bytes_297042;
            }
            for (int64_t i_295921 = 0; i_295921 < partition_sizze_290353;
                 i_295921++) {
                double defunc_0_f_res_294578;
                double defunc_0_f_res_294579;
                double redout_295916;
                double redout_295917;
                
                redout_295916 = INFINITY;
                redout_295917 = -INFINITY;
                for (int64_t i_295918 = 0; i_295918 < n_290262; i_295918++) {
                    double x_294586;
                    
                    x_294586 = ((double *) mem_302767)[i_295921 * n_290262 +
                                                       i_295918];
                    
                    double defunc_1_op_res_294582 = fmin64(x_294586,
                                                           redout_295916);
                    double defunc_1_op_res_294585 = fmax64(x_294586,
                                                           redout_295917);
                    double redout_tmp_304267 = defunc_1_op_res_294582;
                    double redout_tmp_304268 = defunc_1_op_res_294585;
                    
                    redout_295916 = redout_tmp_304267;
                    redout_295917 = redout_tmp_304268;
                }
                defunc_0_f_res_294578 = redout_295916;
                defunc_0_f_res_294579 = redout_295917;
                
                double defunc_1_f_res_294587 = defunc_0_f_res_294578 +
                       defunc_0_f_res_294579;
                double defunc_0_f_res_294588 = defunc_1_f_res_294587 / 2.0;
                
                ((double *) mem_302860)[i_295921] = defunc_0_f_res_294588;
            }
            
            int32_t i64_res_294590 = sext_i64_i32(n_290262);
            struct memblock mem_302875;
            
            mem_302875.references = NULL;
            if (memblock_alloc(ctx, &mem_302875, bytes_302874, "mem_302875")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_304269 = 0; i_304269 < partition_sizze_290353;
                 i_304269++) {
                ((int32_t *) mem_302875.mem)[i_304269] = i64_res_294590;
            }
            if (mem_302879_cached_sizze_304434 < (size_t) bytes_302878) {
                mem_302879 = realloc(mem_302879, bytes_302878);
                mem_302879_cached_sizze_304434 = bytes_302878;
            }
            if (mem_302882_cached_sizze_304435 < (size_t) bytes_297042) {
                mem_302882 = realloc(mem_302882, bytes_297042);
                mem_302882_cached_sizze_304435 = bytes_297042;
            }
            if (mem_302902_cached_sizze_304436 < (size_t) bytes_302901) {
                mem_302902 = realloc(mem_302902, bytes_302901);
                mem_302902_cached_sizze_304436 = bytes_302901;
            }
            for (int64_t i_295927 = 0; i_295927 < partition_sizze_290353;
                 i_295927++) {
                int64_t x_294595;
                
                x_294595 = ((int64_t *) mem_297043)[i_295927];
                
                int64_t defunc_0_f_res_294597 = sdiv64(x_294595, (int64_t) 2);
                int32_t i64_res_294598 = sext_i64_i32(i_295927);
                int32_t defunc_0_f_res_294599 = add32(1, i64_res_294598);
                
                for (int64_t i_304272 = 0; i_304272 < n_290262; i_304272++) {
                    ((int32_t *) mem_302902)[i_304272] = defunc_0_f_res_294599;
                }
                if (n_290262 * (int64_t) 4 > 0)
                    memmove(mem_302879 + i_295927 * n_290262 * (int64_t) 4,
                            mem_302902 + (int64_t) 0, n_290262 * (int64_t) 4);
                ((int64_t *) mem_302882)[i_295927] = defunc_0_f_res_294597;
            }
            
            struct memblock mem_302918;
            
            mem_302918.references = NULL;
            if (memblock_alloc(ctx, &mem_302918, bytes_302917, "mem_302918")) {
                err = 1;
                goto cleanup;
            }
            if (replicate_arg_290869 * (int64_t) 8 > 0)
                memmove(mem_302918.mem + (int64_t) 0, mem_302767 + (int64_t) 0,
                        replicate_arg_290869 * (int64_t) 8);
            
            struct memblock mem_302921;
            
            mem_302921.references = NULL;
            if (memblock_alloc(ctx, &mem_302921, bytes_302874, "mem_302921")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_295932 = 0; i_295932 < partition_sizze_290353;
                 i_295932++) {
                int64_t x_294605;
                
                x_294605 = ((int64_t *) mem_302882)[i_295932];
                
                int32_t defunc_0_f_res_294606 = sext_i64_i32(x_294605);
                
                ((int32_t *) mem_302921.mem)[i_295932] = defunc_0_f_res_294606;
            }
            
            struct memblock mem_302936;
            
            mem_302936.references = NULL;
            if (memblock_alloc(ctx, &mem_302936, bytes_302935, "mem_302936")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_304274 = 0; i_304274 < replicate_arg_290869;
                 i_304274++) {
                ((int32_t *) mem_302936.mem)[i_304274] = 0;
            }
            
            struct memblock mem_302939;
            
            mem_302939.references = NULL;
            if (memblock_alloc(ctx, &mem_302939, bytes_302917, "mem_302939")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_304275 = 0; i_304275 < replicate_arg_290869;
                 i_304275++) {
                ((double *) mem_302939.mem)[i_304275] = 0.0;
            }
            if (mem_302942_cached_sizze_304437 < (size_t) bytes_297042) {
                mem_302942 = realloc(mem_302942, bytes_297042);
                mem_302942_cached_sizze_304437 = bytes_297042;
            }
            for (int64_t i_304276 = 0; i_304276 < partition_sizze_290353;
                 i_304276++) {
                ((double *) mem_302942)[i_304276] = 0.0;
            }
            
            struct memblock mem_302955;
            
            mem_302955.references = NULL;
            if (memblock_alloc(ctx, &mem_302955, bytes_302935, "mem_302955")) {
                err = 1;
                goto cleanup;
            }
            if (replicate_arg_290869 * (int64_t) 4 > 0)
                memmove(mem_302955.mem + (int64_t) 0, mem_302879 + (int64_t) 0,
                        replicate_arg_290869 * (int64_t) 4);
            if (mem_302996_cached_sizze_304438 < (size_t) bytes_297042) {
                mem_302996 = realloc(mem_302996, bytes_297042);
                mem_302996_cached_sizze_304438 = bytes_297042;
            }
            if (mem_303011_cached_sizze_304439 < (size_t) bytes_303010) {
                mem_303011 = realloc(mem_303011, bytes_303010);
                mem_303011_cached_sizze_304439 = bytes_303010;
            }
            if (mem_303027_cached_sizze_304440 < (size_t) bytes_302874) {
                mem_303027 = realloc(mem_303027, bytes_302874);
                mem_303027_cached_sizze_304440 = bytes_302874;
            }
            if (mem_303029_cached_sizze_304441 < (size_t) bytes_303028) {
                mem_303029 = realloc(mem_303029, bytes_303028);
                mem_303029_cached_sizze_304441 = bytes_303028;
            }
            if (mem_303032_cached_sizze_304442 < (size_t) bytes_302874) {
                mem_303032 = realloc(mem_303032, bytes_302874);
                mem_303032_cached_sizze_304442 = bytes_302874;
            }
            
            int64_t ext_303164;
            int64_t ext_303163;
            int64_t ext_303162;
            int64_t ext_303161;
            int64_t ext_303160;
            int64_t ext_303159;
            int64_t ext_303158;
            int64_t ext_303157;
            int64_t ext_303156;
            int64_t ext_303155;
            int64_t ext_303154;
            int64_t ext_303153;
            int64_t ext_303152;
            int64_t ext_303151;
            int64_t ext_303150;
            int64_t ext_303149;
            struct memblock ext_mem_303144;
            
            ext_mem_303144.references = NULL;
            
            struct memblock ext_mem_303143;
            
            ext_mem_303143.references = NULL;
            
            struct memblock ext_mem_303142;
            
            ext_mem_303142.references = NULL;
            
            struct memblock ext_mem_303141;
            
            ext_mem_303141.references = NULL;
            
            struct memblock ext_mem_303140;
            
            ext_mem_303140.references = NULL;
            
            struct memblock ext_mem_303139;
            
            ext_mem_303139.references = NULL;
            
            int64_t rankSearchBatch_res_294612;
            int64_t rankSearchBatch_res_294613;
            int64_t rankSearchBatch_res_294614;
            bool rankSearchBatch_res_294615;
            int64_t rankSearchBatch_res_294622;
            int64_t loopz2088U_294624;
            int64_t loopz2089U_294625;
            int64_t loopz2081Uz2080U_294626;
            bool loop_while_294627;
            int64_t q_294634;
            struct memblock mem_param_302947;
            
            mem_param_302947.references = NULL;
            
            struct memblock mem_param_302952;
            
            mem_param_302952.references = NULL;
            
            int64_t ctx_param_ext_302957;
            int64_t ctx_param_ext_302958;
            int64_t ctx_param_ext_302959;
            int64_t ctx_param_ext_302960;
            struct memblock mem_param_302961;
            
            mem_param_302961.references = NULL;
            
            int64_t ctx_param_ext_302962;
            int64_t ctx_param_ext_302963;
            int64_t ctx_param_ext_302964;
            int64_t ctx_param_ext_302965;
            struct memblock mem_param_302966;
            
            mem_param_302966.references = NULL;
            
            int64_t ctx_param_ext_302967;
            int64_t ctx_param_ext_302968;
            int64_t ctx_param_ext_302969;
            int64_t ctx_param_ext_302970;
            struct memblock mem_param_302971;
            
            mem_param_302971.references = NULL;
            
            int64_t ctx_param_ext_302972;
            int64_t ctx_param_ext_302973;
            int64_t ctx_param_ext_302974;
            int64_t ctx_param_ext_302975;
            struct memblock mem_param_302976;
            
            mem_param_302976.references = NULL;
            ctx_param_ext_302957 = replicate_arg_290869;
            ctx_param_ext_302958 = (int64_t) 0;
            ctx_param_ext_302959 = (int64_t) 1;
            ctx_param_ext_302960 = replicate_arg_290869;
            ctx_param_ext_302962 = replicate_arg_290869;
            ctx_param_ext_302963 = (int64_t) 0;
            ctx_param_ext_302964 = (int64_t) 1;
            ctx_param_ext_302965 = replicate_arg_290869;
            ctx_param_ext_302967 = replicate_arg_290869;
            ctx_param_ext_302968 = (int64_t) 0;
            ctx_param_ext_302969 = (int64_t) 1;
            ctx_param_ext_302970 = replicate_arg_290869;
            ctx_param_ext_302972 = replicate_arg_290869;
            ctx_param_ext_302973 = (int64_t) 0;
            ctx_param_ext_302974 = (int64_t) 1;
            ctx_param_ext_302975 = replicate_arg_290869;
            if (memblock_set(ctx, &mem_param_302947, &mem_302921,
                             "mem_302921") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_302952, &mem_302875,
                             "mem_302875") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_302961, &mem_302955,
                             "mem_302955") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_302966, &mem_302936,
                             "mem_302936") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_302971, &mem_302918,
                             "mem_302918") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_302976, &mem_302939,
                             "mem_302939") != 0)
                return 1;
            loopz2088U_294624 = replicate_arg_290869;
            loopz2089U_294625 = replicate_arg_290869;
            loopz2081Uz2080U_294626 = replicate_arg_290869;
            loop_while_294627 = loop_cond_294610;
            q_294634 = (int64_t) 0;
            while (loop_while_294627) {
                bool cond_294636 = q_294634 == (int64_t) 0;
                int32_t inpacc_294637;
                int32_t inpacc_294640 = 0;
                
                for (int64_t i_295946 = 0; i_295946 < partition_sizze_290353;
                     i_295946++) {
                    int32_t x_296048;
                    
                    x_296048 = ((int32_t *) mem_param_302952.mem)[i_295946];
                    
                    int32_t defunc_1_op_res_294652 = add32(inpacc_294640,
                                                           x_296048);
                    double defunc_1_f_res_296058;
                    
                    if (cond_294636) {
                        double defunc_1_f_res_t_res_296063;
                        
                        defunc_1_f_res_t_res_296063 =
                            ((double *) mem_302860)[i_295946];
                        defunc_1_f_res_296058 = defunc_1_f_res_t_res_296063;
                    } else {
                        bool cond_296064 = defunc_1_op_res_294652 == 0;
                        double defunc_1_f_res_f_res_296065;
                        
                        if (cond_296064) {
                            defunc_1_f_res_f_res_296065 = 0.0;
                        } else {
                            int32_t i_296066 = sub32(defunc_1_op_res_294652, 1);
                            int64_t i_296067 = sext_i32_i64(i_296066);
                            bool x_296068 = sle64((int64_t) 0, i_296067);
                            bool y_296069 = slt64(i_296067, loopz2089U_294625);
                            bool bounds_check_296070 = x_296068 && y_296069;
                            bool index_certs_296071;
                            
                            if (!bounds_check_296070) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) i_296067,
                                              "] out of bounds for array of shape [",
                                              (long long) loopz2089U_294625,
                                              "].",
                                              "-> #0  median.fut:35:37-46\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:9:27-38\n   #4  median.fut:30:13-36:15\n   #5  median.fut:112:18-67\n   #6  stl.fut:343:23-52\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                if (memblock_unref(ctx, &mem_param_302976,
                                                   "mem_param_302976") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_302971,
                                                   "mem_param_302971") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_302966,
                                                   "mem_param_302966") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_302961,
                                                   "mem_param_302961") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_302952,
                                                   "mem_param_302952") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_302947,
                                                   "mem_param_302947") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303139,
                                                   "ext_mem_303139") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303140,
                                                   "ext_mem_303140") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303141,
                                                   "ext_mem_303141") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303142,
                                                   "ext_mem_303142") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303143,
                                                   "ext_mem_303143") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303144,
                                                   "ext_mem_303144") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_302955,
                                                   "mem_302955") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_302939,
                                                   "mem_302939") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_302936,
                                                   "mem_302936") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_302921,
                                                   "mem_302921") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_302918,
                                                   "mem_302918") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_302875,
                                                   "mem_302875") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303265,
                                                   "ext_mem_303265") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297874,
                                                   "mem_param_297874") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297866,
                                                   "mem_param_297866") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_302748,
                                                   "ext_mem_302748") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_302749,
                                                   "ext_mem_302749") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297852,
                                                   "mem_param_297852") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297844,
                                                   "mem_param_297844") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297836,
                                                   "mem_param_297836") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303273,
                                                   "ext_mem_303273") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303274,
                                                   "ext_mem_303274") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303275,
                                                   "ext_mem_303275") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_297828,
                                                   "mem_297828") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_297824,
                                                   "mem_297824") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_303840,
                                                   "mem_out_303840") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_303839,
                                                   "mem_out_303839") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_303838,
                                                   "mem_out_303838") != 0)
                                    return 1;
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            double defunc_1_f_res_f_res_f_res_296072;
                            
                            defunc_1_f_res_f_res_f_res_296072 =
                                ((double *) mem_param_302971.mem)[ctx_param_ext_302968 +
                                                                  i_296067 *
                                                                  ctx_param_ext_302969];
                            defunc_1_f_res_f_res_296065 =
                                defunc_1_f_res_f_res_f_res_296072;
                        }
                        defunc_1_f_res_296058 = defunc_1_f_res_f_res_296065;
                    }
                    ((double *) mem_302996)[i_295946] = defunc_1_f_res_296058;
                    
                    int32_t inpacc_tmp_304311 = defunc_1_op_res_294652;
                    
                    inpacc_294640 = inpacc_tmp_304311;
                }
                inpacc_294637 = inpacc_294640;
                for (int64_t i_304313 = 0; i_304313 < replicate_arg_294611;
                     i_304313++) {
                    ((int32_t *) mem_303011)[i_304313] = 0;
                }
                for (int64_t iter_295948 = 0; iter_295948 < loopz2089U_294625;
                     iter_295948++) {
                    int32_t pixel_295950;
                    
                    pixel_295950 =
                        ((int32_t *) mem_param_302961.mem)[ctx_param_ext_302958 +
                                                           iter_295948 *
                                                           ctx_param_ext_302959];
                    
                    double pixel_295951;
                    
                    pixel_295951 =
                        ((double *) mem_param_302971.mem)[ctx_param_ext_302968 +
                                                          iter_295948 *
                                                          ctx_param_ext_302969];
                    
                    int32_t sgmind_294684 = sub32(pixel_295950, 1);
                    int64_t sgmind_294685 = sext_i32_i64(sgmind_294684);
                    bool x_294686 = sle64((int64_t) 0, sgmind_294685);
                    bool y_294687 = slt64(sgmind_294685,
                                          partition_sizze_290353);
                    bool bounds_check_294688 = x_294686 && y_294687;
                    bool index_certs_294689;
                    
                    if (!bounds_check_294688) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) sgmind_294685,
                                      "] out of bounds for array of shape [",
                                      (long long) partition_sizze_290353, "].",
                                      "-> #0  median.fut:43:34-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:9:27-38\n   #4  median.fut:40:13-49:19\n   #5  median.fut:112:18-67\n   #6  stl.fut:343:23-52\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_param_302976,
                                           "mem_param_302976") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_302971,
                                           "mem_param_302971") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_302966,
                                           "mem_param_302966") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_302961,
                                           "mem_param_302961") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_302952,
                                           "mem_param_302952") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_302947,
                                           "mem_param_302947") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303139,
                                           "ext_mem_303139") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303140,
                                           "ext_mem_303140") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303141,
                                           "ext_mem_303141") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303142,
                                           "ext_mem_303142") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303143,
                                           "ext_mem_303143") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303144,
                                           "ext_mem_303144") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302955, "mem_302955") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302939, "mem_302939") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302936, "mem_302936") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302921, "mem_302921") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302918, "mem_302918") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302875, "mem_302875") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303265,
                                           "ext_mem_303265") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297874,
                                           "mem_param_297874") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297866,
                                           "mem_param_297866") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302748,
                                           "ext_mem_302748") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302749,
                                           "ext_mem_302749") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297852,
                                           "mem_param_297852") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297844,
                                           "mem_param_297844") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297836,
                                           "mem_param_297836") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303273,
                                           "ext_mem_303273") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303274,
                                           "ext_mem_303274") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303275,
                                           "ext_mem_303275") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303840,
                                           "mem_out_303840") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303839,
                                           "mem_out_303839") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303838,
                                           "mem_out_303838") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    double pivot_294690;
                    
                    pivot_294690 = ((double *) mem_302996)[sgmind_294685];
                    
                    int32_t h_ind_294691 = shl32(sgmind_294684, 1);
                    bool cond_294692 = pixel_295951 < pivot_294690;
                    int32_t binop_p_294693;
                    
                    if (cond_294692) {
                        binop_p_294693 = h_ind_294691;
                    } else {
                        bool cond_294694 = pivot_294690 == pixel_295951;
                        int32_t binop_p_f_res_294695;
                        
                        if (cond_294694) {
                            int32_t binop_p_f_res_t_res_294696 = add32(1,
                                                                       h_ind_294691);
                            
                            binop_p_f_res_294695 = binop_p_f_res_t_res_294696;
                        } else {
                            binop_p_f_res_294695 = -1;
                        }
                        binop_p_294693 = binop_p_f_res_294695;
                    }
                    
                    int64_t defunc_0_f_res_294697 =
                            sext_i32_i64(binop_p_294693);
                    bool less_than_zzero_295953 = slt64(defunc_0_f_res_294697,
                                                        (int64_t) 0);
                    bool greater_than_sizze_295954 = sle64(replicate_arg_294611,
                                                           defunc_0_f_res_294697);
                    bool outside_bounds_dim_295955 = less_than_zzero_295953 ||
                         greater_than_sizze_295954;
                    
                    if (!outside_bounds_dim_295955) {
                        int32_t read_hist_295957;
                        
                        read_hist_295957 =
                            ((int32_t *) mem_303011)[defunc_0_f_res_294697];
                        
                        int32_t defunc_1_f_res_294680 = add32(1,
                                                              read_hist_295957);
                        
                        ((int32_t *) mem_303011)[defunc_0_f_res_294697] =
                            defunc_1_f_res_294680;
                    }
                }
                for (int64_t i_295966 = 0; i_295966 < partition_sizze_290353;
                     i_295966++) {
                    int32_t x_294701;
                    
                    x_294701 = ((int32_t *) mem_param_302947.mem)[i_295966];
                    
                    bool cond_294703 = slt32(x_294701, 0);
                    int32_t defunc_1_f_res_294704;
                    int8_t defunc_1_f_res_294705;
                    int32_t defunc_1_f_res_294706;
                    
                    if (cond_294703) {
                        defunc_1_f_res_294704 = 0;
                        defunc_1_f_res_294705 = (int8_t) 3;
                        defunc_1_f_res_294706 = -1;
                    } else {
                        int64_t i_294707 = shl64(i_295966, (int64_t) 1);
                        bool x_294708 = sle64((int64_t) 0, i_294707);
                        bool y_294709 = slt64(i_294707, replicate_arg_294611);
                        bool bounds_check_294710 = x_294708 && y_294709;
                        bool index_certs_294711;
                        
                        if (!bounds_check_294710) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_294707,
                                          "] out of bounds for array of shape [",
                                          (long long) replicate_arg_294611,
                                          "].",
                                          "-> #0  median.fut:57:35-46\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:9:27-38\n   #4  median.fut:54:11-63:13\n   #5  median.fut:112:18-67\n   #6  stl.fut:343:23-52\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_param_302976,
                                               "mem_param_302976") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_302971,
                                               "mem_param_302971") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_302966,
                                               "mem_param_302966") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_302961,
                                               "mem_param_302961") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_302952,
                                               "mem_param_302952") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_302947,
                                               "mem_param_302947") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303139,
                                               "ext_mem_303139") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303140,
                                               "ext_mem_303140") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303141,
                                               "ext_mem_303141") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303142,
                                               "ext_mem_303142") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303143,
                                               "ext_mem_303143") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303144,
                                               "ext_mem_303144") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302955,
                                               "mem_302955") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302939,
                                               "mem_302939") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302936,
                                               "mem_302936") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302921,
                                               "mem_302921") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302918,
                                               "mem_302918") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302875,
                                               "mem_302875") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303265,
                                               "ext_mem_303265") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297874,
                                               "mem_param_297874") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297866,
                                               "mem_param_297866") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302748,
                                               "ext_mem_302748") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302749,
                                               "ext_mem_302749") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297852,
                                               "mem_param_297852") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297844,
                                               "mem_param_297844") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297836,
                                               "mem_param_297836") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303273,
                                               "ext_mem_303273") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303274,
                                               "ext_mem_303274") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303275,
                                               "ext_mem_303275") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297828,
                                               "mem_297828") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297824,
                                               "mem_297824") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303840,
                                               "mem_out_303840") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303839,
                                               "mem_out_303839") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_303838,
                                               "mem_out_303838") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int32_t lt_len_294712;
                        
                        lt_len_294712 = ((int32_t *) mem_303011)[i_294707];
                        
                        bool cond_294713 = slt32(x_294701, lt_len_294712);
                        int32_t defunc_1_f_res_f_res_294714;
                        int8_t defunc_1_f_res_f_res_294715;
                        int32_t defunc_1_f_res_f_res_294716;
                        
                        if (cond_294713) {
                            defunc_1_f_res_f_res_294714 = lt_len_294712;
                            defunc_1_f_res_f_res_294715 = (int8_t) 0;
                            defunc_1_f_res_f_res_294716 = x_294701;
                        } else {
                            int64_t i_294717 = add64((int64_t) 1, i_294707);
                            bool x_294718 = sle64((int64_t) 0, i_294717);
                            bool y_294719 = slt64(i_294717,
                                                  replicate_arg_294611);
                            bool bounds_check_294720 = x_294718 && y_294719;
                            bool index_certs_294721;
                            
                            if (!bounds_check_294720) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) i_294717,
                                              "] out of bounds for array of shape [",
                                              (long long) replicate_arg_294611,
                                              "].",
                                              "-> #0  median.fut:59:40-58\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:9:27-38\n   #4  median.fut:54:11-63:13\n   #5  median.fut:112:18-67\n   #6  stl.fut:343:23-52\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                if (memblock_unref(ctx, &mem_param_302976,
                                                   "mem_param_302976") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_302971,
                                                   "mem_param_302971") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_302966,
                                                   "mem_param_302966") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_302961,
                                                   "mem_param_302961") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_302952,
                                                   "mem_param_302952") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_302947,
                                                   "mem_param_302947") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303139,
                                                   "ext_mem_303139") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303140,
                                                   "ext_mem_303140") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303141,
                                                   "ext_mem_303141") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303142,
                                                   "ext_mem_303142") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303143,
                                                   "ext_mem_303143") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303144,
                                                   "ext_mem_303144") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_302955,
                                                   "mem_302955") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_302939,
                                                   "mem_302939") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_302936,
                                                   "mem_302936") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_302921,
                                                   "mem_302921") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_302918,
                                                   "mem_302918") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_302875,
                                                   "mem_302875") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303265,
                                                   "ext_mem_303265") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297874,
                                                   "mem_param_297874") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297866,
                                                   "mem_param_297866") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_302748,
                                                   "ext_mem_302748") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_302749,
                                                   "ext_mem_302749") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297852,
                                                   "mem_param_297852") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297844,
                                                   "mem_param_297844") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297836,
                                                   "mem_param_297836") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303273,
                                                   "ext_mem_303273") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303274,
                                                   "ext_mem_303274") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303275,
                                                   "ext_mem_303275") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_297828,
                                                   "mem_297828") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_297824,
                                                   "mem_297824") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_303840,
                                                   "mem_out_303840") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_303839,
                                                   "mem_out_303839") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_303838,
                                                   "mem_out_303838") != 0)
                                    return 1;
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int32_t eq_len_294722;
                            
                            eq_len_294722 = ((int32_t *) mem_303011)[i_294717];
                            
                            int32_t lteq_len_294723 = add32(lt_len_294712,
                                                            eq_len_294722);
                            bool cond_294724 = slt32(x_294701, lteq_len_294723);
                            int8_t defunc_1_f_res_f_res_f_res_294725;
                            
                            if (cond_294724) {
                                defunc_1_f_res_f_res_f_res_294725 = (int8_t) 1;
                            } else {
                                defunc_1_f_res_f_res_f_res_294725 = (int8_t) 2;
                            }
                            
                            int32_t defunc_1_f_res_f_res_f_res_294726;
                            int32_t defunc_1_f_res_f_res_f_res_294727;
                            
                            if (cond_294724) {
                                defunc_1_f_res_f_res_f_res_294726 = 0;
                                defunc_1_f_res_f_res_f_res_294727 = -1;
                            } else {
                                int32_t x_294732;
                                
                                x_294732 =
                                    ((int32_t *) mem_param_302952.mem)[i_295966];
                                
                                int32_t defunc_1_f_res_f_res_f_res_f_res_294733
                                        = sub32(x_294732, lteq_len_294723);
                                int32_t defunc_1_f_res_f_res_f_res_f_res_294734
                                        = sub32(x_294701, lteq_len_294723);
                                
                                defunc_1_f_res_f_res_f_res_294726 =
                                    defunc_1_f_res_f_res_f_res_f_res_294733;
                                defunc_1_f_res_f_res_f_res_294727 =
                                    defunc_1_f_res_f_res_f_res_f_res_294734;
                            }
                            defunc_1_f_res_f_res_294714 =
                                defunc_1_f_res_f_res_f_res_294726;
                            defunc_1_f_res_f_res_294715 =
                                defunc_1_f_res_f_res_f_res_294725;
                            defunc_1_f_res_f_res_294716 =
                                defunc_1_f_res_f_res_f_res_294727;
                        }
                        defunc_1_f_res_294704 = defunc_1_f_res_f_res_294714;
                        defunc_1_f_res_294705 = defunc_1_f_res_f_res_294715;
                        defunc_1_f_res_294706 = defunc_1_f_res_f_res_294716;
                    }
                    ((int32_t *) mem_303027)[i_295966] = defunc_1_f_res_294704;
                    ((int8_t *) mem_303029)[i_295966] = defunc_1_f_res_294705;
                    ((int32_t *) mem_303032)[i_295966] = defunc_1_f_res_294706;
                }
                
                struct memblock mem_303071;
                
                mem_303071.references = NULL;
                if (memblock_alloc(ctx, &mem_303071, bytes_302874,
                                   "mem_303071")) {
                    err = 1;
                    goto cleanup;
                }
                if (partition_sizze_290353 * (int64_t) 4 > 0)
                    memmove(mem_303071.mem + (int64_t) 0, mem_303027 +
                            (int64_t) 0, partition_sizze_290353 * (int64_t) 4);
                
                struct memblock mem_303074;
                
                mem_303074.references = NULL;
                if (memblock_alloc(ctx, &mem_303074, bytes_302874,
                                   "mem_303074")) {
                    err = 1;
                    goto cleanup;
                }
                if (partition_sizze_290353 * (int64_t) 4 > 0)
                    memmove(mem_303074.mem + (int64_t) 0, mem_303032 +
                            (int64_t) 0, partition_sizze_290353 * (int64_t) 4);
                for (int64_t write_iter_295970 = 0; write_iter_295970 <
                     partition_sizze_290353; write_iter_295970++) {
                    int8_t write_iv_295973;
                    
                    write_iv_295973 =
                        ((int8_t *) mem_303029)[write_iter_295970];
                    
                    bool cond_294740 = write_iv_295973 == (int8_t) 1;
                    int64_t defunc_1_f_res_294741;
                    
                    if (cond_294740) {
                        defunc_1_f_res_294741 = write_iter_295970;
                    } else {
                        defunc_1_f_res_294741 = (int64_t) -1;
                    }
                    
                    double defunc_1_f_res_294742;
                    
                    if (cond_294740) {
                        double defunc_1_f_res_t_res_294747;
                        
                        defunc_1_f_res_t_res_294747 =
                            ((double *) mem_302996)[write_iter_295970];
                        defunc_1_f_res_294742 = defunc_1_f_res_t_res_294747;
                    } else {
                        defunc_1_f_res_294742 = 0.0;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_294741) &&
                        slt64(defunc_1_f_res_294741, partition_sizze_290353)) {
                        ((double *) mem_302942)[defunc_1_f_res_294741] =
                            defunc_1_f_res_294742;
                    }
                }
                
                int64_t bytes_303085 = smax64((int64_t) 0, loopz2089U_294625);
                
                if (mem_303086_cached_sizze_304443 < (size_t) bytes_303085) {
                    mem_303086 = realloc(mem_303086, bytes_303085);
                    mem_303086_cached_sizze_304443 = bytes_303085;
                }
                for (int64_t i_295977 = 0; i_295977 < loopz2089U_294625;
                     i_295977++) {
                    int32_t x_294749;
                    
                    x_294749 =
                        ((int32_t *) mem_param_302961.mem)[ctx_param_ext_302958 +
                                                           i_295977 *
                                                           ctx_param_ext_302959];
                    
                    double x_294750;
                    
                    x_294750 =
                        ((double *) mem_param_302971.mem)[ctx_param_ext_302968 +
                                                          i_295977 *
                                                          ctx_param_ext_302969];
                    
                    int32_t sgmind_294751 = sub32(x_294749, 1);
                    int64_t sgmind_294752 = sext_i32_i64(sgmind_294751);
                    bool x_294753 = sle64((int64_t) 0, sgmind_294752);
                    bool y_294754 = slt64(sgmind_294752,
                                          partition_sizze_290353);
                    bool bounds_check_294755 = x_294753 && y_294754;
                    bool index_certs_294756;
                    
                    if (!bounds_check_294755) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) sgmind_294752,
                                      "] out of bounds for array of shape [",
                                      (long long) partition_sizze_290353, "].",
                                      "-> #0  median.fut:80:23-36\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:84:21-39\n   #4  median.fut:112:18-67\n   #5  stl.fut:343:23-52\n   #6  stl.fut:419:61-435:77\n   #7  stl.fut:463:3-479:36\n   #8  stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_303074, "mem_303074") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303071, "mem_303071") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_302976,
                                           "mem_param_302976") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_302971,
                                           "mem_param_302971") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_302966,
                                           "mem_param_302966") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_302961,
                                           "mem_param_302961") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_302952,
                                           "mem_param_302952") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_302947,
                                           "mem_param_302947") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303139,
                                           "ext_mem_303139") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303140,
                                           "ext_mem_303140") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303141,
                                           "ext_mem_303141") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303142,
                                           "ext_mem_303142") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303143,
                                           "ext_mem_303143") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303144,
                                           "ext_mem_303144") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302955, "mem_302955") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302939, "mem_302939") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302936, "mem_302936") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302921, "mem_302921") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302918, "mem_302918") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302875, "mem_302875") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303265,
                                           "ext_mem_303265") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297874,
                                           "mem_param_297874") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297866,
                                           "mem_param_297866") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302748,
                                           "ext_mem_302748") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302749,
                                           "ext_mem_302749") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297852,
                                           "mem_param_297852") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297844,
                                           "mem_param_297844") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297836,
                                           "mem_param_297836") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303273,
                                           "ext_mem_303273") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303274,
                                           "ext_mem_303274") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303275,
                                           "ext_mem_303275") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303840,
                                           "mem_out_303840") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303839,
                                           "mem_out_303839") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_303838,
                                           "mem_out_303838") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    double pivot_294757;
                    
                    pivot_294757 = ((double *) mem_302996)[sgmind_294752];
                    
                    int8_t kind_294758;
                    
                    kind_294758 = ((int8_t *) mem_303029)[sgmind_294752];
                    
                    bool cond_294759 = x_294750 < pivot_294757;
                    bool cond_t_res_294760 = kind_294758 == (int8_t) 0;
                    bool x_294761 = cond_294759 && cond_t_res_294760;
                    bool cond_294762 = pivot_294757 < x_294750;
                    bool defunc_1_f_res_f_res_t_res_294763 = kind_294758 ==
                         (int8_t) 2;
                    bool x_294764 = cond_294762 &&
                         defunc_1_f_res_f_res_t_res_294763;
                    bool x_294765 = !x_294761;
                    bool y_294766 = x_294764 && x_294765;
                    bool defunc_1_f_res_294767 = x_294761 || y_294766;
                    
                    ((bool *) mem_303086)[i_295977] = defunc_1_f_res_294767;
                }
                
                int64_t binop_y_303099 = (int64_t) 4 * loopz2089U_294625;
                int64_t bytes_303100 = smax64((int64_t) 0, binop_y_303099);
                
                if (mem_303101_cached_sizze_304444 < (size_t) bytes_303100) {
                    mem_303101 = realloc(mem_303101, bytes_303100);
                    mem_303101_cached_sizze_304444 = bytes_303100;
                }
                
                int32_t discard_295984;
                int32_t scanacc_295980 = 0;
                
                for (int64_t i_295982 = 0; i_295982 < loopz2089U_294625;
                     i_295982++) {
                    bool x_294773;
                    
                    x_294773 = ((bool *) mem_303086)[i_295982];
                    
                    int32_t defunc_0_f_res_294774 = btoi_bool_i32(x_294773);
                    int32_t defunc_1_op_res_294772 =
                            add32(defunc_0_f_res_294774, scanacc_295980);
                    
                    ((int32_t *) mem_303101)[i_295982] = defunc_1_op_res_294772;
                    
                    int32_t scanacc_tmp_304320 = defunc_1_op_res_294772;
                    
                    scanacc_295980 = scanacc_tmp_304320;
                }
                discard_295984 = scanacc_295980;
                
                int64_t i_294775 = sub64(loopz2089U_294625, (int64_t) 1);
                bool x_294776 = sle64((int64_t) 0, i_294775);
                bool y_294777 = slt64(i_294775, loopz2089U_294625);
                bool bounds_check_294778 = x_294776 && y_294777;
                bool index_certs_294779;
                
                if (!bounds_check_294778) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_294775,
                                  "] out of bounds for array of shape [",
                                  (long long) loopz2089U_294625, "].",
                                  "-> #0  /prelude/array.fut:26:29-34\n   #1  median.fut:87:32-44\n   #2  median.fut:112:18-67\n   #3  stl.fut:343:23-52\n   #4  stl.fut:419:61-435:77\n   #5  stl.fut:463:3-479:36\n   #6  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_303074, "mem_303074") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303071, "mem_303071") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302976,
                                       "mem_param_302976") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302971,
                                       "mem_param_302971") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302966,
                                       "mem_param_302966") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302961,
                                       "mem_param_302961") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302952,
                                       "mem_param_302952") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302947,
                                       "mem_param_302947") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303139,
                                       "ext_mem_303139") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303140,
                                       "ext_mem_303140") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303141,
                                       "ext_mem_303141") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303142,
                                       "ext_mem_303142") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303143,
                                       "ext_mem_303143") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303144,
                                       "ext_mem_303144") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302955, "mem_302955") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302939, "mem_302939") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302936, "mem_302936") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302921, "mem_302921") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302918, "mem_302918") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302875, "mem_302875") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303265,
                                       "ext_mem_303265") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297874,
                                       "mem_param_297874") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297866,
                                       "mem_param_297866") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302748,
                                       "ext_mem_302748") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302749,
                                       "ext_mem_302749") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297852,
                                       "mem_param_297852") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297844,
                                       "mem_param_297844") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297836,
                                       "mem_param_297836") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303273,
                                       "ext_mem_303273") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303274,
                                       "ext_mem_303274") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303275,
                                       "ext_mem_303275") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int32_t last_res_294780;
                
                last_res_294780 = ((int32_t *) mem_303101)[i_294775];
                
                int64_t i32_res_294781 = sext_i32_i64(last_res_294780);
                
                for (int64_t write_iter_295985 = 0; write_iter_295985 <
                     loopz2089U_294625; write_iter_295985++) {
                    bool write_iv_295988;
                    
                    write_iv_295988 = ((bool *) mem_303086)[write_iter_295985];
                    
                    int32_t write_iv_295989;
                    
                    write_iv_295989 =
                        ((int32_t *) mem_303101)[write_iter_295985];
                    
                    int64_t defunc_1_f_res_294788;
                    
                    if (write_iv_295988) {
                        int32_t i32_arg_294789 = sub32(write_iv_295989, 1);
                        int64_t i32_res_294790 = sext_i32_i64(i32_arg_294789);
                        
                        defunc_1_f_res_294788 = i32_res_294790;
                    } else {
                        defunc_1_f_res_294788 = (int64_t) -1;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_294788) &&
                        slt64(defunc_1_f_res_294788, loopz2088U_294624)) {
                        if ((int64_t) 4 > 0)
                            memmove(mem_param_302966.mem +
                                    (ctx_param_ext_302963 +
                                     ctx_param_ext_302964 *
                                     defunc_1_f_res_294788) * (int64_t) 4,
                                    mem_param_302961.mem +
                                    (ctx_param_ext_302958 +
                                     ctx_param_ext_302959 * write_iter_295985) *
                                    (int64_t) 4, (int64_t) 4);
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_294788) &&
                        slt64(defunc_1_f_res_294788, loopz2081Uz2080U_294626)) {
                        if ((int64_t) 8 > 0)
                            memmove(mem_param_302976.mem +
                                    (ctx_param_ext_302973 +
                                     ctx_param_ext_302974 *
                                     defunc_1_f_res_294788) * (int64_t) 8,
                                    mem_param_302971.mem +
                                    (ctx_param_ext_302968 +
                                     ctx_param_ext_302969 * write_iter_295985) *
                                    (int64_t) 8, (int64_t) 8);
                    }
                }
                
                bool empty_slice_294791 = i32_res_294781 == (int64_t) 0;
                int64_t m_294792 = sub64(i32_res_294781, (int64_t) 1);
                bool zzero_leq_i_p_m_t_s_294793 = sle64((int64_t) 0, m_294792);
                bool i_p_m_t_s_leq_w_294794 = slt64(m_294792,
                                                    loopz2088U_294624);
                bool i_lte_j_294795 = sle64((int64_t) 0, i32_res_294781);
                bool y_294796 = zzero_leq_i_p_m_t_s_294793 &&
                     i_p_m_t_s_leq_w_294794;
                bool y_294797 = i_lte_j_294795 && y_294796;
                bool ok_or_empty_294798 = empty_slice_294791 || y_294797;
                bool index_certs_294799;
                
                if (!ok_or_empty_294798) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [:", (long long) i32_res_294781,
                                  "] out of bounds for array of shape [",
                                  (long long) loopz2088U_294624, "].",
                                  "-> #0  median.fut:91:20-33\n   #1  median.fut:112:18-67\n   #2  stl.fut:343:23-52\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_303074, "mem_303074") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303071, "mem_303071") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302976,
                                       "mem_param_302976") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302971,
                                       "mem_param_302971") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302966,
                                       "mem_param_302966") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302961,
                                       "mem_param_302961") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302952,
                                       "mem_param_302952") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302947,
                                       "mem_param_302947") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303139,
                                       "ext_mem_303139") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303140,
                                       "ext_mem_303140") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303141,
                                       "ext_mem_303141") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303142,
                                       "ext_mem_303142") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303143,
                                       "ext_mem_303143") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303144,
                                       "ext_mem_303144") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302955, "mem_302955") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302939, "mem_302939") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302936, "mem_302936") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302921, "mem_302921") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302918, "mem_302918") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302875, "mem_302875") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303265,
                                       "ext_mem_303265") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297874,
                                       "mem_param_297874") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297866,
                                       "mem_param_297866") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302748,
                                       "ext_mem_302748") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302749,
                                       "ext_mem_302749") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297852,
                                       "mem_param_297852") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297844,
                                       "mem_param_297844") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297836,
                                       "mem_param_297836") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303273,
                                       "ext_mem_303273") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303274,
                                       "ext_mem_303274") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303275,
                                       "ext_mem_303275") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_294801 = slt64(m_294792,
                                                    loopz2081Uz2080U_294626);
                bool y_294802 = zzero_leq_i_p_m_t_s_294793 &&
                     i_p_m_t_s_leq_w_294801;
                bool y_294803 = i_lte_j_294795 && y_294802;
                bool ok_or_empty_294804 = empty_slice_294791 || y_294803;
                bool index_certs_294805;
                
                if (!ok_or_empty_294804) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [:", (long long) i32_res_294781,
                                  "] out of bounds for array of shape [",
                                  (long long) loopz2081Uz2080U_294626, "].",
                                  "-> #0  median.fut:92:20-31\n   #1  median.fut:112:18-67\n   #2  stl.fut:343:23-52\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_303074, "mem_303074") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303071, "mem_303071") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302976,
                                       "mem_param_302976") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302971,
                                       "mem_param_302971") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302966,
                                       "mem_param_302966") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302961,
                                       "mem_param_302961") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302952,
                                       "mem_param_302952") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_302947,
                                       "mem_param_302947") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303139,
                                       "ext_mem_303139") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303140,
                                       "ext_mem_303140") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303141,
                                       "ext_mem_303141") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303142,
                                       "ext_mem_303142") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303143,
                                       "ext_mem_303143") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303144,
                                       "ext_mem_303144") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302955, "mem_302955") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302939, "mem_302939") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302936, "mem_302936") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302921, "mem_302921") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302918, "mem_302918") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302875, "mem_302875") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303265,
                                       "ext_mem_303265") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297874,
                                       "mem_param_297874") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297866,
                                       "mem_param_297866") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302748,
                                       "ext_mem_302748") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302749,
                                       "ext_mem_302749") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297852,
                                       "mem_param_297852") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297844,
                                       "mem_param_297844") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297836,
                                       "mem_param_297836") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303273,
                                       "ext_mem_303273") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303274,
                                       "ext_mem_303274") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303275,
                                       "ext_mem_303275") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303840,
                                       "mem_out_303840") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303839,
                                       "mem_out_303839") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_303838,
                                       "mem_out_303838") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t loopres_294807 = add64((int64_t) 1, q_294634);
                bool loop_cond_294808 = slt64((int64_t) 0, i32_res_294781);
                int64_t ctx_param_ext_tmp_304277 = ctx_param_ext_302962;
                int64_t ctx_param_ext_tmp_304278 = ctx_param_ext_302963;
                int64_t ctx_param_ext_tmp_304279 = ctx_param_ext_302964;
                int64_t ctx_param_ext_tmp_304280 = i32_res_294781;
                int64_t ctx_param_ext_tmp_304281 = ctx_param_ext_302957;
                int64_t ctx_param_ext_tmp_304282 = ctx_param_ext_302958;
                int64_t ctx_param_ext_tmp_304283 = ctx_param_ext_302959;
                int64_t ctx_param_ext_tmp_304284 = ctx_param_ext_302960;
                int64_t ctx_param_ext_tmp_304285 = ctx_param_ext_302972;
                int64_t ctx_param_ext_tmp_304286 = ctx_param_ext_302973;
                int64_t ctx_param_ext_tmp_304287 = ctx_param_ext_302974;
                int64_t ctx_param_ext_tmp_304288 = i32_res_294781;
                int64_t ctx_param_ext_tmp_304289 = ctx_param_ext_302967;
                int64_t ctx_param_ext_tmp_304290 = ctx_param_ext_302968;
                int64_t ctx_param_ext_tmp_304291 = ctx_param_ext_302969;
                int64_t ctx_param_ext_tmp_304292 = ctx_param_ext_302970;
                struct memblock mem_param_tmp_304293;
                
                mem_param_tmp_304293.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_304293, &mem_303074,
                                 "mem_303074") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_304294;
                
                mem_param_tmp_304294.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_304294, &mem_303071,
                                 "mem_303071") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_304295;
                
                mem_param_tmp_304295.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_304295, &mem_param_302966,
                                 "mem_param_302966") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_304296;
                
                mem_param_tmp_304296.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_304296, &mem_param_302961,
                                 "mem_param_302961") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_304297;
                
                mem_param_tmp_304297.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_304297, &mem_param_302976,
                                 "mem_param_302976") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_304298;
                
                mem_param_tmp_304298.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_304298, &mem_param_302971,
                                 "mem_param_302971") != 0)
                    return 1;
                
                int64_t loopz2088U_tmp_304299 = loopz2089U_294625;
                int64_t loopz2089U_tmp_304300 = i32_res_294781;
                int64_t loopz2081Uz2080U_tmp_304301 = loopz2089U_294625;
                bool loop_while_tmp_304302 = loop_cond_294808;
                int64_t q_tmp_304309 = loopres_294807;
                
                ctx_param_ext_302957 = ctx_param_ext_tmp_304277;
                ctx_param_ext_302958 = ctx_param_ext_tmp_304278;
                ctx_param_ext_302959 = ctx_param_ext_tmp_304279;
                ctx_param_ext_302960 = ctx_param_ext_tmp_304280;
                ctx_param_ext_302962 = ctx_param_ext_tmp_304281;
                ctx_param_ext_302963 = ctx_param_ext_tmp_304282;
                ctx_param_ext_302964 = ctx_param_ext_tmp_304283;
                ctx_param_ext_302965 = ctx_param_ext_tmp_304284;
                ctx_param_ext_302967 = ctx_param_ext_tmp_304285;
                ctx_param_ext_302968 = ctx_param_ext_tmp_304286;
                ctx_param_ext_302969 = ctx_param_ext_tmp_304287;
                ctx_param_ext_302970 = ctx_param_ext_tmp_304288;
                ctx_param_ext_302972 = ctx_param_ext_tmp_304289;
                ctx_param_ext_302973 = ctx_param_ext_tmp_304290;
                ctx_param_ext_302974 = ctx_param_ext_tmp_304291;
                ctx_param_ext_302975 = ctx_param_ext_tmp_304292;
                if (memblock_set(ctx, &mem_param_302947, &mem_param_tmp_304293,
                                 "mem_param_tmp_304293") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_302952, &mem_param_tmp_304294,
                                 "mem_param_tmp_304294") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_302961, &mem_param_tmp_304295,
                                 "mem_param_tmp_304295") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_302966, &mem_param_tmp_304296,
                                 "mem_param_tmp_304296") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_302971, &mem_param_tmp_304297,
                                 "mem_param_tmp_304297") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_302976, &mem_param_tmp_304298,
                                 "mem_param_tmp_304298") != 0)
                    return 1;
                loopz2088U_294624 = loopz2088U_tmp_304299;
                loopz2089U_294625 = loopz2089U_tmp_304300;
                loopz2081Uz2080U_294626 = loopz2081Uz2080U_tmp_304301;
                loop_while_294627 = loop_while_tmp_304302;
                q_294634 = q_tmp_304309;
                if (memblock_unref(ctx, &mem_param_tmp_304298,
                                   "mem_param_tmp_304298") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_304297,
                                   "mem_param_tmp_304297") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_304296,
                                   "mem_param_tmp_304296") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_304295,
                                   "mem_param_tmp_304295") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_304294,
                                   "mem_param_tmp_304294") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_304293,
                                   "mem_param_tmp_304293") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_303074, "mem_303074") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_303071, "mem_303071") != 0)
                    return 1;
            }
            ext_303164 = ctx_param_ext_302957;
            ext_303163 = ctx_param_ext_302958;
            ext_303162 = ctx_param_ext_302959;
            ext_303161 = ctx_param_ext_302960;
            ext_303160 = ctx_param_ext_302962;
            ext_303159 = ctx_param_ext_302963;
            ext_303158 = ctx_param_ext_302964;
            ext_303157 = ctx_param_ext_302965;
            ext_303156 = ctx_param_ext_302967;
            ext_303155 = ctx_param_ext_302968;
            ext_303154 = ctx_param_ext_302969;
            ext_303153 = ctx_param_ext_302970;
            ext_303152 = ctx_param_ext_302972;
            ext_303151 = ctx_param_ext_302973;
            ext_303150 = ctx_param_ext_302974;
            ext_303149 = ctx_param_ext_302975;
            if (memblock_set(ctx, &ext_mem_303144, &mem_param_302947,
                             "mem_param_302947") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_303143, &mem_param_302952,
                             "mem_param_302952") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_303142, &mem_param_302961,
                             "mem_param_302961") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_303141, &mem_param_302966,
                             "mem_param_302966") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_303140, &mem_param_302971,
                             "mem_param_302971") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_303139, &mem_param_302976,
                             "mem_param_302976") != 0)
                return 1;
            rankSearchBatch_res_294612 = loopz2088U_294624;
            rankSearchBatch_res_294613 = loopz2089U_294625;
            rankSearchBatch_res_294614 = loopz2081Uz2080U_294626;
            rankSearchBatch_res_294615 = loop_while_294627;
            rankSearchBatch_res_294622 = q_294634;
            if (memblock_unref(ctx, &mem_302875, "mem_302875") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_302918, "mem_302918") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_302921, "mem_302921") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_302936, "mem_302936") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_302939, "mem_302939") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_302955, "mem_302955") != 0)
                return 1;
            if (mem_303175_cached_sizze_304445 < (size_t) bytes_297042) {
                mem_303175 = realloc(mem_303175, bytes_297042);
                mem_303175_cached_sizze_304445 = bytes_297042;
            }
            if (mem_303178_cached_sizze_304446 < (size_t) bytes_297042) {
                mem_303178 = realloc(mem_303178, bytes_297042);
                mem_303178_cached_sizze_304446 = bytes_297042;
            }
            if (mem_303181_cached_sizze_304447 < (size_t) bytes_297042) {
                mem_303181 = realloc(mem_303181, bytes_297042);
                mem_303181_cached_sizze_304447 = bytes_297042;
            }
            for (int64_t i_296004 = 0; i_296004 < partition_sizze_290353;
                 i_296004++) {
                double x_294813;
                
                x_294813 = ((double *) mem_302942)[i_296004];
                
                int64_t x_294814;
                
                x_294814 = ((int64_t *) mem_302882)[i_296004];
                
                int64_t x_294815;
                
                x_294815 = ((int64_t *) mem_297043)[i_296004];
                
                double defunc_2_reduce_comm_res_294816;
                int64_t defunc_2_reduce_comm_res_294817;
                int64_t defunc_2_reduce_comm_res_294818;
                double redout_295994;
                int64_t redout_295995;
                int64_t redout_295996;
                
                redout_295994 = -INFINITY;
                redout_295995 = (int64_t) -1;
                redout_295996 = (int64_t) 0;
                for (int64_t i_295997 = 0; i_295997 < n_290262; i_295997++) {
                    double x_294845;
                    
                    x_294845 = ((double *) mem_302767)[i_296004 * n_290262 +
                                                       i_295997];
                    
                    bool cond_294847 = x_294845 < x_294813;
                    int64_t defunc_0_f_res_294848 = btoi_bool_i64(cond_294847);
                    bool cond_294825 = redout_295996 == (int64_t) 0;
                    bool cond_t_res_294826 = slt64((int64_t) 0,
                                                   defunc_0_f_res_294848);
                    bool x_294827 = cond_294825 && cond_t_res_294826;
                    double defunc_1_op_res_294828;
                    int64_t defunc_1_op_res_294829;
                    
                    if (x_294827) {
                        defunc_1_op_res_294828 = x_294845;
                        defunc_1_op_res_294829 = i_295997;
                    } else {
                        bool cond_294830 = slt64((int64_t) 0, redout_295996);
                        bool cond_t_res_294831 = defunc_0_f_res_294848 ==
                             (int64_t) 0;
                        bool x_294832 = cond_294830 && cond_t_res_294831;
                        double defunc_1_op_res_f_res_294833;
                        int64_t defunc_1_op_res_f_res_294834;
                        
                        if (x_294832) {
                            defunc_1_op_res_f_res_294833 = redout_295994;
                            defunc_1_op_res_f_res_294834 = redout_295995;
                        } else {
                            bool cond_294835 = x_294845 < redout_295994;
                            double defunc_1_op_res_f_res_f_res_294836;
                            int64_t defunc_1_op_res_f_res_f_res_294837;
                            
                            if (cond_294835) {
                                defunc_1_op_res_f_res_f_res_294836 =
                                    redout_295994;
                                defunc_1_op_res_f_res_f_res_294837 =
                                    redout_295995;
                            } else {
                                bool cond_294838 = redout_295994 < x_294845;
                                double defunc_1_op_res_f_res_f_res_f_res_294839;
                                int64_t
                                defunc_1_op_res_f_res_f_res_f_res_294840;
                                
                                if (cond_294838) {
                                    defunc_1_op_res_f_res_f_res_f_res_294839 =
                                        x_294845;
                                    defunc_1_op_res_f_res_f_res_f_res_294840 =
                                        i_295997;
                                } else {
                                    bool cond_294841 = slt64(redout_295995,
                                                             i_295997);
                                    double
                                    defunc_1_op_res_f_res_f_res_f_res_f_res_294842;
                                    
                                    if (cond_294841) {
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_294842 =
                                            redout_295994;
                                    } else {
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_294842 =
                                            x_294845;
                                    }
                                    
                                    int64_t
                                    defunc_1_op_res_f_res_f_res_f_res_f_res_294843;
                                    
                                    if (cond_294841) {
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_294843 =
                                            redout_295995;
                                    } else {
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_294843 =
                                            i_295997;
                                    }
                                    defunc_1_op_res_f_res_f_res_f_res_294839 =
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_294842;
                                    defunc_1_op_res_f_res_f_res_f_res_294840 =
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_294843;
                                }
                                defunc_1_op_res_f_res_f_res_294836 =
                                    defunc_1_op_res_f_res_f_res_f_res_294839;
                                defunc_1_op_res_f_res_f_res_294837 =
                                    defunc_1_op_res_f_res_f_res_f_res_294840;
                            }
                            defunc_1_op_res_f_res_294833 =
                                defunc_1_op_res_f_res_f_res_294836;
                            defunc_1_op_res_f_res_294834 =
                                defunc_1_op_res_f_res_f_res_294837;
                        }
                        defunc_1_op_res_294828 = defunc_1_op_res_f_res_294833;
                        defunc_1_op_res_294829 = defunc_1_op_res_f_res_294834;
                    }
                    
                    int64_t defunc_1_op_res_294844 =
                            add64(defunc_0_f_res_294848, redout_295996);
                    double redout_tmp_304327 = defunc_1_op_res_294828;
                    int64_t redout_tmp_304328 = defunc_1_op_res_294829;
                    int64_t redout_tmp_304329 = defunc_1_op_res_294844;
                    
                    redout_295994 = redout_tmp_304327;
                    redout_295995 = redout_tmp_304328;
                    redout_295996 = redout_tmp_304329;
                }
                defunc_2_reduce_comm_res_294816 = redout_295994;
                defunc_2_reduce_comm_res_294817 = redout_295995;
                defunc_2_reduce_comm_res_294818 = redout_295996;
                
                bool cond_294849 = x_294814 == (int64_t) 0;
                int64_t x_294850 = smod64(x_294815, (int64_t) 2);
                bool cond_f_res_294851 = x_294850 == (int64_t) 1;
                bool x_294852 = !cond_294849;
                bool y_294853 = cond_f_res_294851 && x_294852;
                bool cond_294854 = cond_294849 || y_294853;
                bool cond_f_res_294855 = slt64(defunc_2_reduce_comm_res_294818,
                                               x_294814);
                bool x_294856 = !cond_294854;
                bool y_294857 = cond_f_res_294855 && x_294856;
                bool cond_294858 = cond_294854 || y_294857;
                double defunc_4_f_res_294859;
                
                if (cond_294858) {
                    defunc_4_f_res_294859 = x_294813;
                } else {
                    double x_294860 = x_294813 -
                           defunc_2_reduce_comm_res_294816;
                    double y_294861 = x_294860 / 2.0;
                    double defunc_4_f_res_f_res_294862 =
                           defunc_2_reduce_comm_res_294816 + y_294861;
                    
                    defunc_4_f_res_294859 = defunc_4_f_res_f_res_294862;
                }
                
                double h_294863 = 6.0 * defunc_4_f_res_294859;
                double h9_294864 = 0.999 * h_294863;
                double h1_294865 = 1.0e-3 * h_294863;
                
                ((double *) mem_303175)[i_296004] = h_294863;
                ((double *) mem_303178)[i_296004] = h9_294864;
                ((double *) mem_303181)[i_296004] = h1_294865;
            }
            
            struct memblock mem_303221;
            
            mem_303221.references = NULL;
            if (memblock_alloc(ctx, &mem_303221, bytes_297039, "mem_303221")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_296014 = 0; i_296014 < partition_sizze_290353;
                 i_296014++) {
                double x_294871;
                
                x_294871 = ((double *) mem_303175)[i_296014];
                
                double x_294872;
                
                x_294872 = ((double *) mem_303178)[i_296014];
                
                double x_294873;
                
                x_294873 = ((double *) mem_303181)[i_296014];
                for (int64_t i_296010 = 0; i_296010 < n_290262; i_296010++) {
                    double x_294875;
                    
                    x_294875 = ((double *) mem_302771)[i_296014 * n_290262 +
                                                       i_296010];
                    
                    double x_294876 = x_294875 / x_294871;
                    double y_294877 = fpow64(x_294876, 2.0);
                    double x_294878 = 1.0 - y_294877;
                    double bicube_294879 = fpow64(x_294878, 2.0);
                    bool isnan_res_294880;
                    
                    isnan_res_294880 = futrts_isnan64(x_294875);
                    
                    bool cond_f_res_294881 = x_294875 <= x_294873;
                    bool x_294882 = !isnan_res_294880;
                    bool y_294883 = cond_f_res_294881 && x_294882;
                    bool cond_294884 = isnan_res_294880 || y_294883;
                    double defunc_0_f_res_294885;
                    
                    if (cond_294884) {
                        defunc_0_f_res_294885 = 1.0;
                    } else {
                        bool cond_294886 = x_294872 <= x_294875;
                        bool cond_f_res_294887 = x_294875 <= 1.0e-6;
                        bool x_294888 = !cond_294886;
                        bool y_294889 = cond_f_res_294887 && x_294888;
                        bool cond_294890 = cond_294886 || y_294889;
                        double defunc_0_f_res_f_res_294891;
                        
                        if (cond_294890) {
                            defunc_0_f_res_f_res_294891 = 1.0e-6;
                        } else {
                            defunc_0_f_res_f_res_294891 = bicube_294879;
                        }
                        defunc_0_f_res_294885 = defunc_0_f_res_f_res_294891;
                    }
                    ((double *) mem_303221.mem)[i_296014 * n_290262 +
                                                i_296010] =
                        defunc_0_f_res_294885;
                }
            }
            if (memblock_set(ctx, &ext_mem_303265, &mem_303221, "mem_303221") !=
                0)
                return 1;
            if (memblock_unref(ctx, &mem_303221, "mem_303221") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_302976, "mem_param_302976") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_302971, "mem_param_302971") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_302966, "mem_param_302966") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_302961, "mem_param_302961") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_302952, "mem_param_302952") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_302947, "mem_param_302947") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303139, "ext_mem_303139") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303140, "ext_mem_303140") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303141, "ext_mem_303141") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303142, "ext_mem_303142") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303143, "ext_mem_303143") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303144, "ext_mem_303144") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_302955, "mem_302955") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_302939, "mem_302939") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_302936, "mem_302936") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_302921, "mem_302921") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_302918, "mem_302918") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_302875, "mem_302875") != 0)
                return 1;
        } else {
            if (memblock_set(ctx, &ext_mem_303265, &mem_param_297852,
                             "mem_param_297852") != 0)
                return 1;
        }
        
        int64_t ctx_param_ext_tmp_303907 = ext_302755;
        int64_t ctx_param_ext_tmp_303908 = ext_302753;
        int64_t ctx_param_ext_tmp_303909 = ext_303270;
        int64_t ctx_param_ext_tmp_303910 = ext_303269;
        int64_t ctx_param_ext_tmp_303911 = ext_303266;
        int64_t ctx_param_ext_tmp_303912 = ext_303268;
        int64_t ctx_param_ext_tmp_303913 = ext_303272;
        int64_t ctx_param_ext_tmp_303914 = ext_303267;
        int64_t ctx_param_ext_tmp_303915 = ext_303271;
        struct memblock mem_param_tmp_303916;
        
        mem_param_tmp_303916.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_303916, &ext_mem_302749,
                         "ext_mem_302749") != 0)
            return 1;
        
        struct memblock mem_param_tmp_303917;
        
        mem_param_tmp_303917.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_303917, &ext_mem_302748,
                         "ext_mem_302748") != 0)
            return 1;
        
        struct memblock mem_param_tmp_303918;
        
        mem_param_tmp_303918.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_303918, &ext_mem_303265,
                         "ext_mem_303265") != 0)
            return 1;
        ctx_param_ext_297838 = ctx_param_ext_tmp_303907;
        ctx_param_ext_297840 = ctx_param_ext_tmp_303908;
        ctx_param_ext_297845 = ctx_param_ext_tmp_303909;
        ctx_param_ext_297846 = ctx_param_ext_tmp_303910;
        ctx_param_ext_297847 = ctx_param_ext_tmp_303911;
        ctx_param_ext_297848 = ctx_param_ext_tmp_303912;
        ctx_param_ext_297849 = ctx_param_ext_tmp_303913;
        ctx_param_ext_297850 = ctx_param_ext_tmp_303914;
        ctx_param_ext_297851 = ctx_param_ext_tmp_303915;
        if (memblock_set(ctx, &mem_param_297836, &mem_param_tmp_303916,
                         "mem_param_tmp_303916") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_297844, &mem_param_tmp_303917,
                         "mem_param_tmp_303917") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_297852, &mem_param_tmp_303918,
                         "mem_param_tmp_303918") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_303918,
                           "mem_param_tmp_303918") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_303917,
                           "mem_param_tmp_303917") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_303916,
                           "mem_param_tmp_303916") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_303265, "ext_mem_303265") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_297874, "mem_param_297874") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_297866, "mem_param_297866") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_302748, "ext_mem_302748") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_302749, "ext_mem_302749") != 0)
            return 1;
    }
    ext_303288 = ctx_param_ext_297838;
    ext_303286 = ctx_param_ext_297840;
    ext_303282 = ctx_param_ext_297845;
    ext_303281 = ctx_param_ext_297846;
    ext_303280 = ctx_param_ext_297847;
    ext_303279 = ctx_param_ext_297848;
    ext_303278 = ctx_param_ext_297849;
    ext_303277 = ctx_param_ext_297850;
    ext_303276 = ctx_param_ext_297851;
    if (memblock_set(ctx, &ext_mem_303275, &mem_param_297836,
                     "mem_param_297836") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_303274, &mem_param_297844,
                     "mem_param_297844") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_303273, &mem_param_297852,
                     "mem_param_297852") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
        return 1;
    if (mem_303300_cached_sizze_304448 < (size_t) bytes_296999) {
        mem_303300 = realloc(mem_303300, bytes_296999);
        mem_303300_cached_sizze_304448 = bytes_296999;
    }
    for (int64_t i_304332 = 0; i_304332 < m_290261; i_304332++) {
        for (int64_t i_304333 = 0; i_304333 < n_290262; i_304333++) {
            ((float *) mem_303300)[i_304332 * n_290262 + i_304333] = NAN;
        }
    }
    if (mem_303304_cached_sizze_304449 < (size_t) bytes_296999) {
        mem_303304 = realloc(mem_303304, bytes_296999);
        mem_303304_cached_sizze_304449 = bytes_296999;
    }
    for (int64_t i_304334 = 0; i_304334 < m_290261; i_304334++) {
        for (int64_t i_304335 = 0; i_304335 < n_290262; i_304335++) {
            ((float *) mem_303304)[i_304334 * n_290262 + i_304335] = NAN;
        }
    }
    if (mem_303308_cached_sizze_304450 < (size_t) bytes_296999) {
        mem_303308 = realloc(mem_303308, bytes_296999);
        mem_303308_cached_sizze_304450 = bytes_296999;
    }
    for (int64_t i_304336 = 0; i_304336 < m_290261; i_304336++) {
        for (int64_t i_304337 = 0; i_304337 < n_290262; i_304337++) {
            ((float *) mem_303308)[i_304336 * n_290262 + i_304337] = NAN;
        }
    }
    
    int64_t binop_y_303339 = (int64_t) 4 * n_290262;
    int64_t bytes_303340 = smax64((int64_t) 0, binop_y_303339);
    
    if (mem_303341_cached_sizze_304451 < (size_t) bytes_303340) {
        mem_303341 = realloc(mem_303341, bytes_303340);
        mem_303341_cached_sizze_304451 = bytes_303340;
    }
    if (mem_303344_cached_sizze_304452 < (size_t) bytes_303340) {
        mem_303344 = realloc(mem_303344, bytes_303340);
        mem_303344_cached_sizze_304452 = bytes_303340;
    }
    if (mem_303347_cached_sizze_304453 < (size_t) bytes_303340) {
        mem_303347 = realloc(mem_303347, bytes_303340);
        mem_303347_cached_sizze_304453 = bytes_303340;
    }
    for (int64_t write_iter_296026 = 0; write_iter_296026 <
         partition_sizze_290353; write_iter_296026++) {
        int64_t write_iv_296033;
        
        write_iv_296033 = ((int64_t *) mem_297003)[write_iter_296026];
        for (int64_t i_296022 = 0; i_296022 < n_290262; i_296022++) {
            double x_294906;
            
            x_294906 = ((double *) ext_mem_303275.mem)[write_iter_296026 *
                                                       n_290262 + i_296022];
            
            double x_294907;
            
            x_294907 = ((double *) ext_mem_303274.mem)[write_iter_296026 *
                                                       ext_303286 + i_296022];
            
            float x_294908;
            
            x_294908 = ((float *) mem_297000)[write_iter_296026 * n_290262 +
                                              i_296022];
            
            float defunc_0_g_res_294909 = fpconv_f64_f32(x_294906);
            float defunc_0_g_res_294910 = fpconv_f64_f32(x_294907);
            float x_294911 = x_294908 - defunc_0_g_res_294909;
            float defunc_2_f_res_294912 = x_294911 - defunc_0_g_res_294910;
            
            ((float *) mem_303341)[i_296022] = defunc_2_f_res_294912;
            ((float *) mem_303344)[i_296022] = defunc_0_g_res_294910;
            ((float *) mem_303347)[i_296022] = defunc_0_g_res_294909;
        }
        if ((sle64((int64_t) 0, write_iv_296033) && slt64(write_iv_296033,
                                                          m_290261)) &&
            (sle64((int64_t) 0, (int64_t) 0) && slt64(n_290262 - (int64_t) 1,
                                                      n_290262))) {
            if (n_290262 * (int64_t) 4 > 0)
                memmove(mem_303308 + write_iv_296033 * n_290262 * (int64_t) 4,
                        mem_303341 + (int64_t) 0, n_290262 * (int64_t) 4);
        }
        if ((sle64((int64_t) 0, write_iv_296033) && slt64(write_iv_296033,
                                                          m_290261)) &&
            (sle64((int64_t) 0, (int64_t) 0) && slt64(n_290262 - (int64_t) 1,
                                                      n_290262))) {
            if (n_290262 * (int64_t) 4 > 0)
                memmove(mem_303304 + write_iv_296033 * n_290262 * (int64_t) 4,
                        mem_303344 + (int64_t) 0, n_290262 * (int64_t) 4);
        }
        if ((sle64((int64_t) 0, write_iv_296033) && slt64(write_iv_296033,
                                                          m_290261)) &&
            (sle64((int64_t) 0, (int64_t) 0) && slt64(n_290262 - (int64_t) 1,
                                                      n_290262))) {
            if (n_290262 * (int64_t) 4 > 0)
                memmove(mem_303300 + write_iv_296033 * n_290262 * (int64_t) 4,
                        mem_303347 + (int64_t) 0, n_290262 * (int64_t) 4);
        }
    }
    if (memblock_unref(ctx, &ext_mem_303274, "ext_mem_303274") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_303275, "ext_mem_303275") != 0)
        return 1;
    
    struct memblock mem_303411;
    
    mem_303411.references = NULL;
    if (memblock_alloc(ctx, &mem_303411, bytes_296999, "mem_303411")) {
        err = 1;
        goto cleanup;
    }
    if (m_290261 * n_290262 * (int64_t) 4 > 0)
        memmove(mem_303411.mem + (int64_t) 0, mem_303300 + (int64_t) 0,
                m_290261 * n_290262 * (int64_t) 4);
    
    struct memblock mem_303416;
    
    mem_303416.references = NULL;
    if (memblock_alloc(ctx, &mem_303416, bytes_296999, "mem_303416")) {
        err = 1;
        goto cleanup;
    }
    if (m_290261 * n_290262 * (int64_t) 4 > 0)
        memmove(mem_303416.mem + (int64_t) 0, mem_303304 + (int64_t) 0,
                m_290261 * n_290262 * (int64_t) 4);
    
    struct memblock mem_303421;
    
    mem_303421.references = NULL;
    if (memblock_alloc(ctx, &mem_303421, bytes_296999, "mem_303421")) {
        err = 1;
        goto cleanup;
    }
    if (m_290261 * n_290262 * (int64_t) 4 > 0)
        memmove(mem_303421.mem + (int64_t) 0, mem_303308 + (int64_t) 0,
                m_290261 * n_290262 * (int64_t) 4);
    if (memblock_set(ctx, &mem_out_303838, &mem_303411, "mem_303411") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_303839, &mem_303416, "mem_303416") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_303840, &mem_303421, "mem_303421") != 0)
        return 1;
    (*mem_out_p_304344).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_304344, &mem_out_303838,
                     "mem_out_303838") != 0)
        return 1;
    (*mem_out_p_304345).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_304345, &mem_out_303839,
                     "mem_out_303839") != 0)
        return 1;
    (*mem_out_p_304346).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_304346, &mem_out_303840,
                     "mem_out_303840") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_303421, "mem_303421") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_303416, "mem_303416") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_303411, "mem_303411") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_297852, "mem_param_297852") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_297844, "mem_param_297844") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_297836, "mem_param_297836") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_303273, "ext_mem_303273") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_303274, "ext_mem_303274") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_303275, "ext_mem_303275") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_297828, "mem_297828") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_297824, "mem_297824") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_303840, "mem_out_303840") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_303839, "mem_out_303839") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_296969);
    free(mem_296972);
    free(mem_297000);
    free(mem_297003);
    free(mem_297023);
    free(mem_297040);
    free(mem_297043);
    free(mem_297063);
    free(mem_297078);
    free(mem_297118);
    free(mem_297221);
    free(mem_297225);
    free(mem_297278);
    free(mem_297293);
    free(mem_297386);
    free(mem_297391);
    free(mem_297452);
    free(mem_297606);
    free(mem_297610);
    free(mem_297633);
    free(mem_297715);
    free(mem_297719);
    free(mem_297742);
    free(mem_297878);
    free(mem_297926);
    free(mem_297931);
    free(mem_298752);
    free(mem_298922);
    free(mem_298925);
    free(mem_299158);
    free(mem_299161);
    free(mem_299188);
    free(mem_299191);
    free(mem_300086);
    free(mem_300132);
    free(mem_300148);
    free(mem_300161);
    free(mem_300184);
    free(mem_300200);
    free(mem_300213);
    free(mem_300236);
    free(mem_300252);
    free(mem_300265);
    free(mem_300588);
    free(mem_300675);
    free(mem_300678);
    free(mem_300799);
    free(mem_300802);
    free(mem_300829);
    free(mem_300832);
    free(mem_301358);
    free(mem_301373);
    free(mem_301376);
    free(mem_301464);
    free(mem_301479);
    free(mem_301482);
    free(mem_301603);
    free(mem_301618);
    free(mem_301621);
    free(mem_301764);
    free(mem_301779);
    free(mem_301782);
    free(mem_301820);
    free(mem_301885);
    free(mem_301900);
    free(mem_301903);
    free(mem_301952);
    free(mem_301955);
    free(mem_302054);
    free(mem_302069);
    free(mem_302072);
    free(mem_302121);
    free(mem_302124);
    free(mem_302151);
    free(mem_302154);
    free(mem_302275);
    free(mem_302290);
    free(mem_302293);
    free(mem_302381);
    free(mem_302396);
    free(mem_302399);
    free(mem_302520);
    free(mem_302535);
    free(mem_302538);
    free(mem_302767);
    free(mem_302771);
    free(mem_302860);
    free(mem_302879);
    free(mem_302882);
    free(mem_302902);
    free(mem_302942);
    free(mem_302996);
    free(mem_303011);
    free(mem_303027);
    free(mem_303029);
    free(mem_303032);
    free(mem_303086);
    free(mem_303101);
    free(mem_303175);
    free(mem_303178);
    free(mem_303181);
    free(mem_303300);
    free(mem_303304);
    free(mem_303308);
    free(mem_303341);
    free(mem_303344);
    free(mem_303347);
    return err;
}
static int futrts_entry_seasonal_amplitude(struct futhark_context *ctx,
                                           struct memblock *mem_out_p_304454,
                                           struct memblock seasonal_l_mem_296966,
                                           int64_t m_290196, int64_t n_290197)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_296969_cached_sizze_304455 = 0;
    unsigned char *mem_296969 = NULL;
    struct memblock mem_out_303838;
    
    mem_out_303838.references = NULL;
    
    int64_t binop_y_296967 = (int64_t) 4 * m_290196;
    int64_t bytes_296968 = smax64((int64_t) 0, binop_y_296967);
    
    if (mem_296969_cached_sizze_304455 < (size_t) bytes_296968) {
        mem_296969 = realloc(mem_296969, bytes_296968);
        mem_296969_cached_sizze_304455 = bytes_296968;
    }
    for (int64_t i_294918 = 0; i_294918 < m_290196; i_294918++) {
        float defunc_2_reduce_res_290201;
        float defunc_2_reduce_res_290202;
        float redout_294913;
        float redout_294914;
        
        redout_294913 = -INFINITY;
        redout_294914 = INFINITY;
        for (int64_t i_294915 = 0; i_294915 < n_290197; i_294915++) {
            float x_290209;
            
            x_290209 = ((float *) seasonal_l_mem_296966.mem)[i_294918 *
                                                             n_290197 +
                                                             i_294915];
            
            float defunc_1_op_res_290205 = fmax32(x_290209, redout_294913);
            float defunc_1_op_res_290208 = fmin32(x_290209, redout_294914);
            float redout_tmp_303840 = defunc_1_op_res_290205;
            float redout_tmp_303841 = defunc_1_op_res_290208;
            
            redout_294913 = redout_tmp_303840;
            redout_294914 = redout_tmp_303841;
        }
        defunc_2_reduce_res_290201 = redout_294913;
        defunc_2_reduce_res_290202 = redout_294914;
        
        float v_290210 = defunc_2_reduce_res_290201 -
              defunc_2_reduce_res_290202;
        bool isinf_res_290211;
        
        isinf_res_290211 = futrts_isinf32(v_290210);
        
        float defunc_0_f_res_290212;
        
        if (isinf_res_290211) {
            defunc_0_f_res_290212 = NAN;
        } else {
            defunc_0_f_res_290212 = v_290210;
        }
        ((float *) mem_296969)[i_294918] = defunc_0_f_res_290212;
    }
    
    struct memblock mem_296984;
    
    mem_296984.references = NULL;
    if (memblock_alloc(ctx, &mem_296984, bytes_296968, "mem_296984")) {
        err = 1;
        goto cleanup;
    }
    if (m_290196 * (int64_t) 4 > 0)
        memmove(mem_296984.mem + (int64_t) 0, mem_296969 + (int64_t) 0,
                m_290196 * (int64_t) 4);
    if (memblock_set(ctx, &mem_out_303838, &mem_296984, "mem_296984") != 0)
        return 1;
    (*mem_out_p_304454).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_304454, &mem_out_303838,
                     "mem_out_303838") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_296984, "mem_296984") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_296969);
    return err;
}
static int futrts_entry_trend_magnitude(struct futhark_context *ctx,
                                        struct memblock *mem_out_p_304456,
                                        struct memblock trend_l_mem_296966,
                                        int64_t m_290213, int64_t n_290214)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_296969_cached_sizze_304457 = 0;
    unsigned char *mem_296969 = NULL;
    size_t mem_296984_cached_sizze_304458 = 0;
    unsigned char *mem_296984 = NULL;
    struct memblock mem_out_303838;
    
    mem_out_303838.references = NULL;
    
    int64_t binop_y_296967 = (int64_t) 8 * n_290214;
    int64_t bytes_296968 = smax64((int64_t) 0, binop_y_296967);
    
    if (mem_296969_cached_sizze_304457 < (size_t) bytes_296968) {
        mem_296969 = realloc(mem_296969, bytes_296968);
        mem_296969_cached_sizze_304457 = bytes_296968;
    }
    
    double defunc_2_reduce_res_290223;
    double defunc_2_reduce_res_290224;
    double redout_294914;
    double redout_294915;
    
    redout_294914 = 0.0;
    redout_294915 = 0.0;
    for (int64_t i_294917 = 0; i_294917 < n_290214; i_294917++) {
        int64_t x__290233 = add64((int64_t) 1, i_294917);
        double i64_res_290234 = sitofp_i64_f64(x__290233);
        double defunc_0_f_res_290235 = i64_res_290234 * i64_res_290234;
        double defunc_1_op_res_290228 = i64_res_290234 + redout_294914;
        double defunc_1_op_res_290231 = defunc_0_f_res_290235 + redout_294915;
        
        ((double *) mem_296969)[i_294917] = i64_res_290234;
        
        double redout_tmp_303839 = defunc_1_op_res_290228;
        double redout_tmp_303840 = defunc_1_op_res_290231;
        
        redout_294914 = redout_tmp_303839;
        redout_294915 = redout_tmp_303840;
    }
    defunc_2_reduce_res_290223 = redout_294914;
    defunc_2_reduce_res_290224 = redout_294915;
    
    double i64_res_290239 = sitofp_i64_f64(n_290214);
    double x_290240 = defunc_2_reduce_res_290224 * i64_res_290239;
    double y_290241 = defunc_2_reduce_res_290223 * defunc_2_reduce_res_290223;
    double y_290242 = x_290240 - y_290241;
    double det1_290243 = 1.0 / y_290242;
    double x_290244 = 0.0 - defunc_2_reduce_res_290223;
    double b11_290245 = det1_290243 * x_290244;
    double c11_290246 = i64_res_290239 * det1_290243;
    int64_t binop_y_296982 = (int64_t) 4 * m_290213;
    int64_t bytes_296983 = smax64((int64_t) 0, binop_y_296982);
    
    if (mem_296984_cached_sizze_304458 < (size_t) bytes_296983) {
        mem_296984 = realloc(mem_296984, bytes_296983);
        mem_296984_cached_sizze_304458 = bytes_296983;
    }
    for (int64_t i_294923 = 0; i_294923 < m_290213; i_294923++) {
        double defunc_2_reduce_res_290249;
        double redout_294919 = 0.0;
        
        for (int64_t i_294920 = 0; i_294920 < n_290214; i_294920++) {
            double x_290253;
            
            x_290253 = ((double *) mem_296969)[i_294920];
            
            float x_290254;
            
            x_290254 = ((float *) trend_l_mem_296966.mem)[i_294923 * n_290214 +
                                                          i_294920];
            
            double y_290255 = c11_290246 * x_290253;
            double x_290256 = b11_290245 + y_290255;
            double f32_res_290257 = fpconv_f32_f64(x_290254);
            double defunc_1_f_res_290258 = x_290256 * f32_res_290257;
            double defunc_1_op_res_290252 = defunc_1_f_res_290258 +
                   redout_294919;
            double redout_tmp_303843 = defunc_1_op_res_290252;
            
            redout_294919 = redout_tmp_303843;
        }
        defunc_2_reduce_res_290249 = redout_294919;
        
        double defunc_0_f_res_290259 = i64_res_290239 *
               defunc_2_reduce_res_290249;
        float defunc_0_f_res_290260 = fpconv_f64_f32(defunc_0_f_res_290259);
        
        ((float *) mem_296984)[i_294923] = defunc_0_f_res_290260;
    }
    
    struct memblock mem_296999;
    
    mem_296999.references = NULL;
    if (memblock_alloc(ctx, &mem_296999, bytes_296983, "mem_296999")) {
        err = 1;
        goto cleanup;
    }
    if (m_290213 * (int64_t) 4 > 0)
        memmove(mem_296999.mem + (int64_t) 0, mem_296984 + (int64_t) 0,
                m_290213 * (int64_t) 4);
    if (memblock_set(ctx, &mem_out_303838, &mem_296999, "mem_296999") != 0)
        return 1;
    (*mem_out_p_304456).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_304456, &mem_out_303838,
                     "mem_out_303838") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_296999, "mem_296999") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_303838, "mem_out_303838") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_296969);
    free(mem_296984);
    return err;
}

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7, const
                       int64_t in8, const int64_t in9, const int64_t in10, const
                       int64_t in11, const int64_t in12, const int64_t in13,
                       const int64_t in14, const int64_t in15, const
                       int64_t in16)
{
    struct memblock Y_mem_296966;
    
    Y_mem_296966.references = NULL;
    
    int64_t m_290261;
    int64_t n_290262;
    int64_t n_p_290264;
    int64_t q_s_290265;
    int64_t q_t_290266;
    int64_t q_l_290267;
    int64_t d_s_290268;
    int64_t d_t_290269;
    int64_t d_l_290270;
    int64_t jump_s_290271;
    int64_t jump_t_290272;
    int64_t jump_l_290273;
    int64_t n_inner_290274;
    int64_t n_outer_290275;
    int64_t jump_threshold_1_290276;
    int64_t jump_threshold_2_290277;
    int64_t q_threshold_1_290278;
    int64_t q_threshold_2_290279;
    struct memblock mem_out_303838;
    
    mem_out_303838.references = NULL;
    
    struct memblock mem_out_303839;
    
    mem_out_303839.references = NULL;
    
    struct memblock mem_out_303840;
    
    mem_out_303840.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    Y_mem_296966 = in0->mem;
    m_290261 = in0->shape[0];
    n_290262 = in0->shape[1];
    n_p_290264 = in1;
    q_s_290265 = in2;
    q_t_290266 = in3;
    q_l_290267 = in4;
    d_s_290268 = in5;
    d_t_290269 = in6;
    d_l_290270 = in7;
    jump_s_290271 = in8;
    jump_t_290272 = in9;
    jump_l_290273 = in10;
    n_inner_290274 = in11;
    n_outer_290275 = in12;
    jump_threshold_1_290276 = in13;
    jump_threshold_2_290277 = in14;
    q_threshold_1_290278 = in15;
    q_threshold_2_290279 = in16;
    if (!(m_290261 == in0->shape[0] && n_290262 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_303838, &mem_out_303839,
                                &mem_out_303840, Y_mem_296966, m_290261,
                                n_290262, n_p_290264, q_s_290265, q_t_290266,
                                q_l_290267, d_s_290268, d_t_290269, d_l_290270,
                                jump_s_290271, jump_t_290272, jump_l_290273,
                                n_inner_290274, n_outer_290275,
                                jump_threshold_1_290276,
                                jump_threshold_2_290277, q_threshold_1_290278,
                                q_threshold_2_290279);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_303838;
            (*out0)->shape[0] = m_290261;
            (*out0)->shape[1] = n_290262;
            assert((*out1 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out1)->mem = mem_out_303839;
            (*out1)->shape[0] = m_290261;
            (*out1)->shape[1] = n_290262;
            assert((*out2 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out2)->mem = mem_out_303840;
            (*out2)->shape[0] = m_290261;
            (*out2)->shape[1] = n_290262;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_seasonal_amplitude(struct futhark_context *ctx,
                                     struct futhark_f32_1d **out0, const
                                     struct futhark_f32_2d *in0)
{
    struct memblock seasonal_l_mem_296966;
    
    seasonal_l_mem_296966.references = NULL;
    
    int64_t m_290196;
    int64_t n_290197;
    struct memblock mem_out_303838;
    
    mem_out_303838.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    seasonal_l_mem_296966 = in0->mem;
    m_290196 = in0->shape[0];
    n_290197 = in0->shape[1];
    if (!(m_290196 == in0->shape[0] && n_290197 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_seasonal_amplitude(ctx, &mem_out_303838,
                                              seasonal_l_mem_296966, m_290196,
                                              n_290197);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
                NULL);
            (*out0)->mem = mem_out_303838;
            (*out0)->shape[0] = m_290196;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_trend_magnitude(struct futhark_context *ctx,
                                  struct futhark_f32_1d **out0, const
                                  struct futhark_f32_2d *in0)
{
    struct memblock trend_l_mem_296966;
    
    trend_l_mem_296966.references = NULL;
    
    int64_t m_290213;
    int64_t n_290214;
    struct memblock mem_out_303838;
    
    mem_out_303838.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    trend_l_mem_296966 = in0->mem;
    m_290213 = in0->shape[0];
    n_290214 = in0->shape[1];
    if (!(m_290213 == in0->shape[0] && n_290214 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_trend_magnitude(ctx, &mem_out_303838,
                                           trend_l_mem_296966, m_290213,
                                           n_290214);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
                NULL);
            (*out0)->mem = mem_out_303838;
            (*out0)->shape[0] = m_290213;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
  
