// Generated by Futhark 0.21.5
// git: e1c63b2 (Tue Feb 1 22:06:34 2022 +0100)

// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers\n")
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t param_value);
int futhark_get_tuning_param_count(void);
const char *futhark_get_tuning_param_name(int);
const char *futhark_get_tuning_param_class(int);

// Arrays
struct futhark_f32_1d;
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0);
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0);
int futhark_free_f32_1d(struct futhark_context *ctx,
                        struct futhark_f32_1d *arr);
int futhark_values_f32_1d(struct futhark_context *ctx,
                          struct futhark_f32_1d *arr, float *data);
unsigned char *futhark_values_raw_f32_1d(struct futhark_context *ctx,
                                         struct futhark_f32_1d *arr);
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx,
                                    struct futhark_f32_1d *arr);
struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
unsigned char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                         struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7, const
                       int64_t in8, const int64_t in9, const int64_t in10, const
                       int64_t in11, const int64_t in12, const int64_t in13,
                       const int64_t in14, const int64_t in15, const
                       int64_t in16);
int futhark_entry_seasonal_amplitude(struct futhark_context *ctx,
                                     struct futhark_f32_1d **out0, const
                                     struct futhark_f32_2d *in0);
int futhark_entry_trend_magnitude(struct futhark_context *ctx,
                                  struct futhark_f32_1d **out0, const
                                  struct futhark_f32_2d *in0);

// Miscellaneous
int futhark_context_sync(struct futhark_context *ctx);
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_c
#define FUTHARK_SUCCESS 0
#define FUTHARK_PROGRAM_ERROR 2
#define FUTHARK_OUT_OF_MEMORY 3

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

static uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

static float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>



// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

static inline uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

static inline uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

static inline uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

static inline uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

static inline uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

static inline uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

static inline uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

static inline uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

static inline uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

static inline uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

static inline uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

static inline uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

static inline int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

static inline int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

static inline int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

static inline uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

static inline uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

static inline uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

static inline uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

static inline int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

static inline int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

static inline int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

static inline int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

static inline uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

static inline uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

static inline uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

static inline uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

static inline uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

static inline uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

static inline uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

static inline uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

static inline uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

static inline uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

static inline uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

static inline uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

static inline int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

static inline int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

static inline int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

static inline int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

static inline uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

static inline uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

static inline uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

static inline uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

static inline uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

static inline uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

static inline uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

static inline uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

static inline uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

static inline uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

static inline uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

static inline uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

static inline bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

static inline bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

static inline bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

static inline bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

static inline bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

static inline bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

static inline bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

static inline bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

static inline bool slt8(int8_t x, int8_t y) {
  return x < y;
}

static inline bool slt16(int16_t x, int16_t y) {
  return x < y;
}

static inline bool slt32(int32_t x, int32_t y) {
  return x < y;
}

static inline bool slt64(int64_t x, int64_t y) {
  return x < y;
}

static inline bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

static inline bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

static inline bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

static inline bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

static inline uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline bool itob_i8_bool(int8_t x) {
  return x;
}

static inline bool itob_i16_bool(int16_t x) {
  return x;
}

static inline bool itob_i32_bool(int32_t x) {
  return x;
}

static inline bool itob_i64_bool(int64_t x) {
  return x;
}

static inline int8_t btoi_bool_i8(bool x) {
  return x;
}

static inline int16_t btoi_bool_i16(bool x) {
  return x;
}

static inline int32_t btoi_bool_i32(bool x) {
  return x;
}

static inline int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

static int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

static int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

static int32_t abs32(int32_t x) {
  return abs(x);
}

static int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

static int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

static int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

static int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

static int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

static int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

static int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

static int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  return mul_hi(a, b);
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  return mul_hi(a, b);
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mul_hi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul_hi(a, b);
}

#elif defined(__CUDA_ARCH__)

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mulhi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul64hi(a, b);
}

#else // Not OpenCL or CUDA, but plain C.

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  uint64_t aa = a;
  uint64_t bb = b;

  return aa * bb >> 32;
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  __uint128_t aa = a;
  __uint128_t bb = b;

  return aa * bb >> 64;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return mad_hi(a, b, c);
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return mad_hi(a, b, c);
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return mad_hi(a, b, c);
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return mad_hi(a, b, c);
}

#else // Not OpenCL

static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return futrts_mul_hi8(a, b) + c;
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return futrts_mul_hi16(a, b) + c;
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return futrts_mul_hi32(a, b) + c;
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return futrts_mul_hi64(a, b) + c;
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

static int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

static int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

static int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

static int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

static int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

static int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

static inline float fdiv32(float x, float y) {
  return x / y;
}

static inline float fadd32(float x, float y) {
  return x + y;
}

static inline float fsub32(float x, float y) {
  return x - y;
}

static inline float fmul32(float x, float y) {
  return x * y;
}

static inline bool cmplt32(float x, float y) {
  return x < y;
}

static inline bool cmple32(float x, float y) {
  return x <= y;
}

static inline float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

static inline float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

static inline float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

static inline float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

static inline float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

static inline float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

static inline float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

static inline float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

static inline int8_t fptosi_f32_i8(float x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f32_i16(float x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f32_i32(float x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f32_i64(float x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f32_i8(float x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f32_i16(float x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f32_i32(float x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f32_i64(float x) {
  return (uint64_t) x;
}

#ifdef __OPENCL_VERSION__
static inline float fabs32(float x) {
  return fabs(x);
}

static inline float fmax32(float x, float y) {
  return fmax(x, y);
}

static inline float fmin32(float x, float y) {
  return fmin(x, y);
}

static inline float fpow32(float x, float y) {
  return pow(x, y);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float fabs32(float x) {
  return fabsf(x);
}

static inline float fmax32(float x, float y) {
  return fmaxf(x, y);
}

static inline float fmin32(float x, float y) {
  return fminf(x, y);
}

static inline float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan32(float x) {
  return isnan(x);
}

static inline bool futrts_isinf32(float x) {
  return isinf(x);
}

#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x) {
  return log(x);
}

static inline float futrts_log2_32(float x) {
  return log2(x);
}

static inline float futrts_log10_32(float x) {
  return log10(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return cosh(x);
}

static inline float futrts_sinh32(float x) {
  return sinh(x);
}

static inline float futrts_tanh32(float x) {
  return tanh(x);
}

static inline float futrts_acosh32(float x) {
  return acosh(x);
}

static inline float futrts_asinh32(float x) {
  return asinh(x);
}

static inline float futrts_atanh32(float x) {
  return atanh(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgamma(x);
}

static inline float futrts_lgamma32(float x) {
  return lgamma(x);
}

static inline float fmod32(float x, float y) {
  return fmod(x, y);
}

static inline float futrts_round32(float x) {
  return rint(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

static inline float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

static inline float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float futrts_log32(float x) {
  return logf(x);
}

static inline float futrts_log2_32(float x) {
  return log2f(x);
}

static inline float futrts_log10_32(float x) {
  return log10f(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrtf(x);
}

static inline float futrts_exp32(float x) {
  return expf(x);
}

static inline float futrts_cos32(float x) {
  return cosf(x);
}

static inline float futrts_sin32(float x) {
  return sinf(x);
}

static inline float futrts_tan32(float x) {
  return tanf(x);
}

static inline float futrts_acos32(float x) {
  return acosf(x);
}

static inline float futrts_asin32(float x) {
  return asinf(x);
}

static inline float futrts_atan32(float x) {
  return atanf(x);
}

static inline float futrts_cosh32(float x) {
  return coshf(x);
}

static inline float futrts_sinh32(float x) {
  return sinhf(x);
}

static inline float futrts_tanh32(float x) {
  return tanhf(x);
}

static inline float futrts_acosh32(float x) {
  return acoshf(x);
}

static inline float futrts_asinh32(float x) {
  return asinhf(x);
}

static inline float futrts_atanh32(float x) {
  return atanhf(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgammaf(x);
}

static inline float futrts_lgamma32(float x) {
  return lgammaf(x);
}

static inline float fmod32(float x, float y) {
  return fmodf(x, y);
}

static inline float futrts_round32(float x) {
  return rintf(x);
}

static inline float futrts_floor32(float x) {
  return floorf(x);
}

static inline float futrts_ceil32(float x) {
  return ceilf(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

static inline int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}

static inline float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}

#ifdef FUTHARK_F64_ENABLED

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline int8_t fptosi_f64_i8(double x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f64_i16(double x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f64_i32(double x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f64_i64(double x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f64_i8(double x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f64_i16(double x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f64_i32(double x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f64_i64(double x) {
  return (uint64_t) x;
}

static inline double fabs64(double x) {
  return fabs(x);
}

static inline double fmax64(double x, double y) {
  return fmax(x, y);
}

static inline double fmin64(double x, double y) {
  return fmin(x, y);
}

static inline double fpow64(double x, double y) {
  return pow(x, y);
}

static inline double futrts_log64(double x) {
  return log(x);
}

static inline double futrts_log2_64(double x) {
  return log2(x);
}

static inline double futrts_log10_64(double x) {
  return log10(x);
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return cosh(x);
}

static inline double futrts_sinh64(double x) {
  return sinh(x);
}

static inline double futrts_tanh64(double x) {
  return tanh(x);
}

static inline double futrts_acosh64(double x) {
  return acosh(x);
}

static inline double futrts_asinh64(double x) {
  return asinh(x);
}

static inline double futrts_atanh64(double x) {
  return atanh(x);
}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

static inline double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

static inline double futrts_gamma64(double x) {
  return tgamma(x);
}

static inline double futrts_lgamma64(double x) {
  return lgamma(x);
}

static inline double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

static inline double futrts_round64(double x) {
  return rint(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline bool futrts_isinf64(double x) {
  return isinf(x);
}

static inline int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

static inline double fmod64(double x, double y) {
  return fmod(x, y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

static inline double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600)
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

static inline f16 fadd16(f16 x, f16 y) {
  return x + y;
}

static inline f16 fsub16(f16 x, f16 y) {
  return x - y;
}

static inline f16 fmul16(f16 x, f16 y) {
  return x * y;
}

static inline bool cmplt16(f16 x, f16 y) {
  return x < y;
}

static inline bool cmple16(f16 x, f16 y) {
  return x <= y;
}

static inline f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

static inline f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

static inline f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

static inline f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

static inline f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

static inline f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

static inline f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

static inline f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

static inline int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

static inline int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

static inline uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

#ifndef EMULATE_F16

#ifdef __OPENCL_VERSION__
static inline f16 fabs16(f16 x) {
  return fabs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#else // Assuming CUDA.

static inline f16 fabs16(f16 x) {
  return fabsf(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

static inline bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}

#ifdef __OPENCL_VERSION__
static inline f16 futrts_log16(f16 x) {
  return log(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return log2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return log10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return cos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return sin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tan(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acos(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asin(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atan(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rint(x);
}

static inline f16 futrts_floor16(f16 x) {
  return floor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}

#else // Assume CUDA.

static inline f16 futrts_log16(f16 x) {
  return hlog(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return hexp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return hcos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return hsin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tanf(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acosf(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asinf(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atanf(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rintf(x);
}

static inline f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
static inline int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
static inline f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#else
static inline int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

static inline f16 fabs16(f16 x) {
  return fabs32(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

static inline bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

static inline bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

static inline f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

static inline f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

static inline f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

static inline f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

static inline f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

static inline f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

static inline f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

static inline f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

static inline f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

static inline int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

static inline int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

static inline f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

static inline f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0) - (x < 0);
}

#endif

#endif

static inline float fpconv_f16_f16(f16 x) {
  return x;
}

static inline float fpconv_f16_f32(f16 x) {
  return x;
}

static inline f16 fpconv_f32_f16(float x) {
  return x;
}

#ifdef FUTHARK_F64_ENABLED

static inline double fpconv_f16_f64(f16 x) {
  return (double) x;
}

static inline f16 fpconv_f64_f16(double x) {
  return (f16) x;
}

#endif


// End of scalar_f16.h.

static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
struct futhark_context_config {
    int debugging;
    int in_use;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->in_use = 0;
    cfg->debugging = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    (void) cfg;
    (void) flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    // Does nothing for this backend.
    (void) cfg;
    (void) detail;
}
struct futhark_context {
    struct futhark_context_config *cfg;
    int detail_memory;
    int debugging;
    int profiling;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int profiling_paused;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    ctx->cfg = cfg;
    ctx->cfg->in_use = 1;
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->debugging;
    ctx->logging = cfg->debugging;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    free_lock(&ctx->lock);
    ctx->cfg->in_use = 0;
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *tuning_param_names[0];
static const char *tuning_param_vars[0];
static const char *tuning_param_classes[0];
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t param_value)
{
    (void) cfg;
    (void) param_name;
    (void) param_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    if (ret != FUTHARK_SUCCESS)
        return ret;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default + size);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (unsigned char *) malloc((size_t) size);
    if (ctx->error == NULL) {
        block->references = (int *) malloc(sizeof(int));
        *block->references = 1;
        block->size = size;
        block->desc = desc;
        ctx->cur_mem_usage_default += size;
        return FUTHARK_SUCCESS;
    } else {
        char *old_error = ctx->error;
        
        ctx->error =
            msgprintf("Failed to allocate memory in %s.\nAttempted allocation: %12lld bytes\nCurrently allocated:  %12lld bytes\n%s",
                      "default space", (long long) size,
                      (long long) ctx->cur_mem_usage_default, old_error);
        free(old_error);
        return FUTHARK_OUT_OF_MEMORY;
    }
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_tuning_param_count(void)
{
    return sizeof(tuning_param_names) / sizeof(tuning_param_names[0]);
}
const char *futhark_get_tuning_param_name(int i)
{
    return tuning_param_names[i];
}
const char *futhark_get_tuning_param_class(int i)
{
    return tuning_param_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) { }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_304949,
                             struct memblock *mem_out_p_304950,
                             struct memblock *mem_out_p_304951,
                             struct memblock Y_mem_296719, int64_t m_289744,
                             int64_t n_289745, int64_t n_p_289747,
                             int64_t q_s_289748, int64_t q_t_289749,
                             int64_t q_l_289750, int64_t d_s_289751,
                             int64_t d_t_289752, int64_t d_l_289753,
                             int64_t jump_s_289754, int64_t jump_t_289755,
                             int64_t jump_l_289756, int64_t n_inner_289757,
                             int64_t n_outer_289758,
                             int64_t jump_threshold_1_289759,
                             int64_t jump_threshold_2_289760,
                             int64_t q_threshold_1_289761,
                             int64_t q_threshold_2_289762);
static int futrts_entry_seasonal_amplitude(struct futhark_context *ctx,
                                           struct memblock *mem_out_p_305101,
                                           struct memblock seasonal_l_mem_296719,
                                           int64_t m_289679, int64_t n_289680);
static int futrts_entry_trend_magnitude(struct futhark_context *ctx,
                                        struct memblock *mem_out_p_305103,
                                        struct memblock trend_l_mem_296719,
                                        int64_t m_289696, int64_t n_289697);

static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_f32_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr =
                          (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 4 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) dim0 * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr =
                          (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 4 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) dim0 * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_1d(struct futhark_context *ctx,
                          struct futhark_f32_1d *arr, float *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 4 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_f32_1d(struct futhark_context *ctx,
                                         struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx,
                                    struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 4 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 4 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) (arr->shape[0] * arr->shape[1]) * 4 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                      arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                         struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_304949,
                             struct memblock *mem_out_p_304950,
                             struct memblock *mem_out_p_304951,
                             struct memblock Y_mem_296719, int64_t m_289744,
                             int64_t n_289745, int64_t n_p_289747,
                             int64_t q_s_289748, int64_t q_t_289749,
                             int64_t q_l_289750, int64_t d_s_289751,
                             int64_t d_t_289752, int64_t d_l_289753,
                             int64_t jump_s_289754, int64_t jump_t_289755,
                             int64_t jump_l_289756, int64_t n_inner_289757,
                             int64_t n_outer_289758,
                             int64_t jump_threshold_1_289759,
                             int64_t jump_threshold_2_289760,
                             int64_t q_threshold_1_289761,
                             int64_t q_threshold_2_289762)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_296722_cached_sizze_304952 = 0;
    unsigned char *mem_296722 = NULL;
    size_t mem_296725_cached_sizze_304953 = 0;
    unsigned char *mem_296725 = NULL;
    size_t mem_296753_cached_sizze_304954 = 0;
    unsigned char *mem_296753 = NULL;
    size_t mem_296756_cached_sizze_304955 = 0;
    unsigned char *mem_296756 = NULL;
    size_t mem_296776_cached_sizze_304956 = 0;
    unsigned char *mem_296776 = NULL;
    size_t mem_296793_cached_sizze_304957 = 0;
    unsigned char *mem_296793 = NULL;
    size_t mem_296796_cached_sizze_304958 = 0;
    unsigned char *mem_296796 = NULL;
    size_t mem_296816_cached_sizze_304959 = 0;
    unsigned char *mem_296816 = NULL;
    size_t mem_296831_cached_sizze_304960 = 0;
    unsigned char *mem_296831 = NULL;
    size_t mem_296871_cached_sizze_304961 = 0;
    unsigned char *mem_296871 = NULL;
    size_t mem_296974_cached_sizze_304962 = 0;
    unsigned char *mem_296974 = NULL;
    size_t mem_296978_cached_sizze_304963 = 0;
    unsigned char *mem_296978 = NULL;
    size_t mem_297031_cached_sizze_304964 = 0;
    unsigned char *mem_297031 = NULL;
    size_t mem_297046_cached_sizze_304965 = 0;
    unsigned char *mem_297046 = NULL;
    size_t mem_297139_cached_sizze_304966 = 0;
    unsigned char *mem_297139 = NULL;
    size_t mem_297144_cached_sizze_304967 = 0;
    unsigned char *mem_297144 = NULL;
    size_t mem_297205_cached_sizze_304968 = 0;
    unsigned char *mem_297205 = NULL;
    size_t mem_297359_cached_sizze_304969 = 0;
    unsigned char *mem_297359 = NULL;
    size_t mem_297363_cached_sizze_304970 = 0;
    unsigned char *mem_297363 = NULL;
    size_t mem_297386_cached_sizze_304971 = 0;
    unsigned char *mem_297386 = NULL;
    size_t mem_297468_cached_sizze_304972 = 0;
    unsigned char *mem_297468 = NULL;
    size_t mem_297472_cached_sizze_304973 = 0;
    unsigned char *mem_297472 = NULL;
    size_t mem_297495_cached_sizze_304974 = 0;
    unsigned char *mem_297495 = NULL;
    size_t mem_297631_cached_sizze_304975 = 0;
    unsigned char *mem_297631 = NULL;
    size_t mem_297679_cached_sizze_304976 = 0;
    unsigned char *mem_297679 = NULL;
    size_t mem_297684_cached_sizze_304977 = 0;
    unsigned char *mem_297684 = NULL;
    size_t mem_298095_cached_sizze_304978 = 0;
    unsigned char *mem_298095 = NULL;
    size_t mem_298098_cached_sizze_304979 = 0;
    unsigned char *mem_298098 = NULL;
    size_t mem_298331_cached_sizze_304980 = 0;
    unsigned char *mem_298331 = NULL;
    size_t mem_298334_cached_sizze_304981 = 0;
    unsigned char *mem_298334 = NULL;
    size_t mem_298337_cached_sizze_304982 = 0;
    unsigned char *mem_298337 = NULL;
    size_t mem_298340_cached_sizze_304983 = 0;
    unsigned char *mem_298340 = NULL;
    size_t mem_298595_cached_sizze_304984 = 0;
    unsigned char *mem_298595 = NULL;
    size_t mem_298765_cached_sizze_304985 = 0;
    unsigned char *mem_298765 = NULL;
    size_t mem_298768_cached_sizze_304986 = 0;
    unsigned char *mem_298768 = NULL;
    size_t mem_298771_cached_sizze_304987 = 0;
    unsigned char *mem_298771 = NULL;
    size_t mem_299016_cached_sizze_304988 = 0;
    unsigned char *mem_299016 = NULL;
    size_t mem_299019_cached_sizze_304989 = 0;
    unsigned char *mem_299019 = NULL;
    size_t mem_299022_cached_sizze_304990 = 0;
    unsigned char *mem_299022 = NULL;
    size_t mem_299061_cached_sizze_304991 = 0;
    unsigned char *mem_299061 = NULL;
    size_t mem_299064_cached_sizze_304992 = 0;
    unsigned char *mem_299064 = NULL;
    size_t mem_299450_cached_sizze_304993 = 0;
    unsigned char *mem_299450 = NULL;
    size_t mem_299453_cached_sizze_304994 = 0;
    unsigned char *mem_299453 = NULL;
    size_t mem_299686_cached_sizze_304995 = 0;
    unsigned char *mem_299686 = NULL;
    size_t mem_299689_cached_sizze_304996 = 0;
    unsigned char *mem_299689 = NULL;
    size_t mem_299692_cached_sizze_304997 = 0;
    unsigned char *mem_299692 = NULL;
    size_t mem_299695_cached_sizze_304998 = 0;
    unsigned char *mem_299695 = NULL;
    size_t mem_300049_cached_sizze_304999 = 0;
    unsigned char *mem_300049 = NULL;
    size_t mem_300095_cached_sizze_305000 = 0;
    unsigned char *mem_300095 = NULL;
    size_t mem_300111_cached_sizze_305001 = 0;
    unsigned char *mem_300111 = NULL;
    size_t mem_300124_cached_sizze_305002 = 0;
    unsigned char *mem_300124 = NULL;
    size_t mem_300147_cached_sizze_305003 = 0;
    unsigned char *mem_300147 = NULL;
    size_t mem_300163_cached_sizze_305004 = 0;
    unsigned char *mem_300163 = NULL;
    size_t mem_300176_cached_sizze_305005 = 0;
    unsigned char *mem_300176 = NULL;
    size_t mem_300199_cached_sizze_305006 = 0;
    unsigned char *mem_300199 = NULL;
    size_t mem_300215_cached_sizze_305007 = 0;
    unsigned char *mem_300215 = NULL;
    size_t mem_300228_cached_sizze_305008 = 0;
    unsigned char *mem_300228 = NULL;
    size_t mem_300352_cached_sizze_305009 = 0;
    unsigned char *mem_300352 = NULL;
    size_t mem_300355_cached_sizze_305010 = 0;
    unsigned char *mem_300355 = NULL;
    size_t mem_300476_cached_sizze_305011 = 0;
    unsigned char *mem_300476 = NULL;
    size_t mem_300479_cached_sizze_305012 = 0;
    unsigned char *mem_300479 = NULL;
    size_t mem_300482_cached_sizze_305013 = 0;
    unsigned char *mem_300482 = NULL;
    size_t mem_300485_cached_sizze_305014 = 0;
    unsigned char *mem_300485 = NULL;
    size_t mem_300641_cached_sizze_305015 = 0;
    unsigned char *mem_300641 = NULL;
    size_t mem_300728_cached_sizze_305016 = 0;
    unsigned char *mem_300728 = NULL;
    size_t mem_300731_cached_sizze_305017 = 0;
    unsigned char *mem_300731 = NULL;
    size_t mem_300734_cached_sizze_305018 = 0;
    unsigned char *mem_300734 = NULL;
    size_t mem_300867_cached_sizze_305019 = 0;
    unsigned char *mem_300867 = NULL;
    size_t mem_300870_cached_sizze_305020 = 0;
    unsigned char *mem_300870 = NULL;
    size_t mem_300873_cached_sizze_305021 = 0;
    unsigned char *mem_300873 = NULL;
    size_t mem_300912_cached_sizze_305022 = 0;
    unsigned char *mem_300912 = NULL;
    size_t mem_300915_cached_sizze_305023 = 0;
    unsigned char *mem_300915 = NULL;
    size_t mem_301119_cached_sizze_305024 = 0;
    unsigned char *mem_301119 = NULL;
    size_t mem_301122_cached_sizze_305025 = 0;
    unsigned char *mem_301122 = NULL;
    size_t mem_301243_cached_sizze_305026 = 0;
    unsigned char *mem_301243 = NULL;
    size_t mem_301246_cached_sizze_305027 = 0;
    unsigned char *mem_301246 = NULL;
    size_t mem_301249_cached_sizze_305028 = 0;
    unsigned char *mem_301249 = NULL;
    size_t mem_301252_cached_sizze_305029 = 0;
    unsigned char *mem_301252 = NULL;
    size_t mem_301531_cached_sizze_305030 = 0;
    unsigned char *mem_301531 = NULL;
    size_t mem_301546_cached_sizze_305031 = 0;
    unsigned char *mem_301546 = NULL;
    size_t mem_301549_cached_sizze_305032 = 0;
    unsigned char *mem_301549 = NULL;
    size_t mem_301637_cached_sizze_305033 = 0;
    unsigned char *mem_301637 = NULL;
    size_t mem_301652_cached_sizze_305034 = 0;
    unsigned char *mem_301652 = NULL;
    size_t mem_301655_cached_sizze_305035 = 0;
    unsigned char *mem_301655 = NULL;
    size_t mem_301704_cached_sizze_305036 = 0;
    unsigned char *mem_301704 = NULL;
    size_t mem_301707_cached_sizze_305037 = 0;
    unsigned char *mem_301707 = NULL;
    size_t mem_301806_cached_sizze_305038 = 0;
    unsigned char *mem_301806 = NULL;
    size_t mem_301821_cached_sizze_305039 = 0;
    unsigned char *mem_301821 = NULL;
    size_t mem_301824_cached_sizze_305040 = 0;
    unsigned char *mem_301824 = NULL;
    size_t mem_301873_cached_sizze_305041 = 0;
    unsigned char *mem_301873 = NULL;
    size_t mem_301876_cached_sizze_305042 = 0;
    unsigned char *mem_301876 = NULL;
    size_t mem_301879_cached_sizze_305043 = 0;
    unsigned char *mem_301879 = NULL;
    size_t mem_301882_cached_sizze_305044 = 0;
    unsigned char *mem_301882 = NULL;
    size_t mem_302027_cached_sizze_305045 = 0;
    unsigned char *mem_302027 = NULL;
    size_t mem_302042_cached_sizze_305046 = 0;
    unsigned char *mem_302042 = NULL;
    size_t mem_302045_cached_sizze_305047 = 0;
    unsigned char *mem_302045 = NULL;
    size_t mem_302083_cached_sizze_305048 = 0;
    unsigned char *mem_302083 = NULL;
    size_t mem_302148_cached_sizze_305049 = 0;
    unsigned char *mem_302148 = NULL;
    size_t mem_302163_cached_sizze_305050 = 0;
    unsigned char *mem_302163 = NULL;
    size_t mem_302166_cached_sizze_305051 = 0;
    unsigned char *mem_302166 = NULL;
    size_t mem_302215_cached_sizze_305052 = 0;
    unsigned char *mem_302215 = NULL;
    size_t mem_302218_cached_sizze_305053 = 0;
    unsigned char *mem_302218 = NULL;
    size_t mem_302221_cached_sizze_305054 = 0;
    unsigned char *mem_302221 = NULL;
    size_t mem_302332_cached_sizze_305055 = 0;
    unsigned char *mem_302332 = NULL;
    size_t mem_302347_cached_sizze_305056 = 0;
    unsigned char *mem_302347 = NULL;
    size_t mem_302350_cached_sizze_305057 = 0;
    unsigned char *mem_302350 = NULL;
    size_t mem_302399_cached_sizze_305058 = 0;
    unsigned char *mem_302399 = NULL;
    size_t mem_302402_cached_sizze_305059 = 0;
    unsigned char *mem_302402 = NULL;
    size_t mem_302405_cached_sizze_305060 = 0;
    unsigned char *mem_302405 = NULL;
    size_t mem_302444_cached_sizze_305061 = 0;
    unsigned char *mem_302444 = NULL;
    size_t mem_302447_cached_sizze_305062 = 0;
    unsigned char *mem_302447 = NULL;
    size_t mem_302568_cached_sizze_305063 = 0;
    unsigned char *mem_302568 = NULL;
    size_t mem_302583_cached_sizze_305064 = 0;
    unsigned char *mem_302583 = NULL;
    size_t mem_302586_cached_sizze_305065 = 0;
    unsigned char *mem_302586 = NULL;
    size_t mem_302674_cached_sizze_305066 = 0;
    unsigned char *mem_302674 = NULL;
    size_t mem_302689_cached_sizze_305067 = 0;
    unsigned char *mem_302689 = NULL;
    size_t mem_302692_cached_sizze_305068 = 0;
    unsigned char *mem_302692 = NULL;
    size_t mem_302741_cached_sizze_305069 = 0;
    unsigned char *mem_302741 = NULL;
    size_t mem_302744_cached_sizze_305070 = 0;
    unsigned char *mem_302744 = NULL;
    size_t mem_302843_cached_sizze_305071 = 0;
    unsigned char *mem_302843 = NULL;
    size_t mem_302858_cached_sizze_305072 = 0;
    unsigned char *mem_302858 = NULL;
    size_t mem_302861_cached_sizze_305073 = 0;
    unsigned char *mem_302861 = NULL;
    size_t mem_302910_cached_sizze_305074 = 0;
    unsigned char *mem_302910 = NULL;
    size_t mem_302913_cached_sizze_305075 = 0;
    unsigned char *mem_302913 = NULL;
    size_t mem_302916_cached_sizze_305076 = 0;
    unsigned char *mem_302916 = NULL;
    size_t mem_302919_cached_sizze_305077 = 0;
    unsigned char *mem_302919 = NULL;
    size_t mem_303150_cached_sizze_305078 = 0;
    unsigned char *mem_303150 = NULL;
    size_t mem_303154_cached_sizze_305079 = 0;
    unsigned char *mem_303154 = NULL;
    size_t mem_303243_cached_sizze_305080 = 0;
    unsigned char *mem_303243 = NULL;
    size_t mem_303262_cached_sizze_305081 = 0;
    unsigned char *mem_303262 = NULL;
    size_t mem_303265_cached_sizze_305082 = 0;
    unsigned char *mem_303265 = NULL;
    size_t mem_303285_cached_sizze_305083 = 0;
    unsigned char *mem_303285 = NULL;
    size_t mem_303325_cached_sizze_305084 = 0;
    unsigned char *mem_303325 = NULL;
    size_t mem_303379_cached_sizze_305085 = 0;
    unsigned char *mem_303379 = NULL;
    size_t mem_303394_cached_sizze_305086 = 0;
    unsigned char *mem_303394 = NULL;
    size_t mem_303410_cached_sizze_305087 = 0;
    unsigned char *mem_303410 = NULL;
    size_t mem_303412_cached_sizze_305088 = 0;
    unsigned char *mem_303412 = NULL;
    size_t mem_303415_cached_sizze_305089 = 0;
    unsigned char *mem_303415 = NULL;
    size_t mem_303469_cached_sizze_305090 = 0;
    unsigned char *mem_303469 = NULL;
    size_t mem_303484_cached_sizze_305091 = 0;
    unsigned char *mem_303484 = NULL;
    size_t mem_303558_cached_sizze_305092 = 0;
    unsigned char *mem_303558 = NULL;
    size_t mem_303561_cached_sizze_305093 = 0;
    unsigned char *mem_303561 = NULL;
    size_t mem_303564_cached_sizze_305094 = 0;
    unsigned char *mem_303564 = NULL;
    size_t mem_303683_cached_sizze_305095 = 0;
    unsigned char *mem_303683 = NULL;
    size_t mem_303687_cached_sizze_305096 = 0;
    unsigned char *mem_303687 = NULL;
    size_t mem_303691_cached_sizze_305097 = 0;
    unsigned char *mem_303691 = NULL;
    size_t mem_303724_cached_sizze_305098 = 0;
    unsigned char *mem_303724 = NULL;
    size_t mem_303727_cached_sizze_305099 = 0;
    unsigned char *mem_303727 = NULL;
    size_t mem_303730_cached_sizze_305100 = 0;
    unsigned char *mem_303730 = NULL;
    struct memblock mem_out_304401;
    
    mem_out_304401.references = NULL;
    
    struct memblock mem_out_304402;
    
    mem_out_304402.references = NULL;
    
    struct memblock mem_out_304403;
    
    mem_out_304403.references = NULL;
    
    double i64_res_289763 = sitofp_i64_f64(n_289745);
    double i64_res_289764 = sitofp_i64_f64(n_p_289747);
    double ceil_arg_289765 = i64_res_289763 / i64_res_289764;
    double ceil_res_289766;
    
    ceil_res_289766 = futrts_ceil64(ceil_arg_289765);
    
    int64_t defunc_0_f_res_289767 = fptosi_f64_i64(ceil_res_289766);
    bool bounds_invalid_upwards_289768 = slt64(n_p_289747, (int64_t) 0);
    bool valid_289769 = !bounds_invalid_upwards_289768;
    bool range_valid_c_289770;
    
    if (!valid_289769) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_p_289747, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:407:29-412:37\n   #4  stl.fut:406:22-413:28\n   #5  stl.fut:463:3-479:36\n   #6  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_289772 = slt64(defunc_0_f_res_289767,
                                               (int64_t) 0);
    bool valid_289773 = !bounds_invalid_upwards_289772;
    bool range_valid_c_289774;
    
    if (!valid_289773) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) defunc_0_f_res_289767,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:408:36-411:52\n   #4  /prelude/soacs.fut:59:3-10\n   #5  /prelude/array.fut:195:3-17\n   #6  utils.fut:6:3-16\n   #7  stl.fut:407:29-412:37\n   #8  stl.fut:406:22-413:28\n   #9  stl.fut:463:3-479:36\n   #10 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_296720 = (int64_t) 8 * m_289744;
    int64_t bytes_296721 = smax64((int64_t) 0, binop_y_296720);
    
    if (mem_296722_cached_sizze_304952 < (size_t) bytes_296721) {
        mem_296722 = realloc(mem_296722, bytes_296721);
        mem_296722_cached_sizze_304952 = bytes_296721;
    }
    if (mem_296725_cached_sizze_304953 < (size_t) bytes_296721) {
        mem_296725 = realloc(mem_296725, bytes_296721);
        mem_296725_cached_sizze_304953 = bytes_296721;
    }
    
    int64_t discard_294501;
    int64_t scanacc_294493 = (int64_t) 0;
    
    for (int64_t i_294497 = 0; i_294497 < m_289744; i_294497++) {
        bool defunc_2_reduce_res_289806;
        bool redout_294488 = 0;
        
        for (int64_t i_294489 = 0; i_294489 < n_p_289747; i_294489++) {
            bool defunc_2_reduce_res_289811;
            bool redout_294486 = 1;
            
            for (int64_t i_294487 = 0; i_294487 < defunc_0_f_res_289767;
                 i_294487++) {
                int64_t x_289816 = mul64(n_p_289747, i_294487);
                int64_t idx_289817 = add64(x_289816, i_294489);
                bool cond_289818 = sle64(n_289745, idx_289817);
                bool defunc_0_f_res_289819;
                
                if (cond_289818) {
                    defunc_0_f_res_289819 = 1;
                } else {
                    bool x_289820 = sle64((int64_t) 0, idx_289817);
                    bool y_289821 = slt64(idx_289817, n_289745);
                    bool bounds_check_289822 = x_289820 && y_289821;
                    bool index_certs_289823;
                    
                    if (!bounds_check_289822) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) idx_289817,
                                      "] out of bounds for array of shape [",
                                      (long long) n_289745, "].",
                                      "-> #0  stl.fut:410:68-73\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:408:36-411:52\n   #5  /prelude/soacs.fut:59:3-10\n   #6  /prelude/array.fut:195:3-17\n   #7  utils.fut:6:3-16\n   #8  stl.fut:407:29-412:37\n   #9  stl.fut:406:22-413:28\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_304403,
                                           "mem_out_304403") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304402,
                                           "mem_out_304402") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304401,
                                           "mem_out_304401") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    float isnan_arg_289824;
                    
                    isnan_arg_289824 = ((float *) Y_mem_296719.mem)[i_294497 *
                                                                    n_289745 +
                                                                    idx_289817];
                    
                    bool isnan_res_289825;
                    
                    isnan_res_289825 = futrts_isnan32(isnan_arg_289824);
                    defunc_0_f_res_289819 = isnan_res_289825;
                }
                
                bool x_289814 = defunc_0_f_res_289819 && redout_294486;
                bool redout_tmp_304408 = x_289814;
                
                redout_294486 = redout_tmp_304408;
            }
            defunc_2_reduce_res_289811 = redout_294486;
            
            bool defunc_1_op_res_289809 = defunc_2_reduce_res_289811 ||
                 redout_294488;
            bool redout_tmp_304407 = defunc_1_op_res_289809;
            
            redout_294488 = redout_tmp_304407;
        }
        defunc_2_reduce_res_289806 = redout_294488;
        
        int64_t defunc_2_lifted_lambda_res_289826 =
                btoi_bool_i64(defunc_2_reduce_res_289806);
        bool is_i_289827 = defunc_2_lifted_lambda_res_289826 == (int64_t) 0;
        bool cond_neg_289828 = !is_i_289827;
        int64_t part_res_289829 = btoi_bool_i64(cond_neg_289828);
        int64_t part_res_289830 = btoi_bool_i64(is_i_289827);
        int64_t zz_289804 = part_res_289830 + scanacc_294493;
        
        ((int64_t *) mem_296722)[i_294497] = zz_289804;
        ((int64_t *) mem_296725)[i_294497] = part_res_289829;
        
        int64_t scanacc_tmp_304404 = zz_289804;
        
        scanacc_294493 = scanacc_tmp_304404;
    }
    discard_294501 = scanacc_294493;
    
    int64_t last_index_289834 = m_289744 - (int64_t) 1;
    bool is_empty_289835 = m_289744 == (int64_t) 0;
    int64_t partition_sizze_289836;
    
    if (is_empty_289835) {
        partition_sizze_289836 = (int64_t) 0;
    } else {
        int64_t last_offset_289837;
        
        last_offset_289837 = ((int64_t *) mem_296722)[last_index_289834];
        partition_sizze_289836 = last_offset_289837;
    }
    
    int64_t binop_x_296750 = m_289744 * n_289745;
    int64_t binop_y_296751 = (int64_t) 4 * binop_x_296750;
    int64_t bytes_296752 = smax64((int64_t) 0, binop_y_296751);
    
    if (mem_296753_cached_sizze_304954 < (size_t) bytes_296752) {
        mem_296753 = realloc(mem_296753, bytes_296752);
        mem_296753_cached_sizze_304954 = bytes_296752;
    }
    if (mem_296756_cached_sizze_304955 < (size_t) bytes_296721) {
        mem_296756 = realloc(mem_296756, bytes_296721);
        mem_296756_cached_sizze_304955 = bytes_296721;
    }
    
    int64_t binop_y_296774 = (int64_t) 4 * n_289745;
    int64_t bytes_296775 = smax64((int64_t) 0, binop_y_296774);
    
    if (mem_296776_cached_sizze_304956 < (size_t) bytes_296775) {
        mem_296776 = realloc(mem_296776, bytes_296775);
        mem_296776_cached_sizze_304956 = bytes_296775;
    }
    for (int64_t write_iter_294502 = 0; write_iter_294502 < m_289744;
         write_iter_294502++) {
        int64_t write_iv_294505;
        
        write_iv_294505 = ((int64_t *) mem_296725)[write_iter_294502];
        
        int64_t write_iv_294506;
        
        write_iv_294506 = ((int64_t *) mem_296722)[write_iter_294502];
        if (n_289745 * (int64_t) 4 > 0)
            memmove(mem_296776 + (int64_t) 0, Y_mem_296719.mem +
                    write_iter_294502 * n_289745 * (int64_t) 4, n_289745 *
                    (int64_t) 4);
        
        bool is_this_one_289847 = write_iv_294505 == (int64_t) 0;
        int64_t this_offset_289848 = (int64_t) -1 + write_iv_294506;
        int64_t total_res_289849;
        
        if (is_this_one_289847) {
            total_res_289849 = this_offset_289848;
        } else {
            total_res_289849 = (int64_t) -1;
        }
        if ((sle64((int64_t) 0, total_res_289849) && slt64(total_res_289849,
                                                           m_289744)) &&
            (sle64((int64_t) 0, (int64_t) 0) && slt64(n_289745 - (int64_t) 1,
                                                      n_289745))) {
            if (n_289745 * (int64_t) 4 > 0)
                memmove(mem_296753 + total_res_289849 * n_289745 * (int64_t) 4,
                        mem_296776 + (int64_t) 0, n_289745 * (int64_t) 4);
        }
        if (sle64((int64_t) 0, total_res_289849) && slt64(total_res_289849,
                                                          m_289744)) {
            ((int64_t *) mem_296756)[total_res_289849] = write_iter_294502;
        }
    }
    
    bool empty_slice_289850 = partition_sizze_289836 == (int64_t) 0;
    int64_t m_289851 = sub64(partition_sizze_289836, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_289852 = sle64((int64_t) 0, m_289851);
    bool i_p_m_t_s_leq_w_289853 = slt64(m_289851, m_289744);
    bool i_lte_j_289854 = sle64((int64_t) 0, partition_sizze_289836);
    bool y_289855 = zzero_leq_i_p_m_t_s_289852 && i_p_m_t_s_leq_w_289853;
    bool y_289856 = i_lte_j_289854 && y_289855;
    bool ok_or_empty_289857 = empty_slice_289850 || y_289856;
    bool index_certs_289858;
    
    if (!ok_or_empty_289857) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) partition_sizze_289836,
                               "] out of bounds for array of shape [",
                               (long long) m_289744, "].",
                               "-> #0  /prelude/soacs.fut:163:6-16\n   #1  stl.fut:416:7-66\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_289861 = sle64((int64_t) 4, n_p_289747);
    bool assert_c_289862;
    
    if (!assert_cond_289861) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (n_p >= 4)",
                               "-> #0  stl.fut:74:13-33\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t x_289863 = smod64(q_t_289749, (int64_t) 2);
    bool assert_cond_289864 = x_289863 == (int64_t) 1;
    bool assert_c_289865;
    
    if (!assert_cond_289864) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x % 2 == 1)",
                               "-> #0  utils.fut:20:3-23\n   #1  /prelude/functional.fut:39:62-64\n   #2  stl.fut:76:13-25\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_289866 = slt64((int64_t) 0, q_t_289749);
    bool assert_c_289867;
    
    if (!assert_cond_289866) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  /prelude/functional.fut:39:59-65\n   #2  stl.fut:76:13-25\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t x_289868 = smod64(q_l_289750, (int64_t) 2);
    bool assert_cond_289869 = x_289868 == (int64_t) 1;
    bool assert_c_289870;
    
    if (!assert_cond_289869) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x % 2 == 1)",
                               "-> #0  utils.fut:20:3-23\n   #1  /prelude/functional.fut:39:62-64\n   #2  stl.fut:77:13-25\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_289871 = slt64((int64_t) 0, q_l_289750);
    bool assert_c_289872;
    
    if (!assert_cond_289871) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  /prelude/functional.fut:39:59-65\n   #2  stl.fut:77:13-25\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_289881 = slt64((int64_t) 0, jump_t_289755);
    bool assert_c_289882;
    
    if (!assert_cond_289881) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  stl.fut:82:16-31\n   #2  stl.fut:419:61-435:77\n   #3  stl.fut:463:3-479:36\n   #4  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_289883 = slt64((int64_t) 0, jump_l_289756);
    bool assert_c_289884;
    
    if (!assert_cond_289883) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  stl.fut:83:16-31\n   #2  stl.fut:419:61-435:77\n   #3  stl.fut:463:3-479:36\n   #4  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_289885 = slt64((int64_t) 0, n_inner_289757);
    bool assert_c_289886;
    
    if (!assert_cond_289885) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  stl.fut:85:17-33\n   #2  stl.fut:419:61-435:77\n   #3  stl.fut:463:3-479:36\n   #4  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_289887 = slt64((int64_t) 0, n_outer_289758);
    bool assert_c_289888;
    
    if (!assert_cond_289887) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  stl.fut:86:17-33\n   #2  stl.fut:419:61-435:77\n   #3  stl.fut:463:3-479:36\n   #4  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    double ceil_res_289889;
    
    ceil_res_289889 = futrts_ceil64(ceil_arg_289765);
    
    int64_t defunc_0_f_res_289890 = fptosi_f64_i64(ceil_res_289889);
    int64_t pad_css_len_289891 = add64((int64_t) 2, defunc_0_f_res_289890);
    int64_t y_289892 = mul64((int64_t) 2, n_p_289747);
    int64_t C_len_289893 = add64(n_289745, y_289892);
    bool cond_289894 = jump_s_289754 == (int64_t) 1;
    int64_t s_n_m_289895;
    
    if (cond_289894) {
        s_n_m_289895 = pad_css_len_289891;
    } else {
        bool zzero_289896 = jump_s_289754 == (int64_t) 0;
        bool nonzzero_289897 = !zzero_289896;
        bool nonzzero_cert_289898;
        
        if (!nonzzero_289897) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:93:52-71\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
            if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
                return 1;
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t x_289899 = sdiv64(defunc_0_f_res_289890, jump_s_289754);
        int64_t s_n_m_f_res_289900 = add64((int64_t) 3, x_289899);
        
        s_n_m_289895 = s_n_m_f_res_289900;
    }
    
    bool cond_289901 = jump_l_289756 == (int64_t) 1;
    int64_t l_n_m_289902;
    
    if (cond_289901) {
        l_n_m_289902 = n_289745;
    } else {
        bool zzero_289903 = jump_l_289756 == (int64_t) 0;
        bool nonzzero_289904 = !zzero_289903;
        bool nonzzero_cert_289905;
        
        if (!nonzzero_289904) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:99:42-51\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
            if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
                return 1;
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t x_289906 = sdiv64(n_289745, jump_l_289756);
        int64_t l_n_m_f_res_289907 = add64((int64_t) 1, x_289906);
        
        l_n_m_289902 = l_n_m_f_res_289907;
    }
    
    bool cond_289908 = jump_t_289755 == (int64_t) 1;
    int64_t t_n_m_289909;
    
    if (cond_289908) {
        t_n_m_289909 = n_289745;
    } else {
        bool zzero_289910 = jump_t_289755 == (int64_t) 0;
        bool nonzzero_289911 = !zzero_289910;
        bool nonzzero_cert_289912;
        
        if (!nonzzero_289911) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:103:42-51\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
            if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
                return 1;
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t x_289913 = sdiv64(n_289745, jump_t_289755);
        int64_t t_n_m_f_res_289914 = add64((int64_t) 1, x_289913);
        
        t_n_m_289909 = t_n_m_f_res_289914;
    }
    
    int64_t i_289916 = sub64(n_289745, (int64_t) 1);
    bool x_289917 = sle64((int64_t) 0, i_289916);
    bool y_289918 = slt64(i_289916, n_289745);
    bool bounds_check_289919 = x_289917 && y_289918;
    bool index_certs_289920;
    
    if (!bounds_check_289919) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_289916,
                               "] out of bounds for array of shape [",
                               (long long) n_289745, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:45:13-20\n   #2  stl.fut:110:31-51\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_x_296790 = n_289745 * partition_sizze_289836;
    int64_t binop_y_296791 = (int64_t) 8 * binop_x_296790;
    int64_t bytes_296792 = smax64((int64_t) 0, binop_y_296791);
    
    if (mem_296793_cached_sizze_304957 < (size_t) bytes_296792) {
        mem_296793 = realloc(mem_296793, bytes_296792);
        mem_296793_cached_sizze_304957 = bytes_296792;
    }
    
    int64_t binop_y_296794 = (int64_t) 8 * partition_sizze_289836;
    int64_t bytes_296795 = smax64((int64_t) 0, binop_y_296794);
    
    if (mem_296796_cached_sizze_304958 < (size_t) bytes_296795) {
        mem_296796 = realloc(mem_296796, bytes_296795);
        mem_296796_cached_sizze_304958 = bytes_296795;
    }
    
    int64_t binop_y_296814 = (int64_t) 8 * n_289745;
    int64_t bytes_296815 = smax64((int64_t) 0, binop_y_296814);
    
    if (mem_296816_cached_sizze_304959 < (size_t) bytes_296815) {
        mem_296816 = realloc(mem_296816, bytes_296815);
        mem_296816_cached_sizze_304959 = bytes_296815;
    }
    if (mem_296831_cached_sizze_304960 < (size_t) bytes_296815) {
        mem_296831 = realloc(mem_296831, bytes_296815);
        mem_296831_cached_sizze_304960 = bytes_296815;
    }
    for (int64_t i_304411 = 0; i_304411 < n_289745; i_304411++) {
        ((int64_t *) mem_296831)[i_304411] = (int64_t) -1;
    }
    for (int64_t i_294528 = 0; i_294528 < partition_sizze_289836; i_294528++) {
        int64_t discard_294517;
        int64_t scanacc_294513 = (int64_t) 0;
        
        for (int64_t i_294515 = 0; i_294515 < n_289745; i_294515++) {
            float x_289928;
            
            x_289928 = ((float *) mem_296753)[i_294528 * n_289745 + i_294515];
            
            bool isnan_res_289929;
            
            isnan_res_289929 = futrts_isnan32(x_289928);
            
            bool defunc_0_p_res_289930 = !isnan_res_289929;
            int64_t defunc_0_f_res_289931 =
                    btoi_bool_i64(defunc_0_p_res_289930);
            int64_t defunc_1_op_res_289927 = add64(defunc_0_f_res_289931,
                                                   scanacc_294513);
            
            ((int64_t *) mem_296816)[i_294515] = defunc_1_op_res_289927;
            
            int64_t scanacc_tmp_304414 = defunc_1_op_res_289927;
            
            scanacc_294513 = scanacc_tmp_304414;
        }
        discard_294517 = scanacc_294513;
        if (n_289745 * (int64_t) 8 > 0)
            memmove(mem_296793 + i_294528 * n_289745 * (int64_t) 8, mem_296831 +
                    (int64_t) 0, n_289745 * (int64_t) 8);
        for (int64_t write_iter_294518 = 0; write_iter_294518 < n_289745;
             write_iter_294518++) {
            float write_iv_294520;
            
            write_iv_294520 = ((float *) mem_296753)[i_294528 * n_289745 +
                                                     write_iter_294518];
            
            int64_t write_iv_294521;
            
            write_iv_294521 = ((int64_t *) mem_296816)[write_iter_294518];
            
            bool isnan_res_289938;
            
            isnan_res_289938 = futrts_isnan32(write_iv_294520);
            
            bool defunc_0_p_res_289939 = !isnan_res_289938;
            int64_t defunc_1_f_res_289940;
            
            if (defunc_0_p_res_289939) {
                int64_t defunc_1_f_res_t_res_289941 = sub64(write_iv_294521,
                                                            (int64_t) 1);
                
                defunc_1_f_res_289940 = defunc_1_f_res_t_res_289941;
            } else {
                defunc_1_f_res_289940 = (int64_t) -1;
            }
            if ((sle64((int64_t) 0, i_294528) && slt64(i_294528,
                                                       partition_sizze_289836)) &&
                (sle64((int64_t) 0, defunc_1_f_res_289940) &&
                 slt64(defunc_1_f_res_289940, n_289745))) {
                ((int64_t *) mem_296793)[i_294528 * n_289745 +
                                         defunc_1_f_res_289940] =
                    write_iter_294518;
            }
        }
        if ((int64_t) 8 > 0)
            memmove(mem_296796 + i_294528 * (int64_t) 8, mem_296816 +
                    ((int64_t) 0 + (int64_t) 1 * i_289916) * (int64_t) 8,
                    (int64_t) 8);
    }
    
    bool bounds_invalid_upwards_289944 = slt64(defunc_0_f_res_289890,
                                               (int64_t) 0);
    bool valid_289945 = !bounds_invalid_upwards_289944;
    bool range_valid_c_289946;
    
    if (!valid_289945) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) defunc_0_f_res_289890,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:117:20-123:36\n   #4  /prelude/soacs.fut:59:3-10\n   #5  /prelude/array.fut:195:3-17\n   #6  utils.fut:6:3-16\n   #7  stl.fut:115:12-124:20\n   #8  stl.fut:114:5-125:11\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_x_296867 = n_p_289747 * partition_sizze_289836;
    int64_t binop_x_296868 = defunc_0_f_res_289890 * binop_x_296867;
    int64_t binop_y_296869 = (int64_t) 8 * binop_x_296868;
    int64_t bytes_296870 = smax64((int64_t) 0, binop_y_296869);
    
    if (mem_296871_cached_sizze_304961 < (size_t) bytes_296870) {
        mem_296871 = realloc(mem_296871, bytes_296870);
        mem_296871_cached_sizze_304961 = bytes_296870;
    }
    
    int64_t ctx_val_296884 = n_p_289747 * defunc_0_f_res_289890;
    
    for (int64_t i_294541 = 0; i_294541 < partition_sizze_289836; i_294541++) {
        for (int64_t i_294537 = 0; i_294537 < n_p_289747; i_294537++) {
            for (int64_t i_294533 = 0; i_294533 < defunc_0_f_res_289890;
                 i_294533++) {
                int64_t y_289954 = mul64(n_p_289747, i_294533);
                int64_t new_i_289955 = add64(y_289954, i_294537);
                bool cond_289956 = slt64(i_289916, new_i_289955);
                double defunc_0_f_res_289957;
                
                if (cond_289956) {
                    defunc_0_f_res_289957 = NAN;
                } else {
                    bool x_289958 = sle64((int64_t) 0, new_i_289955);
                    bool y_289959 = slt64(new_i_289955, n_289745);
                    bool bounds_check_289960 = x_289958 && y_289959;
                    bool index_certs_289961;
                    
                    if (!bounds_check_289960) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) new_i_289955,
                                      "] out of bounds for array of shape [",
                                      (long long) n_289745, "].",
                                      "-> #0  stl.fut:122:39-46\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:117:20-123:36\n   #5  /prelude/soacs.fut:59:3-10\n   #6  /prelude/array.fut:195:3-17\n   #7  utils.fut:6:3-16\n   #8  stl.fut:115:12-124:20\n   #9  stl.fut:114:5-125:11\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_304403,
                                           "mem_out_304403") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304402,
                                           "mem_out_304402") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304401,
                                           "mem_out_304401") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    float f32_arg_289962;
                    
                    f32_arg_289962 = ((float *) mem_296753)[i_294541 *
                                                            n_289745 +
                                                            new_i_289955];
                    
                    double f32_res_289963 = fpconv_f32_f64(f32_arg_289962);
                    
                    defunc_0_f_res_289957 = f32_res_289963;
                }
                ((double *) mem_296871)[i_294541 * ctx_val_296884 + i_294537 *
                                        defunc_0_f_res_289890 + i_294533] =
                    defunc_0_f_res_289957;
            }
        }
    }
    
    int64_t i_289965 = sub64(defunc_0_f_res_289890, (int64_t) 1);
    bool x_289966 = sle64((int64_t) 0, i_289965);
    bool y_289967 = slt64(i_289965, defunc_0_f_res_289890);
    bool bounds_check_289968 = x_289966 && y_289967;
    bool index_certs_289969;
    
    if (!bounds_check_289968) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_289965,
                               "] out of bounds for array of shape [",
                               (long long) defunc_0_f_res_289890, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:45:13-20\n   #2  stl.fut:131:51-67\n   #3  stl.fut:130:12-133:21\n   #4  stl.fut:129:5-134:16\n   #5  stl.fut:419:61-435:77\n   #6  stl.fut:463:3-479:36\n   #7  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (mem_296974_cached_sizze_304962 < (size_t) bytes_296870) {
        mem_296974 = realloc(mem_296974, bytes_296870);
        mem_296974_cached_sizze_304962 = bytes_296870;
    }
    
    int64_t binop_y_296976 = (int64_t) 8 * binop_x_296867;
    int64_t bytes_296977 = smax64((int64_t) 0, binop_y_296976);
    
    if (mem_296978_cached_sizze_304963 < (size_t) bytes_296977) {
        mem_296978 = realloc(mem_296978, bytes_296977);
        mem_296978_cached_sizze_304963 = bytes_296977;
    }
    
    int64_t binop_y_297029 = (int64_t) 8 * defunc_0_f_res_289890;
    int64_t bytes_297030 = smax64((int64_t) 0, binop_y_297029);
    
    if (mem_297031_cached_sizze_304964 < (size_t) bytes_297030) {
        mem_297031 = realloc(mem_297031, bytes_297030);
        mem_297031_cached_sizze_304964 = bytes_297030;
    }
    if (mem_297046_cached_sizze_304965 < (size_t) bytes_297030) {
        mem_297046 = realloc(mem_297046, bytes_297030);
        mem_297046_cached_sizze_304965 = bytes_297030;
    }
    for (int64_t i_304420 = 0; i_304420 < defunc_0_f_res_289890; i_304420++) {
        ((int64_t *) mem_297046)[i_304420] = (int64_t) -1;
    }
    for (int64_t i_294566 = 0; i_294566 < partition_sizze_289836; i_294566++) {
        for (int64_t i_294559 = 0; i_294559 < n_p_289747; i_294559++) {
            int64_t discard_294548;
            int64_t scanacc_294544 = (int64_t) 0;
            
            for (int64_t i_294546 = 0; i_294546 < defunc_0_f_res_289890;
                 i_294546++) {
                double x_289980;
                
                x_289980 = ((double *) mem_296871)[i_294566 * ctx_val_296884 +
                                                   i_294559 *
                                                   defunc_0_f_res_289890 +
                                                   i_294546];
                
                bool isnan_res_289981;
                
                isnan_res_289981 = futrts_isnan64(x_289980);
                
                bool defunc_0_p_res_289982 = !isnan_res_289981;
                int64_t defunc_0_f_res_289983 =
                        btoi_bool_i64(defunc_0_p_res_289982);
                int64_t defunc_1_op_res_289979 = add64(defunc_0_f_res_289983,
                                                       scanacc_294544);
                
                ((int64_t *) mem_297031)[i_294546] = defunc_1_op_res_289979;
                
                int64_t scanacc_tmp_304425 = defunc_1_op_res_289979;
                
                scanacc_294544 = scanacc_tmp_304425;
            }
            discard_294548 = scanacc_294544;
            if (defunc_0_f_res_289890 * (int64_t) 8 > 0)
                memmove(mem_296974 + (i_294566 * ctx_val_296884 + i_294559 *
                                      defunc_0_f_res_289890) * (int64_t) 8,
                        mem_297046 + (int64_t) 0, defunc_0_f_res_289890 *
                        (int64_t) 8);
            for (int64_t write_iter_294549 = 0; write_iter_294549 <
                 defunc_0_f_res_289890; write_iter_294549++) {
                double write_iv_294551;
                
                write_iv_294551 = ((double *) mem_296871)[i_294566 *
                                                          ctx_val_296884 +
                                                          i_294559 *
                                                          defunc_0_f_res_289890 +
                                                          write_iter_294549];
                
                int64_t write_iv_294552;
                
                write_iv_294552 = ((int64_t *) mem_297031)[write_iter_294549];
                
                bool isnan_res_289990;
                
                isnan_res_289990 = futrts_isnan64(write_iv_294551);
                
                bool defunc_0_p_res_289991 = !isnan_res_289990;
                int64_t defunc_1_f_res_289992;
                
                if (defunc_0_p_res_289991) {
                    int64_t defunc_1_f_res_t_res_289993 = sub64(write_iv_294552,
                                                                (int64_t) 1);
                    
                    defunc_1_f_res_289992 = defunc_1_f_res_t_res_289993;
                } else {
                    defunc_1_f_res_289992 = (int64_t) -1;
                }
                if (((sle64((int64_t) 0, i_294566) && slt64(i_294566,
                                                            partition_sizze_289836)) &&
                     (sle64((int64_t) 0, i_294559) && slt64(i_294559,
                                                            n_p_289747))) &&
                    (sle64((int64_t) 0, defunc_1_f_res_289992) &&
                     slt64(defunc_1_f_res_289992, defunc_0_f_res_289890))) {
                    ((int64_t *) mem_296974)[i_294566 * ctx_val_296884 +
                                             i_294559 * defunc_0_f_res_289890 +
                                             defunc_1_f_res_289992] =
                        write_iter_294549;
                }
            }
            if ((int64_t) 8 > 0)
                memmove(mem_296978 + (i_294566 * n_p_289747 + i_294559) *
                        (int64_t) 8, mem_297031 + ((int64_t) 0 + (int64_t) 1 *
                                                   i_289965) * (int64_t) 8,
                        (int64_t) 8);
        }
    }
    
    int64_t min_res_289996 = smin64(q_s_289748, defunc_0_f_res_289890);
    bool bounds_invalid_upwards_289997 = slt64(s_n_m_289895, (int64_t) 0);
    bool valid_289998 = !bounds_invalid_upwards_289997;
    bool range_valid_c_289999;
    
    if (!valid_289998) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) s_n_m_289895, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:620:3-647:10\n   #4  loess.fut:694:15-50\n   #5  stl.fut:140:20-80\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:139:12-141:40\n   #9  /prelude/soacs.fut:67:19-23\n   #10 /prelude/soacs.fut:67:3-37\n   #11 stl.fut:138:5-142:36\n   #12 stl.fut:419:61-435:77\n   #13 stl.fut:463:3-479:36\n   #14 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool loop_cond_290001 = slt64((int64_t) 1, min_res_289996);
    double i64_res_290002 = sitofp_i64_f64(q_s_289748);
    int64_t binop_x_297136 = s_n_m_289895 * binop_x_296867;
    int64_t binop_y_297137 = (int64_t) 8 * binop_x_297136;
    int64_t bytes_297138 = smax64((int64_t) 0, binop_y_297137);
    
    if (mem_297139_cached_sizze_304966 < (size_t) bytes_297138) {
        mem_297139 = realloc(mem_297139, bytes_297138);
        mem_297139_cached_sizze_304966 = bytes_297138;
    }
    if (mem_297144_cached_sizze_304967 < (size_t) bytes_297138) {
        mem_297144 = realloc(mem_297144, bytes_297138);
        mem_297144_cached_sizze_304967 = bytes_297138;
    }
    
    int64_t ctx_val_297168 = n_p_289747 * s_n_m_289895;
    int64_t binop_y_297203 = (int64_t) 8 * defunc_0_f_res_289890;
    int64_t bytes_297204 = smax64((int64_t) 0, binop_y_297203);
    
    if (mem_297205_cached_sizze_304968 < (size_t) bytes_297204) {
        mem_297205 = realloc(mem_297205, bytes_297204);
        mem_297205_cached_sizze_304968 = bytes_297204;
    }
    for (int64_t i_294591 = 0; i_294591 < partition_sizze_289836; i_294591++) {
        for (int64_t i_294584 = 0; i_294584 < n_p_289747; i_294584++) {
            int64_t x_290010;
            
            x_290010 = ((int64_t *) mem_296978)[i_294591 * n_p_289747 +
                                                i_294584];
            for (int64_t i_294571 = 0; i_294571 < defunc_0_f_res_289890;
                 i_294571++) {
                int64_t x_290012;
                
                x_290012 = ((int64_t *) mem_296974)[i_294591 * ctx_val_296884 +
                                                    i_294584 *
                                                    defunc_0_f_res_289890 +
                                                    i_294571];
                
                int64_t defunc_0_f_res_290013 = add64((int64_t) 1, x_290012);
                
                ((int64_t *) mem_297205)[i_294571] = defunc_0_f_res_290013;
            }
            
            int64_t min_arg_290014 = sub64(x_290010, (int64_t) 1);
            int64_t min_arg_290015 = sub64(x_290010, min_res_289996);
            int64_t min_res_290016 = smin64(q_s_289748, x_290010);
            double i64_res_290017 = sitofp_i64_f64(x_290010);
            double x_290018 = i64_res_290002 - i64_res_290017;
            double max_arg_290019 = x_290018 / 2.0;
            double max_res_290020 = fmax64(0.0, max_arg_290019);
            
            for (int64_t i_294577 = 0; i_294577 < s_n_m_289895; i_294577++) {
                bool cond_290024 = i_294577 == (int64_t) 0;
                int64_t defunc_0_m_fun_res_290025;
                
                if (cond_290024) {
                    defunc_0_m_fun_res_290025 = (int64_t) 0;
                } else {
                    int64_t y_290026 = sub64(s_n_m_289895, (int64_t) 1);
                    bool cond_290027 = i_294577 == y_290026;
                    int64_t defunc_0_m_fun_res_f_res_290028;
                    
                    if (cond_290027) {
                        int64_t defunc_0_m_fun_res_f_res_t_res_290029 =
                                sub64(pad_css_len_289891, (int64_t) 1);
                        
                        defunc_0_m_fun_res_f_res_290028 =
                            defunc_0_m_fun_res_f_res_t_res_290029;
                    } else {
                        int64_t x_290030 = sub64(i_294577, (int64_t) 1);
                        int64_t x_290031 = mul64(jump_s_289754, x_290030);
                        int64_t min_arg_290032 = add64((int64_t) 1, x_290031);
                        int64_t min_res_290033 = smin64(defunc_0_f_res_289890,
                                                        min_arg_290032);
                        
                        defunc_0_m_fun_res_f_res_290028 = min_res_290033;
                    }
                    defunc_0_m_fun_res_290025 = defunc_0_m_fun_res_f_res_290028;
                }
                
                bool init_idx_290034;
                int64_t init_idx_290035;
                int64_t init_idx_290036;
                bool loop_while_290037;
                int64_t low_290038;
                int64_t high_290039;
                
                loop_while_290037 = x_289966;
                low_290038 = (int64_t) 0;
                high_290039 = i_289965;
                while (loop_while_290037) {
                    int64_t x_290040 = add64(low_290038, high_290039);
                    int64_t mid_290041 = sdiv64(x_290040, (int64_t) 2);
                    bool x_290042 = sle64((int64_t) 0, mid_290041);
                    bool y_290043 = slt64(mid_290041, defunc_0_f_res_289890);
                    bool bounds_check_290044 = x_290042 && y_290043;
                    bool index_certs_290045;
                    
                    if (!bounds_check_290044) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) mid_290041,
                                      "] out of bounds for array of shape [",
                                      (long long) defunc_0_f_res_289890, "].",
                                      "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:694:15-50\n   #6  stl.fut:140:20-80\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:139:12-141:40\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:138:5-142:36\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_304403,
                                           "mem_out_304403") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304402,
                                           "mem_out_304402") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304401,
                                           "mem_out_304401") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t mid_id_290046;
                    
                    mid_id_290046 = ((int64_t *) mem_297205)[mid_290041];
                    
                    bool cond_290047 = slt64(mid_id_290046, (int64_t) 0);
                    int64_t mid_idx_290048;
                    
                    if (cond_290047) {
                        mid_idx_290048 = (int64_t) 9223372036854775807;
                    } else {
                        mid_idx_290048 = mid_id_290046;
                    }
                    
                    bool cond_290049 = sle64(defunc_0_m_fun_res_290025,
                                             mid_idx_290048);
                    int64_t loopres_290050;
                    int64_t loopres_290051;
                    
                    if (cond_290049) {
                        int64_t loopres_t_res_290052 = sub64(mid_290041,
                                                             (int64_t) 1);
                        
                        loopres_290050 = low_290038;
                        loopres_290051 = loopres_t_res_290052;
                    } else {
                        int64_t loopres_f_res_290053 = add64((int64_t) 1,
                                                             mid_290041);
                        
                        loopres_290050 = loopres_f_res_290053;
                        loopres_290051 = high_290039;
                    }
                    
                    bool loop_cond_290054 = sle64(loopres_290050,
                                                  loopres_290051);
                    bool loop_while_tmp_304435 = loop_cond_290054;
                    int64_t low_tmp_304436 = loopres_290050;
                    int64_t high_tmp_304437 = loopres_290051;
                    
                    loop_while_290037 = loop_while_tmp_304435;
                    low_290038 = low_tmp_304436;
                    high_290039 = high_tmp_304437;
                }
                init_idx_290034 = loop_while_290037;
                init_idx_290035 = low_290038;
                init_idx_290036 = high_290039;
                
                bool idx_290055;
                int64_t idx_290056;
                int64_t idx_290057;
                int64_t idx_290058;
                bool loop_while_290059;
                int64_t l_idx_290060;
                int64_t r_idx_290061;
                int64_t span_290062;
                
                loop_while_290059 = loop_cond_290001;
                l_idx_290060 = init_idx_290035;
                r_idx_290061 = init_idx_290035;
                span_290062 = (int64_t) 1;
                while (loop_while_290059) {
                    int64_t max_arg_290063 = sub64(l_idx_290060, (int64_t) 1);
                    int64_t max_res_290064 = smax64((int64_t) 0,
                                                    max_arg_290063);
                    int64_t min_arg_290065 = add64((int64_t) 1, r_idx_290061);
                    int64_t min_res_290066 = smin64(min_arg_290014,
                                                    min_arg_290065);
                    bool x_290067 = sle64((int64_t) 0, max_res_290064);
                    bool y_290068 = slt64(max_res_290064,
                                          defunc_0_f_res_289890);
                    bool bounds_check_290069 = x_290067 && y_290068;
                    bool index_certs_290070;
                    
                    if (!bounds_check_290069) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) max_res_290064,
                                      "] out of bounds for array of shape [",
                                      (long long) defunc_0_f_res_289890, "].",
                                      "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:694:15-50\n   #6  stl.fut:140:20-80\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:139:12-141:40\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:138:5-142:36\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_304403,
                                           "mem_out_304403") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304402,
                                           "mem_out_304402") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304401,
                                           "mem_out_304401") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t x_290071;
                    
                    x_290071 = ((int64_t *) mem_297205)[max_res_290064];
                    
                    int64_t abs_arg_290072 = sub64(x_290071,
                                                   defunc_0_m_fun_res_290025);
                    int64_t abs_res_290073 = abs64(abs_arg_290072);
                    bool x_290074 = sle64((int64_t) 0, min_res_290066);
                    bool y_290075 = slt64(min_res_290066,
                                          defunc_0_f_res_289890);
                    bool bounds_check_290076 = x_290074 && y_290075;
                    bool index_certs_290077;
                    
                    if (!bounds_check_290076) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_290066,
                                      "] out of bounds for array of shape [",
                                      (long long) defunc_0_f_res_289890, "].",
                                      "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:694:15-50\n   #6  stl.fut:140:20-80\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:139:12-141:40\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:138:5-142:36\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_304403,
                                           "mem_out_304403") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304402,
                                           "mem_out_304402") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304401,
                                           "mem_out_304401") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t x_290078;
                    
                    x_290078 = ((int64_t *) mem_297205)[min_res_290066];
                    
                    int64_t abs_arg_290079 = sub64(x_290078,
                                                   defunc_0_m_fun_res_290025);
                    int64_t abs_res_290080 = abs64(abs_arg_290079);
                    bool cond_290081 = max_res_290064 == l_idx_290060;
                    int64_t loopres_290082;
                    int64_t loopres_290083;
                    int64_t loopres_290084;
                    
                    if (cond_290081) {
                        loopres_290082 = l_idx_290060;
                        loopres_290083 = r_idx_290061;
                        loopres_290084 = min_res_289996;
                    } else {
                        bool cond_290085 = slt64(abs_res_290073,
                                                 abs_res_290080);
                        bool cond_f_res_290086 = min_res_290066 == r_idx_290061;
                        bool x_290087 = !cond_290085;
                        bool y_290088 = cond_f_res_290086 && x_290087;
                        bool cond_290089 = cond_290085 || y_290088;
                        int64_t loopres_f_res_290090;
                        
                        if (cond_290089) {
                            loopres_f_res_290090 = max_res_290064;
                        } else {
                            loopres_f_res_290090 = l_idx_290060;
                        }
                        
                        int64_t loopres_f_res_290091;
                        
                        if (cond_290089) {
                            loopres_f_res_290091 = r_idx_290061;
                        } else {
                            loopres_f_res_290091 = min_res_290066;
                        }
                        
                        int64_t loopres_f_res_290092;
                        
                        if (cond_290089) {
                            int64_t loopres_f_res_t_res_290093 =
                                    add64((int64_t) 1, span_290062);
                            
                            loopres_f_res_290092 = loopres_f_res_t_res_290093;
                        } else {
                            int64_t loopres_f_res_f_res_290094 =
                                    add64((int64_t) 1, span_290062);
                            
                            loopres_f_res_290092 = loopres_f_res_f_res_290094;
                        }
                        loopres_290082 = loopres_f_res_290090;
                        loopres_290083 = loopres_f_res_290091;
                        loopres_290084 = loopres_f_res_290092;
                    }
                    
                    bool loop_cond_290095 = slt64(loopres_290084,
                                                  min_res_289996);
                    bool loop_while_tmp_304438 = loop_cond_290095;
                    int64_t l_idx_tmp_304439 = loopres_290082;
                    int64_t r_idx_tmp_304440 = loopres_290083;
                    int64_t span_tmp_304441 = loopres_290084;
                    
                    loop_while_290059 = loop_while_tmp_304438;
                    l_idx_290060 = l_idx_tmp_304439;
                    r_idx_290061 = r_idx_tmp_304440;
                    span_290062 = span_tmp_304441;
                }
                idx_290055 = loop_while_290059;
                idx_290056 = l_idx_290060;
                idx_290057 = r_idx_290061;
                idx_290058 = span_290062;
                
                int64_t min_res_290096 = smin64(min_arg_290015, idx_290056);
                int64_t max_res_290097 = smax64((int64_t) 0, min_res_290096);
                int64_t defunc_0_m_fun_res_290098;
                
                if (cond_290024) {
                    defunc_0_m_fun_res_290098 = (int64_t) 0;
                } else {
                    int64_t y_290099 = sub64(s_n_m_289895, (int64_t) 1);
                    bool cond_290100 = i_294577 == y_290099;
                    int64_t defunc_0_m_fun_res_f_res_290101;
                    
                    if (cond_290100) {
                        int64_t defunc_0_m_fun_res_f_res_t_res_290102 =
                                sub64(pad_css_len_289891, (int64_t) 1);
                        
                        defunc_0_m_fun_res_f_res_290101 =
                            defunc_0_m_fun_res_f_res_t_res_290102;
                    } else {
                        int64_t x_290103 = sub64(i_294577, (int64_t) 1);
                        int64_t x_290104 = mul64(jump_s_289754, x_290103);
                        int64_t min_arg_290105 = add64((int64_t) 1, x_290104);
                        int64_t min_res_290106 = smin64(defunc_0_f_res_289890,
                                                        min_arg_290105);
                        
                        defunc_0_m_fun_res_f_res_290101 = min_res_290106;
                    }
                    defunc_0_m_fun_res_290098 = defunc_0_m_fun_res_f_res_290101;
                }
                
                int64_t x_290107 = add64(min_res_290016, max_res_290097);
                int64_t r_290108 = sub64(x_290107, (int64_t) 1);
                bool x_290109 = sle64((int64_t) 0, r_290108);
                bool y_290110 = slt64(r_290108, defunc_0_f_res_289890);
                bool bounds_check_290111 = x_290109 && y_290110;
                bool index_certs_290112;
                
                if (!bounds_check_290111) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) r_290108,
                                  "] out of bounds for array of shape [",
                                  (long long) defunc_0_f_res_289890, "].",
                                  "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:695:16-54\n   #5  stl.fut:140:20-80\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:139:12-141:40\n   #9  /prelude/soacs.fut:67:19-23\n   #10 /prelude/soacs.fut:67:3-37\n   #11 stl.fut:138:5-142:36\n   #12 stl.fut:419:61-435:77\n   #13 stl.fut:463:3-479:36\n   #14 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_290113;
                
                x_290113 = ((int64_t *) mem_297205)[r_290108];
                
                int64_t abs_arg_290114 = sub64(x_290113,
                                               defunc_0_m_fun_res_290098);
                int64_t abs_res_290115 = abs64(abs_arg_290114);
                bool x_290116 = sle64((int64_t) 0, max_res_290097);
                bool y_290117 = slt64(max_res_290097, defunc_0_f_res_289890);
                bool bounds_check_290118 = x_290116 && y_290117;
                bool index_certs_290119;
                
                if (!bounds_check_290118) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_290097,
                                  "] out of bounds for array of shape [",
                                  (long long) defunc_0_f_res_289890, "].",
                                  "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:695:16-54\n   #5  stl.fut:140:20-80\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:139:12-141:40\n   #9  /prelude/soacs.fut:67:19-23\n   #10 /prelude/soacs.fut:67:3-37\n   #11 stl.fut:138:5-142:36\n   #12 stl.fut:419:61-435:77\n   #13 stl.fut:463:3-479:36\n   #14 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_290120;
                
                x_290120 = ((int64_t *) mem_297205)[max_res_290097];
                
                int64_t abs_arg_290121 = sub64(x_290120,
                                               defunc_0_m_fun_res_290098);
                int64_t abs_res_290122 = abs64(abs_arg_290121);
                int64_t max_res_290123 = smax64(abs_res_290115, abs_res_290122);
                double defunc_0_f_res_290124 = sitofp_i64_f64(max_res_290123);
                double defunc_1_f_res_290125 = max_res_290020 +
                       defunc_0_f_res_290124;
                
                ((double *) mem_297144)[i_294591 * ctx_val_297168 + i_294584 *
                                        s_n_m_289895 + i_294577] =
                    defunc_1_f_res_290125;
                ((int64_t *) mem_297139)[i_294591 * ctx_val_297168 + i_294584 *
                                         s_n_m_289895 + i_294577] =
                    max_res_290097;
            }
        }
    }
    
    int64_t min_res_290128 = smin64(n_289745, q_l_289750);
    bool bounds_invalid_upwards_290129 = slt64(l_n_m_289902, (int64_t) 0);
    bool valid_290130 = !bounds_invalid_upwards_290129;
    bool range_valid_c_290131;
    
    if (!valid_290130) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) l_n_m_289902, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:620:3-647:10\n   #4  loess.fut:680:15-61\n   #5  stl.fut:148:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:146:5-149:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool loop_cond_290133 = slt64((int64_t) 1, min_res_290128);
    double i64_res_290134 = sitofp_i64_f64(q_l_289750);
    int64_t binop_x_297356 = partition_sizze_289836 * l_n_m_289902;
    int64_t binop_y_297357 = (int64_t) 8 * binop_x_297356;
    int64_t bytes_297358 = smax64((int64_t) 0, binop_y_297357);
    
    if (mem_297359_cached_sizze_304969 < (size_t) bytes_297358) {
        mem_297359 = realloc(mem_297359, bytes_297358);
        mem_297359_cached_sizze_304969 = bytes_297358;
    }
    if (mem_297363_cached_sizze_304970 < (size_t) bytes_297358) {
        mem_297363 = realloc(mem_297363, bytes_297358);
        mem_297363_cached_sizze_304970 = bytes_297358;
    }
    
    int64_t binop_y_297384 = (int64_t) 8 * n_289745;
    int64_t bytes_297385 = smax64((int64_t) 0, binop_y_297384);
    
    if (mem_297386_cached_sizze_304971 < (size_t) bytes_297385) {
        mem_297386 = realloc(mem_297386, bytes_297385);
        mem_297386_cached_sizze_304971 = bytes_297385;
    }
    for (int64_t i_294609 = 0; i_294609 < partition_sizze_289836; i_294609++) {
        int64_t x_290138;
        
        x_290138 = ((int64_t *) mem_296796)[i_294609];
        for (int64_t i_294596 = 0; i_294596 < n_289745; i_294596++) {
            int64_t x_290140;
            
            x_290140 = ((int64_t *) mem_296793)[i_294609 * n_289745 + i_294596];
            
            int64_t defunc_0_f_res_290141 = add64((int64_t) 1, x_290140);
            
            ((int64_t *) mem_297386)[i_294596] = defunc_0_f_res_290141;
        }
        
        int64_t min_arg_290142 = sub64(x_290138, (int64_t) 1);
        int64_t min_arg_290143 = sub64(x_290138, min_res_290128);
        int64_t min_res_290144 = smin64(q_l_289750, x_290138);
        double i64_res_290145 = sitofp_i64_f64(x_290138);
        double x_290146 = i64_res_290134 - i64_res_290145;
        double max_arg_290147 = x_290146 / 2.0;
        double max_res_290148 = fmax64(0.0, max_arg_290147);
        
        for (int64_t i_294602 = 0; i_294602 < l_n_m_289902; i_294602++) {
            int64_t min_arg_290152 = mul64(jump_l_289756, i_294602);
            int64_t min_res_290153 = smin64(i_289916, min_arg_290152);
            int64_t defunc_0_g_res_290154 = add64((int64_t) 1, min_res_290153);
            bool init_idx_290155;
            int64_t init_idx_290156;
            int64_t init_idx_290157;
            bool loop_while_290158;
            int64_t low_290159;
            int64_t high_290160;
            
            loop_while_290158 = x_289917;
            low_290159 = (int64_t) 0;
            high_290160 = i_289916;
            while (loop_while_290158) {
                int64_t x_290161 = add64(low_290159, high_290160);
                int64_t mid_290162 = sdiv64(x_290161, (int64_t) 2);
                bool x_290163 = sle64((int64_t) 0, mid_290162);
                bool y_290164 = slt64(mid_290162, n_289745);
                bool bounds_check_290165 = x_290163 && y_290164;
                bool index_certs_290166;
                
                if (!bounds_check_290165) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_290162,
                                  "] out of bounds for array of shape [",
                                  (long long) n_289745, "].",
                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  stl.fut:148:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:146:5-149:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t mid_id_290167;
                
                mid_id_290167 = ((int64_t *) mem_297386)[mid_290162];
                
                bool cond_290168 = slt64(mid_id_290167, (int64_t) 0);
                int64_t mid_idx_290169;
                
                if (cond_290168) {
                    mid_idx_290169 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_290169 = mid_id_290167;
                }
                
                bool cond_290170 = sle64(defunc_0_g_res_290154, mid_idx_290169);
                int64_t loopres_290171;
                int64_t loopres_290172;
                
                if (cond_290170) {
                    int64_t loopres_t_res_290173 = sub64(mid_290162,
                                                         (int64_t) 1);
                    
                    loopres_290171 = low_290159;
                    loopres_290172 = loopres_t_res_290173;
                } else {
                    int64_t loopres_f_res_290174 = add64((int64_t) 1,
                                                         mid_290162);
                    
                    loopres_290171 = loopres_f_res_290174;
                    loopres_290172 = high_290160;
                }
                
                bool loop_cond_290175 = sle64(loopres_290171, loopres_290172);
                bool loop_while_tmp_304447 = loop_cond_290175;
                int64_t low_tmp_304448 = loopres_290171;
                int64_t high_tmp_304449 = loopres_290172;
                
                loop_while_290158 = loop_while_tmp_304447;
                low_290159 = low_tmp_304448;
                high_290160 = high_tmp_304449;
            }
            init_idx_290155 = loop_while_290158;
            init_idx_290156 = low_290159;
            init_idx_290157 = high_290160;
            
            bool idx_290176;
            int64_t idx_290177;
            int64_t idx_290178;
            int64_t idx_290179;
            bool loop_while_290180;
            int64_t l_idx_290181;
            int64_t r_idx_290182;
            int64_t span_290183;
            
            loop_while_290180 = loop_cond_290133;
            l_idx_290181 = init_idx_290156;
            r_idx_290182 = init_idx_290156;
            span_290183 = (int64_t) 1;
            while (loop_while_290180) {
                int64_t max_arg_290184 = sub64(l_idx_290181, (int64_t) 1);
                int64_t max_res_290185 = smax64((int64_t) 0, max_arg_290184);
                int64_t min_arg_290186 = add64((int64_t) 1, r_idx_290182);
                int64_t min_res_290187 = smin64(min_arg_290142, min_arg_290186);
                bool x_290188 = sle64((int64_t) 0, max_res_290185);
                bool y_290189 = slt64(max_res_290185, n_289745);
                bool bounds_check_290190 = x_290188 && y_290189;
                bool index_certs_290191;
                
                if (!bounds_check_290190) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_290185,
                                  "] out of bounds for array of shape [",
                                  (long long) n_289745, "].",
                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  stl.fut:148:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:146:5-149:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_290192;
                
                x_290192 = ((int64_t *) mem_297386)[max_res_290185];
                
                int64_t abs_arg_290193 = sub64(x_290192, defunc_0_g_res_290154);
                int64_t abs_res_290194 = abs64(abs_arg_290193);
                bool x_290195 = sle64((int64_t) 0, min_res_290187);
                bool y_290196 = slt64(min_res_290187, n_289745);
                bool bounds_check_290197 = x_290195 && y_290196;
                bool index_certs_290198;
                
                if (!bounds_check_290197) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_290187,
                                  "] out of bounds for array of shape [",
                                  (long long) n_289745, "].",
                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  stl.fut:148:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:146:5-149:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_290199;
                
                x_290199 = ((int64_t *) mem_297386)[min_res_290187];
                
                int64_t abs_arg_290200 = sub64(x_290199, defunc_0_g_res_290154);
                int64_t abs_res_290201 = abs64(abs_arg_290200);
                bool cond_290202 = max_res_290185 == l_idx_290181;
                int64_t loopres_290203;
                int64_t loopres_290204;
                int64_t loopres_290205;
                
                if (cond_290202) {
                    loopres_290203 = l_idx_290181;
                    loopres_290204 = r_idx_290182;
                    loopres_290205 = min_res_290128;
                } else {
                    bool cond_290206 = slt64(abs_res_290194, abs_res_290201);
                    bool cond_f_res_290207 = min_res_290187 == r_idx_290182;
                    bool x_290208 = !cond_290206;
                    bool y_290209 = cond_f_res_290207 && x_290208;
                    bool cond_290210 = cond_290206 || y_290209;
                    int64_t loopres_f_res_290211;
                    
                    if (cond_290210) {
                        loopres_f_res_290211 = max_res_290185;
                    } else {
                        loopres_f_res_290211 = l_idx_290181;
                    }
                    
                    int64_t loopres_f_res_290212;
                    
                    if (cond_290210) {
                        loopres_f_res_290212 = r_idx_290182;
                    } else {
                        loopres_f_res_290212 = min_res_290187;
                    }
                    
                    int64_t loopres_f_res_290213;
                    
                    if (cond_290210) {
                        int64_t loopres_f_res_t_res_290214 = add64((int64_t) 1,
                                                                   span_290183);
                        
                        loopres_f_res_290213 = loopres_f_res_t_res_290214;
                    } else {
                        int64_t loopres_f_res_f_res_290215 = add64((int64_t) 1,
                                                                   span_290183);
                        
                        loopres_f_res_290213 = loopres_f_res_f_res_290215;
                    }
                    loopres_290203 = loopres_f_res_290211;
                    loopres_290204 = loopres_f_res_290212;
                    loopres_290205 = loopres_f_res_290213;
                }
                
                bool loop_cond_290216 = slt64(loopres_290205, min_res_290128);
                bool loop_while_tmp_304450 = loop_cond_290216;
                int64_t l_idx_tmp_304451 = loopres_290203;
                int64_t r_idx_tmp_304452 = loopres_290204;
                int64_t span_tmp_304453 = loopres_290205;
                
                loop_while_290180 = loop_while_tmp_304450;
                l_idx_290181 = l_idx_tmp_304451;
                r_idx_290182 = r_idx_tmp_304452;
                span_290183 = span_tmp_304453;
            }
            idx_290176 = loop_while_290180;
            idx_290177 = l_idx_290181;
            idx_290178 = r_idx_290182;
            idx_290179 = span_290183;
            
            int64_t min_res_290217 = smin64(min_arg_290143, idx_290177);
            int64_t max_res_290218 = smax64((int64_t) 0, min_res_290217);
            int64_t x_290219 = add64(min_res_290144, max_res_290218);
            int64_t r_290220 = sub64(x_290219, (int64_t) 1);
            bool x_290221 = sle64((int64_t) 0, r_290220);
            bool y_290222 = slt64(r_290220, n_289745);
            bool bounds_check_290223 = x_290221 && y_290222;
            bool index_certs_290224;
            
            if (!bounds_check_290223) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_290220,
                              "] out of bounds for array of shape [",
                              (long long) n_289745, "].",
                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  stl.fut:148:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:146:5-149:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
                    return 1;
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t x_290225;
            
            x_290225 = ((int64_t *) mem_296793)[i_294609 * n_289745 + r_290220];
            
            int64_t abs_arg_290226 = sub64(x_290225, min_res_290153);
            int64_t abs_res_290227 = abs64(abs_arg_290226);
            bool x_290228 = sle64((int64_t) 0, max_res_290218);
            bool y_290229 = slt64(max_res_290218, n_289745);
            bool bounds_check_290230 = x_290228 && y_290229;
            bool index_certs_290231;
            
            if (!bounds_check_290230) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_290218,
                              "] out of bounds for array of shape [",
                              (long long) n_289745, "].",
                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  stl.fut:148:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:146:5-149:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
                    return 1;
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t x_290232;
            
            x_290232 = ((int64_t *) mem_296793)[i_294609 * n_289745 +
                                                max_res_290218];
            
            int64_t abs_arg_290233 = sub64(x_290232, min_res_290153);
            int64_t abs_res_290234 = abs64(abs_arg_290233);
            int64_t max_res_290235 = smax64(abs_res_290227, abs_res_290234);
            double defunc_0_f_res_290236 = sitofp_i64_f64(max_res_290235);
            double defunc_1_f_res_290237 = max_res_290148 +
                   defunc_0_f_res_290236;
            
            ((double *) mem_297363)[i_294609 * l_n_m_289902 + i_294602] =
                defunc_1_f_res_290237;
            ((int64_t *) mem_297359)[i_294609 * l_n_m_289902 + i_294602] =
                max_res_290218;
        }
    }
    
    int64_t min_res_290240 = smin64(n_289745, q_t_289749);
    bool bounds_invalid_upwards_290241 = slt64(t_n_m_289909, (int64_t) 0);
    bool valid_290242 = !bounds_invalid_upwards_290241;
    bool range_valid_c_290243;
    
    if (!valid_290242) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) t_n_m_289909, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:620:3-647:10\n   #4  loess.fut:680:15-61\n   #5  stl.fut:155:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:153:5-156:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool loop_cond_290245 = slt64((int64_t) 1, min_res_290240);
    double i64_res_290246 = sitofp_i64_f64(q_t_289749);
    int64_t binop_x_297465 = partition_sizze_289836 * t_n_m_289909;
    int64_t binop_y_297466 = (int64_t) 8 * binop_x_297465;
    int64_t bytes_297467 = smax64((int64_t) 0, binop_y_297466);
    
    if (mem_297468_cached_sizze_304972 < (size_t) bytes_297467) {
        mem_297468 = realloc(mem_297468, bytes_297467);
        mem_297468_cached_sizze_304972 = bytes_297467;
    }
    if (mem_297472_cached_sizze_304973 < (size_t) bytes_297467) {
        mem_297472 = realloc(mem_297472, bytes_297467);
        mem_297472_cached_sizze_304973 = bytes_297467;
    }
    
    int64_t binop_y_297493 = (int64_t) 8 * n_289745;
    int64_t bytes_297494 = smax64((int64_t) 0, binop_y_297493);
    
    if (mem_297495_cached_sizze_304974 < (size_t) bytes_297494) {
        mem_297495 = realloc(mem_297495, bytes_297494);
        mem_297495_cached_sizze_304974 = bytes_297494;
    }
    for (int64_t i_294627 = 0; i_294627 < partition_sizze_289836; i_294627++) {
        int64_t x_290250;
        
        x_290250 = ((int64_t *) mem_296796)[i_294627];
        for (int64_t i_294614 = 0; i_294614 < n_289745; i_294614++) {
            int64_t x_290252;
            
            x_290252 = ((int64_t *) mem_296793)[i_294627 * n_289745 + i_294614];
            
            int64_t defunc_0_f_res_290253 = add64((int64_t) 1, x_290252);
            
            ((int64_t *) mem_297495)[i_294614] = defunc_0_f_res_290253;
        }
        
        int64_t min_arg_290254 = sub64(x_290250, (int64_t) 1);
        int64_t min_arg_290255 = sub64(x_290250, min_res_290240);
        int64_t min_res_290256 = smin64(q_t_289749, x_290250);
        double i64_res_290257 = sitofp_i64_f64(x_290250);
        double x_290258 = i64_res_290246 - i64_res_290257;
        double max_arg_290259 = x_290258 / 2.0;
        double max_res_290260 = fmax64(0.0, max_arg_290259);
        
        for (int64_t i_294620 = 0; i_294620 < t_n_m_289909; i_294620++) {
            int64_t min_arg_290264 = mul64(jump_t_289755, i_294620);
            int64_t min_res_290265 = smin64(i_289916, min_arg_290264);
            int64_t defunc_0_g_res_290266 = add64((int64_t) 1, min_res_290265);
            bool init_idx_290267;
            int64_t init_idx_290268;
            int64_t init_idx_290269;
            bool loop_while_290270;
            int64_t low_290271;
            int64_t high_290272;
            
            loop_while_290270 = x_289917;
            low_290271 = (int64_t) 0;
            high_290272 = i_289916;
            while (loop_while_290270) {
                int64_t x_290273 = add64(low_290271, high_290272);
                int64_t mid_290274 = sdiv64(x_290273, (int64_t) 2);
                bool x_290275 = sle64((int64_t) 0, mid_290274);
                bool y_290276 = slt64(mid_290274, n_289745);
                bool bounds_check_290277 = x_290275 && y_290276;
                bool index_certs_290278;
                
                if (!bounds_check_290277) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_290274,
                                  "] out of bounds for array of shape [",
                                  (long long) n_289745, "].",
                                  "-> #0  loess.fut:627:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  stl.fut:155:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:153:5-156:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t mid_id_290279;
                
                mid_id_290279 = ((int64_t *) mem_297495)[mid_290274];
                
                bool cond_290280 = slt64(mid_id_290279, (int64_t) 0);
                int64_t mid_idx_290281;
                
                if (cond_290280) {
                    mid_idx_290281 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_290281 = mid_id_290279;
                }
                
                bool cond_290282 = sle64(defunc_0_g_res_290266, mid_idx_290281);
                int64_t loopres_290283;
                int64_t loopres_290284;
                
                if (cond_290282) {
                    int64_t loopres_t_res_290285 = sub64(mid_290274,
                                                         (int64_t) 1);
                    
                    loopres_290283 = low_290271;
                    loopres_290284 = loopres_t_res_290285;
                } else {
                    int64_t loopres_f_res_290286 = add64((int64_t) 1,
                                                         mid_290274);
                    
                    loopres_290283 = loopres_f_res_290286;
                    loopres_290284 = high_290272;
                }
                
                bool loop_cond_290287 = sle64(loopres_290283, loopres_290284);
                bool loop_while_tmp_304459 = loop_cond_290287;
                int64_t low_tmp_304460 = loopres_290283;
                int64_t high_tmp_304461 = loopres_290284;
                
                loop_while_290270 = loop_while_tmp_304459;
                low_290271 = low_tmp_304460;
                high_290272 = high_tmp_304461;
            }
            init_idx_290267 = loop_while_290270;
            init_idx_290268 = low_290271;
            init_idx_290269 = high_290272;
            
            bool idx_290288;
            int64_t idx_290289;
            int64_t idx_290290;
            int64_t idx_290291;
            bool loop_while_290292;
            int64_t l_idx_290293;
            int64_t r_idx_290294;
            int64_t span_290295;
            
            loop_while_290292 = loop_cond_290245;
            l_idx_290293 = init_idx_290268;
            r_idx_290294 = init_idx_290268;
            span_290295 = (int64_t) 1;
            while (loop_while_290292) {
                int64_t max_arg_290296 = sub64(l_idx_290293, (int64_t) 1);
                int64_t max_res_290297 = smax64((int64_t) 0, max_arg_290296);
                int64_t min_arg_290298 = add64((int64_t) 1, r_idx_290294);
                int64_t min_res_290299 = smin64(min_arg_290254, min_arg_290298);
                bool x_290300 = sle64((int64_t) 0, max_res_290297);
                bool y_290301 = slt64(max_res_290297, n_289745);
                bool bounds_check_290302 = x_290300 && y_290301;
                bool index_certs_290303;
                
                if (!bounds_check_290302) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_290297,
                                  "] out of bounds for array of shape [",
                                  (long long) n_289745, "].",
                                  "-> #0  loess.fut:637:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  stl.fut:155:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:153:5-156:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_290304;
                
                x_290304 = ((int64_t *) mem_297495)[max_res_290297];
                
                int64_t abs_arg_290305 = sub64(x_290304, defunc_0_g_res_290266);
                int64_t abs_res_290306 = abs64(abs_arg_290305);
                bool x_290307 = sle64((int64_t) 0, min_res_290299);
                bool y_290308 = slt64(min_res_290299, n_289745);
                bool bounds_check_290309 = x_290307 && y_290308;
                bool index_certs_290310;
                
                if (!bounds_check_290309) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_290299,
                                  "] out of bounds for array of shape [",
                                  (long long) n_289745, "].",
                                  "-> #0  loess.fut:638:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:620:3-647:10\n   #5  loess.fut:680:15-61\n   #6  stl.fut:155:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:153:5-156:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_290311;
                
                x_290311 = ((int64_t *) mem_297495)[min_res_290299];
                
                int64_t abs_arg_290312 = sub64(x_290311, defunc_0_g_res_290266);
                int64_t abs_res_290313 = abs64(abs_arg_290312);
                bool cond_290314 = max_res_290297 == l_idx_290293;
                int64_t loopres_290315;
                int64_t loopres_290316;
                int64_t loopres_290317;
                
                if (cond_290314) {
                    loopres_290315 = l_idx_290293;
                    loopres_290316 = r_idx_290294;
                    loopres_290317 = min_res_290240;
                } else {
                    bool cond_290318 = slt64(abs_res_290306, abs_res_290313);
                    bool cond_f_res_290319 = min_res_290299 == r_idx_290294;
                    bool x_290320 = !cond_290318;
                    bool y_290321 = cond_f_res_290319 && x_290320;
                    bool cond_290322 = cond_290318 || y_290321;
                    int64_t loopres_f_res_290323;
                    
                    if (cond_290322) {
                        loopres_f_res_290323 = max_res_290297;
                    } else {
                        loopres_f_res_290323 = l_idx_290293;
                    }
                    
                    int64_t loopres_f_res_290324;
                    
                    if (cond_290322) {
                        loopres_f_res_290324 = r_idx_290294;
                    } else {
                        loopres_f_res_290324 = min_res_290299;
                    }
                    
                    int64_t loopres_f_res_290325;
                    
                    if (cond_290322) {
                        int64_t loopres_f_res_t_res_290326 = add64((int64_t) 1,
                                                                   span_290295);
                        
                        loopres_f_res_290325 = loopres_f_res_t_res_290326;
                    } else {
                        int64_t loopres_f_res_f_res_290327 = add64((int64_t) 1,
                                                                   span_290295);
                        
                        loopres_f_res_290325 = loopres_f_res_f_res_290327;
                    }
                    loopres_290315 = loopres_f_res_290323;
                    loopres_290316 = loopres_f_res_290324;
                    loopres_290317 = loopres_f_res_290325;
                }
                
                bool loop_cond_290328 = slt64(loopres_290317, min_res_290240);
                bool loop_while_tmp_304462 = loop_cond_290328;
                int64_t l_idx_tmp_304463 = loopres_290315;
                int64_t r_idx_tmp_304464 = loopres_290316;
                int64_t span_tmp_304465 = loopres_290317;
                
                loop_while_290292 = loop_while_tmp_304462;
                l_idx_290293 = l_idx_tmp_304463;
                r_idx_290294 = r_idx_tmp_304464;
                span_290295 = span_tmp_304465;
            }
            idx_290288 = loop_while_290292;
            idx_290289 = l_idx_290293;
            idx_290290 = r_idx_290294;
            idx_290291 = span_290295;
            
            int64_t min_res_290329 = smin64(min_arg_290255, idx_290289);
            int64_t max_res_290330 = smax64((int64_t) 0, min_res_290329);
            int64_t x_290331 = add64(min_res_290256, max_res_290330);
            int64_t r_290332 = sub64(x_290331, (int64_t) 1);
            bool x_290333 = sle64((int64_t) 0, r_290332);
            bool y_290334 = slt64(r_290332, n_289745);
            bool bounds_check_290335 = x_290333 && y_290334;
            bool index_certs_290336;
            
            if (!bounds_check_290335) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_290332,
                              "] out of bounds for array of shape [",
                              (long long) n_289745, "].",
                              "-> #0  loess.fut:662:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  stl.fut:155:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:153:5-156:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
                    return 1;
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t x_290337;
            
            x_290337 = ((int64_t *) mem_296793)[i_294627 * n_289745 + r_290332];
            
            int64_t abs_arg_290338 = sub64(x_290337, min_res_290265);
            int64_t abs_res_290339 = abs64(abs_arg_290338);
            bool x_290340 = sle64((int64_t) 0, max_res_290330);
            bool y_290341 = slt64(max_res_290330, n_289745);
            bool bounds_check_290342 = x_290340 && y_290341;
            bool index_certs_290343;
            
            if (!bounds_check_290342) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_290330,
                              "] out of bounds for array of shape [",
                              (long long) n_289745, "].",
                              "-> #0  loess.fut:661:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:657:3-665:25\n   #4  loess.fut:681:16-51\n   #5  stl.fut:155:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:153:5-156:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
                    return 1;
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t x_290344;
            
            x_290344 = ((int64_t *) mem_296793)[i_294627 * n_289745 +
                                                max_res_290330];
            
            int64_t abs_arg_290345 = sub64(x_290344, min_res_290265);
            int64_t abs_res_290346 = abs64(abs_arg_290345);
            int64_t max_res_290347 = smax64(abs_res_290339, abs_res_290346);
            double defunc_0_f_res_290348 = sitofp_i64_f64(max_res_290347);
            double defunc_1_f_res_290349 = max_res_290260 +
                   defunc_0_f_res_290348;
            
            ((double *) mem_297472)[i_294627 * t_n_m_289909 + i_294620] =
                defunc_1_f_res_290349;
            ((int64_t *) mem_297468)[i_294627 * t_n_m_289909 + i_294620] =
                max_res_290330;
        }
    }
    
    int64_t replicate_arg_290352 = mul64(n_289745, partition_sizze_289836);
    struct memblock mem_297577;
    
    mem_297577.references = NULL;
    if (memblock_alloc(ctx, &mem_297577, bytes_296792, "mem_297577")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_304466 = 0; i_304466 < partition_sizze_289836; i_304466++) {
        for (int64_t i_304467 = 0; i_304467 < n_289745; i_304467++) {
            ((double *) mem_297577.mem)[i_304466 * n_289745 + i_304467] = 0.0;
        }
    }
    
    struct memblock mem_297581;
    
    mem_297581.references = NULL;
    if (memblock_alloc(ctx, &mem_297581, bytes_296792, "mem_297581")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_304468 = 0; i_304468 < partition_sizze_289836; i_304468++) {
        for (int64_t i_304469 = 0; i_304469 < n_289745; i_304469++) {
            ((double *) mem_297581.mem)[i_304468 * n_289745 + i_304469] = 1.0;
        }
    }
    
    bool cond_290355 = slt64((int64_t) 1, jump_l_289756);
    bool cond_290356 = slt64((int64_t) 1, jump_t_289755);
    int64_t y_290357 = sub64(n_outer_289758, (int64_t) 1);
    int64_t css_results_l_290358;
    
    if (cond_289894) {
        css_results_l_290358 = s_n_m_289895;
    } else {
        css_results_l_290358 = pad_css_len_289891;
    }
    
    bool zzero_290359 = n_p_289747 == (int64_t) 0;
    bool nonzzero_290360 = !zzero_290359;
    bool loop_not_taken_290361 = !assert_cond_289885;
    bool protect_assert_disj_290362 = nonzzero_290360 || loop_not_taken_290361;
    bool loop_not_taken_290363 = !assert_cond_289887;
    bool protect_assert_disj_290364 = protect_assert_disj_290362 ||
         loop_not_taken_290363;
    bool nonzzero_cert_290365;
    
    if (!protect_assert_disj_290364) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "division by zero",
                               "-> #0  stl.fut:228:51-57\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:228:28-74\n   #5  stl.fut:227:21-229:39\n   #6  stl.fut:419:61-435:77\n   #7  stl.fut:463:3-479:36\n   #8  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t j_290366 = add64(n_289745, n_p_289747);
    bool empty_slice_290367 = n_289745 == (int64_t) 0;
    int64_t i_p_m_t_s_290368 = add64(n_p_289747, i_289916);
    bool zzero_leq_i_p_m_t_s_290369 = sle64((int64_t) 0, i_p_m_t_s_290368);
    bool i_p_m_t_s_leq_w_290370 = slt64(i_p_m_t_s_290368, C_len_289893);
    bool zzero_lte_i_290371 = sle64((int64_t) 0, n_p_289747);
    bool i_lte_j_290372 = sle64(n_p_289747, j_290366);
    bool y_290373 = i_p_m_t_s_leq_w_290370 && zzero_lte_i_290371;
    bool y_290374 = zzero_leq_i_p_m_t_s_290369 && y_290373;
    bool y_290375 = i_lte_j_290372 && y_290374;
    bool forwards_ok_290376 = zzero_lte_i_290371 && y_290375;
    bool ok_or_empty_290377 = empty_slice_290367 || forwards_ok_290376;
    bool protect_assert_disj_290378 = loop_not_taken_290361 ||
         ok_or_empty_290377;
    bool protect_assert_disj_290379 = loop_not_taken_290363 ||
         protect_assert_disj_290378;
    bool index_certs_290380;
    
    if (!protect_assert_disj_290379) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) n_p_289747, ":",
                               (long long) j_290366,
                               "] out of bounds for array of shape [",
                               (long long) C_len_289893, "].",
                               "-> #0  stl.fut:266:35-50\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  stl.fut:264:13-269:26\n   #4  stl.fut:419:61-435:77\n   #5  stl.fut:463:3-479:36\n   #6  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t lifted_single_ma_l_arg_290381 = add64((int64_t) 1, j_290366);
    int64_t m_290382 = sub64(n_p_289747, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_290383 = sle64((int64_t) 0, m_290382);
    bool i_p_m_t_s_leq_w_290384 = slt64(m_290382, C_len_289893);
    bool y_290385 = zzero_leq_i_p_m_t_s_290383 && i_p_m_t_s_leq_w_290384;
    bool y_290386 = zzero_lte_i_290371 && y_290385;
    bool ok_or_empty_290387 = zzero_290359 || y_290386;
    bool protect_assert_disj_290388 = loop_not_taken_290361 ||
         ok_or_empty_290387;
    bool protect_assert_disj_290389 = loop_not_taken_290363 ||
         protect_assert_disj_290388;
    bool index_certs_290390;
    
    if (!protect_assert_disj_290389) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) n_p_289747,
                               "] out of bounds for array of shape [",
                               (long long) C_len_289893, "].",
                               "-> #0  stl.fut:26:37-43\n   #1  stl.fut:26:20-48\n   #2  stl.fut:40:3-36\n   #3  stl.fut:233:23-47\n   #4  stl.fut:419:61-435:77\n   #5  stl.fut:463:3-479:36\n   #6  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t dyn_lifted_single_ma_l_arg_290391 = add64((int64_t) 2, n_289745);
    bool i_p_m_t_s_leq_w_290392 = slt64(m_290382,
                                        lifted_single_ma_l_arg_290381);
    bool y_290393 = zzero_leq_i_p_m_t_s_290383 && i_p_m_t_s_leq_w_290392;
    bool y_290394 = zzero_lte_i_290371 && y_290393;
    bool ok_or_empty_290395 = zzero_290359 || y_290394;
    bool protect_assert_disj_290396 = loop_not_taken_290361 ||
         ok_or_empty_290395;
    bool protect_assert_disj_290397 = loop_not_taken_290363 ||
         protect_assert_disj_290396;
    bool index_certs_290398;
    
    if (!protect_assert_disj_290397) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) n_p_289747,
                               "] out of bounds for array of shape [",
                               (long long) lifted_single_ma_l_arg_290381, "].",
                               "-> #0  stl.fut:26:37-43\n   #1  stl.fut:26:20-48\n   #2  /prelude/functional.fut:9:42-44\n   #3  stl.fut:40:3-64\n   #4  stl.fut:233:23-47\n   #5  stl.fut:419:61-435:77\n   #6  stl.fut:463:3-479:36\n   #7  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool i_p_m_t_s_leq_w_290399 = slt64((int64_t) 2,
                                        dyn_lifted_single_ma_l_arg_290391);
    bool protect_assert_disj_290400 = loop_not_taken_290361 ||
         i_p_m_t_s_leq_w_290399;
    bool protect_assert_disj_290401 = loop_not_taken_290363 ||
         protect_assert_disj_290400;
    bool index_certs_290402;
    
    if (!protect_assert_disj_290401) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) (int64_t) 3,
                               "] out of bounds for array of shape [",
                               (long long) dyn_lifted_single_ma_l_arg_290391,
                               "].",
                               "-> #0  stl.fut:26:37-43\n   #1  stl.fut:26:20-48\n   #2  /prelude/functional.fut:9:42-44\n   #3  stl.fut:40:3-84\n   #4  stl.fut:233:23-47\n   #5  stl.fut:419:61-435:77\n   #6  stl.fut:463:3-479:36\n   #7  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_290403 = slt64(jump_l_289756, jump_threshold_1_289759);
    bool cond_290404 = slt64(jump_l_289756, jump_threshold_2_289760);
    bool cond_f_res_t_res_290405 = slt64(q_l_289750, q_threshold_2_289762);
    bool x_290406 = cond_290404 && cond_f_res_t_res_290405;
    bool x_290407 = !cond_290403;
    bool y_290408 = x_290406 && x_290407;
    bool cond_290409 = cond_290403 || y_290408;
    bool cond_290410 = slt64(jump_t_289755, jump_threshold_1_289759);
    bool cond_290411 = slt64(jump_t_289755, jump_threshold_2_289760);
    bool cond_f_res_t_res_290412 = slt64(q_t_289749, q_threshold_2_289762);
    bool x_290413 = cond_290411 && cond_f_res_t_res_290412;
    bool x_290414 = !cond_290410;
    bool y_290415 = x_290413 && x_290414;
    bool cond_290416 = cond_290410 || y_290415;
    bool cond_290417 = slt64(jump_s_289754, jump_threshold_1_289759);
    bool cond_290418 = slt64(jump_s_289754, jump_threshold_2_289760);
    bool cond_f_res_t_res_290419 = slt64(q_s_289748, q_threshold_2_289762);
    bool x_290420 = cond_290418 && cond_f_res_t_res_290419;
    bool x_290421 = !cond_290417;
    bool y_290422 = x_290420 && x_290421;
    bool cond_290423 = cond_290417 || y_290422;
    bool bounds_invalid_upwards_290424 = slt64(C_len_289893, (int64_t) 0);
    bool valid_290425 = !bounds_invalid_upwards_290424;
    bool protect_assert_disj_290426 = loop_not_taken_290361 || valid_290425;
    bool protect_assert_disj_290427 = loop_not_taken_290363 ||
         protect_assert_disj_290426;
    bool range_valid_c_290428;
    
    if (!protect_assert_disj_290427) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) C_len_289893, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:228:28-74\n   #4  stl.fut:227:21-229:39\n   #5  stl.fut:419:61-435:77\n   #6  stl.fut:463:3-479:36\n   #7  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_290430 = slt64(lifted_single_ma_l_arg_290381,
                                               (int64_t) 0);
    bool valid_290431 = !bounds_invalid_upwards_290430;
    bool protect_assert_disj_290432 = loop_not_taken_290361 || valid_290431;
    bool protect_assert_disj_290433 = loop_not_taken_290363 ||
         protect_assert_disj_290432;
    bool range_valid_c_290434;
    
    if (!protect_assert_disj_290433) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) lifted_single_ma_l_arg_290381,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:29:13-35:19\n   #4  /prelude/soacs.fut:67:19-23\n   #5  /prelude/soacs.fut:67:3-37\n   #6  stl.fut:28:5-36:23\n   #7  stl.fut:40:3-36\n   #8  stl.fut:233:23-47\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_290436 =
         slt64(dyn_lifted_single_ma_l_arg_290391, (int64_t) 0);
    bool valid_290437 = !bounds_invalid_upwards_290436;
    bool protect_assert_disj_290438 = loop_not_taken_290361 || valid_290437;
    bool protect_assert_disj_290439 = loop_not_taken_290363 ||
         protect_assert_disj_290438;
    bool range_valid_c_290440;
    
    if (!protect_assert_disj_290439) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) dyn_lifted_single_ma_l_arg_290391,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:29:13-35:19\n   #4  /prelude/soacs.fut:67:19-23\n   #5  /prelude/soacs.fut:67:3-37\n   #6  stl.fut:28:5-36:23\n   #7  /prelude/functional.fut:9:42-44\n   #8  stl.fut:40:3-64\n   #9  stl.fut:233:23-47\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (mem_297631_cached_sizze_304975 < (size_t) bytes_296792) {
        mem_297631 = realloc(mem_297631, bytes_296792);
        mem_297631_cached_sizze_304975 = bytes_296792;
    }
    if (mem_297679_cached_sizze_304976 < (size_t) bytes_296870) {
        mem_297679 = realloc(mem_297679, bytes_296870);
        mem_297679_cached_sizze_304976 = bytes_296870;
    }
    if (mem_297684_cached_sizze_304977 < (size_t) bytes_296870) {
        mem_297684 = realloc(mem_297684, bytes_296870);
        mem_297684_cached_sizze_304977 = bytes_296870;
    }
    
    int64_t binop_x_299936 = pad_css_len_289891 * binop_x_296867;
    int64_t binop_y_299937 = (int64_t) 8 * binop_x_299936;
    int64_t bytes_299938 = smax64((int64_t) 0, binop_y_299937);
    int64_t binop_x_300046 = partition_sizze_289836 * C_len_289893;
    int64_t binop_y_300047 = (int64_t) 8 * binop_x_300046;
    int64_t bytes_300048 = smax64((int64_t) 0, binop_y_300047);
    
    if (mem_300049_cached_sizze_304999 < (size_t) bytes_300048) {
        mem_300049 = realloc(mem_300049, bytes_300048);
        mem_300049_cached_sizze_304999 = bytes_300048;
    }
    if (mem_300095_cached_sizze_305000 < (size_t) bytes_296795) {
        mem_300095 = realloc(mem_300095, bytes_296795);
        mem_300095_cached_sizze_305000 = bytes_296795;
    }
    
    int64_t binop_x_300108 = partition_sizze_289836 *
            lifted_single_ma_l_arg_290381;
    int64_t binop_y_300109 = (int64_t) 8 * binop_x_300108;
    int64_t bytes_300110 = smax64((int64_t) 0, binop_y_300109);
    
    if (mem_300111_cached_sizze_305001 < (size_t) bytes_300110) {
        mem_300111 = realloc(mem_300111, bytes_300110);
        mem_300111_cached_sizze_305001 = bytes_300110;
    }
    
    int64_t binop_y_300122 = (int64_t) 8 * lifted_single_ma_l_arg_290381;
    int64_t bytes_300123 = smax64((int64_t) 0, binop_y_300122);
    
    if (mem_300124_cached_sizze_305002 < (size_t) bytes_300123) {
        mem_300124 = realloc(mem_300124, bytes_300123);
        mem_300124_cached_sizze_305002 = bytes_300123;
    }
    if (mem_300147_cached_sizze_305003 < (size_t) bytes_296795) {
        mem_300147 = realloc(mem_300147, bytes_296795);
        mem_300147_cached_sizze_305003 = bytes_296795;
    }
    
    int64_t binop_x_300160 = partition_sizze_289836 *
            dyn_lifted_single_ma_l_arg_290391;
    int64_t binop_y_300161 = (int64_t) 8 * binop_x_300160;
    int64_t bytes_300162 = smax64((int64_t) 0, binop_y_300161);
    
    if (mem_300163_cached_sizze_305004 < (size_t) bytes_300162) {
        mem_300163 = realloc(mem_300163, bytes_300162);
        mem_300163_cached_sizze_305004 = bytes_300162;
    }
    
    int64_t binop_y_300174 = (int64_t) 8 * dyn_lifted_single_ma_l_arg_290391;
    int64_t bytes_300175 = smax64((int64_t) 0, binop_y_300174);
    
    if (mem_300176_cached_sizze_305005 < (size_t) bytes_300175) {
        mem_300176 = realloc(mem_300176, bytes_300175);
        mem_300176_cached_sizze_305005 = bytes_300175;
    }
    if (mem_300199_cached_sizze_305006 < (size_t) bytes_296795) {
        mem_300199 = realloc(mem_300199, bytes_296795);
        mem_300199_cached_sizze_305006 = bytes_296795;
    }
    if (mem_300215_cached_sizze_305007 < (size_t) bytes_296792) {
        mem_300215 = realloc(mem_300215, bytes_296792);
        mem_300215_cached_sizze_305007 = bytes_296792;
    }
    
    int64_t binop_y_300226 = (int64_t) 8 * n_289745;
    int64_t bytes_300227 = smax64((int64_t) 0, binop_y_300226);
    
    if (mem_300228_cached_sizze_305008 < (size_t) bytes_300227) {
        mem_300228 = realloc(mem_300228, bytes_300227);
        mem_300228_cached_sizze_305008 = bytes_300227;
    }
    
    int64_t binop_y_303256 = (int64_t) 4 * partition_sizze_289836;
    int64_t bytes_303257 = smax64((int64_t) 0, binop_y_303256);
    int64_t binop_y_303260 = (int64_t) 4 * binop_x_296790;
    int64_t bytes_303261 = smax64((int64_t) 0, binop_y_303260);
    int64_t binop_y_303283 = (int64_t) 4 * n_289745;
    int64_t bytes_303284 = smax64((int64_t) 0, binop_y_303283);
    int64_t binop_y_303299 = (int64_t) 8 * replicate_arg_290352;
    int64_t bytes_303300 = smax64((int64_t) 0, binop_y_303299);
    int64_t binop_y_303317 = (int64_t) 4 * replicate_arg_290352;
    int64_t bytes_303318 = smax64((int64_t) 0, binop_y_303317);
    bool loop_cond_294183 = slt64((int64_t) 0, replicate_arg_290352);
    int64_t replicate_arg_294184 = mul64((int64_t) 2, partition_sizze_289836);
    int64_t binop_y_303392 = (int64_t) 4 * replicate_arg_294184;
    int64_t bytes_303393 = smax64((int64_t) 0, binop_y_303392);
    int64_t bytes_303411 = smax64((int64_t) 0, partition_sizze_289836);
    int64_t ext_301460;
    
    if (cond_290355) {
        ext_301460 = n_289745;
    } else {
        ext_301460 = l_n_m_289902;
    }
    
    int64_t ext_301459;
    
    if (cond_290355) {
        ext_301459 = n_289745;
    } else {
        ext_301459 = l_n_m_289902;
    }
    
    int64_t ext_303127;
    
    if (cond_290356) {
        ext_303127 = n_289745;
    } else {
        ext_303127 = t_n_m_289909;
    }
    
    int64_t ext_303126;
    
    if (cond_290356) {
        ext_303126 = n_289745;
    } else {
        ext_303126 = t_n_m_289909;
    }
    
    int64_t ext_300043;
    
    if (cond_289894) {
        ext_300043 = s_n_m_289895;
    } else {
        ext_300043 = pad_css_len_289891;
    }
    
    int64_t ext_300041;
    
    if (cond_289894) {
        ext_300041 = s_n_m_289895;
    } else {
        ext_300041 = pad_css_len_289891;
    }
    
    int64_t ext_303671;
    int64_t ext_303669;
    int64_t ext_303665;
    int64_t ext_303664;
    int64_t ext_303663;
    int64_t ext_303662;
    int64_t ext_303661;
    int64_t ext_303660;
    int64_t ext_303659;
    struct memblock ext_mem_303658;
    
    ext_mem_303658.references = NULL;
    
    struct memblock ext_mem_303657;
    
    ext_mem_303657.references = NULL;
    
    struct memblock ext_mem_303656;
    
    ext_mem_303656.references = NULL;
    
    struct memblock mem_param_297589;
    
    mem_param_297589.references = NULL;
    
    int64_t ctx_param_ext_297591;
    int64_t ctx_param_ext_297593;
    struct memblock mem_param_297597;
    
    mem_param_297597.references = NULL;
    
    int64_t ctx_param_ext_297598;
    int64_t ctx_param_ext_297599;
    int64_t ctx_param_ext_297600;
    int64_t ctx_param_ext_297601;
    int64_t ctx_param_ext_297602;
    int64_t ctx_param_ext_297603;
    int64_t ctx_param_ext_297604;
    struct memblock mem_param_297605;
    
    mem_param_297605.references = NULL;
    ctx_param_ext_297591 = n_289745;
    ctx_param_ext_297593 = n_289745;
    ctx_param_ext_297598 = partition_sizze_289836;
    ctx_param_ext_297599 = n_289745;
    ctx_param_ext_297600 = (int64_t) 0;
    ctx_param_ext_297601 = n_289745;
    ctx_param_ext_297602 = partition_sizze_289836;
    ctx_param_ext_297603 = (int64_t) 1;
    ctx_param_ext_297604 = n_289745;
    if (memblock_set(ctx, &mem_param_297589, &mem_297577, "mem_297577") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_297597, &mem_297577, "mem_297577") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_297605, &mem_297581, "mem_297581") != 0)
        return 1;
    for (int64_t i_outer_290445 = 0; i_outer_290445 < n_outer_289758;
         i_outer_290445++) {
        int64_t ext_303138;
        int64_t ext_303136;
        struct memblock ext_mem_303132;
        
        ext_mem_303132.references = NULL;
        
        struct memblock ext_mem_303131;
        
        ext_mem_303131.references = NULL;
        
        struct memblock mem_param_297619;
        
        mem_param_297619.references = NULL;
        
        int64_t ctx_param_ext_297621;
        int64_t ctx_param_ext_297623;
        struct memblock mem_param_297627;
        
        mem_param_297627.references = NULL;
        ctx_param_ext_297621 = ctx_param_ext_297591;
        ctx_param_ext_297623 = ctx_param_ext_297593;
        if (memblock_set(ctx, &mem_param_297619, &mem_param_297589,
                         "mem_param_297589") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_297627, &mem_param_297597,
                         "mem_param_297597") != 0)
            return 1;
        for (int64_t _i_inner_290451 = 0; _i_inner_290451 < n_inner_289757;
             _i_inner_290451++) {
            for (int64_t i_294636 = 0; i_294636 < partition_sizze_289836;
                 i_294636++) {
                for (int64_t i_294632 = 0; i_294632 < n_289745; i_294632++) {
                    float x_290458;
                    
                    x_290458 = ((float *) mem_296753)[i_294636 * n_289745 +
                                                      i_294632];
                    
                    double x_290459;
                    
                    x_290459 = ((double *) mem_param_297627.mem)[i_294636 *
                                                                 ctx_param_ext_297623 +
                                                                 i_294632];
                    
                    double f32_res_290460 = fpconv_f32_f64(x_290458);
                    double defunc_1_f_res_290461 = f32_res_290460 - x_290459;
                    
                    ((double *) mem_297631)[i_294636 * n_289745 + i_294632] =
                        defunc_1_f_res_290461;
                }
            }
            for (int64_t i_294656 = 0; i_294656 < partition_sizze_289836;
                 i_294656++) {
                for (int64_t i_294649 = 0; i_294649 < n_p_289747; i_294649++) {
                    for (int64_t i_294642 = 0; i_294642 < defunc_0_f_res_289890;
                         i_294642++) {
                        int64_t x_290474;
                        
                        x_290474 = ((int64_t *) mem_296974)[i_294656 *
                                                            ctx_val_296884 +
                                                            i_294649 *
                                                            defunc_0_f_res_289890 +
                                                            i_294642];
                        
                        int64_t x_290475 = mul64(n_p_289747, x_290474);
                        int64_t idx_290476 = add64(x_290475, i_294649);
                        bool cond_290477 = slt64(i_289916, idx_290476);
                        bool cond_f_res_290478 = slt64(x_290474, (int64_t) 0);
                        bool x_290479 = !cond_290477;
                        bool y_290480 = cond_f_res_290478 && x_290479;
                        bool cond_290481 = cond_290477 || y_290480;
                        double defunc_0_f_res_290482;
                        double defunc_0_f_res_290483;
                        
                        if (cond_290481) {
                            defunc_0_f_res_290482 = 0.0;
                            defunc_0_f_res_290483 = 0.0;
                        } else {
                            bool x_290484 = sle64((int64_t) 0, idx_290476);
                            bool y_290485 = slt64(idx_290476, n_289745);
                            bool bounds_check_290486 = x_290484 && y_290485;
                            bool index_certs_290487;
                            
                            if (!bounds_check_290486) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) idx_290476,
                                              "] out of bounds for array of shape [",
                                              (long long) n_289745, "].",
                                              "-> #0  stl.fut:193:42-57\n   #1  stl.fut:188:28-194:44\n   #2  /prelude/soacs.fut:67:19-23\n   #3  /prelude/soacs.fut:67:3-37\n   #4  stl.fut:186:21-195:50\n   #5  /prelude/soacs.fut:75:22-28\n   #6  /prelude/soacs.fut:75:3-45\n   #7  stl.fut:184:13-196:57\n   #8  stl.fut:419:61-435:77\n   #9  stl.fut:463:3-479:36\n   #10 stl.fut:445:1-479:36\n");
                                if (memblock_unref(ctx, &mem_param_297627,
                                                   "mem_param_297627") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297619,
                                                   "mem_param_297619") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303131,
                                                   "ext_mem_303131") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303132,
                                                   "ext_mem_303132") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297605,
                                                   "mem_param_297605") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297597,
                                                   "mem_param_297597") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297589,
                                                   "mem_param_297589") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303656,
                                                   "ext_mem_303656") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303657,
                                                   "ext_mem_303657") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303658,
                                                   "ext_mem_303658") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_297581,
                                                   "mem_297581") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_297577,
                                                   "mem_297577") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_304403,
                                                   "mem_out_304403") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_304402,
                                                   "mem_out_304402") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_304401,
                                                   "mem_out_304401") != 0)
                                    return 1;
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            double defunc_0_f_res_f_res_290488;
                            
                            defunc_0_f_res_f_res_290488 =
                                ((double *) mem_297631)[i_294656 * n_289745 +
                                                        idx_290476];
                            
                            double defunc_0_f_res_f_res_290489;
                            
                            defunc_0_f_res_f_res_290489 =
                                ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                  (i_294656 *
                                                                   ctx_param_ext_297601 +
                                                                   idx_290476 *
                                                                   ctx_param_ext_297603)];
                            defunc_0_f_res_290482 = defunc_0_f_res_f_res_290488;
                            defunc_0_f_res_290483 = defunc_0_f_res_f_res_290489;
                        }
                        ((double *) mem_297679)[i_294656 * ctx_val_296884 +
                                                i_294649 *
                                                defunc_0_f_res_289890 +
                                                i_294642] =
                            defunc_0_f_res_290482;
                        ((double *) mem_297684)[i_294656 * ctx_val_296884 +
                                                i_294649 *
                                                defunc_0_f_res_289890 +
                                                i_294642] =
                            defunc_0_f_res_290483;
                    }
                }
            }
            
            struct memblock ext_mem_299924;
            
            ext_mem_299924.references = NULL;
            
            struct memblock ext_mem_299913;
            
            ext_mem_299913.references = NULL;
            if (cond_290423) {
                bool match_lit_290494 = (int64_t) 0 == d_s_289751;
                struct memblock ext_mem_298525;
                
                ext_mem_298525.references = NULL;
                
                struct memblock ext_mem_298514;
                
                ext_mem_298514.references = NULL;
                if (match_lit_290494) {
                    struct memblock mem_297885;
                    
                    mem_297885.references = NULL;
                    if (memblock_alloc(ctx, &mem_297885, bytes_297138,
                                       "mem_297885")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_304499 = 0; i_304499 <
                         partition_sizze_289836; i_304499++) {
                        for (int64_t i_304500 = 0; i_304500 < n_p_289747;
                             i_304500++) {
                            for (int64_t i_304501 = 0; i_304501 < s_n_m_289895;
                                 i_304501++) {
                                ((double *) mem_297885.mem)[i_304499 *
                                                            (s_n_m_289895 *
                                                             n_p_289747) +
                                                            i_304500 *
                                                            s_n_m_289895 +
                                                            i_304501] = 0.0;
                            }
                        }
                    }
                    
                    struct memblock mem_297890;
                    
                    mem_297890.references = NULL;
                    if (memblock_alloc(ctx, &mem_297890, bytes_297138,
                                       "mem_297890")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_294673 = 0; i_294673 <
                         partition_sizze_289836; i_294673++) {
                        for (int64_t i_294669 = 0; i_294669 < n_p_289747;
                             i_294669++) {
                            int64_t x_290510;
                            
                            x_290510 = ((int64_t *) mem_296978)[i_294673 *
                                                                n_p_289747 +
                                                                i_294669];
                            for (int64_t i_294665 = 0; i_294665 < s_n_m_289895;
                                 i_294665++) {
                                int64_t x_290515;
                                
                                x_290515 = ((int64_t *) mem_297139)[i_294673 *
                                                                    ctx_val_297168 +
                                                                    i_294669 *
                                                                    s_n_m_289895 +
                                                                    i_294665];
                                
                                double x_290516;
                                
                                x_290516 = ((double *) mem_297144)[i_294673 *
                                                                   ctx_val_297168 +
                                                                   i_294669 *
                                                                   s_n_m_289895 +
                                                                   i_294665];
                                
                                bool cond_290517 = i_294665 == (int64_t) 0;
                                int64_t defunc_0_m_fun_res_290518;
                                
                                if (cond_290517) {
                                    defunc_0_m_fun_res_290518 = (int64_t) 0;
                                } else {
                                    int64_t y_290519 = sub64(s_n_m_289895,
                                                             (int64_t) 1);
                                    bool cond_290520 = i_294665 == y_290519;
                                    int64_t defunc_0_m_fun_res_f_res_290521;
                                    
                                    if (cond_290520) {
                                        int64_t
                                        defunc_0_m_fun_res_f_res_t_res_290522 =
                                        sub64(pad_css_len_289891, (int64_t) 1);
                                        
                                        defunc_0_m_fun_res_f_res_290521 =
                                            defunc_0_m_fun_res_f_res_t_res_290522;
                                    } else {
                                        int64_t x_290523 = sub64(i_294665,
                                                                 (int64_t) 1);
                                        int64_t x_290524 = mul64(jump_s_289754,
                                                                 x_290523);
                                        int64_t min_arg_290525 =
                                                add64((int64_t) 1, x_290524);
                                        int64_t min_res_290526 =
                                                smin64(defunc_0_f_res_289890,
                                                       min_arg_290525);
                                        
                                        defunc_0_m_fun_res_f_res_290521 =
                                            min_res_290526;
                                    }
                                    defunc_0_m_fun_res_290518 =
                                        defunc_0_m_fun_res_f_res_290521;
                                }
                                
                                double defunc_2_reduce_res_290527;
                                double redout_294659 = 0.0;
                                
                                for (int64_t i_294660 = 0; i_294660 <
                                     q_s_289748; i_294660++) {
                                    bool cond_290532 = sle64(x_290510,
                                                             i_294660);
                                    int64_t defunc_0_f_res_290533;
                                    
                                    if (cond_290532) {
                                        defunc_0_f_res_290533 = (int64_t) 0;
                                    } else {
                                        int64_t i_290534 = add64(x_290515,
                                                                 i_294660);
                                        int64_t defunc_0_add_arg_290535;
                                        
                                        defunc_0_add_arg_290535 =
                                            ((int64_t *) mem_296974)[i_294673 *
                                                                     ctx_val_296884 +
                                                                     i_294669 *
                                                                     defunc_0_f_res_289890 +
                                                                     i_290534];
                                        
                                        int64_t defunc_1_add_res_290536 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_290535);
                                        
                                        defunc_0_f_res_290533 =
                                            defunc_1_add_res_290536;
                                    }
                                    
                                    double defunc_0_f_res_290537;
                                    
                                    if (cond_290532) {
                                        defunc_0_f_res_290537 = 0.0;
                                    } else {
                                        int64_t i_290538 = add64(x_290515,
                                                                 i_294660);
                                        double defunc_0_add_arg_290539;
                                        
                                        defunc_0_add_arg_290539 =
                                            ((double *) mem_297684)[i_294673 *
                                                                    ctx_val_296884 +
                                                                    i_294669 *
                                                                    defunc_0_f_res_289890 +
                                                                    i_290538];
                                        defunc_0_f_res_290537 =
                                            defunc_0_add_arg_290539;
                                    }
                                    
                                    int64_t binop_p_290540 =
                                            sub64(defunc_0_f_res_290533,
                                                  defunc_0_m_fun_res_290518);
                                    double defunc_0_f_res_290541 =
                                           sitofp_i64_f64(binop_p_290540);
                                    double abs_res_290542 =
                                           fabs(defunc_0_f_res_290541);
                                    double tmp1_290543 = abs_res_290542 /
                                           x_290516;
                                    double x_290544 = tmp1_290543 * tmp1_290543;
                                    double y_290545 = tmp1_290543 * x_290544;
                                    double tmp2_290546 = 1.0 - y_290545;
                                    double x_290547 = tmp2_290546 * tmp2_290546;
                                    double tmp3_290548 = tmp2_290546 * x_290547;
                                    double w_j_290549 = defunc_0_f_res_290537 *
                                           tmp3_290548;
                                    double defunc_1_op_res_290530 = w_j_290549 +
                                           redout_294659;
                                    double redout_tmp_304505 =
                                           defunc_1_op_res_290530;
                                    
                                    redout_294659 = redout_tmp_304505;
                                }
                                defunc_2_reduce_res_290527 = redout_294659;
                                
                                double a_290550 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_290527;
                                double a0_290551 = 1.0 / a_290550;
                                int64_t defunc_0_m_fun_res_290552;
                                
                                if (cond_290517) {
                                    defunc_0_m_fun_res_290552 = (int64_t) 0;
                                } else {
                                    int64_t y_290553 = sub64(s_n_m_289895,
                                                             (int64_t) 1);
                                    bool cond_290554 = i_294665 == y_290553;
                                    int64_t defunc_0_m_fun_res_f_res_290555;
                                    
                                    if (cond_290554) {
                                        int64_t
                                        defunc_0_m_fun_res_f_res_t_res_290556 =
                                        sub64(pad_css_len_289891, (int64_t) 1);
                                        
                                        defunc_0_m_fun_res_f_res_290555 =
                                            defunc_0_m_fun_res_f_res_t_res_290556;
                                    } else {
                                        int64_t x_290557 = sub64(i_294665,
                                                                 (int64_t) 1);
                                        int64_t x_290558 = mul64(jump_s_289754,
                                                                 x_290557);
                                        int64_t min_arg_290559 =
                                                add64((int64_t) 1, x_290558);
                                        int64_t min_res_290560 =
                                                smin64(defunc_0_f_res_289890,
                                                       min_arg_290559);
                                        
                                        defunc_0_m_fun_res_f_res_290555 =
                                            min_res_290560;
                                    }
                                    defunc_0_m_fun_res_290552 =
                                        defunc_0_m_fun_res_f_res_290555;
                                }
                                
                                double defunc_2_reduce_res_290561;
                                double redout_294661 = 0.0;
                                
                                for (int64_t i_294662 = 0; i_294662 <
                                     q_s_289748; i_294662++) {
                                    bool cond_290566 = sle64(x_290510,
                                                             i_294662);
                                    int64_t defunc_0_f_res_290567;
                                    
                                    if (cond_290566) {
                                        defunc_0_f_res_290567 = (int64_t) 0;
                                    } else {
                                        int64_t i_290568 = add64(x_290515,
                                                                 i_294662);
                                        int64_t defunc_0_add_arg_290569;
                                        
                                        defunc_0_add_arg_290569 =
                                            ((int64_t *) mem_296974)[i_294673 *
                                                                     ctx_val_296884 +
                                                                     i_294669 *
                                                                     defunc_0_f_res_289890 +
                                                                     i_290568];
                                        
                                        int64_t defunc_1_add_res_290570 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_290569);
                                        
                                        defunc_0_f_res_290567 =
                                            defunc_1_add_res_290570;
                                    }
                                    
                                    double defunc_0_f_res_290571;
                                    
                                    if (cond_290566) {
                                        defunc_0_f_res_290571 = 0.0;
                                    } else {
                                        int64_t i_290572 = add64(x_290515,
                                                                 i_294662);
                                        double defunc_0_add_arg_290573;
                                        
                                        defunc_0_add_arg_290573 =
                                            ((double *) mem_297684)[i_294673 *
                                                                    ctx_val_296884 +
                                                                    i_294669 *
                                                                    defunc_0_f_res_289890 +
                                                                    i_290572];
                                        defunc_0_f_res_290571 =
                                            defunc_0_add_arg_290573;
                                    }
                                    
                                    int64_t binop_p_290574 =
                                            sub64(defunc_0_f_res_290567,
                                                  defunc_0_m_fun_res_290552);
                                    double defunc_0_f_res_290575 =
                                           sitofp_i64_f64(binop_p_290574);
                                    double abs_res_290576 =
                                           fabs(defunc_0_f_res_290575);
                                    double tmp1_290577 = abs_res_290576 /
                                           x_290516;
                                    double x_290578 = tmp1_290577 * tmp1_290577;
                                    double y_290579 = tmp1_290577 * x_290578;
                                    double tmp2_290580 = 1.0 - y_290579;
                                    double x_290581 = tmp2_290580 * tmp2_290580;
                                    double tmp3_290582 = tmp2_290580 * x_290581;
                                    double tmp4_290583 = defunc_0_f_res_290571 *
                                           tmp3_290582;
                                    double defunc_0_f_res_290584;
                                    
                                    if (cond_290566) {
                                        defunc_0_f_res_290584 = 0.0;
                                    } else {
                                        int64_t i_290585 = add64(x_290515,
                                                                 i_294662);
                                        double defunc_0_add_arg_290586;
                                        
                                        defunc_0_add_arg_290586 =
                                            ((double *) mem_297679)[i_294673 *
                                                                    ctx_val_296884 +
                                                                    i_294669 *
                                                                    defunc_0_f_res_289890 +
                                                                    i_290585];
                                        defunc_0_f_res_290584 =
                                            defunc_0_add_arg_290586;
                                    }
                                    
                                    double x_290587 = a0_290551 * tmp4_290583;
                                    double defunc_9_fit_fun_res_290588 =
                                           defunc_0_f_res_290584 * x_290587;
                                    double defunc_1_op_res_290564 =
                                           defunc_9_fit_fun_res_290588 +
                                           redout_294661;
                                    double redout_tmp_304506 =
                                           defunc_1_op_res_290564;
                                    
                                    redout_294661 = redout_tmp_304506;
                                }
                                defunc_2_reduce_res_290561 = redout_294661;
                                ((double *) mem_297890.mem)[i_294673 *
                                                            ctx_val_297168 +
                                                            i_294669 *
                                                            s_n_m_289895 +
                                                            i_294665] =
                                    defunc_2_reduce_res_290561;
                            }
                        }
                    }
                    if (memblock_set(ctx, &ext_mem_298525, &mem_297890,
                                     "mem_297890") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_298514, &mem_297885,
                                     "mem_297885") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297890, "mem_297890") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297885, "mem_297885") != 0)
                        return 1;
                } else {
                    bool match_lit_290591 = (int64_t) 1 == d_s_289751;
                    int64_t binop_y_298093 = (int64_t) 8 * q_s_289748;
                    int64_t bytes_298094 = smax64((int64_t) 0, binop_y_298093);
                    int64_t binop_y_298329 = (int64_t) 8 * q_s_289748;
                    int64_t bytes_298330 = smax64((int64_t) 0, binop_y_298329);
                    struct memblock ext_mem_298502;
                    
                    ext_mem_298502.references = NULL;
                    
                    struct memblock ext_mem_298491;
                    
                    ext_mem_298491.references = NULL;
                    if (match_lit_290591) {
                        struct memblock mem_297993;
                        
                        mem_297993.references = NULL;
                        if (memblock_alloc(ctx, &mem_297993, bytes_297138,
                                           "mem_297993")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_297998;
                        
                        mem_297998.references = NULL;
                        if (memblock_alloc(ctx, &mem_297998, bytes_297138,
                                           "mem_297998")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_298095_cached_sizze_304978 <
                            (size_t) bytes_298094) {
                            mem_298095 = realloc(mem_298095, bytes_298094);
                            mem_298095_cached_sizze_304978 = bytes_298094;
                        }
                        if (mem_298098_cached_sizze_304979 <
                            (size_t) bytes_298094) {
                            mem_298098 = realloc(mem_298098, bytes_298094);
                            mem_298098_cached_sizze_304979 = bytes_298094;
                        }
                        for (int64_t i_294708 = 0; i_294708 <
                             partition_sizze_289836; i_294708++) {
                            for (int64_t i_294701 = 0; i_294701 < n_p_289747;
                                 i_294701++) {
                                int64_t x_290608;
                                
                                x_290608 = ((int64_t *) mem_296978)[i_294708 *
                                                                    n_p_289747 +
                                                                    i_294701];
                                for (int64_t i_294694 = 0; i_294694 <
                                     s_n_m_289895; i_294694++) {
                                    int64_t x_290614;
                                    
                                    x_290614 =
                                        ((int64_t *) mem_297139)[i_294708 *
                                                                 ctx_val_297168 +
                                                                 i_294701 *
                                                                 s_n_m_289895 +
                                                                 i_294694];
                                    
                                    double x_290615;
                                    
                                    x_290615 =
                                        ((double *) mem_297144)[i_294708 *
                                                                ctx_val_297168 +
                                                                i_294701 *
                                                                s_n_m_289895 +
                                                                i_294694];
                                    
                                    bool cond_290616 = i_294694 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_290617;
                                    
                                    if (cond_290616) {
                                        defunc_0_m_fun_res_290617 = (int64_t) 0;
                                    } else {
                                        int64_t y_290618 = sub64(s_n_m_289895,
                                                                 (int64_t) 1);
                                        bool cond_290619 = i_294694 == y_290618;
                                        int64_t defunc_0_m_fun_res_f_res_290620;
                                        
                                        if (cond_290619) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_290621
                                            = sub64(pad_css_len_289891,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_290620 =
                                                defunc_0_m_fun_res_f_res_t_res_290621;
                                        } else {
                                            int64_t x_290622 = sub64(i_294694,
                                                                     (int64_t) 1);
                                            int64_t x_290623 =
                                                    mul64(jump_s_289754,
                                                          x_290622);
                                            int64_t min_arg_290624 =
                                                    add64((int64_t) 1,
                                                          x_290623);
                                            int64_t min_res_290625 =
                                                    smin64(defunc_0_f_res_289890,
                                                           min_arg_290624);
                                            
                                            defunc_0_m_fun_res_f_res_290620 =
                                                min_res_290625;
                                        }
                                        defunc_0_m_fun_res_290617 =
                                            defunc_0_m_fun_res_f_res_290620;
                                    }
                                    
                                    double defunc_2_reduce_res_290626;
                                    double redout_294677 = 0.0;
                                    
                                    for (int64_t i_294680 = 0; i_294680 <
                                         q_s_289748; i_294680++) {
                                        bool cond_290633 = sle64(x_290608,
                                                                 i_294680);
                                        int64_t defunc_0_f_res_290634;
                                        
                                        if (cond_290633) {
                                            defunc_0_f_res_290634 = (int64_t) 0;
                                        } else {
                                            int64_t i_290635 = add64(x_290614,
                                                                     i_294680);
                                            int64_t defunc_0_add_arg_290636;
                                            
                                            defunc_0_add_arg_290636 =
                                                ((int64_t *) mem_296974)[i_294708 *
                                                                         ctx_val_296884 +
                                                                         i_294701 *
                                                                         defunc_0_f_res_289890 +
                                                                         i_290635];
                                            
                                            int64_t defunc_1_add_res_290637 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_290636);
                                            
                                            defunc_0_f_res_290634 =
                                                defunc_1_add_res_290637;
                                        }
                                        
                                        double defunc_0_f_res_290638;
                                        
                                        if (cond_290633) {
                                            defunc_0_f_res_290638 = 0.0;
                                        } else {
                                            int64_t i_290639 = add64(x_290614,
                                                                     i_294680);
                                            double defunc_0_add_arg_290640;
                                            
                                            defunc_0_add_arg_290640 =
                                                ((double *) mem_297684)[i_294708 *
                                                                        ctx_val_296884 +
                                                                        i_294701 *
                                                                        defunc_0_f_res_289890 +
                                                                        i_290639];
                                            defunc_0_f_res_290638 =
                                                defunc_0_add_arg_290640;
                                        }
                                        
                                        int64_t binop_p_290641 =
                                                sub64(defunc_0_f_res_290634,
                                                      defunc_0_m_fun_res_290617);
                                        double defunc_0_f_res_290642 =
                                               sitofp_i64_f64(binop_p_290641);
                                        double abs_res_290643 =
                                               fabs(defunc_0_f_res_290642);
                                        double tmp1_290644 = abs_res_290643 /
                                               x_290615;
                                        double x_290645 = tmp1_290644 *
                                               tmp1_290644;
                                        double y_290646 = tmp1_290644 *
                                               x_290645;
                                        double tmp2_290647 = 1.0 - y_290646;
                                        double x_290648 = tmp2_290647 *
                                               tmp2_290647;
                                        double tmp3_290649 = tmp2_290647 *
                                               x_290648;
                                        double w_j_290650 =
                                               defunc_0_f_res_290638 *
                                               tmp3_290649;
                                        double xw_j_290651 =
                                               defunc_0_f_res_290642 *
                                               w_j_290650;
                                        double x2w_j_290652 =
                                               defunc_0_f_res_290642 *
                                               xw_j_290651;
                                        double defunc_1_op_res_290631 =
                                               w_j_290650 + redout_294677;
                                        
                                        ((double *) mem_298095)[i_294680] =
                                            xw_j_290651;
                                        ((double *) mem_298098)[i_294680] =
                                            x2w_j_290652;
                                        
                                        double redout_tmp_304513 =
                                               defunc_1_op_res_290631;
                                        
                                        redout_294677 = redout_tmp_304513;
                                    }
                                    defunc_2_reduce_res_290626 = redout_294677;
                                    
                                    double a_290653 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_290626;
                                    double defunc_2_reduce_res_290654;
                                    double redout_294683 = 0.0;
                                    
                                    for (int64_t i_294684 = 0; i_294684 <
                                         q_s_289748; i_294684++) {
                                        double x_290658;
                                        
                                        x_290658 =
                                            ((double *) mem_298095)[i_294684];
                                        
                                        double defunc_1_op_res_290657 =
                                               x_290658 + redout_294683;
                                        double redout_tmp_304516 =
                                               defunc_1_op_res_290657;
                                        
                                        redout_294683 = redout_tmp_304516;
                                    }
                                    defunc_2_reduce_res_290654 = redout_294683;
                                    
                                    double b_290659 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_290654;
                                    double defunc_2_reduce_res_290660;
                                    double redout_294685 = 0.0;
                                    
                                    for (int64_t i_294686 = 0; i_294686 <
                                         q_s_289748; i_294686++) {
                                        double x_290664;
                                        
                                        x_290664 =
                                            ((double *) mem_298098)[i_294686];
                                        
                                        double defunc_1_op_res_290663 =
                                               x_290664 + redout_294685;
                                        double redout_tmp_304517 =
                                               defunc_1_op_res_290663;
                                        
                                        redout_294685 = redout_tmp_304517;
                                    }
                                    defunc_2_reduce_res_290660 = redout_294685;
                                    
                                    double c_290665 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_290660;
                                    double x_290666 = a_290653 * c_290665;
                                    double y_290667 = b_290659 * b_290659;
                                    double y_290668 = x_290666 - y_290667;
                                    double det1_290669 = 1.0 / y_290668;
                                    double a11_290670 = c_290665 * det1_290669;
                                    double x_290671 = 0.0 - b_290659;
                                    double b11_290672 = det1_290669 * x_290671;
                                    double c11_290673 = a_290653 * det1_290669;
                                    int64_t defunc_0_m_fun_res_290674;
                                    
                                    if (cond_290616) {
                                        defunc_0_m_fun_res_290674 = (int64_t) 0;
                                    } else {
                                        int64_t y_290675 = sub64(s_n_m_289895,
                                                                 (int64_t) 1);
                                        bool cond_290676 = i_294694 == y_290675;
                                        int64_t defunc_0_m_fun_res_f_res_290677;
                                        
                                        if (cond_290676) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_290678
                                            = sub64(pad_css_len_289891,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_290677 =
                                                defunc_0_m_fun_res_f_res_t_res_290678;
                                        } else {
                                            int64_t x_290679 = sub64(i_294694,
                                                                     (int64_t) 1);
                                            int64_t x_290680 =
                                                    mul64(jump_s_289754,
                                                          x_290679);
                                            int64_t min_arg_290681 =
                                                    add64((int64_t) 1,
                                                          x_290680);
                                            int64_t min_res_290682 =
                                                    smin64(defunc_0_f_res_289890,
                                                           min_arg_290681);
                                            
                                            defunc_0_m_fun_res_f_res_290677 =
                                                min_res_290682;
                                        }
                                        defunc_0_m_fun_res_290674 =
                                            defunc_0_m_fun_res_f_res_290677;
                                    }
                                    
                                    double defunc_2_reduce_res_290683;
                                    double defunc_2_reduce_res_290684;
                                    double redout_294687;
                                    double redout_294688;
                                    
                                    redout_294687 = 0.0;
                                    redout_294688 = 0.0;
                                    for (int64_t i_294689 = 0; i_294689 <
                                         q_s_289748; i_294689++) {
                                        bool cond_290692 = sle64(x_290608,
                                                                 i_294689);
                                        int64_t defunc_0_f_res_290693;
                                        
                                        if (cond_290692) {
                                            defunc_0_f_res_290693 = (int64_t) 0;
                                        } else {
                                            int64_t i_290694 = add64(x_290614,
                                                                     i_294689);
                                            int64_t defunc_0_add_arg_290695;
                                            
                                            defunc_0_add_arg_290695 =
                                                ((int64_t *) mem_296974)[i_294708 *
                                                                         ctx_val_296884 +
                                                                         i_294701 *
                                                                         defunc_0_f_res_289890 +
                                                                         i_290694];
                                            
                                            int64_t defunc_1_add_res_290696 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_290695);
                                            
                                            defunc_0_f_res_290693 =
                                                defunc_1_add_res_290696;
                                        }
                                        
                                        double defunc_0_f_res_290697;
                                        
                                        if (cond_290692) {
                                            defunc_0_f_res_290697 = 0.0;
                                        } else {
                                            int64_t i_290698 = add64(x_290614,
                                                                     i_294689);
                                            double defunc_0_add_arg_290699;
                                            
                                            defunc_0_add_arg_290699 =
                                                ((double *) mem_297684)[i_294708 *
                                                                        ctx_val_296884 +
                                                                        i_294701 *
                                                                        defunc_0_f_res_289890 +
                                                                        i_290698];
                                            defunc_0_f_res_290697 =
                                                defunc_0_add_arg_290699;
                                        }
                                        
                                        int64_t binop_p_290700 =
                                                sub64(defunc_0_f_res_290693,
                                                      defunc_0_m_fun_res_290674);
                                        double defunc_0_f_res_290701 =
                                               sitofp_i64_f64(binop_p_290700);
                                        double abs_res_290702 =
                                               fabs(defunc_0_f_res_290701);
                                        double tmp1_290703 = abs_res_290702 /
                                               x_290615;
                                        double x_290704 = tmp1_290703 *
                                               tmp1_290703;
                                        double y_290705 = tmp1_290703 *
                                               x_290704;
                                        double tmp2_290706 = 1.0 - y_290705;
                                        double x_290707 = tmp2_290706 *
                                               tmp2_290706;
                                        double tmp3_290708 = tmp2_290706 *
                                               x_290707;
                                        double tmp4_290709 =
                                               defunc_0_f_res_290697 *
                                               tmp3_290708;
                                        double defunc_1_f_res_290710 =
                                               defunc_0_f_res_290701 *
                                               tmp4_290709;
                                        double defunc_0_f_res_290711;
                                        
                                        if (cond_290692) {
                                            defunc_0_f_res_290711 = 0.0;
                                        } else {
                                            int64_t i_290712 = add64(x_290614,
                                                                     i_294689);
                                            double defunc_0_add_arg_290713;
                                            
                                            defunc_0_add_arg_290713 =
                                                ((double *) mem_297679)[i_294708 *
                                                                        ctx_val_296884 +
                                                                        i_294701 *
                                                                        defunc_0_f_res_289890 +
                                                                        i_290712];
                                            defunc_0_f_res_290711 =
                                                defunc_0_add_arg_290713;
                                        }
                                        
                                        double x_290714 = a11_290670 *
                                               tmp4_290709;
                                        double y_290715 = b11_290672 *
                                               defunc_1_f_res_290710;
                                        double x_290716 = x_290714 + y_290715;
                                        double defunc_9_fit_fun_res_290717 =
                                               defunc_0_f_res_290711 * x_290716;
                                        double x_290718 = b11_290672 *
                                               tmp4_290709;
                                        double y_290719 = c11_290673 *
                                               defunc_1_f_res_290710;
                                        double x_290720 = x_290718 + y_290719;
                                        double defunc_9_slope_fun_res_290721 =
                                               defunc_0_f_res_290711 * x_290720;
                                        double defunc_1_op_res_290687 =
                                               defunc_9_fit_fun_res_290717 +
                                               redout_294687;
                                        double defunc_1_op_res_290690 =
                                               defunc_9_slope_fun_res_290721 +
                                               redout_294688;
                                        double redout_tmp_304518 =
                                               defunc_1_op_res_290687;
                                        double redout_tmp_304519 =
                                               defunc_1_op_res_290690;
                                        
                                        redout_294687 = redout_tmp_304518;
                                        redout_294688 = redout_tmp_304519;
                                    }
                                    defunc_2_reduce_res_290683 = redout_294687;
                                    defunc_2_reduce_res_290684 = redout_294688;
                                    ((double *) mem_297993.mem)[i_294708 *
                                                                ctx_val_297168 +
                                                                i_294701 *
                                                                s_n_m_289895 +
                                                                i_294694] =
                                        defunc_2_reduce_res_290683;
                                    ((double *) mem_297998.mem)[i_294708 *
                                                                ctx_val_297168 +
                                                                i_294701 *
                                                                s_n_m_289895 +
                                                                i_294694] =
                                        defunc_2_reduce_res_290684;
                                }
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_298502, &mem_297993,
                                         "mem_297993") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_298491, &mem_297998,
                                         "mem_297998") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_297998, "mem_297998") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_297993, "mem_297993") != 0)
                            return 1;
                    } else {
                        struct memblock mem_298229;
                        
                        mem_298229.references = NULL;
                        if (memblock_alloc(ctx, &mem_298229, bytes_297138,
                                           "mem_298229")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_298234;
                        
                        mem_298234.references = NULL;
                        if (memblock_alloc(ctx, &mem_298234, bytes_297138,
                                           "mem_298234")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_298331_cached_sizze_304980 <
                            (size_t) bytes_298330) {
                            mem_298331 = realloc(mem_298331, bytes_298330);
                            mem_298331_cached_sizze_304980 = bytes_298330;
                        }
                        if (mem_298334_cached_sizze_304981 <
                            (size_t) bytes_298330) {
                            mem_298334 = realloc(mem_298334, bytes_298330);
                            mem_298334_cached_sizze_304981 = bytes_298330;
                        }
                        if (mem_298337_cached_sizze_304982 <
                            (size_t) bytes_298330) {
                            mem_298337 = realloc(mem_298337, bytes_298330);
                            mem_298337_cached_sizze_304982 = bytes_298330;
                        }
                        if (mem_298340_cached_sizze_304983 <
                            (size_t) bytes_298330) {
                            mem_298340 = realloc(mem_298340, bytes_298330);
                            mem_298340_cached_sizze_304983 = bytes_298330;
                        }
                        for (int64_t i_294754 = 0; i_294754 <
                             partition_sizze_289836; i_294754++) {
                            for (int64_t i_294747 = 0; i_294747 < n_p_289747;
                                 i_294747++) {
                                int64_t x_290738;
                                
                                x_290738 = ((int64_t *) mem_296978)[i_294754 *
                                                                    n_p_289747 +
                                                                    i_294747];
                                for (int64_t i_294740 = 0; i_294740 <
                                     s_n_m_289895; i_294740++) {
                                    int64_t x_290744;
                                    
                                    x_290744 =
                                        ((int64_t *) mem_297139)[i_294754 *
                                                                 ctx_val_297168 +
                                                                 i_294747 *
                                                                 s_n_m_289895 +
                                                                 i_294740];
                                    
                                    double x_290745;
                                    
                                    x_290745 =
                                        ((double *) mem_297144)[i_294754 *
                                                                ctx_val_297168 +
                                                                i_294747 *
                                                                s_n_m_289895 +
                                                                i_294740];
                                    
                                    bool cond_290746 = i_294740 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_290747;
                                    
                                    if (cond_290746) {
                                        defunc_0_m_fun_res_290747 = (int64_t) 0;
                                    } else {
                                        int64_t y_290748 = sub64(s_n_m_289895,
                                                                 (int64_t) 1);
                                        bool cond_290749 = i_294740 == y_290748;
                                        int64_t defunc_0_m_fun_res_f_res_290750;
                                        
                                        if (cond_290749) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_290751
                                            = sub64(pad_css_len_289891,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_290750 =
                                                defunc_0_m_fun_res_f_res_t_res_290751;
                                        } else {
                                            int64_t x_290752 = sub64(i_294740,
                                                                     (int64_t) 1);
                                            int64_t x_290753 =
                                                    mul64(jump_s_289754,
                                                          x_290752);
                                            int64_t min_arg_290754 =
                                                    add64((int64_t) 1,
                                                          x_290753);
                                            int64_t min_res_290755 =
                                                    smin64(defunc_0_f_res_289890,
                                                           min_arg_290754);
                                            
                                            defunc_0_m_fun_res_f_res_290750 =
                                                min_res_290755;
                                        }
                                        defunc_0_m_fun_res_290747 =
                                            defunc_0_m_fun_res_f_res_290750;
                                    }
                                    
                                    double defunc_2_reduce_res_290756;
                                    double redout_294715 = 0.0;
                                    
                                    for (int64_t i_294720 = 0; i_294720 <
                                         q_s_289748; i_294720++) {
                                        bool cond_290765 = sle64(x_290738,
                                                                 i_294720);
                                        int64_t defunc_0_f_res_290766;
                                        
                                        if (cond_290765) {
                                            defunc_0_f_res_290766 = (int64_t) 0;
                                        } else {
                                            int64_t i_290767 = add64(x_290744,
                                                                     i_294720);
                                            int64_t defunc_0_add_arg_290768;
                                            
                                            defunc_0_add_arg_290768 =
                                                ((int64_t *) mem_296974)[i_294754 *
                                                                         ctx_val_296884 +
                                                                         i_294747 *
                                                                         defunc_0_f_res_289890 +
                                                                         i_290767];
                                            
                                            int64_t defunc_1_add_res_290769 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_290768);
                                            
                                            defunc_0_f_res_290766 =
                                                defunc_1_add_res_290769;
                                        }
                                        
                                        double defunc_0_f_res_290770;
                                        
                                        if (cond_290765) {
                                            defunc_0_f_res_290770 = 0.0;
                                        } else {
                                            int64_t i_290771 = add64(x_290744,
                                                                     i_294720);
                                            double defunc_0_add_arg_290772;
                                            
                                            defunc_0_add_arg_290772 =
                                                ((double *) mem_297684)[i_294754 *
                                                                        ctx_val_296884 +
                                                                        i_294747 *
                                                                        defunc_0_f_res_289890 +
                                                                        i_290771];
                                            defunc_0_f_res_290770 =
                                                defunc_0_add_arg_290772;
                                        }
                                        
                                        int64_t binop_p_290773 =
                                                sub64(defunc_0_f_res_290766,
                                                      defunc_0_m_fun_res_290747);
                                        double defunc_0_f_res_290774 =
                                               sitofp_i64_f64(binop_p_290773);
                                        double abs_res_290775 =
                                               fabs(defunc_0_f_res_290774);
                                        double tmp1_290776 = abs_res_290775 /
                                               x_290745;
                                        double x_290777 = tmp1_290776 *
                                               tmp1_290776;
                                        double y_290778 = tmp1_290776 *
                                               x_290777;
                                        double tmp2_290779 = 1.0 - y_290778;
                                        double x_290780 = tmp2_290779 *
                                               tmp2_290779;
                                        double tmp3_290781 = tmp2_290779 *
                                               x_290780;
                                        double w_j_290782 =
                                               defunc_0_f_res_290770 *
                                               tmp3_290781;
                                        double xw_j_290783 =
                                               defunc_0_f_res_290774 *
                                               w_j_290782;
                                        double x2w_j_290784 =
                                               defunc_0_f_res_290774 *
                                               xw_j_290783;
                                        double x3w_j_290785 =
                                               defunc_0_f_res_290774 *
                                               x2w_j_290784;
                                        double x4w_j_290786 =
                                               defunc_0_f_res_290774 *
                                               x3w_j_290785;
                                        double defunc_1_op_res_290763 =
                                               w_j_290782 + redout_294715;
                                        
                                        ((double *) mem_298331)[i_294720] =
                                            xw_j_290783;
                                        ((double *) mem_298334)[i_294720] =
                                            x2w_j_290784;
                                        ((double *) mem_298337)[i_294720] =
                                            x3w_j_290785;
                                        ((double *) mem_298340)[i_294720] =
                                            x4w_j_290786;
                                        
                                        double redout_tmp_304526 =
                                               defunc_1_op_res_290763;
                                        
                                        redout_294715 = redout_tmp_304526;
                                    }
                                    defunc_2_reduce_res_290756 = redout_294715;
                                    
                                    double a_290787 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_290756;
                                    double defunc_2_reduce_res_290788;
                                    double redout_294725 = 0.0;
                                    
                                    for (int64_t i_294726 = 0; i_294726 <
                                         q_s_289748; i_294726++) {
                                        double x_290792;
                                        
                                        x_290792 =
                                            ((double *) mem_298331)[i_294726];
                                        
                                        double defunc_1_op_res_290791 =
                                               x_290792 + redout_294725;
                                        double redout_tmp_304531 =
                                               defunc_1_op_res_290791;
                                        
                                        redout_294725 = redout_tmp_304531;
                                    }
                                    defunc_2_reduce_res_290788 = redout_294725;
                                    
                                    double b_290793 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_290788;
                                    double defunc_2_reduce_res_290794;
                                    double redout_294727 = 0.0;
                                    
                                    for (int64_t i_294728 = 0; i_294728 <
                                         q_s_289748; i_294728++) {
                                        double x_290798;
                                        
                                        x_290798 =
                                            ((double *) mem_298334)[i_294728];
                                        
                                        double defunc_1_op_res_290797 =
                                               x_290798 + redout_294727;
                                        double redout_tmp_304532 =
                                               defunc_1_op_res_290797;
                                        
                                        redout_294727 = redout_tmp_304532;
                                    }
                                    defunc_2_reduce_res_290794 = redout_294727;
                                    
                                    double c_290799 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_290794;
                                    double defunc_2_reduce_res_290800;
                                    double redout_294729 = 0.0;
                                    
                                    for (int64_t i_294730 = 0; i_294730 <
                                         q_s_289748; i_294730++) {
                                        double x_290804;
                                        
                                        x_290804 =
                                            ((double *) mem_298337)[i_294730];
                                        
                                        double defunc_1_op_res_290803 =
                                               x_290804 + redout_294729;
                                        double redout_tmp_304533 =
                                               defunc_1_op_res_290803;
                                        
                                        redout_294729 = redout_tmp_304533;
                                    }
                                    defunc_2_reduce_res_290800 = redout_294729;
                                    
                                    double d_290805 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_290800;
                                    double defunc_2_reduce_res_290806;
                                    double redout_294731 = 0.0;
                                    
                                    for (int64_t i_294732 = 0; i_294732 <
                                         q_s_289748; i_294732++) {
                                        double x_290810;
                                        
                                        x_290810 =
                                            ((double *) mem_298340)[i_294732];
                                        
                                        double defunc_1_op_res_290809 =
                                               x_290810 + redout_294731;
                                        double redout_tmp_304534 =
                                               defunc_1_op_res_290809;
                                        
                                        redout_294731 = redout_tmp_304534;
                                    }
                                    defunc_2_reduce_res_290806 = redout_294731;
                                    
                                    double e_290811 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_290806;
                                    double x_290812 = c_290799 * e_290811;
                                    double y_290813 = d_290805 * d_290805;
                                    double a12_290814 = x_290812 - y_290813;
                                    double x_290815 = c_290799 * d_290805;
                                    double y_290816 = b_290793 * e_290811;
                                    double b12_290817 = x_290815 - y_290816;
                                    double x_290818 = b_290793 * d_290805;
                                    double y_290819 = c_290799 * c_290799;
                                    double c12_290820 = x_290818 - y_290819;
                                    double x_290821 = a_290787 * e_290811;
                                    double b2_290822 = x_290821 - y_290819;
                                    double x_290823 = b_290793 * c_290799;
                                    double y_290824 = a_290787 * d_290805;
                                    double c2_290825 = x_290823 - y_290824;
                                    double x_290826 = a_290787 * a12_290814;
                                    double y_290827 = b_290793 * b12_290817;
                                    double x_290828 = x_290826 + y_290827;
                                    double y_290829 = c_290799 * c12_290820;
                                    double y_290830 = x_290828 + y_290829;
                                    double det_290831 = 1.0 / y_290830;
                                    double a12_290832 = a12_290814 * det_290831;
                                    double b12_290833 = b12_290817 * det_290831;
                                    double c12_290834 = c12_290820 * det_290831;
                                    double b2_290835 = b2_290822 * det_290831;
                                    double c2_290836 = c2_290825 * det_290831;
                                    int64_t defunc_0_m_fun_res_290837;
                                    
                                    if (cond_290746) {
                                        defunc_0_m_fun_res_290837 = (int64_t) 0;
                                    } else {
                                        int64_t y_290838 = sub64(s_n_m_289895,
                                                                 (int64_t) 1);
                                        bool cond_290839 = i_294740 == y_290838;
                                        int64_t defunc_0_m_fun_res_f_res_290840;
                                        
                                        if (cond_290839) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_290841
                                            = sub64(pad_css_len_289891,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_290840 =
                                                defunc_0_m_fun_res_f_res_t_res_290841;
                                        } else {
                                            int64_t x_290842 = sub64(i_294740,
                                                                     (int64_t) 1);
                                            int64_t x_290843 =
                                                    mul64(jump_s_289754,
                                                          x_290842);
                                            int64_t min_arg_290844 =
                                                    add64((int64_t) 1,
                                                          x_290843);
                                            int64_t min_res_290845 =
                                                    smin64(defunc_0_f_res_289890,
                                                           min_arg_290844);
                                            
                                            defunc_0_m_fun_res_f_res_290840 =
                                                min_res_290845;
                                        }
                                        defunc_0_m_fun_res_290837 =
                                            defunc_0_m_fun_res_f_res_290840;
                                    }
                                    
                                    double defunc_2_reduce_res_290846;
                                    double defunc_2_reduce_res_290847;
                                    double redout_294733;
                                    double redout_294734;
                                    
                                    redout_294733 = 0.0;
                                    redout_294734 = 0.0;
                                    for (int64_t i_294735 = 0; i_294735 <
                                         q_s_289748; i_294735++) {
                                        bool cond_290855 = sle64(x_290738,
                                                                 i_294735);
                                        int64_t defunc_0_f_res_290856;
                                        
                                        if (cond_290855) {
                                            defunc_0_f_res_290856 = (int64_t) 0;
                                        } else {
                                            int64_t i_290857 = add64(x_290744,
                                                                     i_294735);
                                            int64_t defunc_0_add_arg_290858;
                                            
                                            defunc_0_add_arg_290858 =
                                                ((int64_t *) mem_296974)[i_294754 *
                                                                         ctx_val_296884 +
                                                                         i_294747 *
                                                                         defunc_0_f_res_289890 +
                                                                         i_290857];
                                            
                                            int64_t defunc_1_add_res_290859 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_290858);
                                            
                                            defunc_0_f_res_290856 =
                                                defunc_1_add_res_290859;
                                        }
                                        
                                        double defunc_0_f_res_290860;
                                        
                                        if (cond_290855) {
                                            defunc_0_f_res_290860 = 0.0;
                                        } else {
                                            int64_t i_290861 = add64(x_290744,
                                                                     i_294735);
                                            double defunc_0_add_arg_290862;
                                            
                                            defunc_0_add_arg_290862 =
                                                ((double *) mem_297684)[i_294754 *
                                                                        ctx_val_296884 +
                                                                        i_294747 *
                                                                        defunc_0_f_res_289890 +
                                                                        i_290861];
                                            defunc_0_f_res_290860 =
                                                defunc_0_add_arg_290862;
                                        }
                                        
                                        int64_t binop_p_290863 =
                                                sub64(defunc_0_f_res_290856,
                                                      defunc_0_m_fun_res_290837);
                                        double defunc_0_f_res_290864 =
                                               sitofp_i64_f64(binop_p_290863);
                                        double abs_res_290865 =
                                               fabs(defunc_0_f_res_290864);
                                        double tmp1_290866 = abs_res_290865 /
                                               x_290745;
                                        double x_290867 = tmp1_290866 *
                                               tmp1_290866;
                                        double y_290868 = tmp1_290866 *
                                               x_290867;
                                        double tmp2_290869 = 1.0 - y_290868;
                                        double x_290870 = tmp2_290869 *
                                               tmp2_290869;
                                        double tmp3_290871 = tmp2_290869 *
                                               x_290870;
                                        double tmp4_290872 =
                                               defunc_0_f_res_290860 *
                                               tmp3_290871;
                                        double defunc_1_f_res_290873 =
                                               defunc_0_f_res_290864 *
                                               tmp4_290872;
                                        double defunc_1_f_res_290874 =
                                               defunc_0_f_res_290864 *
                                               defunc_1_f_res_290873;
                                        double defunc_0_f_res_290875;
                                        
                                        if (cond_290855) {
                                            defunc_0_f_res_290875 = 0.0;
                                        } else {
                                            int64_t i_290876 = add64(x_290744,
                                                                     i_294735);
                                            double defunc_0_add_arg_290877;
                                            
                                            defunc_0_add_arg_290877 =
                                                ((double *) mem_297679)[i_294754 *
                                                                        ctx_val_296884 +
                                                                        i_294747 *
                                                                        defunc_0_f_res_289890 +
                                                                        i_290876];
                                            defunc_0_f_res_290875 =
                                                defunc_0_add_arg_290877;
                                        }
                                        
                                        double x_290878 = a12_290832 *
                                               tmp4_290872;
                                        double y_290879 = b12_290833 *
                                               defunc_1_f_res_290873;
                                        double x_290880 = x_290878 + y_290879;
                                        double y_290881 = c12_290834 *
                                               defunc_1_f_res_290874;
                                        double x_290882 = x_290880 + y_290881;
                                        double defunc_9_fit_fun_res_290883 =
                                               defunc_0_f_res_290875 * x_290882;
                                        double x_290884 = b12_290833 *
                                               tmp4_290872;
                                        double y_290885 = b2_290835 *
                                               defunc_1_f_res_290873;
                                        double x_290886 = x_290884 + y_290885;
                                        double y_290887 = c2_290836 *
                                               defunc_1_f_res_290874;
                                        double x_290888 = x_290886 + y_290887;
                                        double defunc_9_slope_fun_res_290889 =
                                               defunc_0_f_res_290875 * x_290888;
                                        double defunc_1_op_res_290850 =
                                               defunc_9_fit_fun_res_290883 +
                                               redout_294733;
                                        double defunc_1_op_res_290853 =
                                               defunc_9_slope_fun_res_290889 +
                                               redout_294734;
                                        double redout_tmp_304535 =
                                               defunc_1_op_res_290850;
                                        double redout_tmp_304536 =
                                               defunc_1_op_res_290853;
                                        
                                        redout_294733 = redout_tmp_304535;
                                        redout_294734 = redout_tmp_304536;
                                    }
                                    defunc_2_reduce_res_290846 = redout_294733;
                                    defunc_2_reduce_res_290847 = redout_294734;
                                    ((double *) mem_298229.mem)[i_294754 *
                                                                ctx_val_297168 +
                                                                i_294747 *
                                                                s_n_m_289895 +
                                                                i_294740] =
                                        defunc_2_reduce_res_290846;
                                    ((double *) mem_298234.mem)[i_294754 *
                                                                ctx_val_297168 +
                                                                i_294747 *
                                                                s_n_m_289895 +
                                                                i_294740] =
                                        defunc_2_reduce_res_290847;
                                }
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_298502, &mem_298229,
                                         "mem_298229") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_298491, &mem_298234,
                                         "mem_298234") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_298234, "mem_298234") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_298229, "mem_298229") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_298525, &ext_mem_298502,
                                     "ext_mem_298502") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_298514, &ext_mem_298491,
                                     "ext_mem_298491") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_298491,
                                       "ext_mem_298491") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_298502,
                                       "ext_mem_298502") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_299924, &ext_mem_298525,
                                 "ext_mem_298525") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_299913, &ext_mem_298514,
                                 "ext_mem_298514") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_298514, "ext_mem_298514") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_298525, "ext_mem_298525") != 0)
                    return 1;
            } else {
                bool cond_290892 = sle64(jump_threshold_2_289760,
                                         jump_s_289754);
                bool cond_t_res_290893 = slt64(q_s_289748,
                                               q_threshold_1_289761);
                bool x_290894 = cond_290892 && cond_t_res_290893;
                struct memblock ext_mem_299902;
                
                ext_mem_299902.references = NULL;
                
                struct memblock ext_mem_299891;
                
                ext_mem_299891.references = NULL;
                if (x_290894) {
                    bool match_lit_290897 = (int64_t) 0 == d_s_289751;
                    int64_t binop_y_298593 = (int64_t) 8 * q_s_289748;
                    int64_t bytes_298594 = smax64((int64_t) 0, binop_y_298593);
                    struct memblock ext_mem_299225;
                    
                    ext_mem_299225.references = NULL;
                    
                    struct memblock ext_mem_299214;
                    
                    ext_mem_299214.references = NULL;
                    if (match_lit_290897) {
                        struct memblock mem_298540;
                        
                        mem_298540.references = NULL;
                        if (memblock_alloc(ctx, &mem_298540, bytes_297138,
                                           "mem_298540")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_304537 = 0; i_304537 <
                             partition_sizze_289836; i_304537++) {
                            for (int64_t i_304538 = 0; i_304538 < n_p_289747;
                                 i_304538++) {
                                for (int64_t i_304539 = 0; i_304539 <
                                     s_n_m_289895; i_304539++) {
                                    ((double *) mem_298540.mem)[i_304537 *
                                                                (s_n_m_289895 *
                                                                 n_p_289747) +
                                                                i_304538 *
                                                                s_n_m_289895 +
                                                                i_304539] = 0.0;
                                }
                            }
                        }
                        
                        struct memblock mem_298545;
                        
                        mem_298545.references = NULL;
                        if (memblock_alloc(ctx, &mem_298545, bytes_297138,
                                           "mem_298545")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_298595_cached_sizze_304984 <
                            (size_t) bytes_298594) {
                            mem_298595 = realloc(mem_298595, bytes_298594);
                            mem_298595_cached_sizze_304984 = bytes_298594;
                        }
                        for (int64_t i_294774 = 0; i_294774 <
                             partition_sizze_289836; i_294774++) {
                            for (int64_t i_294770 = 0; i_294770 < n_p_289747;
                                 i_294770++) {
                                int64_t x_290913;
                                
                                x_290913 = ((int64_t *) mem_296978)[i_294774 *
                                                                    n_p_289747 +
                                                                    i_294770];
                                for (int64_t i_294766 = 0; i_294766 <
                                     s_n_m_289895; i_294766++) {
                                    int64_t x_290918;
                                    
                                    x_290918 =
                                        ((int64_t *) mem_297139)[i_294774 *
                                                                 ctx_val_297168 +
                                                                 i_294770 *
                                                                 s_n_m_289895 +
                                                                 i_294766];
                                    
                                    double x_290919;
                                    
                                    x_290919 =
                                        ((double *) mem_297144)[i_294774 *
                                                                ctx_val_297168 +
                                                                i_294770 *
                                                                s_n_m_289895 +
                                                                i_294766];
                                    
                                    bool cond_290920 = i_294766 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_290921;
                                    
                                    if (cond_290920) {
                                        defunc_0_m_fun_res_290921 = (int64_t) 0;
                                    } else {
                                        int64_t y_290922 = sub64(s_n_m_289895,
                                                                 (int64_t) 1);
                                        bool cond_290923 = i_294766 == y_290922;
                                        int64_t defunc_0_m_fun_res_f_res_290924;
                                        
                                        if (cond_290923) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_290925
                                            = sub64(pad_css_len_289891,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_290924 =
                                                defunc_0_m_fun_res_f_res_t_res_290925;
                                        } else {
                                            int64_t x_290926 = sub64(i_294766,
                                                                     (int64_t) 1);
                                            int64_t x_290927 =
                                                    mul64(jump_s_289754,
                                                          x_290926);
                                            int64_t min_arg_290928 =
                                                    add64((int64_t) 1,
                                                          x_290927);
                                            int64_t min_res_290929 =
                                                    smin64(defunc_0_f_res_289890,
                                                           min_arg_290928);
                                            
                                            defunc_0_m_fun_res_f_res_290924 =
                                                min_res_290929;
                                        }
                                        defunc_0_m_fun_res_290921 =
                                            defunc_0_m_fun_res_f_res_290924;
                                    }
                                    
                                    double defunc_2_reduce_res_290930;
                                    double redout_294758 = 0.0;
                                    
                                    for (int64_t i_294760 = 0; i_294760 <
                                         q_s_289748; i_294760++) {
                                        bool cond_290936 = sle64(x_290913,
                                                                 i_294760);
                                        int64_t defunc_0_f_res_290937;
                                        
                                        if (cond_290936) {
                                            defunc_0_f_res_290937 = (int64_t) 0;
                                        } else {
                                            int64_t i_290938 = add64(x_290918,
                                                                     i_294760);
                                            int64_t defunc_0_add_arg_290939;
                                            
                                            defunc_0_add_arg_290939 =
                                                ((int64_t *) mem_296974)[i_294774 *
                                                                         ctx_val_296884 +
                                                                         i_294770 *
                                                                         defunc_0_f_res_289890 +
                                                                         i_290938];
                                            
                                            int64_t defunc_1_add_res_290940 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_290939);
                                            
                                            defunc_0_f_res_290937 =
                                                defunc_1_add_res_290940;
                                        }
                                        
                                        double defunc_0_f_res_290941;
                                        
                                        if (cond_290936) {
                                            defunc_0_f_res_290941 = 0.0;
                                        } else {
                                            int64_t i_290942 = add64(x_290918,
                                                                     i_294760);
                                            double defunc_0_add_arg_290943;
                                            
                                            defunc_0_add_arg_290943 =
                                                ((double *) mem_297684)[i_294774 *
                                                                        ctx_val_296884 +
                                                                        i_294770 *
                                                                        defunc_0_f_res_289890 +
                                                                        i_290942];
                                            defunc_0_f_res_290941 =
                                                defunc_0_add_arg_290943;
                                        }
                                        
                                        int64_t binop_p_290944 =
                                                sub64(defunc_0_f_res_290937,
                                                      defunc_0_m_fun_res_290921);
                                        double defunc_0_f_res_290945 =
                                               sitofp_i64_f64(binop_p_290944);
                                        double abs_res_290946 =
                                               fabs(defunc_0_f_res_290945);
                                        double tmp1_290947 = abs_res_290946 /
                                               x_290919;
                                        double x_290948 = tmp1_290947 *
                                               tmp1_290947;
                                        double y_290949 = tmp1_290947 *
                                               x_290948;
                                        double tmp2_290950 = 1.0 - y_290949;
                                        double x_290951 = tmp2_290950 *
                                               tmp2_290950;
                                        double tmp3_290952 = tmp2_290950 *
                                               x_290951;
                                        double tmp4_290953 =
                                               defunc_0_f_res_290941 *
                                               tmp3_290952;
                                        double defunc_1_op_res_290934 =
                                               tmp4_290953 + redout_294758;
                                        
                                        ((double *) mem_298595)[i_294760] =
                                            tmp4_290953;
                                        
                                        double redout_tmp_304543 =
                                               defunc_1_op_res_290934;
                                        
                                        redout_294758 = redout_tmp_304543;
                                    }
                                    defunc_2_reduce_res_290930 = redout_294758;
                                    
                                    double a_290954 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_290930;
                                    double a0_290955 = 1.0 / a_290954;
                                    double defunc_2_reduce_res_290956;
                                    double redout_294762 = 0.0;
                                    
                                    for (int64_t i_294763 = 0; i_294763 <
                                         q_s_289748; i_294763++) {
                                        double x_290961;
                                        
                                        x_290961 =
                                            ((double *) mem_298595)[i_294763];
                                        
                                        bool cond_290962 = sle64(x_290913,
                                                                 i_294763);
                                        double defunc_0_f_res_290963;
                                        
                                        if (cond_290962) {
                                            defunc_0_f_res_290963 = 0.0;
                                        } else {
                                            int64_t i_290964 = add64(x_290918,
                                                                     i_294763);
                                            double defunc_0_add_arg_290965;
                                            
                                            defunc_0_add_arg_290965 =
                                                ((double *) mem_297679)[i_294774 *
                                                                        ctx_val_296884 +
                                                                        i_294770 *
                                                                        defunc_0_f_res_289890 +
                                                                        i_290964];
                                            defunc_0_f_res_290963 =
                                                defunc_0_add_arg_290965;
                                        }
                                        
                                        double x_290966 = a0_290955 * x_290961;
                                        double defunc_9_fit_fun_res_290967 =
                                               defunc_0_f_res_290963 * x_290966;
                                        double defunc_1_op_res_290959 =
                                               defunc_9_fit_fun_res_290967 +
                                               redout_294762;
                                        double redout_tmp_304545 =
                                               defunc_1_op_res_290959;
                                        
                                        redout_294762 = redout_tmp_304545;
                                    }
                                    defunc_2_reduce_res_290956 = redout_294762;
                                    ((double *) mem_298545.mem)[i_294774 *
                                                                ctx_val_297168 +
                                                                i_294770 *
                                                                s_n_m_289895 +
                                                                i_294766] =
                                        defunc_2_reduce_res_290956;
                                }
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_299225, &mem_298545,
                                         "mem_298545") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_299214, &mem_298540,
                                         "mem_298540") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_298545, "mem_298545") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_298540, "mem_298540") != 0)
                            return 1;
                    } else {
                        bool match_lit_290970 = (int64_t) 1 == d_s_289751;
                        int64_t binop_y_298763 = (int64_t) 8 * q_s_289748;
                        int64_t bytes_298764 = smax64((int64_t) 0,
                                                      binop_y_298763);
                        int64_t binop_y_299014 = (int64_t) 8 * q_s_289748;
                        int64_t bytes_299015 = smax64((int64_t) 0,
                                                      binop_y_299014);
                        struct memblock ext_mem_299202;
                        
                        ext_mem_299202.references = NULL;
                        
                        struct memblock ext_mem_299191;
                        
                        ext_mem_299191.references = NULL;
                        if (match_lit_290970) {
                            struct memblock mem_298663;
                            
                            mem_298663.references = NULL;
                            if (memblock_alloc(ctx, &mem_298663, bytes_297138,
                                               "mem_298663")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_298668;
                            
                            mem_298668.references = NULL;
                            if (memblock_alloc(ctx, &mem_298668, bytes_297138,
                                               "mem_298668")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_298765_cached_sizze_304985 <
                                (size_t) bytes_298764) {
                                mem_298765 = realloc(mem_298765, bytes_298764);
                                mem_298765_cached_sizze_304985 = bytes_298764;
                            }
                            if (mem_298768_cached_sizze_304986 <
                                (size_t) bytes_298764) {
                                mem_298768 = realloc(mem_298768, bytes_298764);
                                mem_298768_cached_sizze_304986 = bytes_298764;
                            }
                            if (mem_298771_cached_sizze_304987 <
                                (size_t) bytes_298764) {
                                mem_298771 = realloc(mem_298771, bytes_298764);
                                mem_298771_cached_sizze_304987 = bytes_298764;
                            }
                            for (int64_t i_294812 = 0; i_294812 <
                                 partition_sizze_289836; i_294812++) {
                                for (int64_t i_294805 = 0; i_294805 <
                                     n_p_289747; i_294805++) {
                                    int64_t x_290987;
                                    
                                    x_290987 =
                                        ((int64_t *) mem_296978)[i_294812 *
                                                                 n_p_289747 +
                                                                 i_294805];
                                    for (int64_t i_294798 = 0; i_294798 <
                                         s_n_m_289895; i_294798++) {
                                        int64_t x_290993;
                                        
                                        x_290993 =
                                            ((int64_t *) mem_297139)[i_294812 *
                                                                     ctx_val_297168 +
                                                                     i_294805 *
                                                                     s_n_m_289895 +
                                                                     i_294798];
                                        
                                        double x_290994;
                                        
                                        x_290994 =
                                            ((double *) mem_297144)[i_294812 *
                                                                    ctx_val_297168 +
                                                                    i_294805 *
                                                                    s_n_m_289895 +
                                                                    i_294798];
                                        
                                        bool cond_290995 = i_294798 ==
                                             (int64_t) 0;
                                        int64_t defunc_0_m_fun_res_290996;
                                        
                                        if (cond_290995) {
                                            defunc_0_m_fun_res_290996 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_290997 =
                                                    sub64(s_n_m_289895,
                                                          (int64_t) 1);
                                            bool cond_290998 = i_294798 ==
                                                 y_290997;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_290999;
                                            
                                            if (cond_290998) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_291000
                                                = sub64(pad_css_len_289891,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_290999 =
                                                    defunc_0_m_fun_res_f_res_t_res_291000;
                                            } else {
                                                int64_t x_291001 =
                                                        sub64(i_294798,
                                                              (int64_t) 1);
                                                int64_t x_291002 =
                                                        mul64(jump_s_289754,
                                                              x_291001);
                                                int64_t min_arg_291003 =
                                                        add64((int64_t) 1,
                                                              x_291002);
                                                int64_t min_res_291004 =
                                                        smin64(defunc_0_f_res_289890,
                                                               min_arg_291003);
                                                
                                                defunc_0_m_fun_res_f_res_290999 =
                                                    min_res_291004;
                                            }
                                            defunc_0_m_fun_res_290996 =
                                                defunc_0_m_fun_res_f_res_290999;
                                        }
                                        
                                        double defunc_2_reduce_res_291028;
                                        double redout_294779 = 0.0;
                                        
                                        for (int64_t i_294783 = 0; i_294783 <
                                             q_s_289748; i_294783++) {
                                            bool cond_291036 = sle64(x_290987,
                                                                     i_294783);
                                            int64_t defunc_0_f_res_291037;
                                            
                                            if (cond_291036) {
                                                defunc_0_f_res_291037 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_291038 =
                                                        add64(x_290993,
                                                              i_294783);
                                                int64_t defunc_0_add_arg_291039;
                                                
                                                defunc_0_add_arg_291039 =
                                                    ((int64_t *) mem_296974)[i_294812 *
                                                                             ctx_val_296884 +
                                                                             i_294805 *
                                                                             defunc_0_f_res_289890 +
                                                                             i_291038];
                                                
                                                int64_t defunc_1_add_res_291040
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_291039);
                                                
                                                defunc_0_f_res_291037 =
                                                    defunc_1_add_res_291040;
                                            }
                                            
                                            double defunc_0_f_res_291041;
                                            
                                            if (cond_291036) {
                                                defunc_0_f_res_291041 = 0.0;
                                            } else {
                                                int64_t i_291042 =
                                                        add64(x_290993,
                                                              i_294783);
                                                double defunc_0_add_arg_291043;
                                                
                                                defunc_0_add_arg_291043 =
                                                    ((double *) mem_297684)[i_294812 *
                                                                            ctx_val_296884 +
                                                                            i_294805 *
                                                                            defunc_0_f_res_289890 +
                                                                            i_291042];
                                                defunc_0_f_res_291041 =
                                                    defunc_0_add_arg_291043;
                                            }
                                            
                                            int64_t binop_p_291044 =
                                                    sub64(defunc_0_f_res_291037,
                                                          defunc_0_m_fun_res_290996);
                                            double defunc_0_f_res_291045 =
                                                   sitofp_i64_f64(binop_p_291044);
                                            double abs_res_291046 =
                                                   fabs(defunc_0_f_res_291045);
                                            double tmp1_291047 =
                                                   abs_res_291046 / x_290994;
                                            double x_291048 = tmp1_291047 *
                                                   tmp1_291047;
                                            double y_291049 = tmp1_291047 *
                                                   x_291048;
                                            double tmp2_291050 = 1.0 - y_291049;
                                            double x_291051 = tmp2_291050 *
                                                   tmp2_291050;
                                            double tmp3_291052 = tmp2_291050 *
                                                   x_291051;
                                            double tmp4_291053 =
                                                   defunc_0_f_res_291041 *
                                                   tmp3_291052;
                                            double defunc_1_f_res_291054 =
                                                   defunc_0_f_res_291045 *
                                                   tmp4_291053;
                                            double defunc_1_op_res_291034 =
                                                   tmp4_291053 + redout_294779;
                                            
                                            ((double *) mem_298765)[i_294783] =
                                                defunc_1_f_res_291054;
                                            ((double *) mem_298768)[i_294783] =
                                                defunc_0_f_res_291045;
                                            ((double *) mem_298771)[i_294783] =
                                                tmp4_291053;
                                            
                                            double redout_tmp_304552 =
                                                   defunc_1_op_res_291034;
                                            
                                            redout_294779 = redout_tmp_304552;
                                        }
                                        defunc_2_reduce_res_291028 =
                                            redout_294779;
                                        
                                        double a_291059 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291028;
                                        double defunc_2_reduce_res_291060;
                                        double redout_294787 = 0.0;
                                        
                                        for (int64_t i_294788 = 0; i_294788 <
                                             q_s_289748; i_294788++) {
                                            double x_291064;
                                            
                                            x_291064 =
                                                ((double *) mem_298765)[i_294788];
                                            
                                            double defunc_1_op_res_291063 =
                                                   x_291064 + redout_294787;
                                            double redout_tmp_304556 =
                                                   defunc_1_op_res_291063;
                                            
                                            redout_294787 = redout_tmp_304556;
                                        }
                                        defunc_2_reduce_res_291060 =
                                            redout_294787;
                                        
                                        double b_291065 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291060;
                                        double defunc_2_reduce_res_291066;
                                        double redout_294789 = 0.0;
                                        
                                        for (int64_t i_294790 = 0; i_294790 <
                                             q_s_289748; i_294790++) {
                                            double x_291070;
                                            
                                            x_291070 =
                                                ((double *) mem_298768)[i_294790];
                                            
                                            double x_291071;
                                            
                                            x_291071 =
                                                ((double *) mem_298765)[i_294790];
                                            
                                            double defunc_1_f_res_291072 =
                                                   x_291070 * x_291071;
                                            double defunc_1_op_res_291069 =
                                                   defunc_1_f_res_291072 +
                                                   redout_294789;
                                            double redout_tmp_304557 =
                                                   defunc_1_op_res_291069;
                                            
                                            redout_294789 = redout_tmp_304557;
                                        }
                                        defunc_2_reduce_res_291066 =
                                            redout_294789;
                                        
                                        double c_291073 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291066;
                                        double x_291074 = a_291059 * c_291073;
                                        double y_291075 = b_291065 * b_291065;
                                        double y_291076 = x_291074 - y_291075;
                                        double det1_291077 = 1.0 / y_291076;
                                        double a11_291078 = c_291073 *
                                               det1_291077;
                                        double x_291079 = 0.0 - b_291065;
                                        double b11_291080 = det1_291077 *
                                               x_291079;
                                        double c11_291081 = a_291059 *
                                               det1_291077;
                                        double defunc_2_reduce_res_291082;
                                        double defunc_2_reduce_res_291083;
                                        double redout_294791;
                                        double redout_294792;
                                        
                                        redout_294791 = 0.0;
                                        redout_294792 = 0.0;
                                        for (int64_t i_294793 = 0; i_294793 <
                                             q_s_289748; i_294793++) {
                                            double x_291091;
                                            
                                            x_291091 =
                                                ((double *) mem_298771)[i_294793];
                                            
                                            double x_291092;
                                            
                                            x_291092 =
                                                ((double *) mem_298765)[i_294793];
                                            
                                            bool cond_291093 = sle64(x_290987,
                                                                     i_294793);
                                            double defunc_0_f_res_291094;
                                            
                                            if (cond_291093) {
                                                defunc_0_f_res_291094 = 0.0;
                                            } else {
                                                int64_t i_291095 =
                                                        add64(x_290993,
                                                              i_294793);
                                                double defunc_0_add_arg_291096;
                                                
                                                defunc_0_add_arg_291096 =
                                                    ((double *) mem_297679)[i_294812 *
                                                                            ctx_val_296884 +
                                                                            i_294805 *
                                                                            defunc_0_f_res_289890 +
                                                                            i_291095];
                                                defunc_0_f_res_291094 =
                                                    defunc_0_add_arg_291096;
                                            }
                                            
                                            double x_291097 = a11_291078 *
                                                   x_291091;
                                            double y_291098 = b11_291080 *
                                                   x_291092;
                                            double x_291099 = x_291097 +
                                                   y_291098;
                                            double defunc_9_fit_fun_res_291100 =
                                                   defunc_0_f_res_291094 *
                                                   x_291099;
                                            double x_291101 = b11_291080 *
                                                   x_291091;
                                            double y_291102 = c11_291081 *
                                                   x_291092;
                                            double x_291103 = x_291101 +
                                                   y_291102;
                                            double defunc_9_slope_fun_res_291104
                                                   = defunc_0_f_res_291094 *
                                                   x_291103;
                                            double defunc_1_op_res_291086 =
                                                   defunc_9_fit_fun_res_291100 +
                                                   redout_294791;
                                            double defunc_1_op_res_291089 =
                                                   defunc_9_slope_fun_res_291104 +
                                                   redout_294792;
                                            double redout_tmp_304558 =
                                                   defunc_1_op_res_291086;
                                            double redout_tmp_304559 =
                                                   defunc_1_op_res_291089;
                                            
                                            redout_294791 = redout_tmp_304558;
                                            redout_294792 = redout_tmp_304559;
                                        }
                                        defunc_2_reduce_res_291082 =
                                            redout_294791;
                                        defunc_2_reduce_res_291083 =
                                            redout_294792;
                                        ((double *) mem_298663.mem)[i_294812 *
                                                                    ctx_val_297168 +
                                                                    i_294805 *
                                                                    s_n_m_289895 +
                                                                    i_294798] =
                                            defunc_2_reduce_res_291082;
                                        ((double *) mem_298668.mem)[i_294812 *
                                                                    ctx_val_297168 +
                                                                    i_294805 *
                                                                    s_n_m_289895 +
                                                                    i_294798] =
                                            defunc_2_reduce_res_291083;
                                    }
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_299202, &mem_298663,
                                             "mem_298663") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_299191, &mem_298668,
                                             "mem_298668") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_298668,
                                               "mem_298668") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_298663,
                                               "mem_298663") != 0)
                                return 1;
                        } else {
                            struct memblock mem_298914;
                            
                            mem_298914.references = NULL;
                            if (memblock_alloc(ctx, &mem_298914, bytes_297138,
                                               "mem_298914")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_298919;
                            
                            mem_298919.references = NULL;
                            if (memblock_alloc(ctx, &mem_298919, bytes_297138,
                                               "mem_298919")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_299016_cached_sizze_304988 <
                                (size_t) bytes_299015) {
                                mem_299016 = realloc(mem_299016, bytes_299015);
                                mem_299016_cached_sizze_304988 = bytes_299015;
                            }
                            if (mem_299019_cached_sizze_304989 <
                                (size_t) bytes_299015) {
                                mem_299019 = realloc(mem_299019, bytes_299015);
                                mem_299019_cached_sizze_304989 = bytes_299015;
                            }
                            if (mem_299022_cached_sizze_304990 <
                                (size_t) bytes_299015) {
                                mem_299022 = realloc(mem_299022, bytes_299015);
                                mem_299022_cached_sizze_304990 = bytes_299015;
                            }
                            if (mem_299061_cached_sizze_304991 <
                                (size_t) bytes_299015) {
                                mem_299061 = realloc(mem_299061, bytes_299015);
                                mem_299061_cached_sizze_304991 = bytes_299015;
                            }
                            if (mem_299064_cached_sizze_304992 <
                                (size_t) bytes_299015) {
                                mem_299064 = realloc(mem_299064, bytes_299015);
                                mem_299064_cached_sizze_304992 = bytes_299015;
                            }
                            for (int64_t i_294862 = 0; i_294862 <
                                 partition_sizze_289836; i_294862++) {
                                for (int64_t i_294855 = 0; i_294855 <
                                     n_p_289747; i_294855++) {
                                    int64_t x_291121;
                                    
                                    x_291121 =
                                        ((int64_t *) mem_296978)[i_294862 *
                                                                 n_p_289747 +
                                                                 i_294855];
                                    for (int64_t i_294848 = 0; i_294848 <
                                         s_n_m_289895; i_294848++) {
                                        int64_t x_291127;
                                        
                                        x_291127 =
                                            ((int64_t *) mem_297139)[i_294862 *
                                                                     ctx_val_297168 +
                                                                     i_294855 *
                                                                     s_n_m_289895 +
                                                                     i_294848];
                                        
                                        double x_291128;
                                        
                                        x_291128 =
                                            ((double *) mem_297144)[i_294862 *
                                                                    ctx_val_297168 +
                                                                    i_294855 *
                                                                    s_n_m_289895 +
                                                                    i_294848];
                                        
                                        bool cond_291129 = i_294848 ==
                                             (int64_t) 0;
                                        int64_t defunc_0_m_fun_res_291130;
                                        
                                        if (cond_291129) {
                                            defunc_0_m_fun_res_291130 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_291131 =
                                                    sub64(s_n_m_289895,
                                                          (int64_t) 1);
                                            bool cond_291132 = i_294848 ==
                                                 y_291131;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_291133;
                                            
                                            if (cond_291132) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_291134
                                                = sub64(pad_css_len_289891,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_291133 =
                                                    defunc_0_m_fun_res_f_res_t_res_291134;
                                            } else {
                                                int64_t x_291135 =
                                                        sub64(i_294848,
                                                              (int64_t) 1);
                                                int64_t x_291136 =
                                                        mul64(jump_s_289754,
                                                              x_291135);
                                                int64_t min_arg_291137 =
                                                        add64((int64_t) 1,
                                                              x_291136);
                                                int64_t min_res_291138 =
                                                        smin64(defunc_0_f_res_289890,
                                                               min_arg_291137);
                                                
                                                defunc_0_m_fun_res_f_res_291133 =
                                                    min_res_291138;
                                            }
                                            defunc_0_m_fun_res_291130 =
                                                defunc_0_m_fun_res_f_res_291133;
                                        }
                                        for (int64_t i_294821 = 0; i_294821 <
                                             q_s_289748; i_294821++) {
                                            bool cond_291143 = sle64(x_291121,
                                                                     i_294821);
                                            int64_t defunc_0_f_res_291144;
                                            
                                            if (cond_291143) {
                                                defunc_0_f_res_291144 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_291145 =
                                                        add64(x_291127,
                                                              i_294821);
                                                int64_t defunc_0_add_arg_291146;
                                                
                                                defunc_0_add_arg_291146 =
                                                    ((int64_t *) mem_296974)[i_294862 *
                                                                             ctx_val_296884 +
                                                                             i_294855 *
                                                                             defunc_0_f_res_289890 +
                                                                             i_291145];
                                                
                                                int64_t defunc_1_add_res_291147
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_291146);
                                                
                                                defunc_0_f_res_291144 =
                                                    defunc_1_add_res_291147;
                                            }
                                            
                                            double defunc_0_f_res_291148;
                                            
                                            if (cond_291143) {
                                                defunc_0_f_res_291148 = 0.0;
                                            } else {
                                                int64_t i_291149 =
                                                        add64(x_291127,
                                                              i_294821);
                                                double defunc_0_add_arg_291150;
                                                
                                                defunc_0_add_arg_291150 =
                                                    ((double *) mem_297684)[i_294862 *
                                                                            ctx_val_296884 +
                                                                            i_294855 *
                                                                            defunc_0_f_res_289890 +
                                                                            i_291149];
                                                defunc_0_f_res_291148 =
                                                    defunc_0_add_arg_291150;
                                            }
                                            
                                            int64_t binop_p_291151 =
                                                    sub64(defunc_0_f_res_291144,
                                                          defunc_0_m_fun_res_291130);
                                            double defunc_0_f_res_291152 =
                                                   sitofp_i64_f64(binop_p_291151);
                                            double abs_res_291153 =
                                                   fabs(defunc_0_f_res_291152);
                                            double tmp1_291154 =
                                                   abs_res_291153 / x_291128;
                                            double x_291155 = tmp1_291154 *
                                                   tmp1_291154;
                                            double y_291156 = tmp1_291154 *
                                                   x_291155;
                                            double tmp2_291157 = 1.0 - y_291156;
                                            double x_291158 = tmp2_291157 *
                                                   tmp2_291157;
                                            double tmp3_291159 = tmp2_291157 *
                                                   x_291158;
                                            double tmp4_291160 =
                                                   defunc_0_f_res_291148 *
                                                   tmp3_291159;
                                            double defunc_1_f_res_291161 =
                                                   defunc_0_f_res_291152 *
                                                   tmp4_291160;
                                            
                                            ((double *) mem_299016)[i_294821] =
                                                defunc_1_f_res_291161;
                                            ((double *) mem_299019)[i_294821] =
                                                defunc_0_f_res_291152;
                                            ((double *) mem_299022)[i_294821] =
                                                tmp4_291160;
                                        }
                                        
                                        double defunc_2_reduce_res_291168;
                                        double redout_294827 = 0.0;
                                        
                                        for (int64_t i_294830 = 0; i_294830 <
                                             q_s_289748; i_294830++) {
                                            double x_291174;
                                            
                                            x_291174 =
                                                ((double *) mem_299019)[i_294830];
                                            
                                            double x_291175;
                                            
                                            x_291175 =
                                                ((double *) mem_299016)[i_294830];
                                            
                                            double x_291176;
                                            
                                            x_291176 =
                                                ((double *) mem_299022)[i_294830];
                                            
                                            double defunc_1_f_res_291177 =
                                                   x_291174 * x_291175;
                                            double defunc_1_f_res_291178 =
                                                   x_291174 *
                                                   defunc_1_f_res_291177;
                                            double defunc_1_op_res_291173 =
                                                   x_291176 + redout_294827;
                                            
                                            ((double *) mem_299061)[i_294830] =
                                                defunc_1_f_res_291178;
                                            ((double *) mem_299064)[i_294830] =
                                                defunc_1_f_res_291177;
                                            
                                            double redout_tmp_304569 =
                                                   defunc_1_op_res_291173;
                                            
                                            redout_294827 = redout_tmp_304569;
                                        }
                                        defunc_2_reduce_res_291168 =
                                            redout_294827;
                                        
                                        double a_291182 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291168;
                                        double defunc_2_reduce_res_291183;
                                        double redout_294833 = 0.0;
                                        
                                        for (int64_t i_294834 = 0; i_294834 <
                                             q_s_289748; i_294834++) {
                                            double x_291187;
                                            
                                            x_291187 =
                                                ((double *) mem_299016)[i_294834];
                                            
                                            double defunc_1_op_res_291186 =
                                                   x_291187 + redout_294833;
                                            double redout_tmp_304572 =
                                                   defunc_1_op_res_291186;
                                            
                                            redout_294833 = redout_tmp_304572;
                                        }
                                        defunc_2_reduce_res_291183 =
                                            redout_294833;
                                        
                                        double b_291188 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291183;
                                        double defunc_2_reduce_res_291189;
                                        double redout_294835 = 0.0;
                                        
                                        for (int64_t i_294836 = 0; i_294836 <
                                             q_s_289748; i_294836++) {
                                            double x_291193;
                                            
                                            x_291193 =
                                                ((double *) mem_299064)[i_294836];
                                            
                                            double defunc_1_op_res_291192 =
                                                   x_291193 + redout_294835;
                                            double redout_tmp_304573 =
                                                   defunc_1_op_res_291192;
                                            
                                            redout_294835 = redout_tmp_304573;
                                        }
                                        defunc_2_reduce_res_291189 =
                                            redout_294835;
                                        
                                        double c_291194 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291189;
                                        double defunc_2_reduce_res_291195;
                                        double redout_294837 = 0.0;
                                        
                                        for (int64_t i_294838 = 0; i_294838 <
                                             q_s_289748; i_294838++) {
                                            double x_291199;
                                            
                                            x_291199 =
                                                ((double *) mem_299061)[i_294838];
                                            
                                            double defunc_1_op_res_291198 =
                                                   x_291199 + redout_294837;
                                            double redout_tmp_304574 =
                                                   defunc_1_op_res_291198;
                                            
                                            redout_294837 = redout_tmp_304574;
                                        }
                                        defunc_2_reduce_res_291195 =
                                            redout_294837;
                                        
                                        double d_291200 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291195;
                                        double defunc_2_reduce_res_291201;
                                        double redout_294839 = 0.0;
                                        
                                        for (int64_t i_294840 = 0; i_294840 <
                                             q_s_289748; i_294840++) {
                                            double x_291205;
                                            
                                            x_291205 =
                                                ((double *) mem_299019)[i_294840];
                                            
                                            double x_291206;
                                            
                                            x_291206 =
                                                ((double *) mem_299061)[i_294840];
                                            
                                            double defunc_1_f_res_291207 =
                                                   x_291205 * x_291206;
                                            double defunc_1_op_res_291204 =
                                                   defunc_1_f_res_291207 +
                                                   redout_294839;
                                            double redout_tmp_304575 =
                                                   defunc_1_op_res_291204;
                                            
                                            redout_294839 = redout_tmp_304575;
                                        }
                                        defunc_2_reduce_res_291201 =
                                            redout_294839;
                                        
                                        double e_291208 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291201;
                                        double x_291209 = c_291194 * e_291208;
                                        double y_291210 = d_291200 * d_291200;
                                        double a12_291211 = x_291209 - y_291210;
                                        double x_291212 = c_291194 * d_291200;
                                        double y_291213 = b_291188 * e_291208;
                                        double b12_291214 = x_291212 - y_291213;
                                        double x_291215 = b_291188 * d_291200;
                                        double y_291216 = c_291194 * c_291194;
                                        double c12_291217 = x_291215 - y_291216;
                                        double x_291218 = a_291182 * e_291208;
                                        double b2_291219 = x_291218 - y_291216;
                                        double x_291220 = b_291188 * c_291194;
                                        double y_291221 = a_291182 * d_291200;
                                        double c2_291222 = x_291220 - y_291221;
                                        double x_291223 = a_291182 * a12_291211;
                                        double y_291224 = b_291188 * b12_291214;
                                        double x_291225 = x_291223 + y_291224;
                                        double y_291226 = c_291194 * c12_291217;
                                        double y_291227 = x_291225 + y_291226;
                                        double det_291228 = 1.0 / y_291227;
                                        double a12_291229 = a12_291211 *
                                               det_291228;
                                        double b12_291230 = b12_291214 *
                                               det_291228;
                                        double c12_291231 = c12_291217 *
                                               det_291228;
                                        double b2_291232 = b2_291219 *
                                               det_291228;
                                        double c2_291233 = c2_291222 *
                                               det_291228;
                                        double defunc_2_reduce_res_291234;
                                        double defunc_2_reduce_res_291235;
                                        double redout_294841;
                                        double redout_294842;
                                        
                                        redout_294841 = 0.0;
                                        redout_294842 = 0.0;
                                        for (int64_t i_294843 = 0; i_294843 <
                                             q_s_289748; i_294843++) {
                                            double x_291243;
                                            
                                            x_291243 =
                                                ((double *) mem_299022)[i_294843];
                                            
                                            double x_291244;
                                            
                                            x_291244 =
                                                ((double *) mem_299016)[i_294843];
                                            
                                            double x_291245;
                                            
                                            x_291245 =
                                                ((double *) mem_299064)[i_294843];
                                            
                                            bool cond_291246 = sle64(x_291121,
                                                                     i_294843);
                                            double defunc_0_f_res_291247;
                                            
                                            if (cond_291246) {
                                                defunc_0_f_res_291247 = 0.0;
                                            } else {
                                                int64_t i_291248 =
                                                        add64(x_291127,
                                                              i_294843);
                                                double defunc_0_add_arg_291249;
                                                
                                                defunc_0_add_arg_291249 =
                                                    ((double *) mem_297679)[i_294862 *
                                                                            ctx_val_296884 +
                                                                            i_294855 *
                                                                            defunc_0_f_res_289890 +
                                                                            i_291248];
                                                defunc_0_f_res_291247 =
                                                    defunc_0_add_arg_291249;
                                            }
                                            
                                            double x_291250 = a12_291229 *
                                                   x_291243;
                                            double y_291251 = b12_291230 *
                                                   x_291244;
                                            double x_291252 = x_291250 +
                                                   y_291251;
                                            double y_291253 = c12_291231 *
                                                   x_291245;
                                            double x_291254 = x_291252 +
                                                   y_291253;
                                            double defunc_9_fit_fun_res_291255 =
                                                   defunc_0_f_res_291247 *
                                                   x_291254;
                                            double x_291256 = b12_291230 *
                                                   x_291243;
                                            double y_291257 = b2_291232 *
                                                   x_291244;
                                            double x_291258 = x_291256 +
                                                   y_291257;
                                            double y_291259 = c2_291233 *
                                                   x_291245;
                                            double x_291260 = x_291258 +
                                                   y_291259;
                                            double defunc_9_slope_fun_res_291261
                                                   = defunc_0_f_res_291247 *
                                                   x_291260;
                                            double defunc_1_op_res_291238 =
                                                   defunc_9_fit_fun_res_291255 +
                                                   redout_294841;
                                            double defunc_1_op_res_291241 =
                                                   defunc_9_slope_fun_res_291261 +
                                                   redout_294842;
                                            double redout_tmp_304576 =
                                                   defunc_1_op_res_291238;
                                            double redout_tmp_304577 =
                                                   defunc_1_op_res_291241;
                                            
                                            redout_294841 = redout_tmp_304576;
                                            redout_294842 = redout_tmp_304577;
                                        }
                                        defunc_2_reduce_res_291234 =
                                            redout_294841;
                                        defunc_2_reduce_res_291235 =
                                            redout_294842;
                                        ((double *) mem_298914.mem)[i_294862 *
                                                                    ctx_val_297168 +
                                                                    i_294855 *
                                                                    s_n_m_289895 +
                                                                    i_294848] =
                                            defunc_2_reduce_res_291234;
                                        ((double *) mem_298919.mem)[i_294862 *
                                                                    ctx_val_297168 +
                                                                    i_294855 *
                                                                    s_n_m_289895 +
                                                                    i_294848] =
                                            defunc_2_reduce_res_291235;
                                    }
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_299202, &mem_298914,
                                             "mem_298914") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_299191, &mem_298919,
                                             "mem_298919") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_298919,
                                               "mem_298919") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_298914,
                                               "mem_298914") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_299225, &ext_mem_299202,
                                         "ext_mem_299202") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_299214, &ext_mem_299191,
                                         "ext_mem_299191") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_299191,
                                           "ext_mem_299191") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_299202,
                                           "ext_mem_299202") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_299902, &ext_mem_299225,
                                     "ext_mem_299225") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_299891, &ext_mem_299214,
                                     "ext_mem_299214") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299214,
                                       "ext_mem_299214") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299225,
                                       "ext_mem_299225") != 0)
                        return 1;
                } else {
                    bool match_lit_291264 = (int64_t) 0 == d_s_289751;
                    struct memblock ext_mem_299880;
                    
                    ext_mem_299880.references = NULL;
                    
                    struct memblock ext_mem_299869;
                    
                    ext_mem_299869.references = NULL;
                    if (match_lit_291264) {
                        struct memblock mem_299240;
                        
                        mem_299240.references = NULL;
                        if (memblock_alloc(ctx, &mem_299240, bytes_297138,
                                           "mem_299240")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_304578 = 0; i_304578 <
                             partition_sizze_289836; i_304578++) {
                            for (int64_t i_304579 = 0; i_304579 < n_p_289747;
                                 i_304579++) {
                                for (int64_t i_304580 = 0; i_304580 <
                                     s_n_m_289895; i_304580++) {
                                    ((double *) mem_299240.mem)[i_304578 *
                                                                (s_n_m_289895 *
                                                                 n_p_289747) +
                                                                i_304579 *
                                                                s_n_m_289895 +
                                                                i_304580] = 0.0;
                                }
                            }
                        }
                        
                        struct memblock mem_299245;
                        
                        mem_299245.references = NULL;
                        if (memblock_alloc(ctx, &mem_299245, bytes_297138,
                                           "mem_299245")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_294879 = 0; i_294879 <
                             partition_sizze_289836; i_294879++) {
                            for (int64_t i_294875 = 0; i_294875 < n_p_289747;
                                 i_294875++) {
                                int64_t x_291280;
                                
                                x_291280 = ((int64_t *) mem_296978)[i_294879 *
                                                                    n_p_289747 +
                                                                    i_294875];
                                for (int64_t i_294871 = 0; i_294871 <
                                     s_n_m_289895; i_294871++) {
                                    int64_t x_291285;
                                    
                                    x_291285 =
                                        ((int64_t *) mem_297139)[i_294879 *
                                                                 ctx_val_297168 +
                                                                 i_294875 *
                                                                 s_n_m_289895 +
                                                                 i_294871];
                                    
                                    double x_291286;
                                    
                                    x_291286 =
                                        ((double *) mem_297144)[i_294879 *
                                                                ctx_val_297168 +
                                                                i_294875 *
                                                                s_n_m_289895 +
                                                                i_294871];
                                    
                                    bool cond_291287 = i_294871 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_291288;
                                    
                                    if (cond_291287) {
                                        defunc_0_m_fun_res_291288 = (int64_t) 0;
                                    } else {
                                        int64_t y_291289 = sub64(s_n_m_289895,
                                                                 (int64_t) 1);
                                        bool cond_291290 = i_294871 == y_291289;
                                        int64_t defunc_0_m_fun_res_f_res_291291;
                                        
                                        if (cond_291290) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_291292
                                            = sub64(pad_css_len_289891,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_291291 =
                                                defunc_0_m_fun_res_f_res_t_res_291292;
                                        } else {
                                            int64_t x_291293 = sub64(i_294871,
                                                                     (int64_t) 1);
                                            int64_t x_291294 =
                                                    mul64(jump_s_289754,
                                                          x_291293);
                                            int64_t min_arg_291295 =
                                                    add64((int64_t) 1,
                                                          x_291294);
                                            int64_t min_res_291296 =
                                                    smin64(defunc_0_f_res_289890,
                                                           min_arg_291295);
                                            
                                            defunc_0_m_fun_res_f_res_291291 =
                                                min_res_291296;
                                        }
                                        defunc_0_m_fun_res_291288 =
                                            defunc_0_m_fun_res_f_res_291291;
                                    }
                                    
                                    double defunc_2_reduce_res_291297;
                                    double redout_294865 = 0.0;
                                    
                                    for (int64_t i_294866 = 0; i_294866 <
                                         q_s_289748; i_294866++) {
                                        bool cond_291302 = sle64(x_291280,
                                                                 i_294866);
                                        int64_t defunc_0_f_res_291303;
                                        
                                        if (cond_291302) {
                                            defunc_0_f_res_291303 = (int64_t) 0;
                                        } else {
                                            int64_t i_291304 = add64(x_291285,
                                                                     i_294866);
                                            int64_t defunc_0_add_arg_291305;
                                            
                                            defunc_0_add_arg_291305 =
                                                ((int64_t *) mem_296974)[i_294879 *
                                                                         ctx_val_296884 +
                                                                         i_294875 *
                                                                         defunc_0_f_res_289890 +
                                                                         i_291304];
                                            
                                            int64_t defunc_1_add_res_291306 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_291305);
                                            
                                            defunc_0_f_res_291303 =
                                                defunc_1_add_res_291306;
                                        }
                                        
                                        double defunc_0_f_res_291307;
                                        
                                        if (cond_291302) {
                                            defunc_0_f_res_291307 = 0.0;
                                        } else {
                                            int64_t i_291308 = add64(x_291285,
                                                                     i_294866);
                                            double defunc_0_add_arg_291309;
                                            
                                            defunc_0_add_arg_291309 =
                                                ((double *) mem_297684)[i_294879 *
                                                                        ctx_val_296884 +
                                                                        i_294875 *
                                                                        defunc_0_f_res_289890 +
                                                                        i_291308];
                                            defunc_0_f_res_291307 =
                                                defunc_0_add_arg_291309;
                                        }
                                        
                                        int64_t binop_p_291310 =
                                                sub64(defunc_0_f_res_291303,
                                                      defunc_0_m_fun_res_291288);
                                        double defunc_0_f_res_291311 =
                                               sitofp_i64_f64(binop_p_291310);
                                        double abs_res_291312 =
                                               fabs(defunc_0_f_res_291311);
                                        double tmp1_291313 = abs_res_291312 /
                                               x_291286;
                                        double x_291314 = tmp1_291313 *
                                               tmp1_291313;
                                        double y_291315 = tmp1_291313 *
                                               x_291314;
                                        double tmp2_291316 = 1.0 - y_291315;
                                        double x_291317 = tmp2_291316 *
                                               tmp2_291316;
                                        double tmp3_291318 = tmp2_291316 *
                                               x_291317;
                                        double w_j_291319 =
                                               defunc_0_f_res_291307 *
                                               tmp3_291318;
                                        double defunc_1_op_res_291300 =
                                               w_j_291319 + redout_294865;
                                        double redout_tmp_304584 =
                                               defunc_1_op_res_291300;
                                        
                                        redout_294865 = redout_tmp_304584;
                                    }
                                    defunc_2_reduce_res_291297 = redout_294865;
                                    
                                    double a_291320 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_291297;
                                    double a0_291321 = 1.0 / a_291320;
                                    int64_t defunc_0_m_fun_res_291322;
                                    
                                    if (cond_291287) {
                                        defunc_0_m_fun_res_291322 = (int64_t) 0;
                                    } else {
                                        int64_t y_291323 = sub64(s_n_m_289895,
                                                                 (int64_t) 1);
                                        bool cond_291324 = i_294871 == y_291323;
                                        int64_t defunc_0_m_fun_res_f_res_291325;
                                        
                                        if (cond_291324) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_291326
                                            = sub64(pad_css_len_289891,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_291325 =
                                                defunc_0_m_fun_res_f_res_t_res_291326;
                                        } else {
                                            int64_t x_291327 = sub64(i_294871,
                                                                     (int64_t) 1);
                                            int64_t x_291328 =
                                                    mul64(jump_s_289754,
                                                          x_291327);
                                            int64_t min_arg_291329 =
                                                    add64((int64_t) 1,
                                                          x_291328);
                                            int64_t min_res_291330 =
                                                    smin64(defunc_0_f_res_289890,
                                                           min_arg_291329);
                                            
                                            defunc_0_m_fun_res_f_res_291325 =
                                                min_res_291330;
                                        }
                                        defunc_0_m_fun_res_291322 =
                                            defunc_0_m_fun_res_f_res_291325;
                                    }
                                    
                                    double defunc_2_reduce_res_291331;
                                    double redout_294867 = 0.0;
                                    
                                    for (int64_t i_294868 = 0; i_294868 <
                                         q_s_289748; i_294868++) {
                                        bool cond_291336 = sle64(x_291280,
                                                                 i_294868);
                                        int64_t defunc_0_f_res_291337;
                                        
                                        if (cond_291336) {
                                            defunc_0_f_res_291337 = (int64_t) 0;
                                        } else {
                                            int64_t i_291338 = add64(x_291285,
                                                                     i_294868);
                                            int64_t defunc_0_add_arg_291339;
                                            
                                            defunc_0_add_arg_291339 =
                                                ((int64_t *) mem_296974)[i_294879 *
                                                                         ctx_val_296884 +
                                                                         i_294875 *
                                                                         defunc_0_f_res_289890 +
                                                                         i_291338];
                                            
                                            int64_t defunc_1_add_res_291340 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_291339);
                                            
                                            defunc_0_f_res_291337 =
                                                defunc_1_add_res_291340;
                                        }
                                        
                                        double defunc_0_f_res_291341;
                                        
                                        if (cond_291336) {
                                            defunc_0_f_res_291341 = 0.0;
                                        } else {
                                            int64_t i_291342 = add64(x_291285,
                                                                     i_294868);
                                            double defunc_0_add_arg_291343;
                                            
                                            defunc_0_add_arg_291343 =
                                                ((double *) mem_297684)[i_294879 *
                                                                        ctx_val_296884 +
                                                                        i_294875 *
                                                                        defunc_0_f_res_289890 +
                                                                        i_291342];
                                            defunc_0_f_res_291341 =
                                                defunc_0_add_arg_291343;
                                        }
                                        
                                        int64_t binop_p_291344 =
                                                sub64(defunc_0_f_res_291337,
                                                      defunc_0_m_fun_res_291322);
                                        double defunc_0_f_res_291345 =
                                               sitofp_i64_f64(binop_p_291344);
                                        double abs_res_291346 =
                                               fabs(defunc_0_f_res_291345);
                                        double tmp1_291347 = abs_res_291346 /
                                               x_291286;
                                        double x_291348 = tmp1_291347 *
                                               tmp1_291347;
                                        double y_291349 = tmp1_291347 *
                                               x_291348;
                                        double tmp2_291350 = 1.0 - y_291349;
                                        double x_291351 = tmp2_291350 *
                                               tmp2_291350;
                                        double tmp3_291352 = tmp2_291350 *
                                               x_291351;
                                        double tmp4_291353 =
                                               defunc_0_f_res_291341 *
                                               tmp3_291352;
                                        double defunc_0_f_res_291354;
                                        
                                        if (cond_291336) {
                                            defunc_0_f_res_291354 = 0.0;
                                        } else {
                                            int64_t i_291355 = add64(x_291285,
                                                                     i_294868);
                                            double defunc_0_add_arg_291356;
                                            
                                            defunc_0_add_arg_291356 =
                                                ((double *) mem_297679)[i_294879 *
                                                                        ctx_val_296884 +
                                                                        i_294875 *
                                                                        defunc_0_f_res_289890 +
                                                                        i_291355];
                                            defunc_0_f_res_291354 =
                                                defunc_0_add_arg_291356;
                                        }
                                        
                                        double x_291357 = a0_291321 *
                                               tmp4_291353;
                                        double defunc_9_fit_fun_res_291358 =
                                               defunc_0_f_res_291354 * x_291357;
                                        double defunc_1_op_res_291334 =
                                               defunc_9_fit_fun_res_291358 +
                                               redout_294867;
                                        double redout_tmp_304585 =
                                               defunc_1_op_res_291334;
                                        
                                        redout_294867 = redout_tmp_304585;
                                    }
                                    defunc_2_reduce_res_291331 = redout_294867;
                                    ((double *) mem_299245.mem)[i_294879 *
                                                                ctx_val_297168 +
                                                                i_294875 *
                                                                s_n_m_289895 +
                                                                i_294871] =
                                        defunc_2_reduce_res_291331;
                                }
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_299880, &mem_299245,
                                         "mem_299245") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_299869, &mem_299240,
                                         "mem_299240") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_299245, "mem_299245") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_299240, "mem_299240") != 0)
                            return 1;
                    } else {
                        bool match_lit_291361 = (int64_t) 1 == d_s_289751;
                        int64_t binop_y_299448 = (int64_t) 8 * q_s_289748;
                        int64_t bytes_299449 = smax64((int64_t) 0,
                                                      binop_y_299448);
                        int64_t binop_y_299684 = (int64_t) 8 * q_s_289748;
                        int64_t bytes_299685 = smax64((int64_t) 0,
                                                      binop_y_299684);
                        struct memblock ext_mem_299857;
                        
                        ext_mem_299857.references = NULL;
                        
                        struct memblock ext_mem_299846;
                        
                        ext_mem_299846.references = NULL;
                        if (match_lit_291361) {
                            struct memblock mem_299348;
                            
                            mem_299348.references = NULL;
                            if (memblock_alloc(ctx, &mem_299348, bytes_297138,
                                               "mem_299348")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_299353;
                            
                            mem_299353.references = NULL;
                            if (memblock_alloc(ctx, &mem_299353, bytes_297138,
                                               "mem_299353")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_299450_cached_sizze_304993 <
                                (size_t) bytes_299449) {
                                mem_299450 = realloc(mem_299450, bytes_299449);
                                mem_299450_cached_sizze_304993 = bytes_299449;
                            }
                            if (mem_299453_cached_sizze_304994 <
                                (size_t) bytes_299449) {
                                mem_299453 = realloc(mem_299453, bytes_299449);
                                mem_299453_cached_sizze_304994 = bytes_299449;
                            }
                            for (int64_t i_294914 = 0; i_294914 <
                                 partition_sizze_289836; i_294914++) {
                                for (int64_t i_294907 = 0; i_294907 <
                                     n_p_289747; i_294907++) {
                                    int64_t x_291378;
                                    
                                    x_291378 =
                                        ((int64_t *) mem_296978)[i_294914 *
                                                                 n_p_289747 +
                                                                 i_294907];
                                    for (int64_t i_294900 = 0; i_294900 <
                                         s_n_m_289895; i_294900++) {
                                        int64_t x_291384;
                                        
                                        x_291384 =
                                            ((int64_t *) mem_297139)[i_294914 *
                                                                     ctx_val_297168 +
                                                                     i_294907 *
                                                                     s_n_m_289895 +
                                                                     i_294900];
                                        
                                        double x_291385;
                                        
                                        x_291385 =
                                            ((double *) mem_297144)[i_294914 *
                                                                    ctx_val_297168 +
                                                                    i_294907 *
                                                                    s_n_m_289895 +
                                                                    i_294900];
                                        
                                        bool cond_291386 = i_294900 ==
                                             (int64_t) 0;
                                        int64_t defunc_0_m_fun_res_291387;
                                        
                                        if (cond_291386) {
                                            defunc_0_m_fun_res_291387 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_291388 =
                                                    sub64(s_n_m_289895,
                                                          (int64_t) 1);
                                            bool cond_291389 = i_294900 ==
                                                 y_291388;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_291390;
                                            
                                            if (cond_291389) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_291391
                                                = sub64(pad_css_len_289891,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_291390 =
                                                    defunc_0_m_fun_res_f_res_t_res_291391;
                                            } else {
                                                int64_t x_291392 =
                                                        sub64(i_294900,
                                                              (int64_t) 1);
                                                int64_t x_291393 =
                                                        mul64(jump_s_289754,
                                                              x_291392);
                                                int64_t min_arg_291394 =
                                                        add64((int64_t) 1,
                                                              x_291393);
                                                int64_t min_res_291395 =
                                                        smin64(defunc_0_f_res_289890,
                                                               min_arg_291394);
                                                
                                                defunc_0_m_fun_res_f_res_291390 =
                                                    min_res_291395;
                                            }
                                            defunc_0_m_fun_res_291387 =
                                                defunc_0_m_fun_res_f_res_291390;
                                        }
                                        
                                        double defunc_2_reduce_res_291396;
                                        double redout_294883 = 0.0;
                                        
                                        for (int64_t i_294886 = 0; i_294886 <
                                             q_s_289748; i_294886++) {
                                            bool cond_291403 = sle64(x_291378,
                                                                     i_294886);
                                            int64_t defunc_0_f_res_291404;
                                            
                                            if (cond_291403) {
                                                defunc_0_f_res_291404 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_291405 =
                                                        add64(x_291384,
                                                              i_294886);
                                                int64_t defunc_0_add_arg_291406;
                                                
                                                defunc_0_add_arg_291406 =
                                                    ((int64_t *) mem_296974)[i_294914 *
                                                                             ctx_val_296884 +
                                                                             i_294907 *
                                                                             defunc_0_f_res_289890 +
                                                                             i_291405];
                                                
                                                int64_t defunc_1_add_res_291407
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_291406);
                                                
                                                defunc_0_f_res_291404 =
                                                    defunc_1_add_res_291407;
                                            }
                                            
                                            double defunc_0_f_res_291408;
                                            
                                            if (cond_291403) {
                                                defunc_0_f_res_291408 = 0.0;
                                            } else {
                                                int64_t i_291409 =
                                                        add64(x_291384,
                                                              i_294886);
                                                double defunc_0_add_arg_291410;
                                                
                                                defunc_0_add_arg_291410 =
                                                    ((double *) mem_297684)[i_294914 *
                                                                            ctx_val_296884 +
                                                                            i_294907 *
                                                                            defunc_0_f_res_289890 +
                                                                            i_291409];
                                                defunc_0_f_res_291408 =
                                                    defunc_0_add_arg_291410;
                                            }
                                            
                                            int64_t binop_p_291411 =
                                                    sub64(defunc_0_f_res_291404,
                                                          defunc_0_m_fun_res_291387);
                                            double defunc_0_f_res_291412 =
                                                   sitofp_i64_f64(binop_p_291411);
                                            double abs_res_291413 =
                                                   fabs(defunc_0_f_res_291412);
                                            double tmp1_291414 =
                                                   abs_res_291413 / x_291385;
                                            double x_291415 = tmp1_291414 *
                                                   tmp1_291414;
                                            double y_291416 = tmp1_291414 *
                                                   x_291415;
                                            double tmp2_291417 = 1.0 - y_291416;
                                            double x_291418 = tmp2_291417 *
                                                   tmp2_291417;
                                            double tmp3_291419 = tmp2_291417 *
                                                   x_291418;
                                            double w_j_291420 =
                                                   defunc_0_f_res_291408 *
                                                   tmp3_291419;
                                            double xw_j_291421 =
                                                   defunc_0_f_res_291412 *
                                                   w_j_291420;
                                            double x2w_j_291422 =
                                                   defunc_0_f_res_291412 *
                                                   xw_j_291421;
                                            double defunc_1_op_res_291401 =
                                                   w_j_291420 + redout_294883;
                                            
                                            ((double *) mem_299450)[i_294886] =
                                                xw_j_291421;
                                            ((double *) mem_299453)[i_294886] =
                                                x2w_j_291422;
                                            
                                            double redout_tmp_304592 =
                                                   defunc_1_op_res_291401;
                                            
                                            redout_294883 = redout_tmp_304592;
                                        }
                                        defunc_2_reduce_res_291396 =
                                            redout_294883;
                                        
                                        double a_291423 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291396;
                                        double defunc_2_reduce_res_291424;
                                        double redout_294889 = 0.0;
                                        
                                        for (int64_t i_294890 = 0; i_294890 <
                                             q_s_289748; i_294890++) {
                                            double x_291428;
                                            
                                            x_291428 =
                                                ((double *) mem_299450)[i_294890];
                                            
                                            double defunc_1_op_res_291427 =
                                                   x_291428 + redout_294889;
                                            double redout_tmp_304595 =
                                                   defunc_1_op_res_291427;
                                            
                                            redout_294889 = redout_tmp_304595;
                                        }
                                        defunc_2_reduce_res_291424 =
                                            redout_294889;
                                        
                                        double b_291429 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291424;
                                        double defunc_2_reduce_res_291430;
                                        double redout_294891 = 0.0;
                                        
                                        for (int64_t i_294892 = 0; i_294892 <
                                             q_s_289748; i_294892++) {
                                            double x_291434;
                                            
                                            x_291434 =
                                                ((double *) mem_299453)[i_294892];
                                            
                                            double defunc_1_op_res_291433 =
                                                   x_291434 + redout_294891;
                                            double redout_tmp_304596 =
                                                   defunc_1_op_res_291433;
                                            
                                            redout_294891 = redout_tmp_304596;
                                        }
                                        defunc_2_reduce_res_291430 =
                                            redout_294891;
                                        
                                        double c_291435 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291430;
                                        double x_291436 = a_291423 * c_291435;
                                        double y_291437 = b_291429 * b_291429;
                                        double y_291438 = x_291436 - y_291437;
                                        double det1_291439 = 1.0 / y_291438;
                                        double a11_291440 = c_291435 *
                                               det1_291439;
                                        double x_291441 = 0.0 - b_291429;
                                        double b11_291442 = det1_291439 *
                                               x_291441;
                                        double c11_291443 = a_291423 *
                                               det1_291439;
                                        int64_t defunc_0_m_fun_res_291444;
                                        
                                        if (cond_291386) {
                                            defunc_0_m_fun_res_291444 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_291445 =
                                                    sub64(s_n_m_289895,
                                                          (int64_t) 1);
                                            bool cond_291446 = i_294900 ==
                                                 y_291445;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_291447;
                                            
                                            if (cond_291446) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_291448
                                                = sub64(pad_css_len_289891,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_291447 =
                                                    defunc_0_m_fun_res_f_res_t_res_291448;
                                            } else {
                                                int64_t x_291449 =
                                                        sub64(i_294900,
                                                              (int64_t) 1);
                                                int64_t x_291450 =
                                                        mul64(jump_s_289754,
                                                              x_291449);
                                                int64_t min_arg_291451 =
                                                        add64((int64_t) 1,
                                                              x_291450);
                                                int64_t min_res_291452 =
                                                        smin64(defunc_0_f_res_289890,
                                                               min_arg_291451);
                                                
                                                defunc_0_m_fun_res_f_res_291447 =
                                                    min_res_291452;
                                            }
                                            defunc_0_m_fun_res_291444 =
                                                defunc_0_m_fun_res_f_res_291447;
                                        }
                                        
                                        double defunc_2_reduce_res_291453;
                                        double defunc_2_reduce_res_291454;
                                        double redout_294893;
                                        double redout_294894;
                                        
                                        redout_294893 = 0.0;
                                        redout_294894 = 0.0;
                                        for (int64_t i_294895 = 0; i_294895 <
                                             q_s_289748; i_294895++) {
                                            bool cond_291462 = sle64(x_291378,
                                                                     i_294895);
                                            int64_t defunc_0_f_res_291463;
                                            
                                            if (cond_291462) {
                                                defunc_0_f_res_291463 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_291464 =
                                                        add64(x_291384,
                                                              i_294895);
                                                int64_t defunc_0_add_arg_291465;
                                                
                                                defunc_0_add_arg_291465 =
                                                    ((int64_t *) mem_296974)[i_294914 *
                                                                             ctx_val_296884 +
                                                                             i_294907 *
                                                                             defunc_0_f_res_289890 +
                                                                             i_291464];
                                                
                                                int64_t defunc_1_add_res_291466
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_291465);
                                                
                                                defunc_0_f_res_291463 =
                                                    defunc_1_add_res_291466;
                                            }
                                            
                                            double defunc_0_f_res_291467;
                                            
                                            if (cond_291462) {
                                                defunc_0_f_res_291467 = 0.0;
                                            } else {
                                                int64_t i_291468 =
                                                        add64(x_291384,
                                                              i_294895);
                                                double defunc_0_add_arg_291469;
                                                
                                                defunc_0_add_arg_291469 =
                                                    ((double *) mem_297684)[i_294914 *
                                                                            ctx_val_296884 +
                                                                            i_294907 *
                                                                            defunc_0_f_res_289890 +
                                                                            i_291468];
                                                defunc_0_f_res_291467 =
                                                    defunc_0_add_arg_291469;
                                            }
                                            
                                            int64_t binop_p_291470 =
                                                    sub64(defunc_0_f_res_291463,
                                                          defunc_0_m_fun_res_291444);
                                            double defunc_0_f_res_291471 =
                                                   sitofp_i64_f64(binop_p_291470);
                                            double abs_res_291472 =
                                                   fabs(defunc_0_f_res_291471);
                                            double tmp1_291473 =
                                                   abs_res_291472 / x_291385;
                                            double x_291474 = tmp1_291473 *
                                                   tmp1_291473;
                                            double y_291475 = tmp1_291473 *
                                                   x_291474;
                                            double tmp2_291476 = 1.0 - y_291475;
                                            double x_291477 = tmp2_291476 *
                                                   tmp2_291476;
                                            double tmp3_291478 = tmp2_291476 *
                                                   x_291477;
                                            double tmp4_291479 =
                                                   defunc_0_f_res_291467 *
                                                   tmp3_291478;
                                            double defunc_1_f_res_291480 =
                                                   defunc_0_f_res_291471 *
                                                   tmp4_291479;
                                            double defunc_0_f_res_291481;
                                            
                                            if (cond_291462) {
                                                defunc_0_f_res_291481 = 0.0;
                                            } else {
                                                int64_t i_291482 =
                                                        add64(x_291384,
                                                              i_294895);
                                                double defunc_0_add_arg_291483;
                                                
                                                defunc_0_add_arg_291483 =
                                                    ((double *) mem_297679)[i_294914 *
                                                                            ctx_val_296884 +
                                                                            i_294907 *
                                                                            defunc_0_f_res_289890 +
                                                                            i_291482];
                                                defunc_0_f_res_291481 =
                                                    defunc_0_add_arg_291483;
                                            }
                                            
                                            double x_291484 = a11_291440 *
                                                   tmp4_291479;
                                            double y_291485 = b11_291442 *
                                                   defunc_1_f_res_291480;
                                            double x_291486 = x_291484 +
                                                   y_291485;
                                            double defunc_9_fit_fun_res_291487 =
                                                   defunc_0_f_res_291481 *
                                                   x_291486;
                                            double x_291488 = b11_291442 *
                                                   tmp4_291479;
                                            double y_291489 = c11_291443 *
                                                   defunc_1_f_res_291480;
                                            double x_291490 = x_291488 +
                                                   y_291489;
                                            double defunc_9_slope_fun_res_291491
                                                   = defunc_0_f_res_291481 *
                                                   x_291490;
                                            double defunc_1_op_res_291457 =
                                                   defunc_9_fit_fun_res_291487 +
                                                   redout_294893;
                                            double defunc_1_op_res_291460 =
                                                   defunc_9_slope_fun_res_291491 +
                                                   redout_294894;
                                            double redout_tmp_304597 =
                                                   defunc_1_op_res_291457;
                                            double redout_tmp_304598 =
                                                   defunc_1_op_res_291460;
                                            
                                            redout_294893 = redout_tmp_304597;
                                            redout_294894 = redout_tmp_304598;
                                        }
                                        defunc_2_reduce_res_291453 =
                                            redout_294893;
                                        defunc_2_reduce_res_291454 =
                                            redout_294894;
                                        ((double *) mem_299348.mem)[i_294914 *
                                                                    ctx_val_297168 +
                                                                    i_294907 *
                                                                    s_n_m_289895 +
                                                                    i_294900] =
                                            defunc_2_reduce_res_291453;
                                        ((double *) mem_299353.mem)[i_294914 *
                                                                    ctx_val_297168 +
                                                                    i_294907 *
                                                                    s_n_m_289895 +
                                                                    i_294900] =
                                            defunc_2_reduce_res_291454;
                                    }
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_299857, &mem_299348,
                                             "mem_299348") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_299846, &mem_299353,
                                             "mem_299353") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_299353,
                                               "mem_299353") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_299348,
                                               "mem_299348") != 0)
                                return 1;
                        } else {
                            struct memblock mem_299584;
                            
                            mem_299584.references = NULL;
                            if (memblock_alloc(ctx, &mem_299584, bytes_297138,
                                               "mem_299584")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_299589;
                            
                            mem_299589.references = NULL;
                            if (memblock_alloc(ctx, &mem_299589, bytes_297138,
                                               "mem_299589")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_299686_cached_sizze_304995 <
                                (size_t) bytes_299685) {
                                mem_299686 = realloc(mem_299686, bytes_299685);
                                mem_299686_cached_sizze_304995 = bytes_299685;
                            }
                            if (mem_299689_cached_sizze_304996 <
                                (size_t) bytes_299685) {
                                mem_299689 = realloc(mem_299689, bytes_299685);
                                mem_299689_cached_sizze_304996 = bytes_299685;
                            }
                            if (mem_299692_cached_sizze_304997 <
                                (size_t) bytes_299685) {
                                mem_299692 = realloc(mem_299692, bytes_299685);
                                mem_299692_cached_sizze_304997 = bytes_299685;
                            }
                            if (mem_299695_cached_sizze_304998 <
                                (size_t) bytes_299685) {
                                mem_299695 = realloc(mem_299695, bytes_299685);
                                mem_299695_cached_sizze_304998 = bytes_299685;
                            }
                            for (int64_t i_294960 = 0; i_294960 <
                                 partition_sizze_289836; i_294960++) {
                                for (int64_t i_294953 = 0; i_294953 <
                                     n_p_289747; i_294953++) {
                                    int64_t x_291508;
                                    
                                    x_291508 =
                                        ((int64_t *) mem_296978)[i_294960 *
                                                                 n_p_289747 +
                                                                 i_294953];
                                    for (int64_t i_294946 = 0; i_294946 <
                                         s_n_m_289895; i_294946++) {
                                        int64_t x_291514;
                                        
                                        x_291514 =
                                            ((int64_t *) mem_297139)[i_294960 *
                                                                     ctx_val_297168 +
                                                                     i_294953 *
                                                                     s_n_m_289895 +
                                                                     i_294946];
                                        
                                        double x_291515;
                                        
                                        x_291515 =
                                            ((double *) mem_297144)[i_294960 *
                                                                    ctx_val_297168 +
                                                                    i_294953 *
                                                                    s_n_m_289895 +
                                                                    i_294946];
                                        
                                        bool cond_291516 = i_294946 ==
                                             (int64_t) 0;
                                        int64_t defunc_0_m_fun_res_291517;
                                        
                                        if (cond_291516) {
                                            defunc_0_m_fun_res_291517 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_291518 =
                                                    sub64(s_n_m_289895,
                                                          (int64_t) 1);
                                            bool cond_291519 = i_294946 ==
                                                 y_291518;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_291520;
                                            
                                            if (cond_291519) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_291521
                                                = sub64(pad_css_len_289891,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_291520 =
                                                    defunc_0_m_fun_res_f_res_t_res_291521;
                                            } else {
                                                int64_t x_291522 =
                                                        sub64(i_294946,
                                                              (int64_t) 1);
                                                int64_t x_291523 =
                                                        mul64(jump_s_289754,
                                                              x_291522);
                                                int64_t min_arg_291524 =
                                                        add64((int64_t) 1,
                                                              x_291523);
                                                int64_t min_res_291525 =
                                                        smin64(defunc_0_f_res_289890,
                                                               min_arg_291524);
                                                
                                                defunc_0_m_fun_res_f_res_291520 =
                                                    min_res_291525;
                                            }
                                            defunc_0_m_fun_res_291517 =
                                                defunc_0_m_fun_res_f_res_291520;
                                        }
                                        
                                        double defunc_2_reduce_res_291526;
                                        double redout_294921 = 0.0;
                                        
                                        for (int64_t i_294926 = 0; i_294926 <
                                             q_s_289748; i_294926++) {
                                            bool cond_291535 = sle64(x_291508,
                                                                     i_294926);
                                            int64_t defunc_0_f_res_291536;
                                            
                                            if (cond_291535) {
                                                defunc_0_f_res_291536 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_291537 =
                                                        add64(x_291514,
                                                              i_294926);
                                                int64_t defunc_0_add_arg_291538;
                                                
                                                defunc_0_add_arg_291538 =
                                                    ((int64_t *) mem_296974)[i_294960 *
                                                                             ctx_val_296884 +
                                                                             i_294953 *
                                                                             defunc_0_f_res_289890 +
                                                                             i_291537];
                                                
                                                int64_t defunc_1_add_res_291539
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_291538);
                                                
                                                defunc_0_f_res_291536 =
                                                    defunc_1_add_res_291539;
                                            }
                                            
                                            double defunc_0_f_res_291540;
                                            
                                            if (cond_291535) {
                                                defunc_0_f_res_291540 = 0.0;
                                            } else {
                                                int64_t i_291541 =
                                                        add64(x_291514,
                                                              i_294926);
                                                double defunc_0_add_arg_291542;
                                                
                                                defunc_0_add_arg_291542 =
                                                    ((double *) mem_297684)[i_294960 *
                                                                            ctx_val_296884 +
                                                                            i_294953 *
                                                                            defunc_0_f_res_289890 +
                                                                            i_291541];
                                                defunc_0_f_res_291540 =
                                                    defunc_0_add_arg_291542;
                                            }
                                            
                                            int64_t binop_p_291543 =
                                                    sub64(defunc_0_f_res_291536,
                                                          defunc_0_m_fun_res_291517);
                                            double defunc_0_f_res_291544 =
                                                   sitofp_i64_f64(binop_p_291543);
                                            double abs_res_291545 =
                                                   fabs(defunc_0_f_res_291544);
                                            double tmp1_291546 =
                                                   abs_res_291545 / x_291515;
                                            double x_291547 = tmp1_291546 *
                                                   tmp1_291546;
                                            double y_291548 = tmp1_291546 *
                                                   x_291547;
                                            double tmp2_291549 = 1.0 - y_291548;
                                            double x_291550 = tmp2_291549 *
                                                   tmp2_291549;
                                            double tmp3_291551 = tmp2_291549 *
                                                   x_291550;
                                            double w_j_291552 =
                                                   defunc_0_f_res_291540 *
                                                   tmp3_291551;
                                            double xw_j_291553 =
                                                   defunc_0_f_res_291544 *
                                                   w_j_291552;
                                            double x2w_j_291554 =
                                                   defunc_0_f_res_291544 *
                                                   xw_j_291553;
                                            double x3w_j_291555 =
                                                   defunc_0_f_res_291544 *
                                                   x2w_j_291554;
                                            double x4w_j_291556 =
                                                   defunc_0_f_res_291544 *
                                                   x3w_j_291555;
                                            double defunc_1_op_res_291533 =
                                                   w_j_291552 + redout_294921;
                                            
                                            ((double *) mem_299686)[i_294926] =
                                                xw_j_291553;
                                            ((double *) mem_299689)[i_294926] =
                                                x2w_j_291554;
                                            ((double *) mem_299692)[i_294926] =
                                                x3w_j_291555;
                                            ((double *) mem_299695)[i_294926] =
                                                x4w_j_291556;
                                            
                                            double redout_tmp_304605 =
                                                   defunc_1_op_res_291533;
                                            
                                            redout_294921 = redout_tmp_304605;
                                        }
                                        defunc_2_reduce_res_291526 =
                                            redout_294921;
                                        
                                        double a_291557 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291526;
                                        double defunc_2_reduce_res_291558;
                                        double redout_294931 = 0.0;
                                        
                                        for (int64_t i_294932 = 0; i_294932 <
                                             q_s_289748; i_294932++) {
                                            double x_291562;
                                            
                                            x_291562 =
                                                ((double *) mem_299686)[i_294932];
                                            
                                            double defunc_1_op_res_291561 =
                                                   x_291562 + redout_294931;
                                            double redout_tmp_304610 =
                                                   defunc_1_op_res_291561;
                                            
                                            redout_294931 = redout_tmp_304610;
                                        }
                                        defunc_2_reduce_res_291558 =
                                            redout_294931;
                                        
                                        double b_291563 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291558;
                                        double defunc_2_reduce_res_291564;
                                        double redout_294933 = 0.0;
                                        
                                        for (int64_t i_294934 = 0; i_294934 <
                                             q_s_289748; i_294934++) {
                                            double x_291568;
                                            
                                            x_291568 =
                                                ((double *) mem_299689)[i_294934];
                                            
                                            double defunc_1_op_res_291567 =
                                                   x_291568 + redout_294933;
                                            double redout_tmp_304611 =
                                                   defunc_1_op_res_291567;
                                            
                                            redout_294933 = redout_tmp_304611;
                                        }
                                        defunc_2_reduce_res_291564 =
                                            redout_294933;
                                        
                                        double c_291569 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291564;
                                        double defunc_2_reduce_res_291570;
                                        double redout_294935 = 0.0;
                                        
                                        for (int64_t i_294936 = 0; i_294936 <
                                             q_s_289748; i_294936++) {
                                            double x_291574;
                                            
                                            x_291574 =
                                                ((double *) mem_299692)[i_294936];
                                            
                                            double defunc_1_op_res_291573 =
                                                   x_291574 + redout_294935;
                                            double redout_tmp_304612 =
                                                   defunc_1_op_res_291573;
                                            
                                            redout_294935 = redout_tmp_304612;
                                        }
                                        defunc_2_reduce_res_291570 =
                                            redout_294935;
                                        
                                        double d_291575 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291570;
                                        double defunc_2_reduce_res_291576;
                                        double redout_294937 = 0.0;
                                        
                                        for (int64_t i_294938 = 0; i_294938 <
                                             q_s_289748; i_294938++) {
                                            double x_291580;
                                            
                                            x_291580 =
                                                ((double *) mem_299695)[i_294938];
                                            
                                            double defunc_1_op_res_291579 =
                                                   x_291580 + redout_294937;
                                            double redout_tmp_304613 =
                                                   defunc_1_op_res_291579;
                                            
                                            redout_294937 = redout_tmp_304613;
                                        }
                                        defunc_2_reduce_res_291576 =
                                            redout_294937;
                                        
                                        double e_291581 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_291576;
                                        double x_291582 = c_291569 * e_291581;
                                        double y_291583 = d_291575 * d_291575;
                                        double a12_291584 = x_291582 - y_291583;
                                        double x_291585 = c_291569 * d_291575;
                                        double y_291586 = b_291563 * e_291581;
                                        double b12_291587 = x_291585 - y_291586;
                                        double x_291588 = b_291563 * d_291575;
                                        double y_291589 = c_291569 * c_291569;
                                        double c12_291590 = x_291588 - y_291589;
                                        double x_291591 = a_291557 * e_291581;
                                        double b2_291592 = x_291591 - y_291589;
                                        double x_291593 = b_291563 * c_291569;
                                        double y_291594 = a_291557 * d_291575;
                                        double c2_291595 = x_291593 - y_291594;
                                        double x_291596 = a_291557 * a12_291584;
                                        double y_291597 = b_291563 * b12_291587;
                                        double x_291598 = x_291596 + y_291597;
                                        double y_291599 = c_291569 * c12_291590;
                                        double y_291600 = x_291598 + y_291599;
                                        double det_291601 = 1.0 / y_291600;
                                        double a12_291602 = a12_291584 *
                                               det_291601;
                                        double b12_291603 = b12_291587 *
                                               det_291601;
                                        double c12_291604 = c12_291590 *
                                               det_291601;
                                        double b2_291605 = b2_291592 *
                                               det_291601;
                                        double c2_291606 = c2_291595 *
                                               det_291601;
                                        int64_t defunc_0_m_fun_res_291607;
                                        
                                        if (cond_291516) {
                                            defunc_0_m_fun_res_291607 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_291608 =
                                                    sub64(s_n_m_289895,
                                                          (int64_t) 1);
                                            bool cond_291609 = i_294946 ==
                                                 y_291608;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_291610;
                                            
                                            if (cond_291609) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_291611
                                                = sub64(pad_css_len_289891,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_291610 =
                                                    defunc_0_m_fun_res_f_res_t_res_291611;
                                            } else {
                                                int64_t x_291612 =
                                                        sub64(i_294946,
                                                              (int64_t) 1);
                                                int64_t x_291613 =
                                                        mul64(jump_s_289754,
                                                              x_291612);
                                                int64_t min_arg_291614 =
                                                        add64((int64_t) 1,
                                                              x_291613);
                                                int64_t min_res_291615 =
                                                        smin64(defunc_0_f_res_289890,
                                                               min_arg_291614);
                                                
                                                defunc_0_m_fun_res_f_res_291610 =
                                                    min_res_291615;
                                            }
                                            defunc_0_m_fun_res_291607 =
                                                defunc_0_m_fun_res_f_res_291610;
                                        }
                                        
                                        double defunc_2_reduce_res_291616;
                                        double defunc_2_reduce_res_291617;
                                        double redout_294939;
                                        double redout_294940;
                                        
                                        redout_294939 = 0.0;
                                        redout_294940 = 0.0;
                                        for (int64_t i_294941 = 0; i_294941 <
                                             q_s_289748; i_294941++) {
                                            bool cond_291625 = sle64(x_291508,
                                                                     i_294941);
                                            int64_t defunc_0_f_res_291626;
                                            
                                            if (cond_291625) {
                                                defunc_0_f_res_291626 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_291627 =
                                                        add64(x_291514,
                                                              i_294941);
                                                int64_t defunc_0_add_arg_291628;
                                                
                                                defunc_0_add_arg_291628 =
                                                    ((int64_t *) mem_296974)[i_294960 *
                                                                             ctx_val_296884 +
                                                                             i_294953 *
                                                                             defunc_0_f_res_289890 +
                                                                             i_291627];
                                                
                                                int64_t defunc_1_add_res_291629
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_291628);
                                                
                                                defunc_0_f_res_291626 =
                                                    defunc_1_add_res_291629;
                                            }
                                            
                                            double defunc_0_f_res_291630;
                                            
                                            if (cond_291625) {
                                                defunc_0_f_res_291630 = 0.0;
                                            } else {
                                                int64_t i_291631 =
                                                        add64(x_291514,
                                                              i_294941);
                                                double defunc_0_add_arg_291632;
                                                
                                                defunc_0_add_arg_291632 =
                                                    ((double *) mem_297684)[i_294960 *
                                                                            ctx_val_296884 +
                                                                            i_294953 *
                                                                            defunc_0_f_res_289890 +
                                                                            i_291631];
                                                defunc_0_f_res_291630 =
                                                    defunc_0_add_arg_291632;
                                            }
                                            
                                            int64_t binop_p_291633 =
                                                    sub64(defunc_0_f_res_291626,
                                                          defunc_0_m_fun_res_291607);
                                            double defunc_0_f_res_291634 =
                                                   sitofp_i64_f64(binop_p_291633);
                                            double abs_res_291635 =
                                                   fabs(defunc_0_f_res_291634);
                                            double tmp1_291636 =
                                                   abs_res_291635 / x_291515;
                                            double x_291637 = tmp1_291636 *
                                                   tmp1_291636;
                                            double y_291638 = tmp1_291636 *
                                                   x_291637;
                                            double tmp2_291639 = 1.0 - y_291638;
                                            double x_291640 = tmp2_291639 *
                                                   tmp2_291639;
                                            double tmp3_291641 = tmp2_291639 *
                                                   x_291640;
                                            double tmp4_291642 =
                                                   defunc_0_f_res_291630 *
                                                   tmp3_291641;
                                            double defunc_1_f_res_291643 =
                                                   defunc_0_f_res_291634 *
                                                   tmp4_291642;
                                            double defunc_1_f_res_291644 =
                                                   defunc_0_f_res_291634 *
                                                   defunc_1_f_res_291643;
                                            double defunc_0_f_res_291645;
                                            
                                            if (cond_291625) {
                                                defunc_0_f_res_291645 = 0.0;
                                            } else {
                                                int64_t i_291646 =
                                                        add64(x_291514,
                                                              i_294941);
                                                double defunc_0_add_arg_291647;
                                                
                                                defunc_0_add_arg_291647 =
                                                    ((double *) mem_297679)[i_294960 *
                                                                            ctx_val_296884 +
                                                                            i_294953 *
                                                                            defunc_0_f_res_289890 +
                                                                            i_291646];
                                                defunc_0_f_res_291645 =
                                                    defunc_0_add_arg_291647;
                                            }
                                            
                                            double x_291648 = a12_291602 *
                                                   tmp4_291642;
                                            double y_291649 = b12_291603 *
                                                   defunc_1_f_res_291643;
                                            double x_291650 = x_291648 +
                                                   y_291649;
                                            double y_291651 = c12_291604 *
                                                   defunc_1_f_res_291644;
                                            double x_291652 = x_291650 +
                                                   y_291651;
                                            double defunc_9_fit_fun_res_291653 =
                                                   defunc_0_f_res_291645 *
                                                   x_291652;
                                            double x_291654 = b12_291603 *
                                                   tmp4_291642;
                                            double y_291655 = b2_291605 *
                                                   defunc_1_f_res_291643;
                                            double x_291656 = x_291654 +
                                                   y_291655;
                                            double y_291657 = c2_291606 *
                                                   defunc_1_f_res_291644;
                                            double x_291658 = x_291656 +
                                                   y_291657;
                                            double defunc_9_slope_fun_res_291659
                                                   = defunc_0_f_res_291645 *
                                                   x_291658;
                                            double defunc_1_op_res_291620 =
                                                   defunc_9_fit_fun_res_291653 +
                                                   redout_294939;
                                            double defunc_1_op_res_291623 =
                                                   defunc_9_slope_fun_res_291659 +
                                                   redout_294940;
                                            double redout_tmp_304614 =
                                                   defunc_1_op_res_291620;
                                            double redout_tmp_304615 =
                                                   defunc_1_op_res_291623;
                                            
                                            redout_294939 = redout_tmp_304614;
                                            redout_294940 = redout_tmp_304615;
                                        }
                                        defunc_2_reduce_res_291616 =
                                            redout_294939;
                                        defunc_2_reduce_res_291617 =
                                            redout_294940;
                                        ((double *) mem_299584.mem)[i_294960 *
                                                                    ctx_val_297168 +
                                                                    i_294953 *
                                                                    s_n_m_289895 +
                                                                    i_294946] =
                                            defunc_2_reduce_res_291616;
                                        ((double *) mem_299589.mem)[i_294960 *
                                                                    ctx_val_297168 +
                                                                    i_294953 *
                                                                    s_n_m_289895 +
                                                                    i_294946] =
                                            defunc_2_reduce_res_291617;
                                    }
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_299857, &mem_299584,
                                             "mem_299584") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_299846, &mem_299589,
                                             "mem_299589") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_299589,
                                               "mem_299589") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_299584,
                                               "mem_299584") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_299880, &ext_mem_299857,
                                         "ext_mem_299857") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_299869, &ext_mem_299846,
                                         "ext_mem_299846") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_299846,
                                           "ext_mem_299846") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_299857,
                                           "ext_mem_299857") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_299902, &ext_mem_299880,
                                     "ext_mem_299880") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_299891, &ext_mem_299869,
                                     "ext_mem_299869") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299869,
                                       "ext_mem_299869") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299880,
                                       "ext_mem_299880") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_299924, &ext_mem_299902,
                                 "ext_mem_299902") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_299913, &ext_mem_299891,
                                 "ext_mem_299891") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_299891, "ext_mem_299891") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_299902, "ext_mem_299902") != 0)
                    return 1;
            }
            
            int64_t ext_300042;
            struct memblock ext_mem_300038;
            
            ext_mem_300038.references = NULL;
            if (cond_289894) {
                ext_300042 = ctx_val_297168;
                if (memblock_set(ctx, &ext_mem_300038, &ext_mem_299924,
                                 "ext_mem_299924") != 0)
                    return 1;
            } else {
                bool bounds_invalid_upwards_291664 = slt64(pad_css_len_289891,
                                                           (int64_t) 0);
                bool valid_291665 = !bounds_invalid_upwards_291664;
                bool range_valid_c_291666;
                
                if (!valid_291665) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Range ", (long long) (int64_t) 0, "..",
                                  (long long) (int64_t) 1, "..<",
                                  (long long) pad_css_len_289891,
                                  " is invalid.",
                                  "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:734:3-743:9\n   #4  stl.fut:222:31-96\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:221:23-223:48\n   #8  /prelude/soacs.fut:67:19-23\n   #9  /prelude/soacs.fut:67:3-37\n   #10 stl.fut:220:15-224:44\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_300038,
                                       "ext_mem_300038") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299913,
                                       "ext_mem_299913") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299924,
                                       "ext_mem_299924") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297627,
                                       "mem_param_297627") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297619,
                                       "mem_param_297619") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303131,
                                       "ext_mem_303131") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303132,
                                       "ext_mem_303132") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297605,
                                       "mem_param_297605") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297597,
                                       "mem_param_297597") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297589,
                                       "mem_param_297589") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303656,
                                       "ext_mem_303656") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303657,
                                       "ext_mem_303657") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303658,
                                       "ext_mem_303658") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                struct memblock mem_299939;
                
                mem_299939.references = NULL;
                if (memblock_alloc(ctx, &mem_299939, bytes_299938,
                                   "mem_299939")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t ctx_val_299952 = n_p_289747 * pad_css_len_289891;
                
                for (int64_t i_294973 = 0; i_294973 < partition_sizze_289836;
                     i_294973++) {
                    for (int64_t i_294969 = 0; i_294969 < n_p_289747;
                         i_294969++) {
                        for (int64_t i_294965 = 0; i_294965 <
                             pad_css_len_289891; i_294965++) {
                            bool cond_291676 = i_294965 == (int64_t) 0;
                            double defunc_0_f_res_291677;
                            
                            if (cond_291676) {
                                bool y_291678 = slt64((int64_t) 0,
                                                      s_n_m_289895);
                                bool index_certs_291679;
                                
                                if (!y_291678) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) (int64_t) 0,
                                                  "] out of bounds for array of shape [",
                                                  (long long) s_n_m_289895,
                                                  "].",
                                                  "-> #0  /prelude/array.fut:21:29-32\n   #1  loess.fut:736:12-20\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:734:3-743:9\n   #6  stl.fut:222:31-96\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:221:23-223:48\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:220:15-224:44\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                                    if (memblock_unref(ctx, &mem_299939,
                                                       "mem_299939") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_300038,
                                                       "ext_mem_300038") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_299913,
                                                       "ext_mem_299913") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_299924,
                                                       "ext_mem_299924") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297627,
                                                       "mem_param_297627") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297619,
                                                       "mem_param_297619") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303131,
                                                       "ext_mem_303131") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303132,
                                                       "ext_mem_303132") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297605,
                                                       "mem_param_297605") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297597,
                                                       "mem_param_297597") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297589,
                                                       "mem_param_297589") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303656,
                                                       "ext_mem_303656") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303657,
                                                       "ext_mem_303657") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303658,
                                                       "ext_mem_303658") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_297581,
                                                       "mem_297581") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_297577,
                                                       "mem_297577") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_304403,
                                                       "mem_out_304403") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_304402,
                                                       "mem_out_304402") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_304401,
                                                       "mem_out_304401") != 0)
                                        return 1;
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                double head_res_291680;
                                
                                head_res_291680 =
                                    ((double *) ext_mem_299924.mem)[i_294973 *
                                                                    ctx_val_297168 +
                                                                    i_294969 *
                                                                    s_n_m_289895];
                                defunc_0_f_res_291677 = head_res_291680;
                            } else {
                                int64_t y_291681 = sub64(pad_css_len_289891,
                                                         (int64_t) 1);
                                bool cond_291682 = i_294965 == y_291681;
                                double defunc_0_f_res_f_res_291683;
                                
                                if (cond_291682) {
                                    int64_t i_291684 = sub64(s_n_m_289895,
                                                             (int64_t) 1);
                                    bool x_291685 = sle64((int64_t) 0,
                                                          i_291684);
                                    bool y_291686 = slt64(i_291684,
                                                          s_n_m_289895);
                                    bool bounds_check_291687 = x_291685 &&
                                         y_291686;
                                    bool index_certs_291688;
                                    
                                    if (!bounds_check_291687) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) i_291684,
                                                      "] out of bounds for array of shape [",
                                                      (long long) s_n_m_289895,
                                                      "].",
                                                      "-> #0  /prelude/array.fut:26:29-34\n   #1  loess.fut:738:12-20\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:734:3-743:9\n   #6  stl.fut:222:31-96\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:221:23-223:48\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:220:15-224:44\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_299939,
                                                           "mem_299939") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300038,
                                                           "ext_mem_300038") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299913,
                                                           "ext_mem_299913") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299924,
                                                           "ext_mem_299924") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297627,
                                                           "mem_param_297627") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297619,
                                                           "mem_param_297619") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303131,
                                                           "ext_mem_303131") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303132,
                                                           "ext_mem_303132") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297605,
                                                           "mem_param_297605") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297597,
                                                           "mem_param_297597") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297589,
                                                           "mem_param_297589") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303656,
                                                           "ext_mem_303656") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303657,
                                                           "ext_mem_303657") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303658,
                                                           "ext_mem_303658") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297581,
                                                           "mem_297581") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297577,
                                                           "mem_297577") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304403,
                                                           "mem_out_304403") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304402,
                                                           "mem_out_304402") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304401,
                                                           "mem_out_304401") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double last_res_291689;
                                    
                                    last_res_291689 =
                                        ((double *) ext_mem_299924.mem)[i_294973 *
                                                                        ctx_val_297168 +
                                                                        i_294969 *
                                                                        s_n_m_289895 +
                                                                        i_291684];
                                    defunc_0_f_res_f_res_291683 =
                                        last_res_291689;
                                } else {
                                    int64_t x_291690 = sub64(i_294965,
                                                             (int64_t) 1);
                                    bool zzero_291691 = jump_s_289754 ==
                                         (int64_t) 0;
                                    bool nonzzero_291692 = !zzero_291691;
                                    bool nonzzero_cert_291693;
                                    
                                    if (!nonzzero_291692) {
                                        ctx->error =
                                            msgprintf("Error: %s\n\nBacktrace:\n%s",
                                                      "division by zero",
                                                      "-> #0  loess.fut:740:22-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:734:3-743:9\n   #5  stl.fut:222:31-96\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:221:23-223:48\n   #9  /prelude/soacs.fut:67:19-23\n   #10 /prelude/soacs.fut:67:3-37\n   #11 stl.fut:220:15-224:44\n   #12 stl.fut:419:61-435:77\n   #13 stl.fut:463:3-479:36\n   #14 stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_299939,
                                                           "mem_299939") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300038,
                                                           "ext_mem_300038") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299913,
                                                           "ext_mem_299913") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299924,
                                                           "ext_mem_299924") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297627,
                                                           "mem_param_297627") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297619,
                                                           "mem_param_297619") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303131,
                                                           "ext_mem_303131") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303132,
                                                           "ext_mem_303132") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297605,
                                                           "mem_param_297605") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297597,
                                                           "mem_param_297597") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297589,
                                                           "mem_param_297589") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303656,
                                                           "ext_mem_303656") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303657,
                                                           "ext_mem_303657") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303658,
                                                           "ext_mem_303658") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297581,
                                                           "mem_297581") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297577,
                                                           "mem_297577") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304403,
                                                           "mem_out_304403") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304402,
                                                           "mem_out_304402") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304401,
                                                           "mem_out_304401") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t x_291694 = sdiv64(x_291690,
                                                              jump_s_289754);
                                    int64_t m_v_291695 = add64((int64_t) 1,
                                                               x_291694);
                                    int64_t j_291696;
                                    
                                    if (cond_291676) {
                                        j_291696 = (int64_t) 0;
                                    } else {
                                        int64_t y_291697 = sub64(s_n_m_289895,
                                                                 (int64_t) 1);
                                        bool cond_291698 = m_v_291695 ==
                                             y_291697;
                                        int64_t j_f_res_291699;
                                        
                                        if (cond_291698) {
                                            j_f_res_291699 = x_291694;
                                        } else {
                                            j_f_res_291699 = m_v_291695;
                                        }
                                        j_291696 = j_f_res_291699;
                                    }
                                    
                                    bool cond_291700 = j_291696 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_291701;
                                    
                                    if (cond_291700) {
                                        defunc_0_m_fun_res_291701 = (int64_t) 0;
                                    } else {
                                        int64_t y_291702 = sub64(s_n_m_289895,
                                                                 (int64_t) 1);
                                        bool cond_291703 = j_291696 == y_291702;
                                        int64_t defunc_0_m_fun_res_f_res_291704;
                                        
                                        if (cond_291703) {
                                            defunc_0_m_fun_res_f_res_291704 =
                                                y_291681;
                                        } else {
                                            int64_t x_291705 = sub64(j_291696,
                                                                     (int64_t) 1);
                                            int64_t x_291706 =
                                                    mul64(jump_s_289754,
                                                          x_291705);
                                            int64_t min_arg_291707 =
                                                    add64((int64_t) 1,
                                                          x_291706);
                                            int64_t min_res_291708 =
                                                    smin64(defunc_0_f_res_289890,
                                                           min_arg_291707);
                                            
                                            defunc_0_m_fun_res_f_res_291704 =
                                                min_res_291708;
                                        }
                                        defunc_0_m_fun_res_291701 =
                                            defunc_0_m_fun_res_f_res_291704;
                                    }
                                    
                                    int64_t defunc_0_m_fun_arg_291709 =
                                            add64((int64_t) 1, j_291696);
                                    bool cond_291710 =
                                         defunc_0_m_fun_arg_291709 ==
                                         (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_291711;
                                    
                                    if (cond_291710) {
                                        defunc_0_m_fun_res_291711 = (int64_t) 0;
                                    } else {
                                        int64_t y_291712 = sub64(s_n_m_289895,
                                                                 (int64_t) 1);
                                        bool cond_291713 =
                                             defunc_0_m_fun_arg_291709 ==
                                             y_291712;
                                        int64_t defunc_0_m_fun_res_f_res_291714;
                                        
                                        if (cond_291713) {
                                            defunc_0_m_fun_res_f_res_291714 =
                                                y_291681;
                                        } else {
                                            int64_t x_291715 =
                                                    mul64(jump_s_289754,
                                                          j_291696);
                                            int64_t min_arg_291716 =
                                                    add64((int64_t) 1,
                                                          x_291715);
                                            int64_t min_res_291717 =
                                                    smin64(defunc_0_f_res_289890,
                                                           min_arg_291716);
                                            
                                            defunc_0_m_fun_res_f_res_291714 =
                                                min_res_291717;
                                        }
                                        defunc_0_m_fun_res_291711 =
                                            defunc_0_m_fun_res_f_res_291714;
                                    }
                                    
                                    int64_t i64_arg_291718 =
                                            sub64(defunc_0_m_fun_res_291711,
                                                  defunc_0_m_fun_res_291701);
                                    double i64_res_291719 =
                                           sitofp_i64_f64(i64_arg_291718);
                                    int64_t i64_arg_291720 = sub64(i_294965,
                                                                   defunc_0_m_fun_res_291701);
                                    double i64_res_291721 =
                                           sitofp_i64_f64(i64_arg_291720);
                                    double u_291722 = i64_res_291721 /
                                           i64_res_291719;
                                    double u2_291723 = u_291722 * u_291722;
                                    double u3_291724 = u_291722 * u2_291723;
                                    double x_291725 = 2.0 * u3_291724;
                                    double y_291726 = 3.0 * u2_291723;
                                    double x_291727 = x_291725 - y_291726;
                                    double x_291728 = 1.0 + x_291727;
                                    bool x_291729 = sle64((int64_t) 0,
                                                          j_291696);
                                    bool y_291730 = slt64(j_291696,
                                                          s_n_m_289895);
                                    bool bounds_check_291731 = x_291729 &&
                                         y_291730;
                                    bool index_certs_291732;
                                    
                                    if (!bounds_check_291731) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) j_291696,
                                                      "] out of bounds for array of shape [",
                                                      (long long) s_n_m_289895,
                                                      "].",
                                                      "-> #0  loess.fut:713:27-33\n   #1  loess.fut:742:15-52\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:734:3-743:9\n   #6  stl.fut:222:31-96\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:221:23-223:48\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:220:15-224:44\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_299939,
                                                           "mem_299939") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300038,
                                                           "ext_mem_300038") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299913,
                                                           "ext_mem_299913") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299924,
                                                           "ext_mem_299924") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297627,
                                                           "mem_param_297627") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297619,
                                                           "mem_param_297619") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303131,
                                                           "ext_mem_303131") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303132,
                                                           "ext_mem_303132") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297605,
                                                           "mem_param_297605") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297597,
                                                           "mem_param_297597") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297589,
                                                           "mem_param_297589") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303656,
                                                           "ext_mem_303656") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303657,
                                                           "ext_mem_303657") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303658,
                                                           "ext_mem_303658") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297581,
                                                           "mem_297581") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297577,
                                                           "mem_297577") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304403,
                                                           "mem_out_304403") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304402,
                                                           "mem_out_304402") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304401,
                                                           "mem_out_304401") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double y_291733;
                                    
                                    y_291733 =
                                        ((double *) ext_mem_299924.mem)[i_294973 *
                                                                        ctx_val_297168 +
                                                                        i_294969 *
                                                                        s_n_m_289895 +
                                                                        j_291696];
                                    
                                    double x_291734 = x_291728 * y_291733;
                                    double x_291735 = y_291726 - x_291725;
                                    bool x_291736 = sle64((int64_t) 0,
                                                          defunc_0_m_fun_arg_291709);
                                    bool y_291737 =
                                         slt64(defunc_0_m_fun_arg_291709,
                                               s_n_m_289895);
                                    bool bounds_check_291738 = x_291736 &&
                                         y_291737;
                                    bool index_certs_291739;
                                    
                                    if (!bounds_check_291738) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) defunc_0_m_fun_arg_291709,
                                                      "] out of bounds for array of shape [",
                                                      (long long) s_n_m_289895,
                                                      "].",
                                                      "-> #0  loess.fut:714:27-37\n   #1  loess.fut:742:15-52\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:734:3-743:9\n   #6  stl.fut:222:31-96\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:221:23-223:48\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:220:15-224:44\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_299939,
                                                           "mem_299939") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300038,
                                                           "ext_mem_300038") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299913,
                                                           "ext_mem_299913") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299924,
                                                           "ext_mem_299924") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297627,
                                                           "mem_param_297627") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297619,
                                                           "mem_param_297619") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303131,
                                                           "ext_mem_303131") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303132,
                                                           "ext_mem_303132") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297605,
                                                           "mem_param_297605") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297597,
                                                           "mem_param_297597") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297589,
                                                           "mem_param_297589") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303656,
                                                           "ext_mem_303656") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303657,
                                                           "ext_mem_303657") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303658,
                                                           "ext_mem_303658") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297581,
                                                           "mem_297581") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297577,
                                                           "mem_297577") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304403,
                                                           "mem_out_304403") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304402,
                                                           "mem_out_304402") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304401,
                                                           "mem_out_304401") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double y_291740;
                                    
                                    y_291740 =
                                        ((double *) ext_mem_299924.mem)[i_294973 *
                                                                        ctx_val_297168 +
                                                                        i_294969 *
                                                                        s_n_m_289895 +
                                                                        defunc_0_m_fun_arg_291709];
                                    
                                    double y_291741 = x_291735 * y_291740;
                                    double x_291742 = x_291734 + y_291741;
                                    double y_291743 = 2.0 * u2_291723;
                                    double x_291744 = u3_291724 - y_291743;
                                    double x_291745 = u_291722 + x_291744;
                                    double y_291746;
                                    
                                    y_291746 =
                                        ((double *) ext_mem_299913.mem)[i_294973 *
                                                                        ctx_val_297168 +
                                                                        i_294969 *
                                                                        s_n_m_289895 +
                                                                        j_291696];
                                    
                                    double x_291747 = x_291745 * y_291746;
                                    double y_291748 = i64_res_291719 * x_291747;
                                    double x_291749 = x_291742 + y_291748;
                                    double x_291750 = u3_291724 - u2_291723;
                                    double y_291751;
                                    
                                    y_291751 =
                                        ((double *) ext_mem_299913.mem)[i_294973 *
                                                                        ctx_val_297168 +
                                                                        i_294969 *
                                                                        s_n_m_289895 +
                                                                        defunc_0_m_fun_arg_291709];
                                    
                                    double x_291752 = x_291750 * y_291751;
                                    double y_291753 = i64_res_291719 * x_291752;
                                    double defunc_4_interpolate_proc_res_291754
                                           = x_291749 + y_291753;
                                    
                                    defunc_0_f_res_f_res_291683 =
                                        defunc_4_interpolate_proc_res_291754;
                                }
                                defunc_0_f_res_291677 =
                                    defunc_0_f_res_f_res_291683;
                            }
                            ((double *) mem_299939.mem)[i_294973 *
                                                        ctx_val_299952 +
                                                        i_294969 *
                                                        pad_css_len_289891 +
                                                        i_294965] =
                                defunc_0_f_res_291677;
                        }
                    }
                }
                ext_300042 = ctx_val_299952;
                if (memblock_set(ctx, &ext_mem_300038, &mem_299939,
                                 "mem_299939") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_299939, "mem_299939") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_299913, "ext_mem_299913") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_299924, "ext_mem_299924") != 0)
                return 1;
            for (int64_t i_294981 = 0; i_294981 < partition_sizze_289836;
                 i_294981++) {
                for (int64_t i_294977 = 0; i_294977 < C_len_289893;
                     i_294977++) {
                    int64_t i_291761 = smod64(i_294977, n_p_289747);
                    bool x_291762 = sle64((int64_t) 0, i_291761);
                    bool y_291763 = slt64(i_291761, n_p_289747);
                    bool bounds_check_291764 = x_291762 && y_291763;
                    int64_t i_291765 = sdiv64(i_294977, n_p_289747);
                    bool x_291766 = sle64((int64_t) 0, i_291765);
                    bool y_291767 = slt64(i_291765, css_results_l_290358);
                    bool bounds_check_291768 = x_291766 && y_291767;
                    bool index_ok_291769 = bounds_check_291764 &&
                         bounds_check_291768;
                    bool index_certs_291770;
                    
                    if (!index_ok_291769) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) i_291761, ", ",
                                      (long long) i_291765,
                                      "] out of bounds for array of shape [",
                                      (long long) n_p_289747, "][",
                                      (long long) css_results_l_290358, "].",
                                      "-> #0  stl.fut:228:39-67\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:228:28-74\n   #5  stl.fut:227:21-229:39\n   #6  stl.fut:419:61-435:77\n   #7  stl.fut:463:3-479:36\n   #8  stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &ext_mem_300038,
                                           "ext_mem_300038") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_299913,
                                           "ext_mem_299913") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_299924,
                                           "ext_mem_299924") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297627,
                                           "mem_param_297627") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297619,
                                           "mem_param_297619") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303131,
                                           "ext_mem_303131") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303132,
                                           "ext_mem_303132") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297605,
                                           "mem_param_297605") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297597,
                                           "mem_param_297597") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297589,
                                           "mem_param_297589") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303656,
                                           "ext_mem_303656") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303657,
                                           "ext_mem_303657") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303658,
                                           "ext_mem_303658") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304403,
                                           "mem_out_304403") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304402,
                                           "mem_out_304402") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304401,
                                           "mem_out_304401") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    if ((int64_t) 8 > 0)
                        memmove(mem_300049 + (i_294981 * C_len_289893 +
                                              i_294977) * (int64_t) 8,
                                ext_mem_300038.mem + ((int64_t) 0 + i_294981 *
                                                      ext_300042 + i_291761 *
                                                      ext_300041 + (int64_t) 1 *
                                                      i_291765) * (int64_t) 8,
                                (int64_t) 8);
                }
            }
            if (memblock_unref(ctx, &ext_mem_300038, "ext_mem_300038") != 0)
                return 1;
            for (int64_t i_294987 = 0; i_294987 < partition_sizze_289836;
                 i_294987++) {
                double defunc_2_reduce_res_291776;
                double redout_294983 = 0.0;
                
                for (int64_t i_294984 = 0; i_294984 < n_p_289747; i_294984++) {
                    double x_291780;
                    
                    x_291780 = ((double *) mem_300049)[i_294987 * C_len_289893 +
                                                       i_294984];
                    
                    double defunc_1_op_res_291779 = x_291780 + redout_294983;
                    double redout_tmp_304622 = defunc_1_op_res_291779;
                    
                    redout_294983 = redout_tmp_304622;
                }
                defunc_2_reduce_res_291776 = redout_294983;
                ((double *) mem_300095)[i_294987] = defunc_2_reduce_res_291776;
            }
            for (int64_t i_294997 = 0; i_294997 < partition_sizze_289836;
                 i_294997++) {
                double x_291784;
                
                x_291784 = ((double *) mem_300095)[i_294997];
                
                double discard_294994;
                double scanacc_294990 = 0.0;
                
                for (int64_t i_294992 = 0; i_294992 <
                     lifted_single_ma_l_arg_290381; i_294992++) {
                    bool cond_291790 = i_294992 == (int64_t) 0;
                    double defunc_0_f_res_291791;
                    
                    if (cond_291790) {
                        double defunc_0_f_res_t_res_291792 = x_291784 /
                               i64_res_289764;
                        
                        defunc_0_f_res_291791 = defunc_0_f_res_t_res_291792;
                    } else {
                        int64_t x_291793 = add64(n_p_289747, i_294992);
                        int64_t i_291794 = sub64(x_291793, (int64_t) 1);
                        bool x_291795 = sle64((int64_t) 0, i_291794);
                        bool y_291796 = slt64(i_291794, C_len_289893);
                        bool bounds_check_291797 = x_291795 && y_291796;
                        bool index_certs_291798;
                        
                        if (!bounds_check_291797) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_291794,
                                          "] out of bounds for array of shape [",
                                          (long long) C_len_289893, "].",
                                          "-> #0  stl.fut:34:23-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  stl.fut:40:3-36\n   #9  stl.fut:233:23-47\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_300038,
                                               "ext_mem_300038") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299913,
                                               "ext_mem_299913") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299924,
                                               "ext_mem_299924") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297627,
                                               "mem_param_297627") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297619,
                                               "mem_param_297619") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303131,
                                               "ext_mem_303131") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303132,
                                               "ext_mem_303132") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297605,
                                               "mem_param_297605") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297597,
                                               "mem_param_297597") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297589,
                                               "mem_param_297589") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303656,
                                               "ext_mem_303656") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303657,
                                               "ext_mem_303657") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303658,
                                               "ext_mem_303658") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297581,
                                               "mem_297581") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297577,
                                               "mem_297577") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304403,
                                               "mem_out_304403") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304402,
                                               "mem_out_304402") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304401,
                                               "mem_out_304401") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double x_291799;
                        
                        x_291799 = ((double *) mem_300049)[i_294997 *
                                                           C_len_289893 +
                                                           i_291794];
                        
                        int64_t i_291800 = sub64(i_294992, (int64_t) 1);
                        bool x_291801 = sle64((int64_t) 0, i_291800);
                        bool y_291802 = slt64(i_291800, C_len_289893);
                        bool bounds_check_291803 = x_291801 && y_291802;
                        bool index_certs_291804;
                        
                        if (!bounds_check_291803) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_291800,
                                          "] out of bounds for array of shape [",
                                          (long long) C_len_289893, "].",
                                          "-> #0  stl.fut:34:40-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  stl.fut:40:3-36\n   #9  stl.fut:233:23-47\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_300038,
                                               "ext_mem_300038") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299913,
                                               "ext_mem_299913") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299924,
                                               "ext_mem_299924") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297627,
                                               "mem_param_297627") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297619,
                                               "mem_param_297619") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303131,
                                               "ext_mem_303131") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303132,
                                               "ext_mem_303132") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297605,
                                               "mem_param_297605") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297597,
                                               "mem_param_297597") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297589,
                                               "mem_param_297589") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303656,
                                               "ext_mem_303656") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303657,
                                               "ext_mem_303657") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303658,
                                               "ext_mem_303658") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297581,
                                               "mem_297581") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297577,
                                               "mem_297577") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304403,
                                               "mem_out_304403") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304402,
                                               "mem_out_304402") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304401,
                                               "mem_out_304401") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_291805;
                        
                        y_291805 = ((double *) mem_300049)[i_294997 *
                                                           C_len_289893 +
                                                           i_291800];
                        
                        double x_291806 = x_291799 - y_291805;
                        double defunc_0_f_res_f_res_291807 = x_291806 /
                               i64_res_289764;
                        
                        defunc_0_f_res_291791 = defunc_0_f_res_f_res_291807;
                    }
                    
                    double defunc_1_op_res_291788 = defunc_0_f_res_291791 +
                           scanacc_294990;
                    
                    ((double *) mem_300124)[i_294992] = defunc_1_op_res_291788;
                    
                    double scanacc_tmp_304624 = defunc_1_op_res_291788;
                    
                    scanacc_294990 = scanacc_tmp_304624;
                }
                discard_294994 = scanacc_294990;
                if (lifted_single_ma_l_arg_290381 * (int64_t) 8 > 0)
                    memmove(mem_300111 + i_294997 *
                            lifted_single_ma_l_arg_290381 * (int64_t) 8,
                            mem_300124 + (int64_t) 0,
                            lifted_single_ma_l_arg_290381 * (int64_t) 8);
            }
            for (int64_t i_295003 = 0; i_295003 < partition_sizze_289836;
                 i_295003++) {
                double defunc_2_reduce_res_291812;
                double redout_294999 = 0.0;
                
                for (int64_t i_295000 = 0; i_295000 < n_p_289747; i_295000++) {
                    double x_291816;
                    
                    x_291816 = ((double *) mem_300111)[i_295003 *
                                                       lifted_single_ma_l_arg_290381 +
                                                       i_295000];
                    
                    double defunc_1_op_res_291815 = x_291816 + redout_294999;
                    double redout_tmp_304627 = defunc_1_op_res_291815;
                    
                    redout_294999 = redout_tmp_304627;
                }
                defunc_2_reduce_res_291812 = redout_294999;
                ((double *) mem_300147)[i_295003] = defunc_2_reduce_res_291812;
            }
            for (int64_t i_295013 = 0; i_295013 < partition_sizze_289836;
                 i_295013++) {
                double x_291820;
                
                x_291820 = ((double *) mem_300147)[i_295013];
                
                double discard_295010;
                double scanacc_295006 = 0.0;
                
                for (int64_t i_295008 = 0; i_295008 <
                     dyn_lifted_single_ma_l_arg_290391; i_295008++) {
                    bool cond_291826 = i_295008 == (int64_t) 0;
                    double defunc_0_f_res_291827;
                    
                    if (cond_291826) {
                        double defunc_0_f_res_t_res_291828 = x_291820 /
                               i64_res_289764;
                        
                        defunc_0_f_res_291827 = defunc_0_f_res_t_res_291828;
                    } else {
                        int64_t x_291829 = add64(n_p_289747, i_295008);
                        int64_t i_291830 = sub64(x_291829, (int64_t) 1);
                        bool x_291831 = sle64((int64_t) 0, i_291830);
                        bool y_291832 = slt64(i_291830,
                                              lifted_single_ma_l_arg_290381);
                        bool bounds_check_291833 = x_291831 && y_291832;
                        bool index_certs_291834;
                        
                        if (!bounds_check_291833) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_291830,
                                          "] out of bounds for array of shape [",
                                          (long long) lifted_single_ma_l_arg_290381,
                                          "].",
                                          "-> #0  stl.fut:34:23-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  /prelude/functional.fut:9:42-44\n   #9  stl.fut:40:3-64\n   #10 stl.fut:233:23-47\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_300038,
                                               "ext_mem_300038") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299913,
                                               "ext_mem_299913") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299924,
                                               "ext_mem_299924") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297627,
                                               "mem_param_297627") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297619,
                                               "mem_param_297619") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303131,
                                               "ext_mem_303131") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303132,
                                               "ext_mem_303132") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297605,
                                               "mem_param_297605") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297597,
                                               "mem_param_297597") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297589,
                                               "mem_param_297589") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303656,
                                               "ext_mem_303656") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303657,
                                               "ext_mem_303657") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303658,
                                               "ext_mem_303658") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297581,
                                               "mem_297581") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297577,
                                               "mem_297577") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304403,
                                               "mem_out_304403") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304402,
                                               "mem_out_304402") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304401,
                                               "mem_out_304401") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double x_291835;
                        
                        x_291835 = ((double *) mem_300111)[i_295013 *
                                                           lifted_single_ma_l_arg_290381 +
                                                           i_291830];
                        
                        int64_t i_291836 = sub64(i_295008, (int64_t) 1);
                        bool x_291837 = sle64((int64_t) 0, i_291836);
                        bool y_291838 = slt64(i_291836,
                                              lifted_single_ma_l_arg_290381);
                        bool bounds_check_291839 = x_291837 && y_291838;
                        bool index_certs_291840;
                        
                        if (!bounds_check_291839) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_291836,
                                          "] out of bounds for array of shape [",
                                          (long long) lifted_single_ma_l_arg_290381,
                                          "].",
                                          "-> #0  stl.fut:34:40-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  /prelude/functional.fut:9:42-44\n   #9  stl.fut:40:3-64\n   #10 stl.fut:233:23-47\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_300038,
                                               "ext_mem_300038") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299913,
                                               "ext_mem_299913") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299924,
                                               "ext_mem_299924") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297627,
                                               "mem_param_297627") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297619,
                                               "mem_param_297619") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303131,
                                               "ext_mem_303131") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303132,
                                               "ext_mem_303132") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297605,
                                               "mem_param_297605") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297597,
                                               "mem_param_297597") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297589,
                                               "mem_param_297589") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303656,
                                               "ext_mem_303656") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303657,
                                               "ext_mem_303657") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303658,
                                               "ext_mem_303658") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297581,
                                               "mem_297581") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297577,
                                               "mem_297577") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304403,
                                               "mem_out_304403") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304402,
                                               "mem_out_304402") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304401,
                                               "mem_out_304401") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_291841;
                        
                        y_291841 = ((double *) mem_300111)[i_295013 *
                                                           lifted_single_ma_l_arg_290381 +
                                                           i_291836];
                        
                        double x_291842 = x_291835 - y_291841;
                        double defunc_0_f_res_f_res_291843 = x_291842 /
                               i64_res_289764;
                        
                        defunc_0_f_res_291827 = defunc_0_f_res_f_res_291843;
                    }
                    
                    double defunc_1_op_res_291824 = defunc_0_f_res_291827 +
                           scanacc_295006;
                    
                    ((double *) mem_300176)[i_295008] = defunc_1_op_res_291824;
                    
                    double scanacc_tmp_304629 = defunc_1_op_res_291824;
                    
                    scanacc_295006 = scanacc_tmp_304629;
                }
                discard_295010 = scanacc_295006;
                if (dyn_lifted_single_ma_l_arg_290391 * (int64_t) 8 > 0)
                    memmove(mem_300163 + i_295013 *
                            dyn_lifted_single_ma_l_arg_290391 * (int64_t) 8,
                            mem_300176 + (int64_t) 0,
                            dyn_lifted_single_ma_l_arg_290391 * (int64_t) 8);
            }
            for (int64_t i_295019 = 0; i_295019 < partition_sizze_289836;
                 i_295019++) {
                double defunc_2_reduce_res_291848;
                double redout_295015 = 0.0;
                
                for (int32_t i_295946 = 0; i_295946 < 3; i_295946++) {
                    int64_t i_295016 = sext_i32_i64(i_295946);
                    double x_291852;
                    
                    x_291852 = ((double *) mem_300163)[i_295019 *
                                                       dyn_lifted_single_ma_l_arg_290391 +
                                                       i_295016];
                    
                    double defunc_1_op_res_291851 = x_291852 + redout_295015;
                    double redout_tmp_304632 = defunc_1_op_res_291851;
                    
                    redout_295015 = redout_tmp_304632;
                }
                defunc_2_reduce_res_291848 = redout_295015;
                ((double *) mem_300199)[i_295019] = defunc_2_reduce_res_291848;
            }
            for (int64_t i_295029 = 0; i_295029 < partition_sizze_289836;
                 i_295029++) {
                double x_291856;
                
                x_291856 = ((double *) mem_300199)[i_295029];
                
                double discard_295026;
                double scanacc_295022 = 0.0;
                
                for (int64_t i_295024 = 0; i_295024 < n_289745; i_295024++) {
                    bool cond_291862 = i_295024 == (int64_t) 0;
                    double defunc_0_f_res_291863;
                    
                    if (cond_291862) {
                        double defunc_0_f_res_t_res_291864 = x_291856 / 3.0;
                        
                        defunc_0_f_res_291863 = defunc_0_f_res_t_res_291864;
                    } else {
                        int64_t x_291865 = add64((int64_t) 3, i_295024);
                        int64_t i_291866 = sub64(x_291865, (int64_t) 1);
                        bool x_291867 = sle64((int64_t) 0, i_291866);
                        bool y_291868 = slt64(i_291866,
                                              dyn_lifted_single_ma_l_arg_290391);
                        bool bounds_check_291869 = x_291867 && y_291868;
                        bool index_certs_291870;
                        
                        if (!bounds_check_291869) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_291866,
                                          "] out of bounds for array of shape [",
                                          (long long) dyn_lifted_single_ma_l_arg_290391,
                                          "].",
                                          "-> #0  stl.fut:34:23-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  /prelude/functional.fut:9:42-44\n   #9  stl.fut:40:3-84\n   #10 stl.fut:233:23-47\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_300038,
                                               "ext_mem_300038") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299913,
                                               "ext_mem_299913") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299924,
                                               "ext_mem_299924") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297627,
                                               "mem_param_297627") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297619,
                                               "mem_param_297619") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303131,
                                               "ext_mem_303131") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303132,
                                               "ext_mem_303132") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297605,
                                               "mem_param_297605") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297597,
                                               "mem_param_297597") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297589,
                                               "mem_param_297589") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303656,
                                               "ext_mem_303656") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303657,
                                               "ext_mem_303657") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303658,
                                               "ext_mem_303658") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297581,
                                               "mem_297581") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297577,
                                               "mem_297577") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304403,
                                               "mem_out_304403") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304402,
                                               "mem_out_304402") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304401,
                                               "mem_out_304401") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double x_291871;
                        
                        x_291871 = ((double *) mem_300163)[i_295029 *
                                                           dyn_lifted_single_ma_l_arg_290391 +
                                                           i_291866];
                        
                        int64_t i_291872 = sub64(i_295024, (int64_t) 1);
                        bool x_291873 = sle64((int64_t) 0, i_291872);
                        bool y_291874 = slt64(i_291872,
                                              dyn_lifted_single_ma_l_arg_290391);
                        bool bounds_check_291875 = x_291873 && y_291874;
                        bool index_certs_291876;
                        
                        if (!bounds_check_291875) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_291872,
                                          "] out of bounds for array of shape [",
                                          (long long) dyn_lifted_single_ma_l_arg_290391,
                                          "].",
                                          "-> #0  stl.fut:34:40-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  /prelude/functional.fut:9:42-44\n   #9  stl.fut:40:3-84\n   #10 stl.fut:233:23-47\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_300038,
                                               "ext_mem_300038") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299913,
                                               "ext_mem_299913") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299924,
                                               "ext_mem_299924") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297627,
                                               "mem_param_297627") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297619,
                                               "mem_param_297619") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303131,
                                               "ext_mem_303131") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303132,
                                               "ext_mem_303132") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297605,
                                               "mem_param_297605") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297597,
                                               "mem_param_297597") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297589,
                                               "mem_param_297589") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303656,
                                               "ext_mem_303656") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303657,
                                               "ext_mem_303657") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303658,
                                               "ext_mem_303658") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297581,
                                               "mem_297581") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297577,
                                               "mem_297577") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304403,
                                               "mem_out_304403") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304402,
                                               "mem_out_304402") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304401,
                                               "mem_out_304401") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_291877;
                        
                        y_291877 = ((double *) mem_300163)[i_295029 *
                                                           dyn_lifted_single_ma_l_arg_290391 +
                                                           i_291872];
                        
                        double x_291878 = x_291871 - y_291877;
                        double defunc_0_f_res_f_res_291879 = x_291878 / 3.0;
                        
                        defunc_0_f_res_291863 = defunc_0_f_res_f_res_291879;
                    }
                    
                    double defunc_1_op_res_291860 = defunc_0_f_res_291863 +
                           scanacc_295022;
                    
                    ((double *) mem_300228)[i_295024] = defunc_1_op_res_291860;
                    
                    double scanacc_tmp_304634 = defunc_1_op_res_291860;
                    
                    scanacc_295022 = scanacc_tmp_304634;
                }
                discard_295026 = scanacc_295022;
                if (n_289745 * (int64_t) 8 > 0)
                    memmove(mem_300215 + i_295029 * n_289745 * (int64_t) 8,
                            mem_300228 + (int64_t) 0, n_289745 * (int64_t) 8);
            }
            
            struct memblock ext_mem_301401;
            
            ext_mem_301401.references = NULL;
            
            struct memblock ext_mem_301393;
            
            ext_mem_301393.references = NULL;
            if (cond_290409) {
                bool match_lit_291883 = (int64_t) 0 == d_l_289753;
                struct memblock ext_mem_300602;
                
                ext_mem_300602.references = NULL;
                
                struct memblock ext_mem_300594;
                
                ext_mem_300594.references = NULL;
                if (match_lit_291883) {
                    struct memblock mem_300252;
                    
                    mem_300252.references = NULL;
                    if (memblock_alloc(ctx, &mem_300252, bytes_297358,
                                       "mem_300252")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_304636 = 0; i_304636 <
                         partition_sizze_289836; i_304636++) {
                        for (int64_t i_304637 = 0; i_304637 < l_n_m_289902;
                             i_304637++) {
                            ((double *) mem_300252.mem)[i_304636 *
                                                        l_n_m_289902 +
                                                        i_304637] = 0.0;
                        }
                    }
                    
                    struct memblock mem_300256;
                    
                    mem_300256.references = NULL;
                    if (memblock_alloc(ctx, &mem_300256, bytes_297358,
                                       "mem_300256")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_295041 = 0; i_295041 <
                         partition_sizze_289836; i_295041++) {
                        for (int64_t i_295037 = 0; i_295037 < l_n_m_289902;
                             i_295037++) {
                            int64_t x_291895;
                            
                            x_291895 = ((int64_t *) mem_297359)[i_295041 *
                                                                l_n_m_289902 +
                                                                i_295037];
                            
                            double x_291896;
                            
                            x_291896 = ((double *) mem_297363)[i_295041 *
                                                               l_n_m_289902 +
                                                               i_295037];
                            
                            int64_t min_arg_291897 = mul64(jump_t_289755,
                                                           i_295037);
                            int64_t min_res_291898 = smin64(i_289916,
                                                            min_arg_291897);
                            int64_t defunc_0_g_res_291899 = add64((int64_t) 1,
                                                                  min_res_291898);
                            double defunc_2_reduce_res_291900;
                            double redout_295031 = 0.0;
                            
                            for (int64_t i_295032 = 0; i_295032 < q_l_289750;
                                 i_295032++) {
                                bool cond_291905 = sle64(n_289745, i_295032);
                                int64_t defunc_0_f_res_291906;
                                
                                if (cond_291905) {
                                    defunc_0_f_res_291906 = (int64_t) 0;
                                } else {
                                    int64_t i_291907 = add64(x_291895,
                                                             i_295032);
                                    int64_t defunc_1_add_res_291908 =
                                            add64((int64_t) 1, i_291907);
                                    
                                    defunc_0_f_res_291906 =
                                        defunc_1_add_res_291908;
                                }
                                
                                double defunc_0_f_res_291909;
                                
                                if (cond_291905) {
                                    defunc_0_f_res_291909 = 0.0;
                                } else {
                                    int64_t i_291910 = add64(x_291895,
                                                             i_295032);
                                    double defunc_0_add_arg_291911;
                                    
                                    defunc_0_add_arg_291911 =
                                        ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                          (i_295041 *
                                                                           ctx_param_ext_297601 +
                                                                           i_291910 *
                                                                           ctx_param_ext_297603)];
                                    defunc_0_f_res_291909 =
                                        defunc_0_add_arg_291911;
                                }
                                
                                int64_t binop_p_291912 =
                                        sub64(defunc_0_f_res_291906,
                                              defunc_0_g_res_291899);
                                double defunc_0_f_res_291913 =
                                       sitofp_i64_f64(binop_p_291912);
                                double abs_res_291914 =
                                       fabs(defunc_0_f_res_291913);
                                double tmp1_291915 = abs_res_291914 / x_291896;
                                double x_291916 = tmp1_291915 * tmp1_291915;
                                double y_291917 = tmp1_291915 * x_291916;
                                double tmp2_291918 = 1.0 - y_291917;
                                double x_291919 = tmp2_291918 * tmp2_291918;
                                double tmp3_291920 = tmp2_291918 * x_291919;
                                double w_j_291921 = defunc_0_f_res_291909 *
                                       tmp3_291920;
                                double defunc_1_op_res_291903 = w_j_291921 +
                                       redout_295031;
                                double redout_tmp_304640 =
                                       defunc_1_op_res_291903;
                                
                                redout_295031 = redout_tmp_304640;
                            }
                            defunc_2_reduce_res_291900 = redout_295031;
                            
                            double a_291922 = 2.220446049250313e-16 +
                                   defunc_2_reduce_res_291900;
                            double a0_291923 = 1.0 / a_291922;
                            double defunc_2_reduce_res_291924;
                            double redout_295033 = 0.0;
                            
                            for (int64_t i_295034 = 0; i_295034 < q_l_289750;
                                 i_295034++) {
                                bool cond_291929 = sle64(n_289745, i_295034);
                                int64_t defunc_0_f_res_291930;
                                
                                if (cond_291929) {
                                    defunc_0_f_res_291930 = (int64_t) 0;
                                } else {
                                    int64_t i_291931 = add64(x_291895,
                                                             i_295034);
                                    int64_t defunc_1_add_res_291932 =
                                            add64((int64_t) 1, i_291931);
                                    
                                    defunc_0_f_res_291930 =
                                        defunc_1_add_res_291932;
                                }
                                
                                double defunc_0_f_res_291933;
                                
                                if (cond_291929) {
                                    defunc_0_f_res_291933 = 0.0;
                                } else {
                                    int64_t i_291934 = add64(x_291895,
                                                             i_295034);
                                    double defunc_0_add_arg_291935;
                                    
                                    defunc_0_add_arg_291935 =
                                        ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                          (i_295041 *
                                                                           ctx_param_ext_297601 +
                                                                           i_291934 *
                                                                           ctx_param_ext_297603)];
                                    defunc_0_f_res_291933 =
                                        defunc_0_add_arg_291935;
                                }
                                
                                int64_t binop_p_291936 =
                                        sub64(defunc_0_f_res_291930,
                                              defunc_0_g_res_291899);
                                double defunc_0_f_res_291937 =
                                       sitofp_i64_f64(binop_p_291936);
                                double abs_res_291938 =
                                       fabs(defunc_0_f_res_291937);
                                double tmp1_291939 = abs_res_291938 / x_291896;
                                double x_291940 = tmp1_291939 * tmp1_291939;
                                double y_291941 = tmp1_291939 * x_291940;
                                double tmp2_291942 = 1.0 - y_291941;
                                double x_291943 = tmp2_291942 * tmp2_291942;
                                double tmp3_291944 = tmp2_291942 * x_291943;
                                double tmp4_291945 = defunc_0_f_res_291933 *
                                       tmp3_291944;
                                double defunc_0_f_res_291946;
                                
                                if (cond_291929) {
                                    defunc_0_f_res_291946 = 0.0;
                                } else {
                                    int64_t i_291947 = add64(x_291895,
                                                             i_295034);
                                    double defunc_0_add_arg_291948;
                                    
                                    defunc_0_add_arg_291948 =
                                        ((double *) mem_300215)[i_295041 *
                                                                n_289745 +
                                                                i_291947];
                                    defunc_0_f_res_291946 =
                                        defunc_0_add_arg_291948;
                                }
                                
                                double x_291949 = a0_291923 * tmp4_291945;
                                double defunc_9_fit_fun_res_291950 =
                                       defunc_0_f_res_291946 * x_291949;
                                double defunc_1_op_res_291927 =
                                       defunc_9_fit_fun_res_291950 +
                                       redout_295033;
                                double redout_tmp_304641 =
                                       defunc_1_op_res_291927;
                                
                                redout_295033 = redout_tmp_304641;
                            }
                            defunc_2_reduce_res_291924 = redout_295033;
                            ((double *) mem_300256.mem)[i_295041 *
                                                        l_n_m_289902 +
                                                        i_295037] =
                                defunc_2_reduce_res_291924;
                        }
                    }
                    if (memblock_set(ctx, &ext_mem_300602, &mem_300256,
                                     "mem_300256") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_300594, &mem_300252,
                                     "mem_300252") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300256, "mem_300256") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300252, "mem_300252") != 0)
                        return 1;
                } else {
                    bool match_lit_291953 = (int64_t) 1 == d_l_289753;
                    int64_t binop_y_300350 = (int64_t) 8 * q_l_289750;
                    int64_t bytes_300351 = smax64((int64_t) 0, binop_y_300350);
                    int64_t binop_y_300474 = (int64_t) 8 * q_l_289750;
                    int64_t bytes_300475 = smax64((int64_t) 0, binop_y_300474);
                    struct memblock ext_mem_300586;
                    
                    ext_mem_300586.references = NULL;
                    
                    struct memblock ext_mem_300578;
                    
                    ext_mem_300578.references = NULL;
                    if (match_lit_291953) {
                        struct memblock mem_300303;
                        
                        mem_300303.references = NULL;
                        if (memblock_alloc(ctx, &mem_300303, bytes_297358,
                                           "mem_300303")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_300307;
                        
                        mem_300307.references = NULL;
                        if (memblock_alloc(ctx, &mem_300307, bytes_297358,
                                           "mem_300307")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_300352_cached_sizze_305009 <
                            (size_t) bytes_300351) {
                            mem_300352 = realloc(mem_300352, bytes_300351);
                            mem_300352_cached_sizze_305009 = bytes_300351;
                        }
                        if (mem_300355_cached_sizze_305010 <
                            (size_t) bytes_300351) {
                            mem_300355 = realloc(mem_300355, bytes_300351);
                            mem_300355_cached_sizze_305010 = bytes_300351;
                        }
                        for (int64_t i_295069 = 0; i_295069 <
                             partition_sizze_289836; i_295069++) {
                            for (int64_t i_295062 = 0; i_295062 < l_n_m_289902;
                                 i_295062++) {
                                int64_t x_291966;
                                
                                x_291966 = ((int64_t *) mem_297359)[i_295069 *
                                                                    l_n_m_289902 +
                                                                    i_295062];
                                
                                double x_291967;
                                
                                x_291967 = ((double *) mem_297363)[i_295069 *
                                                                   l_n_m_289902 +
                                                                   i_295062];
                                
                                int64_t min_arg_291968 = mul64(jump_t_289755,
                                                               i_295062);
                                int64_t min_res_291969 = smin64(i_289916,
                                                                min_arg_291968);
                                int64_t defunc_0_g_res_291970 =
                                        add64((int64_t) 1, min_res_291969);
                                double defunc_2_reduce_res_291971;
                                double redout_295045 = 0.0;
                                
                                for (int64_t i_295048 = 0; i_295048 <
                                     q_l_289750; i_295048++) {
                                    bool cond_291978 = sle64(n_289745,
                                                             i_295048);
                                    int64_t defunc_0_f_res_291979;
                                    
                                    if (cond_291978) {
                                        defunc_0_f_res_291979 = (int64_t) 0;
                                    } else {
                                        int64_t i_291980 = add64(x_291966,
                                                                 i_295048);
                                        int64_t defunc_1_add_res_291981 =
                                                add64((int64_t) 1, i_291980);
                                        
                                        defunc_0_f_res_291979 =
                                            defunc_1_add_res_291981;
                                    }
                                    
                                    double defunc_0_f_res_291982;
                                    
                                    if (cond_291978) {
                                        defunc_0_f_res_291982 = 0.0;
                                    } else {
                                        int64_t i_291983 = add64(x_291966,
                                                                 i_295048);
                                        double defunc_0_add_arg_291984;
                                        
                                        defunc_0_add_arg_291984 =
                                            ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                              (i_295069 *
                                                                               ctx_param_ext_297601 +
                                                                               i_291983 *
                                                                               ctx_param_ext_297603)];
                                        defunc_0_f_res_291982 =
                                            defunc_0_add_arg_291984;
                                    }
                                    
                                    int64_t binop_p_291985 =
                                            sub64(defunc_0_f_res_291979,
                                                  defunc_0_g_res_291970);
                                    double defunc_0_f_res_291986 =
                                           sitofp_i64_f64(binop_p_291985);
                                    double abs_res_291987 =
                                           fabs(defunc_0_f_res_291986);
                                    double tmp1_291988 = abs_res_291987 /
                                           x_291967;
                                    double x_291989 = tmp1_291988 * tmp1_291988;
                                    double y_291990 = tmp1_291988 * x_291989;
                                    double tmp2_291991 = 1.0 - y_291990;
                                    double x_291992 = tmp2_291991 * tmp2_291991;
                                    double tmp3_291993 = tmp2_291991 * x_291992;
                                    double w_j_291994 = defunc_0_f_res_291982 *
                                           tmp3_291993;
                                    double xw_j_291995 = defunc_0_f_res_291986 *
                                           w_j_291994;
                                    double x2w_j_291996 =
                                           defunc_0_f_res_291986 * xw_j_291995;
                                    double defunc_1_op_res_291976 = w_j_291994 +
                                           redout_295045;
                                    
                                    ((double *) mem_300352)[i_295048] =
                                        xw_j_291995;
                                    ((double *) mem_300355)[i_295048] =
                                        x2w_j_291996;
                                    
                                    double redout_tmp_304646 =
                                           defunc_1_op_res_291976;
                                    
                                    redout_295045 = redout_tmp_304646;
                                }
                                defunc_2_reduce_res_291971 = redout_295045;
                                
                                double a_291997 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_291971;
                                double defunc_2_reduce_res_291998;
                                double redout_295051 = 0.0;
                                
                                for (int64_t i_295052 = 0; i_295052 <
                                     q_l_289750; i_295052++) {
                                    double x_292002;
                                    
                                    x_292002 =
                                        ((double *) mem_300352)[i_295052];
                                    
                                    double defunc_1_op_res_292001 = x_292002 +
                                           redout_295051;
                                    double redout_tmp_304649 =
                                           defunc_1_op_res_292001;
                                    
                                    redout_295051 = redout_tmp_304649;
                                }
                                defunc_2_reduce_res_291998 = redout_295051;
                                
                                double b_292003 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_291998;
                                double defunc_2_reduce_res_292004;
                                double redout_295053 = 0.0;
                                
                                for (int64_t i_295054 = 0; i_295054 <
                                     q_l_289750; i_295054++) {
                                    double x_292008;
                                    
                                    x_292008 =
                                        ((double *) mem_300355)[i_295054];
                                    
                                    double defunc_1_op_res_292007 = x_292008 +
                                           redout_295053;
                                    double redout_tmp_304650 =
                                           defunc_1_op_res_292007;
                                    
                                    redout_295053 = redout_tmp_304650;
                                }
                                defunc_2_reduce_res_292004 = redout_295053;
                                
                                double c_292009 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292004;
                                double x_292010 = a_291997 * c_292009;
                                double y_292011 = b_292003 * b_292003;
                                double y_292012 = x_292010 - y_292011;
                                double det1_292013 = 1.0 / y_292012;
                                double a11_292014 = c_292009 * det1_292013;
                                double x_292015 = 0.0 - b_292003;
                                double b11_292016 = det1_292013 * x_292015;
                                double c11_292017 = a_291997 * det1_292013;
                                double defunc_2_reduce_res_292018;
                                double defunc_2_reduce_res_292019;
                                double redout_295055;
                                double redout_295056;
                                
                                redout_295055 = 0.0;
                                redout_295056 = 0.0;
                                for (int64_t i_295057 = 0; i_295057 <
                                     q_l_289750; i_295057++) {
                                    bool cond_292027 = sle64(n_289745,
                                                             i_295057);
                                    int64_t defunc_0_f_res_292028;
                                    
                                    if (cond_292027) {
                                        defunc_0_f_res_292028 = (int64_t) 0;
                                    } else {
                                        int64_t i_292029 = add64(x_291966,
                                                                 i_295057);
                                        int64_t defunc_1_add_res_292030 =
                                                add64((int64_t) 1, i_292029);
                                        
                                        defunc_0_f_res_292028 =
                                            defunc_1_add_res_292030;
                                    }
                                    
                                    double defunc_0_f_res_292031;
                                    
                                    if (cond_292027) {
                                        defunc_0_f_res_292031 = 0.0;
                                    } else {
                                        int64_t i_292032 = add64(x_291966,
                                                                 i_295057);
                                        double defunc_0_add_arg_292033;
                                        
                                        defunc_0_add_arg_292033 =
                                            ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                              (i_295069 *
                                                                               ctx_param_ext_297601 +
                                                                               i_292032 *
                                                                               ctx_param_ext_297603)];
                                        defunc_0_f_res_292031 =
                                            defunc_0_add_arg_292033;
                                    }
                                    
                                    int64_t binop_p_292034 =
                                            sub64(defunc_0_f_res_292028,
                                                  defunc_0_g_res_291970);
                                    double defunc_0_f_res_292035 =
                                           sitofp_i64_f64(binop_p_292034);
                                    double abs_res_292036 =
                                           fabs(defunc_0_f_res_292035);
                                    double tmp1_292037 = abs_res_292036 /
                                           x_291967;
                                    double x_292038 = tmp1_292037 * tmp1_292037;
                                    double y_292039 = tmp1_292037 * x_292038;
                                    double tmp2_292040 = 1.0 - y_292039;
                                    double x_292041 = tmp2_292040 * tmp2_292040;
                                    double tmp3_292042 = tmp2_292040 * x_292041;
                                    double tmp4_292043 = defunc_0_f_res_292031 *
                                           tmp3_292042;
                                    double defunc_1_f_res_292044 =
                                           defunc_0_f_res_292035 * tmp4_292043;
                                    double defunc_0_f_res_292045;
                                    
                                    if (cond_292027) {
                                        defunc_0_f_res_292045 = 0.0;
                                    } else {
                                        int64_t i_292046 = add64(x_291966,
                                                                 i_295057);
                                        double defunc_0_add_arg_292047;
                                        
                                        defunc_0_add_arg_292047 =
                                            ((double *) mem_300215)[i_295069 *
                                                                    n_289745 +
                                                                    i_292046];
                                        defunc_0_f_res_292045 =
                                            defunc_0_add_arg_292047;
                                    }
                                    
                                    double x_292048 = a11_292014 * tmp4_292043;
                                    double y_292049 = b11_292016 *
                                           defunc_1_f_res_292044;
                                    double x_292050 = x_292048 + y_292049;
                                    double defunc_9_fit_fun_res_292051 =
                                           defunc_0_f_res_292045 * x_292050;
                                    double x_292052 = b11_292016 * tmp4_292043;
                                    double y_292053 = c11_292017 *
                                           defunc_1_f_res_292044;
                                    double x_292054 = x_292052 + y_292053;
                                    double defunc_9_slope_fun_res_292055 =
                                           defunc_0_f_res_292045 * x_292054;
                                    double defunc_1_op_res_292022 =
                                           defunc_9_fit_fun_res_292051 +
                                           redout_295055;
                                    double defunc_1_op_res_292025 =
                                           defunc_9_slope_fun_res_292055 +
                                           redout_295056;
                                    double redout_tmp_304651 =
                                           defunc_1_op_res_292022;
                                    double redout_tmp_304652 =
                                           defunc_1_op_res_292025;
                                    
                                    redout_295055 = redout_tmp_304651;
                                    redout_295056 = redout_tmp_304652;
                                }
                                defunc_2_reduce_res_292018 = redout_295055;
                                defunc_2_reduce_res_292019 = redout_295056;
                                ((double *) mem_300303.mem)[i_295069 *
                                                            l_n_m_289902 +
                                                            i_295062] =
                                    defunc_2_reduce_res_292018;
                                ((double *) mem_300307.mem)[i_295069 *
                                                            l_n_m_289902 +
                                                            i_295062] =
                                    defunc_2_reduce_res_292019;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_300586, &mem_300303,
                                         "mem_300303") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_300578, &mem_300307,
                                         "mem_300307") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300307, "mem_300307") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300303, "mem_300303") != 0)
                            return 1;
                    } else {
                        struct memblock mem_300427;
                        
                        mem_300427.references = NULL;
                        if (memblock_alloc(ctx, &mem_300427, bytes_297358,
                                           "mem_300427")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_300431;
                        
                        mem_300431.references = NULL;
                        if (memblock_alloc(ctx, &mem_300431, bytes_297358,
                                           "mem_300431")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_300476_cached_sizze_305011 <
                            (size_t) bytes_300475) {
                            mem_300476 = realloc(mem_300476, bytes_300475);
                            mem_300476_cached_sizze_305011 = bytes_300475;
                        }
                        if (mem_300479_cached_sizze_305012 <
                            (size_t) bytes_300475) {
                            mem_300479 = realloc(mem_300479, bytes_300475);
                            mem_300479_cached_sizze_305012 = bytes_300475;
                        }
                        if (mem_300482_cached_sizze_305013 <
                            (size_t) bytes_300475) {
                            mem_300482 = realloc(mem_300482, bytes_300475);
                            mem_300482_cached_sizze_305013 = bytes_300475;
                        }
                        if (mem_300485_cached_sizze_305014 <
                            (size_t) bytes_300475) {
                            mem_300485 = realloc(mem_300485, bytes_300475);
                            mem_300485_cached_sizze_305014 = bytes_300475;
                        }
                        for (int64_t i_295108 = 0; i_295108 <
                             partition_sizze_289836; i_295108++) {
                            for (int64_t i_295101 = 0; i_295101 < l_n_m_289902;
                                 i_295101++) {
                                int64_t x_292068;
                                
                                x_292068 = ((int64_t *) mem_297359)[i_295108 *
                                                                    l_n_m_289902 +
                                                                    i_295101];
                                
                                double x_292069;
                                
                                x_292069 = ((double *) mem_297363)[i_295108 *
                                                                   l_n_m_289902 +
                                                                   i_295101];
                                
                                int64_t min_arg_292070 = mul64(jump_t_289755,
                                                               i_295101);
                                int64_t min_res_292071 = smin64(i_289916,
                                                                min_arg_292070);
                                int64_t defunc_0_g_res_292072 =
                                        add64((int64_t) 1, min_res_292071);
                                double defunc_2_reduce_res_292073;
                                double redout_295076 = 0.0;
                                
                                for (int64_t i_295081 = 0; i_295081 <
                                     q_l_289750; i_295081++) {
                                    bool cond_292082 = sle64(n_289745,
                                                             i_295081);
                                    int64_t defunc_0_f_res_292083;
                                    
                                    if (cond_292082) {
                                        defunc_0_f_res_292083 = (int64_t) 0;
                                    } else {
                                        int64_t i_292084 = add64(x_292068,
                                                                 i_295081);
                                        int64_t defunc_1_add_res_292085 =
                                                add64((int64_t) 1, i_292084);
                                        
                                        defunc_0_f_res_292083 =
                                            defunc_1_add_res_292085;
                                    }
                                    
                                    double defunc_0_f_res_292086;
                                    
                                    if (cond_292082) {
                                        defunc_0_f_res_292086 = 0.0;
                                    } else {
                                        int64_t i_292087 = add64(x_292068,
                                                                 i_295081);
                                        double defunc_0_add_arg_292088;
                                        
                                        defunc_0_add_arg_292088 =
                                            ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                              (i_295108 *
                                                                               ctx_param_ext_297601 +
                                                                               i_292087 *
                                                                               ctx_param_ext_297603)];
                                        defunc_0_f_res_292086 =
                                            defunc_0_add_arg_292088;
                                    }
                                    
                                    int64_t binop_p_292089 =
                                            sub64(defunc_0_f_res_292083,
                                                  defunc_0_g_res_292072);
                                    double defunc_0_f_res_292090 =
                                           sitofp_i64_f64(binop_p_292089);
                                    double abs_res_292091 =
                                           fabs(defunc_0_f_res_292090);
                                    double tmp1_292092 = abs_res_292091 /
                                           x_292069;
                                    double x_292093 = tmp1_292092 * tmp1_292092;
                                    double y_292094 = tmp1_292092 * x_292093;
                                    double tmp2_292095 = 1.0 - y_292094;
                                    double x_292096 = tmp2_292095 * tmp2_292095;
                                    double tmp3_292097 = tmp2_292095 * x_292096;
                                    double w_j_292098 = defunc_0_f_res_292086 *
                                           tmp3_292097;
                                    double xw_j_292099 = defunc_0_f_res_292090 *
                                           w_j_292098;
                                    double x2w_j_292100 =
                                           defunc_0_f_res_292090 * xw_j_292099;
                                    double x3w_j_292101 =
                                           defunc_0_f_res_292090 * x2w_j_292100;
                                    double x4w_j_292102 =
                                           defunc_0_f_res_292090 * x3w_j_292101;
                                    double defunc_1_op_res_292080 = w_j_292098 +
                                           redout_295076;
                                    
                                    ((double *) mem_300476)[i_295081] =
                                        xw_j_292099;
                                    ((double *) mem_300479)[i_295081] =
                                        x2w_j_292100;
                                    ((double *) mem_300482)[i_295081] =
                                        x3w_j_292101;
                                    ((double *) mem_300485)[i_295081] =
                                        x4w_j_292102;
                                    
                                    double redout_tmp_304657 =
                                           defunc_1_op_res_292080;
                                    
                                    redout_295076 = redout_tmp_304657;
                                }
                                defunc_2_reduce_res_292073 = redout_295076;
                                
                                double a_292103 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292073;
                                double defunc_2_reduce_res_292104;
                                double redout_295086 = 0.0;
                                
                                for (int64_t i_295087 = 0; i_295087 <
                                     q_l_289750; i_295087++) {
                                    double x_292108;
                                    
                                    x_292108 =
                                        ((double *) mem_300476)[i_295087];
                                    
                                    double defunc_1_op_res_292107 = x_292108 +
                                           redout_295086;
                                    double redout_tmp_304662 =
                                           defunc_1_op_res_292107;
                                    
                                    redout_295086 = redout_tmp_304662;
                                }
                                defunc_2_reduce_res_292104 = redout_295086;
                                
                                double b_292109 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292104;
                                double defunc_2_reduce_res_292110;
                                double redout_295088 = 0.0;
                                
                                for (int64_t i_295089 = 0; i_295089 <
                                     q_l_289750; i_295089++) {
                                    double x_292114;
                                    
                                    x_292114 =
                                        ((double *) mem_300479)[i_295089];
                                    
                                    double defunc_1_op_res_292113 = x_292114 +
                                           redout_295088;
                                    double redout_tmp_304663 =
                                           defunc_1_op_res_292113;
                                    
                                    redout_295088 = redout_tmp_304663;
                                }
                                defunc_2_reduce_res_292110 = redout_295088;
                                
                                double c_292115 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292110;
                                double defunc_2_reduce_res_292116;
                                double redout_295090 = 0.0;
                                
                                for (int64_t i_295091 = 0; i_295091 <
                                     q_l_289750; i_295091++) {
                                    double x_292120;
                                    
                                    x_292120 =
                                        ((double *) mem_300482)[i_295091];
                                    
                                    double defunc_1_op_res_292119 = x_292120 +
                                           redout_295090;
                                    double redout_tmp_304664 =
                                           defunc_1_op_res_292119;
                                    
                                    redout_295090 = redout_tmp_304664;
                                }
                                defunc_2_reduce_res_292116 = redout_295090;
                                
                                double d_292121 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292116;
                                double defunc_2_reduce_res_292122;
                                double redout_295092 = 0.0;
                                
                                for (int64_t i_295093 = 0; i_295093 <
                                     q_l_289750; i_295093++) {
                                    double x_292126;
                                    
                                    x_292126 =
                                        ((double *) mem_300485)[i_295093];
                                    
                                    double defunc_1_op_res_292125 = x_292126 +
                                           redout_295092;
                                    double redout_tmp_304665 =
                                           defunc_1_op_res_292125;
                                    
                                    redout_295092 = redout_tmp_304665;
                                }
                                defunc_2_reduce_res_292122 = redout_295092;
                                
                                double e_292127 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292122;
                                double x_292128 = c_292115 * e_292127;
                                double y_292129 = d_292121 * d_292121;
                                double a12_292130 = x_292128 - y_292129;
                                double x_292131 = c_292115 * d_292121;
                                double y_292132 = b_292109 * e_292127;
                                double b12_292133 = x_292131 - y_292132;
                                double x_292134 = b_292109 * d_292121;
                                double y_292135 = c_292115 * c_292115;
                                double c12_292136 = x_292134 - y_292135;
                                double x_292137 = a_292103 * e_292127;
                                double b2_292138 = x_292137 - y_292135;
                                double x_292139 = b_292109 * c_292115;
                                double y_292140 = a_292103 * d_292121;
                                double c2_292141 = x_292139 - y_292140;
                                double x_292142 = a_292103 * a12_292130;
                                double y_292143 = b_292109 * b12_292133;
                                double x_292144 = x_292142 + y_292143;
                                double y_292145 = c_292115 * c12_292136;
                                double y_292146 = x_292144 + y_292145;
                                double det_292147 = 1.0 / y_292146;
                                double a12_292148 = a12_292130 * det_292147;
                                double b12_292149 = b12_292133 * det_292147;
                                double c12_292150 = c12_292136 * det_292147;
                                double b2_292151 = b2_292138 * det_292147;
                                double c2_292152 = c2_292141 * det_292147;
                                double defunc_2_reduce_res_292153;
                                double defunc_2_reduce_res_292154;
                                double redout_295094;
                                double redout_295095;
                                
                                redout_295094 = 0.0;
                                redout_295095 = 0.0;
                                for (int64_t i_295096 = 0; i_295096 <
                                     q_l_289750; i_295096++) {
                                    bool cond_292162 = sle64(n_289745,
                                                             i_295096);
                                    int64_t defunc_0_f_res_292163;
                                    
                                    if (cond_292162) {
                                        defunc_0_f_res_292163 = (int64_t) 0;
                                    } else {
                                        int64_t i_292164 = add64(x_292068,
                                                                 i_295096);
                                        int64_t defunc_1_add_res_292165 =
                                                add64((int64_t) 1, i_292164);
                                        
                                        defunc_0_f_res_292163 =
                                            defunc_1_add_res_292165;
                                    }
                                    
                                    double defunc_0_f_res_292166;
                                    
                                    if (cond_292162) {
                                        defunc_0_f_res_292166 = 0.0;
                                    } else {
                                        int64_t i_292167 = add64(x_292068,
                                                                 i_295096);
                                        double defunc_0_add_arg_292168;
                                        
                                        defunc_0_add_arg_292168 =
                                            ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                              (i_295108 *
                                                                               ctx_param_ext_297601 +
                                                                               i_292167 *
                                                                               ctx_param_ext_297603)];
                                        defunc_0_f_res_292166 =
                                            defunc_0_add_arg_292168;
                                    }
                                    
                                    int64_t binop_p_292169 =
                                            sub64(defunc_0_f_res_292163,
                                                  defunc_0_g_res_292072);
                                    double defunc_0_f_res_292170 =
                                           sitofp_i64_f64(binop_p_292169);
                                    double abs_res_292171 =
                                           fabs(defunc_0_f_res_292170);
                                    double tmp1_292172 = abs_res_292171 /
                                           x_292069;
                                    double x_292173 = tmp1_292172 * tmp1_292172;
                                    double y_292174 = tmp1_292172 * x_292173;
                                    double tmp2_292175 = 1.0 - y_292174;
                                    double x_292176 = tmp2_292175 * tmp2_292175;
                                    double tmp3_292177 = tmp2_292175 * x_292176;
                                    double tmp4_292178 = defunc_0_f_res_292166 *
                                           tmp3_292177;
                                    double defunc_1_f_res_292179 =
                                           defunc_0_f_res_292170 * tmp4_292178;
                                    double defunc_1_f_res_292180 =
                                           defunc_0_f_res_292170 *
                                           defunc_1_f_res_292179;
                                    double defunc_0_f_res_292181;
                                    
                                    if (cond_292162) {
                                        defunc_0_f_res_292181 = 0.0;
                                    } else {
                                        int64_t i_292182 = add64(x_292068,
                                                                 i_295096);
                                        double defunc_0_add_arg_292183;
                                        
                                        defunc_0_add_arg_292183 =
                                            ((double *) mem_300215)[i_295108 *
                                                                    n_289745 +
                                                                    i_292182];
                                        defunc_0_f_res_292181 =
                                            defunc_0_add_arg_292183;
                                    }
                                    
                                    double x_292184 = a12_292148 * tmp4_292178;
                                    double y_292185 = b12_292149 *
                                           defunc_1_f_res_292179;
                                    double x_292186 = x_292184 + y_292185;
                                    double y_292187 = c12_292150 *
                                           defunc_1_f_res_292180;
                                    double x_292188 = x_292186 + y_292187;
                                    double defunc_9_fit_fun_res_292189 =
                                           defunc_0_f_res_292181 * x_292188;
                                    double x_292190 = b12_292149 * tmp4_292178;
                                    double y_292191 = b2_292151 *
                                           defunc_1_f_res_292179;
                                    double x_292192 = x_292190 + y_292191;
                                    double y_292193 = c2_292152 *
                                           defunc_1_f_res_292180;
                                    double x_292194 = x_292192 + y_292193;
                                    double defunc_9_slope_fun_res_292195 =
                                           defunc_0_f_res_292181 * x_292194;
                                    double defunc_1_op_res_292157 =
                                           defunc_9_fit_fun_res_292189 +
                                           redout_295094;
                                    double defunc_1_op_res_292160 =
                                           defunc_9_slope_fun_res_292195 +
                                           redout_295095;
                                    double redout_tmp_304666 =
                                           defunc_1_op_res_292157;
                                    double redout_tmp_304667 =
                                           defunc_1_op_res_292160;
                                    
                                    redout_295094 = redout_tmp_304666;
                                    redout_295095 = redout_tmp_304667;
                                }
                                defunc_2_reduce_res_292153 = redout_295094;
                                defunc_2_reduce_res_292154 = redout_295095;
                                ((double *) mem_300427.mem)[i_295108 *
                                                            l_n_m_289902 +
                                                            i_295101] =
                                    defunc_2_reduce_res_292153;
                                ((double *) mem_300431.mem)[i_295108 *
                                                            l_n_m_289902 +
                                                            i_295101] =
                                    defunc_2_reduce_res_292154;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_300586, &mem_300427,
                                         "mem_300427") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_300578, &mem_300431,
                                         "mem_300431") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300431, "mem_300431") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300427, "mem_300427") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_300602, &ext_mem_300586,
                                     "ext_mem_300586") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_300594, &ext_mem_300578,
                                     "ext_mem_300578") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_300578,
                                       "ext_mem_300578") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_300586,
                                       "ext_mem_300586") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_301401, &ext_mem_300602,
                                 "ext_mem_300602") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_301393, &ext_mem_300594,
                                 "ext_mem_300594") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_300594, "ext_mem_300594") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_300602, "ext_mem_300602") != 0)
                    return 1;
            } else {
                bool cond_292198 = sle64(jump_threshold_2_289760,
                                         jump_l_289756);
                bool cond_t_res_292199 = slt64(q_l_289750,
                                               q_threshold_1_289761);
                bool x_292200 = cond_292198 && cond_t_res_292199;
                struct memblock ext_mem_301385;
                
                ext_mem_301385.references = NULL;
                
                struct memblock ext_mem_301377;
                
                ext_mem_301377.references = NULL;
                if (x_292200) {
                    bool match_lit_292203 = (int64_t) 0 == d_l_289753;
                    int64_t binop_y_300639 = (int64_t) 8 * q_l_289750;
                    int64_t bytes_300640 = smax64((int64_t) 0, binop_y_300639);
                    struct memblock ext_mem_301008;
                    
                    ext_mem_301008.references = NULL;
                    
                    struct memblock ext_mem_301000;
                    
                    ext_mem_301000.references = NULL;
                    if (match_lit_292203) {
                        struct memblock mem_300613;
                        
                        mem_300613.references = NULL;
                        if (memblock_alloc(ctx, &mem_300613, bytes_297358,
                                           "mem_300613")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_304668 = 0; i_304668 <
                             partition_sizze_289836; i_304668++) {
                            for (int64_t i_304669 = 0; i_304669 < l_n_m_289902;
                                 i_304669++) {
                                ((double *) mem_300613.mem)[i_304668 *
                                                            l_n_m_289902 +
                                                            i_304669] = 0.0;
                            }
                        }
                        
                        struct memblock mem_300617;
                        
                        mem_300617.references = NULL;
                        if (memblock_alloc(ctx, &mem_300617, bytes_297358,
                                           "mem_300617")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_300641_cached_sizze_305015 <
                            (size_t) bytes_300640) {
                            mem_300641 = realloc(mem_300641, bytes_300640);
                            mem_300641_cached_sizze_305015 = bytes_300640;
                        }
                        for (int64_t i_295124 = 0; i_295124 <
                             partition_sizze_289836; i_295124++) {
                            for (int64_t i_295120 = 0; i_295120 < l_n_m_289902;
                                 i_295120++) {
                                int64_t x_292215;
                                
                                x_292215 = ((int64_t *) mem_297359)[i_295124 *
                                                                    l_n_m_289902 +
                                                                    i_295120];
                                
                                double x_292216;
                                
                                x_292216 = ((double *) mem_297363)[i_295124 *
                                                                   l_n_m_289902 +
                                                                   i_295120];
                                
                                int64_t min_arg_292217 = mul64(jump_t_289755,
                                                               i_295120);
                                int64_t min_res_292218 = smin64(i_289916,
                                                                min_arg_292217);
                                int64_t defunc_0_g_res_292219 =
                                        add64((int64_t) 1, min_res_292218);
                                double defunc_2_reduce_res_292220;
                                double redout_295112 = 0.0;
                                
                                for (int64_t i_295114 = 0; i_295114 <
                                     q_l_289750; i_295114++) {
                                    bool cond_292226 = sle64(n_289745,
                                                             i_295114);
                                    int64_t defunc_0_f_res_292227;
                                    
                                    if (cond_292226) {
                                        defunc_0_f_res_292227 = (int64_t) 0;
                                    } else {
                                        int64_t i_292228 = add64(x_292215,
                                                                 i_295114);
                                        int64_t defunc_1_add_res_292229 =
                                                add64((int64_t) 1, i_292228);
                                        
                                        defunc_0_f_res_292227 =
                                            defunc_1_add_res_292229;
                                    }
                                    
                                    double defunc_0_f_res_292230;
                                    
                                    if (cond_292226) {
                                        defunc_0_f_res_292230 = 0.0;
                                    } else {
                                        int64_t i_292231 = add64(x_292215,
                                                                 i_295114);
                                        double defunc_0_add_arg_292232;
                                        
                                        defunc_0_add_arg_292232 =
                                            ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                              (i_295124 *
                                                                               ctx_param_ext_297601 +
                                                                               i_292231 *
                                                                               ctx_param_ext_297603)];
                                        defunc_0_f_res_292230 =
                                            defunc_0_add_arg_292232;
                                    }
                                    
                                    int64_t binop_p_292233 =
                                            sub64(defunc_0_f_res_292227,
                                                  defunc_0_g_res_292219);
                                    double defunc_0_f_res_292234 =
                                           sitofp_i64_f64(binop_p_292233);
                                    double abs_res_292235 =
                                           fabs(defunc_0_f_res_292234);
                                    double tmp1_292236 = abs_res_292235 /
                                           x_292216;
                                    double x_292237 = tmp1_292236 * tmp1_292236;
                                    double y_292238 = tmp1_292236 * x_292237;
                                    double tmp2_292239 = 1.0 - y_292238;
                                    double x_292240 = tmp2_292239 * tmp2_292239;
                                    double tmp3_292241 = tmp2_292239 * x_292240;
                                    double tmp4_292242 = defunc_0_f_res_292230 *
                                           tmp3_292241;
                                    double defunc_1_op_res_292224 =
                                           tmp4_292242 + redout_295112;
                                    
                                    ((double *) mem_300641)[i_295114] =
                                        tmp4_292242;
                                    
                                    double redout_tmp_304672 =
                                           defunc_1_op_res_292224;
                                    
                                    redout_295112 = redout_tmp_304672;
                                }
                                defunc_2_reduce_res_292220 = redout_295112;
                                
                                double a_292243 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292220;
                                double a0_292244 = 1.0 / a_292243;
                                double defunc_2_reduce_res_292245;
                                double redout_295116 = 0.0;
                                
                                for (int64_t i_295117 = 0; i_295117 <
                                     q_l_289750; i_295117++) {
                                    double x_292250;
                                    
                                    x_292250 =
                                        ((double *) mem_300641)[i_295117];
                                    
                                    bool cond_292251 = sle64(n_289745,
                                                             i_295117);
                                    double defunc_0_f_res_292252;
                                    
                                    if (cond_292251) {
                                        defunc_0_f_res_292252 = 0.0;
                                    } else {
                                        int64_t i_292253 = add64(x_292215,
                                                                 i_295117);
                                        double defunc_0_add_arg_292254;
                                        
                                        defunc_0_add_arg_292254 =
                                            ((double *) mem_300215)[i_295124 *
                                                                    n_289745 +
                                                                    i_292253];
                                        defunc_0_f_res_292252 =
                                            defunc_0_add_arg_292254;
                                    }
                                    
                                    double x_292255 = a0_292244 * x_292250;
                                    double defunc_9_fit_fun_res_292256 =
                                           defunc_0_f_res_292252 * x_292255;
                                    double defunc_1_op_res_292248 =
                                           defunc_9_fit_fun_res_292256 +
                                           redout_295116;
                                    double redout_tmp_304674 =
                                           defunc_1_op_res_292248;
                                    
                                    redout_295116 = redout_tmp_304674;
                                }
                                defunc_2_reduce_res_292245 = redout_295116;
                                ((double *) mem_300617.mem)[i_295124 *
                                                            l_n_m_289902 +
                                                            i_295120] =
                                    defunc_2_reduce_res_292245;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_301008, &mem_300617,
                                         "mem_300617") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_301000, &mem_300613,
                                         "mem_300613") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300617, "mem_300617") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300613, "mem_300613") != 0)
                            return 1;
                    } else {
                        bool match_lit_292259 = (int64_t) 1 == d_l_289753;
                        int64_t binop_y_300726 = (int64_t) 8 * q_l_289750;
                        int64_t bytes_300727 = smax64((int64_t) 0,
                                                      binop_y_300726);
                        int64_t binop_y_300865 = (int64_t) 8 * q_l_289750;
                        int64_t bytes_300866 = smax64((int64_t) 0,
                                                      binop_y_300865);
                        struct memblock ext_mem_300992;
                        
                        ext_mem_300992.references = NULL;
                        
                        struct memblock ext_mem_300984;
                        
                        ext_mem_300984.references = NULL;
                        if (match_lit_292259) {
                            struct memblock mem_300679;
                            
                            mem_300679.references = NULL;
                            if (memblock_alloc(ctx, &mem_300679, bytes_297358,
                                               "mem_300679")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_300683;
                            
                            mem_300683.references = NULL;
                            if (memblock_alloc(ctx, &mem_300683, bytes_297358,
                                               "mem_300683")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_300728_cached_sizze_305016 <
                                (size_t) bytes_300727) {
                                mem_300728 = realloc(mem_300728, bytes_300727);
                                mem_300728_cached_sizze_305016 = bytes_300727;
                            }
                            if (mem_300731_cached_sizze_305017 <
                                (size_t) bytes_300727) {
                                mem_300731 = realloc(mem_300731, bytes_300727);
                                mem_300731_cached_sizze_305017 = bytes_300727;
                            }
                            if (mem_300734_cached_sizze_305018 <
                                (size_t) bytes_300727) {
                                mem_300734 = realloc(mem_300734, bytes_300727);
                                mem_300734_cached_sizze_305018 = bytes_300727;
                            }
                            for (int64_t i_295155 = 0; i_295155 <
                                 partition_sizze_289836; i_295155++) {
                                for (int64_t i_295148 = 0; i_295148 <
                                     l_n_m_289902; i_295148++) {
                                    int64_t x_292272;
                                    
                                    x_292272 =
                                        ((int64_t *) mem_297359)[i_295155 *
                                                                 l_n_m_289902 +
                                                                 i_295148];
                                    
                                    double x_292273;
                                    
                                    x_292273 =
                                        ((double *) mem_297363)[i_295155 *
                                                                l_n_m_289902 +
                                                                i_295148];
                                    
                                    int64_t min_arg_292274 =
                                            mul64(jump_t_289755, i_295148);
                                    int64_t min_res_292275 = smin64(i_289916,
                                                                    min_arg_292274);
                                    int64_t defunc_0_g_res_292276 =
                                            add64((int64_t) 1, min_res_292275);
                                    double defunc_2_reduce_res_292299;
                                    double redout_295129 = 0.0;
                                    
                                    for (int64_t i_295133 = 0; i_295133 <
                                         q_l_289750; i_295133++) {
                                        bool cond_292307 = sle64(n_289745,
                                                                 i_295133);
                                        int64_t defunc_0_f_res_292308;
                                        
                                        if (cond_292307) {
                                            defunc_0_f_res_292308 = (int64_t) 0;
                                        } else {
                                            int64_t i_292309 = add64(x_292272,
                                                                     i_295133);
                                            int64_t defunc_1_add_res_292310 =
                                                    add64((int64_t) 1,
                                                          i_292309);
                                            
                                            defunc_0_f_res_292308 =
                                                defunc_1_add_res_292310;
                                        }
                                        
                                        double defunc_0_f_res_292311;
                                        
                                        if (cond_292307) {
                                            defunc_0_f_res_292311 = 0.0;
                                        } else {
                                            int64_t i_292312 = add64(x_292272,
                                                                     i_295133);
                                            double defunc_0_add_arg_292313;
                                            
                                            defunc_0_add_arg_292313 =
                                                ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                                  (i_295155 *
                                                                                   ctx_param_ext_297601 +
                                                                                   i_292312 *
                                                                                   ctx_param_ext_297603)];
                                            defunc_0_f_res_292311 =
                                                defunc_0_add_arg_292313;
                                        }
                                        
                                        int64_t binop_p_292314 =
                                                sub64(defunc_0_f_res_292308,
                                                      defunc_0_g_res_292276);
                                        double defunc_0_f_res_292315 =
                                               sitofp_i64_f64(binop_p_292314);
                                        double abs_res_292316 =
                                               fabs(defunc_0_f_res_292315);
                                        double tmp1_292317 = abs_res_292316 /
                                               x_292273;
                                        double x_292318 = tmp1_292317 *
                                               tmp1_292317;
                                        double y_292319 = tmp1_292317 *
                                               x_292318;
                                        double tmp2_292320 = 1.0 - y_292319;
                                        double x_292321 = tmp2_292320 *
                                               tmp2_292320;
                                        double tmp3_292322 = tmp2_292320 *
                                               x_292321;
                                        double tmp4_292323 =
                                               defunc_0_f_res_292311 *
                                               tmp3_292322;
                                        double defunc_1_f_res_292324 =
                                               defunc_0_f_res_292315 *
                                               tmp4_292323;
                                        double defunc_1_op_res_292305 =
                                               tmp4_292323 + redout_295129;
                                        
                                        ((double *) mem_300728)[i_295133] =
                                            defunc_1_f_res_292324;
                                        ((double *) mem_300731)[i_295133] =
                                            defunc_0_f_res_292315;
                                        ((double *) mem_300734)[i_295133] =
                                            tmp4_292323;
                                        
                                        double redout_tmp_304679 =
                                               defunc_1_op_res_292305;
                                        
                                        redout_295129 = redout_tmp_304679;
                                    }
                                    defunc_2_reduce_res_292299 = redout_295129;
                                    
                                    double a_292329 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292299;
                                    double defunc_2_reduce_res_292330;
                                    double redout_295137 = 0.0;
                                    
                                    for (int64_t i_295138 = 0; i_295138 <
                                         q_l_289750; i_295138++) {
                                        double x_292334;
                                        
                                        x_292334 =
                                            ((double *) mem_300728)[i_295138];
                                        
                                        double defunc_1_op_res_292333 =
                                               x_292334 + redout_295137;
                                        double redout_tmp_304683 =
                                               defunc_1_op_res_292333;
                                        
                                        redout_295137 = redout_tmp_304683;
                                    }
                                    defunc_2_reduce_res_292330 = redout_295137;
                                    
                                    double b_292335 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292330;
                                    double defunc_2_reduce_res_292336;
                                    double redout_295139 = 0.0;
                                    
                                    for (int64_t i_295140 = 0; i_295140 <
                                         q_l_289750; i_295140++) {
                                        double x_292340;
                                        
                                        x_292340 =
                                            ((double *) mem_300731)[i_295140];
                                        
                                        double x_292341;
                                        
                                        x_292341 =
                                            ((double *) mem_300728)[i_295140];
                                        
                                        double defunc_1_f_res_292342 =
                                               x_292340 * x_292341;
                                        double defunc_1_op_res_292339 =
                                               defunc_1_f_res_292342 +
                                               redout_295139;
                                        double redout_tmp_304684 =
                                               defunc_1_op_res_292339;
                                        
                                        redout_295139 = redout_tmp_304684;
                                    }
                                    defunc_2_reduce_res_292336 = redout_295139;
                                    
                                    double c_292343 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292336;
                                    double x_292344 = a_292329 * c_292343;
                                    double y_292345 = b_292335 * b_292335;
                                    double y_292346 = x_292344 - y_292345;
                                    double det1_292347 = 1.0 / y_292346;
                                    double a11_292348 = c_292343 * det1_292347;
                                    double x_292349 = 0.0 - b_292335;
                                    double b11_292350 = det1_292347 * x_292349;
                                    double c11_292351 = a_292329 * det1_292347;
                                    double defunc_2_reduce_res_292352;
                                    double defunc_2_reduce_res_292353;
                                    double redout_295141;
                                    double redout_295142;
                                    
                                    redout_295141 = 0.0;
                                    redout_295142 = 0.0;
                                    for (int64_t i_295143 = 0; i_295143 <
                                         q_l_289750; i_295143++) {
                                        double x_292361;
                                        
                                        x_292361 =
                                            ((double *) mem_300734)[i_295143];
                                        
                                        double x_292362;
                                        
                                        x_292362 =
                                            ((double *) mem_300728)[i_295143];
                                        
                                        bool cond_292363 = sle64(n_289745,
                                                                 i_295143);
                                        double defunc_0_f_res_292364;
                                        
                                        if (cond_292363) {
                                            defunc_0_f_res_292364 = 0.0;
                                        } else {
                                            int64_t i_292365 = add64(x_292272,
                                                                     i_295143);
                                            double defunc_0_add_arg_292366;
                                            
                                            defunc_0_add_arg_292366 =
                                                ((double *) mem_300215)[i_295155 *
                                                                        n_289745 +
                                                                        i_292365];
                                            defunc_0_f_res_292364 =
                                                defunc_0_add_arg_292366;
                                        }
                                        
                                        double x_292367 = a11_292348 * x_292361;
                                        double y_292368 = b11_292350 * x_292362;
                                        double x_292369 = x_292367 + y_292368;
                                        double defunc_9_fit_fun_res_292370 =
                                               defunc_0_f_res_292364 * x_292369;
                                        double x_292371 = b11_292350 * x_292361;
                                        double y_292372 = c11_292351 * x_292362;
                                        double x_292373 = x_292371 + y_292372;
                                        double defunc_9_slope_fun_res_292374 =
                                               defunc_0_f_res_292364 * x_292373;
                                        double defunc_1_op_res_292356 =
                                               defunc_9_fit_fun_res_292370 +
                                               redout_295141;
                                        double defunc_1_op_res_292359 =
                                               defunc_9_slope_fun_res_292374 +
                                               redout_295142;
                                        double redout_tmp_304685 =
                                               defunc_1_op_res_292356;
                                        double redout_tmp_304686 =
                                               defunc_1_op_res_292359;
                                        
                                        redout_295141 = redout_tmp_304685;
                                        redout_295142 = redout_tmp_304686;
                                    }
                                    defunc_2_reduce_res_292352 = redout_295141;
                                    defunc_2_reduce_res_292353 = redout_295142;
                                    ((double *) mem_300679.mem)[i_295155 *
                                                                l_n_m_289902 +
                                                                i_295148] =
                                        defunc_2_reduce_res_292352;
                                    ((double *) mem_300683.mem)[i_295155 *
                                                                l_n_m_289902 +
                                                                i_295148] =
                                        defunc_2_reduce_res_292353;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_300992, &mem_300679,
                                             "mem_300679") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_300984, &mem_300683,
                                             "mem_300683") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300683,
                                               "mem_300683") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300679,
                                               "mem_300679") != 0)
                                return 1;
                        } else {
                            struct memblock mem_300818;
                            
                            mem_300818.references = NULL;
                            if (memblock_alloc(ctx, &mem_300818, bytes_297358,
                                               "mem_300818")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_300822;
                            
                            mem_300822.references = NULL;
                            if (memblock_alloc(ctx, &mem_300822, bytes_297358,
                                               "mem_300822")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_300867_cached_sizze_305019 <
                                (size_t) bytes_300866) {
                                mem_300867 = realloc(mem_300867, bytes_300866);
                                mem_300867_cached_sizze_305019 = bytes_300866;
                            }
                            if (mem_300870_cached_sizze_305020 <
                                (size_t) bytes_300866) {
                                mem_300870 = realloc(mem_300870, bytes_300866);
                                mem_300870_cached_sizze_305020 = bytes_300866;
                            }
                            if (mem_300873_cached_sizze_305021 <
                                (size_t) bytes_300866) {
                                mem_300873 = realloc(mem_300873, bytes_300866);
                                mem_300873_cached_sizze_305021 = bytes_300866;
                            }
                            if (mem_300912_cached_sizze_305022 <
                                (size_t) bytes_300866) {
                                mem_300912 = realloc(mem_300912, bytes_300866);
                                mem_300912_cached_sizze_305022 = bytes_300866;
                            }
                            if (mem_300915_cached_sizze_305023 <
                                (size_t) bytes_300866) {
                                mem_300915 = realloc(mem_300915, bytes_300866);
                                mem_300915_cached_sizze_305023 = bytes_300866;
                            }
                            for (int64_t i_295198 = 0; i_295198 <
                                 partition_sizze_289836; i_295198++) {
                                for (int64_t i_295191 = 0; i_295191 <
                                     l_n_m_289902; i_295191++) {
                                    int64_t x_292387;
                                    
                                    x_292387 =
                                        ((int64_t *) mem_297359)[i_295198 *
                                                                 l_n_m_289902 +
                                                                 i_295191];
                                    
                                    double x_292388;
                                    
                                    x_292388 =
                                        ((double *) mem_297363)[i_295198 *
                                                                l_n_m_289902 +
                                                                i_295191];
                                    
                                    int64_t min_arg_292389 =
                                            mul64(jump_t_289755, i_295191);
                                    int64_t min_res_292390 = smin64(i_289916,
                                                                    min_arg_292389);
                                    int64_t defunc_0_g_res_292391 =
                                            add64((int64_t) 1, min_res_292390);
                                    
                                    for (int64_t i_295164 = 0; i_295164 <
                                         q_l_289750; i_295164++) {
                                        bool cond_292396 = sle64(n_289745,
                                                                 i_295164);
                                        int64_t defunc_0_f_res_292397;
                                        
                                        if (cond_292396) {
                                            defunc_0_f_res_292397 = (int64_t) 0;
                                        } else {
                                            int64_t i_292398 = add64(x_292387,
                                                                     i_295164);
                                            int64_t defunc_1_add_res_292399 =
                                                    add64((int64_t) 1,
                                                          i_292398);
                                            
                                            defunc_0_f_res_292397 =
                                                defunc_1_add_res_292399;
                                        }
                                        
                                        double defunc_0_f_res_292400;
                                        
                                        if (cond_292396) {
                                            defunc_0_f_res_292400 = 0.0;
                                        } else {
                                            int64_t i_292401 = add64(x_292387,
                                                                     i_295164);
                                            double defunc_0_add_arg_292402;
                                            
                                            defunc_0_add_arg_292402 =
                                                ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                                  (i_295198 *
                                                                                   ctx_param_ext_297601 +
                                                                                   i_292401 *
                                                                                   ctx_param_ext_297603)];
                                            defunc_0_f_res_292400 =
                                                defunc_0_add_arg_292402;
                                        }
                                        
                                        int64_t binop_p_292403 =
                                                sub64(defunc_0_f_res_292397,
                                                      defunc_0_g_res_292391);
                                        double defunc_0_f_res_292404 =
                                               sitofp_i64_f64(binop_p_292403);
                                        double abs_res_292405 =
                                               fabs(defunc_0_f_res_292404);
                                        double tmp1_292406 = abs_res_292405 /
                                               x_292388;
                                        double x_292407 = tmp1_292406 *
                                               tmp1_292406;
                                        double y_292408 = tmp1_292406 *
                                               x_292407;
                                        double tmp2_292409 = 1.0 - y_292408;
                                        double x_292410 = tmp2_292409 *
                                               tmp2_292409;
                                        double tmp3_292411 = tmp2_292409 *
                                               x_292410;
                                        double tmp4_292412 =
                                               defunc_0_f_res_292400 *
                                               tmp3_292411;
                                        double defunc_1_f_res_292413 =
                                               defunc_0_f_res_292404 *
                                               tmp4_292412;
                                        
                                        ((double *) mem_300867)[i_295164] =
                                            defunc_1_f_res_292413;
                                        ((double *) mem_300870)[i_295164] =
                                            defunc_0_f_res_292404;
                                        ((double *) mem_300873)[i_295164] =
                                            tmp4_292412;
                                    }
                                    
                                    double defunc_2_reduce_res_292420;
                                    double redout_295170 = 0.0;
                                    
                                    for (int64_t i_295173 = 0; i_295173 <
                                         q_l_289750; i_295173++) {
                                        double x_292426;
                                        
                                        x_292426 =
                                            ((double *) mem_300870)[i_295173];
                                        
                                        double x_292427;
                                        
                                        x_292427 =
                                            ((double *) mem_300867)[i_295173];
                                        
                                        double x_292428;
                                        
                                        x_292428 =
                                            ((double *) mem_300873)[i_295173];
                                        
                                        double defunc_1_f_res_292429 =
                                               x_292426 * x_292427;
                                        double defunc_1_f_res_292430 =
                                               x_292426 * defunc_1_f_res_292429;
                                        double defunc_1_op_res_292425 =
                                               x_292428 + redout_295170;
                                        
                                        ((double *) mem_300912)[i_295173] =
                                            defunc_1_f_res_292430;
                                        ((double *) mem_300915)[i_295173] =
                                            defunc_1_f_res_292429;
                                        
                                        double redout_tmp_304694 =
                                               defunc_1_op_res_292425;
                                        
                                        redout_295170 = redout_tmp_304694;
                                    }
                                    defunc_2_reduce_res_292420 = redout_295170;
                                    
                                    double a_292434 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292420;
                                    double defunc_2_reduce_res_292435;
                                    double redout_295176 = 0.0;
                                    
                                    for (int64_t i_295177 = 0; i_295177 <
                                         q_l_289750; i_295177++) {
                                        double x_292439;
                                        
                                        x_292439 =
                                            ((double *) mem_300867)[i_295177];
                                        
                                        double defunc_1_op_res_292438 =
                                               x_292439 + redout_295176;
                                        double redout_tmp_304697 =
                                               defunc_1_op_res_292438;
                                        
                                        redout_295176 = redout_tmp_304697;
                                    }
                                    defunc_2_reduce_res_292435 = redout_295176;
                                    
                                    double b_292440 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292435;
                                    double defunc_2_reduce_res_292441;
                                    double redout_295178 = 0.0;
                                    
                                    for (int64_t i_295179 = 0; i_295179 <
                                         q_l_289750; i_295179++) {
                                        double x_292445;
                                        
                                        x_292445 =
                                            ((double *) mem_300915)[i_295179];
                                        
                                        double defunc_1_op_res_292444 =
                                               x_292445 + redout_295178;
                                        double redout_tmp_304698 =
                                               defunc_1_op_res_292444;
                                        
                                        redout_295178 = redout_tmp_304698;
                                    }
                                    defunc_2_reduce_res_292441 = redout_295178;
                                    
                                    double c_292446 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292441;
                                    double defunc_2_reduce_res_292447;
                                    double redout_295180 = 0.0;
                                    
                                    for (int64_t i_295181 = 0; i_295181 <
                                         q_l_289750; i_295181++) {
                                        double x_292451;
                                        
                                        x_292451 =
                                            ((double *) mem_300912)[i_295181];
                                        
                                        double defunc_1_op_res_292450 =
                                               x_292451 + redout_295180;
                                        double redout_tmp_304699 =
                                               defunc_1_op_res_292450;
                                        
                                        redout_295180 = redout_tmp_304699;
                                    }
                                    defunc_2_reduce_res_292447 = redout_295180;
                                    
                                    double d_292452 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292447;
                                    double defunc_2_reduce_res_292453;
                                    double redout_295182 = 0.0;
                                    
                                    for (int64_t i_295183 = 0; i_295183 <
                                         q_l_289750; i_295183++) {
                                        double x_292457;
                                        
                                        x_292457 =
                                            ((double *) mem_300870)[i_295183];
                                        
                                        double x_292458;
                                        
                                        x_292458 =
                                            ((double *) mem_300912)[i_295183];
                                        
                                        double defunc_1_f_res_292459 =
                                               x_292457 * x_292458;
                                        double defunc_1_op_res_292456 =
                                               defunc_1_f_res_292459 +
                                               redout_295182;
                                        double redout_tmp_304700 =
                                               defunc_1_op_res_292456;
                                        
                                        redout_295182 = redout_tmp_304700;
                                    }
                                    defunc_2_reduce_res_292453 = redout_295182;
                                    
                                    double e_292460 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292453;
                                    double x_292461 = c_292446 * e_292460;
                                    double y_292462 = d_292452 * d_292452;
                                    double a12_292463 = x_292461 - y_292462;
                                    double x_292464 = c_292446 * d_292452;
                                    double y_292465 = b_292440 * e_292460;
                                    double b12_292466 = x_292464 - y_292465;
                                    double x_292467 = b_292440 * d_292452;
                                    double y_292468 = c_292446 * c_292446;
                                    double c12_292469 = x_292467 - y_292468;
                                    double x_292470 = a_292434 * e_292460;
                                    double b2_292471 = x_292470 - y_292468;
                                    double x_292472 = b_292440 * c_292446;
                                    double y_292473 = a_292434 * d_292452;
                                    double c2_292474 = x_292472 - y_292473;
                                    double x_292475 = a_292434 * a12_292463;
                                    double y_292476 = b_292440 * b12_292466;
                                    double x_292477 = x_292475 + y_292476;
                                    double y_292478 = c_292446 * c12_292469;
                                    double y_292479 = x_292477 + y_292478;
                                    double det_292480 = 1.0 / y_292479;
                                    double a12_292481 = a12_292463 * det_292480;
                                    double b12_292482 = b12_292466 * det_292480;
                                    double c12_292483 = c12_292469 * det_292480;
                                    double b2_292484 = b2_292471 * det_292480;
                                    double c2_292485 = c2_292474 * det_292480;
                                    double defunc_2_reduce_res_292486;
                                    double defunc_2_reduce_res_292487;
                                    double redout_295184;
                                    double redout_295185;
                                    
                                    redout_295184 = 0.0;
                                    redout_295185 = 0.0;
                                    for (int64_t i_295186 = 0; i_295186 <
                                         q_l_289750; i_295186++) {
                                        double x_292495;
                                        
                                        x_292495 =
                                            ((double *) mem_300873)[i_295186];
                                        
                                        double x_292496;
                                        
                                        x_292496 =
                                            ((double *) mem_300867)[i_295186];
                                        
                                        double x_292497;
                                        
                                        x_292497 =
                                            ((double *) mem_300915)[i_295186];
                                        
                                        bool cond_292498 = sle64(n_289745,
                                                                 i_295186);
                                        double defunc_0_f_res_292499;
                                        
                                        if (cond_292498) {
                                            defunc_0_f_res_292499 = 0.0;
                                        } else {
                                            int64_t i_292500 = add64(x_292387,
                                                                     i_295186);
                                            double defunc_0_add_arg_292501;
                                            
                                            defunc_0_add_arg_292501 =
                                                ((double *) mem_300215)[i_295198 *
                                                                        n_289745 +
                                                                        i_292500];
                                            defunc_0_f_res_292499 =
                                                defunc_0_add_arg_292501;
                                        }
                                        
                                        double x_292502 = a12_292481 * x_292495;
                                        double y_292503 = b12_292482 * x_292496;
                                        double x_292504 = x_292502 + y_292503;
                                        double y_292505 = c12_292483 * x_292497;
                                        double x_292506 = x_292504 + y_292505;
                                        double defunc_9_fit_fun_res_292507 =
                                               defunc_0_f_res_292499 * x_292506;
                                        double x_292508 = b12_292482 * x_292495;
                                        double y_292509 = b2_292484 * x_292496;
                                        double x_292510 = x_292508 + y_292509;
                                        double y_292511 = c2_292485 * x_292497;
                                        double x_292512 = x_292510 + y_292511;
                                        double defunc_9_slope_fun_res_292513 =
                                               defunc_0_f_res_292499 * x_292512;
                                        double defunc_1_op_res_292490 =
                                               defunc_9_fit_fun_res_292507 +
                                               redout_295184;
                                        double defunc_1_op_res_292493 =
                                               defunc_9_slope_fun_res_292513 +
                                               redout_295185;
                                        double redout_tmp_304701 =
                                               defunc_1_op_res_292490;
                                        double redout_tmp_304702 =
                                               defunc_1_op_res_292493;
                                        
                                        redout_295184 = redout_tmp_304701;
                                        redout_295185 = redout_tmp_304702;
                                    }
                                    defunc_2_reduce_res_292486 = redout_295184;
                                    defunc_2_reduce_res_292487 = redout_295185;
                                    ((double *) mem_300818.mem)[i_295198 *
                                                                l_n_m_289902 +
                                                                i_295191] =
                                        defunc_2_reduce_res_292486;
                                    ((double *) mem_300822.mem)[i_295198 *
                                                                l_n_m_289902 +
                                                                i_295191] =
                                        defunc_2_reduce_res_292487;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_300992, &mem_300818,
                                             "mem_300818") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_300984, &mem_300822,
                                             "mem_300822") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300822,
                                               "mem_300822") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300818,
                                               "mem_300818") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_301008, &ext_mem_300992,
                                         "ext_mem_300992") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_301000, &ext_mem_300984,
                                         "ext_mem_300984") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_300984,
                                           "ext_mem_300984") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_300992,
                                           "ext_mem_300992") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_301385, &ext_mem_301008,
                                     "ext_mem_301008") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_301377, &ext_mem_301000,
                                     "ext_mem_301000") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301000,
                                       "ext_mem_301000") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301008,
                                       "ext_mem_301008") != 0)
                        return 1;
                } else {
                    bool match_lit_292516 = (int64_t) 0 == d_l_289753;
                    struct memblock ext_mem_301369;
                    
                    ext_mem_301369.references = NULL;
                    
                    struct memblock ext_mem_301361;
                    
                    ext_mem_301361.references = NULL;
                    if (match_lit_292516) {
                        struct memblock mem_301019;
                        
                        mem_301019.references = NULL;
                        if (memblock_alloc(ctx, &mem_301019, bytes_297358,
                                           "mem_301019")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_304703 = 0; i_304703 <
                             partition_sizze_289836; i_304703++) {
                            for (int64_t i_304704 = 0; i_304704 < l_n_m_289902;
                                 i_304704++) {
                                ((double *) mem_301019.mem)[i_304703 *
                                                            l_n_m_289902 +
                                                            i_304704] = 0.0;
                            }
                        }
                        
                        struct memblock mem_301023;
                        
                        mem_301023.references = NULL;
                        if (memblock_alloc(ctx, &mem_301023, bytes_297358,
                                           "mem_301023")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_295211 = 0; i_295211 <
                             partition_sizze_289836; i_295211++) {
                            for (int64_t i_295207 = 0; i_295207 < l_n_m_289902;
                                 i_295207++) {
                                int64_t x_292528;
                                
                                x_292528 = ((int64_t *) mem_297359)[i_295211 *
                                                                    l_n_m_289902 +
                                                                    i_295207];
                                
                                double x_292529;
                                
                                x_292529 = ((double *) mem_297363)[i_295211 *
                                                                   l_n_m_289902 +
                                                                   i_295207];
                                
                                int64_t min_arg_292530 = mul64(jump_t_289755,
                                                               i_295207);
                                int64_t min_res_292531 = smin64(i_289916,
                                                                min_arg_292530);
                                int64_t defunc_0_g_res_292532 =
                                        add64((int64_t) 1, min_res_292531);
                                double defunc_2_reduce_res_292533;
                                double redout_295201 = 0.0;
                                
                                for (int64_t i_295202 = 0; i_295202 <
                                     q_l_289750; i_295202++) {
                                    bool cond_292538 = sle64(n_289745,
                                                             i_295202);
                                    int64_t defunc_0_f_res_292539;
                                    
                                    if (cond_292538) {
                                        defunc_0_f_res_292539 = (int64_t) 0;
                                    } else {
                                        int64_t i_292540 = add64(x_292528,
                                                                 i_295202);
                                        int64_t defunc_1_add_res_292541 =
                                                add64((int64_t) 1, i_292540);
                                        
                                        defunc_0_f_res_292539 =
                                            defunc_1_add_res_292541;
                                    }
                                    
                                    double defunc_0_f_res_292542;
                                    
                                    if (cond_292538) {
                                        defunc_0_f_res_292542 = 0.0;
                                    } else {
                                        int64_t i_292543 = add64(x_292528,
                                                                 i_295202);
                                        double defunc_0_add_arg_292544;
                                        
                                        defunc_0_add_arg_292544 =
                                            ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                              (i_295211 *
                                                                               ctx_param_ext_297601 +
                                                                               i_292543 *
                                                                               ctx_param_ext_297603)];
                                        defunc_0_f_res_292542 =
                                            defunc_0_add_arg_292544;
                                    }
                                    
                                    int64_t binop_p_292545 =
                                            sub64(defunc_0_f_res_292539,
                                                  defunc_0_g_res_292532);
                                    double defunc_0_f_res_292546 =
                                           sitofp_i64_f64(binop_p_292545);
                                    double abs_res_292547 =
                                           fabs(defunc_0_f_res_292546);
                                    double tmp1_292548 = abs_res_292547 /
                                           x_292529;
                                    double x_292549 = tmp1_292548 * tmp1_292548;
                                    double y_292550 = tmp1_292548 * x_292549;
                                    double tmp2_292551 = 1.0 - y_292550;
                                    double x_292552 = tmp2_292551 * tmp2_292551;
                                    double tmp3_292553 = tmp2_292551 * x_292552;
                                    double w_j_292554 = defunc_0_f_res_292542 *
                                           tmp3_292553;
                                    double defunc_1_op_res_292536 = w_j_292554 +
                                           redout_295201;
                                    double redout_tmp_304707 =
                                           defunc_1_op_res_292536;
                                    
                                    redout_295201 = redout_tmp_304707;
                                }
                                defunc_2_reduce_res_292533 = redout_295201;
                                
                                double a_292555 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_292533;
                                double a0_292556 = 1.0 / a_292555;
                                double defunc_2_reduce_res_292557;
                                double redout_295203 = 0.0;
                                
                                for (int64_t i_295204 = 0; i_295204 <
                                     q_l_289750; i_295204++) {
                                    bool cond_292562 = sle64(n_289745,
                                                             i_295204);
                                    int64_t defunc_0_f_res_292563;
                                    
                                    if (cond_292562) {
                                        defunc_0_f_res_292563 = (int64_t) 0;
                                    } else {
                                        int64_t i_292564 = add64(x_292528,
                                                                 i_295204);
                                        int64_t defunc_1_add_res_292565 =
                                                add64((int64_t) 1, i_292564);
                                        
                                        defunc_0_f_res_292563 =
                                            defunc_1_add_res_292565;
                                    }
                                    
                                    double defunc_0_f_res_292566;
                                    
                                    if (cond_292562) {
                                        defunc_0_f_res_292566 = 0.0;
                                    } else {
                                        int64_t i_292567 = add64(x_292528,
                                                                 i_295204);
                                        double defunc_0_add_arg_292568;
                                        
                                        defunc_0_add_arg_292568 =
                                            ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                              (i_295211 *
                                                                               ctx_param_ext_297601 +
                                                                               i_292567 *
                                                                               ctx_param_ext_297603)];
                                        defunc_0_f_res_292566 =
                                            defunc_0_add_arg_292568;
                                    }
                                    
                                    int64_t binop_p_292569 =
                                            sub64(defunc_0_f_res_292563,
                                                  defunc_0_g_res_292532);
                                    double defunc_0_f_res_292570 =
                                           sitofp_i64_f64(binop_p_292569);
                                    double abs_res_292571 =
                                           fabs(defunc_0_f_res_292570);
                                    double tmp1_292572 = abs_res_292571 /
                                           x_292529;
                                    double x_292573 = tmp1_292572 * tmp1_292572;
                                    double y_292574 = tmp1_292572 * x_292573;
                                    double tmp2_292575 = 1.0 - y_292574;
                                    double x_292576 = tmp2_292575 * tmp2_292575;
                                    double tmp3_292577 = tmp2_292575 * x_292576;
                                    double tmp4_292578 = defunc_0_f_res_292566 *
                                           tmp3_292577;
                                    double defunc_0_f_res_292579;
                                    
                                    if (cond_292562) {
                                        defunc_0_f_res_292579 = 0.0;
                                    } else {
                                        int64_t i_292580 = add64(x_292528,
                                                                 i_295204);
                                        double defunc_0_add_arg_292581;
                                        
                                        defunc_0_add_arg_292581 =
                                            ((double *) mem_300215)[i_295211 *
                                                                    n_289745 +
                                                                    i_292580];
                                        defunc_0_f_res_292579 =
                                            defunc_0_add_arg_292581;
                                    }
                                    
                                    double x_292582 = a0_292556 * tmp4_292578;
                                    double defunc_9_fit_fun_res_292583 =
                                           defunc_0_f_res_292579 * x_292582;
                                    double defunc_1_op_res_292560 =
                                           defunc_9_fit_fun_res_292583 +
                                           redout_295203;
                                    double redout_tmp_304708 =
                                           defunc_1_op_res_292560;
                                    
                                    redout_295203 = redout_tmp_304708;
                                }
                                defunc_2_reduce_res_292557 = redout_295203;
                                ((double *) mem_301023.mem)[i_295211 *
                                                            l_n_m_289902 +
                                                            i_295207] =
                                    defunc_2_reduce_res_292557;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_301369, &mem_301023,
                                         "mem_301023") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_301361, &mem_301019,
                                         "mem_301019") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301023, "mem_301023") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301019, "mem_301019") != 0)
                            return 1;
                    } else {
                        bool match_lit_292586 = (int64_t) 1 == d_l_289753;
                        int64_t binop_y_301117 = (int64_t) 8 * q_l_289750;
                        int64_t bytes_301118 = smax64((int64_t) 0,
                                                      binop_y_301117);
                        int64_t binop_y_301241 = (int64_t) 8 * q_l_289750;
                        int64_t bytes_301242 = smax64((int64_t) 0,
                                                      binop_y_301241);
                        struct memblock ext_mem_301353;
                        
                        ext_mem_301353.references = NULL;
                        
                        struct memblock ext_mem_301345;
                        
                        ext_mem_301345.references = NULL;
                        if (match_lit_292586) {
                            struct memblock mem_301070;
                            
                            mem_301070.references = NULL;
                            if (memblock_alloc(ctx, &mem_301070, bytes_297358,
                                               "mem_301070")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_301074;
                            
                            mem_301074.references = NULL;
                            if (memblock_alloc(ctx, &mem_301074, bytes_297358,
                                               "mem_301074")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_301119_cached_sizze_305024 <
                                (size_t) bytes_301118) {
                                mem_301119 = realloc(mem_301119, bytes_301118);
                                mem_301119_cached_sizze_305024 = bytes_301118;
                            }
                            if (mem_301122_cached_sizze_305025 <
                                (size_t) bytes_301118) {
                                mem_301122 = realloc(mem_301122, bytes_301118);
                                mem_301122_cached_sizze_305025 = bytes_301118;
                            }
                            for (int64_t i_295239 = 0; i_295239 <
                                 partition_sizze_289836; i_295239++) {
                                for (int64_t i_295232 = 0; i_295232 <
                                     l_n_m_289902; i_295232++) {
                                    int64_t x_292599;
                                    
                                    x_292599 =
                                        ((int64_t *) mem_297359)[i_295239 *
                                                                 l_n_m_289902 +
                                                                 i_295232];
                                    
                                    double x_292600;
                                    
                                    x_292600 =
                                        ((double *) mem_297363)[i_295239 *
                                                                l_n_m_289902 +
                                                                i_295232];
                                    
                                    int64_t min_arg_292601 =
                                            mul64(jump_t_289755, i_295232);
                                    int64_t min_res_292602 = smin64(i_289916,
                                                                    min_arg_292601);
                                    int64_t defunc_0_g_res_292603 =
                                            add64((int64_t) 1, min_res_292602);
                                    double defunc_2_reduce_res_292604;
                                    double redout_295215 = 0.0;
                                    
                                    for (int64_t i_295218 = 0; i_295218 <
                                         q_l_289750; i_295218++) {
                                        bool cond_292611 = sle64(n_289745,
                                                                 i_295218);
                                        int64_t defunc_0_f_res_292612;
                                        
                                        if (cond_292611) {
                                            defunc_0_f_res_292612 = (int64_t) 0;
                                        } else {
                                            int64_t i_292613 = add64(x_292599,
                                                                     i_295218);
                                            int64_t defunc_1_add_res_292614 =
                                                    add64((int64_t) 1,
                                                          i_292613);
                                            
                                            defunc_0_f_res_292612 =
                                                defunc_1_add_res_292614;
                                        }
                                        
                                        double defunc_0_f_res_292615;
                                        
                                        if (cond_292611) {
                                            defunc_0_f_res_292615 = 0.0;
                                        } else {
                                            int64_t i_292616 = add64(x_292599,
                                                                     i_295218);
                                            double defunc_0_add_arg_292617;
                                            
                                            defunc_0_add_arg_292617 =
                                                ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                                  (i_295239 *
                                                                                   ctx_param_ext_297601 +
                                                                                   i_292616 *
                                                                                   ctx_param_ext_297603)];
                                            defunc_0_f_res_292615 =
                                                defunc_0_add_arg_292617;
                                        }
                                        
                                        int64_t binop_p_292618 =
                                                sub64(defunc_0_f_res_292612,
                                                      defunc_0_g_res_292603);
                                        double defunc_0_f_res_292619 =
                                               sitofp_i64_f64(binop_p_292618);
                                        double abs_res_292620 =
                                               fabs(defunc_0_f_res_292619);
                                        double tmp1_292621 = abs_res_292620 /
                                               x_292600;
                                        double x_292622 = tmp1_292621 *
                                               tmp1_292621;
                                        double y_292623 = tmp1_292621 *
                                               x_292622;
                                        double tmp2_292624 = 1.0 - y_292623;
                                        double x_292625 = tmp2_292624 *
                                               tmp2_292624;
                                        double tmp3_292626 = tmp2_292624 *
                                               x_292625;
                                        double w_j_292627 =
                                               defunc_0_f_res_292615 *
                                               tmp3_292626;
                                        double xw_j_292628 =
                                               defunc_0_f_res_292619 *
                                               w_j_292627;
                                        double x2w_j_292629 =
                                               defunc_0_f_res_292619 *
                                               xw_j_292628;
                                        double defunc_1_op_res_292609 =
                                               w_j_292627 + redout_295215;
                                        
                                        ((double *) mem_301119)[i_295218] =
                                            xw_j_292628;
                                        ((double *) mem_301122)[i_295218] =
                                            x2w_j_292629;
                                        
                                        double redout_tmp_304713 =
                                               defunc_1_op_res_292609;
                                        
                                        redout_295215 = redout_tmp_304713;
                                    }
                                    defunc_2_reduce_res_292604 = redout_295215;
                                    
                                    double a_292630 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292604;
                                    double defunc_2_reduce_res_292631;
                                    double redout_295221 = 0.0;
                                    
                                    for (int64_t i_295222 = 0; i_295222 <
                                         q_l_289750; i_295222++) {
                                        double x_292635;
                                        
                                        x_292635 =
                                            ((double *) mem_301119)[i_295222];
                                        
                                        double defunc_1_op_res_292634 =
                                               x_292635 + redout_295221;
                                        double redout_tmp_304716 =
                                               defunc_1_op_res_292634;
                                        
                                        redout_295221 = redout_tmp_304716;
                                    }
                                    defunc_2_reduce_res_292631 = redout_295221;
                                    
                                    double b_292636 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292631;
                                    double defunc_2_reduce_res_292637;
                                    double redout_295223 = 0.0;
                                    
                                    for (int64_t i_295224 = 0; i_295224 <
                                         q_l_289750; i_295224++) {
                                        double x_292641;
                                        
                                        x_292641 =
                                            ((double *) mem_301122)[i_295224];
                                        
                                        double defunc_1_op_res_292640 =
                                               x_292641 + redout_295223;
                                        double redout_tmp_304717 =
                                               defunc_1_op_res_292640;
                                        
                                        redout_295223 = redout_tmp_304717;
                                    }
                                    defunc_2_reduce_res_292637 = redout_295223;
                                    
                                    double c_292642 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292637;
                                    double x_292643 = a_292630 * c_292642;
                                    double y_292644 = b_292636 * b_292636;
                                    double y_292645 = x_292643 - y_292644;
                                    double det1_292646 = 1.0 / y_292645;
                                    double a11_292647 = c_292642 * det1_292646;
                                    double x_292648 = 0.0 - b_292636;
                                    double b11_292649 = det1_292646 * x_292648;
                                    double c11_292650 = a_292630 * det1_292646;
                                    double defunc_2_reduce_res_292651;
                                    double defunc_2_reduce_res_292652;
                                    double redout_295225;
                                    double redout_295226;
                                    
                                    redout_295225 = 0.0;
                                    redout_295226 = 0.0;
                                    for (int64_t i_295227 = 0; i_295227 <
                                         q_l_289750; i_295227++) {
                                        bool cond_292660 = sle64(n_289745,
                                                                 i_295227);
                                        int64_t defunc_0_f_res_292661;
                                        
                                        if (cond_292660) {
                                            defunc_0_f_res_292661 = (int64_t) 0;
                                        } else {
                                            int64_t i_292662 = add64(x_292599,
                                                                     i_295227);
                                            int64_t defunc_1_add_res_292663 =
                                                    add64((int64_t) 1,
                                                          i_292662);
                                            
                                            defunc_0_f_res_292661 =
                                                defunc_1_add_res_292663;
                                        }
                                        
                                        double defunc_0_f_res_292664;
                                        
                                        if (cond_292660) {
                                            defunc_0_f_res_292664 = 0.0;
                                        } else {
                                            int64_t i_292665 = add64(x_292599,
                                                                     i_295227);
                                            double defunc_0_add_arg_292666;
                                            
                                            defunc_0_add_arg_292666 =
                                                ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                                  (i_295239 *
                                                                                   ctx_param_ext_297601 +
                                                                                   i_292665 *
                                                                                   ctx_param_ext_297603)];
                                            defunc_0_f_res_292664 =
                                                defunc_0_add_arg_292666;
                                        }
                                        
                                        int64_t binop_p_292667 =
                                                sub64(defunc_0_f_res_292661,
                                                      defunc_0_g_res_292603);
                                        double defunc_0_f_res_292668 =
                                               sitofp_i64_f64(binop_p_292667);
                                        double abs_res_292669 =
                                               fabs(defunc_0_f_res_292668);
                                        double tmp1_292670 = abs_res_292669 /
                                               x_292600;
                                        double x_292671 = tmp1_292670 *
                                               tmp1_292670;
                                        double y_292672 = tmp1_292670 *
                                               x_292671;
                                        double tmp2_292673 = 1.0 - y_292672;
                                        double x_292674 = tmp2_292673 *
                                               tmp2_292673;
                                        double tmp3_292675 = tmp2_292673 *
                                               x_292674;
                                        double tmp4_292676 =
                                               defunc_0_f_res_292664 *
                                               tmp3_292675;
                                        double defunc_1_f_res_292677 =
                                               defunc_0_f_res_292668 *
                                               tmp4_292676;
                                        double defunc_0_f_res_292678;
                                        
                                        if (cond_292660) {
                                            defunc_0_f_res_292678 = 0.0;
                                        } else {
                                            int64_t i_292679 = add64(x_292599,
                                                                     i_295227);
                                            double defunc_0_add_arg_292680;
                                            
                                            defunc_0_add_arg_292680 =
                                                ((double *) mem_300215)[i_295239 *
                                                                        n_289745 +
                                                                        i_292679];
                                            defunc_0_f_res_292678 =
                                                defunc_0_add_arg_292680;
                                        }
                                        
                                        double x_292681 = a11_292647 *
                                               tmp4_292676;
                                        double y_292682 = b11_292649 *
                                               defunc_1_f_res_292677;
                                        double x_292683 = x_292681 + y_292682;
                                        double defunc_9_fit_fun_res_292684 =
                                               defunc_0_f_res_292678 * x_292683;
                                        double x_292685 = b11_292649 *
                                               tmp4_292676;
                                        double y_292686 = c11_292650 *
                                               defunc_1_f_res_292677;
                                        double x_292687 = x_292685 + y_292686;
                                        double defunc_9_slope_fun_res_292688 =
                                               defunc_0_f_res_292678 * x_292687;
                                        double defunc_1_op_res_292655 =
                                               defunc_9_fit_fun_res_292684 +
                                               redout_295225;
                                        double defunc_1_op_res_292658 =
                                               defunc_9_slope_fun_res_292688 +
                                               redout_295226;
                                        double redout_tmp_304718 =
                                               defunc_1_op_res_292655;
                                        double redout_tmp_304719 =
                                               defunc_1_op_res_292658;
                                        
                                        redout_295225 = redout_tmp_304718;
                                        redout_295226 = redout_tmp_304719;
                                    }
                                    defunc_2_reduce_res_292651 = redout_295225;
                                    defunc_2_reduce_res_292652 = redout_295226;
                                    ((double *) mem_301070.mem)[i_295239 *
                                                                l_n_m_289902 +
                                                                i_295232] =
                                        defunc_2_reduce_res_292651;
                                    ((double *) mem_301074.mem)[i_295239 *
                                                                l_n_m_289902 +
                                                                i_295232] =
                                        defunc_2_reduce_res_292652;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_301353, &mem_301070,
                                             "mem_301070") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_301345, &mem_301074,
                                             "mem_301074") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301074,
                                               "mem_301074") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301070,
                                               "mem_301070") != 0)
                                return 1;
                        } else {
                            struct memblock mem_301194;
                            
                            mem_301194.references = NULL;
                            if (memblock_alloc(ctx, &mem_301194, bytes_297358,
                                               "mem_301194")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_301198;
                            
                            mem_301198.references = NULL;
                            if (memblock_alloc(ctx, &mem_301198, bytes_297358,
                                               "mem_301198")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_301243_cached_sizze_305026 <
                                (size_t) bytes_301242) {
                                mem_301243 = realloc(mem_301243, bytes_301242);
                                mem_301243_cached_sizze_305026 = bytes_301242;
                            }
                            if (mem_301246_cached_sizze_305027 <
                                (size_t) bytes_301242) {
                                mem_301246 = realloc(mem_301246, bytes_301242);
                                mem_301246_cached_sizze_305027 = bytes_301242;
                            }
                            if (mem_301249_cached_sizze_305028 <
                                (size_t) bytes_301242) {
                                mem_301249 = realloc(mem_301249, bytes_301242);
                                mem_301249_cached_sizze_305028 = bytes_301242;
                            }
                            if (mem_301252_cached_sizze_305029 <
                                (size_t) bytes_301242) {
                                mem_301252 = realloc(mem_301252, bytes_301242);
                                mem_301252_cached_sizze_305029 = bytes_301242;
                            }
                            for (int64_t i_295278 = 0; i_295278 <
                                 partition_sizze_289836; i_295278++) {
                                for (int64_t i_295271 = 0; i_295271 <
                                     l_n_m_289902; i_295271++) {
                                    int64_t x_292701;
                                    
                                    x_292701 =
                                        ((int64_t *) mem_297359)[i_295278 *
                                                                 l_n_m_289902 +
                                                                 i_295271];
                                    
                                    double x_292702;
                                    
                                    x_292702 =
                                        ((double *) mem_297363)[i_295278 *
                                                                l_n_m_289902 +
                                                                i_295271];
                                    
                                    int64_t min_arg_292703 =
                                            mul64(jump_t_289755, i_295271);
                                    int64_t min_res_292704 = smin64(i_289916,
                                                                    min_arg_292703);
                                    int64_t defunc_0_g_res_292705 =
                                            add64((int64_t) 1, min_res_292704);
                                    double defunc_2_reduce_res_292706;
                                    double redout_295246 = 0.0;
                                    
                                    for (int64_t i_295251 = 0; i_295251 <
                                         q_l_289750; i_295251++) {
                                        bool cond_292715 = sle64(n_289745,
                                                                 i_295251);
                                        int64_t defunc_0_f_res_292716;
                                        
                                        if (cond_292715) {
                                            defunc_0_f_res_292716 = (int64_t) 0;
                                        } else {
                                            int64_t i_292717 = add64(x_292701,
                                                                     i_295251);
                                            int64_t defunc_1_add_res_292718 =
                                                    add64((int64_t) 1,
                                                          i_292717);
                                            
                                            defunc_0_f_res_292716 =
                                                defunc_1_add_res_292718;
                                        }
                                        
                                        double defunc_0_f_res_292719;
                                        
                                        if (cond_292715) {
                                            defunc_0_f_res_292719 = 0.0;
                                        } else {
                                            int64_t i_292720 = add64(x_292701,
                                                                     i_295251);
                                            double defunc_0_add_arg_292721;
                                            
                                            defunc_0_add_arg_292721 =
                                                ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                                  (i_295278 *
                                                                                   ctx_param_ext_297601 +
                                                                                   i_292720 *
                                                                                   ctx_param_ext_297603)];
                                            defunc_0_f_res_292719 =
                                                defunc_0_add_arg_292721;
                                        }
                                        
                                        int64_t binop_p_292722 =
                                                sub64(defunc_0_f_res_292716,
                                                      defunc_0_g_res_292705);
                                        double defunc_0_f_res_292723 =
                                               sitofp_i64_f64(binop_p_292722);
                                        double abs_res_292724 =
                                               fabs(defunc_0_f_res_292723);
                                        double tmp1_292725 = abs_res_292724 /
                                               x_292702;
                                        double x_292726 = tmp1_292725 *
                                               tmp1_292725;
                                        double y_292727 = tmp1_292725 *
                                               x_292726;
                                        double tmp2_292728 = 1.0 - y_292727;
                                        double x_292729 = tmp2_292728 *
                                               tmp2_292728;
                                        double tmp3_292730 = tmp2_292728 *
                                               x_292729;
                                        double w_j_292731 =
                                               defunc_0_f_res_292719 *
                                               tmp3_292730;
                                        double xw_j_292732 =
                                               defunc_0_f_res_292723 *
                                               w_j_292731;
                                        double x2w_j_292733 =
                                               defunc_0_f_res_292723 *
                                               xw_j_292732;
                                        double x3w_j_292734 =
                                               defunc_0_f_res_292723 *
                                               x2w_j_292733;
                                        double x4w_j_292735 =
                                               defunc_0_f_res_292723 *
                                               x3w_j_292734;
                                        double defunc_1_op_res_292713 =
                                               w_j_292731 + redout_295246;
                                        
                                        ((double *) mem_301243)[i_295251] =
                                            xw_j_292732;
                                        ((double *) mem_301246)[i_295251] =
                                            x2w_j_292733;
                                        ((double *) mem_301249)[i_295251] =
                                            x3w_j_292734;
                                        ((double *) mem_301252)[i_295251] =
                                            x4w_j_292735;
                                        
                                        double redout_tmp_304724 =
                                               defunc_1_op_res_292713;
                                        
                                        redout_295246 = redout_tmp_304724;
                                    }
                                    defunc_2_reduce_res_292706 = redout_295246;
                                    
                                    double a_292736 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292706;
                                    double defunc_2_reduce_res_292737;
                                    double redout_295256 = 0.0;
                                    
                                    for (int64_t i_295257 = 0; i_295257 <
                                         q_l_289750; i_295257++) {
                                        double x_292741;
                                        
                                        x_292741 =
                                            ((double *) mem_301243)[i_295257];
                                        
                                        double defunc_1_op_res_292740 =
                                               x_292741 + redout_295256;
                                        double redout_tmp_304729 =
                                               defunc_1_op_res_292740;
                                        
                                        redout_295256 = redout_tmp_304729;
                                    }
                                    defunc_2_reduce_res_292737 = redout_295256;
                                    
                                    double b_292742 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292737;
                                    double defunc_2_reduce_res_292743;
                                    double redout_295258 = 0.0;
                                    
                                    for (int64_t i_295259 = 0; i_295259 <
                                         q_l_289750; i_295259++) {
                                        double x_292747;
                                        
                                        x_292747 =
                                            ((double *) mem_301246)[i_295259];
                                        
                                        double defunc_1_op_res_292746 =
                                               x_292747 + redout_295258;
                                        double redout_tmp_304730 =
                                               defunc_1_op_res_292746;
                                        
                                        redout_295258 = redout_tmp_304730;
                                    }
                                    defunc_2_reduce_res_292743 = redout_295258;
                                    
                                    double c_292748 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292743;
                                    double defunc_2_reduce_res_292749;
                                    double redout_295260 = 0.0;
                                    
                                    for (int64_t i_295261 = 0; i_295261 <
                                         q_l_289750; i_295261++) {
                                        double x_292753;
                                        
                                        x_292753 =
                                            ((double *) mem_301249)[i_295261];
                                        
                                        double defunc_1_op_res_292752 =
                                               x_292753 + redout_295260;
                                        double redout_tmp_304731 =
                                               defunc_1_op_res_292752;
                                        
                                        redout_295260 = redout_tmp_304731;
                                    }
                                    defunc_2_reduce_res_292749 = redout_295260;
                                    
                                    double d_292754 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292749;
                                    double defunc_2_reduce_res_292755;
                                    double redout_295262 = 0.0;
                                    
                                    for (int64_t i_295263 = 0; i_295263 <
                                         q_l_289750; i_295263++) {
                                        double x_292759;
                                        
                                        x_292759 =
                                            ((double *) mem_301252)[i_295263];
                                        
                                        double defunc_1_op_res_292758 =
                                               x_292759 + redout_295262;
                                        double redout_tmp_304732 =
                                               defunc_1_op_res_292758;
                                        
                                        redout_295262 = redout_tmp_304732;
                                    }
                                    defunc_2_reduce_res_292755 = redout_295262;
                                    
                                    double e_292760 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_292755;
                                    double x_292761 = c_292748 * e_292760;
                                    double y_292762 = d_292754 * d_292754;
                                    double a12_292763 = x_292761 - y_292762;
                                    double x_292764 = c_292748 * d_292754;
                                    double y_292765 = b_292742 * e_292760;
                                    double b12_292766 = x_292764 - y_292765;
                                    double x_292767 = b_292742 * d_292754;
                                    double y_292768 = c_292748 * c_292748;
                                    double c12_292769 = x_292767 - y_292768;
                                    double x_292770 = a_292736 * e_292760;
                                    double b2_292771 = x_292770 - y_292768;
                                    double x_292772 = b_292742 * c_292748;
                                    double y_292773 = a_292736 * d_292754;
                                    double c2_292774 = x_292772 - y_292773;
                                    double x_292775 = a_292736 * a12_292763;
                                    double y_292776 = b_292742 * b12_292766;
                                    double x_292777 = x_292775 + y_292776;
                                    double y_292778 = c_292748 * c12_292769;
                                    double y_292779 = x_292777 + y_292778;
                                    double det_292780 = 1.0 / y_292779;
                                    double a12_292781 = a12_292763 * det_292780;
                                    double b12_292782 = b12_292766 * det_292780;
                                    double c12_292783 = c12_292769 * det_292780;
                                    double b2_292784 = b2_292771 * det_292780;
                                    double c2_292785 = c2_292774 * det_292780;
                                    double defunc_2_reduce_res_292786;
                                    double defunc_2_reduce_res_292787;
                                    double redout_295264;
                                    double redout_295265;
                                    
                                    redout_295264 = 0.0;
                                    redout_295265 = 0.0;
                                    for (int64_t i_295266 = 0; i_295266 <
                                         q_l_289750; i_295266++) {
                                        bool cond_292795 = sle64(n_289745,
                                                                 i_295266);
                                        int64_t defunc_0_f_res_292796;
                                        
                                        if (cond_292795) {
                                            defunc_0_f_res_292796 = (int64_t) 0;
                                        } else {
                                            int64_t i_292797 = add64(x_292701,
                                                                     i_295266);
                                            int64_t defunc_1_add_res_292798 =
                                                    add64((int64_t) 1,
                                                          i_292797);
                                            
                                            defunc_0_f_res_292796 =
                                                defunc_1_add_res_292798;
                                        }
                                        
                                        double defunc_0_f_res_292799;
                                        
                                        if (cond_292795) {
                                            defunc_0_f_res_292799 = 0.0;
                                        } else {
                                            int64_t i_292800 = add64(x_292701,
                                                                     i_295266);
                                            double defunc_0_add_arg_292801;
                                            
                                            defunc_0_add_arg_292801 =
                                                ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                                  (i_295278 *
                                                                                   ctx_param_ext_297601 +
                                                                                   i_292800 *
                                                                                   ctx_param_ext_297603)];
                                            defunc_0_f_res_292799 =
                                                defunc_0_add_arg_292801;
                                        }
                                        
                                        int64_t binop_p_292802 =
                                                sub64(defunc_0_f_res_292796,
                                                      defunc_0_g_res_292705);
                                        double defunc_0_f_res_292803 =
                                               sitofp_i64_f64(binop_p_292802);
                                        double abs_res_292804 =
                                               fabs(defunc_0_f_res_292803);
                                        double tmp1_292805 = abs_res_292804 /
                                               x_292702;
                                        double x_292806 = tmp1_292805 *
                                               tmp1_292805;
                                        double y_292807 = tmp1_292805 *
                                               x_292806;
                                        double tmp2_292808 = 1.0 - y_292807;
                                        double x_292809 = tmp2_292808 *
                                               tmp2_292808;
                                        double tmp3_292810 = tmp2_292808 *
                                               x_292809;
                                        double tmp4_292811 =
                                               defunc_0_f_res_292799 *
                                               tmp3_292810;
                                        double defunc_1_f_res_292812 =
                                               defunc_0_f_res_292803 *
                                               tmp4_292811;
                                        double defunc_1_f_res_292813 =
                                               defunc_0_f_res_292803 *
                                               defunc_1_f_res_292812;
                                        double defunc_0_f_res_292814;
                                        
                                        if (cond_292795) {
                                            defunc_0_f_res_292814 = 0.0;
                                        } else {
                                            int64_t i_292815 = add64(x_292701,
                                                                     i_295266);
                                            double defunc_0_add_arg_292816;
                                            
                                            defunc_0_add_arg_292816 =
                                                ((double *) mem_300215)[i_295278 *
                                                                        n_289745 +
                                                                        i_292815];
                                            defunc_0_f_res_292814 =
                                                defunc_0_add_arg_292816;
                                        }
                                        
                                        double x_292817 = a12_292781 *
                                               tmp4_292811;
                                        double y_292818 = b12_292782 *
                                               defunc_1_f_res_292812;
                                        double x_292819 = x_292817 + y_292818;
                                        double y_292820 = c12_292783 *
                                               defunc_1_f_res_292813;
                                        double x_292821 = x_292819 + y_292820;
                                        double defunc_9_fit_fun_res_292822 =
                                               defunc_0_f_res_292814 * x_292821;
                                        double x_292823 = b12_292782 *
                                               tmp4_292811;
                                        double y_292824 = b2_292784 *
                                               defunc_1_f_res_292812;
                                        double x_292825 = x_292823 + y_292824;
                                        double y_292826 = c2_292785 *
                                               defunc_1_f_res_292813;
                                        double x_292827 = x_292825 + y_292826;
                                        double defunc_9_slope_fun_res_292828 =
                                               defunc_0_f_res_292814 * x_292827;
                                        double defunc_1_op_res_292790 =
                                               defunc_9_fit_fun_res_292822 +
                                               redout_295264;
                                        double defunc_1_op_res_292793 =
                                               defunc_9_slope_fun_res_292828 +
                                               redout_295265;
                                        double redout_tmp_304733 =
                                               defunc_1_op_res_292790;
                                        double redout_tmp_304734 =
                                               defunc_1_op_res_292793;
                                        
                                        redout_295264 = redout_tmp_304733;
                                        redout_295265 = redout_tmp_304734;
                                    }
                                    defunc_2_reduce_res_292786 = redout_295264;
                                    defunc_2_reduce_res_292787 = redout_295265;
                                    ((double *) mem_301194.mem)[i_295278 *
                                                                l_n_m_289902 +
                                                                i_295271] =
                                        defunc_2_reduce_res_292786;
                                    ((double *) mem_301198.mem)[i_295278 *
                                                                l_n_m_289902 +
                                                                i_295271] =
                                        defunc_2_reduce_res_292787;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_301353, &mem_301194,
                                             "mem_301194") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_301345, &mem_301198,
                                             "mem_301198") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301198,
                                               "mem_301198") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301194,
                                               "mem_301194") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_301369, &ext_mem_301353,
                                         "ext_mem_301353") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_301361, &ext_mem_301345,
                                         "ext_mem_301345") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_301345,
                                           "ext_mem_301345") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_301353,
                                           "ext_mem_301353") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_301385, &ext_mem_301369,
                                     "ext_mem_301369") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_301377, &ext_mem_301361,
                                     "ext_mem_301361") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301361,
                                       "ext_mem_301361") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301369,
                                       "ext_mem_301369") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_301401, &ext_mem_301385,
                                 "ext_mem_301385") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_301393, &ext_mem_301377,
                                 "ext_mem_301377") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_301377, "ext_mem_301377") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_301385, "ext_mem_301385") != 0)
                    return 1;
            }
            
            struct memblock ext_mem_301456;
            
            ext_mem_301456.references = NULL;
            if (cond_290355) {
                bool zzero_292832 = jump_l_289756 == (int64_t) 0;
                bool nonzzero_292833 = !zzero_292832;
                bool nonzzero_cert_292834;
                
                if (!nonzzero_292833) {
                    ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                           "division by zero",
                                           "-> #0  loess.fut:724:20-27\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:723:3-727:9\n   #5  stl.fut:256:23-75\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:254:15-257:43\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_301456,
                                       "ext_mem_301456") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301393,
                                       "ext_mem_301393") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301401,
                                       "ext_mem_301401") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_300038,
                                       "ext_mem_300038") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299913,
                                       "ext_mem_299913") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299924,
                                       "ext_mem_299924") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297627,
                                       "mem_param_297627") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297619,
                                       "mem_param_297619") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303131,
                                       "ext_mem_303131") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303132,
                                       "ext_mem_303132") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297605,
                                       "mem_param_297605") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297597,
                                       "mem_param_297597") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297589,
                                       "mem_param_297589") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303656,
                                       "ext_mem_303656") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303657,
                                       "ext_mem_303657") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303658,
                                       "ext_mem_303658") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t y_292835 = sub64(l_n_m_289902, (int64_t) 1);
                struct memblock mem_301412;
                
                mem_301412.references = NULL;
                if (memblock_alloc(ctx, &mem_301412, bytes_296792,
                                   "mem_301412")) {
                    err = 1;
                    goto cleanup;
                }
                for (int64_t i_295287 = 0; i_295287 < partition_sizze_289836;
                     i_295287++) {
                    for (int64_t i_295283 = 0; i_295283 < n_289745;
                         i_295283++) {
                        int64_t m_v_292841 = sdiv64(i_295283, jump_l_289756);
                        bool cond_292842 = m_v_292841 == y_292835;
                        int64_t j_292843;
                        
                        if (cond_292842) {
                            int64_t j_t_res_292844 = sub64(m_v_292841,
                                                           (int64_t) 1);
                            
                            j_292843 = j_t_res_292844;
                        } else {
                            j_292843 = m_v_292841;
                        }
                        
                        int64_t min_arg_292845 = mul64(jump_l_289756, j_292843);
                        int64_t min_res_292846 = smin64(i_289916,
                                                        min_arg_292845);
                        int64_t defunc_0_m_fun_arg_292847 = add64((int64_t) 1,
                                                                  j_292843);
                        int64_t min_arg_292848 = mul64(jump_l_289756,
                                                       defunc_0_m_fun_arg_292847);
                        int64_t min_res_292849 = smin64(i_289916,
                                                        min_arg_292848);
                        int64_t i64_arg_292850 = sub64(min_res_292849,
                                                       min_res_292846);
                        double i64_res_292851 = sitofp_i64_f64(i64_arg_292850);
                        int64_t i64_arg_292852 = sub64(i_295283,
                                                       min_res_292846);
                        double i64_res_292853 = sitofp_i64_f64(i64_arg_292852);
                        double u_292854 = i64_res_292853 / i64_res_292851;
                        double u2_292855 = u_292854 * u_292854;
                        double u3_292856 = u_292854 * u2_292855;
                        double x_292857 = 2.0 * u3_292856;
                        double y_292858 = 3.0 * u2_292855;
                        double x_292859 = x_292857 - y_292858;
                        double x_292860 = 1.0 + x_292859;
                        bool x_292861 = sle64((int64_t) 0, j_292843);
                        bool y_292862 = slt64(j_292843, l_n_m_289902);
                        bool bounds_check_292863 = x_292861 && y_292862;
                        bool index_certs_292864;
                        
                        if (!bounds_check_292863) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) j_292843,
                                          "] out of bounds for array of shape [",
                                          (long long) l_n_m_289902, "].",
                                          "-> #0  loess.fut:713:27-33\n   #1  loess.fut:726:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:723:3-727:9\n   #6  stl.fut:256:23-75\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:254:15-257:43\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_301412,
                                               "mem_301412") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301456,
                                               "ext_mem_301456") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301393,
                                               "ext_mem_301393") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301401,
                                               "ext_mem_301401") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_300038,
                                               "ext_mem_300038") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299913,
                                               "ext_mem_299913") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299924,
                                               "ext_mem_299924") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297627,
                                               "mem_param_297627") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297619,
                                               "mem_param_297619") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303131,
                                               "ext_mem_303131") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303132,
                                               "ext_mem_303132") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297605,
                                               "mem_param_297605") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297597,
                                               "mem_param_297597") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297589,
                                               "mem_param_297589") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303656,
                                               "ext_mem_303656") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303657,
                                               "ext_mem_303657") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303658,
                                               "ext_mem_303658") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297581,
                                               "mem_297581") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297577,
                                               "mem_297577") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304403,
                                               "mem_out_304403") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304402,
                                               "mem_out_304402") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304401,
                                               "mem_out_304401") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_292865;
                        
                        y_292865 = ((double *) ext_mem_301401.mem)[i_295287 *
                                                                   l_n_m_289902 +
                                                                   j_292843];
                        
                        double x_292866 = x_292860 * y_292865;
                        double x_292867 = y_292858 - x_292857;
                        bool x_292868 = sle64((int64_t) 0,
                                              defunc_0_m_fun_arg_292847);
                        bool y_292869 = slt64(defunc_0_m_fun_arg_292847,
                                              l_n_m_289902);
                        bool bounds_check_292870 = x_292868 && y_292869;
                        bool index_certs_292871;
                        
                        if (!bounds_check_292870) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [",
                                          (long long) defunc_0_m_fun_arg_292847,
                                          "] out of bounds for array of shape [",
                                          (long long) l_n_m_289902, "].",
                                          "-> #0  loess.fut:714:27-37\n   #1  loess.fut:726:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:723:3-727:9\n   #6  stl.fut:256:23-75\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:254:15-257:43\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_301412,
                                               "mem_301412") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301456,
                                               "ext_mem_301456") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301393,
                                               "ext_mem_301393") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301401,
                                               "ext_mem_301401") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_300038,
                                               "ext_mem_300038") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299913,
                                               "ext_mem_299913") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299924,
                                               "ext_mem_299924") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297627,
                                               "mem_param_297627") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297619,
                                               "mem_param_297619") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303131,
                                               "ext_mem_303131") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303132,
                                               "ext_mem_303132") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297605,
                                               "mem_param_297605") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297597,
                                               "mem_param_297597") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297589,
                                               "mem_param_297589") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303656,
                                               "ext_mem_303656") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303657,
                                               "ext_mem_303657") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303658,
                                               "ext_mem_303658") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297581,
                                               "mem_297581") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297577,
                                               "mem_297577") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304403,
                                               "mem_out_304403") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304402,
                                               "mem_out_304402") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304401,
                                               "mem_out_304401") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_292872;
                        
                        y_292872 = ((double *) ext_mem_301401.mem)[i_295287 *
                                                                   l_n_m_289902 +
                                                                   defunc_0_m_fun_arg_292847];
                        
                        double y_292873 = x_292867 * y_292872;
                        double x_292874 = x_292866 + y_292873;
                        double y_292875 = 2.0 * u2_292855;
                        double x_292876 = u3_292856 - y_292875;
                        double x_292877 = u_292854 + x_292876;
                        double y_292878;
                        
                        y_292878 = ((double *) ext_mem_301393.mem)[i_295287 *
                                                                   l_n_m_289902 +
                                                                   j_292843];
                        
                        double x_292879 = x_292877 * y_292878;
                        double y_292880 = i64_res_292851 * x_292879;
                        double x_292881 = x_292874 + y_292880;
                        double x_292882 = u3_292856 - u2_292855;
                        double y_292883;
                        
                        y_292883 = ((double *) ext_mem_301393.mem)[i_295287 *
                                                                   l_n_m_289902 +
                                                                   defunc_0_m_fun_arg_292847];
                        
                        double x_292884 = x_292882 * y_292883;
                        double y_292885 = i64_res_292851 * x_292884;
                        double defunc_4_interpolate_proc_res_292886 = x_292881 +
                               y_292885;
                        
                        ((double *) mem_301412.mem)[i_295287 * n_289745 +
                                                    i_295283] =
                            defunc_4_interpolate_proc_res_292886;
                    }
                }
                if (memblock_set(ctx, &ext_mem_301456, &mem_301412,
                                 "mem_301412") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_301412, "mem_301412") != 0)
                    return 1;
            } else {
                bool dim_match_292887 = n_289745 == l_n_m_289902;
                bool empty_or_match_cert_292888;
                
                if (!dim_match_292887) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Value of (core language) shape (",
                                  (long long) partition_sizze_289836, ", ",
                                  (long long) l_n_m_289902,
                                  ") cannot match shape of type `[",
                                  (long long) partition_sizze_289836, "][",
                                  (long long) n_289745, "]t`.",
                                  "-> #0  stl.fut:259:15-36\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_301456,
                                       "ext_mem_301456") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301393,
                                       "ext_mem_301393") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301401,
                                       "ext_mem_301401") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_300038,
                                       "ext_mem_300038") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299913,
                                       "ext_mem_299913") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299924,
                                       "ext_mem_299924") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297627,
                                       "mem_param_297627") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297619,
                                       "mem_param_297619") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303131,
                                       "ext_mem_303131") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303132,
                                       "ext_mem_303132") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297605,
                                       "mem_param_297605") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297597,
                                       "mem_param_297597") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297589,
                                       "mem_param_297589") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303656,
                                       "ext_mem_303656") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303657,
                                       "ext_mem_303657") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303658,
                                       "ext_mem_303658") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_301456, &ext_mem_301401,
                                 "ext_mem_301401") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_301393, "ext_mem_301393") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_301401, "ext_mem_301401") != 0)
                return 1;
            
            struct memblock mem_301467;
            
            mem_301467.references = NULL;
            if (memblock_alloc(ctx, &mem_301467, bytes_296792, "mem_301467")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_295295 = 0; i_295295 < partition_sizze_289836;
                 i_295295++) {
                for (int64_t i_295291 = 0; i_295291 < n_289745; i_295291++) {
                    int64_t slice_295887 = n_p_289747 + i_295291;
                    double x_292895;
                    
                    x_292895 = ((double *) mem_300049)[i_295295 * C_len_289893 +
                                                       slice_295887];
                    
                    double x_292896;
                    
                    x_292896 = ((double *) ext_mem_301456.mem)[i_295295 *
                                                               ext_301459 +
                                                               i_295291];
                    
                    double defunc_1_f_res_292897 = x_292895 - x_292896;
                    
                    ((double *) mem_301467.mem)[i_295295 * n_289745 +
                                                i_295291] =
                        defunc_1_f_res_292897;
                }
            }
            if (memblock_unref(ctx, &ext_mem_301456, "ext_mem_301456") != 0)
                return 1;
            
            struct memblock ext_mem_303068;
            
            ext_mem_303068.references = NULL;
            
            struct memblock ext_mem_303060;
            
            ext_mem_303060.references = NULL;
            if (cond_290416) {
                bool match_lit_292900 = (int64_t) 0 == d_t_289752;
                int64_t binop_y_301529 = (int64_t) 8 * n_289745;
                int64_t bytes_301530 = smax64((int64_t) 0, binop_y_301529);
                struct memblock ext_mem_301999;
                
                ext_mem_301999.references = NULL;
                
                struct memblock ext_mem_301991;
                
                ext_mem_301991.references = NULL;
                if (match_lit_292900) {
                    struct memblock mem_301514;
                    
                    mem_301514.references = NULL;
                    if (memblock_alloc(ctx, &mem_301514, bytes_297467,
                                       "mem_301514")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_304739 = 0; i_304739 <
                         partition_sizze_289836; i_304739++) {
                        for (int64_t i_304740 = 0; i_304740 < t_n_m_289909;
                             i_304740++) {
                            ((double *) mem_301514.mem)[i_304739 *
                                                        t_n_m_289909 +
                                                        i_304740] = 0.0;
                        }
                    }
                    
                    struct memblock mem_301518;
                    
                    mem_301518.references = NULL;
                    if (memblock_alloc(ctx, &mem_301518, bytes_297467,
                                       "mem_301518")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (mem_301531_cached_sizze_305030 <
                        (size_t) bytes_301530) {
                        mem_301531 = realloc(mem_301531, bytes_301530);
                        mem_301531_cached_sizze_305030 = bytes_301530;
                    }
                    if (mem_301546_cached_sizze_305031 <
                        (size_t) bytes_301530) {
                        mem_301546 = realloc(mem_301546, bytes_301530);
                        mem_301546_cached_sizze_305031 = bytes_301530;
                    }
                    if (mem_301549_cached_sizze_305032 <
                        (size_t) bytes_301530) {
                        mem_301549 = realloc(mem_301549, bytes_301530);
                        mem_301549_cached_sizze_305032 = bytes_301530;
                    }
                    for (int64_t i_295318 = 0; i_295318 <
                         partition_sizze_289836; i_295318++) {
                        int64_t x_292910;
                        
                        x_292910 = ((int64_t *) mem_296796)[i_295318];
                        for (int64_t i_295299 = 0; i_295299 < n_289745;
                             i_295299++) {
                            float x_292914;
                            
                            x_292914 = ((float *) mem_296753)[i_295318 *
                                                              n_289745 +
                                                              i_295299];
                            
                            double x_292915;
                            
                            x_292915 = ((double *) mem_301467.mem)[i_295318 *
                                                                   n_289745 +
                                                                   i_295299];
                            
                            double f32_res_292916 = fpconv_f32_f64(x_292914);
                            double defunc_1_f_res_292917 = f32_res_292916 -
                                   x_292915;
                            
                            ((double *) mem_301531)[i_295299] =
                                defunc_1_f_res_292917;
                        }
                        for (int64_t i_295305 = 0; i_295305 < n_289745;
                             i_295305++) {
                            int64_t x_292920;
                            
                            x_292920 = ((int64_t *) mem_296793)[i_295318 *
                                                                n_289745 +
                                                                i_295305];
                            
                            bool cond_292921 = sle64((int64_t) 0, x_292920);
                            double defunc_0_f_res_292922;
                            
                            if (cond_292921) {
                                bool y_292923 = slt64(x_292920, n_289745);
                                bool bounds_check_292924 = cond_292921 &&
                                     y_292923;
                                bool index_certs_292925;
                                
                                if (!bounds_check_292924) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) x_292920,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_289745, "].",
                                                  "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                    if (memblock_unref(ctx, &mem_301518,
                                                       "mem_301518") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_301514,
                                                       "mem_301514") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301991,
                                                       "ext_mem_301991") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301999,
                                                       "ext_mem_301999") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303060,
                                                       "ext_mem_303060") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303068,
                                                       "ext_mem_303068") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_301467,
                                                       "mem_301467") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301456,
                                                       "ext_mem_301456") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301393,
                                                       "ext_mem_301393") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301401,
                                                       "ext_mem_301401") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_300038,
                                                       "ext_mem_300038") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_299913,
                                                       "ext_mem_299913") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_299924,
                                                       "ext_mem_299924") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297627,
                                                       "mem_param_297627") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297619,
                                                       "mem_param_297619") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303131,
                                                       "ext_mem_303131") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303132,
                                                       "ext_mem_303132") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297605,
                                                       "mem_param_297605") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297597,
                                                       "mem_param_297597") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297589,
                                                       "mem_param_297589") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303656,
                                                       "ext_mem_303656") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303657,
                                                       "ext_mem_303657") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303658,
                                                       "ext_mem_303658") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_297581,
                                                       "mem_297581") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_297577,
                                                       "mem_297577") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_304403,
                                                       "mem_out_304403") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_304402,
                                                       "mem_out_304402") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_304401,
                                                       "mem_out_304401") != 0)
                                        return 1;
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                double defunc_0_f_res_t_res_292926;
                                
                                defunc_0_f_res_t_res_292926 =
                                    ((double *) mem_301531)[x_292920];
                                defunc_0_f_res_292922 =
                                    defunc_0_f_res_t_res_292926;
                            } else {
                                defunc_0_f_res_292922 = 0.0;
                            }
                            
                            double defunc_0_f_res_292927;
                            
                            if (cond_292921) {
                                bool y_292928 = slt64(x_292920, n_289745);
                                bool bounds_check_292929 = cond_292921 &&
                                     y_292928;
                                bool index_certs_292930;
                                
                                if (!bounds_check_292929) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) x_292920,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_289745, "].",
                                                  "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                    if (memblock_unref(ctx, &mem_301518,
                                                       "mem_301518") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_301514,
                                                       "mem_301514") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301991,
                                                       "ext_mem_301991") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301999,
                                                       "ext_mem_301999") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303060,
                                                       "ext_mem_303060") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303068,
                                                       "ext_mem_303068") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_301467,
                                                       "mem_301467") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301456,
                                                       "ext_mem_301456") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301393,
                                                       "ext_mem_301393") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_301401,
                                                       "ext_mem_301401") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_300038,
                                                       "ext_mem_300038") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_299913,
                                                       "ext_mem_299913") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_299924,
                                                       "ext_mem_299924") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297627,
                                                       "mem_param_297627") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297619,
                                                       "mem_param_297619") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303131,
                                                       "ext_mem_303131") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303132,
                                                       "ext_mem_303132") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297605,
                                                       "mem_param_297605") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297597,
                                                       "mem_param_297597") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_297589,
                                                       "mem_param_297589") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303656,
                                                       "ext_mem_303656") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303657,
                                                       "ext_mem_303657") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303658,
                                                       "ext_mem_303658") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_297581,
                                                       "mem_297581") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_297577,
                                                       "mem_297577") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_304403,
                                                       "mem_out_304403") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_304402,
                                                       "mem_out_304402") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_304401,
                                                       "mem_out_304401") != 0)
                                        return 1;
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                double defunc_0_f_res_t_res_292931;
                                
                                defunc_0_f_res_t_res_292931 =
                                    ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                      (i_295318 *
                                                                       ctx_param_ext_297601 +
                                                                       x_292920 *
                                                                       ctx_param_ext_297603)];
                                defunc_0_f_res_292927 =
                                    defunc_0_f_res_t_res_292931;
                            } else {
                                defunc_0_f_res_292927 = 0.0;
                            }
                            ((double *) mem_301546)[i_295305] =
                                defunc_0_f_res_292927;
                            ((double *) mem_301549)[i_295305] =
                                defunc_0_f_res_292922;
                        }
                        for (int64_t i_295314 = 0; i_295314 < t_n_m_289909;
                             i_295314++) {
                            int64_t x_292934;
                            
                            x_292934 = ((int64_t *) mem_297468)[i_295318 *
                                                                t_n_m_289909 +
                                                                i_295314];
                            
                            double x_292935;
                            
                            x_292935 = ((double *) mem_297472)[i_295318 *
                                                               t_n_m_289909 +
                                                               i_295314];
                            
                            int64_t min_arg_292936 = mul64(jump_t_289755,
                                                           i_295314);
                            int64_t min_res_292937 = smin64(i_289916,
                                                            min_arg_292936);
                            int64_t defunc_0_g_res_292938 = add64((int64_t) 1,
                                                                  min_res_292937);
                            double defunc_2_reduce_res_292939;
                            double redout_295308 = 0.0;
                            
                            for (int64_t i_295309 = 0; i_295309 < q_t_289749;
                                 i_295309++) {
                                bool cond_292944 = sle64(x_292910, i_295309);
                                int64_t defunc_0_f_res_292945;
                                
                                if (cond_292944) {
                                    defunc_0_f_res_292945 = (int64_t) 0;
                                } else {
                                    int64_t i_292946 = add64(x_292934,
                                                             i_295309);
                                    int64_t defunc_0_add_arg_292947;
                                    
                                    defunc_0_add_arg_292947 =
                                        ((int64_t *) mem_296793)[i_295318 *
                                                                 n_289745 +
                                                                 i_292946];
                                    
                                    int64_t defunc_1_add_res_292948 =
                                            add64((int64_t) 1,
                                                  defunc_0_add_arg_292947);
                                    
                                    defunc_0_f_res_292945 =
                                        defunc_1_add_res_292948;
                                }
                                
                                double defunc_0_f_res_292949;
                                
                                if (cond_292944) {
                                    defunc_0_f_res_292949 = 0.0;
                                } else {
                                    int64_t i_292950 = add64(x_292934,
                                                             i_295309);
                                    double defunc_0_add_arg_292951;
                                    
                                    defunc_0_add_arg_292951 =
                                        ((double *) mem_301546)[i_292950];
                                    defunc_0_f_res_292949 =
                                        defunc_0_add_arg_292951;
                                }
                                
                                int64_t binop_p_292952 =
                                        sub64(defunc_0_f_res_292945,
                                              defunc_0_g_res_292938);
                                double defunc_0_f_res_292953 =
                                       sitofp_i64_f64(binop_p_292952);
                                double abs_res_292954 =
                                       fabs(defunc_0_f_res_292953);
                                double tmp1_292955 = abs_res_292954 / x_292935;
                                double x_292956 = tmp1_292955 * tmp1_292955;
                                double y_292957 = tmp1_292955 * x_292956;
                                double tmp2_292958 = 1.0 - y_292957;
                                double x_292959 = tmp2_292958 * tmp2_292958;
                                double tmp3_292960 = tmp2_292958 * x_292959;
                                double w_j_292961 = defunc_0_f_res_292949 *
                                       tmp3_292960;
                                double defunc_1_op_res_292942 = w_j_292961 +
                                       redout_295308;
                                double redout_tmp_304746 =
                                       defunc_1_op_res_292942;
                                
                                redout_295308 = redout_tmp_304746;
                            }
                            defunc_2_reduce_res_292939 = redout_295308;
                            
                            double a_292962 = 2.220446049250313e-16 +
                                   defunc_2_reduce_res_292939;
                            double a0_292963 = 1.0 / a_292962;
                            double defunc_2_reduce_res_292964;
                            double redout_295310 = 0.0;
                            
                            for (int64_t i_295311 = 0; i_295311 < q_t_289749;
                                 i_295311++) {
                                bool cond_292969 = sle64(x_292910, i_295311);
                                int64_t defunc_0_f_res_292970;
                                
                                if (cond_292969) {
                                    defunc_0_f_res_292970 = (int64_t) 0;
                                } else {
                                    int64_t i_292971 = add64(x_292934,
                                                             i_295311);
                                    int64_t defunc_0_add_arg_292972;
                                    
                                    defunc_0_add_arg_292972 =
                                        ((int64_t *) mem_296793)[i_295318 *
                                                                 n_289745 +
                                                                 i_292971];
                                    
                                    int64_t defunc_1_add_res_292973 =
                                            add64((int64_t) 1,
                                                  defunc_0_add_arg_292972);
                                    
                                    defunc_0_f_res_292970 =
                                        defunc_1_add_res_292973;
                                }
                                
                                double defunc_0_f_res_292974;
                                
                                if (cond_292969) {
                                    defunc_0_f_res_292974 = 0.0;
                                } else {
                                    int64_t i_292975 = add64(x_292934,
                                                             i_295311);
                                    double defunc_0_add_arg_292976;
                                    
                                    defunc_0_add_arg_292976 =
                                        ((double *) mem_301546)[i_292975];
                                    defunc_0_f_res_292974 =
                                        defunc_0_add_arg_292976;
                                }
                                
                                int64_t binop_p_292977 =
                                        sub64(defunc_0_f_res_292970,
                                              defunc_0_g_res_292938);
                                double defunc_0_f_res_292978 =
                                       sitofp_i64_f64(binop_p_292977);
                                double abs_res_292979 =
                                       fabs(defunc_0_f_res_292978);
                                double tmp1_292980 = abs_res_292979 / x_292935;
                                double x_292981 = tmp1_292980 * tmp1_292980;
                                double y_292982 = tmp1_292980 * x_292981;
                                double tmp2_292983 = 1.0 - y_292982;
                                double x_292984 = tmp2_292983 * tmp2_292983;
                                double tmp3_292985 = tmp2_292983 * x_292984;
                                double tmp4_292986 = defunc_0_f_res_292974 *
                                       tmp3_292985;
                                double defunc_0_f_res_292987;
                                
                                if (cond_292969) {
                                    defunc_0_f_res_292987 = 0.0;
                                } else {
                                    int64_t i_292988 = add64(x_292934,
                                                             i_295311);
                                    double defunc_0_add_arg_292989;
                                    
                                    defunc_0_add_arg_292989 =
                                        ((double *) mem_301549)[i_292988];
                                    defunc_0_f_res_292987 =
                                        defunc_0_add_arg_292989;
                                }
                                
                                double x_292990 = a0_292963 * tmp4_292986;
                                double defunc_9_fit_fun_res_292991 =
                                       defunc_0_f_res_292987 * x_292990;
                                double defunc_1_op_res_292967 =
                                       defunc_9_fit_fun_res_292991 +
                                       redout_295310;
                                double redout_tmp_304747 =
                                       defunc_1_op_res_292967;
                                
                                redout_295310 = redout_tmp_304747;
                            }
                            defunc_2_reduce_res_292964 = redout_295310;
                            ((double *) mem_301518.mem)[i_295318 *
                                                        t_n_m_289909 +
                                                        i_295314] =
                                defunc_2_reduce_res_292964;
                        }
                    }
                    if (memblock_set(ctx, &ext_mem_301999, &mem_301518,
                                     "mem_301518") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_301991, &mem_301514,
                                     "mem_301514") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_301518, "mem_301518") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_301514, "mem_301514") != 0)
                        return 1;
                } else {
                    bool match_lit_292994 = (int64_t) 1 == d_t_289752;
                    int64_t binop_y_301635 = (int64_t) 8 * n_289745;
                    int64_t bytes_301636 = smax64((int64_t) 0, binop_y_301635);
                    int64_t binop_y_301702 = (int64_t) 8 * q_t_289749;
                    int64_t bytes_301703 = smax64((int64_t) 0, binop_y_301702);
                    int64_t binop_y_301804 = (int64_t) 8 * n_289745;
                    int64_t bytes_301805 = smax64((int64_t) 0, binop_y_301804);
                    int64_t binop_y_301871 = (int64_t) 8 * q_t_289749;
                    int64_t bytes_301872 = smax64((int64_t) 0, binop_y_301871);
                    struct memblock ext_mem_301983;
                    
                    ext_mem_301983.references = NULL;
                    
                    struct memblock ext_mem_301975;
                    
                    ext_mem_301975.references = NULL;
                    if (match_lit_292994) {
                        struct memblock mem_301610;
                        
                        mem_301610.references = NULL;
                        if (memblock_alloc(ctx, &mem_301610, bytes_297467,
                                           "mem_301610")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_301614;
                        
                        mem_301614.references = NULL;
                        if (memblock_alloc(ctx, &mem_301614, bytes_297467,
                                           "mem_301614")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_301637_cached_sizze_305033 <
                            (size_t) bytes_301636) {
                            mem_301637 = realloc(mem_301637, bytes_301636);
                            mem_301637_cached_sizze_305033 = bytes_301636;
                        }
                        if (mem_301652_cached_sizze_305034 <
                            (size_t) bytes_301636) {
                            mem_301652 = realloc(mem_301652, bytes_301636);
                            mem_301652_cached_sizze_305034 = bytes_301636;
                        }
                        if (mem_301655_cached_sizze_305035 <
                            (size_t) bytes_301636) {
                            mem_301655 = realloc(mem_301655, bytes_301636);
                            mem_301655_cached_sizze_305035 = bytes_301636;
                        }
                        if (mem_301704_cached_sizze_305036 <
                            (size_t) bytes_301703) {
                            mem_301704 = realloc(mem_301704, bytes_301703);
                            mem_301704_cached_sizze_305036 = bytes_301703;
                        }
                        if (mem_301707_cached_sizze_305037 <
                            (size_t) bytes_301703) {
                            mem_301707 = realloc(mem_301707, bytes_301703);
                            mem_301707_cached_sizze_305037 = bytes_301703;
                        }
                        for (int64_t i_295357 = 0; i_295357 <
                             partition_sizze_289836; i_295357++) {
                            int64_t x_293004;
                            
                            x_293004 = ((int64_t *) mem_296796)[i_295357];
                            for (int64_t i_295322 = 0; i_295322 < n_289745;
                                 i_295322++) {
                                float x_293008;
                                
                                x_293008 = ((float *) mem_296753)[i_295357 *
                                                                  n_289745 +
                                                                  i_295322];
                                
                                double x_293009;
                                
                                x_293009 =
                                    ((double *) mem_301467.mem)[i_295357 *
                                                                n_289745 +
                                                                i_295322];
                                
                                double f32_res_293010 =
                                       fpconv_f32_f64(x_293008);
                                double defunc_1_f_res_293011 = f32_res_293010 -
                                       x_293009;
                                
                                ((double *) mem_301637)[i_295322] =
                                    defunc_1_f_res_293011;
                            }
                            for (int64_t i_295328 = 0; i_295328 < n_289745;
                                 i_295328++) {
                                int64_t x_293014;
                                
                                x_293014 = ((int64_t *) mem_296793)[i_295357 *
                                                                    n_289745 +
                                                                    i_295328];
                                
                                bool cond_293015 = sle64((int64_t) 0, x_293014);
                                double defunc_0_f_res_293016;
                                
                                if (cond_293015) {
                                    bool y_293017 = slt64(x_293014, n_289745);
                                    bool bounds_check_293018 = cond_293015 &&
                                         y_293017;
                                    bool index_certs_293019;
                                    
                                    if (!bounds_check_293018) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_293014,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_289745,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_301614,
                                                           "mem_301614") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301610,
                                                           "mem_301610") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301975,
                                                           "ext_mem_301975") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301983,
                                                           "ext_mem_301983") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301991,
                                                           "ext_mem_301991") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301999,
                                                           "ext_mem_301999") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303060,
                                                           "ext_mem_303060") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303068,
                                                           "ext_mem_303068") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301467,
                                                           "mem_301467") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301456,
                                                           "ext_mem_301456") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301393,
                                                           "ext_mem_301393") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301401,
                                                           "ext_mem_301401") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300038,
                                                           "ext_mem_300038") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299913,
                                                           "ext_mem_299913") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299924,
                                                           "ext_mem_299924") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297627,
                                                           "mem_param_297627") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297619,
                                                           "mem_param_297619") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303131,
                                                           "ext_mem_303131") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303132,
                                                           "ext_mem_303132") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297605,
                                                           "mem_param_297605") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297597,
                                                           "mem_param_297597") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297589,
                                                           "mem_param_297589") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303656,
                                                           "ext_mem_303656") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303657,
                                                           "ext_mem_303657") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303658,
                                                           "ext_mem_303658") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297581,
                                                           "mem_297581") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297577,
                                                           "mem_297577") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304403,
                                                           "mem_out_304403") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304402,
                                                           "mem_out_304402") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304401,
                                                           "mem_out_304401") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_293020;
                                    
                                    defunc_0_f_res_t_res_293020 =
                                        ((double *) mem_301637)[x_293014];
                                    defunc_0_f_res_293016 =
                                        defunc_0_f_res_t_res_293020;
                                } else {
                                    defunc_0_f_res_293016 = 0.0;
                                }
                                
                                double defunc_0_f_res_293021;
                                
                                if (cond_293015) {
                                    bool y_293022 = slt64(x_293014, n_289745);
                                    bool bounds_check_293023 = cond_293015 &&
                                         y_293022;
                                    bool index_certs_293024;
                                    
                                    if (!bounds_check_293023) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_293014,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_289745,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_301614,
                                                           "mem_301614") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301610,
                                                           "mem_301610") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301975,
                                                           "ext_mem_301975") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301983,
                                                           "ext_mem_301983") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301991,
                                                           "ext_mem_301991") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301999,
                                                           "ext_mem_301999") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303060,
                                                           "ext_mem_303060") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303068,
                                                           "ext_mem_303068") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301467,
                                                           "mem_301467") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301456,
                                                           "ext_mem_301456") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301393,
                                                           "ext_mem_301393") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301401,
                                                           "ext_mem_301401") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300038,
                                                           "ext_mem_300038") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299913,
                                                           "ext_mem_299913") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299924,
                                                           "ext_mem_299924") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297627,
                                                           "mem_param_297627") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297619,
                                                           "mem_param_297619") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303131,
                                                           "ext_mem_303131") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303132,
                                                           "ext_mem_303132") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297605,
                                                           "mem_param_297605") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297597,
                                                           "mem_param_297597") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297589,
                                                           "mem_param_297589") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303656,
                                                           "ext_mem_303656") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303657,
                                                           "ext_mem_303657") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303658,
                                                           "ext_mem_303658") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297581,
                                                           "mem_297581") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297577,
                                                           "mem_297577") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304403,
                                                           "mem_out_304403") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304402,
                                                           "mem_out_304402") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304401,
                                                           "mem_out_304401") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_293025;
                                    
                                    defunc_0_f_res_t_res_293025 =
                                        ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                          (i_295357 *
                                                                           ctx_param_ext_297601 +
                                                                           x_293014 *
                                                                           ctx_param_ext_297603)];
                                    defunc_0_f_res_293021 =
                                        defunc_0_f_res_t_res_293025;
                                } else {
                                    defunc_0_f_res_293021 = 0.0;
                                }
                                ((double *) mem_301652)[i_295328] =
                                    defunc_0_f_res_293021;
                                ((double *) mem_301655)[i_295328] =
                                    defunc_0_f_res_293016;
                            }
                            for (int64_t i_295350 = 0; i_295350 < t_n_m_289909;
                                 i_295350++) {
                                int64_t x_293029;
                                
                                x_293029 = ((int64_t *) mem_297468)[i_295357 *
                                                                    t_n_m_289909 +
                                                                    i_295350];
                                
                                double x_293030;
                                
                                x_293030 = ((double *) mem_297472)[i_295357 *
                                                                   t_n_m_289909 +
                                                                   i_295350];
                                
                                int64_t min_arg_293031 = mul64(jump_t_289755,
                                                               i_295350);
                                int64_t min_res_293032 = smin64(i_289916,
                                                                min_arg_293031);
                                int64_t defunc_0_g_res_293033 =
                                        add64((int64_t) 1, min_res_293032);
                                double defunc_2_reduce_res_293034;
                                double redout_295333 = 0.0;
                                
                                for (int64_t i_295336 = 0; i_295336 <
                                     q_t_289749; i_295336++) {
                                    bool cond_293041 = sle64(x_293004,
                                                             i_295336);
                                    int64_t defunc_0_f_res_293042;
                                    
                                    if (cond_293041) {
                                        defunc_0_f_res_293042 = (int64_t) 0;
                                    } else {
                                        int64_t i_293043 = add64(x_293029,
                                                                 i_295336);
                                        int64_t defunc_0_add_arg_293044;
                                        
                                        defunc_0_add_arg_293044 =
                                            ((int64_t *) mem_296793)[i_295357 *
                                                                     n_289745 +
                                                                     i_293043];
                                        
                                        int64_t defunc_1_add_res_293045 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_293044);
                                        
                                        defunc_0_f_res_293042 =
                                            defunc_1_add_res_293045;
                                    }
                                    
                                    double defunc_0_f_res_293046;
                                    
                                    if (cond_293041) {
                                        defunc_0_f_res_293046 = 0.0;
                                    } else {
                                        int64_t i_293047 = add64(x_293029,
                                                                 i_295336);
                                        double defunc_0_add_arg_293048;
                                        
                                        defunc_0_add_arg_293048 =
                                            ((double *) mem_301652)[i_293047];
                                        defunc_0_f_res_293046 =
                                            defunc_0_add_arg_293048;
                                    }
                                    
                                    int64_t binop_p_293049 =
                                            sub64(defunc_0_f_res_293042,
                                                  defunc_0_g_res_293033);
                                    double defunc_0_f_res_293050 =
                                           sitofp_i64_f64(binop_p_293049);
                                    double abs_res_293051 =
                                           fabs(defunc_0_f_res_293050);
                                    double tmp1_293052 = abs_res_293051 /
                                           x_293030;
                                    double x_293053 = tmp1_293052 * tmp1_293052;
                                    double y_293054 = tmp1_293052 * x_293053;
                                    double tmp2_293055 = 1.0 - y_293054;
                                    double x_293056 = tmp2_293055 * tmp2_293055;
                                    double tmp3_293057 = tmp2_293055 * x_293056;
                                    double w_j_293058 = defunc_0_f_res_293046 *
                                           tmp3_293057;
                                    double xw_j_293059 = defunc_0_f_res_293050 *
                                           w_j_293058;
                                    double x2w_j_293060 =
                                           defunc_0_f_res_293050 * xw_j_293059;
                                    double defunc_1_op_res_293039 = w_j_293058 +
                                           redout_295333;
                                    
                                    ((double *) mem_301704)[i_295336] =
                                        xw_j_293059;
                                    ((double *) mem_301707)[i_295336] =
                                        x2w_j_293060;
                                    
                                    double redout_tmp_304755 =
                                           defunc_1_op_res_293039;
                                    
                                    redout_295333 = redout_tmp_304755;
                                }
                                defunc_2_reduce_res_293034 = redout_295333;
                                
                                double a_293061 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293034;
                                double defunc_2_reduce_res_293062;
                                double redout_295339 = 0.0;
                                
                                for (int64_t i_295340 = 0; i_295340 <
                                     q_t_289749; i_295340++) {
                                    double x_293066;
                                    
                                    x_293066 =
                                        ((double *) mem_301704)[i_295340];
                                    
                                    double defunc_1_op_res_293065 = x_293066 +
                                           redout_295339;
                                    double redout_tmp_304758 =
                                           defunc_1_op_res_293065;
                                    
                                    redout_295339 = redout_tmp_304758;
                                }
                                defunc_2_reduce_res_293062 = redout_295339;
                                
                                double b_293067 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293062;
                                double defunc_2_reduce_res_293068;
                                double redout_295341 = 0.0;
                                
                                for (int64_t i_295342 = 0; i_295342 <
                                     q_t_289749; i_295342++) {
                                    double x_293072;
                                    
                                    x_293072 =
                                        ((double *) mem_301707)[i_295342];
                                    
                                    double defunc_1_op_res_293071 = x_293072 +
                                           redout_295341;
                                    double redout_tmp_304759 =
                                           defunc_1_op_res_293071;
                                    
                                    redout_295341 = redout_tmp_304759;
                                }
                                defunc_2_reduce_res_293068 = redout_295341;
                                
                                double c_293073 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293068;
                                double x_293074 = a_293061 * c_293073;
                                double y_293075 = b_293067 * b_293067;
                                double y_293076 = x_293074 - y_293075;
                                double det1_293077 = 1.0 / y_293076;
                                double a11_293078 = c_293073 * det1_293077;
                                double x_293079 = 0.0 - b_293067;
                                double b11_293080 = det1_293077 * x_293079;
                                double c11_293081 = a_293061 * det1_293077;
                                double defunc_2_reduce_res_293082;
                                double defunc_2_reduce_res_293083;
                                double redout_295343;
                                double redout_295344;
                                
                                redout_295343 = 0.0;
                                redout_295344 = 0.0;
                                for (int64_t i_295345 = 0; i_295345 <
                                     q_t_289749; i_295345++) {
                                    bool cond_293091 = sle64(x_293004,
                                                             i_295345);
                                    int64_t defunc_0_f_res_293092;
                                    
                                    if (cond_293091) {
                                        defunc_0_f_res_293092 = (int64_t) 0;
                                    } else {
                                        int64_t i_293093 = add64(x_293029,
                                                                 i_295345);
                                        int64_t defunc_0_add_arg_293094;
                                        
                                        defunc_0_add_arg_293094 =
                                            ((int64_t *) mem_296793)[i_295357 *
                                                                     n_289745 +
                                                                     i_293093];
                                        
                                        int64_t defunc_1_add_res_293095 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_293094);
                                        
                                        defunc_0_f_res_293092 =
                                            defunc_1_add_res_293095;
                                    }
                                    
                                    double defunc_0_f_res_293096;
                                    
                                    if (cond_293091) {
                                        defunc_0_f_res_293096 = 0.0;
                                    } else {
                                        int64_t i_293097 = add64(x_293029,
                                                                 i_295345);
                                        double defunc_0_add_arg_293098;
                                        
                                        defunc_0_add_arg_293098 =
                                            ((double *) mem_301652)[i_293097];
                                        defunc_0_f_res_293096 =
                                            defunc_0_add_arg_293098;
                                    }
                                    
                                    int64_t binop_p_293099 =
                                            sub64(defunc_0_f_res_293092,
                                                  defunc_0_g_res_293033);
                                    double defunc_0_f_res_293100 =
                                           sitofp_i64_f64(binop_p_293099);
                                    double abs_res_293101 =
                                           fabs(defunc_0_f_res_293100);
                                    double tmp1_293102 = abs_res_293101 /
                                           x_293030;
                                    double x_293103 = tmp1_293102 * tmp1_293102;
                                    double y_293104 = tmp1_293102 * x_293103;
                                    double tmp2_293105 = 1.0 - y_293104;
                                    double x_293106 = tmp2_293105 * tmp2_293105;
                                    double tmp3_293107 = tmp2_293105 * x_293106;
                                    double tmp4_293108 = defunc_0_f_res_293096 *
                                           tmp3_293107;
                                    double defunc_1_f_res_293109 =
                                           defunc_0_f_res_293100 * tmp4_293108;
                                    double defunc_0_f_res_293110;
                                    
                                    if (cond_293091) {
                                        defunc_0_f_res_293110 = 0.0;
                                    } else {
                                        int64_t i_293111 = add64(x_293029,
                                                                 i_295345);
                                        double defunc_0_add_arg_293112;
                                        
                                        defunc_0_add_arg_293112 =
                                            ((double *) mem_301655)[i_293111];
                                        defunc_0_f_res_293110 =
                                            defunc_0_add_arg_293112;
                                    }
                                    
                                    double x_293113 = a11_293078 * tmp4_293108;
                                    double y_293114 = b11_293080 *
                                           defunc_1_f_res_293109;
                                    double x_293115 = x_293113 + y_293114;
                                    double defunc_9_fit_fun_res_293116 =
                                           defunc_0_f_res_293110 * x_293115;
                                    double x_293117 = b11_293080 * tmp4_293108;
                                    double y_293118 = c11_293081 *
                                           defunc_1_f_res_293109;
                                    double x_293119 = x_293117 + y_293118;
                                    double defunc_9_slope_fun_res_293120 =
                                           defunc_0_f_res_293110 * x_293119;
                                    double defunc_1_op_res_293086 =
                                           defunc_9_fit_fun_res_293116 +
                                           redout_295343;
                                    double defunc_1_op_res_293089 =
                                           defunc_9_slope_fun_res_293120 +
                                           redout_295344;
                                    double redout_tmp_304760 =
                                           defunc_1_op_res_293086;
                                    double redout_tmp_304761 =
                                           defunc_1_op_res_293089;
                                    
                                    redout_295343 = redout_tmp_304760;
                                    redout_295344 = redout_tmp_304761;
                                }
                                defunc_2_reduce_res_293082 = redout_295343;
                                defunc_2_reduce_res_293083 = redout_295344;
                                ((double *) mem_301610.mem)[i_295357 *
                                                            t_n_m_289909 +
                                                            i_295350] =
                                    defunc_2_reduce_res_293082;
                                ((double *) mem_301614.mem)[i_295357 *
                                                            t_n_m_289909 +
                                                            i_295350] =
                                    defunc_2_reduce_res_293083;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_301983, &mem_301610,
                                         "mem_301610") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_301975, &mem_301614,
                                         "mem_301614") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301614, "mem_301614") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301610, "mem_301610") != 0)
                            return 1;
                    } else {
                        struct memblock mem_301779;
                        
                        mem_301779.references = NULL;
                        if (memblock_alloc(ctx, &mem_301779, bytes_297467,
                                           "mem_301779")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_301783;
                        
                        mem_301783.references = NULL;
                        if (memblock_alloc(ctx, &mem_301783, bytes_297467,
                                           "mem_301783")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_301806_cached_sizze_305038 <
                            (size_t) bytes_301805) {
                            mem_301806 = realloc(mem_301806, bytes_301805);
                            mem_301806_cached_sizze_305038 = bytes_301805;
                        }
                        if (mem_301821_cached_sizze_305039 <
                            (size_t) bytes_301805) {
                            mem_301821 = realloc(mem_301821, bytes_301805);
                            mem_301821_cached_sizze_305039 = bytes_301805;
                        }
                        if (mem_301824_cached_sizze_305040 <
                            (size_t) bytes_301805) {
                            mem_301824 = realloc(mem_301824, bytes_301805);
                            mem_301824_cached_sizze_305040 = bytes_301805;
                        }
                        if (mem_301873_cached_sizze_305041 <
                            (size_t) bytes_301872) {
                            mem_301873 = realloc(mem_301873, bytes_301872);
                            mem_301873_cached_sizze_305041 = bytes_301872;
                        }
                        if (mem_301876_cached_sizze_305042 <
                            (size_t) bytes_301872) {
                            mem_301876 = realloc(mem_301876, bytes_301872);
                            mem_301876_cached_sizze_305042 = bytes_301872;
                        }
                        if (mem_301879_cached_sizze_305043 <
                            (size_t) bytes_301872) {
                            mem_301879 = realloc(mem_301879, bytes_301872);
                            mem_301879_cached_sizze_305043 = bytes_301872;
                        }
                        if (mem_301882_cached_sizze_305044 <
                            (size_t) bytes_301872) {
                            mem_301882 = realloc(mem_301882, bytes_301872);
                            mem_301882_cached_sizze_305044 = bytes_301872;
                        }
                        for (int64_t i_295407 = 0; i_295407 <
                             partition_sizze_289836; i_295407++) {
                            int64_t x_293130;
                            
                            x_293130 = ((int64_t *) mem_296796)[i_295407];
                            for (int64_t i_295362 = 0; i_295362 < n_289745;
                                 i_295362++) {
                                float x_293134;
                                
                                x_293134 = ((float *) mem_296753)[i_295407 *
                                                                  n_289745 +
                                                                  i_295362];
                                
                                double x_293135;
                                
                                x_293135 =
                                    ((double *) mem_301467.mem)[i_295407 *
                                                                n_289745 +
                                                                i_295362];
                                
                                double f32_res_293136 =
                                       fpconv_f32_f64(x_293134);
                                double defunc_1_f_res_293137 = f32_res_293136 -
                                       x_293135;
                                
                                ((double *) mem_301806)[i_295362] =
                                    defunc_1_f_res_293137;
                            }
                            for (int64_t i_295368 = 0; i_295368 < n_289745;
                                 i_295368++) {
                                int64_t x_293140;
                                
                                x_293140 = ((int64_t *) mem_296793)[i_295407 *
                                                                    n_289745 +
                                                                    i_295368];
                                
                                bool cond_293141 = sle64((int64_t) 0, x_293140);
                                double defunc_0_f_res_293142;
                                
                                if (cond_293141) {
                                    bool y_293143 = slt64(x_293140, n_289745);
                                    bool bounds_check_293144 = cond_293141 &&
                                         y_293143;
                                    bool index_certs_293145;
                                    
                                    if (!bounds_check_293144) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_293140,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_289745,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_301783,
                                                           "mem_301783") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301779,
                                                           "mem_301779") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301975,
                                                           "ext_mem_301975") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301983,
                                                           "ext_mem_301983") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301991,
                                                           "ext_mem_301991") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301999,
                                                           "ext_mem_301999") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303060,
                                                           "ext_mem_303060") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303068,
                                                           "ext_mem_303068") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301467,
                                                           "mem_301467") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301456,
                                                           "ext_mem_301456") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301393,
                                                           "ext_mem_301393") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301401,
                                                           "ext_mem_301401") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300038,
                                                           "ext_mem_300038") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299913,
                                                           "ext_mem_299913") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299924,
                                                           "ext_mem_299924") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297627,
                                                           "mem_param_297627") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297619,
                                                           "mem_param_297619") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303131,
                                                           "ext_mem_303131") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303132,
                                                           "ext_mem_303132") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297605,
                                                           "mem_param_297605") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297597,
                                                           "mem_param_297597") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297589,
                                                           "mem_param_297589") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303656,
                                                           "ext_mem_303656") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303657,
                                                           "ext_mem_303657") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303658,
                                                           "ext_mem_303658") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297581,
                                                           "mem_297581") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297577,
                                                           "mem_297577") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304403,
                                                           "mem_out_304403") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304402,
                                                           "mem_out_304402") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304401,
                                                           "mem_out_304401") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_293146;
                                    
                                    defunc_0_f_res_t_res_293146 =
                                        ((double *) mem_301806)[x_293140];
                                    defunc_0_f_res_293142 =
                                        defunc_0_f_res_t_res_293146;
                                } else {
                                    defunc_0_f_res_293142 = 0.0;
                                }
                                
                                double defunc_0_f_res_293147;
                                
                                if (cond_293141) {
                                    bool y_293148 = slt64(x_293140, n_289745);
                                    bool bounds_check_293149 = cond_293141 &&
                                         y_293148;
                                    bool index_certs_293150;
                                    
                                    if (!bounds_check_293149) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_293140,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_289745,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_301783,
                                                           "mem_301783") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301779,
                                                           "mem_301779") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301975,
                                                           "ext_mem_301975") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301983,
                                                           "ext_mem_301983") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301991,
                                                           "ext_mem_301991") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301999,
                                                           "ext_mem_301999") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303060,
                                                           "ext_mem_303060") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303068,
                                                           "ext_mem_303068") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301467,
                                                           "mem_301467") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301456,
                                                           "ext_mem_301456") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301393,
                                                           "ext_mem_301393") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301401,
                                                           "ext_mem_301401") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300038,
                                                           "ext_mem_300038") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299913,
                                                           "ext_mem_299913") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299924,
                                                           "ext_mem_299924") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297627,
                                                           "mem_param_297627") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297619,
                                                           "mem_param_297619") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303131,
                                                           "ext_mem_303131") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303132,
                                                           "ext_mem_303132") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297605,
                                                           "mem_param_297605") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297597,
                                                           "mem_param_297597") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297589,
                                                           "mem_param_297589") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303656,
                                                           "ext_mem_303656") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303657,
                                                           "ext_mem_303657") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303658,
                                                           "ext_mem_303658") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297581,
                                                           "mem_297581") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297577,
                                                           "mem_297577") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304403,
                                                           "mem_out_304403") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304402,
                                                           "mem_out_304402") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304401,
                                                           "mem_out_304401") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_293151;
                                    
                                    defunc_0_f_res_t_res_293151 =
                                        ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                          (i_295407 *
                                                                           ctx_param_ext_297601 +
                                                                           x_293140 *
                                                                           ctx_param_ext_297603)];
                                    defunc_0_f_res_293147 =
                                        defunc_0_f_res_t_res_293151;
                                } else {
                                    defunc_0_f_res_293147 = 0.0;
                                }
                                ((double *) mem_301821)[i_295368] =
                                    defunc_0_f_res_293147;
                                ((double *) mem_301824)[i_295368] =
                                    defunc_0_f_res_293142;
                            }
                            for (int64_t i_295400 = 0; i_295400 < t_n_m_289909;
                                 i_295400++) {
                                int64_t x_293155;
                                
                                x_293155 = ((int64_t *) mem_297468)[i_295407 *
                                                                    t_n_m_289909 +
                                                                    i_295400];
                                
                                double x_293156;
                                
                                x_293156 = ((double *) mem_297472)[i_295407 *
                                                                   t_n_m_289909 +
                                                                   i_295400];
                                
                                int64_t min_arg_293157 = mul64(jump_t_289755,
                                                               i_295400);
                                int64_t min_res_293158 = smin64(i_289916,
                                                                min_arg_293157);
                                int64_t defunc_0_g_res_293159 =
                                        add64((int64_t) 1, min_res_293158);
                                double defunc_2_reduce_res_293160;
                                double redout_295375 = 0.0;
                                
                                for (int64_t i_295380 = 0; i_295380 <
                                     q_t_289749; i_295380++) {
                                    bool cond_293169 = sle64(x_293130,
                                                             i_295380);
                                    int64_t defunc_0_f_res_293170;
                                    
                                    if (cond_293169) {
                                        defunc_0_f_res_293170 = (int64_t) 0;
                                    } else {
                                        int64_t i_293171 = add64(x_293155,
                                                                 i_295380);
                                        int64_t defunc_0_add_arg_293172;
                                        
                                        defunc_0_add_arg_293172 =
                                            ((int64_t *) mem_296793)[i_295407 *
                                                                     n_289745 +
                                                                     i_293171];
                                        
                                        int64_t defunc_1_add_res_293173 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_293172);
                                        
                                        defunc_0_f_res_293170 =
                                            defunc_1_add_res_293173;
                                    }
                                    
                                    double defunc_0_f_res_293174;
                                    
                                    if (cond_293169) {
                                        defunc_0_f_res_293174 = 0.0;
                                    } else {
                                        int64_t i_293175 = add64(x_293155,
                                                                 i_295380);
                                        double defunc_0_add_arg_293176;
                                        
                                        defunc_0_add_arg_293176 =
                                            ((double *) mem_301821)[i_293175];
                                        defunc_0_f_res_293174 =
                                            defunc_0_add_arg_293176;
                                    }
                                    
                                    int64_t binop_p_293177 =
                                            sub64(defunc_0_f_res_293170,
                                                  defunc_0_g_res_293159);
                                    double defunc_0_f_res_293178 =
                                           sitofp_i64_f64(binop_p_293177);
                                    double abs_res_293179 =
                                           fabs(defunc_0_f_res_293178);
                                    double tmp1_293180 = abs_res_293179 /
                                           x_293156;
                                    double x_293181 = tmp1_293180 * tmp1_293180;
                                    double y_293182 = tmp1_293180 * x_293181;
                                    double tmp2_293183 = 1.0 - y_293182;
                                    double x_293184 = tmp2_293183 * tmp2_293183;
                                    double tmp3_293185 = tmp2_293183 * x_293184;
                                    double w_j_293186 = defunc_0_f_res_293174 *
                                           tmp3_293185;
                                    double xw_j_293187 = defunc_0_f_res_293178 *
                                           w_j_293186;
                                    double x2w_j_293188 =
                                           defunc_0_f_res_293178 * xw_j_293187;
                                    double x3w_j_293189 =
                                           defunc_0_f_res_293178 * x2w_j_293188;
                                    double x4w_j_293190 =
                                           defunc_0_f_res_293178 * x3w_j_293189;
                                    double defunc_1_op_res_293167 = w_j_293186 +
                                           redout_295375;
                                    
                                    ((double *) mem_301873)[i_295380] =
                                        xw_j_293187;
                                    ((double *) mem_301876)[i_295380] =
                                        x2w_j_293188;
                                    ((double *) mem_301879)[i_295380] =
                                        x3w_j_293189;
                                    ((double *) mem_301882)[i_295380] =
                                        x4w_j_293190;
                                    
                                    double redout_tmp_304769 =
                                           defunc_1_op_res_293167;
                                    
                                    redout_295375 = redout_tmp_304769;
                                }
                                defunc_2_reduce_res_293160 = redout_295375;
                                
                                double a_293191 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293160;
                                double defunc_2_reduce_res_293192;
                                double redout_295385 = 0.0;
                                
                                for (int64_t i_295386 = 0; i_295386 <
                                     q_t_289749; i_295386++) {
                                    double x_293196;
                                    
                                    x_293196 =
                                        ((double *) mem_301873)[i_295386];
                                    
                                    double defunc_1_op_res_293195 = x_293196 +
                                           redout_295385;
                                    double redout_tmp_304774 =
                                           defunc_1_op_res_293195;
                                    
                                    redout_295385 = redout_tmp_304774;
                                }
                                defunc_2_reduce_res_293192 = redout_295385;
                                
                                double b_293197 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293192;
                                double defunc_2_reduce_res_293198;
                                double redout_295387 = 0.0;
                                
                                for (int64_t i_295388 = 0; i_295388 <
                                     q_t_289749; i_295388++) {
                                    double x_293202;
                                    
                                    x_293202 =
                                        ((double *) mem_301876)[i_295388];
                                    
                                    double defunc_1_op_res_293201 = x_293202 +
                                           redout_295387;
                                    double redout_tmp_304775 =
                                           defunc_1_op_res_293201;
                                    
                                    redout_295387 = redout_tmp_304775;
                                }
                                defunc_2_reduce_res_293198 = redout_295387;
                                
                                double c_293203 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293198;
                                double defunc_2_reduce_res_293204;
                                double redout_295389 = 0.0;
                                
                                for (int64_t i_295390 = 0; i_295390 <
                                     q_t_289749; i_295390++) {
                                    double x_293208;
                                    
                                    x_293208 =
                                        ((double *) mem_301879)[i_295390];
                                    
                                    double defunc_1_op_res_293207 = x_293208 +
                                           redout_295389;
                                    double redout_tmp_304776 =
                                           defunc_1_op_res_293207;
                                    
                                    redout_295389 = redout_tmp_304776;
                                }
                                defunc_2_reduce_res_293204 = redout_295389;
                                
                                double d_293209 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293204;
                                double defunc_2_reduce_res_293210;
                                double redout_295391 = 0.0;
                                
                                for (int64_t i_295392 = 0; i_295392 <
                                     q_t_289749; i_295392++) {
                                    double x_293214;
                                    
                                    x_293214 =
                                        ((double *) mem_301882)[i_295392];
                                    
                                    double defunc_1_op_res_293213 = x_293214 +
                                           redout_295391;
                                    double redout_tmp_304777 =
                                           defunc_1_op_res_293213;
                                    
                                    redout_295391 = redout_tmp_304777;
                                }
                                defunc_2_reduce_res_293210 = redout_295391;
                                
                                double e_293215 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293210;
                                double x_293216 = c_293203 * e_293215;
                                double y_293217 = d_293209 * d_293209;
                                double a12_293218 = x_293216 - y_293217;
                                double x_293219 = c_293203 * d_293209;
                                double y_293220 = b_293197 * e_293215;
                                double b12_293221 = x_293219 - y_293220;
                                double x_293222 = b_293197 * d_293209;
                                double y_293223 = c_293203 * c_293203;
                                double c12_293224 = x_293222 - y_293223;
                                double x_293225 = a_293191 * e_293215;
                                double b2_293226 = x_293225 - y_293223;
                                double x_293227 = b_293197 * c_293203;
                                double y_293228 = a_293191 * d_293209;
                                double c2_293229 = x_293227 - y_293228;
                                double x_293230 = a_293191 * a12_293218;
                                double y_293231 = b_293197 * b12_293221;
                                double x_293232 = x_293230 + y_293231;
                                double y_293233 = c_293203 * c12_293224;
                                double y_293234 = x_293232 + y_293233;
                                double det_293235 = 1.0 / y_293234;
                                double a12_293236 = a12_293218 * det_293235;
                                double b12_293237 = b12_293221 * det_293235;
                                double c12_293238 = c12_293224 * det_293235;
                                double b2_293239 = b2_293226 * det_293235;
                                double c2_293240 = c2_293229 * det_293235;
                                double defunc_2_reduce_res_293241;
                                double defunc_2_reduce_res_293242;
                                double redout_295393;
                                double redout_295394;
                                
                                redout_295393 = 0.0;
                                redout_295394 = 0.0;
                                for (int64_t i_295395 = 0; i_295395 <
                                     q_t_289749; i_295395++) {
                                    bool cond_293250 = sle64(x_293130,
                                                             i_295395);
                                    int64_t defunc_0_f_res_293251;
                                    
                                    if (cond_293250) {
                                        defunc_0_f_res_293251 = (int64_t) 0;
                                    } else {
                                        int64_t i_293252 = add64(x_293155,
                                                                 i_295395);
                                        int64_t defunc_0_add_arg_293253;
                                        
                                        defunc_0_add_arg_293253 =
                                            ((int64_t *) mem_296793)[i_295407 *
                                                                     n_289745 +
                                                                     i_293252];
                                        
                                        int64_t defunc_1_add_res_293254 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_293253);
                                        
                                        defunc_0_f_res_293251 =
                                            defunc_1_add_res_293254;
                                    }
                                    
                                    double defunc_0_f_res_293255;
                                    
                                    if (cond_293250) {
                                        defunc_0_f_res_293255 = 0.0;
                                    } else {
                                        int64_t i_293256 = add64(x_293155,
                                                                 i_295395);
                                        double defunc_0_add_arg_293257;
                                        
                                        defunc_0_add_arg_293257 =
                                            ((double *) mem_301821)[i_293256];
                                        defunc_0_f_res_293255 =
                                            defunc_0_add_arg_293257;
                                    }
                                    
                                    int64_t binop_p_293258 =
                                            sub64(defunc_0_f_res_293251,
                                                  defunc_0_g_res_293159);
                                    double defunc_0_f_res_293259 =
                                           sitofp_i64_f64(binop_p_293258);
                                    double abs_res_293260 =
                                           fabs(defunc_0_f_res_293259);
                                    double tmp1_293261 = abs_res_293260 /
                                           x_293156;
                                    double x_293262 = tmp1_293261 * tmp1_293261;
                                    double y_293263 = tmp1_293261 * x_293262;
                                    double tmp2_293264 = 1.0 - y_293263;
                                    double x_293265 = tmp2_293264 * tmp2_293264;
                                    double tmp3_293266 = tmp2_293264 * x_293265;
                                    double tmp4_293267 = defunc_0_f_res_293255 *
                                           tmp3_293266;
                                    double defunc_1_f_res_293268 =
                                           defunc_0_f_res_293259 * tmp4_293267;
                                    double defunc_1_f_res_293269 =
                                           defunc_0_f_res_293259 *
                                           defunc_1_f_res_293268;
                                    double defunc_0_f_res_293270;
                                    
                                    if (cond_293250) {
                                        defunc_0_f_res_293270 = 0.0;
                                    } else {
                                        int64_t i_293271 = add64(x_293155,
                                                                 i_295395);
                                        double defunc_0_add_arg_293272;
                                        
                                        defunc_0_add_arg_293272 =
                                            ((double *) mem_301824)[i_293271];
                                        defunc_0_f_res_293270 =
                                            defunc_0_add_arg_293272;
                                    }
                                    
                                    double x_293273 = a12_293236 * tmp4_293267;
                                    double y_293274 = b12_293237 *
                                           defunc_1_f_res_293268;
                                    double x_293275 = x_293273 + y_293274;
                                    double y_293276 = c12_293238 *
                                           defunc_1_f_res_293269;
                                    double x_293277 = x_293275 + y_293276;
                                    double defunc_9_fit_fun_res_293278 =
                                           defunc_0_f_res_293270 * x_293277;
                                    double x_293279 = b12_293237 * tmp4_293267;
                                    double y_293280 = b2_293239 *
                                           defunc_1_f_res_293268;
                                    double x_293281 = x_293279 + y_293280;
                                    double y_293282 = c2_293240 *
                                           defunc_1_f_res_293269;
                                    double x_293283 = x_293281 + y_293282;
                                    double defunc_9_slope_fun_res_293284 =
                                           defunc_0_f_res_293270 * x_293283;
                                    double defunc_1_op_res_293245 =
                                           defunc_9_fit_fun_res_293278 +
                                           redout_295393;
                                    double defunc_1_op_res_293248 =
                                           defunc_9_slope_fun_res_293284 +
                                           redout_295394;
                                    double redout_tmp_304778 =
                                           defunc_1_op_res_293245;
                                    double redout_tmp_304779 =
                                           defunc_1_op_res_293248;
                                    
                                    redout_295393 = redout_tmp_304778;
                                    redout_295394 = redout_tmp_304779;
                                }
                                defunc_2_reduce_res_293241 = redout_295393;
                                defunc_2_reduce_res_293242 = redout_295394;
                                ((double *) mem_301779.mem)[i_295407 *
                                                            t_n_m_289909 +
                                                            i_295400] =
                                    defunc_2_reduce_res_293241;
                                ((double *) mem_301783.mem)[i_295407 *
                                                            t_n_m_289909 +
                                                            i_295400] =
                                    defunc_2_reduce_res_293242;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_301983, &mem_301779,
                                         "mem_301779") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_301975, &mem_301783,
                                         "mem_301783") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301783, "mem_301783") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301779, "mem_301779") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_301999, &ext_mem_301983,
                                     "ext_mem_301983") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_301991, &ext_mem_301975,
                                     "ext_mem_301975") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301975,
                                       "ext_mem_301975") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301983,
                                       "ext_mem_301983") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_303068, &ext_mem_301999,
                                 "ext_mem_301999") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_303060, &ext_mem_301991,
                                 "ext_mem_301991") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_301991, "ext_mem_301991") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_301999, "ext_mem_301999") != 0)
                    return 1;
            } else {
                bool cond_293287 = sle64(jump_threshold_2_289760,
                                         jump_t_289755);
                bool cond_t_res_293288 = slt64(q_t_289749,
                                               q_threshold_1_289761);
                bool x_293289 = cond_293287 && cond_t_res_293288;
                struct memblock ext_mem_303052;
                
                ext_mem_303052.references = NULL;
                
                struct memblock ext_mem_303044;
                
                ext_mem_303044.references = NULL;
                if (x_293289) {
                    bool match_lit_293292 = (int64_t) 0 == d_t_289752;
                    int64_t binop_y_302025 = (int64_t) 8 * n_289745;
                    int64_t bytes_302026 = smax64((int64_t) 0, binop_y_302025);
                    int64_t binop_y_302081 = (int64_t) 8 * q_t_289749;
                    int64_t bytes_302082 = smax64((int64_t) 0, binop_y_302081);
                    struct memblock ext_mem_302540;
                    
                    ext_mem_302540.references = NULL;
                    
                    struct memblock ext_mem_302532;
                    
                    ext_mem_302532.references = NULL;
                    if (match_lit_293292) {
                        struct memblock mem_302010;
                        
                        mem_302010.references = NULL;
                        if (memblock_alloc(ctx, &mem_302010, bytes_297467,
                                           "mem_302010")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_304780 = 0; i_304780 <
                             partition_sizze_289836; i_304780++) {
                            for (int64_t i_304781 = 0; i_304781 < t_n_m_289909;
                                 i_304781++) {
                                ((double *) mem_302010.mem)[i_304780 *
                                                            t_n_m_289909 +
                                                            i_304781] = 0.0;
                            }
                        }
                        
                        struct memblock mem_302014;
                        
                        mem_302014.references = NULL;
                        if (memblock_alloc(ctx, &mem_302014, bytes_297467,
                                           "mem_302014")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_302027_cached_sizze_305045 <
                            (size_t) bytes_302026) {
                            mem_302027 = realloc(mem_302027, bytes_302026);
                            mem_302027_cached_sizze_305045 = bytes_302026;
                        }
                        if (mem_302042_cached_sizze_305046 <
                            (size_t) bytes_302026) {
                            mem_302042 = realloc(mem_302042, bytes_302026);
                            mem_302042_cached_sizze_305046 = bytes_302026;
                        }
                        if (mem_302045_cached_sizze_305047 <
                            (size_t) bytes_302026) {
                            mem_302045 = realloc(mem_302045, bytes_302026);
                            mem_302045_cached_sizze_305047 = bytes_302026;
                        }
                        if (mem_302083_cached_sizze_305048 <
                            (size_t) bytes_302082) {
                            mem_302083 = realloc(mem_302083, bytes_302082);
                            mem_302083_cached_sizze_305048 = bytes_302082;
                        }
                        for (int64_t i_295434 = 0; i_295434 <
                             partition_sizze_289836; i_295434++) {
                            int64_t x_293302;
                            
                            x_293302 = ((int64_t *) mem_296796)[i_295434];
                            for (int64_t i_295412 = 0; i_295412 < n_289745;
                                 i_295412++) {
                                float x_293306;
                                
                                x_293306 = ((float *) mem_296753)[i_295434 *
                                                                  n_289745 +
                                                                  i_295412];
                                
                                double x_293307;
                                
                                x_293307 =
                                    ((double *) mem_301467.mem)[i_295434 *
                                                                n_289745 +
                                                                i_295412];
                                
                                double f32_res_293308 =
                                       fpconv_f32_f64(x_293306);
                                double defunc_1_f_res_293309 = f32_res_293308 -
                                       x_293307;
                                
                                ((double *) mem_302027)[i_295412] =
                                    defunc_1_f_res_293309;
                            }
                            for (int64_t i_295418 = 0; i_295418 < n_289745;
                                 i_295418++) {
                                int64_t x_293312;
                                
                                x_293312 = ((int64_t *) mem_296793)[i_295434 *
                                                                    n_289745 +
                                                                    i_295418];
                                
                                bool cond_293313 = sle64((int64_t) 0, x_293312);
                                double defunc_0_f_res_293314;
                                
                                if (cond_293313) {
                                    bool y_293315 = slt64(x_293312, n_289745);
                                    bool bounds_check_293316 = cond_293313 &&
                                         y_293315;
                                    bool index_certs_293317;
                                    
                                    if (!bounds_check_293316) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_293312,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_289745,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_302014,
                                                           "mem_302014") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_302010,
                                                           "mem_302010") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302532,
                                                           "ext_mem_302532") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302540,
                                                           "ext_mem_302540") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303044,
                                                           "ext_mem_303044") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303052,
                                                           "ext_mem_303052") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303060,
                                                           "ext_mem_303060") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303068,
                                                           "ext_mem_303068") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301467,
                                                           "mem_301467") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301456,
                                                           "ext_mem_301456") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301393,
                                                           "ext_mem_301393") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301401,
                                                           "ext_mem_301401") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300038,
                                                           "ext_mem_300038") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299913,
                                                           "ext_mem_299913") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299924,
                                                           "ext_mem_299924") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297627,
                                                           "mem_param_297627") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297619,
                                                           "mem_param_297619") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303131,
                                                           "ext_mem_303131") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303132,
                                                           "ext_mem_303132") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297605,
                                                           "mem_param_297605") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297597,
                                                           "mem_param_297597") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297589,
                                                           "mem_param_297589") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303656,
                                                           "ext_mem_303656") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303657,
                                                           "ext_mem_303657") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303658,
                                                           "ext_mem_303658") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297581,
                                                           "mem_297581") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297577,
                                                           "mem_297577") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304403,
                                                           "mem_out_304403") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304402,
                                                           "mem_out_304402") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304401,
                                                           "mem_out_304401") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_293318;
                                    
                                    defunc_0_f_res_t_res_293318 =
                                        ((double *) mem_302027)[x_293312];
                                    defunc_0_f_res_293314 =
                                        defunc_0_f_res_t_res_293318;
                                } else {
                                    defunc_0_f_res_293314 = 0.0;
                                }
                                
                                double defunc_0_f_res_293319;
                                
                                if (cond_293313) {
                                    bool y_293320 = slt64(x_293312, n_289745);
                                    bool bounds_check_293321 = cond_293313 &&
                                         y_293320;
                                    bool index_certs_293322;
                                    
                                    if (!bounds_check_293321) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_293312,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_289745,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_302014,
                                                           "mem_302014") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_302010,
                                                           "mem_302010") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302532,
                                                           "ext_mem_302532") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302540,
                                                           "ext_mem_302540") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303044,
                                                           "ext_mem_303044") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303052,
                                                           "ext_mem_303052") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303060,
                                                           "ext_mem_303060") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303068,
                                                           "ext_mem_303068") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301467,
                                                           "mem_301467") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301456,
                                                           "ext_mem_301456") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301393,
                                                           "ext_mem_301393") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301401,
                                                           "ext_mem_301401") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300038,
                                                           "ext_mem_300038") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299913,
                                                           "ext_mem_299913") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299924,
                                                           "ext_mem_299924") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297627,
                                                           "mem_param_297627") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297619,
                                                           "mem_param_297619") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303131,
                                                           "ext_mem_303131") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303132,
                                                           "ext_mem_303132") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297605,
                                                           "mem_param_297605") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297597,
                                                           "mem_param_297597") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297589,
                                                           "mem_param_297589") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303656,
                                                           "ext_mem_303656") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303657,
                                                           "ext_mem_303657") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303658,
                                                           "ext_mem_303658") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297581,
                                                           "mem_297581") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297577,
                                                           "mem_297577") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304403,
                                                           "mem_out_304403") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304402,
                                                           "mem_out_304402") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304401,
                                                           "mem_out_304401") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_293323;
                                    
                                    defunc_0_f_res_t_res_293323 =
                                        ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                          (i_295434 *
                                                                           ctx_param_ext_297601 +
                                                                           x_293312 *
                                                                           ctx_param_ext_297603)];
                                    defunc_0_f_res_293319 =
                                        defunc_0_f_res_t_res_293323;
                                } else {
                                    defunc_0_f_res_293319 = 0.0;
                                }
                                ((double *) mem_302042)[i_295418] =
                                    defunc_0_f_res_293319;
                                ((double *) mem_302045)[i_295418] =
                                    defunc_0_f_res_293314;
                            }
                            for (int64_t i_295430 = 0; i_295430 < t_n_m_289909;
                                 i_295430++) {
                                int64_t x_293326;
                                
                                x_293326 = ((int64_t *) mem_297468)[i_295434 *
                                                                    t_n_m_289909 +
                                                                    i_295430];
                                
                                double x_293327;
                                
                                x_293327 = ((double *) mem_297472)[i_295434 *
                                                                   t_n_m_289909 +
                                                                   i_295430];
                                
                                int64_t min_arg_293328 = mul64(jump_t_289755,
                                                               i_295430);
                                int64_t min_res_293329 = smin64(i_289916,
                                                                min_arg_293328);
                                int64_t defunc_0_g_res_293330 =
                                        add64((int64_t) 1, min_res_293329);
                                double defunc_2_reduce_res_293331;
                                double redout_295422 = 0.0;
                                
                                for (int64_t i_295424 = 0; i_295424 <
                                     q_t_289749; i_295424++) {
                                    bool cond_293337 = sle64(x_293302,
                                                             i_295424);
                                    int64_t defunc_0_f_res_293338;
                                    
                                    if (cond_293337) {
                                        defunc_0_f_res_293338 = (int64_t) 0;
                                    } else {
                                        int64_t i_293339 = add64(x_293326,
                                                                 i_295424);
                                        int64_t defunc_0_add_arg_293340;
                                        
                                        defunc_0_add_arg_293340 =
                                            ((int64_t *) mem_296793)[i_295434 *
                                                                     n_289745 +
                                                                     i_293339];
                                        
                                        int64_t defunc_1_add_res_293341 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_293340);
                                        
                                        defunc_0_f_res_293338 =
                                            defunc_1_add_res_293341;
                                    }
                                    
                                    double defunc_0_f_res_293342;
                                    
                                    if (cond_293337) {
                                        defunc_0_f_res_293342 = 0.0;
                                    } else {
                                        int64_t i_293343 = add64(x_293326,
                                                                 i_295424);
                                        double defunc_0_add_arg_293344;
                                        
                                        defunc_0_add_arg_293344 =
                                            ((double *) mem_302042)[i_293343];
                                        defunc_0_f_res_293342 =
                                            defunc_0_add_arg_293344;
                                    }
                                    
                                    int64_t binop_p_293345 =
                                            sub64(defunc_0_f_res_293338,
                                                  defunc_0_g_res_293330);
                                    double defunc_0_f_res_293346 =
                                           sitofp_i64_f64(binop_p_293345);
                                    double abs_res_293347 =
                                           fabs(defunc_0_f_res_293346);
                                    double tmp1_293348 = abs_res_293347 /
                                           x_293327;
                                    double x_293349 = tmp1_293348 * tmp1_293348;
                                    double y_293350 = tmp1_293348 * x_293349;
                                    double tmp2_293351 = 1.0 - y_293350;
                                    double x_293352 = tmp2_293351 * tmp2_293351;
                                    double tmp3_293353 = tmp2_293351 * x_293352;
                                    double tmp4_293354 = defunc_0_f_res_293342 *
                                           tmp3_293353;
                                    double defunc_1_op_res_293335 =
                                           tmp4_293354 + redout_295422;
                                    
                                    ((double *) mem_302083)[i_295424] =
                                        tmp4_293354;
                                    
                                    double redout_tmp_304787 =
                                           defunc_1_op_res_293335;
                                    
                                    redout_295422 = redout_tmp_304787;
                                }
                                defunc_2_reduce_res_293331 = redout_295422;
                                
                                double a_293355 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293331;
                                double a0_293356 = 1.0 / a_293355;
                                double defunc_2_reduce_res_293357;
                                double redout_295426 = 0.0;
                                
                                for (int64_t i_295427 = 0; i_295427 <
                                     q_t_289749; i_295427++) {
                                    double x_293362;
                                    
                                    x_293362 =
                                        ((double *) mem_302083)[i_295427];
                                    
                                    bool cond_293363 = sle64(x_293302,
                                                             i_295427);
                                    double defunc_0_f_res_293364;
                                    
                                    if (cond_293363) {
                                        defunc_0_f_res_293364 = 0.0;
                                    } else {
                                        int64_t i_293365 = add64(x_293326,
                                                                 i_295427);
                                        double defunc_0_add_arg_293366;
                                        
                                        defunc_0_add_arg_293366 =
                                            ((double *) mem_302045)[i_293365];
                                        defunc_0_f_res_293364 =
                                            defunc_0_add_arg_293366;
                                    }
                                    
                                    double x_293367 = a0_293356 * x_293362;
                                    double defunc_9_fit_fun_res_293368 =
                                           defunc_0_f_res_293364 * x_293367;
                                    double defunc_1_op_res_293360 =
                                           defunc_9_fit_fun_res_293368 +
                                           redout_295426;
                                    double redout_tmp_304789 =
                                           defunc_1_op_res_293360;
                                    
                                    redout_295426 = redout_tmp_304789;
                                }
                                defunc_2_reduce_res_293357 = redout_295426;
                                ((double *) mem_302014.mem)[i_295434 *
                                                            t_n_m_289909 +
                                                            i_295430] =
                                    defunc_2_reduce_res_293357;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_302540, &mem_302014,
                                         "mem_302014") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_302532, &mem_302010,
                                         "mem_302010") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302014, "mem_302014") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302010, "mem_302010") != 0)
                            return 1;
                    } else {
                        bool match_lit_293371 = (int64_t) 1 == d_t_289752;
                        int64_t binop_y_302146 = (int64_t) 8 * n_289745;
                        int64_t bytes_302147 = smax64((int64_t) 0,
                                                      binop_y_302146);
                        int64_t binop_y_302213 = (int64_t) 8 * q_t_289749;
                        int64_t bytes_302214 = smax64((int64_t) 0,
                                                      binop_y_302213);
                        int64_t binop_y_302330 = (int64_t) 8 * n_289745;
                        int64_t bytes_302331 = smax64((int64_t) 0,
                                                      binop_y_302330);
                        int64_t binop_y_302397 = (int64_t) 8 * q_t_289749;
                        int64_t bytes_302398 = smax64((int64_t) 0,
                                                      binop_y_302397);
                        struct memblock ext_mem_302524;
                        
                        ext_mem_302524.references = NULL;
                        
                        struct memblock ext_mem_302516;
                        
                        ext_mem_302516.references = NULL;
                        if (match_lit_293371) {
                            struct memblock mem_302121;
                            
                            mem_302121.references = NULL;
                            if (memblock_alloc(ctx, &mem_302121, bytes_297467,
                                               "mem_302121")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_302125;
                            
                            mem_302125.references = NULL;
                            if (memblock_alloc(ctx, &mem_302125, bytes_297467,
                                               "mem_302125")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_302148_cached_sizze_305049 <
                                (size_t) bytes_302147) {
                                mem_302148 = realloc(mem_302148, bytes_302147);
                                mem_302148_cached_sizze_305049 = bytes_302147;
                            }
                            if (mem_302163_cached_sizze_305050 <
                                (size_t) bytes_302147) {
                                mem_302163 = realloc(mem_302163, bytes_302147);
                                mem_302163_cached_sizze_305050 = bytes_302147;
                            }
                            if (mem_302166_cached_sizze_305051 <
                                (size_t) bytes_302147) {
                                mem_302166 = realloc(mem_302166, bytes_302147);
                                mem_302166_cached_sizze_305051 = bytes_302147;
                            }
                            if (mem_302215_cached_sizze_305052 <
                                (size_t) bytes_302214) {
                                mem_302215 = realloc(mem_302215, bytes_302214);
                                mem_302215_cached_sizze_305052 = bytes_302214;
                            }
                            if (mem_302218_cached_sizze_305053 <
                                (size_t) bytes_302214) {
                                mem_302218 = realloc(mem_302218, bytes_302214);
                                mem_302218_cached_sizze_305053 = bytes_302214;
                            }
                            if (mem_302221_cached_sizze_305054 <
                                (size_t) bytes_302214) {
                                mem_302221 = realloc(mem_302221, bytes_302214);
                                mem_302221_cached_sizze_305054 = bytes_302214;
                            }
                            for (int64_t i_295476 = 0; i_295476 <
                                 partition_sizze_289836; i_295476++) {
                                int64_t x_293381;
                                
                                x_293381 = ((int64_t *) mem_296796)[i_295476];
                                for (int64_t i_295438 = 0; i_295438 < n_289745;
                                     i_295438++) {
                                    float x_293385;
                                    
                                    x_293385 = ((float *) mem_296753)[i_295476 *
                                                                      n_289745 +
                                                                      i_295438];
                                    
                                    double x_293386;
                                    
                                    x_293386 =
                                        ((double *) mem_301467.mem)[i_295476 *
                                                                    n_289745 +
                                                                    i_295438];
                                    
                                    double f32_res_293387 =
                                           fpconv_f32_f64(x_293385);
                                    double defunc_1_f_res_293388 =
                                           f32_res_293387 - x_293386;
                                    
                                    ((double *) mem_302148)[i_295438] =
                                        defunc_1_f_res_293388;
                                }
                                for (int64_t i_295444 = 0; i_295444 < n_289745;
                                     i_295444++) {
                                    int64_t x_293391;
                                    
                                    x_293391 =
                                        ((int64_t *) mem_296793)[i_295476 *
                                                                 n_289745 +
                                                                 i_295444];
                                    
                                    bool cond_293392 = sle64((int64_t) 0,
                                                             x_293391);
                                    double defunc_0_f_res_293393;
                                    
                                    if (cond_293392) {
                                        bool y_293394 = slt64(x_293391,
                                                              n_289745);
                                        bool bounds_check_293395 =
                                             cond_293392 && y_293394;
                                        bool index_certs_293396;
                                        
                                        if (!bounds_check_293395) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_293391,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_289745,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_302125,
                                                               "mem_302125") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_302121,
                                                               "mem_302121") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302516,
                                                               "ext_mem_302516") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302524,
                                                               "ext_mem_302524") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302532,
                                                               "ext_mem_302532") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302540,
                                                               "ext_mem_302540") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303044,
                                                               "ext_mem_303044") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303052,
                                                               "ext_mem_303052") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303060,
                                                               "ext_mem_303060") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303068,
                                                               "ext_mem_303068") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301467,
                                                               "mem_301467") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301456,
                                                               "ext_mem_301456") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301393,
                                                               "ext_mem_301393") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301401,
                                                               "ext_mem_301401") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300038,
                                                               "ext_mem_300038") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299913,
                                                               "ext_mem_299913") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299924,
                                                               "ext_mem_299924") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297627,
                                                               "mem_param_297627") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297619,
                                                               "mem_param_297619") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303131,
                                                               "ext_mem_303131") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303132,
                                                               "ext_mem_303132") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297605,
                                                               "mem_param_297605") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297597,
                                                               "mem_param_297597") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297589,
                                                               "mem_param_297589") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303656,
                                                               "ext_mem_303656") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303657,
                                                               "ext_mem_303657") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303658,
                                                               "ext_mem_303658") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297581,
                                                               "mem_297581") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297577,
                                                               "mem_297577") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304403,
                                                               "mem_out_304403") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304402,
                                                               "mem_out_304402") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304401,
                                                               "mem_out_304401") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_293397;
                                        
                                        defunc_0_f_res_t_res_293397 =
                                            ((double *) mem_302148)[x_293391];
                                        defunc_0_f_res_293393 =
                                            defunc_0_f_res_t_res_293397;
                                    } else {
                                        defunc_0_f_res_293393 = 0.0;
                                    }
                                    
                                    double defunc_0_f_res_293398;
                                    
                                    if (cond_293392) {
                                        bool y_293399 = slt64(x_293391,
                                                              n_289745);
                                        bool bounds_check_293400 =
                                             cond_293392 && y_293399;
                                        bool index_certs_293401;
                                        
                                        if (!bounds_check_293400) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_293391,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_289745,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_302125,
                                                               "mem_302125") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_302121,
                                                               "mem_302121") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302516,
                                                               "ext_mem_302516") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302524,
                                                               "ext_mem_302524") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302532,
                                                               "ext_mem_302532") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302540,
                                                               "ext_mem_302540") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303044,
                                                               "ext_mem_303044") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303052,
                                                               "ext_mem_303052") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303060,
                                                               "ext_mem_303060") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303068,
                                                               "ext_mem_303068") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301467,
                                                               "mem_301467") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301456,
                                                               "ext_mem_301456") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301393,
                                                               "ext_mem_301393") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301401,
                                                               "ext_mem_301401") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300038,
                                                               "ext_mem_300038") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299913,
                                                               "ext_mem_299913") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299924,
                                                               "ext_mem_299924") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297627,
                                                               "mem_param_297627") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297619,
                                                               "mem_param_297619") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303131,
                                                               "ext_mem_303131") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303132,
                                                               "ext_mem_303132") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297605,
                                                               "mem_param_297605") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297597,
                                                               "mem_param_297597") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297589,
                                                               "mem_param_297589") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303656,
                                                               "ext_mem_303656") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303657,
                                                               "ext_mem_303657") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303658,
                                                               "ext_mem_303658") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297581,
                                                               "mem_297581") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297577,
                                                               "mem_297577") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304403,
                                                               "mem_out_304403") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304402,
                                                               "mem_out_304402") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304401,
                                                               "mem_out_304401") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_293402;
                                        
                                        defunc_0_f_res_t_res_293402 =
                                            ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                              (i_295476 *
                                                                               ctx_param_ext_297601 +
                                                                               x_293391 *
                                                                               ctx_param_ext_297603)];
                                        defunc_0_f_res_293398 =
                                            defunc_0_f_res_t_res_293402;
                                    } else {
                                        defunc_0_f_res_293398 = 0.0;
                                    }
                                    ((double *) mem_302163)[i_295444] =
                                        defunc_0_f_res_293398;
                                    ((double *) mem_302166)[i_295444] =
                                        defunc_0_f_res_293393;
                                }
                                for (int64_t i_295469 = 0; i_295469 <
                                     t_n_m_289909; i_295469++) {
                                    int64_t x_293406;
                                    
                                    x_293406 =
                                        ((int64_t *) mem_297468)[i_295476 *
                                                                 t_n_m_289909 +
                                                                 i_295469];
                                    
                                    double x_293407;
                                    
                                    x_293407 =
                                        ((double *) mem_297472)[i_295476 *
                                                                t_n_m_289909 +
                                                                i_295469];
                                    
                                    int64_t min_arg_293408 =
                                            mul64(jump_t_289755, i_295469);
                                    int64_t min_res_293409 = smin64(i_289916,
                                                                    min_arg_293408);
                                    int64_t defunc_0_g_res_293410 =
                                            add64((int64_t) 1, min_res_293409);
                                    double defunc_2_reduce_res_293434;
                                    double redout_295450 = 0.0;
                                    
                                    for (int64_t i_295454 = 0; i_295454 <
                                         q_t_289749; i_295454++) {
                                        bool cond_293442 = sle64(x_293381,
                                                                 i_295454);
                                        int64_t defunc_0_f_res_293443;
                                        
                                        if (cond_293442) {
                                            defunc_0_f_res_293443 = (int64_t) 0;
                                        } else {
                                            int64_t i_293444 = add64(x_293406,
                                                                     i_295454);
                                            int64_t defunc_0_add_arg_293445;
                                            
                                            defunc_0_add_arg_293445 =
                                                ((int64_t *) mem_296793)[i_295476 *
                                                                         n_289745 +
                                                                         i_293444];
                                            
                                            int64_t defunc_1_add_res_293446 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_293445);
                                            
                                            defunc_0_f_res_293443 =
                                                defunc_1_add_res_293446;
                                        }
                                        
                                        double defunc_0_f_res_293447;
                                        
                                        if (cond_293442) {
                                            defunc_0_f_res_293447 = 0.0;
                                        } else {
                                            int64_t i_293448 = add64(x_293406,
                                                                     i_295454);
                                            double defunc_0_add_arg_293449;
                                            
                                            defunc_0_add_arg_293449 =
                                                ((double *) mem_302163)[i_293448];
                                            defunc_0_f_res_293447 =
                                                defunc_0_add_arg_293449;
                                        }
                                        
                                        int64_t binop_p_293450 =
                                                sub64(defunc_0_f_res_293443,
                                                      defunc_0_g_res_293410);
                                        double defunc_0_f_res_293451 =
                                               sitofp_i64_f64(binop_p_293450);
                                        double abs_res_293452 =
                                               fabs(defunc_0_f_res_293451);
                                        double tmp1_293453 = abs_res_293452 /
                                               x_293407;
                                        double x_293454 = tmp1_293453 *
                                               tmp1_293453;
                                        double y_293455 = tmp1_293453 *
                                               x_293454;
                                        double tmp2_293456 = 1.0 - y_293455;
                                        double x_293457 = tmp2_293456 *
                                               tmp2_293456;
                                        double tmp3_293458 = tmp2_293456 *
                                               x_293457;
                                        double tmp4_293459 =
                                               defunc_0_f_res_293447 *
                                               tmp3_293458;
                                        double defunc_1_f_res_293460 =
                                               defunc_0_f_res_293451 *
                                               tmp4_293459;
                                        double defunc_1_op_res_293440 =
                                               tmp4_293459 + redout_295450;
                                        
                                        ((double *) mem_302215)[i_295454] =
                                            defunc_1_f_res_293460;
                                        ((double *) mem_302218)[i_295454] =
                                            defunc_0_f_res_293451;
                                        ((double *) mem_302221)[i_295454] =
                                            tmp4_293459;
                                        
                                        double redout_tmp_304797 =
                                               defunc_1_op_res_293440;
                                        
                                        redout_295450 = redout_tmp_304797;
                                    }
                                    defunc_2_reduce_res_293434 = redout_295450;
                                    
                                    double a_293465 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293434;
                                    double defunc_2_reduce_res_293466;
                                    double redout_295458 = 0.0;
                                    
                                    for (int64_t i_295459 = 0; i_295459 <
                                         q_t_289749; i_295459++) {
                                        double x_293470;
                                        
                                        x_293470 =
                                            ((double *) mem_302215)[i_295459];
                                        
                                        double defunc_1_op_res_293469 =
                                               x_293470 + redout_295458;
                                        double redout_tmp_304801 =
                                               defunc_1_op_res_293469;
                                        
                                        redout_295458 = redout_tmp_304801;
                                    }
                                    defunc_2_reduce_res_293466 = redout_295458;
                                    
                                    double b_293471 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293466;
                                    double defunc_2_reduce_res_293472;
                                    double redout_295460 = 0.0;
                                    
                                    for (int64_t i_295461 = 0; i_295461 <
                                         q_t_289749; i_295461++) {
                                        double x_293476;
                                        
                                        x_293476 =
                                            ((double *) mem_302218)[i_295461];
                                        
                                        double x_293477;
                                        
                                        x_293477 =
                                            ((double *) mem_302215)[i_295461];
                                        
                                        double defunc_1_f_res_293478 =
                                               x_293476 * x_293477;
                                        double defunc_1_op_res_293475 =
                                               defunc_1_f_res_293478 +
                                               redout_295460;
                                        double redout_tmp_304802 =
                                               defunc_1_op_res_293475;
                                        
                                        redout_295460 = redout_tmp_304802;
                                    }
                                    defunc_2_reduce_res_293472 = redout_295460;
                                    
                                    double c_293479 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293472;
                                    double x_293480 = a_293465 * c_293479;
                                    double y_293481 = b_293471 * b_293471;
                                    double y_293482 = x_293480 - y_293481;
                                    double det1_293483 = 1.0 / y_293482;
                                    double a11_293484 = c_293479 * det1_293483;
                                    double x_293485 = 0.0 - b_293471;
                                    double b11_293486 = det1_293483 * x_293485;
                                    double c11_293487 = a_293465 * det1_293483;
                                    double defunc_2_reduce_res_293488;
                                    double defunc_2_reduce_res_293489;
                                    double redout_295462;
                                    double redout_295463;
                                    
                                    redout_295462 = 0.0;
                                    redout_295463 = 0.0;
                                    for (int64_t i_295464 = 0; i_295464 <
                                         q_t_289749; i_295464++) {
                                        double x_293497;
                                        
                                        x_293497 =
                                            ((double *) mem_302221)[i_295464];
                                        
                                        double x_293498;
                                        
                                        x_293498 =
                                            ((double *) mem_302215)[i_295464];
                                        
                                        bool cond_293499 = sle64(x_293381,
                                                                 i_295464);
                                        double defunc_0_f_res_293500;
                                        
                                        if (cond_293499) {
                                            defunc_0_f_res_293500 = 0.0;
                                        } else {
                                            int64_t i_293501 = add64(x_293406,
                                                                     i_295464);
                                            double defunc_0_add_arg_293502;
                                            
                                            defunc_0_add_arg_293502 =
                                                ((double *) mem_302166)[i_293501];
                                            defunc_0_f_res_293500 =
                                                defunc_0_add_arg_293502;
                                        }
                                        
                                        double x_293503 = a11_293484 * x_293497;
                                        double y_293504 = b11_293486 * x_293498;
                                        double x_293505 = x_293503 + y_293504;
                                        double defunc_9_fit_fun_res_293506 =
                                               defunc_0_f_res_293500 * x_293505;
                                        double x_293507 = b11_293486 * x_293497;
                                        double y_293508 = c11_293487 * x_293498;
                                        double x_293509 = x_293507 + y_293508;
                                        double defunc_9_slope_fun_res_293510 =
                                               defunc_0_f_res_293500 * x_293509;
                                        double defunc_1_op_res_293492 =
                                               defunc_9_fit_fun_res_293506 +
                                               redout_295462;
                                        double defunc_1_op_res_293495 =
                                               defunc_9_slope_fun_res_293510 +
                                               redout_295463;
                                        double redout_tmp_304803 =
                                               defunc_1_op_res_293492;
                                        double redout_tmp_304804 =
                                               defunc_1_op_res_293495;
                                        
                                        redout_295462 = redout_tmp_304803;
                                        redout_295463 = redout_tmp_304804;
                                    }
                                    defunc_2_reduce_res_293488 = redout_295462;
                                    defunc_2_reduce_res_293489 = redout_295463;
                                    ((double *) mem_302121.mem)[i_295476 *
                                                                t_n_m_289909 +
                                                                i_295469] =
                                        defunc_2_reduce_res_293488;
                                    ((double *) mem_302125.mem)[i_295476 *
                                                                t_n_m_289909 +
                                                                i_295469] =
                                        defunc_2_reduce_res_293489;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_302524, &mem_302121,
                                             "mem_302121") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_302516, &mem_302125,
                                             "mem_302125") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302125,
                                               "mem_302125") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302121,
                                               "mem_302121") != 0)
                                return 1;
                        } else {
                            struct memblock mem_302305;
                            
                            mem_302305.references = NULL;
                            if (memblock_alloc(ctx, &mem_302305, bytes_297467,
                                               "mem_302305")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_302309;
                            
                            mem_302309.references = NULL;
                            if (memblock_alloc(ctx, &mem_302309, bytes_297467,
                                               "mem_302309")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_302332_cached_sizze_305055 <
                                (size_t) bytes_302331) {
                                mem_302332 = realloc(mem_302332, bytes_302331);
                                mem_302332_cached_sizze_305055 = bytes_302331;
                            }
                            if (mem_302347_cached_sizze_305056 <
                                (size_t) bytes_302331) {
                                mem_302347 = realloc(mem_302347, bytes_302331);
                                mem_302347_cached_sizze_305056 = bytes_302331;
                            }
                            if (mem_302350_cached_sizze_305057 <
                                (size_t) bytes_302331) {
                                mem_302350 = realloc(mem_302350, bytes_302331);
                                mem_302350_cached_sizze_305057 = bytes_302331;
                            }
                            if (mem_302399_cached_sizze_305058 <
                                (size_t) bytes_302398) {
                                mem_302399 = realloc(mem_302399, bytes_302398);
                                mem_302399_cached_sizze_305058 = bytes_302398;
                            }
                            if (mem_302402_cached_sizze_305059 <
                                (size_t) bytes_302398) {
                                mem_302402 = realloc(mem_302402, bytes_302398);
                                mem_302402_cached_sizze_305059 = bytes_302398;
                            }
                            if (mem_302405_cached_sizze_305060 <
                                (size_t) bytes_302398) {
                                mem_302405 = realloc(mem_302405, bytes_302398);
                                mem_302405_cached_sizze_305060 = bytes_302398;
                            }
                            if (mem_302444_cached_sizze_305061 <
                                (size_t) bytes_302398) {
                                mem_302444 = realloc(mem_302444, bytes_302398);
                                mem_302444_cached_sizze_305061 = bytes_302398;
                            }
                            if (mem_302447_cached_sizze_305062 <
                                (size_t) bytes_302398) {
                                mem_302447 = realloc(mem_302447, bytes_302398);
                                mem_302447_cached_sizze_305062 = bytes_302398;
                            }
                            for (int64_t i_295530 = 0; i_295530 <
                                 partition_sizze_289836; i_295530++) {
                                int64_t x_293520;
                                
                                x_293520 = ((int64_t *) mem_296796)[i_295530];
                                for (int64_t i_295481 = 0; i_295481 < n_289745;
                                     i_295481++) {
                                    float x_293524;
                                    
                                    x_293524 = ((float *) mem_296753)[i_295530 *
                                                                      n_289745 +
                                                                      i_295481];
                                    
                                    double x_293525;
                                    
                                    x_293525 =
                                        ((double *) mem_301467.mem)[i_295530 *
                                                                    n_289745 +
                                                                    i_295481];
                                    
                                    double f32_res_293526 =
                                           fpconv_f32_f64(x_293524);
                                    double defunc_1_f_res_293527 =
                                           f32_res_293526 - x_293525;
                                    
                                    ((double *) mem_302332)[i_295481] =
                                        defunc_1_f_res_293527;
                                }
                                for (int64_t i_295487 = 0; i_295487 < n_289745;
                                     i_295487++) {
                                    int64_t x_293530;
                                    
                                    x_293530 =
                                        ((int64_t *) mem_296793)[i_295530 *
                                                                 n_289745 +
                                                                 i_295487];
                                    
                                    bool cond_293531 = sle64((int64_t) 0,
                                                             x_293530);
                                    double defunc_0_f_res_293532;
                                    
                                    if (cond_293531) {
                                        bool y_293533 = slt64(x_293530,
                                                              n_289745);
                                        bool bounds_check_293534 =
                                             cond_293531 && y_293533;
                                        bool index_certs_293535;
                                        
                                        if (!bounds_check_293534) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_293530,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_289745,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_302309,
                                                               "mem_302309") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_302305,
                                                               "mem_302305") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302516,
                                                               "ext_mem_302516") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302524,
                                                               "ext_mem_302524") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302532,
                                                               "ext_mem_302532") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302540,
                                                               "ext_mem_302540") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303044,
                                                               "ext_mem_303044") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303052,
                                                               "ext_mem_303052") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303060,
                                                               "ext_mem_303060") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303068,
                                                               "ext_mem_303068") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301467,
                                                               "mem_301467") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301456,
                                                               "ext_mem_301456") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301393,
                                                               "ext_mem_301393") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301401,
                                                               "ext_mem_301401") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300038,
                                                               "ext_mem_300038") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299913,
                                                               "ext_mem_299913") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299924,
                                                               "ext_mem_299924") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297627,
                                                               "mem_param_297627") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297619,
                                                               "mem_param_297619") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303131,
                                                               "ext_mem_303131") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303132,
                                                               "ext_mem_303132") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297605,
                                                               "mem_param_297605") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297597,
                                                               "mem_param_297597") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297589,
                                                               "mem_param_297589") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303656,
                                                               "ext_mem_303656") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303657,
                                                               "ext_mem_303657") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303658,
                                                               "ext_mem_303658") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297581,
                                                               "mem_297581") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297577,
                                                               "mem_297577") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304403,
                                                               "mem_out_304403") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304402,
                                                               "mem_out_304402") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304401,
                                                               "mem_out_304401") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_293536;
                                        
                                        defunc_0_f_res_t_res_293536 =
                                            ((double *) mem_302332)[x_293530];
                                        defunc_0_f_res_293532 =
                                            defunc_0_f_res_t_res_293536;
                                    } else {
                                        defunc_0_f_res_293532 = 0.0;
                                    }
                                    
                                    double defunc_0_f_res_293537;
                                    
                                    if (cond_293531) {
                                        bool y_293538 = slt64(x_293530,
                                                              n_289745);
                                        bool bounds_check_293539 =
                                             cond_293531 && y_293538;
                                        bool index_certs_293540;
                                        
                                        if (!bounds_check_293539) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_293530,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_289745,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_302309,
                                                               "mem_302309") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_302305,
                                                               "mem_302305") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302516,
                                                               "ext_mem_302516") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302524,
                                                               "ext_mem_302524") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302532,
                                                               "ext_mem_302532") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302540,
                                                               "ext_mem_302540") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303044,
                                                               "ext_mem_303044") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303052,
                                                               "ext_mem_303052") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303060,
                                                               "ext_mem_303060") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303068,
                                                               "ext_mem_303068") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301467,
                                                               "mem_301467") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301456,
                                                               "ext_mem_301456") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301393,
                                                               "ext_mem_301393") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301401,
                                                               "ext_mem_301401") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300038,
                                                               "ext_mem_300038") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299913,
                                                               "ext_mem_299913") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299924,
                                                               "ext_mem_299924") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297627,
                                                               "mem_param_297627") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297619,
                                                               "mem_param_297619") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303131,
                                                               "ext_mem_303131") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303132,
                                                               "ext_mem_303132") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297605,
                                                               "mem_param_297605") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297597,
                                                               "mem_param_297597") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297589,
                                                               "mem_param_297589") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303656,
                                                               "ext_mem_303656") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303657,
                                                               "ext_mem_303657") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303658,
                                                               "ext_mem_303658") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297581,
                                                               "mem_297581") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297577,
                                                               "mem_297577") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304403,
                                                               "mem_out_304403") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304402,
                                                               "mem_out_304402") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304401,
                                                               "mem_out_304401") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_293541;
                                        
                                        defunc_0_f_res_t_res_293541 =
                                            ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                              (i_295530 *
                                                                               ctx_param_ext_297601 +
                                                                               x_293530 *
                                                                               ctx_param_ext_297603)];
                                        defunc_0_f_res_293537 =
                                            defunc_0_f_res_t_res_293541;
                                    } else {
                                        defunc_0_f_res_293537 = 0.0;
                                    }
                                    ((double *) mem_302347)[i_295487] =
                                        defunc_0_f_res_293537;
                                    ((double *) mem_302350)[i_295487] =
                                        defunc_0_f_res_293532;
                                }
                                for (int64_t i_295523 = 0; i_295523 <
                                     t_n_m_289909; i_295523++) {
                                    int64_t x_293545;
                                    
                                    x_293545 =
                                        ((int64_t *) mem_297468)[i_295530 *
                                                                 t_n_m_289909 +
                                                                 i_295523];
                                    
                                    double x_293546;
                                    
                                    x_293546 =
                                        ((double *) mem_297472)[i_295530 *
                                                                t_n_m_289909 +
                                                                i_295523];
                                    
                                    int64_t min_arg_293547 =
                                            mul64(jump_t_289755, i_295523);
                                    int64_t min_res_293548 = smin64(i_289916,
                                                                    min_arg_293547);
                                    int64_t defunc_0_g_res_293549 =
                                            add64((int64_t) 1, min_res_293548);
                                    
                                    for (int64_t i_295496 = 0; i_295496 <
                                         q_t_289749; i_295496++) {
                                        bool cond_293554 = sle64(x_293520,
                                                                 i_295496);
                                        int64_t defunc_0_f_res_293555;
                                        
                                        if (cond_293554) {
                                            defunc_0_f_res_293555 = (int64_t) 0;
                                        } else {
                                            int64_t i_293556 = add64(x_293545,
                                                                     i_295496);
                                            int64_t defunc_0_add_arg_293557;
                                            
                                            defunc_0_add_arg_293557 =
                                                ((int64_t *) mem_296793)[i_295530 *
                                                                         n_289745 +
                                                                         i_293556];
                                            
                                            int64_t defunc_1_add_res_293558 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_293557);
                                            
                                            defunc_0_f_res_293555 =
                                                defunc_1_add_res_293558;
                                        }
                                        
                                        double defunc_0_f_res_293559;
                                        
                                        if (cond_293554) {
                                            defunc_0_f_res_293559 = 0.0;
                                        } else {
                                            int64_t i_293560 = add64(x_293545,
                                                                     i_295496);
                                            double defunc_0_add_arg_293561;
                                            
                                            defunc_0_add_arg_293561 =
                                                ((double *) mem_302347)[i_293560];
                                            defunc_0_f_res_293559 =
                                                defunc_0_add_arg_293561;
                                        }
                                        
                                        int64_t binop_p_293562 =
                                                sub64(defunc_0_f_res_293555,
                                                      defunc_0_g_res_293549);
                                        double defunc_0_f_res_293563 =
                                               sitofp_i64_f64(binop_p_293562);
                                        double abs_res_293564 =
                                               fabs(defunc_0_f_res_293563);
                                        double tmp1_293565 = abs_res_293564 /
                                               x_293546;
                                        double x_293566 = tmp1_293565 *
                                               tmp1_293565;
                                        double y_293567 = tmp1_293565 *
                                               x_293566;
                                        double tmp2_293568 = 1.0 - y_293567;
                                        double x_293569 = tmp2_293568 *
                                               tmp2_293568;
                                        double tmp3_293570 = tmp2_293568 *
                                               x_293569;
                                        double tmp4_293571 =
                                               defunc_0_f_res_293559 *
                                               tmp3_293570;
                                        double defunc_1_f_res_293572 =
                                               defunc_0_f_res_293563 *
                                               tmp4_293571;
                                        
                                        ((double *) mem_302399)[i_295496] =
                                            defunc_1_f_res_293572;
                                        ((double *) mem_302402)[i_295496] =
                                            defunc_0_f_res_293563;
                                        ((double *) mem_302405)[i_295496] =
                                            tmp4_293571;
                                    }
                                    
                                    double defunc_2_reduce_res_293579;
                                    double redout_295502 = 0.0;
                                    
                                    for (int64_t i_295505 = 0; i_295505 <
                                         q_t_289749; i_295505++) {
                                        double x_293585;
                                        
                                        x_293585 =
                                            ((double *) mem_302402)[i_295505];
                                        
                                        double x_293586;
                                        
                                        x_293586 =
                                            ((double *) mem_302399)[i_295505];
                                        
                                        double x_293587;
                                        
                                        x_293587 =
                                            ((double *) mem_302405)[i_295505];
                                        
                                        double defunc_1_f_res_293588 =
                                               x_293585 * x_293586;
                                        double defunc_1_f_res_293589 =
                                               x_293585 * defunc_1_f_res_293588;
                                        double defunc_1_op_res_293584 =
                                               x_293587 + redout_295502;
                                        
                                        ((double *) mem_302444)[i_295505] =
                                            defunc_1_f_res_293589;
                                        ((double *) mem_302447)[i_295505] =
                                            defunc_1_f_res_293588;
                                        
                                        double redout_tmp_304815 =
                                               defunc_1_op_res_293584;
                                        
                                        redout_295502 = redout_tmp_304815;
                                    }
                                    defunc_2_reduce_res_293579 = redout_295502;
                                    
                                    double a_293593 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293579;
                                    double defunc_2_reduce_res_293594;
                                    double redout_295508 = 0.0;
                                    
                                    for (int64_t i_295509 = 0; i_295509 <
                                         q_t_289749; i_295509++) {
                                        double x_293598;
                                        
                                        x_293598 =
                                            ((double *) mem_302399)[i_295509];
                                        
                                        double defunc_1_op_res_293597 =
                                               x_293598 + redout_295508;
                                        double redout_tmp_304818 =
                                               defunc_1_op_res_293597;
                                        
                                        redout_295508 = redout_tmp_304818;
                                    }
                                    defunc_2_reduce_res_293594 = redout_295508;
                                    
                                    double b_293599 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293594;
                                    double defunc_2_reduce_res_293600;
                                    double redout_295510 = 0.0;
                                    
                                    for (int64_t i_295511 = 0; i_295511 <
                                         q_t_289749; i_295511++) {
                                        double x_293604;
                                        
                                        x_293604 =
                                            ((double *) mem_302447)[i_295511];
                                        
                                        double defunc_1_op_res_293603 =
                                               x_293604 + redout_295510;
                                        double redout_tmp_304819 =
                                               defunc_1_op_res_293603;
                                        
                                        redout_295510 = redout_tmp_304819;
                                    }
                                    defunc_2_reduce_res_293600 = redout_295510;
                                    
                                    double c_293605 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293600;
                                    double defunc_2_reduce_res_293606;
                                    double redout_295512 = 0.0;
                                    
                                    for (int64_t i_295513 = 0; i_295513 <
                                         q_t_289749; i_295513++) {
                                        double x_293610;
                                        
                                        x_293610 =
                                            ((double *) mem_302444)[i_295513];
                                        
                                        double defunc_1_op_res_293609 =
                                               x_293610 + redout_295512;
                                        double redout_tmp_304820 =
                                               defunc_1_op_res_293609;
                                        
                                        redout_295512 = redout_tmp_304820;
                                    }
                                    defunc_2_reduce_res_293606 = redout_295512;
                                    
                                    double d_293611 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293606;
                                    double defunc_2_reduce_res_293612;
                                    double redout_295514 = 0.0;
                                    
                                    for (int64_t i_295515 = 0; i_295515 <
                                         q_t_289749; i_295515++) {
                                        double x_293616;
                                        
                                        x_293616 =
                                            ((double *) mem_302402)[i_295515];
                                        
                                        double x_293617;
                                        
                                        x_293617 =
                                            ((double *) mem_302444)[i_295515];
                                        
                                        double defunc_1_f_res_293618 =
                                               x_293616 * x_293617;
                                        double defunc_1_op_res_293615 =
                                               defunc_1_f_res_293618 +
                                               redout_295514;
                                        double redout_tmp_304821 =
                                               defunc_1_op_res_293615;
                                        
                                        redout_295514 = redout_tmp_304821;
                                    }
                                    defunc_2_reduce_res_293612 = redout_295514;
                                    
                                    double e_293619 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293612;
                                    double x_293620 = c_293605 * e_293619;
                                    double y_293621 = d_293611 * d_293611;
                                    double a12_293622 = x_293620 - y_293621;
                                    double x_293623 = c_293605 * d_293611;
                                    double y_293624 = b_293599 * e_293619;
                                    double b12_293625 = x_293623 - y_293624;
                                    double x_293626 = b_293599 * d_293611;
                                    double y_293627 = c_293605 * c_293605;
                                    double c12_293628 = x_293626 - y_293627;
                                    double x_293629 = a_293593 * e_293619;
                                    double b2_293630 = x_293629 - y_293627;
                                    double x_293631 = b_293599 * c_293605;
                                    double y_293632 = a_293593 * d_293611;
                                    double c2_293633 = x_293631 - y_293632;
                                    double x_293634 = a_293593 * a12_293622;
                                    double y_293635 = b_293599 * b12_293625;
                                    double x_293636 = x_293634 + y_293635;
                                    double y_293637 = c_293605 * c12_293628;
                                    double y_293638 = x_293636 + y_293637;
                                    double det_293639 = 1.0 / y_293638;
                                    double a12_293640 = a12_293622 * det_293639;
                                    double b12_293641 = b12_293625 * det_293639;
                                    double c12_293642 = c12_293628 * det_293639;
                                    double b2_293643 = b2_293630 * det_293639;
                                    double c2_293644 = c2_293633 * det_293639;
                                    double defunc_2_reduce_res_293645;
                                    double defunc_2_reduce_res_293646;
                                    double redout_295516;
                                    double redout_295517;
                                    
                                    redout_295516 = 0.0;
                                    redout_295517 = 0.0;
                                    for (int64_t i_295518 = 0; i_295518 <
                                         q_t_289749; i_295518++) {
                                        double x_293654;
                                        
                                        x_293654 =
                                            ((double *) mem_302405)[i_295518];
                                        
                                        double x_293655;
                                        
                                        x_293655 =
                                            ((double *) mem_302399)[i_295518];
                                        
                                        double x_293656;
                                        
                                        x_293656 =
                                            ((double *) mem_302447)[i_295518];
                                        
                                        bool cond_293657 = sle64(x_293520,
                                                                 i_295518);
                                        double defunc_0_f_res_293658;
                                        
                                        if (cond_293657) {
                                            defunc_0_f_res_293658 = 0.0;
                                        } else {
                                            int64_t i_293659 = add64(x_293545,
                                                                     i_295518);
                                            double defunc_0_add_arg_293660;
                                            
                                            defunc_0_add_arg_293660 =
                                                ((double *) mem_302350)[i_293659];
                                            defunc_0_f_res_293658 =
                                                defunc_0_add_arg_293660;
                                        }
                                        
                                        double x_293661 = a12_293640 * x_293654;
                                        double y_293662 = b12_293641 * x_293655;
                                        double x_293663 = x_293661 + y_293662;
                                        double y_293664 = c12_293642 * x_293656;
                                        double x_293665 = x_293663 + y_293664;
                                        double defunc_9_fit_fun_res_293666 =
                                               defunc_0_f_res_293658 * x_293665;
                                        double x_293667 = b12_293641 * x_293654;
                                        double y_293668 = b2_293643 * x_293655;
                                        double x_293669 = x_293667 + y_293668;
                                        double y_293670 = c2_293644 * x_293656;
                                        double x_293671 = x_293669 + y_293670;
                                        double defunc_9_slope_fun_res_293672 =
                                               defunc_0_f_res_293658 * x_293671;
                                        double defunc_1_op_res_293649 =
                                               defunc_9_fit_fun_res_293666 +
                                               redout_295516;
                                        double defunc_1_op_res_293652 =
                                               defunc_9_slope_fun_res_293672 +
                                               redout_295517;
                                        double redout_tmp_304822 =
                                               defunc_1_op_res_293649;
                                        double redout_tmp_304823 =
                                               defunc_1_op_res_293652;
                                        
                                        redout_295516 = redout_tmp_304822;
                                        redout_295517 = redout_tmp_304823;
                                    }
                                    defunc_2_reduce_res_293645 = redout_295516;
                                    defunc_2_reduce_res_293646 = redout_295517;
                                    ((double *) mem_302305.mem)[i_295530 *
                                                                t_n_m_289909 +
                                                                i_295523] =
                                        defunc_2_reduce_res_293645;
                                    ((double *) mem_302309.mem)[i_295530 *
                                                                t_n_m_289909 +
                                                                i_295523] =
                                        defunc_2_reduce_res_293646;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_302524, &mem_302305,
                                             "mem_302305") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_302516, &mem_302309,
                                             "mem_302309") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302309,
                                               "mem_302309") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302305,
                                               "mem_302305") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_302540, &ext_mem_302524,
                                         "ext_mem_302524") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_302532, &ext_mem_302516,
                                         "ext_mem_302516") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302516,
                                           "ext_mem_302516") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302524,
                                           "ext_mem_302524") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_303052, &ext_mem_302540,
                                     "ext_mem_302540") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_303044, &ext_mem_302532,
                                     "ext_mem_302532") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302532,
                                       "ext_mem_302532") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302540,
                                       "ext_mem_302540") != 0)
                        return 1;
                } else {
                    bool match_lit_293675 = (int64_t) 0 == d_t_289752;
                    int64_t binop_y_302566 = (int64_t) 8 * n_289745;
                    int64_t bytes_302567 = smax64((int64_t) 0, binop_y_302566);
                    struct memblock ext_mem_303036;
                    
                    ext_mem_303036.references = NULL;
                    
                    struct memblock ext_mem_303028;
                    
                    ext_mem_303028.references = NULL;
                    if (match_lit_293675) {
                        struct memblock mem_302551;
                        
                        mem_302551.references = NULL;
                        if (memblock_alloc(ctx, &mem_302551, bytes_297467,
                                           "mem_302551")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_304824 = 0; i_304824 <
                             partition_sizze_289836; i_304824++) {
                            for (int64_t i_304825 = 0; i_304825 < t_n_m_289909;
                                 i_304825++) {
                                ((double *) mem_302551.mem)[i_304824 *
                                                            t_n_m_289909 +
                                                            i_304825] = 0.0;
                            }
                        }
                        
                        struct memblock mem_302555;
                        
                        mem_302555.references = NULL;
                        if (memblock_alloc(ctx, &mem_302555, bytes_297467,
                                           "mem_302555")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_302568_cached_sizze_305063 <
                            (size_t) bytes_302567) {
                            mem_302568 = realloc(mem_302568, bytes_302567);
                            mem_302568_cached_sizze_305063 = bytes_302567;
                        }
                        if (mem_302583_cached_sizze_305064 <
                            (size_t) bytes_302567) {
                            mem_302583 = realloc(mem_302583, bytes_302567);
                            mem_302583_cached_sizze_305064 = bytes_302567;
                        }
                        if (mem_302586_cached_sizze_305065 <
                            (size_t) bytes_302567) {
                            mem_302586 = realloc(mem_302586, bytes_302567);
                            mem_302586_cached_sizze_305065 = bytes_302567;
                        }
                        for (int64_t i_295554 = 0; i_295554 <
                             partition_sizze_289836; i_295554++) {
                            int64_t x_293685;
                            
                            x_293685 = ((int64_t *) mem_296796)[i_295554];
                            for (int64_t i_295535 = 0; i_295535 < n_289745;
                                 i_295535++) {
                                float x_293689;
                                
                                x_293689 = ((float *) mem_296753)[i_295554 *
                                                                  n_289745 +
                                                                  i_295535];
                                
                                double x_293690;
                                
                                x_293690 =
                                    ((double *) mem_301467.mem)[i_295554 *
                                                                n_289745 +
                                                                i_295535];
                                
                                double f32_res_293691 =
                                       fpconv_f32_f64(x_293689);
                                double defunc_1_f_res_293692 = f32_res_293691 -
                                       x_293690;
                                
                                ((double *) mem_302568)[i_295535] =
                                    defunc_1_f_res_293692;
                            }
                            for (int64_t i_295541 = 0; i_295541 < n_289745;
                                 i_295541++) {
                                int64_t x_293695;
                                
                                x_293695 = ((int64_t *) mem_296793)[i_295554 *
                                                                    n_289745 +
                                                                    i_295541];
                                
                                bool cond_293696 = sle64((int64_t) 0, x_293695);
                                double defunc_0_f_res_293697;
                                
                                if (cond_293696) {
                                    bool y_293698 = slt64(x_293695, n_289745);
                                    bool bounds_check_293699 = cond_293696 &&
                                         y_293698;
                                    bool index_certs_293700;
                                    
                                    if (!bounds_check_293699) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_293695,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_289745,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_302555,
                                                           "mem_302555") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_302551,
                                                           "mem_302551") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303028,
                                                           "ext_mem_303028") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303036,
                                                           "ext_mem_303036") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303044,
                                                           "ext_mem_303044") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303052,
                                                           "ext_mem_303052") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303060,
                                                           "ext_mem_303060") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303068,
                                                           "ext_mem_303068") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301467,
                                                           "mem_301467") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301456,
                                                           "ext_mem_301456") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301393,
                                                           "ext_mem_301393") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301401,
                                                           "ext_mem_301401") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300038,
                                                           "ext_mem_300038") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299913,
                                                           "ext_mem_299913") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299924,
                                                           "ext_mem_299924") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297627,
                                                           "mem_param_297627") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297619,
                                                           "mem_param_297619") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303131,
                                                           "ext_mem_303131") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303132,
                                                           "ext_mem_303132") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297605,
                                                           "mem_param_297605") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297597,
                                                           "mem_param_297597") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297589,
                                                           "mem_param_297589") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303656,
                                                           "ext_mem_303656") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303657,
                                                           "ext_mem_303657") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303658,
                                                           "ext_mem_303658") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297581,
                                                           "mem_297581") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297577,
                                                           "mem_297577") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304403,
                                                           "mem_out_304403") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304402,
                                                           "mem_out_304402") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304401,
                                                           "mem_out_304401") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_293701;
                                    
                                    defunc_0_f_res_t_res_293701 =
                                        ((double *) mem_302568)[x_293695];
                                    defunc_0_f_res_293697 =
                                        defunc_0_f_res_t_res_293701;
                                } else {
                                    defunc_0_f_res_293697 = 0.0;
                                }
                                
                                double defunc_0_f_res_293702;
                                
                                if (cond_293696) {
                                    bool y_293703 = slt64(x_293695, n_289745);
                                    bool bounds_check_293704 = cond_293696 &&
                                         y_293703;
                                    bool index_certs_293705;
                                    
                                    if (!bounds_check_293704) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_293695,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_289745,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_302555,
                                                           "mem_302555") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_302551,
                                                           "mem_302551") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303028,
                                                           "ext_mem_303028") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303036,
                                                           "ext_mem_303036") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303044,
                                                           "ext_mem_303044") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303052,
                                                           "ext_mem_303052") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303060,
                                                           "ext_mem_303060") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303068,
                                                           "ext_mem_303068") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_301467,
                                                           "mem_301467") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301456,
                                                           "ext_mem_301456") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301393,
                                                           "ext_mem_301393") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_301401,
                                                           "ext_mem_301401") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_300038,
                                                           "ext_mem_300038") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299913,
                                                           "ext_mem_299913") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_299924,
                                                           "ext_mem_299924") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297627,
                                                           "mem_param_297627") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297619,
                                                           "mem_param_297619") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303131,
                                                           "ext_mem_303131") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303132,
                                                           "ext_mem_303132") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297605,
                                                           "mem_param_297605") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297597,
                                                           "mem_param_297597") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_297589,
                                                           "mem_param_297589") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303656,
                                                           "ext_mem_303656") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303657,
                                                           "ext_mem_303657") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303658,
                                                           "ext_mem_303658") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297581,
                                                           "mem_297581") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_297577,
                                                           "mem_297577") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304403,
                                                           "mem_out_304403") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304402,
                                                           "mem_out_304402") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_304401,
                                                           "mem_out_304401") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_293706;
                                    
                                    defunc_0_f_res_t_res_293706 =
                                        ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                          (i_295554 *
                                                                           ctx_param_ext_297601 +
                                                                           x_293695 *
                                                                           ctx_param_ext_297603)];
                                    defunc_0_f_res_293702 =
                                        defunc_0_f_res_t_res_293706;
                                } else {
                                    defunc_0_f_res_293702 = 0.0;
                                }
                                ((double *) mem_302583)[i_295541] =
                                    defunc_0_f_res_293702;
                                ((double *) mem_302586)[i_295541] =
                                    defunc_0_f_res_293697;
                            }
                            for (int64_t i_295550 = 0; i_295550 < t_n_m_289909;
                                 i_295550++) {
                                int64_t x_293709;
                                
                                x_293709 = ((int64_t *) mem_297468)[i_295554 *
                                                                    t_n_m_289909 +
                                                                    i_295550];
                                
                                double x_293710;
                                
                                x_293710 = ((double *) mem_297472)[i_295554 *
                                                                   t_n_m_289909 +
                                                                   i_295550];
                                
                                int64_t min_arg_293711 = mul64(jump_t_289755,
                                                               i_295550);
                                int64_t min_res_293712 = smin64(i_289916,
                                                                min_arg_293711);
                                int64_t defunc_0_g_res_293713 =
                                        add64((int64_t) 1, min_res_293712);
                                double defunc_2_reduce_res_293714;
                                double redout_295544 = 0.0;
                                
                                for (int64_t i_295545 = 0; i_295545 <
                                     q_t_289749; i_295545++) {
                                    bool cond_293719 = sle64(x_293685,
                                                             i_295545);
                                    int64_t defunc_0_f_res_293720;
                                    
                                    if (cond_293719) {
                                        defunc_0_f_res_293720 = (int64_t) 0;
                                    } else {
                                        int64_t i_293721 = add64(x_293709,
                                                                 i_295545);
                                        int64_t defunc_0_add_arg_293722;
                                        
                                        defunc_0_add_arg_293722 =
                                            ((int64_t *) mem_296793)[i_295554 *
                                                                     n_289745 +
                                                                     i_293721];
                                        
                                        int64_t defunc_1_add_res_293723 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_293722);
                                        
                                        defunc_0_f_res_293720 =
                                            defunc_1_add_res_293723;
                                    }
                                    
                                    double defunc_0_f_res_293724;
                                    
                                    if (cond_293719) {
                                        defunc_0_f_res_293724 = 0.0;
                                    } else {
                                        int64_t i_293725 = add64(x_293709,
                                                                 i_295545);
                                        double defunc_0_add_arg_293726;
                                        
                                        defunc_0_add_arg_293726 =
                                            ((double *) mem_302583)[i_293725];
                                        defunc_0_f_res_293724 =
                                            defunc_0_add_arg_293726;
                                    }
                                    
                                    int64_t binop_p_293727 =
                                            sub64(defunc_0_f_res_293720,
                                                  defunc_0_g_res_293713);
                                    double defunc_0_f_res_293728 =
                                           sitofp_i64_f64(binop_p_293727);
                                    double abs_res_293729 =
                                           fabs(defunc_0_f_res_293728);
                                    double tmp1_293730 = abs_res_293729 /
                                           x_293710;
                                    double x_293731 = tmp1_293730 * tmp1_293730;
                                    double y_293732 = tmp1_293730 * x_293731;
                                    double tmp2_293733 = 1.0 - y_293732;
                                    double x_293734 = tmp2_293733 * tmp2_293733;
                                    double tmp3_293735 = tmp2_293733 * x_293734;
                                    double w_j_293736 = defunc_0_f_res_293724 *
                                           tmp3_293735;
                                    double defunc_1_op_res_293717 = w_j_293736 +
                                           redout_295544;
                                    double redout_tmp_304831 =
                                           defunc_1_op_res_293717;
                                    
                                    redout_295544 = redout_tmp_304831;
                                }
                                defunc_2_reduce_res_293714 = redout_295544;
                                
                                double a_293737 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293714;
                                double a0_293738 = 1.0 / a_293737;
                                double defunc_2_reduce_res_293739;
                                double redout_295546 = 0.0;
                                
                                for (int64_t i_295547 = 0; i_295547 <
                                     q_t_289749; i_295547++) {
                                    bool cond_293744 = sle64(x_293685,
                                                             i_295547);
                                    int64_t defunc_0_f_res_293745;
                                    
                                    if (cond_293744) {
                                        defunc_0_f_res_293745 = (int64_t) 0;
                                    } else {
                                        int64_t i_293746 = add64(x_293709,
                                                                 i_295547);
                                        int64_t defunc_0_add_arg_293747;
                                        
                                        defunc_0_add_arg_293747 =
                                            ((int64_t *) mem_296793)[i_295554 *
                                                                     n_289745 +
                                                                     i_293746];
                                        
                                        int64_t defunc_1_add_res_293748 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_293747);
                                        
                                        defunc_0_f_res_293745 =
                                            defunc_1_add_res_293748;
                                    }
                                    
                                    double defunc_0_f_res_293749;
                                    
                                    if (cond_293744) {
                                        defunc_0_f_res_293749 = 0.0;
                                    } else {
                                        int64_t i_293750 = add64(x_293709,
                                                                 i_295547);
                                        double defunc_0_add_arg_293751;
                                        
                                        defunc_0_add_arg_293751 =
                                            ((double *) mem_302583)[i_293750];
                                        defunc_0_f_res_293749 =
                                            defunc_0_add_arg_293751;
                                    }
                                    
                                    int64_t binop_p_293752 =
                                            sub64(defunc_0_f_res_293745,
                                                  defunc_0_g_res_293713);
                                    double defunc_0_f_res_293753 =
                                           sitofp_i64_f64(binop_p_293752);
                                    double abs_res_293754 =
                                           fabs(defunc_0_f_res_293753);
                                    double tmp1_293755 = abs_res_293754 /
                                           x_293710;
                                    double x_293756 = tmp1_293755 * tmp1_293755;
                                    double y_293757 = tmp1_293755 * x_293756;
                                    double tmp2_293758 = 1.0 - y_293757;
                                    double x_293759 = tmp2_293758 * tmp2_293758;
                                    double tmp3_293760 = tmp2_293758 * x_293759;
                                    double tmp4_293761 = defunc_0_f_res_293749 *
                                           tmp3_293760;
                                    double defunc_0_f_res_293762;
                                    
                                    if (cond_293744) {
                                        defunc_0_f_res_293762 = 0.0;
                                    } else {
                                        int64_t i_293763 = add64(x_293709,
                                                                 i_295547);
                                        double defunc_0_add_arg_293764;
                                        
                                        defunc_0_add_arg_293764 =
                                            ((double *) mem_302586)[i_293763];
                                        defunc_0_f_res_293762 =
                                            defunc_0_add_arg_293764;
                                    }
                                    
                                    double x_293765 = a0_293738 * tmp4_293761;
                                    double defunc_9_fit_fun_res_293766 =
                                           defunc_0_f_res_293762 * x_293765;
                                    double defunc_1_op_res_293742 =
                                           defunc_9_fit_fun_res_293766 +
                                           redout_295546;
                                    double redout_tmp_304832 =
                                           defunc_1_op_res_293742;
                                    
                                    redout_295546 = redout_tmp_304832;
                                }
                                defunc_2_reduce_res_293739 = redout_295546;
                                ((double *) mem_302555.mem)[i_295554 *
                                                            t_n_m_289909 +
                                                            i_295550] =
                                    defunc_2_reduce_res_293739;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_303036, &mem_302555,
                                         "mem_302555") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_303028, &mem_302551,
                                         "mem_302551") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302555, "mem_302555") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302551, "mem_302551") != 0)
                            return 1;
                    } else {
                        bool match_lit_293769 = (int64_t) 1 == d_t_289752;
                        int64_t binop_y_302672 = (int64_t) 8 * n_289745;
                        int64_t bytes_302673 = smax64((int64_t) 0,
                                                      binop_y_302672);
                        int64_t binop_y_302739 = (int64_t) 8 * q_t_289749;
                        int64_t bytes_302740 = smax64((int64_t) 0,
                                                      binop_y_302739);
                        int64_t binop_y_302841 = (int64_t) 8 * n_289745;
                        int64_t bytes_302842 = smax64((int64_t) 0,
                                                      binop_y_302841);
                        int64_t binop_y_302908 = (int64_t) 8 * q_t_289749;
                        int64_t bytes_302909 = smax64((int64_t) 0,
                                                      binop_y_302908);
                        struct memblock ext_mem_303020;
                        
                        ext_mem_303020.references = NULL;
                        
                        struct memblock ext_mem_303012;
                        
                        ext_mem_303012.references = NULL;
                        if (match_lit_293769) {
                            struct memblock mem_302647;
                            
                            mem_302647.references = NULL;
                            if (memblock_alloc(ctx, &mem_302647, bytes_297467,
                                               "mem_302647")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_302651;
                            
                            mem_302651.references = NULL;
                            if (memblock_alloc(ctx, &mem_302651, bytes_297467,
                                               "mem_302651")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_302674_cached_sizze_305066 <
                                (size_t) bytes_302673) {
                                mem_302674 = realloc(mem_302674, bytes_302673);
                                mem_302674_cached_sizze_305066 = bytes_302673;
                            }
                            if (mem_302689_cached_sizze_305067 <
                                (size_t) bytes_302673) {
                                mem_302689 = realloc(mem_302689, bytes_302673);
                                mem_302689_cached_sizze_305067 = bytes_302673;
                            }
                            if (mem_302692_cached_sizze_305068 <
                                (size_t) bytes_302673) {
                                mem_302692 = realloc(mem_302692, bytes_302673);
                                mem_302692_cached_sizze_305068 = bytes_302673;
                            }
                            if (mem_302741_cached_sizze_305069 <
                                (size_t) bytes_302740) {
                                mem_302741 = realloc(mem_302741, bytes_302740);
                                mem_302741_cached_sizze_305069 = bytes_302740;
                            }
                            if (mem_302744_cached_sizze_305070 <
                                (size_t) bytes_302740) {
                                mem_302744 = realloc(mem_302744, bytes_302740);
                                mem_302744_cached_sizze_305070 = bytes_302740;
                            }
                            for (int64_t i_295593 = 0; i_295593 <
                                 partition_sizze_289836; i_295593++) {
                                int64_t x_293779;
                                
                                x_293779 = ((int64_t *) mem_296796)[i_295593];
                                for (int64_t i_295558 = 0; i_295558 < n_289745;
                                     i_295558++) {
                                    float x_293783;
                                    
                                    x_293783 = ((float *) mem_296753)[i_295593 *
                                                                      n_289745 +
                                                                      i_295558];
                                    
                                    double x_293784;
                                    
                                    x_293784 =
                                        ((double *) mem_301467.mem)[i_295593 *
                                                                    n_289745 +
                                                                    i_295558];
                                    
                                    double f32_res_293785 =
                                           fpconv_f32_f64(x_293783);
                                    double defunc_1_f_res_293786 =
                                           f32_res_293785 - x_293784;
                                    
                                    ((double *) mem_302674)[i_295558] =
                                        defunc_1_f_res_293786;
                                }
                                for (int64_t i_295564 = 0; i_295564 < n_289745;
                                     i_295564++) {
                                    int64_t x_293789;
                                    
                                    x_293789 =
                                        ((int64_t *) mem_296793)[i_295593 *
                                                                 n_289745 +
                                                                 i_295564];
                                    
                                    bool cond_293790 = sle64((int64_t) 0,
                                                             x_293789);
                                    double defunc_0_f_res_293791;
                                    
                                    if (cond_293790) {
                                        bool y_293792 = slt64(x_293789,
                                                              n_289745);
                                        bool bounds_check_293793 =
                                             cond_293790 && y_293792;
                                        bool index_certs_293794;
                                        
                                        if (!bounds_check_293793) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_293789,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_289745,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_302651,
                                                               "mem_302651") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_302647,
                                                               "mem_302647") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303012,
                                                               "ext_mem_303012") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303020,
                                                               "ext_mem_303020") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303028,
                                                               "ext_mem_303028") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303036,
                                                               "ext_mem_303036") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303044,
                                                               "ext_mem_303044") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303052,
                                                               "ext_mem_303052") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303060,
                                                               "ext_mem_303060") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303068,
                                                               "ext_mem_303068") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301467,
                                                               "mem_301467") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301456,
                                                               "ext_mem_301456") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301393,
                                                               "ext_mem_301393") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301401,
                                                               "ext_mem_301401") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300038,
                                                               "ext_mem_300038") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299913,
                                                               "ext_mem_299913") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299924,
                                                               "ext_mem_299924") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297627,
                                                               "mem_param_297627") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297619,
                                                               "mem_param_297619") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303131,
                                                               "ext_mem_303131") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303132,
                                                               "ext_mem_303132") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297605,
                                                               "mem_param_297605") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297597,
                                                               "mem_param_297597") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297589,
                                                               "mem_param_297589") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303656,
                                                               "ext_mem_303656") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303657,
                                                               "ext_mem_303657") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303658,
                                                               "ext_mem_303658") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297581,
                                                               "mem_297581") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297577,
                                                               "mem_297577") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304403,
                                                               "mem_out_304403") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304402,
                                                               "mem_out_304402") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304401,
                                                               "mem_out_304401") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_293795;
                                        
                                        defunc_0_f_res_t_res_293795 =
                                            ((double *) mem_302674)[x_293789];
                                        defunc_0_f_res_293791 =
                                            defunc_0_f_res_t_res_293795;
                                    } else {
                                        defunc_0_f_res_293791 = 0.0;
                                    }
                                    
                                    double defunc_0_f_res_293796;
                                    
                                    if (cond_293790) {
                                        bool y_293797 = slt64(x_293789,
                                                              n_289745);
                                        bool bounds_check_293798 =
                                             cond_293790 && y_293797;
                                        bool index_certs_293799;
                                        
                                        if (!bounds_check_293798) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_293789,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_289745,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_302651,
                                                               "mem_302651") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_302647,
                                                               "mem_302647") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303012,
                                                               "ext_mem_303012") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303020,
                                                               "ext_mem_303020") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303028,
                                                               "ext_mem_303028") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303036,
                                                               "ext_mem_303036") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303044,
                                                               "ext_mem_303044") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303052,
                                                               "ext_mem_303052") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303060,
                                                               "ext_mem_303060") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303068,
                                                               "ext_mem_303068") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301467,
                                                               "mem_301467") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301456,
                                                               "ext_mem_301456") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301393,
                                                               "ext_mem_301393") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301401,
                                                               "ext_mem_301401") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300038,
                                                               "ext_mem_300038") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299913,
                                                               "ext_mem_299913") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299924,
                                                               "ext_mem_299924") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297627,
                                                               "mem_param_297627") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297619,
                                                               "mem_param_297619") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303131,
                                                               "ext_mem_303131") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303132,
                                                               "ext_mem_303132") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297605,
                                                               "mem_param_297605") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297597,
                                                               "mem_param_297597") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297589,
                                                               "mem_param_297589") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303656,
                                                               "ext_mem_303656") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303657,
                                                               "ext_mem_303657") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303658,
                                                               "ext_mem_303658") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297581,
                                                               "mem_297581") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297577,
                                                               "mem_297577") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304403,
                                                               "mem_out_304403") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304402,
                                                               "mem_out_304402") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304401,
                                                               "mem_out_304401") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_293800;
                                        
                                        defunc_0_f_res_t_res_293800 =
                                            ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                              (i_295593 *
                                                                               ctx_param_ext_297601 +
                                                                               x_293789 *
                                                                               ctx_param_ext_297603)];
                                        defunc_0_f_res_293796 =
                                            defunc_0_f_res_t_res_293800;
                                    } else {
                                        defunc_0_f_res_293796 = 0.0;
                                    }
                                    ((double *) mem_302689)[i_295564] =
                                        defunc_0_f_res_293796;
                                    ((double *) mem_302692)[i_295564] =
                                        defunc_0_f_res_293791;
                                }
                                for (int64_t i_295586 = 0; i_295586 <
                                     t_n_m_289909; i_295586++) {
                                    int64_t x_293804;
                                    
                                    x_293804 =
                                        ((int64_t *) mem_297468)[i_295593 *
                                                                 t_n_m_289909 +
                                                                 i_295586];
                                    
                                    double x_293805;
                                    
                                    x_293805 =
                                        ((double *) mem_297472)[i_295593 *
                                                                t_n_m_289909 +
                                                                i_295586];
                                    
                                    int64_t min_arg_293806 =
                                            mul64(jump_t_289755, i_295586);
                                    int64_t min_res_293807 = smin64(i_289916,
                                                                    min_arg_293806);
                                    int64_t defunc_0_g_res_293808 =
                                            add64((int64_t) 1, min_res_293807);
                                    double defunc_2_reduce_res_293809;
                                    double redout_295569 = 0.0;
                                    
                                    for (int64_t i_295572 = 0; i_295572 <
                                         q_t_289749; i_295572++) {
                                        bool cond_293816 = sle64(x_293779,
                                                                 i_295572);
                                        int64_t defunc_0_f_res_293817;
                                        
                                        if (cond_293816) {
                                            defunc_0_f_res_293817 = (int64_t) 0;
                                        } else {
                                            int64_t i_293818 = add64(x_293804,
                                                                     i_295572);
                                            int64_t defunc_0_add_arg_293819;
                                            
                                            defunc_0_add_arg_293819 =
                                                ((int64_t *) mem_296793)[i_295593 *
                                                                         n_289745 +
                                                                         i_293818];
                                            
                                            int64_t defunc_1_add_res_293820 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_293819);
                                            
                                            defunc_0_f_res_293817 =
                                                defunc_1_add_res_293820;
                                        }
                                        
                                        double defunc_0_f_res_293821;
                                        
                                        if (cond_293816) {
                                            defunc_0_f_res_293821 = 0.0;
                                        } else {
                                            int64_t i_293822 = add64(x_293804,
                                                                     i_295572);
                                            double defunc_0_add_arg_293823;
                                            
                                            defunc_0_add_arg_293823 =
                                                ((double *) mem_302689)[i_293822];
                                            defunc_0_f_res_293821 =
                                                defunc_0_add_arg_293823;
                                        }
                                        
                                        int64_t binop_p_293824 =
                                                sub64(defunc_0_f_res_293817,
                                                      defunc_0_g_res_293808);
                                        double defunc_0_f_res_293825 =
                                               sitofp_i64_f64(binop_p_293824);
                                        double abs_res_293826 =
                                               fabs(defunc_0_f_res_293825);
                                        double tmp1_293827 = abs_res_293826 /
                                               x_293805;
                                        double x_293828 = tmp1_293827 *
                                               tmp1_293827;
                                        double y_293829 = tmp1_293827 *
                                               x_293828;
                                        double tmp2_293830 = 1.0 - y_293829;
                                        double x_293831 = tmp2_293830 *
                                               tmp2_293830;
                                        double tmp3_293832 = tmp2_293830 *
                                               x_293831;
                                        double w_j_293833 =
                                               defunc_0_f_res_293821 *
                                               tmp3_293832;
                                        double xw_j_293834 =
                                               defunc_0_f_res_293825 *
                                               w_j_293833;
                                        double x2w_j_293835 =
                                               defunc_0_f_res_293825 *
                                               xw_j_293834;
                                        double defunc_1_op_res_293814 =
                                               w_j_293833 + redout_295569;
                                        
                                        ((double *) mem_302741)[i_295572] =
                                            xw_j_293834;
                                        ((double *) mem_302744)[i_295572] =
                                            x2w_j_293835;
                                        
                                        double redout_tmp_304840 =
                                               defunc_1_op_res_293814;
                                        
                                        redout_295569 = redout_tmp_304840;
                                    }
                                    defunc_2_reduce_res_293809 = redout_295569;
                                    
                                    double a_293836 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293809;
                                    double defunc_2_reduce_res_293837;
                                    double redout_295575 = 0.0;
                                    
                                    for (int64_t i_295576 = 0; i_295576 <
                                         q_t_289749; i_295576++) {
                                        double x_293841;
                                        
                                        x_293841 =
                                            ((double *) mem_302741)[i_295576];
                                        
                                        double defunc_1_op_res_293840 =
                                               x_293841 + redout_295575;
                                        double redout_tmp_304843 =
                                               defunc_1_op_res_293840;
                                        
                                        redout_295575 = redout_tmp_304843;
                                    }
                                    defunc_2_reduce_res_293837 = redout_295575;
                                    
                                    double b_293842 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293837;
                                    double defunc_2_reduce_res_293843;
                                    double redout_295577 = 0.0;
                                    
                                    for (int64_t i_295578 = 0; i_295578 <
                                         q_t_289749; i_295578++) {
                                        double x_293847;
                                        
                                        x_293847 =
                                            ((double *) mem_302744)[i_295578];
                                        
                                        double defunc_1_op_res_293846 =
                                               x_293847 + redout_295577;
                                        double redout_tmp_304844 =
                                               defunc_1_op_res_293846;
                                        
                                        redout_295577 = redout_tmp_304844;
                                    }
                                    defunc_2_reduce_res_293843 = redout_295577;
                                    
                                    double c_293848 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293843;
                                    double x_293849 = a_293836 * c_293848;
                                    double y_293850 = b_293842 * b_293842;
                                    double y_293851 = x_293849 - y_293850;
                                    double det1_293852 = 1.0 / y_293851;
                                    double a11_293853 = c_293848 * det1_293852;
                                    double x_293854 = 0.0 - b_293842;
                                    double b11_293855 = det1_293852 * x_293854;
                                    double c11_293856 = a_293836 * det1_293852;
                                    double defunc_2_reduce_res_293857;
                                    double defunc_2_reduce_res_293858;
                                    double redout_295579;
                                    double redout_295580;
                                    
                                    redout_295579 = 0.0;
                                    redout_295580 = 0.0;
                                    for (int64_t i_295581 = 0; i_295581 <
                                         q_t_289749; i_295581++) {
                                        bool cond_293866 = sle64(x_293779,
                                                                 i_295581);
                                        int64_t defunc_0_f_res_293867;
                                        
                                        if (cond_293866) {
                                            defunc_0_f_res_293867 = (int64_t) 0;
                                        } else {
                                            int64_t i_293868 = add64(x_293804,
                                                                     i_295581);
                                            int64_t defunc_0_add_arg_293869;
                                            
                                            defunc_0_add_arg_293869 =
                                                ((int64_t *) mem_296793)[i_295593 *
                                                                         n_289745 +
                                                                         i_293868];
                                            
                                            int64_t defunc_1_add_res_293870 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_293869);
                                            
                                            defunc_0_f_res_293867 =
                                                defunc_1_add_res_293870;
                                        }
                                        
                                        double defunc_0_f_res_293871;
                                        
                                        if (cond_293866) {
                                            defunc_0_f_res_293871 = 0.0;
                                        } else {
                                            int64_t i_293872 = add64(x_293804,
                                                                     i_295581);
                                            double defunc_0_add_arg_293873;
                                            
                                            defunc_0_add_arg_293873 =
                                                ((double *) mem_302689)[i_293872];
                                            defunc_0_f_res_293871 =
                                                defunc_0_add_arg_293873;
                                        }
                                        
                                        int64_t binop_p_293874 =
                                                sub64(defunc_0_f_res_293867,
                                                      defunc_0_g_res_293808);
                                        double defunc_0_f_res_293875 =
                                               sitofp_i64_f64(binop_p_293874);
                                        double abs_res_293876 =
                                               fabs(defunc_0_f_res_293875);
                                        double tmp1_293877 = abs_res_293876 /
                                               x_293805;
                                        double x_293878 = tmp1_293877 *
                                               tmp1_293877;
                                        double y_293879 = tmp1_293877 *
                                               x_293878;
                                        double tmp2_293880 = 1.0 - y_293879;
                                        double x_293881 = tmp2_293880 *
                                               tmp2_293880;
                                        double tmp3_293882 = tmp2_293880 *
                                               x_293881;
                                        double tmp4_293883 =
                                               defunc_0_f_res_293871 *
                                               tmp3_293882;
                                        double defunc_1_f_res_293884 =
                                               defunc_0_f_res_293875 *
                                               tmp4_293883;
                                        double defunc_0_f_res_293885;
                                        
                                        if (cond_293866) {
                                            defunc_0_f_res_293885 = 0.0;
                                        } else {
                                            int64_t i_293886 = add64(x_293804,
                                                                     i_295581);
                                            double defunc_0_add_arg_293887;
                                            
                                            defunc_0_add_arg_293887 =
                                                ((double *) mem_302692)[i_293886];
                                            defunc_0_f_res_293885 =
                                                defunc_0_add_arg_293887;
                                        }
                                        
                                        double x_293888 = a11_293853 *
                                               tmp4_293883;
                                        double y_293889 = b11_293855 *
                                               defunc_1_f_res_293884;
                                        double x_293890 = x_293888 + y_293889;
                                        double defunc_9_fit_fun_res_293891 =
                                               defunc_0_f_res_293885 * x_293890;
                                        double x_293892 = b11_293855 *
                                               tmp4_293883;
                                        double y_293893 = c11_293856 *
                                               defunc_1_f_res_293884;
                                        double x_293894 = x_293892 + y_293893;
                                        double defunc_9_slope_fun_res_293895 =
                                               defunc_0_f_res_293885 * x_293894;
                                        double defunc_1_op_res_293861 =
                                               defunc_9_fit_fun_res_293891 +
                                               redout_295579;
                                        double defunc_1_op_res_293864 =
                                               defunc_9_slope_fun_res_293895 +
                                               redout_295580;
                                        double redout_tmp_304845 =
                                               defunc_1_op_res_293861;
                                        double redout_tmp_304846 =
                                               defunc_1_op_res_293864;
                                        
                                        redout_295579 = redout_tmp_304845;
                                        redout_295580 = redout_tmp_304846;
                                    }
                                    defunc_2_reduce_res_293857 = redout_295579;
                                    defunc_2_reduce_res_293858 = redout_295580;
                                    ((double *) mem_302647.mem)[i_295593 *
                                                                t_n_m_289909 +
                                                                i_295586] =
                                        defunc_2_reduce_res_293857;
                                    ((double *) mem_302651.mem)[i_295593 *
                                                                t_n_m_289909 +
                                                                i_295586] =
                                        defunc_2_reduce_res_293858;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_303020, &mem_302647,
                                             "mem_302647") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_303012, &mem_302651,
                                             "mem_302651") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302651,
                                               "mem_302651") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302647,
                                               "mem_302647") != 0)
                                return 1;
                        } else {
                            struct memblock mem_302816;
                            
                            mem_302816.references = NULL;
                            if (memblock_alloc(ctx, &mem_302816, bytes_297467,
                                               "mem_302816")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_302820;
                            
                            mem_302820.references = NULL;
                            if (memblock_alloc(ctx, &mem_302820, bytes_297467,
                                               "mem_302820")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_302843_cached_sizze_305071 <
                                (size_t) bytes_302842) {
                                mem_302843 = realloc(mem_302843, bytes_302842);
                                mem_302843_cached_sizze_305071 = bytes_302842;
                            }
                            if (mem_302858_cached_sizze_305072 <
                                (size_t) bytes_302842) {
                                mem_302858 = realloc(mem_302858, bytes_302842);
                                mem_302858_cached_sizze_305072 = bytes_302842;
                            }
                            if (mem_302861_cached_sizze_305073 <
                                (size_t) bytes_302842) {
                                mem_302861 = realloc(mem_302861, bytes_302842);
                                mem_302861_cached_sizze_305073 = bytes_302842;
                            }
                            if (mem_302910_cached_sizze_305074 <
                                (size_t) bytes_302909) {
                                mem_302910 = realloc(mem_302910, bytes_302909);
                                mem_302910_cached_sizze_305074 = bytes_302909;
                            }
                            if (mem_302913_cached_sizze_305075 <
                                (size_t) bytes_302909) {
                                mem_302913 = realloc(mem_302913, bytes_302909);
                                mem_302913_cached_sizze_305075 = bytes_302909;
                            }
                            if (mem_302916_cached_sizze_305076 <
                                (size_t) bytes_302909) {
                                mem_302916 = realloc(mem_302916, bytes_302909);
                                mem_302916_cached_sizze_305076 = bytes_302909;
                            }
                            if (mem_302919_cached_sizze_305077 <
                                (size_t) bytes_302909) {
                                mem_302919 = realloc(mem_302919, bytes_302909);
                                mem_302919_cached_sizze_305077 = bytes_302909;
                            }
                            for (int64_t i_295643 = 0; i_295643 <
                                 partition_sizze_289836; i_295643++) {
                                int64_t x_293905;
                                
                                x_293905 = ((int64_t *) mem_296796)[i_295643];
                                for (int64_t i_295598 = 0; i_295598 < n_289745;
                                     i_295598++) {
                                    float x_293909;
                                    
                                    x_293909 = ((float *) mem_296753)[i_295643 *
                                                                      n_289745 +
                                                                      i_295598];
                                    
                                    double x_293910;
                                    
                                    x_293910 =
                                        ((double *) mem_301467.mem)[i_295643 *
                                                                    n_289745 +
                                                                    i_295598];
                                    
                                    double f32_res_293911 =
                                           fpconv_f32_f64(x_293909);
                                    double defunc_1_f_res_293912 =
                                           f32_res_293911 - x_293910;
                                    
                                    ((double *) mem_302843)[i_295598] =
                                        defunc_1_f_res_293912;
                                }
                                for (int64_t i_295604 = 0; i_295604 < n_289745;
                                     i_295604++) {
                                    int64_t x_293915;
                                    
                                    x_293915 =
                                        ((int64_t *) mem_296793)[i_295643 *
                                                                 n_289745 +
                                                                 i_295604];
                                    
                                    bool cond_293916 = sle64((int64_t) 0,
                                                             x_293915);
                                    double defunc_0_f_res_293917;
                                    
                                    if (cond_293916) {
                                        bool y_293918 = slt64(x_293915,
                                                              n_289745);
                                        bool bounds_check_293919 =
                                             cond_293916 && y_293918;
                                        bool index_certs_293920;
                                        
                                        if (!bounds_check_293919) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_293915,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_289745,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_302820,
                                                               "mem_302820") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_302816,
                                                               "mem_302816") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303012,
                                                               "ext_mem_303012") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303020,
                                                               "ext_mem_303020") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303028,
                                                               "ext_mem_303028") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303036,
                                                               "ext_mem_303036") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303044,
                                                               "ext_mem_303044") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303052,
                                                               "ext_mem_303052") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303060,
                                                               "ext_mem_303060") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303068,
                                                               "ext_mem_303068") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301467,
                                                               "mem_301467") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301456,
                                                               "ext_mem_301456") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301393,
                                                               "ext_mem_301393") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301401,
                                                               "ext_mem_301401") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300038,
                                                               "ext_mem_300038") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299913,
                                                               "ext_mem_299913") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299924,
                                                               "ext_mem_299924") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297627,
                                                               "mem_param_297627") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297619,
                                                               "mem_param_297619") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303131,
                                                               "ext_mem_303131") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303132,
                                                               "ext_mem_303132") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297605,
                                                               "mem_param_297605") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297597,
                                                               "mem_param_297597") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297589,
                                                               "mem_param_297589") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303656,
                                                               "ext_mem_303656") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303657,
                                                               "ext_mem_303657") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303658,
                                                               "ext_mem_303658") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297581,
                                                               "mem_297581") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297577,
                                                               "mem_297577") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304403,
                                                               "mem_out_304403") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304402,
                                                               "mem_out_304402") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304401,
                                                               "mem_out_304401") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_293921;
                                        
                                        defunc_0_f_res_t_res_293921 =
                                            ((double *) mem_302843)[x_293915];
                                        defunc_0_f_res_293917 =
                                            defunc_0_f_res_t_res_293921;
                                    } else {
                                        defunc_0_f_res_293917 = 0.0;
                                    }
                                    
                                    double defunc_0_f_res_293922;
                                    
                                    if (cond_293916) {
                                        bool y_293923 = slt64(x_293915,
                                                              n_289745);
                                        bool bounds_check_293924 =
                                             cond_293916 && y_293923;
                                        bool index_certs_293925;
                                        
                                        if (!bounds_check_293924) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_293915,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_289745,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_302820,
                                                               "mem_302820") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_302816,
                                                               "mem_302816") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303012,
                                                               "ext_mem_303012") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303020,
                                                               "ext_mem_303020") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303028,
                                                               "ext_mem_303028") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303036,
                                                               "ext_mem_303036") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303044,
                                                               "ext_mem_303044") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303052,
                                                               "ext_mem_303052") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303060,
                                                               "ext_mem_303060") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303068,
                                                               "ext_mem_303068") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_301467,
                                                               "mem_301467") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301456,
                                                               "ext_mem_301456") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301393,
                                                               "ext_mem_301393") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_301401,
                                                               "ext_mem_301401") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_300038,
                                                               "ext_mem_300038") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299913,
                                                               "ext_mem_299913") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_299924,
                                                               "ext_mem_299924") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297627,
                                                               "mem_param_297627") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297619,
                                                               "mem_param_297619") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303131,
                                                               "ext_mem_303131") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303132,
                                                               "ext_mem_303132") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297605,
                                                               "mem_param_297605") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297597,
                                                               "mem_param_297597") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_297589,
                                                               "mem_param_297589") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303656,
                                                               "ext_mem_303656") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303657,
                                                               "ext_mem_303657") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303658,
                                                               "ext_mem_303658") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297581,
                                                               "mem_297581") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_297577,
                                                               "mem_297577") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304403,
                                                               "mem_out_304403") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304402,
                                                               "mem_out_304402") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_304401,
                                                               "mem_out_304401") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_293926;
                                        
                                        defunc_0_f_res_t_res_293926 =
                                            ((double *) mem_param_297605.mem)[ctx_param_ext_297600 +
                                                                              (i_295643 *
                                                                               ctx_param_ext_297601 +
                                                                               x_293915 *
                                                                               ctx_param_ext_297603)];
                                        defunc_0_f_res_293922 =
                                            defunc_0_f_res_t_res_293926;
                                    } else {
                                        defunc_0_f_res_293922 = 0.0;
                                    }
                                    ((double *) mem_302858)[i_295604] =
                                        defunc_0_f_res_293922;
                                    ((double *) mem_302861)[i_295604] =
                                        defunc_0_f_res_293917;
                                }
                                for (int64_t i_295636 = 0; i_295636 <
                                     t_n_m_289909; i_295636++) {
                                    int64_t x_293930;
                                    
                                    x_293930 =
                                        ((int64_t *) mem_297468)[i_295643 *
                                                                 t_n_m_289909 +
                                                                 i_295636];
                                    
                                    double x_293931;
                                    
                                    x_293931 =
                                        ((double *) mem_297472)[i_295643 *
                                                                t_n_m_289909 +
                                                                i_295636];
                                    
                                    int64_t min_arg_293932 =
                                            mul64(jump_t_289755, i_295636);
                                    int64_t min_res_293933 = smin64(i_289916,
                                                                    min_arg_293932);
                                    int64_t defunc_0_g_res_293934 =
                                            add64((int64_t) 1, min_res_293933);
                                    double defunc_2_reduce_res_293935;
                                    double redout_295611 = 0.0;
                                    
                                    for (int64_t i_295616 = 0; i_295616 <
                                         q_t_289749; i_295616++) {
                                        bool cond_293944 = sle64(x_293905,
                                                                 i_295616);
                                        int64_t defunc_0_f_res_293945;
                                        
                                        if (cond_293944) {
                                            defunc_0_f_res_293945 = (int64_t) 0;
                                        } else {
                                            int64_t i_293946 = add64(x_293930,
                                                                     i_295616);
                                            int64_t defunc_0_add_arg_293947;
                                            
                                            defunc_0_add_arg_293947 =
                                                ((int64_t *) mem_296793)[i_295643 *
                                                                         n_289745 +
                                                                         i_293946];
                                            
                                            int64_t defunc_1_add_res_293948 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_293947);
                                            
                                            defunc_0_f_res_293945 =
                                                defunc_1_add_res_293948;
                                        }
                                        
                                        double defunc_0_f_res_293949;
                                        
                                        if (cond_293944) {
                                            defunc_0_f_res_293949 = 0.0;
                                        } else {
                                            int64_t i_293950 = add64(x_293930,
                                                                     i_295616);
                                            double defunc_0_add_arg_293951;
                                            
                                            defunc_0_add_arg_293951 =
                                                ((double *) mem_302858)[i_293950];
                                            defunc_0_f_res_293949 =
                                                defunc_0_add_arg_293951;
                                        }
                                        
                                        int64_t binop_p_293952 =
                                                sub64(defunc_0_f_res_293945,
                                                      defunc_0_g_res_293934);
                                        double defunc_0_f_res_293953 =
                                               sitofp_i64_f64(binop_p_293952);
                                        double abs_res_293954 =
                                               fabs(defunc_0_f_res_293953);
                                        double tmp1_293955 = abs_res_293954 /
                                               x_293931;
                                        double x_293956 = tmp1_293955 *
                                               tmp1_293955;
                                        double y_293957 = tmp1_293955 *
                                               x_293956;
                                        double tmp2_293958 = 1.0 - y_293957;
                                        double x_293959 = tmp2_293958 *
                                               tmp2_293958;
                                        double tmp3_293960 = tmp2_293958 *
                                               x_293959;
                                        double w_j_293961 =
                                               defunc_0_f_res_293949 *
                                               tmp3_293960;
                                        double xw_j_293962 =
                                               defunc_0_f_res_293953 *
                                               w_j_293961;
                                        double x2w_j_293963 =
                                               defunc_0_f_res_293953 *
                                               xw_j_293962;
                                        double x3w_j_293964 =
                                               defunc_0_f_res_293953 *
                                               x2w_j_293963;
                                        double x4w_j_293965 =
                                               defunc_0_f_res_293953 *
                                               x3w_j_293964;
                                        double defunc_1_op_res_293942 =
                                               w_j_293961 + redout_295611;
                                        
                                        ((double *) mem_302910)[i_295616] =
                                            xw_j_293962;
                                        ((double *) mem_302913)[i_295616] =
                                            x2w_j_293963;
                                        ((double *) mem_302916)[i_295616] =
                                            x3w_j_293964;
                                        ((double *) mem_302919)[i_295616] =
                                            x4w_j_293965;
                                        
                                        double redout_tmp_304854 =
                                               defunc_1_op_res_293942;
                                        
                                        redout_295611 = redout_tmp_304854;
                                    }
                                    defunc_2_reduce_res_293935 = redout_295611;
                                    
                                    double a_293966 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293935;
                                    double defunc_2_reduce_res_293967;
                                    double redout_295621 = 0.0;
                                    
                                    for (int64_t i_295622 = 0; i_295622 <
                                         q_t_289749; i_295622++) {
                                        double x_293971;
                                        
                                        x_293971 =
                                            ((double *) mem_302910)[i_295622];
                                        
                                        double defunc_1_op_res_293970 =
                                               x_293971 + redout_295621;
                                        double redout_tmp_304859 =
                                               defunc_1_op_res_293970;
                                        
                                        redout_295621 = redout_tmp_304859;
                                    }
                                    defunc_2_reduce_res_293967 = redout_295621;
                                    
                                    double b_293972 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293967;
                                    double defunc_2_reduce_res_293973;
                                    double redout_295623 = 0.0;
                                    
                                    for (int64_t i_295624 = 0; i_295624 <
                                         q_t_289749; i_295624++) {
                                        double x_293977;
                                        
                                        x_293977 =
                                            ((double *) mem_302913)[i_295624];
                                        
                                        double defunc_1_op_res_293976 =
                                               x_293977 + redout_295623;
                                        double redout_tmp_304860 =
                                               defunc_1_op_res_293976;
                                        
                                        redout_295623 = redout_tmp_304860;
                                    }
                                    defunc_2_reduce_res_293973 = redout_295623;
                                    
                                    double c_293978 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293973;
                                    double defunc_2_reduce_res_293979;
                                    double redout_295625 = 0.0;
                                    
                                    for (int64_t i_295626 = 0; i_295626 <
                                         q_t_289749; i_295626++) {
                                        double x_293983;
                                        
                                        x_293983 =
                                            ((double *) mem_302916)[i_295626];
                                        
                                        double defunc_1_op_res_293982 =
                                               x_293983 + redout_295625;
                                        double redout_tmp_304861 =
                                               defunc_1_op_res_293982;
                                        
                                        redout_295625 = redout_tmp_304861;
                                    }
                                    defunc_2_reduce_res_293979 = redout_295625;
                                    
                                    double d_293984 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293979;
                                    double defunc_2_reduce_res_293985;
                                    double redout_295627 = 0.0;
                                    
                                    for (int64_t i_295628 = 0; i_295628 <
                                         q_t_289749; i_295628++) {
                                        double x_293989;
                                        
                                        x_293989 =
                                            ((double *) mem_302919)[i_295628];
                                        
                                        double defunc_1_op_res_293988 =
                                               x_293989 + redout_295627;
                                        double redout_tmp_304862 =
                                               defunc_1_op_res_293988;
                                        
                                        redout_295627 = redout_tmp_304862;
                                    }
                                    defunc_2_reduce_res_293985 = redout_295627;
                                    
                                    double e_293990 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293985;
                                    double x_293991 = c_293978 * e_293990;
                                    double y_293992 = d_293984 * d_293984;
                                    double a12_293993 = x_293991 - y_293992;
                                    double x_293994 = c_293978 * d_293984;
                                    double y_293995 = b_293972 * e_293990;
                                    double b12_293996 = x_293994 - y_293995;
                                    double x_293997 = b_293972 * d_293984;
                                    double y_293998 = c_293978 * c_293978;
                                    double c12_293999 = x_293997 - y_293998;
                                    double x_294000 = a_293966 * e_293990;
                                    double b2_294001 = x_294000 - y_293998;
                                    double x_294002 = b_293972 * c_293978;
                                    double y_294003 = a_293966 * d_293984;
                                    double c2_294004 = x_294002 - y_294003;
                                    double x_294005 = a_293966 * a12_293993;
                                    double y_294006 = b_293972 * b12_293996;
                                    double x_294007 = x_294005 + y_294006;
                                    double y_294008 = c_293978 * c12_293999;
                                    double y_294009 = x_294007 + y_294008;
                                    double det_294010 = 1.0 / y_294009;
                                    double a12_294011 = a12_293993 * det_294010;
                                    double b12_294012 = b12_293996 * det_294010;
                                    double c12_294013 = c12_293999 * det_294010;
                                    double b2_294014 = b2_294001 * det_294010;
                                    double c2_294015 = c2_294004 * det_294010;
                                    double defunc_2_reduce_res_294016;
                                    double defunc_2_reduce_res_294017;
                                    double redout_295629;
                                    double redout_295630;
                                    
                                    redout_295629 = 0.0;
                                    redout_295630 = 0.0;
                                    for (int64_t i_295631 = 0; i_295631 <
                                         q_t_289749; i_295631++) {
                                        bool cond_294025 = sle64(x_293905,
                                                                 i_295631);
                                        int64_t defunc_0_f_res_294026;
                                        
                                        if (cond_294025) {
                                            defunc_0_f_res_294026 = (int64_t) 0;
                                        } else {
                                            int64_t i_294027 = add64(x_293930,
                                                                     i_295631);
                                            int64_t defunc_0_add_arg_294028;
                                            
                                            defunc_0_add_arg_294028 =
                                                ((int64_t *) mem_296793)[i_295643 *
                                                                         n_289745 +
                                                                         i_294027];
                                            
                                            int64_t defunc_1_add_res_294029 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_294028);
                                            
                                            defunc_0_f_res_294026 =
                                                defunc_1_add_res_294029;
                                        }
                                        
                                        double defunc_0_f_res_294030;
                                        
                                        if (cond_294025) {
                                            defunc_0_f_res_294030 = 0.0;
                                        } else {
                                            int64_t i_294031 = add64(x_293930,
                                                                     i_295631);
                                            double defunc_0_add_arg_294032;
                                            
                                            defunc_0_add_arg_294032 =
                                                ((double *) mem_302858)[i_294031];
                                            defunc_0_f_res_294030 =
                                                defunc_0_add_arg_294032;
                                        }
                                        
                                        int64_t binop_p_294033 =
                                                sub64(defunc_0_f_res_294026,
                                                      defunc_0_g_res_293934);
                                        double defunc_0_f_res_294034 =
                                               sitofp_i64_f64(binop_p_294033);
                                        double abs_res_294035 =
                                               fabs(defunc_0_f_res_294034);
                                        double tmp1_294036 = abs_res_294035 /
                                               x_293931;
                                        double x_294037 = tmp1_294036 *
                                               tmp1_294036;
                                        double y_294038 = tmp1_294036 *
                                               x_294037;
                                        double tmp2_294039 = 1.0 - y_294038;
                                        double x_294040 = tmp2_294039 *
                                               tmp2_294039;
                                        double tmp3_294041 = tmp2_294039 *
                                               x_294040;
                                        double tmp4_294042 =
                                               defunc_0_f_res_294030 *
                                               tmp3_294041;
                                        double defunc_1_f_res_294043 =
                                               defunc_0_f_res_294034 *
                                               tmp4_294042;
                                        double defunc_1_f_res_294044 =
                                               defunc_0_f_res_294034 *
                                               defunc_1_f_res_294043;
                                        double defunc_0_f_res_294045;
                                        
                                        if (cond_294025) {
                                            defunc_0_f_res_294045 = 0.0;
                                        } else {
                                            int64_t i_294046 = add64(x_293930,
                                                                     i_295631);
                                            double defunc_0_add_arg_294047;
                                            
                                            defunc_0_add_arg_294047 =
                                                ((double *) mem_302861)[i_294046];
                                            defunc_0_f_res_294045 =
                                                defunc_0_add_arg_294047;
                                        }
                                        
                                        double x_294048 = a12_294011 *
                                               tmp4_294042;
                                        double y_294049 = b12_294012 *
                                               defunc_1_f_res_294043;
                                        double x_294050 = x_294048 + y_294049;
                                        double y_294051 = c12_294013 *
                                               defunc_1_f_res_294044;
                                        double x_294052 = x_294050 + y_294051;
                                        double defunc_9_fit_fun_res_294053 =
                                               defunc_0_f_res_294045 * x_294052;
                                        double x_294054 = b12_294012 *
                                               tmp4_294042;
                                        double y_294055 = b2_294014 *
                                               defunc_1_f_res_294043;
                                        double x_294056 = x_294054 + y_294055;
                                        double y_294057 = c2_294015 *
                                               defunc_1_f_res_294044;
                                        double x_294058 = x_294056 + y_294057;
                                        double defunc_9_slope_fun_res_294059 =
                                               defunc_0_f_res_294045 * x_294058;
                                        double defunc_1_op_res_294020 =
                                               defunc_9_fit_fun_res_294053 +
                                               redout_295629;
                                        double defunc_1_op_res_294023 =
                                               defunc_9_slope_fun_res_294059 +
                                               redout_295630;
                                        double redout_tmp_304863 =
                                               defunc_1_op_res_294020;
                                        double redout_tmp_304864 =
                                               defunc_1_op_res_294023;
                                        
                                        redout_295629 = redout_tmp_304863;
                                        redout_295630 = redout_tmp_304864;
                                    }
                                    defunc_2_reduce_res_294016 = redout_295629;
                                    defunc_2_reduce_res_294017 = redout_295630;
                                    ((double *) mem_302816.mem)[i_295643 *
                                                                t_n_m_289909 +
                                                                i_295636] =
                                        defunc_2_reduce_res_294016;
                                    ((double *) mem_302820.mem)[i_295643 *
                                                                t_n_m_289909 +
                                                                i_295636] =
                                        defunc_2_reduce_res_294017;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_303020, &mem_302816,
                                             "mem_302816") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_303012, &mem_302820,
                                             "mem_302820") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302820,
                                               "mem_302820") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302816,
                                               "mem_302816") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_303036, &ext_mem_303020,
                                         "ext_mem_303020") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_303028, &ext_mem_303012,
                                         "ext_mem_303012") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303012,
                                           "ext_mem_303012") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303020,
                                           "ext_mem_303020") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_303052, &ext_mem_303036,
                                     "ext_mem_303036") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_303044, &ext_mem_303028,
                                     "ext_mem_303028") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303028,
                                       "ext_mem_303028") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303036,
                                       "ext_mem_303036") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_303068, &ext_mem_303052,
                                 "ext_mem_303052") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_303060, &ext_mem_303044,
                                 "ext_mem_303044") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_303044, "ext_mem_303044") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_303052, "ext_mem_303052") != 0)
                    return 1;
            }
            
            struct memblock ext_mem_303123;
            
            ext_mem_303123.references = NULL;
            if (cond_290356) {
                bool zzero_294063 = jump_t_289755 == (int64_t) 0;
                bool nonzzero_294064 = !zzero_294063;
                bool nonzzero_cert_294065;
                
                if (!nonzzero_294064) {
                    ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                           "division by zero",
                                           "-> #0  loess.fut:724:20-27\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:723:3-727:9\n   #5  stl.fut:310:23-75\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:309:15-311:43\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_303123,
                                       "ext_mem_303123") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303060,
                                       "ext_mem_303060") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303068,
                                       "ext_mem_303068") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_301467, "mem_301467") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301456,
                                       "ext_mem_301456") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301393,
                                       "ext_mem_301393") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301401,
                                       "ext_mem_301401") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_300038,
                                       "ext_mem_300038") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299913,
                                       "ext_mem_299913") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299924,
                                       "ext_mem_299924") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297627,
                                       "mem_param_297627") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297619,
                                       "mem_param_297619") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303131,
                                       "ext_mem_303131") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303132,
                                       "ext_mem_303132") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297605,
                                       "mem_param_297605") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297597,
                                       "mem_param_297597") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297589,
                                       "mem_param_297589") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303656,
                                       "ext_mem_303656") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303657,
                                       "ext_mem_303657") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303658,
                                       "ext_mem_303658") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t y_294066 = sub64(t_n_m_289909, (int64_t) 1);
                struct memblock mem_303079;
                
                mem_303079.references = NULL;
                if (memblock_alloc(ctx, &mem_303079, bytes_296792,
                                   "mem_303079")) {
                    err = 1;
                    goto cleanup;
                }
                for (int64_t i_295652 = 0; i_295652 < partition_sizze_289836;
                     i_295652++) {
                    for (int64_t i_295648 = 0; i_295648 < n_289745;
                         i_295648++) {
                        int64_t m_v_294072 = sdiv64(i_295648, jump_t_289755);
                        bool cond_294073 = m_v_294072 == y_294066;
                        int64_t j_294074;
                        
                        if (cond_294073) {
                            int64_t j_t_res_294075 = sub64(m_v_294072,
                                                           (int64_t) 1);
                            
                            j_294074 = j_t_res_294075;
                        } else {
                            j_294074 = m_v_294072;
                        }
                        
                        int64_t min_arg_294076 = mul64(jump_t_289755, j_294074);
                        int64_t min_res_294077 = smin64(i_289916,
                                                        min_arg_294076);
                        int64_t defunc_0_m_fun_arg_294078 = add64((int64_t) 1,
                                                                  j_294074);
                        int64_t min_arg_294079 = mul64(jump_t_289755,
                                                       defunc_0_m_fun_arg_294078);
                        int64_t min_res_294080 = smin64(i_289916,
                                                        min_arg_294079);
                        int64_t i64_arg_294081 = sub64(min_res_294080,
                                                       min_res_294077);
                        double i64_res_294082 = sitofp_i64_f64(i64_arg_294081);
                        int64_t i64_arg_294083 = sub64(i_295648,
                                                       min_res_294077);
                        double i64_res_294084 = sitofp_i64_f64(i64_arg_294083);
                        double u_294085 = i64_res_294084 / i64_res_294082;
                        double u2_294086 = u_294085 * u_294085;
                        double u3_294087 = u_294085 * u2_294086;
                        double x_294088 = 2.0 * u3_294087;
                        double y_294089 = 3.0 * u2_294086;
                        double x_294090 = x_294088 - y_294089;
                        double x_294091 = 1.0 + x_294090;
                        bool x_294092 = sle64((int64_t) 0, j_294074);
                        bool y_294093 = slt64(j_294074, t_n_m_289909);
                        bool bounds_check_294094 = x_294092 && y_294093;
                        bool index_certs_294095;
                        
                        if (!bounds_check_294094) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) j_294074,
                                          "] out of bounds for array of shape [",
                                          (long long) t_n_m_289909, "].",
                                          "-> #0  loess.fut:713:27-33\n   #1  loess.fut:726:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:723:3-727:9\n   #6  stl.fut:310:23-75\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:309:15-311:43\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_303079,
                                               "mem_303079") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303123,
                                               "ext_mem_303123") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303060,
                                               "ext_mem_303060") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303068,
                                               "ext_mem_303068") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301467,
                                               "mem_301467") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301456,
                                               "ext_mem_301456") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301393,
                                               "ext_mem_301393") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301401,
                                               "ext_mem_301401") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_300038,
                                               "ext_mem_300038") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299913,
                                               "ext_mem_299913") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299924,
                                               "ext_mem_299924") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297627,
                                               "mem_param_297627") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297619,
                                               "mem_param_297619") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303131,
                                               "ext_mem_303131") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303132,
                                               "ext_mem_303132") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297605,
                                               "mem_param_297605") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297597,
                                               "mem_param_297597") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297589,
                                               "mem_param_297589") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303656,
                                               "ext_mem_303656") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303657,
                                               "ext_mem_303657") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303658,
                                               "ext_mem_303658") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297581,
                                               "mem_297581") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297577,
                                               "mem_297577") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304403,
                                               "mem_out_304403") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304402,
                                               "mem_out_304402") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304401,
                                               "mem_out_304401") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_294096;
                        
                        y_294096 = ((double *) ext_mem_303068.mem)[i_295652 *
                                                                   t_n_m_289909 +
                                                                   j_294074];
                        
                        double x_294097 = x_294091 * y_294096;
                        double x_294098 = y_294089 - x_294088;
                        bool x_294099 = sle64((int64_t) 0,
                                              defunc_0_m_fun_arg_294078);
                        bool y_294100 = slt64(defunc_0_m_fun_arg_294078,
                                              t_n_m_289909);
                        bool bounds_check_294101 = x_294099 && y_294100;
                        bool index_certs_294102;
                        
                        if (!bounds_check_294101) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [",
                                          (long long) defunc_0_m_fun_arg_294078,
                                          "] out of bounds for array of shape [",
                                          (long long) t_n_m_289909, "].",
                                          "-> #0  loess.fut:714:27-37\n   #1  loess.fut:726:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:723:3-727:9\n   #6  stl.fut:310:23-75\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:309:15-311:43\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_303079,
                                               "mem_303079") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303123,
                                               "ext_mem_303123") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303060,
                                               "ext_mem_303060") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303068,
                                               "ext_mem_303068") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301467,
                                               "mem_301467") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301456,
                                               "ext_mem_301456") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301393,
                                               "ext_mem_301393") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_301401,
                                               "ext_mem_301401") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_300038,
                                               "ext_mem_300038") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299913,
                                               "ext_mem_299913") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_299924,
                                               "ext_mem_299924") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297627,
                                               "mem_param_297627") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297619,
                                               "mem_param_297619") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303131,
                                               "ext_mem_303131") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303132,
                                               "ext_mem_303132") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297605,
                                               "mem_param_297605") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297597,
                                               "mem_param_297597") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297589,
                                               "mem_param_297589") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303656,
                                               "ext_mem_303656") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303657,
                                               "ext_mem_303657") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303658,
                                               "ext_mem_303658") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297581,
                                               "mem_297581") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297577,
                                               "mem_297577") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304403,
                                               "mem_out_304403") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304402,
                                               "mem_out_304402") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304401,
                                               "mem_out_304401") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_294103;
                        
                        y_294103 = ((double *) ext_mem_303068.mem)[i_295652 *
                                                                   t_n_m_289909 +
                                                                   defunc_0_m_fun_arg_294078];
                        
                        double y_294104 = x_294098 * y_294103;
                        double x_294105 = x_294097 + y_294104;
                        double y_294106 = 2.0 * u2_294086;
                        double x_294107 = u3_294087 - y_294106;
                        double x_294108 = u_294085 + x_294107;
                        double y_294109;
                        
                        y_294109 = ((double *) ext_mem_303060.mem)[i_295652 *
                                                                   t_n_m_289909 +
                                                                   j_294074];
                        
                        double x_294110 = x_294108 * y_294109;
                        double y_294111 = i64_res_294082 * x_294110;
                        double x_294112 = x_294105 + y_294111;
                        double x_294113 = u3_294087 - u2_294086;
                        double y_294114;
                        
                        y_294114 = ((double *) ext_mem_303060.mem)[i_295652 *
                                                                   t_n_m_289909 +
                                                                   defunc_0_m_fun_arg_294078];
                        
                        double x_294115 = x_294113 * y_294114;
                        double y_294116 = i64_res_294082 * x_294115;
                        double defunc_4_interpolate_proc_res_294117 = x_294112 +
                               y_294116;
                        
                        ((double *) mem_303079.mem)[i_295652 * n_289745 +
                                                    i_295648] =
                            defunc_4_interpolate_proc_res_294117;
                    }
                }
                if (memblock_set(ctx, &ext_mem_303123, &mem_303079,
                                 "mem_303079") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_303079, "mem_303079") != 0)
                    return 1;
            } else {
                bool dim_match_294119 = n_289745 == t_n_m_289909;
                bool empty_or_match_cert_294120;
                
                if (!dim_match_294119) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Value of (core language) shape (",
                                  (long long) partition_sizze_289836, ", ",
                                  (long long) t_n_m_289909,
                                  ") cannot match shape of type `[",
                                  (long long) partition_sizze_289836, "][",
                                  (long long) n_289745, "]t`.",
                                  "-> #0  stl.fut:313:15-36\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_303123,
                                       "ext_mem_303123") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303060,
                                       "ext_mem_303060") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303068,
                                       "ext_mem_303068") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_301467, "mem_301467") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301456,
                                       "ext_mem_301456") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301393,
                                       "ext_mem_301393") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301401,
                                       "ext_mem_301401") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_300038,
                                       "ext_mem_300038") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299913,
                                       "ext_mem_299913") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_299924,
                                       "ext_mem_299924") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297627,
                                       "mem_param_297627") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297619,
                                       "mem_param_297619") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303131,
                                       "ext_mem_303131") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303132,
                                       "ext_mem_303132") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297605,
                                       "mem_param_297605") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297597,
                                       "mem_param_297597") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297589,
                                       "mem_param_297589") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303656,
                                       "ext_mem_303656") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303657,
                                       "ext_mem_303657") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303658,
                                       "ext_mem_303658") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_303123, &ext_mem_303068,
                                 "ext_mem_303068") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_303060, "ext_mem_303060") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303068, "ext_mem_303068") != 0)
                return 1;
            
            int64_t ctx_param_ext_tmp_304485 = ext_303127;
            int64_t ctx_param_ext_tmp_304486 = ext_303126;
            struct memblock mem_param_tmp_304487;
            
            mem_param_tmp_304487.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_304487, &mem_301467,
                             "mem_301467") != 0)
                return 1;
            
            struct memblock mem_param_tmp_304488;
            
            mem_param_tmp_304488.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_304488, &ext_mem_303123,
                             "ext_mem_303123") != 0)
                return 1;
            ctx_param_ext_297621 = ctx_param_ext_tmp_304485;
            ctx_param_ext_297623 = ctx_param_ext_tmp_304486;
            if (memblock_set(ctx, &mem_param_297619, &mem_param_tmp_304487,
                             "mem_param_tmp_304487") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_297627, &mem_param_tmp_304488,
                             "mem_param_tmp_304488") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_304488,
                               "mem_param_tmp_304488") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_304487,
                               "mem_param_tmp_304487") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303123, "ext_mem_303123") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303060, "ext_mem_303060") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303068, "ext_mem_303068") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_301467, "mem_301467") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_301456, "ext_mem_301456") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_301393, "ext_mem_301393") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_301401, "ext_mem_301401") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_300038, "ext_mem_300038") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_299913, "ext_mem_299913") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_299924, "ext_mem_299924") != 0)
                return 1;
        }
        ext_303138 = ctx_param_ext_297621;
        ext_303136 = ctx_param_ext_297623;
        if (memblock_set(ctx, &ext_mem_303132, &mem_param_297619,
                         "mem_param_297619") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_303131, &mem_param_297627,
                         "mem_param_297627") != 0)
            return 1;
        
        bool cond_294122 = slt64(i_outer_290445, y_290357);
        int64_t ext_303655;
        
        if (cond_294122) {
            ext_303655 = partition_sizze_289836;
        } else {
            ext_303655 = ctx_param_ext_297602;
        }
        
        int64_t ext_303654;
        
        if (cond_294122) {
            ext_303654 = n_289745;
        } else {
            ext_303654 = ctx_param_ext_297604;
        }
        
        int64_t ext_303653;
        
        if (cond_294122) {
            ext_303653 = partition_sizze_289836;
        } else {
            ext_303653 = ctx_param_ext_297598;
        }
        
        int64_t ext_303652;
        
        if (cond_294122) {
            ext_303652 = n_289745;
        } else {
            ext_303652 = ctx_param_ext_297599;
        }
        
        int64_t ext_303651;
        
        if (cond_294122) {
            ext_303651 = n_289745;
        } else {
            ext_303651 = ctx_param_ext_297601;
        }
        
        int64_t ext_303650;
        
        if (cond_294122) {
            ext_303650 = (int64_t) 1;
        } else {
            ext_303650 = ctx_param_ext_297603;
        }
        
        int64_t ext_303649;
        
        if (cond_294122) {
            ext_303649 = (int64_t) 0;
        } else {
            ext_303649 = ctx_param_ext_297600;
        }
        
        struct memblock ext_mem_303648;
        
        ext_mem_303648.references = NULL;
        if (cond_294122) {
            if (mem_303150_cached_sizze_305078 < (size_t) bytes_296792) {
                mem_303150 = realloc(mem_303150, bytes_296792);
                mem_303150_cached_sizze_305078 = bytes_296792;
            }
            if (mem_303154_cached_sizze_305079 < (size_t) bytes_296792) {
                mem_303154 = realloc(mem_303154, bytes_296792);
                mem_303154_cached_sizze_305079 = bytes_296792;
            }
            for (int64_t i_295666 = 0; i_295666 < partition_sizze_289836;
                 i_295666++) {
                for (int64_t i_295656 = 0; i_295656 < n_289745; i_295656++) {
                    float x_294131;
                    
                    x_294131 = ((float *) mem_296753)[i_295666 * n_289745 +
                                                      i_295656];
                    
                    double x_294132;
                    
                    x_294132 = ((double *) ext_mem_303132.mem)[i_295666 *
                                                               n_289745 +
                                                               i_295656];
                    
                    double x_294133;
                    
                    x_294133 = ((double *) ext_mem_303131.mem)[i_295666 *
                                                               ext_303136 +
                                                               i_295656];
                    
                    double f32_res_294134 = fpconv_f32_f64(x_294131);
                    double x_294135 = f32_res_294134 - x_294132;
                    double defunc_2_f_res_294136 = x_294135 - x_294133;
                    bool isnan_res_294137;
                    
                    isnan_res_294137 = futrts_isnan64(defunc_2_f_res_294136);
                    
                    double defunc_0_f_res_294138;
                    
                    if (isnan_res_294137) {
                        defunc_0_f_res_294138 = defunc_2_f_res_294136;
                    } else {
                        double abs_res_294139 = fabs(defunc_2_f_res_294136);
                        
                        defunc_0_f_res_294138 = abs_res_294139;
                    }
                    ((double *) mem_303154)[i_295666 * n_289745 + i_295656] =
                        defunc_0_f_res_294138;
                }
                for (int64_t i_295660 = 0; i_295660 < n_289745; i_295660++) {
                    int64_t x_294141;
                    
                    x_294141 = ((int64_t *) mem_296793)[i_295666 * n_289745 +
                                                        i_295660];
                    
                    bool cond_294142 = sle64((int64_t) 0, x_294141);
                    double defunc_0_f_res_294143;
                    
                    if (cond_294142) {
                        bool y_294144 = slt64(x_294141, n_289745);
                        bool bounds_check_294145 = cond_294142 && y_294144;
                        bool index_certs_294146;
                        
                        if (!bounds_check_294145) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) x_294141,
                                          "] out of bounds for array of shape [",
                                          (long long) n_289745, "].",
                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:340:21-49\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:338:13-341:35\n   #6  stl.fut:419:61-435:77\n   #7  stl.fut:463:3-479:36\n   #8  stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_303648,
                                               "ext_mem_303648") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297627,
                                               "mem_param_297627") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297619,
                                               "mem_param_297619") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303131,
                                               "ext_mem_303131") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303132,
                                               "ext_mem_303132") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297605,
                                               "mem_param_297605") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297597,
                                               "mem_param_297597") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297589,
                                               "mem_param_297589") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303656,
                                               "ext_mem_303656") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303657,
                                               "ext_mem_303657") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303658,
                                               "ext_mem_303658") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297581,
                                               "mem_297581") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297577,
                                               "mem_297577") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304403,
                                               "mem_out_304403") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304402,
                                               "mem_out_304402") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304401,
                                               "mem_out_304401") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double defunc_0_f_res_t_res_294147;
                        
                        defunc_0_f_res_t_res_294147 =
                            ((double *) mem_303154)[i_295666 * n_289745 +
                                                    x_294141];
                        defunc_0_f_res_294143 = defunc_0_f_res_t_res_294147;
                    } else {
                        defunc_0_f_res_294143 = INFINITY;
                    }
                    ((double *) mem_303150)[i_295666 * n_289745 + i_295660] =
                        defunc_0_f_res_294143;
                }
            }
            if (mem_303243_cached_sizze_305080 < (size_t) bytes_296795) {
                mem_303243 = realloc(mem_303243, bytes_296795);
                mem_303243_cached_sizze_305080 = bytes_296795;
            }
            for (int64_t i_295674 = 0; i_295674 < partition_sizze_289836;
                 i_295674++) {
                double defunc_0_f_res_294151;
                double defunc_0_f_res_294152;
                double redout_295669;
                double redout_295670;
                
                redout_295669 = INFINITY;
                redout_295670 = -INFINITY;
                for (int64_t i_295671 = 0; i_295671 < n_289745; i_295671++) {
                    double x_294159;
                    
                    x_294159 = ((double *) mem_303150)[i_295674 * n_289745 +
                                                       i_295671];
                    
                    double defunc_1_op_res_294155 = fmin64(x_294159,
                                                           redout_295669);
                    double defunc_1_op_res_294158 = fmax64(x_294159,
                                                           redout_295670);
                    double redout_tmp_304872 = defunc_1_op_res_294155;
                    double redout_tmp_304873 = defunc_1_op_res_294158;
                    
                    redout_295669 = redout_tmp_304872;
                    redout_295670 = redout_tmp_304873;
                }
                defunc_0_f_res_294151 = redout_295669;
                defunc_0_f_res_294152 = redout_295670;
                
                double defunc_1_f_res_294160 = defunc_0_f_res_294151 +
                       defunc_0_f_res_294152;
                double defunc_0_f_res_294161 = defunc_1_f_res_294160 / 2.0;
                
                ((double *) mem_303243)[i_295674] = defunc_0_f_res_294161;
            }
            
            int32_t i64_res_294163 = sext_i64_i32(n_289745);
            struct memblock mem_303258;
            
            mem_303258.references = NULL;
            if (memblock_alloc(ctx, &mem_303258, bytes_303257, "mem_303258")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_304874 = 0; i_304874 < partition_sizze_289836;
                 i_304874++) {
                ((int32_t *) mem_303258.mem)[i_304874] = i64_res_294163;
            }
            if (mem_303262_cached_sizze_305081 < (size_t) bytes_303261) {
                mem_303262 = realloc(mem_303262, bytes_303261);
                mem_303262_cached_sizze_305081 = bytes_303261;
            }
            if (mem_303265_cached_sizze_305082 < (size_t) bytes_296795) {
                mem_303265 = realloc(mem_303265, bytes_296795);
                mem_303265_cached_sizze_305082 = bytes_296795;
            }
            if (mem_303285_cached_sizze_305083 < (size_t) bytes_303284) {
                mem_303285 = realloc(mem_303285, bytes_303284);
                mem_303285_cached_sizze_305083 = bytes_303284;
            }
            for (int64_t i_295680 = 0; i_295680 < partition_sizze_289836;
                 i_295680++) {
                int64_t x_294168;
                
                x_294168 = ((int64_t *) mem_296796)[i_295680];
                
                int64_t defunc_0_f_res_294170 = sdiv64(x_294168, (int64_t) 2);
                int32_t i64_res_294171 = sext_i64_i32(i_295680);
                int32_t defunc_0_f_res_294172 = add32(1, i64_res_294171);
                
                for (int64_t i_304877 = 0; i_304877 < n_289745; i_304877++) {
                    ((int32_t *) mem_303285)[i_304877] = defunc_0_f_res_294172;
                }
                if (n_289745 * (int64_t) 4 > 0)
                    memmove(mem_303262 + i_295680 * n_289745 * (int64_t) 4,
                            mem_303285 + (int64_t) 0, n_289745 * (int64_t) 4);
                ((int64_t *) mem_303265)[i_295680] = defunc_0_f_res_294170;
            }
            
            struct memblock mem_303301;
            
            mem_303301.references = NULL;
            if (memblock_alloc(ctx, &mem_303301, bytes_303300, "mem_303301")) {
                err = 1;
                goto cleanup;
            }
            if (replicate_arg_290352 * (int64_t) 8 > 0)
                memmove(mem_303301.mem + (int64_t) 0, mem_303150 + (int64_t) 0,
                        replicate_arg_290352 * (int64_t) 8);
            
            struct memblock mem_303304;
            
            mem_303304.references = NULL;
            if (memblock_alloc(ctx, &mem_303304, bytes_303257, "mem_303304")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_295685 = 0; i_295685 < partition_sizze_289836;
                 i_295685++) {
                int64_t x_294178;
                
                x_294178 = ((int64_t *) mem_303265)[i_295685];
                
                int32_t defunc_0_f_res_294179 = sext_i64_i32(x_294178);
                
                ((int32_t *) mem_303304.mem)[i_295685] = defunc_0_f_res_294179;
            }
            
            struct memblock mem_303319;
            
            mem_303319.references = NULL;
            if (memblock_alloc(ctx, &mem_303319, bytes_303318, "mem_303319")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_304879 = 0; i_304879 < replicate_arg_290352;
                 i_304879++) {
                ((int32_t *) mem_303319.mem)[i_304879] = 0;
            }
            
            struct memblock mem_303322;
            
            mem_303322.references = NULL;
            if (memblock_alloc(ctx, &mem_303322, bytes_303300, "mem_303322")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_304880 = 0; i_304880 < replicate_arg_290352;
                 i_304880++) {
                ((double *) mem_303322.mem)[i_304880] = 0.0;
            }
            if (mem_303325_cached_sizze_305084 < (size_t) bytes_296795) {
                mem_303325 = realloc(mem_303325, bytes_296795);
                mem_303325_cached_sizze_305084 = bytes_296795;
            }
            for (int64_t i_304881 = 0; i_304881 < partition_sizze_289836;
                 i_304881++) {
                ((double *) mem_303325)[i_304881] = 0.0;
            }
            
            struct memblock mem_303338;
            
            mem_303338.references = NULL;
            if (memblock_alloc(ctx, &mem_303338, bytes_303318, "mem_303338")) {
                err = 1;
                goto cleanup;
            }
            if (replicate_arg_290352 * (int64_t) 4 > 0)
                memmove(mem_303338.mem + (int64_t) 0, mem_303262 + (int64_t) 0,
                        replicate_arg_290352 * (int64_t) 4);
            if (mem_303379_cached_sizze_305085 < (size_t) bytes_296795) {
                mem_303379 = realloc(mem_303379, bytes_296795);
                mem_303379_cached_sizze_305085 = bytes_296795;
            }
            if (mem_303394_cached_sizze_305086 < (size_t) bytes_303393) {
                mem_303394 = realloc(mem_303394, bytes_303393);
                mem_303394_cached_sizze_305086 = bytes_303393;
            }
            if (mem_303410_cached_sizze_305087 < (size_t) bytes_303257) {
                mem_303410 = realloc(mem_303410, bytes_303257);
                mem_303410_cached_sizze_305087 = bytes_303257;
            }
            if (mem_303412_cached_sizze_305088 < (size_t) bytes_303411) {
                mem_303412 = realloc(mem_303412, bytes_303411);
                mem_303412_cached_sizze_305088 = bytes_303411;
            }
            if (mem_303415_cached_sizze_305089 < (size_t) bytes_303257) {
                mem_303415 = realloc(mem_303415, bytes_303257);
                mem_303415_cached_sizze_305089 = bytes_303257;
            }
            
            int64_t ext_303547;
            int64_t ext_303546;
            int64_t ext_303545;
            int64_t ext_303544;
            int64_t ext_303543;
            int64_t ext_303542;
            int64_t ext_303541;
            int64_t ext_303540;
            int64_t ext_303539;
            int64_t ext_303538;
            int64_t ext_303537;
            int64_t ext_303536;
            int64_t ext_303535;
            int64_t ext_303534;
            int64_t ext_303533;
            int64_t ext_303532;
            struct memblock ext_mem_303527;
            
            ext_mem_303527.references = NULL;
            
            struct memblock ext_mem_303526;
            
            ext_mem_303526.references = NULL;
            
            struct memblock ext_mem_303525;
            
            ext_mem_303525.references = NULL;
            
            struct memblock ext_mem_303524;
            
            ext_mem_303524.references = NULL;
            
            struct memblock ext_mem_303523;
            
            ext_mem_303523.references = NULL;
            
            struct memblock ext_mem_303522;
            
            ext_mem_303522.references = NULL;
            
            int64_t rankSearchBatch_res_294185;
            int64_t rankSearchBatch_res_294186;
            int64_t rankSearchBatch_res_294187;
            bool rankSearchBatch_res_294188;
            int64_t rankSearchBatch_res_294195;
            int64_t loopz2088U_294197;
            int64_t loopz2089U_294198;
            int64_t loopz2081Uz2080U_294199;
            bool loop_while_294200;
            int64_t q_294207;
            struct memblock mem_param_303330;
            
            mem_param_303330.references = NULL;
            
            struct memblock mem_param_303335;
            
            mem_param_303335.references = NULL;
            
            int64_t ctx_param_ext_303340;
            int64_t ctx_param_ext_303341;
            int64_t ctx_param_ext_303342;
            int64_t ctx_param_ext_303343;
            struct memblock mem_param_303344;
            
            mem_param_303344.references = NULL;
            
            int64_t ctx_param_ext_303345;
            int64_t ctx_param_ext_303346;
            int64_t ctx_param_ext_303347;
            int64_t ctx_param_ext_303348;
            struct memblock mem_param_303349;
            
            mem_param_303349.references = NULL;
            
            int64_t ctx_param_ext_303350;
            int64_t ctx_param_ext_303351;
            int64_t ctx_param_ext_303352;
            int64_t ctx_param_ext_303353;
            struct memblock mem_param_303354;
            
            mem_param_303354.references = NULL;
            
            int64_t ctx_param_ext_303355;
            int64_t ctx_param_ext_303356;
            int64_t ctx_param_ext_303357;
            int64_t ctx_param_ext_303358;
            struct memblock mem_param_303359;
            
            mem_param_303359.references = NULL;
            ctx_param_ext_303340 = replicate_arg_290352;
            ctx_param_ext_303341 = (int64_t) 0;
            ctx_param_ext_303342 = (int64_t) 1;
            ctx_param_ext_303343 = replicate_arg_290352;
            ctx_param_ext_303345 = replicate_arg_290352;
            ctx_param_ext_303346 = (int64_t) 0;
            ctx_param_ext_303347 = (int64_t) 1;
            ctx_param_ext_303348 = replicate_arg_290352;
            ctx_param_ext_303350 = replicate_arg_290352;
            ctx_param_ext_303351 = (int64_t) 0;
            ctx_param_ext_303352 = (int64_t) 1;
            ctx_param_ext_303353 = replicate_arg_290352;
            ctx_param_ext_303355 = replicate_arg_290352;
            ctx_param_ext_303356 = (int64_t) 0;
            ctx_param_ext_303357 = (int64_t) 1;
            ctx_param_ext_303358 = replicate_arg_290352;
            if (memblock_set(ctx, &mem_param_303330, &mem_303304,
                             "mem_303304") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_303335, &mem_303258,
                             "mem_303258") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_303344, &mem_303338,
                             "mem_303338") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_303349, &mem_303319,
                             "mem_303319") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_303354, &mem_303301,
                             "mem_303301") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_303359, &mem_303322,
                             "mem_303322") != 0)
                return 1;
            loopz2088U_294197 = replicate_arg_290352;
            loopz2089U_294198 = replicate_arg_290352;
            loopz2081Uz2080U_294199 = replicate_arg_290352;
            loop_while_294200 = loop_cond_294183;
            q_294207 = (int64_t) 0;
            while (loop_while_294200) {
                bool cond_294209 = q_294207 == (int64_t) 0;
                int32_t inpacc_294210;
                int32_t inpacc_294213 = 0;
                
                for (int64_t i_295699 = 0; i_295699 < partition_sizze_289836;
                     i_295699++) {
                    int32_t x_295801;
                    
                    x_295801 = ((int32_t *) mem_param_303335.mem)[i_295699];
                    
                    int32_t defunc_1_op_res_294225 = add32(inpacc_294213,
                                                           x_295801);
                    double defunc_1_f_res_295811;
                    
                    if (cond_294209) {
                        double defunc_1_f_res_t_res_295816;
                        
                        defunc_1_f_res_t_res_295816 =
                            ((double *) mem_303243)[i_295699];
                        defunc_1_f_res_295811 = defunc_1_f_res_t_res_295816;
                    } else {
                        bool cond_295817 = defunc_1_op_res_294225 == 0;
                        double defunc_1_f_res_f_res_295818;
                        
                        if (cond_295817) {
                            defunc_1_f_res_f_res_295818 = 0.0;
                        } else {
                            int32_t i_295819 = sub32(defunc_1_op_res_294225, 1);
                            int64_t i_295820 = sext_i32_i64(i_295819);
                            bool x_295821 = sle64((int64_t) 0, i_295820);
                            bool y_295822 = slt64(i_295820, loopz2089U_294198);
                            bool bounds_check_295823 = x_295821 && y_295822;
                            bool index_certs_295824;
                            
                            if (!bounds_check_295823) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) i_295820,
                                              "] out of bounds for array of shape [",
                                              (long long) loopz2089U_294198,
                                              "].",
                                              "-> #0  median.fut:35:37-46\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:9:27-38\n   #4  median.fut:30:13-36:15\n   #5  median.fut:112:18-67\n   #6  stl.fut:343:23-52\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                if (memblock_unref(ctx, &mem_param_303359,
                                                   "mem_param_303359") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_303354,
                                                   "mem_param_303354") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_303349,
                                                   "mem_param_303349") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_303344,
                                                   "mem_param_303344") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_303335,
                                                   "mem_param_303335") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_303330,
                                                   "mem_param_303330") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303522,
                                                   "ext_mem_303522") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303523,
                                                   "ext_mem_303523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303524,
                                                   "ext_mem_303524") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303525,
                                                   "ext_mem_303525") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303526,
                                                   "ext_mem_303526") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303527,
                                                   "ext_mem_303527") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_303338,
                                                   "mem_303338") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_303322,
                                                   "mem_303322") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_303319,
                                                   "mem_303319") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_303304,
                                                   "mem_303304") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_303301,
                                                   "mem_303301") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_303258,
                                                   "mem_303258") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303648,
                                                   "ext_mem_303648") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297627,
                                                   "mem_param_297627") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297619,
                                                   "mem_param_297619") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303131,
                                                   "ext_mem_303131") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303132,
                                                   "ext_mem_303132") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297605,
                                                   "mem_param_297605") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297597,
                                                   "mem_param_297597") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297589,
                                                   "mem_param_297589") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303656,
                                                   "ext_mem_303656") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303657,
                                                   "ext_mem_303657") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303658,
                                                   "ext_mem_303658") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_297581,
                                                   "mem_297581") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_297577,
                                                   "mem_297577") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_304403,
                                                   "mem_out_304403") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_304402,
                                                   "mem_out_304402") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_304401,
                                                   "mem_out_304401") != 0)
                                    return 1;
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            double defunc_1_f_res_f_res_f_res_295825;
                            
                            defunc_1_f_res_f_res_f_res_295825 =
                                ((double *) mem_param_303354.mem)[ctx_param_ext_303351 +
                                                                  i_295820 *
                                                                  ctx_param_ext_303352];
                            defunc_1_f_res_f_res_295818 =
                                defunc_1_f_res_f_res_f_res_295825;
                        }
                        defunc_1_f_res_295811 = defunc_1_f_res_f_res_295818;
                    }
                    ((double *) mem_303379)[i_295699] = defunc_1_f_res_295811;
                    
                    int32_t inpacc_tmp_304916 = defunc_1_op_res_294225;
                    
                    inpacc_294213 = inpacc_tmp_304916;
                }
                inpacc_294210 = inpacc_294213;
                for (int64_t i_304918 = 0; i_304918 < replicate_arg_294184;
                     i_304918++) {
                    ((int32_t *) mem_303394)[i_304918] = 0;
                }
                for (int64_t iter_295701 = 0; iter_295701 < loopz2089U_294198;
                     iter_295701++) {
                    int32_t pixel_295703;
                    
                    pixel_295703 =
                        ((int32_t *) mem_param_303344.mem)[ctx_param_ext_303341 +
                                                           iter_295701 *
                                                           ctx_param_ext_303342];
                    
                    double pixel_295704;
                    
                    pixel_295704 =
                        ((double *) mem_param_303354.mem)[ctx_param_ext_303351 +
                                                          iter_295701 *
                                                          ctx_param_ext_303352];
                    
                    int32_t sgmind_294257 = sub32(pixel_295703, 1);
                    int64_t sgmind_294258 = sext_i32_i64(sgmind_294257);
                    bool x_294259 = sle64((int64_t) 0, sgmind_294258);
                    bool y_294260 = slt64(sgmind_294258,
                                          partition_sizze_289836);
                    bool bounds_check_294261 = x_294259 && y_294260;
                    bool index_certs_294262;
                    
                    if (!bounds_check_294261) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) sgmind_294258,
                                      "] out of bounds for array of shape [",
                                      (long long) partition_sizze_289836, "].",
                                      "-> #0  median.fut:43:34-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:9:27-38\n   #4  median.fut:40:13-49:19\n   #5  median.fut:112:18-67\n   #6  stl.fut:343:23-52\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_param_303359,
                                           "mem_param_303359") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_303354,
                                           "mem_param_303354") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_303349,
                                           "mem_param_303349") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_303344,
                                           "mem_param_303344") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_303335,
                                           "mem_param_303335") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_303330,
                                           "mem_param_303330") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303522,
                                           "ext_mem_303522") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303523,
                                           "ext_mem_303523") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303524,
                                           "ext_mem_303524") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303525,
                                           "ext_mem_303525") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303526,
                                           "ext_mem_303526") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303527,
                                           "ext_mem_303527") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303338, "mem_303338") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303322, "mem_303322") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303319, "mem_303319") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303304, "mem_303304") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303301, "mem_303301") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303258, "mem_303258") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303648,
                                           "ext_mem_303648") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297627,
                                           "mem_param_297627") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297619,
                                           "mem_param_297619") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303131,
                                           "ext_mem_303131") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303132,
                                           "ext_mem_303132") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297605,
                                           "mem_param_297605") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297597,
                                           "mem_param_297597") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297589,
                                           "mem_param_297589") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303656,
                                           "ext_mem_303656") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303657,
                                           "ext_mem_303657") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303658,
                                           "ext_mem_303658") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304403,
                                           "mem_out_304403") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304402,
                                           "mem_out_304402") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304401,
                                           "mem_out_304401") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    double pivot_294263;
                    
                    pivot_294263 = ((double *) mem_303379)[sgmind_294258];
                    
                    int32_t h_ind_294264 = shl32(sgmind_294257, 1);
                    bool cond_294265 = pixel_295704 < pivot_294263;
                    int32_t binop_p_294266;
                    
                    if (cond_294265) {
                        binop_p_294266 = h_ind_294264;
                    } else {
                        bool cond_294267 = pivot_294263 == pixel_295704;
                        int32_t binop_p_f_res_294268;
                        
                        if (cond_294267) {
                            int32_t binop_p_f_res_t_res_294269 = add32(1,
                                                                       h_ind_294264);
                            
                            binop_p_f_res_294268 = binop_p_f_res_t_res_294269;
                        } else {
                            binop_p_f_res_294268 = -1;
                        }
                        binop_p_294266 = binop_p_f_res_294268;
                    }
                    
                    int64_t defunc_0_f_res_294270 =
                            sext_i32_i64(binop_p_294266);
                    bool less_than_zzero_295706 = slt64(defunc_0_f_res_294270,
                                                        (int64_t) 0);
                    bool greater_than_sizze_295707 = sle64(replicate_arg_294184,
                                                           defunc_0_f_res_294270);
                    bool outside_bounds_dim_295708 = less_than_zzero_295706 ||
                         greater_than_sizze_295707;
                    
                    if (!outside_bounds_dim_295708) {
                        int32_t read_hist_295710;
                        
                        read_hist_295710 =
                            ((int32_t *) mem_303394)[defunc_0_f_res_294270];
                        
                        int32_t defunc_1_f_res_294253 = add32(1,
                                                              read_hist_295710);
                        
                        ((int32_t *) mem_303394)[defunc_0_f_res_294270] =
                            defunc_1_f_res_294253;
                    }
                }
                for (int64_t i_295719 = 0; i_295719 < partition_sizze_289836;
                     i_295719++) {
                    int32_t x_294274;
                    
                    x_294274 = ((int32_t *) mem_param_303330.mem)[i_295719];
                    
                    bool cond_294276 = slt32(x_294274, 0);
                    int32_t defunc_1_f_res_294277;
                    int8_t defunc_1_f_res_294278;
                    int32_t defunc_1_f_res_294279;
                    
                    if (cond_294276) {
                        defunc_1_f_res_294277 = 0;
                        defunc_1_f_res_294278 = (int8_t) 3;
                        defunc_1_f_res_294279 = -1;
                    } else {
                        int64_t i_294280 = shl64(i_295719, (int64_t) 1);
                        bool x_294281 = sle64((int64_t) 0, i_294280);
                        bool y_294282 = slt64(i_294280, replicate_arg_294184);
                        bool bounds_check_294283 = x_294281 && y_294282;
                        bool index_certs_294284;
                        
                        if (!bounds_check_294283) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_294280,
                                          "] out of bounds for array of shape [",
                                          (long long) replicate_arg_294184,
                                          "].",
                                          "-> #0  median.fut:57:35-46\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:9:27-38\n   #4  median.fut:54:11-63:13\n   #5  median.fut:112:18-67\n   #6  stl.fut:343:23-52\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_param_303359,
                                               "mem_param_303359") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_303354,
                                               "mem_param_303354") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_303349,
                                               "mem_param_303349") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_303344,
                                               "mem_param_303344") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_303335,
                                               "mem_param_303335") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_303330,
                                               "mem_param_303330") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303522,
                                               "ext_mem_303522") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303523,
                                               "ext_mem_303523") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303524,
                                               "ext_mem_303524") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303525,
                                               "ext_mem_303525") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303526,
                                               "ext_mem_303526") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303527,
                                               "ext_mem_303527") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303338,
                                               "mem_303338") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303322,
                                               "mem_303322") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303319,
                                               "mem_303319") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303304,
                                               "mem_303304") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303301,
                                               "mem_303301") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303258,
                                               "mem_303258") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303648,
                                               "ext_mem_303648") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297627,
                                               "mem_param_297627") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297619,
                                               "mem_param_297619") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303131,
                                               "ext_mem_303131") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303132,
                                               "ext_mem_303132") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297605,
                                               "mem_param_297605") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297597,
                                               "mem_param_297597") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_297589,
                                               "mem_param_297589") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303656,
                                               "ext_mem_303656") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303657,
                                               "ext_mem_303657") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303658,
                                               "ext_mem_303658") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297581,
                                               "mem_297581") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_297577,
                                               "mem_297577") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304403,
                                               "mem_out_304403") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304402,
                                               "mem_out_304402") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_304401,
                                               "mem_out_304401") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int32_t lt_len_294285;
                        
                        lt_len_294285 = ((int32_t *) mem_303394)[i_294280];
                        
                        bool cond_294286 = slt32(x_294274, lt_len_294285);
                        int32_t defunc_1_f_res_f_res_294287;
                        int8_t defunc_1_f_res_f_res_294288;
                        int32_t defunc_1_f_res_f_res_294289;
                        
                        if (cond_294286) {
                            defunc_1_f_res_f_res_294287 = lt_len_294285;
                            defunc_1_f_res_f_res_294288 = (int8_t) 0;
                            defunc_1_f_res_f_res_294289 = x_294274;
                        } else {
                            int64_t i_294290 = add64((int64_t) 1, i_294280);
                            bool x_294291 = sle64((int64_t) 0, i_294290);
                            bool y_294292 = slt64(i_294290,
                                                  replicate_arg_294184);
                            bool bounds_check_294293 = x_294291 && y_294292;
                            bool index_certs_294294;
                            
                            if (!bounds_check_294293) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) i_294290,
                                              "] out of bounds for array of shape [",
                                              (long long) replicate_arg_294184,
                                              "].",
                                              "-> #0  median.fut:59:40-58\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:9:27-38\n   #4  median.fut:54:11-63:13\n   #5  median.fut:112:18-67\n   #6  stl.fut:343:23-52\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                if (memblock_unref(ctx, &mem_param_303359,
                                                   "mem_param_303359") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_303354,
                                                   "mem_param_303354") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_303349,
                                                   "mem_param_303349") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_303344,
                                                   "mem_param_303344") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_303335,
                                                   "mem_param_303335") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_303330,
                                                   "mem_param_303330") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303522,
                                                   "ext_mem_303522") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303523,
                                                   "ext_mem_303523") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303524,
                                                   "ext_mem_303524") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303525,
                                                   "ext_mem_303525") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303526,
                                                   "ext_mem_303526") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303527,
                                                   "ext_mem_303527") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_303338,
                                                   "mem_303338") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_303322,
                                                   "mem_303322") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_303319,
                                                   "mem_303319") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_303304,
                                                   "mem_303304") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_303301,
                                                   "mem_303301") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_303258,
                                                   "mem_303258") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303648,
                                                   "ext_mem_303648") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297627,
                                                   "mem_param_297627") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297619,
                                                   "mem_param_297619") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303131,
                                                   "ext_mem_303131") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303132,
                                                   "ext_mem_303132") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297605,
                                                   "mem_param_297605") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297597,
                                                   "mem_param_297597") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_297589,
                                                   "mem_param_297589") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303656,
                                                   "ext_mem_303656") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303657,
                                                   "ext_mem_303657") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_303658,
                                                   "ext_mem_303658") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_297581,
                                                   "mem_297581") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_297577,
                                                   "mem_297577") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_304403,
                                                   "mem_out_304403") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_304402,
                                                   "mem_out_304402") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_304401,
                                                   "mem_out_304401") != 0)
                                    return 1;
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int32_t eq_len_294295;
                            
                            eq_len_294295 = ((int32_t *) mem_303394)[i_294290];
                            
                            int32_t lteq_len_294296 = add32(lt_len_294285,
                                                            eq_len_294295);
                            bool cond_294297 = slt32(x_294274, lteq_len_294296);
                            int8_t defunc_1_f_res_f_res_f_res_294298;
                            
                            if (cond_294297) {
                                defunc_1_f_res_f_res_f_res_294298 = (int8_t) 1;
                            } else {
                                defunc_1_f_res_f_res_f_res_294298 = (int8_t) 2;
                            }
                            
                            int32_t defunc_1_f_res_f_res_f_res_294299;
                            int32_t defunc_1_f_res_f_res_f_res_294300;
                            
                            if (cond_294297) {
                                defunc_1_f_res_f_res_f_res_294299 = 0;
                                defunc_1_f_res_f_res_f_res_294300 = -1;
                            } else {
                                int32_t x_294305;
                                
                                x_294305 =
                                    ((int32_t *) mem_param_303335.mem)[i_295719];
                                
                                int32_t defunc_1_f_res_f_res_f_res_f_res_294306
                                        = sub32(x_294305, lteq_len_294296);
                                int32_t defunc_1_f_res_f_res_f_res_f_res_294307
                                        = sub32(x_294274, lteq_len_294296);
                                
                                defunc_1_f_res_f_res_f_res_294299 =
                                    defunc_1_f_res_f_res_f_res_f_res_294306;
                                defunc_1_f_res_f_res_f_res_294300 =
                                    defunc_1_f_res_f_res_f_res_f_res_294307;
                            }
                            defunc_1_f_res_f_res_294287 =
                                defunc_1_f_res_f_res_f_res_294299;
                            defunc_1_f_res_f_res_294288 =
                                defunc_1_f_res_f_res_f_res_294298;
                            defunc_1_f_res_f_res_294289 =
                                defunc_1_f_res_f_res_f_res_294300;
                        }
                        defunc_1_f_res_294277 = defunc_1_f_res_f_res_294287;
                        defunc_1_f_res_294278 = defunc_1_f_res_f_res_294288;
                        defunc_1_f_res_294279 = defunc_1_f_res_f_res_294289;
                    }
                    ((int32_t *) mem_303410)[i_295719] = defunc_1_f_res_294277;
                    ((int8_t *) mem_303412)[i_295719] = defunc_1_f_res_294278;
                    ((int32_t *) mem_303415)[i_295719] = defunc_1_f_res_294279;
                }
                
                struct memblock mem_303454;
                
                mem_303454.references = NULL;
                if (memblock_alloc(ctx, &mem_303454, bytes_303257,
                                   "mem_303454")) {
                    err = 1;
                    goto cleanup;
                }
                if (partition_sizze_289836 * (int64_t) 4 > 0)
                    memmove(mem_303454.mem + (int64_t) 0, mem_303410 +
                            (int64_t) 0, partition_sizze_289836 * (int64_t) 4);
                
                struct memblock mem_303457;
                
                mem_303457.references = NULL;
                if (memblock_alloc(ctx, &mem_303457, bytes_303257,
                                   "mem_303457")) {
                    err = 1;
                    goto cleanup;
                }
                if (partition_sizze_289836 * (int64_t) 4 > 0)
                    memmove(mem_303457.mem + (int64_t) 0, mem_303415 +
                            (int64_t) 0, partition_sizze_289836 * (int64_t) 4);
                for (int64_t write_iter_295723 = 0; write_iter_295723 <
                     partition_sizze_289836; write_iter_295723++) {
                    int8_t write_iv_295726;
                    
                    write_iv_295726 =
                        ((int8_t *) mem_303412)[write_iter_295723];
                    
                    bool cond_294313 = write_iv_295726 == (int8_t) 1;
                    int64_t defunc_1_f_res_294314;
                    
                    if (cond_294313) {
                        defunc_1_f_res_294314 = write_iter_295723;
                    } else {
                        defunc_1_f_res_294314 = (int64_t) -1;
                    }
                    
                    double defunc_1_f_res_294315;
                    
                    if (cond_294313) {
                        double defunc_1_f_res_t_res_294320;
                        
                        defunc_1_f_res_t_res_294320 =
                            ((double *) mem_303379)[write_iter_295723];
                        defunc_1_f_res_294315 = defunc_1_f_res_t_res_294320;
                    } else {
                        defunc_1_f_res_294315 = 0.0;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_294314) &&
                        slt64(defunc_1_f_res_294314, partition_sizze_289836)) {
                        ((double *) mem_303325)[defunc_1_f_res_294314] =
                            defunc_1_f_res_294315;
                    }
                }
                
                int64_t bytes_303468 = smax64((int64_t) 0, loopz2089U_294198);
                
                if (mem_303469_cached_sizze_305090 < (size_t) bytes_303468) {
                    mem_303469 = realloc(mem_303469, bytes_303468);
                    mem_303469_cached_sizze_305090 = bytes_303468;
                }
                for (int64_t i_295730 = 0; i_295730 < loopz2089U_294198;
                     i_295730++) {
                    int32_t x_294322;
                    
                    x_294322 =
                        ((int32_t *) mem_param_303344.mem)[ctx_param_ext_303341 +
                                                           i_295730 *
                                                           ctx_param_ext_303342];
                    
                    double x_294323;
                    
                    x_294323 =
                        ((double *) mem_param_303354.mem)[ctx_param_ext_303351 +
                                                          i_295730 *
                                                          ctx_param_ext_303352];
                    
                    int32_t sgmind_294324 = sub32(x_294322, 1);
                    int64_t sgmind_294325 = sext_i32_i64(sgmind_294324);
                    bool x_294326 = sle64((int64_t) 0, sgmind_294325);
                    bool y_294327 = slt64(sgmind_294325,
                                          partition_sizze_289836);
                    bool bounds_check_294328 = x_294326 && y_294327;
                    bool index_certs_294329;
                    
                    if (!bounds_check_294328) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) sgmind_294325,
                                      "] out of bounds for array of shape [",
                                      (long long) partition_sizze_289836, "].",
                                      "-> #0  median.fut:80:23-36\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:84:21-39\n   #4  median.fut:112:18-67\n   #5  stl.fut:343:23-52\n   #6  stl.fut:419:61-435:77\n   #7  stl.fut:463:3-479:36\n   #8  stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_303457, "mem_303457") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303454, "mem_303454") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_303359,
                                           "mem_param_303359") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_303354,
                                           "mem_param_303354") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_303349,
                                           "mem_param_303349") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_303344,
                                           "mem_param_303344") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_303335,
                                           "mem_param_303335") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_303330,
                                           "mem_param_303330") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303522,
                                           "ext_mem_303522") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303523,
                                           "ext_mem_303523") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303524,
                                           "ext_mem_303524") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303525,
                                           "ext_mem_303525") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303526,
                                           "ext_mem_303526") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303527,
                                           "ext_mem_303527") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303338, "mem_303338") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303322, "mem_303322") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303319, "mem_303319") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303304, "mem_303304") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303301, "mem_303301") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303258, "mem_303258") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303648,
                                           "ext_mem_303648") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297627,
                                           "mem_param_297627") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297619,
                                           "mem_param_297619") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303131,
                                           "ext_mem_303131") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303132,
                                           "ext_mem_303132") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297605,
                                           "mem_param_297605") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297597,
                                           "mem_param_297597") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_297589,
                                           "mem_param_297589") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303656,
                                           "ext_mem_303656") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303657,
                                           "ext_mem_303657") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303658,
                                           "ext_mem_303658") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304403,
                                           "mem_out_304403") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304402,
                                           "mem_out_304402") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_304401,
                                           "mem_out_304401") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    double pivot_294330;
                    
                    pivot_294330 = ((double *) mem_303379)[sgmind_294325];
                    
                    int8_t kind_294331;
                    
                    kind_294331 = ((int8_t *) mem_303412)[sgmind_294325];
                    
                    bool cond_294332 = x_294323 < pivot_294330;
                    bool cond_t_res_294333 = kind_294331 == (int8_t) 0;
                    bool x_294334 = cond_294332 && cond_t_res_294333;
                    bool cond_294335 = pivot_294330 < x_294323;
                    bool defunc_1_f_res_f_res_t_res_294336 = kind_294331 ==
                         (int8_t) 2;
                    bool x_294337 = cond_294335 &&
                         defunc_1_f_res_f_res_t_res_294336;
                    bool x_294338 = !x_294334;
                    bool y_294339 = x_294337 && x_294338;
                    bool defunc_1_f_res_294340 = x_294334 || y_294339;
                    
                    ((bool *) mem_303469)[i_295730] = defunc_1_f_res_294340;
                }
                
                int64_t binop_y_303482 = (int64_t) 4 * loopz2089U_294198;
                int64_t bytes_303483 = smax64((int64_t) 0, binop_y_303482);
                
                if (mem_303484_cached_sizze_305091 < (size_t) bytes_303483) {
                    mem_303484 = realloc(mem_303484, bytes_303483);
                    mem_303484_cached_sizze_305091 = bytes_303483;
                }
                
                int32_t discard_295737;
                int32_t scanacc_295733 = 0;
                
                for (int64_t i_295735 = 0; i_295735 < loopz2089U_294198;
                     i_295735++) {
                    bool x_294346;
                    
                    x_294346 = ((bool *) mem_303469)[i_295735];
                    
                    int32_t defunc_0_f_res_294347 = btoi_bool_i32(x_294346);
                    int32_t defunc_1_op_res_294345 =
                            add32(defunc_0_f_res_294347, scanacc_295733);
                    
                    ((int32_t *) mem_303484)[i_295735] = defunc_1_op_res_294345;
                    
                    int32_t scanacc_tmp_304925 = defunc_1_op_res_294345;
                    
                    scanacc_295733 = scanacc_tmp_304925;
                }
                discard_295737 = scanacc_295733;
                
                int64_t i_294348 = sub64(loopz2089U_294198, (int64_t) 1);
                bool x_294349 = sle64((int64_t) 0, i_294348);
                bool y_294350 = slt64(i_294348, loopz2089U_294198);
                bool bounds_check_294351 = x_294349 && y_294350;
                bool index_certs_294352;
                
                if (!bounds_check_294351) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_294348,
                                  "] out of bounds for array of shape [",
                                  (long long) loopz2089U_294198, "].",
                                  "-> #0  /prelude/array.fut:26:29-34\n   #1  median.fut:87:32-44\n   #2  median.fut:112:18-67\n   #3  stl.fut:343:23-52\n   #4  stl.fut:419:61-435:77\n   #5  stl.fut:463:3-479:36\n   #6  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_303457, "mem_303457") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303454, "mem_303454") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303359,
                                       "mem_param_303359") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303354,
                                       "mem_param_303354") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303349,
                                       "mem_param_303349") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303344,
                                       "mem_param_303344") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303335,
                                       "mem_param_303335") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303330,
                                       "mem_param_303330") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303522,
                                       "ext_mem_303522") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303523,
                                       "ext_mem_303523") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303524,
                                       "ext_mem_303524") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303525,
                                       "ext_mem_303525") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303526,
                                       "ext_mem_303526") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303527,
                                       "ext_mem_303527") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303338, "mem_303338") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303322, "mem_303322") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303319, "mem_303319") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303304, "mem_303304") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303301, "mem_303301") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303258, "mem_303258") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303648,
                                       "ext_mem_303648") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297627,
                                       "mem_param_297627") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297619,
                                       "mem_param_297619") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303131,
                                       "ext_mem_303131") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303132,
                                       "ext_mem_303132") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297605,
                                       "mem_param_297605") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297597,
                                       "mem_param_297597") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297589,
                                       "mem_param_297589") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303656,
                                       "ext_mem_303656") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303657,
                                       "ext_mem_303657") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303658,
                                       "ext_mem_303658") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int32_t last_res_294353;
                
                last_res_294353 = ((int32_t *) mem_303484)[i_294348];
                
                int64_t i32_res_294354 = sext_i32_i64(last_res_294353);
                
                for (int64_t write_iter_295738 = 0; write_iter_295738 <
                     loopz2089U_294198; write_iter_295738++) {
                    bool write_iv_295741;
                    
                    write_iv_295741 = ((bool *) mem_303469)[write_iter_295738];
                    
                    int32_t write_iv_295742;
                    
                    write_iv_295742 =
                        ((int32_t *) mem_303484)[write_iter_295738];
                    
                    int64_t defunc_1_f_res_294361;
                    
                    if (write_iv_295741) {
                        int32_t i32_arg_294362 = sub32(write_iv_295742, 1);
                        int64_t i32_res_294363 = sext_i32_i64(i32_arg_294362);
                        
                        defunc_1_f_res_294361 = i32_res_294363;
                    } else {
                        defunc_1_f_res_294361 = (int64_t) -1;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_294361) &&
                        slt64(defunc_1_f_res_294361, loopz2088U_294197)) {
                        if ((int64_t) 4 > 0)
                            memmove(mem_param_303349.mem +
                                    (ctx_param_ext_303346 +
                                     ctx_param_ext_303347 *
                                     defunc_1_f_res_294361) * (int64_t) 4,
                                    mem_param_303344.mem +
                                    (ctx_param_ext_303341 +
                                     ctx_param_ext_303342 * write_iter_295738) *
                                    (int64_t) 4, (int64_t) 4);
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_294361) &&
                        slt64(defunc_1_f_res_294361, loopz2081Uz2080U_294199)) {
                        if ((int64_t) 8 > 0)
                            memmove(mem_param_303359.mem +
                                    (ctx_param_ext_303356 +
                                     ctx_param_ext_303357 *
                                     defunc_1_f_res_294361) * (int64_t) 8,
                                    mem_param_303354.mem +
                                    (ctx_param_ext_303351 +
                                     ctx_param_ext_303352 * write_iter_295738) *
                                    (int64_t) 8, (int64_t) 8);
                    }
                }
                
                bool empty_slice_294364 = i32_res_294354 == (int64_t) 0;
                int64_t m_294365 = sub64(i32_res_294354, (int64_t) 1);
                bool zzero_leq_i_p_m_t_s_294366 = sle64((int64_t) 0, m_294365);
                bool i_p_m_t_s_leq_w_294367 = slt64(m_294365,
                                                    loopz2088U_294197);
                bool i_lte_j_294368 = sle64((int64_t) 0, i32_res_294354);
                bool y_294369 = zzero_leq_i_p_m_t_s_294366 &&
                     i_p_m_t_s_leq_w_294367;
                bool y_294370 = i_lte_j_294368 && y_294369;
                bool ok_or_empty_294371 = empty_slice_294364 || y_294370;
                bool index_certs_294372;
                
                if (!ok_or_empty_294371) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [:", (long long) i32_res_294354,
                                  "] out of bounds for array of shape [",
                                  (long long) loopz2088U_294197, "].",
                                  "-> #0  median.fut:91:20-33\n   #1  median.fut:112:18-67\n   #2  stl.fut:343:23-52\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_303457, "mem_303457") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303454, "mem_303454") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303359,
                                       "mem_param_303359") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303354,
                                       "mem_param_303354") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303349,
                                       "mem_param_303349") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303344,
                                       "mem_param_303344") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303335,
                                       "mem_param_303335") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303330,
                                       "mem_param_303330") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303522,
                                       "ext_mem_303522") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303523,
                                       "ext_mem_303523") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303524,
                                       "ext_mem_303524") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303525,
                                       "ext_mem_303525") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303526,
                                       "ext_mem_303526") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303527,
                                       "ext_mem_303527") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303338, "mem_303338") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303322, "mem_303322") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303319, "mem_303319") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303304, "mem_303304") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303301, "mem_303301") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303258, "mem_303258") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303648,
                                       "ext_mem_303648") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297627,
                                       "mem_param_297627") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297619,
                                       "mem_param_297619") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303131,
                                       "ext_mem_303131") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303132,
                                       "ext_mem_303132") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297605,
                                       "mem_param_297605") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297597,
                                       "mem_param_297597") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297589,
                                       "mem_param_297589") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303656,
                                       "ext_mem_303656") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303657,
                                       "ext_mem_303657") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303658,
                                       "ext_mem_303658") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_294374 = slt64(m_294365,
                                                    loopz2081Uz2080U_294199);
                bool y_294375 = zzero_leq_i_p_m_t_s_294366 &&
                     i_p_m_t_s_leq_w_294374;
                bool y_294376 = i_lte_j_294368 && y_294375;
                bool ok_or_empty_294377 = empty_slice_294364 || y_294376;
                bool index_certs_294378;
                
                if (!ok_or_empty_294377) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [:", (long long) i32_res_294354,
                                  "] out of bounds for array of shape [",
                                  (long long) loopz2081Uz2080U_294199, "].",
                                  "-> #0  median.fut:92:20-31\n   #1  median.fut:112:18-67\n   #2  stl.fut:343:23-52\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_303457, "mem_303457") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303454, "mem_303454") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303359,
                                       "mem_param_303359") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303354,
                                       "mem_param_303354") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303349,
                                       "mem_param_303349") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303344,
                                       "mem_param_303344") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303335,
                                       "mem_param_303335") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_303330,
                                       "mem_param_303330") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303522,
                                       "ext_mem_303522") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303523,
                                       "ext_mem_303523") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303524,
                                       "ext_mem_303524") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303525,
                                       "ext_mem_303525") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303526,
                                       "ext_mem_303526") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303527,
                                       "ext_mem_303527") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303338, "mem_303338") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303322, "mem_303322") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303319, "mem_303319") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303304, "mem_303304") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303301, "mem_303301") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303258, "mem_303258") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303648,
                                       "ext_mem_303648") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297627,
                                       "mem_param_297627") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297619,
                                       "mem_param_297619") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303131,
                                       "ext_mem_303131") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303132,
                                       "ext_mem_303132") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297605,
                                       "mem_param_297605") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297597,
                                       "mem_param_297597") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_297589,
                                       "mem_param_297589") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303656,
                                       "ext_mem_303656") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303657,
                                       "ext_mem_303657") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303658,
                                       "ext_mem_303658") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304403,
                                       "mem_out_304403") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304402,
                                       "mem_out_304402") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_304401,
                                       "mem_out_304401") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t loopres_294380 = add64((int64_t) 1, q_294207);
                bool loop_cond_294381 = slt64((int64_t) 0, i32_res_294354);
                int64_t ctx_param_ext_tmp_304882 = ctx_param_ext_303345;
                int64_t ctx_param_ext_tmp_304883 = ctx_param_ext_303346;
                int64_t ctx_param_ext_tmp_304884 = ctx_param_ext_303347;
                int64_t ctx_param_ext_tmp_304885 = i32_res_294354;
                int64_t ctx_param_ext_tmp_304886 = ctx_param_ext_303340;
                int64_t ctx_param_ext_tmp_304887 = ctx_param_ext_303341;
                int64_t ctx_param_ext_tmp_304888 = ctx_param_ext_303342;
                int64_t ctx_param_ext_tmp_304889 = ctx_param_ext_303343;
                int64_t ctx_param_ext_tmp_304890 = ctx_param_ext_303355;
                int64_t ctx_param_ext_tmp_304891 = ctx_param_ext_303356;
                int64_t ctx_param_ext_tmp_304892 = ctx_param_ext_303357;
                int64_t ctx_param_ext_tmp_304893 = i32_res_294354;
                int64_t ctx_param_ext_tmp_304894 = ctx_param_ext_303350;
                int64_t ctx_param_ext_tmp_304895 = ctx_param_ext_303351;
                int64_t ctx_param_ext_tmp_304896 = ctx_param_ext_303352;
                int64_t ctx_param_ext_tmp_304897 = ctx_param_ext_303353;
                struct memblock mem_param_tmp_304898;
                
                mem_param_tmp_304898.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_304898, &mem_303457,
                                 "mem_303457") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_304899;
                
                mem_param_tmp_304899.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_304899, &mem_303454,
                                 "mem_303454") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_304900;
                
                mem_param_tmp_304900.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_304900, &mem_param_303349,
                                 "mem_param_303349") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_304901;
                
                mem_param_tmp_304901.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_304901, &mem_param_303344,
                                 "mem_param_303344") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_304902;
                
                mem_param_tmp_304902.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_304902, &mem_param_303359,
                                 "mem_param_303359") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_304903;
                
                mem_param_tmp_304903.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_304903, &mem_param_303354,
                                 "mem_param_303354") != 0)
                    return 1;
                
                int64_t loopz2088U_tmp_304904 = loopz2089U_294198;
                int64_t loopz2089U_tmp_304905 = i32_res_294354;
                int64_t loopz2081Uz2080U_tmp_304906 = loopz2089U_294198;
                bool loop_while_tmp_304907 = loop_cond_294381;
                int64_t q_tmp_304914 = loopres_294380;
                
                ctx_param_ext_303340 = ctx_param_ext_tmp_304882;
                ctx_param_ext_303341 = ctx_param_ext_tmp_304883;
                ctx_param_ext_303342 = ctx_param_ext_tmp_304884;
                ctx_param_ext_303343 = ctx_param_ext_tmp_304885;
                ctx_param_ext_303345 = ctx_param_ext_tmp_304886;
                ctx_param_ext_303346 = ctx_param_ext_tmp_304887;
                ctx_param_ext_303347 = ctx_param_ext_tmp_304888;
                ctx_param_ext_303348 = ctx_param_ext_tmp_304889;
                ctx_param_ext_303350 = ctx_param_ext_tmp_304890;
                ctx_param_ext_303351 = ctx_param_ext_tmp_304891;
                ctx_param_ext_303352 = ctx_param_ext_tmp_304892;
                ctx_param_ext_303353 = ctx_param_ext_tmp_304893;
                ctx_param_ext_303355 = ctx_param_ext_tmp_304894;
                ctx_param_ext_303356 = ctx_param_ext_tmp_304895;
                ctx_param_ext_303357 = ctx_param_ext_tmp_304896;
                ctx_param_ext_303358 = ctx_param_ext_tmp_304897;
                if (memblock_set(ctx, &mem_param_303330, &mem_param_tmp_304898,
                                 "mem_param_tmp_304898") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_303335, &mem_param_tmp_304899,
                                 "mem_param_tmp_304899") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_303344, &mem_param_tmp_304900,
                                 "mem_param_tmp_304900") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_303349, &mem_param_tmp_304901,
                                 "mem_param_tmp_304901") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_303354, &mem_param_tmp_304902,
                                 "mem_param_tmp_304902") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_303359, &mem_param_tmp_304903,
                                 "mem_param_tmp_304903") != 0)
                    return 1;
                loopz2088U_294197 = loopz2088U_tmp_304904;
                loopz2089U_294198 = loopz2089U_tmp_304905;
                loopz2081Uz2080U_294199 = loopz2081Uz2080U_tmp_304906;
                loop_while_294200 = loop_while_tmp_304907;
                q_294207 = q_tmp_304914;
                if (memblock_unref(ctx, &mem_param_tmp_304903,
                                   "mem_param_tmp_304903") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_304902,
                                   "mem_param_tmp_304902") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_304901,
                                   "mem_param_tmp_304901") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_304900,
                                   "mem_param_tmp_304900") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_304899,
                                   "mem_param_tmp_304899") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_304898,
                                   "mem_param_tmp_304898") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_303457, "mem_303457") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_303454, "mem_303454") != 0)
                    return 1;
            }
            ext_303547 = ctx_param_ext_303340;
            ext_303546 = ctx_param_ext_303341;
            ext_303545 = ctx_param_ext_303342;
            ext_303544 = ctx_param_ext_303343;
            ext_303543 = ctx_param_ext_303345;
            ext_303542 = ctx_param_ext_303346;
            ext_303541 = ctx_param_ext_303347;
            ext_303540 = ctx_param_ext_303348;
            ext_303539 = ctx_param_ext_303350;
            ext_303538 = ctx_param_ext_303351;
            ext_303537 = ctx_param_ext_303352;
            ext_303536 = ctx_param_ext_303353;
            ext_303535 = ctx_param_ext_303355;
            ext_303534 = ctx_param_ext_303356;
            ext_303533 = ctx_param_ext_303357;
            ext_303532 = ctx_param_ext_303358;
            if (memblock_set(ctx, &ext_mem_303527, &mem_param_303330,
                             "mem_param_303330") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_303526, &mem_param_303335,
                             "mem_param_303335") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_303525, &mem_param_303344,
                             "mem_param_303344") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_303524, &mem_param_303349,
                             "mem_param_303349") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_303523, &mem_param_303354,
                             "mem_param_303354") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_303522, &mem_param_303359,
                             "mem_param_303359") != 0)
                return 1;
            rankSearchBatch_res_294185 = loopz2088U_294197;
            rankSearchBatch_res_294186 = loopz2089U_294198;
            rankSearchBatch_res_294187 = loopz2081Uz2080U_294199;
            rankSearchBatch_res_294188 = loop_while_294200;
            rankSearchBatch_res_294195 = q_294207;
            if (memblock_unref(ctx, &mem_303258, "mem_303258") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_303301, "mem_303301") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_303304, "mem_303304") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_303319, "mem_303319") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_303322, "mem_303322") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_303338, "mem_303338") != 0)
                return 1;
            if (mem_303558_cached_sizze_305092 < (size_t) bytes_296795) {
                mem_303558 = realloc(mem_303558, bytes_296795);
                mem_303558_cached_sizze_305092 = bytes_296795;
            }
            if (mem_303561_cached_sizze_305093 < (size_t) bytes_296795) {
                mem_303561 = realloc(mem_303561, bytes_296795);
                mem_303561_cached_sizze_305093 = bytes_296795;
            }
            if (mem_303564_cached_sizze_305094 < (size_t) bytes_296795) {
                mem_303564 = realloc(mem_303564, bytes_296795);
                mem_303564_cached_sizze_305094 = bytes_296795;
            }
            for (int64_t i_295757 = 0; i_295757 < partition_sizze_289836;
                 i_295757++) {
                double x_294386;
                
                x_294386 = ((double *) mem_303325)[i_295757];
                
                int64_t x_294387;
                
                x_294387 = ((int64_t *) mem_303265)[i_295757];
                
                int64_t x_294388;
                
                x_294388 = ((int64_t *) mem_296796)[i_295757];
                
                double defunc_2_reduce_comm_res_294389;
                int64_t defunc_2_reduce_comm_res_294390;
                int64_t defunc_2_reduce_comm_res_294391;
                double redout_295747;
                int64_t redout_295748;
                int64_t redout_295749;
                
                redout_295747 = -INFINITY;
                redout_295748 = (int64_t) -1;
                redout_295749 = (int64_t) 0;
                for (int64_t i_295750 = 0; i_295750 < n_289745; i_295750++) {
                    double x_294418;
                    
                    x_294418 = ((double *) mem_303150)[i_295757 * n_289745 +
                                                       i_295750];
                    
                    bool cond_294420 = x_294418 < x_294386;
                    int64_t defunc_0_f_res_294421 = btoi_bool_i64(cond_294420);
                    bool cond_294398 = redout_295749 == (int64_t) 0;
                    bool cond_t_res_294399 = slt64((int64_t) 0,
                                                   defunc_0_f_res_294421);
                    bool x_294400 = cond_294398 && cond_t_res_294399;
                    double defunc_1_op_res_294401;
                    int64_t defunc_1_op_res_294402;
                    
                    if (x_294400) {
                        defunc_1_op_res_294401 = x_294418;
                        defunc_1_op_res_294402 = i_295750;
                    } else {
                        bool cond_294403 = slt64((int64_t) 0, redout_295749);
                        bool cond_t_res_294404 = defunc_0_f_res_294421 ==
                             (int64_t) 0;
                        bool x_294405 = cond_294403 && cond_t_res_294404;
                        double defunc_1_op_res_f_res_294406;
                        int64_t defunc_1_op_res_f_res_294407;
                        
                        if (x_294405) {
                            defunc_1_op_res_f_res_294406 = redout_295747;
                            defunc_1_op_res_f_res_294407 = redout_295748;
                        } else {
                            bool cond_294408 = x_294418 < redout_295747;
                            double defunc_1_op_res_f_res_f_res_294409;
                            int64_t defunc_1_op_res_f_res_f_res_294410;
                            
                            if (cond_294408) {
                                defunc_1_op_res_f_res_f_res_294409 =
                                    redout_295747;
                                defunc_1_op_res_f_res_f_res_294410 =
                                    redout_295748;
                            } else {
                                bool cond_294411 = redout_295747 < x_294418;
                                double defunc_1_op_res_f_res_f_res_f_res_294412;
                                int64_t
                                defunc_1_op_res_f_res_f_res_f_res_294413;
                                
                                if (cond_294411) {
                                    defunc_1_op_res_f_res_f_res_f_res_294412 =
                                        x_294418;
                                    defunc_1_op_res_f_res_f_res_f_res_294413 =
                                        i_295750;
                                } else {
                                    bool cond_294414 = slt64(redout_295748,
                                                             i_295750);
                                    double
                                    defunc_1_op_res_f_res_f_res_f_res_f_res_294415;
                                    
                                    if (cond_294414) {
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_294415 =
                                            redout_295747;
                                    } else {
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_294415 =
                                            x_294418;
                                    }
                                    
                                    int64_t
                                    defunc_1_op_res_f_res_f_res_f_res_f_res_294416;
                                    
                                    if (cond_294414) {
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_294416 =
                                            redout_295748;
                                    } else {
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_294416 =
                                            i_295750;
                                    }
                                    defunc_1_op_res_f_res_f_res_f_res_294412 =
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_294415;
                                    defunc_1_op_res_f_res_f_res_f_res_294413 =
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_294416;
                                }
                                defunc_1_op_res_f_res_f_res_294409 =
                                    defunc_1_op_res_f_res_f_res_f_res_294412;
                                defunc_1_op_res_f_res_f_res_294410 =
                                    defunc_1_op_res_f_res_f_res_f_res_294413;
                            }
                            defunc_1_op_res_f_res_294406 =
                                defunc_1_op_res_f_res_f_res_294409;
                            defunc_1_op_res_f_res_294407 =
                                defunc_1_op_res_f_res_f_res_294410;
                        }
                        defunc_1_op_res_294401 = defunc_1_op_res_f_res_294406;
                        defunc_1_op_res_294402 = defunc_1_op_res_f_res_294407;
                    }
                    
                    int64_t defunc_1_op_res_294417 =
                            add64(defunc_0_f_res_294421, redout_295749);
                    double redout_tmp_304932 = defunc_1_op_res_294401;
                    int64_t redout_tmp_304933 = defunc_1_op_res_294402;
                    int64_t redout_tmp_304934 = defunc_1_op_res_294417;
                    
                    redout_295747 = redout_tmp_304932;
                    redout_295748 = redout_tmp_304933;
                    redout_295749 = redout_tmp_304934;
                }
                defunc_2_reduce_comm_res_294389 = redout_295747;
                defunc_2_reduce_comm_res_294390 = redout_295748;
                defunc_2_reduce_comm_res_294391 = redout_295749;
                
                bool cond_294422 = x_294387 == (int64_t) 0;
                int64_t x_294423 = smod64(x_294388, (int64_t) 2);
                bool cond_f_res_294424 = x_294423 == (int64_t) 1;
                bool x_294425 = !cond_294422;
                bool y_294426 = cond_f_res_294424 && x_294425;
                bool cond_294427 = cond_294422 || y_294426;
                bool cond_f_res_294428 = slt64(defunc_2_reduce_comm_res_294391,
                                               x_294387);
                bool x_294429 = !cond_294427;
                bool y_294430 = cond_f_res_294428 && x_294429;
                bool cond_294431 = cond_294427 || y_294430;
                double defunc_4_f_res_294432;
                
                if (cond_294431) {
                    defunc_4_f_res_294432 = x_294386;
                } else {
                    double x_294433 = x_294386 -
                           defunc_2_reduce_comm_res_294389;
                    double y_294434 = x_294433 / 2.0;
                    double defunc_4_f_res_f_res_294435 =
                           defunc_2_reduce_comm_res_294389 + y_294434;
                    
                    defunc_4_f_res_294432 = defunc_4_f_res_f_res_294435;
                }
                
                double h_294436 = 6.0 * defunc_4_f_res_294432;
                double h9_294437 = 0.999 * h_294436;
                double h1_294438 = 1.0e-3 * h_294436;
                
                ((double *) mem_303558)[i_295757] = h_294436;
                ((double *) mem_303561)[i_295757] = h9_294437;
                ((double *) mem_303564)[i_295757] = h1_294438;
            }
            
            struct memblock mem_303604;
            
            mem_303604.references = NULL;
            if (memblock_alloc(ctx, &mem_303604, bytes_296792, "mem_303604")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_295767 = 0; i_295767 < partition_sizze_289836;
                 i_295767++) {
                double x_294444;
                
                x_294444 = ((double *) mem_303558)[i_295767];
                
                double x_294445;
                
                x_294445 = ((double *) mem_303561)[i_295767];
                
                double x_294446;
                
                x_294446 = ((double *) mem_303564)[i_295767];
                for (int64_t i_295763 = 0; i_295763 < n_289745; i_295763++) {
                    double x_294448;
                    
                    x_294448 = ((double *) mem_303154)[i_295767 * n_289745 +
                                                       i_295763];
                    
                    double x_294449 = x_294448 / x_294444;
                    double y_294450 = fpow64(x_294449, 2.0);
                    double x_294451 = 1.0 - y_294450;
                    double bicube_294452 = fpow64(x_294451, 2.0);
                    bool isnan_res_294453;
                    
                    isnan_res_294453 = futrts_isnan64(x_294448);
                    
                    bool cond_f_res_294454 = x_294448 <= x_294446;
                    bool x_294455 = !isnan_res_294453;
                    bool y_294456 = cond_f_res_294454 && x_294455;
                    bool cond_294457 = isnan_res_294453 || y_294456;
                    double defunc_0_f_res_294458;
                    
                    if (cond_294457) {
                        defunc_0_f_res_294458 = 1.0;
                    } else {
                        bool cond_294459 = x_294445 <= x_294448;
                        bool cond_f_res_294460 = x_294448 <= 1.0e-6;
                        bool x_294461 = !cond_294459;
                        bool y_294462 = cond_f_res_294460 && x_294461;
                        bool cond_294463 = cond_294459 || y_294462;
                        double defunc_0_f_res_f_res_294464;
                        
                        if (cond_294463) {
                            defunc_0_f_res_f_res_294464 = 1.0e-6;
                        } else {
                            defunc_0_f_res_f_res_294464 = bicube_294452;
                        }
                        defunc_0_f_res_294458 = defunc_0_f_res_f_res_294464;
                    }
                    ((double *) mem_303604.mem)[i_295767 * n_289745 +
                                                i_295763] =
                        defunc_0_f_res_294458;
                }
            }
            if (memblock_set(ctx, &ext_mem_303648, &mem_303604, "mem_303604") !=
                0)
                return 1;
            if (memblock_unref(ctx, &mem_303604, "mem_303604") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_303359, "mem_param_303359") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_303354, "mem_param_303354") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_303349, "mem_param_303349") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_303344, "mem_param_303344") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_303335, "mem_param_303335") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_303330, "mem_param_303330") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303522, "ext_mem_303522") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303523, "ext_mem_303523") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303524, "ext_mem_303524") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303525, "ext_mem_303525") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303526, "ext_mem_303526") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303527, "ext_mem_303527") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_303338, "mem_303338") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_303322, "mem_303322") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_303319, "mem_303319") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_303304, "mem_303304") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_303301, "mem_303301") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_303258, "mem_303258") != 0)
                return 1;
        } else {
            if (memblock_set(ctx, &ext_mem_303648, &mem_param_297605,
                             "mem_param_297605") != 0)
                return 1;
        }
        
        int64_t ctx_param_ext_tmp_304470 = ext_303138;
        int64_t ctx_param_ext_tmp_304471 = ext_303136;
        int64_t ctx_param_ext_tmp_304472 = ext_303653;
        int64_t ctx_param_ext_tmp_304473 = ext_303652;
        int64_t ctx_param_ext_tmp_304474 = ext_303649;
        int64_t ctx_param_ext_tmp_304475 = ext_303651;
        int64_t ctx_param_ext_tmp_304476 = ext_303655;
        int64_t ctx_param_ext_tmp_304477 = ext_303650;
        int64_t ctx_param_ext_tmp_304478 = ext_303654;
        struct memblock mem_param_tmp_304479;
        
        mem_param_tmp_304479.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_304479, &ext_mem_303132,
                         "ext_mem_303132") != 0)
            return 1;
        
        struct memblock mem_param_tmp_304480;
        
        mem_param_tmp_304480.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_304480, &ext_mem_303131,
                         "ext_mem_303131") != 0)
            return 1;
        
        struct memblock mem_param_tmp_304481;
        
        mem_param_tmp_304481.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_304481, &ext_mem_303648,
                         "ext_mem_303648") != 0)
            return 1;
        ctx_param_ext_297591 = ctx_param_ext_tmp_304470;
        ctx_param_ext_297593 = ctx_param_ext_tmp_304471;
        ctx_param_ext_297598 = ctx_param_ext_tmp_304472;
        ctx_param_ext_297599 = ctx_param_ext_tmp_304473;
        ctx_param_ext_297600 = ctx_param_ext_tmp_304474;
        ctx_param_ext_297601 = ctx_param_ext_tmp_304475;
        ctx_param_ext_297602 = ctx_param_ext_tmp_304476;
        ctx_param_ext_297603 = ctx_param_ext_tmp_304477;
        ctx_param_ext_297604 = ctx_param_ext_tmp_304478;
        if (memblock_set(ctx, &mem_param_297589, &mem_param_tmp_304479,
                         "mem_param_tmp_304479") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_297597, &mem_param_tmp_304480,
                         "mem_param_tmp_304480") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_297605, &mem_param_tmp_304481,
                         "mem_param_tmp_304481") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_304481,
                           "mem_param_tmp_304481") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_304480,
                           "mem_param_tmp_304480") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_304479,
                           "mem_param_tmp_304479") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_303648, "ext_mem_303648") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_297627, "mem_param_297627") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_297619, "mem_param_297619") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_303131, "ext_mem_303131") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_303132, "ext_mem_303132") != 0)
            return 1;
    }
    ext_303671 = ctx_param_ext_297591;
    ext_303669 = ctx_param_ext_297593;
    ext_303665 = ctx_param_ext_297598;
    ext_303664 = ctx_param_ext_297599;
    ext_303663 = ctx_param_ext_297600;
    ext_303662 = ctx_param_ext_297601;
    ext_303661 = ctx_param_ext_297602;
    ext_303660 = ctx_param_ext_297603;
    ext_303659 = ctx_param_ext_297604;
    if (memblock_set(ctx, &ext_mem_303658, &mem_param_297589,
                     "mem_param_297589") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_303657, &mem_param_297597,
                     "mem_param_297597") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_303656, &mem_param_297605,
                     "mem_param_297605") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
        return 1;
    if (mem_303683_cached_sizze_305095 < (size_t) bytes_296752) {
        mem_303683 = realloc(mem_303683, bytes_296752);
        mem_303683_cached_sizze_305095 = bytes_296752;
    }
    for (int64_t i_304937 = 0; i_304937 < m_289744; i_304937++) {
        for (int64_t i_304938 = 0; i_304938 < n_289745; i_304938++) {
            ((float *) mem_303683)[i_304937 * n_289745 + i_304938] = NAN;
        }
    }
    if (mem_303687_cached_sizze_305096 < (size_t) bytes_296752) {
        mem_303687 = realloc(mem_303687, bytes_296752);
        mem_303687_cached_sizze_305096 = bytes_296752;
    }
    for (int64_t i_304939 = 0; i_304939 < m_289744; i_304939++) {
        for (int64_t i_304940 = 0; i_304940 < n_289745; i_304940++) {
            ((float *) mem_303687)[i_304939 * n_289745 + i_304940] = NAN;
        }
    }
    if (mem_303691_cached_sizze_305097 < (size_t) bytes_296752) {
        mem_303691 = realloc(mem_303691, bytes_296752);
        mem_303691_cached_sizze_305097 = bytes_296752;
    }
    for (int64_t i_304941 = 0; i_304941 < m_289744; i_304941++) {
        for (int64_t i_304942 = 0; i_304942 < n_289745; i_304942++) {
            ((float *) mem_303691)[i_304941 * n_289745 + i_304942] = NAN;
        }
    }
    
    int64_t binop_y_303722 = (int64_t) 4 * n_289745;
    int64_t bytes_303723 = smax64((int64_t) 0, binop_y_303722);
    
    if (mem_303724_cached_sizze_305098 < (size_t) bytes_303723) {
        mem_303724 = realloc(mem_303724, bytes_303723);
        mem_303724_cached_sizze_305098 = bytes_303723;
    }
    if (mem_303727_cached_sizze_305099 < (size_t) bytes_303723) {
        mem_303727 = realloc(mem_303727, bytes_303723);
        mem_303727_cached_sizze_305099 = bytes_303723;
    }
    if (mem_303730_cached_sizze_305100 < (size_t) bytes_303723) {
        mem_303730 = realloc(mem_303730, bytes_303723);
        mem_303730_cached_sizze_305100 = bytes_303723;
    }
    for (int64_t write_iter_295779 = 0; write_iter_295779 <
         partition_sizze_289836; write_iter_295779++) {
        int64_t write_iv_295786;
        
        write_iv_295786 = ((int64_t *) mem_296756)[write_iter_295779];
        for (int64_t i_295775 = 0; i_295775 < n_289745; i_295775++) {
            double x_294479;
            
            x_294479 = ((double *) ext_mem_303658.mem)[write_iter_295779 *
                                                       n_289745 + i_295775];
            
            double x_294480;
            
            x_294480 = ((double *) ext_mem_303657.mem)[write_iter_295779 *
                                                       ext_303669 + i_295775];
            
            float x_294481;
            
            x_294481 = ((float *) mem_296753)[write_iter_295779 * n_289745 +
                                              i_295775];
            
            float defunc_0_g_res_294482 = fpconv_f64_f32(x_294479);
            float defunc_0_g_res_294483 = fpconv_f64_f32(x_294480);
            float x_294484 = x_294481 - defunc_0_g_res_294482;
            float defunc_2_f_res_294485 = x_294484 - defunc_0_g_res_294483;
            
            ((float *) mem_303724)[i_295775] = defunc_2_f_res_294485;
            ((float *) mem_303727)[i_295775] = defunc_0_g_res_294483;
            ((float *) mem_303730)[i_295775] = defunc_0_g_res_294482;
        }
        if ((sle64((int64_t) 0, write_iv_295786) && slt64(write_iv_295786,
                                                          m_289744)) &&
            (sle64((int64_t) 0, (int64_t) 0) && slt64(n_289745 - (int64_t) 1,
                                                      n_289745))) {
            if (n_289745 * (int64_t) 4 > 0)
                memmove(mem_303691 + write_iv_295786 * n_289745 * (int64_t) 4,
                        mem_303724 + (int64_t) 0, n_289745 * (int64_t) 4);
        }
        if ((sle64((int64_t) 0, write_iv_295786) && slt64(write_iv_295786,
                                                          m_289744)) &&
            (sle64((int64_t) 0, (int64_t) 0) && slt64(n_289745 - (int64_t) 1,
                                                      n_289745))) {
            if (n_289745 * (int64_t) 4 > 0)
                memmove(mem_303687 + write_iv_295786 * n_289745 * (int64_t) 4,
                        mem_303727 + (int64_t) 0, n_289745 * (int64_t) 4);
        }
        if ((sle64((int64_t) 0, write_iv_295786) && slt64(write_iv_295786,
                                                          m_289744)) &&
            (sle64((int64_t) 0, (int64_t) 0) && slt64(n_289745 - (int64_t) 1,
                                                      n_289745))) {
            if (n_289745 * (int64_t) 4 > 0)
                memmove(mem_303683 + write_iv_295786 * n_289745 * (int64_t) 4,
                        mem_303730 + (int64_t) 0, n_289745 * (int64_t) 4);
        }
    }
    if (memblock_unref(ctx, &ext_mem_303657, "ext_mem_303657") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_303658, "ext_mem_303658") != 0)
        return 1;
    
    struct memblock mem_303794;
    
    mem_303794.references = NULL;
    if (memblock_alloc(ctx, &mem_303794, bytes_296752, "mem_303794")) {
        err = 1;
        goto cleanup;
    }
    if (m_289744 * n_289745 * (int64_t) 4 > 0)
        memmove(mem_303794.mem + (int64_t) 0, mem_303683 + (int64_t) 0,
                m_289744 * n_289745 * (int64_t) 4);
    
    struct memblock mem_303799;
    
    mem_303799.references = NULL;
    if (memblock_alloc(ctx, &mem_303799, bytes_296752, "mem_303799")) {
        err = 1;
        goto cleanup;
    }
    if (m_289744 * n_289745 * (int64_t) 4 > 0)
        memmove(mem_303799.mem + (int64_t) 0, mem_303687 + (int64_t) 0,
                m_289744 * n_289745 * (int64_t) 4);
    
    struct memblock mem_303804;
    
    mem_303804.references = NULL;
    if (memblock_alloc(ctx, &mem_303804, bytes_296752, "mem_303804")) {
        err = 1;
        goto cleanup;
    }
    if (m_289744 * n_289745 * (int64_t) 4 > 0)
        memmove(mem_303804.mem + (int64_t) 0, mem_303691 + (int64_t) 0,
                m_289744 * n_289745 * (int64_t) 4);
    if (memblock_set(ctx, &mem_out_304401, &mem_303794, "mem_303794") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_304402, &mem_303799, "mem_303799") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_304403, &mem_303804, "mem_303804") != 0)
        return 1;
    (*mem_out_p_304949).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_304949, &mem_out_304401,
                     "mem_out_304401") != 0)
        return 1;
    (*mem_out_p_304950).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_304950, &mem_out_304402,
                     "mem_out_304402") != 0)
        return 1;
    (*mem_out_p_304951).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_304951, &mem_out_304403,
                     "mem_out_304403") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_303804, "mem_303804") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_303799, "mem_303799") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_303794, "mem_303794") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_297605, "mem_param_297605") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_297597, "mem_param_297597") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_297589, "mem_param_297589") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_303656, "ext_mem_303656") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_303657, "ext_mem_303657") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_303658, "ext_mem_303658") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_297581, "mem_297581") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_297577, "mem_297577") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_304403, "mem_out_304403") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_304402, "mem_out_304402") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_296722);
    free(mem_296725);
    free(mem_296753);
    free(mem_296756);
    free(mem_296776);
    free(mem_296793);
    free(mem_296796);
    free(mem_296816);
    free(mem_296831);
    free(mem_296871);
    free(mem_296974);
    free(mem_296978);
    free(mem_297031);
    free(mem_297046);
    free(mem_297139);
    free(mem_297144);
    free(mem_297205);
    free(mem_297359);
    free(mem_297363);
    free(mem_297386);
    free(mem_297468);
    free(mem_297472);
    free(mem_297495);
    free(mem_297631);
    free(mem_297679);
    free(mem_297684);
    free(mem_298095);
    free(mem_298098);
    free(mem_298331);
    free(mem_298334);
    free(mem_298337);
    free(mem_298340);
    free(mem_298595);
    free(mem_298765);
    free(mem_298768);
    free(mem_298771);
    free(mem_299016);
    free(mem_299019);
    free(mem_299022);
    free(mem_299061);
    free(mem_299064);
    free(mem_299450);
    free(mem_299453);
    free(mem_299686);
    free(mem_299689);
    free(mem_299692);
    free(mem_299695);
    free(mem_300049);
    free(mem_300095);
    free(mem_300111);
    free(mem_300124);
    free(mem_300147);
    free(mem_300163);
    free(mem_300176);
    free(mem_300199);
    free(mem_300215);
    free(mem_300228);
    free(mem_300352);
    free(mem_300355);
    free(mem_300476);
    free(mem_300479);
    free(mem_300482);
    free(mem_300485);
    free(mem_300641);
    free(mem_300728);
    free(mem_300731);
    free(mem_300734);
    free(mem_300867);
    free(mem_300870);
    free(mem_300873);
    free(mem_300912);
    free(mem_300915);
    free(mem_301119);
    free(mem_301122);
    free(mem_301243);
    free(mem_301246);
    free(mem_301249);
    free(mem_301252);
    free(mem_301531);
    free(mem_301546);
    free(mem_301549);
    free(mem_301637);
    free(mem_301652);
    free(mem_301655);
    free(mem_301704);
    free(mem_301707);
    free(mem_301806);
    free(mem_301821);
    free(mem_301824);
    free(mem_301873);
    free(mem_301876);
    free(mem_301879);
    free(mem_301882);
    free(mem_302027);
    free(mem_302042);
    free(mem_302045);
    free(mem_302083);
    free(mem_302148);
    free(mem_302163);
    free(mem_302166);
    free(mem_302215);
    free(mem_302218);
    free(mem_302221);
    free(mem_302332);
    free(mem_302347);
    free(mem_302350);
    free(mem_302399);
    free(mem_302402);
    free(mem_302405);
    free(mem_302444);
    free(mem_302447);
    free(mem_302568);
    free(mem_302583);
    free(mem_302586);
    free(mem_302674);
    free(mem_302689);
    free(mem_302692);
    free(mem_302741);
    free(mem_302744);
    free(mem_302843);
    free(mem_302858);
    free(mem_302861);
    free(mem_302910);
    free(mem_302913);
    free(mem_302916);
    free(mem_302919);
    free(mem_303150);
    free(mem_303154);
    free(mem_303243);
    free(mem_303262);
    free(mem_303265);
    free(mem_303285);
    free(mem_303325);
    free(mem_303379);
    free(mem_303394);
    free(mem_303410);
    free(mem_303412);
    free(mem_303415);
    free(mem_303469);
    free(mem_303484);
    free(mem_303558);
    free(mem_303561);
    free(mem_303564);
    free(mem_303683);
    free(mem_303687);
    free(mem_303691);
    free(mem_303724);
    free(mem_303727);
    free(mem_303730);
    return err;
}
static int futrts_entry_seasonal_amplitude(struct futhark_context *ctx,
                                           struct memblock *mem_out_p_305101,
                                           struct memblock seasonal_l_mem_296719,
                                           int64_t m_289679, int64_t n_289680)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_296722_cached_sizze_305102 = 0;
    unsigned char *mem_296722 = NULL;
    struct memblock mem_out_304401;
    
    mem_out_304401.references = NULL;
    
    int64_t binop_y_296720 = (int64_t) 4 * m_289679;
    int64_t bytes_296721 = smax64((int64_t) 0, binop_y_296720);
    
    if (mem_296722_cached_sizze_305102 < (size_t) bytes_296721) {
        mem_296722 = realloc(mem_296722, bytes_296721);
        mem_296722_cached_sizze_305102 = bytes_296721;
    }
    for (int64_t i_294491 = 0; i_294491 < m_289679; i_294491++) {
        float defunc_2_reduce_res_289684;
        float defunc_2_reduce_res_289685;
        float redout_294486;
        float redout_294487;
        
        redout_294486 = -INFINITY;
        redout_294487 = INFINITY;
        for (int64_t i_294488 = 0; i_294488 < n_289680; i_294488++) {
            float x_289692;
            
            x_289692 = ((float *) seasonal_l_mem_296719.mem)[i_294491 *
                                                             n_289680 +
                                                             i_294488];
            
            float defunc_1_op_res_289688 = fmax32(x_289692, redout_294486);
            float defunc_1_op_res_289691 = fmin32(x_289692, redout_294487);
            float redout_tmp_304403 = defunc_1_op_res_289688;
            float redout_tmp_304404 = defunc_1_op_res_289691;
            
            redout_294486 = redout_tmp_304403;
            redout_294487 = redout_tmp_304404;
        }
        defunc_2_reduce_res_289684 = redout_294486;
        defunc_2_reduce_res_289685 = redout_294487;
        
        float v_289693 = defunc_2_reduce_res_289684 -
              defunc_2_reduce_res_289685;
        bool isinf_res_289694;
        
        isinf_res_289694 = futrts_isinf32(v_289693);
        
        float defunc_0_f_res_289695;
        
        if (isinf_res_289694) {
            defunc_0_f_res_289695 = NAN;
        } else {
            defunc_0_f_res_289695 = v_289693;
        }
        ((float *) mem_296722)[i_294491] = defunc_0_f_res_289695;
    }
    
    struct memblock mem_296737;
    
    mem_296737.references = NULL;
    if (memblock_alloc(ctx, &mem_296737, bytes_296721, "mem_296737")) {
        err = 1;
        goto cleanup;
    }
    if (m_289679 * (int64_t) 4 > 0)
        memmove(mem_296737.mem + (int64_t) 0, mem_296722 + (int64_t) 0,
                m_289679 * (int64_t) 4);
    if (memblock_set(ctx, &mem_out_304401, &mem_296737, "mem_296737") != 0)
        return 1;
    (*mem_out_p_305101).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_305101, &mem_out_304401,
                     "mem_out_304401") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_296737, "mem_296737") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_296722);
    return err;
}
static int futrts_entry_trend_magnitude(struct futhark_context *ctx,
                                        struct memblock *mem_out_p_305103,
                                        struct memblock trend_l_mem_296719,
                                        int64_t m_289696, int64_t n_289697)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_296722_cached_sizze_305104 = 0;
    unsigned char *mem_296722 = NULL;
    size_t mem_296737_cached_sizze_305105 = 0;
    unsigned char *mem_296737 = NULL;
    struct memblock mem_out_304401;
    
    mem_out_304401.references = NULL;
    
    int64_t binop_y_296720 = (int64_t) 8 * n_289697;
    int64_t bytes_296721 = smax64((int64_t) 0, binop_y_296720);
    
    if (mem_296722_cached_sizze_305104 < (size_t) bytes_296721) {
        mem_296722 = realloc(mem_296722, bytes_296721);
        mem_296722_cached_sizze_305104 = bytes_296721;
    }
    
    double defunc_2_reduce_res_289706;
    double defunc_2_reduce_res_289707;
    double redout_294487;
    double redout_294488;
    
    redout_294487 = 0.0;
    redout_294488 = 0.0;
    for (int64_t i_294490 = 0; i_294490 < n_289697; i_294490++) {
        int64_t x__289716 = add64((int64_t) 1, i_294490);
        double i64_res_289717 = sitofp_i64_f64(x__289716);
        double defunc_0_f_res_289718 = i64_res_289717 * i64_res_289717;
        double defunc_1_op_res_289711 = i64_res_289717 + redout_294487;
        double defunc_1_op_res_289714 = defunc_0_f_res_289718 + redout_294488;
        
        ((double *) mem_296722)[i_294490] = i64_res_289717;
        
        double redout_tmp_304402 = defunc_1_op_res_289711;
        double redout_tmp_304403 = defunc_1_op_res_289714;
        
        redout_294487 = redout_tmp_304402;
        redout_294488 = redout_tmp_304403;
    }
    defunc_2_reduce_res_289706 = redout_294487;
    defunc_2_reduce_res_289707 = redout_294488;
    
    double i64_res_289722 = sitofp_i64_f64(n_289697);
    double x_289723 = defunc_2_reduce_res_289707 * i64_res_289722;
    double y_289724 = defunc_2_reduce_res_289706 * defunc_2_reduce_res_289706;
    double y_289725 = x_289723 - y_289724;
    double det1_289726 = 1.0 / y_289725;
    double x_289727 = 0.0 - defunc_2_reduce_res_289706;
    double b11_289728 = det1_289726 * x_289727;
    double c11_289729 = i64_res_289722 * det1_289726;
    int64_t binop_y_296735 = (int64_t) 4 * m_289696;
    int64_t bytes_296736 = smax64((int64_t) 0, binop_y_296735);
    
    if (mem_296737_cached_sizze_305105 < (size_t) bytes_296736) {
        mem_296737 = realloc(mem_296737, bytes_296736);
        mem_296737_cached_sizze_305105 = bytes_296736;
    }
    for (int64_t i_294496 = 0; i_294496 < m_289696; i_294496++) {
        double defunc_2_reduce_res_289732;
        double redout_294492 = 0.0;
        
        for (int64_t i_294493 = 0; i_294493 < n_289697; i_294493++) {
            double x_289736;
            
            x_289736 = ((double *) mem_296722)[i_294493];
            
            float x_289737;
            
            x_289737 = ((float *) trend_l_mem_296719.mem)[i_294496 * n_289697 +
                                                          i_294493];
            
            double y_289738 = c11_289729 * x_289736;
            double x_289739 = b11_289728 + y_289738;
            double f32_res_289740 = fpconv_f32_f64(x_289737);
            double defunc_1_f_res_289741 = x_289739 * f32_res_289740;
            double defunc_1_op_res_289735 = defunc_1_f_res_289741 +
                   redout_294492;
            double redout_tmp_304406 = defunc_1_op_res_289735;
            
            redout_294492 = redout_tmp_304406;
        }
        defunc_2_reduce_res_289732 = redout_294492;
        
        double defunc_0_f_res_289742 = i64_res_289722 *
               defunc_2_reduce_res_289732;
        float defunc_0_f_res_289743 = fpconv_f64_f32(defunc_0_f_res_289742);
        
        ((float *) mem_296737)[i_294496] = defunc_0_f_res_289743;
    }
    
    struct memblock mem_296752;
    
    mem_296752.references = NULL;
    if (memblock_alloc(ctx, &mem_296752, bytes_296736, "mem_296752")) {
        err = 1;
        goto cleanup;
    }
    if (m_289696 * (int64_t) 4 > 0)
        memmove(mem_296752.mem + (int64_t) 0, mem_296737 + (int64_t) 0,
                m_289696 * (int64_t) 4);
    if (memblock_set(ctx, &mem_out_304401, &mem_296752, "mem_296752") != 0)
        return 1;
    (*mem_out_p_305103).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_305103, &mem_out_304401,
                     "mem_out_304401") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_296752, "mem_296752") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_304401, "mem_out_304401") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_296722);
    free(mem_296737);
    return err;
}

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7, const
                       int64_t in8, const int64_t in9, const int64_t in10, const
                       int64_t in11, const int64_t in12, const int64_t in13,
                       const int64_t in14, const int64_t in15, const
                       int64_t in16)
{
    struct memblock Y_mem_296719;
    
    Y_mem_296719.references = NULL;
    
    int64_t m_289744;
    int64_t n_289745;
    int64_t n_p_289747;
    int64_t q_s_289748;
    int64_t q_t_289749;
    int64_t q_l_289750;
    int64_t d_s_289751;
    int64_t d_t_289752;
    int64_t d_l_289753;
    int64_t jump_s_289754;
    int64_t jump_t_289755;
    int64_t jump_l_289756;
    int64_t n_inner_289757;
    int64_t n_outer_289758;
    int64_t jump_threshold_1_289759;
    int64_t jump_threshold_2_289760;
    int64_t q_threshold_1_289761;
    int64_t q_threshold_2_289762;
    struct memblock mem_out_304401;
    
    mem_out_304401.references = NULL;
    
    struct memblock mem_out_304402;
    
    mem_out_304402.references = NULL;
    
    struct memblock mem_out_304403;
    
    mem_out_304403.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    Y_mem_296719 = in0->mem;
    m_289744 = in0->shape[0];
    n_289745 = in0->shape[1];
    n_p_289747 = in1;
    q_s_289748 = in2;
    q_t_289749 = in3;
    q_l_289750 = in4;
    d_s_289751 = in5;
    d_t_289752 = in6;
    d_l_289753 = in7;
    jump_s_289754 = in8;
    jump_t_289755 = in9;
    jump_l_289756 = in10;
    n_inner_289757 = in11;
    n_outer_289758 = in12;
    jump_threshold_1_289759 = in13;
    jump_threshold_2_289760 = in14;
    q_threshold_1_289761 = in15;
    q_threshold_2_289762 = in16;
    if (!(m_289744 == in0->shape[0] && n_289745 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_304401, &mem_out_304402,
                                &mem_out_304403, Y_mem_296719, m_289744,
                                n_289745, n_p_289747, q_s_289748, q_t_289749,
                                q_l_289750, d_s_289751, d_t_289752, d_l_289753,
                                jump_s_289754, jump_t_289755, jump_l_289756,
                                n_inner_289757, n_outer_289758,
                                jump_threshold_1_289759,
                                jump_threshold_2_289760, q_threshold_1_289761,
                                q_threshold_2_289762);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_304401;
            (*out0)->shape[0] = m_289744;
            (*out0)->shape[1] = n_289745;
            assert((*out1 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out1)->mem = mem_out_304402;
            (*out1)->shape[0] = m_289744;
            (*out1)->shape[1] = n_289745;
            assert((*out2 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out2)->mem = mem_out_304403;
            (*out2)->shape[0] = m_289744;
            (*out2)->shape[1] = n_289745;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_seasonal_amplitude(struct futhark_context *ctx,
                                     struct futhark_f32_1d **out0, const
                                     struct futhark_f32_2d *in0)
{
    struct memblock seasonal_l_mem_296719;
    
    seasonal_l_mem_296719.references = NULL;
    
    int64_t m_289679;
    int64_t n_289680;
    struct memblock mem_out_304401;
    
    mem_out_304401.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    seasonal_l_mem_296719 = in0->mem;
    m_289679 = in0->shape[0];
    n_289680 = in0->shape[1];
    if (!(m_289679 == in0->shape[0] && n_289680 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_seasonal_amplitude(ctx, &mem_out_304401,
                                              seasonal_l_mem_296719, m_289679,
                                              n_289680);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
                NULL);
            (*out0)->mem = mem_out_304401;
            (*out0)->shape[0] = m_289679;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_trend_magnitude(struct futhark_context *ctx,
                                  struct futhark_f32_1d **out0, const
                                  struct futhark_f32_2d *in0)
{
    struct memblock trend_l_mem_296719;
    
    trend_l_mem_296719.references = NULL;
    
    int64_t m_289696;
    int64_t n_289697;
    struct memblock mem_out_304401;
    
    mem_out_304401.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    trend_l_mem_296719 = in0->mem;
    m_289696 = in0->shape[0];
    n_289697 = in0->shape[1];
    if (!(m_289696 == in0->shape[0] && n_289697 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_trend_magnitude(ctx, &mem_out_304401,
                                           trend_l_mem_296719, m_289696,
                                           n_289697);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
                NULL);
            (*out0)->mem = mem_out_304401;
            (*out0)->shape[0] = m_289696;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
  
