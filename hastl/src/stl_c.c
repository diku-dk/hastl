// Generated by Futhark 0.21.5
// git: e1c63b2 (Tue Feb 1 22:06:34 2022 +0100)

// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers\n")
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t param_value);
int futhark_get_tuning_param_count(void);
const char *futhark_get_tuning_param_name(int);
const char *futhark_get_tuning_param_class(int);

// Arrays
struct futhark_f32_1d;
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0);
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0);
int futhark_free_f32_1d(struct futhark_context *ctx,
                        struct futhark_f32_1d *arr);
int futhark_values_f32_1d(struct futhark_context *ctx,
                          struct futhark_f32_1d *arr, float *data);
unsigned char *futhark_values_raw_f32_1d(struct futhark_context *ctx,
                                         struct futhark_f32_1d *arr);
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx,
                                    struct futhark_f32_1d *arr);
struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
unsigned char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                         struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7, const
                       int64_t in8, const int64_t in9, const int64_t in10, const
                       int64_t in11, const int64_t in12, const int64_t in13,
                       const int64_t in14, const int64_t in15, const
                       int64_t in16);
int futhark_entry_seasonal_amplitude(struct futhark_context *ctx,
                                     struct futhark_f32_1d **out0, const
                                     struct futhark_f32_2d *in0);
int futhark_entry_trend_magnitude(struct futhark_context *ctx,
                                  struct futhark_f32_1d **out0, const
                                  struct futhark_f32_2d *in0);

// Miscellaneous
int futhark_context_sync(struct futhark_context *ctx);
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_c
#define FUTHARK_SUCCESS 0
#define FUTHARK_PROGRAM_ERROR 2
#define FUTHARK_OUT_OF_MEMORY 3

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

static uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

static float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>



// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

static inline uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

static inline uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

static inline uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

static inline uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

static inline uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

static inline uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

static inline uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

static inline uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

static inline uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

static inline uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

static inline uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

static inline uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

static inline int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

static inline int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

static inline int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

static inline uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

static inline uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

static inline uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

static inline uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

static inline int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

static inline int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

static inline int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

static inline int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

static inline uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

static inline uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

static inline uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

static inline uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

static inline uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

static inline uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

static inline uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

static inline uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

static inline uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

static inline uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

static inline uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

static inline uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

static inline int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

static inline int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

static inline int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

static inline int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

static inline uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

static inline uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

static inline uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

static inline uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

static inline uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

static inline uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

static inline uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

static inline uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

static inline uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

static inline uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

static inline uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

static inline uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

static inline bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

static inline bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

static inline bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

static inline bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

static inline bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

static inline bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

static inline bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

static inline bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

static inline bool slt8(int8_t x, int8_t y) {
  return x < y;
}

static inline bool slt16(int16_t x, int16_t y) {
  return x < y;
}

static inline bool slt32(int32_t x, int32_t y) {
  return x < y;
}

static inline bool slt64(int64_t x, int64_t y) {
  return x < y;
}

static inline bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

static inline bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

static inline bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

static inline bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

static inline uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline bool itob_i8_bool(int8_t x) {
  return x;
}

static inline bool itob_i16_bool(int16_t x) {
  return x;
}

static inline bool itob_i32_bool(int32_t x) {
  return x;
}

static inline bool itob_i64_bool(int64_t x) {
  return x;
}

static inline int8_t btoi_bool_i8(bool x) {
  return x;
}

static inline int16_t btoi_bool_i16(bool x) {
  return x;
}

static inline int32_t btoi_bool_i32(bool x) {
  return x;
}

static inline int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

static int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

static int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

static int32_t abs32(int32_t x) {
  return abs(x);
}

static int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

static int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

static int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

static int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

static int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

static int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

static int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

static int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  return mul_hi(a, b);
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  return mul_hi(a, b);
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mul_hi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul_hi(a, b);
}

#elif defined(__CUDA_ARCH__)

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mulhi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul64hi(a, b);
}

#else // Not OpenCL or CUDA, but plain C.

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  uint64_t aa = a;
  uint64_t bb = b;

  return aa * bb >> 32;
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  __uint128_t aa = a;
  __uint128_t bb = b;

  return aa * bb >> 64;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return mad_hi(a, b, c);
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return mad_hi(a, b, c);
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return mad_hi(a, b, c);
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return mad_hi(a, b, c);
}

#else // Not OpenCL

static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return futrts_mul_hi8(a, b) + c;
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return futrts_mul_hi16(a, b) + c;
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return futrts_mul_hi32(a, b) + c;
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return futrts_mul_hi64(a, b) + c;
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

static int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

static int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

static int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

static int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

static int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

static int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

static inline float fdiv32(float x, float y) {
  return x / y;
}

static inline float fadd32(float x, float y) {
  return x + y;
}

static inline float fsub32(float x, float y) {
  return x - y;
}

static inline float fmul32(float x, float y) {
  return x * y;
}

static inline bool cmplt32(float x, float y) {
  return x < y;
}

static inline bool cmple32(float x, float y) {
  return x <= y;
}

static inline float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

static inline float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

static inline float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

static inline float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

static inline float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

static inline float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

static inline float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

static inline float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

static inline int8_t fptosi_f32_i8(float x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f32_i16(float x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f32_i32(float x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f32_i64(float x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f32_i8(float x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f32_i16(float x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f32_i32(float x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f32_i64(float x) {
  return (uint64_t) x;
}

#ifdef __OPENCL_VERSION__
static inline float fabs32(float x) {
  return fabs(x);
}

static inline float fmax32(float x, float y) {
  return fmax(x, y);
}

static inline float fmin32(float x, float y) {
  return fmin(x, y);
}

static inline float fpow32(float x, float y) {
  return pow(x, y);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float fabs32(float x) {
  return fabsf(x);
}

static inline float fmax32(float x, float y) {
  return fmaxf(x, y);
}

static inline float fmin32(float x, float y) {
  return fminf(x, y);
}

static inline float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan32(float x) {
  return isnan(x);
}

static inline bool futrts_isinf32(float x) {
  return isinf(x);
}

#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x) {
  return log(x);
}

static inline float futrts_log2_32(float x) {
  return log2(x);
}

static inline float futrts_log10_32(float x) {
  return log10(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return cosh(x);
}

static inline float futrts_sinh32(float x) {
  return sinh(x);
}

static inline float futrts_tanh32(float x) {
  return tanh(x);
}

static inline float futrts_acosh32(float x) {
  return acosh(x);
}

static inline float futrts_asinh32(float x) {
  return asinh(x);
}

static inline float futrts_atanh32(float x) {
  return atanh(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgamma(x);
}

static inline float futrts_lgamma32(float x) {
  return lgamma(x);
}

static inline float fmod32(float x, float y) {
  return fmod(x, y);
}

static inline float futrts_round32(float x) {
  return rint(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

static inline float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

static inline float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float futrts_log32(float x) {
  return logf(x);
}

static inline float futrts_log2_32(float x) {
  return log2f(x);
}

static inline float futrts_log10_32(float x) {
  return log10f(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrtf(x);
}

static inline float futrts_exp32(float x) {
  return expf(x);
}

static inline float futrts_cos32(float x) {
  return cosf(x);
}

static inline float futrts_sin32(float x) {
  return sinf(x);
}

static inline float futrts_tan32(float x) {
  return tanf(x);
}

static inline float futrts_acos32(float x) {
  return acosf(x);
}

static inline float futrts_asin32(float x) {
  return asinf(x);
}

static inline float futrts_atan32(float x) {
  return atanf(x);
}

static inline float futrts_cosh32(float x) {
  return coshf(x);
}

static inline float futrts_sinh32(float x) {
  return sinhf(x);
}

static inline float futrts_tanh32(float x) {
  return tanhf(x);
}

static inline float futrts_acosh32(float x) {
  return acoshf(x);
}

static inline float futrts_asinh32(float x) {
  return asinhf(x);
}

static inline float futrts_atanh32(float x) {
  return atanhf(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgammaf(x);
}

static inline float futrts_lgamma32(float x) {
  return lgammaf(x);
}

static inline float fmod32(float x, float y) {
  return fmodf(x, y);
}

static inline float futrts_round32(float x) {
  return rintf(x);
}

static inline float futrts_floor32(float x) {
  return floorf(x);
}

static inline float futrts_ceil32(float x) {
  return ceilf(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

static inline int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}

static inline float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}

#ifdef FUTHARK_F64_ENABLED

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline int8_t fptosi_f64_i8(double x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f64_i16(double x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f64_i32(double x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f64_i64(double x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f64_i8(double x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f64_i16(double x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f64_i32(double x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f64_i64(double x) {
  return (uint64_t) x;
}

static inline double fabs64(double x) {
  return fabs(x);
}

static inline double fmax64(double x, double y) {
  return fmax(x, y);
}

static inline double fmin64(double x, double y) {
  return fmin(x, y);
}

static inline double fpow64(double x, double y) {
  return pow(x, y);
}

static inline double futrts_log64(double x) {
  return log(x);
}

static inline double futrts_log2_64(double x) {
  return log2(x);
}

static inline double futrts_log10_64(double x) {
  return log10(x);
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return cosh(x);
}

static inline double futrts_sinh64(double x) {
  return sinh(x);
}

static inline double futrts_tanh64(double x) {
  return tanh(x);
}

static inline double futrts_acosh64(double x) {
  return acosh(x);
}

static inline double futrts_asinh64(double x) {
  return asinh(x);
}

static inline double futrts_atanh64(double x) {
  return atanh(x);
}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

static inline double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

static inline double futrts_gamma64(double x) {
  return tgamma(x);
}

static inline double futrts_lgamma64(double x) {
  return lgamma(x);
}

static inline double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

static inline double futrts_round64(double x) {
  return rint(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline bool futrts_isinf64(double x) {
  return isinf(x);
}

static inline int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

static inline double fmod64(double x, double y) {
  return fmod(x, y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

static inline double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600)
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

static inline f16 fadd16(f16 x, f16 y) {
  return x + y;
}

static inline f16 fsub16(f16 x, f16 y) {
  return x - y;
}

static inline f16 fmul16(f16 x, f16 y) {
  return x * y;
}

static inline bool cmplt16(f16 x, f16 y) {
  return x < y;
}

static inline bool cmple16(f16 x, f16 y) {
  return x <= y;
}

static inline f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

static inline f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

static inline f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

static inline f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

static inline f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

static inline f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

static inline f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

static inline f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

static inline int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

static inline int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

static inline uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

#ifndef EMULATE_F16

#ifdef __OPENCL_VERSION__
static inline f16 fabs16(f16 x) {
  return fabs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#else // Assuming CUDA.

static inline f16 fabs16(f16 x) {
  return fabsf(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

static inline bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}

#ifdef __OPENCL_VERSION__
static inline f16 futrts_log16(f16 x) {
  return log(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return log2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return log10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return cos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return sin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tan(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acos(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asin(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atan(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rint(x);
}

static inline f16 futrts_floor16(f16 x) {
  return floor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}

#else // Assume CUDA.

static inline f16 futrts_log16(f16 x) {
  return hlog(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return hexp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return hcos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return hsin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tanf(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acosf(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asinf(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atanf(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rintf(x);
}

static inline f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
static inline int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
static inline f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#else
static inline int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

static inline f16 fabs16(f16 x) {
  return fabs32(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

static inline bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

static inline bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

static inline f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

static inline f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

static inline f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

static inline f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

static inline f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

static inline f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

static inline f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

static inline f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

static inline f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

static inline int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

static inline int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

static inline f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

static inline f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0) - (x < 0);
}

#endif

#endif

static inline float fpconv_f16_f16(f16 x) {
  return x;
}

static inline float fpconv_f16_f32(f16 x) {
  return x;
}

static inline f16 fpconv_f32_f16(float x) {
  return x;
}

#ifdef FUTHARK_F64_ENABLED

static inline double fpconv_f16_f64(f16 x) {
  return (double) x;
}

static inline f16 fpconv_f64_f16(double x) {
  return (f16) x;
}

#endif


// End of scalar_f16.h.

static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
struct futhark_context_config {
    int debugging;
    int in_use;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->in_use = 0;
    cfg->debugging = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    (void) cfg;
    (void) flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    // Does nothing for this backend.
    (void) cfg;
    (void) detail;
}
struct futhark_context {
    struct futhark_context_config *cfg;
    int detail_memory;
    int debugging;
    int profiling;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int profiling_paused;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    ctx->cfg = cfg;
    ctx->cfg->in_use = 1;
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->debugging;
    ctx->logging = cfg->debugging;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    free_lock(&ctx->lock);
    ctx->cfg->in_use = 0;
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *tuning_param_names[0];
static const char *tuning_param_vars[0];
static const char *tuning_param_classes[0];
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t param_value)
{
    (void) cfg;
    (void) param_name;
    (void) param_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    if (ret != FUTHARK_SUCCESS)
        return ret;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default + size);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (unsigned char *) malloc((size_t) size);
    if (ctx->error == NULL) {
        block->references = (int *) malloc(sizeof(int));
        *block->references = 1;
        block->size = size;
        block->desc = desc;
        ctx->cur_mem_usage_default += size;
        return FUTHARK_SUCCESS;
    } else {
        char *old_error = ctx->error;
        
        ctx->error =
            msgprintf("Failed to allocate memory in %s.\nAttempted allocation: %12lld bytes\nCurrently allocated:  %12lld bytes\n%s",
                      "default space", (long long) size,
                      (long long) ctx->cur_mem_usage_default, old_error);
        free(old_error);
        return FUTHARK_OUT_OF_MEMORY;
    }
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_tuning_param_count(void)
{
    return sizeof(tuning_param_names) / sizeof(tuning_param_names[0]);
}
const char *futhark_get_tuning_param_name(int i)
{
    return tuning_param_names[i];
}
const char *futhark_get_tuning_param_class(int i)
{
    return tuning_param_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) { }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_306813,
                             struct memblock *mem_out_p_306814,
                             struct memblock *mem_out_p_306815,
                             struct memblock Y_mem_299435, int64_t m_292674,
                             int64_t n_292675, int64_t n_p_292677,
                             int64_t q_s_292678, int64_t q_t_292679,
                             int64_t q_l_292680, int64_t d_s_292681,
                             int64_t d_t_292682, int64_t d_l_292683,
                             int64_t jump_s_292684, int64_t jump_t_292685,
                             int64_t jump_l_292686, int64_t n_inner_292687,
                             int64_t n_outer_292688,
                             int64_t jump_threshold_1_292689,
                             int64_t jump_threshold_2_292690,
                             int64_t q_threshold_1_292691,
                             int64_t q_threshold_2_292692);
static int futrts_entry_seasonal_amplitude(struct futhark_context *ctx,
                                           struct memblock *mem_out_p_306923,
                                           struct memblock seasonal_l_mem_299435,
                                           int64_t m_292609, int64_t n_292610);
static int futrts_entry_trend_magnitude(struct futhark_context *ctx,
                                        struct memblock *mem_out_p_306925,
                                        struct memblock trend_l_mem_299435,
                                        int64_t m_292626, int64_t n_292627);

static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_f32_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr =
                          (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 4 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) dim0 * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr =
                          (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 4 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) dim0 * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_1d(struct futhark_context *ctx,
                          struct futhark_f32_1d *arr, float *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 4 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_f32_1d(struct futhark_context *ctx,
                                         struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx,
                                    struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 4 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 4 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) (arr->shape[0] * arr->shape[1]) * 4 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                      arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                         struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_306813,
                             struct memblock *mem_out_p_306814,
                             struct memblock *mem_out_p_306815,
                             struct memblock Y_mem_299435, int64_t m_292674,
                             int64_t n_292675, int64_t n_p_292677,
                             int64_t q_s_292678, int64_t q_t_292679,
                             int64_t q_l_292680, int64_t d_s_292681,
                             int64_t d_t_292682, int64_t d_l_292683,
                             int64_t jump_s_292684, int64_t jump_t_292685,
                             int64_t jump_l_292686, int64_t n_inner_292687,
                             int64_t n_outer_292688,
                             int64_t jump_threshold_1_292689,
                             int64_t jump_threshold_2_292690,
                             int64_t q_threshold_1_292691,
                             int64_t q_threshold_2_292692)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_299438_cached_sizze_306816 = 0;
    unsigned char *mem_299438 = NULL;
    size_t mem_299441_cached_sizze_306817 = 0;
    unsigned char *mem_299441 = NULL;
    size_t mem_299469_cached_sizze_306818 = 0;
    unsigned char *mem_299469 = NULL;
    size_t mem_299472_cached_sizze_306819 = 0;
    unsigned char *mem_299472 = NULL;
    size_t mem_299492_cached_sizze_306820 = 0;
    unsigned char *mem_299492 = NULL;
    size_t mem_299509_cached_sizze_306821 = 0;
    unsigned char *mem_299509 = NULL;
    size_t mem_299512_cached_sizze_306822 = 0;
    unsigned char *mem_299512 = NULL;
    size_t mem_299532_cached_sizze_306823 = 0;
    unsigned char *mem_299532 = NULL;
    size_t mem_299547_cached_sizze_306824 = 0;
    unsigned char *mem_299547 = NULL;
    size_t mem_299587_cached_sizze_306825 = 0;
    unsigned char *mem_299587 = NULL;
    size_t mem_299690_cached_sizze_306826 = 0;
    unsigned char *mem_299690 = NULL;
    size_t mem_299694_cached_sizze_306827 = 0;
    unsigned char *mem_299694 = NULL;
    size_t mem_299747_cached_sizze_306828 = 0;
    unsigned char *mem_299747 = NULL;
    size_t mem_299762_cached_sizze_306829 = 0;
    unsigned char *mem_299762 = NULL;
    size_t mem_299855_cached_sizze_306830 = 0;
    unsigned char *mem_299855 = NULL;
    size_t mem_299860_cached_sizze_306831 = 0;
    unsigned char *mem_299860 = NULL;
    size_t mem_299921_cached_sizze_306832 = 0;
    unsigned char *mem_299921 = NULL;
    size_t mem_300075_cached_sizze_306833 = 0;
    unsigned char *mem_300075 = NULL;
    size_t mem_300079_cached_sizze_306834 = 0;
    unsigned char *mem_300079 = NULL;
    size_t mem_300102_cached_sizze_306835 = 0;
    unsigned char *mem_300102 = NULL;
    size_t mem_300184_cached_sizze_306836 = 0;
    unsigned char *mem_300184 = NULL;
    size_t mem_300188_cached_sizze_306837 = 0;
    unsigned char *mem_300188 = NULL;
    size_t mem_300211_cached_sizze_306838 = 0;
    unsigned char *mem_300211 = NULL;
    size_t mem_300347_cached_sizze_306839 = 0;
    unsigned char *mem_300347 = NULL;
    size_t mem_300395_cached_sizze_306840 = 0;
    unsigned char *mem_300395 = NULL;
    size_t mem_300400_cached_sizze_306841 = 0;
    unsigned char *mem_300400 = NULL;
    size_t mem_301221_cached_sizze_306842 = 0;
    unsigned char *mem_301221 = NULL;
    size_t mem_301391_cached_sizze_306843 = 0;
    unsigned char *mem_301391 = NULL;
    size_t mem_301394_cached_sizze_306844 = 0;
    unsigned char *mem_301394 = NULL;
    size_t mem_301627_cached_sizze_306845 = 0;
    unsigned char *mem_301627 = NULL;
    size_t mem_301630_cached_sizze_306846 = 0;
    unsigned char *mem_301630 = NULL;
    size_t mem_301657_cached_sizze_306847 = 0;
    unsigned char *mem_301657 = NULL;
    size_t mem_301660_cached_sizze_306848 = 0;
    unsigned char *mem_301660 = NULL;
    size_t mem_302555_cached_sizze_306849 = 0;
    unsigned char *mem_302555 = NULL;
    size_t mem_302601_cached_sizze_306850 = 0;
    unsigned char *mem_302601 = NULL;
    size_t mem_302617_cached_sizze_306851 = 0;
    unsigned char *mem_302617 = NULL;
    size_t mem_302630_cached_sizze_306852 = 0;
    unsigned char *mem_302630 = NULL;
    size_t mem_302653_cached_sizze_306853 = 0;
    unsigned char *mem_302653 = NULL;
    size_t mem_302669_cached_sizze_306854 = 0;
    unsigned char *mem_302669 = NULL;
    size_t mem_302682_cached_sizze_306855 = 0;
    unsigned char *mem_302682 = NULL;
    size_t mem_302705_cached_sizze_306856 = 0;
    unsigned char *mem_302705 = NULL;
    size_t mem_302721_cached_sizze_306857 = 0;
    unsigned char *mem_302721 = NULL;
    size_t mem_302734_cached_sizze_306858 = 0;
    unsigned char *mem_302734 = NULL;
    size_t mem_303057_cached_sizze_306859 = 0;
    unsigned char *mem_303057 = NULL;
    size_t mem_303144_cached_sizze_306860 = 0;
    unsigned char *mem_303144 = NULL;
    size_t mem_303147_cached_sizze_306861 = 0;
    unsigned char *mem_303147 = NULL;
    size_t mem_303268_cached_sizze_306862 = 0;
    unsigned char *mem_303268 = NULL;
    size_t mem_303271_cached_sizze_306863 = 0;
    unsigned char *mem_303271 = NULL;
    size_t mem_303298_cached_sizze_306864 = 0;
    unsigned char *mem_303298 = NULL;
    size_t mem_303301_cached_sizze_306865 = 0;
    unsigned char *mem_303301 = NULL;
    size_t mem_303827_cached_sizze_306866 = 0;
    unsigned char *mem_303827 = NULL;
    size_t mem_303842_cached_sizze_306867 = 0;
    unsigned char *mem_303842 = NULL;
    size_t mem_303845_cached_sizze_306868 = 0;
    unsigned char *mem_303845 = NULL;
    size_t mem_303933_cached_sizze_306869 = 0;
    unsigned char *mem_303933 = NULL;
    size_t mem_303948_cached_sizze_306870 = 0;
    unsigned char *mem_303948 = NULL;
    size_t mem_303951_cached_sizze_306871 = 0;
    unsigned char *mem_303951 = NULL;
    size_t mem_304072_cached_sizze_306872 = 0;
    unsigned char *mem_304072 = NULL;
    size_t mem_304087_cached_sizze_306873 = 0;
    unsigned char *mem_304087 = NULL;
    size_t mem_304090_cached_sizze_306874 = 0;
    unsigned char *mem_304090 = NULL;
    size_t mem_304233_cached_sizze_306875 = 0;
    unsigned char *mem_304233 = NULL;
    size_t mem_304248_cached_sizze_306876 = 0;
    unsigned char *mem_304248 = NULL;
    size_t mem_304251_cached_sizze_306877 = 0;
    unsigned char *mem_304251 = NULL;
    size_t mem_304289_cached_sizze_306878 = 0;
    unsigned char *mem_304289 = NULL;
    size_t mem_304354_cached_sizze_306879 = 0;
    unsigned char *mem_304354 = NULL;
    size_t mem_304369_cached_sizze_306880 = 0;
    unsigned char *mem_304369 = NULL;
    size_t mem_304372_cached_sizze_306881 = 0;
    unsigned char *mem_304372 = NULL;
    size_t mem_304421_cached_sizze_306882 = 0;
    unsigned char *mem_304421 = NULL;
    size_t mem_304424_cached_sizze_306883 = 0;
    unsigned char *mem_304424 = NULL;
    size_t mem_304523_cached_sizze_306884 = 0;
    unsigned char *mem_304523 = NULL;
    size_t mem_304538_cached_sizze_306885 = 0;
    unsigned char *mem_304538 = NULL;
    size_t mem_304541_cached_sizze_306886 = 0;
    unsigned char *mem_304541 = NULL;
    size_t mem_304590_cached_sizze_306887 = 0;
    unsigned char *mem_304590 = NULL;
    size_t mem_304593_cached_sizze_306888 = 0;
    unsigned char *mem_304593 = NULL;
    size_t mem_304620_cached_sizze_306889 = 0;
    unsigned char *mem_304620 = NULL;
    size_t mem_304623_cached_sizze_306890 = 0;
    unsigned char *mem_304623 = NULL;
    size_t mem_304744_cached_sizze_306891 = 0;
    unsigned char *mem_304744 = NULL;
    size_t mem_304759_cached_sizze_306892 = 0;
    unsigned char *mem_304759 = NULL;
    size_t mem_304762_cached_sizze_306893 = 0;
    unsigned char *mem_304762 = NULL;
    size_t mem_304850_cached_sizze_306894 = 0;
    unsigned char *mem_304850 = NULL;
    size_t mem_304865_cached_sizze_306895 = 0;
    unsigned char *mem_304865 = NULL;
    size_t mem_304868_cached_sizze_306896 = 0;
    unsigned char *mem_304868 = NULL;
    size_t mem_304989_cached_sizze_306897 = 0;
    unsigned char *mem_304989 = NULL;
    size_t mem_305004_cached_sizze_306898 = 0;
    unsigned char *mem_305004 = NULL;
    size_t mem_305007_cached_sizze_306899 = 0;
    unsigned char *mem_305007 = NULL;
    size_t mem_305236_cached_sizze_306900 = 0;
    unsigned char *mem_305236 = NULL;
    size_t mem_305240_cached_sizze_306901 = 0;
    unsigned char *mem_305240 = NULL;
    size_t mem_305329_cached_sizze_306902 = 0;
    unsigned char *mem_305329 = NULL;
    size_t mem_305348_cached_sizze_306903 = 0;
    unsigned char *mem_305348 = NULL;
    size_t mem_305351_cached_sizze_306904 = 0;
    unsigned char *mem_305351 = NULL;
    size_t mem_305371_cached_sizze_306905 = 0;
    unsigned char *mem_305371 = NULL;
    size_t mem_305411_cached_sizze_306906 = 0;
    unsigned char *mem_305411 = NULL;
    size_t mem_305465_cached_sizze_306907 = 0;
    unsigned char *mem_305465 = NULL;
    size_t mem_305480_cached_sizze_306908 = 0;
    unsigned char *mem_305480 = NULL;
    size_t mem_305496_cached_sizze_306909 = 0;
    unsigned char *mem_305496 = NULL;
    size_t mem_305498_cached_sizze_306910 = 0;
    unsigned char *mem_305498 = NULL;
    size_t mem_305501_cached_sizze_306911 = 0;
    unsigned char *mem_305501 = NULL;
    size_t mem_305555_cached_sizze_306912 = 0;
    unsigned char *mem_305555 = NULL;
    size_t mem_305570_cached_sizze_306913 = 0;
    unsigned char *mem_305570 = NULL;
    size_t mem_305644_cached_sizze_306914 = 0;
    unsigned char *mem_305644 = NULL;
    size_t mem_305647_cached_sizze_306915 = 0;
    unsigned char *mem_305647 = NULL;
    size_t mem_305650_cached_sizze_306916 = 0;
    unsigned char *mem_305650 = NULL;
    size_t mem_305769_cached_sizze_306917 = 0;
    unsigned char *mem_305769 = NULL;
    size_t mem_305773_cached_sizze_306918 = 0;
    unsigned char *mem_305773 = NULL;
    size_t mem_305777_cached_sizze_306919 = 0;
    unsigned char *mem_305777 = NULL;
    size_t mem_305810_cached_sizze_306920 = 0;
    unsigned char *mem_305810 = NULL;
    size_t mem_305813_cached_sizze_306921 = 0;
    unsigned char *mem_305813 = NULL;
    size_t mem_305816_cached_sizze_306922 = 0;
    unsigned char *mem_305816 = NULL;
    struct memblock mem_out_306307;
    
    mem_out_306307.references = NULL;
    
    struct memblock mem_out_306308;
    
    mem_out_306308.references = NULL;
    
    struct memblock mem_out_306309;
    
    mem_out_306309.references = NULL;
    
    double i64_res_292693 = sitofp_i64_f64(n_292675);
    double i64_res_292694 = sitofp_i64_f64(n_p_292677);
    double ceil_arg_292695 = i64_res_292693 / i64_res_292694;
    double ceil_res_292696;
    
    ceil_res_292696 = futrts_ceil64(ceil_arg_292695);
    
    int64_t defunc_0_f_res_292697 = fptosi_f64_i64(ceil_res_292696);
    bool bounds_invalid_upwards_292698 = slt64(n_p_292677, (int64_t) 0);
    bool valid_292699 = !bounds_invalid_upwards_292698;
    bool range_valid_c_292700;
    
    if (!valid_292699) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_p_292677, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:407:29-412:37\n   #4  stl.fut:406:22-413:28\n   #5  stl.fut:463:3-479:36\n   #6  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_292702 = slt64(defunc_0_f_res_292697,
                                               (int64_t) 0);
    bool valid_292703 = !bounds_invalid_upwards_292702;
    bool range_valid_c_292704;
    
    if (!valid_292703) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) defunc_0_f_res_292697,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:408:36-411:52\n   #4  /prelude/soacs.fut:59:3-10\n   #5  /prelude/array.fut:195:3-17\n   #6  utils.fut:6:3-16\n   #7  stl.fut:407:29-412:37\n   #8  stl.fut:406:22-413:28\n   #9  stl.fut:463:3-479:36\n   #10 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_299436 = (int64_t) 8 * m_292674;
    int64_t bytes_299437 = smax64((int64_t) 0, binop_y_299436);
    
    if (mem_299438_cached_sizze_306816 < (size_t) bytes_299437) {
        mem_299438 = realloc(mem_299438, bytes_299437);
        mem_299438_cached_sizze_306816 = bytes_299437;
    }
    if (mem_299441_cached_sizze_306817 < (size_t) bytes_299437) {
        mem_299441 = realloc(mem_299441, bytes_299437);
        mem_299441_cached_sizze_306817 = bytes_299437;
    }
    
    int64_t discard_297397;
    int64_t scanacc_297389 = (int64_t) 0;
    
    for (int64_t i_297393 = 0; i_297393 < m_292674; i_297393++) {
        bool defunc_2_reduce_res_292736;
        bool redout_297384 = 0;
        
        for (int64_t i_297385 = 0; i_297385 < n_p_292677; i_297385++) {
            bool defunc_2_reduce_res_292741;
            bool redout_297382 = 1;
            
            for (int64_t i_297383 = 0; i_297383 < defunc_0_f_res_292697;
                 i_297383++) {
                int64_t x_292746 = mul64(n_p_292677, i_297383);
                int64_t idx_292747 = add64(x_292746, i_297385);
                bool cond_292748 = sle64(n_292675, idx_292747);
                bool defunc_0_f_res_292749;
                
                if (cond_292748) {
                    defunc_0_f_res_292749 = 1;
                } else {
                    bool x_292750 = sle64((int64_t) 0, idx_292747);
                    bool y_292751 = slt64(idx_292747, n_292675);
                    bool bounds_check_292752 = x_292750 && y_292751;
                    bool index_certs_292753;
                    
                    if (!bounds_check_292752) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) idx_292747,
                                      "] out of bounds for array of shape [",
                                      (long long) n_292675, "].",
                                      "-> #0  stl.fut:410:68-73\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:408:36-411:52\n   #5  /prelude/soacs.fut:59:3-10\n   #6  /prelude/array.fut:195:3-17\n   #7  utils.fut:6:3-16\n   #8  stl.fut:407:29-412:37\n   #9  stl.fut:406:22-413:28\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_306309,
                                           "mem_out_306309") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306308,
                                           "mem_out_306308") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306307,
                                           "mem_out_306307") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    float isnan_arg_292754;
                    
                    isnan_arg_292754 = ((float *) Y_mem_299435.mem)[i_297393 *
                                                                    n_292675 +
                                                                    idx_292747];
                    
                    bool isnan_res_292755;
                    
                    isnan_res_292755 = futrts_isnan32(isnan_arg_292754);
                    defunc_0_f_res_292749 = isnan_res_292755;
                }
                
                bool x_292744 = defunc_0_f_res_292749 && redout_297382;
                bool redout_tmp_306314 = x_292744;
                
                redout_297382 = redout_tmp_306314;
            }
            defunc_2_reduce_res_292741 = redout_297382;
            
            bool defunc_1_op_res_292739 = defunc_2_reduce_res_292741 ||
                 redout_297384;
            bool redout_tmp_306313 = defunc_1_op_res_292739;
            
            redout_297384 = redout_tmp_306313;
        }
        defunc_2_reduce_res_292736 = redout_297384;
        
        int64_t defunc_2_lifted_lambda_res_292756 =
                btoi_bool_i64(defunc_2_reduce_res_292736);
        bool is_i_292757 = defunc_2_lifted_lambda_res_292756 == (int64_t) 0;
        bool cond_neg_292758 = !is_i_292757;
        int64_t part_res_292759 = btoi_bool_i64(cond_neg_292758);
        int64_t part_res_292760 = btoi_bool_i64(is_i_292757);
        int64_t zz_292734 = part_res_292760 + scanacc_297389;
        
        ((int64_t *) mem_299438)[i_297393] = zz_292734;
        ((int64_t *) mem_299441)[i_297393] = part_res_292759;
        
        int64_t scanacc_tmp_306310 = zz_292734;
        
        scanacc_297389 = scanacc_tmp_306310;
    }
    discard_297397 = scanacc_297389;
    
    int64_t last_index_292764 = m_292674 - (int64_t) 1;
    bool is_empty_292765 = m_292674 == (int64_t) 0;
    int64_t partition_sizze_292766;
    
    if (is_empty_292765) {
        partition_sizze_292766 = (int64_t) 0;
    } else {
        int64_t last_offset_292767;
        
        last_offset_292767 = ((int64_t *) mem_299438)[last_index_292764];
        partition_sizze_292766 = last_offset_292767;
    }
    
    int64_t binop_x_299466 = m_292674 * n_292675;
    int64_t binop_y_299467 = (int64_t) 4 * binop_x_299466;
    int64_t bytes_299468 = smax64((int64_t) 0, binop_y_299467);
    
    if (mem_299469_cached_sizze_306818 < (size_t) bytes_299468) {
        mem_299469 = realloc(mem_299469, bytes_299468);
        mem_299469_cached_sizze_306818 = bytes_299468;
    }
    if (mem_299472_cached_sizze_306819 < (size_t) bytes_299437) {
        mem_299472 = realloc(mem_299472, bytes_299437);
        mem_299472_cached_sizze_306819 = bytes_299437;
    }
    
    int64_t binop_y_299490 = (int64_t) 4 * n_292675;
    int64_t bytes_299491 = smax64((int64_t) 0, binop_y_299490);
    
    if (mem_299492_cached_sizze_306820 < (size_t) bytes_299491) {
        mem_299492 = realloc(mem_299492, bytes_299491);
        mem_299492_cached_sizze_306820 = bytes_299491;
    }
    for (int64_t write_iter_297398 = 0; write_iter_297398 < m_292674;
         write_iter_297398++) {
        int64_t write_iv_297401;
        
        write_iv_297401 = ((int64_t *) mem_299441)[write_iter_297398];
        
        int64_t write_iv_297402;
        
        write_iv_297402 = ((int64_t *) mem_299438)[write_iter_297398];
        if (n_292675 * (int64_t) 4 > 0)
            memmove(mem_299492 + (int64_t) 0, Y_mem_299435.mem +
                    write_iter_297398 * n_292675 * (int64_t) 4, n_292675 *
                    (int64_t) 4);
        
        bool is_this_one_292777 = write_iv_297401 == (int64_t) 0;
        int64_t this_offset_292778 = (int64_t) -1 + write_iv_297402;
        int64_t total_res_292779;
        
        if (is_this_one_292777) {
            total_res_292779 = this_offset_292778;
        } else {
            total_res_292779 = (int64_t) -1;
        }
        if ((sle64((int64_t) 0, total_res_292779) && slt64(total_res_292779,
                                                           m_292674)) &&
            (sle64((int64_t) 0, (int64_t) 0) && slt64(n_292675 - (int64_t) 1,
                                                      n_292675))) {
            if (n_292675 * (int64_t) 4 > 0)
                memmove(mem_299469 + total_res_292779 * n_292675 * (int64_t) 4,
                        mem_299492 + (int64_t) 0, n_292675 * (int64_t) 4);
        }
        if (sle64((int64_t) 0, total_res_292779) && slt64(total_res_292779,
                                                          m_292674)) {
            ((int64_t *) mem_299472)[total_res_292779] = write_iter_297398;
        }
    }
    
    bool empty_slice_292780 = partition_sizze_292766 == (int64_t) 0;
    int64_t m_292781 = sub64(partition_sizze_292766, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_292782 = sle64((int64_t) 0, m_292781);
    bool i_p_m_t_s_leq_w_292783 = slt64(m_292781, m_292674);
    bool i_lte_j_292784 = sle64((int64_t) 0, partition_sizze_292766);
    bool y_292785 = zzero_leq_i_p_m_t_s_292782 && i_p_m_t_s_leq_w_292783;
    bool y_292786 = i_lte_j_292784 && y_292785;
    bool ok_or_empty_292787 = empty_slice_292780 || y_292786;
    bool index_certs_292788;
    
    if (!ok_or_empty_292787) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) partition_sizze_292766,
                               "] out of bounds for array of shape [",
                               (long long) m_292674, "].",
                               "-> #0  /prelude/soacs.fut:163:6-16\n   #1  stl.fut:416:7-66\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_292791 = sle64((int64_t) 4, n_p_292677);
    bool assert_c_292792;
    
    if (!assert_cond_292791) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (n_p >= 4)",
                               "-> #0  stl.fut:74:13-33\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t x_292793 = smod64(q_t_292679, (int64_t) 2);
    bool assert_cond_292794 = x_292793 == (int64_t) 1;
    bool assert_c_292795;
    
    if (!assert_cond_292794) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x % 2 == 1)",
                               "-> #0  utils.fut:20:3-23\n   #1  /prelude/functional.fut:39:62-64\n   #2  stl.fut:76:13-25\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_292796 = slt64((int64_t) 0, q_t_292679);
    bool assert_c_292797;
    
    if (!assert_cond_292796) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  /prelude/functional.fut:39:59-65\n   #2  stl.fut:76:13-25\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t x_292798 = smod64(q_l_292680, (int64_t) 2);
    bool assert_cond_292799 = x_292798 == (int64_t) 1;
    bool assert_c_292800;
    
    if (!assert_cond_292799) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x % 2 == 1)",
                               "-> #0  utils.fut:20:3-23\n   #1  /prelude/functional.fut:39:62-64\n   #2  stl.fut:77:13-25\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_292801 = slt64((int64_t) 0, q_l_292680);
    bool assert_c_292802;
    
    if (!assert_cond_292801) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  /prelude/functional.fut:39:59-65\n   #2  stl.fut:77:13-25\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_292811 = slt64((int64_t) 0, jump_t_292685);
    bool assert_c_292812;
    
    if (!assert_cond_292811) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  stl.fut:82:16-31\n   #2  stl.fut:419:61-435:77\n   #3  stl.fut:463:3-479:36\n   #4  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_292813 = slt64((int64_t) 0, jump_l_292686);
    bool assert_c_292814;
    
    if (!assert_cond_292813) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  stl.fut:83:16-31\n   #2  stl.fut:419:61-435:77\n   #3  stl.fut:463:3-479:36\n   #4  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_292815 = slt64((int64_t) 0, n_inner_292687);
    bool assert_c_292816;
    
    if (!assert_cond_292815) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  stl.fut:85:17-33\n   #2  stl.fut:419:61-435:77\n   #3  stl.fut:463:3-479:36\n   #4  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool assert_cond_292817 = slt64((int64_t) 0, n_outer_292688);
    bool assert_c_292818;
    
    if (!assert_cond_292817) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:17:3-18\n   #1  stl.fut:86:17-33\n   #2  stl.fut:419:61-435:77\n   #3  stl.fut:463:3-479:36\n   #4  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    double ceil_res_292819;
    
    ceil_res_292819 = futrts_ceil64(ceil_arg_292695);
    
    int64_t defunc_0_f_res_292820 = fptosi_f64_i64(ceil_res_292819);
    int64_t pad_css_len_292821 = add64((int64_t) 2, defunc_0_f_res_292820);
    int64_t y_292822 = mul64((int64_t) 2, n_p_292677);
    int64_t C_len_292823 = add64(n_292675, y_292822);
    bool cond_292824 = jump_s_292684 == (int64_t) 1;
    int64_t s_n_m_292825;
    
    if (cond_292824) {
        s_n_m_292825 = pad_css_len_292821;
    } else {
        bool zzero_292826 = jump_s_292684 == (int64_t) 0;
        bool nonzzero_292827 = !zzero_292826;
        bool nonzzero_cert_292828;
        
        if (!nonzzero_292827) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:93:52-71\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
            if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
                return 1;
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t x_292829 = sdiv64(defunc_0_f_res_292820, jump_s_292684);
        int64_t s_n_m_f_res_292830 = add64((int64_t) 3, x_292829);
        
        s_n_m_292825 = s_n_m_f_res_292830;
    }
    
    bool cond_292831 = jump_l_292686 == (int64_t) 1;
    int64_t l_n_m_292832;
    
    if (cond_292831) {
        l_n_m_292832 = n_292675;
    } else {
        bool zzero_292833 = jump_l_292686 == (int64_t) 0;
        bool nonzzero_292834 = !zzero_292833;
        bool nonzzero_cert_292835;
        
        if (!nonzzero_292834) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:99:42-51\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
            if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
                return 1;
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t x_292836 = sdiv64(n_292675, jump_l_292686);
        int64_t l_n_m_f_res_292837 = add64((int64_t) 1, x_292836);
        
        l_n_m_292832 = l_n_m_f_res_292837;
    }
    
    bool cond_292838 = jump_t_292685 == (int64_t) 1;
    int64_t t_n_m_292839;
    
    if (cond_292838) {
        t_n_m_292839 = n_292675;
    } else {
        bool zzero_292840 = jump_t_292685 == (int64_t) 0;
        bool nonzzero_292841 = !zzero_292840;
        bool nonzzero_cert_292842;
        
        if (!nonzzero_292841) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:103:42-51\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
            if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
                return 1;
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t x_292843 = sdiv64(n_292675, jump_t_292685);
        int64_t t_n_m_f_res_292844 = add64((int64_t) 1, x_292843);
        
        t_n_m_292839 = t_n_m_f_res_292844;
    }
    
    int64_t i_292846 = sub64(n_292675, (int64_t) 1);
    bool x_292847 = sle64((int64_t) 0, i_292846);
    bool y_292848 = slt64(i_292846, n_292675);
    bool bounds_check_292849 = x_292847 && y_292848;
    bool index_certs_292850;
    
    if (!bounds_check_292849) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_292846,
                               "] out of bounds for array of shape [",
                               (long long) n_292675, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:45:13-20\n   #2  stl.fut:110:31-51\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_x_299506 = n_292675 * partition_sizze_292766;
    int64_t binop_y_299507 = (int64_t) 8 * binop_x_299506;
    int64_t bytes_299508 = smax64((int64_t) 0, binop_y_299507);
    
    if (mem_299509_cached_sizze_306821 < (size_t) bytes_299508) {
        mem_299509 = realloc(mem_299509, bytes_299508);
        mem_299509_cached_sizze_306821 = bytes_299508;
    }
    
    int64_t binop_y_299510 = (int64_t) 8 * partition_sizze_292766;
    int64_t bytes_299511 = smax64((int64_t) 0, binop_y_299510);
    
    if (mem_299512_cached_sizze_306822 < (size_t) bytes_299511) {
        mem_299512 = realloc(mem_299512, bytes_299511);
        mem_299512_cached_sizze_306822 = bytes_299511;
    }
    
    int64_t binop_y_299530 = (int64_t) 8 * n_292675;
    int64_t bytes_299531 = smax64((int64_t) 0, binop_y_299530);
    
    if (mem_299532_cached_sizze_306823 < (size_t) bytes_299531) {
        mem_299532 = realloc(mem_299532, bytes_299531);
        mem_299532_cached_sizze_306823 = bytes_299531;
    }
    if (mem_299547_cached_sizze_306824 < (size_t) bytes_299531) {
        mem_299547 = realloc(mem_299547, bytes_299531);
        mem_299547_cached_sizze_306824 = bytes_299531;
    }
    for (int64_t i_306317 = 0; i_306317 < n_292675; i_306317++) {
        ((int64_t *) mem_299547)[i_306317] = (int64_t) -1;
    }
    for (int64_t i_297424 = 0; i_297424 < partition_sizze_292766; i_297424++) {
        int64_t discard_297413;
        int64_t scanacc_297409 = (int64_t) 0;
        
        for (int64_t i_297411 = 0; i_297411 < n_292675; i_297411++) {
            float x_292858;
            
            x_292858 = ((float *) mem_299469)[i_297424 * n_292675 + i_297411];
            
            bool isnan_res_292859;
            
            isnan_res_292859 = futrts_isnan32(x_292858);
            
            bool defunc_0_p_res_292860 = !isnan_res_292859;
            int64_t defunc_0_f_res_292861 =
                    btoi_bool_i64(defunc_0_p_res_292860);
            int64_t defunc_1_op_res_292857 = add64(defunc_0_f_res_292861,
                                                   scanacc_297409);
            
            ((int64_t *) mem_299532)[i_297411] = defunc_1_op_res_292857;
            
            int64_t scanacc_tmp_306320 = defunc_1_op_res_292857;
            
            scanacc_297409 = scanacc_tmp_306320;
        }
        discard_297413 = scanacc_297409;
        if (n_292675 * (int64_t) 8 > 0)
            memmove(mem_299509 + i_297424 * n_292675 * (int64_t) 8, mem_299547 +
                    (int64_t) 0, n_292675 * (int64_t) 8);
        for (int64_t write_iter_297414 = 0; write_iter_297414 < n_292675;
             write_iter_297414++) {
            float write_iv_297416;
            
            write_iv_297416 = ((float *) mem_299469)[i_297424 * n_292675 +
                                                     write_iter_297414];
            
            int64_t write_iv_297417;
            
            write_iv_297417 = ((int64_t *) mem_299532)[write_iter_297414];
            
            bool isnan_res_292868;
            
            isnan_res_292868 = futrts_isnan32(write_iv_297416);
            
            bool defunc_0_p_res_292869 = !isnan_res_292868;
            int64_t defunc_1_f_res_292870;
            
            if (defunc_0_p_res_292869) {
                int64_t defunc_1_f_res_t_res_292871 = sub64(write_iv_297417,
                                                            (int64_t) 1);
                
                defunc_1_f_res_292870 = defunc_1_f_res_t_res_292871;
            } else {
                defunc_1_f_res_292870 = (int64_t) -1;
            }
            if ((sle64((int64_t) 0, i_297424) && slt64(i_297424,
                                                       partition_sizze_292766)) &&
                (sle64((int64_t) 0, defunc_1_f_res_292870) &&
                 slt64(defunc_1_f_res_292870, n_292675))) {
                ((int64_t *) mem_299509)[i_297424 * n_292675 +
                                         defunc_1_f_res_292870] =
                    write_iter_297414;
            }
        }
        if ((int64_t) 8 > 0)
            memmove(mem_299512 + i_297424 * (int64_t) 8, mem_299532 +
                    ((int64_t) 0 + (int64_t) 1 * i_292846) * (int64_t) 8,
                    (int64_t) 8);
    }
    
    bool bounds_invalid_upwards_292874 = slt64(defunc_0_f_res_292820,
                                               (int64_t) 0);
    bool valid_292875 = !bounds_invalid_upwards_292874;
    bool range_valid_c_292876;
    
    if (!valid_292875) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) defunc_0_f_res_292820,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:117:20-123:36\n   #4  /prelude/soacs.fut:59:3-10\n   #5  /prelude/array.fut:195:3-17\n   #6  utils.fut:6:3-16\n   #7  stl.fut:115:12-124:20\n   #8  stl.fut:114:5-125:11\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_x_299583 = n_p_292677 * partition_sizze_292766;
    int64_t binop_x_299584 = defunc_0_f_res_292820 * binop_x_299583;
    int64_t binop_y_299585 = (int64_t) 8 * binop_x_299584;
    int64_t bytes_299586 = smax64((int64_t) 0, binop_y_299585);
    
    if (mem_299587_cached_sizze_306825 < (size_t) bytes_299586) {
        mem_299587 = realloc(mem_299587, bytes_299586);
        mem_299587_cached_sizze_306825 = bytes_299586;
    }
    
    int64_t ctx_val_299600 = n_p_292677 * defunc_0_f_res_292820;
    
    for (int64_t i_297437 = 0; i_297437 < partition_sizze_292766; i_297437++) {
        for (int64_t i_297433 = 0; i_297433 < n_p_292677; i_297433++) {
            for (int64_t i_297429 = 0; i_297429 < defunc_0_f_res_292820;
                 i_297429++) {
                int64_t y_292884 = mul64(n_p_292677, i_297429);
                int64_t new_i_292885 = add64(y_292884, i_297433);
                bool cond_292886 = slt64(i_292846, new_i_292885);
                double defunc_0_f_res_292887;
                
                if (cond_292886) {
                    defunc_0_f_res_292887 = NAN;
                } else {
                    bool x_292888 = sle64((int64_t) 0, new_i_292885);
                    bool y_292889 = slt64(new_i_292885, n_292675);
                    bool bounds_check_292890 = x_292888 && y_292889;
                    bool index_certs_292891;
                    
                    if (!bounds_check_292890) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) new_i_292885,
                                      "] out of bounds for array of shape [",
                                      (long long) n_292675, "].",
                                      "-> #0  stl.fut:122:39-46\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:117:20-123:36\n   #5  /prelude/soacs.fut:59:3-10\n   #6  /prelude/array.fut:195:3-17\n   #7  utils.fut:6:3-16\n   #8  stl.fut:115:12-124:20\n   #9  stl.fut:114:5-125:11\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_306309,
                                           "mem_out_306309") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306308,
                                           "mem_out_306308") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306307,
                                           "mem_out_306307") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    float f32_arg_292892;
                    
                    f32_arg_292892 = ((float *) mem_299469)[i_297437 *
                                                            n_292675 +
                                                            new_i_292885];
                    
                    double f32_res_292893 = fpconv_f32_f64(f32_arg_292892);
                    
                    defunc_0_f_res_292887 = f32_res_292893;
                }
                ((double *) mem_299587)[i_297437 * ctx_val_299600 + i_297433 *
                                        defunc_0_f_res_292820 + i_297429] =
                    defunc_0_f_res_292887;
            }
        }
    }
    
    int64_t i_292895 = sub64(defunc_0_f_res_292820, (int64_t) 1);
    bool x_292896 = sle64((int64_t) 0, i_292895);
    bool y_292897 = slt64(i_292895, defunc_0_f_res_292820);
    bool bounds_check_292898 = x_292896 && y_292897;
    bool index_certs_292899;
    
    if (!bounds_check_292898) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_292895,
                               "] out of bounds for array of shape [",
                               (long long) defunc_0_f_res_292820, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:45:13-20\n   #2  stl.fut:131:51-67\n   #3  stl.fut:130:12-133:21\n   #4  stl.fut:129:5-134:16\n   #5  stl.fut:419:61-435:77\n   #6  stl.fut:463:3-479:36\n   #7  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (mem_299690_cached_sizze_306826 < (size_t) bytes_299586) {
        mem_299690 = realloc(mem_299690, bytes_299586);
        mem_299690_cached_sizze_306826 = bytes_299586;
    }
    
    int64_t binop_y_299692 = (int64_t) 8 * binop_x_299583;
    int64_t bytes_299693 = smax64((int64_t) 0, binop_y_299692);
    
    if (mem_299694_cached_sizze_306827 < (size_t) bytes_299693) {
        mem_299694 = realloc(mem_299694, bytes_299693);
        mem_299694_cached_sizze_306827 = bytes_299693;
    }
    
    int64_t binop_y_299745 = (int64_t) 8 * defunc_0_f_res_292820;
    int64_t bytes_299746 = smax64((int64_t) 0, binop_y_299745);
    
    if (mem_299747_cached_sizze_306828 < (size_t) bytes_299746) {
        mem_299747 = realloc(mem_299747, bytes_299746);
        mem_299747_cached_sizze_306828 = bytes_299746;
    }
    if (mem_299762_cached_sizze_306829 < (size_t) bytes_299746) {
        mem_299762 = realloc(mem_299762, bytes_299746);
        mem_299762_cached_sizze_306829 = bytes_299746;
    }
    for (int64_t i_306326 = 0; i_306326 < defunc_0_f_res_292820; i_306326++) {
        ((int64_t *) mem_299762)[i_306326] = (int64_t) -1;
    }
    for (int64_t i_297462 = 0; i_297462 < partition_sizze_292766; i_297462++) {
        for (int64_t i_297455 = 0; i_297455 < n_p_292677; i_297455++) {
            int64_t discard_297444;
            int64_t scanacc_297440 = (int64_t) 0;
            
            for (int64_t i_297442 = 0; i_297442 < defunc_0_f_res_292820;
                 i_297442++) {
                double x_292910;
                
                x_292910 = ((double *) mem_299587)[i_297462 * ctx_val_299600 +
                                                   i_297455 *
                                                   defunc_0_f_res_292820 +
                                                   i_297442];
                
                bool isnan_res_292911;
                
                isnan_res_292911 = futrts_isnan64(x_292910);
                
                bool defunc_0_p_res_292912 = !isnan_res_292911;
                int64_t defunc_0_f_res_292913 =
                        btoi_bool_i64(defunc_0_p_res_292912);
                int64_t defunc_1_op_res_292909 = add64(defunc_0_f_res_292913,
                                                       scanacc_297440);
                
                ((int64_t *) mem_299747)[i_297442] = defunc_1_op_res_292909;
                
                int64_t scanacc_tmp_306331 = defunc_1_op_res_292909;
                
                scanacc_297440 = scanacc_tmp_306331;
            }
            discard_297444 = scanacc_297440;
            if (defunc_0_f_res_292820 * (int64_t) 8 > 0)
                memmove(mem_299690 + (i_297462 * ctx_val_299600 + i_297455 *
                                      defunc_0_f_res_292820) * (int64_t) 8,
                        mem_299762 + (int64_t) 0, defunc_0_f_res_292820 *
                        (int64_t) 8);
            for (int64_t write_iter_297445 = 0; write_iter_297445 <
                 defunc_0_f_res_292820; write_iter_297445++) {
                double write_iv_297447;
                
                write_iv_297447 = ((double *) mem_299587)[i_297462 *
                                                          ctx_val_299600 +
                                                          i_297455 *
                                                          defunc_0_f_res_292820 +
                                                          write_iter_297445];
                
                int64_t write_iv_297448;
                
                write_iv_297448 = ((int64_t *) mem_299747)[write_iter_297445];
                
                bool isnan_res_292920;
                
                isnan_res_292920 = futrts_isnan64(write_iv_297447);
                
                bool defunc_0_p_res_292921 = !isnan_res_292920;
                int64_t defunc_1_f_res_292922;
                
                if (defunc_0_p_res_292921) {
                    int64_t defunc_1_f_res_t_res_292923 = sub64(write_iv_297448,
                                                                (int64_t) 1);
                    
                    defunc_1_f_res_292922 = defunc_1_f_res_t_res_292923;
                } else {
                    defunc_1_f_res_292922 = (int64_t) -1;
                }
                if (((sle64((int64_t) 0, i_297462) && slt64(i_297462,
                                                            partition_sizze_292766)) &&
                     (sle64((int64_t) 0, i_297455) && slt64(i_297455,
                                                            n_p_292677))) &&
                    (sle64((int64_t) 0, defunc_1_f_res_292922) &&
                     slt64(defunc_1_f_res_292922, defunc_0_f_res_292820))) {
                    ((int64_t *) mem_299690)[i_297462 * ctx_val_299600 +
                                             i_297455 * defunc_0_f_res_292820 +
                                             defunc_1_f_res_292922] =
                        write_iter_297445;
                }
            }
            if ((int64_t) 8 > 0)
                memmove(mem_299694 + (i_297462 * n_p_292677 + i_297455) *
                        (int64_t) 8, mem_299747 + ((int64_t) 0 + (int64_t) 1 *
                                                   i_292895) * (int64_t) 8,
                        (int64_t) 8);
        }
    }
    
    int64_t min_res_292926 = smin64(q_s_292678, defunc_0_f_res_292820);
    bool bounds_invalid_upwards_292927 = slt64(s_n_m_292825, (int64_t) 0);
    bool valid_292928 = !bounds_invalid_upwards_292927;
    bool range_valid_c_292929;
    
    if (!valid_292928) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) s_n_m_292825, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:638:3-665:10\n   #4  loess.fut:712:15-50\n   #5  stl.fut:140:20-80\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:139:12-141:40\n   #9  /prelude/soacs.fut:67:19-23\n   #10 /prelude/soacs.fut:67:3-37\n   #11 stl.fut:138:5-142:36\n   #12 stl.fut:419:61-435:77\n   #13 stl.fut:463:3-479:36\n   #14 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool loop_cond_292931 = slt64((int64_t) 1, min_res_292926);
    double i64_res_292932 = sitofp_i64_f64(q_s_292678);
    int64_t binop_x_299852 = s_n_m_292825 * binop_x_299583;
    int64_t binop_y_299853 = (int64_t) 8 * binop_x_299852;
    int64_t bytes_299854 = smax64((int64_t) 0, binop_y_299853);
    
    if (mem_299855_cached_sizze_306830 < (size_t) bytes_299854) {
        mem_299855 = realloc(mem_299855, bytes_299854);
        mem_299855_cached_sizze_306830 = bytes_299854;
    }
    if (mem_299860_cached_sizze_306831 < (size_t) bytes_299854) {
        mem_299860 = realloc(mem_299860, bytes_299854);
        mem_299860_cached_sizze_306831 = bytes_299854;
    }
    
    int64_t ctx_val_299884 = n_p_292677 * s_n_m_292825;
    int64_t binop_y_299919 = (int64_t) 8 * defunc_0_f_res_292820;
    int64_t bytes_299920 = smax64((int64_t) 0, binop_y_299919);
    
    if (mem_299921_cached_sizze_306832 < (size_t) bytes_299920) {
        mem_299921 = realloc(mem_299921, bytes_299920);
        mem_299921_cached_sizze_306832 = bytes_299920;
    }
    for (int64_t i_297487 = 0; i_297487 < partition_sizze_292766; i_297487++) {
        for (int64_t i_297480 = 0; i_297480 < n_p_292677; i_297480++) {
            int64_t x_292940;
            
            x_292940 = ((int64_t *) mem_299694)[i_297487 * n_p_292677 +
                                                i_297480];
            for (int64_t i_297467 = 0; i_297467 < defunc_0_f_res_292820;
                 i_297467++) {
                int64_t x_292942;
                
                x_292942 = ((int64_t *) mem_299690)[i_297487 * ctx_val_299600 +
                                                    i_297480 *
                                                    defunc_0_f_res_292820 +
                                                    i_297467];
                
                int64_t defunc_0_f_res_292943 = add64((int64_t) 1, x_292942);
                
                ((int64_t *) mem_299921)[i_297467] = defunc_0_f_res_292943;
            }
            
            int64_t min_arg_292944 = sub64(x_292940, (int64_t) 1);
            int64_t min_arg_292945 = sub64(x_292940, min_res_292926);
            int64_t min_res_292946 = smin64(q_s_292678, x_292940);
            double i64_res_292947 = sitofp_i64_f64(x_292940);
            double x_292948 = i64_res_292932 - i64_res_292947;
            double max_arg_292949 = x_292948 / 2.0;
            double max_res_292950 = fmax64(0.0, max_arg_292949);
            
            for (int64_t i_297473 = 0; i_297473 < s_n_m_292825; i_297473++) {
                bool cond_292954 = i_297473 == (int64_t) 0;
                int64_t defunc_0_m_fun_res_292955;
                
                if (cond_292954) {
                    defunc_0_m_fun_res_292955 = (int64_t) 0;
                } else {
                    int64_t y_292956 = sub64(s_n_m_292825, (int64_t) 1);
                    bool cond_292957 = i_297473 == y_292956;
                    int64_t defunc_0_m_fun_res_f_res_292958;
                    
                    if (cond_292957) {
                        int64_t defunc_0_m_fun_res_f_res_t_res_292959 =
                                sub64(pad_css_len_292821, (int64_t) 1);
                        
                        defunc_0_m_fun_res_f_res_292958 =
                            defunc_0_m_fun_res_f_res_t_res_292959;
                    } else {
                        int64_t x_292960 = sub64(i_297473, (int64_t) 1);
                        int64_t x_292961 = mul64(jump_s_292684, x_292960);
                        int64_t min_arg_292962 = add64((int64_t) 1, x_292961);
                        int64_t min_res_292963 = smin64(defunc_0_f_res_292820,
                                                        min_arg_292962);
                        
                        defunc_0_m_fun_res_f_res_292958 = min_res_292963;
                    }
                    defunc_0_m_fun_res_292955 = defunc_0_m_fun_res_f_res_292958;
                }
                
                bool init_idx_292964;
                int64_t init_idx_292965;
                int64_t init_idx_292966;
                bool loop_while_292967;
                int64_t low_292968;
                int64_t high_292969;
                
                loop_while_292967 = x_292896;
                low_292968 = (int64_t) 0;
                high_292969 = i_292895;
                while (loop_while_292967) {
                    int64_t x_292970 = add64(low_292968, high_292969);
                    int64_t mid_292971 = sdiv64(x_292970, (int64_t) 2);
                    bool x_292972 = sle64((int64_t) 0, mid_292971);
                    bool y_292973 = slt64(mid_292971, defunc_0_f_res_292820);
                    bool bounds_check_292974 = x_292972 && y_292973;
                    bool index_certs_292975;
                    
                    if (!bounds_check_292974) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) mid_292971,
                                      "] out of bounds for array of shape [",
                                      (long long) defunc_0_f_res_292820, "].",
                                      "-> #0  loess.fut:645:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:712:15-50\n   #6  stl.fut:140:20-80\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:139:12-141:40\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:138:5-142:36\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_306309,
                                           "mem_out_306309") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306308,
                                           "mem_out_306308") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306307,
                                           "mem_out_306307") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t mid_id_292976;
                    
                    mid_id_292976 = ((int64_t *) mem_299921)[mid_292971];
                    
                    bool cond_292977 = slt64(mid_id_292976, (int64_t) 0);
                    int64_t mid_idx_292978;
                    
                    if (cond_292977) {
                        mid_idx_292978 = (int64_t) 9223372036854775807;
                    } else {
                        mid_idx_292978 = mid_id_292976;
                    }
                    
                    bool cond_292979 = sle64(defunc_0_m_fun_res_292955,
                                             mid_idx_292978);
                    int64_t loopres_292980;
                    int64_t loopres_292981;
                    
                    if (cond_292979) {
                        int64_t loopres_t_res_292982 = sub64(mid_292971,
                                                             (int64_t) 1);
                        
                        loopres_292980 = low_292968;
                        loopres_292981 = loopres_t_res_292982;
                    } else {
                        int64_t loopres_f_res_292983 = add64((int64_t) 1,
                                                             mid_292971);
                        
                        loopres_292980 = loopres_f_res_292983;
                        loopres_292981 = high_292969;
                    }
                    
                    bool loop_cond_292984 = sle64(loopres_292980,
                                                  loopres_292981);
                    bool loop_while_tmp_306341 = loop_cond_292984;
                    int64_t low_tmp_306342 = loopres_292980;
                    int64_t high_tmp_306343 = loopres_292981;
                    
                    loop_while_292967 = loop_while_tmp_306341;
                    low_292968 = low_tmp_306342;
                    high_292969 = high_tmp_306343;
                }
                init_idx_292964 = loop_while_292967;
                init_idx_292965 = low_292968;
                init_idx_292966 = high_292969;
                
                bool idx_292985;
                int64_t idx_292986;
                int64_t idx_292987;
                int64_t idx_292988;
                bool loop_while_292989;
                int64_t l_idx_292990;
                int64_t r_idx_292991;
                int64_t span_292992;
                
                loop_while_292989 = loop_cond_292931;
                l_idx_292990 = init_idx_292965;
                r_idx_292991 = init_idx_292965;
                span_292992 = (int64_t) 1;
                while (loop_while_292989) {
                    int64_t max_arg_292993 = sub64(l_idx_292990, (int64_t) 1);
                    int64_t max_res_292994 = smax64((int64_t) 0,
                                                    max_arg_292993);
                    int64_t min_arg_292995 = add64((int64_t) 1, r_idx_292991);
                    int64_t min_res_292996 = smin64(min_arg_292944,
                                                    min_arg_292995);
                    bool x_292997 = sle64((int64_t) 0, max_res_292994);
                    bool y_292998 = slt64(max_res_292994,
                                          defunc_0_f_res_292820);
                    bool bounds_check_292999 = x_292997 && y_292998;
                    bool index_certs_293000;
                    
                    if (!bounds_check_292999) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) max_res_292994,
                                      "] out of bounds for array of shape [",
                                      (long long) defunc_0_f_res_292820, "].",
                                      "-> #0  loess.fut:655:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:712:15-50\n   #6  stl.fut:140:20-80\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:139:12-141:40\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:138:5-142:36\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_306309,
                                           "mem_out_306309") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306308,
                                           "mem_out_306308") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306307,
                                           "mem_out_306307") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t x_293001;
                    
                    x_293001 = ((int64_t *) mem_299921)[max_res_292994];
                    
                    int64_t abs_arg_293002 = sub64(x_293001,
                                                   defunc_0_m_fun_res_292955);
                    int64_t abs_res_293003 = abs64(abs_arg_293002);
                    bool x_293004 = sle64((int64_t) 0, min_res_292996);
                    bool y_293005 = slt64(min_res_292996,
                                          defunc_0_f_res_292820);
                    bool bounds_check_293006 = x_293004 && y_293005;
                    bool index_certs_293007;
                    
                    if (!bounds_check_293006) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_292996,
                                      "] out of bounds for array of shape [",
                                      (long long) defunc_0_f_res_292820, "].",
                                      "-> #0  loess.fut:656:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:712:15-50\n   #6  stl.fut:140:20-80\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:139:12-141:40\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:138:5-142:36\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_out_306309,
                                           "mem_out_306309") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306308,
                                           "mem_out_306308") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306307,
                                           "mem_out_306307") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t x_293008;
                    
                    x_293008 = ((int64_t *) mem_299921)[min_res_292996];
                    
                    int64_t abs_arg_293009 = sub64(x_293008,
                                                   defunc_0_m_fun_res_292955);
                    int64_t abs_res_293010 = abs64(abs_arg_293009);
                    bool cond_293011 = max_res_292994 == l_idx_292990;
                    int64_t loopres_293012;
                    int64_t loopres_293013;
                    int64_t loopres_293014;
                    
                    if (cond_293011) {
                        loopres_293012 = l_idx_292990;
                        loopres_293013 = r_idx_292991;
                        loopres_293014 = min_res_292926;
                    } else {
                        bool cond_293015 = slt64(abs_res_293003,
                                                 abs_res_293010);
                        bool cond_f_res_293016 = min_res_292996 == r_idx_292991;
                        bool x_293017 = !cond_293015;
                        bool y_293018 = cond_f_res_293016 && x_293017;
                        bool cond_293019 = cond_293015 || y_293018;
                        int64_t loopres_f_res_293020;
                        
                        if (cond_293019) {
                            loopres_f_res_293020 = max_res_292994;
                        } else {
                            loopres_f_res_293020 = l_idx_292990;
                        }
                        
                        int64_t loopres_f_res_293021;
                        
                        if (cond_293019) {
                            loopres_f_res_293021 = r_idx_292991;
                        } else {
                            loopres_f_res_293021 = min_res_292996;
                        }
                        
                        int64_t loopres_f_res_293022;
                        
                        if (cond_293019) {
                            int64_t loopres_f_res_t_res_293023 =
                                    add64((int64_t) 1, span_292992);
                            
                            loopres_f_res_293022 = loopres_f_res_t_res_293023;
                        } else {
                            int64_t loopres_f_res_f_res_293024 =
                                    add64((int64_t) 1, span_292992);
                            
                            loopres_f_res_293022 = loopres_f_res_f_res_293024;
                        }
                        loopres_293012 = loopres_f_res_293020;
                        loopres_293013 = loopres_f_res_293021;
                        loopres_293014 = loopres_f_res_293022;
                    }
                    
                    bool loop_cond_293025 = slt64(loopres_293014,
                                                  min_res_292926);
                    bool loop_while_tmp_306344 = loop_cond_293025;
                    int64_t l_idx_tmp_306345 = loopres_293012;
                    int64_t r_idx_tmp_306346 = loopres_293013;
                    int64_t span_tmp_306347 = loopres_293014;
                    
                    loop_while_292989 = loop_while_tmp_306344;
                    l_idx_292990 = l_idx_tmp_306345;
                    r_idx_292991 = r_idx_tmp_306346;
                    span_292992 = span_tmp_306347;
                }
                idx_292985 = loop_while_292989;
                idx_292986 = l_idx_292990;
                idx_292987 = r_idx_292991;
                idx_292988 = span_292992;
                
                int64_t min_res_293026 = smin64(min_arg_292945, idx_292986);
                int64_t max_res_293027 = smax64((int64_t) 0, min_res_293026);
                int64_t defunc_0_m_fun_res_293028;
                
                if (cond_292954) {
                    defunc_0_m_fun_res_293028 = (int64_t) 0;
                } else {
                    int64_t y_293029 = sub64(s_n_m_292825, (int64_t) 1);
                    bool cond_293030 = i_297473 == y_293029;
                    int64_t defunc_0_m_fun_res_f_res_293031;
                    
                    if (cond_293030) {
                        int64_t defunc_0_m_fun_res_f_res_t_res_293032 =
                                sub64(pad_css_len_292821, (int64_t) 1);
                        
                        defunc_0_m_fun_res_f_res_293031 =
                            defunc_0_m_fun_res_f_res_t_res_293032;
                    } else {
                        int64_t x_293033 = sub64(i_297473, (int64_t) 1);
                        int64_t x_293034 = mul64(jump_s_292684, x_293033);
                        int64_t min_arg_293035 = add64((int64_t) 1, x_293034);
                        int64_t min_res_293036 = smin64(defunc_0_f_res_292820,
                                                        min_arg_293035);
                        
                        defunc_0_m_fun_res_f_res_293031 = min_res_293036;
                    }
                    defunc_0_m_fun_res_293028 = defunc_0_m_fun_res_f_res_293031;
                }
                
                int64_t x_293037 = add64(min_res_292946, max_res_293027);
                int64_t r_293038 = sub64(x_293037, (int64_t) 1);
                bool x_293039 = sle64((int64_t) 0, r_293038);
                bool y_293040 = slt64(r_293038, defunc_0_f_res_292820);
                bool bounds_check_293041 = x_293039 && y_293040;
                bool index_certs_293042;
                
                if (!bounds_check_293041) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) r_293038,
                                  "] out of bounds for array of shape [",
                                  (long long) defunc_0_f_res_292820, "].",
                                  "-> #0  loess.fut:680:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:675:3-683:25\n   #4  loess.fut:713:16-54\n   #5  stl.fut:140:20-80\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:139:12-141:40\n   #9  /prelude/soacs.fut:67:19-23\n   #10 /prelude/soacs.fut:67:3-37\n   #11 stl.fut:138:5-142:36\n   #12 stl.fut:419:61-435:77\n   #13 stl.fut:463:3-479:36\n   #14 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_293043;
                
                x_293043 = ((int64_t *) mem_299921)[r_293038];
                
                int64_t abs_arg_293044 = sub64(x_293043,
                                               defunc_0_m_fun_res_293028);
                int64_t abs_res_293045 = abs64(abs_arg_293044);
                bool x_293046 = sle64((int64_t) 0, max_res_293027);
                bool y_293047 = slt64(max_res_293027, defunc_0_f_res_292820);
                bool bounds_check_293048 = x_293046 && y_293047;
                bool index_certs_293049;
                
                if (!bounds_check_293048) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_293027,
                                  "] out of bounds for array of shape [",
                                  (long long) defunc_0_f_res_292820, "].",
                                  "-> #0  loess.fut:679:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:675:3-683:25\n   #4  loess.fut:713:16-54\n   #5  stl.fut:140:20-80\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:139:12-141:40\n   #9  /prelude/soacs.fut:67:19-23\n   #10 /prelude/soacs.fut:67:3-37\n   #11 stl.fut:138:5-142:36\n   #12 stl.fut:419:61-435:77\n   #13 stl.fut:463:3-479:36\n   #14 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_293050;
                
                x_293050 = ((int64_t *) mem_299921)[max_res_293027];
                
                int64_t abs_arg_293051 = sub64(x_293050,
                                               defunc_0_m_fun_res_293028);
                int64_t abs_res_293052 = abs64(abs_arg_293051);
                int64_t max_res_293053 = smax64(abs_res_293045, abs_res_293052);
                double defunc_0_f_res_293054 = sitofp_i64_f64(max_res_293053);
                double defunc_1_f_res_293055 = max_res_292950 +
                       defunc_0_f_res_293054;
                
                ((double *) mem_299860)[i_297487 * ctx_val_299884 + i_297480 *
                                        s_n_m_292825 + i_297473] =
                    defunc_1_f_res_293055;
                ((int64_t *) mem_299855)[i_297487 * ctx_val_299884 + i_297480 *
                                         s_n_m_292825 + i_297473] =
                    max_res_293027;
            }
        }
    }
    
    int64_t min_res_293058 = smin64(n_292675, q_l_292680);
    bool bounds_invalid_upwards_293059 = slt64(l_n_m_292832, (int64_t) 0);
    bool valid_293060 = !bounds_invalid_upwards_293059;
    bool range_valid_c_293061;
    
    if (!valid_293060) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) l_n_m_292832, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:638:3-665:10\n   #4  loess.fut:698:15-61\n   #5  stl.fut:148:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:146:5-149:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool loop_cond_293063 = slt64((int64_t) 1, min_res_293058);
    double i64_res_293064 = sitofp_i64_f64(q_l_292680);
    int64_t binop_x_300072 = partition_sizze_292766 * l_n_m_292832;
    int64_t binop_y_300073 = (int64_t) 8 * binop_x_300072;
    int64_t bytes_300074 = smax64((int64_t) 0, binop_y_300073);
    
    if (mem_300075_cached_sizze_306833 < (size_t) bytes_300074) {
        mem_300075 = realloc(mem_300075, bytes_300074);
        mem_300075_cached_sizze_306833 = bytes_300074;
    }
    if (mem_300079_cached_sizze_306834 < (size_t) bytes_300074) {
        mem_300079 = realloc(mem_300079, bytes_300074);
        mem_300079_cached_sizze_306834 = bytes_300074;
    }
    
    int64_t binop_y_300100 = (int64_t) 8 * n_292675;
    int64_t bytes_300101 = smax64((int64_t) 0, binop_y_300100);
    
    if (mem_300102_cached_sizze_306835 < (size_t) bytes_300101) {
        mem_300102 = realloc(mem_300102, bytes_300101);
        mem_300102_cached_sizze_306835 = bytes_300101;
    }
    for (int64_t i_297505 = 0; i_297505 < partition_sizze_292766; i_297505++) {
        int64_t x_293068;
        
        x_293068 = ((int64_t *) mem_299512)[i_297505];
        for (int64_t i_297492 = 0; i_297492 < n_292675; i_297492++) {
            int64_t x_293070;
            
            x_293070 = ((int64_t *) mem_299509)[i_297505 * n_292675 + i_297492];
            
            int64_t defunc_0_f_res_293071 = add64((int64_t) 1, x_293070);
            
            ((int64_t *) mem_300102)[i_297492] = defunc_0_f_res_293071;
        }
        
        int64_t min_arg_293072 = sub64(x_293068, (int64_t) 1);
        int64_t min_arg_293073 = sub64(x_293068, min_res_293058);
        int64_t min_res_293074 = smin64(q_l_292680, x_293068);
        double i64_res_293075 = sitofp_i64_f64(x_293068);
        double x_293076 = i64_res_293064 - i64_res_293075;
        double max_arg_293077 = x_293076 / 2.0;
        double max_res_293078 = fmax64(0.0, max_arg_293077);
        
        for (int64_t i_297498 = 0; i_297498 < l_n_m_292832; i_297498++) {
            int64_t min_arg_293082 = mul64(jump_l_292686, i_297498);
            int64_t min_res_293083 = smin64(i_292846, min_arg_293082);
            int64_t defunc_0_g_res_293084 = add64((int64_t) 1, min_res_293083);
            bool init_idx_293085;
            int64_t init_idx_293086;
            int64_t init_idx_293087;
            bool loop_while_293088;
            int64_t low_293089;
            int64_t high_293090;
            
            loop_while_293088 = x_292847;
            low_293089 = (int64_t) 0;
            high_293090 = i_292846;
            while (loop_while_293088) {
                int64_t x_293091 = add64(low_293089, high_293090);
                int64_t mid_293092 = sdiv64(x_293091, (int64_t) 2);
                bool x_293093 = sle64((int64_t) 0, mid_293092);
                bool y_293094 = slt64(mid_293092, n_292675);
                bool bounds_check_293095 = x_293093 && y_293094;
                bool index_certs_293096;
                
                if (!bounds_check_293095) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_293092,
                                  "] out of bounds for array of shape [",
                                  (long long) n_292675, "].",
                                  "-> #0  loess.fut:645:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:698:15-61\n   #6  stl.fut:148:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:146:5-149:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t mid_id_293097;
                
                mid_id_293097 = ((int64_t *) mem_300102)[mid_293092];
                
                bool cond_293098 = slt64(mid_id_293097, (int64_t) 0);
                int64_t mid_idx_293099;
                
                if (cond_293098) {
                    mid_idx_293099 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_293099 = mid_id_293097;
                }
                
                bool cond_293100 = sle64(defunc_0_g_res_293084, mid_idx_293099);
                int64_t loopres_293101;
                int64_t loopres_293102;
                
                if (cond_293100) {
                    int64_t loopres_t_res_293103 = sub64(mid_293092,
                                                         (int64_t) 1);
                    
                    loopres_293101 = low_293089;
                    loopres_293102 = loopres_t_res_293103;
                } else {
                    int64_t loopres_f_res_293104 = add64((int64_t) 1,
                                                         mid_293092);
                    
                    loopres_293101 = loopres_f_res_293104;
                    loopres_293102 = high_293090;
                }
                
                bool loop_cond_293105 = sle64(loopres_293101, loopres_293102);
                bool loop_while_tmp_306353 = loop_cond_293105;
                int64_t low_tmp_306354 = loopres_293101;
                int64_t high_tmp_306355 = loopres_293102;
                
                loop_while_293088 = loop_while_tmp_306353;
                low_293089 = low_tmp_306354;
                high_293090 = high_tmp_306355;
            }
            init_idx_293085 = loop_while_293088;
            init_idx_293086 = low_293089;
            init_idx_293087 = high_293090;
            
            bool idx_293106;
            int64_t idx_293107;
            int64_t idx_293108;
            int64_t idx_293109;
            bool loop_while_293110;
            int64_t l_idx_293111;
            int64_t r_idx_293112;
            int64_t span_293113;
            
            loop_while_293110 = loop_cond_293063;
            l_idx_293111 = init_idx_293086;
            r_idx_293112 = init_idx_293086;
            span_293113 = (int64_t) 1;
            while (loop_while_293110) {
                int64_t max_arg_293114 = sub64(l_idx_293111, (int64_t) 1);
                int64_t max_res_293115 = smax64((int64_t) 0, max_arg_293114);
                int64_t min_arg_293116 = add64((int64_t) 1, r_idx_293112);
                int64_t min_res_293117 = smin64(min_arg_293072, min_arg_293116);
                bool x_293118 = sle64((int64_t) 0, max_res_293115);
                bool y_293119 = slt64(max_res_293115, n_292675);
                bool bounds_check_293120 = x_293118 && y_293119;
                bool index_certs_293121;
                
                if (!bounds_check_293120) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_293115,
                                  "] out of bounds for array of shape [",
                                  (long long) n_292675, "].",
                                  "-> #0  loess.fut:655:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:698:15-61\n   #6  stl.fut:148:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:146:5-149:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_293122;
                
                x_293122 = ((int64_t *) mem_300102)[max_res_293115];
                
                int64_t abs_arg_293123 = sub64(x_293122, defunc_0_g_res_293084);
                int64_t abs_res_293124 = abs64(abs_arg_293123);
                bool x_293125 = sle64((int64_t) 0, min_res_293117);
                bool y_293126 = slt64(min_res_293117, n_292675);
                bool bounds_check_293127 = x_293125 && y_293126;
                bool index_certs_293128;
                
                if (!bounds_check_293127) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_293117,
                                  "] out of bounds for array of shape [",
                                  (long long) n_292675, "].",
                                  "-> #0  loess.fut:656:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:698:15-61\n   #6  stl.fut:148:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:146:5-149:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_293129;
                
                x_293129 = ((int64_t *) mem_300102)[min_res_293117];
                
                int64_t abs_arg_293130 = sub64(x_293129, defunc_0_g_res_293084);
                int64_t abs_res_293131 = abs64(abs_arg_293130);
                bool cond_293132 = max_res_293115 == l_idx_293111;
                int64_t loopres_293133;
                int64_t loopres_293134;
                int64_t loopres_293135;
                
                if (cond_293132) {
                    loopres_293133 = l_idx_293111;
                    loopres_293134 = r_idx_293112;
                    loopres_293135 = min_res_293058;
                } else {
                    bool cond_293136 = slt64(abs_res_293124, abs_res_293131);
                    bool cond_f_res_293137 = min_res_293117 == r_idx_293112;
                    bool x_293138 = !cond_293136;
                    bool y_293139 = cond_f_res_293137 && x_293138;
                    bool cond_293140 = cond_293136 || y_293139;
                    int64_t loopres_f_res_293141;
                    
                    if (cond_293140) {
                        loopres_f_res_293141 = max_res_293115;
                    } else {
                        loopres_f_res_293141 = l_idx_293111;
                    }
                    
                    int64_t loopres_f_res_293142;
                    
                    if (cond_293140) {
                        loopres_f_res_293142 = r_idx_293112;
                    } else {
                        loopres_f_res_293142 = min_res_293117;
                    }
                    
                    int64_t loopres_f_res_293143;
                    
                    if (cond_293140) {
                        int64_t loopres_f_res_t_res_293144 = add64((int64_t) 1,
                                                                   span_293113);
                        
                        loopres_f_res_293143 = loopres_f_res_t_res_293144;
                    } else {
                        int64_t loopres_f_res_f_res_293145 = add64((int64_t) 1,
                                                                   span_293113);
                        
                        loopres_f_res_293143 = loopres_f_res_f_res_293145;
                    }
                    loopres_293133 = loopres_f_res_293141;
                    loopres_293134 = loopres_f_res_293142;
                    loopres_293135 = loopres_f_res_293143;
                }
                
                bool loop_cond_293146 = slt64(loopres_293135, min_res_293058);
                bool loop_while_tmp_306356 = loop_cond_293146;
                int64_t l_idx_tmp_306357 = loopres_293133;
                int64_t r_idx_tmp_306358 = loopres_293134;
                int64_t span_tmp_306359 = loopres_293135;
                
                loop_while_293110 = loop_while_tmp_306356;
                l_idx_293111 = l_idx_tmp_306357;
                r_idx_293112 = r_idx_tmp_306358;
                span_293113 = span_tmp_306359;
            }
            idx_293106 = loop_while_293110;
            idx_293107 = l_idx_293111;
            idx_293108 = r_idx_293112;
            idx_293109 = span_293113;
            
            int64_t min_res_293147 = smin64(min_arg_293073, idx_293107);
            int64_t max_res_293148 = smax64((int64_t) 0, min_res_293147);
            int64_t x_293149 = add64(min_res_293074, max_res_293148);
            int64_t r_293150 = sub64(x_293149, (int64_t) 1);
            bool x_293151 = sle64((int64_t) 0, r_293150);
            bool y_293152 = slt64(r_293150, n_292675);
            bool bounds_check_293153 = x_293151 && y_293152;
            bool index_certs_293154;
            
            if (!bounds_check_293153) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_293150,
                              "] out of bounds for array of shape [",
                              (long long) n_292675, "].",
                              "-> #0  loess.fut:680:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:675:3-683:25\n   #4  loess.fut:699:16-51\n   #5  stl.fut:148:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:146:5-149:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
                    return 1;
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t x_293155;
            
            x_293155 = ((int64_t *) mem_299509)[i_297505 * n_292675 + r_293150];
            
            int64_t abs_arg_293156 = sub64(x_293155, min_res_293083);
            int64_t abs_res_293157 = abs64(abs_arg_293156);
            bool x_293158 = sle64((int64_t) 0, max_res_293148);
            bool y_293159 = slt64(max_res_293148, n_292675);
            bool bounds_check_293160 = x_293158 && y_293159;
            bool index_certs_293161;
            
            if (!bounds_check_293160) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_293148,
                              "] out of bounds for array of shape [",
                              (long long) n_292675, "].",
                              "-> #0  loess.fut:679:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:675:3-683:25\n   #4  loess.fut:699:16-51\n   #5  stl.fut:148:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:146:5-149:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
                    return 1;
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t x_293162;
            
            x_293162 = ((int64_t *) mem_299509)[i_297505 * n_292675 +
                                                max_res_293148];
            
            int64_t abs_arg_293163 = sub64(x_293162, min_res_293083);
            int64_t abs_res_293164 = abs64(abs_arg_293163);
            int64_t max_res_293165 = smax64(abs_res_293157, abs_res_293164);
            double defunc_0_f_res_293166 = sitofp_i64_f64(max_res_293165);
            double defunc_1_f_res_293167 = max_res_293078 +
                   defunc_0_f_res_293166;
            
            ((double *) mem_300079)[i_297505 * l_n_m_292832 + i_297498] =
                defunc_1_f_res_293167;
            ((int64_t *) mem_300075)[i_297505 * l_n_m_292832 + i_297498] =
                max_res_293148;
        }
    }
    
    int64_t min_res_293170 = smin64(n_292675, q_t_292679);
    bool bounds_invalid_upwards_293171 = slt64(t_n_m_292839, (int64_t) 0);
    bool valid_293172 = !bounds_invalid_upwards_293171;
    bool range_valid_c_293173;
    
    if (!valid_293172) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) t_n_m_292839, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:638:3-665:10\n   #4  loess.fut:698:15-61\n   #5  stl.fut:155:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:153:5-156:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool loop_cond_293175 = slt64((int64_t) 1, min_res_293170);
    double i64_res_293176 = sitofp_i64_f64(q_t_292679);
    int64_t binop_x_300181 = partition_sizze_292766 * t_n_m_292839;
    int64_t binop_y_300182 = (int64_t) 8 * binop_x_300181;
    int64_t bytes_300183 = smax64((int64_t) 0, binop_y_300182);
    
    if (mem_300184_cached_sizze_306836 < (size_t) bytes_300183) {
        mem_300184 = realloc(mem_300184, bytes_300183);
        mem_300184_cached_sizze_306836 = bytes_300183;
    }
    if (mem_300188_cached_sizze_306837 < (size_t) bytes_300183) {
        mem_300188 = realloc(mem_300188, bytes_300183);
        mem_300188_cached_sizze_306837 = bytes_300183;
    }
    
    int64_t binop_y_300209 = (int64_t) 8 * n_292675;
    int64_t bytes_300210 = smax64((int64_t) 0, binop_y_300209);
    
    if (mem_300211_cached_sizze_306838 < (size_t) bytes_300210) {
        mem_300211 = realloc(mem_300211, bytes_300210);
        mem_300211_cached_sizze_306838 = bytes_300210;
    }
    for (int64_t i_297523 = 0; i_297523 < partition_sizze_292766; i_297523++) {
        int64_t x_293180;
        
        x_293180 = ((int64_t *) mem_299512)[i_297523];
        for (int64_t i_297510 = 0; i_297510 < n_292675; i_297510++) {
            int64_t x_293182;
            
            x_293182 = ((int64_t *) mem_299509)[i_297523 * n_292675 + i_297510];
            
            int64_t defunc_0_f_res_293183 = add64((int64_t) 1, x_293182);
            
            ((int64_t *) mem_300211)[i_297510] = defunc_0_f_res_293183;
        }
        
        int64_t min_arg_293184 = sub64(x_293180, (int64_t) 1);
        int64_t min_arg_293185 = sub64(x_293180, min_res_293170);
        int64_t min_res_293186 = smin64(q_t_292679, x_293180);
        double i64_res_293187 = sitofp_i64_f64(x_293180);
        double x_293188 = i64_res_293176 - i64_res_293187;
        double max_arg_293189 = x_293188 / 2.0;
        double max_res_293190 = fmax64(0.0, max_arg_293189);
        
        for (int64_t i_297516 = 0; i_297516 < t_n_m_292839; i_297516++) {
            int64_t min_arg_293194 = mul64(jump_t_292685, i_297516);
            int64_t min_res_293195 = smin64(i_292846, min_arg_293194);
            int64_t defunc_0_g_res_293196 = add64((int64_t) 1, min_res_293195);
            bool init_idx_293197;
            int64_t init_idx_293198;
            int64_t init_idx_293199;
            bool loop_while_293200;
            int64_t low_293201;
            int64_t high_293202;
            
            loop_while_293200 = x_292847;
            low_293201 = (int64_t) 0;
            high_293202 = i_292846;
            while (loop_while_293200) {
                int64_t x_293203 = add64(low_293201, high_293202);
                int64_t mid_293204 = sdiv64(x_293203, (int64_t) 2);
                bool x_293205 = sle64((int64_t) 0, mid_293204);
                bool y_293206 = slt64(mid_293204, n_292675);
                bool bounds_check_293207 = x_293205 && y_293206;
                bool index_certs_293208;
                
                if (!bounds_check_293207) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_293204,
                                  "] out of bounds for array of shape [",
                                  (long long) n_292675, "].",
                                  "-> #0  loess.fut:645:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:698:15-61\n   #6  stl.fut:155:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:153:5-156:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t mid_id_293209;
                
                mid_id_293209 = ((int64_t *) mem_300211)[mid_293204];
                
                bool cond_293210 = slt64(mid_id_293209, (int64_t) 0);
                int64_t mid_idx_293211;
                
                if (cond_293210) {
                    mid_idx_293211 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_293211 = mid_id_293209;
                }
                
                bool cond_293212 = sle64(defunc_0_g_res_293196, mid_idx_293211);
                int64_t loopres_293213;
                int64_t loopres_293214;
                
                if (cond_293212) {
                    int64_t loopres_t_res_293215 = sub64(mid_293204,
                                                         (int64_t) 1);
                    
                    loopres_293213 = low_293201;
                    loopres_293214 = loopres_t_res_293215;
                } else {
                    int64_t loopres_f_res_293216 = add64((int64_t) 1,
                                                         mid_293204);
                    
                    loopres_293213 = loopres_f_res_293216;
                    loopres_293214 = high_293202;
                }
                
                bool loop_cond_293217 = sle64(loopres_293213, loopres_293214);
                bool loop_while_tmp_306365 = loop_cond_293217;
                int64_t low_tmp_306366 = loopres_293213;
                int64_t high_tmp_306367 = loopres_293214;
                
                loop_while_293200 = loop_while_tmp_306365;
                low_293201 = low_tmp_306366;
                high_293202 = high_tmp_306367;
            }
            init_idx_293197 = loop_while_293200;
            init_idx_293198 = low_293201;
            init_idx_293199 = high_293202;
            
            bool idx_293218;
            int64_t idx_293219;
            int64_t idx_293220;
            int64_t idx_293221;
            bool loop_while_293222;
            int64_t l_idx_293223;
            int64_t r_idx_293224;
            int64_t span_293225;
            
            loop_while_293222 = loop_cond_293175;
            l_idx_293223 = init_idx_293198;
            r_idx_293224 = init_idx_293198;
            span_293225 = (int64_t) 1;
            while (loop_while_293222) {
                int64_t max_arg_293226 = sub64(l_idx_293223, (int64_t) 1);
                int64_t max_res_293227 = smax64((int64_t) 0, max_arg_293226);
                int64_t min_arg_293228 = add64((int64_t) 1, r_idx_293224);
                int64_t min_res_293229 = smin64(min_arg_293184, min_arg_293228);
                bool x_293230 = sle64((int64_t) 0, max_res_293227);
                bool y_293231 = slt64(max_res_293227, n_292675);
                bool bounds_check_293232 = x_293230 && y_293231;
                bool index_certs_293233;
                
                if (!bounds_check_293232) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_293227,
                                  "] out of bounds for array of shape [",
                                  (long long) n_292675, "].",
                                  "-> #0  loess.fut:655:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:698:15-61\n   #6  stl.fut:155:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:153:5-156:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_293234;
                
                x_293234 = ((int64_t *) mem_300211)[max_res_293227];
                
                int64_t abs_arg_293235 = sub64(x_293234, defunc_0_g_res_293196);
                int64_t abs_res_293236 = abs64(abs_arg_293235);
                bool x_293237 = sle64((int64_t) 0, min_res_293229);
                bool y_293238 = slt64(min_res_293229, n_292675);
                bool bounds_check_293239 = x_293237 && y_293238;
                bool index_certs_293240;
                
                if (!bounds_check_293239) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_293229,
                                  "] out of bounds for array of shape [",
                                  (long long) n_292675, "].",
                                  "-> #0  loess.fut:656:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:638:3-665:10\n   #5  loess.fut:698:15-61\n   #6  stl.fut:155:13-60\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:153:5-156:26\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t x_293241;
                
                x_293241 = ((int64_t *) mem_300211)[min_res_293229];
                
                int64_t abs_arg_293242 = sub64(x_293241, defunc_0_g_res_293196);
                int64_t abs_res_293243 = abs64(abs_arg_293242);
                bool cond_293244 = max_res_293227 == l_idx_293223;
                int64_t loopres_293245;
                int64_t loopres_293246;
                int64_t loopres_293247;
                
                if (cond_293244) {
                    loopres_293245 = l_idx_293223;
                    loopres_293246 = r_idx_293224;
                    loopres_293247 = min_res_293170;
                } else {
                    bool cond_293248 = slt64(abs_res_293236, abs_res_293243);
                    bool cond_f_res_293249 = min_res_293229 == r_idx_293224;
                    bool x_293250 = !cond_293248;
                    bool y_293251 = cond_f_res_293249 && x_293250;
                    bool cond_293252 = cond_293248 || y_293251;
                    int64_t loopres_f_res_293253;
                    
                    if (cond_293252) {
                        loopres_f_res_293253 = max_res_293227;
                    } else {
                        loopres_f_res_293253 = l_idx_293223;
                    }
                    
                    int64_t loopres_f_res_293254;
                    
                    if (cond_293252) {
                        loopres_f_res_293254 = r_idx_293224;
                    } else {
                        loopres_f_res_293254 = min_res_293229;
                    }
                    
                    int64_t loopres_f_res_293255;
                    
                    if (cond_293252) {
                        int64_t loopres_f_res_t_res_293256 = add64((int64_t) 1,
                                                                   span_293225);
                        
                        loopres_f_res_293255 = loopres_f_res_t_res_293256;
                    } else {
                        int64_t loopres_f_res_f_res_293257 = add64((int64_t) 1,
                                                                   span_293225);
                        
                        loopres_f_res_293255 = loopres_f_res_f_res_293257;
                    }
                    loopres_293245 = loopres_f_res_293253;
                    loopres_293246 = loopres_f_res_293254;
                    loopres_293247 = loopres_f_res_293255;
                }
                
                bool loop_cond_293258 = slt64(loopres_293247, min_res_293170);
                bool loop_while_tmp_306368 = loop_cond_293258;
                int64_t l_idx_tmp_306369 = loopres_293245;
                int64_t r_idx_tmp_306370 = loopres_293246;
                int64_t span_tmp_306371 = loopres_293247;
                
                loop_while_293222 = loop_while_tmp_306368;
                l_idx_293223 = l_idx_tmp_306369;
                r_idx_293224 = r_idx_tmp_306370;
                span_293225 = span_tmp_306371;
            }
            idx_293218 = loop_while_293222;
            idx_293219 = l_idx_293223;
            idx_293220 = r_idx_293224;
            idx_293221 = span_293225;
            
            int64_t min_res_293259 = smin64(min_arg_293185, idx_293219);
            int64_t max_res_293260 = smax64((int64_t) 0, min_res_293259);
            int64_t x_293261 = add64(min_res_293186, max_res_293260);
            int64_t r_293262 = sub64(x_293261, (int64_t) 1);
            bool x_293263 = sle64((int64_t) 0, r_293262);
            bool y_293264 = slt64(r_293262, n_292675);
            bool bounds_check_293265 = x_293263 && y_293264;
            bool index_certs_293266;
            
            if (!bounds_check_293265) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_293262,
                              "] out of bounds for array of shape [",
                              (long long) n_292675, "].",
                              "-> #0  loess.fut:680:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:675:3-683:25\n   #4  loess.fut:699:16-51\n   #5  stl.fut:155:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:153:5-156:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
                    return 1;
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t x_293267;
            
            x_293267 = ((int64_t *) mem_299509)[i_297523 * n_292675 + r_293262];
            
            int64_t abs_arg_293268 = sub64(x_293267, min_res_293195);
            int64_t abs_res_293269 = abs64(abs_arg_293268);
            bool x_293270 = sle64((int64_t) 0, max_res_293260);
            bool y_293271 = slt64(max_res_293260, n_292675);
            bool bounds_check_293272 = x_293270 && y_293271;
            bool index_certs_293273;
            
            if (!bounds_check_293272) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_293260,
                              "] out of bounds for array of shape [",
                              (long long) n_292675, "].",
                              "-> #0  loess.fut:679:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:675:3-683:25\n   #4  loess.fut:699:16-51\n   #5  stl.fut:155:13-60\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:153:5-156:26\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
                    return 1;
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t x_293274;
            
            x_293274 = ((int64_t *) mem_299509)[i_297523 * n_292675 +
                                                max_res_293260];
            
            int64_t abs_arg_293275 = sub64(x_293274, min_res_293195);
            int64_t abs_res_293276 = abs64(abs_arg_293275);
            int64_t max_res_293277 = smax64(abs_res_293269, abs_res_293276);
            double defunc_0_f_res_293278 = sitofp_i64_f64(max_res_293277);
            double defunc_1_f_res_293279 = max_res_293190 +
                   defunc_0_f_res_293278;
            
            ((double *) mem_300188)[i_297523 * t_n_m_292839 + i_297516] =
                defunc_1_f_res_293279;
            ((int64_t *) mem_300184)[i_297523 * t_n_m_292839 + i_297516] =
                max_res_293260;
        }
    }
    
    int64_t replicate_arg_293282 = mul64(n_292675, partition_sizze_292766);
    struct memblock mem_300293;
    
    mem_300293.references = NULL;
    if (memblock_alloc(ctx, &mem_300293, bytes_299508, "mem_300293")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_306372 = 0; i_306372 < partition_sizze_292766; i_306372++) {
        for (int64_t i_306373 = 0; i_306373 < n_292675; i_306373++) {
            ((double *) mem_300293.mem)[i_306372 * n_292675 + i_306373] = 0.0;
        }
    }
    
    struct memblock mem_300297;
    
    mem_300297.references = NULL;
    if (memblock_alloc(ctx, &mem_300297, bytes_299508, "mem_300297")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_306374 = 0; i_306374 < partition_sizze_292766; i_306374++) {
        for (int64_t i_306375 = 0; i_306375 < n_292675; i_306375++) {
            ((double *) mem_300297.mem)[i_306374 * n_292675 + i_306375] = 1.0;
        }
    }
    
    bool cond_293285 = slt64((int64_t) 1, jump_l_292686);
    bool cond_293286 = slt64((int64_t) 1, jump_t_292685);
    int64_t y_293287 = sub64(n_outer_292688, (int64_t) 1);
    int64_t css_results_l_293288;
    
    if (cond_292824) {
        css_results_l_293288 = s_n_m_292825;
    } else {
        css_results_l_293288 = pad_css_len_292821;
    }
    
    bool zzero_293289 = n_p_292677 == (int64_t) 0;
    bool nonzzero_293290 = !zzero_293289;
    bool loop_not_taken_293291 = !assert_cond_292815;
    bool protect_assert_disj_293292 = nonzzero_293290 || loop_not_taken_293291;
    bool loop_not_taken_293293 = !assert_cond_292817;
    bool protect_assert_disj_293294 = protect_assert_disj_293292 ||
         loop_not_taken_293293;
    bool nonzzero_cert_293295;
    
    if (!protect_assert_disj_293294) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "division by zero",
                               "-> #0  stl.fut:228:51-57\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:228:28-74\n   #5  stl.fut:227:21-229:39\n   #6  stl.fut:419:61-435:77\n   #7  stl.fut:463:3-479:36\n   #8  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t j_293296 = add64(n_292675, n_p_292677);
    bool empty_slice_293297 = n_292675 == (int64_t) 0;
    int64_t i_p_m_t_s_293298 = add64(n_p_292677, i_292846);
    bool zzero_leq_i_p_m_t_s_293299 = sle64((int64_t) 0, i_p_m_t_s_293298);
    bool i_p_m_t_s_leq_w_293300 = slt64(i_p_m_t_s_293298, C_len_292823);
    bool zzero_lte_i_293301 = sle64((int64_t) 0, n_p_292677);
    bool i_lte_j_293302 = sle64(n_p_292677, j_293296);
    bool y_293303 = i_p_m_t_s_leq_w_293300 && zzero_lte_i_293301;
    bool y_293304 = zzero_leq_i_p_m_t_s_293299 && y_293303;
    bool y_293305 = i_lte_j_293302 && y_293304;
    bool forwards_ok_293306 = zzero_lte_i_293301 && y_293305;
    bool ok_or_empty_293307 = empty_slice_293297 || forwards_ok_293306;
    bool protect_assert_disj_293308 = loop_not_taken_293291 ||
         ok_or_empty_293307;
    bool protect_assert_disj_293309 = loop_not_taken_293293 ||
         protect_assert_disj_293308;
    bool index_certs_293310;
    
    if (!protect_assert_disj_293309) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) n_p_292677, ":",
                               (long long) j_293296,
                               "] out of bounds for array of shape [",
                               (long long) C_len_292823, "].",
                               "-> #0  stl.fut:266:35-50\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  stl.fut:264:13-269:26\n   #4  stl.fut:419:61-435:77\n   #5  stl.fut:463:3-479:36\n   #6  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t lifted_single_ma_l_arg_293311 = add64((int64_t) 1, j_293296);
    int64_t m_293312 = sub64(n_p_292677, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_293313 = sle64((int64_t) 0, m_293312);
    bool i_p_m_t_s_leq_w_293314 = slt64(m_293312, C_len_292823);
    bool y_293315 = zzero_leq_i_p_m_t_s_293313 && i_p_m_t_s_leq_w_293314;
    bool y_293316 = zzero_lte_i_293301 && y_293315;
    bool ok_or_empty_293317 = zzero_293289 || y_293316;
    bool protect_assert_disj_293318 = loop_not_taken_293291 ||
         ok_or_empty_293317;
    bool protect_assert_disj_293319 = loop_not_taken_293293 ||
         protect_assert_disj_293318;
    bool index_certs_293320;
    
    if (!protect_assert_disj_293319) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) n_p_292677,
                               "] out of bounds for array of shape [",
                               (long long) C_len_292823, "].",
                               "-> #0  stl.fut:26:37-43\n   #1  stl.fut:26:20-48\n   #2  stl.fut:40:3-36\n   #3  stl.fut:233:23-47\n   #4  stl.fut:419:61-435:77\n   #5  stl.fut:463:3-479:36\n   #6  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t dyn_lifted_single_ma_l_arg_293321 = add64((int64_t) 2, n_292675);
    bool i_p_m_t_s_leq_w_293322 = slt64(m_293312,
                                        lifted_single_ma_l_arg_293311);
    bool y_293323 = zzero_leq_i_p_m_t_s_293313 && i_p_m_t_s_leq_w_293322;
    bool y_293324 = zzero_lte_i_293301 && y_293323;
    bool ok_or_empty_293325 = zzero_293289 || y_293324;
    bool protect_assert_disj_293326 = loop_not_taken_293291 ||
         ok_or_empty_293325;
    bool protect_assert_disj_293327 = loop_not_taken_293293 ||
         protect_assert_disj_293326;
    bool index_certs_293328;
    
    if (!protect_assert_disj_293327) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) n_p_292677,
                               "] out of bounds for array of shape [",
                               (long long) lifted_single_ma_l_arg_293311, "].",
                               "-> #0  stl.fut:26:37-43\n   #1  stl.fut:26:20-48\n   #2  /prelude/functional.fut:9:42-44\n   #3  stl.fut:40:3-64\n   #4  stl.fut:233:23-47\n   #5  stl.fut:419:61-435:77\n   #6  stl.fut:463:3-479:36\n   #7  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool i_p_m_t_s_leq_w_293329 = slt64((int64_t) 2,
                                        dyn_lifted_single_ma_l_arg_293321);
    bool protect_assert_disj_293330 = loop_not_taken_293291 ||
         i_p_m_t_s_leq_w_293329;
    bool protect_assert_disj_293331 = loop_not_taken_293293 ||
         protect_assert_disj_293330;
    bool index_certs_293332;
    
    if (!protect_assert_disj_293331) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) (int64_t) 3,
                               "] out of bounds for array of shape [",
                               (long long) dyn_lifted_single_ma_l_arg_293321,
                               "].",
                               "-> #0  stl.fut:26:37-43\n   #1  stl.fut:26:20-48\n   #2  /prelude/functional.fut:9:42-44\n   #3  stl.fut:40:3-84\n   #4  stl.fut:233:23-47\n   #5  stl.fut:419:61-435:77\n   #6  stl.fut:463:3-479:36\n   #7  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_293333 = slt64(jump_l_292686, jump_threshold_1_292689);
    bool cond_293334 = slt64(jump_l_292686, jump_threshold_2_292690);
    bool cond_f_res_t_res_293335 = slt64(q_l_292680, q_threshold_2_292692);
    bool x_293336 = cond_293334 && cond_f_res_t_res_293335;
    bool x_293337 = !cond_293333;
    bool y_293338 = x_293336 && x_293337;
    bool cond_293339 = cond_293333 || y_293338;
    bool cond_293340 = slt64(jump_t_292685, jump_threshold_1_292689);
    bool cond_293341 = slt64(jump_t_292685, jump_threshold_2_292690);
    bool cond_f_res_t_res_293342 = slt64(q_t_292679, q_threshold_2_292692);
    bool x_293343 = cond_293341 && cond_f_res_t_res_293342;
    bool x_293344 = !cond_293340;
    bool y_293345 = x_293343 && x_293344;
    bool cond_293346 = cond_293340 || y_293345;
    bool cond_293347 = slt64(jump_s_292684, jump_threshold_1_292689);
    bool cond_293348 = slt64(jump_s_292684, jump_threshold_2_292690);
    bool cond_f_res_t_res_293349 = slt64(q_s_292678, q_threshold_2_292692);
    bool x_293350 = cond_293348 && cond_f_res_t_res_293349;
    bool x_293351 = !cond_293347;
    bool y_293352 = x_293350 && x_293351;
    bool cond_293353 = cond_293347 || y_293352;
    bool bounds_invalid_upwards_293354 = slt64(C_len_292823, (int64_t) 0);
    bool valid_293355 = !bounds_invalid_upwards_293354;
    bool protect_assert_disj_293356 = loop_not_taken_293291 || valid_293355;
    bool protect_assert_disj_293357 = loop_not_taken_293293 ||
         protect_assert_disj_293356;
    bool range_valid_c_293358;
    
    if (!protect_assert_disj_293357) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) C_len_292823, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:228:28-74\n   #4  stl.fut:227:21-229:39\n   #5  stl.fut:419:61-435:77\n   #6  stl.fut:463:3-479:36\n   #7  stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_293360 = slt64(lifted_single_ma_l_arg_293311,
                                               (int64_t) 0);
    bool valid_293361 = !bounds_invalid_upwards_293360;
    bool protect_assert_disj_293362 = loop_not_taken_293291 || valid_293361;
    bool protect_assert_disj_293363 = loop_not_taken_293293 ||
         protect_assert_disj_293362;
    bool range_valid_c_293364;
    
    if (!protect_assert_disj_293363) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) lifted_single_ma_l_arg_293311,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:29:13-35:19\n   #4  /prelude/soacs.fut:67:19-23\n   #5  /prelude/soacs.fut:67:3-37\n   #6  stl.fut:28:5-36:23\n   #7  stl.fut:40:3-36\n   #8  stl.fut:233:23-47\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_293366 =
         slt64(dyn_lifted_single_ma_l_arg_293321, (int64_t) 0);
    bool valid_293367 = !bounds_invalid_upwards_293366;
    bool protect_assert_disj_293368 = loop_not_taken_293291 || valid_293367;
    bool protect_assert_disj_293369 = loop_not_taken_293293 ||
         protect_assert_disj_293368;
    bool range_valid_c_293370;
    
    if (!protect_assert_disj_293369) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) dyn_lifted_single_ma_l_arg_293321,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  stl.fut:29:13-35:19\n   #4  /prelude/soacs.fut:67:19-23\n   #5  /prelude/soacs.fut:67:3-37\n   #6  stl.fut:28:5-36:23\n   #7  /prelude/functional.fut:9:42-44\n   #8  stl.fut:40:3-64\n   #9  stl.fut:233:23-47\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
        if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
            return 1;
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (mem_300347_cached_sizze_306839 < (size_t) bytes_299508) {
        mem_300347 = realloc(mem_300347, bytes_299508);
        mem_300347_cached_sizze_306839 = bytes_299508;
    }
    if (mem_300395_cached_sizze_306840 < (size_t) bytes_299586) {
        mem_300395 = realloc(mem_300395, bytes_299586);
        mem_300395_cached_sizze_306840 = bytes_299586;
    }
    if (mem_300400_cached_sizze_306841 < (size_t) bytes_299586) {
        mem_300400 = realloc(mem_300400, bytes_299586);
        mem_300400_cached_sizze_306841 = bytes_299586;
    }
    
    int64_t binop_x_302442 = pad_css_len_292821 * binop_x_299583;
    int64_t binop_y_302443 = (int64_t) 8 * binop_x_302442;
    int64_t bytes_302444 = smax64((int64_t) 0, binop_y_302443);
    int64_t binop_x_302552 = partition_sizze_292766 * C_len_292823;
    int64_t binop_y_302553 = (int64_t) 8 * binop_x_302552;
    int64_t bytes_302554 = smax64((int64_t) 0, binop_y_302553);
    
    if (mem_302555_cached_sizze_306849 < (size_t) bytes_302554) {
        mem_302555 = realloc(mem_302555, bytes_302554);
        mem_302555_cached_sizze_306849 = bytes_302554;
    }
    if (mem_302601_cached_sizze_306850 < (size_t) bytes_299511) {
        mem_302601 = realloc(mem_302601, bytes_299511);
        mem_302601_cached_sizze_306850 = bytes_299511;
    }
    
    int64_t binop_x_302614 = partition_sizze_292766 *
            lifted_single_ma_l_arg_293311;
    int64_t binop_y_302615 = (int64_t) 8 * binop_x_302614;
    int64_t bytes_302616 = smax64((int64_t) 0, binop_y_302615);
    
    if (mem_302617_cached_sizze_306851 < (size_t) bytes_302616) {
        mem_302617 = realloc(mem_302617, bytes_302616);
        mem_302617_cached_sizze_306851 = bytes_302616;
    }
    
    int64_t binop_y_302628 = (int64_t) 8 * lifted_single_ma_l_arg_293311;
    int64_t bytes_302629 = smax64((int64_t) 0, binop_y_302628);
    
    if (mem_302630_cached_sizze_306852 < (size_t) bytes_302629) {
        mem_302630 = realloc(mem_302630, bytes_302629);
        mem_302630_cached_sizze_306852 = bytes_302629;
    }
    if (mem_302653_cached_sizze_306853 < (size_t) bytes_299511) {
        mem_302653 = realloc(mem_302653, bytes_299511);
        mem_302653_cached_sizze_306853 = bytes_299511;
    }
    
    int64_t binop_x_302666 = partition_sizze_292766 *
            dyn_lifted_single_ma_l_arg_293321;
    int64_t binop_y_302667 = (int64_t) 8 * binop_x_302666;
    int64_t bytes_302668 = smax64((int64_t) 0, binop_y_302667);
    
    if (mem_302669_cached_sizze_306854 < (size_t) bytes_302668) {
        mem_302669 = realloc(mem_302669, bytes_302668);
        mem_302669_cached_sizze_306854 = bytes_302668;
    }
    
    int64_t binop_y_302680 = (int64_t) 8 * dyn_lifted_single_ma_l_arg_293321;
    int64_t bytes_302681 = smax64((int64_t) 0, binop_y_302680);
    
    if (mem_302682_cached_sizze_306855 < (size_t) bytes_302681) {
        mem_302682 = realloc(mem_302682, bytes_302681);
        mem_302682_cached_sizze_306855 = bytes_302681;
    }
    if (mem_302705_cached_sizze_306856 < (size_t) bytes_299511) {
        mem_302705 = realloc(mem_302705, bytes_299511);
        mem_302705_cached_sizze_306856 = bytes_299511;
    }
    if (mem_302721_cached_sizze_306857 < (size_t) bytes_299508) {
        mem_302721 = realloc(mem_302721, bytes_299508);
        mem_302721_cached_sizze_306857 = bytes_299508;
    }
    
    int64_t binop_y_302732 = (int64_t) 8 * n_292675;
    int64_t bytes_302733 = smax64((int64_t) 0, binop_y_302732);
    
    if (mem_302734_cached_sizze_306858 < (size_t) bytes_302733) {
        mem_302734 = realloc(mem_302734, bytes_302733);
        mem_302734_cached_sizze_306858 = bytes_302733;
    }
    
    int64_t binop_y_305342 = (int64_t) 4 * partition_sizze_292766;
    int64_t bytes_305343 = smax64((int64_t) 0, binop_y_305342);
    int64_t binop_y_305346 = (int64_t) 4 * binop_x_299506;
    int64_t bytes_305347 = smax64((int64_t) 0, binop_y_305346);
    int64_t binop_y_305369 = (int64_t) 4 * n_292675;
    int64_t bytes_305370 = smax64((int64_t) 0, binop_y_305369);
    int64_t binop_y_305385 = (int64_t) 8 * replicate_arg_293282;
    int64_t bytes_305386 = smax64((int64_t) 0, binop_y_305385);
    int64_t binop_y_305403 = (int64_t) 4 * replicate_arg_293282;
    int64_t bytes_305404 = smax64((int64_t) 0, binop_y_305403);
    bool loop_cond_297079 = slt64((int64_t) 0, replicate_arg_293282);
    int64_t replicate_arg_297080 = mul64((int64_t) 2, partition_sizze_292766);
    int64_t binop_y_305478 = (int64_t) 4 * replicate_arg_297080;
    int64_t bytes_305479 = smax64((int64_t) 0, binop_y_305478);
    int64_t bytes_305497 = smax64((int64_t) 0, partition_sizze_292766);
    int64_t ext_303756;
    
    if (cond_293285) {
        ext_303756 = n_292675;
    } else {
        ext_303756 = l_n_m_292832;
    }
    
    int64_t ext_303755;
    
    if (cond_293285) {
        ext_303755 = n_292675;
    } else {
        ext_303755 = l_n_m_292832;
    }
    
    int64_t ext_305213;
    
    if (cond_293286) {
        ext_305213 = n_292675;
    } else {
        ext_305213 = t_n_m_292839;
    }
    
    int64_t ext_305212;
    
    if (cond_293286) {
        ext_305212 = n_292675;
    } else {
        ext_305212 = t_n_m_292839;
    }
    
    int64_t ext_302549;
    
    if (cond_292824) {
        ext_302549 = s_n_m_292825;
    } else {
        ext_302549 = pad_css_len_292821;
    }
    
    int64_t ext_302547;
    
    if (cond_292824) {
        ext_302547 = s_n_m_292825;
    } else {
        ext_302547 = pad_css_len_292821;
    }
    
    int64_t ext_305757;
    int64_t ext_305755;
    int64_t ext_305751;
    int64_t ext_305750;
    int64_t ext_305749;
    int64_t ext_305748;
    int64_t ext_305747;
    int64_t ext_305746;
    int64_t ext_305745;
    struct memblock ext_mem_305744;
    
    ext_mem_305744.references = NULL;
    
    struct memblock ext_mem_305743;
    
    ext_mem_305743.references = NULL;
    
    struct memblock ext_mem_305742;
    
    ext_mem_305742.references = NULL;
    
    struct memblock mem_param_300305;
    
    mem_param_300305.references = NULL;
    
    int64_t ctx_param_ext_300307;
    int64_t ctx_param_ext_300309;
    struct memblock mem_param_300313;
    
    mem_param_300313.references = NULL;
    
    int64_t ctx_param_ext_300314;
    int64_t ctx_param_ext_300315;
    int64_t ctx_param_ext_300316;
    int64_t ctx_param_ext_300317;
    int64_t ctx_param_ext_300318;
    int64_t ctx_param_ext_300319;
    int64_t ctx_param_ext_300320;
    struct memblock mem_param_300321;
    
    mem_param_300321.references = NULL;
    ctx_param_ext_300307 = n_292675;
    ctx_param_ext_300309 = n_292675;
    ctx_param_ext_300314 = partition_sizze_292766;
    ctx_param_ext_300315 = n_292675;
    ctx_param_ext_300316 = (int64_t) 0;
    ctx_param_ext_300317 = n_292675;
    ctx_param_ext_300318 = partition_sizze_292766;
    ctx_param_ext_300319 = (int64_t) 1;
    ctx_param_ext_300320 = n_292675;
    if (memblock_set(ctx, &mem_param_300305, &mem_300293, "mem_300293") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_300313, &mem_300293, "mem_300293") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_300321, &mem_300297, "mem_300297") != 0)
        return 1;
    for (int64_t i_outer_293375 = 0; i_outer_293375 < n_outer_292688;
         i_outer_293375++) {
        int64_t ext_305224;
        int64_t ext_305222;
        struct memblock ext_mem_305218;
        
        ext_mem_305218.references = NULL;
        
        struct memblock ext_mem_305217;
        
        ext_mem_305217.references = NULL;
        
        struct memblock mem_param_300335;
        
        mem_param_300335.references = NULL;
        
        int64_t ctx_param_ext_300337;
        int64_t ctx_param_ext_300339;
        struct memblock mem_param_300343;
        
        mem_param_300343.references = NULL;
        ctx_param_ext_300337 = ctx_param_ext_300307;
        ctx_param_ext_300339 = ctx_param_ext_300309;
        if (memblock_set(ctx, &mem_param_300335, &mem_param_300305,
                         "mem_param_300305") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_300343, &mem_param_300313,
                         "mem_param_300313") != 0)
            return 1;
        for (int64_t _i_inner_293381 = 0; _i_inner_293381 < n_inner_292687;
             _i_inner_293381++) {
            for (int64_t i_297532 = 0; i_297532 < partition_sizze_292766;
                 i_297532++) {
                for (int64_t i_297528 = 0; i_297528 < n_292675; i_297528++) {
                    float x_293388;
                    
                    x_293388 = ((float *) mem_299469)[i_297532 * n_292675 +
                                                      i_297528];
                    
                    double x_293389;
                    
                    x_293389 = ((double *) mem_param_300343.mem)[i_297532 *
                                                                 ctx_param_ext_300339 +
                                                                 i_297528];
                    
                    double f32_res_293390 = fpconv_f32_f64(x_293388);
                    double defunc_1_f_res_293391 = f32_res_293390 - x_293389;
                    
                    ((double *) mem_300347)[i_297532 * n_292675 + i_297528] =
                        defunc_1_f_res_293391;
                }
            }
            for (int64_t i_297552 = 0; i_297552 < partition_sizze_292766;
                 i_297552++) {
                for (int64_t i_297545 = 0; i_297545 < n_p_292677; i_297545++) {
                    for (int64_t i_297538 = 0; i_297538 < defunc_0_f_res_292820;
                         i_297538++) {
                        int64_t x_293404;
                        
                        x_293404 = ((int64_t *) mem_299690)[i_297552 *
                                                            ctx_val_299600 +
                                                            i_297545 *
                                                            defunc_0_f_res_292820 +
                                                            i_297538];
                        
                        int64_t x_293405 = mul64(n_p_292677, x_293404);
                        int64_t idx_293406 = add64(x_293405, i_297545);
                        bool cond_293407 = slt64(i_292846, idx_293406);
                        bool cond_f_res_293408 = slt64(x_293404, (int64_t) 0);
                        bool x_293409 = !cond_293407;
                        bool y_293410 = cond_f_res_293408 && x_293409;
                        bool cond_293411 = cond_293407 || y_293410;
                        double defunc_0_f_res_293412;
                        double defunc_0_f_res_293413;
                        
                        if (cond_293411) {
                            defunc_0_f_res_293412 = 0.0;
                            defunc_0_f_res_293413 = 0.0;
                        } else {
                            bool x_293414 = sle64((int64_t) 0, idx_293406);
                            bool y_293415 = slt64(idx_293406, n_292675);
                            bool bounds_check_293416 = x_293414 && y_293415;
                            bool index_certs_293417;
                            
                            if (!bounds_check_293416) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) idx_293406,
                                              "] out of bounds for array of shape [",
                                              (long long) n_292675, "].",
                                              "-> #0  stl.fut:193:42-57\n   #1  stl.fut:188:28-194:44\n   #2  /prelude/soacs.fut:67:19-23\n   #3  /prelude/soacs.fut:67:3-37\n   #4  stl.fut:186:21-195:50\n   #5  /prelude/soacs.fut:75:22-28\n   #6  /prelude/soacs.fut:75:3-45\n   #7  stl.fut:184:13-196:57\n   #8  stl.fut:419:61-435:77\n   #9  stl.fut:463:3-479:36\n   #10 stl.fut:445:1-479:36\n");
                                if (memblock_unref(ctx, &mem_param_300343,
                                                   "mem_param_300343") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_300335,
                                                   "mem_param_300335") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305217,
                                                   "ext_mem_305217") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305218,
                                                   "ext_mem_305218") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_300321,
                                                   "mem_param_300321") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_300313,
                                                   "mem_param_300313") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_300305,
                                                   "mem_param_300305") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305742,
                                                   "ext_mem_305742") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305743,
                                                   "ext_mem_305743") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305744,
                                                   "ext_mem_305744") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_300297,
                                                   "mem_300297") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_300293,
                                                   "mem_300293") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_306309,
                                                   "mem_out_306309") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_306308,
                                                   "mem_out_306308") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_306307,
                                                   "mem_out_306307") != 0)
                                    return 1;
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            double defunc_0_f_res_f_res_293418;
                            
                            defunc_0_f_res_f_res_293418 =
                                ((double *) mem_300347)[i_297552 * n_292675 +
                                                        idx_293406];
                            
                            double defunc_0_f_res_f_res_293419;
                            
                            defunc_0_f_res_f_res_293419 =
                                ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                  (i_297552 *
                                                                   ctx_param_ext_300317 +
                                                                   idx_293406 *
                                                                   ctx_param_ext_300319)];
                            defunc_0_f_res_293412 = defunc_0_f_res_f_res_293418;
                            defunc_0_f_res_293413 = defunc_0_f_res_f_res_293419;
                        }
                        ((double *) mem_300395)[i_297552 * ctx_val_299600 +
                                                i_297545 *
                                                defunc_0_f_res_292820 +
                                                i_297538] =
                            defunc_0_f_res_293412;
                        ((double *) mem_300400)[i_297552 * ctx_val_299600 +
                                                i_297545 *
                                                defunc_0_f_res_292820 +
                                                i_297538] =
                            defunc_0_f_res_293413;
                    }
                }
            }
            
            struct memblock ext_mem_302430;
            
            ext_mem_302430.references = NULL;
            
            struct memblock ext_mem_302419;
            
            ext_mem_302419.references = NULL;
            if (cond_293353) {
                bool match_lit_293424 = (int64_t) 0 == d_s_292681;
                struct memblock ext_mem_301151;
                
                ext_mem_301151.references = NULL;
                
                struct memblock ext_mem_301140;
                
                ext_mem_301140.references = NULL;
                if (match_lit_293424) {
                    struct memblock mem_300601;
                    
                    mem_300601.references = NULL;
                    if (memblock_alloc(ctx, &mem_300601, bytes_299854,
                                       "mem_300601")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_306405 = 0; i_306405 <
                         partition_sizze_292766; i_306405++) {
                        for (int64_t i_306406 = 0; i_306406 < n_p_292677;
                             i_306406++) {
                            for (int64_t i_306407 = 0; i_306407 < s_n_m_292825;
                                 i_306407++) {
                                ((double *) mem_300601.mem)[i_306405 *
                                                            (s_n_m_292825 *
                                                             n_p_292677) +
                                                            i_306406 *
                                                            s_n_m_292825 +
                                                            i_306407] = 0.0;
                            }
                        }
                    }
                    
                    struct memblock mem_300606;
                    
                    mem_300606.references = NULL;
                    if (memblock_alloc(ctx, &mem_300606, bytes_299854,
                                       "mem_300606")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_297569 = 0; i_297569 <
                         partition_sizze_292766; i_297569++) {
                        for (int64_t i_297565 = 0; i_297565 < n_p_292677;
                             i_297565++) {
                            int64_t x_293440;
                            
                            x_293440 = ((int64_t *) mem_299694)[i_297569 *
                                                                n_p_292677 +
                                                                i_297565];
                            for (int64_t i_297561 = 0; i_297561 < s_n_m_292825;
                                 i_297561++) {
                                int64_t x_293445;
                                
                                x_293445 = ((int64_t *) mem_299855)[i_297569 *
                                                                    ctx_val_299884 +
                                                                    i_297565 *
                                                                    s_n_m_292825 +
                                                                    i_297561];
                                
                                double x_293446;
                                
                                x_293446 = ((double *) mem_299860)[i_297569 *
                                                                   ctx_val_299884 +
                                                                   i_297565 *
                                                                   s_n_m_292825 +
                                                                   i_297561];
                                
                                bool cond_293447 = i_297561 == (int64_t) 0;
                                int64_t defunc_0_m_fun_res_293448;
                                
                                if (cond_293447) {
                                    defunc_0_m_fun_res_293448 = (int64_t) 0;
                                } else {
                                    int64_t y_293449 = sub64(s_n_m_292825,
                                                             (int64_t) 1);
                                    bool cond_293450 = i_297561 == y_293449;
                                    int64_t defunc_0_m_fun_res_f_res_293451;
                                    
                                    if (cond_293450) {
                                        int64_t
                                        defunc_0_m_fun_res_f_res_t_res_293452 =
                                        sub64(pad_css_len_292821, (int64_t) 1);
                                        
                                        defunc_0_m_fun_res_f_res_293451 =
                                            defunc_0_m_fun_res_f_res_t_res_293452;
                                    } else {
                                        int64_t x_293453 = sub64(i_297561,
                                                                 (int64_t) 1);
                                        int64_t x_293454 = mul64(jump_s_292684,
                                                                 x_293453);
                                        int64_t min_arg_293455 =
                                                add64((int64_t) 1, x_293454);
                                        int64_t min_res_293456 =
                                                smin64(defunc_0_f_res_292820,
                                                       min_arg_293455);
                                        
                                        defunc_0_m_fun_res_f_res_293451 =
                                            min_res_293456;
                                    }
                                    defunc_0_m_fun_res_293448 =
                                        defunc_0_m_fun_res_f_res_293451;
                                }
                                
                                double defunc_2_reduce_res_293457;
                                double redout_297555 = 0.0;
                                
                                for (int64_t i_297556 = 0; i_297556 <
                                     q_s_292678; i_297556++) {
                                    bool cond_293462 = sle64(x_293440,
                                                             i_297556);
                                    int64_t defunc_0_f_res_293463;
                                    
                                    if (cond_293462) {
                                        defunc_0_f_res_293463 = (int64_t) 0;
                                    } else {
                                        int64_t i_293464 = add64(x_293445,
                                                                 i_297556);
                                        int64_t defunc_0_add_arg_293465;
                                        
                                        defunc_0_add_arg_293465 =
                                            ((int64_t *) mem_299690)[i_297569 *
                                                                     ctx_val_299600 +
                                                                     i_297565 *
                                                                     defunc_0_f_res_292820 +
                                                                     i_293464];
                                        
                                        int64_t defunc_1_add_res_293466 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_293465);
                                        
                                        defunc_0_f_res_293463 =
                                            defunc_1_add_res_293466;
                                    }
                                    
                                    double defunc_0_f_res_293467;
                                    
                                    if (cond_293462) {
                                        defunc_0_f_res_293467 = 0.0;
                                    } else {
                                        int64_t i_293468 = add64(x_293445,
                                                                 i_297556);
                                        double defunc_0_add_arg_293469;
                                        
                                        defunc_0_add_arg_293469 =
                                            ((double *) mem_300400)[i_297569 *
                                                                    ctx_val_299600 +
                                                                    i_297565 *
                                                                    defunc_0_f_res_292820 +
                                                                    i_293468];
                                        defunc_0_f_res_293467 =
                                            defunc_0_add_arg_293469;
                                    }
                                    
                                    int64_t binop_p_293470 =
                                            sub64(defunc_0_f_res_293463,
                                                  defunc_0_m_fun_res_293448);
                                    double defunc_0_f_res_293471 =
                                           sitofp_i64_f64(binop_p_293470);
                                    double abs_res_293472 =
                                           fabs(defunc_0_f_res_293471);
                                    double tmp1_293473 = abs_res_293472 /
                                           x_293446;
                                    double x_293474 = tmp1_293473 * tmp1_293473;
                                    double y_293475 = tmp1_293473 * x_293474;
                                    double tmp2_293476 = 1.0 - y_293475;
                                    double x_293477 = tmp2_293476 * tmp2_293476;
                                    double tmp3_293478 = tmp2_293476 * x_293477;
                                    double w_j_293479 = defunc_0_f_res_293467 *
                                           tmp3_293478;
                                    double defunc_1_op_res_293460 = w_j_293479 +
                                           redout_297555;
                                    double redout_tmp_306411 =
                                           defunc_1_op_res_293460;
                                    
                                    redout_297555 = redout_tmp_306411;
                                }
                                defunc_2_reduce_res_293457 = redout_297555;
                                
                                double a_293480 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_293457;
                                double a0_293481 = 1.0 / a_293480;
                                int64_t defunc_0_m_fun_res_293482;
                                
                                if (cond_293447) {
                                    defunc_0_m_fun_res_293482 = (int64_t) 0;
                                } else {
                                    int64_t y_293483 = sub64(s_n_m_292825,
                                                             (int64_t) 1);
                                    bool cond_293484 = i_297561 == y_293483;
                                    int64_t defunc_0_m_fun_res_f_res_293485;
                                    
                                    if (cond_293484) {
                                        int64_t
                                        defunc_0_m_fun_res_f_res_t_res_293486 =
                                        sub64(pad_css_len_292821, (int64_t) 1);
                                        
                                        defunc_0_m_fun_res_f_res_293485 =
                                            defunc_0_m_fun_res_f_res_t_res_293486;
                                    } else {
                                        int64_t x_293487 = sub64(i_297561,
                                                                 (int64_t) 1);
                                        int64_t x_293488 = mul64(jump_s_292684,
                                                                 x_293487);
                                        int64_t min_arg_293489 =
                                                add64((int64_t) 1, x_293488);
                                        int64_t min_res_293490 =
                                                smin64(defunc_0_f_res_292820,
                                                       min_arg_293489);
                                        
                                        defunc_0_m_fun_res_f_res_293485 =
                                            min_res_293490;
                                    }
                                    defunc_0_m_fun_res_293482 =
                                        defunc_0_m_fun_res_f_res_293485;
                                }
                                
                                double defunc_2_reduce_res_293491;
                                double redout_297557 = 0.0;
                                
                                for (int64_t i_297558 = 0; i_297558 <
                                     q_s_292678; i_297558++) {
                                    bool cond_293496 = sle64(x_293440,
                                                             i_297558);
                                    int64_t defunc_0_f_res_293497;
                                    
                                    if (cond_293496) {
                                        defunc_0_f_res_293497 = (int64_t) 0;
                                    } else {
                                        int64_t i_293498 = add64(x_293445,
                                                                 i_297558);
                                        int64_t defunc_0_add_arg_293499;
                                        
                                        defunc_0_add_arg_293499 =
                                            ((int64_t *) mem_299690)[i_297569 *
                                                                     ctx_val_299600 +
                                                                     i_297565 *
                                                                     defunc_0_f_res_292820 +
                                                                     i_293498];
                                        
                                        int64_t defunc_1_add_res_293500 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_293499);
                                        
                                        defunc_0_f_res_293497 =
                                            defunc_1_add_res_293500;
                                    }
                                    
                                    double defunc_0_f_res_293501;
                                    
                                    if (cond_293496) {
                                        defunc_0_f_res_293501 = 0.0;
                                    } else {
                                        int64_t i_293502 = add64(x_293445,
                                                                 i_297558);
                                        double defunc_0_add_arg_293503;
                                        
                                        defunc_0_add_arg_293503 =
                                            ((double *) mem_300400)[i_297569 *
                                                                    ctx_val_299600 +
                                                                    i_297565 *
                                                                    defunc_0_f_res_292820 +
                                                                    i_293502];
                                        defunc_0_f_res_293501 =
                                            defunc_0_add_arg_293503;
                                    }
                                    
                                    int64_t binop_p_293504 =
                                            sub64(defunc_0_f_res_293497,
                                                  defunc_0_m_fun_res_293482);
                                    double defunc_0_f_res_293505 =
                                           sitofp_i64_f64(binop_p_293504);
                                    double abs_res_293506 =
                                           fabs(defunc_0_f_res_293505);
                                    double tmp1_293507 = abs_res_293506 /
                                           x_293446;
                                    double x_293508 = tmp1_293507 * tmp1_293507;
                                    double y_293509 = tmp1_293507 * x_293508;
                                    double tmp2_293510 = 1.0 - y_293509;
                                    double x_293511 = tmp2_293510 * tmp2_293510;
                                    double tmp3_293512 = tmp2_293510 * x_293511;
                                    double tmp4_293513 = defunc_0_f_res_293501 *
                                           tmp3_293512;
                                    double defunc_0_f_res_293514;
                                    
                                    if (cond_293496) {
                                        defunc_0_f_res_293514 = 0.0;
                                    } else {
                                        int64_t i_293515 = add64(x_293445,
                                                                 i_297558);
                                        double defunc_0_add_arg_293516;
                                        
                                        defunc_0_add_arg_293516 =
                                            ((double *) mem_300395)[i_297569 *
                                                                    ctx_val_299600 +
                                                                    i_297565 *
                                                                    defunc_0_f_res_292820 +
                                                                    i_293515];
                                        defunc_0_f_res_293514 =
                                            defunc_0_add_arg_293516;
                                    }
                                    
                                    double x_293517 = a0_293481 * tmp4_293513;
                                    double defunc_9_fit_fun_res_293518 =
                                           defunc_0_f_res_293514 * x_293517;
                                    double defunc_1_op_res_293494 =
                                           defunc_9_fit_fun_res_293518 +
                                           redout_297557;
                                    double redout_tmp_306412 =
                                           defunc_1_op_res_293494;
                                    
                                    redout_297557 = redout_tmp_306412;
                                }
                                defunc_2_reduce_res_293491 = redout_297557;
                                ((double *) mem_300606.mem)[i_297569 *
                                                            ctx_val_299884 +
                                                            i_297565 *
                                                            s_n_m_292825 +
                                                            i_297561] =
                                    defunc_2_reduce_res_293491;
                            }
                        }
                    }
                    if (memblock_set(ctx, &ext_mem_301151, &mem_300606,
                                     "mem_300606") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_301140, &mem_300601,
                                     "mem_300601") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300606, "mem_300606") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300601, "mem_300601") != 0)
                        return 1;
                } else {
                    bool match_lit_293523 = (int64_t) 1 == d_s_292681;
                    struct memblock ext_mem_301128;
                    
                    ext_mem_301128.references = NULL;
                    
                    struct memblock ext_mem_301117;
                    
                    ext_mem_301117.references = NULL;
                    if (match_lit_293523) {
                        struct memblock mem_300709;
                        
                        mem_300709.references = NULL;
                        if (memblock_alloc(ctx, &mem_300709, bytes_299854,
                                           "mem_300709")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_300714;
                        
                        mem_300714.references = NULL;
                        if (memblock_alloc(ctx, &mem_300714, bytes_299854,
                                           "mem_300714")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_297596 = 0; i_297596 <
                             partition_sizze_292766; i_297596++) {
                            for (int64_t i_297589 = 0; i_297589 < n_p_292677;
                                 i_297589++) {
                                int64_t x_293540;
                                
                                x_293540 = ((int64_t *) mem_299694)[i_297596 *
                                                                    n_p_292677 +
                                                                    i_297589];
                                for (int64_t i_297582 = 0; i_297582 <
                                     s_n_m_292825; i_297582++) {
                                    int64_t x_293546;
                                    
                                    x_293546 =
                                        ((int64_t *) mem_299855)[i_297596 *
                                                                 ctx_val_299884 +
                                                                 i_297589 *
                                                                 s_n_m_292825 +
                                                                 i_297582];
                                    
                                    double x_293547;
                                    
                                    x_293547 =
                                        ((double *) mem_299860)[i_297596 *
                                                                ctx_val_299884 +
                                                                i_297589 *
                                                                s_n_m_292825 +
                                                                i_297582];
                                    
                                    bool cond_293548 = i_297582 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_293549;
                                    
                                    if (cond_293548) {
                                        defunc_0_m_fun_res_293549 = (int64_t) 0;
                                    } else {
                                        int64_t y_293550 = sub64(s_n_m_292825,
                                                                 (int64_t) 1);
                                        bool cond_293551 = i_297582 == y_293550;
                                        int64_t defunc_0_m_fun_res_f_res_293552;
                                        
                                        if (cond_293551) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_293553
                                            = sub64(pad_css_len_292821,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_293552 =
                                                defunc_0_m_fun_res_f_res_t_res_293553;
                                        } else {
                                            int64_t x_293554 = sub64(i_297582,
                                                                     (int64_t) 1);
                                            int64_t x_293555 =
                                                    mul64(jump_s_292684,
                                                          x_293554);
                                            int64_t min_arg_293556 =
                                                    add64((int64_t) 1,
                                                          x_293555);
                                            int64_t min_res_293557 =
                                                    smin64(defunc_0_f_res_292820,
                                                           min_arg_293556);
                                            
                                            defunc_0_m_fun_res_f_res_293552 =
                                                min_res_293557;
                                        }
                                        defunc_0_m_fun_res_293549 =
                                            defunc_0_m_fun_res_f_res_293552;
                                    }
                                    
                                    double defunc_2_reduce_res_293558;
                                    double defunc_2_reduce_res_293559;
                                    double defunc_2_reduce_res_293560;
                                    double redout_297571;
                                    double redout_297572;
                                    double redout_297573;
                                    
                                    redout_297571 = 0.0;
                                    redout_297572 = 0.0;
                                    redout_297573 = 0.0;
                                    for (int64_t i_297574 = 0; i_297574 <
                                         q_s_292678; i_297574++) {
                                        bool cond_293571 = sle64(x_293540,
                                                                 i_297574);
                                        int64_t defunc_0_f_res_293572;
                                        
                                        if (cond_293571) {
                                            defunc_0_f_res_293572 = (int64_t) 0;
                                        } else {
                                            int64_t i_293573 = add64(x_293546,
                                                                     i_297574);
                                            int64_t defunc_0_add_arg_293574;
                                            
                                            defunc_0_add_arg_293574 =
                                                ((int64_t *) mem_299690)[i_297596 *
                                                                         ctx_val_299600 +
                                                                         i_297589 *
                                                                         defunc_0_f_res_292820 +
                                                                         i_293573];
                                            
                                            int64_t defunc_1_add_res_293575 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_293574);
                                            
                                            defunc_0_f_res_293572 =
                                                defunc_1_add_res_293575;
                                        }
                                        
                                        double defunc_0_f_res_293576;
                                        
                                        if (cond_293571) {
                                            defunc_0_f_res_293576 = 0.0;
                                        } else {
                                            int64_t i_293577 = add64(x_293546,
                                                                     i_297574);
                                            double defunc_0_add_arg_293578;
                                            
                                            defunc_0_add_arg_293578 =
                                                ((double *) mem_300400)[i_297596 *
                                                                        ctx_val_299600 +
                                                                        i_297589 *
                                                                        defunc_0_f_res_292820 +
                                                                        i_293577];
                                            defunc_0_f_res_293576 =
                                                defunc_0_add_arg_293578;
                                        }
                                        
                                        int64_t binop_p_293579 =
                                                sub64(defunc_0_f_res_293572,
                                                      defunc_0_m_fun_res_293549);
                                        double defunc_0_f_res_293580 =
                                               sitofp_i64_f64(binop_p_293579);
                                        double abs_res_293581 =
                                               fabs(defunc_0_f_res_293580);
                                        double tmp1_293582 = abs_res_293581 /
                                               x_293547;
                                        double x_293583 = tmp1_293582 *
                                               tmp1_293582;
                                        double y_293584 = tmp1_293582 *
                                               x_293583;
                                        double tmp2_293585 = 1.0 - y_293584;
                                        double x_293586 = tmp2_293585 *
                                               tmp2_293585;
                                        double tmp3_293587 = tmp2_293585 *
                                               x_293586;
                                        double w_j_293588 =
                                               defunc_0_f_res_293576 *
                                               tmp3_293587;
                                        double xw_j_293589 =
                                               defunc_0_f_res_293580 *
                                               w_j_293588;
                                        double x2w_j_293590 =
                                               defunc_0_f_res_293580 *
                                               xw_j_293589;
                                        double defunc_1_op_res_293563 =
                                               w_j_293588 + redout_297571;
                                        double defunc_1_op_res_293566 =
                                               xw_j_293589 + redout_297572;
                                        double defunc_1_op_res_293569 =
                                               x2w_j_293590 + redout_297573;
                                        double redout_tmp_306419 =
                                               defunc_1_op_res_293563;
                                        double redout_tmp_306420 =
                                               defunc_1_op_res_293566;
                                        double redout_tmp_306421 =
                                               defunc_1_op_res_293569;
                                        
                                        redout_297571 = redout_tmp_306419;
                                        redout_297572 = redout_tmp_306420;
                                        redout_297573 = redout_tmp_306421;
                                    }
                                    defunc_2_reduce_res_293558 = redout_297571;
                                    defunc_2_reduce_res_293559 = redout_297572;
                                    defunc_2_reduce_res_293560 = redout_297573;
                                    
                                    double a_293591 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293558;
                                    double b_293592 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293559;
                                    double c_293593 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293560;
                                    double x_293594 = a_293591 * c_293593;
                                    double y_293595 = b_293592 * b_293592;
                                    double y_293596 = x_293594 - y_293595;
                                    double det1_293597 = 1.0 / y_293596;
                                    double a11_293598 = c_293593 * det1_293597;
                                    double x_293599 = 0.0 - b_293592;
                                    double b11_293600 = det1_293597 * x_293599;
                                    double c11_293601 = a_293591 * det1_293597;
                                    int64_t defunc_0_m_fun_res_293602;
                                    
                                    if (cond_293548) {
                                        defunc_0_m_fun_res_293602 = (int64_t) 0;
                                    } else {
                                        int64_t y_293603 = sub64(s_n_m_292825,
                                                                 (int64_t) 1);
                                        bool cond_293604 = i_297582 == y_293603;
                                        int64_t defunc_0_m_fun_res_f_res_293605;
                                        
                                        if (cond_293604) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_293606
                                            = sub64(pad_css_len_292821,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_293605 =
                                                defunc_0_m_fun_res_f_res_t_res_293606;
                                        } else {
                                            int64_t x_293607 = sub64(i_297582,
                                                                     (int64_t) 1);
                                            int64_t x_293608 =
                                                    mul64(jump_s_292684,
                                                          x_293607);
                                            int64_t min_arg_293609 =
                                                    add64((int64_t) 1,
                                                          x_293608);
                                            int64_t min_res_293610 =
                                                    smin64(defunc_0_f_res_292820,
                                                           min_arg_293609);
                                            
                                            defunc_0_m_fun_res_f_res_293605 =
                                                min_res_293610;
                                        }
                                        defunc_0_m_fun_res_293602 =
                                            defunc_0_m_fun_res_f_res_293605;
                                    }
                                    
                                    double defunc_2_reduce_res_293611;
                                    double defunc_2_reduce_res_293612;
                                    double redout_297575;
                                    double redout_297576;
                                    
                                    redout_297575 = 0.0;
                                    redout_297576 = 0.0;
                                    for (int64_t i_297577 = 0; i_297577 <
                                         q_s_292678; i_297577++) {
                                        bool cond_293620 = sle64(x_293540,
                                                                 i_297577);
                                        int64_t defunc_0_f_res_293621;
                                        
                                        if (cond_293620) {
                                            defunc_0_f_res_293621 = (int64_t) 0;
                                        } else {
                                            int64_t i_293622 = add64(x_293546,
                                                                     i_297577);
                                            int64_t defunc_0_add_arg_293623;
                                            
                                            defunc_0_add_arg_293623 =
                                                ((int64_t *) mem_299690)[i_297596 *
                                                                         ctx_val_299600 +
                                                                         i_297589 *
                                                                         defunc_0_f_res_292820 +
                                                                         i_293622];
                                            
                                            int64_t defunc_1_add_res_293624 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_293623);
                                            
                                            defunc_0_f_res_293621 =
                                                defunc_1_add_res_293624;
                                        }
                                        
                                        double defunc_0_f_res_293625;
                                        
                                        if (cond_293620) {
                                            defunc_0_f_res_293625 = 0.0;
                                        } else {
                                            int64_t i_293626 = add64(x_293546,
                                                                     i_297577);
                                            double defunc_0_add_arg_293627;
                                            
                                            defunc_0_add_arg_293627 =
                                                ((double *) mem_300400)[i_297596 *
                                                                        ctx_val_299600 +
                                                                        i_297589 *
                                                                        defunc_0_f_res_292820 +
                                                                        i_293626];
                                            defunc_0_f_res_293625 =
                                                defunc_0_add_arg_293627;
                                        }
                                        
                                        int64_t binop_p_293628 =
                                                sub64(defunc_0_f_res_293621,
                                                      defunc_0_m_fun_res_293602);
                                        double defunc_0_f_res_293629 =
                                               sitofp_i64_f64(binop_p_293628);
                                        double abs_res_293630 =
                                               fabs(defunc_0_f_res_293629);
                                        double tmp1_293631 = abs_res_293630 /
                                               x_293547;
                                        double x_293632 = tmp1_293631 *
                                               tmp1_293631;
                                        double y_293633 = tmp1_293631 *
                                               x_293632;
                                        double tmp2_293634 = 1.0 - y_293633;
                                        double x_293635 = tmp2_293634 *
                                               tmp2_293634;
                                        double tmp3_293636 = tmp2_293634 *
                                               x_293635;
                                        double tmp4_293637 =
                                               defunc_0_f_res_293625 *
                                               tmp3_293636;
                                        double defunc_1_f_res_293638 =
                                               defunc_0_f_res_293629 *
                                               tmp4_293637;
                                        double defunc_0_f_res_293639;
                                        
                                        if (cond_293620) {
                                            defunc_0_f_res_293639 = 0.0;
                                        } else {
                                            int64_t i_293640 = add64(x_293546,
                                                                     i_297577);
                                            double defunc_0_add_arg_293641;
                                            
                                            defunc_0_add_arg_293641 =
                                                ((double *) mem_300395)[i_297596 *
                                                                        ctx_val_299600 +
                                                                        i_297589 *
                                                                        defunc_0_f_res_292820 +
                                                                        i_293640];
                                            defunc_0_f_res_293639 =
                                                defunc_0_add_arg_293641;
                                        }
                                        
                                        double x_293642 = a11_293598 *
                                               tmp4_293637;
                                        double y_293643 = b11_293600 *
                                               defunc_1_f_res_293638;
                                        double x_293644 = x_293642 + y_293643;
                                        double defunc_9_fit_fun_res_293645 =
                                               defunc_0_f_res_293639 * x_293644;
                                        double x_293646 = b11_293600 *
                                               tmp4_293637;
                                        double y_293647 = c11_293601 *
                                               defunc_1_f_res_293638;
                                        double x_293648 = x_293646 + y_293647;
                                        double defunc_9_slope_fun_res_293649 =
                                               defunc_0_f_res_293639 * x_293648;
                                        double defunc_1_op_res_293615 =
                                               defunc_9_fit_fun_res_293645 +
                                               redout_297575;
                                        double defunc_1_op_res_293618 =
                                               defunc_9_slope_fun_res_293649 +
                                               redout_297576;
                                        double redout_tmp_306422 =
                                               defunc_1_op_res_293615;
                                        double redout_tmp_306423 =
                                               defunc_1_op_res_293618;
                                        
                                        redout_297575 = redout_tmp_306422;
                                        redout_297576 = redout_tmp_306423;
                                    }
                                    defunc_2_reduce_res_293611 = redout_297575;
                                    defunc_2_reduce_res_293612 = redout_297576;
                                    ((double *) mem_300709.mem)[i_297596 *
                                                                ctx_val_299884 +
                                                                i_297589 *
                                                                s_n_m_292825 +
                                                                i_297582] =
                                        defunc_2_reduce_res_293611;
                                    ((double *) mem_300714.mem)[i_297596 *
                                                                ctx_val_299884 +
                                                                i_297589 *
                                                                s_n_m_292825 +
                                                                i_297582] =
                                        defunc_2_reduce_res_293612;
                                }
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_301128, &mem_300709,
                                         "mem_300709") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_301117, &mem_300714,
                                         "mem_300714") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300714, "mem_300714") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300709, "mem_300709") != 0)
                            return 1;
                    } else {
                        struct memblock mem_300915;
                        
                        mem_300915.references = NULL;
                        if (memblock_alloc(ctx, &mem_300915, bytes_299854,
                                           "mem_300915")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_300920;
                        
                        mem_300920.references = NULL;
                        if (memblock_alloc(ctx, &mem_300920, bytes_299854,
                                           "mem_300920")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_297626 = 0; i_297626 <
                             partition_sizze_292766; i_297626++) {
                            for (int64_t i_297619 = 0; i_297619 < n_p_292677;
                                 i_297619++) {
                                int64_t x_293668;
                                
                                x_293668 = ((int64_t *) mem_299694)[i_297626 *
                                                                    n_p_292677 +
                                                                    i_297619];
                                for (int64_t i_297612 = 0; i_297612 <
                                     s_n_m_292825; i_297612++) {
                                    int64_t x_293674;
                                    
                                    x_293674 =
                                        ((int64_t *) mem_299855)[i_297626 *
                                                                 ctx_val_299884 +
                                                                 i_297619 *
                                                                 s_n_m_292825 +
                                                                 i_297612];
                                    
                                    double x_293675;
                                    
                                    x_293675 =
                                        ((double *) mem_299860)[i_297626 *
                                                                ctx_val_299884 +
                                                                i_297619 *
                                                                s_n_m_292825 +
                                                                i_297612];
                                    
                                    bool cond_293676 = i_297612 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_293677;
                                    
                                    if (cond_293676) {
                                        defunc_0_m_fun_res_293677 = (int64_t) 0;
                                    } else {
                                        int64_t y_293678 = sub64(s_n_m_292825,
                                                                 (int64_t) 1);
                                        bool cond_293679 = i_297612 == y_293678;
                                        int64_t defunc_0_m_fun_res_f_res_293680;
                                        
                                        if (cond_293679) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_293681
                                            = sub64(pad_css_len_292821,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_293680 =
                                                defunc_0_m_fun_res_f_res_t_res_293681;
                                        } else {
                                            int64_t x_293682 = sub64(i_297612,
                                                                     (int64_t) 1);
                                            int64_t x_293683 =
                                                    mul64(jump_s_292684,
                                                          x_293682);
                                            int64_t min_arg_293684 =
                                                    add64((int64_t) 1,
                                                          x_293683);
                                            int64_t min_res_293685 =
                                                    smin64(defunc_0_f_res_292820,
                                                           min_arg_293684);
                                            
                                            defunc_0_m_fun_res_f_res_293680 =
                                                min_res_293685;
                                        }
                                        defunc_0_m_fun_res_293677 =
                                            defunc_0_m_fun_res_f_res_293680;
                                    }
                                    
                                    double defunc_2_reduce_res_293686;
                                    double defunc_2_reduce_res_293687;
                                    double defunc_2_reduce_res_293688;
                                    double defunc_2_reduce_res_293689;
                                    double defunc_2_reduce_res_293690;
                                    double redout_297599;
                                    double redout_297600;
                                    double redout_297601;
                                    double redout_297602;
                                    double redout_297603;
                                    
                                    redout_297599 = 0.0;
                                    redout_297600 = 0.0;
                                    redout_297601 = 0.0;
                                    redout_297602 = 0.0;
                                    redout_297603 = 0.0;
                                    for (int64_t i_297604 = 0; i_297604 <
                                         q_s_292678; i_297604++) {
                                        bool cond_293707 = sle64(x_293668,
                                                                 i_297604);
                                        int64_t defunc_0_f_res_293708;
                                        
                                        if (cond_293707) {
                                            defunc_0_f_res_293708 = (int64_t) 0;
                                        } else {
                                            int64_t i_293709 = add64(x_293674,
                                                                     i_297604);
                                            int64_t defunc_0_add_arg_293710;
                                            
                                            defunc_0_add_arg_293710 =
                                                ((int64_t *) mem_299690)[i_297626 *
                                                                         ctx_val_299600 +
                                                                         i_297619 *
                                                                         defunc_0_f_res_292820 +
                                                                         i_293709];
                                            
                                            int64_t defunc_1_add_res_293711 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_293710);
                                            
                                            defunc_0_f_res_293708 =
                                                defunc_1_add_res_293711;
                                        }
                                        
                                        double defunc_0_f_res_293712;
                                        
                                        if (cond_293707) {
                                            defunc_0_f_res_293712 = 0.0;
                                        } else {
                                            int64_t i_293713 = add64(x_293674,
                                                                     i_297604);
                                            double defunc_0_add_arg_293714;
                                            
                                            defunc_0_add_arg_293714 =
                                                ((double *) mem_300400)[i_297626 *
                                                                        ctx_val_299600 +
                                                                        i_297619 *
                                                                        defunc_0_f_res_292820 +
                                                                        i_293713];
                                            defunc_0_f_res_293712 =
                                                defunc_0_add_arg_293714;
                                        }
                                        
                                        int64_t binop_p_293715 =
                                                sub64(defunc_0_f_res_293708,
                                                      defunc_0_m_fun_res_293677);
                                        double defunc_0_f_res_293716 =
                                               sitofp_i64_f64(binop_p_293715);
                                        double abs_res_293717 =
                                               fabs(defunc_0_f_res_293716);
                                        double tmp1_293718 = abs_res_293717 /
                                               x_293675;
                                        double x_293719 = tmp1_293718 *
                                               tmp1_293718;
                                        double y_293720 = tmp1_293718 *
                                               x_293719;
                                        double tmp2_293721 = 1.0 - y_293720;
                                        double x_293722 = tmp2_293721 *
                                               tmp2_293721;
                                        double tmp3_293723 = tmp2_293721 *
                                               x_293722;
                                        double w_j_293724 =
                                               defunc_0_f_res_293712 *
                                               tmp3_293723;
                                        double xw_j_293725 =
                                               defunc_0_f_res_293716 *
                                               w_j_293724;
                                        double x2w_j_293726 =
                                               defunc_0_f_res_293716 *
                                               xw_j_293725;
                                        double x3w_j_293727 =
                                               defunc_0_f_res_293716 *
                                               x2w_j_293726;
                                        double x4w_j_293728 =
                                               defunc_0_f_res_293716 *
                                               x3w_j_293727;
                                        double defunc_1_op_res_293693 =
                                               w_j_293724 + redout_297599;
                                        double defunc_1_op_res_293696 =
                                               xw_j_293725 + redout_297600;
                                        double defunc_1_op_res_293699 =
                                               x2w_j_293726 + redout_297601;
                                        double defunc_1_op_res_293702 =
                                               x3w_j_293727 + redout_297602;
                                        double defunc_1_op_res_293705 =
                                               x4w_j_293728 + redout_297603;
                                        double redout_tmp_306430 =
                                               defunc_1_op_res_293693;
                                        double redout_tmp_306431 =
                                               defunc_1_op_res_293696;
                                        double redout_tmp_306432 =
                                               defunc_1_op_res_293699;
                                        double redout_tmp_306433 =
                                               defunc_1_op_res_293702;
                                        double redout_tmp_306434 =
                                               defunc_1_op_res_293705;
                                        
                                        redout_297599 = redout_tmp_306430;
                                        redout_297600 = redout_tmp_306431;
                                        redout_297601 = redout_tmp_306432;
                                        redout_297602 = redout_tmp_306433;
                                        redout_297603 = redout_tmp_306434;
                                    }
                                    defunc_2_reduce_res_293686 = redout_297599;
                                    defunc_2_reduce_res_293687 = redout_297600;
                                    defunc_2_reduce_res_293688 = redout_297601;
                                    defunc_2_reduce_res_293689 = redout_297602;
                                    defunc_2_reduce_res_293690 = redout_297603;
                                    
                                    double a_293729 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293686;
                                    double b_293730 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293687;
                                    double c_293731 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293688;
                                    double d_293732 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293689;
                                    double e_293733 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293690;
                                    double x_293734 = c_293731 * e_293733;
                                    double y_293735 = d_293732 * d_293732;
                                    double a12_293736 = x_293734 - y_293735;
                                    double x_293737 = c_293731 * d_293732;
                                    double y_293738 = b_293730 * e_293733;
                                    double b12_293739 = x_293737 - y_293738;
                                    double x_293740 = b_293730 * d_293732;
                                    double y_293741 = c_293731 * c_293731;
                                    double c12_293742 = x_293740 - y_293741;
                                    double x_293743 = a_293729 * e_293733;
                                    double b2_293744 = x_293743 - y_293741;
                                    double x_293745 = b_293730 * c_293731;
                                    double y_293746 = a_293729 * d_293732;
                                    double c2_293747 = x_293745 - y_293746;
                                    double x_293748 = a_293729 * a12_293736;
                                    double y_293749 = b_293730 * b12_293739;
                                    double x_293750 = x_293748 + y_293749;
                                    double y_293751 = c_293731 * c12_293742;
                                    double y_293752 = x_293750 + y_293751;
                                    double det_293753 = 1.0 / y_293752;
                                    double a12_293754 = a12_293736 * det_293753;
                                    double b12_293755 = b12_293739 * det_293753;
                                    double c12_293756 = c12_293742 * det_293753;
                                    double b2_293757 = b2_293744 * det_293753;
                                    double c2_293758 = c2_293747 * det_293753;
                                    int64_t defunc_0_m_fun_res_293759;
                                    
                                    if (cond_293676) {
                                        defunc_0_m_fun_res_293759 = (int64_t) 0;
                                    } else {
                                        int64_t y_293760 = sub64(s_n_m_292825,
                                                                 (int64_t) 1);
                                        bool cond_293761 = i_297612 == y_293760;
                                        int64_t defunc_0_m_fun_res_f_res_293762;
                                        
                                        if (cond_293761) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_293763
                                            = sub64(pad_css_len_292821,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_293762 =
                                                defunc_0_m_fun_res_f_res_t_res_293763;
                                        } else {
                                            int64_t x_293764 = sub64(i_297612,
                                                                     (int64_t) 1);
                                            int64_t x_293765 =
                                                    mul64(jump_s_292684,
                                                          x_293764);
                                            int64_t min_arg_293766 =
                                                    add64((int64_t) 1,
                                                          x_293765);
                                            int64_t min_res_293767 =
                                                    smin64(defunc_0_f_res_292820,
                                                           min_arg_293766);
                                            
                                            defunc_0_m_fun_res_f_res_293762 =
                                                min_res_293767;
                                        }
                                        defunc_0_m_fun_res_293759 =
                                            defunc_0_m_fun_res_f_res_293762;
                                    }
                                    
                                    double defunc_2_reduce_res_293768;
                                    double defunc_2_reduce_res_293769;
                                    double redout_297605;
                                    double redout_297606;
                                    
                                    redout_297605 = 0.0;
                                    redout_297606 = 0.0;
                                    for (int64_t i_297607 = 0; i_297607 <
                                         q_s_292678; i_297607++) {
                                        bool cond_293777 = sle64(x_293668,
                                                                 i_297607);
                                        int64_t defunc_0_f_res_293778;
                                        
                                        if (cond_293777) {
                                            defunc_0_f_res_293778 = (int64_t) 0;
                                        } else {
                                            int64_t i_293779 = add64(x_293674,
                                                                     i_297607);
                                            int64_t defunc_0_add_arg_293780;
                                            
                                            defunc_0_add_arg_293780 =
                                                ((int64_t *) mem_299690)[i_297626 *
                                                                         ctx_val_299600 +
                                                                         i_297619 *
                                                                         defunc_0_f_res_292820 +
                                                                         i_293779];
                                            
                                            int64_t defunc_1_add_res_293781 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_293780);
                                            
                                            defunc_0_f_res_293778 =
                                                defunc_1_add_res_293781;
                                        }
                                        
                                        double defunc_0_f_res_293782;
                                        
                                        if (cond_293777) {
                                            defunc_0_f_res_293782 = 0.0;
                                        } else {
                                            int64_t i_293783 = add64(x_293674,
                                                                     i_297607);
                                            double defunc_0_add_arg_293784;
                                            
                                            defunc_0_add_arg_293784 =
                                                ((double *) mem_300400)[i_297626 *
                                                                        ctx_val_299600 +
                                                                        i_297619 *
                                                                        defunc_0_f_res_292820 +
                                                                        i_293783];
                                            defunc_0_f_res_293782 =
                                                defunc_0_add_arg_293784;
                                        }
                                        
                                        int64_t binop_p_293785 =
                                                sub64(defunc_0_f_res_293778,
                                                      defunc_0_m_fun_res_293759);
                                        double defunc_0_f_res_293786 =
                                               sitofp_i64_f64(binop_p_293785);
                                        double abs_res_293787 =
                                               fabs(defunc_0_f_res_293786);
                                        double tmp1_293788 = abs_res_293787 /
                                               x_293675;
                                        double x_293789 = tmp1_293788 *
                                               tmp1_293788;
                                        double y_293790 = tmp1_293788 *
                                               x_293789;
                                        double tmp2_293791 = 1.0 - y_293790;
                                        double x_293792 = tmp2_293791 *
                                               tmp2_293791;
                                        double tmp3_293793 = tmp2_293791 *
                                               x_293792;
                                        double tmp4_293794 =
                                               defunc_0_f_res_293782 *
                                               tmp3_293793;
                                        double defunc_1_f_res_293795 =
                                               defunc_0_f_res_293786 *
                                               tmp4_293794;
                                        double defunc_1_f_res_293796 =
                                               defunc_0_f_res_293786 *
                                               defunc_1_f_res_293795;
                                        double defunc_0_f_res_293797;
                                        
                                        if (cond_293777) {
                                            defunc_0_f_res_293797 = 0.0;
                                        } else {
                                            int64_t i_293798 = add64(x_293674,
                                                                     i_297607);
                                            double defunc_0_add_arg_293799;
                                            
                                            defunc_0_add_arg_293799 =
                                                ((double *) mem_300395)[i_297626 *
                                                                        ctx_val_299600 +
                                                                        i_297619 *
                                                                        defunc_0_f_res_292820 +
                                                                        i_293798];
                                            defunc_0_f_res_293797 =
                                                defunc_0_add_arg_293799;
                                        }
                                        
                                        double x_293800 = a12_293754 *
                                               tmp4_293794;
                                        double y_293801 = b12_293755 *
                                               defunc_1_f_res_293795;
                                        double x_293802 = x_293800 + y_293801;
                                        double y_293803 = c12_293756 *
                                               defunc_1_f_res_293796;
                                        double x_293804 = x_293802 + y_293803;
                                        double defunc_9_fit_fun_res_293805 =
                                               defunc_0_f_res_293797 * x_293804;
                                        double x_293806 = b12_293755 *
                                               tmp4_293794;
                                        double y_293807 = b2_293757 *
                                               defunc_1_f_res_293795;
                                        double x_293808 = x_293806 + y_293807;
                                        double y_293809 = c2_293758 *
                                               defunc_1_f_res_293796;
                                        double x_293810 = x_293808 + y_293809;
                                        double defunc_9_slope_fun_res_293811 =
                                               defunc_0_f_res_293797 * x_293810;
                                        double defunc_1_op_res_293772 =
                                               defunc_9_fit_fun_res_293805 +
                                               redout_297605;
                                        double defunc_1_op_res_293775 =
                                               defunc_9_slope_fun_res_293811 +
                                               redout_297606;
                                        double redout_tmp_306435 =
                                               defunc_1_op_res_293772;
                                        double redout_tmp_306436 =
                                               defunc_1_op_res_293775;
                                        
                                        redout_297605 = redout_tmp_306435;
                                        redout_297606 = redout_tmp_306436;
                                    }
                                    defunc_2_reduce_res_293768 = redout_297605;
                                    defunc_2_reduce_res_293769 = redout_297606;
                                    ((double *) mem_300915.mem)[i_297626 *
                                                                ctx_val_299884 +
                                                                i_297619 *
                                                                s_n_m_292825 +
                                                                i_297612] =
                                        defunc_2_reduce_res_293768;
                                    ((double *) mem_300920.mem)[i_297626 *
                                                                ctx_val_299884 +
                                                                i_297619 *
                                                                s_n_m_292825 +
                                                                i_297612] =
                                        defunc_2_reduce_res_293769;
                                }
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_301128, &mem_300915,
                                         "mem_300915") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_301117, &mem_300920,
                                         "mem_300920") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300920, "mem_300920") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300915, "mem_300915") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_301151, &ext_mem_301128,
                                     "ext_mem_301128") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_301140, &ext_mem_301117,
                                     "ext_mem_301117") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301117,
                                       "ext_mem_301117") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301128,
                                       "ext_mem_301128") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_302430, &ext_mem_301151,
                                 "ext_mem_301151") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_302419, &ext_mem_301140,
                                 "ext_mem_301140") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_301140, "ext_mem_301140") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_301151, "ext_mem_301151") != 0)
                    return 1;
            } else {
                bool cond_293816 = sle64(jump_threshold_2_292690,
                                         jump_s_292684);
                bool cond_t_res_293817 = slt64(q_s_292678,
                                               q_threshold_1_292691);
                bool x_293818 = cond_293816 && cond_t_res_293817;
                struct memblock ext_mem_302408;
                
                ext_mem_302408.references = NULL;
                
                struct memblock ext_mem_302397;
                
                ext_mem_302397.references = NULL;
                if (x_293818) {
                    bool match_lit_293821 = (int64_t) 0 == d_s_292681;
                    int64_t binop_y_301219 = (int64_t) 8 * q_s_292678;
                    int64_t bytes_301220 = smax64((int64_t) 0, binop_y_301219);
                    struct memblock ext_mem_301821;
                    
                    ext_mem_301821.references = NULL;
                    
                    struct memblock ext_mem_301810;
                    
                    ext_mem_301810.references = NULL;
                    if (match_lit_293821) {
                        struct memblock mem_301166;
                        
                        mem_301166.references = NULL;
                        if (memblock_alloc(ctx, &mem_301166, bytes_299854,
                                           "mem_301166")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_306437 = 0; i_306437 <
                             partition_sizze_292766; i_306437++) {
                            for (int64_t i_306438 = 0; i_306438 < n_p_292677;
                                 i_306438++) {
                                for (int64_t i_306439 = 0; i_306439 <
                                     s_n_m_292825; i_306439++) {
                                    ((double *) mem_301166.mem)[i_306437 *
                                                                (s_n_m_292825 *
                                                                 n_p_292677) +
                                                                i_306438 *
                                                                s_n_m_292825 +
                                                                i_306439] = 0.0;
                                }
                            }
                        }
                        
                        struct memblock mem_301171;
                        
                        mem_301171.references = NULL;
                        if (memblock_alloc(ctx, &mem_301171, bytes_299854,
                                           "mem_301171")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_301221_cached_sizze_306842 <
                            (size_t) bytes_301220) {
                            mem_301221 = realloc(mem_301221, bytes_301220);
                            mem_301221_cached_sizze_306842 = bytes_301220;
                        }
                        for (int64_t i_297646 = 0; i_297646 <
                             partition_sizze_292766; i_297646++) {
                            for (int64_t i_297642 = 0; i_297642 < n_p_292677;
                                 i_297642++) {
                                int64_t x_293837;
                                
                                x_293837 = ((int64_t *) mem_299694)[i_297646 *
                                                                    n_p_292677 +
                                                                    i_297642];
                                for (int64_t i_297638 = 0; i_297638 <
                                     s_n_m_292825; i_297638++) {
                                    int64_t x_293842;
                                    
                                    x_293842 =
                                        ((int64_t *) mem_299855)[i_297646 *
                                                                 ctx_val_299884 +
                                                                 i_297642 *
                                                                 s_n_m_292825 +
                                                                 i_297638];
                                    
                                    double x_293843;
                                    
                                    x_293843 =
                                        ((double *) mem_299860)[i_297646 *
                                                                ctx_val_299884 +
                                                                i_297642 *
                                                                s_n_m_292825 +
                                                                i_297638];
                                    
                                    bool cond_293844 = i_297638 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_293845;
                                    
                                    if (cond_293844) {
                                        defunc_0_m_fun_res_293845 = (int64_t) 0;
                                    } else {
                                        int64_t y_293846 = sub64(s_n_m_292825,
                                                                 (int64_t) 1);
                                        bool cond_293847 = i_297638 == y_293846;
                                        int64_t defunc_0_m_fun_res_f_res_293848;
                                        
                                        if (cond_293847) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_293849
                                            = sub64(pad_css_len_292821,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_293848 =
                                                defunc_0_m_fun_res_f_res_t_res_293849;
                                        } else {
                                            int64_t x_293850 = sub64(i_297638,
                                                                     (int64_t) 1);
                                            int64_t x_293851 =
                                                    mul64(jump_s_292684,
                                                          x_293850);
                                            int64_t min_arg_293852 =
                                                    add64((int64_t) 1,
                                                          x_293851);
                                            int64_t min_res_293853 =
                                                    smin64(defunc_0_f_res_292820,
                                                           min_arg_293852);
                                            
                                            defunc_0_m_fun_res_f_res_293848 =
                                                min_res_293853;
                                        }
                                        defunc_0_m_fun_res_293845 =
                                            defunc_0_m_fun_res_f_res_293848;
                                    }
                                    
                                    double defunc_2_reduce_res_293854;
                                    double redout_297630 = 0.0;
                                    
                                    for (int64_t i_297632 = 0; i_297632 <
                                         q_s_292678; i_297632++) {
                                        bool cond_293860 = sle64(x_293837,
                                                                 i_297632);
                                        int64_t defunc_0_f_res_293861;
                                        
                                        if (cond_293860) {
                                            defunc_0_f_res_293861 = (int64_t) 0;
                                        } else {
                                            int64_t i_293862 = add64(x_293842,
                                                                     i_297632);
                                            int64_t defunc_0_add_arg_293863;
                                            
                                            defunc_0_add_arg_293863 =
                                                ((int64_t *) mem_299690)[i_297646 *
                                                                         ctx_val_299600 +
                                                                         i_297642 *
                                                                         defunc_0_f_res_292820 +
                                                                         i_293862];
                                            
                                            int64_t defunc_1_add_res_293864 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_293863);
                                            
                                            defunc_0_f_res_293861 =
                                                defunc_1_add_res_293864;
                                        }
                                        
                                        double defunc_0_f_res_293865;
                                        
                                        if (cond_293860) {
                                            defunc_0_f_res_293865 = 0.0;
                                        } else {
                                            int64_t i_293866 = add64(x_293842,
                                                                     i_297632);
                                            double defunc_0_add_arg_293867;
                                            
                                            defunc_0_add_arg_293867 =
                                                ((double *) mem_300400)[i_297646 *
                                                                        ctx_val_299600 +
                                                                        i_297642 *
                                                                        defunc_0_f_res_292820 +
                                                                        i_293866];
                                            defunc_0_f_res_293865 =
                                                defunc_0_add_arg_293867;
                                        }
                                        
                                        int64_t binop_p_293868 =
                                                sub64(defunc_0_f_res_293861,
                                                      defunc_0_m_fun_res_293845);
                                        double defunc_0_f_res_293869 =
                                               sitofp_i64_f64(binop_p_293868);
                                        double abs_res_293870 =
                                               fabs(defunc_0_f_res_293869);
                                        double tmp1_293871 = abs_res_293870 /
                                               x_293843;
                                        double x_293872 = tmp1_293871 *
                                               tmp1_293871;
                                        double y_293873 = tmp1_293871 *
                                               x_293872;
                                        double tmp2_293874 = 1.0 - y_293873;
                                        double x_293875 = tmp2_293874 *
                                               tmp2_293874;
                                        double tmp3_293876 = tmp2_293874 *
                                               x_293875;
                                        double tmp4_293877 =
                                               defunc_0_f_res_293865 *
                                               tmp3_293876;
                                        double defunc_1_op_res_293858 =
                                               tmp4_293877 + redout_297630;
                                        
                                        ((double *) mem_301221)[i_297632] =
                                            tmp4_293877;
                                        
                                        double redout_tmp_306443 =
                                               defunc_1_op_res_293858;
                                        
                                        redout_297630 = redout_tmp_306443;
                                    }
                                    defunc_2_reduce_res_293854 = redout_297630;
                                    
                                    double a_293878 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_293854;
                                    double a0_293879 = 1.0 / a_293878;
                                    double defunc_2_reduce_res_293880;
                                    double redout_297634 = 0.0;
                                    
                                    for (int64_t i_297635 = 0; i_297635 <
                                         q_s_292678; i_297635++) {
                                        double x_293885;
                                        
                                        x_293885 =
                                            ((double *) mem_301221)[i_297635];
                                        
                                        bool cond_293886 = sle64(x_293837,
                                                                 i_297635);
                                        double defunc_0_f_res_293887;
                                        
                                        if (cond_293886) {
                                            defunc_0_f_res_293887 = 0.0;
                                        } else {
                                            int64_t i_293888 = add64(x_293842,
                                                                     i_297635);
                                            double defunc_0_add_arg_293889;
                                            
                                            defunc_0_add_arg_293889 =
                                                ((double *) mem_300395)[i_297646 *
                                                                        ctx_val_299600 +
                                                                        i_297642 *
                                                                        defunc_0_f_res_292820 +
                                                                        i_293888];
                                            defunc_0_f_res_293887 =
                                                defunc_0_add_arg_293889;
                                        }
                                        
                                        double x_293890 = a0_293879 * x_293885;
                                        double defunc_9_fit_fun_res_293891 =
                                               defunc_0_f_res_293887 * x_293890;
                                        double defunc_1_op_res_293883 =
                                               defunc_9_fit_fun_res_293891 +
                                               redout_297634;
                                        double redout_tmp_306445 =
                                               defunc_1_op_res_293883;
                                        
                                        redout_297634 = redout_tmp_306445;
                                    }
                                    defunc_2_reduce_res_293880 = redout_297634;
                                    ((double *) mem_301171.mem)[i_297646 *
                                                                ctx_val_299884 +
                                                                i_297642 *
                                                                s_n_m_292825 +
                                                                i_297638] =
                                        defunc_2_reduce_res_293880;
                                }
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_301821, &mem_301171,
                                         "mem_301171") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_301810, &mem_301166,
                                         "mem_301166") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301171, "mem_301171") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301166, "mem_301166") != 0)
                            return 1;
                    } else {
                        bool match_lit_293896 = (int64_t) 1 == d_s_292681;
                        int64_t binop_y_301389 = (int64_t) 8 * q_s_292678;
                        int64_t bytes_301390 = smax64((int64_t) 0,
                                                      binop_y_301389);
                        int64_t binop_y_301625 = (int64_t) 8 * q_s_292678;
                        int64_t bytes_301626 = smax64((int64_t) 0,
                                                      binop_y_301625);
                        struct memblock ext_mem_301798;
                        
                        ext_mem_301798.references = NULL;
                        
                        struct memblock ext_mem_301787;
                        
                        ext_mem_301787.references = NULL;
                        if (match_lit_293896) {
                            struct memblock mem_301289;
                            
                            mem_301289.references = NULL;
                            if (memblock_alloc(ctx, &mem_301289, bytes_299854,
                                               "mem_301289")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_301294;
                            
                            mem_301294.references = NULL;
                            if (memblock_alloc(ctx, &mem_301294, bytes_299854,
                                               "mem_301294")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_301391_cached_sizze_306843 <
                                (size_t) bytes_301390) {
                                mem_301391 = realloc(mem_301391, bytes_301390);
                                mem_301391_cached_sizze_306843 = bytes_301390;
                            }
                            if (mem_301394_cached_sizze_306844 <
                                (size_t) bytes_301390) {
                                mem_301394 = realloc(mem_301394, bytes_301390);
                                mem_301394_cached_sizze_306844 = bytes_301390;
                            }
                            for (int64_t i_297679 = 0; i_297679 <
                                 partition_sizze_292766; i_297679++) {
                                for (int64_t i_297672 = 0; i_297672 <
                                     n_p_292677; i_297672++) {
                                    int64_t x_293913;
                                    
                                    x_293913 =
                                        ((int64_t *) mem_299694)[i_297679 *
                                                                 n_p_292677 +
                                                                 i_297672];
                                    for (int64_t i_297665 = 0; i_297665 <
                                         s_n_m_292825; i_297665++) {
                                        int64_t x_293919;
                                        
                                        x_293919 =
                                            ((int64_t *) mem_299855)[i_297679 *
                                                                     ctx_val_299884 +
                                                                     i_297672 *
                                                                     s_n_m_292825 +
                                                                     i_297665];
                                        
                                        double x_293920;
                                        
                                        x_293920 =
                                            ((double *) mem_299860)[i_297679 *
                                                                    ctx_val_299884 +
                                                                    i_297672 *
                                                                    s_n_m_292825 +
                                                                    i_297665];
                                        
                                        bool cond_293921 = i_297665 ==
                                             (int64_t) 0;
                                        int64_t defunc_0_m_fun_res_293922;
                                        
                                        if (cond_293921) {
                                            defunc_0_m_fun_res_293922 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_293923 =
                                                    sub64(s_n_m_292825,
                                                          (int64_t) 1);
                                            bool cond_293924 = i_297665 ==
                                                 y_293923;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_293925;
                                            
                                            if (cond_293924) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_293926
                                                = sub64(pad_css_len_292821,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_293925 =
                                                    defunc_0_m_fun_res_f_res_t_res_293926;
                                            } else {
                                                int64_t x_293927 =
                                                        sub64(i_297665,
                                                              (int64_t) 1);
                                                int64_t x_293928 =
                                                        mul64(jump_s_292684,
                                                              x_293927);
                                                int64_t min_arg_293929 =
                                                        add64((int64_t) 1,
                                                              x_293928);
                                                int64_t min_res_293930 =
                                                        smin64(defunc_0_f_res_292820,
                                                               min_arg_293929);
                                                
                                                defunc_0_m_fun_res_f_res_293925 =
                                                    min_res_293930;
                                            }
                                            defunc_0_m_fun_res_293922 =
                                                defunc_0_m_fun_res_f_res_293925;
                                        }
                                        
                                        double defunc_2_reduce_res_293954;
                                        double defunc_2_reduce_res_293955;
                                        double defunc_2_reduce_res_293956;
                                        double redout_297650;
                                        double redout_297651;
                                        double redout_297652;
                                        
                                        redout_297650 = 0.0;
                                        redout_297651 = 0.0;
                                        redout_297652 = 0.0;
                                        for (int64_t i_297655 = 0; i_297655 <
                                             q_s_292678; i_297655++) {
                                            bool cond_293969 = sle64(x_293913,
                                                                     i_297655);
                                            int64_t defunc_0_f_res_293970;
                                            
                                            if (cond_293969) {
                                                defunc_0_f_res_293970 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_293971 =
                                                        add64(x_293919,
                                                              i_297655);
                                                int64_t defunc_0_add_arg_293972;
                                                
                                                defunc_0_add_arg_293972 =
                                                    ((int64_t *) mem_299690)[i_297679 *
                                                                             ctx_val_299600 +
                                                                             i_297672 *
                                                                             defunc_0_f_res_292820 +
                                                                             i_293971];
                                                
                                                int64_t defunc_1_add_res_293973
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_293972);
                                                
                                                defunc_0_f_res_293970 =
                                                    defunc_1_add_res_293973;
                                            }
                                            
                                            double defunc_0_f_res_293974;
                                            
                                            if (cond_293969) {
                                                defunc_0_f_res_293974 = 0.0;
                                            } else {
                                                int64_t i_293975 =
                                                        add64(x_293919,
                                                              i_297655);
                                                double defunc_0_add_arg_293976;
                                                
                                                defunc_0_add_arg_293976 =
                                                    ((double *) mem_300400)[i_297679 *
                                                                            ctx_val_299600 +
                                                                            i_297672 *
                                                                            defunc_0_f_res_292820 +
                                                                            i_293975];
                                                defunc_0_f_res_293974 =
                                                    defunc_0_add_arg_293976;
                                            }
                                            
                                            int64_t binop_p_293977 =
                                                    sub64(defunc_0_f_res_293970,
                                                          defunc_0_m_fun_res_293922);
                                            double defunc_0_f_res_293978 =
                                                   sitofp_i64_f64(binop_p_293977);
                                            double abs_res_293979 =
                                                   fabs(defunc_0_f_res_293978);
                                            double tmp1_293980 =
                                                   abs_res_293979 / x_293920;
                                            double x_293981 = tmp1_293980 *
                                                   tmp1_293980;
                                            double y_293982 = tmp1_293980 *
                                                   x_293981;
                                            double tmp2_293983 = 1.0 - y_293982;
                                            double x_293984 = tmp2_293983 *
                                                   tmp2_293983;
                                            double tmp3_293985 = tmp2_293983 *
                                                   x_293984;
                                            double tmp4_293986 =
                                                   defunc_0_f_res_293974 *
                                                   tmp3_293985;
                                            double defunc_1_f_res_293987 =
                                                   defunc_0_f_res_293978 *
                                                   tmp4_293986;
                                            double defunc_1_f_res_293988 =
                                                   defunc_0_f_res_293978 *
                                                   defunc_1_f_res_293987;
                                            double defunc_1_op_res_293961 =
                                                   tmp4_293986 + redout_297650;
                                            double defunc_1_op_res_293964 =
                                                   defunc_1_f_res_293987 +
                                                   redout_297651;
                                            double defunc_1_op_res_293967 =
                                                   defunc_1_f_res_293988 +
                                                   redout_297652;
                                            
                                            ((double *) mem_301391)[i_297655] =
                                                defunc_1_f_res_293987;
                                            ((double *) mem_301394)[i_297655] =
                                                tmp4_293986;
                                            
                                            double redout_tmp_306452 =
                                                   defunc_1_op_res_293961;
                                            double redout_tmp_306453 =
                                                   defunc_1_op_res_293964;
                                            double redout_tmp_306454 =
                                                   defunc_1_op_res_293967;
                                            
                                            redout_297650 = redout_tmp_306452;
                                            redout_297651 = redout_tmp_306453;
                                            redout_297652 = redout_tmp_306454;
                                        }
                                        defunc_2_reduce_res_293954 =
                                            redout_297650;
                                        defunc_2_reduce_res_293955 =
                                            redout_297651;
                                        defunc_2_reduce_res_293956 =
                                            redout_297652;
                                        
                                        double a_293994 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_293954;
                                        double b_293995 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_293955;
                                        double c_293996 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_293956;
                                        double x_293997 = a_293994 * c_293996;
                                        double y_293998 = b_293995 * b_293995;
                                        double y_293999 = x_293997 - y_293998;
                                        double det1_294000 = 1.0 / y_293999;
                                        double a11_294001 = c_293996 *
                                               det1_294000;
                                        double x_294002 = 0.0 - b_293995;
                                        double b11_294003 = det1_294000 *
                                               x_294002;
                                        double c11_294004 = a_293994 *
                                               det1_294000;
                                        double defunc_2_reduce_res_294005;
                                        double defunc_2_reduce_res_294006;
                                        double redout_297658;
                                        double redout_297659;
                                        
                                        redout_297658 = 0.0;
                                        redout_297659 = 0.0;
                                        for (int64_t i_297660 = 0; i_297660 <
                                             q_s_292678; i_297660++) {
                                            double x_294014;
                                            
                                            x_294014 =
                                                ((double *) mem_301394)[i_297660];
                                            
                                            double x_294015;
                                            
                                            x_294015 =
                                                ((double *) mem_301391)[i_297660];
                                            
                                            bool cond_294016 = sle64(x_293913,
                                                                     i_297660);
                                            double defunc_0_f_res_294017;
                                            
                                            if (cond_294016) {
                                                defunc_0_f_res_294017 = 0.0;
                                            } else {
                                                int64_t i_294018 =
                                                        add64(x_293919,
                                                              i_297660);
                                                double defunc_0_add_arg_294019;
                                                
                                                defunc_0_add_arg_294019 =
                                                    ((double *) mem_300395)[i_297679 *
                                                                            ctx_val_299600 +
                                                                            i_297672 *
                                                                            defunc_0_f_res_292820 +
                                                                            i_294018];
                                                defunc_0_f_res_294017 =
                                                    defunc_0_add_arg_294019;
                                            }
                                            
                                            double x_294020 = a11_294001 *
                                                   x_294014;
                                            double y_294021 = b11_294003 *
                                                   x_294015;
                                            double x_294022 = x_294020 +
                                                   y_294021;
                                            double defunc_9_fit_fun_res_294023 =
                                                   defunc_0_f_res_294017 *
                                                   x_294022;
                                            double x_294024 = b11_294003 *
                                                   x_294014;
                                            double y_294025 = c11_294004 *
                                                   x_294015;
                                            double x_294026 = x_294024 +
                                                   y_294025;
                                            double defunc_9_slope_fun_res_294027
                                                   = defunc_0_f_res_294017 *
                                                   x_294026;
                                            double defunc_1_op_res_294009 =
                                                   defunc_9_fit_fun_res_294023 +
                                                   redout_297658;
                                            double defunc_1_op_res_294012 =
                                                   defunc_9_slope_fun_res_294027 +
                                                   redout_297659;
                                            double redout_tmp_306457 =
                                                   defunc_1_op_res_294009;
                                            double redout_tmp_306458 =
                                                   defunc_1_op_res_294012;
                                            
                                            redout_297658 = redout_tmp_306457;
                                            redout_297659 = redout_tmp_306458;
                                        }
                                        defunc_2_reduce_res_294005 =
                                            redout_297658;
                                        defunc_2_reduce_res_294006 =
                                            redout_297659;
                                        ((double *) mem_301289.mem)[i_297679 *
                                                                    ctx_val_299884 +
                                                                    i_297672 *
                                                                    s_n_m_292825 +
                                                                    i_297665] =
                                            defunc_2_reduce_res_294005;
                                        ((double *) mem_301294.mem)[i_297679 *
                                                                    ctx_val_299884 +
                                                                    i_297672 *
                                                                    s_n_m_292825 +
                                                                    i_297665] =
                                            defunc_2_reduce_res_294006;
                                    }
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_301798, &mem_301289,
                                             "mem_301289") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_301787, &mem_301294,
                                             "mem_301294") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301294,
                                               "mem_301294") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301289,
                                               "mem_301289") != 0)
                                return 1;
                        } else {
                            struct memblock mem_301525;
                            
                            mem_301525.references = NULL;
                            if (memblock_alloc(ctx, &mem_301525, bytes_299854,
                                               "mem_301525")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_301530;
                            
                            mem_301530.references = NULL;
                            if (memblock_alloc(ctx, &mem_301530, bytes_299854,
                                               "mem_301530")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_301627_cached_sizze_306845 <
                                (size_t) bytes_301626) {
                                mem_301627 = realloc(mem_301627, bytes_301626);
                                mem_301627_cached_sizze_306845 = bytes_301626;
                            }
                            if (mem_301630_cached_sizze_306846 <
                                (size_t) bytes_301626) {
                                mem_301630 = realloc(mem_301630, bytes_301626);
                                mem_301630_cached_sizze_306846 = bytes_301626;
                            }
                            if (mem_301657_cached_sizze_306847 <
                                (size_t) bytes_301626) {
                                mem_301657 = realloc(mem_301657, bytes_301626);
                                mem_301657_cached_sizze_306847 = bytes_301626;
                            }
                            if (mem_301660_cached_sizze_306848 <
                                (size_t) bytes_301626) {
                                mem_301660 = realloc(mem_301660, bytes_301626);
                                mem_301660_cached_sizze_306848 = bytes_301626;
                            }
                            for (int64_t i_297722 = 0; i_297722 <
                                 partition_sizze_292766; i_297722++) {
                                for (int64_t i_297715 = 0; i_297715 <
                                     n_p_292677; i_297715++) {
                                    int64_t x_294046;
                                    
                                    x_294046 =
                                        ((int64_t *) mem_299694)[i_297722 *
                                                                 n_p_292677 +
                                                                 i_297715];
                                    for (int64_t i_297708 = 0; i_297708 <
                                         s_n_m_292825; i_297708++) {
                                        int64_t x_294052;
                                        
                                        x_294052 =
                                            ((int64_t *) mem_299855)[i_297722 *
                                                                     ctx_val_299884 +
                                                                     i_297715 *
                                                                     s_n_m_292825 +
                                                                     i_297708];
                                        
                                        double x_294053;
                                        
                                        x_294053 =
                                            ((double *) mem_299860)[i_297722 *
                                                                    ctx_val_299884 +
                                                                    i_297715 *
                                                                    s_n_m_292825 +
                                                                    i_297708];
                                        
                                        bool cond_294054 = i_297708 ==
                                             (int64_t) 0;
                                        int64_t defunc_0_m_fun_res_294055;
                                        
                                        if (cond_294054) {
                                            defunc_0_m_fun_res_294055 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_294056 =
                                                    sub64(s_n_m_292825,
                                                          (int64_t) 1);
                                            bool cond_294057 = i_297708 ==
                                                 y_294056;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_294058;
                                            
                                            if (cond_294057) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_294059
                                                = sub64(pad_css_len_292821,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_294058 =
                                                    defunc_0_m_fun_res_f_res_t_res_294059;
                                            } else {
                                                int64_t x_294060 =
                                                        sub64(i_297708,
                                                              (int64_t) 1);
                                                int64_t x_294061 =
                                                        mul64(jump_s_292684,
                                                              x_294060);
                                                int64_t min_arg_294062 =
                                                        add64((int64_t) 1,
                                                              x_294061);
                                                int64_t min_res_294063 =
                                                        smin64(defunc_0_f_res_292820,
                                                               min_arg_294062);
                                                
                                                defunc_0_m_fun_res_f_res_294058 =
                                                    min_res_294063;
                                            }
                                            defunc_0_m_fun_res_294055 =
                                                defunc_0_m_fun_res_f_res_294058;
                                        }
                                        for (int64_t i_297686 = 0; i_297686 <
                                             q_s_292678; i_297686++) {
                                            bool cond_294067 = sle64(x_294046,
                                                                     i_297686);
                                            int64_t defunc_0_f_res_294068;
                                            
                                            if (cond_294067) {
                                                defunc_0_f_res_294068 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_294069 =
                                                        add64(x_294052,
                                                              i_297686);
                                                int64_t defunc_0_add_arg_294070;
                                                
                                                defunc_0_add_arg_294070 =
                                                    ((int64_t *) mem_299690)[i_297722 *
                                                                             ctx_val_299600 +
                                                                             i_297715 *
                                                                             defunc_0_f_res_292820 +
                                                                             i_294069];
                                                
                                                int64_t defunc_1_add_res_294071
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_294070);
                                                
                                                defunc_0_f_res_294068 =
                                                    defunc_1_add_res_294071;
                                            }
                                            
                                            double defunc_0_f_res_294072;
                                            
                                            if (cond_294067) {
                                                defunc_0_f_res_294072 = 0.0;
                                            } else {
                                                int64_t i_294073 =
                                                        add64(x_294052,
                                                              i_297686);
                                                double defunc_0_add_arg_294074;
                                                
                                                defunc_0_add_arg_294074 =
                                                    ((double *) mem_300400)[i_297722 *
                                                                            ctx_val_299600 +
                                                                            i_297715 *
                                                                            defunc_0_f_res_292820 +
                                                                            i_294073];
                                                defunc_0_f_res_294072 =
                                                    defunc_0_add_arg_294074;
                                            }
                                            
                                            int64_t binop_p_294075 =
                                                    sub64(defunc_0_f_res_294068,
                                                          defunc_0_m_fun_res_294055);
                                            double defunc_0_f_res_294076 =
                                                   sitofp_i64_f64(binop_p_294075);
                                            double abs_res_294077 =
                                                   fabs(defunc_0_f_res_294076);
                                            double tmp1_294078 =
                                                   abs_res_294077 / x_294053;
                                            double x_294079 = tmp1_294078 *
                                                   tmp1_294078;
                                            double y_294080 = tmp1_294078 *
                                                   x_294079;
                                            double tmp2_294081 = 1.0 - y_294080;
                                            double x_294082 = tmp2_294081 *
                                                   tmp2_294081;
                                            double tmp3_294083 = tmp2_294081 *
                                                   x_294082;
                                            double tmp4_294084 =
                                                   defunc_0_f_res_294072 *
                                                   tmp3_294083;
                                            
                                            ((double *) mem_301627)[i_297686] =
                                                defunc_0_f_res_294076;
                                            ((double *) mem_301630)[i_297686] =
                                                tmp4_294084;
                                        }
                                        
                                        double defunc_2_reduce_res_294091;
                                        double defunc_2_reduce_res_294092;
                                        double defunc_2_reduce_res_294093;
                                        double defunc_2_reduce_res_294094;
                                        double defunc_2_reduce_res_294095;
                                        double redout_297691;
                                        double redout_297692;
                                        double redout_297693;
                                        double redout_297694;
                                        double redout_297695;
                                        
                                        redout_297691 = 0.0;
                                        redout_297692 = 0.0;
                                        redout_297693 = 0.0;
                                        redout_297694 = 0.0;
                                        redout_297695 = 0.0;
                                        for (int64_t i_297698 = 0; i_297698 <
                                             q_s_292678; i_297698++) {
                                            double x_294113;
                                            
                                            x_294113 =
                                                ((double *) mem_301627)[i_297698];
                                            
                                            double x_294114;
                                            
                                            x_294114 =
                                                ((double *) mem_301630)[i_297698];
                                            
                                            double defunc_1_f_res_294115 =
                                                   x_294113 * x_294114;
                                            double defunc_1_f_res_294116 =
                                                   x_294113 *
                                                   defunc_1_f_res_294115;
                                            double defunc_1_f_res_294117 =
                                                   x_294113 *
                                                   defunc_1_f_res_294116;
                                            double defunc_1_f_res_294118 =
                                                   x_294113 *
                                                   defunc_1_f_res_294117;
                                            double defunc_1_op_res_294100 =
                                                   x_294114 + redout_297691;
                                            double defunc_1_op_res_294103 =
                                                   defunc_1_f_res_294115 +
                                                   redout_297692;
                                            double defunc_1_op_res_294106 =
                                                   defunc_1_f_res_294116 +
                                                   redout_297693;
                                            double defunc_1_op_res_294109 =
                                                   defunc_1_f_res_294117 +
                                                   redout_297694;
                                            double defunc_1_op_res_294112 =
                                                   defunc_1_f_res_294118 +
                                                   redout_297695;
                                            
                                            ((double *) mem_301657)[i_297698] =
                                                defunc_1_f_res_294116;
                                            ((double *) mem_301660)[i_297698] =
                                                defunc_1_f_res_294115;
                                            
                                            double redout_tmp_306467 =
                                                   defunc_1_op_res_294100;
                                            double redout_tmp_306468 =
                                                   defunc_1_op_res_294103;
                                            double redout_tmp_306469 =
                                                   defunc_1_op_res_294106;
                                            double redout_tmp_306470 =
                                                   defunc_1_op_res_294109;
                                            double redout_tmp_306471 =
                                                   defunc_1_op_res_294112;
                                            
                                            redout_297691 = redout_tmp_306467;
                                            redout_297692 = redout_tmp_306468;
                                            redout_297693 = redout_tmp_306469;
                                            redout_297694 = redout_tmp_306470;
                                            redout_297695 = redout_tmp_306471;
                                        }
                                        defunc_2_reduce_res_294091 =
                                            redout_297691;
                                        defunc_2_reduce_res_294092 =
                                            redout_297692;
                                        defunc_2_reduce_res_294093 =
                                            redout_297693;
                                        defunc_2_reduce_res_294094 =
                                            redout_297694;
                                        defunc_2_reduce_res_294095 =
                                            redout_297695;
                                        
                                        double a_294126 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_294091;
                                        double b_294127 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_294092;
                                        double c_294128 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_294093;
                                        double d_294129 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_294094;
                                        double e_294130 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_294095;
                                        double x_294131 = c_294128 * e_294130;
                                        double y_294132 = d_294129 * d_294129;
                                        double a12_294133 = x_294131 - y_294132;
                                        double x_294134 = c_294128 * d_294129;
                                        double y_294135 = b_294127 * e_294130;
                                        double b12_294136 = x_294134 - y_294135;
                                        double x_294137 = b_294127 * d_294129;
                                        double y_294138 = c_294128 * c_294128;
                                        double c12_294139 = x_294137 - y_294138;
                                        double x_294140 = a_294126 * e_294130;
                                        double b2_294141 = x_294140 - y_294138;
                                        double x_294142 = b_294127 * c_294128;
                                        double y_294143 = a_294126 * d_294129;
                                        double c2_294144 = x_294142 - y_294143;
                                        double x_294145 = a_294126 * a12_294133;
                                        double y_294146 = b_294127 * b12_294136;
                                        double x_294147 = x_294145 + y_294146;
                                        double y_294148 = c_294128 * c12_294139;
                                        double y_294149 = x_294147 + y_294148;
                                        double det_294150 = 1.0 / y_294149;
                                        double a12_294151 = a12_294133 *
                                               det_294150;
                                        double b12_294152 = b12_294136 *
                                               det_294150;
                                        double c12_294153 = c12_294139 *
                                               det_294150;
                                        double b2_294154 = b2_294141 *
                                               det_294150;
                                        double c2_294155 = c2_294144 *
                                               det_294150;
                                        double defunc_2_reduce_res_294156;
                                        double defunc_2_reduce_res_294157;
                                        double redout_297701;
                                        double redout_297702;
                                        
                                        redout_297701 = 0.0;
                                        redout_297702 = 0.0;
                                        for (int64_t i_297703 = 0; i_297703 <
                                             q_s_292678; i_297703++) {
                                            double x_294165;
                                            
                                            x_294165 =
                                                ((double *) mem_301630)[i_297703];
                                            
                                            double x_294166;
                                            
                                            x_294166 =
                                                ((double *) mem_301660)[i_297703];
                                            
                                            double x_294167;
                                            
                                            x_294167 =
                                                ((double *) mem_301657)[i_297703];
                                            
                                            bool cond_294168 = sle64(x_294046,
                                                                     i_297703);
                                            double defunc_0_f_res_294169;
                                            
                                            if (cond_294168) {
                                                defunc_0_f_res_294169 = 0.0;
                                            } else {
                                                int64_t i_294170 =
                                                        add64(x_294052,
                                                              i_297703);
                                                double defunc_0_add_arg_294171;
                                                
                                                defunc_0_add_arg_294171 =
                                                    ((double *) mem_300395)[i_297722 *
                                                                            ctx_val_299600 +
                                                                            i_297715 *
                                                                            defunc_0_f_res_292820 +
                                                                            i_294170];
                                                defunc_0_f_res_294169 =
                                                    defunc_0_add_arg_294171;
                                            }
                                            
                                            double x_294172 = a12_294151 *
                                                   x_294165;
                                            double y_294173 = b12_294152 *
                                                   x_294166;
                                            double x_294174 = x_294172 +
                                                   y_294173;
                                            double y_294175 = c12_294153 *
                                                   x_294167;
                                            double x_294176 = x_294174 +
                                                   y_294175;
                                            double defunc_9_fit_fun_res_294177 =
                                                   defunc_0_f_res_294169 *
                                                   x_294176;
                                            double x_294178 = b12_294152 *
                                                   x_294165;
                                            double y_294179 = b2_294154 *
                                                   x_294166;
                                            double x_294180 = x_294178 +
                                                   y_294179;
                                            double y_294181 = c2_294155 *
                                                   x_294167;
                                            double x_294182 = x_294180 +
                                                   y_294181;
                                            double defunc_9_slope_fun_res_294183
                                                   = defunc_0_f_res_294169 *
                                                   x_294182;
                                            double defunc_1_op_res_294160 =
                                                   defunc_9_fit_fun_res_294177 +
                                                   redout_297701;
                                            double defunc_1_op_res_294163 =
                                                   defunc_9_slope_fun_res_294183 +
                                                   redout_297702;
                                            double redout_tmp_306474 =
                                                   defunc_1_op_res_294160;
                                            double redout_tmp_306475 =
                                                   defunc_1_op_res_294163;
                                            
                                            redout_297701 = redout_tmp_306474;
                                            redout_297702 = redout_tmp_306475;
                                        }
                                        defunc_2_reduce_res_294156 =
                                            redout_297701;
                                        defunc_2_reduce_res_294157 =
                                            redout_297702;
                                        ((double *) mem_301525.mem)[i_297722 *
                                                                    ctx_val_299884 +
                                                                    i_297715 *
                                                                    s_n_m_292825 +
                                                                    i_297708] =
                                            defunc_2_reduce_res_294156;
                                        ((double *) mem_301530.mem)[i_297722 *
                                                                    ctx_val_299884 +
                                                                    i_297715 *
                                                                    s_n_m_292825 +
                                                                    i_297708] =
                                            defunc_2_reduce_res_294157;
                                    }
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_301798, &mem_301525,
                                             "mem_301525") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_301787, &mem_301530,
                                             "mem_301530") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301530,
                                               "mem_301530") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301525,
                                               "mem_301525") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_301821, &ext_mem_301798,
                                         "ext_mem_301798") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_301810, &ext_mem_301787,
                                         "ext_mem_301787") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_301787,
                                           "ext_mem_301787") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_301798,
                                           "ext_mem_301798") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_302408, &ext_mem_301821,
                                     "ext_mem_301821") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_302397, &ext_mem_301810,
                                     "ext_mem_301810") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301810,
                                       "ext_mem_301810") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_301821,
                                       "ext_mem_301821") != 0)
                        return 1;
                } else {
                    bool match_lit_294188 = (int64_t) 0 == d_s_292681;
                    struct memblock ext_mem_302386;
                    
                    ext_mem_302386.references = NULL;
                    
                    struct memblock ext_mem_302375;
                    
                    ext_mem_302375.references = NULL;
                    if (match_lit_294188) {
                        struct memblock mem_301836;
                        
                        mem_301836.references = NULL;
                        if (memblock_alloc(ctx, &mem_301836, bytes_299854,
                                           "mem_301836")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_306476 = 0; i_306476 <
                             partition_sizze_292766; i_306476++) {
                            for (int64_t i_306477 = 0; i_306477 < n_p_292677;
                                 i_306477++) {
                                for (int64_t i_306478 = 0; i_306478 <
                                     s_n_m_292825; i_306478++) {
                                    ((double *) mem_301836.mem)[i_306476 *
                                                                (s_n_m_292825 *
                                                                 n_p_292677) +
                                                                i_306477 *
                                                                s_n_m_292825 +
                                                                i_306478] = 0.0;
                                }
                            }
                        }
                        
                        struct memblock mem_301841;
                        
                        mem_301841.references = NULL;
                        if (memblock_alloc(ctx, &mem_301841, bytes_299854,
                                           "mem_301841")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_297739 = 0; i_297739 <
                             partition_sizze_292766; i_297739++) {
                            for (int64_t i_297735 = 0; i_297735 < n_p_292677;
                                 i_297735++) {
                                int64_t x_294204;
                                
                                x_294204 = ((int64_t *) mem_299694)[i_297739 *
                                                                    n_p_292677 +
                                                                    i_297735];
                                for (int64_t i_297731 = 0; i_297731 <
                                     s_n_m_292825; i_297731++) {
                                    int64_t x_294209;
                                    
                                    x_294209 =
                                        ((int64_t *) mem_299855)[i_297739 *
                                                                 ctx_val_299884 +
                                                                 i_297735 *
                                                                 s_n_m_292825 +
                                                                 i_297731];
                                    
                                    double x_294210;
                                    
                                    x_294210 =
                                        ((double *) mem_299860)[i_297739 *
                                                                ctx_val_299884 +
                                                                i_297735 *
                                                                s_n_m_292825 +
                                                                i_297731];
                                    
                                    bool cond_294211 = i_297731 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_294212;
                                    
                                    if (cond_294211) {
                                        defunc_0_m_fun_res_294212 = (int64_t) 0;
                                    } else {
                                        int64_t y_294213 = sub64(s_n_m_292825,
                                                                 (int64_t) 1);
                                        bool cond_294214 = i_297731 == y_294213;
                                        int64_t defunc_0_m_fun_res_f_res_294215;
                                        
                                        if (cond_294214) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_294216
                                            = sub64(pad_css_len_292821,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_294215 =
                                                defunc_0_m_fun_res_f_res_t_res_294216;
                                        } else {
                                            int64_t x_294217 = sub64(i_297731,
                                                                     (int64_t) 1);
                                            int64_t x_294218 =
                                                    mul64(jump_s_292684,
                                                          x_294217);
                                            int64_t min_arg_294219 =
                                                    add64((int64_t) 1,
                                                          x_294218);
                                            int64_t min_res_294220 =
                                                    smin64(defunc_0_f_res_292820,
                                                           min_arg_294219);
                                            
                                            defunc_0_m_fun_res_f_res_294215 =
                                                min_res_294220;
                                        }
                                        defunc_0_m_fun_res_294212 =
                                            defunc_0_m_fun_res_f_res_294215;
                                    }
                                    
                                    double defunc_2_reduce_res_294221;
                                    double redout_297725 = 0.0;
                                    
                                    for (int64_t i_297726 = 0; i_297726 <
                                         q_s_292678; i_297726++) {
                                        bool cond_294226 = sle64(x_294204,
                                                                 i_297726);
                                        int64_t defunc_0_f_res_294227;
                                        
                                        if (cond_294226) {
                                            defunc_0_f_res_294227 = (int64_t) 0;
                                        } else {
                                            int64_t i_294228 = add64(x_294209,
                                                                     i_297726);
                                            int64_t defunc_0_add_arg_294229;
                                            
                                            defunc_0_add_arg_294229 =
                                                ((int64_t *) mem_299690)[i_297739 *
                                                                         ctx_val_299600 +
                                                                         i_297735 *
                                                                         defunc_0_f_res_292820 +
                                                                         i_294228];
                                            
                                            int64_t defunc_1_add_res_294230 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_294229);
                                            
                                            defunc_0_f_res_294227 =
                                                defunc_1_add_res_294230;
                                        }
                                        
                                        double defunc_0_f_res_294231;
                                        
                                        if (cond_294226) {
                                            defunc_0_f_res_294231 = 0.0;
                                        } else {
                                            int64_t i_294232 = add64(x_294209,
                                                                     i_297726);
                                            double defunc_0_add_arg_294233;
                                            
                                            defunc_0_add_arg_294233 =
                                                ((double *) mem_300400)[i_297739 *
                                                                        ctx_val_299600 +
                                                                        i_297735 *
                                                                        defunc_0_f_res_292820 +
                                                                        i_294232];
                                            defunc_0_f_res_294231 =
                                                defunc_0_add_arg_294233;
                                        }
                                        
                                        int64_t binop_p_294234 =
                                                sub64(defunc_0_f_res_294227,
                                                      defunc_0_m_fun_res_294212);
                                        double defunc_0_f_res_294235 =
                                               sitofp_i64_f64(binop_p_294234);
                                        double abs_res_294236 =
                                               fabs(defunc_0_f_res_294235);
                                        double tmp1_294237 = abs_res_294236 /
                                               x_294210;
                                        double x_294238 = tmp1_294237 *
                                               tmp1_294237;
                                        double y_294239 = tmp1_294237 *
                                               x_294238;
                                        double tmp2_294240 = 1.0 - y_294239;
                                        double x_294241 = tmp2_294240 *
                                               tmp2_294240;
                                        double tmp3_294242 = tmp2_294240 *
                                               x_294241;
                                        double w_j_294243 =
                                               defunc_0_f_res_294231 *
                                               tmp3_294242;
                                        double defunc_1_op_res_294224 =
                                               w_j_294243 + redout_297725;
                                        double redout_tmp_306482 =
                                               defunc_1_op_res_294224;
                                        
                                        redout_297725 = redout_tmp_306482;
                                    }
                                    defunc_2_reduce_res_294221 = redout_297725;
                                    
                                    double a_294244 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_294221;
                                    double a0_294245 = 1.0 / a_294244;
                                    int64_t defunc_0_m_fun_res_294246;
                                    
                                    if (cond_294211) {
                                        defunc_0_m_fun_res_294246 = (int64_t) 0;
                                    } else {
                                        int64_t y_294247 = sub64(s_n_m_292825,
                                                                 (int64_t) 1);
                                        bool cond_294248 = i_297731 == y_294247;
                                        int64_t defunc_0_m_fun_res_f_res_294249;
                                        
                                        if (cond_294248) {
                                            int64_t
                                            defunc_0_m_fun_res_f_res_t_res_294250
                                            = sub64(pad_css_len_292821,
                                                    (int64_t) 1);
                                            
                                            defunc_0_m_fun_res_f_res_294249 =
                                                defunc_0_m_fun_res_f_res_t_res_294250;
                                        } else {
                                            int64_t x_294251 = sub64(i_297731,
                                                                     (int64_t) 1);
                                            int64_t x_294252 =
                                                    mul64(jump_s_292684,
                                                          x_294251);
                                            int64_t min_arg_294253 =
                                                    add64((int64_t) 1,
                                                          x_294252);
                                            int64_t min_res_294254 =
                                                    smin64(defunc_0_f_res_292820,
                                                           min_arg_294253);
                                            
                                            defunc_0_m_fun_res_f_res_294249 =
                                                min_res_294254;
                                        }
                                        defunc_0_m_fun_res_294246 =
                                            defunc_0_m_fun_res_f_res_294249;
                                    }
                                    
                                    double defunc_2_reduce_res_294255;
                                    double redout_297727 = 0.0;
                                    
                                    for (int64_t i_297728 = 0; i_297728 <
                                         q_s_292678; i_297728++) {
                                        bool cond_294260 = sle64(x_294204,
                                                                 i_297728);
                                        int64_t defunc_0_f_res_294261;
                                        
                                        if (cond_294260) {
                                            defunc_0_f_res_294261 = (int64_t) 0;
                                        } else {
                                            int64_t i_294262 = add64(x_294209,
                                                                     i_297728);
                                            int64_t defunc_0_add_arg_294263;
                                            
                                            defunc_0_add_arg_294263 =
                                                ((int64_t *) mem_299690)[i_297739 *
                                                                         ctx_val_299600 +
                                                                         i_297735 *
                                                                         defunc_0_f_res_292820 +
                                                                         i_294262];
                                            
                                            int64_t defunc_1_add_res_294264 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_294263);
                                            
                                            defunc_0_f_res_294261 =
                                                defunc_1_add_res_294264;
                                        }
                                        
                                        double defunc_0_f_res_294265;
                                        
                                        if (cond_294260) {
                                            defunc_0_f_res_294265 = 0.0;
                                        } else {
                                            int64_t i_294266 = add64(x_294209,
                                                                     i_297728);
                                            double defunc_0_add_arg_294267;
                                            
                                            defunc_0_add_arg_294267 =
                                                ((double *) mem_300400)[i_297739 *
                                                                        ctx_val_299600 +
                                                                        i_297735 *
                                                                        defunc_0_f_res_292820 +
                                                                        i_294266];
                                            defunc_0_f_res_294265 =
                                                defunc_0_add_arg_294267;
                                        }
                                        
                                        int64_t binop_p_294268 =
                                                sub64(defunc_0_f_res_294261,
                                                      defunc_0_m_fun_res_294246);
                                        double defunc_0_f_res_294269 =
                                               sitofp_i64_f64(binop_p_294268);
                                        double abs_res_294270 =
                                               fabs(defunc_0_f_res_294269);
                                        double tmp1_294271 = abs_res_294270 /
                                               x_294210;
                                        double x_294272 = tmp1_294271 *
                                               tmp1_294271;
                                        double y_294273 = tmp1_294271 *
                                               x_294272;
                                        double tmp2_294274 = 1.0 - y_294273;
                                        double x_294275 = tmp2_294274 *
                                               tmp2_294274;
                                        double tmp3_294276 = tmp2_294274 *
                                               x_294275;
                                        double tmp4_294277 =
                                               defunc_0_f_res_294265 *
                                               tmp3_294276;
                                        double defunc_0_f_res_294278;
                                        
                                        if (cond_294260) {
                                            defunc_0_f_res_294278 = 0.0;
                                        } else {
                                            int64_t i_294279 = add64(x_294209,
                                                                     i_297728);
                                            double defunc_0_add_arg_294280;
                                            
                                            defunc_0_add_arg_294280 =
                                                ((double *) mem_300395)[i_297739 *
                                                                        ctx_val_299600 +
                                                                        i_297735 *
                                                                        defunc_0_f_res_292820 +
                                                                        i_294279];
                                            defunc_0_f_res_294278 =
                                                defunc_0_add_arg_294280;
                                        }
                                        
                                        double x_294281 = a0_294245 *
                                               tmp4_294277;
                                        double defunc_9_fit_fun_res_294282 =
                                               defunc_0_f_res_294278 * x_294281;
                                        double defunc_1_op_res_294258 =
                                               defunc_9_fit_fun_res_294282 +
                                               redout_297727;
                                        double redout_tmp_306483 =
                                               defunc_1_op_res_294258;
                                        
                                        redout_297727 = redout_tmp_306483;
                                    }
                                    defunc_2_reduce_res_294255 = redout_297727;
                                    ((double *) mem_301841.mem)[i_297739 *
                                                                ctx_val_299884 +
                                                                i_297735 *
                                                                s_n_m_292825 +
                                                                i_297731] =
                                        defunc_2_reduce_res_294255;
                                }
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_302386, &mem_301841,
                                         "mem_301841") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_302375, &mem_301836,
                                         "mem_301836") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301841, "mem_301841") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_301836, "mem_301836") != 0)
                            return 1;
                    } else {
                        bool match_lit_294287 = (int64_t) 1 == d_s_292681;
                        struct memblock ext_mem_302363;
                        
                        ext_mem_302363.references = NULL;
                        
                        struct memblock ext_mem_302352;
                        
                        ext_mem_302352.references = NULL;
                        if (match_lit_294287) {
                            struct memblock mem_301944;
                            
                            mem_301944.references = NULL;
                            if (memblock_alloc(ctx, &mem_301944, bytes_299854,
                                               "mem_301944")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_301949;
                            
                            mem_301949.references = NULL;
                            if (memblock_alloc(ctx, &mem_301949, bytes_299854,
                                               "mem_301949")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t i_297766 = 0; i_297766 <
                                 partition_sizze_292766; i_297766++) {
                                for (int64_t i_297759 = 0; i_297759 <
                                     n_p_292677; i_297759++) {
                                    int64_t x_294304;
                                    
                                    x_294304 =
                                        ((int64_t *) mem_299694)[i_297766 *
                                                                 n_p_292677 +
                                                                 i_297759];
                                    for (int64_t i_297752 = 0; i_297752 <
                                         s_n_m_292825; i_297752++) {
                                        int64_t x_294310;
                                        
                                        x_294310 =
                                            ((int64_t *) mem_299855)[i_297766 *
                                                                     ctx_val_299884 +
                                                                     i_297759 *
                                                                     s_n_m_292825 +
                                                                     i_297752];
                                        
                                        double x_294311;
                                        
                                        x_294311 =
                                            ((double *) mem_299860)[i_297766 *
                                                                    ctx_val_299884 +
                                                                    i_297759 *
                                                                    s_n_m_292825 +
                                                                    i_297752];
                                        
                                        bool cond_294312 = i_297752 ==
                                             (int64_t) 0;
                                        int64_t defunc_0_m_fun_res_294313;
                                        
                                        if (cond_294312) {
                                            defunc_0_m_fun_res_294313 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_294314 =
                                                    sub64(s_n_m_292825,
                                                          (int64_t) 1);
                                            bool cond_294315 = i_297752 ==
                                                 y_294314;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_294316;
                                            
                                            if (cond_294315) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_294317
                                                = sub64(pad_css_len_292821,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_294316 =
                                                    defunc_0_m_fun_res_f_res_t_res_294317;
                                            } else {
                                                int64_t x_294318 =
                                                        sub64(i_297752,
                                                              (int64_t) 1);
                                                int64_t x_294319 =
                                                        mul64(jump_s_292684,
                                                              x_294318);
                                                int64_t min_arg_294320 =
                                                        add64((int64_t) 1,
                                                              x_294319);
                                                int64_t min_res_294321 =
                                                        smin64(defunc_0_f_res_292820,
                                                               min_arg_294320);
                                                
                                                defunc_0_m_fun_res_f_res_294316 =
                                                    min_res_294321;
                                            }
                                            defunc_0_m_fun_res_294313 =
                                                defunc_0_m_fun_res_f_res_294316;
                                        }
                                        
                                        double defunc_2_reduce_res_294322;
                                        double defunc_2_reduce_res_294323;
                                        double defunc_2_reduce_res_294324;
                                        double redout_297741;
                                        double redout_297742;
                                        double redout_297743;
                                        
                                        redout_297741 = 0.0;
                                        redout_297742 = 0.0;
                                        redout_297743 = 0.0;
                                        for (int64_t i_297744 = 0; i_297744 <
                                             q_s_292678; i_297744++) {
                                            bool cond_294335 = sle64(x_294304,
                                                                     i_297744);
                                            int64_t defunc_0_f_res_294336;
                                            
                                            if (cond_294335) {
                                                defunc_0_f_res_294336 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_294337 =
                                                        add64(x_294310,
                                                              i_297744);
                                                int64_t defunc_0_add_arg_294338;
                                                
                                                defunc_0_add_arg_294338 =
                                                    ((int64_t *) mem_299690)[i_297766 *
                                                                             ctx_val_299600 +
                                                                             i_297759 *
                                                                             defunc_0_f_res_292820 +
                                                                             i_294337];
                                                
                                                int64_t defunc_1_add_res_294339
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_294338);
                                                
                                                defunc_0_f_res_294336 =
                                                    defunc_1_add_res_294339;
                                            }
                                            
                                            double defunc_0_f_res_294340;
                                            
                                            if (cond_294335) {
                                                defunc_0_f_res_294340 = 0.0;
                                            } else {
                                                int64_t i_294341 =
                                                        add64(x_294310,
                                                              i_297744);
                                                double defunc_0_add_arg_294342;
                                                
                                                defunc_0_add_arg_294342 =
                                                    ((double *) mem_300400)[i_297766 *
                                                                            ctx_val_299600 +
                                                                            i_297759 *
                                                                            defunc_0_f_res_292820 +
                                                                            i_294341];
                                                defunc_0_f_res_294340 =
                                                    defunc_0_add_arg_294342;
                                            }
                                            
                                            int64_t binop_p_294343 =
                                                    sub64(defunc_0_f_res_294336,
                                                          defunc_0_m_fun_res_294313);
                                            double defunc_0_f_res_294344 =
                                                   sitofp_i64_f64(binop_p_294343);
                                            double abs_res_294345 =
                                                   fabs(defunc_0_f_res_294344);
                                            double tmp1_294346 =
                                                   abs_res_294345 / x_294311;
                                            double x_294347 = tmp1_294346 *
                                                   tmp1_294346;
                                            double y_294348 = tmp1_294346 *
                                                   x_294347;
                                            double tmp2_294349 = 1.0 - y_294348;
                                            double x_294350 = tmp2_294349 *
                                                   tmp2_294349;
                                            double tmp3_294351 = tmp2_294349 *
                                                   x_294350;
                                            double w_j_294352 =
                                                   defunc_0_f_res_294340 *
                                                   tmp3_294351;
                                            double xw_j_294353 =
                                                   defunc_0_f_res_294344 *
                                                   w_j_294352;
                                            double x2w_j_294354 =
                                                   defunc_0_f_res_294344 *
                                                   xw_j_294353;
                                            double defunc_1_op_res_294327 =
                                                   w_j_294352 + redout_297741;
                                            double defunc_1_op_res_294330 =
                                                   xw_j_294353 + redout_297742;
                                            double defunc_1_op_res_294333 =
                                                   x2w_j_294354 + redout_297743;
                                            double redout_tmp_306490 =
                                                   defunc_1_op_res_294327;
                                            double redout_tmp_306491 =
                                                   defunc_1_op_res_294330;
                                            double redout_tmp_306492 =
                                                   defunc_1_op_res_294333;
                                            
                                            redout_297741 = redout_tmp_306490;
                                            redout_297742 = redout_tmp_306491;
                                            redout_297743 = redout_tmp_306492;
                                        }
                                        defunc_2_reduce_res_294322 =
                                            redout_297741;
                                        defunc_2_reduce_res_294323 =
                                            redout_297742;
                                        defunc_2_reduce_res_294324 =
                                            redout_297743;
                                        
                                        double a_294355 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_294322;
                                        double b_294356 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_294323;
                                        double c_294357 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_294324;
                                        double x_294358 = a_294355 * c_294357;
                                        double y_294359 = b_294356 * b_294356;
                                        double y_294360 = x_294358 - y_294359;
                                        double det1_294361 = 1.0 / y_294360;
                                        double a11_294362 = c_294357 *
                                               det1_294361;
                                        double x_294363 = 0.0 - b_294356;
                                        double b11_294364 = det1_294361 *
                                               x_294363;
                                        double c11_294365 = a_294355 *
                                               det1_294361;
                                        int64_t defunc_0_m_fun_res_294366;
                                        
                                        if (cond_294312) {
                                            defunc_0_m_fun_res_294366 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_294367 =
                                                    sub64(s_n_m_292825,
                                                          (int64_t) 1);
                                            bool cond_294368 = i_297752 ==
                                                 y_294367;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_294369;
                                            
                                            if (cond_294368) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_294370
                                                = sub64(pad_css_len_292821,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_294369 =
                                                    defunc_0_m_fun_res_f_res_t_res_294370;
                                            } else {
                                                int64_t x_294371 =
                                                        sub64(i_297752,
                                                              (int64_t) 1);
                                                int64_t x_294372 =
                                                        mul64(jump_s_292684,
                                                              x_294371);
                                                int64_t min_arg_294373 =
                                                        add64((int64_t) 1,
                                                              x_294372);
                                                int64_t min_res_294374 =
                                                        smin64(defunc_0_f_res_292820,
                                                               min_arg_294373);
                                                
                                                defunc_0_m_fun_res_f_res_294369 =
                                                    min_res_294374;
                                            }
                                            defunc_0_m_fun_res_294366 =
                                                defunc_0_m_fun_res_f_res_294369;
                                        }
                                        
                                        double defunc_2_reduce_res_294375;
                                        double defunc_2_reduce_res_294376;
                                        double redout_297745;
                                        double redout_297746;
                                        
                                        redout_297745 = 0.0;
                                        redout_297746 = 0.0;
                                        for (int64_t i_297747 = 0; i_297747 <
                                             q_s_292678; i_297747++) {
                                            bool cond_294384 = sle64(x_294304,
                                                                     i_297747);
                                            int64_t defunc_0_f_res_294385;
                                            
                                            if (cond_294384) {
                                                defunc_0_f_res_294385 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_294386 =
                                                        add64(x_294310,
                                                              i_297747);
                                                int64_t defunc_0_add_arg_294387;
                                                
                                                defunc_0_add_arg_294387 =
                                                    ((int64_t *) mem_299690)[i_297766 *
                                                                             ctx_val_299600 +
                                                                             i_297759 *
                                                                             defunc_0_f_res_292820 +
                                                                             i_294386];
                                                
                                                int64_t defunc_1_add_res_294388
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_294387);
                                                
                                                defunc_0_f_res_294385 =
                                                    defunc_1_add_res_294388;
                                            }
                                            
                                            double defunc_0_f_res_294389;
                                            
                                            if (cond_294384) {
                                                defunc_0_f_res_294389 = 0.0;
                                            } else {
                                                int64_t i_294390 =
                                                        add64(x_294310,
                                                              i_297747);
                                                double defunc_0_add_arg_294391;
                                                
                                                defunc_0_add_arg_294391 =
                                                    ((double *) mem_300400)[i_297766 *
                                                                            ctx_val_299600 +
                                                                            i_297759 *
                                                                            defunc_0_f_res_292820 +
                                                                            i_294390];
                                                defunc_0_f_res_294389 =
                                                    defunc_0_add_arg_294391;
                                            }
                                            
                                            int64_t binop_p_294392 =
                                                    sub64(defunc_0_f_res_294385,
                                                          defunc_0_m_fun_res_294366);
                                            double defunc_0_f_res_294393 =
                                                   sitofp_i64_f64(binop_p_294392);
                                            double abs_res_294394 =
                                                   fabs(defunc_0_f_res_294393);
                                            double tmp1_294395 =
                                                   abs_res_294394 / x_294311;
                                            double x_294396 = tmp1_294395 *
                                                   tmp1_294395;
                                            double y_294397 = tmp1_294395 *
                                                   x_294396;
                                            double tmp2_294398 = 1.0 - y_294397;
                                            double x_294399 = tmp2_294398 *
                                                   tmp2_294398;
                                            double tmp3_294400 = tmp2_294398 *
                                                   x_294399;
                                            double tmp4_294401 =
                                                   defunc_0_f_res_294389 *
                                                   tmp3_294400;
                                            double defunc_1_f_res_294402 =
                                                   defunc_0_f_res_294393 *
                                                   tmp4_294401;
                                            double defunc_0_f_res_294403;
                                            
                                            if (cond_294384) {
                                                defunc_0_f_res_294403 = 0.0;
                                            } else {
                                                int64_t i_294404 =
                                                        add64(x_294310,
                                                              i_297747);
                                                double defunc_0_add_arg_294405;
                                                
                                                defunc_0_add_arg_294405 =
                                                    ((double *) mem_300395)[i_297766 *
                                                                            ctx_val_299600 +
                                                                            i_297759 *
                                                                            defunc_0_f_res_292820 +
                                                                            i_294404];
                                                defunc_0_f_res_294403 =
                                                    defunc_0_add_arg_294405;
                                            }
                                            
                                            double x_294406 = a11_294362 *
                                                   tmp4_294401;
                                            double y_294407 = b11_294364 *
                                                   defunc_1_f_res_294402;
                                            double x_294408 = x_294406 +
                                                   y_294407;
                                            double defunc_9_fit_fun_res_294409 =
                                                   defunc_0_f_res_294403 *
                                                   x_294408;
                                            double x_294410 = b11_294364 *
                                                   tmp4_294401;
                                            double y_294411 = c11_294365 *
                                                   defunc_1_f_res_294402;
                                            double x_294412 = x_294410 +
                                                   y_294411;
                                            double defunc_9_slope_fun_res_294413
                                                   = defunc_0_f_res_294403 *
                                                   x_294412;
                                            double defunc_1_op_res_294379 =
                                                   defunc_9_fit_fun_res_294409 +
                                                   redout_297745;
                                            double defunc_1_op_res_294382 =
                                                   defunc_9_slope_fun_res_294413 +
                                                   redout_297746;
                                            double redout_tmp_306493 =
                                                   defunc_1_op_res_294379;
                                            double redout_tmp_306494 =
                                                   defunc_1_op_res_294382;
                                            
                                            redout_297745 = redout_tmp_306493;
                                            redout_297746 = redout_tmp_306494;
                                        }
                                        defunc_2_reduce_res_294375 =
                                            redout_297745;
                                        defunc_2_reduce_res_294376 =
                                            redout_297746;
                                        ((double *) mem_301944.mem)[i_297766 *
                                                                    ctx_val_299884 +
                                                                    i_297759 *
                                                                    s_n_m_292825 +
                                                                    i_297752] =
                                            defunc_2_reduce_res_294375;
                                        ((double *) mem_301949.mem)[i_297766 *
                                                                    ctx_val_299884 +
                                                                    i_297759 *
                                                                    s_n_m_292825 +
                                                                    i_297752] =
                                            defunc_2_reduce_res_294376;
                                    }
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_302363, &mem_301944,
                                             "mem_301944") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_302352, &mem_301949,
                                             "mem_301949") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301949,
                                               "mem_301949") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_301944,
                                               "mem_301944") != 0)
                                return 1;
                        } else {
                            struct memblock mem_302150;
                            
                            mem_302150.references = NULL;
                            if (memblock_alloc(ctx, &mem_302150, bytes_299854,
                                               "mem_302150")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_302155;
                            
                            mem_302155.references = NULL;
                            if (memblock_alloc(ctx, &mem_302155, bytes_299854,
                                               "mem_302155")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t i_297796 = 0; i_297796 <
                                 partition_sizze_292766; i_297796++) {
                                for (int64_t i_297789 = 0; i_297789 <
                                     n_p_292677; i_297789++) {
                                    int64_t x_294432;
                                    
                                    x_294432 =
                                        ((int64_t *) mem_299694)[i_297796 *
                                                                 n_p_292677 +
                                                                 i_297789];
                                    for (int64_t i_297782 = 0; i_297782 <
                                         s_n_m_292825; i_297782++) {
                                        int64_t x_294438;
                                        
                                        x_294438 =
                                            ((int64_t *) mem_299855)[i_297796 *
                                                                     ctx_val_299884 +
                                                                     i_297789 *
                                                                     s_n_m_292825 +
                                                                     i_297782];
                                        
                                        double x_294439;
                                        
                                        x_294439 =
                                            ((double *) mem_299860)[i_297796 *
                                                                    ctx_val_299884 +
                                                                    i_297789 *
                                                                    s_n_m_292825 +
                                                                    i_297782];
                                        
                                        bool cond_294440 = i_297782 ==
                                             (int64_t) 0;
                                        int64_t defunc_0_m_fun_res_294441;
                                        
                                        if (cond_294440) {
                                            defunc_0_m_fun_res_294441 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_294442 =
                                                    sub64(s_n_m_292825,
                                                          (int64_t) 1);
                                            bool cond_294443 = i_297782 ==
                                                 y_294442;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_294444;
                                            
                                            if (cond_294443) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_294445
                                                = sub64(pad_css_len_292821,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_294444 =
                                                    defunc_0_m_fun_res_f_res_t_res_294445;
                                            } else {
                                                int64_t x_294446 =
                                                        sub64(i_297782,
                                                              (int64_t) 1);
                                                int64_t x_294447 =
                                                        mul64(jump_s_292684,
                                                              x_294446);
                                                int64_t min_arg_294448 =
                                                        add64((int64_t) 1,
                                                              x_294447);
                                                int64_t min_res_294449 =
                                                        smin64(defunc_0_f_res_292820,
                                                               min_arg_294448);
                                                
                                                defunc_0_m_fun_res_f_res_294444 =
                                                    min_res_294449;
                                            }
                                            defunc_0_m_fun_res_294441 =
                                                defunc_0_m_fun_res_f_res_294444;
                                        }
                                        
                                        double defunc_2_reduce_res_294450;
                                        double defunc_2_reduce_res_294451;
                                        double defunc_2_reduce_res_294452;
                                        double defunc_2_reduce_res_294453;
                                        double defunc_2_reduce_res_294454;
                                        double redout_297769;
                                        double redout_297770;
                                        double redout_297771;
                                        double redout_297772;
                                        double redout_297773;
                                        
                                        redout_297769 = 0.0;
                                        redout_297770 = 0.0;
                                        redout_297771 = 0.0;
                                        redout_297772 = 0.0;
                                        redout_297773 = 0.0;
                                        for (int64_t i_297774 = 0; i_297774 <
                                             q_s_292678; i_297774++) {
                                            bool cond_294471 = sle64(x_294432,
                                                                     i_297774);
                                            int64_t defunc_0_f_res_294472;
                                            
                                            if (cond_294471) {
                                                defunc_0_f_res_294472 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_294473 =
                                                        add64(x_294438,
                                                              i_297774);
                                                int64_t defunc_0_add_arg_294474;
                                                
                                                defunc_0_add_arg_294474 =
                                                    ((int64_t *) mem_299690)[i_297796 *
                                                                             ctx_val_299600 +
                                                                             i_297789 *
                                                                             defunc_0_f_res_292820 +
                                                                             i_294473];
                                                
                                                int64_t defunc_1_add_res_294475
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_294474);
                                                
                                                defunc_0_f_res_294472 =
                                                    defunc_1_add_res_294475;
                                            }
                                            
                                            double defunc_0_f_res_294476;
                                            
                                            if (cond_294471) {
                                                defunc_0_f_res_294476 = 0.0;
                                            } else {
                                                int64_t i_294477 =
                                                        add64(x_294438,
                                                              i_297774);
                                                double defunc_0_add_arg_294478;
                                                
                                                defunc_0_add_arg_294478 =
                                                    ((double *) mem_300400)[i_297796 *
                                                                            ctx_val_299600 +
                                                                            i_297789 *
                                                                            defunc_0_f_res_292820 +
                                                                            i_294477];
                                                defunc_0_f_res_294476 =
                                                    defunc_0_add_arg_294478;
                                            }
                                            
                                            int64_t binop_p_294479 =
                                                    sub64(defunc_0_f_res_294472,
                                                          defunc_0_m_fun_res_294441);
                                            double defunc_0_f_res_294480 =
                                                   sitofp_i64_f64(binop_p_294479);
                                            double abs_res_294481 =
                                                   fabs(defunc_0_f_res_294480);
                                            double tmp1_294482 =
                                                   abs_res_294481 / x_294439;
                                            double x_294483 = tmp1_294482 *
                                                   tmp1_294482;
                                            double y_294484 = tmp1_294482 *
                                                   x_294483;
                                            double tmp2_294485 = 1.0 - y_294484;
                                            double x_294486 = tmp2_294485 *
                                                   tmp2_294485;
                                            double tmp3_294487 = tmp2_294485 *
                                                   x_294486;
                                            double w_j_294488 =
                                                   defunc_0_f_res_294476 *
                                                   tmp3_294487;
                                            double xw_j_294489 =
                                                   defunc_0_f_res_294480 *
                                                   w_j_294488;
                                            double x2w_j_294490 =
                                                   defunc_0_f_res_294480 *
                                                   xw_j_294489;
                                            double x3w_j_294491 =
                                                   defunc_0_f_res_294480 *
                                                   x2w_j_294490;
                                            double x4w_j_294492 =
                                                   defunc_0_f_res_294480 *
                                                   x3w_j_294491;
                                            double defunc_1_op_res_294457 =
                                                   w_j_294488 + redout_297769;
                                            double defunc_1_op_res_294460 =
                                                   xw_j_294489 + redout_297770;
                                            double defunc_1_op_res_294463 =
                                                   x2w_j_294490 + redout_297771;
                                            double defunc_1_op_res_294466 =
                                                   x3w_j_294491 + redout_297772;
                                            double defunc_1_op_res_294469 =
                                                   x4w_j_294492 + redout_297773;
                                            double redout_tmp_306501 =
                                                   defunc_1_op_res_294457;
                                            double redout_tmp_306502 =
                                                   defunc_1_op_res_294460;
                                            double redout_tmp_306503 =
                                                   defunc_1_op_res_294463;
                                            double redout_tmp_306504 =
                                                   defunc_1_op_res_294466;
                                            double redout_tmp_306505 =
                                                   defunc_1_op_res_294469;
                                            
                                            redout_297769 = redout_tmp_306501;
                                            redout_297770 = redout_tmp_306502;
                                            redout_297771 = redout_tmp_306503;
                                            redout_297772 = redout_tmp_306504;
                                            redout_297773 = redout_tmp_306505;
                                        }
                                        defunc_2_reduce_res_294450 =
                                            redout_297769;
                                        defunc_2_reduce_res_294451 =
                                            redout_297770;
                                        defunc_2_reduce_res_294452 =
                                            redout_297771;
                                        defunc_2_reduce_res_294453 =
                                            redout_297772;
                                        defunc_2_reduce_res_294454 =
                                            redout_297773;
                                        
                                        double a_294493 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_294450;
                                        double b_294494 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_294451;
                                        double c_294495 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_294452;
                                        double d_294496 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_294453;
                                        double e_294497 =
                                               2.220446049250313e-16 +
                                               defunc_2_reduce_res_294454;
                                        double x_294498 = c_294495 * e_294497;
                                        double y_294499 = d_294496 * d_294496;
                                        double a12_294500 = x_294498 - y_294499;
                                        double x_294501 = c_294495 * d_294496;
                                        double y_294502 = b_294494 * e_294497;
                                        double b12_294503 = x_294501 - y_294502;
                                        double x_294504 = b_294494 * d_294496;
                                        double y_294505 = c_294495 * c_294495;
                                        double c12_294506 = x_294504 - y_294505;
                                        double x_294507 = a_294493 * e_294497;
                                        double b2_294508 = x_294507 - y_294505;
                                        double x_294509 = b_294494 * c_294495;
                                        double y_294510 = a_294493 * d_294496;
                                        double c2_294511 = x_294509 - y_294510;
                                        double x_294512 = a_294493 * a12_294500;
                                        double y_294513 = b_294494 * b12_294503;
                                        double x_294514 = x_294512 + y_294513;
                                        double y_294515 = c_294495 * c12_294506;
                                        double y_294516 = x_294514 + y_294515;
                                        double det_294517 = 1.0 / y_294516;
                                        double a12_294518 = a12_294500 *
                                               det_294517;
                                        double b12_294519 = b12_294503 *
                                               det_294517;
                                        double c12_294520 = c12_294506 *
                                               det_294517;
                                        double b2_294521 = b2_294508 *
                                               det_294517;
                                        double c2_294522 = c2_294511 *
                                               det_294517;
                                        int64_t defunc_0_m_fun_res_294523;
                                        
                                        if (cond_294440) {
                                            defunc_0_m_fun_res_294523 =
                                                (int64_t) 0;
                                        } else {
                                            int64_t y_294524 =
                                                    sub64(s_n_m_292825,
                                                          (int64_t) 1);
                                            bool cond_294525 = i_297782 ==
                                                 y_294524;
                                            int64_t
                                            defunc_0_m_fun_res_f_res_294526;
                                            
                                            if (cond_294525) {
                                                int64_t
                                                defunc_0_m_fun_res_f_res_t_res_294527
                                                = sub64(pad_css_len_292821,
                                                        (int64_t) 1);
                                                
                                                defunc_0_m_fun_res_f_res_294526 =
                                                    defunc_0_m_fun_res_f_res_t_res_294527;
                                            } else {
                                                int64_t x_294528 =
                                                        sub64(i_297782,
                                                              (int64_t) 1);
                                                int64_t x_294529 =
                                                        mul64(jump_s_292684,
                                                              x_294528);
                                                int64_t min_arg_294530 =
                                                        add64((int64_t) 1,
                                                              x_294529);
                                                int64_t min_res_294531 =
                                                        smin64(defunc_0_f_res_292820,
                                                               min_arg_294530);
                                                
                                                defunc_0_m_fun_res_f_res_294526 =
                                                    min_res_294531;
                                            }
                                            defunc_0_m_fun_res_294523 =
                                                defunc_0_m_fun_res_f_res_294526;
                                        }
                                        
                                        double defunc_2_reduce_res_294532;
                                        double defunc_2_reduce_res_294533;
                                        double redout_297775;
                                        double redout_297776;
                                        
                                        redout_297775 = 0.0;
                                        redout_297776 = 0.0;
                                        for (int64_t i_297777 = 0; i_297777 <
                                             q_s_292678; i_297777++) {
                                            bool cond_294541 = sle64(x_294432,
                                                                     i_297777);
                                            int64_t defunc_0_f_res_294542;
                                            
                                            if (cond_294541) {
                                                defunc_0_f_res_294542 =
                                                    (int64_t) 0;
                                            } else {
                                                int64_t i_294543 =
                                                        add64(x_294438,
                                                              i_297777);
                                                int64_t defunc_0_add_arg_294544;
                                                
                                                defunc_0_add_arg_294544 =
                                                    ((int64_t *) mem_299690)[i_297796 *
                                                                             ctx_val_299600 +
                                                                             i_297789 *
                                                                             defunc_0_f_res_292820 +
                                                                             i_294543];
                                                
                                                int64_t defunc_1_add_res_294545
                                                        = add64((int64_t) 1,
                                                                defunc_0_add_arg_294544);
                                                
                                                defunc_0_f_res_294542 =
                                                    defunc_1_add_res_294545;
                                            }
                                            
                                            double defunc_0_f_res_294546;
                                            
                                            if (cond_294541) {
                                                defunc_0_f_res_294546 = 0.0;
                                            } else {
                                                int64_t i_294547 =
                                                        add64(x_294438,
                                                              i_297777);
                                                double defunc_0_add_arg_294548;
                                                
                                                defunc_0_add_arg_294548 =
                                                    ((double *) mem_300400)[i_297796 *
                                                                            ctx_val_299600 +
                                                                            i_297789 *
                                                                            defunc_0_f_res_292820 +
                                                                            i_294547];
                                                defunc_0_f_res_294546 =
                                                    defunc_0_add_arg_294548;
                                            }
                                            
                                            int64_t binop_p_294549 =
                                                    sub64(defunc_0_f_res_294542,
                                                          defunc_0_m_fun_res_294523);
                                            double defunc_0_f_res_294550 =
                                                   sitofp_i64_f64(binop_p_294549);
                                            double abs_res_294551 =
                                                   fabs(defunc_0_f_res_294550);
                                            double tmp1_294552 =
                                                   abs_res_294551 / x_294439;
                                            double x_294553 = tmp1_294552 *
                                                   tmp1_294552;
                                            double y_294554 = tmp1_294552 *
                                                   x_294553;
                                            double tmp2_294555 = 1.0 - y_294554;
                                            double x_294556 = tmp2_294555 *
                                                   tmp2_294555;
                                            double tmp3_294557 = tmp2_294555 *
                                                   x_294556;
                                            double tmp4_294558 =
                                                   defunc_0_f_res_294546 *
                                                   tmp3_294557;
                                            double defunc_1_f_res_294559 =
                                                   defunc_0_f_res_294550 *
                                                   tmp4_294558;
                                            double defunc_1_f_res_294560 =
                                                   defunc_0_f_res_294550 *
                                                   defunc_1_f_res_294559;
                                            double defunc_0_f_res_294561;
                                            
                                            if (cond_294541) {
                                                defunc_0_f_res_294561 = 0.0;
                                            } else {
                                                int64_t i_294562 =
                                                        add64(x_294438,
                                                              i_297777);
                                                double defunc_0_add_arg_294563;
                                                
                                                defunc_0_add_arg_294563 =
                                                    ((double *) mem_300395)[i_297796 *
                                                                            ctx_val_299600 +
                                                                            i_297789 *
                                                                            defunc_0_f_res_292820 +
                                                                            i_294562];
                                                defunc_0_f_res_294561 =
                                                    defunc_0_add_arg_294563;
                                            }
                                            
                                            double x_294564 = a12_294518 *
                                                   tmp4_294558;
                                            double y_294565 = b12_294519 *
                                                   defunc_1_f_res_294559;
                                            double x_294566 = x_294564 +
                                                   y_294565;
                                            double y_294567 = c12_294520 *
                                                   defunc_1_f_res_294560;
                                            double x_294568 = x_294566 +
                                                   y_294567;
                                            double defunc_9_fit_fun_res_294569 =
                                                   defunc_0_f_res_294561 *
                                                   x_294568;
                                            double x_294570 = b12_294519 *
                                                   tmp4_294558;
                                            double y_294571 = b2_294521 *
                                                   defunc_1_f_res_294559;
                                            double x_294572 = x_294570 +
                                                   y_294571;
                                            double y_294573 = c2_294522 *
                                                   defunc_1_f_res_294560;
                                            double x_294574 = x_294572 +
                                                   y_294573;
                                            double defunc_9_slope_fun_res_294575
                                                   = defunc_0_f_res_294561 *
                                                   x_294574;
                                            double defunc_1_op_res_294536 =
                                                   defunc_9_fit_fun_res_294569 +
                                                   redout_297775;
                                            double defunc_1_op_res_294539 =
                                                   defunc_9_slope_fun_res_294575 +
                                                   redout_297776;
                                            double redout_tmp_306506 =
                                                   defunc_1_op_res_294536;
                                            double redout_tmp_306507 =
                                                   defunc_1_op_res_294539;
                                            
                                            redout_297775 = redout_tmp_306506;
                                            redout_297776 = redout_tmp_306507;
                                        }
                                        defunc_2_reduce_res_294532 =
                                            redout_297775;
                                        defunc_2_reduce_res_294533 =
                                            redout_297776;
                                        ((double *) mem_302150.mem)[i_297796 *
                                                                    ctx_val_299884 +
                                                                    i_297789 *
                                                                    s_n_m_292825 +
                                                                    i_297782] =
                                            defunc_2_reduce_res_294532;
                                        ((double *) mem_302155.mem)[i_297796 *
                                                                    ctx_val_299884 +
                                                                    i_297789 *
                                                                    s_n_m_292825 +
                                                                    i_297782] =
                                            defunc_2_reduce_res_294533;
                                    }
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_302363, &mem_302150,
                                             "mem_302150") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_302352, &mem_302155,
                                             "mem_302155") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302155,
                                               "mem_302155") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_302150,
                                               "mem_302150") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_302386, &ext_mem_302363,
                                         "ext_mem_302363") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_302375, &ext_mem_302352,
                                         "ext_mem_302352") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302352,
                                           "ext_mem_302352") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302363,
                                           "ext_mem_302363") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_302408, &ext_mem_302386,
                                     "ext_mem_302386") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_302397, &ext_mem_302375,
                                     "ext_mem_302375") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302375,
                                       "ext_mem_302375") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302386,
                                       "ext_mem_302386") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_302430, &ext_mem_302408,
                                 "ext_mem_302408") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_302419, &ext_mem_302397,
                                 "ext_mem_302397") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_302397, "ext_mem_302397") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_302408, "ext_mem_302408") != 0)
                    return 1;
            }
            
            int64_t ext_302548;
            struct memblock ext_mem_302544;
            
            ext_mem_302544.references = NULL;
            if (cond_292824) {
                ext_302548 = ctx_val_299884;
                if (memblock_set(ctx, &ext_mem_302544, &ext_mem_302430,
                                 "ext_mem_302430") != 0)
                    return 1;
            } else {
                bool bounds_invalid_upwards_294584 = slt64(pad_css_len_292821,
                                                           (int64_t) 0);
                bool valid_294585 = !bounds_invalid_upwards_294584;
                bool range_valid_c_294586;
                
                if (!valid_294585) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Range ", (long long) (int64_t) 0, "..",
                                  (long long) (int64_t) 1, "..<",
                                  (long long) pad_css_len_292821,
                                  " is invalid.",
                                  "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:752:3-761:9\n   #4  stl.fut:222:31-96\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:221:23-223:48\n   #8  /prelude/soacs.fut:67:19-23\n   #9  /prelude/soacs.fut:67:3-37\n   #10 stl.fut:220:15-224:44\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_302544,
                                       "ext_mem_302544") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302419,
                                       "ext_mem_302419") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302430,
                                       "ext_mem_302430") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300343,
                                       "mem_param_300343") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300335,
                                       "mem_param_300335") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305217,
                                       "ext_mem_305217") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305218,
                                       "ext_mem_305218") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300321,
                                       "mem_param_300321") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300313,
                                       "mem_param_300313") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300305,
                                       "mem_param_300305") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305742,
                                       "ext_mem_305742") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305743,
                                       "ext_mem_305743") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305744,
                                       "ext_mem_305744") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                struct memblock mem_302445;
                
                mem_302445.references = NULL;
                if (memblock_alloc(ctx, &mem_302445, bytes_302444,
                                   "mem_302445")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t ctx_val_302458 = n_p_292677 * pad_css_len_292821;
                
                for (int64_t i_297809 = 0; i_297809 < partition_sizze_292766;
                     i_297809++) {
                    for (int64_t i_297805 = 0; i_297805 < n_p_292677;
                         i_297805++) {
                        for (int64_t i_297801 = 0; i_297801 <
                             pad_css_len_292821; i_297801++) {
                            bool cond_294596 = i_297801 == (int64_t) 0;
                            double defunc_0_f_res_294597;
                            
                            if (cond_294596) {
                                bool y_294598 = slt64((int64_t) 0,
                                                      s_n_m_292825);
                                bool index_certs_294599;
                                
                                if (!y_294598) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) (int64_t) 0,
                                                  "] out of bounds for array of shape [",
                                                  (long long) s_n_m_292825,
                                                  "].",
                                                  "-> #0  /prelude/array.fut:21:29-32\n   #1  loess.fut:754:12-20\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:752:3-761:9\n   #6  stl.fut:222:31-96\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:221:23-223:48\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:220:15-224:44\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                                    if (memblock_unref(ctx, &mem_302445,
                                                       "mem_302445") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302544,
                                                       "ext_mem_302544") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302419,
                                                       "ext_mem_302419") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302430,
                                                       "ext_mem_302430") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300343,
                                                       "mem_param_300343") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300335,
                                                       "mem_param_300335") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305217,
                                                       "ext_mem_305217") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305218,
                                                       "ext_mem_305218") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300321,
                                                       "mem_param_300321") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300313,
                                                       "mem_param_300313") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300305,
                                                       "mem_param_300305") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305742,
                                                       "ext_mem_305742") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305743,
                                                       "ext_mem_305743") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305744,
                                                       "ext_mem_305744") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_300297,
                                                       "mem_300297") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_300293,
                                                       "mem_300293") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_306309,
                                                       "mem_out_306309") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_306308,
                                                       "mem_out_306308") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_306307,
                                                       "mem_out_306307") != 0)
                                        return 1;
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                double head_res_294600;
                                
                                head_res_294600 =
                                    ((double *) ext_mem_302430.mem)[i_297809 *
                                                                    ctx_val_299884 +
                                                                    i_297805 *
                                                                    s_n_m_292825];
                                defunc_0_f_res_294597 = head_res_294600;
                            } else {
                                int64_t y_294601 = sub64(pad_css_len_292821,
                                                         (int64_t) 1);
                                bool cond_294602 = i_297801 == y_294601;
                                double defunc_0_f_res_f_res_294603;
                                
                                if (cond_294602) {
                                    int64_t i_294604 = sub64(s_n_m_292825,
                                                             (int64_t) 1);
                                    bool x_294605 = sle64((int64_t) 0,
                                                          i_294604);
                                    bool y_294606 = slt64(i_294604,
                                                          s_n_m_292825);
                                    bool bounds_check_294607 = x_294605 &&
                                         y_294606;
                                    bool index_certs_294608;
                                    
                                    if (!bounds_check_294607) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) i_294604,
                                                      "] out of bounds for array of shape [",
                                                      (long long) s_n_m_292825,
                                                      "].",
                                                      "-> #0  /prelude/array.fut:26:29-34\n   #1  loess.fut:756:12-20\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:752:3-761:9\n   #6  stl.fut:222:31-96\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:221:23-223:48\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:220:15-224:44\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_302445,
                                                           "mem_302445") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302544,
                                                           "ext_mem_302544") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302419,
                                                           "ext_mem_302419") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302430,
                                                           "ext_mem_302430") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300343,
                                                           "mem_param_300343") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300335,
                                                           "mem_param_300335") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305217,
                                                           "ext_mem_305217") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305218,
                                                           "ext_mem_305218") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300321,
                                                           "mem_param_300321") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300313,
                                                           "mem_param_300313") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300305,
                                                           "mem_param_300305") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305742,
                                                           "ext_mem_305742") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305743,
                                                           "ext_mem_305743") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305744,
                                                           "ext_mem_305744") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300297,
                                                           "mem_300297") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300293,
                                                           "mem_300293") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306309,
                                                           "mem_out_306309") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306308,
                                                           "mem_out_306308") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306307,
                                                           "mem_out_306307") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double last_res_294609;
                                    
                                    last_res_294609 =
                                        ((double *) ext_mem_302430.mem)[i_297809 *
                                                                        ctx_val_299884 +
                                                                        i_297805 *
                                                                        s_n_m_292825 +
                                                                        i_294604];
                                    defunc_0_f_res_f_res_294603 =
                                        last_res_294609;
                                } else {
                                    int64_t x_294610 = sub64(i_297801,
                                                             (int64_t) 1);
                                    bool zzero_294611 = jump_s_292684 ==
                                         (int64_t) 0;
                                    bool nonzzero_294612 = !zzero_294611;
                                    bool nonzzero_cert_294613;
                                    
                                    if (!nonzzero_294612) {
                                        ctx->error =
                                            msgprintf("Error: %s\n\nBacktrace:\n%s",
                                                      "division by zero",
                                                      "-> #0  loess.fut:758:22-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:752:3-761:9\n   #5  stl.fut:222:31-96\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:221:23-223:48\n   #9  /prelude/soacs.fut:67:19-23\n   #10 /prelude/soacs.fut:67:3-37\n   #11 stl.fut:220:15-224:44\n   #12 stl.fut:419:61-435:77\n   #13 stl.fut:463:3-479:36\n   #14 stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_302445,
                                                           "mem_302445") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302544,
                                                           "ext_mem_302544") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302419,
                                                           "ext_mem_302419") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302430,
                                                           "ext_mem_302430") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300343,
                                                           "mem_param_300343") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300335,
                                                           "mem_param_300335") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305217,
                                                           "ext_mem_305217") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305218,
                                                           "ext_mem_305218") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300321,
                                                           "mem_param_300321") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300313,
                                                           "mem_param_300313") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300305,
                                                           "mem_param_300305") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305742,
                                                           "ext_mem_305742") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305743,
                                                           "ext_mem_305743") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305744,
                                                           "ext_mem_305744") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300297,
                                                           "mem_300297") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300293,
                                                           "mem_300293") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306309,
                                                           "mem_out_306309") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306308,
                                                           "mem_out_306308") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306307,
                                                           "mem_out_306307") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t x_294614 = sdiv64(x_294610,
                                                              jump_s_292684);
                                    int64_t m_v_294615 = add64((int64_t) 1,
                                                               x_294614);
                                    int64_t j_294616;
                                    
                                    if (cond_294596) {
                                        j_294616 = (int64_t) 0;
                                    } else {
                                        int64_t y_294617 = sub64(s_n_m_292825,
                                                                 (int64_t) 1);
                                        bool cond_294618 = m_v_294615 ==
                                             y_294617;
                                        int64_t j_f_res_294619;
                                        
                                        if (cond_294618) {
                                            j_f_res_294619 = x_294614;
                                        } else {
                                            j_f_res_294619 = m_v_294615;
                                        }
                                        j_294616 = j_f_res_294619;
                                    }
                                    
                                    bool cond_294620 = j_294616 == (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_294621;
                                    
                                    if (cond_294620) {
                                        defunc_0_m_fun_res_294621 = (int64_t) 0;
                                    } else {
                                        int64_t y_294622 = sub64(s_n_m_292825,
                                                                 (int64_t) 1);
                                        bool cond_294623 = j_294616 == y_294622;
                                        int64_t defunc_0_m_fun_res_f_res_294624;
                                        
                                        if (cond_294623) {
                                            defunc_0_m_fun_res_f_res_294624 =
                                                y_294601;
                                        } else {
                                            int64_t x_294625 = sub64(j_294616,
                                                                     (int64_t) 1);
                                            int64_t x_294626 =
                                                    mul64(jump_s_292684,
                                                          x_294625);
                                            int64_t min_arg_294627 =
                                                    add64((int64_t) 1,
                                                          x_294626);
                                            int64_t min_res_294628 =
                                                    smin64(defunc_0_f_res_292820,
                                                           min_arg_294627);
                                            
                                            defunc_0_m_fun_res_f_res_294624 =
                                                min_res_294628;
                                        }
                                        defunc_0_m_fun_res_294621 =
                                            defunc_0_m_fun_res_f_res_294624;
                                    }
                                    
                                    int64_t defunc_0_m_fun_arg_294629 =
                                            add64((int64_t) 1, j_294616);
                                    bool cond_294630 =
                                         defunc_0_m_fun_arg_294629 ==
                                         (int64_t) 0;
                                    int64_t defunc_0_m_fun_res_294631;
                                    
                                    if (cond_294630) {
                                        defunc_0_m_fun_res_294631 = (int64_t) 0;
                                    } else {
                                        int64_t y_294632 = sub64(s_n_m_292825,
                                                                 (int64_t) 1);
                                        bool cond_294633 =
                                             defunc_0_m_fun_arg_294629 ==
                                             y_294632;
                                        int64_t defunc_0_m_fun_res_f_res_294634;
                                        
                                        if (cond_294633) {
                                            defunc_0_m_fun_res_f_res_294634 =
                                                y_294601;
                                        } else {
                                            int64_t x_294635 =
                                                    mul64(jump_s_292684,
                                                          j_294616);
                                            int64_t min_arg_294636 =
                                                    add64((int64_t) 1,
                                                          x_294635);
                                            int64_t min_res_294637 =
                                                    smin64(defunc_0_f_res_292820,
                                                           min_arg_294636);
                                            
                                            defunc_0_m_fun_res_f_res_294634 =
                                                min_res_294637;
                                        }
                                        defunc_0_m_fun_res_294631 =
                                            defunc_0_m_fun_res_f_res_294634;
                                    }
                                    
                                    int64_t i64_arg_294638 =
                                            sub64(defunc_0_m_fun_res_294631,
                                                  defunc_0_m_fun_res_294621);
                                    double i64_res_294639 =
                                           sitofp_i64_f64(i64_arg_294638);
                                    int64_t i64_arg_294640 = sub64(i_297801,
                                                                   defunc_0_m_fun_res_294621);
                                    double i64_res_294641 =
                                           sitofp_i64_f64(i64_arg_294640);
                                    double u_294642 = i64_res_294641 /
                                           i64_res_294639;
                                    double u2_294643 = u_294642 * u_294642;
                                    double u3_294644 = u_294642 * u2_294643;
                                    double x_294645 = 2.0 * u3_294644;
                                    double y_294646 = 3.0 * u2_294643;
                                    double x_294647 = x_294645 - y_294646;
                                    double x_294648 = 1.0 + x_294647;
                                    bool x_294649 = sle64((int64_t) 0,
                                                          j_294616);
                                    bool y_294650 = slt64(j_294616,
                                                          s_n_m_292825);
                                    bool bounds_check_294651 = x_294649 &&
                                         y_294650;
                                    bool index_certs_294652;
                                    
                                    if (!bounds_check_294651) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) j_294616,
                                                      "] out of bounds for array of shape [",
                                                      (long long) s_n_m_292825,
                                                      "].",
                                                      "-> #0  loess.fut:731:27-33\n   #1  loess.fut:760:15-52\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:752:3-761:9\n   #6  stl.fut:222:31-96\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:221:23-223:48\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:220:15-224:44\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_302445,
                                                           "mem_302445") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302544,
                                                           "ext_mem_302544") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302419,
                                                           "ext_mem_302419") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302430,
                                                           "ext_mem_302430") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300343,
                                                           "mem_param_300343") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300335,
                                                           "mem_param_300335") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305217,
                                                           "ext_mem_305217") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305218,
                                                           "ext_mem_305218") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300321,
                                                           "mem_param_300321") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300313,
                                                           "mem_param_300313") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300305,
                                                           "mem_param_300305") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305742,
                                                           "ext_mem_305742") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305743,
                                                           "ext_mem_305743") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305744,
                                                           "ext_mem_305744") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300297,
                                                           "mem_300297") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300293,
                                                           "mem_300293") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306309,
                                                           "mem_out_306309") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306308,
                                                           "mem_out_306308") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306307,
                                                           "mem_out_306307") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double y_294653;
                                    
                                    y_294653 =
                                        ((double *) ext_mem_302430.mem)[i_297809 *
                                                                        ctx_val_299884 +
                                                                        i_297805 *
                                                                        s_n_m_292825 +
                                                                        j_294616];
                                    
                                    double x_294654 = x_294648 * y_294653;
                                    double x_294655 = y_294646 - x_294645;
                                    bool x_294656 = sle64((int64_t) 0,
                                                          defunc_0_m_fun_arg_294629);
                                    bool y_294657 =
                                         slt64(defunc_0_m_fun_arg_294629,
                                               s_n_m_292825);
                                    bool bounds_check_294658 = x_294656 &&
                                         y_294657;
                                    bool index_certs_294659;
                                    
                                    if (!bounds_check_294658) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) defunc_0_m_fun_arg_294629,
                                                      "] out of bounds for array of shape [",
                                                      (long long) s_n_m_292825,
                                                      "].",
                                                      "-> #0  loess.fut:732:27-37\n   #1  loess.fut:760:15-52\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:752:3-761:9\n   #6  stl.fut:222:31-96\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:221:23-223:48\n   #10 /prelude/soacs.fut:67:19-23\n   #11 /prelude/soacs.fut:67:3-37\n   #12 stl.fut:220:15-224:44\n   #13 stl.fut:419:61-435:77\n   #14 stl.fut:463:3-479:36\n   #15 stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_302445,
                                                           "mem_302445") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302544,
                                                           "ext_mem_302544") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302419,
                                                           "ext_mem_302419") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302430,
                                                           "ext_mem_302430") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300343,
                                                           "mem_param_300343") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300335,
                                                           "mem_param_300335") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305217,
                                                           "ext_mem_305217") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305218,
                                                           "ext_mem_305218") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300321,
                                                           "mem_param_300321") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300313,
                                                           "mem_param_300313") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300305,
                                                           "mem_param_300305") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305742,
                                                           "ext_mem_305742") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305743,
                                                           "ext_mem_305743") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305744,
                                                           "ext_mem_305744") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300297,
                                                           "mem_300297") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300293,
                                                           "mem_300293") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306309,
                                                           "mem_out_306309") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306308,
                                                           "mem_out_306308") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306307,
                                                           "mem_out_306307") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double y_294660;
                                    
                                    y_294660 =
                                        ((double *) ext_mem_302430.mem)[i_297809 *
                                                                        ctx_val_299884 +
                                                                        i_297805 *
                                                                        s_n_m_292825 +
                                                                        defunc_0_m_fun_arg_294629];
                                    
                                    double y_294661 = x_294655 * y_294660;
                                    double x_294662 = x_294654 + y_294661;
                                    double y_294663 = 2.0 * u2_294643;
                                    double x_294664 = u3_294644 - y_294663;
                                    double x_294665 = u_294642 + x_294664;
                                    double y_294666;
                                    
                                    y_294666 =
                                        ((double *) ext_mem_302419.mem)[i_297809 *
                                                                        ctx_val_299884 +
                                                                        i_297805 *
                                                                        s_n_m_292825 +
                                                                        j_294616];
                                    
                                    double x_294667 = x_294665 * y_294666;
                                    double y_294668 = i64_res_294639 * x_294667;
                                    double x_294669 = x_294662 + y_294668;
                                    double x_294670 = u3_294644 - u2_294643;
                                    double y_294671;
                                    
                                    y_294671 =
                                        ((double *) ext_mem_302419.mem)[i_297809 *
                                                                        ctx_val_299884 +
                                                                        i_297805 *
                                                                        s_n_m_292825 +
                                                                        defunc_0_m_fun_arg_294629];
                                    
                                    double x_294672 = x_294670 * y_294671;
                                    double y_294673 = i64_res_294639 * x_294672;
                                    double defunc_4_interpolate_proc_res_294674
                                           = x_294669 + y_294673;
                                    
                                    defunc_0_f_res_f_res_294603 =
                                        defunc_4_interpolate_proc_res_294674;
                                }
                                defunc_0_f_res_294597 =
                                    defunc_0_f_res_f_res_294603;
                            }
                            ((double *) mem_302445.mem)[i_297809 *
                                                        ctx_val_302458 +
                                                        i_297805 *
                                                        pad_css_len_292821 +
                                                        i_297801] =
                                defunc_0_f_res_294597;
                        }
                    }
                }
                ext_302548 = ctx_val_302458;
                if (memblock_set(ctx, &ext_mem_302544, &mem_302445,
                                 "mem_302445") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_302445, "mem_302445") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_302419, "ext_mem_302419") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_302430, "ext_mem_302430") != 0)
                return 1;
            for (int64_t i_297817 = 0; i_297817 < partition_sizze_292766;
                 i_297817++) {
                for (int64_t i_297813 = 0; i_297813 < C_len_292823;
                     i_297813++) {
                    int64_t i_294681 = smod64(i_297813, n_p_292677);
                    bool x_294682 = sle64((int64_t) 0, i_294681);
                    bool y_294683 = slt64(i_294681, n_p_292677);
                    bool bounds_check_294684 = x_294682 && y_294683;
                    int64_t i_294685 = sdiv64(i_297813, n_p_292677);
                    bool x_294686 = sle64((int64_t) 0, i_294685);
                    bool y_294687 = slt64(i_294685, css_results_l_293288);
                    bool bounds_check_294688 = x_294686 && y_294687;
                    bool index_ok_294689 = bounds_check_294684 &&
                         bounds_check_294688;
                    bool index_certs_294690;
                    
                    if (!index_ok_294689) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) i_294681, ", ",
                                      (long long) i_294685,
                                      "] out of bounds for array of shape [",
                                      (long long) n_p_292677, "][",
                                      (long long) css_results_l_293288, "].",
                                      "-> #0  stl.fut:228:39-67\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:228:28-74\n   #5  stl.fut:227:21-229:39\n   #6  stl.fut:419:61-435:77\n   #7  stl.fut:463:3-479:36\n   #8  stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &ext_mem_302544,
                                           "ext_mem_302544") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302419,
                                           "ext_mem_302419") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_302430,
                                           "ext_mem_302430") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300343,
                                           "mem_param_300343") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300335,
                                           "mem_param_300335") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305217,
                                           "ext_mem_305217") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305218,
                                           "ext_mem_305218") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300321,
                                           "mem_param_300321") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300313,
                                           "mem_param_300313") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300305,
                                           "mem_param_300305") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305742,
                                           "ext_mem_305742") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305743,
                                           "ext_mem_305743") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305744,
                                           "ext_mem_305744") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306309,
                                           "mem_out_306309") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306308,
                                           "mem_out_306308") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306307,
                                           "mem_out_306307") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    if ((int64_t) 8 > 0)
                        memmove(mem_302555 + (i_297817 * C_len_292823 +
                                              i_297813) * (int64_t) 8,
                                ext_mem_302544.mem + ((int64_t) 0 + i_297817 *
                                                      ext_302548 + i_294681 *
                                                      ext_302547 + (int64_t) 1 *
                                                      i_294685) * (int64_t) 8,
                                (int64_t) 8);
                }
            }
            if (memblock_unref(ctx, &ext_mem_302544, "ext_mem_302544") != 0)
                return 1;
            for (int64_t i_297823 = 0; i_297823 < partition_sizze_292766;
                 i_297823++) {
                double defunc_2_reduce_res_294696;
                double redout_297819 = 0.0;
                
                for (int64_t i_297820 = 0; i_297820 < n_p_292677; i_297820++) {
                    double x_294700;
                    
                    x_294700 = ((double *) mem_302555)[i_297823 * C_len_292823 +
                                                       i_297820];
                    
                    double defunc_1_op_res_294699 = x_294700 + redout_297819;
                    double redout_tmp_306514 = defunc_1_op_res_294699;
                    
                    redout_297819 = redout_tmp_306514;
                }
                defunc_2_reduce_res_294696 = redout_297819;
                ((double *) mem_302601)[i_297823] = defunc_2_reduce_res_294696;
            }
            for (int64_t i_297833 = 0; i_297833 < partition_sizze_292766;
                 i_297833++) {
                double x_294704;
                
                x_294704 = ((double *) mem_302601)[i_297833];
                
                double discard_297830;
                double scanacc_297826 = 0.0;
                
                for (int64_t i_297828 = 0; i_297828 <
                     lifted_single_ma_l_arg_293311; i_297828++) {
                    bool cond_294710 = i_297828 == (int64_t) 0;
                    double defunc_0_f_res_294711;
                    
                    if (cond_294710) {
                        double defunc_0_f_res_t_res_294712 = x_294704 /
                               i64_res_292694;
                        
                        defunc_0_f_res_294711 = defunc_0_f_res_t_res_294712;
                    } else {
                        int64_t x_294713 = add64(n_p_292677, i_297828);
                        int64_t i_294714 = sub64(x_294713, (int64_t) 1);
                        bool x_294715 = sle64((int64_t) 0, i_294714);
                        bool y_294716 = slt64(i_294714, C_len_292823);
                        bool bounds_check_294717 = x_294715 && y_294716;
                        bool index_certs_294718;
                        
                        if (!bounds_check_294717) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_294714,
                                          "] out of bounds for array of shape [",
                                          (long long) C_len_292823, "].",
                                          "-> #0  stl.fut:34:23-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  stl.fut:40:3-36\n   #9  stl.fut:233:23-47\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_302544,
                                               "ext_mem_302544") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302419,
                                               "ext_mem_302419") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302430,
                                               "ext_mem_302430") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300343,
                                               "mem_param_300343") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300335,
                                               "mem_param_300335") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305217,
                                               "ext_mem_305217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305218,
                                               "ext_mem_305218") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300321,
                                               "mem_param_300321") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300313,
                                               "mem_param_300313") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300305,
                                               "mem_param_300305") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305742,
                                               "ext_mem_305742") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305743,
                                               "ext_mem_305743") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305744,
                                               "ext_mem_305744") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300297,
                                               "mem_300297") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300293,
                                               "mem_300293") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306309,
                                               "mem_out_306309") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306308,
                                               "mem_out_306308") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306307,
                                               "mem_out_306307") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double x_294719;
                        
                        x_294719 = ((double *) mem_302555)[i_297833 *
                                                           C_len_292823 +
                                                           i_294714];
                        
                        int64_t i_294720 = sub64(i_297828, (int64_t) 1);
                        bool x_294721 = sle64((int64_t) 0, i_294720);
                        bool y_294722 = slt64(i_294720, C_len_292823);
                        bool bounds_check_294723 = x_294721 && y_294722;
                        bool index_certs_294724;
                        
                        if (!bounds_check_294723) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_294720,
                                          "] out of bounds for array of shape [",
                                          (long long) C_len_292823, "].",
                                          "-> #0  stl.fut:34:40-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  stl.fut:40:3-36\n   #9  stl.fut:233:23-47\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_302544,
                                               "ext_mem_302544") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302419,
                                               "ext_mem_302419") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302430,
                                               "ext_mem_302430") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300343,
                                               "mem_param_300343") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300335,
                                               "mem_param_300335") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305217,
                                               "ext_mem_305217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305218,
                                               "ext_mem_305218") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300321,
                                               "mem_param_300321") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300313,
                                               "mem_param_300313") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300305,
                                               "mem_param_300305") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305742,
                                               "ext_mem_305742") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305743,
                                               "ext_mem_305743") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305744,
                                               "ext_mem_305744") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300297,
                                               "mem_300297") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300293,
                                               "mem_300293") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306309,
                                               "mem_out_306309") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306308,
                                               "mem_out_306308") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306307,
                                               "mem_out_306307") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_294725;
                        
                        y_294725 = ((double *) mem_302555)[i_297833 *
                                                           C_len_292823 +
                                                           i_294720];
                        
                        double x_294726 = x_294719 - y_294725;
                        double defunc_0_f_res_f_res_294727 = x_294726 /
                               i64_res_292694;
                        
                        defunc_0_f_res_294711 = defunc_0_f_res_f_res_294727;
                    }
                    
                    double defunc_1_op_res_294708 = defunc_0_f_res_294711 +
                           scanacc_297826;
                    
                    ((double *) mem_302630)[i_297828] = defunc_1_op_res_294708;
                    
                    double scanacc_tmp_306516 = defunc_1_op_res_294708;
                    
                    scanacc_297826 = scanacc_tmp_306516;
                }
                discard_297830 = scanacc_297826;
                if (lifted_single_ma_l_arg_293311 * (int64_t) 8 > 0)
                    memmove(mem_302617 + i_297833 *
                            lifted_single_ma_l_arg_293311 * (int64_t) 8,
                            mem_302630 + (int64_t) 0,
                            lifted_single_ma_l_arg_293311 * (int64_t) 8);
            }
            for (int64_t i_297839 = 0; i_297839 < partition_sizze_292766;
                 i_297839++) {
                double defunc_2_reduce_res_294732;
                double redout_297835 = 0.0;
                
                for (int64_t i_297836 = 0; i_297836 < n_p_292677; i_297836++) {
                    double x_294736;
                    
                    x_294736 = ((double *) mem_302617)[i_297839 *
                                                       lifted_single_ma_l_arg_293311 +
                                                       i_297836];
                    
                    double defunc_1_op_res_294735 = x_294736 + redout_297835;
                    double redout_tmp_306519 = defunc_1_op_res_294735;
                    
                    redout_297835 = redout_tmp_306519;
                }
                defunc_2_reduce_res_294732 = redout_297835;
                ((double *) mem_302653)[i_297839] = defunc_2_reduce_res_294732;
            }
            for (int64_t i_297849 = 0; i_297849 < partition_sizze_292766;
                 i_297849++) {
                double x_294740;
                
                x_294740 = ((double *) mem_302653)[i_297849];
                
                double discard_297846;
                double scanacc_297842 = 0.0;
                
                for (int64_t i_297844 = 0; i_297844 <
                     dyn_lifted_single_ma_l_arg_293321; i_297844++) {
                    bool cond_294746 = i_297844 == (int64_t) 0;
                    double defunc_0_f_res_294747;
                    
                    if (cond_294746) {
                        double defunc_0_f_res_t_res_294748 = x_294740 /
                               i64_res_292694;
                        
                        defunc_0_f_res_294747 = defunc_0_f_res_t_res_294748;
                    } else {
                        int64_t x_294749 = add64(n_p_292677, i_297844);
                        int64_t i_294750 = sub64(x_294749, (int64_t) 1);
                        bool x_294751 = sle64((int64_t) 0, i_294750);
                        bool y_294752 = slt64(i_294750,
                                              lifted_single_ma_l_arg_293311);
                        bool bounds_check_294753 = x_294751 && y_294752;
                        bool index_certs_294754;
                        
                        if (!bounds_check_294753) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_294750,
                                          "] out of bounds for array of shape [",
                                          (long long) lifted_single_ma_l_arg_293311,
                                          "].",
                                          "-> #0  stl.fut:34:23-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  /prelude/functional.fut:9:42-44\n   #9  stl.fut:40:3-64\n   #10 stl.fut:233:23-47\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_302544,
                                               "ext_mem_302544") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302419,
                                               "ext_mem_302419") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302430,
                                               "ext_mem_302430") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300343,
                                               "mem_param_300343") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300335,
                                               "mem_param_300335") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305217,
                                               "ext_mem_305217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305218,
                                               "ext_mem_305218") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300321,
                                               "mem_param_300321") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300313,
                                               "mem_param_300313") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300305,
                                               "mem_param_300305") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305742,
                                               "ext_mem_305742") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305743,
                                               "ext_mem_305743") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305744,
                                               "ext_mem_305744") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300297,
                                               "mem_300297") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300293,
                                               "mem_300293") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306309,
                                               "mem_out_306309") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306308,
                                               "mem_out_306308") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306307,
                                               "mem_out_306307") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double x_294755;
                        
                        x_294755 = ((double *) mem_302617)[i_297849 *
                                                           lifted_single_ma_l_arg_293311 +
                                                           i_294750];
                        
                        int64_t i_294756 = sub64(i_297844, (int64_t) 1);
                        bool x_294757 = sle64((int64_t) 0, i_294756);
                        bool y_294758 = slt64(i_294756,
                                              lifted_single_ma_l_arg_293311);
                        bool bounds_check_294759 = x_294757 && y_294758;
                        bool index_certs_294760;
                        
                        if (!bounds_check_294759) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_294756,
                                          "] out of bounds for array of shape [",
                                          (long long) lifted_single_ma_l_arg_293311,
                                          "].",
                                          "-> #0  stl.fut:34:40-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  /prelude/functional.fut:9:42-44\n   #9  stl.fut:40:3-64\n   #10 stl.fut:233:23-47\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_302544,
                                               "ext_mem_302544") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302419,
                                               "ext_mem_302419") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302430,
                                               "ext_mem_302430") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300343,
                                               "mem_param_300343") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300335,
                                               "mem_param_300335") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305217,
                                               "ext_mem_305217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305218,
                                               "ext_mem_305218") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300321,
                                               "mem_param_300321") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300313,
                                               "mem_param_300313") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300305,
                                               "mem_param_300305") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305742,
                                               "ext_mem_305742") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305743,
                                               "ext_mem_305743") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305744,
                                               "ext_mem_305744") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300297,
                                               "mem_300297") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300293,
                                               "mem_300293") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306309,
                                               "mem_out_306309") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306308,
                                               "mem_out_306308") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306307,
                                               "mem_out_306307") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_294761;
                        
                        y_294761 = ((double *) mem_302617)[i_297849 *
                                                           lifted_single_ma_l_arg_293311 +
                                                           i_294756];
                        
                        double x_294762 = x_294755 - y_294761;
                        double defunc_0_f_res_f_res_294763 = x_294762 /
                               i64_res_292694;
                        
                        defunc_0_f_res_294747 = defunc_0_f_res_f_res_294763;
                    }
                    
                    double defunc_1_op_res_294744 = defunc_0_f_res_294747 +
                           scanacc_297842;
                    
                    ((double *) mem_302682)[i_297844] = defunc_1_op_res_294744;
                    
                    double scanacc_tmp_306521 = defunc_1_op_res_294744;
                    
                    scanacc_297842 = scanacc_tmp_306521;
                }
                discard_297846 = scanacc_297842;
                if (dyn_lifted_single_ma_l_arg_293321 * (int64_t) 8 > 0)
                    memmove(mem_302669 + i_297849 *
                            dyn_lifted_single_ma_l_arg_293321 * (int64_t) 8,
                            mem_302682 + (int64_t) 0,
                            dyn_lifted_single_ma_l_arg_293321 * (int64_t) 8);
            }
            for (int64_t i_297855 = 0; i_297855 < partition_sizze_292766;
                 i_297855++) {
                double defunc_2_reduce_res_294768;
                double redout_297851 = 0.0;
                
                for (int32_t i_298662 = 0; i_298662 < 3; i_298662++) {
                    int64_t i_297852 = sext_i32_i64(i_298662);
                    double x_294772;
                    
                    x_294772 = ((double *) mem_302669)[i_297855 *
                                                       dyn_lifted_single_ma_l_arg_293321 +
                                                       i_297852];
                    
                    double defunc_1_op_res_294771 = x_294772 + redout_297851;
                    double redout_tmp_306524 = defunc_1_op_res_294771;
                    
                    redout_297851 = redout_tmp_306524;
                }
                defunc_2_reduce_res_294768 = redout_297851;
                ((double *) mem_302705)[i_297855] = defunc_2_reduce_res_294768;
            }
            for (int64_t i_297865 = 0; i_297865 < partition_sizze_292766;
                 i_297865++) {
                double x_294776;
                
                x_294776 = ((double *) mem_302705)[i_297865];
                
                double discard_297862;
                double scanacc_297858 = 0.0;
                
                for (int64_t i_297860 = 0; i_297860 < n_292675; i_297860++) {
                    bool cond_294782 = i_297860 == (int64_t) 0;
                    double defunc_0_f_res_294783;
                    
                    if (cond_294782) {
                        double defunc_0_f_res_t_res_294784 = x_294776 / 3.0;
                        
                        defunc_0_f_res_294783 = defunc_0_f_res_t_res_294784;
                    } else {
                        int64_t x_294785 = add64((int64_t) 3, i_297860);
                        int64_t i_294786 = sub64(x_294785, (int64_t) 1);
                        bool x_294787 = sle64((int64_t) 0, i_294786);
                        bool y_294788 = slt64(i_294786,
                                              dyn_lifted_single_ma_l_arg_293321);
                        bool bounds_check_294789 = x_294787 && y_294788;
                        bool index_certs_294790;
                        
                        if (!bounds_check_294789) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_294786,
                                          "] out of bounds for array of shape [",
                                          (long long) dyn_lifted_single_ma_l_arg_293321,
                                          "].",
                                          "-> #0  stl.fut:34:23-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  /prelude/functional.fut:9:42-44\n   #9  stl.fut:40:3-84\n   #10 stl.fut:233:23-47\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_302544,
                                               "ext_mem_302544") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302419,
                                               "ext_mem_302419") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302430,
                                               "ext_mem_302430") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300343,
                                               "mem_param_300343") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300335,
                                               "mem_param_300335") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305217,
                                               "ext_mem_305217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305218,
                                               "ext_mem_305218") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300321,
                                               "mem_param_300321") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300313,
                                               "mem_param_300313") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300305,
                                               "mem_param_300305") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305742,
                                               "ext_mem_305742") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305743,
                                               "ext_mem_305743") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305744,
                                               "ext_mem_305744") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300297,
                                               "mem_300297") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300293,
                                               "mem_300293") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306309,
                                               "mem_out_306309") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306308,
                                               "mem_out_306308") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306307,
                                               "mem_out_306307") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double x_294791;
                        
                        x_294791 = ((double *) mem_302669)[i_297865 *
                                                           dyn_lifted_single_ma_l_arg_293321 +
                                                           i_294786];
                        
                        int64_t i_294792 = sub64(i_297860, (int64_t) 1);
                        bool x_294793 = sle64((int64_t) 0, i_294792);
                        bool y_294794 = slt64(i_294792,
                                              dyn_lifted_single_ma_l_arg_293321);
                        bool bounds_check_294795 = x_294793 && y_294794;
                        bool index_certs_294796;
                        
                        if (!bounds_check_294795) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_294792,
                                          "] out of bounds for array of shape [",
                                          (long long) dyn_lifted_single_ma_l_arg_293321,
                                          "].",
                                          "-> #0  stl.fut:34:40-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  stl.fut:29:13-35:19\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:28:5-36:23\n   #8  /prelude/functional.fut:9:42-44\n   #9  stl.fut:40:3-84\n   #10 stl.fut:233:23-47\n   #11 stl.fut:419:61-435:77\n   #12 stl.fut:463:3-479:36\n   #13 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_302544,
                                               "ext_mem_302544") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302419,
                                               "ext_mem_302419") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302430,
                                               "ext_mem_302430") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300343,
                                               "mem_param_300343") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300335,
                                               "mem_param_300335") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305217,
                                               "ext_mem_305217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305218,
                                               "ext_mem_305218") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300321,
                                               "mem_param_300321") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300313,
                                               "mem_param_300313") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300305,
                                               "mem_param_300305") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305742,
                                               "ext_mem_305742") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305743,
                                               "ext_mem_305743") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305744,
                                               "ext_mem_305744") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300297,
                                               "mem_300297") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300293,
                                               "mem_300293") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306309,
                                               "mem_out_306309") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306308,
                                               "mem_out_306308") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306307,
                                               "mem_out_306307") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_294797;
                        
                        y_294797 = ((double *) mem_302669)[i_297865 *
                                                           dyn_lifted_single_ma_l_arg_293321 +
                                                           i_294792];
                        
                        double x_294798 = x_294791 - y_294797;
                        double defunc_0_f_res_f_res_294799 = x_294798 / 3.0;
                        
                        defunc_0_f_res_294783 = defunc_0_f_res_f_res_294799;
                    }
                    
                    double defunc_1_op_res_294780 = defunc_0_f_res_294783 +
                           scanacc_297858;
                    
                    ((double *) mem_302734)[i_297860] = defunc_1_op_res_294780;
                    
                    double scanacc_tmp_306526 = defunc_1_op_res_294780;
                    
                    scanacc_297858 = scanacc_tmp_306526;
                }
                discard_297862 = scanacc_297858;
                if (n_292675 * (int64_t) 8 > 0)
                    memmove(mem_302721 + i_297865 * n_292675 * (int64_t) 8,
                            mem_302734 + (int64_t) 0, n_292675 * (int64_t) 8);
            }
            
            struct memblock ext_mem_303697;
            
            ext_mem_303697.references = NULL;
            
            struct memblock ext_mem_303689;
            
            ext_mem_303689.references = NULL;
            if (cond_293339) {
                bool match_lit_294803 = (int64_t) 0 == d_l_292683;
                struct memblock ext_mem_303018;
                
                ext_mem_303018.references = NULL;
                
                struct memblock ext_mem_303010;
                
                ext_mem_303010.references = NULL;
                if (match_lit_294803) {
                    struct memblock mem_302758;
                    
                    mem_302758.references = NULL;
                    if (memblock_alloc(ctx, &mem_302758, bytes_300074,
                                       "mem_302758")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_306528 = 0; i_306528 <
                         partition_sizze_292766; i_306528++) {
                        for (int64_t i_306529 = 0; i_306529 < l_n_m_292832;
                             i_306529++) {
                            ((double *) mem_302758.mem)[i_306528 *
                                                        l_n_m_292832 +
                                                        i_306529] = 0.0;
                        }
                    }
                    
                    struct memblock mem_302762;
                    
                    mem_302762.references = NULL;
                    if (memblock_alloc(ctx, &mem_302762, bytes_300074,
                                       "mem_302762")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_297877 = 0; i_297877 <
                         partition_sizze_292766; i_297877++) {
                        for (int64_t i_297873 = 0; i_297873 < l_n_m_292832;
                             i_297873++) {
                            int64_t x_294815;
                            
                            x_294815 = ((int64_t *) mem_300075)[i_297877 *
                                                                l_n_m_292832 +
                                                                i_297873];
                            
                            double x_294816;
                            
                            x_294816 = ((double *) mem_300079)[i_297877 *
                                                               l_n_m_292832 +
                                                               i_297873];
                            
                            int64_t min_arg_294817 = mul64(jump_t_292685,
                                                           i_297873);
                            int64_t min_res_294818 = smin64(i_292846,
                                                            min_arg_294817);
                            int64_t defunc_0_g_res_294819 = add64((int64_t) 1,
                                                                  min_res_294818);
                            double defunc_2_reduce_res_294820;
                            double redout_297867 = 0.0;
                            
                            for (int64_t i_297868 = 0; i_297868 < q_l_292680;
                                 i_297868++) {
                                bool cond_294825 = sle64(n_292675, i_297868);
                                int64_t defunc_0_f_res_294826;
                                
                                if (cond_294825) {
                                    defunc_0_f_res_294826 = (int64_t) 0;
                                } else {
                                    int64_t i_294827 = add64(x_294815,
                                                             i_297868);
                                    int64_t defunc_1_add_res_294828 =
                                            add64((int64_t) 1, i_294827);
                                    
                                    defunc_0_f_res_294826 =
                                        defunc_1_add_res_294828;
                                }
                                
                                double defunc_0_f_res_294829;
                                
                                if (cond_294825) {
                                    defunc_0_f_res_294829 = 0.0;
                                } else {
                                    int64_t i_294830 = add64(x_294815,
                                                             i_297868);
                                    double defunc_0_add_arg_294831;
                                    
                                    defunc_0_add_arg_294831 =
                                        ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                          (i_297877 *
                                                                           ctx_param_ext_300317 +
                                                                           i_294830 *
                                                                           ctx_param_ext_300319)];
                                    defunc_0_f_res_294829 =
                                        defunc_0_add_arg_294831;
                                }
                                
                                int64_t binop_p_294832 =
                                        sub64(defunc_0_f_res_294826,
                                              defunc_0_g_res_294819);
                                double defunc_0_f_res_294833 =
                                       sitofp_i64_f64(binop_p_294832);
                                double abs_res_294834 =
                                       fabs(defunc_0_f_res_294833);
                                double tmp1_294835 = abs_res_294834 / x_294816;
                                double x_294836 = tmp1_294835 * tmp1_294835;
                                double y_294837 = tmp1_294835 * x_294836;
                                double tmp2_294838 = 1.0 - y_294837;
                                double x_294839 = tmp2_294838 * tmp2_294838;
                                double tmp3_294840 = tmp2_294838 * x_294839;
                                double w_j_294841 = defunc_0_f_res_294829 *
                                       tmp3_294840;
                                double defunc_1_op_res_294823 = w_j_294841 +
                                       redout_297867;
                                double redout_tmp_306532 =
                                       defunc_1_op_res_294823;
                                
                                redout_297867 = redout_tmp_306532;
                            }
                            defunc_2_reduce_res_294820 = redout_297867;
                            
                            double a_294842 = 2.220446049250313e-16 +
                                   defunc_2_reduce_res_294820;
                            double a0_294843 = 1.0 / a_294842;
                            double defunc_2_reduce_res_294844;
                            double redout_297869 = 0.0;
                            
                            for (int64_t i_297870 = 0; i_297870 < q_l_292680;
                                 i_297870++) {
                                bool cond_294849 = sle64(n_292675, i_297870);
                                int64_t defunc_0_f_res_294850;
                                
                                if (cond_294849) {
                                    defunc_0_f_res_294850 = (int64_t) 0;
                                } else {
                                    int64_t i_294851 = add64(x_294815,
                                                             i_297870);
                                    int64_t defunc_1_add_res_294852 =
                                            add64((int64_t) 1, i_294851);
                                    
                                    defunc_0_f_res_294850 =
                                        defunc_1_add_res_294852;
                                }
                                
                                double defunc_0_f_res_294853;
                                
                                if (cond_294849) {
                                    defunc_0_f_res_294853 = 0.0;
                                } else {
                                    int64_t i_294854 = add64(x_294815,
                                                             i_297870);
                                    double defunc_0_add_arg_294855;
                                    
                                    defunc_0_add_arg_294855 =
                                        ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                          (i_297877 *
                                                                           ctx_param_ext_300317 +
                                                                           i_294854 *
                                                                           ctx_param_ext_300319)];
                                    defunc_0_f_res_294853 =
                                        defunc_0_add_arg_294855;
                                }
                                
                                int64_t binop_p_294856 =
                                        sub64(defunc_0_f_res_294850,
                                              defunc_0_g_res_294819);
                                double defunc_0_f_res_294857 =
                                       sitofp_i64_f64(binop_p_294856);
                                double abs_res_294858 =
                                       fabs(defunc_0_f_res_294857);
                                double tmp1_294859 = abs_res_294858 / x_294816;
                                double x_294860 = tmp1_294859 * tmp1_294859;
                                double y_294861 = tmp1_294859 * x_294860;
                                double tmp2_294862 = 1.0 - y_294861;
                                double x_294863 = tmp2_294862 * tmp2_294862;
                                double tmp3_294864 = tmp2_294862 * x_294863;
                                double tmp4_294865 = defunc_0_f_res_294853 *
                                       tmp3_294864;
                                double defunc_0_f_res_294866;
                                
                                if (cond_294849) {
                                    defunc_0_f_res_294866 = 0.0;
                                } else {
                                    int64_t i_294867 = add64(x_294815,
                                                             i_297870);
                                    double defunc_0_add_arg_294868;
                                    
                                    defunc_0_add_arg_294868 =
                                        ((double *) mem_302721)[i_297877 *
                                                                n_292675 +
                                                                i_294867];
                                    defunc_0_f_res_294866 =
                                        defunc_0_add_arg_294868;
                                }
                                
                                double x_294869 = a0_294843 * tmp4_294865;
                                double defunc_9_fit_fun_res_294870 =
                                       defunc_0_f_res_294866 * x_294869;
                                double defunc_1_op_res_294847 =
                                       defunc_9_fit_fun_res_294870 +
                                       redout_297869;
                                double redout_tmp_306533 =
                                       defunc_1_op_res_294847;
                                
                                redout_297869 = redout_tmp_306533;
                            }
                            defunc_2_reduce_res_294844 = redout_297869;
                            ((double *) mem_302762.mem)[i_297877 *
                                                        l_n_m_292832 +
                                                        i_297873] =
                                defunc_2_reduce_res_294844;
                        }
                    }
                    if (memblock_set(ctx, &ext_mem_303018, &mem_302762,
                                     "mem_302762") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_303010, &mem_302758,
                                     "mem_302758") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302762, "mem_302762") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_302758, "mem_302758") != 0)
                        return 1;
                } else {
                    bool match_lit_294875 = (int64_t) 1 == d_l_292683;
                    struct memblock ext_mem_303002;
                    
                    ext_mem_303002.references = NULL;
                    
                    struct memblock ext_mem_302994;
                    
                    ext_mem_302994.references = NULL;
                    if (match_lit_294875) {
                        struct memblock mem_302809;
                        
                        mem_302809.references = NULL;
                        if (memblock_alloc(ctx, &mem_302809, bytes_300074,
                                           "mem_302809")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_302813;
                        
                        mem_302813.references = NULL;
                        if (memblock_alloc(ctx, &mem_302813, bytes_300074,
                                           "mem_302813")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_297897 = 0; i_297897 <
                             partition_sizze_292766; i_297897++) {
                            for (int64_t i_297890 = 0; i_297890 < l_n_m_292832;
                                 i_297890++) {
                                int64_t x_294888;
                                
                                x_294888 = ((int64_t *) mem_300075)[i_297897 *
                                                                    l_n_m_292832 +
                                                                    i_297890];
                                
                                double x_294889;
                                
                                x_294889 = ((double *) mem_300079)[i_297897 *
                                                                   l_n_m_292832 +
                                                                   i_297890];
                                
                                int64_t min_arg_294890 = mul64(jump_t_292685,
                                                               i_297890);
                                int64_t min_res_294891 = smin64(i_292846,
                                                                min_arg_294890);
                                int64_t defunc_0_g_res_294892 =
                                        add64((int64_t) 1, min_res_294891);
                                double defunc_2_reduce_res_294893;
                                double defunc_2_reduce_res_294894;
                                double defunc_2_reduce_res_294895;
                                double redout_297879;
                                double redout_297880;
                                double redout_297881;
                                
                                redout_297879 = 0.0;
                                redout_297880 = 0.0;
                                redout_297881 = 0.0;
                                for (int64_t i_297882 = 0; i_297882 <
                                     q_l_292680; i_297882++) {
                                    bool cond_294906 = sle64(n_292675,
                                                             i_297882);
                                    int64_t defunc_0_f_res_294907;
                                    
                                    if (cond_294906) {
                                        defunc_0_f_res_294907 = (int64_t) 0;
                                    } else {
                                        int64_t i_294908 = add64(x_294888,
                                                                 i_297882);
                                        int64_t defunc_1_add_res_294909 =
                                                add64((int64_t) 1, i_294908);
                                        
                                        defunc_0_f_res_294907 =
                                            defunc_1_add_res_294909;
                                    }
                                    
                                    double defunc_0_f_res_294910;
                                    
                                    if (cond_294906) {
                                        defunc_0_f_res_294910 = 0.0;
                                    } else {
                                        int64_t i_294911 = add64(x_294888,
                                                                 i_297882);
                                        double defunc_0_add_arg_294912;
                                        
                                        defunc_0_add_arg_294912 =
                                            ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                              (i_297897 *
                                                                               ctx_param_ext_300317 +
                                                                               i_294911 *
                                                                               ctx_param_ext_300319)];
                                        defunc_0_f_res_294910 =
                                            defunc_0_add_arg_294912;
                                    }
                                    
                                    int64_t binop_p_294913 =
                                            sub64(defunc_0_f_res_294907,
                                                  defunc_0_g_res_294892);
                                    double defunc_0_f_res_294914 =
                                           sitofp_i64_f64(binop_p_294913);
                                    double abs_res_294915 =
                                           fabs(defunc_0_f_res_294914);
                                    double tmp1_294916 = abs_res_294915 /
                                           x_294889;
                                    double x_294917 = tmp1_294916 * tmp1_294916;
                                    double y_294918 = tmp1_294916 * x_294917;
                                    double tmp2_294919 = 1.0 - y_294918;
                                    double x_294920 = tmp2_294919 * tmp2_294919;
                                    double tmp3_294921 = tmp2_294919 * x_294920;
                                    double w_j_294922 = defunc_0_f_res_294910 *
                                           tmp3_294921;
                                    double xw_j_294923 = defunc_0_f_res_294914 *
                                           w_j_294922;
                                    double x2w_j_294924 =
                                           defunc_0_f_res_294914 * xw_j_294923;
                                    double defunc_1_op_res_294898 = w_j_294922 +
                                           redout_297879;
                                    double defunc_1_op_res_294901 =
                                           xw_j_294923 + redout_297880;
                                    double defunc_1_op_res_294904 =
                                           x2w_j_294924 + redout_297881;
                                    double redout_tmp_306538 =
                                           defunc_1_op_res_294898;
                                    double redout_tmp_306539 =
                                           defunc_1_op_res_294901;
                                    double redout_tmp_306540 =
                                           defunc_1_op_res_294904;
                                    
                                    redout_297879 = redout_tmp_306538;
                                    redout_297880 = redout_tmp_306539;
                                    redout_297881 = redout_tmp_306540;
                                }
                                defunc_2_reduce_res_294893 = redout_297879;
                                defunc_2_reduce_res_294894 = redout_297880;
                                defunc_2_reduce_res_294895 = redout_297881;
                                
                                double a_294925 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_294893;
                                double b_294926 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_294894;
                                double c_294927 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_294895;
                                double x_294928 = a_294925 * c_294927;
                                double y_294929 = b_294926 * b_294926;
                                double y_294930 = x_294928 - y_294929;
                                double det1_294931 = 1.0 / y_294930;
                                double a11_294932 = c_294927 * det1_294931;
                                double x_294933 = 0.0 - b_294926;
                                double b11_294934 = det1_294931 * x_294933;
                                double c11_294935 = a_294925 * det1_294931;
                                double defunc_2_reduce_res_294936;
                                double defunc_2_reduce_res_294937;
                                double redout_297883;
                                double redout_297884;
                                
                                redout_297883 = 0.0;
                                redout_297884 = 0.0;
                                for (int64_t i_297885 = 0; i_297885 <
                                     q_l_292680; i_297885++) {
                                    bool cond_294945 = sle64(n_292675,
                                                             i_297885);
                                    int64_t defunc_0_f_res_294946;
                                    
                                    if (cond_294945) {
                                        defunc_0_f_res_294946 = (int64_t) 0;
                                    } else {
                                        int64_t i_294947 = add64(x_294888,
                                                                 i_297885);
                                        int64_t defunc_1_add_res_294948 =
                                                add64((int64_t) 1, i_294947);
                                        
                                        defunc_0_f_res_294946 =
                                            defunc_1_add_res_294948;
                                    }
                                    
                                    double defunc_0_f_res_294949;
                                    
                                    if (cond_294945) {
                                        defunc_0_f_res_294949 = 0.0;
                                    } else {
                                        int64_t i_294950 = add64(x_294888,
                                                                 i_297885);
                                        double defunc_0_add_arg_294951;
                                        
                                        defunc_0_add_arg_294951 =
                                            ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                              (i_297897 *
                                                                               ctx_param_ext_300317 +
                                                                               i_294950 *
                                                                               ctx_param_ext_300319)];
                                        defunc_0_f_res_294949 =
                                            defunc_0_add_arg_294951;
                                    }
                                    
                                    int64_t binop_p_294952 =
                                            sub64(defunc_0_f_res_294946,
                                                  defunc_0_g_res_294892);
                                    double defunc_0_f_res_294953 =
                                           sitofp_i64_f64(binop_p_294952);
                                    double abs_res_294954 =
                                           fabs(defunc_0_f_res_294953);
                                    double tmp1_294955 = abs_res_294954 /
                                           x_294889;
                                    double x_294956 = tmp1_294955 * tmp1_294955;
                                    double y_294957 = tmp1_294955 * x_294956;
                                    double tmp2_294958 = 1.0 - y_294957;
                                    double x_294959 = tmp2_294958 * tmp2_294958;
                                    double tmp3_294960 = tmp2_294958 * x_294959;
                                    double tmp4_294961 = defunc_0_f_res_294949 *
                                           tmp3_294960;
                                    double defunc_1_f_res_294962 =
                                           defunc_0_f_res_294953 * tmp4_294961;
                                    double defunc_0_f_res_294963;
                                    
                                    if (cond_294945) {
                                        defunc_0_f_res_294963 = 0.0;
                                    } else {
                                        int64_t i_294964 = add64(x_294888,
                                                                 i_297885);
                                        double defunc_0_add_arg_294965;
                                        
                                        defunc_0_add_arg_294965 =
                                            ((double *) mem_302721)[i_297897 *
                                                                    n_292675 +
                                                                    i_294964];
                                        defunc_0_f_res_294963 =
                                            defunc_0_add_arg_294965;
                                    }
                                    
                                    double x_294966 = a11_294932 * tmp4_294961;
                                    double y_294967 = b11_294934 *
                                           defunc_1_f_res_294962;
                                    double x_294968 = x_294966 + y_294967;
                                    double defunc_9_fit_fun_res_294969 =
                                           defunc_0_f_res_294963 * x_294968;
                                    double x_294970 = b11_294934 * tmp4_294961;
                                    double y_294971 = c11_294935 *
                                           defunc_1_f_res_294962;
                                    double x_294972 = x_294970 + y_294971;
                                    double defunc_9_slope_fun_res_294973 =
                                           defunc_0_f_res_294963 * x_294972;
                                    double defunc_1_op_res_294940 =
                                           defunc_9_fit_fun_res_294969 +
                                           redout_297883;
                                    double defunc_1_op_res_294943 =
                                           defunc_9_slope_fun_res_294973 +
                                           redout_297884;
                                    double redout_tmp_306541 =
                                           defunc_1_op_res_294940;
                                    double redout_tmp_306542 =
                                           defunc_1_op_res_294943;
                                    
                                    redout_297883 = redout_tmp_306541;
                                    redout_297884 = redout_tmp_306542;
                                }
                                defunc_2_reduce_res_294936 = redout_297883;
                                defunc_2_reduce_res_294937 = redout_297884;
                                ((double *) mem_302809.mem)[i_297897 *
                                                            l_n_m_292832 +
                                                            i_297890] =
                                    defunc_2_reduce_res_294936;
                                ((double *) mem_302813.mem)[i_297897 *
                                                            l_n_m_292832 +
                                                            i_297890] =
                                    defunc_2_reduce_res_294937;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_303002, &mem_302809,
                                         "mem_302809") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_302994, &mem_302813,
                                         "mem_302813") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302813, "mem_302813") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302809, "mem_302809") != 0)
                            return 1;
                    } else {
                        struct memblock mem_302903;
                        
                        mem_302903.references = NULL;
                        if (memblock_alloc(ctx, &mem_302903, bytes_300074,
                                           "mem_302903")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_302907;
                        
                        mem_302907.references = NULL;
                        if (memblock_alloc(ctx, &mem_302907, bytes_300074,
                                           "mem_302907")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_297920 = 0; i_297920 <
                             partition_sizze_292766; i_297920++) {
                            for (int64_t i_297913 = 0; i_297913 < l_n_m_292832;
                                 i_297913++) {
                                int64_t x_294988;
                                
                                x_294988 = ((int64_t *) mem_300075)[i_297920 *
                                                                    l_n_m_292832 +
                                                                    i_297913];
                                
                                double x_294989;
                                
                                x_294989 = ((double *) mem_300079)[i_297920 *
                                                                   l_n_m_292832 +
                                                                   i_297913];
                                
                                int64_t min_arg_294990 = mul64(jump_t_292685,
                                                               i_297913);
                                int64_t min_res_294991 = smin64(i_292846,
                                                                min_arg_294990);
                                int64_t defunc_0_g_res_294992 =
                                        add64((int64_t) 1, min_res_294991);
                                double defunc_2_reduce_res_294993;
                                double defunc_2_reduce_res_294994;
                                double defunc_2_reduce_res_294995;
                                double defunc_2_reduce_res_294996;
                                double defunc_2_reduce_res_294997;
                                double redout_297900;
                                double redout_297901;
                                double redout_297902;
                                double redout_297903;
                                double redout_297904;
                                
                                redout_297900 = 0.0;
                                redout_297901 = 0.0;
                                redout_297902 = 0.0;
                                redout_297903 = 0.0;
                                redout_297904 = 0.0;
                                for (int64_t i_297905 = 0; i_297905 <
                                     q_l_292680; i_297905++) {
                                    bool cond_295014 = sle64(n_292675,
                                                             i_297905);
                                    int64_t defunc_0_f_res_295015;
                                    
                                    if (cond_295014) {
                                        defunc_0_f_res_295015 = (int64_t) 0;
                                    } else {
                                        int64_t i_295016 = add64(x_294988,
                                                                 i_297905);
                                        int64_t defunc_1_add_res_295017 =
                                                add64((int64_t) 1, i_295016);
                                        
                                        defunc_0_f_res_295015 =
                                            defunc_1_add_res_295017;
                                    }
                                    
                                    double defunc_0_f_res_295018;
                                    
                                    if (cond_295014) {
                                        defunc_0_f_res_295018 = 0.0;
                                    } else {
                                        int64_t i_295019 = add64(x_294988,
                                                                 i_297905);
                                        double defunc_0_add_arg_295020;
                                        
                                        defunc_0_add_arg_295020 =
                                            ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                              (i_297920 *
                                                                               ctx_param_ext_300317 +
                                                                               i_295019 *
                                                                               ctx_param_ext_300319)];
                                        defunc_0_f_res_295018 =
                                            defunc_0_add_arg_295020;
                                    }
                                    
                                    int64_t binop_p_295021 =
                                            sub64(defunc_0_f_res_295015,
                                                  defunc_0_g_res_294992);
                                    double defunc_0_f_res_295022 =
                                           sitofp_i64_f64(binop_p_295021);
                                    double abs_res_295023 =
                                           fabs(defunc_0_f_res_295022);
                                    double tmp1_295024 = abs_res_295023 /
                                           x_294989;
                                    double x_295025 = tmp1_295024 * tmp1_295024;
                                    double y_295026 = tmp1_295024 * x_295025;
                                    double tmp2_295027 = 1.0 - y_295026;
                                    double x_295028 = tmp2_295027 * tmp2_295027;
                                    double tmp3_295029 = tmp2_295027 * x_295028;
                                    double w_j_295030 = defunc_0_f_res_295018 *
                                           tmp3_295029;
                                    double xw_j_295031 = defunc_0_f_res_295022 *
                                           w_j_295030;
                                    double x2w_j_295032 =
                                           defunc_0_f_res_295022 * xw_j_295031;
                                    double x3w_j_295033 =
                                           defunc_0_f_res_295022 * x2w_j_295032;
                                    double x4w_j_295034 =
                                           defunc_0_f_res_295022 * x3w_j_295033;
                                    double defunc_1_op_res_295000 = w_j_295030 +
                                           redout_297900;
                                    double defunc_1_op_res_295003 =
                                           xw_j_295031 + redout_297901;
                                    double defunc_1_op_res_295006 =
                                           x2w_j_295032 + redout_297902;
                                    double defunc_1_op_res_295009 =
                                           x3w_j_295033 + redout_297903;
                                    double defunc_1_op_res_295012 =
                                           x4w_j_295034 + redout_297904;
                                    double redout_tmp_306547 =
                                           defunc_1_op_res_295000;
                                    double redout_tmp_306548 =
                                           defunc_1_op_res_295003;
                                    double redout_tmp_306549 =
                                           defunc_1_op_res_295006;
                                    double redout_tmp_306550 =
                                           defunc_1_op_res_295009;
                                    double redout_tmp_306551 =
                                           defunc_1_op_res_295012;
                                    
                                    redout_297900 = redout_tmp_306547;
                                    redout_297901 = redout_tmp_306548;
                                    redout_297902 = redout_tmp_306549;
                                    redout_297903 = redout_tmp_306550;
                                    redout_297904 = redout_tmp_306551;
                                }
                                defunc_2_reduce_res_294993 = redout_297900;
                                defunc_2_reduce_res_294994 = redout_297901;
                                defunc_2_reduce_res_294995 = redout_297902;
                                defunc_2_reduce_res_294996 = redout_297903;
                                defunc_2_reduce_res_294997 = redout_297904;
                                
                                double a_295035 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_294993;
                                double b_295036 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_294994;
                                double c_295037 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_294995;
                                double d_295038 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_294996;
                                double e_295039 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_294997;
                                double x_295040 = c_295037 * e_295039;
                                double y_295041 = d_295038 * d_295038;
                                double a12_295042 = x_295040 - y_295041;
                                double x_295043 = c_295037 * d_295038;
                                double y_295044 = b_295036 * e_295039;
                                double b12_295045 = x_295043 - y_295044;
                                double x_295046 = b_295036 * d_295038;
                                double y_295047 = c_295037 * c_295037;
                                double c12_295048 = x_295046 - y_295047;
                                double x_295049 = a_295035 * e_295039;
                                double b2_295050 = x_295049 - y_295047;
                                double x_295051 = b_295036 * c_295037;
                                double y_295052 = a_295035 * d_295038;
                                double c2_295053 = x_295051 - y_295052;
                                double x_295054 = a_295035 * a12_295042;
                                double y_295055 = b_295036 * b12_295045;
                                double x_295056 = x_295054 + y_295055;
                                double y_295057 = c_295037 * c12_295048;
                                double y_295058 = x_295056 + y_295057;
                                double det_295059 = 1.0 / y_295058;
                                double a12_295060 = a12_295042 * det_295059;
                                double b12_295061 = b12_295045 * det_295059;
                                double c12_295062 = c12_295048 * det_295059;
                                double b2_295063 = b2_295050 * det_295059;
                                double c2_295064 = c2_295053 * det_295059;
                                double defunc_2_reduce_res_295065;
                                double defunc_2_reduce_res_295066;
                                double redout_297906;
                                double redout_297907;
                                
                                redout_297906 = 0.0;
                                redout_297907 = 0.0;
                                for (int64_t i_297908 = 0; i_297908 <
                                     q_l_292680; i_297908++) {
                                    bool cond_295074 = sle64(n_292675,
                                                             i_297908);
                                    int64_t defunc_0_f_res_295075;
                                    
                                    if (cond_295074) {
                                        defunc_0_f_res_295075 = (int64_t) 0;
                                    } else {
                                        int64_t i_295076 = add64(x_294988,
                                                                 i_297908);
                                        int64_t defunc_1_add_res_295077 =
                                                add64((int64_t) 1, i_295076);
                                        
                                        defunc_0_f_res_295075 =
                                            defunc_1_add_res_295077;
                                    }
                                    
                                    double defunc_0_f_res_295078;
                                    
                                    if (cond_295074) {
                                        defunc_0_f_res_295078 = 0.0;
                                    } else {
                                        int64_t i_295079 = add64(x_294988,
                                                                 i_297908);
                                        double defunc_0_add_arg_295080;
                                        
                                        defunc_0_add_arg_295080 =
                                            ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                              (i_297920 *
                                                                               ctx_param_ext_300317 +
                                                                               i_295079 *
                                                                               ctx_param_ext_300319)];
                                        defunc_0_f_res_295078 =
                                            defunc_0_add_arg_295080;
                                    }
                                    
                                    int64_t binop_p_295081 =
                                            sub64(defunc_0_f_res_295075,
                                                  defunc_0_g_res_294992);
                                    double defunc_0_f_res_295082 =
                                           sitofp_i64_f64(binop_p_295081);
                                    double abs_res_295083 =
                                           fabs(defunc_0_f_res_295082);
                                    double tmp1_295084 = abs_res_295083 /
                                           x_294989;
                                    double x_295085 = tmp1_295084 * tmp1_295084;
                                    double y_295086 = tmp1_295084 * x_295085;
                                    double tmp2_295087 = 1.0 - y_295086;
                                    double x_295088 = tmp2_295087 * tmp2_295087;
                                    double tmp3_295089 = tmp2_295087 * x_295088;
                                    double tmp4_295090 = defunc_0_f_res_295078 *
                                           tmp3_295089;
                                    double defunc_1_f_res_295091 =
                                           defunc_0_f_res_295082 * tmp4_295090;
                                    double defunc_1_f_res_295092 =
                                           defunc_0_f_res_295082 *
                                           defunc_1_f_res_295091;
                                    double defunc_0_f_res_295093;
                                    
                                    if (cond_295074) {
                                        defunc_0_f_res_295093 = 0.0;
                                    } else {
                                        int64_t i_295094 = add64(x_294988,
                                                                 i_297908);
                                        double defunc_0_add_arg_295095;
                                        
                                        defunc_0_add_arg_295095 =
                                            ((double *) mem_302721)[i_297920 *
                                                                    n_292675 +
                                                                    i_295094];
                                        defunc_0_f_res_295093 =
                                            defunc_0_add_arg_295095;
                                    }
                                    
                                    double x_295096 = a12_295060 * tmp4_295090;
                                    double y_295097 = b12_295061 *
                                           defunc_1_f_res_295091;
                                    double x_295098 = x_295096 + y_295097;
                                    double y_295099 = c12_295062 *
                                           defunc_1_f_res_295092;
                                    double x_295100 = x_295098 + y_295099;
                                    double defunc_9_fit_fun_res_295101 =
                                           defunc_0_f_res_295093 * x_295100;
                                    double x_295102 = b12_295061 * tmp4_295090;
                                    double y_295103 = b2_295063 *
                                           defunc_1_f_res_295091;
                                    double x_295104 = x_295102 + y_295103;
                                    double y_295105 = c2_295064 *
                                           defunc_1_f_res_295092;
                                    double x_295106 = x_295104 + y_295105;
                                    double defunc_9_slope_fun_res_295107 =
                                           defunc_0_f_res_295093 * x_295106;
                                    double defunc_1_op_res_295069 =
                                           defunc_9_fit_fun_res_295101 +
                                           redout_297906;
                                    double defunc_1_op_res_295072 =
                                           defunc_9_slope_fun_res_295107 +
                                           redout_297907;
                                    double redout_tmp_306552 =
                                           defunc_1_op_res_295069;
                                    double redout_tmp_306553 =
                                           defunc_1_op_res_295072;
                                    
                                    redout_297906 = redout_tmp_306552;
                                    redout_297907 = redout_tmp_306553;
                                }
                                defunc_2_reduce_res_295065 = redout_297906;
                                defunc_2_reduce_res_295066 = redout_297907;
                                ((double *) mem_302903.mem)[i_297920 *
                                                            l_n_m_292832 +
                                                            i_297913] =
                                    defunc_2_reduce_res_295065;
                                ((double *) mem_302907.mem)[i_297920 *
                                                            l_n_m_292832 +
                                                            i_297913] =
                                    defunc_2_reduce_res_295066;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_303002, &mem_302903,
                                         "mem_302903") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_302994, &mem_302907,
                                         "mem_302907") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302907, "mem_302907") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_302903, "mem_302903") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_303018, &ext_mem_303002,
                                     "ext_mem_303002") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_303010, &ext_mem_302994,
                                     "ext_mem_302994") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302994,
                                       "ext_mem_302994") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303002,
                                       "ext_mem_303002") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_303697, &ext_mem_303018,
                                 "ext_mem_303018") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_303689, &ext_mem_303010,
                                 "ext_mem_303010") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_303010, "ext_mem_303010") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_303018, "ext_mem_303018") != 0)
                    return 1;
            } else {
                bool cond_295112 = sle64(jump_threshold_2_292690,
                                         jump_l_292686);
                bool cond_t_res_295113 = slt64(q_l_292680,
                                               q_threshold_1_292691);
                bool x_295114 = cond_295112 && cond_t_res_295113;
                struct memblock ext_mem_303681;
                
                ext_mem_303681.references = NULL;
                
                struct memblock ext_mem_303673;
                
                ext_mem_303673.references = NULL;
                if (x_295114) {
                    bool match_lit_295117 = (int64_t) 0 == d_l_292683;
                    int64_t binop_y_303055 = (int64_t) 8 * q_l_292680;
                    int64_t bytes_303056 = smax64((int64_t) 0, binop_y_303055);
                    struct memblock ext_mem_303394;
                    
                    ext_mem_303394.references = NULL;
                    
                    struct memblock ext_mem_303386;
                    
                    ext_mem_303386.references = NULL;
                    if (match_lit_295117) {
                        struct memblock mem_303029;
                        
                        mem_303029.references = NULL;
                        if (memblock_alloc(ctx, &mem_303029, bytes_300074,
                                           "mem_303029")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_306554 = 0; i_306554 <
                             partition_sizze_292766; i_306554++) {
                            for (int64_t i_306555 = 0; i_306555 < l_n_m_292832;
                                 i_306555++) {
                                ((double *) mem_303029.mem)[i_306554 *
                                                            l_n_m_292832 +
                                                            i_306555] = 0.0;
                            }
                        }
                        
                        struct memblock mem_303033;
                        
                        mem_303033.references = NULL;
                        if (memblock_alloc(ctx, &mem_303033, bytes_300074,
                                           "mem_303033")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_303057_cached_sizze_306859 <
                            (size_t) bytes_303056) {
                            mem_303057 = realloc(mem_303057, bytes_303056);
                            mem_303057_cached_sizze_306859 = bytes_303056;
                        }
                        for (int64_t i_297936 = 0; i_297936 <
                             partition_sizze_292766; i_297936++) {
                            for (int64_t i_297932 = 0; i_297932 < l_n_m_292832;
                                 i_297932++) {
                                int64_t x_295129;
                                
                                x_295129 = ((int64_t *) mem_300075)[i_297936 *
                                                                    l_n_m_292832 +
                                                                    i_297932];
                                
                                double x_295130;
                                
                                x_295130 = ((double *) mem_300079)[i_297936 *
                                                                   l_n_m_292832 +
                                                                   i_297932];
                                
                                int64_t min_arg_295131 = mul64(jump_t_292685,
                                                               i_297932);
                                int64_t min_res_295132 = smin64(i_292846,
                                                                min_arg_295131);
                                int64_t defunc_0_g_res_295133 =
                                        add64((int64_t) 1, min_res_295132);
                                double defunc_2_reduce_res_295134;
                                double redout_297924 = 0.0;
                                
                                for (int64_t i_297926 = 0; i_297926 <
                                     q_l_292680; i_297926++) {
                                    bool cond_295140 = sle64(n_292675,
                                                             i_297926);
                                    int64_t defunc_0_f_res_295141;
                                    
                                    if (cond_295140) {
                                        defunc_0_f_res_295141 = (int64_t) 0;
                                    } else {
                                        int64_t i_295142 = add64(x_295129,
                                                                 i_297926);
                                        int64_t defunc_1_add_res_295143 =
                                                add64((int64_t) 1, i_295142);
                                        
                                        defunc_0_f_res_295141 =
                                            defunc_1_add_res_295143;
                                    }
                                    
                                    double defunc_0_f_res_295144;
                                    
                                    if (cond_295140) {
                                        defunc_0_f_res_295144 = 0.0;
                                    } else {
                                        int64_t i_295145 = add64(x_295129,
                                                                 i_297926);
                                        double defunc_0_add_arg_295146;
                                        
                                        defunc_0_add_arg_295146 =
                                            ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                              (i_297936 *
                                                                               ctx_param_ext_300317 +
                                                                               i_295145 *
                                                                               ctx_param_ext_300319)];
                                        defunc_0_f_res_295144 =
                                            defunc_0_add_arg_295146;
                                    }
                                    
                                    int64_t binop_p_295147 =
                                            sub64(defunc_0_f_res_295141,
                                                  defunc_0_g_res_295133);
                                    double defunc_0_f_res_295148 =
                                           sitofp_i64_f64(binop_p_295147);
                                    double abs_res_295149 =
                                           fabs(defunc_0_f_res_295148);
                                    double tmp1_295150 = abs_res_295149 /
                                           x_295130;
                                    double x_295151 = tmp1_295150 * tmp1_295150;
                                    double y_295152 = tmp1_295150 * x_295151;
                                    double tmp2_295153 = 1.0 - y_295152;
                                    double x_295154 = tmp2_295153 * tmp2_295153;
                                    double tmp3_295155 = tmp2_295153 * x_295154;
                                    double tmp4_295156 = defunc_0_f_res_295144 *
                                           tmp3_295155;
                                    double defunc_1_op_res_295138 =
                                           tmp4_295156 + redout_297924;
                                    
                                    ((double *) mem_303057)[i_297926] =
                                        tmp4_295156;
                                    
                                    double redout_tmp_306558 =
                                           defunc_1_op_res_295138;
                                    
                                    redout_297924 = redout_tmp_306558;
                                }
                                defunc_2_reduce_res_295134 = redout_297924;
                                
                                double a_295157 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_295134;
                                double a0_295158 = 1.0 / a_295157;
                                double defunc_2_reduce_res_295159;
                                double redout_297928 = 0.0;
                                
                                for (int64_t i_297929 = 0; i_297929 <
                                     q_l_292680; i_297929++) {
                                    double x_295164;
                                    
                                    x_295164 =
                                        ((double *) mem_303057)[i_297929];
                                    
                                    bool cond_295165 = sle64(n_292675,
                                                             i_297929);
                                    double defunc_0_f_res_295166;
                                    
                                    if (cond_295165) {
                                        defunc_0_f_res_295166 = 0.0;
                                    } else {
                                        int64_t i_295167 = add64(x_295129,
                                                                 i_297929);
                                        double defunc_0_add_arg_295168;
                                        
                                        defunc_0_add_arg_295168 =
                                            ((double *) mem_302721)[i_297936 *
                                                                    n_292675 +
                                                                    i_295167];
                                        defunc_0_f_res_295166 =
                                            defunc_0_add_arg_295168;
                                    }
                                    
                                    double x_295169 = a0_295158 * x_295164;
                                    double defunc_9_fit_fun_res_295170 =
                                           defunc_0_f_res_295166 * x_295169;
                                    double defunc_1_op_res_295162 =
                                           defunc_9_fit_fun_res_295170 +
                                           redout_297928;
                                    double redout_tmp_306560 =
                                           defunc_1_op_res_295162;
                                    
                                    redout_297928 = redout_tmp_306560;
                                }
                                defunc_2_reduce_res_295159 = redout_297928;
                                ((double *) mem_303033.mem)[i_297936 *
                                                            l_n_m_292832 +
                                                            i_297932] =
                                    defunc_2_reduce_res_295159;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_303394, &mem_303033,
                                         "mem_303033") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_303386, &mem_303029,
                                         "mem_303029") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303033, "mem_303033") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303029, "mem_303029") != 0)
                            return 1;
                    } else {
                        bool match_lit_295175 = (int64_t) 1 == d_l_292683;
                        int64_t binop_y_303142 = (int64_t) 8 * q_l_292680;
                        int64_t bytes_303143 = smax64((int64_t) 0,
                                                      binop_y_303142);
                        int64_t binop_y_303266 = (int64_t) 8 * q_l_292680;
                        int64_t bytes_303267 = smax64((int64_t) 0,
                                                      binop_y_303266);
                        struct memblock ext_mem_303378;
                        
                        ext_mem_303378.references = NULL;
                        
                        struct memblock ext_mem_303370;
                        
                        ext_mem_303370.references = NULL;
                        if (match_lit_295175) {
                            struct memblock mem_303095;
                            
                            mem_303095.references = NULL;
                            if (memblock_alloc(ctx, &mem_303095, bytes_300074,
                                               "mem_303095")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_303099;
                            
                            mem_303099.references = NULL;
                            if (memblock_alloc(ctx, &mem_303099, bytes_300074,
                                               "mem_303099")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_303144_cached_sizze_306860 <
                                (size_t) bytes_303143) {
                                mem_303144 = realloc(mem_303144, bytes_303143);
                                mem_303144_cached_sizze_306860 = bytes_303143;
                            }
                            if (mem_303147_cached_sizze_306861 <
                                (size_t) bytes_303143) {
                                mem_303147 = realloc(mem_303147, bytes_303143);
                                mem_303147_cached_sizze_306861 = bytes_303143;
                            }
                            for (int64_t i_297962 = 0; i_297962 <
                                 partition_sizze_292766; i_297962++) {
                                for (int64_t i_297955 = 0; i_297955 <
                                     l_n_m_292832; i_297955++) {
                                    int64_t x_295188;
                                    
                                    x_295188 =
                                        ((int64_t *) mem_300075)[i_297962 *
                                                                 l_n_m_292832 +
                                                                 i_297955];
                                    
                                    double x_295189;
                                    
                                    x_295189 =
                                        ((double *) mem_300079)[i_297962 *
                                                                l_n_m_292832 +
                                                                i_297955];
                                    
                                    int64_t min_arg_295190 =
                                            mul64(jump_t_292685, i_297955);
                                    int64_t min_res_295191 = smin64(i_292846,
                                                                    min_arg_295190);
                                    int64_t defunc_0_g_res_295192 =
                                            add64((int64_t) 1, min_res_295191);
                                    double defunc_2_reduce_res_295215;
                                    double defunc_2_reduce_res_295216;
                                    double defunc_2_reduce_res_295217;
                                    double redout_297940;
                                    double redout_297941;
                                    double redout_297942;
                                    
                                    redout_297940 = 0.0;
                                    redout_297941 = 0.0;
                                    redout_297942 = 0.0;
                                    for (int64_t i_297945 = 0; i_297945 <
                                         q_l_292680; i_297945++) {
                                        bool cond_295230 = sle64(n_292675,
                                                                 i_297945);
                                        int64_t defunc_0_f_res_295231;
                                        
                                        if (cond_295230) {
                                            defunc_0_f_res_295231 = (int64_t) 0;
                                        } else {
                                            int64_t i_295232 = add64(x_295188,
                                                                     i_297945);
                                            int64_t defunc_1_add_res_295233 =
                                                    add64((int64_t) 1,
                                                          i_295232);
                                            
                                            defunc_0_f_res_295231 =
                                                defunc_1_add_res_295233;
                                        }
                                        
                                        double defunc_0_f_res_295234;
                                        
                                        if (cond_295230) {
                                            defunc_0_f_res_295234 = 0.0;
                                        } else {
                                            int64_t i_295235 = add64(x_295188,
                                                                     i_297945);
                                            double defunc_0_add_arg_295236;
                                            
                                            defunc_0_add_arg_295236 =
                                                ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                                  (i_297962 *
                                                                                   ctx_param_ext_300317 +
                                                                                   i_295235 *
                                                                                   ctx_param_ext_300319)];
                                            defunc_0_f_res_295234 =
                                                defunc_0_add_arg_295236;
                                        }
                                        
                                        int64_t binop_p_295237 =
                                                sub64(defunc_0_f_res_295231,
                                                      defunc_0_g_res_295192);
                                        double defunc_0_f_res_295238 =
                                               sitofp_i64_f64(binop_p_295237);
                                        double abs_res_295239 =
                                               fabs(defunc_0_f_res_295238);
                                        double tmp1_295240 = abs_res_295239 /
                                               x_295189;
                                        double x_295241 = tmp1_295240 *
                                               tmp1_295240;
                                        double y_295242 = tmp1_295240 *
                                               x_295241;
                                        double tmp2_295243 = 1.0 - y_295242;
                                        double x_295244 = tmp2_295243 *
                                               tmp2_295243;
                                        double tmp3_295245 = tmp2_295243 *
                                               x_295244;
                                        double tmp4_295246 =
                                               defunc_0_f_res_295234 *
                                               tmp3_295245;
                                        double defunc_1_f_res_295247 =
                                               defunc_0_f_res_295238 *
                                               tmp4_295246;
                                        double defunc_1_f_res_295248 =
                                               defunc_0_f_res_295238 *
                                               defunc_1_f_res_295247;
                                        double defunc_1_op_res_295222 =
                                               tmp4_295246 + redout_297940;
                                        double defunc_1_op_res_295225 =
                                               defunc_1_f_res_295247 +
                                               redout_297941;
                                        double defunc_1_op_res_295228 =
                                               defunc_1_f_res_295248 +
                                               redout_297942;
                                        
                                        ((double *) mem_303144)[i_297945] =
                                            defunc_1_f_res_295247;
                                        ((double *) mem_303147)[i_297945] =
                                            tmp4_295246;
                                        
                                        double redout_tmp_306565 =
                                               defunc_1_op_res_295222;
                                        double redout_tmp_306566 =
                                               defunc_1_op_res_295225;
                                        double redout_tmp_306567 =
                                               defunc_1_op_res_295228;
                                        
                                        redout_297940 = redout_tmp_306565;
                                        redout_297941 = redout_tmp_306566;
                                        redout_297942 = redout_tmp_306567;
                                    }
                                    defunc_2_reduce_res_295215 = redout_297940;
                                    defunc_2_reduce_res_295216 = redout_297941;
                                    defunc_2_reduce_res_295217 = redout_297942;
                                    
                                    double a_295254 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295215;
                                    double b_295255 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295216;
                                    double c_295256 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295217;
                                    double x_295257 = a_295254 * c_295256;
                                    double y_295258 = b_295255 * b_295255;
                                    double y_295259 = x_295257 - y_295258;
                                    double det1_295260 = 1.0 / y_295259;
                                    double a11_295261 = c_295256 * det1_295260;
                                    double x_295262 = 0.0 - b_295255;
                                    double b11_295263 = det1_295260 * x_295262;
                                    double c11_295264 = a_295254 * det1_295260;
                                    double defunc_2_reduce_res_295265;
                                    double defunc_2_reduce_res_295266;
                                    double redout_297948;
                                    double redout_297949;
                                    
                                    redout_297948 = 0.0;
                                    redout_297949 = 0.0;
                                    for (int64_t i_297950 = 0; i_297950 <
                                         q_l_292680; i_297950++) {
                                        double x_295274;
                                        
                                        x_295274 =
                                            ((double *) mem_303147)[i_297950];
                                        
                                        double x_295275;
                                        
                                        x_295275 =
                                            ((double *) mem_303144)[i_297950];
                                        
                                        bool cond_295276 = sle64(n_292675,
                                                                 i_297950);
                                        double defunc_0_f_res_295277;
                                        
                                        if (cond_295276) {
                                            defunc_0_f_res_295277 = 0.0;
                                        } else {
                                            int64_t i_295278 = add64(x_295188,
                                                                     i_297950);
                                            double defunc_0_add_arg_295279;
                                            
                                            defunc_0_add_arg_295279 =
                                                ((double *) mem_302721)[i_297962 *
                                                                        n_292675 +
                                                                        i_295278];
                                            defunc_0_f_res_295277 =
                                                defunc_0_add_arg_295279;
                                        }
                                        
                                        double x_295280 = a11_295261 * x_295274;
                                        double y_295281 = b11_295263 * x_295275;
                                        double x_295282 = x_295280 + y_295281;
                                        double defunc_9_fit_fun_res_295283 =
                                               defunc_0_f_res_295277 * x_295282;
                                        double x_295284 = b11_295263 * x_295274;
                                        double y_295285 = c11_295264 * x_295275;
                                        double x_295286 = x_295284 + y_295285;
                                        double defunc_9_slope_fun_res_295287 =
                                               defunc_0_f_res_295277 * x_295286;
                                        double defunc_1_op_res_295269 =
                                               defunc_9_fit_fun_res_295283 +
                                               redout_297948;
                                        double defunc_1_op_res_295272 =
                                               defunc_9_slope_fun_res_295287 +
                                               redout_297949;
                                        double redout_tmp_306570 =
                                               defunc_1_op_res_295269;
                                        double redout_tmp_306571 =
                                               defunc_1_op_res_295272;
                                        
                                        redout_297948 = redout_tmp_306570;
                                        redout_297949 = redout_tmp_306571;
                                    }
                                    defunc_2_reduce_res_295265 = redout_297948;
                                    defunc_2_reduce_res_295266 = redout_297949;
                                    ((double *) mem_303095.mem)[i_297962 *
                                                                l_n_m_292832 +
                                                                i_297955] =
                                        defunc_2_reduce_res_295265;
                                    ((double *) mem_303099.mem)[i_297962 *
                                                                l_n_m_292832 +
                                                                i_297955] =
                                        defunc_2_reduce_res_295266;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_303378, &mem_303095,
                                             "mem_303095") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_303370, &mem_303099,
                                             "mem_303099") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303099,
                                               "mem_303099") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303095,
                                               "mem_303095") != 0)
                                return 1;
                        } else {
                            struct memblock mem_303219;
                            
                            mem_303219.references = NULL;
                            if (memblock_alloc(ctx, &mem_303219, bytes_300074,
                                               "mem_303219")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_303223;
                            
                            mem_303223.references = NULL;
                            if (memblock_alloc(ctx, &mem_303223, bytes_300074,
                                               "mem_303223")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_303268_cached_sizze_306862 <
                                (size_t) bytes_303267) {
                                mem_303268 = realloc(mem_303268, bytes_303267);
                                mem_303268_cached_sizze_306862 = bytes_303267;
                            }
                            if (mem_303271_cached_sizze_306863 <
                                (size_t) bytes_303267) {
                                mem_303271 = realloc(mem_303271, bytes_303267);
                                mem_303271_cached_sizze_306863 = bytes_303267;
                            }
                            if (mem_303298_cached_sizze_306864 <
                                (size_t) bytes_303267) {
                                mem_303298 = realloc(mem_303298, bytes_303267);
                                mem_303298_cached_sizze_306864 = bytes_303267;
                            }
                            if (mem_303301_cached_sizze_306865 <
                                (size_t) bytes_303267) {
                                mem_303301 = realloc(mem_303301, bytes_303267);
                                mem_303301_cached_sizze_306865 = bytes_303267;
                            }
                            for (int64_t i_297998 = 0; i_297998 <
                                 partition_sizze_292766; i_297998++) {
                                for (int64_t i_297991 = 0; i_297991 <
                                     l_n_m_292832; i_297991++) {
                                    int64_t x_295302;
                                    
                                    x_295302 =
                                        ((int64_t *) mem_300075)[i_297998 *
                                                                 l_n_m_292832 +
                                                                 i_297991];
                                    
                                    double x_295303;
                                    
                                    x_295303 =
                                        ((double *) mem_300079)[i_297998 *
                                                                l_n_m_292832 +
                                                                i_297991];
                                    
                                    int64_t min_arg_295304 =
                                            mul64(jump_t_292685, i_297991);
                                    int64_t min_res_295305 = smin64(i_292846,
                                                                    min_arg_295304);
                                    int64_t defunc_0_g_res_295306 =
                                            add64((int64_t) 1, min_res_295305);
                                    
                                    for (int64_t i_297969 = 0; i_297969 <
                                         q_l_292680; i_297969++) {
                                        bool cond_295310 = sle64(n_292675,
                                                                 i_297969);
                                        int64_t defunc_0_f_res_295311;
                                        
                                        if (cond_295310) {
                                            defunc_0_f_res_295311 = (int64_t) 0;
                                        } else {
                                            int64_t i_295312 = add64(x_295302,
                                                                     i_297969);
                                            int64_t defunc_1_add_res_295313 =
                                                    add64((int64_t) 1,
                                                          i_295312);
                                            
                                            defunc_0_f_res_295311 =
                                                defunc_1_add_res_295313;
                                        }
                                        
                                        double defunc_0_f_res_295314;
                                        
                                        if (cond_295310) {
                                            defunc_0_f_res_295314 = 0.0;
                                        } else {
                                            int64_t i_295315 = add64(x_295302,
                                                                     i_297969);
                                            double defunc_0_add_arg_295316;
                                            
                                            defunc_0_add_arg_295316 =
                                                ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                                  (i_297998 *
                                                                                   ctx_param_ext_300317 +
                                                                                   i_295315 *
                                                                                   ctx_param_ext_300319)];
                                            defunc_0_f_res_295314 =
                                                defunc_0_add_arg_295316;
                                        }
                                        
                                        int64_t binop_p_295317 =
                                                sub64(defunc_0_f_res_295311,
                                                      defunc_0_g_res_295306);
                                        double defunc_0_f_res_295318 =
                                               sitofp_i64_f64(binop_p_295317);
                                        double abs_res_295319 =
                                               fabs(defunc_0_f_res_295318);
                                        double tmp1_295320 = abs_res_295319 /
                                               x_295303;
                                        double x_295321 = tmp1_295320 *
                                               tmp1_295320;
                                        double y_295322 = tmp1_295320 *
                                               x_295321;
                                        double tmp2_295323 = 1.0 - y_295322;
                                        double x_295324 = tmp2_295323 *
                                               tmp2_295323;
                                        double tmp3_295325 = tmp2_295323 *
                                               x_295324;
                                        double tmp4_295326 =
                                               defunc_0_f_res_295314 *
                                               tmp3_295325;
                                        
                                        ((double *) mem_303268)[i_297969] =
                                            defunc_0_f_res_295318;
                                        ((double *) mem_303271)[i_297969] =
                                            tmp4_295326;
                                    }
                                    
                                    double defunc_2_reduce_res_295333;
                                    double defunc_2_reduce_res_295334;
                                    double defunc_2_reduce_res_295335;
                                    double defunc_2_reduce_res_295336;
                                    double defunc_2_reduce_res_295337;
                                    double redout_297974;
                                    double redout_297975;
                                    double redout_297976;
                                    double redout_297977;
                                    double redout_297978;
                                    
                                    redout_297974 = 0.0;
                                    redout_297975 = 0.0;
                                    redout_297976 = 0.0;
                                    redout_297977 = 0.0;
                                    redout_297978 = 0.0;
                                    for (int64_t i_297981 = 0; i_297981 <
                                         q_l_292680; i_297981++) {
                                        double x_295355;
                                        
                                        x_295355 =
                                            ((double *) mem_303268)[i_297981];
                                        
                                        double x_295356;
                                        
                                        x_295356 =
                                            ((double *) mem_303271)[i_297981];
                                        
                                        double defunc_1_f_res_295357 =
                                               x_295355 * x_295356;
                                        double defunc_1_f_res_295358 =
                                               x_295355 * defunc_1_f_res_295357;
                                        double defunc_1_f_res_295359 =
                                               x_295355 * defunc_1_f_res_295358;
                                        double defunc_1_f_res_295360 =
                                               x_295355 * defunc_1_f_res_295359;
                                        double defunc_1_op_res_295342 =
                                               x_295356 + redout_297974;
                                        double defunc_1_op_res_295345 =
                                               defunc_1_f_res_295357 +
                                               redout_297975;
                                        double defunc_1_op_res_295348 =
                                               defunc_1_f_res_295358 +
                                               redout_297976;
                                        double defunc_1_op_res_295351 =
                                               defunc_1_f_res_295359 +
                                               redout_297977;
                                        double defunc_1_op_res_295354 =
                                               defunc_1_f_res_295360 +
                                               redout_297978;
                                        
                                        ((double *) mem_303298)[i_297981] =
                                            defunc_1_f_res_295358;
                                        ((double *) mem_303301)[i_297981] =
                                            defunc_1_f_res_295357;
                                        
                                        double redout_tmp_306578 =
                                               defunc_1_op_res_295342;
                                        double redout_tmp_306579 =
                                               defunc_1_op_res_295345;
                                        double redout_tmp_306580 =
                                               defunc_1_op_res_295348;
                                        double redout_tmp_306581 =
                                               defunc_1_op_res_295351;
                                        double redout_tmp_306582 =
                                               defunc_1_op_res_295354;
                                        
                                        redout_297974 = redout_tmp_306578;
                                        redout_297975 = redout_tmp_306579;
                                        redout_297976 = redout_tmp_306580;
                                        redout_297977 = redout_tmp_306581;
                                        redout_297978 = redout_tmp_306582;
                                    }
                                    defunc_2_reduce_res_295333 = redout_297974;
                                    defunc_2_reduce_res_295334 = redout_297975;
                                    defunc_2_reduce_res_295335 = redout_297976;
                                    defunc_2_reduce_res_295336 = redout_297977;
                                    defunc_2_reduce_res_295337 = redout_297978;
                                    
                                    double a_295368 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295333;
                                    double b_295369 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295334;
                                    double c_295370 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295335;
                                    double d_295371 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295336;
                                    double e_295372 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295337;
                                    double x_295373 = c_295370 * e_295372;
                                    double y_295374 = d_295371 * d_295371;
                                    double a12_295375 = x_295373 - y_295374;
                                    double x_295376 = c_295370 * d_295371;
                                    double y_295377 = b_295369 * e_295372;
                                    double b12_295378 = x_295376 - y_295377;
                                    double x_295379 = b_295369 * d_295371;
                                    double y_295380 = c_295370 * c_295370;
                                    double c12_295381 = x_295379 - y_295380;
                                    double x_295382 = a_295368 * e_295372;
                                    double b2_295383 = x_295382 - y_295380;
                                    double x_295384 = b_295369 * c_295370;
                                    double y_295385 = a_295368 * d_295371;
                                    double c2_295386 = x_295384 - y_295385;
                                    double x_295387 = a_295368 * a12_295375;
                                    double y_295388 = b_295369 * b12_295378;
                                    double x_295389 = x_295387 + y_295388;
                                    double y_295390 = c_295370 * c12_295381;
                                    double y_295391 = x_295389 + y_295390;
                                    double det_295392 = 1.0 / y_295391;
                                    double a12_295393 = a12_295375 * det_295392;
                                    double b12_295394 = b12_295378 * det_295392;
                                    double c12_295395 = c12_295381 * det_295392;
                                    double b2_295396 = b2_295383 * det_295392;
                                    double c2_295397 = c2_295386 * det_295392;
                                    double defunc_2_reduce_res_295398;
                                    double defunc_2_reduce_res_295399;
                                    double redout_297984;
                                    double redout_297985;
                                    
                                    redout_297984 = 0.0;
                                    redout_297985 = 0.0;
                                    for (int64_t i_297986 = 0; i_297986 <
                                         q_l_292680; i_297986++) {
                                        double x_295407;
                                        
                                        x_295407 =
                                            ((double *) mem_303271)[i_297986];
                                        
                                        double x_295408;
                                        
                                        x_295408 =
                                            ((double *) mem_303301)[i_297986];
                                        
                                        double x_295409;
                                        
                                        x_295409 =
                                            ((double *) mem_303298)[i_297986];
                                        
                                        bool cond_295410 = sle64(n_292675,
                                                                 i_297986);
                                        double defunc_0_f_res_295411;
                                        
                                        if (cond_295410) {
                                            defunc_0_f_res_295411 = 0.0;
                                        } else {
                                            int64_t i_295412 = add64(x_295302,
                                                                     i_297986);
                                            double defunc_0_add_arg_295413;
                                            
                                            defunc_0_add_arg_295413 =
                                                ((double *) mem_302721)[i_297998 *
                                                                        n_292675 +
                                                                        i_295412];
                                            defunc_0_f_res_295411 =
                                                defunc_0_add_arg_295413;
                                        }
                                        
                                        double x_295414 = a12_295393 * x_295407;
                                        double y_295415 = b12_295394 * x_295408;
                                        double x_295416 = x_295414 + y_295415;
                                        double y_295417 = c12_295395 * x_295409;
                                        double x_295418 = x_295416 + y_295417;
                                        double defunc_9_fit_fun_res_295419 =
                                               defunc_0_f_res_295411 * x_295418;
                                        double x_295420 = b12_295394 * x_295407;
                                        double y_295421 = b2_295396 * x_295408;
                                        double x_295422 = x_295420 + y_295421;
                                        double y_295423 = c2_295397 * x_295409;
                                        double x_295424 = x_295422 + y_295423;
                                        double defunc_9_slope_fun_res_295425 =
                                               defunc_0_f_res_295411 * x_295424;
                                        double defunc_1_op_res_295402 =
                                               defunc_9_fit_fun_res_295419 +
                                               redout_297984;
                                        double defunc_1_op_res_295405 =
                                               defunc_9_slope_fun_res_295425 +
                                               redout_297985;
                                        double redout_tmp_306585 =
                                               defunc_1_op_res_295402;
                                        double redout_tmp_306586 =
                                               defunc_1_op_res_295405;
                                        
                                        redout_297984 = redout_tmp_306585;
                                        redout_297985 = redout_tmp_306586;
                                    }
                                    defunc_2_reduce_res_295398 = redout_297984;
                                    defunc_2_reduce_res_295399 = redout_297985;
                                    ((double *) mem_303219.mem)[i_297998 *
                                                                l_n_m_292832 +
                                                                i_297991] =
                                        defunc_2_reduce_res_295398;
                                    ((double *) mem_303223.mem)[i_297998 *
                                                                l_n_m_292832 +
                                                                i_297991] =
                                        defunc_2_reduce_res_295399;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_303378, &mem_303219,
                                             "mem_303219") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_303370, &mem_303223,
                                             "mem_303223") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303223,
                                               "mem_303223") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303219,
                                               "mem_303219") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_303394, &ext_mem_303378,
                                         "ext_mem_303378") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_303386, &ext_mem_303370,
                                         "ext_mem_303370") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303370,
                                           "ext_mem_303370") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303378,
                                           "ext_mem_303378") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_303681, &ext_mem_303394,
                                     "ext_mem_303394") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_303673, &ext_mem_303386,
                                     "ext_mem_303386") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303386,
                                       "ext_mem_303386") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303394,
                                       "ext_mem_303394") != 0)
                        return 1;
                } else {
                    bool match_lit_295430 = (int64_t) 0 == d_l_292683;
                    struct memblock ext_mem_303665;
                    
                    ext_mem_303665.references = NULL;
                    
                    struct memblock ext_mem_303657;
                    
                    ext_mem_303657.references = NULL;
                    if (match_lit_295430) {
                        struct memblock mem_303405;
                        
                        mem_303405.references = NULL;
                        if (memblock_alloc(ctx, &mem_303405, bytes_300074,
                                           "mem_303405")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_306587 = 0; i_306587 <
                             partition_sizze_292766; i_306587++) {
                            for (int64_t i_306588 = 0; i_306588 < l_n_m_292832;
                                 i_306588++) {
                                ((double *) mem_303405.mem)[i_306587 *
                                                            l_n_m_292832 +
                                                            i_306588] = 0.0;
                            }
                        }
                        
                        struct memblock mem_303409;
                        
                        mem_303409.references = NULL;
                        if (memblock_alloc(ctx, &mem_303409, bytes_300074,
                                           "mem_303409")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_298011 = 0; i_298011 <
                             partition_sizze_292766; i_298011++) {
                            for (int64_t i_298007 = 0; i_298007 < l_n_m_292832;
                                 i_298007++) {
                                int64_t x_295442;
                                
                                x_295442 = ((int64_t *) mem_300075)[i_298011 *
                                                                    l_n_m_292832 +
                                                                    i_298007];
                                
                                double x_295443;
                                
                                x_295443 = ((double *) mem_300079)[i_298011 *
                                                                   l_n_m_292832 +
                                                                   i_298007];
                                
                                int64_t min_arg_295444 = mul64(jump_t_292685,
                                                               i_298007);
                                int64_t min_res_295445 = smin64(i_292846,
                                                                min_arg_295444);
                                int64_t defunc_0_g_res_295446 =
                                        add64((int64_t) 1, min_res_295445);
                                double defunc_2_reduce_res_295447;
                                double redout_298001 = 0.0;
                                
                                for (int64_t i_298002 = 0; i_298002 <
                                     q_l_292680; i_298002++) {
                                    bool cond_295452 = sle64(n_292675,
                                                             i_298002);
                                    int64_t defunc_0_f_res_295453;
                                    
                                    if (cond_295452) {
                                        defunc_0_f_res_295453 = (int64_t) 0;
                                    } else {
                                        int64_t i_295454 = add64(x_295442,
                                                                 i_298002);
                                        int64_t defunc_1_add_res_295455 =
                                                add64((int64_t) 1, i_295454);
                                        
                                        defunc_0_f_res_295453 =
                                            defunc_1_add_res_295455;
                                    }
                                    
                                    double defunc_0_f_res_295456;
                                    
                                    if (cond_295452) {
                                        defunc_0_f_res_295456 = 0.0;
                                    } else {
                                        int64_t i_295457 = add64(x_295442,
                                                                 i_298002);
                                        double defunc_0_add_arg_295458;
                                        
                                        defunc_0_add_arg_295458 =
                                            ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                              (i_298011 *
                                                                               ctx_param_ext_300317 +
                                                                               i_295457 *
                                                                               ctx_param_ext_300319)];
                                        defunc_0_f_res_295456 =
                                            defunc_0_add_arg_295458;
                                    }
                                    
                                    int64_t binop_p_295459 =
                                            sub64(defunc_0_f_res_295453,
                                                  defunc_0_g_res_295446);
                                    double defunc_0_f_res_295460 =
                                           sitofp_i64_f64(binop_p_295459);
                                    double abs_res_295461 =
                                           fabs(defunc_0_f_res_295460);
                                    double tmp1_295462 = abs_res_295461 /
                                           x_295443;
                                    double x_295463 = tmp1_295462 * tmp1_295462;
                                    double y_295464 = tmp1_295462 * x_295463;
                                    double tmp2_295465 = 1.0 - y_295464;
                                    double x_295466 = tmp2_295465 * tmp2_295465;
                                    double tmp3_295467 = tmp2_295465 * x_295466;
                                    double w_j_295468 = defunc_0_f_res_295456 *
                                           tmp3_295467;
                                    double defunc_1_op_res_295450 = w_j_295468 +
                                           redout_298001;
                                    double redout_tmp_306591 =
                                           defunc_1_op_res_295450;
                                    
                                    redout_298001 = redout_tmp_306591;
                                }
                                defunc_2_reduce_res_295447 = redout_298001;
                                
                                double a_295469 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_295447;
                                double a0_295470 = 1.0 / a_295469;
                                double defunc_2_reduce_res_295471;
                                double redout_298003 = 0.0;
                                
                                for (int64_t i_298004 = 0; i_298004 <
                                     q_l_292680; i_298004++) {
                                    bool cond_295476 = sle64(n_292675,
                                                             i_298004);
                                    int64_t defunc_0_f_res_295477;
                                    
                                    if (cond_295476) {
                                        defunc_0_f_res_295477 = (int64_t) 0;
                                    } else {
                                        int64_t i_295478 = add64(x_295442,
                                                                 i_298004);
                                        int64_t defunc_1_add_res_295479 =
                                                add64((int64_t) 1, i_295478);
                                        
                                        defunc_0_f_res_295477 =
                                            defunc_1_add_res_295479;
                                    }
                                    
                                    double defunc_0_f_res_295480;
                                    
                                    if (cond_295476) {
                                        defunc_0_f_res_295480 = 0.0;
                                    } else {
                                        int64_t i_295481 = add64(x_295442,
                                                                 i_298004);
                                        double defunc_0_add_arg_295482;
                                        
                                        defunc_0_add_arg_295482 =
                                            ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                              (i_298011 *
                                                                               ctx_param_ext_300317 +
                                                                               i_295481 *
                                                                               ctx_param_ext_300319)];
                                        defunc_0_f_res_295480 =
                                            defunc_0_add_arg_295482;
                                    }
                                    
                                    int64_t binop_p_295483 =
                                            sub64(defunc_0_f_res_295477,
                                                  defunc_0_g_res_295446);
                                    double defunc_0_f_res_295484 =
                                           sitofp_i64_f64(binop_p_295483);
                                    double abs_res_295485 =
                                           fabs(defunc_0_f_res_295484);
                                    double tmp1_295486 = abs_res_295485 /
                                           x_295443;
                                    double x_295487 = tmp1_295486 * tmp1_295486;
                                    double y_295488 = tmp1_295486 * x_295487;
                                    double tmp2_295489 = 1.0 - y_295488;
                                    double x_295490 = tmp2_295489 * tmp2_295489;
                                    double tmp3_295491 = tmp2_295489 * x_295490;
                                    double tmp4_295492 = defunc_0_f_res_295480 *
                                           tmp3_295491;
                                    double defunc_0_f_res_295493;
                                    
                                    if (cond_295476) {
                                        defunc_0_f_res_295493 = 0.0;
                                    } else {
                                        int64_t i_295494 = add64(x_295442,
                                                                 i_298004);
                                        double defunc_0_add_arg_295495;
                                        
                                        defunc_0_add_arg_295495 =
                                            ((double *) mem_302721)[i_298011 *
                                                                    n_292675 +
                                                                    i_295494];
                                        defunc_0_f_res_295493 =
                                            defunc_0_add_arg_295495;
                                    }
                                    
                                    double x_295496 = a0_295470 * tmp4_295492;
                                    double defunc_9_fit_fun_res_295497 =
                                           defunc_0_f_res_295493 * x_295496;
                                    double defunc_1_op_res_295474 =
                                           defunc_9_fit_fun_res_295497 +
                                           redout_298003;
                                    double redout_tmp_306592 =
                                           defunc_1_op_res_295474;
                                    
                                    redout_298003 = redout_tmp_306592;
                                }
                                defunc_2_reduce_res_295471 = redout_298003;
                                ((double *) mem_303409.mem)[i_298011 *
                                                            l_n_m_292832 +
                                                            i_298007] =
                                    defunc_2_reduce_res_295471;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_303665, &mem_303409,
                                         "mem_303409") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_303657, &mem_303405,
                                         "mem_303405") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303409, "mem_303409") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303405, "mem_303405") != 0)
                            return 1;
                    } else {
                        bool match_lit_295502 = (int64_t) 1 == d_l_292683;
                        struct memblock ext_mem_303649;
                        
                        ext_mem_303649.references = NULL;
                        
                        struct memblock ext_mem_303641;
                        
                        ext_mem_303641.references = NULL;
                        if (match_lit_295502) {
                            struct memblock mem_303456;
                            
                            mem_303456.references = NULL;
                            if (memblock_alloc(ctx, &mem_303456, bytes_300074,
                                               "mem_303456")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_303460;
                            
                            mem_303460.references = NULL;
                            if (memblock_alloc(ctx, &mem_303460, bytes_300074,
                                               "mem_303460")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t i_298031 = 0; i_298031 <
                                 partition_sizze_292766; i_298031++) {
                                for (int64_t i_298024 = 0; i_298024 <
                                     l_n_m_292832; i_298024++) {
                                    int64_t x_295515;
                                    
                                    x_295515 =
                                        ((int64_t *) mem_300075)[i_298031 *
                                                                 l_n_m_292832 +
                                                                 i_298024];
                                    
                                    double x_295516;
                                    
                                    x_295516 =
                                        ((double *) mem_300079)[i_298031 *
                                                                l_n_m_292832 +
                                                                i_298024];
                                    
                                    int64_t min_arg_295517 =
                                            mul64(jump_t_292685, i_298024);
                                    int64_t min_res_295518 = smin64(i_292846,
                                                                    min_arg_295517);
                                    int64_t defunc_0_g_res_295519 =
                                            add64((int64_t) 1, min_res_295518);
                                    double defunc_2_reduce_res_295520;
                                    double defunc_2_reduce_res_295521;
                                    double defunc_2_reduce_res_295522;
                                    double redout_298013;
                                    double redout_298014;
                                    double redout_298015;
                                    
                                    redout_298013 = 0.0;
                                    redout_298014 = 0.0;
                                    redout_298015 = 0.0;
                                    for (int64_t i_298016 = 0; i_298016 <
                                         q_l_292680; i_298016++) {
                                        bool cond_295533 = sle64(n_292675,
                                                                 i_298016);
                                        int64_t defunc_0_f_res_295534;
                                        
                                        if (cond_295533) {
                                            defunc_0_f_res_295534 = (int64_t) 0;
                                        } else {
                                            int64_t i_295535 = add64(x_295515,
                                                                     i_298016);
                                            int64_t defunc_1_add_res_295536 =
                                                    add64((int64_t) 1,
                                                          i_295535);
                                            
                                            defunc_0_f_res_295534 =
                                                defunc_1_add_res_295536;
                                        }
                                        
                                        double defunc_0_f_res_295537;
                                        
                                        if (cond_295533) {
                                            defunc_0_f_res_295537 = 0.0;
                                        } else {
                                            int64_t i_295538 = add64(x_295515,
                                                                     i_298016);
                                            double defunc_0_add_arg_295539;
                                            
                                            defunc_0_add_arg_295539 =
                                                ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                                  (i_298031 *
                                                                                   ctx_param_ext_300317 +
                                                                                   i_295538 *
                                                                                   ctx_param_ext_300319)];
                                            defunc_0_f_res_295537 =
                                                defunc_0_add_arg_295539;
                                        }
                                        
                                        int64_t binop_p_295540 =
                                                sub64(defunc_0_f_res_295534,
                                                      defunc_0_g_res_295519);
                                        double defunc_0_f_res_295541 =
                                               sitofp_i64_f64(binop_p_295540);
                                        double abs_res_295542 =
                                               fabs(defunc_0_f_res_295541);
                                        double tmp1_295543 = abs_res_295542 /
                                               x_295516;
                                        double x_295544 = tmp1_295543 *
                                               tmp1_295543;
                                        double y_295545 = tmp1_295543 *
                                               x_295544;
                                        double tmp2_295546 = 1.0 - y_295545;
                                        double x_295547 = tmp2_295546 *
                                               tmp2_295546;
                                        double tmp3_295548 = tmp2_295546 *
                                               x_295547;
                                        double w_j_295549 =
                                               defunc_0_f_res_295537 *
                                               tmp3_295548;
                                        double xw_j_295550 =
                                               defunc_0_f_res_295541 *
                                               w_j_295549;
                                        double x2w_j_295551 =
                                               defunc_0_f_res_295541 *
                                               xw_j_295550;
                                        double defunc_1_op_res_295525 =
                                               w_j_295549 + redout_298013;
                                        double defunc_1_op_res_295528 =
                                               xw_j_295550 + redout_298014;
                                        double defunc_1_op_res_295531 =
                                               x2w_j_295551 + redout_298015;
                                        double redout_tmp_306597 =
                                               defunc_1_op_res_295525;
                                        double redout_tmp_306598 =
                                               defunc_1_op_res_295528;
                                        double redout_tmp_306599 =
                                               defunc_1_op_res_295531;
                                        
                                        redout_298013 = redout_tmp_306597;
                                        redout_298014 = redout_tmp_306598;
                                        redout_298015 = redout_tmp_306599;
                                    }
                                    defunc_2_reduce_res_295520 = redout_298013;
                                    defunc_2_reduce_res_295521 = redout_298014;
                                    defunc_2_reduce_res_295522 = redout_298015;
                                    
                                    double a_295552 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295520;
                                    double b_295553 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295521;
                                    double c_295554 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295522;
                                    double x_295555 = a_295552 * c_295554;
                                    double y_295556 = b_295553 * b_295553;
                                    double y_295557 = x_295555 - y_295556;
                                    double det1_295558 = 1.0 / y_295557;
                                    double a11_295559 = c_295554 * det1_295558;
                                    double x_295560 = 0.0 - b_295553;
                                    double b11_295561 = det1_295558 * x_295560;
                                    double c11_295562 = a_295552 * det1_295558;
                                    double defunc_2_reduce_res_295563;
                                    double defunc_2_reduce_res_295564;
                                    double redout_298017;
                                    double redout_298018;
                                    
                                    redout_298017 = 0.0;
                                    redout_298018 = 0.0;
                                    for (int64_t i_298019 = 0; i_298019 <
                                         q_l_292680; i_298019++) {
                                        bool cond_295572 = sle64(n_292675,
                                                                 i_298019);
                                        int64_t defunc_0_f_res_295573;
                                        
                                        if (cond_295572) {
                                            defunc_0_f_res_295573 = (int64_t) 0;
                                        } else {
                                            int64_t i_295574 = add64(x_295515,
                                                                     i_298019);
                                            int64_t defunc_1_add_res_295575 =
                                                    add64((int64_t) 1,
                                                          i_295574);
                                            
                                            defunc_0_f_res_295573 =
                                                defunc_1_add_res_295575;
                                        }
                                        
                                        double defunc_0_f_res_295576;
                                        
                                        if (cond_295572) {
                                            defunc_0_f_res_295576 = 0.0;
                                        } else {
                                            int64_t i_295577 = add64(x_295515,
                                                                     i_298019);
                                            double defunc_0_add_arg_295578;
                                            
                                            defunc_0_add_arg_295578 =
                                                ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                                  (i_298031 *
                                                                                   ctx_param_ext_300317 +
                                                                                   i_295577 *
                                                                                   ctx_param_ext_300319)];
                                            defunc_0_f_res_295576 =
                                                defunc_0_add_arg_295578;
                                        }
                                        
                                        int64_t binop_p_295579 =
                                                sub64(defunc_0_f_res_295573,
                                                      defunc_0_g_res_295519);
                                        double defunc_0_f_res_295580 =
                                               sitofp_i64_f64(binop_p_295579);
                                        double abs_res_295581 =
                                               fabs(defunc_0_f_res_295580);
                                        double tmp1_295582 = abs_res_295581 /
                                               x_295516;
                                        double x_295583 = tmp1_295582 *
                                               tmp1_295582;
                                        double y_295584 = tmp1_295582 *
                                               x_295583;
                                        double tmp2_295585 = 1.0 - y_295584;
                                        double x_295586 = tmp2_295585 *
                                               tmp2_295585;
                                        double tmp3_295587 = tmp2_295585 *
                                               x_295586;
                                        double tmp4_295588 =
                                               defunc_0_f_res_295576 *
                                               tmp3_295587;
                                        double defunc_1_f_res_295589 =
                                               defunc_0_f_res_295580 *
                                               tmp4_295588;
                                        double defunc_0_f_res_295590;
                                        
                                        if (cond_295572) {
                                            defunc_0_f_res_295590 = 0.0;
                                        } else {
                                            int64_t i_295591 = add64(x_295515,
                                                                     i_298019);
                                            double defunc_0_add_arg_295592;
                                            
                                            defunc_0_add_arg_295592 =
                                                ((double *) mem_302721)[i_298031 *
                                                                        n_292675 +
                                                                        i_295591];
                                            defunc_0_f_res_295590 =
                                                defunc_0_add_arg_295592;
                                        }
                                        
                                        double x_295593 = a11_295559 *
                                               tmp4_295588;
                                        double y_295594 = b11_295561 *
                                               defunc_1_f_res_295589;
                                        double x_295595 = x_295593 + y_295594;
                                        double defunc_9_fit_fun_res_295596 =
                                               defunc_0_f_res_295590 * x_295595;
                                        double x_295597 = b11_295561 *
                                               tmp4_295588;
                                        double y_295598 = c11_295562 *
                                               defunc_1_f_res_295589;
                                        double x_295599 = x_295597 + y_295598;
                                        double defunc_9_slope_fun_res_295600 =
                                               defunc_0_f_res_295590 * x_295599;
                                        double defunc_1_op_res_295567 =
                                               defunc_9_fit_fun_res_295596 +
                                               redout_298017;
                                        double defunc_1_op_res_295570 =
                                               defunc_9_slope_fun_res_295600 +
                                               redout_298018;
                                        double redout_tmp_306600 =
                                               defunc_1_op_res_295567;
                                        double redout_tmp_306601 =
                                               defunc_1_op_res_295570;
                                        
                                        redout_298017 = redout_tmp_306600;
                                        redout_298018 = redout_tmp_306601;
                                    }
                                    defunc_2_reduce_res_295563 = redout_298017;
                                    defunc_2_reduce_res_295564 = redout_298018;
                                    ((double *) mem_303456.mem)[i_298031 *
                                                                l_n_m_292832 +
                                                                i_298024] =
                                        defunc_2_reduce_res_295563;
                                    ((double *) mem_303460.mem)[i_298031 *
                                                                l_n_m_292832 +
                                                                i_298024] =
                                        defunc_2_reduce_res_295564;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_303649, &mem_303456,
                                             "mem_303456") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_303641, &mem_303460,
                                             "mem_303460") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303460,
                                               "mem_303460") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303456,
                                               "mem_303456") != 0)
                                return 1;
                        } else {
                            struct memblock mem_303550;
                            
                            mem_303550.references = NULL;
                            if (memblock_alloc(ctx, &mem_303550, bytes_300074,
                                               "mem_303550")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_303554;
                            
                            mem_303554.references = NULL;
                            if (memblock_alloc(ctx, &mem_303554, bytes_300074,
                                               "mem_303554")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t i_298054 = 0; i_298054 <
                                 partition_sizze_292766; i_298054++) {
                                for (int64_t i_298047 = 0; i_298047 <
                                     l_n_m_292832; i_298047++) {
                                    int64_t x_295615;
                                    
                                    x_295615 =
                                        ((int64_t *) mem_300075)[i_298054 *
                                                                 l_n_m_292832 +
                                                                 i_298047];
                                    
                                    double x_295616;
                                    
                                    x_295616 =
                                        ((double *) mem_300079)[i_298054 *
                                                                l_n_m_292832 +
                                                                i_298047];
                                    
                                    int64_t min_arg_295617 =
                                            mul64(jump_t_292685, i_298047);
                                    int64_t min_res_295618 = smin64(i_292846,
                                                                    min_arg_295617);
                                    int64_t defunc_0_g_res_295619 =
                                            add64((int64_t) 1, min_res_295618);
                                    double defunc_2_reduce_res_295620;
                                    double defunc_2_reduce_res_295621;
                                    double defunc_2_reduce_res_295622;
                                    double defunc_2_reduce_res_295623;
                                    double defunc_2_reduce_res_295624;
                                    double redout_298034;
                                    double redout_298035;
                                    double redout_298036;
                                    double redout_298037;
                                    double redout_298038;
                                    
                                    redout_298034 = 0.0;
                                    redout_298035 = 0.0;
                                    redout_298036 = 0.0;
                                    redout_298037 = 0.0;
                                    redout_298038 = 0.0;
                                    for (int64_t i_298039 = 0; i_298039 <
                                         q_l_292680; i_298039++) {
                                        bool cond_295641 = sle64(n_292675,
                                                                 i_298039);
                                        int64_t defunc_0_f_res_295642;
                                        
                                        if (cond_295641) {
                                            defunc_0_f_res_295642 = (int64_t) 0;
                                        } else {
                                            int64_t i_295643 = add64(x_295615,
                                                                     i_298039);
                                            int64_t defunc_1_add_res_295644 =
                                                    add64((int64_t) 1,
                                                          i_295643);
                                            
                                            defunc_0_f_res_295642 =
                                                defunc_1_add_res_295644;
                                        }
                                        
                                        double defunc_0_f_res_295645;
                                        
                                        if (cond_295641) {
                                            defunc_0_f_res_295645 = 0.0;
                                        } else {
                                            int64_t i_295646 = add64(x_295615,
                                                                     i_298039);
                                            double defunc_0_add_arg_295647;
                                            
                                            defunc_0_add_arg_295647 =
                                                ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                                  (i_298054 *
                                                                                   ctx_param_ext_300317 +
                                                                                   i_295646 *
                                                                                   ctx_param_ext_300319)];
                                            defunc_0_f_res_295645 =
                                                defunc_0_add_arg_295647;
                                        }
                                        
                                        int64_t binop_p_295648 =
                                                sub64(defunc_0_f_res_295642,
                                                      defunc_0_g_res_295619);
                                        double defunc_0_f_res_295649 =
                                               sitofp_i64_f64(binop_p_295648);
                                        double abs_res_295650 =
                                               fabs(defunc_0_f_res_295649);
                                        double tmp1_295651 = abs_res_295650 /
                                               x_295616;
                                        double x_295652 = tmp1_295651 *
                                               tmp1_295651;
                                        double y_295653 = tmp1_295651 *
                                               x_295652;
                                        double tmp2_295654 = 1.0 - y_295653;
                                        double x_295655 = tmp2_295654 *
                                               tmp2_295654;
                                        double tmp3_295656 = tmp2_295654 *
                                               x_295655;
                                        double w_j_295657 =
                                               defunc_0_f_res_295645 *
                                               tmp3_295656;
                                        double xw_j_295658 =
                                               defunc_0_f_res_295649 *
                                               w_j_295657;
                                        double x2w_j_295659 =
                                               defunc_0_f_res_295649 *
                                               xw_j_295658;
                                        double x3w_j_295660 =
                                               defunc_0_f_res_295649 *
                                               x2w_j_295659;
                                        double x4w_j_295661 =
                                               defunc_0_f_res_295649 *
                                               x3w_j_295660;
                                        double defunc_1_op_res_295627 =
                                               w_j_295657 + redout_298034;
                                        double defunc_1_op_res_295630 =
                                               xw_j_295658 + redout_298035;
                                        double defunc_1_op_res_295633 =
                                               x2w_j_295659 + redout_298036;
                                        double defunc_1_op_res_295636 =
                                               x3w_j_295660 + redout_298037;
                                        double defunc_1_op_res_295639 =
                                               x4w_j_295661 + redout_298038;
                                        double redout_tmp_306606 =
                                               defunc_1_op_res_295627;
                                        double redout_tmp_306607 =
                                               defunc_1_op_res_295630;
                                        double redout_tmp_306608 =
                                               defunc_1_op_res_295633;
                                        double redout_tmp_306609 =
                                               defunc_1_op_res_295636;
                                        double redout_tmp_306610 =
                                               defunc_1_op_res_295639;
                                        
                                        redout_298034 = redout_tmp_306606;
                                        redout_298035 = redout_tmp_306607;
                                        redout_298036 = redout_tmp_306608;
                                        redout_298037 = redout_tmp_306609;
                                        redout_298038 = redout_tmp_306610;
                                    }
                                    defunc_2_reduce_res_295620 = redout_298034;
                                    defunc_2_reduce_res_295621 = redout_298035;
                                    defunc_2_reduce_res_295622 = redout_298036;
                                    defunc_2_reduce_res_295623 = redout_298037;
                                    defunc_2_reduce_res_295624 = redout_298038;
                                    
                                    double a_295662 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295620;
                                    double b_295663 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295621;
                                    double c_295664 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295622;
                                    double d_295665 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295623;
                                    double e_295666 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_295624;
                                    double x_295667 = c_295664 * e_295666;
                                    double y_295668 = d_295665 * d_295665;
                                    double a12_295669 = x_295667 - y_295668;
                                    double x_295670 = c_295664 * d_295665;
                                    double y_295671 = b_295663 * e_295666;
                                    double b12_295672 = x_295670 - y_295671;
                                    double x_295673 = b_295663 * d_295665;
                                    double y_295674 = c_295664 * c_295664;
                                    double c12_295675 = x_295673 - y_295674;
                                    double x_295676 = a_295662 * e_295666;
                                    double b2_295677 = x_295676 - y_295674;
                                    double x_295678 = b_295663 * c_295664;
                                    double y_295679 = a_295662 * d_295665;
                                    double c2_295680 = x_295678 - y_295679;
                                    double x_295681 = a_295662 * a12_295669;
                                    double y_295682 = b_295663 * b12_295672;
                                    double x_295683 = x_295681 + y_295682;
                                    double y_295684 = c_295664 * c12_295675;
                                    double y_295685 = x_295683 + y_295684;
                                    double det_295686 = 1.0 / y_295685;
                                    double a12_295687 = a12_295669 * det_295686;
                                    double b12_295688 = b12_295672 * det_295686;
                                    double c12_295689 = c12_295675 * det_295686;
                                    double b2_295690 = b2_295677 * det_295686;
                                    double c2_295691 = c2_295680 * det_295686;
                                    double defunc_2_reduce_res_295692;
                                    double defunc_2_reduce_res_295693;
                                    double redout_298040;
                                    double redout_298041;
                                    
                                    redout_298040 = 0.0;
                                    redout_298041 = 0.0;
                                    for (int64_t i_298042 = 0; i_298042 <
                                         q_l_292680; i_298042++) {
                                        bool cond_295701 = sle64(n_292675,
                                                                 i_298042);
                                        int64_t defunc_0_f_res_295702;
                                        
                                        if (cond_295701) {
                                            defunc_0_f_res_295702 = (int64_t) 0;
                                        } else {
                                            int64_t i_295703 = add64(x_295615,
                                                                     i_298042);
                                            int64_t defunc_1_add_res_295704 =
                                                    add64((int64_t) 1,
                                                          i_295703);
                                            
                                            defunc_0_f_res_295702 =
                                                defunc_1_add_res_295704;
                                        }
                                        
                                        double defunc_0_f_res_295705;
                                        
                                        if (cond_295701) {
                                            defunc_0_f_res_295705 = 0.0;
                                        } else {
                                            int64_t i_295706 = add64(x_295615,
                                                                     i_298042);
                                            double defunc_0_add_arg_295707;
                                            
                                            defunc_0_add_arg_295707 =
                                                ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                                  (i_298054 *
                                                                                   ctx_param_ext_300317 +
                                                                                   i_295706 *
                                                                                   ctx_param_ext_300319)];
                                            defunc_0_f_res_295705 =
                                                defunc_0_add_arg_295707;
                                        }
                                        
                                        int64_t binop_p_295708 =
                                                sub64(defunc_0_f_res_295702,
                                                      defunc_0_g_res_295619);
                                        double defunc_0_f_res_295709 =
                                               sitofp_i64_f64(binop_p_295708);
                                        double abs_res_295710 =
                                               fabs(defunc_0_f_res_295709);
                                        double tmp1_295711 = abs_res_295710 /
                                               x_295616;
                                        double x_295712 = tmp1_295711 *
                                               tmp1_295711;
                                        double y_295713 = tmp1_295711 *
                                               x_295712;
                                        double tmp2_295714 = 1.0 - y_295713;
                                        double x_295715 = tmp2_295714 *
                                               tmp2_295714;
                                        double tmp3_295716 = tmp2_295714 *
                                               x_295715;
                                        double tmp4_295717 =
                                               defunc_0_f_res_295705 *
                                               tmp3_295716;
                                        double defunc_1_f_res_295718 =
                                               defunc_0_f_res_295709 *
                                               tmp4_295717;
                                        double defunc_1_f_res_295719 =
                                               defunc_0_f_res_295709 *
                                               defunc_1_f_res_295718;
                                        double defunc_0_f_res_295720;
                                        
                                        if (cond_295701) {
                                            defunc_0_f_res_295720 = 0.0;
                                        } else {
                                            int64_t i_295721 = add64(x_295615,
                                                                     i_298042);
                                            double defunc_0_add_arg_295722;
                                            
                                            defunc_0_add_arg_295722 =
                                                ((double *) mem_302721)[i_298054 *
                                                                        n_292675 +
                                                                        i_295721];
                                            defunc_0_f_res_295720 =
                                                defunc_0_add_arg_295722;
                                        }
                                        
                                        double x_295723 = a12_295687 *
                                               tmp4_295717;
                                        double y_295724 = b12_295688 *
                                               defunc_1_f_res_295718;
                                        double x_295725 = x_295723 + y_295724;
                                        double y_295726 = c12_295689 *
                                               defunc_1_f_res_295719;
                                        double x_295727 = x_295725 + y_295726;
                                        double defunc_9_fit_fun_res_295728 =
                                               defunc_0_f_res_295720 * x_295727;
                                        double x_295729 = b12_295688 *
                                               tmp4_295717;
                                        double y_295730 = b2_295690 *
                                               defunc_1_f_res_295718;
                                        double x_295731 = x_295729 + y_295730;
                                        double y_295732 = c2_295691 *
                                               defunc_1_f_res_295719;
                                        double x_295733 = x_295731 + y_295732;
                                        double defunc_9_slope_fun_res_295734 =
                                               defunc_0_f_res_295720 * x_295733;
                                        double defunc_1_op_res_295696 =
                                               defunc_9_fit_fun_res_295728 +
                                               redout_298040;
                                        double defunc_1_op_res_295699 =
                                               defunc_9_slope_fun_res_295734 +
                                               redout_298041;
                                        double redout_tmp_306611 =
                                               defunc_1_op_res_295696;
                                        double redout_tmp_306612 =
                                               defunc_1_op_res_295699;
                                        
                                        redout_298040 = redout_tmp_306611;
                                        redout_298041 = redout_tmp_306612;
                                    }
                                    defunc_2_reduce_res_295692 = redout_298040;
                                    defunc_2_reduce_res_295693 = redout_298041;
                                    ((double *) mem_303550.mem)[i_298054 *
                                                                l_n_m_292832 +
                                                                i_298047] =
                                        defunc_2_reduce_res_295692;
                                    ((double *) mem_303554.mem)[i_298054 *
                                                                l_n_m_292832 +
                                                                i_298047] =
                                        defunc_2_reduce_res_295693;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_303649, &mem_303550,
                                             "mem_303550") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_303641, &mem_303554,
                                             "mem_303554") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303554,
                                               "mem_303554") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303550,
                                               "mem_303550") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_303665, &ext_mem_303649,
                                         "ext_mem_303649") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_303657, &ext_mem_303641,
                                         "ext_mem_303641") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303641,
                                           "ext_mem_303641") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_303649,
                                           "ext_mem_303649") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_303681, &ext_mem_303665,
                                     "ext_mem_303665") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_303673, &ext_mem_303657,
                                     "ext_mem_303657") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303657,
                                       "ext_mem_303657") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303665,
                                       "ext_mem_303665") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_303697, &ext_mem_303681,
                                 "ext_mem_303681") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_303689, &ext_mem_303673,
                                 "ext_mem_303673") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_303673, "ext_mem_303673") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_303681, "ext_mem_303681") != 0)
                    return 1;
            }
            
            struct memblock ext_mem_303752;
            
            ext_mem_303752.references = NULL;
            if (cond_293285) {
                bool zzero_295740 = jump_l_292686 == (int64_t) 0;
                bool nonzzero_295741 = !zzero_295740;
                bool nonzzero_cert_295742;
                
                if (!nonzzero_295741) {
                    ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                           "division by zero",
                                           "-> #0  loess.fut:742:20-27\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:741:3-745:9\n   #5  stl.fut:256:23-75\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:254:15-257:43\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_303752,
                                       "ext_mem_303752") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303689,
                                       "ext_mem_303689") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303697,
                                       "ext_mem_303697") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302544,
                                       "ext_mem_302544") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302419,
                                       "ext_mem_302419") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302430,
                                       "ext_mem_302430") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300343,
                                       "mem_param_300343") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300335,
                                       "mem_param_300335") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305217,
                                       "ext_mem_305217") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305218,
                                       "ext_mem_305218") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300321,
                                       "mem_param_300321") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300313,
                                       "mem_param_300313") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300305,
                                       "mem_param_300305") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305742,
                                       "ext_mem_305742") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305743,
                                       "ext_mem_305743") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305744,
                                       "ext_mem_305744") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t y_295743 = sub64(l_n_m_292832, (int64_t) 1);
                struct memblock mem_303708;
                
                mem_303708.references = NULL;
                if (memblock_alloc(ctx, &mem_303708, bytes_299508,
                                   "mem_303708")) {
                    err = 1;
                    goto cleanup;
                }
                for (int64_t i_298063 = 0; i_298063 < partition_sizze_292766;
                     i_298063++) {
                    for (int64_t i_298059 = 0; i_298059 < n_292675;
                         i_298059++) {
                        int64_t m_v_295749 = sdiv64(i_298059, jump_l_292686);
                        bool cond_295750 = m_v_295749 == y_295743;
                        int64_t j_295751;
                        
                        if (cond_295750) {
                            int64_t j_t_res_295752 = sub64(m_v_295749,
                                                           (int64_t) 1);
                            
                            j_295751 = j_t_res_295752;
                        } else {
                            j_295751 = m_v_295749;
                        }
                        
                        int64_t min_arg_295753 = mul64(jump_l_292686, j_295751);
                        int64_t min_res_295754 = smin64(i_292846,
                                                        min_arg_295753);
                        int64_t defunc_0_m_fun_arg_295755 = add64((int64_t) 1,
                                                                  j_295751);
                        int64_t min_arg_295756 = mul64(jump_l_292686,
                                                       defunc_0_m_fun_arg_295755);
                        int64_t min_res_295757 = smin64(i_292846,
                                                        min_arg_295756);
                        int64_t i64_arg_295758 = sub64(min_res_295757,
                                                       min_res_295754);
                        double i64_res_295759 = sitofp_i64_f64(i64_arg_295758);
                        int64_t i64_arg_295760 = sub64(i_298059,
                                                       min_res_295754);
                        double i64_res_295761 = sitofp_i64_f64(i64_arg_295760);
                        double u_295762 = i64_res_295761 / i64_res_295759;
                        double u2_295763 = u_295762 * u_295762;
                        double u3_295764 = u_295762 * u2_295763;
                        double x_295765 = 2.0 * u3_295764;
                        double y_295766 = 3.0 * u2_295763;
                        double x_295767 = x_295765 - y_295766;
                        double x_295768 = 1.0 + x_295767;
                        bool x_295769 = sle64((int64_t) 0, j_295751);
                        bool y_295770 = slt64(j_295751, l_n_m_292832);
                        bool bounds_check_295771 = x_295769 && y_295770;
                        bool index_certs_295772;
                        
                        if (!bounds_check_295771) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) j_295751,
                                          "] out of bounds for array of shape [",
                                          (long long) l_n_m_292832, "].",
                                          "-> #0  loess.fut:731:27-33\n   #1  loess.fut:744:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:741:3-745:9\n   #6  stl.fut:256:23-75\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:254:15-257:43\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_303708,
                                               "mem_303708") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303752,
                                               "ext_mem_303752") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303689,
                                               "ext_mem_303689") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303697,
                                               "ext_mem_303697") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302544,
                                               "ext_mem_302544") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302419,
                                               "ext_mem_302419") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302430,
                                               "ext_mem_302430") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300343,
                                               "mem_param_300343") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300335,
                                               "mem_param_300335") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305217,
                                               "ext_mem_305217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305218,
                                               "ext_mem_305218") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300321,
                                               "mem_param_300321") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300313,
                                               "mem_param_300313") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300305,
                                               "mem_param_300305") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305742,
                                               "ext_mem_305742") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305743,
                                               "ext_mem_305743") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305744,
                                               "ext_mem_305744") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300297,
                                               "mem_300297") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300293,
                                               "mem_300293") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306309,
                                               "mem_out_306309") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306308,
                                               "mem_out_306308") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306307,
                                               "mem_out_306307") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_295773;
                        
                        y_295773 = ((double *) ext_mem_303697.mem)[i_298063 *
                                                                   l_n_m_292832 +
                                                                   j_295751];
                        
                        double x_295774 = x_295768 * y_295773;
                        double x_295775 = y_295766 - x_295765;
                        bool x_295776 = sle64((int64_t) 0,
                                              defunc_0_m_fun_arg_295755);
                        bool y_295777 = slt64(defunc_0_m_fun_arg_295755,
                                              l_n_m_292832);
                        bool bounds_check_295778 = x_295776 && y_295777;
                        bool index_certs_295779;
                        
                        if (!bounds_check_295778) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [",
                                          (long long) defunc_0_m_fun_arg_295755,
                                          "] out of bounds for array of shape [",
                                          (long long) l_n_m_292832, "].",
                                          "-> #0  loess.fut:732:27-37\n   #1  loess.fut:744:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:741:3-745:9\n   #6  stl.fut:256:23-75\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:254:15-257:43\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_303708,
                                               "mem_303708") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303752,
                                               "ext_mem_303752") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303689,
                                               "ext_mem_303689") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303697,
                                               "ext_mem_303697") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302544,
                                               "ext_mem_302544") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302419,
                                               "ext_mem_302419") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302430,
                                               "ext_mem_302430") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300343,
                                               "mem_param_300343") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300335,
                                               "mem_param_300335") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305217,
                                               "ext_mem_305217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305218,
                                               "ext_mem_305218") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300321,
                                               "mem_param_300321") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300313,
                                               "mem_param_300313") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300305,
                                               "mem_param_300305") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305742,
                                               "ext_mem_305742") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305743,
                                               "ext_mem_305743") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305744,
                                               "ext_mem_305744") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300297,
                                               "mem_300297") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300293,
                                               "mem_300293") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306309,
                                               "mem_out_306309") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306308,
                                               "mem_out_306308") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306307,
                                               "mem_out_306307") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_295780;
                        
                        y_295780 = ((double *) ext_mem_303697.mem)[i_298063 *
                                                                   l_n_m_292832 +
                                                                   defunc_0_m_fun_arg_295755];
                        
                        double y_295781 = x_295775 * y_295780;
                        double x_295782 = x_295774 + y_295781;
                        double y_295783 = 2.0 * u2_295763;
                        double x_295784 = u3_295764 - y_295783;
                        double x_295785 = u_295762 + x_295784;
                        double y_295786;
                        
                        y_295786 = ((double *) ext_mem_303689.mem)[i_298063 *
                                                                   l_n_m_292832 +
                                                                   j_295751];
                        
                        double x_295787 = x_295785 * y_295786;
                        double y_295788 = i64_res_295759 * x_295787;
                        double x_295789 = x_295782 + y_295788;
                        double x_295790 = u3_295764 - u2_295763;
                        double y_295791;
                        
                        y_295791 = ((double *) ext_mem_303689.mem)[i_298063 *
                                                                   l_n_m_292832 +
                                                                   defunc_0_m_fun_arg_295755];
                        
                        double x_295792 = x_295790 * y_295791;
                        double y_295793 = i64_res_295759 * x_295792;
                        double defunc_4_interpolate_proc_res_295794 = x_295789 +
                               y_295793;
                        
                        ((double *) mem_303708.mem)[i_298063 * n_292675 +
                                                    i_298059] =
                            defunc_4_interpolate_proc_res_295794;
                    }
                }
                if (memblock_set(ctx, &ext_mem_303752, &mem_303708,
                                 "mem_303708") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_303708, "mem_303708") != 0)
                    return 1;
            } else {
                bool dim_match_295795 = n_292675 == l_n_m_292832;
                bool empty_or_match_cert_295796;
                
                if (!dim_match_295795) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Value of (core language) shape (",
                                  (long long) partition_sizze_292766, ", ",
                                  (long long) l_n_m_292832,
                                  ") cannot match shape of type `[",
                                  (long long) partition_sizze_292766, "][",
                                  (long long) n_292675, "]t`.",
                                  "-> #0  stl.fut:259:15-36\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_303752,
                                       "ext_mem_303752") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303689,
                                       "ext_mem_303689") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303697,
                                       "ext_mem_303697") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302544,
                                       "ext_mem_302544") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302419,
                                       "ext_mem_302419") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302430,
                                       "ext_mem_302430") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300343,
                                       "mem_param_300343") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300335,
                                       "mem_param_300335") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305217,
                                       "ext_mem_305217") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305218,
                                       "ext_mem_305218") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300321,
                                       "mem_param_300321") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300313,
                                       "mem_param_300313") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300305,
                                       "mem_param_300305") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305742,
                                       "ext_mem_305742") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305743,
                                       "ext_mem_305743") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305744,
                                       "ext_mem_305744") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_303752, &ext_mem_303697,
                                 "ext_mem_303697") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_303689, "ext_mem_303689") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303697, "ext_mem_303697") != 0)
                return 1;
            
            struct memblock mem_303763;
            
            mem_303763.references = NULL;
            if (memblock_alloc(ctx, &mem_303763, bytes_299508, "mem_303763")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_298071 = 0; i_298071 < partition_sizze_292766;
                 i_298071++) {
                for (int64_t i_298067 = 0; i_298067 < n_292675; i_298067++) {
                    int64_t slice_298603 = n_p_292677 + i_298067;
                    double x_295803;
                    
                    x_295803 = ((double *) mem_302555)[i_298071 * C_len_292823 +
                                                       slice_298603];
                    
                    double x_295804;
                    
                    x_295804 = ((double *) ext_mem_303752.mem)[i_298071 *
                                                               ext_303755 +
                                                               i_298067];
                    
                    double defunc_1_f_res_295805 = x_295803 - x_295804;
                    
                    ((double *) mem_303763.mem)[i_298071 * n_292675 +
                                                i_298067] =
                        defunc_1_f_res_295805;
                }
            }
            if (memblock_unref(ctx, &ext_mem_303752, "ext_mem_303752") != 0)
                return 1;
            
            struct memblock ext_mem_305154;
            
            ext_mem_305154.references = NULL;
            
            struct memblock ext_mem_305146;
            
            ext_mem_305146.references = NULL;
            if (cond_293346) {
                bool match_lit_295808 = (int64_t) 0 == d_t_292682;
                int64_t binop_y_303825 = (int64_t) 8 * n_292675;
                int64_t bytes_303826 = smax64((int64_t) 0, binop_y_303825);
                struct memblock ext_mem_304205;
                
                ext_mem_304205.references = NULL;
                
                struct memblock ext_mem_304197;
                
                ext_mem_304197.references = NULL;
                if (match_lit_295808) {
                    struct memblock mem_303810;
                    
                    mem_303810.references = NULL;
                    if (memblock_alloc(ctx, &mem_303810, bytes_300183,
                                       "mem_303810")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_306617 = 0; i_306617 <
                         partition_sizze_292766; i_306617++) {
                        for (int64_t i_306618 = 0; i_306618 < t_n_m_292839;
                             i_306618++) {
                            ((double *) mem_303810.mem)[i_306617 *
                                                        t_n_m_292839 +
                                                        i_306618] = 0.0;
                        }
                    }
                    
                    struct memblock mem_303814;
                    
                    mem_303814.references = NULL;
                    if (memblock_alloc(ctx, &mem_303814, bytes_300183,
                                       "mem_303814")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (mem_303827_cached_sizze_306866 <
                        (size_t) bytes_303826) {
                        mem_303827 = realloc(mem_303827, bytes_303826);
                        mem_303827_cached_sizze_306866 = bytes_303826;
                    }
                    if (mem_303842_cached_sizze_306867 <
                        (size_t) bytes_303826) {
                        mem_303842 = realloc(mem_303842, bytes_303826);
                        mem_303842_cached_sizze_306867 = bytes_303826;
                    }
                    if (mem_303845_cached_sizze_306868 <
                        (size_t) bytes_303826) {
                        mem_303845 = realloc(mem_303845, bytes_303826);
                        mem_303845_cached_sizze_306868 = bytes_303826;
                    }
                    for (int64_t i_298094 = 0; i_298094 <
                         partition_sizze_292766; i_298094++) {
                        int64_t x_295818;
                        
                        x_295818 = ((int64_t *) mem_299512)[i_298094];
                        for (int64_t i_298075 = 0; i_298075 < n_292675;
                             i_298075++) {
                            float x_295822;
                            
                            x_295822 = ((float *) mem_299469)[i_298094 *
                                                              n_292675 +
                                                              i_298075];
                            
                            double x_295823;
                            
                            x_295823 = ((double *) mem_303763.mem)[i_298094 *
                                                                   n_292675 +
                                                                   i_298075];
                            
                            double f32_res_295824 = fpconv_f32_f64(x_295822);
                            double defunc_1_f_res_295825 = f32_res_295824 -
                                   x_295823;
                            
                            ((double *) mem_303827)[i_298075] =
                                defunc_1_f_res_295825;
                        }
                        for (int64_t i_298081 = 0; i_298081 < n_292675;
                             i_298081++) {
                            int64_t x_295828;
                            
                            x_295828 = ((int64_t *) mem_299509)[i_298094 *
                                                                n_292675 +
                                                                i_298081];
                            
                            bool cond_295829 = sle64((int64_t) 0, x_295828);
                            double defunc_0_f_res_295830;
                            
                            if (cond_295829) {
                                bool y_295831 = slt64(x_295828, n_292675);
                                bool bounds_check_295832 = cond_295829 &&
                                     y_295831;
                                bool index_certs_295833;
                                
                                if (!bounds_check_295832) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) x_295828,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_292675, "].",
                                                  "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                    if (memblock_unref(ctx, &mem_303814,
                                                       "mem_303814") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_303810,
                                                       "mem_303810") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_304197,
                                                       "ext_mem_304197") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_304205,
                                                       "ext_mem_304205") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305146,
                                                       "ext_mem_305146") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305154,
                                                       "ext_mem_305154") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_303763,
                                                       "mem_303763") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303752,
                                                       "ext_mem_303752") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303689,
                                                       "ext_mem_303689") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303697,
                                                       "ext_mem_303697") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302544,
                                                       "ext_mem_302544") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302419,
                                                       "ext_mem_302419") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302430,
                                                       "ext_mem_302430") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300343,
                                                       "mem_param_300343") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300335,
                                                       "mem_param_300335") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305217,
                                                       "ext_mem_305217") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305218,
                                                       "ext_mem_305218") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300321,
                                                       "mem_param_300321") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300313,
                                                       "mem_param_300313") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300305,
                                                       "mem_param_300305") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305742,
                                                       "ext_mem_305742") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305743,
                                                       "ext_mem_305743") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305744,
                                                       "ext_mem_305744") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_300297,
                                                       "mem_300297") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_300293,
                                                       "mem_300293") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_306309,
                                                       "mem_out_306309") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_306308,
                                                       "mem_out_306308") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_306307,
                                                       "mem_out_306307") != 0)
                                        return 1;
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                double defunc_0_f_res_t_res_295834;
                                
                                defunc_0_f_res_t_res_295834 =
                                    ((double *) mem_303827)[x_295828];
                                defunc_0_f_res_295830 =
                                    defunc_0_f_res_t_res_295834;
                            } else {
                                defunc_0_f_res_295830 = 0.0;
                            }
                            
                            double defunc_0_f_res_295835;
                            
                            if (cond_295829) {
                                bool y_295836 = slt64(x_295828, n_292675);
                                bool bounds_check_295837 = cond_295829 &&
                                     y_295836;
                                bool index_certs_295838;
                                
                                if (!bounds_check_295837) {
                                    ctx->error =
                                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                  "Index [",
                                                  (long long) x_295828,
                                                  "] out of bounds for array of shape [",
                                                  (long long) n_292675, "].",
                                                  "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                    if (memblock_unref(ctx, &mem_303814,
                                                       "mem_303814") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_303810,
                                                       "mem_303810") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_304197,
                                                       "ext_mem_304197") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_304205,
                                                       "ext_mem_304205") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305146,
                                                       "ext_mem_305146") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305154,
                                                       "ext_mem_305154") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_303763,
                                                       "mem_303763") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303752,
                                                       "ext_mem_303752") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303689,
                                                       "ext_mem_303689") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_303697,
                                                       "ext_mem_303697") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302544,
                                                       "ext_mem_302544") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302419,
                                                       "ext_mem_302419") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_302430,
                                                       "ext_mem_302430") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300343,
                                                       "mem_param_300343") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300335,
                                                       "mem_param_300335") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305217,
                                                       "ext_mem_305217") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305218,
                                                       "ext_mem_305218") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300321,
                                                       "mem_param_300321") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300313,
                                                       "mem_param_300313") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_param_300305,
                                                       "mem_param_300305") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305742,
                                                       "ext_mem_305742") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305743,
                                                       "ext_mem_305743") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &ext_mem_305744,
                                                       "ext_mem_305744") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_300297,
                                                       "mem_300297") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_300293,
                                                       "mem_300293") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_306309,
                                                       "mem_out_306309") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_306308,
                                                       "mem_out_306308") != 0)
                                        return 1;
                                    if (memblock_unref(ctx, &mem_out_306307,
                                                       "mem_out_306307") != 0)
                                        return 1;
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                double defunc_0_f_res_t_res_295839;
                                
                                defunc_0_f_res_t_res_295839 =
                                    ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                      (i_298094 *
                                                                       ctx_param_ext_300317 +
                                                                       x_295828 *
                                                                       ctx_param_ext_300319)];
                                defunc_0_f_res_295835 =
                                    defunc_0_f_res_t_res_295839;
                            } else {
                                defunc_0_f_res_295835 = 0.0;
                            }
                            ((double *) mem_303842)[i_298081] =
                                defunc_0_f_res_295835;
                            ((double *) mem_303845)[i_298081] =
                                defunc_0_f_res_295830;
                        }
                        for (int64_t i_298090 = 0; i_298090 < t_n_m_292839;
                             i_298090++) {
                            int64_t x_295842;
                            
                            x_295842 = ((int64_t *) mem_300184)[i_298094 *
                                                                t_n_m_292839 +
                                                                i_298090];
                            
                            double x_295843;
                            
                            x_295843 = ((double *) mem_300188)[i_298094 *
                                                               t_n_m_292839 +
                                                               i_298090];
                            
                            int64_t min_arg_295844 = mul64(jump_t_292685,
                                                           i_298090);
                            int64_t min_res_295845 = smin64(i_292846,
                                                            min_arg_295844);
                            int64_t defunc_0_g_res_295846 = add64((int64_t) 1,
                                                                  min_res_295845);
                            double defunc_2_reduce_res_295847;
                            double redout_298084 = 0.0;
                            
                            for (int64_t i_298085 = 0; i_298085 < q_t_292679;
                                 i_298085++) {
                                bool cond_295852 = sle64(x_295818, i_298085);
                                int64_t defunc_0_f_res_295853;
                                
                                if (cond_295852) {
                                    defunc_0_f_res_295853 = (int64_t) 0;
                                } else {
                                    int64_t i_295854 = add64(x_295842,
                                                             i_298085);
                                    int64_t defunc_0_add_arg_295855;
                                    
                                    defunc_0_add_arg_295855 =
                                        ((int64_t *) mem_299509)[i_298094 *
                                                                 n_292675 +
                                                                 i_295854];
                                    
                                    int64_t defunc_1_add_res_295856 =
                                            add64((int64_t) 1,
                                                  defunc_0_add_arg_295855);
                                    
                                    defunc_0_f_res_295853 =
                                        defunc_1_add_res_295856;
                                }
                                
                                double defunc_0_f_res_295857;
                                
                                if (cond_295852) {
                                    defunc_0_f_res_295857 = 0.0;
                                } else {
                                    int64_t i_295858 = add64(x_295842,
                                                             i_298085);
                                    double defunc_0_add_arg_295859;
                                    
                                    defunc_0_add_arg_295859 =
                                        ((double *) mem_303842)[i_295858];
                                    defunc_0_f_res_295857 =
                                        defunc_0_add_arg_295859;
                                }
                                
                                int64_t binop_p_295860 =
                                        sub64(defunc_0_f_res_295853,
                                              defunc_0_g_res_295846);
                                double defunc_0_f_res_295861 =
                                       sitofp_i64_f64(binop_p_295860);
                                double abs_res_295862 =
                                       fabs(defunc_0_f_res_295861);
                                double tmp1_295863 = abs_res_295862 / x_295843;
                                double x_295864 = tmp1_295863 * tmp1_295863;
                                double y_295865 = tmp1_295863 * x_295864;
                                double tmp2_295866 = 1.0 - y_295865;
                                double x_295867 = tmp2_295866 * tmp2_295866;
                                double tmp3_295868 = tmp2_295866 * x_295867;
                                double w_j_295869 = defunc_0_f_res_295857 *
                                       tmp3_295868;
                                double defunc_1_op_res_295850 = w_j_295869 +
                                       redout_298084;
                                double redout_tmp_306624 =
                                       defunc_1_op_res_295850;
                                
                                redout_298084 = redout_tmp_306624;
                            }
                            defunc_2_reduce_res_295847 = redout_298084;
                            
                            double a_295870 = 2.220446049250313e-16 +
                                   defunc_2_reduce_res_295847;
                            double a0_295871 = 1.0 / a_295870;
                            double defunc_2_reduce_res_295872;
                            double redout_298086 = 0.0;
                            
                            for (int64_t i_298087 = 0; i_298087 < q_t_292679;
                                 i_298087++) {
                                bool cond_295877 = sle64(x_295818, i_298087);
                                int64_t defunc_0_f_res_295878;
                                
                                if (cond_295877) {
                                    defunc_0_f_res_295878 = (int64_t) 0;
                                } else {
                                    int64_t i_295879 = add64(x_295842,
                                                             i_298087);
                                    int64_t defunc_0_add_arg_295880;
                                    
                                    defunc_0_add_arg_295880 =
                                        ((int64_t *) mem_299509)[i_298094 *
                                                                 n_292675 +
                                                                 i_295879];
                                    
                                    int64_t defunc_1_add_res_295881 =
                                            add64((int64_t) 1,
                                                  defunc_0_add_arg_295880);
                                    
                                    defunc_0_f_res_295878 =
                                        defunc_1_add_res_295881;
                                }
                                
                                double defunc_0_f_res_295882;
                                
                                if (cond_295877) {
                                    defunc_0_f_res_295882 = 0.0;
                                } else {
                                    int64_t i_295883 = add64(x_295842,
                                                             i_298087);
                                    double defunc_0_add_arg_295884;
                                    
                                    defunc_0_add_arg_295884 =
                                        ((double *) mem_303842)[i_295883];
                                    defunc_0_f_res_295882 =
                                        defunc_0_add_arg_295884;
                                }
                                
                                int64_t binop_p_295885 =
                                        sub64(defunc_0_f_res_295878,
                                              defunc_0_g_res_295846);
                                double defunc_0_f_res_295886 =
                                       sitofp_i64_f64(binop_p_295885);
                                double abs_res_295887 =
                                       fabs(defunc_0_f_res_295886);
                                double tmp1_295888 = abs_res_295887 / x_295843;
                                double x_295889 = tmp1_295888 * tmp1_295888;
                                double y_295890 = tmp1_295888 * x_295889;
                                double tmp2_295891 = 1.0 - y_295890;
                                double x_295892 = tmp2_295891 * tmp2_295891;
                                double tmp3_295893 = tmp2_295891 * x_295892;
                                double tmp4_295894 = defunc_0_f_res_295882 *
                                       tmp3_295893;
                                double defunc_0_f_res_295895;
                                
                                if (cond_295877) {
                                    defunc_0_f_res_295895 = 0.0;
                                } else {
                                    int64_t i_295896 = add64(x_295842,
                                                             i_298087);
                                    double defunc_0_add_arg_295897;
                                    
                                    defunc_0_add_arg_295897 =
                                        ((double *) mem_303845)[i_295896];
                                    defunc_0_f_res_295895 =
                                        defunc_0_add_arg_295897;
                                }
                                
                                double x_295898 = a0_295871 * tmp4_295894;
                                double defunc_9_fit_fun_res_295899 =
                                       defunc_0_f_res_295895 * x_295898;
                                double defunc_1_op_res_295875 =
                                       defunc_9_fit_fun_res_295899 +
                                       redout_298086;
                                double redout_tmp_306625 =
                                       defunc_1_op_res_295875;
                                
                                redout_298086 = redout_tmp_306625;
                            }
                            defunc_2_reduce_res_295872 = redout_298086;
                            ((double *) mem_303814.mem)[i_298094 *
                                                        t_n_m_292839 +
                                                        i_298090] =
                                defunc_2_reduce_res_295872;
                        }
                    }
                    if (memblock_set(ctx, &ext_mem_304205, &mem_303814,
                                     "mem_303814") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_304197, &mem_303810,
                                     "mem_303810") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303814, "mem_303814") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303810, "mem_303810") != 0)
                        return 1;
                } else {
                    bool match_lit_295904 = (int64_t) 1 == d_t_292682;
                    int64_t binop_y_303931 = (int64_t) 8 * n_292675;
                    int64_t bytes_303932 = smax64((int64_t) 0, binop_y_303931);
                    int64_t binop_y_304070 = (int64_t) 8 * n_292675;
                    int64_t bytes_304071 = smax64((int64_t) 0, binop_y_304070);
                    struct memblock ext_mem_304189;
                    
                    ext_mem_304189.references = NULL;
                    
                    struct memblock ext_mem_304181;
                    
                    ext_mem_304181.references = NULL;
                    if (match_lit_295904) {
                        struct memblock mem_303906;
                        
                        mem_303906.references = NULL;
                        if (memblock_alloc(ctx, &mem_303906, bytes_300183,
                                           "mem_303906")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_303910;
                        
                        mem_303910.references = NULL;
                        if (memblock_alloc(ctx, &mem_303910, bytes_300183,
                                           "mem_303910")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_303933_cached_sizze_306869 <
                            (size_t) bytes_303932) {
                            mem_303933 = realloc(mem_303933, bytes_303932);
                            mem_303933_cached_sizze_306869 = bytes_303932;
                        }
                        if (mem_303948_cached_sizze_306870 <
                            (size_t) bytes_303932) {
                            mem_303948 = realloc(mem_303948, bytes_303932);
                            mem_303948_cached_sizze_306870 = bytes_303932;
                        }
                        if (mem_303951_cached_sizze_306871 <
                            (size_t) bytes_303932) {
                            mem_303951 = realloc(mem_303951, bytes_303932);
                            mem_303951_cached_sizze_306871 = bytes_303932;
                        }
                        for (int64_t i_298125 = 0; i_298125 <
                             partition_sizze_292766; i_298125++) {
                            int64_t x_295914;
                            
                            x_295914 = ((int64_t *) mem_299512)[i_298125];
                            for (int64_t i_298098 = 0; i_298098 < n_292675;
                                 i_298098++) {
                                float x_295918;
                                
                                x_295918 = ((float *) mem_299469)[i_298125 *
                                                                  n_292675 +
                                                                  i_298098];
                                
                                double x_295919;
                                
                                x_295919 =
                                    ((double *) mem_303763.mem)[i_298125 *
                                                                n_292675 +
                                                                i_298098];
                                
                                double f32_res_295920 =
                                       fpconv_f32_f64(x_295918);
                                double defunc_1_f_res_295921 = f32_res_295920 -
                                       x_295919;
                                
                                ((double *) mem_303933)[i_298098] =
                                    defunc_1_f_res_295921;
                            }
                            for (int64_t i_298104 = 0; i_298104 < n_292675;
                                 i_298104++) {
                                int64_t x_295924;
                                
                                x_295924 = ((int64_t *) mem_299509)[i_298125 *
                                                                    n_292675 +
                                                                    i_298104];
                                
                                bool cond_295925 = sle64((int64_t) 0, x_295924);
                                double defunc_0_f_res_295926;
                                
                                if (cond_295925) {
                                    bool y_295927 = slt64(x_295924, n_292675);
                                    bool bounds_check_295928 = cond_295925 &&
                                         y_295927;
                                    bool index_certs_295929;
                                    
                                    if (!bounds_check_295928) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_295924,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_292675,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_303910,
                                                           "mem_303910") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_303906,
                                                           "mem_303906") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304181,
                                                           "ext_mem_304181") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304189,
                                                           "ext_mem_304189") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304197,
                                                           "ext_mem_304197") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304205,
                                                           "ext_mem_304205") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305146,
                                                           "ext_mem_305146") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305154,
                                                           "ext_mem_305154") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_303763,
                                                           "mem_303763") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303752,
                                                           "ext_mem_303752") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303689,
                                                           "ext_mem_303689") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303697,
                                                           "ext_mem_303697") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302544,
                                                           "ext_mem_302544") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302419,
                                                           "ext_mem_302419") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302430,
                                                           "ext_mem_302430") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300343,
                                                           "mem_param_300343") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300335,
                                                           "mem_param_300335") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305217,
                                                           "ext_mem_305217") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305218,
                                                           "ext_mem_305218") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300321,
                                                           "mem_param_300321") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300313,
                                                           "mem_param_300313") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300305,
                                                           "mem_param_300305") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305742,
                                                           "ext_mem_305742") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305743,
                                                           "ext_mem_305743") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305744,
                                                           "ext_mem_305744") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300297,
                                                           "mem_300297") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300293,
                                                           "mem_300293") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306309,
                                                           "mem_out_306309") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306308,
                                                           "mem_out_306308") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306307,
                                                           "mem_out_306307") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_295930;
                                    
                                    defunc_0_f_res_t_res_295930 =
                                        ((double *) mem_303933)[x_295924];
                                    defunc_0_f_res_295926 =
                                        defunc_0_f_res_t_res_295930;
                                } else {
                                    defunc_0_f_res_295926 = 0.0;
                                }
                                
                                double defunc_0_f_res_295931;
                                
                                if (cond_295925) {
                                    bool y_295932 = slt64(x_295924, n_292675);
                                    bool bounds_check_295933 = cond_295925 &&
                                         y_295932;
                                    bool index_certs_295934;
                                    
                                    if (!bounds_check_295933) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_295924,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_292675,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_303910,
                                                           "mem_303910") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_303906,
                                                           "mem_303906") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304181,
                                                           "ext_mem_304181") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304189,
                                                           "ext_mem_304189") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304197,
                                                           "ext_mem_304197") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304205,
                                                           "ext_mem_304205") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305146,
                                                           "ext_mem_305146") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305154,
                                                           "ext_mem_305154") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_303763,
                                                           "mem_303763") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303752,
                                                           "ext_mem_303752") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303689,
                                                           "ext_mem_303689") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303697,
                                                           "ext_mem_303697") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302544,
                                                           "ext_mem_302544") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302419,
                                                           "ext_mem_302419") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302430,
                                                           "ext_mem_302430") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300343,
                                                           "mem_param_300343") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300335,
                                                           "mem_param_300335") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305217,
                                                           "ext_mem_305217") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305218,
                                                           "ext_mem_305218") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300321,
                                                           "mem_param_300321") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300313,
                                                           "mem_param_300313") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300305,
                                                           "mem_param_300305") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305742,
                                                           "ext_mem_305742") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305743,
                                                           "ext_mem_305743") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305744,
                                                           "ext_mem_305744") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300297,
                                                           "mem_300297") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300293,
                                                           "mem_300293") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306309,
                                                           "mem_out_306309") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306308,
                                                           "mem_out_306308") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306307,
                                                           "mem_out_306307") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_295935;
                                    
                                    defunc_0_f_res_t_res_295935 =
                                        ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                          (i_298125 *
                                                                           ctx_param_ext_300317 +
                                                                           x_295924 *
                                                                           ctx_param_ext_300319)];
                                    defunc_0_f_res_295931 =
                                        defunc_0_f_res_t_res_295935;
                                } else {
                                    defunc_0_f_res_295931 = 0.0;
                                }
                                ((double *) mem_303948)[i_298104] =
                                    defunc_0_f_res_295931;
                                ((double *) mem_303951)[i_298104] =
                                    defunc_0_f_res_295926;
                            }
                            for (int64_t i_298118 = 0; i_298118 < t_n_m_292839;
                                 i_298118++) {
                                int64_t x_295939;
                                
                                x_295939 = ((int64_t *) mem_300184)[i_298125 *
                                                                    t_n_m_292839 +
                                                                    i_298118];
                                
                                double x_295940;
                                
                                x_295940 = ((double *) mem_300188)[i_298125 *
                                                                   t_n_m_292839 +
                                                                   i_298118];
                                
                                int64_t min_arg_295941 = mul64(jump_t_292685,
                                                               i_298118);
                                int64_t min_res_295942 = smin64(i_292846,
                                                                min_arg_295941);
                                int64_t defunc_0_g_res_295943 =
                                        add64((int64_t) 1, min_res_295942);
                                double defunc_2_reduce_res_295944;
                                double defunc_2_reduce_res_295945;
                                double defunc_2_reduce_res_295946;
                                double redout_298107;
                                double redout_298108;
                                double redout_298109;
                                
                                redout_298107 = 0.0;
                                redout_298108 = 0.0;
                                redout_298109 = 0.0;
                                for (int64_t i_298110 = 0; i_298110 <
                                     q_t_292679; i_298110++) {
                                    bool cond_295957 = sle64(x_295914,
                                                             i_298110);
                                    int64_t defunc_0_f_res_295958;
                                    
                                    if (cond_295957) {
                                        defunc_0_f_res_295958 = (int64_t) 0;
                                    } else {
                                        int64_t i_295959 = add64(x_295939,
                                                                 i_298110);
                                        int64_t defunc_0_add_arg_295960;
                                        
                                        defunc_0_add_arg_295960 =
                                            ((int64_t *) mem_299509)[i_298125 *
                                                                     n_292675 +
                                                                     i_295959];
                                        
                                        int64_t defunc_1_add_res_295961 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_295960);
                                        
                                        defunc_0_f_res_295958 =
                                            defunc_1_add_res_295961;
                                    }
                                    
                                    double defunc_0_f_res_295962;
                                    
                                    if (cond_295957) {
                                        defunc_0_f_res_295962 = 0.0;
                                    } else {
                                        int64_t i_295963 = add64(x_295939,
                                                                 i_298110);
                                        double defunc_0_add_arg_295964;
                                        
                                        defunc_0_add_arg_295964 =
                                            ((double *) mem_303948)[i_295963];
                                        defunc_0_f_res_295962 =
                                            defunc_0_add_arg_295964;
                                    }
                                    
                                    int64_t binop_p_295965 =
                                            sub64(defunc_0_f_res_295958,
                                                  defunc_0_g_res_295943);
                                    double defunc_0_f_res_295966 =
                                           sitofp_i64_f64(binop_p_295965);
                                    double abs_res_295967 =
                                           fabs(defunc_0_f_res_295966);
                                    double tmp1_295968 = abs_res_295967 /
                                           x_295940;
                                    double x_295969 = tmp1_295968 * tmp1_295968;
                                    double y_295970 = tmp1_295968 * x_295969;
                                    double tmp2_295971 = 1.0 - y_295970;
                                    double x_295972 = tmp2_295971 * tmp2_295971;
                                    double tmp3_295973 = tmp2_295971 * x_295972;
                                    double w_j_295974 = defunc_0_f_res_295962 *
                                           tmp3_295973;
                                    double xw_j_295975 = defunc_0_f_res_295966 *
                                           w_j_295974;
                                    double x2w_j_295976 =
                                           defunc_0_f_res_295966 * xw_j_295975;
                                    double defunc_1_op_res_295949 = w_j_295974 +
                                           redout_298107;
                                    double defunc_1_op_res_295952 =
                                           xw_j_295975 + redout_298108;
                                    double defunc_1_op_res_295955 =
                                           x2w_j_295976 + redout_298109;
                                    double redout_tmp_306633 =
                                           defunc_1_op_res_295949;
                                    double redout_tmp_306634 =
                                           defunc_1_op_res_295952;
                                    double redout_tmp_306635 =
                                           defunc_1_op_res_295955;
                                    
                                    redout_298107 = redout_tmp_306633;
                                    redout_298108 = redout_tmp_306634;
                                    redout_298109 = redout_tmp_306635;
                                }
                                defunc_2_reduce_res_295944 = redout_298107;
                                defunc_2_reduce_res_295945 = redout_298108;
                                defunc_2_reduce_res_295946 = redout_298109;
                                
                                double a_295977 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_295944;
                                double b_295978 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_295945;
                                double c_295979 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_295946;
                                double x_295980 = a_295977 * c_295979;
                                double y_295981 = b_295978 * b_295978;
                                double y_295982 = x_295980 - y_295981;
                                double det1_295983 = 1.0 / y_295982;
                                double a11_295984 = c_295979 * det1_295983;
                                double x_295985 = 0.0 - b_295978;
                                double b11_295986 = det1_295983 * x_295985;
                                double c11_295987 = a_295977 * det1_295983;
                                double defunc_2_reduce_res_295988;
                                double defunc_2_reduce_res_295989;
                                double redout_298111;
                                double redout_298112;
                                
                                redout_298111 = 0.0;
                                redout_298112 = 0.0;
                                for (int64_t i_298113 = 0; i_298113 <
                                     q_t_292679; i_298113++) {
                                    bool cond_295997 = sle64(x_295914,
                                                             i_298113);
                                    int64_t defunc_0_f_res_295998;
                                    
                                    if (cond_295997) {
                                        defunc_0_f_res_295998 = (int64_t) 0;
                                    } else {
                                        int64_t i_295999 = add64(x_295939,
                                                                 i_298113);
                                        int64_t defunc_0_add_arg_296000;
                                        
                                        defunc_0_add_arg_296000 =
                                            ((int64_t *) mem_299509)[i_298125 *
                                                                     n_292675 +
                                                                     i_295999];
                                        
                                        int64_t defunc_1_add_res_296001 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_296000);
                                        
                                        defunc_0_f_res_295998 =
                                            defunc_1_add_res_296001;
                                    }
                                    
                                    double defunc_0_f_res_296002;
                                    
                                    if (cond_295997) {
                                        defunc_0_f_res_296002 = 0.0;
                                    } else {
                                        int64_t i_296003 = add64(x_295939,
                                                                 i_298113);
                                        double defunc_0_add_arg_296004;
                                        
                                        defunc_0_add_arg_296004 =
                                            ((double *) mem_303948)[i_296003];
                                        defunc_0_f_res_296002 =
                                            defunc_0_add_arg_296004;
                                    }
                                    
                                    int64_t binop_p_296005 =
                                            sub64(defunc_0_f_res_295998,
                                                  defunc_0_g_res_295943);
                                    double defunc_0_f_res_296006 =
                                           sitofp_i64_f64(binop_p_296005);
                                    double abs_res_296007 =
                                           fabs(defunc_0_f_res_296006);
                                    double tmp1_296008 = abs_res_296007 /
                                           x_295940;
                                    double x_296009 = tmp1_296008 * tmp1_296008;
                                    double y_296010 = tmp1_296008 * x_296009;
                                    double tmp2_296011 = 1.0 - y_296010;
                                    double x_296012 = tmp2_296011 * tmp2_296011;
                                    double tmp3_296013 = tmp2_296011 * x_296012;
                                    double tmp4_296014 = defunc_0_f_res_296002 *
                                           tmp3_296013;
                                    double defunc_1_f_res_296015 =
                                           defunc_0_f_res_296006 * tmp4_296014;
                                    double defunc_0_f_res_296016;
                                    
                                    if (cond_295997) {
                                        defunc_0_f_res_296016 = 0.0;
                                    } else {
                                        int64_t i_296017 = add64(x_295939,
                                                                 i_298113);
                                        double defunc_0_add_arg_296018;
                                        
                                        defunc_0_add_arg_296018 =
                                            ((double *) mem_303951)[i_296017];
                                        defunc_0_f_res_296016 =
                                            defunc_0_add_arg_296018;
                                    }
                                    
                                    double x_296019 = a11_295984 * tmp4_296014;
                                    double y_296020 = b11_295986 *
                                           defunc_1_f_res_296015;
                                    double x_296021 = x_296019 + y_296020;
                                    double defunc_9_fit_fun_res_296022 =
                                           defunc_0_f_res_296016 * x_296021;
                                    double x_296023 = b11_295986 * tmp4_296014;
                                    double y_296024 = c11_295987 *
                                           defunc_1_f_res_296015;
                                    double x_296025 = x_296023 + y_296024;
                                    double defunc_9_slope_fun_res_296026 =
                                           defunc_0_f_res_296016 * x_296025;
                                    double defunc_1_op_res_295992 =
                                           defunc_9_fit_fun_res_296022 +
                                           redout_298111;
                                    double defunc_1_op_res_295995 =
                                           defunc_9_slope_fun_res_296026 +
                                           redout_298112;
                                    double redout_tmp_306636 =
                                           defunc_1_op_res_295992;
                                    double redout_tmp_306637 =
                                           defunc_1_op_res_295995;
                                    
                                    redout_298111 = redout_tmp_306636;
                                    redout_298112 = redout_tmp_306637;
                                }
                                defunc_2_reduce_res_295988 = redout_298111;
                                defunc_2_reduce_res_295989 = redout_298112;
                                ((double *) mem_303906.mem)[i_298125 *
                                                            t_n_m_292839 +
                                                            i_298118] =
                                    defunc_2_reduce_res_295988;
                                ((double *) mem_303910.mem)[i_298125 *
                                                            t_n_m_292839 +
                                                            i_298118] =
                                    defunc_2_reduce_res_295989;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_304189, &mem_303906,
                                         "mem_303906") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_304181, &mem_303910,
                                         "mem_303910") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303910, "mem_303910") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_303906, "mem_303906") != 0)
                            return 1;
                    } else {
                        struct memblock mem_304045;
                        
                        mem_304045.references = NULL;
                        if (memblock_alloc(ctx, &mem_304045, bytes_300183,
                                           "mem_304045")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_304049;
                        
                        mem_304049.references = NULL;
                        if (memblock_alloc(ctx, &mem_304049, bytes_300183,
                                           "mem_304049")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_304072_cached_sizze_306872 <
                            (size_t) bytes_304071) {
                            mem_304072 = realloc(mem_304072, bytes_304071);
                            mem_304072_cached_sizze_306872 = bytes_304071;
                        }
                        if (mem_304087_cached_sizze_306873 <
                            (size_t) bytes_304071) {
                            mem_304087 = realloc(mem_304087, bytes_304071);
                            mem_304087_cached_sizze_306873 = bytes_304071;
                        }
                        if (mem_304090_cached_sizze_306874 <
                            (size_t) bytes_304071) {
                            mem_304090 = realloc(mem_304090, bytes_304071);
                            mem_304090_cached_sizze_306874 = bytes_304071;
                        }
                        for (int64_t i_298159 = 0; i_298159 <
                             partition_sizze_292766; i_298159++) {
                            int64_t x_296038;
                            
                            x_296038 = ((int64_t *) mem_299512)[i_298159];
                            for (int64_t i_298130 = 0; i_298130 < n_292675;
                                 i_298130++) {
                                float x_296042;
                                
                                x_296042 = ((float *) mem_299469)[i_298159 *
                                                                  n_292675 +
                                                                  i_298130];
                                
                                double x_296043;
                                
                                x_296043 =
                                    ((double *) mem_303763.mem)[i_298159 *
                                                                n_292675 +
                                                                i_298130];
                                
                                double f32_res_296044 =
                                       fpconv_f32_f64(x_296042);
                                double defunc_1_f_res_296045 = f32_res_296044 -
                                       x_296043;
                                
                                ((double *) mem_304072)[i_298130] =
                                    defunc_1_f_res_296045;
                            }
                            for (int64_t i_298136 = 0; i_298136 < n_292675;
                                 i_298136++) {
                                int64_t x_296048;
                                
                                x_296048 = ((int64_t *) mem_299509)[i_298159 *
                                                                    n_292675 +
                                                                    i_298136];
                                
                                bool cond_296049 = sle64((int64_t) 0, x_296048);
                                double defunc_0_f_res_296050;
                                
                                if (cond_296049) {
                                    bool y_296051 = slt64(x_296048, n_292675);
                                    bool bounds_check_296052 = cond_296049 &&
                                         y_296051;
                                    bool index_certs_296053;
                                    
                                    if (!bounds_check_296052) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_296048,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_292675,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_304049,
                                                           "mem_304049") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_304045,
                                                           "mem_304045") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304181,
                                                           "ext_mem_304181") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304189,
                                                           "ext_mem_304189") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304197,
                                                           "ext_mem_304197") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304205,
                                                           "ext_mem_304205") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305146,
                                                           "ext_mem_305146") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305154,
                                                           "ext_mem_305154") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_303763,
                                                           "mem_303763") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303752,
                                                           "ext_mem_303752") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303689,
                                                           "ext_mem_303689") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303697,
                                                           "ext_mem_303697") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302544,
                                                           "ext_mem_302544") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302419,
                                                           "ext_mem_302419") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302430,
                                                           "ext_mem_302430") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300343,
                                                           "mem_param_300343") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300335,
                                                           "mem_param_300335") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305217,
                                                           "ext_mem_305217") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305218,
                                                           "ext_mem_305218") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300321,
                                                           "mem_param_300321") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300313,
                                                           "mem_param_300313") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300305,
                                                           "mem_param_300305") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305742,
                                                           "ext_mem_305742") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305743,
                                                           "ext_mem_305743") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305744,
                                                           "ext_mem_305744") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300297,
                                                           "mem_300297") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300293,
                                                           "mem_300293") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306309,
                                                           "mem_out_306309") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306308,
                                                           "mem_out_306308") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306307,
                                                           "mem_out_306307") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_296054;
                                    
                                    defunc_0_f_res_t_res_296054 =
                                        ((double *) mem_304072)[x_296048];
                                    defunc_0_f_res_296050 =
                                        defunc_0_f_res_t_res_296054;
                                } else {
                                    defunc_0_f_res_296050 = 0.0;
                                }
                                
                                double defunc_0_f_res_296055;
                                
                                if (cond_296049) {
                                    bool y_296056 = slt64(x_296048, n_292675);
                                    bool bounds_check_296057 = cond_296049 &&
                                         y_296056;
                                    bool index_certs_296058;
                                    
                                    if (!bounds_check_296057) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_296048,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_292675,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_304049,
                                                           "mem_304049") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_304045,
                                                           "mem_304045") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304181,
                                                           "ext_mem_304181") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304189,
                                                           "ext_mem_304189") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304197,
                                                           "ext_mem_304197") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304205,
                                                           "ext_mem_304205") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305146,
                                                           "ext_mem_305146") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305154,
                                                           "ext_mem_305154") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_303763,
                                                           "mem_303763") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303752,
                                                           "ext_mem_303752") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303689,
                                                           "ext_mem_303689") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303697,
                                                           "ext_mem_303697") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302544,
                                                           "ext_mem_302544") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302419,
                                                           "ext_mem_302419") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302430,
                                                           "ext_mem_302430") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300343,
                                                           "mem_param_300343") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300335,
                                                           "mem_param_300335") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305217,
                                                           "ext_mem_305217") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305218,
                                                           "ext_mem_305218") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300321,
                                                           "mem_param_300321") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300313,
                                                           "mem_param_300313") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300305,
                                                           "mem_param_300305") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305742,
                                                           "ext_mem_305742") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305743,
                                                           "ext_mem_305743") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305744,
                                                           "ext_mem_305744") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300297,
                                                           "mem_300297") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300293,
                                                           "mem_300293") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306309,
                                                           "mem_out_306309") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306308,
                                                           "mem_out_306308") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306307,
                                                           "mem_out_306307") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_296059;
                                    
                                    defunc_0_f_res_t_res_296059 =
                                        ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                          (i_298159 *
                                                                           ctx_param_ext_300317 +
                                                                           x_296048 *
                                                                           ctx_param_ext_300319)];
                                    defunc_0_f_res_296055 =
                                        defunc_0_f_res_t_res_296059;
                                } else {
                                    defunc_0_f_res_296055 = 0.0;
                                }
                                ((double *) mem_304087)[i_298136] =
                                    defunc_0_f_res_296055;
                                ((double *) mem_304090)[i_298136] =
                                    defunc_0_f_res_296050;
                            }
                            for (int64_t i_298152 = 0; i_298152 < t_n_m_292839;
                                 i_298152++) {
                                int64_t x_296063;
                                
                                x_296063 = ((int64_t *) mem_300184)[i_298159 *
                                                                    t_n_m_292839 +
                                                                    i_298152];
                                
                                double x_296064;
                                
                                x_296064 = ((double *) mem_300188)[i_298159 *
                                                                   t_n_m_292839 +
                                                                   i_298152];
                                
                                int64_t min_arg_296065 = mul64(jump_t_292685,
                                                               i_298152);
                                int64_t min_res_296066 = smin64(i_292846,
                                                                min_arg_296065);
                                int64_t defunc_0_g_res_296067 =
                                        add64((int64_t) 1, min_res_296066);
                                double defunc_2_reduce_res_296068;
                                double defunc_2_reduce_res_296069;
                                double defunc_2_reduce_res_296070;
                                double defunc_2_reduce_res_296071;
                                double defunc_2_reduce_res_296072;
                                double redout_298139;
                                double redout_298140;
                                double redout_298141;
                                double redout_298142;
                                double redout_298143;
                                
                                redout_298139 = 0.0;
                                redout_298140 = 0.0;
                                redout_298141 = 0.0;
                                redout_298142 = 0.0;
                                redout_298143 = 0.0;
                                for (int64_t i_298144 = 0; i_298144 <
                                     q_t_292679; i_298144++) {
                                    bool cond_296089 = sle64(x_296038,
                                                             i_298144);
                                    int64_t defunc_0_f_res_296090;
                                    
                                    if (cond_296089) {
                                        defunc_0_f_res_296090 = (int64_t) 0;
                                    } else {
                                        int64_t i_296091 = add64(x_296063,
                                                                 i_298144);
                                        int64_t defunc_0_add_arg_296092;
                                        
                                        defunc_0_add_arg_296092 =
                                            ((int64_t *) mem_299509)[i_298159 *
                                                                     n_292675 +
                                                                     i_296091];
                                        
                                        int64_t defunc_1_add_res_296093 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_296092);
                                        
                                        defunc_0_f_res_296090 =
                                            defunc_1_add_res_296093;
                                    }
                                    
                                    double defunc_0_f_res_296094;
                                    
                                    if (cond_296089) {
                                        defunc_0_f_res_296094 = 0.0;
                                    } else {
                                        int64_t i_296095 = add64(x_296063,
                                                                 i_298144);
                                        double defunc_0_add_arg_296096;
                                        
                                        defunc_0_add_arg_296096 =
                                            ((double *) mem_304087)[i_296095];
                                        defunc_0_f_res_296094 =
                                            defunc_0_add_arg_296096;
                                    }
                                    
                                    int64_t binop_p_296097 =
                                            sub64(defunc_0_f_res_296090,
                                                  defunc_0_g_res_296067);
                                    double defunc_0_f_res_296098 =
                                           sitofp_i64_f64(binop_p_296097);
                                    double abs_res_296099 =
                                           fabs(defunc_0_f_res_296098);
                                    double tmp1_296100 = abs_res_296099 /
                                           x_296064;
                                    double x_296101 = tmp1_296100 * tmp1_296100;
                                    double y_296102 = tmp1_296100 * x_296101;
                                    double tmp2_296103 = 1.0 - y_296102;
                                    double x_296104 = tmp2_296103 * tmp2_296103;
                                    double tmp3_296105 = tmp2_296103 * x_296104;
                                    double w_j_296106 = defunc_0_f_res_296094 *
                                           tmp3_296105;
                                    double xw_j_296107 = defunc_0_f_res_296098 *
                                           w_j_296106;
                                    double x2w_j_296108 =
                                           defunc_0_f_res_296098 * xw_j_296107;
                                    double x3w_j_296109 =
                                           defunc_0_f_res_296098 * x2w_j_296108;
                                    double x4w_j_296110 =
                                           defunc_0_f_res_296098 * x3w_j_296109;
                                    double defunc_1_op_res_296075 = w_j_296106 +
                                           redout_298139;
                                    double defunc_1_op_res_296078 =
                                           xw_j_296107 + redout_298140;
                                    double defunc_1_op_res_296081 =
                                           x2w_j_296108 + redout_298141;
                                    double defunc_1_op_res_296084 =
                                           x3w_j_296109 + redout_298142;
                                    double defunc_1_op_res_296087 =
                                           x4w_j_296110 + redout_298143;
                                    double redout_tmp_306645 =
                                           defunc_1_op_res_296075;
                                    double redout_tmp_306646 =
                                           defunc_1_op_res_296078;
                                    double redout_tmp_306647 =
                                           defunc_1_op_res_296081;
                                    double redout_tmp_306648 =
                                           defunc_1_op_res_296084;
                                    double redout_tmp_306649 =
                                           defunc_1_op_res_296087;
                                    
                                    redout_298139 = redout_tmp_306645;
                                    redout_298140 = redout_tmp_306646;
                                    redout_298141 = redout_tmp_306647;
                                    redout_298142 = redout_tmp_306648;
                                    redout_298143 = redout_tmp_306649;
                                }
                                defunc_2_reduce_res_296068 = redout_298139;
                                defunc_2_reduce_res_296069 = redout_298140;
                                defunc_2_reduce_res_296070 = redout_298141;
                                defunc_2_reduce_res_296071 = redout_298142;
                                defunc_2_reduce_res_296072 = redout_298143;
                                
                                double a_296111 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_296068;
                                double b_296112 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_296069;
                                double c_296113 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_296070;
                                double d_296114 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_296071;
                                double e_296115 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_296072;
                                double x_296116 = c_296113 * e_296115;
                                double y_296117 = d_296114 * d_296114;
                                double a12_296118 = x_296116 - y_296117;
                                double x_296119 = c_296113 * d_296114;
                                double y_296120 = b_296112 * e_296115;
                                double b12_296121 = x_296119 - y_296120;
                                double x_296122 = b_296112 * d_296114;
                                double y_296123 = c_296113 * c_296113;
                                double c12_296124 = x_296122 - y_296123;
                                double x_296125 = a_296111 * e_296115;
                                double b2_296126 = x_296125 - y_296123;
                                double x_296127 = b_296112 * c_296113;
                                double y_296128 = a_296111 * d_296114;
                                double c2_296129 = x_296127 - y_296128;
                                double x_296130 = a_296111 * a12_296118;
                                double y_296131 = b_296112 * b12_296121;
                                double x_296132 = x_296130 + y_296131;
                                double y_296133 = c_296113 * c12_296124;
                                double y_296134 = x_296132 + y_296133;
                                double det_296135 = 1.0 / y_296134;
                                double a12_296136 = a12_296118 * det_296135;
                                double b12_296137 = b12_296121 * det_296135;
                                double c12_296138 = c12_296124 * det_296135;
                                double b2_296139 = b2_296126 * det_296135;
                                double c2_296140 = c2_296129 * det_296135;
                                double defunc_2_reduce_res_296141;
                                double defunc_2_reduce_res_296142;
                                double redout_298145;
                                double redout_298146;
                                
                                redout_298145 = 0.0;
                                redout_298146 = 0.0;
                                for (int64_t i_298147 = 0; i_298147 <
                                     q_t_292679; i_298147++) {
                                    bool cond_296150 = sle64(x_296038,
                                                             i_298147);
                                    int64_t defunc_0_f_res_296151;
                                    
                                    if (cond_296150) {
                                        defunc_0_f_res_296151 = (int64_t) 0;
                                    } else {
                                        int64_t i_296152 = add64(x_296063,
                                                                 i_298147);
                                        int64_t defunc_0_add_arg_296153;
                                        
                                        defunc_0_add_arg_296153 =
                                            ((int64_t *) mem_299509)[i_298159 *
                                                                     n_292675 +
                                                                     i_296152];
                                        
                                        int64_t defunc_1_add_res_296154 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_296153);
                                        
                                        defunc_0_f_res_296151 =
                                            defunc_1_add_res_296154;
                                    }
                                    
                                    double defunc_0_f_res_296155;
                                    
                                    if (cond_296150) {
                                        defunc_0_f_res_296155 = 0.0;
                                    } else {
                                        int64_t i_296156 = add64(x_296063,
                                                                 i_298147);
                                        double defunc_0_add_arg_296157;
                                        
                                        defunc_0_add_arg_296157 =
                                            ((double *) mem_304087)[i_296156];
                                        defunc_0_f_res_296155 =
                                            defunc_0_add_arg_296157;
                                    }
                                    
                                    int64_t binop_p_296158 =
                                            sub64(defunc_0_f_res_296151,
                                                  defunc_0_g_res_296067);
                                    double defunc_0_f_res_296159 =
                                           sitofp_i64_f64(binop_p_296158);
                                    double abs_res_296160 =
                                           fabs(defunc_0_f_res_296159);
                                    double tmp1_296161 = abs_res_296160 /
                                           x_296064;
                                    double x_296162 = tmp1_296161 * tmp1_296161;
                                    double y_296163 = tmp1_296161 * x_296162;
                                    double tmp2_296164 = 1.0 - y_296163;
                                    double x_296165 = tmp2_296164 * tmp2_296164;
                                    double tmp3_296166 = tmp2_296164 * x_296165;
                                    double tmp4_296167 = defunc_0_f_res_296155 *
                                           tmp3_296166;
                                    double defunc_1_f_res_296168 =
                                           defunc_0_f_res_296159 * tmp4_296167;
                                    double defunc_1_f_res_296169 =
                                           defunc_0_f_res_296159 *
                                           defunc_1_f_res_296168;
                                    double defunc_0_f_res_296170;
                                    
                                    if (cond_296150) {
                                        defunc_0_f_res_296170 = 0.0;
                                    } else {
                                        int64_t i_296171 = add64(x_296063,
                                                                 i_298147);
                                        double defunc_0_add_arg_296172;
                                        
                                        defunc_0_add_arg_296172 =
                                            ((double *) mem_304090)[i_296171];
                                        defunc_0_f_res_296170 =
                                            defunc_0_add_arg_296172;
                                    }
                                    
                                    double x_296173 = a12_296136 * tmp4_296167;
                                    double y_296174 = b12_296137 *
                                           defunc_1_f_res_296168;
                                    double x_296175 = x_296173 + y_296174;
                                    double y_296176 = c12_296138 *
                                           defunc_1_f_res_296169;
                                    double x_296177 = x_296175 + y_296176;
                                    double defunc_9_fit_fun_res_296178 =
                                           defunc_0_f_res_296170 * x_296177;
                                    double x_296179 = b12_296137 * tmp4_296167;
                                    double y_296180 = b2_296139 *
                                           defunc_1_f_res_296168;
                                    double x_296181 = x_296179 + y_296180;
                                    double y_296182 = c2_296140 *
                                           defunc_1_f_res_296169;
                                    double x_296183 = x_296181 + y_296182;
                                    double defunc_9_slope_fun_res_296184 =
                                           defunc_0_f_res_296170 * x_296183;
                                    double defunc_1_op_res_296145 =
                                           defunc_9_fit_fun_res_296178 +
                                           redout_298145;
                                    double defunc_1_op_res_296148 =
                                           defunc_9_slope_fun_res_296184 +
                                           redout_298146;
                                    double redout_tmp_306650 =
                                           defunc_1_op_res_296145;
                                    double redout_tmp_306651 =
                                           defunc_1_op_res_296148;
                                    
                                    redout_298145 = redout_tmp_306650;
                                    redout_298146 = redout_tmp_306651;
                                }
                                defunc_2_reduce_res_296141 = redout_298145;
                                defunc_2_reduce_res_296142 = redout_298146;
                                ((double *) mem_304045.mem)[i_298159 *
                                                            t_n_m_292839 +
                                                            i_298152] =
                                    defunc_2_reduce_res_296141;
                                ((double *) mem_304049.mem)[i_298159 *
                                                            t_n_m_292839 +
                                                            i_298152] =
                                    defunc_2_reduce_res_296142;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_304189, &mem_304045,
                                         "mem_304045") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_304181, &mem_304049,
                                         "mem_304049") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_304049, "mem_304049") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_304045, "mem_304045") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_304205, &ext_mem_304189,
                                     "ext_mem_304189") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_304197, &ext_mem_304181,
                                     "ext_mem_304181") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_304181,
                                       "ext_mem_304181") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_304189,
                                       "ext_mem_304189") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_305154, &ext_mem_304205,
                                 "ext_mem_304205") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_305146, &ext_mem_304197,
                                 "ext_mem_304197") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_304197, "ext_mem_304197") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_304205, "ext_mem_304205") != 0)
                    return 1;
            } else {
                bool cond_296189 = sle64(jump_threshold_2_292690,
                                         jump_t_292685);
                bool cond_t_res_296190 = slt64(q_t_292679,
                                               q_threshold_1_292691);
                bool x_296191 = cond_296189 && cond_t_res_296190;
                struct memblock ext_mem_305138;
                
                ext_mem_305138.references = NULL;
                
                struct memblock ext_mem_305130;
                
                ext_mem_305130.references = NULL;
                if (x_296191) {
                    bool match_lit_296194 = (int64_t) 0 == d_t_292682;
                    int64_t binop_y_304231 = (int64_t) 8 * n_292675;
                    int64_t bytes_304232 = smax64((int64_t) 0, binop_y_304231);
                    int64_t binop_y_304287 = (int64_t) 8 * q_t_292679;
                    int64_t bytes_304288 = smax64((int64_t) 0, binop_y_304287);
                    struct memblock ext_mem_304716;
                    
                    ext_mem_304716.references = NULL;
                    
                    struct memblock ext_mem_304708;
                    
                    ext_mem_304708.references = NULL;
                    if (match_lit_296194) {
                        struct memblock mem_304216;
                        
                        mem_304216.references = NULL;
                        if (memblock_alloc(ctx, &mem_304216, bytes_300183,
                                           "mem_304216")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_306652 = 0; i_306652 <
                             partition_sizze_292766; i_306652++) {
                            for (int64_t i_306653 = 0; i_306653 < t_n_m_292839;
                                 i_306653++) {
                                ((double *) mem_304216.mem)[i_306652 *
                                                            t_n_m_292839 +
                                                            i_306653] = 0.0;
                            }
                        }
                        
                        struct memblock mem_304220;
                        
                        mem_304220.references = NULL;
                        if (memblock_alloc(ctx, &mem_304220, bytes_300183,
                                           "mem_304220")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_304233_cached_sizze_306875 <
                            (size_t) bytes_304232) {
                            mem_304233 = realloc(mem_304233, bytes_304232);
                            mem_304233_cached_sizze_306875 = bytes_304232;
                        }
                        if (mem_304248_cached_sizze_306876 <
                            (size_t) bytes_304232) {
                            mem_304248 = realloc(mem_304248, bytes_304232);
                            mem_304248_cached_sizze_306876 = bytes_304232;
                        }
                        if (mem_304251_cached_sizze_306877 <
                            (size_t) bytes_304232) {
                            mem_304251 = realloc(mem_304251, bytes_304232);
                            mem_304251_cached_sizze_306877 = bytes_304232;
                        }
                        if (mem_304289_cached_sizze_306878 <
                            (size_t) bytes_304288) {
                            mem_304289 = realloc(mem_304289, bytes_304288);
                            mem_304289_cached_sizze_306878 = bytes_304288;
                        }
                        for (int64_t i_298186 = 0; i_298186 <
                             partition_sizze_292766; i_298186++) {
                            int64_t x_296204;
                            
                            x_296204 = ((int64_t *) mem_299512)[i_298186];
                            for (int64_t i_298164 = 0; i_298164 < n_292675;
                                 i_298164++) {
                                float x_296208;
                                
                                x_296208 = ((float *) mem_299469)[i_298186 *
                                                                  n_292675 +
                                                                  i_298164];
                                
                                double x_296209;
                                
                                x_296209 =
                                    ((double *) mem_303763.mem)[i_298186 *
                                                                n_292675 +
                                                                i_298164];
                                
                                double f32_res_296210 =
                                       fpconv_f32_f64(x_296208);
                                double defunc_1_f_res_296211 = f32_res_296210 -
                                       x_296209;
                                
                                ((double *) mem_304233)[i_298164] =
                                    defunc_1_f_res_296211;
                            }
                            for (int64_t i_298170 = 0; i_298170 < n_292675;
                                 i_298170++) {
                                int64_t x_296214;
                                
                                x_296214 = ((int64_t *) mem_299509)[i_298186 *
                                                                    n_292675 +
                                                                    i_298170];
                                
                                bool cond_296215 = sle64((int64_t) 0, x_296214);
                                double defunc_0_f_res_296216;
                                
                                if (cond_296215) {
                                    bool y_296217 = slt64(x_296214, n_292675);
                                    bool bounds_check_296218 = cond_296215 &&
                                         y_296217;
                                    bool index_certs_296219;
                                    
                                    if (!bounds_check_296218) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_296214,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_292675,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_304220,
                                                           "mem_304220") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_304216,
                                                           "mem_304216") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304708,
                                                           "ext_mem_304708") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304716,
                                                           "ext_mem_304716") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305130,
                                                           "ext_mem_305130") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305138,
                                                           "ext_mem_305138") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305146,
                                                           "ext_mem_305146") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305154,
                                                           "ext_mem_305154") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_303763,
                                                           "mem_303763") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303752,
                                                           "ext_mem_303752") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303689,
                                                           "ext_mem_303689") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303697,
                                                           "ext_mem_303697") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302544,
                                                           "ext_mem_302544") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302419,
                                                           "ext_mem_302419") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302430,
                                                           "ext_mem_302430") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300343,
                                                           "mem_param_300343") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300335,
                                                           "mem_param_300335") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305217,
                                                           "ext_mem_305217") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305218,
                                                           "ext_mem_305218") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300321,
                                                           "mem_param_300321") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300313,
                                                           "mem_param_300313") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300305,
                                                           "mem_param_300305") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305742,
                                                           "ext_mem_305742") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305743,
                                                           "ext_mem_305743") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305744,
                                                           "ext_mem_305744") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300297,
                                                           "mem_300297") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300293,
                                                           "mem_300293") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306309,
                                                           "mem_out_306309") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306308,
                                                           "mem_out_306308") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306307,
                                                           "mem_out_306307") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_296220;
                                    
                                    defunc_0_f_res_t_res_296220 =
                                        ((double *) mem_304233)[x_296214];
                                    defunc_0_f_res_296216 =
                                        defunc_0_f_res_t_res_296220;
                                } else {
                                    defunc_0_f_res_296216 = 0.0;
                                }
                                
                                double defunc_0_f_res_296221;
                                
                                if (cond_296215) {
                                    bool y_296222 = slt64(x_296214, n_292675);
                                    bool bounds_check_296223 = cond_296215 &&
                                         y_296222;
                                    bool index_certs_296224;
                                    
                                    if (!bounds_check_296223) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_296214,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_292675,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_304220,
                                                           "mem_304220") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_304216,
                                                           "mem_304216") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304708,
                                                           "ext_mem_304708") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_304716,
                                                           "ext_mem_304716") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305130,
                                                           "ext_mem_305130") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305138,
                                                           "ext_mem_305138") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305146,
                                                           "ext_mem_305146") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305154,
                                                           "ext_mem_305154") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_303763,
                                                           "mem_303763") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303752,
                                                           "ext_mem_303752") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303689,
                                                           "ext_mem_303689") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303697,
                                                           "ext_mem_303697") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302544,
                                                           "ext_mem_302544") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302419,
                                                           "ext_mem_302419") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302430,
                                                           "ext_mem_302430") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300343,
                                                           "mem_param_300343") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300335,
                                                           "mem_param_300335") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305217,
                                                           "ext_mem_305217") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305218,
                                                           "ext_mem_305218") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300321,
                                                           "mem_param_300321") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300313,
                                                           "mem_param_300313") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300305,
                                                           "mem_param_300305") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305742,
                                                           "ext_mem_305742") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305743,
                                                           "ext_mem_305743") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305744,
                                                           "ext_mem_305744") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300297,
                                                           "mem_300297") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300293,
                                                           "mem_300293") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306309,
                                                           "mem_out_306309") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306308,
                                                           "mem_out_306308") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306307,
                                                           "mem_out_306307") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_296225;
                                    
                                    defunc_0_f_res_t_res_296225 =
                                        ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                          (i_298186 *
                                                                           ctx_param_ext_300317 +
                                                                           x_296214 *
                                                                           ctx_param_ext_300319)];
                                    defunc_0_f_res_296221 =
                                        defunc_0_f_res_t_res_296225;
                                } else {
                                    defunc_0_f_res_296221 = 0.0;
                                }
                                ((double *) mem_304248)[i_298170] =
                                    defunc_0_f_res_296221;
                                ((double *) mem_304251)[i_298170] =
                                    defunc_0_f_res_296216;
                            }
                            for (int64_t i_298182 = 0; i_298182 < t_n_m_292839;
                                 i_298182++) {
                                int64_t x_296228;
                                
                                x_296228 = ((int64_t *) mem_300184)[i_298186 *
                                                                    t_n_m_292839 +
                                                                    i_298182];
                                
                                double x_296229;
                                
                                x_296229 = ((double *) mem_300188)[i_298186 *
                                                                   t_n_m_292839 +
                                                                   i_298182];
                                
                                int64_t min_arg_296230 = mul64(jump_t_292685,
                                                               i_298182);
                                int64_t min_res_296231 = smin64(i_292846,
                                                                min_arg_296230);
                                int64_t defunc_0_g_res_296232 =
                                        add64((int64_t) 1, min_res_296231);
                                double defunc_2_reduce_res_296233;
                                double redout_298174 = 0.0;
                                
                                for (int64_t i_298176 = 0; i_298176 <
                                     q_t_292679; i_298176++) {
                                    bool cond_296239 = sle64(x_296204,
                                                             i_298176);
                                    int64_t defunc_0_f_res_296240;
                                    
                                    if (cond_296239) {
                                        defunc_0_f_res_296240 = (int64_t) 0;
                                    } else {
                                        int64_t i_296241 = add64(x_296228,
                                                                 i_298176);
                                        int64_t defunc_0_add_arg_296242;
                                        
                                        defunc_0_add_arg_296242 =
                                            ((int64_t *) mem_299509)[i_298186 *
                                                                     n_292675 +
                                                                     i_296241];
                                        
                                        int64_t defunc_1_add_res_296243 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_296242);
                                        
                                        defunc_0_f_res_296240 =
                                            defunc_1_add_res_296243;
                                    }
                                    
                                    double defunc_0_f_res_296244;
                                    
                                    if (cond_296239) {
                                        defunc_0_f_res_296244 = 0.0;
                                    } else {
                                        int64_t i_296245 = add64(x_296228,
                                                                 i_298176);
                                        double defunc_0_add_arg_296246;
                                        
                                        defunc_0_add_arg_296246 =
                                            ((double *) mem_304248)[i_296245];
                                        defunc_0_f_res_296244 =
                                            defunc_0_add_arg_296246;
                                    }
                                    
                                    int64_t binop_p_296247 =
                                            sub64(defunc_0_f_res_296240,
                                                  defunc_0_g_res_296232);
                                    double defunc_0_f_res_296248 =
                                           sitofp_i64_f64(binop_p_296247);
                                    double abs_res_296249 =
                                           fabs(defunc_0_f_res_296248);
                                    double tmp1_296250 = abs_res_296249 /
                                           x_296229;
                                    double x_296251 = tmp1_296250 * tmp1_296250;
                                    double y_296252 = tmp1_296250 * x_296251;
                                    double tmp2_296253 = 1.0 - y_296252;
                                    double x_296254 = tmp2_296253 * tmp2_296253;
                                    double tmp3_296255 = tmp2_296253 * x_296254;
                                    double tmp4_296256 = defunc_0_f_res_296244 *
                                           tmp3_296255;
                                    double defunc_1_op_res_296237 =
                                           tmp4_296256 + redout_298174;
                                    
                                    ((double *) mem_304289)[i_298176] =
                                        tmp4_296256;
                                    
                                    double redout_tmp_306659 =
                                           defunc_1_op_res_296237;
                                    
                                    redout_298174 = redout_tmp_306659;
                                }
                                defunc_2_reduce_res_296233 = redout_298174;
                                
                                double a_296257 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_296233;
                                double a0_296258 = 1.0 / a_296257;
                                double defunc_2_reduce_res_296259;
                                double redout_298178 = 0.0;
                                
                                for (int64_t i_298179 = 0; i_298179 <
                                     q_t_292679; i_298179++) {
                                    double x_296264;
                                    
                                    x_296264 =
                                        ((double *) mem_304289)[i_298179];
                                    
                                    bool cond_296265 = sle64(x_296204,
                                                             i_298179);
                                    double defunc_0_f_res_296266;
                                    
                                    if (cond_296265) {
                                        defunc_0_f_res_296266 = 0.0;
                                    } else {
                                        int64_t i_296267 = add64(x_296228,
                                                                 i_298179);
                                        double defunc_0_add_arg_296268;
                                        
                                        defunc_0_add_arg_296268 =
                                            ((double *) mem_304251)[i_296267];
                                        defunc_0_f_res_296266 =
                                            defunc_0_add_arg_296268;
                                    }
                                    
                                    double x_296269 = a0_296258 * x_296264;
                                    double defunc_9_fit_fun_res_296270 =
                                           defunc_0_f_res_296266 * x_296269;
                                    double defunc_1_op_res_296262 =
                                           defunc_9_fit_fun_res_296270 +
                                           redout_298178;
                                    double redout_tmp_306661 =
                                           defunc_1_op_res_296262;
                                    
                                    redout_298178 = redout_tmp_306661;
                                }
                                defunc_2_reduce_res_296259 = redout_298178;
                                ((double *) mem_304220.mem)[i_298186 *
                                                            t_n_m_292839 +
                                                            i_298182] =
                                    defunc_2_reduce_res_296259;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_304716, &mem_304220,
                                         "mem_304220") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_304708, &mem_304216,
                                         "mem_304216") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_304220, "mem_304220") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_304216, "mem_304216") != 0)
                            return 1;
                    } else {
                        bool match_lit_296275 = (int64_t) 1 == d_t_292682;
                        int64_t binop_y_304352 = (int64_t) 8 * n_292675;
                        int64_t bytes_304353 = smax64((int64_t) 0,
                                                      binop_y_304352);
                        int64_t binop_y_304419 = (int64_t) 8 * q_t_292679;
                        int64_t bytes_304420 = smax64((int64_t) 0,
                                                      binop_y_304419);
                        int64_t binop_y_304521 = (int64_t) 8 * n_292675;
                        int64_t bytes_304522 = smax64((int64_t) 0,
                                                      binop_y_304521);
                        int64_t binop_y_304588 = (int64_t) 8 * q_t_292679;
                        int64_t bytes_304589 = smax64((int64_t) 0,
                                                      binop_y_304588);
                        struct memblock ext_mem_304700;
                        
                        ext_mem_304700.references = NULL;
                        
                        struct memblock ext_mem_304692;
                        
                        ext_mem_304692.references = NULL;
                        if (match_lit_296275) {
                            struct memblock mem_304327;
                            
                            mem_304327.references = NULL;
                            if (memblock_alloc(ctx, &mem_304327, bytes_300183,
                                               "mem_304327")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_304331;
                            
                            mem_304331.references = NULL;
                            if (memblock_alloc(ctx, &mem_304331, bytes_300183,
                                               "mem_304331")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_304354_cached_sizze_306879 <
                                (size_t) bytes_304353) {
                                mem_304354 = realloc(mem_304354, bytes_304353);
                                mem_304354_cached_sizze_306879 = bytes_304353;
                            }
                            if (mem_304369_cached_sizze_306880 <
                                (size_t) bytes_304353) {
                                mem_304369 = realloc(mem_304369, bytes_304353);
                                mem_304369_cached_sizze_306880 = bytes_304353;
                            }
                            if (mem_304372_cached_sizze_306881 <
                                (size_t) bytes_304353) {
                                mem_304372 = realloc(mem_304372, bytes_304353);
                                mem_304372_cached_sizze_306881 = bytes_304353;
                            }
                            if (mem_304421_cached_sizze_306882 <
                                (size_t) bytes_304420) {
                                mem_304421 = realloc(mem_304421, bytes_304420);
                                mem_304421_cached_sizze_306882 = bytes_304420;
                            }
                            if (mem_304424_cached_sizze_306883 <
                                (size_t) bytes_304420) {
                                mem_304424 = realloc(mem_304424, bytes_304420);
                                mem_304424_cached_sizze_306883 = bytes_304420;
                            }
                            for (int64_t i_298223 = 0; i_298223 <
                                 partition_sizze_292766; i_298223++) {
                                int64_t x_296285;
                                
                                x_296285 = ((int64_t *) mem_299512)[i_298223];
                                for (int64_t i_298190 = 0; i_298190 < n_292675;
                                     i_298190++) {
                                    float x_296289;
                                    
                                    x_296289 = ((float *) mem_299469)[i_298223 *
                                                                      n_292675 +
                                                                      i_298190];
                                    
                                    double x_296290;
                                    
                                    x_296290 =
                                        ((double *) mem_303763.mem)[i_298223 *
                                                                    n_292675 +
                                                                    i_298190];
                                    
                                    double f32_res_296291 =
                                           fpconv_f32_f64(x_296289);
                                    double defunc_1_f_res_296292 =
                                           f32_res_296291 - x_296290;
                                    
                                    ((double *) mem_304354)[i_298190] =
                                        defunc_1_f_res_296292;
                                }
                                for (int64_t i_298196 = 0; i_298196 < n_292675;
                                     i_298196++) {
                                    int64_t x_296295;
                                    
                                    x_296295 =
                                        ((int64_t *) mem_299509)[i_298223 *
                                                                 n_292675 +
                                                                 i_298196];
                                    
                                    bool cond_296296 = sle64((int64_t) 0,
                                                             x_296295);
                                    double defunc_0_f_res_296297;
                                    
                                    if (cond_296296) {
                                        bool y_296298 = slt64(x_296295,
                                                              n_292675);
                                        bool bounds_check_296299 =
                                             cond_296296 && y_296298;
                                        bool index_certs_296300;
                                        
                                        if (!bounds_check_296299) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_296295,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_292675,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_304331,
                                                               "mem_304331") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_304327,
                                                               "mem_304327") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304692,
                                                               "ext_mem_304692") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304700,
                                                               "ext_mem_304700") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304708,
                                                               "ext_mem_304708") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304716,
                                                               "ext_mem_304716") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305130,
                                                               "ext_mem_305130") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305138,
                                                               "ext_mem_305138") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305146,
                                                               "ext_mem_305146") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305154,
                                                               "ext_mem_305154") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_303763,
                                                               "mem_303763") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303752,
                                                               "ext_mem_303752") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303689,
                                                               "ext_mem_303689") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303697,
                                                               "ext_mem_303697") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302544,
                                                               "ext_mem_302544") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302419,
                                                               "ext_mem_302419") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302430,
                                                               "ext_mem_302430") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300343,
                                                               "mem_param_300343") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300335,
                                                               "mem_param_300335") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305217,
                                                               "ext_mem_305217") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305218,
                                                               "ext_mem_305218") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300321,
                                                               "mem_param_300321") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300313,
                                                               "mem_param_300313") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300305,
                                                               "mem_param_300305") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305742,
                                                               "ext_mem_305742") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305743,
                                                               "ext_mem_305743") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305744,
                                                               "ext_mem_305744") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300297,
                                                               "mem_300297") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300293,
                                                               "mem_300293") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306309,
                                                               "mem_out_306309") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306308,
                                                               "mem_out_306308") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306307,
                                                               "mem_out_306307") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_296301;
                                        
                                        defunc_0_f_res_t_res_296301 =
                                            ((double *) mem_304354)[x_296295];
                                        defunc_0_f_res_296297 =
                                            defunc_0_f_res_t_res_296301;
                                    } else {
                                        defunc_0_f_res_296297 = 0.0;
                                    }
                                    
                                    double defunc_0_f_res_296302;
                                    
                                    if (cond_296296) {
                                        bool y_296303 = slt64(x_296295,
                                                              n_292675);
                                        bool bounds_check_296304 =
                                             cond_296296 && y_296303;
                                        bool index_certs_296305;
                                        
                                        if (!bounds_check_296304) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_296295,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_292675,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_304331,
                                                               "mem_304331") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_304327,
                                                               "mem_304327") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304692,
                                                               "ext_mem_304692") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304700,
                                                               "ext_mem_304700") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304708,
                                                               "ext_mem_304708") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304716,
                                                               "ext_mem_304716") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305130,
                                                               "ext_mem_305130") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305138,
                                                               "ext_mem_305138") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305146,
                                                               "ext_mem_305146") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305154,
                                                               "ext_mem_305154") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_303763,
                                                               "mem_303763") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303752,
                                                               "ext_mem_303752") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303689,
                                                               "ext_mem_303689") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303697,
                                                               "ext_mem_303697") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302544,
                                                               "ext_mem_302544") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302419,
                                                               "ext_mem_302419") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302430,
                                                               "ext_mem_302430") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300343,
                                                               "mem_param_300343") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300335,
                                                               "mem_param_300335") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305217,
                                                               "ext_mem_305217") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305218,
                                                               "ext_mem_305218") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300321,
                                                               "mem_param_300321") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300313,
                                                               "mem_param_300313") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300305,
                                                               "mem_param_300305") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305742,
                                                               "ext_mem_305742") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305743,
                                                               "ext_mem_305743") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305744,
                                                               "ext_mem_305744") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300297,
                                                               "mem_300297") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300293,
                                                               "mem_300293") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306309,
                                                               "mem_out_306309") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306308,
                                                               "mem_out_306308") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306307,
                                                               "mem_out_306307") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_296306;
                                        
                                        defunc_0_f_res_t_res_296306 =
                                            ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                              (i_298223 *
                                                                               ctx_param_ext_300317 +
                                                                               x_296295 *
                                                                               ctx_param_ext_300319)];
                                        defunc_0_f_res_296302 =
                                            defunc_0_f_res_t_res_296306;
                                    } else {
                                        defunc_0_f_res_296302 = 0.0;
                                    }
                                    ((double *) mem_304369)[i_298196] =
                                        defunc_0_f_res_296302;
                                    ((double *) mem_304372)[i_298196] =
                                        defunc_0_f_res_296297;
                                }
                                for (int64_t i_298216 = 0; i_298216 <
                                     t_n_m_292839; i_298216++) {
                                    int64_t x_296310;
                                    
                                    x_296310 =
                                        ((int64_t *) mem_300184)[i_298223 *
                                                                 t_n_m_292839 +
                                                                 i_298216];
                                    
                                    double x_296311;
                                    
                                    x_296311 =
                                        ((double *) mem_300188)[i_298223 *
                                                                t_n_m_292839 +
                                                                i_298216];
                                    
                                    int64_t min_arg_296312 =
                                            mul64(jump_t_292685, i_298216);
                                    int64_t min_res_296313 = smin64(i_292846,
                                                                    min_arg_296312);
                                    int64_t defunc_0_g_res_296314 =
                                            add64((int64_t) 1, min_res_296313);
                                    double defunc_2_reduce_res_296338;
                                    double defunc_2_reduce_res_296339;
                                    double defunc_2_reduce_res_296340;
                                    double redout_298201;
                                    double redout_298202;
                                    double redout_298203;
                                    
                                    redout_298201 = 0.0;
                                    redout_298202 = 0.0;
                                    redout_298203 = 0.0;
                                    for (int64_t i_298206 = 0; i_298206 <
                                         q_t_292679; i_298206++) {
                                        bool cond_296353 = sle64(x_296285,
                                                                 i_298206);
                                        int64_t defunc_0_f_res_296354;
                                        
                                        if (cond_296353) {
                                            defunc_0_f_res_296354 = (int64_t) 0;
                                        } else {
                                            int64_t i_296355 = add64(x_296310,
                                                                     i_298206);
                                            int64_t defunc_0_add_arg_296356;
                                            
                                            defunc_0_add_arg_296356 =
                                                ((int64_t *) mem_299509)[i_298223 *
                                                                         n_292675 +
                                                                         i_296355];
                                            
                                            int64_t defunc_1_add_res_296357 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_296356);
                                            
                                            defunc_0_f_res_296354 =
                                                defunc_1_add_res_296357;
                                        }
                                        
                                        double defunc_0_f_res_296358;
                                        
                                        if (cond_296353) {
                                            defunc_0_f_res_296358 = 0.0;
                                        } else {
                                            int64_t i_296359 = add64(x_296310,
                                                                     i_298206);
                                            double defunc_0_add_arg_296360;
                                            
                                            defunc_0_add_arg_296360 =
                                                ((double *) mem_304369)[i_296359];
                                            defunc_0_f_res_296358 =
                                                defunc_0_add_arg_296360;
                                        }
                                        
                                        int64_t binop_p_296361 =
                                                sub64(defunc_0_f_res_296354,
                                                      defunc_0_g_res_296314);
                                        double defunc_0_f_res_296362 =
                                               sitofp_i64_f64(binop_p_296361);
                                        double abs_res_296363 =
                                               fabs(defunc_0_f_res_296362);
                                        double tmp1_296364 = abs_res_296363 /
                                               x_296311;
                                        double x_296365 = tmp1_296364 *
                                               tmp1_296364;
                                        double y_296366 = tmp1_296364 *
                                               x_296365;
                                        double tmp2_296367 = 1.0 - y_296366;
                                        double x_296368 = tmp2_296367 *
                                               tmp2_296367;
                                        double tmp3_296369 = tmp2_296367 *
                                               x_296368;
                                        double tmp4_296370 =
                                               defunc_0_f_res_296358 *
                                               tmp3_296369;
                                        double defunc_1_f_res_296371 =
                                               defunc_0_f_res_296362 *
                                               tmp4_296370;
                                        double defunc_1_f_res_296372 =
                                               defunc_0_f_res_296362 *
                                               defunc_1_f_res_296371;
                                        double defunc_1_op_res_296345 =
                                               tmp4_296370 + redout_298201;
                                        double defunc_1_op_res_296348 =
                                               defunc_1_f_res_296371 +
                                               redout_298202;
                                        double defunc_1_op_res_296351 =
                                               defunc_1_f_res_296372 +
                                               redout_298203;
                                        
                                        ((double *) mem_304421)[i_298206] =
                                            defunc_1_f_res_296371;
                                        ((double *) mem_304424)[i_298206] =
                                            tmp4_296370;
                                        
                                        double redout_tmp_306669 =
                                               defunc_1_op_res_296345;
                                        double redout_tmp_306670 =
                                               defunc_1_op_res_296348;
                                        double redout_tmp_306671 =
                                               defunc_1_op_res_296351;
                                        
                                        redout_298201 = redout_tmp_306669;
                                        redout_298202 = redout_tmp_306670;
                                        redout_298203 = redout_tmp_306671;
                                    }
                                    defunc_2_reduce_res_296338 = redout_298201;
                                    defunc_2_reduce_res_296339 = redout_298202;
                                    defunc_2_reduce_res_296340 = redout_298203;
                                    
                                    double a_296378 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296338;
                                    double b_296379 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296339;
                                    double c_296380 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296340;
                                    double x_296381 = a_296378 * c_296380;
                                    double y_296382 = b_296379 * b_296379;
                                    double y_296383 = x_296381 - y_296382;
                                    double det1_296384 = 1.0 / y_296383;
                                    double a11_296385 = c_296380 * det1_296384;
                                    double x_296386 = 0.0 - b_296379;
                                    double b11_296387 = det1_296384 * x_296386;
                                    double c11_296388 = a_296378 * det1_296384;
                                    double defunc_2_reduce_res_296389;
                                    double defunc_2_reduce_res_296390;
                                    double redout_298209;
                                    double redout_298210;
                                    
                                    redout_298209 = 0.0;
                                    redout_298210 = 0.0;
                                    for (int64_t i_298211 = 0; i_298211 <
                                         q_t_292679; i_298211++) {
                                        double x_296398;
                                        
                                        x_296398 =
                                            ((double *) mem_304424)[i_298211];
                                        
                                        double x_296399;
                                        
                                        x_296399 =
                                            ((double *) mem_304421)[i_298211];
                                        
                                        bool cond_296400 = sle64(x_296285,
                                                                 i_298211);
                                        double defunc_0_f_res_296401;
                                        
                                        if (cond_296400) {
                                            defunc_0_f_res_296401 = 0.0;
                                        } else {
                                            int64_t i_296402 = add64(x_296310,
                                                                     i_298211);
                                            double defunc_0_add_arg_296403;
                                            
                                            defunc_0_add_arg_296403 =
                                                ((double *) mem_304372)[i_296402];
                                            defunc_0_f_res_296401 =
                                                defunc_0_add_arg_296403;
                                        }
                                        
                                        double x_296404 = a11_296385 * x_296398;
                                        double y_296405 = b11_296387 * x_296399;
                                        double x_296406 = x_296404 + y_296405;
                                        double defunc_9_fit_fun_res_296407 =
                                               defunc_0_f_res_296401 * x_296406;
                                        double x_296408 = b11_296387 * x_296398;
                                        double y_296409 = c11_296388 * x_296399;
                                        double x_296410 = x_296408 + y_296409;
                                        double defunc_9_slope_fun_res_296411 =
                                               defunc_0_f_res_296401 * x_296410;
                                        double defunc_1_op_res_296393 =
                                               defunc_9_fit_fun_res_296407 +
                                               redout_298209;
                                        double defunc_1_op_res_296396 =
                                               defunc_9_slope_fun_res_296411 +
                                               redout_298210;
                                        double redout_tmp_306674 =
                                               defunc_1_op_res_296393;
                                        double redout_tmp_306675 =
                                               defunc_1_op_res_296396;
                                        
                                        redout_298209 = redout_tmp_306674;
                                        redout_298210 = redout_tmp_306675;
                                    }
                                    defunc_2_reduce_res_296389 = redout_298209;
                                    defunc_2_reduce_res_296390 = redout_298210;
                                    ((double *) mem_304327.mem)[i_298223 *
                                                                t_n_m_292839 +
                                                                i_298216] =
                                        defunc_2_reduce_res_296389;
                                    ((double *) mem_304331.mem)[i_298223 *
                                                                t_n_m_292839 +
                                                                i_298216] =
                                        defunc_2_reduce_res_296390;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_304700, &mem_304327,
                                             "mem_304327") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_304692, &mem_304331,
                                             "mem_304331") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_304331,
                                               "mem_304331") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_304327,
                                               "mem_304327") != 0)
                                return 1;
                        } else {
                            struct memblock mem_304496;
                            
                            mem_304496.references = NULL;
                            if (memblock_alloc(ctx, &mem_304496, bytes_300183,
                                               "mem_304496")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_304500;
                            
                            mem_304500.references = NULL;
                            if (memblock_alloc(ctx, &mem_304500, bytes_300183,
                                               "mem_304500")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_304523_cached_sizze_306884 <
                                (size_t) bytes_304522) {
                                mem_304523 = realloc(mem_304523, bytes_304522);
                                mem_304523_cached_sizze_306884 = bytes_304522;
                            }
                            if (mem_304538_cached_sizze_306885 <
                                (size_t) bytes_304522) {
                                mem_304538 = realloc(mem_304538, bytes_304522);
                                mem_304538_cached_sizze_306885 = bytes_304522;
                            }
                            if (mem_304541_cached_sizze_306886 <
                                (size_t) bytes_304522) {
                                mem_304541 = realloc(mem_304541, bytes_304522);
                                mem_304541_cached_sizze_306886 = bytes_304522;
                            }
                            if (mem_304590_cached_sizze_306887 <
                                (size_t) bytes_304589) {
                                mem_304590 = realloc(mem_304590, bytes_304589);
                                mem_304590_cached_sizze_306887 = bytes_304589;
                            }
                            if (mem_304593_cached_sizze_306888 <
                                (size_t) bytes_304589) {
                                mem_304593 = realloc(mem_304593, bytes_304589);
                                mem_304593_cached_sizze_306888 = bytes_304589;
                            }
                            if (mem_304620_cached_sizze_306889 <
                                (size_t) bytes_304589) {
                                mem_304620 = realloc(mem_304620, bytes_304589);
                                mem_304620_cached_sizze_306889 = bytes_304589;
                            }
                            if (mem_304623_cached_sizze_306890 <
                                (size_t) bytes_304589) {
                                mem_304623 = realloc(mem_304623, bytes_304589);
                                mem_304623_cached_sizze_306890 = bytes_304589;
                            }
                            for (int64_t i_298270 = 0; i_298270 <
                                 partition_sizze_292766; i_298270++) {
                                int64_t x_296423;
                                
                                x_296423 = ((int64_t *) mem_299512)[i_298270];
                                for (int64_t i_298228 = 0; i_298228 < n_292675;
                                     i_298228++) {
                                    float x_296427;
                                    
                                    x_296427 = ((float *) mem_299469)[i_298270 *
                                                                      n_292675 +
                                                                      i_298228];
                                    
                                    double x_296428;
                                    
                                    x_296428 =
                                        ((double *) mem_303763.mem)[i_298270 *
                                                                    n_292675 +
                                                                    i_298228];
                                    
                                    double f32_res_296429 =
                                           fpconv_f32_f64(x_296427);
                                    double defunc_1_f_res_296430 =
                                           f32_res_296429 - x_296428;
                                    
                                    ((double *) mem_304523)[i_298228] =
                                        defunc_1_f_res_296430;
                                }
                                for (int64_t i_298234 = 0; i_298234 < n_292675;
                                     i_298234++) {
                                    int64_t x_296433;
                                    
                                    x_296433 =
                                        ((int64_t *) mem_299509)[i_298270 *
                                                                 n_292675 +
                                                                 i_298234];
                                    
                                    bool cond_296434 = sle64((int64_t) 0,
                                                             x_296433);
                                    double defunc_0_f_res_296435;
                                    
                                    if (cond_296434) {
                                        bool y_296436 = slt64(x_296433,
                                                              n_292675);
                                        bool bounds_check_296437 =
                                             cond_296434 && y_296436;
                                        bool index_certs_296438;
                                        
                                        if (!bounds_check_296437) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_296433,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_292675,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_304500,
                                                               "mem_304500") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_304496,
                                                               "mem_304496") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304692,
                                                               "ext_mem_304692") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304700,
                                                               "ext_mem_304700") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304708,
                                                               "ext_mem_304708") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304716,
                                                               "ext_mem_304716") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305130,
                                                               "ext_mem_305130") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305138,
                                                               "ext_mem_305138") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305146,
                                                               "ext_mem_305146") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305154,
                                                               "ext_mem_305154") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_303763,
                                                               "mem_303763") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303752,
                                                               "ext_mem_303752") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303689,
                                                               "ext_mem_303689") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303697,
                                                               "ext_mem_303697") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302544,
                                                               "ext_mem_302544") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302419,
                                                               "ext_mem_302419") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302430,
                                                               "ext_mem_302430") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300343,
                                                               "mem_param_300343") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300335,
                                                               "mem_param_300335") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305217,
                                                               "ext_mem_305217") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305218,
                                                               "ext_mem_305218") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300321,
                                                               "mem_param_300321") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300313,
                                                               "mem_param_300313") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300305,
                                                               "mem_param_300305") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305742,
                                                               "ext_mem_305742") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305743,
                                                               "ext_mem_305743") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305744,
                                                               "ext_mem_305744") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300297,
                                                               "mem_300297") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300293,
                                                               "mem_300293") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306309,
                                                               "mem_out_306309") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306308,
                                                               "mem_out_306308") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306307,
                                                               "mem_out_306307") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_296439;
                                        
                                        defunc_0_f_res_t_res_296439 =
                                            ((double *) mem_304523)[x_296433];
                                        defunc_0_f_res_296435 =
                                            defunc_0_f_res_t_res_296439;
                                    } else {
                                        defunc_0_f_res_296435 = 0.0;
                                    }
                                    
                                    double defunc_0_f_res_296440;
                                    
                                    if (cond_296434) {
                                        bool y_296441 = slt64(x_296433,
                                                              n_292675);
                                        bool bounds_check_296442 =
                                             cond_296434 && y_296441;
                                        bool index_certs_296443;
                                        
                                        if (!bounds_check_296442) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_296433,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_292675,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_304500,
                                                               "mem_304500") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_304496,
                                                               "mem_304496") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304692,
                                                               "ext_mem_304692") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304700,
                                                               "ext_mem_304700") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304708,
                                                               "ext_mem_304708") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_304716,
                                                               "ext_mem_304716") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305130,
                                                               "ext_mem_305130") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305138,
                                                               "ext_mem_305138") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305146,
                                                               "ext_mem_305146") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305154,
                                                               "ext_mem_305154") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_303763,
                                                               "mem_303763") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303752,
                                                               "ext_mem_303752") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303689,
                                                               "ext_mem_303689") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303697,
                                                               "ext_mem_303697") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302544,
                                                               "ext_mem_302544") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302419,
                                                               "ext_mem_302419") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302430,
                                                               "ext_mem_302430") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300343,
                                                               "mem_param_300343") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300335,
                                                               "mem_param_300335") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305217,
                                                               "ext_mem_305217") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305218,
                                                               "ext_mem_305218") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300321,
                                                               "mem_param_300321") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300313,
                                                               "mem_param_300313") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300305,
                                                               "mem_param_300305") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305742,
                                                               "ext_mem_305742") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305743,
                                                               "ext_mem_305743") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305744,
                                                               "ext_mem_305744") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300297,
                                                               "mem_300297") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300293,
                                                               "mem_300293") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306309,
                                                               "mem_out_306309") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306308,
                                                               "mem_out_306308") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306307,
                                                               "mem_out_306307") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_296444;
                                        
                                        defunc_0_f_res_t_res_296444 =
                                            ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                              (i_298270 *
                                                                               ctx_param_ext_300317 +
                                                                               x_296433 *
                                                                               ctx_param_ext_300319)];
                                        defunc_0_f_res_296440 =
                                            defunc_0_f_res_t_res_296444;
                                    } else {
                                        defunc_0_f_res_296440 = 0.0;
                                    }
                                    ((double *) mem_304538)[i_298234] =
                                        defunc_0_f_res_296440;
                                    ((double *) mem_304541)[i_298234] =
                                        defunc_0_f_res_296435;
                                }
                                for (int64_t i_298263 = 0; i_298263 <
                                     t_n_m_292839; i_298263++) {
                                    int64_t x_296448;
                                    
                                    x_296448 =
                                        ((int64_t *) mem_300184)[i_298270 *
                                                                 t_n_m_292839 +
                                                                 i_298263];
                                    
                                    double x_296449;
                                    
                                    x_296449 =
                                        ((double *) mem_300188)[i_298270 *
                                                                t_n_m_292839 +
                                                                i_298263];
                                    
                                    int64_t min_arg_296450 =
                                            mul64(jump_t_292685, i_298263);
                                    int64_t min_res_296451 = smin64(i_292846,
                                                                    min_arg_296450);
                                    int64_t defunc_0_g_res_296452 =
                                            add64((int64_t) 1, min_res_296451);
                                    
                                    for (int64_t i_298241 = 0; i_298241 <
                                         q_t_292679; i_298241++) {
                                        bool cond_296456 = sle64(x_296423,
                                                                 i_298241);
                                        int64_t defunc_0_f_res_296457;
                                        
                                        if (cond_296456) {
                                            defunc_0_f_res_296457 = (int64_t) 0;
                                        } else {
                                            int64_t i_296458 = add64(x_296448,
                                                                     i_298241);
                                            int64_t defunc_0_add_arg_296459;
                                            
                                            defunc_0_add_arg_296459 =
                                                ((int64_t *) mem_299509)[i_298270 *
                                                                         n_292675 +
                                                                         i_296458];
                                            
                                            int64_t defunc_1_add_res_296460 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_296459);
                                            
                                            defunc_0_f_res_296457 =
                                                defunc_1_add_res_296460;
                                        }
                                        
                                        double defunc_0_f_res_296461;
                                        
                                        if (cond_296456) {
                                            defunc_0_f_res_296461 = 0.0;
                                        } else {
                                            int64_t i_296462 = add64(x_296448,
                                                                     i_298241);
                                            double defunc_0_add_arg_296463;
                                            
                                            defunc_0_add_arg_296463 =
                                                ((double *) mem_304538)[i_296462];
                                            defunc_0_f_res_296461 =
                                                defunc_0_add_arg_296463;
                                        }
                                        
                                        int64_t binop_p_296464 =
                                                sub64(defunc_0_f_res_296457,
                                                      defunc_0_g_res_296452);
                                        double defunc_0_f_res_296465 =
                                               sitofp_i64_f64(binop_p_296464);
                                        double abs_res_296466 =
                                               fabs(defunc_0_f_res_296465);
                                        double tmp1_296467 = abs_res_296466 /
                                               x_296449;
                                        double x_296468 = tmp1_296467 *
                                               tmp1_296467;
                                        double y_296469 = tmp1_296467 *
                                               x_296468;
                                        double tmp2_296470 = 1.0 - y_296469;
                                        double x_296471 = tmp2_296470 *
                                               tmp2_296470;
                                        double tmp3_296472 = tmp2_296470 *
                                               x_296471;
                                        double tmp4_296473 =
                                               defunc_0_f_res_296461 *
                                               tmp3_296472;
                                        
                                        ((double *) mem_304590)[i_298241] =
                                            defunc_0_f_res_296465;
                                        ((double *) mem_304593)[i_298241] =
                                            tmp4_296473;
                                    }
                                    
                                    double defunc_2_reduce_res_296480;
                                    double defunc_2_reduce_res_296481;
                                    double defunc_2_reduce_res_296482;
                                    double defunc_2_reduce_res_296483;
                                    double defunc_2_reduce_res_296484;
                                    double redout_298246;
                                    double redout_298247;
                                    double redout_298248;
                                    double redout_298249;
                                    double redout_298250;
                                    
                                    redout_298246 = 0.0;
                                    redout_298247 = 0.0;
                                    redout_298248 = 0.0;
                                    redout_298249 = 0.0;
                                    redout_298250 = 0.0;
                                    for (int64_t i_298253 = 0; i_298253 <
                                         q_t_292679; i_298253++) {
                                        double x_296502;
                                        
                                        x_296502 =
                                            ((double *) mem_304590)[i_298253];
                                        
                                        double x_296503;
                                        
                                        x_296503 =
                                            ((double *) mem_304593)[i_298253];
                                        
                                        double defunc_1_f_res_296504 =
                                               x_296502 * x_296503;
                                        double defunc_1_f_res_296505 =
                                               x_296502 * defunc_1_f_res_296504;
                                        double defunc_1_f_res_296506 =
                                               x_296502 * defunc_1_f_res_296505;
                                        double defunc_1_f_res_296507 =
                                               x_296502 * defunc_1_f_res_296506;
                                        double defunc_1_op_res_296489 =
                                               x_296503 + redout_298246;
                                        double defunc_1_op_res_296492 =
                                               defunc_1_f_res_296504 +
                                               redout_298247;
                                        double defunc_1_op_res_296495 =
                                               defunc_1_f_res_296505 +
                                               redout_298248;
                                        double defunc_1_op_res_296498 =
                                               defunc_1_f_res_296506 +
                                               redout_298249;
                                        double defunc_1_op_res_296501 =
                                               defunc_1_f_res_296507 +
                                               redout_298250;
                                        
                                        ((double *) mem_304620)[i_298253] =
                                            defunc_1_f_res_296505;
                                        ((double *) mem_304623)[i_298253] =
                                            defunc_1_f_res_296504;
                                        
                                        double redout_tmp_306685 =
                                               defunc_1_op_res_296489;
                                        double redout_tmp_306686 =
                                               defunc_1_op_res_296492;
                                        double redout_tmp_306687 =
                                               defunc_1_op_res_296495;
                                        double redout_tmp_306688 =
                                               defunc_1_op_res_296498;
                                        double redout_tmp_306689 =
                                               defunc_1_op_res_296501;
                                        
                                        redout_298246 = redout_tmp_306685;
                                        redout_298247 = redout_tmp_306686;
                                        redout_298248 = redout_tmp_306687;
                                        redout_298249 = redout_tmp_306688;
                                        redout_298250 = redout_tmp_306689;
                                    }
                                    defunc_2_reduce_res_296480 = redout_298246;
                                    defunc_2_reduce_res_296481 = redout_298247;
                                    defunc_2_reduce_res_296482 = redout_298248;
                                    defunc_2_reduce_res_296483 = redout_298249;
                                    defunc_2_reduce_res_296484 = redout_298250;
                                    
                                    double a_296515 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296480;
                                    double b_296516 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296481;
                                    double c_296517 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296482;
                                    double d_296518 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296483;
                                    double e_296519 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296484;
                                    double x_296520 = c_296517 * e_296519;
                                    double y_296521 = d_296518 * d_296518;
                                    double a12_296522 = x_296520 - y_296521;
                                    double x_296523 = c_296517 * d_296518;
                                    double y_296524 = b_296516 * e_296519;
                                    double b12_296525 = x_296523 - y_296524;
                                    double x_296526 = b_296516 * d_296518;
                                    double y_296527 = c_296517 * c_296517;
                                    double c12_296528 = x_296526 - y_296527;
                                    double x_296529 = a_296515 * e_296519;
                                    double b2_296530 = x_296529 - y_296527;
                                    double x_296531 = b_296516 * c_296517;
                                    double y_296532 = a_296515 * d_296518;
                                    double c2_296533 = x_296531 - y_296532;
                                    double x_296534 = a_296515 * a12_296522;
                                    double y_296535 = b_296516 * b12_296525;
                                    double x_296536 = x_296534 + y_296535;
                                    double y_296537 = c_296517 * c12_296528;
                                    double y_296538 = x_296536 + y_296537;
                                    double det_296539 = 1.0 / y_296538;
                                    double a12_296540 = a12_296522 * det_296539;
                                    double b12_296541 = b12_296525 * det_296539;
                                    double c12_296542 = c12_296528 * det_296539;
                                    double b2_296543 = b2_296530 * det_296539;
                                    double c2_296544 = c2_296533 * det_296539;
                                    double defunc_2_reduce_res_296545;
                                    double defunc_2_reduce_res_296546;
                                    double redout_298256;
                                    double redout_298257;
                                    
                                    redout_298256 = 0.0;
                                    redout_298257 = 0.0;
                                    for (int64_t i_298258 = 0; i_298258 <
                                         q_t_292679; i_298258++) {
                                        double x_296554;
                                        
                                        x_296554 =
                                            ((double *) mem_304593)[i_298258];
                                        
                                        double x_296555;
                                        
                                        x_296555 =
                                            ((double *) mem_304623)[i_298258];
                                        
                                        double x_296556;
                                        
                                        x_296556 =
                                            ((double *) mem_304620)[i_298258];
                                        
                                        bool cond_296557 = sle64(x_296423,
                                                                 i_298258);
                                        double defunc_0_f_res_296558;
                                        
                                        if (cond_296557) {
                                            defunc_0_f_res_296558 = 0.0;
                                        } else {
                                            int64_t i_296559 = add64(x_296448,
                                                                     i_298258);
                                            double defunc_0_add_arg_296560;
                                            
                                            defunc_0_add_arg_296560 =
                                                ((double *) mem_304541)[i_296559];
                                            defunc_0_f_res_296558 =
                                                defunc_0_add_arg_296560;
                                        }
                                        
                                        double x_296561 = a12_296540 * x_296554;
                                        double y_296562 = b12_296541 * x_296555;
                                        double x_296563 = x_296561 + y_296562;
                                        double y_296564 = c12_296542 * x_296556;
                                        double x_296565 = x_296563 + y_296564;
                                        double defunc_9_fit_fun_res_296566 =
                                               defunc_0_f_res_296558 * x_296565;
                                        double x_296567 = b12_296541 * x_296554;
                                        double y_296568 = b2_296543 * x_296555;
                                        double x_296569 = x_296567 + y_296568;
                                        double y_296570 = c2_296544 * x_296556;
                                        double x_296571 = x_296569 + y_296570;
                                        double defunc_9_slope_fun_res_296572 =
                                               defunc_0_f_res_296558 * x_296571;
                                        double defunc_1_op_res_296549 =
                                               defunc_9_fit_fun_res_296566 +
                                               redout_298256;
                                        double defunc_1_op_res_296552 =
                                               defunc_9_slope_fun_res_296572 +
                                               redout_298257;
                                        double redout_tmp_306692 =
                                               defunc_1_op_res_296549;
                                        double redout_tmp_306693 =
                                               defunc_1_op_res_296552;
                                        
                                        redout_298256 = redout_tmp_306692;
                                        redout_298257 = redout_tmp_306693;
                                    }
                                    defunc_2_reduce_res_296545 = redout_298256;
                                    defunc_2_reduce_res_296546 = redout_298257;
                                    ((double *) mem_304496.mem)[i_298270 *
                                                                t_n_m_292839 +
                                                                i_298263] =
                                        defunc_2_reduce_res_296545;
                                    ((double *) mem_304500.mem)[i_298270 *
                                                                t_n_m_292839 +
                                                                i_298263] =
                                        defunc_2_reduce_res_296546;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_304700, &mem_304496,
                                             "mem_304496") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_304692, &mem_304500,
                                             "mem_304500") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_304500,
                                               "mem_304500") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_304496,
                                               "mem_304496") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_304716, &ext_mem_304700,
                                         "ext_mem_304700") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_304708, &ext_mem_304692,
                                         "ext_mem_304692") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_304692,
                                           "ext_mem_304692") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_304700,
                                           "ext_mem_304700") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_305138, &ext_mem_304716,
                                     "ext_mem_304716") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_305130, &ext_mem_304708,
                                     "ext_mem_304708") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_304708,
                                       "ext_mem_304708") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_304716,
                                       "ext_mem_304716") != 0)
                        return 1;
                } else {
                    bool match_lit_296577 = (int64_t) 0 == d_t_292682;
                    int64_t binop_y_304742 = (int64_t) 8 * n_292675;
                    int64_t bytes_304743 = smax64((int64_t) 0, binop_y_304742);
                    struct memblock ext_mem_305122;
                    
                    ext_mem_305122.references = NULL;
                    
                    struct memblock ext_mem_305114;
                    
                    ext_mem_305114.references = NULL;
                    if (match_lit_296577) {
                        struct memblock mem_304727;
                        
                        mem_304727.references = NULL;
                        if (memblock_alloc(ctx, &mem_304727, bytes_300183,
                                           "mem_304727")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t i_306694 = 0; i_306694 <
                             partition_sizze_292766; i_306694++) {
                            for (int64_t i_306695 = 0; i_306695 < t_n_m_292839;
                                 i_306695++) {
                                ((double *) mem_304727.mem)[i_306694 *
                                                            t_n_m_292839 +
                                                            i_306695] = 0.0;
                            }
                        }
                        
                        struct memblock mem_304731;
                        
                        mem_304731.references = NULL;
                        if (memblock_alloc(ctx, &mem_304731, bytes_300183,
                                           "mem_304731")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (mem_304744_cached_sizze_306891 <
                            (size_t) bytes_304743) {
                            mem_304744 = realloc(mem_304744, bytes_304743);
                            mem_304744_cached_sizze_306891 = bytes_304743;
                        }
                        if (mem_304759_cached_sizze_306892 <
                            (size_t) bytes_304743) {
                            mem_304759 = realloc(mem_304759, bytes_304743);
                            mem_304759_cached_sizze_306892 = bytes_304743;
                        }
                        if (mem_304762_cached_sizze_306893 <
                            (size_t) bytes_304743) {
                            mem_304762 = realloc(mem_304762, bytes_304743);
                            mem_304762_cached_sizze_306893 = bytes_304743;
                        }
                        for (int64_t i_298294 = 0; i_298294 <
                             partition_sizze_292766; i_298294++) {
                            int64_t x_296587;
                            
                            x_296587 = ((int64_t *) mem_299512)[i_298294];
                            for (int64_t i_298275 = 0; i_298275 < n_292675;
                                 i_298275++) {
                                float x_296591;
                                
                                x_296591 = ((float *) mem_299469)[i_298294 *
                                                                  n_292675 +
                                                                  i_298275];
                                
                                double x_296592;
                                
                                x_296592 =
                                    ((double *) mem_303763.mem)[i_298294 *
                                                                n_292675 +
                                                                i_298275];
                                
                                double f32_res_296593 =
                                       fpconv_f32_f64(x_296591);
                                double defunc_1_f_res_296594 = f32_res_296593 -
                                       x_296592;
                                
                                ((double *) mem_304744)[i_298275] =
                                    defunc_1_f_res_296594;
                            }
                            for (int64_t i_298281 = 0; i_298281 < n_292675;
                                 i_298281++) {
                                int64_t x_296597;
                                
                                x_296597 = ((int64_t *) mem_299509)[i_298294 *
                                                                    n_292675 +
                                                                    i_298281];
                                
                                bool cond_296598 = sle64((int64_t) 0, x_296597);
                                double defunc_0_f_res_296599;
                                
                                if (cond_296598) {
                                    bool y_296600 = slt64(x_296597, n_292675);
                                    bool bounds_check_296601 = cond_296598 &&
                                         y_296600;
                                    bool index_certs_296602;
                                    
                                    if (!bounds_check_296601) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_296597,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_292675,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_304731,
                                                           "mem_304731") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_304727,
                                                           "mem_304727") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305114,
                                                           "ext_mem_305114") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305122,
                                                           "ext_mem_305122") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305130,
                                                           "ext_mem_305130") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305138,
                                                           "ext_mem_305138") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305146,
                                                           "ext_mem_305146") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305154,
                                                           "ext_mem_305154") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_303763,
                                                           "mem_303763") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303752,
                                                           "ext_mem_303752") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303689,
                                                           "ext_mem_303689") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303697,
                                                           "ext_mem_303697") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302544,
                                                           "ext_mem_302544") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302419,
                                                           "ext_mem_302419") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302430,
                                                           "ext_mem_302430") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300343,
                                                           "mem_param_300343") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300335,
                                                           "mem_param_300335") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305217,
                                                           "ext_mem_305217") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305218,
                                                           "ext_mem_305218") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300321,
                                                           "mem_param_300321") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300313,
                                                           "mem_param_300313") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300305,
                                                           "mem_param_300305") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305742,
                                                           "ext_mem_305742") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305743,
                                                           "ext_mem_305743") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305744,
                                                           "ext_mem_305744") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300297,
                                                           "mem_300297") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300293,
                                                           "mem_300293") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306309,
                                                           "mem_out_306309") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306308,
                                                           "mem_out_306308") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306307,
                                                           "mem_out_306307") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_296603;
                                    
                                    defunc_0_f_res_t_res_296603 =
                                        ((double *) mem_304744)[x_296597];
                                    defunc_0_f_res_296599 =
                                        defunc_0_f_res_t_res_296603;
                                } else {
                                    defunc_0_f_res_296599 = 0.0;
                                }
                                
                                double defunc_0_f_res_296604;
                                
                                if (cond_296598) {
                                    bool y_296605 = slt64(x_296597, n_292675);
                                    bool bounds_check_296606 = cond_296598 &&
                                         y_296605;
                                    bool index_certs_296607;
                                    
                                    if (!bounds_check_296606) {
                                        ctx->error =
                                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                      "Index [",
                                                      (long long) x_296597,
                                                      "] out of bounds for array of shape [",
                                                      (long long) n_292675,
                                                      "].",
                                                      "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                        if (memblock_unref(ctx, &mem_304731,
                                                           "mem_304731") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_304727,
                                                           "mem_304727") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305114,
                                                           "ext_mem_305114") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305122,
                                                           "ext_mem_305122") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305130,
                                                           "ext_mem_305130") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305138,
                                                           "ext_mem_305138") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305146,
                                                           "ext_mem_305146") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305154,
                                                           "ext_mem_305154") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_303763,
                                                           "mem_303763") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303752,
                                                           "ext_mem_303752") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303689,
                                                           "ext_mem_303689") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_303697,
                                                           "ext_mem_303697") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302544,
                                                           "ext_mem_302544") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302419,
                                                           "ext_mem_302419") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_302430,
                                                           "ext_mem_302430") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300343,
                                                           "mem_param_300343") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300335,
                                                           "mem_param_300335") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305217,
                                                           "ext_mem_305217") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305218,
                                                           "ext_mem_305218") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300321,
                                                           "mem_param_300321") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300313,
                                                           "mem_param_300313") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx,
                                                           &mem_param_300305,
                                                           "mem_param_300305") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305742,
                                                           "ext_mem_305742") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305743,
                                                           "ext_mem_305743") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &ext_mem_305744,
                                                           "ext_mem_305744") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300297,
                                                           "mem_300297") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_300293,
                                                           "mem_300293") != 0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306309,
                                                           "mem_out_306309") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306308,
                                                           "mem_out_306308") !=
                                            0)
                                            return 1;
                                        if (memblock_unref(ctx, &mem_out_306307,
                                                           "mem_out_306307") !=
                                            0)
                                            return 1;
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double defunc_0_f_res_t_res_296608;
                                    
                                    defunc_0_f_res_t_res_296608 =
                                        ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                          (i_298294 *
                                                                           ctx_param_ext_300317 +
                                                                           x_296597 *
                                                                           ctx_param_ext_300319)];
                                    defunc_0_f_res_296604 =
                                        defunc_0_f_res_t_res_296608;
                                } else {
                                    defunc_0_f_res_296604 = 0.0;
                                }
                                ((double *) mem_304759)[i_298281] =
                                    defunc_0_f_res_296604;
                                ((double *) mem_304762)[i_298281] =
                                    defunc_0_f_res_296599;
                            }
                            for (int64_t i_298290 = 0; i_298290 < t_n_m_292839;
                                 i_298290++) {
                                int64_t x_296611;
                                
                                x_296611 = ((int64_t *) mem_300184)[i_298294 *
                                                                    t_n_m_292839 +
                                                                    i_298290];
                                
                                double x_296612;
                                
                                x_296612 = ((double *) mem_300188)[i_298294 *
                                                                   t_n_m_292839 +
                                                                   i_298290];
                                
                                int64_t min_arg_296613 = mul64(jump_t_292685,
                                                               i_298290);
                                int64_t min_res_296614 = smin64(i_292846,
                                                                min_arg_296613);
                                int64_t defunc_0_g_res_296615 =
                                        add64((int64_t) 1, min_res_296614);
                                double defunc_2_reduce_res_296616;
                                double redout_298284 = 0.0;
                                
                                for (int64_t i_298285 = 0; i_298285 <
                                     q_t_292679; i_298285++) {
                                    bool cond_296621 = sle64(x_296587,
                                                             i_298285);
                                    int64_t defunc_0_f_res_296622;
                                    
                                    if (cond_296621) {
                                        defunc_0_f_res_296622 = (int64_t) 0;
                                    } else {
                                        int64_t i_296623 = add64(x_296611,
                                                                 i_298285);
                                        int64_t defunc_0_add_arg_296624;
                                        
                                        defunc_0_add_arg_296624 =
                                            ((int64_t *) mem_299509)[i_298294 *
                                                                     n_292675 +
                                                                     i_296623];
                                        
                                        int64_t defunc_1_add_res_296625 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_296624);
                                        
                                        defunc_0_f_res_296622 =
                                            defunc_1_add_res_296625;
                                    }
                                    
                                    double defunc_0_f_res_296626;
                                    
                                    if (cond_296621) {
                                        defunc_0_f_res_296626 = 0.0;
                                    } else {
                                        int64_t i_296627 = add64(x_296611,
                                                                 i_298285);
                                        double defunc_0_add_arg_296628;
                                        
                                        defunc_0_add_arg_296628 =
                                            ((double *) mem_304759)[i_296627];
                                        defunc_0_f_res_296626 =
                                            defunc_0_add_arg_296628;
                                    }
                                    
                                    int64_t binop_p_296629 =
                                            sub64(defunc_0_f_res_296622,
                                                  defunc_0_g_res_296615);
                                    double defunc_0_f_res_296630 =
                                           sitofp_i64_f64(binop_p_296629);
                                    double abs_res_296631 =
                                           fabs(defunc_0_f_res_296630);
                                    double tmp1_296632 = abs_res_296631 /
                                           x_296612;
                                    double x_296633 = tmp1_296632 * tmp1_296632;
                                    double y_296634 = tmp1_296632 * x_296633;
                                    double tmp2_296635 = 1.0 - y_296634;
                                    double x_296636 = tmp2_296635 * tmp2_296635;
                                    double tmp3_296637 = tmp2_296635 * x_296636;
                                    double w_j_296638 = defunc_0_f_res_296626 *
                                           tmp3_296637;
                                    double defunc_1_op_res_296619 = w_j_296638 +
                                           redout_298284;
                                    double redout_tmp_306701 =
                                           defunc_1_op_res_296619;
                                    
                                    redout_298284 = redout_tmp_306701;
                                }
                                defunc_2_reduce_res_296616 = redout_298284;
                                
                                double a_296639 = 2.220446049250313e-16 +
                                       defunc_2_reduce_res_296616;
                                double a0_296640 = 1.0 / a_296639;
                                double defunc_2_reduce_res_296641;
                                double redout_298286 = 0.0;
                                
                                for (int64_t i_298287 = 0; i_298287 <
                                     q_t_292679; i_298287++) {
                                    bool cond_296646 = sle64(x_296587,
                                                             i_298287);
                                    int64_t defunc_0_f_res_296647;
                                    
                                    if (cond_296646) {
                                        defunc_0_f_res_296647 = (int64_t) 0;
                                    } else {
                                        int64_t i_296648 = add64(x_296611,
                                                                 i_298287);
                                        int64_t defunc_0_add_arg_296649;
                                        
                                        defunc_0_add_arg_296649 =
                                            ((int64_t *) mem_299509)[i_298294 *
                                                                     n_292675 +
                                                                     i_296648];
                                        
                                        int64_t defunc_1_add_res_296650 =
                                                add64((int64_t) 1,
                                                      defunc_0_add_arg_296649);
                                        
                                        defunc_0_f_res_296647 =
                                            defunc_1_add_res_296650;
                                    }
                                    
                                    double defunc_0_f_res_296651;
                                    
                                    if (cond_296646) {
                                        defunc_0_f_res_296651 = 0.0;
                                    } else {
                                        int64_t i_296652 = add64(x_296611,
                                                                 i_298287);
                                        double defunc_0_add_arg_296653;
                                        
                                        defunc_0_add_arg_296653 =
                                            ((double *) mem_304759)[i_296652];
                                        defunc_0_f_res_296651 =
                                            defunc_0_add_arg_296653;
                                    }
                                    
                                    int64_t binop_p_296654 =
                                            sub64(defunc_0_f_res_296647,
                                                  defunc_0_g_res_296615);
                                    double defunc_0_f_res_296655 =
                                           sitofp_i64_f64(binop_p_296654);
                                    double abs_res_296656 =
                                           fabs(defunc_0_f_res_296655);
                                    double tmp1_296657 = abs_res_296656 /
                                           x_296612;
                                    double x_296658 = tmp1_296657 * tmp1_296657;
                                    double y_296659 = tmp1_296657 * x_296658;
                                    double tmp2_296660 = 1.0 - y_296659;
                                    double x_296661 = tmp2_296660 * tmp2_296660;
                                    double tmp3_296662 = tmp2_296660 * x_296661;
                                    double tmp4_296663 = defunc_0_f_res_296651 *
                                           tmp3_296662;
                                    double defunc_0_f_res_296664;
                                    
                                    if (cond_296646) {
                                        defunc_0_f_res_296664 = 0.0;
                                    } else {
                                        int64_t i_296665 = add64(x_296611,
                                                                 i_298287);
                                        double defunc_0_add_arg_296666;
                                        
                                        defunc_0_add_arg_296666 =
                                            ((double *) mem_304762)[i_296665];
                                        defunc_0_f_res_296664 =
                                            defunc_0_add_arg_296666;
                                    }
                                    
                                    double x_296667 = a0_296640 * tmp4_296663;
                                    double defunc_9_fit_fun_res_296668 =
                                           defunc_0_f_res_296664 * x_296667;
                                    double defunc_1_op_res_296644 =
                                           defunc_9_fit_fun_res_296668 +
                                           redout_298286;
                                    double redout_tmp_306702 =
                                           defunc_1_op_res_296644;
                                    
                                    redout_298286 = redout_tmp_306702;
                                }
                                defunc_2_reduce_res_296641 = redout_298286;
                                ((double *) mem_304731.mem)[i_298294 *
                                                            t_n_m_292839 +
                                                            i_298290] =
                                    defunc_2_reduce_res_296641;
                            }
                        }
                        if (memblock_set(ctx, &ext_mem_305122, &mem_304731,
                                         "mem_304731") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_305114, &mem_304727,
                                         "mem_304727") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_304731, "mem_304731") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_304727, "mem_304727") != 0)
                            return 1;
                    } else {
                        bool match_lit_296673 = (int64_t) 1 == d_t_292682;
                        int64_t binop_y_304848 = (int64_t) 8 * n_292675;
                        int64_t bytes_304849 = smax64((int64_t) 0,
                                                      binop_y_304848);
                        int64_t binop_y_304987 = (int64_t) 8 * n_292675;
                        int64_t bytes_304988 = smax64((int64_t) 0,
                                                      binop_y_304987);
                        struct memblock ext_mem_305106;
                        
                        ext_mem_305106.references = NULL;
                        
                        struct memblock ext_mem_305098;
                        
                        ext_mem_305098.references = NULL;
                        if (match_lit_296673) {
                            struct memblock mem_304823;
                            
                            mem_304823.references = NULL;
                            if (memblock_alloc(ctx, &mem_304823, bytes_300183,
                                               "mem_304823")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_304827;
                            
                            mem_304827.references = NULL;
                            if (memblock_alloc(ctx, &mem_304827, bytes_300183,
                                               "mem_304827")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_304850_cached_sizze_306894 <
                                (size_t) bytes_304849) {
                                mem_304850 = realloc(mem_304850, bytes_304849);
                                mem_304850_cached_sizze_306894 = bytes_304849;
                            }
                            if (mem_304865_cached_sizze_306895 <
                                (size_t) bytes_304849) {
                                mem_304865 = realloc(mem_304865, bytes_304849);
                                mem_304865_cached_sizze_306895 = bytes_304849;
                            }
                            if (mem_304868_cached_sizze_306896 <
                                (size_t) bytes_304849) {
                                mem_304868 = realloc(mem_304868, bytes_304849);
                                mem_304868_cached_sizze_306896 = bytes_304849;
                            }
                            for (int64_t i_298325 = 0; i_298325 <
                                 partition_sizze_292766; i_298325++) {
                                int64_t x_296683;
                                
                                x_296683 = ((int64_t *) mem_299512)[i_298325];
                                for (int64_t i_298298 = 0; i_298298 < n_292675;
                                     i_298298++) {
                                    float x_296687;
                                    
                                    x_296687 = ((float *) mem_299469)[i_298325 *
                                                                      n_292675 +
                                                                      i_298298];
                                    
                                    double x_296688;
                                    
                                    x_296688 =
                                        ((double *) mem_303763.mem)[i_298325 *
                                                                    n_292675 +
                                                                    i_298298];
                                    
                                    double f32_res_296689 =
                                           fpconv_f32_f64(x_296687);
                                    double defunc_1_f_res_296690 =
                                           f32_res_296689 - x_296688;
                                    
                                    ((double *) mem_304850)[i_298298] =
                                        defunc_1_f_res_296690;
                                }
                                for (int64_t i_298304 = 0; i_298304 < n_292675;
                                     i_298304++) {
                                    int64_t x_296693;
                                    
                                    x_296693 =
                                        ((int64_t *) mem_299509)[i_298325 *
                                                                 n_292675 +
                                                                 i_298304];
                                    
                                    bool cond_296694 = sle64((int64_t) 0,
                                                             x_296693);
                                    double defunc_0_f_res_296695;
                                    
                                    if (cond_296694) {
                                        bool y_296696 = slt64(x_296693,
                                                              n_292675);
                                        bool bounds_check_296697 =
                                             cond_296694 && y_296696;
                                        bool index_certs_296698;
                                        
                                        if (!bounds_check_296697) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_296693,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_292675,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_304827,
                                                               "mem_304827") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_304823,
                                                               "mem_304823") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305098,
                                                               "ext_mem_305098") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305106,
                                                               "ext_mem_305106") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305114,
                                                               "ext_mem_305114") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305122,
                                                               "ext_mem_305122") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305130,
                                                               "ext_mem_305130") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305138,
                                                               "ext_mem_305138") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305146,
                                                               "ext_mem_305146") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305154,
                                                               "ext_mem_305154") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_303763,
                                                               "mem_303763") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303752,
                                                               "ext_mem_303752") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303689,
                                                               "ext_mem_303689") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303697,
                                                               "ext_mem_303697") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302544,
                                                               "ext_mem_302544") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302419,
                                                               "ext_mem_302419") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302430,
                                                               "ext_mem_302430") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300343,
                                                               "mem_param_300343") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300335,
                                                               "mem_param_300335") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305217,
                                                               "ext_mem_305217") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305218,
                                                               "ext_mem_305218") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300321,
                                                               "mem_param_300321") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300313,
                                                               "mem_param_300313") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300305,
                                                               "mem_param_300305") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305742,
                                                               "ext_mem_305742") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305743,
                                                               "ext_mem_305743") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305744,
                                                               "ext_mem_305744") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300297,
                                                               "mem_300297") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300293,
                                                               "mem_300293") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306309,
                                                               "mem_out_306309") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306308,
                                                               "mem_out_306308") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306307,
                                                               "mem_out_306307") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_296699;
                                        
                                        defunc_0_f_res_t_res_296699 =
                                            ((double *) mem_304850)[x_296693];
                                        defunc_0_f_res_296695 =
                                            defunc_0_f_res_t_res_296699;
                                    } else {
                                        defunc_0_f_res_296695 = 0.0;
                                    }
                                    
                                    double defunc_0_f_res_296700;
                                    
                                    if (cond_296694) {
                                        bool y_296701 = slt64(x_296693,
                                                              n_292675);
                                        bool bounds_check_296702 =
                                             cond_296694 && y_296701;
                                        bool index_certs_296703;
                                        
                                        if (!bounds_check_296702) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_296693,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_292675,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_304827,
                                                               "mem_304827") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_304823,
                                                               "mem_304823") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305098,
                                                               "ext_mem_305098") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305106,
                                                               "ext_mem_305106") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305114,
                                                               "ext_mem_305114") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305122,
                                                               "ext_mem_305122") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305130,
                                                               "ext_mem_305130") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305138,
                                                               "ext_mem_305138") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305146,
                                                               "ext_mem_305146") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305154,
                                                               "ext_mem_305154") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_303763,
                                                               "mem_303763") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303752,
                                                               "ext_mem_303752") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303689,
                                                               "ext_mem_303689") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303697,
                                                               "ext_mem_303697") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302544,
                                                               "ext_mem_302544") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302419,
                                                               "ext_mem_302419") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302430,
                                                               "ext_mem_302430") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300343,
                                                               "mem_param_300343") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300335,
                                                               "mem_param_300335") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305217,
                                                               "ext_mem_305217") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305218,
                                                               "ext_mem_305218") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300321,
                                                               "mem_param_300321") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300313,
                                                               "mem_param_300313") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300305,
                                                               "mem_param_300305") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305742,
                                                               "ext_mem_305742") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305743,
                                                               "ext_mem_305743") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305744,
                                                               "ext_mem_305744") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300297,
                                                               "mem_300297") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300293,
                                                               "mem_300293") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306309,
                                                               "mem_out_306309") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306308,
                                                               "mem_out_306308") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306307,
                                                               "mem_out_306307") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_296704;
                                        
                                        defunc_0_f_res_t_res_296704 =
                                            ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                              (i_298325 *
                                                                               ctx_param_ext_300317 +
                                                                               x_296693 *
                                                                               ctx_param_ext_300319)];
                                        defunc_0_f_res_296700 =
                                            defunc_0_f_res_t_res_296704;
                                    } else {
                                        defunc_0_f_res_296700 = 0.0;
                                    }
                                    ((double *) mem_304865)[i_298304] =
                                        defunc_0_f_res_296700;
                                    ((double *) mem_304868)[i_298304] =
                                        defunc_0_f_res_296695;
                                }
                                for (int64_t i_298318 = 0; i_298318 <
                                     t_n_m_292839; i_298318++) {
                                    int64_t x_296708;
                                    
                                    x_296708 =
                                        ((int64_t *) mem_300184)[i_298325 *
                                                                 t_n_m_292839 +
                                                                 i_298318];
                                    
                                    double x_296709;
                                    
                                    x_296709 =
                                        ((double *) mem_300188)[i_298325 *
                                                                t_n_m_292839 +
                                                                i_298318];
                                    
                                    int64_t min_arg_296710 =
                                            mul64(jump_t_292685, i_298318);
                                    int64_t min_res_296711 = smin64(i_292846,
                                                                    min_arg_296710);
                                    int64_t defunc_0_g_res_296712 =
                                            add64((int64_t) 1, min_res_296711);
                                    double defunc_2_reduce_res_296713;
                                    double defunc_2_reduce_res_296714;
                                    double defunc_2_reduce_res_296715;
                                    double redout_298307;
                                    double redout_298308;
                                    double redout_298309;
                                    
                                    redout_298307 = 0.0;
                                    redout_298308 = 0.0;
                                    redout_298309 = 0.0;
                                    for (int64_t i_298310 = 0; i_298310 <
                                         q_t_292679; i_298310++) {
                                        bool cond_296726 = sle64(x_296683,
                                                                 i_298310);
                                        int64_t defunc_0_f_res_296727;
                                        
                                        if (cond_296726) {
                                            defunc_0_f_res_296727 = (int64_t) 0;
                                        } else {
                                            int64_t i_296728 = add64(x_296708,
                                                                     i_298310);
                                            int64_t defunc_0_add_arg_296729;
                                            
                                            defunc_0_add_arg_296729 =
                                                ((int64_t *) mem_299509)[i_298325 *
                                                                         n_292675 +
                                                                         i_296728];
                                            
                                            int64_t defunc_1_add_res_296730 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_296729);
                                            
                                            defunc_0_f_res_296727 =
                                                defunc_1_add_res_296730;
                                        }
                                        
                                        double defunc_0_f_res_296731;
                                        
                                        if (cond_296726) {
                                            defunc_0_f_res_296731 = 0.0;
                                        } else {
                                            int64_t i_296732 = add64(x_296708,
                                                                     i_298310);
                                            double defunc_0_add_arg_296733;
                                            
                                            defunc_0_add_arg_296733 =
                                                ((double *) mem_304865)[i_296732];
                                            defunc_0_f_res_296731 =
                                                defunc_0_add_arg_296733;
                                        }
                                        
                                        int64_t binop_p_296734 =
                                                sub64(defunc_0_f_res_296727,
                                                      defunc_0_g_res_296712);
                                        double defunc_0_f_res_296735 =
                                               sitofp_i64_f64(binop_p_296734);
                                        double abs_res_296736 =
                                               fabs(defunc_0_f_res_296735);
                                        double tmp1_296737 = abs_res_296736 /
                                               x_296709;
                                        double x_296738 = tmp1_296737 *
                                               tmp1_296737;
                                        double y_296739 = tmp1_296737 *
                                               x_296738;
                                        double tmp2_296740 = 1.0 - y_296739;
                                        double x_296741 = tmp2_296740 *
                                               tmp2_296740;
                                        double tmp3_296742 = tmp2_296740 *
                                               x_296741;
                                        double w_j_296743 =
                                               defunc_0_f_res_296731 *
                                               tmp3_296742;
                                        double xw_j_296744 =
                                               defunc_0_f_res_296735 *
                                               w_j_296743;
                                        double x2w_j_296745 =
                                               defunc_0_f_res_296735 *
                                               xw_j_296744;
                                        double defunc_1_op_res_296718 =
                                               w_j_296743 + redout_298307;
                                        double defunc_1_op_res_296721 =
                                               xw_j_296744 + redout_298308;
                                        double defunc_1_op_res_296724 =
                                               x2w_j_296745 + redout_298309;
                                        double redout_tmp_306710 =
                                               defunc_1_op_res_296718;
                                        double redout_tmp_306711 =
                                               defunc_1_op_res_296721;
                                        double redout_tmp_306712 =
                                               defunc_1_op_res_296724;
                                        
                                        redout_298307 = redout_tmp_306710;
                                        redout_298308 = redout_tmp_306711;
                                        redout_298309 = redout_tmp_306712;
                                    }
                                    defunc_2_reduce_res_296713 = redout_298307;
                                    defunc_2_reduce_res_296714 = redout_298308;
                                    defunc_2_reduce_res_296715 = redout_298309;
                                    
                                    double a_296746 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296713;
                                    double b_296747 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296714;
                                    double c_296748 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296715;
                                    double x_296749 = a_296746 * c_296748;
                                    double y_296750 = b_296747 * b_296747;
                                    double y_296751 = x_296749 - y_296750;
                                    double det1_296752 = 1.0 / y_296751;
                                    double a11_296753 = c_296748 * det1_296752;
                                    double x_296754 = 0.0 - b_296747;
                                    double b11_296755 = det1_296752 * x_296754;
                                    double c11_296756 = a_296746 * det1_296752;
                                    double defunc_2_reduce_res_296757;
                                    double defunc_2_reduce_res_296758;
                                    double redout_298311;
                                    double redout_298312;
                                    
                                    redout_298311 = 0.0;
                                    redout_298312 = 0.0;
                                    for (int64_t i_298313 = 0; i_298313 <
                                         q_t_292679; i_298313++) {
                                        bool cond_296766 = sle64(x_296683,
                                                                 i_298313);
                                        int64_t defunc_0_f_res_296767;
                                        
                                        if (cond_296766) {
                                            defunc_0_f_res_296767 = (int64_t) 0;
                                        } else {
                                            int64_t i_296768 = add64(x_296708,
                                                                     i_298313);
                                            int64_t defunc_0_add_arg_296769;
                                            
                                            defunc_0_add_arg_296769 =
                                                ((int64_t *) mem_299509)[i_298325 *
                                                                         n_292675 +
                                                                         i_296768];
                                            
                                            int64_t defunc_1_add_res_296770 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_296769);
                                            
                                            defunc_0_f_res_296767 =
                                                defunc_1_add_res_296770;
                                        }
                                        
                                        double defunc_0_f_res_296771;
                                        
                                        if (cond_296766) {
                                            defunc_0_f_res_296771 = 0.0;
                                        } else {
                                            int64_t i_296772 = add64(x_296708,
                                                                     i_298313);
                                            double defunc_0_add_arg_296773;
                                            
                                            defunc_0_add_arg_296773 =
                                                ((double *) mem_304865)[i_296772];
                                            defunc_0_f_res_296771 =
                                                defunc_0_add_arg_296773;
                                        }
                                        
                                        int64_t binop_p_296774 =
                                                sub64(defunc_0_f_res_296767,
                                                      defunc_0_g_res_296712);
                                        double defunc_0_f_res_296775 =
                                               sitofp_i64_f64(binop_p_296774);
                                        double abs_res_296776 =
                                               fabs(defunc_0_f_res_296775);
                                        double tmp1_296777 = abs_res_296776 /
                                               x_296709;
                                        double x_296778 = tmp1_296777 *
                                               tmp1_296777;
                                        double y_296779 = tmp1_296777 *
                                               x_296778;
                                        double tmp2_296780 = 1.0 - y_296779;
                                        double x_296781 = tmp2_296780 *
                                               tmp2_296780;
                                        double tmp3_296782 = tmp2_296780 *
                                               x_296781;
                                        double tmp4_296783 =
                                               defunc_0_f_res_296771 *
                                               tmp3_296782;
                                        double defunc_1_f_res_296784 =
                                               defunc_0_f_res_296775 *
                                               tmp4_296783;
                                        double defunc_0_f_res_296785;
                                        
                                        if (cond_296766) {
                                            defunc_0_f_res_296785 = 0.0;
                                        } else {
                                            int64_t i_296786 = add64(x_296708,
                                                                     i_298313);
                                            double defunc_0_add_arg_296787;
                                            
                                            defunc_0_add_arg_296787 =
                                                ((double *) mem_304868)[i_296786];
                                            defunc_0_f_res_296785 =
                                                defunc_0_add_arg_296787;
                                        }
                                        
                                        double x_296788 = a11_296753 *
                                               tmp4_296783;
                                        double y_296789 = b11_296755 *
                                               defunc_1_f_res_296784;
                                        double x_296790 = x_296788 + y_296789;
                                        double defunc_9_fit_fun_res_296791 =
                                               defunc_0_f_res_296785 * x_296790;
                                        double x_296792 = b11_296755 *
                                               tmp4_296783;
                                        double y_296793 = c11_296756 *
                                               defunc_1_f_res_296784;
                                        double x_296794 = x_296792 + y_296793;
                                        double defunc_9_slope_fun_res_296795 =
                                               defunc_0_f_res_296785 * x_296794;
                                        double defunc_1_op_res_296761 =
                                               defunc_9_fit_fun_res_296791 +
                                               redout_298311;
                                        double defunc_1_op_res_296764 =
                                               defunc_9_slope_fun_res_296795 +
                                               redout_298312;
                                        double redout_tmp_306713 =
                                               defunc_1_op_res_296761;
                                        double redout_tmp_306714 =
                                               defunc_1_op_res_296764;
                                        
                                        redout_298311 = redout_tmp_306713;
                                        redout_298312 = redout_tmp_306714;
                                    }
                                    defunc_2_reduce_res_296757 = redout_298311;
                                    defunc_2_reduce_res_296758 = redout_298312;
                                    ((double *) mem_304823.mem)[i_298325 *
                                                                t_n_m_292839 +
                                                                i_298318] =
                                        defunc_2_reduce_res_296757;
                                    ((double *) mem_304827.mem)[i_298325 *
                                                                t_n_m_292839 +
                                                                i_298318] =
                                        defunc_2_reduce_res_296758;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_305106, &mem_304823,
                                             "mem_304823") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_305098, &mem_304827,
                                             "mem_304827") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_304827,
                                               "mem_304827") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_304823,
                                               "mem_304823") != 0)
                                return 1;
                        } else {
                            struct memblock mem_304962;
                            
                            mem_304962.references = NULL;
                            if (memblock_alloc(ctx, &mem_304962, bytes_300183,
                                               "mem_304962")) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            struct memblock mem_304966;
                            
                            mem_304966.references = NULL;
                            if (memblock_alloc(ctx, &mem_304966, bytes_300183,
                                               "mem_304966")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (mem_304989_cached_sizze_306897 <
                                (size_t) bytes_304988) {
                                mem_304989 = realloc(mem_304989, bytes_304988);
                                mem_304989_cached_sizze_306897 = bytes_304988;
                            }
                            if (mem_305004_cached_sizze_306898 <
                                (size_t) bytes_304988) {
                                mem_305004 = realloc(mem_305004, bytes_304988);
                                mem_305004_cached_sizze_306898 = bytes_304988;
                            }
                            if (mem_305007_cached_sizze_306899 <
                                (size_t) bytes_304988) {
                                mem_305007 = realloc(mem_305007, bytes_304988);
                                mem_305007_cached_sizze_306899 = bytes_304988;
                            }
                            for (int64_t i_298359 = 0; i_298359 <
                                 partition_sizze_292766; i_298359++) {
                                int64_t x_296807;
                                
                                x_296807 = ((int64_t *) mem_299512)[i_298359];
                                for (int64_t i_298330 = 0; i_298330 < n_292675;
                                     i_298330++) {
                                    float x_296811;
                                    
                                    x_296811 = ((float *) mem_299469)[i_298359 *
                                                                      n_292675 +
                                                                      i_298330];
                                    
                                    double x_296812;
                                    
                                    x_296812 =
                                        ((double *) mem_303763.mem)[i_298359 *
                                                                    n_292675 +
                                                                    i_298330];
                                    
                                    double f32_res_296813 =
                                           fpconv_f32_f64(x_296811);
                                    double defunc_1_f_res_296814 =
                                           f32_res_296813 - x_296812;
                                    
                                    ((double *) mem_304989)[i_298330] =
                                        defunc_1_f_res_296814;
                                }
                                for (int64_t i_298336 = 0; i_298336 < n_292675;
                                     i_298336++) {
                                    int64_t x_296817;
                                    
                                    x_296817 =
                                        ((int64_t *) mem_299509)[i_298359 *
                                                                 n_292675 +
                                                                 i_298336];
                                    
                                    bool cond_296818 = sle64((int64_t) 0,
                                                             x_296817);
                                    double defunc_0_f_res_296819;
                                    
                                    if (cond_296818) {
                                        bool y_296820 = slt64(x_296817,
                                                              n_292675);
                                        bool bounds_check_296821 =
                                             cond_296818 && y_296820;
                                        bool index_certs_296822;
                                        
                                        if (!bounds_check_296821) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_296817,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_292675,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:285:33-58\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_304966,
                                                               "mem_304966") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_304962,
                                                               "mem_304962") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305098,
                                                               "ext_mem_305098") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305106,
                                                               "ext_mem_305106") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305114,
                                                               "ext_mem_305114") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305122,
                                                               "ext_mem_305122") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305130,
                                                               "ext_mem_305130") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305138,
                                                               "ext_mem_305138") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305146,
                                                               "ext_mem_305146") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305154,
                                                               "ext_mem_305154") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_303763,
                                                               "mem_303763") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303752,
                                                               "ext_mem_303752") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303689,
                                                               "ext_mem_303689") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303697,
                                                               "ext_mem_303697") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302544,
                                                               "ext_mem_302544") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302419,
                                                               "ext_mem_302419") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302430,
                                                               "ext_mem_302430") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300343,
                                                               "mem_param_300343") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300335,
                                                               "mem_param_300335") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305217,
                                                               "ext_mem_305217") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305218,
                                                               "ext_mem_305218") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300321,
                                                               "mem_param_300321") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300313,
                                                               "mem_param_300313") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300305,
                                                               "mem_param_300305") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305742,
                                                               "ext_mem_305742") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305743,
                                                               "ext_mem_305743") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305744,
                                                               "ext_mem_305744") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300297,
                                                               "mem_300297") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300293,
                                                               "mem_300293") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306309,
                                                               "mem_out_306309") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306308,
                                                               "mem_out_306308") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306307,
                                                               "mem_out_306307") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_296823;
                                        
                                        defunc_0_f_res_t_res_296823 =
                                            ((double *) mem_304989)[x_296817];
                                        defunc_0_f_res_296819 =
                                            defunc_0_f_res_t_res_296823;
                                    } else {
                                        defunc_0_f_res_296819 = 0.0;
                                    }
                                    
                                    double defunc_0_f_res_296824;
                                    
                                    if (cond_296818) {
                                        bool y_296825 = slt64(x_296817,
                                                              n_292675);
                                        bool bounds_check_296826 =
                                             cond_296818 && y_296825;
                                        bool index_certs_296827;
                                        
                                        if (!bounds_check_296826) {
                                            ctx->error =
                                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                                          "Index [",
                                                          (long long) x_296817,
                                                          "] out of bounds for array of shape [",
                                                          (long long) n_292675,
                                                          "].",
                                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:45:43-70\n   #3  stl.fut:286:33-64\n   #4  /prelude/soacs.fut:75:22-28\n   #5  /prelude/soacs.fut:75:3-45\n   #6  stl.fut:283:13-288:41\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                            if (memblock_unref(ctx, &mem_304966,
                                                               "mem_304966") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_304962,
                                                               "mem_304962") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305098,
                                                               "ext_mem_305098") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305106,
                                                               "ext_mem_305106") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305114,
                                                               "ext_mem_305114") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305122,
                                                               "ext_mem_305122") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305130,
                                                               "ext_mem_305130") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305138,
                                                               "ext_mem_305138") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305146,
                                                               "ext_mem_305146") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305154,
                                                               "ext_mem_305154") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_303763,
                                                               "mem_303763") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303752,
                                                               "ext_mem_303752") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303689,
                                                               "ext_mem_303689") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_303697,
                                                               "ext_mem_303697") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302544,
                                                               "ext_mem_302544") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302419,
                                                               "ext_mem_302419") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_302430,
                                                               "ext_mem_302430") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300343,
                                                               "mem_param_300343") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300335,
                                                               "mem_param_300335") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305217,
                                                               "ext_mem_305217") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305218,
                                                               "ext_mem_305218") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300321,
                                                               "mem_param_300321") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300313,
                                                               "mem_param_300313") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_param_300305,
                                                               "mem_param_300305") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305742,
                                                               "ext_mem_305742") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305743,
                                                               "ext_mem_305743") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &ext_mem_305744,
                                                               "ext_mem_305744") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300297,
                                                               "mem_300297") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx, &mem_300293,
                                                               "mem_300293") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306309,
                                                               "mem_out_306309") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306308,
                                                               "mem_out_306308") !=
                                                0)
                                                return 1;
                                            if (memblock_unref(ctx,
                                                               &mem_out_306307,
                                                               "mem_out_306307") !=
                                                0)
                                                return 1;
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        double defunc_0_f_res_t_res_296828;
                                        
                                        defunc_0_f_res_t_res_296828 =
                                            ((double *) mem_param_300321.mem)[ctx_param_ext_300316 +
                                                                              (i_298359 *
                                                                               ctx_param_ext_300317 +
                                                                               x_296817 *
                                                                               ctx_param_ext_300319)];
                                        defunc_0_f_res_296824 =
                                            defunc_0_f_res_t_res_296828;
                                    } else {
                                        defunc_0_f_res_296824 = 0.0;
                                    }
                                    ((double *) mem_305004)[i_298336] =
                                        defunc_0_f_res_296824;
                                    ((double *) mem_305007)[i_298336] =
                                        defunc_0_f_res_296819;
                                }
                                for (int64_t i_298352 = 0; i_298352 <
                                     t_n_m_292839; i_298352++) {
                                    int64_t x_296832;
                                    
                                    x_296832 =
                                        ((int64_t *) mem_300184)[i_298359 *
                                                                 t_n_m_292839 +
                                                                 i_298352];
                                    
                                    double x_296833;
                                    
                                    x_296833 =
                                        ((double *) mem_300188)[i_298359 *
                                                                t_n_m_292839 +
                                                                i_298352];
                                    
                                    int64_t min_arg_296834 =
                                            mul64(jump_t_292685, i_298352);
                                    int64_t min_res_296835 = smin64(i_292846,
                                                                    min_arg_296834);
                                    int64_t defunc_0_g_res_296836 =
                                            add64((int64_t) 1, min_res_296835);
                                    double defunc_2_reduce_res_296837;
                                    double defunc_2_reduce_res_296838;
                                    double defunc_2_reduce_res_296839;
                                    double defunc_2_reduce_res_296840;
                                    double defunc_2_reduce_res_296841;
                                    double redout_298339;
                                    double redout_298340;
                                    double redout_298341;
                                    double redout_298342;
                                    double redout_298343;
                                    
                                    redout_298339 = 0.0;
                                    redout_298340 = 0.0;
                                    redout_298341 = 0.0;
                                    redout_298342 = 0.0;
                                    redout_298343 = 0.0;
                                    for (int64_t i_298344 = 0; i_298344 <
                                         q_t_292679; i_298344++) {
                                        bool cond_296858 = sle64(x_296807,
                                                                 i_298344);
                                        int64_t defunc_0_f_res_296859;
                                        
                                        if (cond_296858) {
                                            defunc_0_f_res_296859 = (int64_t) 0;
                                        } else {
                                            int64_t i_296860 = add64(x_296832,
                                                                     i_298344);
                                            int64_t defunc_0_add_arg_296861;
                                            
                                            defunc_0_add_arg_296861 =
                                                ((int64_t *) mem_299509)[i_298359 *
                                                                         n_292675 +
                                                                         i_296860];
                                            
                                            int64_t defunc_1_add_res_296862 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_296861);
                                            
                                            defunc_0_f_res_296859 =
                                                defunc_1_add_res_296862;
                                        }
                                        
                                        double defunc_0_f_res_296863;
                                        
                                        if (cond_296858) {
                                            defunc_0_f_res_296863 = 0.0;
                                        } else {
                                            int64_t i_296864 = add64(x_296832,
                                                                     i_298344);
                                            double defunc_0_add_arg_296865;
                                            
                                            defunc_0_add_arg_296865 =
                                                ((double *) mem_305004)[i_296864];
                                            defunc_0_f_res_296863 =
                                                defunc_0_add_arg_296865;
                                        }
                                        
                                        int64_t binop_p_296866 =
                                                sub64(defunc_0_f_res_296859,
                                                      defunc_0_g_res_296836);
                                        double defunc_0_f_res_296867 =
                                               sitofp_i64_f64(binop_p_296866);
                                        double abs_res_296868 =
                                               fabs(defunc_0_f_res_296867);
                                        double tmp1_296869 = abs_res_296868 /
                                               x_296833;
                                        double x_296870 = tmp1_296869 *
                                               tmp1_296869;
                                        double y_296871 = tmp1_296869 *
                                               x_296870;
                                        double tmp2_296872 = 1.0 - y_296871;
                                        double x_296873 = tmp2_296872 *
                                               tmp2_296872;
                                        double tmp3_296874 = tmp2_296872 *
                                               x_296873;
                                        double w_j_296875 =
                                               defunc_0_f_res_296863 *
                                               tmp3_296874;
                                        double xw_j_296876 =
                                               defunc_0_f_res_296867 *
                                               w_j_296875;
                                        double x2w_j_296877 =
                                               defunc_0_f_res_296867 *
                                               xw_j_296876;
                                        double x3w_j_296878 =
                                               defunc_0_f_res_296867 *
                                               x2w_j_296877;
                                        double x4w_j_296879 =
                                               defunc_0_f_res_296867 *
                                               x3w_j_296878;
                                        double defunc_1_op_res_296844 =
                                               w_j_296875 + redout_298339;
                                        double defunc_1_op_res_296847 =
                                               xw_j_296876 + redout_298340;
                                        double defunc_1_op_res_296850 =
                                               x2w_j_296877 + redout_298341;
                                        double defunc_1_op_res_296853 =
                                               x3w_j_296878 + redout_298342;
                                        double defunc_1_op_res_296856 =
                                               x4w_j_296879 + redout_298343;
                                        double redout_tmp_306722 =
                                               defunc_1_op_res_296844;
                                        double redout_tmp_306723 =
                                               defunc_1_op_res_296847;
                                        double redout_tmp_306724 =
                                               defunc_1_op_res_296850;
                                        double redout_tmp_306725 =
                                               defunc_1_op_res_296853;
                                        double redout_tmp_306726 =
                                               defunc_1_op_res_296856;
                                        
                                        redout_298339 = redout_tmp_306722;
                                        redout_298340 = redout_tmp_306723;
                                        redout_298341 = redout_tmp_306724;
                                        redout_298342 = redout_tmp_306725;
                                        redout_298343 = redout_tmp_306726;
                                    }
                                    defunc_2_reduce_res_296837 = redout_298339;
                                    defunc_2_reduce_res_296838 = redout_298340;
                                    defunc_2_reduce_res_296839 = redout_298341;
                                    defunc_2_reduce_res_296840 = redout_298342;
                                    defunc_2_reduce_res_296841 = redout_298343;
                                    
                                    double a_296880 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296837;
                                    double b_296881 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296838;
                                    double c_296882 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296839;
                                    double d_296883 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296840;
                                    double e_296884 = 2.220446049250313e-16 +
                                           defunc_2_reduce_res_296841;
                                    double x_296885 = c_296882 * e_296884;
                                    double y_296886 = d_296883 * d_296883;
                                    double a12_296887 = x_296885 - y_296886;
                                    double x_296888 = c_296882 * d_296883;
                                    double y_296889 = b_296881 * e_296884;
                                    double b12_296890 = x_296888 - y_296889;
                                    double x_296891 = b_296881 * d_296883;
                                    double y_296892 = c_296882 * c_296882;
                                    double c12_296893 = x_296891 - y_296892;
                                    double x_296894 = a_296880 * e_296884;
                                    double b2_296895 = x_296894 - y_296892;
                                    double x_296896 = b_296881 * c_296882;
                                    double y_296897 = a_296880 * d_296883;
                                    double c2_296898 = x_296896 - y_296897;
                                    double x_296899 = a_296880 * a12_296887;
                                    double y_296900 = b_296881 * b12_296890;
                                    double x_296901 = x_296899 + y_296900;
                                    double y_296902 = c_296882 * c12_296893;
                                    double y_296903 = x_296901 + y_296902;
                                    double det_296904 = 1.0 / y_296903;
                                    double a12_296905 = a12_296887 * det_296904;
                                    double b12_296906 = b12_296890 * det_296904;
                                    double c12_296907 = c12_296893 * det_296904;
                                    double b2_296908 = b2_296895 * det_296904;
                                    double c2_296909 = c2_296898 * det_296904;
                                    double defunc_2_reduce_res_296910;
                                    double defunc_2_reduce_res_296911;
                                    double redout_298345;
                                    double redout_298346;
                                    
                                    redout_298345 = 0.0;
                                    redout_298346 = 0.0;
                                    for (int64_t i_298347 = 0; i_298347 <
                                         q_t_292679; i_298347++) {
                                        bool cond_296919 = sle64(x_296807,
                                                                 i_298347);
                                        int64_t defunc_0_f_res_296920;
                                        
                                        if (cond_296919) {
                                            defunc_0_f_res_296920 = (int64_t) 0;
                                        } else {
                                            int64_t i_296921 = add64(x_296832,
                                                                     i_298347);
                                            int64_t defunc_0_add_arg_296922;
                                            
                                            defunc_0_add_arg_296922 =
                                                ((int64_t *) mem_299509)[i_298359 *
                                                                         n_292675 +
                                                                         i_296921];
                                            
                                            int64_t defunc_1_add_res_296923 =
                                                    add64((int64_t) 1,
                                                          defunc_0_add_arg_296922);
                                            
                                            defunc_0_f_res_296920 =
                                                defunc_1_add_res_296923;
                                        }
                                        
                                        double defunc_0_f_res_296924;
                                        
                                        if (cond_296919) {
                                            defunc_0_f_res_296924 = 0.0;
                                        } else {
                                            int64_t i_296925 = add64(x_296832,
                                                                     i_298347);
                                            double defunc_0_add_arg_296926;
                                            
                                            defunc_0_add_arg_296926 =
                                                ((double *) mem_305004)[i_296925];
                                            defunc_0_f_res_296924 =
                                                defunc_0_add_arg_296926;
                                        }
                                        
                                        int64_t binop_p_296927 =
                                                sub64(defunc_0_f_res_296920,
                                                      defunc_0_g_res_296836);
                                        double defunc_0_f_res_296928 =
                                               sitofp_i64_f64(binop_p_296927);
                                        double abs_res_296929 =
                                               fabs(defunc_0_f_res_296928);
                                        double tmp1_296930 = abs_res_296929 /
                                               x_296833;
                                        double x_296931 = tmp1_296930 *
                                               tmp1_296930;
                                        double y_296932 = tmp1_296930 *
                                               x_296931;
                                        double tmp2_296933 = 1.0 - y_296932;
                                        double x_296934 = tmp2_296933 *
                                               tmp2_296933;
                                        double tmp3_296935 = tmp2_296933 *
                                               x_296934;
                                        double tmp4_296936 =
                                               defunc_0_f_res_296924 *
                                               tmp3_296935;
                                        double defunc_1_f_res_296937 =
                                               defunc_0_f_res_296928 *
                                               tmp4_296936;
                                        double defunc_1_f_res_296938 =
                                               defunc_0_f_res_296928 *
                                               defunc_1_f_res_296937;
                                        double defunc_0_f_res_296939;
                                        
                                        if (cond_296919) {
                                            defunc_0_f_res_296939 = 0.0;
                                        } else {
                                            int64_t i_296940 = add64(x_296832,
                                                                     i_298347);
                                            double defunc_0_add_arg_296941;
                                            
                                            defunc_0_add_arg_296941 =
                                                ((double *) mem_305007)[i_296940];
                                            defunc_0_f_res_296939 =
                                                defunc_0_add_arg_296941;
                                        }
                                        
                                        double x_296942 = a12_296905 *
                                               tmp4_296936;
                                        double y_296943 = b12_296906 *
                                               defunc_1_f_res_296937;
                                        double x_296944 = x_296942 + y_296943;
                                        double y_296945 = c12_296907 *
                                               defunc_1_f_res_296938;
                                        double x_296946 = x_296944 + y_296945;
                                        double defunc_9_fit_fun_res_296947 =
                                               defunc_0_f_res_296939 * x_296946;
                                        double x_296948 = b12_296906 *
                                               tmp4_296936;
                                        double y_296949 = b2_296908 *
                                               defunc_1_f_res_296937;
                                        double x_296950 = x_296948 + y_296949;
                                        double y_296951 = c2_296909 *
                                               defunc_1_f_res_296938;
                                        double x_296952 = x_296950 + y_296951;
                                        double defunc_9_slope_fun_res_296953 =
                                               defunc_0_f_res_296939 * x_296952;
                                        double defunc_1_op_res_296914 =
                                               defunc_9_fit_fun_res_296947 +
                                               redout_298345;
                                        double defunc_1_op_res_296917 =
                                               defunc_9_slope_fun_res_296953 +
                                               redout_298346;
                                        double redout_tmp_306727 =
                                               defunc_1_op_res_296914;
                                        double redout_tmp_306728 =
                                               defunc_1_op_res_296917;
                                        
                                        redout_298345 = redout_tmp_306727;
                                        redout_298346 = redout_tmp_306728;
                                    }
                                    defunc_2_reduce_res_296910 = redout_298345;
                                    defunc_2_reduce_res_296911 = redout_298346;
                                    ((double *) mem_304962.mem)[i_298359 *
                                                                t_n_m_292839 +
                                                                i_298352] =
                                        defunc_2_reduce_res_296910;
                                    ((double *) mem_304966.mem)[i_298359 *
                                                                t_n_m_292839 +
                                                                i_298352] =
                                        defunc_2_reduce_res_296911;
                                }
                            }
                            if (memblock_set(ctx, &ext_mem_305106, &mem_304962,
                                             "mem_304962") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_305098, &mem_304966,
                                             "mem_304966") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_304966,
                                               "mem_304966") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_304962,
                                               "mem_304962") != 0)
                                return 1;
                        }
                        if (memblock_set(ctx, &ext_mem_305122, &ext_mem_305106,
                                         "ext_mem_305106") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_305114, &ext_mem_305098,
                                         "ext_mem_305098") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305098,
                                           "ext_mem_305098") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305106,
                                           "ext_mem_305106") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_305138, &ext_mem_305122,
                                     "ext_mem_305122") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_305130, &ext_mem_305114,
                                     "ext_mem_305114") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305114,
                                       "ext_mem_305114") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305122,
                                       "ext_mem_305122") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_305154, &ext_mem_305138,
                                 "ext_mem_305138") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_305146, &ext_mem_305130,
                                 "ext_mem_305130") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_305130, "ext_mem_305130") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_305138, "ext_mem_305138") != 0)
                    return 1;
            }
            
            struct memblock ext_mem_305209;
            
            ext_mem_305209.references = NULL;
            if (cond_293286) {
                bool zzero_296959 = jump_t_292685 == (int64_t) 0;
                bool nonzzero_296960 = !zzero_296959;
                bool nonzzero_cert_296961;
                
                if (!nonzzero_296960) {
                    ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                           "division by zero",
                                           "-> #0  loess.fut:742:20-27\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:741:3-745:9\n   #5  stl.fut:310:23-75\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:309:15-311:43\n   #9  stl.fut:419:61-435:77\n   #10 stl.fut:463:3-479:36\n   #11 stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_305209,
                                       "ext_mem_305209") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305146,
                                       "ext_mem_305146") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305154,
                                       "ext_mem_305154") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303763, "mem_303763") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303752,
                                       "ext_mem_303752") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303689,
                                       "ext_mem_303689") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303697,
                                       "ext_mem_303697") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302544,
                                       "ext_mem_302544") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302419,
                                       "ext_mem_302419") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302430,
                                       "ext_mem_302430") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300343,
                                       "mem_param_300343") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300335,
                                       "mem_param_300335") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305217,
                                       "ext_mem_305217") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305218,
                                       "ext_mem_305218") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300321,
                                       "mem_param_300321") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300313,
                                       "mem_param_300313") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300305,
                                       "mem_param_300305") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305742,
                                       "ext_mem_305742") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305743,
                                       "ext_mem_305743") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305744,
                                       "ext_mem_305744") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t y_296962 = sub64(t_n_m_292839, (int64_t) 1);
                struct memblock mem_305165;
                
                mem_305165.references = NULL;
                if (memblock_alloc(ctx, &mem_305165, bytes_299508,
                                   "mem_305165")) {
                    err = 1;
                    goto cleanup;
                }
                for (int64_t i_298368 = 0; i_298368 < partition_sizze_292766;
                     i_298368++) {
                    for (int64_t i_298364 = 0; i_298364 < n_292675;
                         i_298364++) {
                        int64_t m_v_296968 = sdiv64(i_298364, jump_t_292685);
                        bool cond_296969 = m_v_296968 == y_296962;
                        int64_t j_296970;
                        
                        if (cond_296969) {
                            int64_t j_t_res_296971 = sub64(m_v_296968,
                                                           (int64_t) 1);
                            
                            j_296970 = j_t_res_296971;
                        } else {
                            j_296970 = m_v_296968;
                        }
                        
                        int64_t min_arg_296972 = mul64(jump_t_292685, j_296970);
                        int64_t min_res_296973 = smin64(i_292846,
                                                        min_arg_296972);
                        int64_t defunc_0_m_fun_arg_296974 = add64((int64_t) 1,
                                                                  j_296970);
                        int64_t min_arg_296975 = mul64(jump_t_292685,
                                                       defunc_0_m_fun_arg_296974);
                        int64_t min_res_296976 = smin64(i_292846,
                                                        min_arg_296975);
                        int64_t i64_arg_296977 = sub64(min_res_296976,
                                                       min_res_296973);
                        double i64_res_296978 = sitofp_i64_f64(i64_arg_296977);
                        int64_t i64_arg_296979 = sub64(i_298364,
                                                       min_res_296973);
                        double i64_res_296980 = sitofp_i64_f64(i64_arg_296979);
                        double u_296981 = i64_res_296980 / i64_res_296978;
                        double u2_296982 = u_296981 * u_296981;
                        double u3_296983 = u_296981 * u2_296982;
                        double x_296984 = 2.0 * u3_296983;
                        double y_296985 = 3.0 * u2_296982;
                        double x_296986 = x_296984 - y_296985;
                        double x_296987 = 1.0 + x_296986;
                        bool x_296988 = sle64((int64_t) 0, j_296970);
                        bool y_296989 = slt64(j_296970, t_n_m_292839);
                        bool bounds_check_296990 = x_296988 && y_296989;
                        bool index_certs_296991;
                        
                        if (!bounds_check_296990) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) j_296970,
                                          "] out of bounds for array of shape [",
                                          (long long) t_n_m_292839, "].",
                                          "-> #0  loess.fut:731:27-33\n   #1  loess.fut:744:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:741:3-745:9\n   #6  stl.fut:310:23-75\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:309:15-311:43\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_305165,
                                               "mem_305165") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305209,
                                               "ext_mem_305209") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305146,
                                               "ext_mem_305146") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305154,
                                               "ext_mem_305154") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303763,
                                               "mem_303763") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303752,
                                               "ext_mem_303752") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303689,
                                               "ext_mem_303689") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303697,
                                               "ext_mem_303697") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302544,
                                               "ext_mem_302544") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302419,
                                               "ext_mem_302419") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302430,
                                               "ext_mem_302430") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300343,
                                               "mem_param_300343") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300335,
                                               "mem_param_300335") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305217,
                                               "ext_mem_305217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305218,
                                               "ext_mem_305218") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300321,
                                               "mem_param_300321") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300313,
                                               "mem_param_300313") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300305,
                                               "mem_param_300305") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305742,
                                               "ext_mem_305742") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305743,
                                               "ext_mem_305743") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305744,
                                               "ext_mem_305744") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300297,
                                               "mem_300297") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300293,
                                               "mem_300293") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306309,
                                               "mem_out_306309") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306308,
                                               "mem_out_306308") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306307,
                                               "mem_out_306307") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_296992;
                        
                        y_296992 = ((double *) ext_mem_305154.mem)[i_298368 *
                                                                   t_n_m_292839 +
                                                                   j_296970];
                        
                        double x_296993 = x_296987 * y_296992;
                        double x_296994 = y_296985 - x_296984;
                        bool x_296995 = sle64((int64_t) 0,
                                              defunc_0_m_fun_arg_296974);
                        bool y_296996 = slt64(defunc_0_m_fun_arg_296974,
                                              t_n_m_292839);
                        bool bounds_check_296997 = x_296995 && y_296996;
                        bool index_certs_296998;
                        
                        if (!bounds_check_296997) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [",
                                          (long long) defunc_0_m_fun_arg_296974,
                                          "] out of bounds for array of shape [",
                                          (long long) t_n_m_292839, "].",
                                          "-> #0  loess.fut:732:27-37\n   #1  loess.fut:744:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:741:3-745:9\n   #6  stl.fut:310:23-75\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  stl.fut:309:15-311:43\n   #10 stl.fut:419:61-435:77\n   #11 stl.fut:463:3-479:36\n   #12 stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_305165,
                                               "mem_305165") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305209,
                                               "ext_mem_305209") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305146,
                                               "ext_mem_305146") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305154,
                                               "ext_mem_305154") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_303763,
                                               "mem_303763") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303752,
                                               "ext_mem_303752") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303689,
                                               "ext_mem_303689") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_303697,
                                               "ext_mem_303697") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302544,
                                               "ext_mem_302544") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302419,
                                               "ext_mem_302419") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_302430,
                                               "ext_mem_302430") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300343,
                                               "mem_param_300343") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300335,
                                               "mem_param_300335") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305217,
                                               "ext_mem_305217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305218,
                                               "ext_mem_305218") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300321,
                                               "mem_param_300321") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300313,
                                               "mem_param_300313") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300305,
                                               "mem_param_300305") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305742,
                                               "ext_mem_305742") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305743,
                                               "ext_mem_305743") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305744,
                                               "ext_mem_305744") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300297,
                                               "mem_300297") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300293,
                                               "mem_300293") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306309,
                                               "mem_out_306309") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306308,
                                               "mem_out_306308") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306307,
                                               "mem_out_306307") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double y_296999;
                        
                        y_296999 = ((double *) ext_mem_305154.mem)[i_298368 *
                                                                   t_n_m_292839 +
                                                                   defunc_0_m_fun_arg_296974];
                        
                        double y_297000 = x_296994 * y_296999;
                        double x_297001 = x_296993 + y_297000;
                        double y_297002 = 2.0 * u2_296982;
                        double x_297003 = u3_296983 - y_297002;
                        double x_297004 = u_296981 + x_297003;
                        double y_297005;
                        
                        y_297005 = ((double *) ext_mem_305146.mem)[i_298368 *
                                                                   t_n_m_292839 +
                                                                   j_296970];
                        
                        double x_297006 = x_297004 * y_297005;
                        double y_297007 = i64_res_296978 * x_297006;
                        double x_297008 = x_297001 + y_297007;
                        double x_297009 = u3_296983 - u2_296982;
                        double y_297010;
                        
                        y_297010 = ((double *) ext_mem_305146.mem)[i_298368 *
                                                                   t_n_m_292839 +
                                                                   defunc_0_m_fun_arg_296974];
                        
                        double x_297011 = x_297009 * y_297010;
                        double y_297012 = i64_res_296978 * x_297011;
                        double defunc_4_interpolate_proc_res_297013 = x_297008 +
                               y_297012;
                        
                        ((double *) mem_305165.mem)[i_298368 * n_292675 +
                                                    i_298364] =
                            defunc_4_interpolate_proc_res_297013;
                    }
                }
                if (memblock_set(ctx, &ext_mem_305209, &mem_305165,
                                 "mem_305165") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_305165, "mem_305165") != 0)
                    return 1;
            } else {
                bool dim_match_297015 = n_292675 == t_n_m_292839;
                bool empty_or_match_cert_297016;
                
                if (!dim_match_297015) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Value of (core language) shape (",
                                  (long long) partition_sizze_292766, ", ",
                                  (long long) t_n_m_292839,
                                  ") cannot match shape of type `[",
                                  (long long) partition_sizze_292766, "][",
                                  (long long) n_292675, "]t`.",
                                  "-> #0  stl.fut:313:15-36\n   #1  stl.fut:419:61-435:77\n   #2  stl.fut:463:3-479:36\n   #3  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &ext_mem_305209,
                                       "ext_mem_305209") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305146,
                                       "ext_mem_305146") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305154,
                                       "ext_mem_305154") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_303763, "mem_303763") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303752,
                                       "ext_mem_303752") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303689,
                                       "ext_mem_303689") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_303697,
                                       "ext_mem_303697") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302544,
                                       "ext_mem_302544") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302419,
                                       "ext_mem_302419") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_302430,
                                       "ext_mem_302430") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300343,
                                       "mem_param_300343") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300335,
                                       "mem_param_300335") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305217,
                                       "ext_mem_305217") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305218,
                                       "ext_mem_305218") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300321,
                                       "mem_param_300321") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300313,
                                       "mem_param_300313") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300305,
                                       "mem_param_300305") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305742,
                                       "ext_mem_305742") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305743,
                                       "ext_mem_305743") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305744,
                                       "ext_mem_305744") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_305209, &ext_mem_305154,
                                 "ext_mem_305154") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_305146, "ext_mem_305146") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_305154, "ext_mem_305154") != 0)
                return 1;
            
            int64_t ctx_param_ext_tmp_306391 = ext_305213;
            int64_t ctx_param_ext_tmp_306392 = ext_305212;
            struct memblock mem_param_tmp_306393;
            
            mem_param_tmp_306393.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_306393, &mem_303763,
                             "mem_303763") != 0)
                return 1;
            
            struct memblock mem_param_tmp_306394;
            
            mem_param_tmp_306394.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_306394, &ext_mem_305209,
                             "ext_mem_305209") != 0)
                return 1;
            ctx_param_ext_300337 = ctx_param_ext_tmp_306391;
            ctx_param_ext_300339 = ctx_param_ext_tmp_306392;
            if (memblock_set(ctx, &mem_param_300335, &mem_param_tmp_306393,
                             "mem_param_tmp_306393") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_300343, &mem_param_tmp_306394,
                             "mem_param_tmp_306394") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_306394,
                               "mem_param_tmp_306394") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_306393,
                               "mem_param_tmp_306393") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_305209, "ext_mem_305209") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_305146, "ext_mem_305146") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_305154, "ext_mem_305154") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_303763, "mem_303763") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303752, "ext_mem_303752") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303689, "ext_mem_303689") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_303697, "ext_mem_303697") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_302544, "ext_mem_302544") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_302419, "ext_mem_302419") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_302430, "ext_mem_302430") != 0)
                return 1;
        }
        ext_305224 = ctx_param_ext_300337;
        ext_305222 = ctx_param_ext_300339;
        if (memblock_set(ctx, &ext_mem_305218, &mem_param_300335,
                         "mem_param_300335") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_305217, &mem_param_300343,
                         "mem_param_300343") != 0)
            return 1;
        
        bool cond_297018 = slt64(i_outer_293375, y_293287);
        int64_t ext_305741;
        
        if (cond_297018) {
            ext_305741 = partition_sizze_292766;
        } else {
            ext_305741 = ctx_param_ext_300318;
        }
        
        int64_t ext_305740;
        
        if (cond_297018) {
            ext_305740 = n_292675;
        } else {
            ext_305740 = ctx_param_ext_300320;
        }
        
        int64_t ext_305739;
        
        if (cond_297018) {
            ext_305739 = partition_sizze_292766;
        } else {
            ext_305739 = ctx_param_ext_300314;
        }
        
        int64_t ext_305738;
        
        if (cond_297018) {
            ext_305738 = n_292675;
        } else {
            ext_305738 = ctx_param_ext_300315;
        }
        
        int64_t ext_305737;
        
        if (cond_297018) {
            ext_305737 = n_292675;
        } else {
            ext_305737 = ctx_param_ext_300317;
        }
        
        int64_t ext_305736;
        
        if (cond_297018) {
            ext_305736 = (int64_t) 1;
        } else {
            ext_305736 = ctx_param_ext_300319;
        }
        
        int64_t ext_305735;
        
        if (cond_297018) {
            ext_305735 = (int64_t) 0;
        } else {
            ext_305735 = ctx_param_ext_300316;
        }
        
        struct memblock ext_mem_305734;
        
        ext_mem_305734.references = NULL;
        if (cond_297018) {
            if (mem_305236_cached_sizze_306900 < (size_t) bytes_299508) {
                mem_305236 = realloc(mem_305236, bytes_299508);
                mem_305236_cached_sizze_306900 = bytes_299508;
            }
            if (mem_305240_cached_sizze_306901 < (size_t) bytes_299508) {
                mem_305240 = realloc(mem_305240, bytes_299508);
                mem_305240_cached_sizze_306901 = bytes_299508;
            }
            for (int64_t i_298382 = 0; i_298382 < partition_sizze_292766;
                 i_298382++) {
                for (int64_t i_298372 = 0; i_298372 < n_292675; i_298372++) {
                    float x_297027;
                    
                    x_297027 = ((float *) mem_299469)[i_298382 * n_292675 +
                                                      i_298372];
                    
                    double x_297028;
                    
                    x_297028 = ((double *) ext_mem_305218.mem)[i_298382 *
                                                               n_292675 +
                                                               i_298372];
                    
                    double x_297029;
                    
                    x_297029 = ((double *) ext_mem_305217.mem)[i_298382 *
                                                               ext_305222 +
                                                               i_298372];
                    
                    double f32_res_297030 = fpconv_f32_f64(x_297027);
                    double x_297031 = f32_res_297030 - x_297028;
                    double defunc_2_f_res_297032 = x_297031 - x_297029;
                    bool isnan_res_297033;
                    
                    isnan_res_297033 = futrts_isnan64(defunc_2_f_res_297032);
                    
                    double defunc_0_f_res_297034;
                    
                    if (isnan_res_297033) {
                        defunc_0_f_res_297034 = defunc_2_f_res_297032;
                    } else {
                        double abs_res_297035 = fabs(defunc_2_f_res_297032);
                        
                        defunc_0_f_res_297034 = abs_res_297035;
                    }
                    ((double *) mem_305240)[i_298382 * n_292675 + i_298372] =
                        defunc_0_f_res_297034;
                }
                for (int64_t i_298376 = 0; i_298376 < n_292675; i_298376++) {
                    int64_t x_297037;
                    
                    x_297037 = ((int64_t *) mem_299509)[i_298382 * n_292675 +
                                                        i_298376];
                    
                    bool cond_297038 = sle64((int64_t) 0, x_297037);
                    double defunc_0_f_res_297039;
                    
                    if (cond_297038) {
                        bool y_297040 = slt64(x_297037, n_292675);
                        bool bounds_check_297041 = cond_297038 && y_297040;
                        bool index_certs_297042;
                        
                        if (!bounds_check_297041) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) x_297037,
                                          "] out of bounds for array of shape [",
                                          (long long) n_292675, "].",
                                          "-> #0  utils.fut:32:29-33\n   #1  utils.fut:32:3-49\n   #2  stl.fut:340:21-49\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:338:13-341:35\n   #6  stl.fut:419:61-435:77\n   #7  stl.fut:463:3-479:36\n   #8  stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &ext_mem_305734,
                                               "ext_mem_305734") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300343,
                                               "mem_param_300343") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300335,
                                               "mem_param_300335") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305217,
                                               "ext_mem_305217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305218,
                                               "ext_mem_305218") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300321,
                                               "mem_param_300321") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300313,
                                               "mem_param_300313") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300305,
                                               "mem_param_300305") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305742,
                                               "ext_mem_305742") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305743,
                                               "ext_mem_305743") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305744,
                                               "ext_mem_305744") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300297,
                                               "mem_300297") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300293,
                                               "mem_300293") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306309,
                                               "mem_out_306309") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306308,
                                               "mem_out_306308") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306307,
                                               "mem_out_306307") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double defunc_0_f_res_t_res_297043;
                        
                        defunc_0_f_res_t_res_297043 =
                            ((double *) mem_305240)[i_298382 * n_292675 +
                                                    x_297037];
                        defunc_0_f_res_297039 = defunc_0_f_res_t_res_297043;
                    } else {
                        defunc_0_f_res_297039 = INFINITY;
                    }
                    ((double *) mem_305236)[i_298382 * n_292675 + i_298376] =
                        defunc_0_f_res_297039;
                }
            }
            if (mem_305329_cached_sizze_306902 < (size_t) bytes_299511) {
                mem_305329 = realloc(mem_305329, bytes_299511);
                mem_305329_cached_sizze_306902 = bytes_299511;
            }
            for (int64_t i_298390 = 0; i_298390 < partition_sizze_292766;
                 i_298390++) {
                double defunc_0_f_res_297047;
                double defunc_0_f_res_297048;
                double redout_298385;
                double redout_298386;
                
                redout_298385 = INFINITY;
                redout_298386 = -INFINITY;
                for (int64_t i_298387 = 0; i_298387 < n_292675; i_298387++) {
                    double x_297055;
                    
                    x_297055 = ((double *) mem_305236)[i_298390 * n_292675 +
                                                       i_298387];
                    
                    double defunc_1_op_res_297051 = fmin64(x_297055,
                                                           redout_298385);
                    double defunc_1_op_res_297054 = fmax64(x_297055,
                                                           redout_298386);
                    double redout_tmp_306736 = defunc_1_op_res_297051;
                    double redout_tmp_306737 = defunc_1_op_res_297054;
                    
                    redout_298385 = redout_tmp_306736;
                    redout_298386 = redout_tmp_306737;
                }
                defunc_0_f_res_297047 = redout_298385;
                defunc_0_f_res_297048 = redout_298386;
                
                double defunc_1_f_res_297056 = defunc_0_f_res_297047 +
                       defunc_0_f_res_297048;
                double defunc_0_f_res_297057 = defunc_1_f_res_297056 / 2.0;
                
                ((double *) mem_305329)[i_298390] = defunc_0_f_res_297057;
            }
            
            int32_t i64_res_297059 = sext_i64_i32(n_292675);
            struct memblock mem_305344;
            
            mem_305344.references = NULL;
            if (memblock_alloc(ctx, &mem_305344, bytes_305343, "mem_305344")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_306738 = 0; i_306738 < partition_sizze_292766;
                 i_306738++) {
                ((int32_t *) mem_305344.mem)[i_306738] = i64_res_297059;
            }
            if (mem_305348_cached_sizze_306903 < (size_t) bytes_305347) {
                mem_305348 = realloc(mem_305348, bytes_305347);
                mem_305348_cached_sizze_306903 = bytes_305347;
            }
            if (mem_305351_cached_sizze_306904 < (size_t) bytes_299511) {
                mem_305351 = realloc(mem_305351, bytes_299511);
                mem_305351_cached_sizze_306904 = bytes_299511;
            }
            if (mem_305371_cached_sizze_306905 < (size_t) bytes_305370) {
                mem_305371 = realloc(mem_305371, bytes_305370);
                mem_305371_cached_sizze_306905 = bytes_305370;
            }
            for (int64_t i_298396 = 0; i_298396 < partition_sizze_292766;
                 i_298396++) {
                int64_t x_297064;
                
                x_297064 = ((int64_t *) mem_299512)[i_298396];
                
                int64_t defunc_0_f_res_297066 = sdiv64(x_297064, (int64_t) 2);
                int32_t i64_res_297067 = sext_i64_i32(i_298396);
                int32_t defunc_0_f_res_297068 = add32(1, i64_res_297067);
                
                for (int64_t i_306741 = 0; i_306741 < n_292675; i_306741++) {
                    ((int32_t *) mem_305371)[i_306741] = defunc_0_f_res_297068;
                }
                if (n_292675 * (int64_t) 4 > 0)
                    memmove(mem_305348 + i_298396 * n_292675 * (int64_t) 4,
                            mem_305371 + (int64_t) 0, n_292675 * (int64_t) 4);
                ((int64_t *) mem_305351)[i_298396] = defunc_0_f_res_297066;
            }
            
            struct memblock mem_305387;
            
            mem_305387.references = NULL;
            if (memblock_alloc(ctx, &mem_305387, bytes_305386, "mem_305387")) {
                err = 1;
                goto cleanup;
            }
            if (replicate_arg_293282 * (int64_t) 8 > 0)
                memmove(mem_305387.mem + (int64_t) 0, mem_305236 + (int64_t) 0,
                        replicate_arg_293282 * (int64_t) 8);
            
            struct memblock mem_305390;
            
            mem_305390.references = NULL;
            if (memblock_alloc(ctx, &mem_305390, bytes_305343, "mem_305390")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_298401 = 0; i_298401 < partition_sizze_292766;
                 i_298401++) {
                int64_t x_297074;
                
                x_297074 = ((int64_t *) mem_305351)[i_298401];
                
                int32_t defunc_0_f_res_297075 = sext_i64_i32(x_297074);
                
                ((int32_t *) mem_305390.mem)[i_298401] = defunc_0_f_res_297075;
            }
            
            struct memblock mem_305405;
            
            mem_305405.references = NULL;
            if (memblock_alloc(ctx, &mem_305405, bytes_305404, "mem_305405")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_306743 = 0; i_306743 < replicate_arg_293282;
                 i_306743++) {
                ((int32_t *) mem_305405.mem)[i_306743] = 0;
            }
            
            struct memblock mem_305408;
            
            mem_305408.references = NULL;
            if (memblock_alloc(ctx, &mem_305408, bytes_305386, "mem_305408")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_306744 = 0; i_306744 < replicate_arg_293282;
                 i_306744++) {
                ((double *) mem_305408.mem)[i_306744] = 0.0;
            }
            if (mem_305411_cached_sizze_306906 < (size_t) bytes_299511) {
                mem_305411 = realloc(mem_305411, bytes_299511);
                mem_305411_cached_sizze_306906 = bytes_299511;
            }
            for (int64_t i_306745 = 0; i_306745 < partition_sizze_292766;
                 i_306745++) {
                ((double *) mem_305411)[i_306745] = 0.0;
            }
            
            struct memblock mem_305424;
            
            mem_305424.references = NULL;
            if (memblock_alloc(ctx, &mem_305424, bytes_305404, "mem_305424")) {
                err = 1;
                goto cleanup;
            }
            if (replicate_arg_293282 * (int64_t) 4 > 0)
                memmove(mem_305424.mem + (int64_t) 0, mem_305348 + (int64_t) 0,
                        replicate_arg_293282 * (int64_t) 4);
            if (mem_305465_cached_sizze_306907 < (size_t) bytes_299511) {
                mem_305465 = realloc(mem_305465, bytes_299511);
                mem_305465_cached_sizze_306907 = bytes_299511;
            }
            if (mem_305480_cached_sizze_306908 < (size_t) bytes_305479) {
                mem_305480 = realloc(mem_305480, bytes_305479);
                mem_305480_cached_sizze_306908 = bytes_305479;
            }
            if (mem_305496_cached_sizze_306909 < (size_t) bytes_305343) {
                mem_305496 = realloc(mem_305496, bytes_305343);
                mem_305496_cached_sizze_306909 = bytes_305343;
            }
            if (mem_305498_cached_sizze_306910 < (size_t) bytes_305497) {
                mem_305498 = realloc(mem_305498, bytes_305497);
                mem_305498_cached_sizze_306910 = bytes_305497;
            }
            if (mem_305501_cached_sizze_306911 < (size_t) bytes_305343) {
                mem_305501 = realloc(mem_305501, bytes_305343);
                mem_305501_cached_sizze_306911 = bytes_305343;
            }
            
            int64_t ext_305633;
            int64_t ext_305632;
            int64_t ext_305631;
            int64_t ext_305630;
            int64_t ext_305629;
            int64_t ext_305628;
            int64_t ext_305627;
            int64_t ext_305626;
            int64_t ext_305625;
            int64_t ext_305624;
            int64_t ext_305623;
            int64_t ext_305622;
            int64_t ext_305621;
            int64_t ext_305620;
            int64_t ext_305619;
            int64_t ext_305618;
            struct memblock ext_mem_305613;
            
            ext_mem_305613.references = NULL;
            
            struct memblock ext_mem_305612;
            
            ext_mem_305612.references = NULL;
            
            struct memblock ext_mem_305611;
            
            ext_mem_305611.references = NULL;
            
            struct memblock ext_mem_305610;
            
            ext_mem_305610.references = NULL;
            
            struct memblock ext_mem_305609;
            
            ext_mem_305609.references = NULL;
            
            struct memblock ext_mem_305608;
            
            ext_mem_305608.references = NULL;
            
            int64_t rankSearchBatch_res_297081;
            int64_t rankSearchBatch_res_297082;
            int64_t rankSearchBatch_res_297083;
            bool rankSearchBatch_res_297084;
            int64_t rankSearchBatch_res_297091;
            int64_t loopz2088U_297093;
            int64_t loopz2089U_297094;
            int64_t loopz2081Uz2080U_297095;
            bool loop_while_297096;
            int64_t q_297103;
            struct memblock mem_param_305416;
            
            mem_param_305416.references = NULL;
            
            struct memblock mem_param_305421;
            
            mem_param_305421.references = NULL;
            
            int64_t ctx_param_ext_305426;
            int64_t ctx_param_ext_305427;
            int64_t ctx_param_ext_305428;
            int64_t ctx_param_ext_305429;
            struct memblock mem_param_305430;
            
            mem_param_305430.references = NULL;
            
            int64_t ctx_param_ext_305431;
            int64_t ctx_param_ext_305432;
            int64_t ctx_param_ext_305433;
            int64_t ctx_param_ext_305434;
            struct memblock mem_param_305435;
            
            mem_param_305435.references = NULL;
            
            int64_t ctx_param_ext_305436;
            int64_t ctx_param_ext_305437;
            int64_t ctx_param_ext_305438;
            int64_t ctx_param_ext_305439;
            struct memblock mem_param_305440;
            
            mem_param_305440.references = NULL;
            
            int64_t ctx_param_ext_305441;
            int64_t ctx_param_ext_305442;
            int64_t ctx_param_ext_305443;
            int64_t ctx_param_ext_305444;
            struct memblock mem_param_305445;
            
            mem_param_305445.references = NULL;
            ctx_param_ext_305426 = replicate_arg_293282;
            ctx_param_ext_305427 = (int64_t) 0;
            ctx_param_ext_305428 = (int64_t) 1;
            ctx_param_ext_305429 = replicate_arg_293282;
            ctx_param_ext_305431 = replicate_arg_293282;
            ctx_param_ext_305432 = (int64_t) 0;
            ctx_param_ext_305433 = (int64_t) 1;
            ctx_param_ext_305434 = replicate_arg_293282;
            ctx_param_ext_305436 = replicate_arg_293282;
            ctx_param_ext_305437 = (int64_t) 0;
            ctx_param_ext_305438 = (int64_t) 1;
            ctx_param_ext_305439 = replicate_arg_293282;
            ctx_param_ext_305441 = replicate_arg_293282;
            ctx_param_ext_305442 = (int64_t) 0;
            ctx_param_ext_305443 = (int64_t) 1;
            ctx_param_ext_305444 = replicate_arg_293282;
            if (memblock_set(ctx, &mem_param_305416, &mem_305390,
                             "mem_305390") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_305421, &mem_305344,
                             "mem_305344") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_305430, &mem_305424,
                             "mem_305424") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_305435, &mem_305405,
                             "mem_305405") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_305440, &mem_305387,
                             "mem_305387") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_305445, &mem_305408,
                             "mem_305408") != 0)
                return 1;
            loopz2088U_297093 = replicate_arg_293282;
            loopz2089U_297094 = replicate_arg_293282;
            loopz2081Uz2080U_297095 = replicate_arg_293282;
            loop_while_297096 = loop_cond_297079;
            q_297103 = (int64_t) 0;
            while (loop_while_297096) {
                bool cond_297105 = q_297103 == (int64_t) 0;
                int32_t inpacc_297106;
                int32_t inpacc_297109 = 0;
                
                for (int64_t i_298415 = 0; i_298415 < partition_sizze_292766;
                     i_298415++) {
                    int32_t x_298517;
                    
                    x_298517 = ((int32_t *) mem_param_305421.mem)[i_298415];
                    
                    int32_t defunc_1_op_res_297121 = add32(inpacc_297109,
                                                           x_298517);
                    double defunc_1_f_res_298527;
                    
                    if (cond_297105) {
                        double defunc_1_f_res_t_res_298532;
                        
                        defunc_1_f_res_t_res_298532 =
                            ((double *) mem_305329)[i_298415];
                        defunc_1_f_res_298527 = defunc_1_f_res_t_res_298532;
                    } else {
                        bool cond_298533 = defunc_1_op_res_297121 == 0;
                        double defunc_1_f_res_f_res_298534;
                        
                        if (cond_298533) {
                            defunc_1_f_res_f_res_298534 = 0.0;
                        } else {
                            int32_t i_298535 = sub32(defunc_1_op_res_297121, 1);
                            int64_t i_298536 = sext_i32_i64(i_298535);
                            bool x_298537 = sle64((int64_t) 0, i_298536);
                            bool y_298538 = slt64(i_298536, loopz2089U_297094);
                            bool bounds_check_298539 = x_298537 && y_298538;
                            bool index_certs_298540;
                            
                            if (!bounds_check_298539) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) i_298536,
                                              "] out of bounds for array of shape [",
                                              (long long) loopz2089U_297094,
                                              "].",
                                              "-> #0  median.fut:35:37-46\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:9:27-38\n   #4  median.fut:30:13-36:15\n   #5  median.fut:112:18-67\n   #6  stl.fut:343:23-52\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                if (memblock_unref(ctx, &mem_param_305445,
                                                   "mem_param_305445") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_305440,
                                                   "mem_param_305440") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_305435,
                                                   "mem_param_305435") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_305430,
                                                   "mem_param_305430") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_305421,
                                                   "mem_param_305421") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_305416,
                                                   "mem_param_305416") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305608,
                                                   "ext_mem_305608") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305609,
                                                   "ext_mem_305609") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305610,
                                                   "ext_mem_305610") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305611,
                                                   "ext_mem_305611") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305612,
                                                   "ext_mem_305612") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305613,
                                                   "ext_mem_305613") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_305424,
                                                   "mem_305424") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_305408,
                                                   "mem_305408") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_305405,
                                                   "mem_305405") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_305390,
                                                   "mem_305390") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_305387,
                                                   "mem_305387") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_305344,
                                                   "mem_305344") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305734,
                                                   "ext_mem_305734") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_300343,
                                                   "mem_param_300343") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_300335,
                                                   "mem_param_300335") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305217,
                                                   "ext_mem_305217") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305218,
                                                   "ext_mem_305218") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_300321,
                                                   "mem_param_300321") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_300313,
                                                   "mem_param_300313") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_300305,
                                                   "mem_param_300305") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305742,
                                                   "ext_mem_305742") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305743,
                                                   "ext_mem_305743") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305744,
                                                   "ext_mem_305744") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_300297,
                                                   "mem_300297") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_300293,
                                                   "mem_300293") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_306309,
                                                   "mem_out_306309") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_306308,
                                                   "mem_out_306308") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_306307,
                                                   "mem_out_306307") != 0)
                                    return 1;
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            double defunc_1_f_res_f_res_f_res_298541;
                            
                            defunc_1_f_res_f_res_f_res_298541 =
                                ((double *) mem_param_305440.mem)[ctx_param_ext_305437 +
                                                                  i_298536 *
                                                                  ctx_param_ext_305438];
                            defunc_1_f_res_f_res_298534 =
                                defunc_1_f_res_f_res_f_res_298541;
                        }
                        defunc_1_f_res_298527 = defunc_1_f_res_f_res_298534;
                    }
                    ((double *) mem_305465)[i_298415] = defunc_1_f_res_298527;
                    
                    int32_t inpacc_tmp_306780 = defunc_1_op_res_297121;
                    
                    inpacc_297109 = inpacc_tmp_306780;
                }
                inpacc_297106 = inpacc_297109;
                for (int64_t i_306782 = 0; i_306782 < replicate_arg_297080;
                     i_306782++) {
                    ((int32_t *) mem_305480)[i_306782] = 0;
                }
                for (int64_t iter_298417 = 0; iter_298417 < loopz2089U_297094;
                     iter_298417++) {
                    int32_t pixel_298419;
                    
                    pixel_298419 =
                        ((int32_t *) mem_param_305430.mem)[ctx_param_ext_305427 +
                                                           iter_298417 *
                                                           ctx_param_ext_305428];
                    
                    double pixel_298420;
                    
                    pixel_298420 =
                        ((double *) mem_param_305440.mem)[ctx_param_ext_305437 +
                                                          iter_298417 *
                                                          ctx_param_ext_305438];
                    
                    int32_t sgmind_297153 = sub32(pixel_298419, 1);
                    int64_t sgmind_297154 = sext_i32_i64(sgmind_297153);
                    bool x_297155 = sle64((int64_t) 0, sgmind_297154);
                    bool y_297156 = slt64(sgmind_297154,
                                          partition_sizze_292766);
                    bool bounds_check_297157 = x_297155 && y_297156;
                    bool index_certs_297158;
                    
                    if (!bounds_check_297157) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) sgmind_297154,
                                      "] out of bounds for array of shape [",
                                      (long long) partition_sizze_292766, "].",
                                      "-> #0  median.fut:43:34-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:9:27-38\n   #4  median.fut:40:13-49:19\n   #5  median.fut:112:18-67\n   #6  stl.fut:343:23-52\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_param_305445,
                                           "mem_param_305445") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_305440,
                                           "mem_param_305440") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_305435,
                                           "mem_param_305435") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_305430,
                                           "mem_param_305430") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_305421,
                                           "mem_param_305421") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_305416,
                                           "mem_param_305416") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305608,
                                           "ext_mem_305608") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305609,
                                           "ext_mem_305609") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305610,
                                           "ext_mem_305610") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305611,
                                           "ext_mem_305611") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305612,
                                           "ext_mem_305612") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305613,
                                           "ext_mem_305613") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_305424, "mem_305424") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_305408, "mem_305408") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_305405, "mem_305405") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_305390, "mem_305390") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_305387, "mem_305387") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_305344, "mem_305344") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305734,
                                           "ext_mem_305734") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300343,
                                           "mem_param_300343") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300335,
                                           "mem_param_300335") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305217,
                                           "ext_mem_305217") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305218,
                                           "ext_mem_305218") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300321,
                                           "mem_param_300321") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300313,
                                           "mem_param_300313") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300305,
                                           "mem_param_300305") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305742,
                                           "ext_mem_305742") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305743,
                                           "ext_mem_305743") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305744,
                                           "ext_mem_305744") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306309,
                                           "mem_out_306309") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306308,
                                           "mem_out_306308") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306307,
                                           "mem_out_306307") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    double pivot_297159;
                    
                    pivot_297159 = ((double *) mem_305465)[sgmind_297154];
                    
                    int32_t h_ind_297160 = shl32(sgmind_297153, 1);
                    bool cond_297161 = pixel_298420 < pivot_297159;
                    int32_t binop_p_297162;
                    
                    if (cond_297161) {
                        binop_p_297162 = h_ind_297160;
                    } else {
                        bool cond_297163 = pivot_297159 == pixel_298420;
                        int32_t binop_p_f_res_297164;
                        
                        if (cond_297163) {
                            int32_t binop_p_f_res_t_res_297165 = add32(1,
                                                                       h_ind_297160);
                            
                            binop_p_f_res_297164 = binop_p_f_res_t_res_297165;
                        } else {
                            binop_p_f_res_297164 = -1;
                        }
                        binop_p_297162 = binop_p_f_res_297164;
                    }
                    
                    int64_t defunc_0_f_res_297166 =
                            sext_i32_i64(binop_p_297162);
                    bool less_than_zzero_298422 = slt64(defunc_0_f_res_297166,
                                                        (int64_t) 0);
                    bool greater_than_sizze_298423 = sle64(replicate_arg_297080,
                                                           defunc_0_f_res_297166);
                    bool outside_bounds_dim_298424 = less_than_zzero_298422 ||
                         greater_than_sizze_298423;
                    
                    if (!outside_bounds_dim_298424) {
                        int32_t read_hist_298426;
                        
                        read_hist_298426 =
                            ((int32_t *) mem_305480)[defunc_0_f_res_297166];
                        
                        int32_t defunc_1_f_res_297149 = add32(1,
                                                              read_hist_298426);
                        
                        ((int32_t *) mem_305480)[defunc_0_f_res_297166] =
                            defunc_1_f_res_297149;
                    }
                }
                for (int64_t i_298435 = 0; i_298435 < partition_sizze_292766;
                     i_298435++) {
                    int32_t x_297170;
                    
                    x_297170 = ((int32_t *) mem_param_305416.mem)[i_298435];
                    
                    bool cond_297172 = slt32(x_297170, 0);
                    int32_t defunc_1_f_res_297173;
                    int8_t defunc_1_f_res_297174;
                    int32_t defunc_1_f_res_297175;
                    
                    if (cond_297172) {
                        defunc_1_f_res_297173 = 0;
                        defunc_1_f_res_297174 = (int8_t) 3;
                        defunc_1_f_res_297175 = -1;
                    } else {
                        int64_t i_297176 = shl64(i_298435, (int64_t) 1);
                        bool x_297177 = sle64((int64_t) 0, i_297176);
                        bool y_297178 = slt64(i_297176, replicate_arg_297080);
                        bool bounds_check_297179 = x_297177 && y_297178;
                        bool index_certs_297180;
                        
                        if (!bounds_check_297179) {
                            ctx->error =
                                msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                          "Index [", (long long) i_297176,
                                          "] out of bounds for array of shape [",
                                          (long long) replicate_arg_297080,
                                          "].",
                                          "-> #0  median.fut:57:35-46\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:9:27-38\n   #4  median.fut:54:11-63:13\n   #5  median.fut:112:18-67\n   #6  stl.fut:343:23-52\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                            if (memblock_unref(ctx, &mem_param_305445,
                                               "mem_param_305445") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_305440,
                                               "mem_param_305440") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_305435,
                                               "mem_param_305435") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_305430,
                                               "mem_param_305430") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_305421,
                                               "mem_param_305421") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_305416,
                                               "mem_param_305416") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305608,
                                               "ext_mem_305608") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305609,
                                               "ext_mem_305609") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305610,
                                               "ext_mem_305610") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305611,
                                               "ext_mem_305611") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305612,
                                               "ext_mem_305612") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305613,
                                               "ext_mem_305613") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_305424,
                                               "mem_305424") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_305408,
                                               "mem_305408") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_305405,
                                               "mem_305405") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_305390,
                                               "mem_305390") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_305387,
                                               "mem_305387") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_305344,
                                               "mem_305344") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305734,
                                               "ext_mem_305734") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300343,
                                               "mem_param_300343") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300335,
                                               "mem_param_300335") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305217,
                                               "ext_mem_305217") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305218,
                                               "ext_mem_305218") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300321,
                                               "mem_param_300321") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300313,
                                               "mem_param_300313") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_param_300305,
                                               "mem_param_300305") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305742,
                                               "ext_mem_305742") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305743,
                                               "ext_mem_305743") != 0)
                                return 1;
                            if (memblock_unref(ctx, &ext_mem_305744,
                                               "ext_mem_305744") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300297,
                                               "mem_300297") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_300293,
                                               "mem_300293") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306309,
                                               "mem_out_306309") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306308,
                                               "mem_out_306308") != 0)
                                return 1;
                            if (memblock_unref(ctx, &mem_out_306307,
                                               "mem_out_306307") != 0)
                                return 1;
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int32_t lt_len_297181;
                        
                        lt_len_297181 = ((int32_t *) mem_305480)[i_297176];
                        
                        bool cond_297182 = slt32(x_297170, lt_len_297181);
                        int32_t defunc_1_f_res_f_res_297183;
                        int8_t defunc_1_f_res_f_res_297184;
                        int32_t defunc_1_f_res_f_res_297185;
                        
                        if (cond_297182) {
                            defunc_1_f_res_f_res_297183 = lt_len_297181;
                            defunc_1_f_res_f_res_297184 = (int8_t) 0;
                            defunc_1_f_res_f_res_297185 = x_297170;
                        } else {
                            int64_t i_297186 = add64((int64_t) 1, i_297176);
                            bool x_297187 = sle64((int64_t) 0, i_297186);
                            bool y_297188 = slt64(i_297186,
                                                  replicate_arg_297080);
                            bool bounds_check_297189 = x_297187 && y_297188;
                            bool index_certs_297190;
                            
                            if (!bounds_check_297189) {
                                ctx->error =
                                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                              "Index [", (long long) i_297186,
                                              "] out of bounds for array of shape [",
                                              (long long) replicate_arg_297080,
                                              "].",
                                              "-> #0  median.fut:59:40-58\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:9:27-38\n   #4  median.fut:54:11-63:13\n   #5  median.fut:112:18-67\n   #6  stl.fut:343:23-52\n   #7  stl.fut:419:61-435:77\n   #8  stl.fut:463:3-479:36\n   #9  stl.fut:445:1-479:36\n");
                                if (memblock_unref(ctx, &mem_param_305445,
                                                   "mem_param_305445") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_305440,
                                                   "mem_param_305440") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_305435,
                                                   "mem_param_305435") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_305430,
                                                   "mem_param_305430") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_305421,
                                                   "mem_param_305421") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_305416,
                                                   "mem_param_305416") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305608,
                                                   "ext_mem_305608") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305609,
                                                   "ext_mem_305609") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305610,
                                                   "ext_mem_305610") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305611,
                                                   "ext_mem_305611") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305612,
                                                   "ext_mem_305612") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305613,
                                                   "ext_mem_305613") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_305424,
                                                   "mem_305424") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_305408,
                                                   "mem_305408") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_305405,
                                                   "mem_305405") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_305390,
                                                   "mem_305390") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_305387,
                                                   "mem_305387") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_305344,
                                                   "mem_305344") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305734,
                                                   "ext_mem_305734") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_300343,
                                                   "mem_param_300343") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_300335,
                                                   "mem_param_300335") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305217,
                                                   "ext_mem_305217") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305218,
                                                   "ext_mem_305218") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_300321,
                                                   "mem_param_300321") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_300313,
                                                   "mem_param_300313") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_param_300305,
                                                   "mem_param_300305") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305742,
                                                   "ext_mem_305742") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305743,
                                                   "ext_mem_305743") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &ext_mem_305744,
                                                   "ext_mem_305744") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_300297,
                                                   "mem_300297") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_300293,
                                                   "mem_300293") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_306309,
                                                   "mem_out_306309") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_306308,
                                                   "mem_out_306308") != 0)
                                    return 1;
                                if (memblock_unref(ctx, &mem_out_306307,
                                                   "mem_out_306307") != 0)
                                    return 1;
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int32_t eq_len_297191;
                            
                            eq_len_297191 = ((int32_t *) mem_305480)[i_297186];
                            
                            int32_t lteq_len_297192 = add32(lt_len_297181,
                                                            eq_len_297191);
                            bool cond_297193 = slt32(x_297170, lteq_len_297192);
                            int8_t defunc_1_f_res_f_res_f_res_297194;
                            
                            if (cond_297193) {
                                defunc_1_f_res_f_res_f_res_297194 = (int8_t) 1;
                            } else {
                                defunc_1_f_res_f_res_f_res_297194 = (int8_t) 2;
                            }
                            
                            int32_t defunc_1_f_res_f_res_f_res_297195;
                            int32_t defunc_1_f_res_f_res_f_res_297196;
                            
                            if (cond_297193) {
                                defunc_1_f_res_f_res_f_res_297195 = 0;
                                defunc_1_f_res_f_res_f_res_297196 = -1;
                            } else {
                                int32_t x_297201;
                                
                                x_297201 =
                                    ((int32_t *) mem_param_305421.mem)[i_298435];
                                
                                int32_t defunc_1_f_res_f_res_f_res_f_res_297202
                                        = sub32(x_297201, lteq_len_297192);
                                int32_t defunc_1_f_res_f_res_f_res_f_res_297203
                                        = sub32(x_297170, lteq_len_297192);
                                
                                defunc_1_f_res_f_res_f_res_297195 =
                                    defunc_1_f_res_f_res_f_res_f_res_297202;
                                defunc_1_f_res_f_res_f_res_297196 =
                                    defunc_1_f_res_f_res_f_res_f_res_297203;
                            }
                            defunc_1_f_res_f_res_297183 =
                                defunc_1_f_res_f_res_f_res_297195;
                            defunc_1_f_res_f_res_297184 =
                                defunc_1_f_res_f_res_f_res_297194;
                            defunc_1_f_res_f_res_297185 =
                                defunc_1_f_res_f_res_f_res_297196;
                        }
                        defunc_1_f_res_297173 = defunc_1_f_res_f_res_297183;
                        defunc_1_f_res_297174 = defunc_1_f_res_f_res_297184;
                        defunc_1_f_res_297175 = defunc_1_f_res_f_res_297185;
                    }
                    ((int32_t *) mem_305496)[i_298435] = defunc_1_f_res_297173;
                    ((int8_t *) mem_305498)[i_298435] = defunc_1_f_res_297174;
                    ((int32_t *) mem_305501)[i_298435] = defunc_1_f_res_297175;
                }
                
                struct memblock mem_305540;
                
                mem_305540.references = NULL;
                if (memblock_alloc(ctx, &mem_305540, bytes_305343,
                                   "mem_305540")) {
                    err = 1;
                    goto cleanup;
                }
                if (partition_sizze_292766 * (int64_t) 4 > 0)
                    memmove(mem_305540.mem + (int64_t) 0, mem_305496 +
                            (int64_t) 0, partition_sizze_292766 * (int64_t) 4);
                
                struct memblock mem_305543;
                
                mem_305543.references = NULL;
                if (memblock_alloc(ctx, &mem_305543, bytes_305343,
                                   "mem_305543")) {
                    err = 1;
                    goto cleanup;
                }
                if (partition_sizze_292766 * (int64_t) 4 > 0)
                    memmove(mem_305543.mem + (int64_t) 0, mem_305501 +
                            (int64_t) 0, partition_sizze_292766 * (int64_t) 4);
                for (int64_t write_iter_298439 = 0; write_iter_298439 <
                     partition_sizze_292766; write_iter_298439++) {
                    int8_t write_iv_298442;
                    
                    write_iv_298442 =
                        ((int8_t *) mem_305498)[write_iter_298439];
                    
                    bool cond_297209 = write_iv_298442 == (int8_t) 1;
                    int64_t defunc_1_f_res_297210;
                    
                    if (cond_297209) {
                        defunc_1_f_res_297210 = write_iter_298439;
                    } else {
                        defunc_1_f_res_297210 = (int64_t) -1;
                    }
                    
                    double defunc_1_f_res_297211;
                    
                    if (cond_297209) {
                        double defunc_1_f_res_t_res_297216;
                        
                        defunc_1_f_res_t_res_297216 =
                            ((double *) mem_305465)[write_iter_298439];
                        defunc_1_f_res_297211 = defunc_1_f_res_t_res_297216;
                    } else {
                        defunc_1_f_res_297211 = 0.0;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_297210) &&
                        slt64(defunc_1_f_res_297210, partition_sizze_292766)) {
                        ((double *) mem_305411)[defunc_1_f_res_297210] =
                            defunc_1_f_res_297211;
                    }
                }
                
                int64_t bytes_305554 = smax64((int64_t) 0, loopz2089U_297094);
                
                if (mem_305555_cached_sizze_306912 < (size_t) bytes_305554) {
                    mem_305555 = realloc(mem_305555, bytes_305554);
                    mem_305555_cached_sizze_306912 = bytes_305554;
                }
                for (int64_t i_298446 = 0; i_298446 < loopz2089U_297094;
                     i_298446++) {
                    int32_t x_297218;
                    
                    x_297218 =
                        ((int32_t *) mem_param_305430.mem)[ctx_param_ext_305427 +
                                                           i_298446 *
                                                           ctx_param_ext_305428];
                    
                    double x_297219;
                    
                    x_297219 =
                        ((double *) mem_param_305440.mem)[ctx_param_ext_305437 +
                                                          i_298446 *
                                                          ctx_param_ext_305438];
                    
                    int32_t sgmind_297220 = sub32(x_297218, 1);
                    int64_t sgmind_297221 = sext_i32_i64(sgmind_297220);
                    bool x_297222 = sle64((int64_t) 0, sgmind_297221);
                    bool y_297223 = slt64(sgmind_297221,
                                          partition_sizze_292766);
                    bool bounds_check_297224 = x_297222 && y_297223;
                    bool index_certs_297225;
                    
                    if (!bounds_check_297224) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) sgmind_297221,
                                      "] out of bounds for array of shape [",
                                      (long long) partition_sizze_292766, "].",
                                      "-> #0  median.fut:80:23-36\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  median.fut:84:21-39\n   #4  median.fut:112:18-67\n   #5  stl.fut:343:23-52\n   #6  stl.fut:419:61-435:77\n   #7  stl.fut:463:3-479:36\n   #8  stl.fut:445:1-479:36\n");
                        if (memblock_unref(ctx, &mem_305543, "mem_305543") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_305540, "mem_305540") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_305445,
                                           "mem_param_305445") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_305440,
                                           "mem_param_305440") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_305435,
                                           "mem_param_305435") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_305430,
                                           "mem_param_305430") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_305421,
                                           "mem_param_305421") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_305416,
                                           "mem_param_305416") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305608,
                                           "ext_mem_305608") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305609,
                                           "ext_mem_305609") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305610,
                                           "ext_mem_305610") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305611,
                                           "ext_mem_305611") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305612,
                                           "ext_mem_305612") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305613,
                                           "ext_mem_305613") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_305424, "mem_305424") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_305408, "mem_305408") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_305405, "mem_305405") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_305390, "mem_305390") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_305387, "mem_305387") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_305344, "mem_305344") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305734,
                                           "ext_mem_305734") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300343,
                                           "mem_param_300343") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300335,
                                           "mem_param_300335") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305217,
                                           "ext_mem_305217") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305218,
                                           "ext_mem_305218") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300321,
                                           "mem_param_300321") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300313,
                                           "mem_param_300313") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_param_300305,
                                           "mem_param_300305") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305742,
                                           "ext_mem_305742") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305743,
                                           "ext_mem_305743") != 0)
                            return 1;
                        if (memblock_unref(ctx, &ext_mem_305744,
                                           "ext_mem_305744") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306309,
                                           "mem_out_306309") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306308,
                                           "mem_out_306308") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_out_306307,
                                           "mem_out_306307") != 0)
                            return 1;
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    double pivot_297226;
                    
                    pivot_297226 = ((double *) mem_305465)[sgmind_297221];
                    
                    int8_t kind_297227;
                    
                    kind_297227 = ((int8_t *) mem_305498)[sgmind_297221];
                    
                    bool cond_297228 = x_297219 < pivot_297226;
                    bool cond_t_res_297229 = kind_297227 == (int8_t) 0;
                    bool x_297230 = cond_297228 && cond_t_res_297229;
                    bool cond_297231 = pivot_297226 < x_297219;
                    bool defunc_1_f_res_f_res_t_res_297232 = kind_297227 ==
                         (int8_t) 2;
                    bool x_297233 = cond_297231 &&
                         defunc_1_f_res_f_res_t_res_297232;
                    bool x_297234 = !x_297230;
                    bool y_297235 = x_297233 && x_297234;
                    bool defunc_1_f_res_297236 = x_297230 || y_297235;
                    
                    ((bool *) mem_305555)[i_298446] = defunc_1_f_res_297236;
                }
                
                int64_t binop_y_305568 = (int64_t) 4 * loopz2089U_297094;
                int64_t bytes_305569 = smax64((int64_t) 0, binop_y_305568);
                
                if (mem_305570_cached_sizze_306913 < (size_t) bytes_305569) {
                    mem_305570 = realloc(mem_305570, bytes_305569);
                    mem_305570_cached_sizze_306913 = bytes_305569;
                }
                
                int32_t discard_298453;
                int32_t scanacc_298449 = 0;
                
                for (int64_t i_298451 = 0; i_298451 < loopz2089U_297094;
                     i_298451++) {
                    bool x_297242;
                    
                    x_297242 = ((bool *) mem_305555)[i_298451];
                    
                    int32_t defunc_0_f_res_297243 = btoi_bool_i32(x_297242);
                    int32_t defunc_1_op_res_297241 =
                            add32(defunc_0_f_res_297243, scanacc_298449);
                    
                    ((int32_t *) mem_305570)[i_298451] = defunc_1_op_res_297241;
                    
                    int32_t scanacc_tmp_306789 = defunc_1_op_res_297241;
                    
                    scanacc_298449 = scanacc_tmp_306789;
                }
                discard_298453 = scanacc_298449;
                
                int64_t i_297244 = sub64(loopz2089U_297094, (int64_t) 1);
                bool x_297245 = sle64((int64_t) 0, i_297244);
                bool y_297246 = slt64(i_297244, loopz2089U_297094);
                bool bounds_check_297247 = x_297245 && y_297246;
                bool index_certs_297248;
                
                if (!bounds_check_297247) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_297244,
                                  "] out of bounds for array of shape [",
                                  (long long) loopz2089U_297094, "].",
                                  "-> #0  /prelude/array.fut:26:29-34\n   #1  median.fut:87:32-44\n   #2  median.fut:112:18-67\n   #3  stl.fut:343:23-52\n   #4  stl.fut:419:61-435:77\n   #5  stl.fut:463:3-479:36\n   #6  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_305543, "mem_305543") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305540, "mem_305540") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305445,
                                       "mem_param_305445") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305440,
                                       "mem_param_305440") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305435,
                                       "mem_param_305435") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305430,
                                       "mem_param_305430") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305421,
                                       "mem_param_305421") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305416,
                                       "mem_param_305416") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305608,
                                       "ext_mem_305608") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305609,
                                       "ext_mem_305609") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305610,
                                       "ext_mem_305610") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305611,
                                       "ext_mem_305611") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305612,
                                       "ext_mem_305612") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305613,
                                       "ext_mem_305613") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305424, "mem_305424") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305408, "mem_305408") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305405, "mem_305405") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305390, "mem_305390") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305387, "mem_305387") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305344, "mem_305344") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305734,
                                       "ext_mem_305734") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300343,
                                       "mem_param_300343") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300335,
                                       "mem_param_300335") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305217,
                                       "ext_mem_305217") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305218,
                                       "ext_mem_305218") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300321,
                                       "mem_param_300321") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300313,
                                       "mem_param_300313") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300305,
                                       "mem_param_300305") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305742,
                                       "ext_mem_305742") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305743,
                                       "ext_mem_305743") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305744,
                                       "ext_mem_305744") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int32_t last_res_297249;
                
                last_res_297249 = ((int32_t *) mem_305570)[i_297244];
                
                int64_t i32_res_297250 = sext_i32_i64(last_res_297249);
                
                for (int64_t write_iter_298454 = 0; write_iter_298454 <
                     loopz2089U_297094; write_iter_298454++) {
                    bool write_iv_298457;
                    
                    write_iv_298457 = ((bool *) mem_305555)[write_iter_298454];
                    
                    int32_t write_iv_298458;
                    
                    write_iv_298458 =
                        ((int32_t *) mem_305570)[write_iter_298454];
                    
                    int64_t defunc_1_f_res_297257;
                    
                    if (write_iv_298457) {
                        int32_t i32_arg_297258 = sub32(write_iv_298458, 1);
                        int64_t i32_res_297259 = sext_i32_i64(i32_arg_297258);
                        
                        defunc_1_f_res_297257 = i32_res_297259;
                    } else {
                        defunc_1_f_res_297257 = (int64_t) -1;
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_297257) &&
                        slt64(defunc_1_f_res_297257, loopz2088U_297093)) {
                        if ((int64_t) 4 > 0)
                            memmove(mem_param_305435.mem +
                                    (ctx_param_ext_305432 +
                                     ctx_param_ext_305433 *
                                     defunc_1_f_res_297257) * (int64_t) 4,
                                    mem_param_305430.mem +
                                    (ctx_param_ext_305427 +
                                     ctx_param_ext_305428 * write_iter_298454) *
                                    (int64_t) 4, (int64_t) 4);
                    }
                    if (sle64((int64_t) 0, defunc_1_f_res_297257) &&
                        slt64(defunc_1_f_res_297257, loopz2081Uz2080U_297095)) {
                        if ((int64_t) 8 > 0)
                            memmove(mem_param_305445.mem +
                                    (ctx_param_ext_305442 +
                                     ctx_param_ext_305443 *
                                     defunc_1_f_res_297257) * (int64_t) 8,
                                    mem_param_305440.mem +
                                    (ctx_param_ext_305437 +
                                     ctx_param_ext_305438 * write_iter_298454) *
                                    (int64_t) 8, (int64_t) 8);
                    }
                }
                
                bool empty_slice_297260 = i32_res_297250 == (int64_t) 0;
                int64_t m_297261 = sub64(i32_res_297250, (int64_t) 1);
                bool zzero_leq_i_p_m_t_s_297262 = sle64((int64_t) 0, m_297261);
                bool i_p_m_t_s_leq_w_297263 = slt64(m_297261,
                                                    loopz2088U_297093);
                bool i_lte_j_297264 = sle64((int64_t) 0, i32_res_297250);
                bool y_297265 = zzero_leq_i_p_m_t_s_297262 &&
                     i_p_m_t_s_leq_w_297263;
                bool y_297266 = i_lte_j_297264 && y_297265;
                bool ok_or_empty_297267 = empty_slice_297260 || y_297266;
                bool index_certs_297268;
                
                if (!ok_or_empty_297267) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [:", (long long) i32_res_297250,
                                  "] out of bounds for array of shape [",
                                  (long long) loopz2088U_297093, "].",
                                  "-> #0  median.fut:91:20-33\n   #1  median.fut:112:18-67\n   #2  stl.fut:343:23-52\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_305543, "mem_305543") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305540, "mem_305540") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305445,
                                       "mem_param_305445") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305440,
                                       "mem_param_305440") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305435,
                                       "mem_param_305435") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305430,
                                       "mem_param_305430") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305421,
                                       "mem_param_305421") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305416,
                                       "mem_param_305416") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305608,
                                       "ext_mem_305608") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305609,
                                       "ext_mem_305609") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305610,
                                       "ext_mem_305610") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305611,
                                       "ext_mem_305611") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305612,
                                       "ext_mem_305612") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305613,
                                       "ext_mem_305613") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305424, "mem_305424") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305408, "mem_305408") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305405, "mem_305405") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305390, "mem_305390") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305387, "mem_305387") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305344, "mem_305344") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305734,
                                       "ext_mem_305734") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300343,
                                       "mem_param_300343") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300335,
                                       "mem_param_300335") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305217,
                                       "ext_mem_305217") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305218,
                                       "ext_mem_305218") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300321,
                                       "mem_param_300321") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300313,
                                       "mem_param_300313") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300305,
                                       "mem_param_300305") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305742,
                                       "ext_mem_305742") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305743,
                                       "ext_mem_305743") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305744,
                                       "ext_mem_305744") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_297270 = slt64(m_297261,
                                                    loopz2081Uz2080U_297095);
                bool y_297271 = zzero_leq_i_p_m_t_s_297262 &&
                     i_p_m_t_s_leq_w_297270;
                bool y_297272 = i_lte_j_297264 && y_297271;
                bool ok_or_empty_297273 = empty_slice_297260 || y_297272;
                bool index_certs_297274;
                
                if (!ok_or_empty_297273) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [:", (long long) i32_res_297250,
                                  "] out of bounds for array of shape [",
                                  (long long) loopz2081Uz2080U_297095, "].",
                                  "-> #0  median.fut:92:20-31\n   #1  median.fut:112:18-67\n   #2  stl.fut:343:23-52\n   #3  stl.fut:419:61-435:77\n   #4  stl.fut:463:3-479:36\n   #5  stl.fut:445:1-479:36\n");
                    if (memblock_unref(ctx, &mem_305543, "mem_305543") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305540, "mem_305540") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305445,
                                       "mem_param_305445") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305440,
                                       "mem_param_305440") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305435,
                                       "mem_param_305435") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305430,
                                       "mem_param_305430") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305421,
                                       "mem_param_305421") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_305416,
                                       "mem_param_305416") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305608,
                                       "ext_mem_305608") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305609,
                                       "ext_mem_305609") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305610,
                                       "ext_mem_305610") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305611,
                                       "ext_mem_305611") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305612,
                                       "ext_mem_305612") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305613,
                                       "ext_mem_305613") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305424, "mem_305424") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305408, "mem_305408") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305405, "mem_305405") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305390, "mem_305390") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305387, "mem_305387") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_305344, "mem_305344") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305734,
                                       "ext_mem_305734") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300343,
                                       "mem_param_300343") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300335,
                                       "mem_param_300335") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305217,
                                       "ext_mem_305217") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305218,
                                       "ext_mem_305218") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300321,
                                       "mem_param_300321") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300313,
                                       "mem_param_300313") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_300305,
                                       "mem_param_300305") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305742,
                                       "ext_mem_305742") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305743,
                                       "ext_mem_305743") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_305744,
                                       "ext_mem_305744") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306309,
                                       "mem_out_306309") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306308,
                                       "mem_out_306308") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_306307,
                                       "mem_out_306307") != 0)
                        return 1;
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t loopres_297276 = add64((int64_t) 1, q_297103);
                bool loop_cond_297277 = slt64((int64_t) 0, i32_res_297250);
                int64_t ctx_param_ext_tmp_306746 = ctx_param_ext_305431;
                int64_t ctx_param_ext_tmp_306747 = ctx_param_ext_305432;
                int64_t ctx_param_ext_tmp_306748 = ctx_param_ext_305433;
                int64_t ctx_param_ext_tmp_306749 = i32_res_297250;
                int64_t ctx_param_ext_tmp_306750 = ctx_param_ext_305426;
                int64_t ctx_param_ext_tmp_306751 = ctx_param_ext_305427;
                int64_t ctx_param_ext_tmp_306752 = ctx_param_ext_305428;
                int64_t ctx_param_ext_tmp_306753 = ctx_param_ext_305429;
                int64_t ctx_param_ext_tmp_306754 = ctx_param_ext_305441;
                int64_t ctx_param_ext_tmp_306755 = ctx_param_ext_305442;
                int64_t ctx_param_ext_tmp_306756 = ctx_param_ext_305443;
                int64_t ctx_param_ext_tmp_306757 = i32_res_297250;
                int64_t ctx_param_ext_tmp_306758 = ctx_param_ext_305436;
                int64_t ctx_param_ext_tmp_306759 = ctx_param_ext_305437;
                int64_t ctx_param_ext_tmp_306760 = ctx_param_ext_305438;
                int64_t ctx_param_ext_tmp_306761 = ctx_param_ext_305439;
                struct memblock mem_param_tmp_306762;
                
                mem_param_tmp_306762.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_306762, &mem_305543,
                                 "mem_305543") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_306763;
                
                mem_param_tmp_306763.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_306763, &mem_305540,
                                 "mem_305540") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_306764;
                
                mem_param_tmp_306764.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_306764, &mem_param_305435,
                                 "mem_param_305435") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_306765;
                
                mem_param_tmp_306765.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_306765, &mem_param_305430,
                                 "mem_param_305430") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_306766;
                
                mem_param_tmp_306766.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_306766, &mem_param_305445,
                                 "mem_param_305445") != 0)
                    return 1;
                
                struct memblock mem_param_tmp_306767;
                
                mem_param_tmp_306767.references = NULL;
                if (memblock_set(ctx, &mem_param_tmp_306767, &mem_param_305440,
                                 "mem_param_305440") != 0)
                    return 1;
                
                int64_t loopz2088U_tmp_306768 = loopz2089U_297094;
                int64_t loopz2089U_tmp_306769 = i32_res_297250;
                int64_t loopz2081Uz2080U_tmp_306770 = loopz2089U_297094;
                bool loop_while_tmp_306771 = loop_cond_297277;
                int64_t q_tmp_306778 = loopres_297276;
                
                ctx_param_ext_305426 = ctx_param_ext_tmp_306746;
                ctx_param_ext_305427 = ctx_param_ext_tmp_306747;
                ctx_param_ext_305428 = ctx_param_ext_tmp_306748;
                ctx_param_ext_305429 = ctx_param_ext_tmp_306749;
                ctx_param_ext_305431 = ctx_param_ext_tmp_306750;
                ctx_param_ext_305432 = ctx_param_ext_tmp_306751;
                ctx_param_ext_305433 = ctx_param_ext_tmp_306752;
                ctx_param_ext_305434 = ctx_param_ext_tmp_306753;
                ctx_param_ext_305436 = ctx_param_ext_tmp_306754;
                ctx_param_ext_305437 = ctx_param_ext_tmp_306755;
                ctx_param_ext_305438 = ctx_param_ext_tmp_306756;
                ctx_param_ext_305439 = ctx_param_ext_tmp_306757;
                ctx_param_ext_305441 = ctx_param_ext_tmp_306758;
                ctx_param_ext_305442 = ctx_param_ext_tmp_306759;
                ctx_param_ext_305443 = ctx_param_ext_tmp_306760;
                ctx_param_ext_305444 = ctx_param_ext_tmp_306761;
                if (memblock_set(ctx, &mem_param_305416, &mem_param_tmp_306762,
                                 "mem_param_tmp_306762") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_305421, &mem_param_tmp_306763,
                                 "mem_param_tmp_306763") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_305430, &mem_param_tmp_306764,
                                 "mem_param_tmp_306764") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_305435, &mem_param_tmp_306765,
                                 "mem_param_tmp_306765") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_305440, &mem_param_tmp_306766,
                                 "mem_param_tmp_306766") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_305445, &mem_param_tmp_306767,
                                 "mem_param_tmp_306767") != 0)
                    return 1;
                loopz2088U_297093 = loopz2088U_tmp_306768;
                loopz2089U_297094 = loopz2089U_tmp_306769;
                loopz2081Uz2080U_297095 = loopz2081Uz2080U_tmp_306770;
                loop_while_297096 = loop_while_tmp_306771;
                q_297103 = q_tmp_306778;
                if (memblock_unref(ctx, &mem_param_tmp_306767,
                                   "mem_param_tmp_306767") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_306766,
                                   "mem_param_tmp_306766") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_306765,
                                   "mem_param_tmp_306765") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_306764,
                                   "mem_param_tmp_306764") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_306763,
                                   "mem_param_tmp_306763") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_tmp_306762,
                                   "mem_param_tmp_306762") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_305543, "mem_305543") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_305540, "mem_305540") != 0)
                    return 1;
            }
            ext_305633 = ctx_param_ext_305426;
            ext_305632 = ctx_param_ext_305427;
            ext_305631 = ctx_param_ext_305428;
            ext_305630 = ctx_param_ext_305429;
            ext_305629 = ctx_param_ext_305431;
            ext_305628 = ctx_param_ext_305432;
            ext_305627 = ctx_param_ext_305433;
            ext_305626 = ctx_param_ext_305434;
            ext_305625 = ctx_param_ext_305436;
            ext_305624 = ctx_param_ext_305437;
            ext_305623 = ctx_param_ext_305438;
            ext_305622 = ctx_param_ext_305439;
            ext_305621 = ctx_param_ext_305441;
            ext_305620 = ctx_param_ext_305442;
            ext_305619 = ctx_param_ext_305443;
            ext_305618 = ctx_param_ext_305444;
            if (memblock_set(ctx, &ext_mem_305613, &mem_param_305416,
                             "mem_param_305416") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_305612, &mem_param_305421,
                             "mem_param_305421") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_305611, &mem_param_305430,
                             "mem_param_305430") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_305610, &mem_param_305435,
                             "mem_param_305435") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_305609, &mem_param_305440,
                             "mem_param_305440") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_305608, &mem_param_305445,
                             "mem_param_305445") != 0)
                return 1;
            rankSearchBatch_res_297081 = loopz2088U_297093;
            rankSearchBatch_res_297082 = loopz2089U_297094;
            rankSearchBatch_res_297083 = loopz2081Uz2080U_297095;
            rankSearchBatch_res_297084 = loop_while_297096;
            rankSearchBatch_res_297091 = q_297103;
            if (memblock_unref(ctx, &mem_305344, "mem_305344") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_305387, "mem_305387") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_305390, "mem_305390") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_305405, "mem_305405") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_305408, "mem_305408") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_305424, "mem_305424") != 0)
                return 1;
            if (mem_305644_cached_sizze_306914 < (size_t) bytes_299511) {
                mem_305644 = realloc(mem_305644, bytes_299511);
                mem_305644_cached_sizze_306914 = bytes_299511;
            }
            if (mem_305647_cached_sizze_306915 < (size_t) bytes_299511) {
                mem_305647 = realloc(mem_305647, bytes_299511);
                mem_305647_cached_sizze_306915 = bytes_299511;
            }
            if (mem_305650_cached_sizze_306916 < (size_t) bytes_299511) {
                mem_305650 = realloc(mem_305650, bytes_299511);
                mem_305650_cached_sizze_306916 = bytes_299511;
            }
            for (int64_t i_298473 = 0; i_298473 < partition_sizze_292766;
                 i_298473++) {
                double x_297282;
                
                x_297282 = ((double *) mem_305411)[i_298473];
                
                int64_t x_297283;
                
                x_297283 = ((int64_t *) mem_305351)[i_298473];
                
                int64_t x_297284;
                
                x_297284 = ((int64_t *) mem_299512)[i_298473];
                
                double defunc_2_reduce_comm_res_297285;
                int64_t defunc_2_reduce_comm_res_297286;
                int64_t defunc_2_reduce_comm_res_297287;
                double redout_298463;
                int64_t redout_298464;
                int64_t redout_298465;
                
                redout_298463 = -INFINITY;
                redout_298464 = (int64_t) -1;
                redout_298465 = (int64_t) 0;
                for (int64_t i_298466 = 0; i_298466 < n_292675; i_298466++) {
                    double x_297314;
                    
                    x_297314 = ((double *) mem_305236)[i_298473 * n_292675 +
                                                       i_298466];
                    
                    bool cond_297316 = x_297314 < x_297282;
                    int64_t defunc_0_f_res_297317 = btoi_bool_i64(cond_297316);
                    bool cond_297294 = redout_298465 == (int64_t) 0;
                    bool cond_t_res_297295 = slt64((int64_t) 0,
                                                   defunc_0_f_res_297317);
                    bool x_297296 = cond_297294 && cond_t_res_297295;
                    double defunc_1_op_res_297297;
                    int64_t defunc_1_op_res_297298;
                    
                    if (x_297296) {
                        defunc_1_op_res_297297 = x_297314;
                        defunc_1_op_res_297298 = i_298466;
                    } else {
                        bool cond_297299 = slt64((int64_t) 0, redout_298465);
                        bool cond_t_res_297300 = defunc_0_f_res_297317 ==
                             (int64_t) 0;
                        bool x_297301 = cond_297299 && cond_t_res_297300;
                        double defunc_1_op_res_f_res_297302;
                        int64_t defunc_1_op_res_f_res_297303;
                        
                        if (x_297301) {
                            defunc_1_op_res_f_res_297302 = redout_298463;
                            defunc_1_op_res_f_res_297303 = redout_298464;
                        } else {
                            bool cond_297304 = x_297314 < redout_298463;
                            double defunc_1_op_res_f_res_f_res_297305;
                            int64_t defunc_1_op_res_f_res_f_res_297306;
                            
                            if (cond_297304) {
                                defunc_1_op_res_f_res_f_res_297305 =
                                    redout_298463;
                                defunc_1_op_res_f_res_f_res_297306 =
                                    redout_298464;
                            } else {
                                bool cond_297307 = redout_298463 < x_297314;
                                double defunc_1_op_res_f_res_f_res_f_res_297308;
                                int64_t
                                defunc_1_op_res_f_res_f_res_f_res_297309;
                                
                                if (cond_297307) {
                                    defunc_1_op_res_f_res_f_res_f_res_297308 =
                                        x_297314;
                                    defunc_1_op_res_f_res_f_res_f_res_297309 =
                                        i_298466;
                                } else {
                                    bool cond_297310 = slt64(redout_298464,
                                                             i_298466);
                                    double
                                    defunc_1_op_res_f_res_f_res_f_res_f_res_297311;
                                    
                                    if (cond_297310) {
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_297311 =
                                            redout_298463;
                                    } else {
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_297311 =
                                            x_297314;
                                    }
                                    
                                    int64_t
                                    defunc_1_op_res_f_res_f_res_f_res_f_res_297312;
                                    
                                    if (cond_297310) {
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_297312 =
                                            redout_298464;
                                    } else {
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_297312 =
                                            i_298466;
                                    }
                                    defunc_1_op_res_f_res_f_res_f_res_297308 =
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_297311;
                                    defunc_1_op_res_f_res_f_res_f_res_297309 =
                                        defunc_1_op_res_f_res_f_res_f_res_f_res_297312;
                                }
                                defunc_1_op_res_f_res_f_res_297305 =
                                    defunc_1_op_res_f_res_f_res_f_res_297308;
                                defunc_1_op_res_f_res_f_res_297306 =
                                    defunc_1_op_res_f_res_f_res_f_res_297309;
                            }
                            defunc_1_op_res_f_res_297302 =
                                defunc_1_op_res_f_res_f_res_297305;
                            defunc_1_op_res_f_res_297303 =
                                defunc_1_op_res_f_res_f_res_297306;
                        }
                        defunc_1_op_res_297297 = defunc_1_op_res_f_res_297302;
                        defunc_1_op_res_297298 = defunc_1_op_res_f_res_297303;
                    }
                    
                    int64_t defunc_1_op_res_297313 =
                            add64(defunc_0_f_res_297317, redout_298465);
                    double redout_tmp_306796 = defunc_1_op_res_297297;
                    int64_t redout_tmp_306797 = defunc_1_op_res_297298;
                    int64_t redout_tmp_306798 = defunc_1_op_res_297313;
                    
                    redout_298463 = redout_tmp_306796;
                    redout_298464 = redout_tmp_306797;
                    redout_298465 = redout_tmp_306798;
                }
                defunc_2_reduce_comm_res_297285 = redout_298463;
                defunc_2_reduce_comm_res_297286 = redout_298464;
                defunc_2_reduce_comm_res_297287 = redout_298465;
                
                bool cond_297318 = x_297283 == (int64_t) 0;
                int64_t x_297319 = smod64(x_297284, (int64_t) 2);
                bool cond_f_res_297320 = x_297319 == (int64_t) 1;
                bool x_297321 = !cond_297318;
                bool y_297322 = cond_f_res_297320 && x_297321;
                bool cond_297323 = cond_297318 || y_297322;
                bool cond_f_res_297324 = slt64(defunc_2_reduce_comm_res_297287,
                                               x_297283);
                bool x_297325 = !cond_297323;
                bool y_297326 = cond_f_res_297324 && x_297325;
                bool cond_297327 = cond_297323 || y_297326;
                double defunc_4_f_res_297328;
                
                if (cond_297327) {
                    defunc_4_f_res_297328 = x_297282;
                } else {
                    double x_297329 = x_297282 -
                           defunc_2_reduce_comm_res_297285;
                    double y_297330 = x_297329 / 2.0;
                    double defunc_4_f_res_f_res_297331 =
                           defunc_2_reduce_comm_res_297285 + y_297330;
                    
                    defunc_4_f_res_297328 = defunc_4_f_res_f_res_297331;
                }
                
                double h_297332 = 6.0 * defunc_4_f_res_297328;
                double h9_297333 = 0.999 * h_297332;
                double h1_297334 = 1.0e-3 * h_297332;
                
                ((double *) mem_305644)[i_298473] = h_297332;
                ((double *) mem_305647)[i_298473] = h9_297333;
                ((double *) mem_305650)[i_298473] = h1_297334;
            }
            
            struct memblock mem_305690;
            
            mem_305690.references = NULL;
            if (memblock_alloc(ctx, &mem_305690, bytes_299508, "mem_305690")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_298483 = 0; i_298483 < partition_sizze_292766;
                 i_298483++) {
                double x_297340;
                
                x_297340 = ((double *) mem_305644)[i_298483];
                
                double x_297341;
                
                x_297341 = ((double *) mem_305647)[i_298483];
                
                double x_297342;
                
                x_297342 = ((double *) mem_305650)[i_298483];
                for (int64_t i_298479 = 0; i_298479 < n_292675; i_298479++) {
                    double x_297344;
                    
                    x_297344 = ((double *) mem_305240)[i_298483 * n_292675 +
                                                       i_298479];
                    
                    double x_297345 = x_297344 / x_297340;
                    double y_297346 = fpow64(x_297345, 2.0);
                    double x_297347 = 1.0 - y_297346;
                    double bicube_297348 = fpow64(x_297347, 2.0);
                    bool isnan_res_297349;
                    
                    isnan_res_297349 = futrts_isnan64(x_297344);
                    
                    bool cond_f_res_297350 = x_297344 <= x_297342;
                    bool x_297351 = !isnan_res_297349;
                    bool y_297352 = cond_f_res_297350 && x_297351;
                    bool cond_297353 = isnan_res_297349 || y_297352;
                    double defunc_0_f_res_297354;
                    
                    if (cond_297353) {
                        defunc_0_f_res_297354 = 1.0;
                    } else {
                        bool cond_297355 = x_297341 <= x_297344;
                        bool cond_f_res_297356 = x_297344 <= 1.0e-6;
                        bool x_297357 = !cond_297355;
                        bool y_297358 = cond_f_res_297356 && x_297357;
                        bool cond_297359 = cond_297355 || y_297358;
                        double defunc_0_f_res_f_res_297360;
                        
                        if (cond_297359) {
                            defunc_0_f_res_f_res_297360 = 1.0e-6;
                        } else {
                            defunc_0_f_res_f_res_297360 = bicube_297348;
                        }
                        defunc_0_f_res_297354 = defunc_0_f_res_f_res_297360;
                    }
                    ((double *) mem_305690.mem)[i_298483 * n_292675 +
                                                i_298479] =
                        defunc_0_f_res_297354;
                }
            }
            if (memblock_set(ctx, &ext_mem_305734, &mem_305690, "mem_305690") !=
                0)
                return 1;
            if (memblock_unref(ctx, &mem_305690, "mem_305690") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_305445, "mem_param_305445") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_305440, "mem_param_305440") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_305435, "mem_param_305435") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_305430, "mem_param_305430") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_305421, "mem_param_305421") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_305416, "mem_param_305416") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_305608, "ext_mem_305608") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_305609, "ext_mem_305609") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_305610, "ext_mem_305610") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_305611, "ext_mem_305611") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_305612, "ext_mem_305612") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_305613, "ext_mem_305613") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_305424, "mem_305424") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_305408, "mem_305408") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_305405, "mem_305405") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_305390, "mem_305390") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_305387, "mem_305387") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_305344, "mem_305344") != 0)
                return 1;
        } else {
            if (memblock_set(ctx, &ext_mem_305734, &mem_param_300321,
                             "mem_param_300321") != 0)
                return 1;
        }
        
        int64_t ctx_param_ext_tmp_306376 = ext_305224;
        int64_t ctx_param_ext_tmp_306377 = ext_305222;
        int64_t ctx_param_ext_tmp_306378 = ext_305739;
        int64_t ctx_param_ext_tmp_306379 = ext_305738;
        int64_t ctx_param_ext_tmp_306380 = ext_305735;
        int64_t ctx_param_ext_tmp_306381 = ext_305737;
        int64_t ctx_param_ext_tmp_306382 = ext_305741;
        int64_t ctx_param_ext_tmp_306383 = ext_305736;
        int64_t ctx_param_ext_tmp_306384 = ext_305740;
        struct memblock mem_param_tmp_306385;
        
        mem_param_tmp_306385.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_306385, &ext_mem_305218,
                         "ext_mem_305218") != 0)
            return 1;
        
        struct memblock mem_param_tmp_306386;
        
        mem_param_tmp_306386.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_306386, &ext_mem_305217,
                         "ext_mem_305217") != 0)
            return 1;
        
        struct memblock mem_param_tmp_306387;
        
        mem_param_tmp_306387.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_306387, &ext_mem_305734,
                         "ext_mem_305734") != 0)
            return 1;
        ctx_param_ext_300307 = ctx_param_ext_tmp_306376;
        ctx_param_ext_300309 = ctx_param_ext_tmp_306377;
        ctx_param_ext_300314 = ctx_param_ext_tmp_306378;
        ctx_param_ext_300315 = ctx_param_ext_tmp_306379;
        ctx_param_ext_300316 = ctx_param_ext_tmp_306380;
        ctx_param_ext_300317 = ctx_param_ext_tmp_306381;
        ctx_param_ext_300318 = ctx_param_ext_tmp_306382;
        ctx_param_ext_300319 = ctx_param_ext_tmp_306383;
        ctx_param_ext_300320 = ctx_param_ext_tmp_306384;
        if (memblock_set(ctx, &mem_param_300305, &mem_param_tmp_306385,
                         "mem_param_tmp_306385") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_300313, &mem_param_tmp_306386,
                         "mem_param_tmp_306386") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_300321, &mem_param_tmp_306387,
                         "mem_param_tmp_306387") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_306387,
                           "mem_param_tmp_306387") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_306386,
                           "mem_param_tmp_306386") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_306385,
                           "mem_param_tmp_306385") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_305734, "ext_mem_305734") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_300343, "mem_param_300343") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_300335, "mem_param_300335") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_305217, "ext_mem_305217") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_305218, "ext_mem_305218") != 0)
            return 1;
    }
    ext_305757 = ctx_param_ext_300307;
    ext_305755 = ctx_param_ext_300309;
    ext_305751 = ctx_param_ext_300314;
    ext_305750 = ctx_param_ext_300315;
    ext_305749 = ctx_param_ext_300316;
    ext_305748 = ctx_param_ext_300317;
    ext_305747 = ctx_param_ext_300318;
    ext_305746 = ctx_param_ext_300319;
    ext_305745 = ctx_param_ext_300320;
    if (memblock_set(ctx, &ext_mem_305744, &mem_param_300305,
                     "mem_param_300305") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_305743, &mem_param_300313,
                     "mem_param_300313") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_305742, &mem_param_300321,
                     "mem_param_300321") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
        return 1;
    if (mem_305769_cached_sizze_306917 < (size_t) bytes_299468) {
        mem_305769 = realloc(mem_305769, bytes_299468);
        mem_305769_cached_sizze_306917 = bytes_299468;
    }
    for (int64_t i_306801 = 0; i_306801 < m_292674; i_306801++) {
        for (int64_t i_306802 = 0; i_306802 < n_292675; i_306802++) {
            ((float *) mem_305769)[i_306801 * n_292675 + i_306802] = NAN;
        }
    }
    if (mem_305773_cached_sizze_306918 < (size_t) bytes_299468) {
        mem_305773 = realloc(mem_305773, bytes_299468);
        mem_305773_cached_sizze_306918 = bytes_299468;
    }
    for (int64_t i_306803 = 0; i_306803 < m_292674; i_306803++) {
        for (int64_t i_306804 = 0; i_306804 < n_292675; i_306804++) {
            ((float *) mem_305773)[i_306803 * n_292675 + i_306804] = NAN;
        }
    }
    if (mem_305777_cached_sizze_306919 < (size_t) bytes_299468) {
        mem_305777 = realloc(mem_305777, bytes_299468);
        mem_305777_cached_sizze_306919 = bytes_299468;
    }
    for (int64_t i_306805 = 0; i_306805 < m_292674; i_306805++) {
        for (int64_t i_306806 = 0; i_306806 < n_292675; i_306806++) {
            ((float *) mem_305777)[i_306805 * n_292675 + i_306806] = NAN;
        }
    }
    
    int64_t binop_y_305808 = (int64_t) 4 * n_292675;
    int64_t bytes_305809 = smax64((int64_t) 0, binop_y_305808);
    
    if (mem_305810_cached_sizze_306920 < (size_t) bytes_305809) {
        mem_305810 = realloc(mem_305810, bytes_305809);
        mem_305810_cached_sizze_306920 = bytes_305809;
    }
    if (mem_305813_cached_sizze_306921 < (size_t) bytes_305809) {
        mem_305813 = realloc(mem_305813, bytes_305809);
        mem_305813_cached_sizze_306921 = bytes_305809;
    }
    if (mem_305816_cached_sizze_306922 < (size_t) bytes_305809) {
        mem_305816 = realloc(mem_305816, bytes_305809);
        mem_305816_cached_sizze_306922 = bytes_305809;
    }
    for (int64_t write_iter_298495 = 0; write_iter_298495 <
         partition_sizze_292766; write_iter_298495++) {
        int64_t write_iv_298502;
        
        write_iv_298502 = ((int64_t *) mem_299472)[write_iter_298495];
        for (int64_t i_298491 = 0; i_298491 < n_292675; i_298491++) {
            double x_297375;
            
            x_297375 = ((double *) ext_mem_305744.mem)[write_iter_298495 *
                                                       n_292675 + i_298491];
            
            double x_297376;
            
            x_297376 = ((double *) ext_mem_305743.mem)[write_iter_298495 *
                                                       ext_305755 + i_298491];
            
            float x_297377;
            
            x_297377 = ((float *) mem_299469)[write_iter_298495 * n_292675 +
                                              i_298491];
            
            float defunc_0_g_res_297378 = fpconv_f64_f32(x_297375);
            float defunc_0_g_res_297379 = fpconv_f64_f32(x_297376);
            float x_297380 = x_297377 - defunc_0_g_res_297378;
            float defunc_2_f_res_297381 = x_297380 - defunc_0_g_res_297379;
            
            ((float *) mem_305810)[i_298491] = defunc_2_f_res_297381;
            ((float *) mem_305813)[i_298491] = defunc_0_g_res_297379;
            ((float *) mem_305816)[i_298491] = defunc_0_g_res_297378;
        }
        if ((sle64((int64_t) 0, write_iv_298502) && slt64(write_iv_298502,
                                                          m_292674)) &&
            (sle64((int64_t) 0, (int64_t) 0) && slt64(n_292675 - (int64_t) 1,
                                                      n_292675))) {
            if (n_292675 * (int64_t) 4 > 0)
                memmove(mem_305777 + write_iv_298502 * n_292675 * (int64_t) 4,
                        mem_305810 + (int64_t) 0, n_292675 * (int64_t) 4);
        }
        if ((sle64((int64_t) 0, write_iv_298502) && slt64(write_iv_298502,
                                                          m_292674)) &&
            (sle64((int64_t) 0, (int64_t) 0) && slt64(n_292675 - (int64_t) 1,
                                                      n_292675))) {
            if (n_292675 * (int64_t) 4 > 0)
                memmove(mem_305773 + write_iv_298502 * n_292675 * (int64_t) 4,
                        mem_305813 + (int64_t) 0, n_292675 * (int64_t) 4);
        }
        if ((sle64((int64_t) 0, write_iv_298502) && slt64(write_iv_298502,
                                                          m_292674)) &&
            (sle64((int64_t) 0, (int64_t) 0) && slt64(n_292675 - (int64_t) 1,
                                                      n_292675))) {
            if (n_292675 * (int64_t) 4 > 0)
                memmove(mem_305769 + write_iv_298502 * n_292675 * (int64_t) 4,
                        mem_305816 + (int64_t) 0, n_292675 * (int64_t) 4);
        }
    }
    if (memblock_unref(ctx, &ext_mem_305743, "ext_mem_305743") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_305744, "ext_mem_305744") != 0)
        return 1;
    
    struct memblock mem_305880;
    
    mem_305880.references = NULL;
    if (memblock_alloc(ctx, &mem_305880, bytes_299468, "mem_305880")) {
        err = 1;
        goto cleanup;
    }
    if (m_292674 * n_292675 * (int64_t) 4 > 0)
        memmove(mem_305880.mem + (int64_t) 0, mem_305769 + (int64_t) 0,
                m_292674 * n_292675 * (int64_t) 4);
    
    struct memblock mem_305885;
    
    mem_305885.references = NULL;
    if (memblock_alloc(ctx, &mem_305885, bytes_299468, "mem_305885")) {
        err = 1;
        goto cleanup;
    }
    if (m_292674 * n_292675 * (int64_t) 4 > 0)
        memmove(mem_305885.mem + (int64_t) 0, mem_305773 + (int64_t) 0,
                m_292674 * n_292675 * (int64_t) 4);
    
    struct memblock mem_305890;
    
    mem_305890.references = NULL;
    if (memblock_alloc(ctx, &mem_305890, bytes_299468, "mem_305890")) {
        err = 1;
        goto cleanup;
    }
    if (m_292674 * n_292675 * (int64_t) 4 > 0)
        memmove(mem_305890.mem + (int64_t) 0, mem_305777 + (int64_t) 0,
                m_292674 * n_292675 * (int64_t) 4);
    if (memblock_set(ctx, &mem_out_306307, &mem_305880, "mem_305880") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_306308, &mem_305885, "mem_305885") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_306309, &mem_305890, "mem_305890") != 0)
        return 1;
    (*mem_out_p_306813).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_306813, &mem_out_306307,
                     "mem_out_306307") != 0)
        return 1;
    (*mem_out_p_306814).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_306814, &mem_out_306308,
                     "mem_out_306308") != 0)
        return 1;
    (*mem_out_p_306815).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_306815, &mem_out_306309,
                     "mem_out_306309") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_305890, "mem_305890") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_305885, "mem_305885") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_305880, "mem_305880") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_300321, "mem_param_300321") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_300313, "mem_param_300313") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_300305, "mem_param_300305") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_305742, "ext_mem_305742") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_305743, "ext_mem_305743") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_305744, "ext_mem_305744") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_300297, "mem_300297") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_300293, "mem_300293") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_306309, "mem_out_306309") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_306308, "mem_out_306308") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_299438);
    free(mem_299441);
    free(mem_299469);
    free(mem_299472);
    free(mem_299492);
    free(mem_299509);
    free(mem_299512);
    free(mem_299532);
    free(mem_299547);
    free(mem_299587);
    free(mem_299690);
    free(mem_299694);
    free(mem_299747);
    free(mem_299762);
    free(mem_299855);
    free(mem_299860);
    free(mem_299921);
    free(mem_300075);
    free(mem_300079);
    free(mem_300102);
    free(mem_300184);
    free(mem_300188);
    free(mem_300211);
    free(mem_300347);
    free(mem_300395);
    free(mem_300400);
    free(mem_301221);
    free(mem_301391);
    free(mem_301394);
    free(mem_301627);
    free(mem_301630);
    free(mem_301657);
    free(mem_301660);
    free(mem_302555);
    free(mem_302601);
    free(mem_302617);
    free(mem_302630);
    free(mem_302653);
    free(mem_302669);
    free(mem_302682);
    free(mem_302705);
    free(mem_302721);
    free(mem_302734);
    free(mem_303057);
    free(mem_303144);
    free(mem_303147);
    free(mem_303268);
    free(mem_303271);
    free(mem_303298);
    free(mem_303301);
    free(mem_303827);
    free(mem_303842);
    free(mem_303845);
    free(mem_303933);
    free(mem_303948);
    free(mem_303951);
    free(mem_304072);
    free(mem_304087);
    free(mem_304090);
    free(mem_304233);
    free(mem_304248);
    free(mem_304251);
    free(mem_304289);
    free(mem_304354);
    free(mem_304369);
    free(mem_304372);
    free(mem_304421);
    free(mem_304424);
    free(mem_304523);
    free(mem_304538);
    free(mem_304541);
    free(mem_304590);
    free(mem_304593);
    free(mem_304620);
    free(mem_304623);
    free(mem_304744);
    free(mem_304759);
    free(mem_304762);
    free(mem_304850);
    free(mem_304865);
    free(mem_304868);
    free(mem_304989);
    free(mem_305004);
    free(mem_305007);
    free(mem_305236);
    free(mem_305240);
    free(mem_305329);
    free(mem_305348);
    free(mem_305351);
    free(mem_305371);
    free(mem_305411);
    free(mem_305465);
    free(mem_305480);
    free(mem_305496);
    free(mem_305498);
    free(mem_305501);
    free(mem_305555);
    free(mem_305570);
    free(mem_305644);
    free(mem_305647);
    free(mem_305650);
    free(mem_305769);
    free(mem_305773);
    free(mem_305777);
    free(mem_305810);
    free(mem_305813);
    free(mem_305816);
    return err;
}
static int futrts_entry_seasonal_amplitude(struct futhark_context *ctx,
                                           struct memblock *mem_out_p_306923,
                                           struct memblock seasonal_l_mem_299435,
                                           int64_t m_292609, int64_t n_292610)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_299438_cached_sizze_306924 = 0;
    unsigned char *mem_299438 = NULL;
    struct memblock mem_out_306307;
    
    mem_out_306307.references = NULL;
    
    int64_t binop_y_299436 = (int64_t) 4 * m_292609;
    int64_t bytes_299437 = smax64((int64_t) 0, binop_y_299436);
    
    if (mem_299438_cached_sizze_306924 < (size_t) bytes_299437) {
        mem_299438 = realloc(mem_299438, bytes_299437);
        mem_299438_cached_sizze_306924 = bytes_299437;
    }
    for (int64_t i_297387 = 0; i_297387 < m_292609; i_297387++) {
        float defunc_2_reduce_res_292614;
        float defunc_2_reduce_res_292615;
        float redout_297382;
        float redout_297383;
        
        redout_297382 = -INFINITY;
        redout_297383 = INFINITY;
        for (int64_t i_297384 = 0; i_297384 < n_292610; i_297384++) {
            float x_292622;
            
            x_292622 = ((float *) seasonal_l_mem_299435.mem)[i_297387 *
                                                             n_292610 +
                                                             i_297384];
            
            float defunc_1_op_res_292618 = fmax32(x_292622, redout_297382);
            float defunc_1_op_res_292621 = fmin32(x_292622, redout_297383);
            float redout_tmp_306309 = defunc_1_op_res_292618;
            float redout_tmp_306310 = defunc_1_op_res_292621;
            
            redout_297382 = redout_tmp_306309;
            redout_297383 = redout_tmp_306310;
        }
        defunc_2_reduce_res_292614 = redout_297382;
        defunc_2_reduce_res_292615 = redout_297383;
        
        float v_292623 = defunc_2_reduce_res_292614 -
              defunc_2_reduce_res_292615;
        bool isinf_res_292624;
        
        isinf_res_292624 = futrts_isinf32(v_292623);
        
        float defunc_0_f_res_292625;
        
        if (isinf_res_292624) {
            defunc_0_f_res_292625 = NAN;
        } else {
            defunc_0_f_res_292625 = v_292623;
        }
        ((float *) mem_299438)[i_297387] = defunc_0_f_res_292625;
    }
    
    struct memblock mem_299453;
    
    mem_299453.references = NULL;
    if (memblock_alloc(ctx, &mem_299453, bytes_299437, "mem_299453")) {
        err = 1;
        goto cleanup;
    }
    if (m_292609 * (int64_t) 4 > 0)
        memmove(mem_299453.mem + (int64_t) 0, mem_299438 + (int64_t) 0,
                m_292609 * (int64_t) 4);
    if (memblock_set(ctx, &mem_out_306307, &mem_299453, "mem_299453") != 0)
        return 1;
    (*mem_out_p_306923).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_306923, &mem_out_306307,
                     "mem_out_306307") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_299453, "mem_299453") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_299438);
    return err;
}
static int futrts_entry_trend_magnitude(struct futhark_context *ctx,
                                        struct memblock *mem_out_p_306925,
                                        struct memblock trend_l_mem_299435,
                                        int64_t m_292626, int64_t n_292627)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_299438_cached_sizze_306926 = 0;
    unsigned char *mem_299438 = NULL;
    size_t mem_299453_cached_sizze_306927 = 0;
    unsigned char *mem_299453 = NULL;
    struct memblock mem_out_306307;
    
    mem_out_306307.references = NULL;
    
    int64_t binop_y_299436 = (int64_t) 8 * n_292627;
    int64_t bytes_299437 = smax64((int64_t) 0, binop_y_299436);
    
    if (mem_299438_cached_sizze_306926 < (size_t) bytes_299437) {
        mem_299438 = realloc(mem_299438, bytes_299437);
        mem_299438_cached_sizze_306926 = bytes_299437;
    }
    
    double defunc_2_reduce_res_292636;
    double defunc_2_reduce_res_292637;
    double redout_297383;
    double redout_297384;
    
    redout_297383 = 0.0;
    redout_297384 = 0.0;
    for (int64_t i_297386 = 0; i_297386 < n_292627; i_297386++) {
        int64_t x__292646 = add64((int64_t) 1, i_297386);
        double i64_res_292647 = sitofp_i64_f64(x__292646);
        double defunc_0_f_res_292648 = i64_res_292647 * i64_res_292647;
        double defunc_1_op_res_292641 = i64_res_292647 + redout_297383;
        double defunc_1_op_res_292644 = defunc_0_f_res_292648 + redout_297384;
        
        ((double *) mem_299438)[i_297386] = i64_res_292647;
        
        double redout_tmp_306308 = defunc_1_op_res_292641;
        double redout_tmp_306309 = defunc_1_op_res_292644;
        
        redout_297383 = redout_tmp_306308;
        redout_297384 = redout_tmp_306309;
    }
    defunc_2_reduce_res_292636 = redout_297383;
    defunc_2_reduce_res_292637 = redout_297384;
    
    double i64_res_292652 = sitofp_i64_f64(n_292627);
    double x_292653 = defunc_2_reduce_res_292637 * i64_res_292652;
    double y_292654 = defunc_2_reduce_res_292636 * defunc_2_reduce_res_292636;
    double y_292655 = x_292653 - y_292654;
    double det1_292656 = 1.0 / y_292655;
    double x_292657 = 0.0 - defunc_2_reduce_res_292636;
    double b11_292658 = det1_292656 * x_292657;
    double c11_292659 = i64_res_292652 * det1_292656;
    int64_t binop_y_299451 = (int64_t) 4 * m_292626;
    int64_t bytes_299452 = smax64((int64_t) 0, binop_y_299451);
    
    if (mem_299453_cached_sizze_306927 < (size_t) bytes_299452) {
        mem_299453 = realloc(mem_299453, bytes_299452);
        mem_299453_cached_sizze_306927 = bytes_299452;
    }
    for (int64_t i_297392 = 0; i_297392 < m_292626; i_297392++) {
        double defunc_2_reduce_res_292662;
        double redout_297388 = 0.0;
        
        for (int64_t i_297389 = 0; i_297389 < n_292627; i_297389++) {
            double x_292666;
            
            x_292666 = ((double *) mem_299438)[i_297389];
            
            float x_292667;
            
            x_292667 = ((float *) trend_l_mem_299435.mem)[i_297392 * n_292627 +
                                                          i_297389];
            
            double y_292668 = c11_292659 * x_292666;
            double x_292669 = b11_292658 + y_292668;
            double f32_res_292670 = fpconv_f32_f64(x_292667);
            double defunc_1_f_res_292671 = x_292669 * f32_res_292670;
            double defunc_1_op_res_292665 = defunc_1_f_res_292671 +
                   redout_297388;
            double redout_tmp_306312 = defunc_1_op_res_292665;
            
            redout_297388 = redout_tmp_306312;
        }
        defunc_2_reduce_res_292662 = redout_297388;
        
        double defunc_0_f_res_292672 = i64_res_292652 *
               defunc_2_reduce_res_292662;
        float defunc_0_f_res_292673 = fpconv_f64_f32(defunc_0_f_res_292672);
        
        ((float *) mem_299453)[i_297392] = defunc_0_f_res_292673;
    }
    
    struct memblock mem_299468;
    
    mem_299468.references = NULL;
    if (memblock_alloc(ctx, &mem_299468, bytes_299452, "mem_299468")) {
        err = 1;
        goto cleanup;
    }
    if (m_292626 * (int64_t) 4 > 0)
        memmove(mem_299468.mem + (int64_t) 0, mem_299453 + (int64_t) 0,
                m_292626 * (int64_t) 4);
    if (memblock_set(ctx, &mem_out_306307, &mem_299468, "mem_299468") != 0)
        return 1;
    (*mem_out_p_306925).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_306925, &mem_out_306307,
                     "mem_out_306307") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_299468, "mem_299468") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_306307, "mem_out_306307") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_299438);
    free(mem_299453);
    return err;
}

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7, const
                       int64_t in8, const int64_t in9, const int64_t in10, const
                       int64_t in11, const int64_t in12, const int64_t in13,
                       const int64_t in14, const int64_t in15, const
                       int64_t in16)
{
    struct memblock Y_mem_299435;
    
    Y_mem_299435.references = NULL;
    
    int64_t m_292674;
    int64_t n_292675;
    int64_t n_p_292677;
    int64_t q_s_292678;
    int64_t q_t_292679;
    int64_t q_l_292680;
    int64_t d_s_292681;
    int64_t d_t_292682;
    int64_t d_l_292683;
    int64_t jump_s_292684;
    int64_t jump_t_292685;
    int64_t jump_l_292686;
    int64_t n_inner_292687;
    int64_t n_outer_292688;
    int64_t jump_threshold_1_292689;
    int64_t jump_threshold_2_292690;
    int64_t q_threshold_1_292691;
    int64_t q_threshold_2_292692;
    struct memblock mem_out_306307;
    
    mem_out_306307.references = NULL;
    
    struct memblock mem_out_306308;
    
    mem_out_306308.references = NULL;
    
    struct memblock mem_out_306309;
    
    mem_out_306309.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    Y_mem_299435 = in0->mem;
    m_292674 = in0->shape[0];
    n_292675 = in0->shape[1];
    n_p_292677 = in1;
    q_s_292678 = in2;
    q_t_292679 = in3;
    q_l_292680 = in4;
    d_s_292681 = in5;
    d_t_292682 = in6;
    d_l_292683 = in7;
    jump_s_292684 = in8;
    jump_t_292685 = in9;
    jump_l_292686 = in10;
    n_inner_292687 = in11;
    n_outer_292688 = in12;
    jump_threshold_1_292689 = in13;
    jump_threshold_2_292690 = in14;
    q_threshold_1_292691 = in15;
    q_threshold_2_292692 = in16;
    if (!(m_292674 == in0->shape[0] && n_292675 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_306307, &mem_out_306308,
                                &mem_out_306309, Y_mem_299435, m_292674,
                                n_292675, n_p_292677, q_s_292678, q_t_292679,
                                q_l_292680, d_s_292681, d_t_292682, d_l_292683,
                                jump_s_292684, jump_t_292685, jump_l_292686,
                                n_inner_292687, n_outer_292688,
                                jump_threshold_1_292689,
                                jump_threshold_2_292690, q_threshold_1_292691,
                                q_threshold_2_292692);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_306307;
            (*out0)->shape[0] = m_292674;
            (*out0)->shape[1] = n_292675;
            assert((*out1 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out1)->mem = mem_out_306308;
            (*out1)->shape[0] = m_292674;
            (*out1)->shape[1] = n_292675;
            assert((*out2 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out2)->mem = mem_out_306309;
            (*out2)->shape[0] = m_292674;
            (*out2)->shape[1] = n_292675;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_seasonal_amplitude(struct futhark_context *ctx,
                                     struct futhark_f32_1d **out0, const
                                     struct futhark_f32_2d *in0)
{
    struct memblock seasonal_l_mem_299435;
    
    seasonal_l_mem_299435.references = NULL;
    
    int64_t m_292609;
    int64_t n_292610;
    struct memblock mem_out_306307;
    
    mem_out_306307.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    seasonal_l_mem_299435 = in0->mem;
    m_292609 = in0->shape[0];
    n_292610 = in0->shape[1];
    if (!(m_292609 == in0->shape[0] && n_292610 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_seasonal_amplitude(ctx, &mem_out_306307,
                                              seasonal_l_mem_299435, m_292609,
                                              n_292610);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
                NULL);
            (*out0)->mem = mem_out_306307;
            (*out0)->shape[0] = m_292609;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_trend_magnitude(struct futhark_context *ctx,
                                  struct futhark_f32_1d **out0, const
                                  struct futhark_f32_2d *in0)
{
    struct memblock trend_l_mem_299435;
    
    trend_l_mem_299435.references = NULL;
    
    int64_t m_292626;
    int64_t n_292627;
    struct memblock mem_out_306307;
    
    mem_out_306307.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    trend_l_mem_299435 = in0->mem;
    m_292626 = in0->shape[0];
    n_292627 = in0->shape[1];
    if (!(m_292626 == in0->shape[0] && n_292627 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_trend_magnitude(ctx, &mem_out_306307,
                                           trend_l_mem_299435, m_292626,
                                           n_292627);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
                NULL);
            (*out0)->mem = mem_out_306307;
            (*out0)->shape[0] = m_292626;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
  
