// Generated by Futhark 0.21.0
// git: 0d9594f (Wed Sep 8 23:21:55 2021 +0200)

// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers\n")
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_sync(struct futhark_context *ctx);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);

// Arrays
struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
unsigned char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                         struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5);

// Miscellaneous
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_multicore

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

static uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

static float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>



// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

static inline uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

static inline uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

static inline uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

static inline uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

static inline uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

static inline uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

static inline uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

static inline uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

static inline uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

static inline uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

static inline uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

static inline uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

static inline int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

static inline int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

static inline int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

static inline uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

static inline uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

static inline uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

static inline uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

static inline int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

static inline int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

static inline int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

static inline int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

static inline uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

static inline uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

static inline uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

static inline uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

static inline uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

static inline uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

static inline uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

static inline uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

static inline uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

static inline uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

static inline uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

static inline uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

static inline int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

static inline int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

static inline int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

static inline int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

static inline uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

static inline uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

static inline uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

static inline uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

static inline uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

static inline uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

static inline uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

static inline uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

static inline uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

static inline uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

static inline uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

static inline uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

static inline bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

static inline bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

static inline bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

static inline bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

static inline bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

static inline bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

static inline bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

static inline bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

static inline bool slt8(int8_t x, int8_t y) {
  return x < y;
}

static inline bool slt16(int16_t x, int16_t y) {
  return x < y;
}

static inline bool slt32(int32_t x, int32_t y) {
  return x < y;
}

static inline bool slt64(int64_t x, int64_t y) {
  return x < y;
}

static inline bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

static inline bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

static inline bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

static inline bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

static inline uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline bool itob_i8_bool(int8_t x) {
  return x;
}

static inline bool itob_i16_bool(int16_t x) {
  return x;
}

static inline bool itob_i32_bool(int32_t x) {
  return x;
}

static inline bool itob_i64_bool(int64_t x) {
  return x;
}

static inline int8_t btoi_bool_i8(bool x) {
  return x;
}

static inline int16_t btoi_bool_i16(bool x) {
  return x;
}

static inline int32_t btoi_bool_i32(bool x) {
  return x;
}

static inline int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

static int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

static int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

static int32_t abs32(int32_t x) {
  return abs(x);
}

static int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

static int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

static int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

static int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

static int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

static int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

static int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

static int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  return mul_hi(a, b);
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  return mul_hi(a, b);
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mul_hi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul_hi(a, b);
}

#elif defined(__CUDA_ARCH__)

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mulhi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul64hi(a, b);
}

#else // Not OpenCL or CUDA, but plain C.

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  uint64_t aa = a;
  uint64_t bb = b;

  return aa * bb >> 32;
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  __uint128_t aa = a;
  __uint128_t bb = b;

  return aa * bb >> 64;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return mad_hi(a, b, c);
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return mad_hi(a, b, c);
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return mad_hi(a, b, c);
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return mad_hi(a, b, c);
}

#else // Not OpenCL

static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return futrts_mul_hi8(a, b) + c;
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return futrts_mul_hi16(a, b) + c;
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return futrts_mul_hi32(a, b) + c;
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return futrts_mul_hi64(a, b) + c;
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

static int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

static int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

static int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

static int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

static int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

static int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

static inline float fdiv32(float x, float y) {
  return x / y;
}

static inline float fadd32(float x, float y) {
  return x + y;
}

static inline float fsub32(float x, float y) {
  return x - y;
}

static inline float fmul32(float x, float y) {
  return x * y;
}

static inline bool cmplt32(float x, float y) {
  return x < y;
}

static inline bool cmple32(float x, float y) {
  return x <= y;
}

static inline float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

static inline float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

static inline float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

static inline float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

static inline float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

static inline float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

static inline float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

static inline float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

static inline int8_t fptosi_f32_i8(float x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f32_i16(float x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f32_i32(float x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f32_i64(float x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f32_i8(float x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f32_i16(float x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f32_i32(float x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f32_i64(float x) {
  return (uint64_t) x;
}

#ifdef __OPENCL_VERSION__
static inline float fabs32(float x) {
  return fabs(x);
}

static inline float fmax32(float x, float y) {
  return fmax(x, y);
}

static inline float fmin32(float x, float y) {
  return fmin(x, y);
}

static inline float fpow32(float x, float y) {
  return pow(x, y);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float fabs32(float x) {
  return fabsf(x);
}

static inline float fmax32(float x, float y) {
  return fmaxf(x, y);
}

static inline float fmin32(float x, float y) {
  return fminf(x, y);
}

static inline float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan32(float x) {
  return isnan(x);
}

static inline bool futrts_isinf32(float x) {
  return isinf(x);
}

#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x) {
  return log(x);
}

static inline float futrts_log2_32(float x) {
  return log2(x);
}

static inline float futrts_log10_32(float x) {
  return log10(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return cosh(x);
}

static inline float futrts_sinh32(float x) {
  return sinh(x);
}

static inline float futrts_tanh32(float x) {
  return tanh(x);
}

static inline float futrts_acosh32(float x) {
  return acosh(x);
}

static inline float futrts_asinh32(float x) {
  return asinh(x);
}

static inline float futrts_atanh32(float x) {
  return atanh(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgamma(x);
}

static inline float futrts_lgamma32(float x) {
  return lgamma(x);
}

static inline float fmod32(float x, float y) {
  return fmod(x, y);
}

static inline float futrts_round32(float x) {
  return rint(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

static inline float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

static inline float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float futrts_log32(float x) {
  return logf(x);
}

static inline float futrts_log2_32(float x) {
  return log2f(x);
}

static inline float futrts_log10_32(float x) {
  return log10f(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrtf(x);
}

static inline float futrts_exp32(float x) {
  return expf(x);
}

static inline float futrts_cos32(float x) {
  return cosf(x);
}

static inline float futrts_sin32(float x) {
  return sinf(x);
}

static inline float futrts_tan32(float x) {
  return tanf(x);
}

static inline float futrts_acos32(float x) {
  return acosf(x);
}

static inline float futrts_asin32(float x) {
  return asinf(x);
}

static inline float futrts_atan32(float x) {
  return atanf(x);
}

static inline float futrts_cosh32(float x) {
  return coshf(x);
}

static inline float futrts_sinh32(float x) {
  return sinhf(x);
}

static inline float futrts_tanh32(float x) {
  return tanhf(x);
}

static inline float futrts_acosh32(float x) {
  return acoshf(x);
}

static inline float futrts_asinh32(float x) {
  return asinhf(x);
}

static inline float futrts_atanh32(float x) {
  return atanhf(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgammaf(x);
}

static inline float futrts_lgamma32(float x) {
  return lgammaf(x);
}

static inline float fmod32(float x, float y) {
  return fmodf(x, y);
}

static inline float futrts_round32(float x) {
  return rintf(x);
}

static inline float futrts_floor32(float x) {
  return floorf(x);
}

static inline float futrts_ceil32(float x) {
  return ceilf(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

static inline int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}

static inline float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}

#ifdef FUTHARK_F64_ENABLED

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline int8_t fptosi_f64_i8(double x) {
  return (int8_t) x;
}

static inline int16_t fptosi_f64_i16(double x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f64_i32(double x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f64_i64(double x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f64_i8(double x) {
  return (uint8_t) x;
}

static inline uint16_t fptoui_f64_i16(double x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f64_i32(double x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f64_i64(double x) {
  return (uint64_t) x;
}

static inline double fabs64(double x) {
  return fabs(x);
}

static inline double fmax64(double x, double y) {
  return fmax(x, y);
}

static inline double fmin64(double x, double y) {
  return fmin(x, y);
}

static inline double fpow64(double x, double y) {
  return pow(x, y);
}

static inline double futrts_log64(double x) {
  return log(x);
}

static inline double futrts_log2_64(double x) {
  return log2(x);
}

static inline double futrts_log10_64(double x) {
  return log10(x);
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return cosh(x);
}

static inline double futrts_sinh64(double x) {
  return sinh(x);
}

static inline double futrts_tanh64(double x) {
  return tanh(x);
}

static inline double futrts_acosh64(double x) {
  return acosh(x);
}

static inline double futrts_asinh64(double x) {
  return asinh(x);
}

static inline double futrts_atanh64(double x) {
  return atanh(x);
}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

static inline double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

static inline double futrts_gamma64(double x) {
  return tgamma(x);
}

static inline double futrts_lgamma64(double x) {
  return lgamma(x);
}

static inline double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

static inline double futrts_round64(double x) {
  return rint(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline bool futrts_isinf64(double x) {
  return isinf(x);
}

static inline int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

static inline double fmod64(double x, double y) {
  return fmod(x, y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

static inline double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600)
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

static inline f16 fadd16(f16 x, f16 y) {
  return x + y;
}

static inline f16 fsub16(f16 x, f16 y) {
  return x - y;
}

static inline f16 fmul16(f16 x, f16 y) {
  return x * y;
}

static inline bool cmplt16(f16 x, f16 y) {
  return x < y;
}

static inline bool cmple16(f16 x, f16 y) {
  return x <= y;
}

static inline f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

static inline f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

static inline f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

static inline f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

static inline f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

static inline f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

static inline f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

static inline f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

static inline int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

static inline int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

static inline uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

#ifndef EMULATE_F16

#ifdef __OPENCL_VERSION__
static inline f16 fabs16(f16 x) {
  return fabs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#else // Assuming CUDA.

static inline f16 fabs16(f16 x) {
  return fabsf(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

static inline bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}

#ifdef __OPENCL_VERSION__
static inline f16 futrts_log16(f16 x) {
  return log(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return log2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return log10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return cos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return sin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tan(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acos(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asin(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atan(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rint(x);
}

static inline f16 futrts_floor16(f16 x) {
  return floor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}

#else // Assume CUDA.

static inline f16 futrts_log16(f16 x) {
  return hlog(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return hexp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return hcos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return hsin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tanf(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acosf(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asinf(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atanf(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rintf(x);
}

static inline f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
static inline int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
static inline f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#else
static inline int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

static inline f16 fabs16(f16 x) {
  return fabs32(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

static inline bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

static inline bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

static inline f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

static inline f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

static inline f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

static inline f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

static inline f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

static inline f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

static inline f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

static inline f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

static inline f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

static inline int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

static inline int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

static inline f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

static inline f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0) - (x < 0);
}

#endif

#endif

static inline float fpconv_f16_f16(f16 x) {
  return x;
}

static inline float fpconv_f16_f32(f16 x) {
  return x;
}

static inline f16 fpconv_f32_f16(float x) {
  return x;
}

#ifdef FUTHARK_F64_ENABLED

static inline double fpconv_f16_f64(f16 x) {
  return (double) x;
}

static inline f16 fpconv_f64_f16(double x) {
  return (f16) x;
}

#endif


// End of scalar_f16.h.

static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
// start of scheduler.h

// First, the API that the generated code will access.  In principle,
// we could then compile the scheduler separately and link an object
// file with the generated code.  In practice, we will embed all of
// this in the generated code.

// Scheduler handle.
struct scheduler;

// Initialise a scheduler (and start worker threads).
static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa);

// Shut down a scheduler (and destroy worker threads).
static int scheduler_destroy(struct scheduler *scheduler);

// Figure out the smallest amount of work that amortises task
// creation.
static int determine_kappa(double *kappa);

// How a segop should be scheduled.
enum scheduling {
  DYNAMIC,
  STATIC
};

// How a given task should be executed.  Filled out by the scheduler
// and passed to the segop function
struct scheduler_info {
  int64_t iter_pr_subtask;
  int64_t remainder;
  int nsubtasks;
  enum scheduling sched;
  int wake_up_threads;

  int64_t *task_time;
  int64_t *task_iter;
};

// A segop function.  This is what you hand the scheduler for
// execution.
typedef int (*segop_fn)(void* args,
                        int64_t iterations,
                        int tid,
                        struct scheduler_info info);

// A task for the scheduler to execute.
struct scheduler_segop {
  void *args;
  segop_fn top_level_fn;
  segop_fn nested_fn;
  int64_t iterations;
  enum scheduling sched;

  // Pointers to timer and iter associated with the task
  int64_t *task_time;
  int64_t *task_iter;

  // For debugging
  const char* name;
};

static inline int scheduler_prepare_task(struct scheduler *scheduler,
                                         struct scheduler_segop *task);

typedef int (*parloop_fn)(void* args,
                          int64_t start,
                          int64_t end,
                          int subtask_id,
                          int tid);

// A parallel parloop task.
struct scheduler_parloop {
  void* args;
  parloop_fn fn;
  int64_t iterations;
  struct scheduler_info info;

  // For debugging
  const char* name;
};

static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task);

// Then the API implementation.

#include <signal.h>

#if defined(_WIN32)
#include <windows.h>
#elif defined(__APPLE__)
#include <sys/sysctl.h>
// For getting cpu usage of threads
#include <mach/mach.h>
#include <sys/resource.h>
#elif defined(__linux__)
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#elif defined(__EMSCRIPTEN__)
#include <emscripten/threading.h>
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#endif

/* Multicore Utility functions */

/* A wrapper for getting rusage on Linux and MacOS */
/* TODO maybe figure out this for windows */
static inline int getrusage_thread(struct rusage *rusage)
{
  int err = -1;
#if  defined(__APPLE__)
    thread_basic_info_data_t info = { 0 };
    mach_msg_type_number_t info_count = THREAD_BASIC_INFO_COUNT;
    kern_return_t kern_err;

    kern_err = thread_info(mach_thread_self(),
                           THREAD_BASIC_INFO,
                           (thread_info_t)&info,
                           &info_count);
    if (kern_err == KERN_SUCCESS) {
        memset(rusage, 0, sizeof(struct rusage));
        rusage->ru_utime.tv_sec = info.user_time.seconds;
        rusage->ru_utime.tv_usec = info.user_time.microseconds;
        rusage->ru_stime.tv_sec = info.system_time.seconds;
        rusage->ru_stime.tv_usec = info.system_time.microseconds;
        err = 0;
    } else {
        errno = EINVAL;
    }
#elif defined(__linux__) || __EMSCRIPTEN__
    err = getrusage(RUSAGE_THREAD, rusage);
#endif
    return err;
}

/* returns the number of logical cores */
static int num_processors()
{
#if  defined(_WIN32)
/* https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/ns-sysinfoapi-system_info */
    SYSTEM_INFO sysinfo;
    GetSystemInfo(&sysinfo);
    int ncores = sysinfo.dwNumberOfProcessors;
    fprintf(stderr, "Found %d cores on your Windows machine\n Is that correct?\n", ncores);
    return ncores;
#elif defined(__APPLE__)
    int ncores;
    size_t ncores_size = sizeof(ncores);
    CHECK_ERRNO(sysctlbyname("hw.logicalcpu", &ncores, &ncores_size, NULL, 0),
                "sysctlbyname (hw.logicalcpu)");
    return ncores;
#elif defined(__linux__)
  return get_nprocs();
#elif __EMSCRIPTEN__
  return emscripten_num_logical_cores();
#else
  fprintf(stderr, "operating system not recognised\n");
  return -1;
#endif
}

static unsigned int g_seed;

// Used to seed the generator.
static inline void fast_srand(unsigned int seed) {
    g_seed = seed;
}

// Compute a pseudorandom integer.
// Output value in range [0, 32767]
static inline unsigned int fast_rand(void) {
    g_seed = (214013*g_seed+2531011);
    return (g_seed>>16)&0x7FFF;
}

struct subtask_queue {
  int capacity;             // Size of the buffer.
  int first;                // Index of the start of the ring buffer.
  int num_used;             // Number of used elements in the buffer.
  struct subtask **buffer;

  pthread_mutex_t mutex;    // Mutex used for synchronisation.
  pthread_cond_t cond;      // Condition variable used for synchronisation.
  int dead;

#if defined(MCPROFILE)
  /* Profiling fields */
  uint64_t time_enqueue;
  uint64_t time_dequeue;
  uint64_t n_dequeues;
  uint64_t n_enqueues;
#endif
};

/* A subtask that can be executed by a worker */
struct subtask {
  /* The parloop function */
  parloop_fn fn;
  /* Execution parameters */
  void* args;
  int64_t start, end;
  int id;

  /* Dynamic scheduling parameters */
  int chunkable;
  int64_t chunk_size;

  /* Shared variables across subtasks */
  volatile int *counter; // Counter for ongoing subtasks
  // Shared task timers and iterators
  int64_t *task_time;
  int64_t *task_iter;

  /* For debugging */
  const char *name;
};


struct worker {
  pthread_t thread;
  struct scheduler *scheduler;  /* Reference to the scheduler struct the worker belongs to*/
  struct subtask_queue q;
  int dead;
  int tid;                      /* Just a thread id */

  /* "thread local" time fields used for online algorithm */
  uint64_t timer;
  uint64_t total;
  int nested; /* How nested the current computation is */

  // Profiling fields
  int output_usage;            /* Whether to dump thread usage */
  uint64_t time_spent_working; /* Time spent in parloop functions */
};

static inline void output_worker_usage(struct worker *worker)
{
  struct rusage usage;
  CHECK_ERRNO(getrusage_thread(&usage), "getrusage_thread");
  struct timeval user_cpu_time = usage.ru_utime;
  struct timeval sys_cpu_time = usage.ru_stime;
  fprintf(stderr, "tid: %2d - work time %10llu us - user time: %10llu us - sys: %10llu us\n",
          worker->tid,
          (long long unsigned)worker->time_spent_working / 1000,
          (long long unsigned)(user_cpu_time.tv_sec * 1000000 + user_cpu_time.tv_usec),
          (long long unsigned)(sys_cpu_time.tv_sec * 1000000 + sys_cpu_time.tv_usec));
}

/* Doubles the size of the queue */
static inline int subtask_queue_grow_queue(struct subtask_queue *subtask_queue) {

  int new_capacity = 2 * subtask_queue->capacity;
#ifdef MCDEBUG
  fprintf(stderr, "Growing queue to %d\n", subtask_queue->capacity * 2);
#endif

  struct subtask **new_buffer = calloc(new_capacity, sizeof(struct subtask*));
  for (int i = 0; i < subtask_queue->num_used; i++) {
    new_buffer[i] = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
  }

  free(subtask_queue->buffer);
  subtask_queue->buffer = new_buffer;
  subtask_queue->capacity = new_capacity;
  subtask_queue->first = 0;

  return 0;
}

// Initialise a job queue with the given capacity.  The queue starts out
// empty.  Returns non-zero on error.
static inline int subtask_queue_init(struct subtask_queue *subtask_queue, int capacity)
{
  assert(subtask_queue != NULL);
  memset(subtask_queue, 0, sizeof(struct subtask_queue));

  subtask_queue->capacity = capacity;
  subtask_queue->buffer = calloc(capacity, sizeof(struct subtask*));
  if (subtask_queue->buffer == NULL) {
    return -1;
  }

  CHECK_ERRNO(pthread_mutex_init(&subtask_queue->mutex, NULL), "pthread_mutex_init");
  CHECK_ERRNO(pthread_cond_init(&subtask_queue->cond, NULL), "pthread_cond_init");

  return 0;
}

// Destroy the job queue.  Blocks until the queue is empty before it
// is destroyed.
static inline int subtask_queue_destroy(struct subtask_queue *subtask_queue)
{
  assert(subtask_queue != NULL);

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  while (subtask_queue->num_used != 0) {
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  // Queue is now empty.  Let's kill it!
  subtask_queue->dead = 1;
  free(subtask_queue->buffer);
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline void dump_queue(struct worker *worker)
{
  struct subtask_queue *subtask_queue = &worker->q;
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  for (int i = 0; i < subtask_queue->num_used; i++) {
    struct subtask * subtask = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
    printf("queue tid %d with %d task %s\n", worker->tid, i, subtask->name);
  }
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
}

// Push an element onto the end of the job queue.  Blocks if the
// subtask_queue is full (its size is equal to its capacity).  Returns
// non-zero on error.  It is an error to push a job onto a queue that
// has been destroyed.
static inline int subtask_queue_enqueue(struct worker *worker, struct subtask *subtask )
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  // Wait until there is room in the subtask_queue.
  while (subtask_queue->num_used == subtask_queue->capacity && !subtask_queue->dead) {
    if (subtask_queue->num_used == subtask_queue->capacity) {
      CHECK_ERR(subtask_queue_grow_queue(subtask_queue), "subtask_queue_grow_queue");
      continue;
    }
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // If we made it past the loop, there is room in the subtask_queue.
  subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used) % subtask_queue->capacity] = subtask;
  subtask_queue->num_used++;

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_enqueue += (end - start);
  subtask_queue->n_enqueues++;
#endif
  // Broadcast a reader (if any) that there is now an element.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


/* Like subtask_queue_dequeue, but with two differences:
   1) the subtask is stolen from the __front__ of the queue
   2) returns immediately if there is no subtasks queued,
      as we dont' want to block on another workers queue and
*/
static inline int subtask_queue_steal(struct worker *worker,
                                      struct subtask **subtask)
{
  struct subtask_queue *subtask_queue = &worker->q;
  assert(subtask_queue != NULL);

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  if (subtask_queue->num_used == 0) {
    CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // Tasks gets stolen from the "front"
  struct subtask *cur_back = subtask_queue->buffer[subtask_queue->first];
  struct subtask *new_subtask = NULL;
  int remaining_iter = cur_back->end - cur_back->start;
  // If subtask is chunkable, we steal half of the iterations
  if (cur_back->chunkable && remaining_iter > 1) {
      int64_t half = remaining_iter / 2;
      new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *cur_back;
      new_subtask->start = cur_back->end - half;
      cur_back->end = new_subtask->start;
      __atomic_fetch_add(cur_back->counter, 1, __ATOMIC_RELAXED);
  } else {
    new_subtask = cur_back;
    subtask_queue->num_used--;
    subtask_queue->first = (subtask_queue->first + 1) % subtask_queue->capacity;
  }
  *subtask = new_subtask;

  if (*subtask == NULL) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return 1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


// Pop an element from the back of the job queue.
// Optional argument can be provided to block or not
static inline int subtask_queue_dequeue(struct worker *worker,
                                        struct subtask **subtask, int blocking)
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  if (subtask_queue->num_used == 0 && !blocking) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }
  // Try to steal some work while the subtask_queue is empty
  while (subtask_queue->num_used == 0 && !subtask_queue->dead) {
    pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex);
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // dequeue pops from the back
  *subtask = subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used - 1) % subtask_queue->capacity];
  subtask_queue->num_used--;

  if (*subtask == NULL) {
    assert(!"got NULL ptr");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return -1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline int subtask_queue_is_empty(struct subtask_queue *subtask_queue)
{
  return subtask_queue->num_used == 0;
}

/* Scheduler definitions */

struct scheduler {
  struct worker *workers;
  int num_threads;

  // If there is work to steal => active_work > 0
  volatile int active_work;

  // Only one error can be returned at the time now.  Maybe we can
  // provide a stack like structure for pushing errors onto if we wish
  // to backpropagte multiple errors
  volatile int error;

  // kappa time unit in nanoseconds
  double kappa;
};


// Thread local variable worker struct
// Note that, accesses to tls variables are expensive
// Minimize direct references to this variable
__thread struct worker* worker_local = NULL;

static int64_t total_now(int64_t total, int64_t time) {
  return total + (get_wall_time_ns() - time);
}

static int random_other_worker(struct scheduler *scheduler, int my_id) {
  int my_num_workers = scheduler->num_threads;
  assert(my_num_workers != 1);
  int i = fast_rand() % (my_num_workers - 1);
  if (i >= my_id) {
    i++;
  }
#ifdef MCDEBUG
  assert(i >= 0);
  assert(i < my_num_workers);
  assert(i != my_id);
#endif

  return i;
}


static inline int64_t compute_chunk_size(double kappa, struct subtask* subtask)
{
  double C = (double)*subtask->task_time / (double)*subtask->task_iter;
  if (C == 0.0F) C += DBL_EPSILON;
  return smax64((int64_t)(kappa / C), 1);
}

/* Takes a chunk from subtask and enqueues the remaining iterations onto the worker's queue */
/* A no-op if the subtask is not chunkable */
static inline struct subtask* chunk_subtask(struct worker* worker, struct subtask *subtask)
{
  if (subtask->chunkable) {
    // Do we have information from previous runs avaliable
    if (*subtask->task_iter > 0) {
      subtask->chunk_size = compute_chunk_size(worker->scheduler->kappa, subtask);
      assert(subtask->chunk_size > 0);
    }
    int64_t remaining_iter = subtask->end - subtask->start;
    assert(remaining_iter > 0);
    if (remaining_iter > subtask->chunk_size) {
      struct subtask *new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *subtask;
      // increment the subtask join counter to account for new subtask
      __atomic_fetch_add(subtask->counter, 1, __ATOMIC_RELAXED);
      // Update range parameters
      subtask->end = subtask->start + subtask->chunk_size;
      new_subtask->start = subtask->end;
      subtask_queue_enqueue(worker, new_subtask);
    }
  }
  return subtask;
}

static inline int run_subtask(struct worker* worker, struct subtask* subtask)
{
  assert(subtask != NULL);
  assert(worker != NULL);

  subtask = chunk_subtask(worker, subtask);
  worker->total = 0;
  worker->timer = get_wall_time_ns();
#if defined(MCPROFILE)
  int64_t start = worker->timer;
#endif
  worker->nested++;
  int err = subtask->fn(subtask->args, subtask->start, subtask->end,
                        subtask->chunkable ? worker->tid : subtask->id,
                        worker->tid);
  worker->nested--;
  // Some error occured during some other subtask
  // so we just clean-up and return
  if (worker->scheduler->error != 0) {
    // Even a failed task counts as finished.
    __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
    free(subtask);
    return 0;
  }
  if (err != 0) {
    __atomic_store_n(&worker->scheduler->error, err, __ATOMIC_RELAXED);
  }
  // Total sequential time spent
  int64_t time_elapsed = total_now(worker->total, worker->timer);
#if defined(MCPROFILE)
  worker->time_spent_working += get_wall_time_ns() - start;
#endif
  int64_t iter = subtask->end - subtask->start;
  // report measurements
  // These updates should really be done using a single atomic CAS operation
  __atomic_fetch_add(subtask->task_time, time_elapsed, __ATOMIC_RELAXED);
  __atomic_fetch_add(subtask->task_iter, iter, __ATOMIC_RELAXED);
  // We need a fence here, since if the counter is decremented before either
  // of the two above are updated bad things can happen, e.g. if they are stack-allocated
  __atomic_thread_fence(__ATOMIC_SEQ_CST);
  __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
  free(subtask);
  return 0;
}


static inline int is_small(struct scheduler_segop *task, struct scheduler *scheduler, int *nsubtasks)
{
  int64_t time = *task->task_time;
  int64_t iter = *task->task_iter;

  if (task->sched == DYNAMIC || iter == 0) {
    *nsubtasks = scheduler->num_threads;
    return 0;
  }

  // Estimate the constant C
  double C = (double)time / (double)iter;
  double cur_task_iter = (double) task->iterations;

  // Returns true if the task is small i.e.
  // if the number of iterations times C is smaller
  // than the overhead of subtask creation
  if (C == 0.0F || C * cur_task_iter < scheduler->kappa) {
    *nsubtasks = 1;
    return 1;
  }

  // Else compute how many subtasks this tasks should create
  int64_t min_iter_pr_subtask = smax64(scheduler->kappa / C, 1);
  *nsubtasks = smin64(smax64(task->iterations / min_iter_pr_subtask, 1), scheduler->num_threads);

  return 0;
}

// TODO make this prettier
static inline struct subtask* create_subtask(parloop_fn fn,
                                             void* args,
                                             const char* name,
                                             volatile int* counter,
                                             int64_t *timer,
                                             int64_t *iter,
                                             int64_t start, int64_t end,
                                             int chunkable,
                                             int64_t chunk_size,
                                             int id)
{
  struct subtask* subtask = malloc(sizeof(struct subtask));
  if (subtask == NULL) {
    assert(!"malloc failed in create_subtask");
    return NULL;
  }
  subtask->fn         = fn;
  subtask->args       = args;

  subtask->counter    = counter;
  subtask->task_time  = timer;
  subtask->task_iter  = iter;

  subtask->start      = start;
  subtask->end        = end;
  subtask->id         = id;
  subtask->chunkable  = chunkable;
  subtask->chunk_size = chunk_size;

  subtask->name       = name;
  return subtask;
}

static int dummy_counter = 0;
static int64_t dummy_timer = 0;
static int64_t dummy_iter = 0;

static int dummy_fn(void *args, int64_t start, int64_t end, int subtask_id, int tid) {
  (void)args;
  (void)start;
  (void)end;
  (void)subtask_id;
  (void)tid;
  return 0;
}

// Wake up threads, who are blocking by pushing a dummy task
// onto their queue
static inline void wake_up_threads(struct scheduler *scheduler, int start_tid, int end_tid) {

#if defined(MCDEBUG)
  assert(start_tid >= 1);
  assert(end_tid <= scheduler->num_threads);
#endif
  for (int i = start_tid; i < end_tid; i++) {
    struct subtask *subtask = create_subtask(dummy_fn, NULL, "dummy_fn",
                                            &dummy_counter,
                                            &dummy_timer, &dummy_iter,
                                            0, 0,
                                            0, 0,
                                            0);
    CHECK_ERR(subtask_queue_enqueue(&scheduler->workers[i], subtask), "subtask_queue_enqueue");
  }
}

static inline int is_finished(struct worker *worker) {
  return worker->dead && subtask_queue_is_empty(&worker->q);
}

// Try to steal from a random queue
static inline int steal_from_random_worker(struct worker* worker)
{
  int my_id = worker->tid;
  struct scheduler* scheduler = worker->scheduler;
  int k = random_other_worker(scheduler, my_id);
  struct worker *worker_k = &scheduler->workers[k];
  struct subtask* subtask =  NULL;
  int retval = subtask_queue_steal(worker_k, &subtask);
  if (retval == 0) {
    subtask_queue_enqueue(worker, subtask);
    return 1;
  }
  return 0;
}


static inline void *scheduler_worker(void* args)
{
  struct worker *worker = (struct worker*) args;
  struct scheduler *scheduler = worker->scheduler;
  worker_local = worker;
  struct subtask *subtask = NULL;

  while(!is_finished(worker)) {
    if (!subtask_queue_is_empty(&worker->q)) {
      int retval = subtask_queue_dequeue(worker, &subtask, 0);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      } // else someone stole our work

    } else if (scheduler->active_work) { /* steal */
      while (!is_finished(worker) && scheduler->active_work) {
        if (steal_from_random_worker(worker)) {
          break;
        }
      }
    } else { /* go back to sleep and wait for work */
      int retval = subtask_queue_dequeue(worker, &subtask, 1);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    }
  }

  assert(subtask_queue_is_empty(&worker->q));
#if defined(MCPROFILE)
  if (worker->output_usage)
    output_worker_usage(worker);
#endif
  return NULL;
}


static inline int scheduler_execute_parloop(struct scheduler *scheduler,
                                            struct scheduler_parloop *task,
                                            int64_t *timer)
{

  struct worker *worker = worker_local;

  struct scheduler_info info = task->info;
  int64_t iter_pr_subtask = info.iter_pr_subtask;
  int64_t remainder = info.remainder;
  int nsubtasks = info.nsubtasks;
  volatile int join_counter = nsubtasks;

  // Shared timer used to sum up all
  // sequential work from each subtask
  int64_t task_timer = 0;
  int64_t task_iter = 0;

  enum scheduling sched = info.sched;
  /* If each subtasks should be processed in chunks */
  int chunkable = sched == STATIC ? 0 : 1;
  int64_t chunk_size = 1; // The initial chunk size when no info is avaliable


  if (info.wake_up_threads || sched == DYNAMIC)
    __atomic_add_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);

  int64_t start = 0;
  int64_t end = iter_pr_subtask + (int64_t)(remainder != 0);
  for (int subtask_id = 0; subtask_id < nsubtasks; subtask_id++) {
    struct subtask *subtask = create_subtask(task->fn, task->args, task->name,
                                              &join_counter,
                                              &task_timer, &task_iter,
                                              start, end,
                                              chunkable, chunk_size,
                                              subtask_id);
    assert(subtask != NULL);
    // In most cases we will never have more subtasks than workers,
    // but there can be exceptions (e.g. the kappa tuning function).
    struct worker *subtask_worker =
      worker->nested
      ? &scheduler->workers[worker->tid]
      : &scheduler->workers[subtask_id % scheduler->num_threads];
    CHECK_ERR(subtask_queue_enqueue(subtask_worker, subtask),
              "subtask_queue_enqueue");
    // Update range params
    start = end;
    end += iter_pr_subtask + ((subtask_id + 1) < remainder);
  }

  if (info.wake_up_threads) {
    wake_up_threads(scheduler, nsubtasks, scheduler->num_threads);
  }

  // Join (wait for subtasks to finish)
  while(join_counter != 0) {
    if (!subtask_queue_is_empty(&worker->q)) {
      struct subtask *subtask = NULL;
      int err = subtask_queue_dequeue(worker, &subtask, 0);
      if (err == 0 ) {
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    } else {
      if (steal_from_random_worker(worker)) {
        struct subtask *subtask = NULL;
        int err = subtask_queue_dequeue(worker, &subtask, 0);
        if (err == 0) {
          CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
        }
      }
    }
  }


  if (info.wake_up_threads || sched == DYNAMIC) {
    __atomic_sub_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);
  }

  // Write back timing results of all sequential work
  (*timer) += task_timer;
  return scheduler->error;
}


static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task)
{

  struct worker *worker = worker_local;

  int err = 0;

  // How much sequential work was performed by the task
  int64_t task_timer = 0;

  /* Execute task sequential or parallel based on decision made earlier */
  if (task->info.nsubtasks == 1) {
    int64_t start = get_wall_time_ns();
    err = task->fn(task->args, 0, task->iterations, 0, worker->tid);
    int64_t end = get_wall_time_ns();
    task_timer = end - start;
    worker->time_spent_working += task_timer;
    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);
  } else {
    // Add "before" time if we already are inside a task
    int64_t time_before = 0;
    if (worker->nested > 0) {
      time_before = total_now(worker->total, worker->timer);
    }

    err = scheduler_execute_parloop(scheduler, task, &task_timer);

    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);

    // Update timers to account for new timings
    worker->total = time_before + task_timer;
    worker->timer = get_wall_time_ns();
  }


  return err;
}

/* Decide on how schedule the incoming task i.e. how many subtasks and
   to run sequential or (potentially nested) parallel code body */
static inline int scheduler_prepare_task(struct scheduler* scheduler,
                                         struct scheduler_segop *task)
{
  assert(task != NULL);

  struct worker *worker = worker_local;
  struct scheduler_info info;
  info.task_time = task->task_time;
  info.task_iter = task->task_iter;

  int nsubtasks;
  // Decide if task should be scheduled sequentially
  if (is_small(task, scheduler, &nsubtasks)) {
    info.iter_pr_subtask = task->iterations;
    info.remainder = 0;
    info.nsubtasks = nsubtasks;
    return task->top_level_fn(task->args, task->iterations, worker->tid, info);
  } else {
    info.iter_pr_subtask = task->iterations / nsubtasks;
    info.remainder = task->iterations % nsubtasks;
    info.sched = task->sched;
    switch (task->sched) {
    case STATIC:
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : ((task->iterations - info.remainder) / info.iter_pr_subtask);
      break;
    case DYNAMIC:
      // As any thread can take any subtasks, we are being safe with using
      // an upper bound on the number of tasks such that the task allocate enough memory
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : nsubtasks;
      break;
    default:
      assert(!"Got unknown scheduling");
    }
  }

  info.wake_up_threads = 0;
  // We only use the nested parallel segop function if we can't exchaust all cores
  // using the outer most level
  if (task->nested_fn != NULL && info.nsubtasks < scheduler->num_threads && info.nsubtasks == task->iterations) {
    if (worker->nested == 0)
      info.wake_up_threads = 1;
    return task->nested_fn(task->args, task->iterations, worker->tid, info);
  }

  return task->top_level_fn(task->args, task->iterations, worker->tid, info);
}

// Now some code for finding the proper value of kappa on a given
// machine (the smallest amount of work that amortises the cost of
// task creation).

struct tuning_struct {
  int32_t *free_tuning_res;
  int32_t *array;
};

// Reduction function over an integer array
static int tuning_loop(void *args, int64_t start, int64_t end,
                                     int flat_tid, int tid) {
  (void)flat_tid;
  (void)tid;

  int err = 0;
  struct tuning_struct *tuning_struct = (struct tuning_struct *) args;
  int32_t *array = tuning_struct->array;
  int32_t *tuning_res = tuning_struct->free_tuning_res;

  int32_t sum = 0;
  for (int i = start; i < end; i++) {
    int32_t y = array[i];
    sum = add32(sum, y);
  }
  *tuning_res = sum;
  return err;
}

// The main entry point for the tuning process.  Sets the provided
// variable ``kappa``.
static int determine_kappa(double *kappa) {
  int err = 0;

  int64_t iterations = 100000000;
  int64_t tuning_time = 0;
  int64_t tuning_iter = 0;

  int32_t *array = malloc(sizeof(int32_t) * iterations);
  for (int64_t i = 0; i < iterations; i++) {
    array[i] = fast_rand();
  }

  int64_t start_tuning = get_wall_time_ns();
  /* **************************** */
  /* Run sequential reduce first' */
  /* **************************** */
  int64_t tuning_sequentiual_start = get_wall_time_ns();
  struct tuning_struct tuning_struct;
  int32_t tuning_res;
  tuning_struct.free_tuning_res = &tuning_res;
  tuning_struct.array = array;

  err = tuning_loop(&tuning_struct, 0, iterations, 0, 0);
  int64_t tuning_sequentiual_end = get_wall_time_ns();
  int64_t sequential_elapsed = tuning_sequentiual_end - tuning_sequentiual_start;

  double C = (double)sequential_elapsed / (double)iterations;
  fprintf(stderr, " Time for sequential run is %lld - Found C %f\n", (long long)sequential_elapsed, C);

  /* ********************** */
  /* Now run tuning process */
  /* ********************** */
  // Setup a scheduler with a single worker
  struct scheduler scheduler;
  scheduler.num_threads = 1;
  scheduler.workers = malloc(sizeof(struct worker));
  worker_local = &scheduler.workers[0];
  worker_local->tid = 0;
  CHECK_ERR(subtask_queue_init(&scheduler.workers[0].q, 1024),
            "failed to init queue for worker %d\n", 0);

  // Start tuning for kappa
  double kappa_tune = 1000; // Initial kappa is 1 us
  double ratio;
  int64_t time_elapsed;
  while(1) {
    int64_t min_iter_pr_subtask = (int64_t) (kappa_tune / C) == 0 ? 1 : (kappa_tune / C);
    int nsubtasks = iterations / min_iter_pr_subtask;
    struct scheduler_info info;
    info.iter_pr_subtask = min_iter_pr_subtask;

    info.nsubtasks = iterations / min_iter_pr_subtask;
    info.remainder = iterations % min_iter_pr_subtask;
    info.task_time = &tuning_time;
    info.task_iter = &tuning_iter;
    info.sched = STATIC;

    struct scheduler_parloop parloop;
    parloop.name = "tuning_loop";
    parloop.fn = tuning_loop;
    parloop.args = &tuning_struct;
    parloop.iterations = iterations;
    parloop.info = info;

    int64_t tuning_chunked_start = get_wall_time_ns();
    int determine_kappa_err =
      scheduler_execute_task(&scheduler,
                             &parloop);
    assert(determine_kappa_err == 0);
    int64_t tuning_chunked_end = get_wall_time_ns();
    time_elapsed =  tuning_chunked_end - tuning_chunked_start;

    ratio = (double)time_elapsed / (double)sequential_elapsed;
    if (ratio < 1.055) {
      break;
    }
    kappa_tune += 100; // Increase by 100 ns at the time
    fprintf(stderr, "nsubtask %d - kappa %f - ratio %f\n", nsubtasks, kappa_tune, ratio);
  }

  int64_t end_tuning = get_wall_time_ns();
  fprintf(stderr, "tuning took %lld ns and found kappa %f - time %lld - ratio %f\n",
          (long long)end_tuning - start_tuning,
          kappa_tune,
          (long long)time_elapsed,
          ratio);
  *kappa = kappa_tune;

  // Clean-up
  CHECK_ERR(subtask_queue_destroy(&scheduler.workers[0].q), "failed to destroy queue");
  free(array);
  free(scheduler.workers);
  return err;
}

static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa) {
  assert(num_workers > 0);

  scheduler->kappa = kappa;
  scheduler->num_threads = num_workers;
  scheduler->active_work = 0;
  scheduler->error = 0;

  scheduler->workers = calloc(num_workers, sizeof(struct worker));

  const int queue_capacity = 1024;

  worker_local = &scheduler->workers[0];
  worker_local->tid = 0;
  worker_local->scheduler = scheduler;
  CHECK_ERR(subtask_queue_init(&worker_local->q, queue_capacity),
            "failed to init queue for worker %d\n", 0);

  for (int i = 1; i < num_workers; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    memset(cur_worker, 0, sizeof(struct worker));
    cur_worker->tid = i;
    cur_worker->output_usage = 0;
    cur_worker->scheduler = scheduler;
    CHECK_ERR(subtask_queue_init(&cur_worker->q, queue_capacity),
              "failed to init queue for worker %d\n", i);

    CHECK_ERR(pthread_create(&cur_worker->thread,
                             NULL,
                             &scheduler_worker,
                             cur_worker),
              "Failed to create worker %d\n", i);
  }

  return 0;
}

static int scheduler_destroy(struct scheduler *scheduler) {
  // First mark them all as dead.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    cur_worker->dead = 1;
  }

  // Then destroy their task queues (this will wake up the threads and
  // make them do their shutdown).
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    subtask_queue_destroy(&cur_worker->q);
  }

  // Then actually wait for them to stop.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    CHECK_ERR(pthread_join(scheduler->workers[i].thread, NULL), "pthread_join");
  }

  free(scheduler->workers);

  return 0;
}

// End of scheduler.h

struct futhark_context_config {
    int debugging;
    int profiling;
    int num_threads;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->debugging = 0;
    cfg->profiling = 0;
    cfg->num_threads = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    // Does nothing for this backend.
    (void) cfg;
    (void) detail;
}
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n)
{
    cfg->num_threads = n;
}
struct futhark_context {
    struct scheduler scheduler;
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int total_runs;
    long total_runtime;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    int64_t *futhark_mc_segmap_parloop_81684_total_runtime;
    int *futhark_mc_segmap_parloop_81684_runs;
    int64_t *futhark_mc_segmap_parloop_81684_iter;
    int64_t futhark_mc_segmap_parloop_81684_total_total_runtime;
    int futhark_mc_segmap_parloop_81684_total_runs;
    int64_t futhark_mc_segmap_parloop_81684_total_iter;
    int64_t *futhark_mc_segmap_task_81682_total_runtime;
    int *futhark_mc_segmap_task_81682_runs;
    int64_t *futhark_mc_segmap_task_81682_iter;
    int64_t futhark_mc_segmap_task_81682_total_time;
    int64_t futhark_mc_segmap_task_81682_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_81704_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_81704_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_81704_iter;
    int64_t futhark_mc_scan_stage_1_parloop_81704_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_81704_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_81704_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_81706_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_81706_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_81706_iter;
    int64_t futhark_mc_scan_stage_3_parloop_81706_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_81706_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_81706_total_iter;
    int64_t *futhark_mc_segscan_task_81701_total_runtime;
    int *futhark_mc_segscan_task_81701_runs;
    int64_t *futhark_mc_segscan_task_81701_iter;
    int64_t futhark_mc_segscan_task_81701_total_time;
    int64_t futhark_mc_segscan_task_81701_total_iter;
    int64_t *futhark_mc_segmap_parloop_81710_total_runtime;
    int *futhark_mc_segmap_parloop_81710_runs;
    int64_t *futhark_mc_segmap_parloop_81710_iter;
    int64_t futhark_mc_segmap_parloop_81710_total_total_runtime;
    int futhark_mc_segmap_parloop_81710_total_runs;
    int64_t futhark_mc_segmap_parloop_81710_total_iter;
    int64_t *futhark_mc_segmap_task_81708_total_runtime;
    int *futhark_mc_segmap_task_81708_runs;
    int64_t *futhark_mc_segmap_task_81708_iter;
    int64_t futhark_mc_segmap_task_81708_total_time;
    int64_t futhark_mc_segmap_task_81708_total_iter;
    int64_t *futhark_mc_segmap_parloop_81714_total_runtime;
    int *futhark_mc_segmap_parloop_81714_runs;
    int64_t *futhark_mc_segmap_parloop_81714_iter;
    int64_t futhark_mc_segmap_parloop_81714_total_total_runtime;
    int futhark_mc_segmap_parloop_81714_total_runs;
    int64_t futhark_mc_segmap_parloop_81714_total_iter;
    int64_t *futhark_mc_segmap_task_81712_total_runtime;
    int *futhark_mc_segmap_task_81712_runs;
    int64_t *futhark_mc_segmap_task_81712_iter;
    int64_t futhark_mc_segmap_task_81712_total_time;
    int64_t futhark_mc_segmap_task_81712_total_iter;
    int64_t *futhark_mc_segmap_parloop_81718_total_runtime;
    int *futhark_mc_segmap_parloop_81718_runs;
    int64_t *futhark_mc_segmap_parloop_81718_iter;
    int64_t futhark_mc_segmap_parloop_81718_total_total_runtime;
    int futhark_mc_segmap_parloop_81718_total_runs;
    int64_t futhark_mc_segmap_parloop_81718_total_iter;
    int64_t *futhark_mc_segmap_task_81716_total_runtime;
    int *futhark_mc_segmap_task_81716_runs;
    int64_t *futhark_mc_segmap_task_81716_iter;
    int64_t futhark_mc_segmap_task_81716_total_time;
    int64_t futhark_mc_segmap_task_81716_total_iter;
    int64_t *futhark_mc_segmap_parloop_81722_total_runtime;
    int *futhark_mc_segmap_parloop_81722_runs;
    int64_t *futhark_mc_segmap_parloop_81722_iter;
    int64_t futhark_mc_segmap_parloop_81722_total_total_runtime;
    int futhark_mc_segmap_parloop_81722_total_runs;
    int64_t futhark_mc_segmap_parloop_81722_total_iter;
    int64_t *futhark_mc_segmap_task_81720_total_runtime;
    int *futhark_mc_segmap_task_81720_runs;
    int64_t *futhark_mc_segmap_task_81720_iter;
    int64_t futhark_mc_segmap_task_81720_total_time;
    int64_t futhark_mc_segmap_task_81720_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81730_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81730_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81730_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81730_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81730_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81730_total_iter;
    int64_t *futhark_mc_segred_task_81727_total_runtime;
    int *futhark_mc_segred_task_81727_runs;
    int64_t *futhark_mc_segred_task_81727_iter;
    int64_t futhark_mc_segred_task_81727_total_time;
    int64_t futhark_mc_segred_task_81727_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81735_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81735_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81735_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81735_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81735_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81735_total_iter;
    int64_t *futhark_mc_segred_task_81732_total_runtime;
    int *futhark_mc_segred_task_81732_runs;
    int64_t *futhark_mc_segred_task_81732_iter;
    int64_t futhark_mc_segred_task_81732_total_time;
    int64_t futhark_mc_segred_task_81732_total_iter;
    int64_t *futhark_mc_segmap_parloop_81725_total_runtime;
    int *futhark_mc_segmap_parloop_81725_runs;
    int64_t *futhark_mc_segmap_parloop_81725_iter;
    int64_t futhark_mc_segmap_parloop_81725_total_total_runtime;
    int futhark_mc_segmap_parloop_81725_total_runs;
    int64_t futhark_mc_segmap_parloop_81725_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81723_total_runtime;
    int *futhark_mc_segmap_nested_task_81723_runs;
    int64_t *futhark_mc_segmap_nested_task_81723_iter;
    int64_t *futhark_mc_segmap_parloop_81693_total_runtime;
    int *futhark_mc_segmap_parloop_81693_runs;
    int64_t *futhark_mc_segmap_parloop_81693_iter;
    int64_t futhark_mc_segmap_parloop_81693_total_total_runtime;
    int futhark_mc_segmap_parloop_81693_total_runs;
    int64_t futhark_mc_segmap_parloop_81693_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81691_total_runtime;
    int *futhark_mc_segmap_nested_task_81691_runs;
    int64_t *futhark_mc_segmap_nested_task_81691_iter;
    int64_t *futhark_mc_segmap_parloop_81739_total_runtime;
    int *futhark_mc_segmap_parloop_81739_runs;
    int64_t *futhark_mc_segmap_parloop_81739_iter;
    int64_t futhark_mc_segmap_parloop_81739_total_total_runtime;
    int futhark_mc_segmap_parloop_81739_total_runs;
    int64_t futhark_mc_segmap_parloop_81739_total_iter;
    int64_t *futhark_mc_segmap_task_81737_total_runtime;
    int *futhark_mc_segmap_task_81737_runs;
    int64_t *futhark_mc_segmap_task_81737_iter;
    int64_t futhark_mc_segmap_task_81737_total_time;
    int64_t futhark_mc_segmap_task_81737_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_81761_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_81761_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_81761_iter;
    int64_t futhark_mc_scan_stage_1_parloop_81761_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_81761_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_81761_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_81763_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_81763_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_81763_iter;
    int64_t futhark_mc_scan_stage_3_parloop_81763_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_81763_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_81763_total_iter;
    int64_t *futhark_mc_segscan_task_81758_total_runtime;
    int *futhark_mc_segscan_task_81758_runs;
    int64_t *futhark_mc_segscan_task_81758_iter;
    int64_t futhark_mc_segscan_task_81758_total_time;
    int64_t futhark_mc_segscan_task_81758_total_iter;
    int64_t *futhark_mc_segmap_parloop_81767_total_runtime;
    int *futhark_mc_segmap_parloop_81767_runs;
    int64_t *futhark_mc_segmap_parloop_81767_iter;
    int64_t futhark_mc_segmap_parloop_81767_total_total_runtime;
    int futhark_mc_segmap_parloop_81767_total_runs;
    int64_t futhark_mc_segmap_parloop_81767_total_iter;
    int64_t *futhark_mc_segmap_task_81765_total_runtime;
    int *futhark_mc_segmap_task_81765_runs;
    int64_t *futhark_mc_segmap_task_81765_iter;
    int64_t futhark_mc_segmap_task_81765_total_time;
    int64_t futhark_mc_segmap_task_81765_total_iter;
    int64_t *futhark_mc_segmap_parloop_81771_total_runtime;
    int *futhark_mc_segmap_parloop_81771_runs;
    int64_t *futhark_mc_segmap_parloop_81771_iter;
    int64_t futhark_mc_segmap_parloop_81771_total_total_runtime;
    int futhark_mc_segmap_parloop_81771_total_runs;
    int64_t futhark_mc_segmap_parloop_81771_total_iter;
    int64_t *futhark_mc_segmap_task_81769_total_runtime;
    int *futhark_mc_segmap_task_81769_runs;
    int64_t *futhark_mc_segmap_task_81769_iter;
    int64_t futhark_mc_segmap_task_81769_total_time;
    int64_t futhark_mc_segmap_task_81769_total_iter;
    int64_t *futhark_mc_segmap_parloop_81775_total_runtime;
    int *futhark_mc_segmap_parloop_81775_runs;
    int64_t *futhark_mc_segmap_parloop_81775_iter;
    int64_t futhark_mc_segmap_parloop_81775_total_total_runtime;
    int futhark_mc_segmap_parloop_81775_total_runs;
    int64_t futhark_mc_segmap_parloop_81775_total_iter;
    int64_t *futhark_mc_segmap_task_81773_total_runtime;
    int *futhark_mc_segmap_task_81773_runs;
    int64_t *futhark_mc_segmap_task_81773_iter;
    int64_t futhark_mc_segmap_task_81773_total_time;
    int64_t futhark_mc_segmap_task_81773_total_iter;
    int64_t *futhark_mc_segmap_parloop_81779_total_runtime;
    int *futhark_mc_segmap_parloop_81779_runs;
    int64_t *futhark_mc_segmap_parloop_81779_iter;
    int64_t futhark_mc_segmap_parloop_81779_total_total_runtime;
    int futhark_mc_segmap_parloop_81779_total_runs;
    int64_t futhark_mc_segmap_parloop_81779_total_iter;
    int64_t *futhark_mc_segmap_task_81777_total_runtime;
    int *futhark_mc_segmap_task_81777_runs;
    int64_t *futhark_mc_segmap_task_81777_iter;
    int64_t futhark_mc_segmap_task_81777_total_time;
    int64_t futhark_mc_segmap_task_81777_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81789_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81789_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81789_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81789_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81789_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81789_total_iter;
    int64_t *futhark_mc_segred_task_81784_total_runtime;
    int *futhark_mc_segred_task_81784_runs;
    int64_t *futhark_mc_segred_task_81784_iter;
    int64_t futhark_mc_segred_task_81784_total_time;
    int64_t futhark_mc_segred_task_81784_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81795_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81795_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81795_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81795_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81795_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81795_total_iter;
    int64_t *futhark_mc_segred_task_81791_total_runtime;
    int *futhark_mc_segred_task_81791_runs;
    int64_t *futhark_mc_segred_task_81791_iter;
    int64_t futhark_mc_segred_task_81791_total_time;
    int64_t futhark_mc_segred_task_81791_total_iter;
    int64_t *futhark_mc_segmap_parloop_81782_total_runtime;
    int *futhark_mc_segmap_parloop_81782_runs;
    int64_t *futhark_mc_segmap_parloop_81782_iter;
    int64_t futhark_mc_segmap_parloop_81782_total_total_runtime;
    int futhark_mc_segmap_parloop_81782_total_runs;
    int64_t futhark_mc_segmap_parloop_81782_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81780_total_runtime;
    int *futhark_mc_segmap_nested_task_81780_runs;
    int64_t *futhark_mc_segmap_nested_task_81780_iter;
    int64_t *futhark_mc_segmap_parloop_81749_total_runtime;
    int *futhark_mc_segmap_parloop_81749_runs;
    int64_t *futhark_mc_segmap_parloop_81749_iter;
    int64_t futhark_mc_segmap_parloop_81749_total_total_runtime;
    int futhark_mc_segmap_parloop_81749_total_runs;
    int64_t futhark_mc_segmap_parloop_81749_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81747_total_runtime;
    int *futhark_mc_segmap_nested_task_81747_runs;
    int64_t *futhark_mc_segmap_nested_task_81747_iter;
    int64_t *futhark_mc_segmap_parloop_81799_total_runtime;
    int *futhark_mc_segmap_parloop_81799_runs;
    int64_t *futhark_mc_segmap_parloop_81799_iter;
    int64_t futhark_mc_segmap_parloop_81799_total_total_runtime;
    int futhark_mc_segmap_parloop_81799_total_runs;
    int64_t futhark_mc_segmap_parloop_81799_total_iter;
    int64_t *futhark_mc_segmap_task_81797_total_runtime;
    int *futhark_mc_segmap_task_81797_runs;
    int64_t *futhark_mc_segmap_task_81797_iter;
    int64_t futhark_mc_segmap_task_81797_total_time;
    int64_t futhark_mc_segmap_task_81797_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_81821_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_81821_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_81821_iter;
    int64_t futhark_mc_scan_stage_1_parloop_81821_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_81821_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_81821_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_81823_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_81823_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_81823_iter;
    int64_t futhark_mc_scan_stage_3_parloop_81823_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_81823_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_81823_total_iter;
    int64_t *futhark_mc_segscan_task_81818_total_runtime;
    int *futhark_mc_segscan_task_81818_runs;
    int64_t *futhark_mc_segscan_task_81818_iter;
    int64_t futhark_mc_segscan_task_81818_total_time;
    int64_t futhark_mc_segscan_task_81818_total_iter;
    int64_t *futhark_mc_segmap_parloop_81827_total_runtime;
    int *futhark_mc_segmap_parloop_81827_runs;
    int64_t *futhark_mc_segmap_parloop_81827_iter;
    int64_t futhark_mc_segmap_parloop_81827_total_total_runtime;
    int futhark_mc_segmap_parloop_81827_total_runs;
    int64_t futhark_mc_segmap_parloop_81827_total_iter;
    int64_t *futhark_mc_segmap_task_81825_total_runtime;
    int *futhark_mc_segmap_task_81825_runs;
    int64_t *futhark_mc_segmap_task_81825_iter;
    int64_t futhark_mc_segmap_task_81825_total_time;
    int64_t futhark_mc_segmap_task_81825_total_iter;
    int64_t *futhark_mc_segmap_parloop_81831_total_runtime;
    int *futhark_mc_segmap_parloop_81831_runs;
    int64_t *futhark_mc_segmap_parloop_81831_iter;
    int64_t futhark_mc_segmap_parloop_81831_total_total_runtime;
    int futhark_mc_segmap_parloop_81831_total_runs;
    int64_t futhark_mc_segmap_parloop_81831_total_iter;
    int64_t *futhark_mc_segmap_task_81829_total_runtime;
    int *futhark_mc_segmap_task_81829_runs;
    int64_t *futhark_mc_segmap_task_81829_iter;
    int64_t futhark_mc_segmap_task_81829_total_time;
    int64_t futhark_mc_segmap_task_81829_total_iter;
    int64_t *futhark_mc_segmap_parloop_81835_total_runtime;
    int *futhark_mc_segmap_parloop_81835_runs;
    int64_t *futhark_mc_segmap_parloop_81835_iter;
    int64_t futhark_mc_segmap_parloop_81835_total_total_runtime;
    int futhark_mc_segmap_parloop_81835_total_runs;
    int64_t futhark_mc_segmap_parloop_81835_total_iter;
    int64_t *futhark_mc_segmap_task_81833_total_runtime;
    int *futhark_mc_segmap_task_81833_runs;
    int64_t *futhark_mc_segmap_task_81833_iter;
    int64_t futhark_mc_segmap_task_81833_total_time;
    int64_t futhark_mc_segmap_task_81833_total_iter;
    int64_t *futhark_mc_segmap_parloop_81839_total_runtime;
    int *futhark_mc_segmap_parloop_81839_runs;
    int64_t *futhark_mc_segmap_parloop_81839_iter;
    int64_t futhark_mc_segmap_parloop_81839_total_total_runtime;
    int futhark_mc_segmap_parloop_81839_total_runs;
    int64_t futhark_mc_segmap_parloop_81839_total_iter;
    int64_t *futhark_mc_segmap_task_81837_total_runtime;
    int *futhark_mc_segmap_task_81837_runs;
    int64_t *futhark_mc_segmap_task_81837_iter;
    int64_t futhark_mc_segmap_task_81837_total_time;
    int64_t futhark_mc_segmap_task_81837_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81851_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81851_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81851_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81851_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81851_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81851_total_iter;
    int64_t *futhark_mc_segred_task_81844_total_runtime;
    int *futhark_mc_segred_task_81844_runs;
    int64_t *futhark_mc_segred_task_81844_iter;
    int64_t futhark_mc_segred_task_81844_total_time;
    int64_t futhark_mc_segred_task_81844_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81857_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81857_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81857_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81857_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81857_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81857_total_iter;
    int64_t *futhark_mc_segred_task_81853_total_runtime;
    int *futhark_mc_segred_task_81853_runs;
    int64_t *futhark_mc_segred_task_81853_iter;
    int64_t futhark_mc_segred_task_81853_total_time;
    int64_t futhark_mc_segred_task_81853_total_iter;
    int64_t *futhark_mc_segmap_parloop_81842_total_runtime;
    int *futhark_mc_segmap_parloop_81842_runs;
    int64_t *futhark_mc_segmap_parloop_81842_iter;
    int64_t futhark_mc_segmap_parloop_81842_total_total_runtime;
    int futhark_mc_segmap_parloop_81842_total_runs;
    int64_t futhark_mc_segmap_parloop_81842_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81840_total_runtime;
    int *futhark_mc_segmap_nested_task_81840_runs;
    int64_t *futhark_mc_segmap_nested_task_81840_iter;
    int64_t *futhark_mc_segmap_parloop_81809_total_runtime;
    int *futhark_mc_segmap_parloop_81809_runs;
    int64_t *futhark_mc_segmap_parloop_81809_iter;
    int64_t futhark_mc_segmap_parloop_81809_total_total_runtime;
    int futhark_mc_segmap_parloop_81809_total_runs;
    int64_t futhark_mc_segmap_parloop_81809_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81807_total_runtime;
    int *futhark_mc_segmap_nested_task_81807_runs;
    int64_t *futhark_mc_segmap_nested_task_81807_iter;
    int64_t *futhark_mc_segmap_parloop_81861_total_runtime;
    int *futhark_mc_segmap_parloop_81861_runs;
    int64_t *futhark_mc_segmap_parloop_81861_iter;
    int64_t futhark_mc_segmap_parloop_81861_total_total_runtime;
    int futhark_mc_segmap_parloop_81861_total_runs;
    int64_t futhark_mc_segmap_parloop_81861_total_iter;
    int64_t *futhark_mc_segmap_task_81859_total_runtime;
    int *futhark_mc_segmap_task_81859_runs;
    int64_t *futhark_mc_segmap_task_81859_iter;
    int64_t futhark_mc_segmap_task_81859_total_time;
    int64_t futhark_mc_segmap_task_81859_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_81882_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_81882_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_81882_iter;
    int64_t futhark_mc_scan_stage_1_parloop_81882_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_81882_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_81882_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_81884_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_81884_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_81884_iter;
    int64_t futhark_mc_scan_stage_3_parloop_81884_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_81884_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_81884_total_iter;
    int64_t *futhark_mc_segscan_task_81879_total_runtime;
    int *futhark_mc_segscan_task_81879_runs;
    int64_t *futhark_mc_segscan_task_81879_iter;
    int64_t futhark_mc_segscan_task_81879_total_time;
    int64_t futhark_mc_segscan_task_81879_total_iter;
    int64_t *futhark_mc_segmap_parloop_81888_total_runtime;
    int *futhark_mc_segmap_parloop_81888_runs;
    int64_t *futhark_mc_segmap_parloop_81888_iter;
    int64_t futhark_mc_segmap_parloop_81888_total_total_runtime;
    int futhark_mc_segmap_parloop_81888_total_runs;
    int64_t futhark_mc_segmap_parloop_81888_total_iter;
    int64_t *futhark_mc_segmap_task_81886_total_runtime;
    int *futhark_mc_segmap_task_81886_runs;
    int64_t *futhark_mc_segmap_task_81886_iter;
    int64_t futhark_mc_segmap_task_81886_total_time;
    int64_t futhark_mc_segmap_task_81886_total_iter;
    int64_t *futhark_mc_segmap_parloop_81892_total_runtime;
    int *futhark_mc_segmap_parloop_81892_runs;
    int64_t *futhark_mc_segmap_parloop_81892_iter;
    int64_t futhark_mc_segmap_parloop_81892_total_total_runtime;
    int futhark_mc_segmap_parloop_81892_total_runs;
    int64_t futhark_mc_segmap_parloop_81892_total_iter;
    int64_t *futhark_mc_segmap_task_81890_total_runtime;
    int *futhark_mc_segmap_task_81890_runs;
    int64_t *futhark_mc_segmap_task_81890_iter;
    int64_t futhark_mc_segmap_task_81890_total_time;
    int64_t futhark_mc_segmap_task_81890_total_iter;
    int64_t *futhark_mc_segmap_parloop_81896_total_runtime;
    int *futhark_mc_segmap_parloop_81896_runs;
    int64_t *futhark_mc_segmap_parloop_81896_iter;
    int64_t futhark_mc_segmap_parloop_81896_total_total_runtime;
    int futhark_mc_segmap_parloop_81896_total_runs;
    int64_t futhark_mc_segmap_parloop_81896_total_iter;
    int64_t *futhark_mc_segmap_task_81894_total_runtime;
    int *futhark_mc_segmap_task_81894_runs;
    int64_t *futhark_mc_segmap_task_81894_iter;
    int64_t futhark_mc_segmap_task_81894_total_time;
    int64_t futhark_mc_segmap_task_81894_total_iter;
    int64_t *futhark_mc_segmap_parloop_81900_total_runtime;
    int *futhark_mc_segmap_parloop_81900_runs;
    int64_t *futhark_mc_segmap_parloop_81900_iter;
    int64_t futhark_mc_segmap_parloop_81900_total_total_runtime;
    int futhark_mc_segmap_parloop_81900_total_runs;
    int64_t futhark_mc_segmap_parloop_81900_total_iter;
    int64_t *futhark_mc_segmap_task_81898_total_runtime;
    int *futhark_mc_segmap_task_81898_runs;
    int64_t *futhark_mc_segmap_task_81898_iter;
    int64_t futhark_mc_segmap_task_81898_total_time;
    int64_t futhark_mc_segmap_task_81898_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81910_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81910_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81910_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81910_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81910_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81910_total_iter;
    int64_t *futhark_mc_segred_task_81907_total_runtime;
    int *futhark_mc_segred_task_81907_runs;
    int64_t *futhark_mc_segred_task_81907_iter;
    int64_t futhark_mc_segred_task_81907_total_time;
    int64_t futhark_mc_segred_task_81907_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81915_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81915_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81915_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81915_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81915_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81915_total_iter;
    int64_t *futhark_mc_segred_task_81912_total_runtime;
    int *futhark_mc_segred_task_81912_runs;
    int64_t *futhark_mc_segred_task_81912_iter;
    int64_t futhark_mc_segred_task_81912_total_time;
    int64_t futhark_mc_segred_task_81912_total_iter;
    int64_t *futhark_mc_segmap_parloop_81904_total_runtime;
    int *futhark_mc_segmap_parloop_81904_runs;
    int64_t *futhark_mc_segmap_parloop_81904_iter;
    int64_t futhark_mc_segmap_parloop_81904_total_total_runtime;
    int futhark_mc_segmap_parloop_81904_total_runs;
    int64_t futhark_mc_segmap_parloop_81904_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81902_total_runtime;
    int *futhark_mc_segmap_nested_task_81902_runs;
    int64_t *futhark_mc_segmap_nested_task_81902_iter;
    int64_t *futhark_mc_segmap_parloop_81871_total_runtime;
    int *futhark_mc_segmap_parloop_81871_runs;
    int64_t *futhark_mc_segmap_parloop_81871_iter;
    int64_t futhark_mc_segmap_parloop_81871_total_total_runtime;
    int futhark_mc_segmap_parloop_81871_total_runs;
    int64_t futhark_mc_segmap_parloop_81871_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81869_total_runtime;
    int *futhark_mc_segmap_nested_task_81869_runs;
    int64_t *futhark_mc_segmap_nested_task_81869_iter;
    int64_t *futhark_mc_segmap_parloop_81919_total_runtime;
    int *futhark_mc_segmap_parloop_81919_runs;
    int64_t *futhark_mc_segmap_parloop_81919_iter;
    int64_t futhark_mc_segmap_parloop_81919_total_total_runtime;
    int futhark_mc_segmap_parloop_81919_total_runs;
    int64_t futhark_mc_segmap_parloop_81919_total_iter;
    int64_t *futhark_mc_segmap_task_81917_total_runtime;
    int *futhark_mc_segmap_task_81917_runs;
    int64_t *futhark_mc_segmap_task_81917_iter;
    int64_t futhark_mc_segmap_task_81917_total_time;
    int64_t futhark_mc_segmap_task_81917_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_81943_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_81943_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_81943_iter;
    int64_t futhark_mc_scan_stage_1_parloop_81943_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_81943_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_81943_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_81945_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_81945_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_81945_iter;
    int64_t futhark_mc_scan_stage_3_parloop_81945_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_81945_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_81945_total_iter;
    int64_t *futhark_mc_segscan_task_81940_total_runtime;
    int *futhark_mc_segscan_task_81940_runs;
    int64_t *futhark_mc_segscan_task_81940_iter;
    int64_t futhark_mc_segscan_task_81940_total_time;
    int64_t futhark_mc_segscan_task_81940_total_iter;
    int64_t *futhark_mc_segmap_parloop_81949_total_runtime;
    int *futhark_mc_segmap_parloop_81949_runs;
    int64_t *futhark_mc_segmap_parloop_81949_iter;
    int64_t futhark_mc_segmap_parloop_81949_total_total_runtime;
    int futhark_mc_segmap_parloop_81949_total_runs;
    int64_t futhark_mc_segmap_parloop_81949_total_iter;
    int64_t *futhark_mc_segmap_task_81947_total_runtime;
    int *futhark_mc_segmap_task_81947_runs;
    int64_t *futhark_mc_segmap_task_81947_iter;
    int64_t futhark_mc_segmap_task_81947_total_time;
    int64_t futhark_mc_segmap_task_81947_total_iter;
    int64_t *futhark_mc_segmap_parloop_81953_total_runtime;
    int *futhark_mc_segmap_parloop_81953_runs;
    int64_t *futhark_mc_segmap_parloop_81953_iter;
    int64_t futhark_mc_segmap_parloop_81953_total_total_runtime;
    int futhark_mc_segmap_parloop_81953_total_runs;
    int64_t futhark_mc_segmap_parloop_81953_total_iter;
    int64_t *futhark_mc_segmap_task_81951_total_runtime;
    int *futhark_mc_segmap_task_81951_runs;
    int64_t *futhark_mc_segmap_task_81951_iter;
    int64_t futhark_mc_segmap_task_81951_total_time;
    int64_t futhark_mc_segmap_task_81951_total_iter;
    int64_t *futhark_mc_segmap_parloop_81957_total_runtime;
    int *futhark_mc_segmap_parloop_81957_runs;
    int64_t *futhark_mc_segmap_parloop_81957_iter;
    int64_t futhark_mc_segmap_parloop_81957_total_total_runtime;
    int futhark_mc_segmap_parloop_81957_total_runs;
    int64_t futhark_mc_segmap_parloop_81957_total_iter;
    int64_t *futhark_mc_segmap_task_81955_total_runtime;
    int *futhark_mc_segmap_task_81955_runs;
    int64_t *futhark_mc_segmap_task_81955_iter;
    int64_t futhark_mc_segmap_task_81955_total_time;
    int64_t futhark_mc_segmap_task_81955_total_iter;
    int64_t *futhark_mc_segmap_parloop_81961_total_runtime;
    int *futhark_mc_segmap_parloop_81961_runs;
    int64_t *futhark_mc_segmap_parloop_81961_iter;
    int64_t futhark_mc_segmap_parloop_81961_total_total_runtime;
    int futhark_mc_segmap_parloop_81961_total_runs;
    int64_t futhark_mc_segmap_parloop_81961_total_iter;
    int64_t *futhark_mc_segmap_task_81959_total_runtime;
    int *futhark_mc_segmap_task_81959_runs;
    int64_t *futhark_mc_segmap_task_81959_iter;
    int64_t futhark_mc_segmap_task_81959_total_time;
    int64_t futhark_mc_segmap_task_81959_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81975_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81975_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81975_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81975_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81975_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81975_total_iter;
    int64_t *futhark_mc_segred_task_81970_total_runtime;
    int *futhark_mc_segred_task_81970_runs;
    int64_t *futhark_mc_segred_task_81970_iter;
    int64_t futhark_mc_segred_task_81970_total_time;
    int64_t futhark_mc_segred_task_81970_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_81981_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_81981_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_81981_iter;
    int64_t futhark_mc_segred_stage_1_parloop_81981_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_81981_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_81981_total_iter;
    int64_t *futhark_mc_segred_task_81977_total_runtime;
    int *futhark_mc_segred_task_81977_runs;
    int64_t *futhark_mc_segred_task_81977_iter;
    int64_t futhark_mc_segred_task_81977_total_time;
    int64_t futhark_mc_segred_task_81977_total_iter;
    int64_t *futhark_mc_segmap_parloop_81966_total_runtime;
    int *futhark_mc_segmap_parloop_81966_runs;
    int64_t *futhark_mc_segmap_parloop_81966_iter;
    int64_t futhark_mc_segmap_parloop_81966_total_total_runtime;
    int futhark_mc_segmap_parloop_81966_total_runs;
    int64_t futhark_mc_segmap_parloop_81966_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81964_total_runtime;
    int *futhark_mc_segmap_nested_task_81964_runs;
    int64_t *futhark_mc_segmap_nested_task_81964_iter;
    int64_t *futhark_mc_segmap_parloop_81931_total_runtime;
    int *futhark_mc_segmap_parloop_81931_runs;
    int64_t *futhark_mc_segmap_parloop_81931_iter;
    int64_t futhark_mc_segmap_parloop_81931_total_total_runtime;
    int futhark_mc_segmap_parloop_81931_total_runs;
    int64_t futhark_mc_segmap_parloop_81931_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81929_total_runtime;
    int *futhark_mc_segmap_nested_task_81929_runs;
    int64_t *futhark_mc_segmap_nested_task_81929_iter;
    int64_t *futhark_mc_segmap_parloop_81985_total_runtime;
    int *futhark_mc_segmap_parloop_81985_runs;
    int64_t *futhark_mc_segmap_parloop_81985_iter;
    int64_t futhark_mc_segmap_parloop_81985_total_total_runtime;
    int futhark_mc_segmap_parloop_81985_total_runs;
    int64_t futhark_mc_segmap_parloop_81985_total_iter;
    int64_t *futhark_mc_segmap_task_81983_total_runtime;
    int *futhark_mc_segmap_task_81983_runs;
    int64_t *futhark_mc_segmap_task_81983_iter;
    int64_t futhark_mc_segmap_task_81983_total_time;
    int64_t futhark_mc_segmap_task_81983_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_82011_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_82011_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_82011_iter;
    int64_t futhark_mc_scan_stage_1_parloop_82011_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_82011_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_82011_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_82013_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_82013_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_82013_iter;
    int64_t futhark_mc_scan_stage_3_parloop_82013_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_82013_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_82013_total_iter;
    int64_t *futhark_mc_segscan_task_82008_total_runtime;
    int *futhark_mc_segscan_task_82008_runs;
    int64_t *futhark_mc_segscan_task_82008_iter;
    int64_t futhark_mc_segscan_task_82008_total_time;
    int64_t futhark_mc_segscan_task_82008_total_iter;
    int64_t *futhark_mc_segmap_parloop_82017_total_runtime;
    int *futhark_mc_segmap_parloop_82017_runs;
    int64_t *futhark_mc_segmap_parloop_82017_iter;
    int64_t futhark_mc_segmap_parloop_82017_total_total_runtime;
    int futhark_mc_segmap_parloop_82017_total_runs;
    int64_t futhark_mc_segmap_parloop_82017_total_iter;
    int64_t *futhark_mc_segmap_task_82015_total_runtime;
    int *futhark_mc_segmap_task_82015_runs;
    int64_t *futhark_mc_segmap_task_82015_iter;
    int64_t futhark_mc_segmap_task_82015_total_time;
    int64_t futhark_mc_segmap_task_82015_total_iter;
    int64_t *futhark_mc_segmap_parloop_82021_total_runtime;
    int *futhark_mc_segmap_parloop_82021_runs;
    int64_t *futhark_mc_segmap_parloop_82021_iter;
    int64_t futhark_mc_segmap_parloop_82021_total_total_runtime;
    int futhark_mc_segmap_parloop_82021_total_runs;
    int64_t futhark_mc_segmap_parloop_82021_total_iter;
    int64_t *futhark_mc_segmap_task_82019_total_runtime;
    int *futhark_mc_segmap_task_82019_runs;
    int64_t *futhark_mc_segmap_task_82019_iter;
    int64_t futhark_mc_segmap_task_82019_total_time;
    int64_t futhark_mc_segmap_task_82019_total_iter;
    int64_t *futhark_mc_segmap_parloop_82025_total_runtime;
    int *futhark_mc_segmap_parloop_82025_runs;
    int64_t *futhark_mc_segmap_parloop_82025_iter;
    int64_t futhark_mc_segmap_parloop_82025_total_total_runtime;
    int futhark_mc_segmap_parloop_82025_total_runs;
    int64_t futhark_mc_segmap_parloop_82025_total_iter;
    int64_t *futhark_mc_segmap_task_82023_total_runtime;
    int *futhark_mc_segmap_task_82023_runs;
    int64_t *futhark_mc_segmap_task_82023_iter;
    int64_t futhark_mc_segmap_task_82023_total_time;
    int64_t futhark_mc_segmap_task_82023_total_iter;
    int64_t *futhark_mc_segmap_parloop_82029_total_runtime;
    int *futhark_mc_segmap_parloop_82029_runs;
    int64_t *futhark_mc_segmap_parloop_82029_iter;
    int64_t futhark_mc_segmap_parloop_82029_total_total_runtime;
    int futhark_mc_segmap_parloop_82029_total_runs;
    int64_t futhark_mc_segmap_parloop_82029_total_iter;
    int64_t *futhark_mc_segmap_task_82027_total_runtime;
    int *futhark_mc_segmap_task_82027_runs;
    int64_t *futhark_mc_segmap_task_82027_iter;
    int64_t futhark_mc_segmap_task_82027_total_time;
    int64_t futhark_mc_segmap_task_82027_total_iter;
    int64_t *futhark_mc_segmap_parloop_82044_total_runtime;
    int *futhark_mc_segmap_parloop_82044_runs;
    int64_t *futhark_mc_segmap_parloop_82044_iter;
    int64_t futhark_mc_segmap_parloop_82044_total_total_runtime;
    int futhark_mc_segmap_parloop_82044_total_runs;
    int64_t futhark_mc_segmap_parloop_82044_total_iter;
    int64_t *futhark_mc_segmap_task_82042_total_runtime;
    int *futhark_mc_segmap_task_82042_runs;
    int64_t *futhark_mc_segmap_task_82042_iter;
    int64_t futhark_mc_segmap_task_82042_total_time;
    int64_t futhark_mc_segmap_task_82042_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_82053_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_82053_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_82053_iter;
    int64_t futhark_mc_segred_stage_1_parloop_82053_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_82053_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_82053_total_iter;
    int64_t *futhark_mc_segred_task_82046_total_runtime;
    int *futhark_mc_segred_task_82046_runs;
    int64_t *futhark_mc_segred_task_82046_iter;
    int64_t futhark_mc_segred_task_82046_total_time;
    int64_t futhark_mc_segred_task_82046_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_82059_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_82059_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_82059_iter;
    int64_t futhark_mc_segred_stage_1_parloop_82059_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_82059_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_82059_total_iter;
    int64_t *futhark_mc_segred_task_82055_total_runtime;
    int *futhark_mc_segred_task_82055_runs;
    int64_t *futhark_mc_segred_task_82055_iter;
    int64_t futhark_mc_segred_task_82055_total_time;
    int64_t futhark_mc_segred_task_82055_total_iter;
    int64_t *futhark_mc_segmap_parloop_82036_total_runtime;
    int *futhark_mc_segmap_parloop_82036_runs;
    int64_t *futhark_mc_segmap_parloop_82036_iter;
    int64_t futhark_mc_segmap_parloop_82036_total_total_runtime;
    int futhark_mc_segmap_parloop_82036_total_runs;
    int64_t futhark_mc_segmap_parloop_82036_total_iter;
    int64_t *futhark_mc_segmap_nested_task_82034_total_runtime;
    int *futhark_mc_segmap_nested_task_82034_runs;
    int64_t *futhark_mc_segmap_nested_task_82034_iter;
    int64_t *futhark_mc_segmap_parloop_81999_total_runtime;
    int *futhark_mc_segmap_parloop_81999_runs;
    int64_t *futhark_mc_segmap_parloop_81999_iter;
    int64_t futhark_mc_segmap_parloop_81999_total_total_runtime;
    int futhark_mc_segmap_parloop_81999_total_runs;
    int64_t futhark_mc_segmap_parloop_81999_total_iter;
    int64_t *futhark_mc_segmap_nested_task_81997_total_runtime;
    int *futhark_mc_segmap_nested_task_81997_runs;
    int64_t *futhark_mc_segmap_nested_task_81997_iter;
    int64_t *futhark_mc_segmap_parloop_82063_total_runtime;
    int *futhark_mc_segmap_parloop_82063_runs;
    int64_t *futhark_mc_segmap_parloop_82063_iter;
    int64_t futhark_mc_segmap_parloop_82063_total_total_runtime;
    int futhark_mc_segmap_parloop_82063_total_runs;
    int64_t futhark_mc_segmap_parloop_82063_total_iter;
    int64_t *futhark_mc_segmap_task_82061_total_runtime;
    int *futhark_mc_segmap_task_82061_runs;
    int64_t *futhark_mc_segmap_task_82061_iter;
    int64_t futhark_mc_segmap_task_82061_total_time;
    int64_t futhark_mc_segmap_task_82061_total_iter;
    int64_t *futhark_mc_segmap_parloop_82072_total_runtime;
    int *futhark_mc_segmap_parloop_82072_runs;
    int64_t *futhark_mc_segmap_parloop_82072_iter;
    int64_t futhark_mc_segmap_parloop_82072_total_total_runtime;
    int futhark_mc_segmap_parloop_82072_total_runs;
    int64_t futhark_mc_segmap_parloop_82072_total_iter;
    int64_t *futhark_mc_segmap_task_82070_total_runtime;
    int *futhark_mc_segmap_task_82070_runs;
    int64_t *futhark_mc_segmap_task_82070_iter;
    int64_t futhark_mc_segmap_task_82070_total_time;
    int64_t futhark_mc_segmap_task_82070_total_iter;
    int64_t *futhark_mc_segmap_parloop_82067_total_runtime;
    int *futhark_mc_segmap_parloop_82067_runs;
    int64_t *futhark_mc_segmap_parloop_82067_iter;
    int64_t futhark_mc_segmap_parloop_82067_total_total_runtime;
    int futhark_mc_segmap_parloop_82067_total_runs;
    int64_t futhark_mc_segmap_parloop_82067_total_iter;
    int64_t *futhark_mc_segmap_nested_task_82065_total_runtime;
    int *futhark_mc_segmap_nested_task_82065_runs;
    int64_t *futhark_mc_segmap_nested_task_82065_iter;
    int64_t tuning_timing;
    int64_t tuning_iter;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    fast_srand(time(0));
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->profiling;
    ctx->profiling_paused = 0;
    ctx->logging = 0;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    
    int tune_kappa = 0;
    double kappa = 5.1f * 1000;
    
    if (tune_kappa) {
        if (determine_kappa(&kappa) != 0)
            return NULL;
    }
    if (scheduler_init(&ctx->scheduler, cfg->num_threads >
                       0 ? cfg->num_threads : num_processors(), kappa) != 0)
        return NULL;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->futhark_mc_segmap_parloop_81684_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81684_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81684_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81684_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81684_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81684_total_iter = 0;
    ctx->futhark_mc_segmap_task_81682_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81682_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81682_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81682_total_time = 0;
    ctx->futhark_mc_segmap_task_81682_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81704_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81704_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81704_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81704_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81704_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81704_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81706_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81706_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81706_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81706_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81706_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81706_total_iter = 0;
    ctx->futhark_mc_segscan_task_81701_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81701_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81701_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81701_total_time = 0;
    ctx->futhark_mc_segscan_task_81701_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81710_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81710_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81710_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81710_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81710_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81710_total_iter = 0;
    ctx->futhark_mc_segmap_task_81708_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81708_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81708_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81708_total_time = 0;
    ctx->futhark_mc_segmap_task_81708_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81714_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81714_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81714_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81714_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81714_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81714_total_iter = 0;
    ctx->futhark_mc_segmap_task_81712_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81712_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81712_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81712_total_time = 0;
    ctx->futhark_mc_segmap_task_81712_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81718_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81718_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81718_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81718_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81718_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81718_total_iter = 0;
    ctx->futhark_mc_segmap_task_81716_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81716_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81716_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81716_total_time = 0;
    ctx->futhark_mc_segmap_task_81716_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81722_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81722_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81722_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81722_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81722_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81722_total_iter = 0;
    ctx->futhark_mc_segmap_task_81720_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81720_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81720_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81720_total_time = 0;
    ctx->futhark_mc_segmap_task_81720_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81730_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81730_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81730_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81730_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81730_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81730_total_iter = 0;
    ctx->futhark_mc_segred_task_81727_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81727_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81727_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81727_total_time = 0;
    ctx->futhark_mc_segred_task_81727_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81735_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81735_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81735_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81735_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81735_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81735_total_iter = 0;
    ctx->futhark_mc_segred_task_81732_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81732_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81732_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81732_total_time = 0;
    ctx->futhark_mc_segred_task_81732_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81725_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81725_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81725_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81725_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81725_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81725_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81723_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81723_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81723_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81693_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81693_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81693_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81693_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81693_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81693_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81691_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81691_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81691_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81739_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81739_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81739_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81739_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81739_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81739_total_iter = 0;
    ctx->futhark_mc_segmap_task_81737_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81737_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81737_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81737_total_time = 0;
    ctx->futhark_mc_segmap_task_81737_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81761_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81761_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81761_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81761_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81761_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81761_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81763_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81763_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81763_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81763_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81763_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81763_total_iter = 0;
    ctx->futhark_mc_segscan_task_81758_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81758_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81758_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81758_total_time = 0;
    ctx->futhark_mc_segscan_task_81758_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81767_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81767_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81767_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81767_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81767_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81767_total_iter = 0;
    ctx->futhark_mc_segmap_task_81765_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81765_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81765_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81765_total_time = 0;
    ctx->futhark_mc_segmap_task_81765_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81771_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81771_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81771_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81771_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81771_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81771_total_iter = 0;
    ctx->futhark_mc_segmap_task_81769_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81769_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81769_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81769_total_time = 0;
    ctx->futhark_mc_segmap_task_81769_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81775_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81775_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81775_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81775_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81775_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81775_total_iter = 0;
    ctx->futhark_mc_segmap_task_81773_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81773_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81773_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81773_total_time = 0;
    ctx->futhark_mc_segmap_task_81773_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81779_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81779_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81779_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81779_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81779_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81779_total_iter = 0;
    ctx->futhark_mc_segmap_task_81777_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81777_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81777_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81777_total_time = 0;
    ctx->futhark_mc_segmap_task_81777_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81789_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81789_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81789_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81789_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81789_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81789_total_iter = 0;
    ctx->futhark_mc_segred_task_81784_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81784_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81784_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81784_total_time = 0;
    ctx->futhark_mc_segred_task_81784_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81795_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81795_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81795_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81795_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81795_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81795_total_iter = 0;
    ctx->futhark_mc_segred_task_81791_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81791_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81791_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81791_total_time = 0;
    ctx->futhark_mc_segred_task_81791_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81782_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81782_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81782_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81782_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81782_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81782_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81780_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81780_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81780_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81749_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81749_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81749_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81749_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81749_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81749_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81747_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81747_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81747_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81799_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81799_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81799_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81799_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81799_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81799_total_iter = 0;
    ctx->futhark_mc_segmap_task_81797_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81797_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81797_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81797_total_time = 0;
    ctx->futhark_mc_segmap_task_81797_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81821_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81821_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81821_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81821_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81821_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81821_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81823_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81823_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81823_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81823_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81823_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81823_total_iter = 0;
    ctx->futhark_mc_segscan_task_81818_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81818_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81818_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81818_total_time = 0;
    ctx->futhark_mc_segscan_task_81818_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81827_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81827_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81827_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81827_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81827_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81827_total_iter = 0;
    ctx->futhark_mc_segmap_task_81825_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81825_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81825_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81825_total_time = 0;
    ctx->futhark_mc_segmap_task_81825_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81831_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81831_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81831_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81831_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81831_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81831_total_iter = 0;
    ctx->futhark_mc_segmap_task_81829_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81829_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81829_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81829_total_time = 0;
    ctx->futhark_mc_segmap_task_81829_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81835_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81835_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81835_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81835_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81835_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81835_total_iter = 0;
    ctx->futhark_mc_segmap_task_81833_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81833_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81833_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81833_total_time = 0;
    ctx->futhark_mc_segmap_task_81833_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81839_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81839_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81839_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81839_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81839_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81839_total_iter = 0;
    ctx->futhark_mc_segmap_task_81837_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81837_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81837_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81837_total_time = 0;
    ctx->futhark_mc_segmap_task_81837_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81851_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81851_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81851_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81851_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81851_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81851_total_iter = 0;
    ctx->futhark_mc_segred_task_81844_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81844_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81844_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81844_total_time = 0;
    ctx->futhark_mc_segred_task_81844_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81857_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81857_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81857_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81857_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81857_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81857_total_iter = 0;
    ctx->futhark_mc_segred_task_81853_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81853_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81853_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81853_total_time = 0;
    ctx->futhark_mc_segred_task_81853_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81842_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81842_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81842_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81842_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81842_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81842_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81840_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81840_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81840_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81809_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81809_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81809_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81809_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81809_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81809_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81807_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81807_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81807_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81861_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81861_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81861_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81861_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81861_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81861_total_iter = 0;
    ctx->futhark_mc_segmap_task_81859_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81859_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81859_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81859_total_time = 0;
    ctx->futhark_mc_segmap_task_81859_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81882_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81882_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81882_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81882_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81882_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81882_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81884_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81884_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81884_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81884_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81884_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81884_total_iter = 0;
    ctx->futhark_mc_segscan_task_81879_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81879_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81879_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81879_total_time = 0;
    ctx->futhark_mc_segscan_task_81879_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81888_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81888_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81888_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81888_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81888_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81888_total_iter = 0;
    ctx->futhark_mc_segmap_task_81886_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81886_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81886_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81886_total_time = 0;
    ctx->futhark_mc_segmap_task_81886_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81892_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81892_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81892_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81892_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81892_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81892_total_iter = 0;
    ctx->futhark_mc_segmap_task_81890_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81890_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81890_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81890_total_time = 0;
    ctx->futhark_mc_segmap_task_81890_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81896_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81896_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81896_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81896_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81896_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81896_total_iter = 0;
    ctx->futhark_mc_segmap_task_81894_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81894_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81894_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81894_total_time = 0;
    ctx->futhark_mc_segmap_task_81894_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81900_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81900_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81900_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81900_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81900_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81900_total_iter = 0;
    ctx->futhark_mc_segmap_task_81898_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81898_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81898_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81898_total_time = 0;
    ctx->futhark_mc_segmap_task_81898_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81910_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81910_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81910_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81910_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81910_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81910_total_iter = 0;
    ctx->futhark_mc_segred_task_81907_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81907_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81907_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81907_total_time = 0;
    ctx->futhark_mc_segred_task_81907_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81915_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81915_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81915_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81915_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81915_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81915_total_iter = 0;
    ctx->futhark_mc_segred_task_81912_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81912_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81912_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81912_total_time = 0;
    ctx->futhark_mc_segred_task_81912_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81904_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81904_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81904_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81904_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81904_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81904_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81902_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81902_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81902_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81871_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81871_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81871_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81871_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81871_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81871_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81869_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81869_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81869_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81919_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81919_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81919_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81919_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81919_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81919_total_iter = 0;
    ctx->futhark_mc_segmap_task_81917_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81917_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81917_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81917_total_time = 0;
    ctx->futhark_mc_segmap_task_81917_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81943_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81943_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81943_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_81943_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81943_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_81943_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81945_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81945_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81945_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_81945_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81945_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_81945_total_iter = 0;
    ctx->futhark_mc_segscan_task_81940_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81940_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81940_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_81940_total_time = 0;
    ctx->futhark_mc_segscan_task_81940_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81949_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81949_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81949_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81949_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81949_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81949_total_iter = 0;
    ctx->futhark_mc_segmap_task_81947_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81947_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81947_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81947_total_time = 0;
    ctx->futhark_mc_segmap_task_81947_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81953_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81953_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81953_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81953_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81953_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81953_total_iter = 0;
    ctx->futhark_mc_segmap_task_81951_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81951_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81951_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81951_total_time = 0;
    ctx->futhark_mc_segmap_task_81951_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81957_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81957_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81957_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81957_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81957_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81957_total_iter = 0;
    ctx->futhark_mc_segmap_task_81955_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81955_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81955_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81955_total_time = 0;
    ctx->futhark_mc_segmap_task_81955_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81961_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81961_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81961_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81961_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81961_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81961_total_iter = 0;
    ctx->futhark_mc_segmap_task_81959_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81959_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81959_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81959_total_time = 0;
    ctx->futhark_mc_segmap_task_81959_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81975_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81975_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81975_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81975_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81975_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81975_total_iter = 0;
    ctx->futhark_mc_segred_task_81970_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81970_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81970_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81970_total_time = 0;
    ctx->futhark_mc_segred_task_81970_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81981_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81981_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81981_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_81981_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81981_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_81981_total_iter = 0;
    ctx->futhark_mc_segred_task_81977_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81977_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81977_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_81977_total_time = 0;
    ctx->futhark_mc_segred_task_81977_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_81966_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81966_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81966_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81966_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81966_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81966_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81964_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81964_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81964_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81931_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81931_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81931_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81931_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81931_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81931_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81929_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81929_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81929_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81985_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81985_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81985_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81985_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81985_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81985_total_iter = 0;
    ctx->futhark_mc_segmap_task_81983_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81983_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81983_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_81983_total_time = 0;
    ctx->futhark_mc_segmap_task_81983_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_82011_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_82011_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_82011_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_82011_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_82011_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_82011_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_82013_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_82013_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_82013_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_82013_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_82013_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_82013_total_iter = 0;
    ctx->futhark_mc_segscan_task_82008_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_82008_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_82008_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_82008_total_time = 0;
    ctx->futhark_mc_segscan_task_82008_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_82017_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82017_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82017_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82017_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_82017_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_82017_total_iter = 0;
    ctx->futhark_mc_segmap_task_82015_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82015_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82015_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82015_total_time = 0;
    ctx->futhark_mc_segmap_task_82015_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_82021_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82021_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82021_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82021_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_82021_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_82021_total_iter = 0;
    ctx->futhark_mc_segmap_task_82019_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82019_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82019_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82019_total_time = 0;
    ctx->futhark_mc_segmap_task_82019_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_82025_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82025_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82025_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82025_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_82025_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_82025_total_iter = 0;
    ctx->futhark_mc_segmap_task_82023_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82023_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82023_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82023_total_time = 0;
    ctx->futhark_mc_segmap_task_82023_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_82029_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82029_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82029_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82029_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_82029_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_82029_total_iter = 0;
    ctx->futhark_mc_segmap_task_82027_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82027_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82027_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82027_total_time = 0;
    ctx->futhark_mc_segmap_task_82027_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_82044_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82044_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82044_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82044_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_82044_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_82044_total_iter = 0;
    ctx->futhark_mc_segmap_task_82042_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82042_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82042_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82042_total_time = 0;
    ctx->futhark_mc_segmap_task_82042_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_82053_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_82053_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_82053_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_82053_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_82053_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_82053_total_iter = 0;
    ctx->futhark_mc_segred_task_82046_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_82046_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_82046_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_82046_total_time = 0;
    ctx->futhark_mc_segred_task_82046_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_82059_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_82059_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_82059_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_82059_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_82059_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_82059_total_iter = 0;
    ctx->futhark_mc_segred_task_82055_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_82055_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_82055_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_82055_total_time = 0;
    ctx->futhark_mc_segred_task_82055_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_82036_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82036_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82036_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82036_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_82036_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_82036_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_82034_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_82034_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_82034_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81999_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81999_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81999_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_81999_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_81999_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_81999_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_81997_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81997_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_81997_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82063_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82063_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82063_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82063_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_82063_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_82063_total_iter = 0;
    ctx->futhark_mc_segmap_task_82061_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82061_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82061_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82061_total_time = 0;
    ctx->futhark_mc_segmap_task_82061_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_82072_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82072_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82072_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82072_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_82072_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_82072_total_iter = 0;
    ctx->futhark_mc_segmap_task_82070_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82070_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82070_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_82070_total_time = 0;
    ctx->futhark_mc_segmap_task_82070_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_82067_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82067_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82067_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_82067_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_82067_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_82067_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_82065_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_82065_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_82065_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    (void) scheduler_destroy(&ctx->scheduler);
    free_lock(&ctx->lock);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *size_names[0];
static const char *size_vars[0];
static const char *size_classes[0];
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    (void) cfg;
    (void) size_name;
    (void) size_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (unsigned char *) malloc((size_t) size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_num_sizes(void)
{
    return sizeof(size_names) / sizeof(size_names[0]);
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) {
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81684          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81684_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81684_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81684_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81684_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81684_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81684_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81684_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81684_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81684_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81684_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81684_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81684_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81684_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81684_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81684_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81684_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81684_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81684_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81684_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81684_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81684_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81684_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81684_total_iter /
                (ctx->futhark_mc_segmap_parloop_81684_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81684_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81684_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81684_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_81704    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_81704_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81704_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81704_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81704_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81704_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_81704_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81704_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81704_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81704_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81704_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81704_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81704_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_81704_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_81704_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81704_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81704_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81704_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81704_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_81704_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81704_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81704_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81704_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81704_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_81704_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81704_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_81704_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_81704_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_81706    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_81706_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81706_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81706_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81706_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81706_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_81706_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81706_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81706_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81706_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81706_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81706_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81706_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_81706_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_81706_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81706_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81706_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81706_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81706_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_81706_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81706_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81706_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81706_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81706_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_81706_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81706_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_81706_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_81706_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_81701            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_81701_runs[i],
                    (long) ctx->futhark_mc_segscan_task_81701_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81701_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81701_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_81701_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_81701_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81701_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_81701_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_81701_iter[i],
                    (long) ctx->futhark_mc_segscan_task_81701_iter[i] /
                    (ctx->futhark_mc_segscan_task_81701_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81701_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81710          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81710_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81710_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81710_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81710_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81710_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81710_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81710_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81710_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81710_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81710_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81710_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81710_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81710_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81710_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81710_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81710_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81710_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81710_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81710_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81710_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81710_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81710_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81710_total_iter /
                (ctx->futhark_mc_segmap_parloop_81710_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81710_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81710_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81710_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81708             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81708_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81708_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81708_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81708_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81708_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81708_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81708_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81708_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81708_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81708_iter[i] /
                    (ctx->futhark_mc_segmap_task_81708_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81708_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81714          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81714_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81714_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81714_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81714_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81714_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81714_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81714_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81714_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81714_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81714_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81714_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81714_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81714_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81714_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81714_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81714_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81714_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81714_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81714_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81714_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81714_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81714_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81714_total_iter /
                (ctx->futhark_mc_segmap_parloop_81714_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81714_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81714_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81714_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81712             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81712_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81712_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81712_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81712_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81712_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81712_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81712_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81712_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81712_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81712_iter[i] /
                    (ctx->futhark_mc_segmap_task_81712_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81712_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81718          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81718_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81718_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81718_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81718_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81718_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81718_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81718_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81718_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81718_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81718_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81718_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81718_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81718_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81718_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81718_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81718_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81718_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81718_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81718_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81718_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81718_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81718_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81718_total_iter /
                (ctx->futhark_mc_segmap_parloop_81718_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81718_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81718_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81718_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81716             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81716_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81716_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81716_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81716_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81716_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81716_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81716_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81716_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81716_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81716_iter[i] /
                    (ctx->futhark_mc_segmap_task_81716_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81716_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81722          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81722_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81722_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81722_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81722_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81722_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81722_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81722_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81722_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81722_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81722_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81722_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81722_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81722_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81722_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81722_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81722_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81722_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81722_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81722_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81722_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81722_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81722_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81722_total_iter /
                (ctx->futhark_mc_segmap_parloop_81722_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81722_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81722_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81722_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81730  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81730_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81730_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81730_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81730_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81730_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81730_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81730_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81730_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81730_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81730_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81730_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81730_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81730_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81730_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81730_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81730_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81730_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81730_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81730_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81730_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81730_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81730_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81730_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81730_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81730_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81730_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81730_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81727             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81727_runs[i],
                    (long) ctx->futhark_mc_segred_task_81727_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81727_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81727_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81727_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81727_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81727_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81727_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81727_iter[i],
                    (long) ctx->futhark_mc_segred_task_81727_iter[i] /
                    (ctx->futhark_mc_segred_task_81727_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81727_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81735  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81735_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81735_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81735_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81735_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81735_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81735_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81735_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81735_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81735_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81735_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81735_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81735_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81735_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81735_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81735_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81735_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81735_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81735_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81735_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81735_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81735_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81735_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81735_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81735_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81735_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81735_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81735_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81732             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81732_runs[i],
                    (long) ctx->futhark_mc_segred_task_81732_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81732_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81732_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81732_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81732_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81732_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81732_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81732_iter[i],
                    (long) ctx->futhark_mc_segred_task_81732_iter[i] /
                    (ctx->futhark_mc_segred_task_81732_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81732_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81725          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81725_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81725_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81725_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81725_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81725_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81725_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81725_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81725_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81725_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81725_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81725_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81725_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81725_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81725_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81725_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81725_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81725_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81725_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81725_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81725_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81725_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81725_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81725_total_iter /
                (ctx->futhark_mc_segmap_parloop_81725_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81725_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81725_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81725_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81720             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81720_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81720_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81720_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81720_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81720_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81720_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81720_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81720_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81720_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81720_iter[i] /
                    (ctx->futhark_mc_segmap_task_81720_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81720_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81723      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81723_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81723_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81723_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81723_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81723_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81723_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81723_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81723_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81723_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81723_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81723_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81723_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81693          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81693_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81693_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81693_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81693_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81693_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81693_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81693_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81693_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81693_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81693_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81693_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81693_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81693_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81693_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81693_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81693_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81693_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81693_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81693_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81693_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81693_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81693_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81693_total_iter /
                (ctx->futhark_mc_segmap_parloop_81693_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81693_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81693_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81693_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81682             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81682_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81682_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81682_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81682_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81682_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81682_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81682_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81682_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81682_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81682_iter[i] /
                    (ctx->futhark_mc_segmap_task_81682_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81682_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81691      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81691_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81691_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81691_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81691_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81691_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81691_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81691_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81691_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81691_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81691_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81691_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81691_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81739          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81739_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81739_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81739_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81739_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81739_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81739_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81739_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81739_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81739_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81739_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81739_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81739_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81739_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81739_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81739_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81739_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81739_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81739_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81739_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81739_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81739_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81739_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81739_total_iter /
                (ctx->futhark_mc_segmap_parloop_81739_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81739_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81739_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81739_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_81761    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_81761_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81761_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81761_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81761_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81761_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_81761_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81761_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81761_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81761_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81761_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81761_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81761_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_81761_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_81761_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81761_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81761_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81761_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81761_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_81761_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81761_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81761_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81761_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81761_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_81761_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81761_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_81761_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_81761_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_81763    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_81763_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81763_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81763_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81763_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81763_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_81763_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81763_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81763_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81763_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81763_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81763_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81763_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_81763_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_81763_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81763_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81763_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81763_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81763_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_81763_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81763_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81763_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81763_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81763_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_81763_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81763_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_81763_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_81763_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_81758            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_81758_runs[i],
                    (long) ctx->futhark_mc_segscan_task_81758_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81758_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81758_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_81758_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_81758_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81758_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_81758_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_81758_iter[i],
                    (long) ctx->futhark_mc_segscan_task_81758_iter[i] /
                    (ctx->futhark_mc_segscan_task_81758_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81758_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81767          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81767_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81767_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81767_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81767_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81767_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81767_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81767_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81767_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81767_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81767_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81767_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81767_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81767_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81767_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81767_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81767_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81767_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81767_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81767_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81767_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81767_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81767_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81767_total_iter /
                (ctx->futhark_mc_segmap_parloop_81767_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81767_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81767_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81767_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81765             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81765_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81765_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81765_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81765_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81765_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81765_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81765_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81765_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81765_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81765_iter[i] /
                    (ctx->futhark_mc_segmap_task_81765_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81765_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81771          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81771_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81771_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81771_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81771_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81771_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81771_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81771_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81771_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81771_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81771_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81771_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81771_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81771_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81771_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81771_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81771_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81771_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81771_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81771_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81771_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81771_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81771_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81771_total_iter /
                (ctx->futhark_mc_segmap_parloop_81771_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81771_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81771_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81771_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81769             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81769_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81769_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81769_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81769_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81769_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81769_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81769_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81769_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81769_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81769_iter[i] /
                    (ctx->futhark_mc_segmap_task_81769_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81769_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81775          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81775_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81775_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81775_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81775_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81775_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81775_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81775_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81775_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81775_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81775_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81775_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81775_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81775_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81775_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81775_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81775_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81775_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81775_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81775_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81775_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81775_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81775_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81775_total_iter /
                (ctx->futhark_mc_segmap_parloop_81775_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81775_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81775_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81775_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81773             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81773_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81773_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81773_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81773_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81773_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81773_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81773_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81773_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81773_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81773_iter[i] /
                    (ctx->futhark_mc_segmap_task_81773_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81773_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81779          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81779_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81779_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81779_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81779_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81779_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81779_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81779_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81779_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81779_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81779_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81779_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81779_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81779_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81779_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81779_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81779_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81779_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81779_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81779_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81779_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81779_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81779_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81779_total_iter /
                (ctx->futhark_mc_segmap_parloop_81779_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81779_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81779_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81779_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81789  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81789_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81789_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81789_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81789_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81789_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81789_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81789_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81789_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81789_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81789_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81789_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81789_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81789_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81789_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81789_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81789_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81789_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81789_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81789_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81789_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81789_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81789_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81789_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81789_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81789_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81789_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81789_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81784             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81784_runs[i],
                    (long) ctx->futhark_mc_segred_task_81784_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81784_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81784_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81784_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81784_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81784_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81784_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81784_iter[i],
                    (long) ctx->futhark_mc_segred_task_81784_iter[i] /
                    (ctx->futhark_mc_segred_task_81784_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81784_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81795  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81795_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81795_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81795_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81795_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81795_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81795_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81795_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81795_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81795_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81795_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81795_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81795_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81795_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81795_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81795_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81795_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81795_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81795_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81795_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81795_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81795_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81795_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81795_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81795_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81795_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81795_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81795_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81791             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81791_runs[i],
                    (long) ctx->futhark_mc_segred_task_81791_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81791_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81791_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81791_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81791_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81791_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81791_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81791_iter[i],
                    (long) ctx->futhark_mc_segred_task_81791_iter[i] /
                    (ctx->futhark_mc_segred_task_81791_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81791_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81782          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81782_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81782_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81782_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81782_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81782_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81782_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81782_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81782_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81782_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81782_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81782_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81782_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81782_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81782_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81782_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81782_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81782_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81782_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81782_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81782_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81782_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81782_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81782_total_iter /
                (ctx->futhark_mc_segmap_parloop_81782_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81782_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81782_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81782_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81777             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81777_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81777_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81777_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81777_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81777_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81777_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81777_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81777_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81777_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81777_iter[i] /
                    (ctx->futhark_mc_segmap_task_81777_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81777_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81780      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81780_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81780_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81780_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81780_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81780_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81780_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81780_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81780_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81780_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81780_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81780_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81780_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81749          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81749_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81749_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81749_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81749_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81749_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81749_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81749_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81749_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81749_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81749_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81749_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81749_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81749_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81749_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81749_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81749_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81749_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81749_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81749_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81749_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81749_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81749_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81749_total_iter /
                (ctx->futhark_mc_segmap_parloop_81749_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81749_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81749_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81749_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81737             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81737_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81737_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81737_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81737_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81737_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81737_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81737_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81737_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81737_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81737_iter[i] /
                    (ctx->futhark_mc_segmap_task_81737_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81737_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81747      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81747_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81747_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81747_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81747_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81747_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81747_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81747_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81747_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81747_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81747_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81747_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81747_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81799          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81799_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81799_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81799_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81799_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81799_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81799_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81799_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81799_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81799_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81799_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81799_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81799_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81799_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81799_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81799_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81799_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81799_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81799_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81799_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81799_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81799_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81799_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81799_total_iter /
                (ctx->futhark_mc_segmap_parloop_81799_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81799_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81799_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81799_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_81821    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_81821_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81821_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81821_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81821_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81821_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_81821_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81821_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81821_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81821_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81821_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81821_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81821_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_81821_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_81821_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81821_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81821_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81821_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81821_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_81821_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81821_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81821_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81821_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81821_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_81821_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81821_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_81821_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_81821_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_81823    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_81823_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81823_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81823_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81823_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81823_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_81823_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81823_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81823_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81823_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81823_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81823_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81823_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_81823_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_81823_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81823_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81823_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81823_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81823_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_81823_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81823_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81823_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81823_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81823_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_81823_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81823_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_81823_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_81823_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_81818            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_81818_runs[i],
                    (long) ctx->futhark_mc_segscan_task_81818_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81818_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81818_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_81818_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_81818_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81818_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_81818_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_81818_iter[i],
                    (long) ctx->futhark_mc_segscan_task_81818_iter[i] /
                    (ctx->futhark_mc_segscan_task_81818_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81818_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81827          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81827_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81827_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81827_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81827_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81827_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81827_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81827_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81827_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81827_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81827_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81827_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81827_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81827_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81827_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81827_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81827_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81827_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81827_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81827_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81827_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81827_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81827_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81827_total_iter /
                (ctx->futhark_mc_segmap_parloop_81827_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81827_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81827_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81827_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81825             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81825_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81825_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81825_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81825_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81825_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81825_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81825_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81825_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81825_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81825_iter[i] /
                    (ctx->futhark_mc_segmap_task_81825_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81825_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81831          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81831_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81831_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81831_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81831_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81831_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81831_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81831_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81831_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81831_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81831_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81831_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81831_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81831_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81831_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81831_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81831_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81831_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81831_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81831_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81831_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81831_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81831_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81831_total_iter /
                (ctx->futhark_mc_segmap_parloop_81831_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81831_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81831_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81831_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81829             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81829_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81829_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81829_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81829_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81829_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81829_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81829_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81829_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81829_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81829_iter[i] /
                    (ctx->futhark_mc_segmap_task_81829_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81829_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81835          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81835_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81835_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81835_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81835_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81835_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81835_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81835_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81835_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81835_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81835_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81835_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81835_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81835_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81835_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81835_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81835_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81835_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81835_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81835_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81835_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81835_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81835_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81835_total_iter /
                (ctx->futhark_mc_segmap_parloop_81835_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81835_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81835_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81835_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81833             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81833_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81833_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81833_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81833_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81833_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81833_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81833_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81833_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81833_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81833_iter[i] /
                    (ctx->futhark_mc_segmap_task_81833_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81833_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81839          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81839_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81839_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81839_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81839_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81839_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81839_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81839_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81839_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81839_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81839_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81839_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81839_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81839_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81839_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81839_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81839_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81839_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81839_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81839_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81839_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81839_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81839_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81839_total_iter /
                (ctx->futhark_mc_segmap_parloop_81839_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81839_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81839_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81839_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81851  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81851_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81851_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81851_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81851_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81851_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81851_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81851_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81851_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81851_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81851_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81851_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81851_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81851_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81851_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81851_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81851_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81851_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81851_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81851_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81851_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81851_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81851_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81851_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81851_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81851_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81851_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81851_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81844             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81844_runs[i],
                    (long) ctx->futhark_mc_segred_task_81844_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81844_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81844_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81844_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81844_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81844_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81844_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81844_iter[i],
                    (long) ctx->futhark_mc_segred_task_81844_iter[i] /
                    (ctx->futhark_mc_segred_task_81844_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81844_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81857  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81857_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81857_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81857_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81857_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81857_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81857_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81857_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81857_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81857_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81857_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81857_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81857_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81857_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81857_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81857_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81857_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81857_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81857_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81857_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81857_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81857_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81857_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81857_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81857_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81857_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81857_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81857_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81853             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81853_runs[i],
                    (long) ctx->futhark_mc_segred_task_81853_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81853_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81853_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81853_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81853_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81853_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81853_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81853_iter[i],
                    (long) ctx->futhark_mc_segred_task_81853_iter[i] /
                    (ctx->futhark_mc_segred_task_81853_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81853_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81842          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81842_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81842_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81842_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81842_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81842_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81842_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81842_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81842_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81842_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81842_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81842_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81842_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81842_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81842_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81842_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81842_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81842_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81842_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81842_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81842_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81842_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81842_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81842_total_iter /
                (ctx->futhark_mc_segmap_parloop_81842_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81842_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81842_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81842_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81837             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81837_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81837_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81837_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81837_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81837_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81837_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81837_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81837_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81837_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81837_iter[i] /
                    (ctx->futhark_mc_segmap_task_81837_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81837_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81840      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81840_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81840_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81840_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81840_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81840_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81840_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81840_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81840_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81840_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81840_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81840_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81840_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81809          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81809_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81809_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81809_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81809_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81809_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81809_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81809_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81809_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81809_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81809_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81809_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81809_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81809_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81809_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81809_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81809_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81809_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81809_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81809_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81809_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81809_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81809_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81809_total_iter /
                (ctx->futhark_mc_segmap_parloop_81809_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81809_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81809_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81809_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81797             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81797_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81797_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81797_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81797_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81797_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81797_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81797_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81797_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81797_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81797_iter[i] /
                    (ctx->futhark_mc_segmap_task_81797_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81797_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81807      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81807_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81807_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81807_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81807_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81807_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81807_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81807_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81807_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81807_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81807_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81807_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81807_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81861          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81861_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81861_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81861_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81861_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81861_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81861_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81861_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81861_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81861_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81861_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81861_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81861_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81861_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81861_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81861_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81861_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81861_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81861_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81861_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81861_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81861_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81861_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81861_total_iter /
                (ctx->futhark_mc_segmap_parloop_81861_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81861_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81861_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81861_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_81882    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_81882_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81882_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81882_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81882_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81882_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_81882_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81882_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81882_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81882_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81882_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81882_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81882_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_81882_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_81882_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81882_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81882_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81882_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81882_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_81882_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81882_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81882_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81882_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81882_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_81882_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81882_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_81882_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_81882_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_81884    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_81884_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81884_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81884_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81884_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81884_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_81884_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81884_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81884_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81884_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81884_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81884_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81884_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_81884_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_81884_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81884_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81884_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81884_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81884_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_81884_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81884_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81884_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81884_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81884_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_81884_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81884_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_81884_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_81884_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_81879            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_81879_runs[i],
                    (long) ctx->futhark_mc_segscan_task_81879_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81879_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81879_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_81879_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_81879_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81879_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_81879_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_81879_iter[i],
                    (long) ctx->futhark_mc_segscan_task_81879_iter[i] /
                    (ctx->futhark_mc_segscan_task_81879_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81879_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81888          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81888_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81888_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81888_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81888_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81888_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81888_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81888_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81888_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81888_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81888_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81888_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81888_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81888_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81888_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81888_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81888_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81888_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81888_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81888_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81888_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81888_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81888_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81888_total_iter /
                (ctx->futhark_mc_segmap_parloop_81888_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81888_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81888_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81888_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81886             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81886_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81886_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81886_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81886_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81886_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81886_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81886_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81886_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81886_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81886_iter[i] /
                    (ctx->futhark_mc_segmap_task_81886_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81886_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81892          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81892_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81892_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81892_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81892_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81892_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81892_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81892_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81892_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81892_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81892_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81892_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81892_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81892_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81892_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81892_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81892_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81892_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81892_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81892_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81892_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81892_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81892_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81892_total_iter /
                (ctx->futhark_mc_segmap_parloop_81892_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81892_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81892_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81892_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81890             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81890_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81890_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81890_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81890_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81890_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81890_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81890_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81890_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81890_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81890_iter[i] /
                    (ctx->futhark_mc_segmap_task_81890_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81890_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81896          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81896_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81896_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81896_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81896_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81896_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81896_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81896_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81896_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81896_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81896_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81896_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81896_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81896_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81896_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81896_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81896_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81896_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81896_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81896_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81896_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81896_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81896_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81896_total_iter /
                (ctx->futhark_mc_segmap_parloop_81896_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81896_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81896_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81896_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81894             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81894_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81894_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81894_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81894_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81894_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81894_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81894_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81894_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81894_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81894_iter[i] /
                    (ctx->futhark_mc_segmap_task_81894_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81894_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81900          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81900_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81900_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81900_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81900_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81900_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81900_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81900_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81900_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81900_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81900_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81900_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81900_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81900_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81900_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81900_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81900_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81900_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81900_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81900_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81900_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81900_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81900_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81900_total_iter /
                (ctx->futhark_mc_segmap_parloop_81900_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81900_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81900_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81900_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81910  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81910_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81910_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81910_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81910_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81910_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81910_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81910_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81910_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81910_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81910_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81910_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81910_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81910_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81910_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81910_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81910_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81910_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81910_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81910_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81910_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81910_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81910_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81910_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81910_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81910_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81910_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81910_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81907             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81907_runs[i],
                    (long) ctx->futhark_mc_segred_task_81907_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81907_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81907_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81907_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81907_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81907_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81907_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81907_iter[i],
                    (long) ctx->futhark_mc_segred_task_81907_iter[i] /
                    (ctx->futhark_mc_segred_task_81907_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81907_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81915  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81915_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81915_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81915_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81915_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81915_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81915_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81915_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81915_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81915_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81915_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81915_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81915_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81915_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81915_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81915_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81915_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81915_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81915_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81915_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81915_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81915_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81915_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81915_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81915_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81915_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81915_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81915_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81912             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81912_runs[i],
                    (long) ctx->futhark_mc_segred_task_81912_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81912_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81912_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81912_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81912_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81912_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81912_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81912_iter[i],
                    (long) ctx->futhark_mc_segred_task_81912_iter[i] /
                    (ctx->futhark_mc_segred_task_81912_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81912_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81904          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81904_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81904_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81904_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81904_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81904_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81904_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81904_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81904_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81904_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81904_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81904_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81904_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81904_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81904_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81904_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81904_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81904_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81904_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81904_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81904_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81904_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81904_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81904_total_iter /
                (ctx->futhark_mc_segmap_parloop_81904_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81904_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81904_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81904_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81898             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81898_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81898_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81898_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81898_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81898_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81898_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81898_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81898_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81898_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81898_iter[i] /
                    (ctx->futhark_mc_segmap_task_81898_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81898_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81902      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81902_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81902_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81902_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81902_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81902_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81902_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81902_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81902_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81902_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81902_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81902_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81902_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81871          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81871_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81871_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81871_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81871_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81871_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81871_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81871_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81871_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81871_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81871_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81871_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81871_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81871_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81871_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81871_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81871_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81871_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81871_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81871_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81871_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81871_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81871_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81871_total_iter /
                (ctx->futhark_mc_segmap_parloop_81871_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81871_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81871_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81871_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81859             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81859_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81859_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81859_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81859_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81859_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81859_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81859_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81859_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81859_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81859_iter[i] /
                    (ctx->futhark_mc_segmap_task_81859_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81859_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81869      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81869_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81869_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81869_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81869_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81869_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81869_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81869_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81869_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81869_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81869_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81869_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81869_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81919          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81919_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81919_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81919_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81919_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81919_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81919_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81919_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81919_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81919_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81919_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81919_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81919_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81919_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81919_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81919_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81919_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81919_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81919_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81919_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81919_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81919_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81919_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81919_total_iter /
                (ctx->futhark_mc_segmap_parloop_81919_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81919_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81919_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81919_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_81943    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_81943_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81943_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81943_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81943_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81943_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_81943_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81943_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81943_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81943_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_81943_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_81943_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_81943_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_81943_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_81943_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81943_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81943_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81943_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81943_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_81943_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_81943_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_81943_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_81943_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_81943_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_81943_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_81943_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_81943_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_81943_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_81945    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_81945_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81945_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81945_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81945_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81945_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_81945_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81945_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81945_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81945_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_81945_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_81945_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_81945_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_81945_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_81945_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81945_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81945_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81945_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81945_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_81945_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_81945_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_81945_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_81945_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_81945_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_81945_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_81945_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_81945_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_81945_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_81940            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_81940_runs[i],
                    (long) ctx->futhark_mc_segscan_task_81940_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81940_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81940_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_81940_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_81940_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_81940_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_81940_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_81940_iter[i],
                    (long) ctx->futhark_mc_segscan_task_81940_iter[i] /
                    (ctx->futhark_mc_segscan_task_81940_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_81940_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81949          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81949_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81949_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81949_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81949_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81949_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81949_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81949_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81949_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81949_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81949_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81949_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81949_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81949_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81949_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81949_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81949_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81949_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81949_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81949_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81949_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81949_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81949_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81949_total_iter /
                (ctx->futhark_mc_segmap_parloop_81949_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81949_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81949_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81949_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81947             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81947_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81947_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81947_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81947_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81947_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81947_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81947_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81947_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81947_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81947_iter[i] /
                    (ctx->futhark_mc_segmap_task_81947_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81947_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81953          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81953_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81953_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81953_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81953_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81953_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81953_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81953_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81953_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81953_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81953_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81953_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81953_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81953_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81953_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81953_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81953_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81953_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81953_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81953_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81953_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81953_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81953_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81953_total_iter /
                (ctx->futhark_mc_segmap_parloop_81953_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81953_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81953_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81953_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81951             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81951_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81951_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81951_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81951_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81951_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81951_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81951_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81951_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81951_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81951_iter[i] /
                    (ctx->futhark_mc_segmap_task_81951_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81951_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81957          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81957_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81957_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81957_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81957_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81957_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81957_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81957_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81957_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81957_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81957_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81957_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81957_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81957_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81957_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81957_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81957_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81957_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81957_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81957_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81957_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81957_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81957_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81957_total_iter /
                (ctx->futhark_mc_segmap_parloop_81957_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81957_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81957_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81957_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81955             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81955_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81955_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81955_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81955_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81955_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81955_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81955_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81955_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81955_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81955_iter[i] /
                    (ctx->futhark_mc_segmap_task_81955_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81955_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81961          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81961_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81961_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81961_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81961_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81961_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81961_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81961_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81961_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81961_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81961_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81961_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81961_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81961_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81961_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81961_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81961_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81961_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81961_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81961_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81961_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81961_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81961_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81961_total_iter /
                (ctx->futhark_mc_segmap_parloop_81961_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81961_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81961_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81961_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81975  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81975_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81975_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81975_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81975_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81975_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81975_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81975_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81975_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81975_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81975_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81975_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81975_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81975_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81975_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81975_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81975_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81975_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81975_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81975_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81975_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81975_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81975_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81975_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81975_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81975_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81975_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81975_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81970             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81970_runs[i],
                    (long) ctx->futhark_mc_segred_task_81970_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81970_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81970_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81970_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81970_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81970_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81970_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81970_iter[i],
                    (long) ctx->futhark_mc_segred_task_81970_iter[i] /
                    (ctx->futhark_mc_segred_task_81970_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81970_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_81981  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_81981_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81981_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81981_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81981_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81981_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_81981_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81981_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81981_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81981_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_81981_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_81981_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_81981_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_81981_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_81981_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81981_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81981_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81981_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81981_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_81981_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_81981_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_81981_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_81981_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_81981_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_81981_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_81981_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_81981_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_81981_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_81977             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_81977_runs[i],
                    (long) ctx->futhark_mc_segred_task_81977_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81977_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81977_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_81977_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_81977_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_81977_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_81977_iter[i]),
                    (long) ctx->futhark_mc_segred_task_81977_iter[i],
                    (long) ctx->futhark_mc_segred_task_81977_iter[i] /
                    (ctx->futhark_mc_segred_task_81977_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_81977_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81966          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81966_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81966_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81966_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81966_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81966_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81966_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81966_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81966_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81966_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81966_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81966_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81966_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81966_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81966_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81966_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81966_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81966_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81966_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81966_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81966_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81966_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81966_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81966_total_iter /
                (ctx->futhark_mc_segmap_parloop_81966_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81966_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81966_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81966_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81959             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81959_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81959_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81959_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81959_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81959_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81959_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81959_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81959_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81959_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81959_iter[i] /
                    (ctx->futhark_mc_segmap_task_81959_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81959_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81964      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81964_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81964_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81964_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81964_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81964_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81964_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81964_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81964_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81964_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81964_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81964_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81964_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81931          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81931_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81931_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81931_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81931_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81931_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81931_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81931_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81931_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81931_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81931_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81931_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81931_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81931_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81931_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81931_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81931_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81931_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81931_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81931_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81931_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81931_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81931_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81931_total_iter /
                (ctx->futhark_mc_segmap_parloop_81931_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81931_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81931_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81931_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81917             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81917_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81917_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81917_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81917_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81917_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81917_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81917_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81917_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81917_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81917_iter[i] /
                    (ctx->futhark_mc_segmap_task_81917_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81917_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81929      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81929_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81929_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81929_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81929_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81929_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81929_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81929_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81929_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81929_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81929_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81929_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81929_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81985          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81985_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81985_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81985_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81985_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81985_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81985_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81985_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81985_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81985_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81985_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81985_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81985_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81985_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81985_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81985_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81985_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81985_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81985_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81985_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81985_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81985_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81985_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81985_total_iter /
                (ctx->futhark_mc_segmap_parloop_81985_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81985_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81985_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81985_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_82011    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_82011_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_82011_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_82011_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_82011_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_82011_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_82011_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_82011_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_82011_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_82011_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_82011_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_82011_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_82011_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_82011_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_82011_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_82011_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_82011_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_82011_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_82011_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_82011_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_82011_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_82011_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_82011_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_82011_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_82011_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_82011_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_82011_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_82011_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_82013    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_82013_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_82013_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_82013_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_82013_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_82013_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_82013_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_82013_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_82013_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_82013_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_82013_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_82013_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_82013_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_82013_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_82013_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_82013_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_82013_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_82013_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_82013_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_82013_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_82013_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_82013_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_82013_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_82013_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_82013_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_82013_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_82013_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_82013_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_82008            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_82008_runs[i],
                    (long) ctx->futhark_mc_segscan_task_82008_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_82008_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_82008_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_82008_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_82008_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_82008_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_82008_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_82008_iter[i],
                    (long) ctx->futhark_mc_segscan_task_82008_iter[i] /
                    (ctx->futhark_mc_segscan_task_82008_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_82008_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_82017          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_82017_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_82017_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82017_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82017_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_82017_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_82017_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82017_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82017_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_82017_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_82017_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_82017_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82017_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_82017_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_82017_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_82017_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82017_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82017_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_82017_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_82017_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82017_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82017_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_82017_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_82017_total_iter /
                (ctx->futhark_mc_segmap_parloop_82017_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82017_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_82017_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_82017_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_82015             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_82015_runs[i],
                    (long) ctx->futhark_mc_segmap_task_82015_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82015_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82015_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_82015_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_82015_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82015_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_82015_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_82015_iter[i],
                    (long) ctx->futhark_mc_segmap_task_82015_iter[i] /
                    (ctx->futhark_mc_segmap_task_82015_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82015_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_82021          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_82021_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_82021_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82021_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82021_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_82021_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_82021_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82021_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82021_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_82021_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_82021_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_82021_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82021_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_82021_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_82021_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_82021_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82021_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82021_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_82021_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_82021_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82021_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82021_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_82021_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_82021_total_iter /
                (ctx->futhark_mc_segmap_parloop_82021_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82021_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_82021_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_82021_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_82019             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_82019_runs[i],
                    (long) ctx->futhark_mc_segmap_task_82019_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82019_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82019_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_82019_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_82019_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82019_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_82019_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_82019_iter[i],
                    (long) ctx->futhark_mc_segmap_task_82019_iter[i] /
                    (ctx->futhark_mc_segmap_task_82019_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82019_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_82025          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_82025_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_82025_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82025_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82025_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_82025_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_82025_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82025_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82025_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_82025_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_82025_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_82025_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82025_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_82025_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_82025_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_82025_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82025_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82025_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_82025_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_82025_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82025_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82025_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_82025_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_82025_total_iter /
                (ctx->futhark_mc_segmap_parloop_82025_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82025_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_82025_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_82025_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_82023             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_82023_runs[i],
                    (long) ctx->futhark_mc_segmap_task_82023_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82023_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82023_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_82023_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_82023_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82023_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_82023_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_82023_iter[i],
                    (long) ctx->futhark_mc_segmap_task_82023_iter[i] /
                    (ctx->futhark_mc_segmap_task_82023_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82023_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_82029          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_82029_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_82029_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82029_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82029_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_82029_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_82029_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82029_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82029_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_82029_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_82029_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_82029_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82029_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_82029_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_82029_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_82029_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82029_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82029_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_82029_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_82029_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82029_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82029_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_82029_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_82029_total_iter /
                (ctx->futhark_mc_segmap_parloop_82029_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82029_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_82029_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_82029_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_82044          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_82044_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_82044_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82044_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82044_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_82044_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_82044_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82044_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82044_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_82044_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_82044_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_82044_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82044_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_82044_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_82044_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_82044_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82044_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82044_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_82044_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_82044_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82044_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82044_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_82044_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_82044_total_iter /
                (ctx->futhark_mc_segmap_parloop_82044_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82044_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_82044_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_82044_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_82042             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_82042_runs[i],
                    (long) ctx->futhark_mc_segmap_task_82042_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82042_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82042_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_82042_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_82042_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82042_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_82042_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_82042_iter[i],
                    (long) ctx->futhark_mc_segmap_task_82042_iter[i] /
                    (ctx->futhark_mc_segmap_task_82042_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82042_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_82053  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_82053_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82053_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_82053_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_82053_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82053_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_82053_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_82053_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_82053_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82053_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82053_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_82053_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_82053_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_82053_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_82053_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_82053_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_82053_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_82053_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_82053_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_82053_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_82053_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_82053_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_82053_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_82053_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_82053_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_82053_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_82053_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_82053_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_82046             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_82046_runs[i],
                    (long) ctx->futhark_mc_segred_task_82046_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_82046_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_82046_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_82046_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_82046_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_82046_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_82046_iter[i]),
                    (long) ctx->futhark_mc_segred_task_82046_iter[i],
                    (long) ctx->futhark_mc_segred_task_82046_iter[i] /
                    (ctx->futhark_mc_segred_task_82046_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_82046_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_82059  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_82059_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82059_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_82059_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_82059_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82059_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_82059_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_82059_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_82059_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82059_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_82059_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_82059_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_82059_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_82059_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_82059_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_82059_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_82059_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_82059_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_82059_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_82059_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_82059_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_82059_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_82059_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_82059_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_82059_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_82059_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_82059_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_82059_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_82055             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_82055_runs[i],
                    (long) ctx->futhark_mc_segred_task_82055_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_82055_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_82055_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_82055_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_82055_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_82055_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_82055_iter[i]),
                    (long) ctx->futhark_mc_segred_task_82055_iter[i],
                    (long) ctx->futhark_mc_segred_task_82055_iter[i] /
                    (ctx->futhark_mc_segred_task_82055_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_82055_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_82036          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_82036_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_82036_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82036_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82036_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_82036_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_82036_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82036_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82036_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_82036_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_82036_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_82036_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82036_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_82036_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_82036_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_82036_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82036_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82036_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_82036_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_82036_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82036_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82036_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_82036_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_82036_total_iter /
                (ctx->futhark_mc_segmap_parloop_82036_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82036_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_82036_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_82036_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_82027             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_82027_runs[i],
                    (long) ctx->futhark_mc_segmap_task_82027_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82027_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82027_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_82027_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_82027_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82027_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_82027_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_82027_iter[i],
                    (long) ctx->futhark_mc_segmap_task_82027_iter[i] /
                    (ctx->futhark_mc_segmap_task_82027_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82027_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_82034      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_82034_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_82034_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_82034_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_82034_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_82034_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_82034_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_82034_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_82034_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_82034_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_82034_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_82034_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_82034_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_81999          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_81999_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_81999_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81999_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81999_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_81999_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_81999_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_81999_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81999_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_81999_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_81999_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_81999_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_81999_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_81999_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_81999_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_81999_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81999_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81999_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_81999_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_81999_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_81999_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_81999_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_81999_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_81999_total_iter /
                (ctx->futhark_mc_segmap_parloop_81999_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_81999_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_81999_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_81999_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_81983             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_81983_runs[i],
                    (long) ctx->futhark_mc_segmap_task_81983_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81983_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81983_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_81983_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_81983_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_81983_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_81983_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_81983_iter[i],
                    (long) ctx->futhark_mc_segmap_task_81983_iter[i] /
                    (ctx->futhark_mc_segmap_task_81983_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_81983_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_81997      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_81997_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81997_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81997_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81997_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_81997_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_81997_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_81997_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_81997_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_81997_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_81997_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_81997_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_81997_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_82063          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_82063_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_82063_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82063_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82063_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_82063_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_82063_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82063_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82063_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_82063_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_82063_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_82063_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82063_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_82063_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_82063_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_82063_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82063_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82063_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_82063_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_82063_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82063_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82063_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_82063_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_82063_total_iter /
                (ctx->futhark_mc_segmap_parloop_82063_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82063_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_82063_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_82063_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_82072          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_82072_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_82072_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82072_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82072_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_82072_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_82072_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82072_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82072_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_82072_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_82072_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_82072_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82072_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_82072_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_82072_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_82072_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82072_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82072_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_82072_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_82072_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82072_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82072_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_82072_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_82072_total_iter /
                (ctx->futhark_mc_segmap_parloop_82072_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82072_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_82072_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_82072_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_82070             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_82070_runs[i],
                    (long) ctx->futhark_mc_segmap_task_82070_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82070_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82070_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_82070_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_82070_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82070_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_82070_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_82070_iter[i],
                    (long) ctx->futhark_mc_segmap_task_82070_iter[i] /
                    (ctx->futhark_mc_segmap_task_82070_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82070_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_82067          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_82067_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_82067_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82067_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82067_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_82067_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_82067_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_82067_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82067_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_82067_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_82067_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_82067_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_82067_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_82067_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_82067_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_82067_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82067_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82067_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_82067_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_82067_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_82067_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_82067_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_82067_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_82067_total_iter /
                (ctx->futhark_mc_segmap_parloop_82067_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_82067_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_82067_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_82067_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_82061             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_82061_runs[i],
                    (long) ctx->futhark_mc_segmap_task_82061_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82061_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82061_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_82061_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_82061_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_82061_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_82061_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_82061_iter[i],
                    (long) ctx->futhark_mc_segmap_task_82061_iter[i] /
                    (ctx->futhark_mc_segmap_task_82061_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_82061_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_82065      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_82065_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_82065_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_82065_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_82065_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_82065_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_82065_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_82065_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_82065_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_82065_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_82065_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_82065_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_82065_runs[i] : 1));
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_81680,
                             struct memblock Y_mem_75353, int64_t m_70279,
                             int64_t n_70280, int64_t q_70282,
                             int64_t degree_70283, int64_t jump_70284,
                             int64_t jump_threshold_70285,
                             int64_t q_threshold_70286);

static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_mc_task_81681 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75359;
    int64_t free_bytes_75362;
    int64_t free_bytes_75371;
    int64_t free_bytes_75374;
    unsigned char *free_mem_75469;
};
struct futhark_mc_segmap_parloop_struct_81683 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75359;
    int64_t free_bytes_75362;
    int64_t free_bytes_75371;
    int64_t free_bytes_75374;
    unsigned char *free_mem_75469;
};
static int futhark_mc_segmap_parloop_81684(void *args, int64_t start,
                                           int64_t end, int flat_tid_71628,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81683
    *futhark_mc_segmap_parloop_struct_81683 =
    (struct futhark_mc_segmap_parloop_struct_81683 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81683->ctx;
    uint64_t futhark_mc_segmap_parloop_81684_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81684_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_segmap_parloop_struct_81683->free_m_70279;
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81683->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81683->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81683->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81683->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81683->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81683->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81683->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81683->free_loop_cond_70305;
    float i64_res_70306 =
          futhark_mc_segmap_parloop_struct_81683->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81683->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75359 =
            futhark_mc_segmap_parloop_struct_81683->free_bytes_75359;
    int64_t bytes_75362 =
            futhark_mc_segmap_parloop_struct_81683->free_bytes_75362;
    int64_t bytes_75371 =
            futhark_mc_segmap_parloop_struct_81683->free_bytes_75371;
    int64_t bytes_75374 =
            futhark_mc_segmap_parloop_struct_81683->free_bytes_75374;
    struct memblock mem_75469 = {.desc ="mem_75469", .mem =
                                 futhark_mc_segmap_parloop_struct_81683->free_mem_75469,
                                 .size =0, .references =NULL};
    size_t mem_75378_cached_sizze_81685 = 0;
    unsigned char *mem_75378 = NULL;
    size_t mem_75393_cached_sizze_81686 = 0;
    unsigned char *mem_75393 = NULL;
    size_t mem_75396_cached_sizze_81687 = 0;
    unsigned char *mem_75396 = NULL;
    size_t mem_75423_cached_sizze_81688 = 0;
    unsigned char *mem_75423 = NULL;
    size_t mem_75438_cached_sizze_81689 = 0;
    unsigned char *mem_75438 = NULL;
    size_t mem_75453_cached_sizze_81690 = 0;
    unsigned char *mem_75453 = NULL;
    int64_t iterations = end - start;
    int64_t iter_76406 = start;
    
    if (mem_75378_cached_sizze_81685 < (size_t) bytes_75359) {
        mem_75378 = realloc(mem_75378, bytes_75359);
        mem_75378_cached_sizze_81685 = bytes_75359;
    }
    if (mem_75393_cached_sizze_81686 < (size_t) bytes_75362) {
        mem_75393 = realloc(mem_75393, bytes_75362);
        mem_75393_cached_sizze_81686 = bytes_75362;
    }
    if (mem_75396_cached_sizze_81687 < (size_t) bytes_75359) {
        mem_75396 = realloc(mem_75396, bytes_75359);
        mem_75396_cached_sizze_81687 = bytes_75359;
    }
    if (mem_75423_cached_sizze_81688 < (size_t) bytes_75359) {
        mem_75423 = realloc(mem_75423, bytes_75359);
        mem_75423_cached_sizze_81688 = bytes_75359;
    }
    if (mem_75438_cached_sizze_81689 < (size_t) bytes_75371) {
        mem_75438 = realloc(mem_75438, bytes_75371);
        mem_75438_cached_sizze_81689 = bytes_75371;
    }
    if (mem_75453_cached_sizze_81690 < (size_t) bytes_75374) {
        mem_75453 = realloc(mem_75453, bytes_75374);
        mem_75453_cached_sizze_81690 = bytes_75374;
    }
    for (; iter_76406 < end; iter_76406++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76573 = m_70279;
        int64_t gtid_71629 = iter_76406;
        int64_t remnant_76574 = iter_76406 - gtid_71629;
        int64_t discard_74968;
        int64_t scanacc_76408 = (int64_t) 0;
        
        for (int64_t i_76407 = 0; i_76407 < n_70280; i_76407++) {
            float x_76410 = ((float *) Y_mem_75353.mem)[gtid_71629 * n_70280 +
                                                        i_76407];
            bool isnan_res_76411;
            
            isnan_res_76411 = futrts_isnan32(x_76410);
            
            bool defunc_0_p_res_76412 = !isnan_res_76411;
            int64_t defunc_0_f_res_76413 = btoi_bool_i64(defunc_0_p_res_76412);
            int64_t defunc_1_op_res_76414 = add64(defunc_0_f_res_76413,
                                                  scanacc_76408);
            
            ((int64_t *) mem_75378)[i_76407] = defunc_1_op_res_76414;
            
            int64_t scanacc_tmp_76575 = defunc_1_op_res_76414;
            
            scanacc_76408 = scanacc_tmp_76575;
        }
        discard_74968 = scanacc_76408;
        
        int64_t last_res_70329 = ((int64_t *) mem_75378)[i_70294];
        
        for (int64_t i_76577 = 0; i_76577 < n_70280; i_76577++) {
            ((float *) mem_75393)[i_76577] = 0.0F;
        }
        for (int64_t i_76578 = 0; i_76578 < n_70280; i_76578++) {
            ((int64_t *) mem_75396)[i_76578] = (int64_t) -1;
        }
        for (int64_t write_iter_76416 = 0; write_iter_76416 < n_70280;
             write_iter_76416++) {
            float write_iv_76419 = ((float *) Y_mem_75353.mem)[gtid_71629 *
                                                               n_70280 +
                                                               write_iter_76416];
            bool isnan_res_76420;
            
            isnan_res_76420 = futrts_isnan32(write_iv_76419);
            
            bool defunc_0_p_res_76421 = !isnan_res_76420;
            int64_t defunc_1_f_res_76422;
            
            if (defunc_0_p_res_76421) {
                int64_t write_iv_76423 =
                        ((int64_t *) mem_75378)[write_iter_76416];
                int64_t defunc_1_f_res_t_res_76424 = sub64(write_iv_76423,
                                                           (int64_t) 1);
                
                defunc_1_f_res_76422 = defunc_1_f_res_t_res_76424;
            } else {
                defunc_1_f_res_76422 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_76422) &&
                slt64(defunc_1_f_res_76422, n_70280)) {
                ((int64_t *) mem_75396)[defunc_1_f_res_76422] =
                    write_iter_76416;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_76422) &&
                slt64(defunc_1_f_res_76422, n_70280)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_75393 + defunc_1_f_res_76422 * (int64_t) 4,
                            Y_mem_75353.mem + (gtid_71629 * n_70280 +
                                               write_iter_76416) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        for (int64_t i_76428 = 0; i_76428 < n_70280; i_76428++) {
            int64_t x_76430 = ((int64_t *) mem_75396)[i_76428];
            int64_t defunc_0_f_res_76431 = add64((int64_t) 1, x_76430);
            
            ((int64_t *) mem_75423)[i_76428] = defunc_0_f_res_76431;
        }
        
        int64_t min_arg_70344 = sub64(last_res_70329, (int64_t) 1);
        int64_t min_arg_70345 = sub64(last_res_70329, min_res_70300);
        int64_t min_res_70346 = smin64(q_70282, last_res_70329);
        float i64_res_70347 = sitofp_i64_f32(last_res_70329);
        float x_70348 = i64_res_70306 - i64_res_70347;
        float max_arg_70349 = x_70348 / 2.0F;
        float max_res_70350 = fmax32(0.0F, max_arg_70349);
        
        for (int64_t i_76433 = 0; i_76433 < q_70282; i_76433++) {
            bool cond_76435 = sle64(last_res_70329, i_76433);
            float defunc_0_f_res_76436;
            
            if (cond_76435) {
                defunc_0_f_res_76436 = 0.0F;
            } else {
                defunc_0_f_res_76436 = 1.0F;
            }
            ((float *) mem_75438)[i_76433] = defunc_0_f_res_76436;
        }
        for (int64_t i_76438 = 0; i_76438 < n_m_70288; i_76438++) {
            int64_t min_arg_76440 = mul64(jump_70284, i_76438);
            int64_t min_res_76441 = smin64(i_70294, min_arg_76440);
            int64_t defunc_0_g_res_76442 = add64((int64_t) 1, min_res_76441);
            bool init_idx_76443;
            int64_t init_idx_76444;
            int64_t init_idx_76445;
            bool loop_while_76446;
            int64_t low_76447;
            int64_t high_76448;
            
            loop_while_76446 = x_70295;
            low_76447 = (int64_t) 0;
            high_76448 = i_70294;
            while (loop_while_76446) {
                int64_t x_76449 = add64(low_76447, high_76448);
                int64_t mid_76450 = sdiv64(x_76449, (int64_t) 2);
                bool x_76451 = sle64((int64_t) 0, mid_76450);
                bool y_76452 = slt64(mid_76450, n_70280);
                bool bounds_check_76453 = x_76451 && y_76452;
                bool index_certs_76454;
                
                if (!bounds_check_76453) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_76450,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t mid_id_76455 = ((int64_t *) mem_75423)[mid_76450];
                bool cond_76456 = slt64(mid_id_76455, (int64_t) 0);
                int64_t mid_idx_76457;
                
                if (cond_76456) {
                    mid_idx_76457 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_76457 = mid_id_76455;
                }
                
                bool cond_76458 = sle64(defunc_0_g_res_76442, mid_idx_76457);
                int64_t loopres_76459;
                int64_t loopres_76460;
                
                if (cond_76458) {
                    int64_t loopres_t_res_76461 = sub64(mid_76450, (int64_t) 1);
                    
                    loopres_76459 = low_76447;
                    loopres_76460 = loopres_t_res_76461;
                } else {
                    int64_t loopres_f_res_76462 = add64((int64_t) 1, mid_76450);
                    
                    loopres_76459 = loopres_f_res_76462;
                    loopres_76460 = high_76448;
                }
                
                bool loop_cond_76463 = sle64(loopres_76459, loopres_76460);
                bool loop_while_tmp_76584 = loop_cond_76463;
                int64_t low_tmp_76585 = loopres_76459;
                int64_t high_tmp_76586 = loopres_76460;
                
                loop_while_76446 = loop_while_tmp_76584;
                low_76447 = low_tmp_76585;
                high_76448 = high_tmp_76586;
            }
            init_idx_76443 = loop_while_76446;
            init_idx_76444 = low_76447;
            init_idx_76445 = high_76448;
            
            bool idx_76464;
            int64_t idx_76465;
            int64_t idx_76466;
            int64_t idx_76467;
            bool loop_while_76468;
            int64_t l_idx_76469;
            int64_t r_idx_76470;
            int64_t span_76471;
            
            loop_while_76468 = loop_cond_70305;
            l_idx_76469 = init_idx_76444;
            r_idx_76470 = init_idx_76444;
            span_76471 = (int64_t) 1;
            while (loop_while_76468) {
                int64_t max_arg_76472 = sub64(l_idx_76469, (int64_t) 1);
                int64_t max_res_76473 = smax64((int64_t) 0, max_arg_76472);
                int64_t min_arg_76474 = add64((int64_t) 1, r_idx_76470);
                int64_t min_res_76475 = smin64(min_arg_70344, min_arg_76474);
                bool x_76476 = sle64((int64_t) 0, max_res_76473);
                bool y_76477 = slt64(max_res_76473, n_70280);
                bool bounds_check_76478 = x_76476 && y_76477;
                bool index_certs_76479;
                
                if (!bounds_check_76478) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_76473,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t x_76480 = ((int64_t *) mem_75423)[max_res_76473];
                int64_t abs_arg_76481 = sub64(x_76480, defunc_0_g_res_76442);
                int64_t abs_res_76482 = abs64(abs_arg_76481);
                bool x_76483 = sle64((int64_t) 0, min_res_76475);
                bool y_76484 = slt64(min_res_76475, n_70280);
                bool bounds_check_76485 = x_76483 && y_76484;
                bool index_certs_76486;
                
                if (!bounds_check_76485) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_76475,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t x_76487 = ((int64_t *) mem_75423)[min_res_76475];
                int64_t abs_arg_76488 = sub64(x_76487, defunc_0_g_res_76442);
                int64_t abs_res_76489 = abs64(abs_arg_76488);
                bool cond_76490 = max_res_76473 == l_idx_76469;
                int64_t loopres_76491;
                int64_t loopres_76492;
                int64_t loopres_76493;
                
                if (cond_76490) {
                    loopres_76491 = l_idx_76469;
                    loopres_76492 = r_idx_76470;
                    loopres_76493 = min_res_70300;
                } else {
                    bool cond_76494 = slt64(abs_res_76482, abs_res_76489);
                    bool cond_f_res_76495 = min_res_76475 == r_idx_76470;
                    bool x_76496 = !cond_76494;
                    bool y_76497 = cond_f_res_76495 && x_76496;
                    bool cond_76498 = cond_76494 || y_76497;
                    int64_t loopres_f_res_76499;
                    
                    if (cond_76498) {
                        loopres_f_res_76499 = max_res_76473;
                    } else {
                        loopres_f_res_76499 = l_idx_76469;
                    }
                    
                    int64_t loopres_f_res_76500;
                    
                    if (cond_76498) {
                        loopres_f_res_76500 = r_idx_76470;
                    } else {
                        loopres_f_res_76500 = min_res_76475;
                    }
                    
                    int64_t loopres_f_res_76501;
                    
                    if (cond_76498) {
                        int64_t loopres_f_res_t_res_76502 = add64((int64_t) 1,
                                                                  span_76471);
                        
                        loopres_f_res_76501 = loopres_f_res_t_res_76502;
                    } else {
                        int64_t loopres_f_res_f_res_76503 = add64((int64_t) 1,
                                                                  span_76471);
                        
                        loopres_f_res_76501 = loopres_f_res_f_res_76503;
                    }
                    loopres_76491 = loopres_f_res_76499;
                    loopres_76492 = loopres_f_res_76500;
                    loopres_76493 = loopres_f_res_76501;
                }
                
                bool loop_cond_76504 = slt64(loopres_76493, min_res_70300);
                bool loop_while_tmp_76587 = loop_cond_76504;
                int64_t l_idx_tmp_76588 = loopres_76491;
                int64_t r_idx_tmp_76589 = loopres_76492;
                int64_t span_tmp_76590 = loopres_76493;
                
                loop_while_76468 = loop_while_tmp_76587;
                l_idx_76469 = l_idx_tmp_76588;
                r_idx_76470 = r_idx_tmp_76589;
                span_76471 = span_tmp_76590;
            }
            idx_76464 = loop_while_76468;
            idx_76465 = l_idx_76469;
            idx_76466 = r_idx_76470;
            idx_76467 = span_76471;
            
            int64_t min_res_76505 = smin64(min_arg_70345, idx_76465);
            int64_t max_res_76506 = smax64((int64_t) 0, min_res_76505);
            int64_t x_76507 = add64(min_res_70346, max_res_76506);
            int64_t r_76508 = sub64(x_76507, (int64_t) 1);
            bool x_76509 = sle64((int64_t) 0, r_76508);
            bool y_76510 = slt64(r_76508, n_70280);
            bool bounds_check_76511 = x_76509 && y_76510;
            bool index_certs_76512;
            
            if (!bounds_check_76511) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_76508,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_76513 = ((int64_t *) mem_75396)[r_76508];
            int64_t abs_arg_76514 = sub64(x_76513, min_res_76441);
            int64_t abs_res_76515 = abs64(abs_arg_76514);
            bool x_76516 = sle64((int64_t) 0, max_res_76506);
            bool y_76517 = slt64(max_res_76506, n_70280);
            bool bounds_check_76518 = x_76516 && y_76517;
            bool index_certs_76519;
            
            if (!bounds_check_76518) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_76506,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_76520 = ((int64_t *) mem_75396)[max_res_76506];
            int64_t abs_arg_76521 = sub64(x_76520, min_res_76441);
            int64_t abs_res_76522 = abs64(abs_arg_76521);
            int64_t max_res_76523 = smax64(abs_res_76515, abs_res_76522);
            float defunc_0_f_res_76524 = sitofp_i64_f32(max_res_76523);
            float defunc_1_f_res_76525 = max_res_70350 + defunc_0_f_res_76524;
            float defunc_2_reduce_res_76526;
            float redout_76528 = 0.0F;
            
            for (int64_t i_76527 = 0; i_76527 < q_70282; i_76527++) {
                float x_76529 = ((float *) mem_75438)[i_76527];
                bool cond_76530 = sle64(last_res_70329, i_76527);
                int64_t defunc_0_f_res_76531;
                
                if (cond_76530) {
                    defunc_0_f_res_76531 = (int64_t) 0;
                } else {
                    int64_t i_76532 = add64(max_res_76506, i_76527);
                    int64_t defunc_0_add_arg_76533 =
                            ((int64_t *) mem_75396)[i_76532];
                    int64_t defunc_1_add_res_76534 = add64((int64_t) 1,
                                                           defunc_0_add_arg_76533);
                    
                    defunc_0_f_res_76531 = defunc_1_add_res_76534;
                }
                
                int64_t binop_p_76535 = sub64(defunc_0_f_res_76531,
                                              min_res_76441);
                float defunc_0_f_res_76536 = sitofp_i64_f32(binop_p_76535);
                float abs_res_76537 = (float) fabs(defunc_0_f_res_76536);
                float tmp1_76538 = abs_res_76537 / defunc_1_f_res_76525;
                float x_76539 = tmp1_76538 * tmp1_76538;
                float y_76540 = tmp1_76538 * x_76539;
                float tmp2_76541 = 1.0F - y_76540;
                float x_76542 = tmp2_76541 * tmp2_76541;
                float tmp3_76543 = tmp2_76541 * x_76542;
                float w_j_76544 = x_76529 * tmp3_76543;
                float defunc_1_op_res_76545 = w_j_76544 + redout_76528;
                float redout_tmp_76591 = defunc_1_op_res_76545;
                
                redout_76528 = redout_tmp_76591;
            }
            defunc_2_reduce_res_76526 = redout_76528;
            
            float a0_76546 = 1.0F / defunc_2_reduce_res_76526;
            float defunc_2_reduce_res_76547;
            float redout_76549 = 0.0F;
            
            for (int64_t i_76548 = 0; i_76548 < q_70282; i_76548++) {
                float x_76550 = ((float *) mem_75438)[i_76548];
                bool cond_76551 = sle64(last_res_70329, i_76548);
                int64_t defunc_0_f_res_76552;
                
                if (cond_76551) {
                    defunc_0_f_res_76552 = (int64_t) 0;
                } else {
                    int64_t i_76553 = add64(max_res_76506, i_76548);
                    int64_t defunc_0_add_arg_76554 =
                            ((int64_t *) mem_75396)[i_76553];
                    int64_t defunc_1_add_res_76555 = add64((int64_t) 1,
                                                           defunc_0_add_arg_76554);
                    
                    defunc_0_f_res_76552 = defunc_1_add_res_76555;
                }
                
                int64_t binop_p_76556 = sub64(defunc_0_f_res_76552,
                                              min_res_76441);
                float defunc_0_f_res_76557 = sitofp_i64_f32(binop_p_76556);
                float abs_res_76558 = (float) fabs(defunc_0_f_res_76557);
                float tmp1_76559 = abs_res_76558 / defunc_1_f_res_76525;
                float x_76560 = tmp1_76559 * tmp1_76559;
                float y_76561 = tmp1_76559 * x_76560;
                float tmp2_76562 = 1.0F - y_76561;
                float x_76563 = tmp2_76562 * tmp2_76562;
                float tmp3_76564 = tmp2_76562 * x_76563;
                float tmp4_76565 = x_76550 * tmp3_76564;
                float defunc_0_f_res_76566;
                
                if (cond_76551) {
                    defunc_0_f_res_76566 = 0.0F;
                } else {
                    int64_t i_76567 = add64(max_res_76506, i_76548);
                    float defunc_0_add_arg_76568 =
                          ((float *) mem_75393)[i_76567];
                    
                    defunc_0_f_res_76566 = defunc_0_add_arg_76568;
                }
                
                float x_76569 = a0_76546 * tmp4_76565;
                float defunc_9_fit_fun_res_76570 = defunc_0_f_res_76566 *
                      x_76569;
                float defunc_1_op_res_76571 = defunc_9_fit_fun_res_76570 +
                      redout_76549;
                float redout_tmp_76592 = defunc_1_op_res_76571;
                
                redout_76549 = redout_tmp_76592;
            }
            defunc_2_reduce_res_76547 = redout_76549;
            ((float *) mem_75453)[i_76438] = defunc_2_reduce_res_76547;
        }
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_75469.mem + gtid_71629 * n_m_70288 * (int64_t) 4,
                    mem_75453 + (int64_t) 0, n_m_70288 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75378);
    free(mem_75393);
    free(mem_75396);
    free(mem_75423);
    free(mem_75438);
    free(mem_75453);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81684_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81684_end -
                 futhark_mc_segmap_parloop_81684_start;
        
        ctx->futhark_mc_segmap_parloop_81684_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81684_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81684_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81682(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71628 = tid;
    int num_tasks_76405 = info.nsubtasks;
    struct futhark_mc_task_81681 *futhark_mc_task_81681 =
                                 (struct futhark_mc_task_81681 *) args;
    struct futhark_context *ctx = futhark_mc_task_81681->ctx;
    uint64_t futhark_mc_segmap_task_81682_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81682_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_task_81681->free_m_70279;
    int64_t n_70280 = futhark_mc_task_81681->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81681->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81681->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81681->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81681->free_i_70294;
    bool x_70295 = futhark_mc_task_81681->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81681->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81681->free_loop_cond_70305;
    float i64_res_70306 = futhark_mc_task_81681->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81681->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75359 = futhark_mc_task_81681->free_bytes_75359;
    int64_t bytes_75362 = futhark_mc_task_81681->free_bytes_75362;
    int64_t bytes_75371 = futhark_mc_task_81681->free_bytes_75371;
    int64_t bytes_75374 = futhark_mc_task_81681->free_bytes_75374;
    struct memblock mem_75469 = {.desc ="mem_75469", .mem =
                                 futhark_mc_task_81681->free_mem_75469, .size =
                                 0, .references =NULL};
    int64_t iter_76406;
    struct futhark_mc_segmap_parloop_struct_81683
    futhark_mc_segmap_parloop_struct_81683;
    
    futhark_mc_segmap_parloop_struct_81683.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81683.free_m_70279 = m_70279;
    futhark_mc_segmap_parloop_struct_81683.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81683.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81683.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81683.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81683.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81683.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81683.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81683.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81683.free_i64_res_70306 = i64_res_70306;
    futhark_mc_segmap_parloop_struct_81683.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81683.free_bytes_75359 = bytes_75359;
    futhark_mc_segmap_parloop_struct_81683.free_bytes_75362 = bytes_75362;
    futhark_mc_segmap_parloop_struct_81683.free_bytes_75371 = bytes_75371;
    futhark_mc_segmap_parloop_struct_81683.free_bytes_75374 = bytes_75374;
    futhark_mc_segmap_parloop_struct_81683.free_mem_75469 = mem_75469.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81684_task;
    
    futhark_mc_segmap_parloop_81684_task.name =
        "futhark_mc_segmap_parloop_81684";
    futhark_mc_segmap_parloop_81684_task.fn = futhark_mc_segmap_parloop_81684;
    futhark_mc_segmap_parloop_81684_task.args =
        &futhark_mc_segmap_parloop_struct_81683;
    futhark_mc_segmap_parloop_81684_task.iterations = iterations;
    futhark_mc_segmap_parloop_81684_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81684_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81684_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81684_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81684_task);
    
    if (futhark_mc_segmap_parloop_81684_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81684_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81684_total_end -
                 futhark_mc_segmap_parloop_81684_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81684_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81684_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81684_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81682_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81682_end -
                 futhark_mc_segmap_task_81682_start;
        
        ctx->futhark_mc_segmap_task_81682_runs[tid]++;
        ctx->futhark_mc_segmap_task_81682_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81682_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81692 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75359;
    int64_t free_bytes_75362;
    int64_t free_bytes_75371;
    int64_t free_bytes_75374;
    unsigned char *free_mem_75469;
};
struct futhark_mc_task_81700 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_71631;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75360;
};
struct futhark_mc_scan_stage_1_parloop_struct_81703 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_71631;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75360;
};
static int futhark_mc_scan_stage_1_parloop_81704(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_71632, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_81703
    *futhark_mc_scan_stage_1_parloop_struct_81703 =
    (struct futhark_mc_scan_stage_1_parloop_struct_81703 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_81703->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_81704_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81704_start = get_wall_time();
    
    int64_t n_70280 =
            futhark_mc_scan_stage_1_parloop_struct_81703->free_n_70280;
    int64_t gtid_71631 =
            futhark_mc_scan_stage_1_parloop_struct_81703->free_gtid_71631;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_81703->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75360 = {.desc ="mem_75360", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_81703->free_mem_75360,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76878 = start;
    int64_t x_76594;
    int64_t x_76595;
    
    x_76594 = (int64_t) 0;
    for (; iter_76878 < end; iter_76878++) {
        int64_t gtid_71633 = iter_76878;
        
        // stage 1 scan body
        {
            float x_76597 = ((float *) Y_mem_75353.mem)[gtid_71631 * n_70280 +
                                                        gtid_71633];
            bool isnan_res_76598;
            
            isnan_res_76598 = futrts_isnan32(x_76597);
            
            bool defunc_0_p_res_76599 = !isnan_res_76598;
            int64_t defunc_0_f_res_76600 = btoi_bool_i64(defunc_0_p_res_76599);
            
            // write mapped values results to memory
            { }
            x_76594 = x_76594;
            // Read next values
            {
                x_76595 = defunc_0_f_res_76600;
            }
            
            int64_t defunc_1_op_res_76596 = add64(x_76594, x_76595);
            
            ((int64_t *) mem_75360.mem)[gtid_71633] = defunc_1_op_res_76596;
            x_76594 = defunc_1_op_res_76596;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81704_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81704_end -
                 futhark_mc_scan_stage_1_parloop_81704_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_81704_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_81704_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_81704_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_81705 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_71631;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75360;
};
static int futhark_mc_scan_stage_3_parloop_81706(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_71632, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_81705
    *futhark_mc_scan_stage_3_parloop_struct_81705 =
    (struct futhark_mc_scan_stage_3_parloop_struct_81705 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_81705->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_81706_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_81706_start = get_wall_time();
    
    int64_t n_70280 =
            futhark_mc_scan_stage_3_parloop_struct_81705->free_n_70280;
    int64_t gtid_71631 =
            futhark_mc_scan_stage_3_parloop_struct_81705->free_gtid_71631;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_81705->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75360 = {.desc ="mem_75360", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_81705->free_mem_75360,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76890 = start;
    int64_t x_76887;
    int64_t x_76888;
    
    if (iter_76890 == (int64_t) 0) {
        x_76887 = (int64_t) 0;
    } else {
        x_76887 = ((int64_t *) mem_75360.mem)[iter_76890 - (int64_t) 1];
    }
    for (; iter_76890 < end; iter_76890++) {
        int64_t gtid_71633 = iter_76890;
        
        // stage 3 scan body
        {
            float x_76597 = ((float *) Y_mem_75353.mem)[gtid_71631 * n_70280 +
                                                        gtid_71633];
            bool isnan_res_76598;
            
            isnan_res_76598 = futrts_isnan32(x_76597);
            
            bool defunc_0_p_res_76599 = !isnan_res_76598;
            int64_t defunc_0_f_res_76600 = btoi_bool_i64(defunc_0_p_res_76599);
            
            x_76887 = x_76887;
            x_76888 = defunc_0_f_res_76600;
            
            int64_t defunc_1_op_res_76889 = add64(x_76887, x_76888);
            
            ((int64_t *) mem_75360.mem)[gtid_71633] = defunc_1_op_res_76889;
            x_76887 = defunc_1_op_res_76889;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_81706_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81706_end -
                 futhark_mc_scan_stage_3_parloop_81706_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_81706_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_81706_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_81706_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_81701(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71632 = tid;
    int num_tasks_76877 = info.nsubtasks;
    struct futhark_mc_task_81700 *futhark_mc_task_81700 =
                                 (struct futhark_mc_task_81700 *) args;
    struct futhark_context *ctx = futhark_mc_task_81700->ctx;
    uint64_t futhark_mc_segscan_task_81701_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_81701_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81700->free_n_70280;
    int64_t gtid_71631 = futhark_mc_task_81700->free_gtid_71631;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81700->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75360 = {.desc ="mem_75360", .mem =
                                 futhark_mc_task_81700->free_mem_75360, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_76884_cached_sizze_81702 = 0;
    unsigned char *scan_stage_2_accum_mem_76884 = NULL;
    int64_t iter_76878;
    struct futhark_mc_scan_stage_1_parloop_struct_81703
    futhark_mc_scan_stage_1_parloop_struct_81703;
    
    futhark_mc_scan_stage_1_parloop_struct_81703.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_81703.free_n_70280 = n_70280;
    futhark_mc_scan_stage_1_parloop_struct_81703.free_gtid_71631 = gtid_71631;
    futhark_mc_scan_stage_1_parloop_struct_81703.free_Y_mem_75353 =
        Y_mem_75353.mem;
    futhark_mc_scan_stage_1_parloop_struct_81703.free_mem_75360 = mem_75360.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_81704_task;
    
    futhark_mc_scan_stage_1_parloop_81704_task.name =
        "futhark_mc_scan_stage_1_parloop_81704";
    futhark_mc_scan_stage_1_parloop_81704_task.fn =
        futhark_mc_scan_stage_1_parloop_81704;
    futhark_mc_scan_stage_1_parloop_81704_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_81703;
    futhark_mc_scan_stage_1_parloop_81704_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_81704_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_81704_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81704_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_81704_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_81704_task);
    
    if (futhark_mc_scan_stage_1_parloop_81704_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81704_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81704_total_end -
                 futhark_mc_scan_stage_1_parloop_81704_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81704_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81704_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81704_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_76877)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_76879;
        int64_t x_76880;
        int64_t offset_76882 = (int64_t) 0;
        int64_t offset_index_76883 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_76884_cached_sizze_81702 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_76884 = realloc(scan_stage_2_accum_mem_76884,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_76884_cached_sizze_81702 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_76884)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_76886 = 0; i_76886 < num_tasks_76877 - 1; i_76886++) {
            offset_76882 = squot64(n_70280, sext_i32_i64(num_tasks_76877));
            if (slt64(sext_i32_i64(i_76886), srem64(n_70280,
                                                    sext_i32_i64(num_tasks_76877)))) {
                offset_76882 += (int64_t) 1;
            }
            offset_index_76883 += offset_76882;
            
            int64_t gtid_71633 = offset_index_76883;
            float x_76597 = ((float *) Y_mem_75353.mem)[gtid_71631 * n_70280 +
                                                        gtid_71633];
            bool isnan_res_76598;
            
            isnan_res_76598 = futrts_isnan32(x_76597);
            
            bool defunc_0_p_res_76599 = !isnan_res_76598;
            int64_t defunc_0_f_res_76600 = btoi_bool_i64(defunc_0_p_res_76599);
            
            // Read carry in
            {
                x_76879 =
                    ((int64_t *) scan_stage_2_accum_mem_76884)[(int64_t) 0];
            }
            // Read next values
            {
                x_76880 = ((int64_t *) mem_75360.mem)[offset_index_76883 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_76881 = add64(x_76879, x_76880);
            
            ((int64_t *) mem_75360.mem)[offset_index_76883 - (int64_t) 1] =
                defunc_1_op_res_76881;
            ((int64_t *) scan_stage_2_accum_mem_76884)[(int64_t) 0] =
                defunc_1_op_res_76881;
        }
        
        int64_t iter_76890 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_81705
        futhark_mc_scan_stage_3_parloop_struct_81705;
        
        futhark_mc_scan_stage_3_parloop_struct_81705.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_81705.free_n_70280 = n_70280;
        futhark_mc_scan_stage_3_parloop_struct_81705.free_gtid_71631 =
            gtid_71631;
        futhark_mc_scan_stage_3_parloop_struct_81705.free_Y_mem_75353 =
            Y_mem_75353.mem;
        futhark_mc_scan_stage_3_parloop_struct_81705.free_mem_75360 =
            mem_75360.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_81706_task;
        
        futhark_mc_scan_stage_3_parloop_81706_task.name =
            "futhark_mc_scan_stage_3_parloop_81706";
        futhark_mc_scan_stage_3_parloop_81706_task.fn =
            futhark_mc_scan_stage_3_parloop_81706;
        futhark_mc_scan_stage_3_parloop_81706_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_81705;
        futhark_mc_scan_stage_3_parloop_81706_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_81706_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_81706_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_81706_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_81706_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_81706_task);
        
        if (futhark_mc_scan_stage_3_parloop_81706_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_81706_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81706_total_end -
                     futhark_mc_scan_stage_3_parloop_81706_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81706_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81706_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81706_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_76884);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_81701_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_81701_end -
                 futhark_mc_segscan_task_81701_start;
        
        ctx->futhark_mc_segscan_task_81701_runs[tid]++;
        ctx->futhark_mc_segscan_task_81701_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_81701_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81707 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_71631;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75360;
    unsigned char *free_mem_75363;
    unsigned char *free_mem_75366;
};
struct futhark_mc_segmap_parloop_struct_81709 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_71631;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75360;
    unsigned char *free_mem_75363;
    unsigned char *free_mem_75366;
};
static int futhark_mc_segmap_parloop_81710(void *args, int64_t start,
                                           int64_t end, int flat_tid_71634,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81709
    *futhark_mc_segmap_parloop_struct_81709 =
    (struct futhark_mc_segmap_parloop_struct_81709 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81709->ctx;
    uint64_t futhark_mc_segmap_parloop_81710_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81710_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81709->free_n_70280;
    int64_t gtid_71631 =
            futhark_mc_segmap_parloop_struct_81709->free_gtid_71631;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81709->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75360 = {.desc ="mem_75360", .mem =
                                 futhark_mc_segmap_parloop_struct_81709->free_mem_75360,
                                 .size =0, .references =NULL};
    struct memblock mem_75363 = {.desc ="mem_75363", .mem =
                                 futhark_mc_segmap_parloop_struct_81709->free_mem_75363,
                                 .size =0, .references =NULL};
    struct memblock mem_75366 = {.desc ="mem_75366", .mem =
                                 futhark_mc_segmap_parloop_struct_81709->free_mem_75366,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76894 = start;
    
    for (; iter_76894 < end; iter_76894++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76897 = n_70280;
        int64_t gtid_71635 = iter_76894;
        int64_t remnant_76898 = iter_76894 - gtid_71635;
        float x_76601 = ((float *) Y_mem_75353.mem)[gtid_71631 * n_70280 +
                                                    gtid_71635];
        bool isnan_res_76602;
        
        isnan_res_76602 = futrts_isnan32(x_76601);
        
        bool defunc_0_p_res_76603 = !isnan_res_76602;
        int64_t defunc_1_f_res_76604;
        
        if (defunc_0_p_res_76603) {
            int64_t x_76895 = ((int64_t *) mem_75360.mem)[gtid_71635];
            int64_t defunc_1_f_res_t_res_76896 = sub64(x_76895, (int64_t) 1);
            
            defunc_1_f_res_76604 = defunc_1_f_res_t_res_76896;
        } else {
            defunc_1_f_res_76604 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_76604) &&
            slt64(defunc_1_f_res_76604, n_70280)) {
            ((int64_t *) mem_75366.mem)[defunc_1_f_res_76604] = gtid_71635;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_76604) &&
            slt64(defunc_1_f_res_76604, n_70280)) {
            ((float *) mem_75363.mem)[defunc_1_f_res_76604] = x_76601;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81710_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81710_end -
                 futhark_mc_segmap_parloop_81710_start;
        
        ctx->futhark_mc_segmap_parloop_81710_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81710_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81710_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81708(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71634 = tid;
    int num_tasks_76893 = info.nsubtasks;
    struct futhark_mc_task_81707 *futhark_mc_task_81707 =
                                 (struct futhark_mc_task_81707 *) args;
    struct futhark_context *ctx = futhark_mc_task_81707->ctx;
    uint64_t futhark_mc_segmap_task_81708_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81708_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81707->free_n_70280;
    int64_t gtid_71631 = futhark_mc_task_81707->free_gtid_71631;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81707->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75360 = {.desc ="mem_75360", .mem =
                                 futhark_mc_task_81707->free_mem_75360, .size =
                                 0, .references =NULL};
    struct memblock mem_75363 = {.desc ="mem_75363", .mem =
                                 futhark_mc_task_81707->free_mem_75363, .size =
                                 0, .references =NULL};
    struct memblock mem_75366 = {.desc ="mem_75366", .mem =
                                 futhark_mc_task_81707->free_mem_75366, .size =
                                 0, .references =NULL};
    int64_t iter_76894;
    struct futhark_mc_segmap_parloop_struct_81709
    futhark_mc_segmap_parloop_struct_81709;
    
    futhark_mc_segmap_parloop_struct_81709.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81709.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81709.free_gtid_71631 = gtid_71631;
    futhark_mc_segmap_parloop_struct_81709.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81709.free_mem_75360 = mem_75360.mem;
    futhark_mc_segmap_parloop_struct_81709.free_mem_75363 = mem_75363.mem;
    futhark_mc_segmap_parloop_struct_81709.free_mem_75366 = mem_75366.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81710_task;
    
    futhark_mc_segmap_parloop_81710_task.name =
        "futhark_mc_segmap_parloop_81710";
    futhark_mc_segmap_parloop_81710_task.fn = futhark_mc_segmap_parloop_81710;
    futhark_mc_segmap_parloop_81710_task.args =
        &futhark_mc_segmap_parloop_struct_81709;
    futhark_mc_segmap_parloop_81710_task.iterations = iterations;
    futhark_mc_segmap_parloop_81710_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81710_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81710_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81710_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81710_task);
    
    if (futhark_mc_segmap_parloop_81710_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81710_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81710_total_end -
                 futhark_mc_segmap_parloop_81710_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81710_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81710_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81710_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81708_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81708_end -
                 futhark_mc_segmap_task_81708_start;
        
        ctx->futhark_mc_segmap_task_81708_runs[tid]++;
        ctx->futhark_mc_segmap_task_81708_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81708_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81711 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    unsigned char *free_mem_75366;
    unsigned char *free_mem_75369;
};
struct futhark_mc_segmap_parloop_struct_81713 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    unsigned char *free_mem_75366;
    unsigned char *free_mem_75369;
};
static int futhark_mc_segmap_parloop_81714(void *args, int64_t start,
                                           int64_t end, int flat_tid_71636,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81713
    *futhark_mc_segmap_parloop_struct_81713 =
    (struct futhark_mc_segmap_parloop_struct_81713 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81713->ctx;
    uint64_t futhark_mc_segmap_parloop_81714_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81714_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81713->free_n_70280;
    struct memblock mem_75366 = {.desc ="mem_75366", .mem =
                                 futhark_mc_segmap_parloop_struct_81713->free_mem_75366,
                                 .size =0, .references =NULL};
    struct memblock mem_75369 = {.desc ="mem_75369", .mem =
                                 futhark_mc_segmap_parloop_struct_81713->free_mem_75369,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76900 = start;
    
    for (; iter_76900 < end; iter_76900++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76901 = n_70280;
        int64_t gtid_71637 = iter_76900;
        int64_t remnant_76902 = iter_76900 - gtid_71637;
        int64_t x_76607 = ((int64_t *) mem_75366.mem)[gtid_71637];
        int64_t defunc_0_f_res_76608 = add64((int64_t) 1, x_76607);
        
        ((int64_t *) mem_75369.mem)[gtid_71637] = defunc_0_f_res_76608;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81714_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81714_end -
                 futhark_mc_segmap_parloop_81714_start;
        
        ctx->futhark_mc_segmap_parloop_81714_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81714_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81714_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81712(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71636 = tid;
    int num_tasks_76899 = info.nsubtasks;
    struct futhark_mc_task_81711 *futhark_mc_task_81711 =
                                 (struct futhark_mc_task_81711 *) args;
    struct futhark_context *ctx = futhark_mc_task_81711->ctx;
    uint64_t futhark_mc_segmap_task_81712_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81712_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81711->free_n_70280;
    struct memblock mem_75366 = {.desc ="mem_75366", .mem =
                                 futhark_mc_task_81711->free_mem_75366, .size =
                                 0, .references =NULL};
    struct memblock mem_75369 = {.desc ="mem_75369", .mem =
                                 futhark_mc_task_81711->free_mem_75369, .size =
                                 0, .references =NULL};
    int64_t iter_76900;
    struct futhark_mc_segmap_parloop_struct_81713
    futhark_mc_segmap_parloop_struct_81713;
    
    futhark_mc_segmap_parloop_struct_81713.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81713.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81713.free_mem_75366 = mem_75366.mem;
    futhark_mc_segmap_parloop_struct_81713.free_mem_75369 = mem_75369.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81714_task;
    
    futhark_mc_segmap_parloop_81714_task.name =
        "futhark_mc_segmap_parloop_81714";
    futhark_mc_segmap_parloop_81714_task.fn = futhark_mc_segmap_parloop_81714;
    futhark_mc_segmap_parloop_81714_task.args =
        &futhark_mc_segmap_parloop_struct_81713;
    futhark_mc_segmap_parloop_81714_task.iterations = iterations;
    futhark_mc_segmap_parloop_81714_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81714_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81714_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81714_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81714_task);
    
    if (futhark_mc_segmap_parloop_81714_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81714_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81714_total_end -
                 futhark_mc_segmap_parloop_81714_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81714_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81714_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81714_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81712_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81712_end -
                 futhark_mc_segmap_task_81712_start;
        
        ctx->futhark_mc_segmap_task_81712_runs[tid]++;
        ctx->futhark_mc_segmap_task_81712_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81712_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81715 {
    struct futhark_context *ctx;
    int64_t free_q_70282;
    int64_t free_last_res_71792;
    unsigned char *free_mem_75372;
};
struct futhark_mc_segmap_parloop_struct_81717 {
    struct futhark_context *ctx;
    int64_t free_q_70282;
    int64_t free_last_res_71792;
    unsigned char *free_mem_75372;
};
static int futhark_mc_segmap_parloop_81718(void *args, int64_t start,
                                           int64_t end, int flat_tid_71638,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81717
    *futhark_mc_segmap_parloop_struct_81717 =
    (struct futhark_mc_segmap_parloop_struct_81717 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81717->ctx;
    uint64_t futhark_mc_segmap_parloop_81718_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81718_start = get_wall_time();
    
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81717->free_q_70282;
    int64_t last_res_71792 =
            futhark_mc_segmap_parloop_struct_81717->free_last_res_71792;
    struct memblock mem_75372 = {.desc ="mem_75372", .mem =
                                 futhark_mc_segmap_parloop_struct_81717->free_mem_75372,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76904 = start;
    
    for (; iter_76904 < end; iter_76904++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76905 = q_70282;
        int64_t gtid_71639 = iter_76904;
        int64_t remnant_76906 = iter_76904 - gtid_71639;
        bool cond_76609 = sle64(last_res_71792, gtid_71639);
        float defunc_0_f_res_76610;
        
        if (cond_76609) {
            defunc_0_f_res_76610 = 0.0F;
        } else {
            defunc_0_f_res_76610 = 1.0F;
        }
        ((float *) mem_75372.mem)[gtid_71639] = defunc_0_f_res_76610;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81718_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81718_end -
                 futhark_mc_segmap_parloop_81718_start;
        
        ctx->futhark_mc_segmap_parloop_81718_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81718_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81718_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81716(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71638 = tid;
    int num_tasks_76903 = info.nsubtasks;
    struct futhark_mc_task_81715 *futhark_mc_task_81715 =
                                 (struct futhark_mc_task_81715 *) args;
    struct futhark_context *ctx = futhark_mc_task_81715->ctx;
    uint64_t futhark_mc_segmap_task_81716_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81716_start = get_wall_time();
    
    int64_t q_70282 = futhark_mc_task_81715->free_q_70282;
    int64_t last_res_71792 = futhark_mc_task_81715->free_last_res_71792;
    struct memblock mem_75372 = {.desc ="mem_75372", .mem =
                                 futhark_mc_task_81715->free_mem_75372, .size =
                                 0, .references =NULL};
    int64_t iter_76904;
    struct futhark_mc_segmap_parloop_struct_81717
    futhark_mc_segmap_parloop_struct_81717;
    
    futhark_mc_segmap_parloop_struct_81717.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81717.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81717.free_last_res_71792 = last_res_71792;
    futhark_mc_segmap_parloop_struct_81717.free_mem_75372 = mem_75372.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81718_task;
    
    futhark_mc_segmap_parloop_81718_task.name =
        "futhark_mc_segmap_parloop_81718";
    futhark_mc_segmap_parloop_81718_task.fn = futhark_mc_segmap_parloop_81718;
    futhark_mc_segmap_parloop_81718_task.args =
        &futhark_mc_segmap_parloop_struct_81717;
    futhark_mc_segmap_parloop_81718_task.iterations = iterations;
    futhark_mc_segmap_parloop_81718_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81718_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81718_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81718_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81718_task);
    
    if (futhark_mc_segmap_parloop_81718_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81718_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81718_total_end -
                 futhark_mc_segmap_parloop_81718_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81718_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81718_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81718_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81716_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81716_end -
                 futhark_mc_segmap_task_81716_start;
        
        ctx->futhark_mc_segmap_task_81716_runs[tid]++;
        ctx->futhark_mc_segmap_task_81716_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81716_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81719 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_71792;
    int64_t free_min_arg_71807;
    int64_t free_min_arg_71808;
    int64_t free_min_res_71809;
    float free_max_res_71813;
    unsigned char *free_mem_75363;
    unsigned char *free_mem_75366;
    unsigned char *free_mem_75369;
    unsigned char *free_mem_75372;
    unsigned char *free_mem_75375;
};
struct futhark_mc_segmap_parloop_struct_81721 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_71792;
    int64_t free_min_arg_71807;
    int64_t free_min_arg_71808;
    int64_t free_min_res_71809;
    float free_max_res_71813;
    unsigned char *free_mem_75363;
    unsigned char *free_mem_75366;
    unsigned char *free_mem_75369;
    unsigned char *free_mem_75372;
    unsigned char *free_mem_75375;
};
static int futhark_mc_segmap_parloop_81722(void *args, int64_t start,
                                           int64_t end, int flat_tid_71640,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81721
    *futhark_mc_segmap_parloop_struct_81721 =
    (struct futhark_mc_segmap_parloop_struct_81721 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81721->ctx;
    uint64_t futhark_mc_segmap_parloop_81722_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81722_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81721->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81721->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81721->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81721->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81721->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81721->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81721->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81721->free_loop_cond_70305;
    int64_t last_res_71792 =
            futhark_mc_segmap_parloop_struct_81721->free_last_res_71792;
    int64_t min_arg_71807 =
            futhark_mc_segmap_parloop_struct_81721->free_min_arg_71807;
    int64_t min_arg_71808 =
            futhark_mc_segmap_parloop_struct_81721->free_min_arg_71808;
    int64_t min_res_71809 =
            futhark_mc_segmap_parloop_struct_81721->free_min_res_71809;
    float max_res_71813 =
          futhark_mc_segmap_parloop_struct_81721->free_max_res_71813;
    struct memblock mem_75363 = {.desc ="mem_75363", .mem =
                                 futhark_mc_segmap_parloop_struct_81721->free_mem_75363,
                                 .size =0, .references =NULL};
    struct memblock mem_75366 = {.desc ="mem_75366", .mem =
                                 futhark_mc_segmap_parloop_struct_81721->free_mem_75366,
                                 .size =0, .references =NULL};
    struct memblock mem_75369 = {.desc ="mem_75369", .mem =
                                 futhark_mc_segmap_parloop_struct_81721->free_mem_75369,
                                 .size =0, .references =NULL};
    struct memblock mem_75372 = {.desc ="mem_75372", .mem =
                                 futhark_mc_segmap_parloop_struct_81721->free_mem_75372,
                                 .size =0, .references =NULL};
    struct memblock mem_75375 = {.desc ="mem_75375", .mem =
                                 futhark_mc_segmap_parloop_struct_81721->free_mem_75375,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76908 = start;
    
    for (; iter_76908 < end; iter_76908++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77007 = n_m_70288;
        int64_t gtid_71641 = iter_76908;
        int64_t remnant_77008 = iter_76908 - gtid_71641;
        int64_t min_arg_76743 = mul64(jump_70284, gtid_71641);
        int64_t min_res_76744 = smin64(i_70294, min_arg_76743);
        int64_t defunc_0_g_res_76745 = add64((int64_t) 1, min_res_76744);
        bool init_idx_76746;
        int64_t init_idx_76747;
        int64_t init_idx_76748;
        bool loop_while_76909;
        int64_t low_76910;
        int64_t high_76911;
        
        loop_while_76909 = x_70295;
        low_76910 = (int64_t) 0;
        high_76911 = i_70294;
        while (loop_while_76909) {
            int64_t x_76912 = add64(low_76910, high_76911);
            int64_t mid_76913 = sdiv64(x_76912, (int64_t) 2);
            bool x_76914 = sle64((int64_t) 0, mid_76913);
            bool y_76915 = slt64(mid_76913, n_70280);
            bool bounds_check_76916 = x_76914 && y_76915;
            bool index_certs_76917;
            
            if (!bounds_check_76916) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_76913,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t mid_id_76918 = ((int64_t *) mem_75369.mem)[mid_76913];
            bool cond_76919 = slt64(mid_id_76918, (int64_t) 0);
            int64_t mid_idx_76920;
            
            if (cond_76919) {
                mid_idx_76920 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_76920 = mid_id_76918;
            }
            
            bool cond_76921 = sle64(defunc_0_g_res_76745, mid_idx_76920);
            int64_t loopres_76922;
            int64_t loopres_76923;
            
            if (cond_76921) {
                int64_t loopres_t_res_76924 = sub64(mid_76913, (int64_t) 1);
                
                loopres_76922 = low_76910;
                loopres_76923 = loopres_t_res_76924;
            } else {
                int64_t loopres_f_res_76925 = add64((int64_t) 1, mid_76913);
                
                loopres_76922 = loopres_f_res_76925;
                loopres_76923 = high_76911;
            }
            
            bool loop_cond_76926 = sle64(loopres_76922, loopres_76923);
            bool loop_while_tmp_77009 = loop_cond_76926;
            int64_t low_tmp_77010 = loopres_76922;
            int64_t high_tmp_77011 = loopres_76923;
            
            loop_while_76909 = loop_while_tmp_77009;
            low_76910 = low_tmp_77010;
            high_76911 = high_tmp_77011;
        }
        init_idx_76746 = loop_while_76909;
        init_idx_76747 = low_76910;
        init_idx_76748 = high_76911;
        
        bool idx_76767;
        int64_t idx_76768;
        int64_t idx_76769;
        int64_t idx_76770;
        bool loop_while_76927;
        int64_t l_idx_76928;
        int64_t r_idx_76929;
        int64_t span_76930;
        
        loop_while_76927 = loop_cond_70305;
        l_idx_76928 = init_idx_76747;
        r_idx_76929 = init_idx_76747;
        span_76930 = (int64_t) 1;
        while (loop_while_76927) {
            int64_t max_arg_76931 = sub64(l_idx_76928, (int64_t) 1);
            int64_t max_res_76932 = smax64((int64_t) 0, max_arg_76931);
            int64_t min_arg_76933 = add64((int64_t) 1, r_idx_76929);
            int64_t min_res_76934 = smin64(min_arg_71807, min_arg_76933);
            bool x_76935 = sle64((int64_t) 0, max_res_76932);
            bool y_76936 = slt64(max_res_76932, n_70280);
            bool bounds_check_76937 = x_76935 && y_76936;
            bool index_certs_76938;
            
            if (!bounds_check_76937) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_76932,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_76939 = ((int64_t *) mem_75369.mem)[max_res_76932];
            int64_t abs_arg_76940 = sub64(x_76939, defunc_0_g_res_76745);
            int64_t abs_res_76941 = abs64(abs_arg_76940);
            bool x_76942 = sle64((int64_t) 0, min_res_76934);
            bool y_76943 = slt64(min_res_76934, n_70280);
            bool bounds_check_76944 = x_76942 && y_76943;
            bool index_certs_76945;
            
            if (!bounds_check_76944) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_76934,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_76946 = ((int64_t *) mem_75369.mem)[min_res_76934];
            int64_t abs_arg_76947 = sub64(x_76946, defunc_0_g_res_76745);
            int64_t abs_res_76948 = abs64(abs_arg_76947);
            bool cond_76949 = max_res_76932 == l_idx_76928;
            int64_t loopres_76950;
            int64_t loopres_76951;
            int64_t loopres_76952;
            
            if (cond_76949) {
                loopres_76950 = l_idx_76928;
                loopres_76951 = r_idx_76929;
                loopres_76952 = min_res_70300;
            } else {
                bool cond_76953 = slt64(abs_res_76941, abs_res_76948);
                bool cond_f_res_76954 = min_res_76934 == r_idx_76929;
                bool x_76955 = !cond_76953;
                bool y_76956 = cond_f_res_76954 && x_76955;
                bool cond_76957 = cond_76953 || y_76956;
                int64_t loopres_f_res_76958;
                
                if (cond_76957) {
                    loopres_f_res_76958 = max_res_76932;
                } else {
                    loopres_f_res_76958 = l_idx_76928;
                }
                
                int64_t loopres_f_res_76959;
                
                if (cond_76957) {
                    loopres_f_res_76959 = r_idx_76929;
                } else {
                    loopres_f_res_76959 = min_res_76934;
                }
                
                int64_t loopres_f_res_76960;
                
                if (cond_76957) {
                    int64_t loopres_f_res_t_res_76961 = add64((int64_t) 1,
                                                              span_76930);
                    
                    loopres_f_res_76960 = loopres_f_res_t_res_76961;
                } else {
                    int64_t loopres_f_res_f_res_76962 = add64((int64_t) 1,
                                                              span_76930);
                    
                    loopres_f_res_76960 = loopres_f_res_f_res_76962;
                }
                loopres_76950 = loopres_f_res_76958;
                loopres_76951 = loopres_f_res_76959;
                loopres_76952 = loopres_f_res_76960;
            }
            
            bool loop_cond_76963 = slt64(loopres_76952, min_res_70300);
            bool loop_while_tmp_77012 = loop_cond_76963;
            int64_t l_idx_tmp_77013 = loopres_76950;
            int64_t r_idx_tmp_77014 = loopres_76951;
            int64_t span_tmp_77015 = loopres_76952;
            
            loop_while_76927 = loop_while_tmp_77012;
            l_idx_76928 = l_idx_tmp_77013;
            r_idx_76929 = r_idx_tmp_77014;
            span_76930 = span_tmp_77015;
        }
        idx_76767 = loop_while_76927;
        idx_76768 = l_idx_76928;
        idx_76769 = r_idx_76929;
        idx_76770 = span_76930;
        
        int64_t min_res_76808 = smin64(min_arg_71808, idx_76768);
        int64_t max_res_76809 = smax64((int64_t) 0, min_res_76808);
        int64_t x_76810 = add64(min_res_71809, max_res_76809);
        int64_t r_76811 = sub64(x_76810, (int64_t) 1);
        bool x_76812 = sle64((int64_t) 0, r_76811);
        bool y_76813 = slt64(r_76811, n_70280);
        bool bounds_check_76814 = x_76812 && y_76813;
        bool index_certs_76815;
        
        if (!bounds_check_76814) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_76811,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_76816 = ((int64_t *) mem_75366.mem)[r_76811];
        int64_t abs_arg_76817 = sub64(x_76816, min_res_76744);
        int64_t abs_res_76818 = abs64(abs_arg_76817);
        bool x_76819 = sle64((int64_t) 0, max_res_76809);
        bool y_76820 = slt64(max_res_76809, n_70280);
        bool bounds_check_76821 = x_76819 && y_76820;
        bool index_certs_76822;
        
        if (!bounds_check_76821) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_76809,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_76823 = ((int64_t *) mem_75366.mem)[max_res_76809];
        int64_t abs_arg_76824 = sub64(x_76823, min_res_76744);
        int64_t abs_res_76825 = abs64(abs_arg_76824);
        int64_t max_res_76826 = smax64(abs_res_76818, abs_res_76825);
        float defunc_0_f_res_76827 = sitofp_i64_f32(max_res_76826);
        float defunc_1_f_res_76828 = max_res_71813 + defunc_0_f_res_76827;
        float defunc_2_reduce_res_76829;
        float redout_76965 = 0.0F;
        
        for (int64_t i_76964 = 0; i_76964 < q_70282; i_76964++) {
            float x_76966 = ((float *) mem_75372.mem)[i_76964];
            bool cond_76967 = sle64(last_res_71792, i_76964);
            int64_t defunc_0_f_res_76968;
            
            if (cond_76967) {
                defunc_0_f_res_76968 = (int64_t) 0;
            } else {
                int64_t i_76969 = add64(max_res_76809, i_76964);
                int64_t defunc_0_add_arg_76970 =
                        ((int64_t *) mem_75366.mem)[i_76969];
                int64_t defunc_1_add_res_76971 = add64((int64_t) 1,
                                                       defunc_0_add_arg_76970);
                
                defunc_0_f_res_76968 = defunc_1_add_res_76971;
            }
            
            int64_t binop_p_76972 = sub64(defunc_0_f_res_76968, min_res_76744);
            float defunc_0_f_res_76973 = sitofp_i64_f32(binop_p_76972);
            float abs_res_76974 = (float) fabs(defunc_0_f_res_76973);
            float tmp1_76975 = abs_res_76974 / defunc_1_f_res_76828;
            float x_76976 = tmp1_76975 * tmp1_76975;
            float y_76977 = tmp1_76975 * x_76976;
            float tmp2_76978 = 1.0F - y_76977;
            float x_76979 = tmp2_76978 * tmp2_76978;
            float tmp3_76980 = tmp2_76978 * x_76979;
            float w_j_76981 = x_76966 * tmp3_76980;
            float defunc_1_op_res_76982 = w_j_76981 + redout_76965;
            float redout_tmp_77016 = defunc_1_op_res_76982;
            
            redout_76965 = redout_tmp_77016;
        }
        defunc_2_reduce_res_76829 = redout_76965;
        
        float a0_76849 = 1.0F / defunc_2_reduce_res_76829;
        float defunc_2_reduce_res_76850;
        float redout_76984 = 0.0F;
        
        for (int64_t i_76983 = 0; i_76983 < q_70282; i_76983++) {
            float x_76985 = ((float *) mem_75372.mem)[i_76983];
            bool cond_76986 = sle64(last_res_71792, i_76983);
            int64_t defunc_0_f_res_76987;
            
            if (cond_76986) {
                defunc_0_f_res_76987 = (int64_t) 0;
            } else {
                int64_t i_76988 = add64(max_res_76809, i_76983);
                int64_t defunc_0_add_arg_76989 =
                        ((int64_t *) mem_75366.mem)[i_76988];
                int64_t defunc_1_add_res_76990 = add64((int64_t) 1,
                                                       defunc_0_add_arg_76989);
                
                defunc_0_f_res_76987 = defunc_1_add_res_76990;
            }
            
            int64_t binop_p_76991 = sub64(defunc_0_f_res_76987, min_res_76744);
            float defunc_0_f_res_76992 = sitofp_i64_f32(binop_p_76991);
            float abs_res_76993 = (float) fabs(defunc_0_f_res_76992);
            float tmp1_76994 = abs_res_76993 / defunc_1_f_res_76828;
            float x_76995 = tmp1_76994 * tmp1_76994;
            float y_76996 = tmp1_76994 * x_76995;
            float tmp2_76997 = 1.0F - y_76996;
            float x_76998 = tmp2_76997 * tmp2_76997;
            float tmp3_76999 = tmp2_76997 * x_76998;
            float tmp4_77000 = x_76985 * tmp3_76999;
            float defunc_0_f_res_77001;
            
            if (cond_76986) {
                defunc_0_f_res_77001 = 0.0F;
            } else {
                int64_t i_77002 = add64(max_res_76809, i_76983);
                float defunc_0_add_arg_77003 =
                      ((float *) mem_75363.mem)[i_77002];
                
                defunc_0_f_res_77001 = defunc_0_add_arg_77003;
            }
            
            float x_77004 = a0_76849 * tmp4_77000;
            float defunc_9_fit_fun_res_77005 = defunc_0_f_res_77001 * x_77004;
            float defunc_1_op_res_77006 = defunc_9_fit_fun_res_77005 +
                  redout_76984;
            float redout_tmp_77017 = defunc_1_op_res_77006;
            
            redout_76984 = redout_tmp_77017;
        }
        defunc_2_reduce_res_76850 = redout_76984;
        ((float *) mem_75375.mem)[gtid_71641] = defunc_2_reduce_res_76850;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81722_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81722_end -
                 futhark_mc_segmap_parloop_81722_start;
        
        ctx->futhark_mc_segmap_parloop_81722_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81722_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81722_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81720(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71640 = tid;
    int num_tasks_76907 = info.nsubtasks;
    struct futhark_mc_task_81719 *futhark_mc_task_81719 =
                                 (struct futhark_mc_task_81719 *) args;
    struct futhark_context *ctx = futhark_mc_task_81719->ctx;
    uint64_t futhark_mc_segmap_task_81720_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81720_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81719->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81719->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81719->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81719->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81719->free_i_70294;
    bool x_70295 = futhark_mc_task_81719->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81719->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81719->free_loop_cond_70305;
    int64_t last_res_71792 = futhark_mc_task_81719->free_last_res_71792;
    int64_t min_arg_71807 = futhark_mc_task_81719->free_min_arg_71807;
    int64_t min_arg_71808 = futhark_mc_task_81719->free_min_arg_71808;
    int64_t min_res_71809 = futhark_mc_task_81719->free_min_res_71809;
    float max_res_71813 = futhark_mc_task_81719->free_max_res_71813;
    struct memblock mem_75363 = {.desc ="mem_75363", .mem =
                                 futhark_mc_task_81719->free_mem_75363, .size =
                                 0, .references =NULL};
    struct memblock mem_75366 = {.desc ="mem_75366", .mem =
                                 futhark_mc_task_81719->free_mem_75366, .size =
                                 0, .references =NULL};
    struct memblock mem_75369 = {.desc ="mem_75369", .mem =
                                 futhark_mc_task_81719->free_mem_75369, .size =
                                 0, .references =NULL};
    struct memblock mem_75372 = {.desc ="mem_75372", .mem =
                                 futhark_mc_task_81719->free_mem_75372, .size =
                                 0, .references =NULL};
    struct memblock mem_75375 = {.desc ="mem_75375", .mem =
                                 futhark_mc_task_81719->free_mem_75375, .size =
                                 0, .references =NULL};
    int64_t iter_76908;
    struct futhark_mc_segmap_parloop_struct_81721
    futhark_mc_segmap_parloop_struct_81721;
    
    futhark_mc_segmap_parloop_struct_81721.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81721.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81721.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81721.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81721.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81721.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81721.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81721.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81721.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81721.free_last_res_71792 = last_res_71792;
    futhark_mc_segmap_parloop_struct_81721.free_min_arg_71807 = min_arg_71807;
    futhark_mc_segmap_parloop_struct_81721.free_min_arg_71808 = min_arg_71808;
    futhark_mc_segmap_parloop_struct_81721.free_min_res_71809 = min_res_71809;
    futhark_mc_segmap_parloop_struct_81721.free_max_res_71813 = max_res_71813;
    futhark_mc_segmap_parloop_struct_81721.free_mem_75363 = mem_75363.mem;
    futhark_mc_segmap_parloop_struct_81721.free_mem_75366 = mem_75366.mem;
    futhark_mc_segmap_parloop_struct_81721.free_mem_75369 = mem_75369.mem;
    futhark_mc_segmap_parloop_struct_81721.free_mem_75372 = mem_75372.mem;
    futhark_mc_segmap_parloop_struct_81721.free_mem_75375 = mem_75375.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81722_task;
    
    futhark_mc_segmap_parloop_81722_task.name =
        "futhark_mc_segmap_parloop_81722";
    futhark_mc_segmap_parloop_81722_task.fn = futhark_mc_segmap_parloop_81722;
    futhark_mc_segmap_parloop_81722_task.args =
        &futhark_mc_segmap_parloop_struct_81721;
    futhark_mc_segmap_parloop_81722_task.iterations = iterations;
    futhark_mc_segmap_parloop_81722_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81722_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81722_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81722_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81722_task);
    
    if (futhark_mc_segmap_parloop_81722_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81722_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81722_total_end -
                 futhark_mc_segmap_parloop_81722_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81722_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81722_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81722_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81720_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81720_end -
                 futhark_mc_segmap_task_81720_start;
        
        ctx->futhark_mc_segmap_task_81720_runs[tid]++;
        ctx->futhark_mc_segmap_task_81720_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81720_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81724 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_71792;
    int64_t free_min_arg_71807;
    int64_t free_min_arg_71808;
    int64_t free_min_res_71809;
    float free_max_res_71813;
    unsigned char *free_mem_75363;
    unsigned char *free_mem_75366;
    unsigned char *free_mem_75369;
    unsigned char *free_mem_75372;
    unsigned char *free_mem_75375;
};
struct futhark_mc_task_81726 {
    struct futhark_context *ctx;
    int64_t free_last_res_71792;
    unsigned char *free_mem_75366;
    unsigned char *free_mem_75372;
    int64_t free_min_res_76612;
    int64_t free_max_res_76677;
    float free_defunc_1_f_res_76696;
    float *retval_defunc_2_reduce_res_76697;
};
struct futhark_mc_segred_stage_1_parloop_struct_81729 {
    struct futhark_context *ctx;
    int64_t free_last_res_71792;
    unsigned char *free_mem_75366;
    unsigned char *free_mem_75372;
    int64_t free_min_res_76612;
    int64_t free_max_res_76677;
    float free_defunc_1_f_res_76696;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_77127;
};
static int futhark_mc_segred_stage_1_parloop_81730(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_71644, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81729
    *futhark_mc_segred_stage_1_parloop_struct_81729 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81729 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81729->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81730_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81730_start = get_wall_time();
    
    int64_t last_res_71792 =
            futhark_mc_segred_stage_1_parloop_struct_81729->free_last_res_71792;
    struct memblock mem_75366 = {.desc ="mem_75366", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81729->free_mem_75366,
                                 .size =0, .references =NULL};
    struct memblock mem_75372 = {.desc ="mem_75372", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81729->free_mem_75372,
                                 .size =0, .references =NULL};
    int64_t min_res_76612 =
            futhark_mc_segred_stage_1_parloop_struct_81729->free_min_res_76612;
    int64_t max_res_76677 =
            futhark_mc_segred_stage_1_parloop_struct_81729->free_max_res_76677;
    float defunc_1_f_res_76696 =
          futhark_mc_segred_stage_1_parloop_struct_81729->free_defunc_1_f_res_76696;
    struct memblock reduce_stage_1_tid_res_arr_mem_77127 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_77127",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81729->free_reduce_stage_1_tid_res_arr_mem_77127,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77129 = start;
    float x_77074;
    float x_77075;
    float local_acc_77130 = 0.0F;
    
    for (; iter_77129 < end; iter_77129++) {
        int64_t gtid_71645 = iter_77129;
        float x_77077 = ((float *) mem_75372.mem)[gtid_71645];
        bool cond_77078 = sle64(last_res_71792, gtid_71645);
        int64_t defunc_0_f_res_77079;
        
        if (cond_77078) {
            defunc_0_f_res_77079 = (int64_t) 0;
        } else {
            int64_t i_77080 = add64(gtid_71645, max_res_76677);
            int64_t defunc_0_add_arg_77081 =
                    ((int64_t *) mem_75366.mem)[i_77080];
            int64_t defunc_1_add_res_77082 = add64((int64_t) 1,
                                                   defunc_0_add_arg_77081);
            
            defunc_0_f_res_77079 = defunc_1_add_res_77082;
        }
        
        int64_t binop_p_77083 = sub64(defunc_0_f_res_77079, min_res_76612);
        float defunc_0_f_res_77084 = sitofp_i64_f32(binop_p_77083);
        float abs_res_77085 = (float) fabs(defunc_0_f_res_77084);
        float tmp1_77086 = abs_res_77085 / defunc_1_f_res_76696;
        float x_77087 = tmp1_77086 * tmp1_77086;
        float y_77088 = tmp1_77086 * x_77087;
        float tmp2_77089 = 1.0F - y_77088;
        float x_77090 = tmp2_77089 * tmp2_77089;
        float tmp3_77091 = tmp2_77089 * x_77090;
        float w_j_77092 = x_77077 * tmp3_77091;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_77074 = local_acc_77130;
        }
        // Load next params
        {
            x_77075 = w_j_77092;
        }
        // Red body
        {
            float defunc_1_op_res_77076 = x_77074 + x_77075;
            
            local_acc_77130 = defunc_1_op_res_77076;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_77127.mem)[flat_tid_71644] =
        local_acc_77130;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81730_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81730_end -
                 futhark_mc_segred_stage_1_parloop_81730_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81730_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81730_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81730_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81727(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71644 = tid;
    int num_tasks_77126 = info.nsubtasks;
    struct futhark_mc_task_81726 *futhark_mc_task_81726 =
                                 (struct futhark_mc_task_81726 *) args;
    struct futhark_context *ctx = futhark_mc_task_81726->ctx;
    uint64_t futhark_mc_segred_task_81727_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81727_start = get_wall_time();
    
    int64_t last_res_71792 = futhark_mc_task_81726->free_last_res_71792;
    struct memblock mem_75366 = {.desc ="mem_75366", .mem =
                                 futhark_mc_task_81726->free_mem_75366, .size =
                                 0, .references =NULL};
    struct memblock mem_75372 = {.desc ="mem_75372", .mem =
                                 futhark_mc_task_81726->free_mem_75372, .size =
                                 0, .references =NULL};
    int64_t min_res_76612 = futhark_mc_task_81726->free_min_res_76612;
    int64_t max_res_76677 = futhark_mc_task_81726->free_max_res_76677;
    float defunc_1_f_res_76696 =
          futhark_mc_task_81726->free_defunc_1_f_res_76696;
    float defunc_2_reduce_res_76697 =
          *futhark_mc_task_81726->retval_defunc_2_reduce_res_76697;
    size_t reduce_stage_1_tid_res_arr_mem_77127_cached_sizze_81728 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_77127 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_77127_cached_sizze_81728 <
        (size_t) ((int64_t) 4 * num_tasks_77126)) {
        reduce_stage_1_tid_res_arr_mem_77127 =
            realloc(reduce_stage_1_tid_res_arr_mem_77127, (int64_t) 4 *
                    num_tasks_77126);
        reduce_stage_1_tid_res_arr_mem_77127_cached_sizze_81728 = (int64_t) 4 *
            num_tasks_77126;
    }
    
    int64_t iter_77129;
    struct futhark_mc_segred_stage_1_parloop_struct_81729
    futhark_mc_segred_stage_1_parloop_struct_81729;
    
    futhark_mc_segred_stage_1_parloop_struct_81729.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81729.free_last_res_71792 =
        last_res_71792;
    futhark_mc_segred_stage_1_parloop_struct_81729.free_mem_75366 =
        mem_75366.mem;
    futhark_mc_segred_stage_1_parloop_struct_81729.free_mem_75372 =
        mem_75372.mem;
    futhark_mc_segred_stage_1_parloop_struct_81729.free_min_res_76612 =
        min_res_76612;
    futhark_mc_segred_stage_1_parloop_struct_81729.free_max_res_76677 =
        max_res_76677;
    futhark_mc_segred_stage_1_parloop_struct_81729.free_defunc_1_f_res_76696 =
        defunc_1_f_res_76696;
    futhark_mc_segred_stage_1_parloop_struct_81729.free_reduce_stage_1_tid_res_arr_mem_77127 =
        reduce_stage_1_tid_res_arr_mem_77127;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81730_task;
    
    futhark_mc_segred_stage_1_parloop_81730_task.name =
        "futhark_mc_segred_stage_1_parloop_81730";
    futhark_mc_segred_stage_1_parloop_81730_task.fn =
        futhark_mc_segred_stage_1_parloop_81730;
    futhark_mc_segred_stage_1_parloop_81730_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81729;
    futhark_mc_segred_stage_1_parloop_81730_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81730_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81730_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81730_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81730_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81730_task);
    
    if (futhark_mc_segred_stage_1_parloop_81730_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81730_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81730_total_end -
                 futhark_mc_segred_stage_1_parloop_81730_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81730_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81730_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81730_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_76697 = 0.0F;
    }
    
    float x_77131;
    float x_77132;
    
    for (int32_t i_77134 = 0; i_77134 < num_tasks_77126; i_77134++) {
        flat_tid_71644 = i_77134;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_77131 = defunc_2_reduce_res_76697;
            }
            // load next params
            {
                x_77132 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_77127)[flat_tid_71644];
            }
            // red body
            {
                float defunc_1_op_res_77133 = x_77131 + x_77132;
                
                defunc_2_reduce_res_76697 = defunc_1_op_res_77133;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_77127);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81727_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81727_end -
                 futhark_mc_segred_task_81727_start;
        
        ctx->futhark_mc_segred_task_81727_runs[tid]++;
        ctx->futhark_mc_segred_task_81727_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81727_iter[tid] += iterations;
    }
    *futhark_mc_task_81726->retval_defunc_2_reduce_res_76697 =
        defunc_2_reduce_res_76697;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81731 {
    struct futhark_context *ctx;
    int64_t free_last_res_71792;
    unsigned char *free_mem_75363;
    unsigned char *free_mem_75366;
    unsigned char *free_mem_75372;
    int64_t free_min_res_76612;
    int64_t free_max_res_76677;
    float free_defunc_1_f_res_76696;
    float free_a0_76717;
    float *retval_defunc_2_reduce_res_76718;
};
struct futhark_mc_segred_stage_1_parloop_struct_81734 {
    struct futhark_context *ctx;
    int64_t free_last_res_71792;
    unsigned char *free_mem_75363;
    unsigned char *free_mem_75366;
    unsigned char *free_mem_75372;
    int64_t free_min_res_76612;
    int64_t free_max_res_76677;
    float free_defunc_1_f_res_76696;
    float free_a0_76717;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_77136;
};
static int futhark_mc_segred_stage_1_parloop_81735(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_71646, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81734
    *futhark_mc_segred_stage_1_parloop_struct_81734 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81734 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81734->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81735_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81735_start = get_wall_time();
    
    int64_t last_res_71792 =
            futhark_mc_segred_stage_1_parloop_struct_81734->free_last_res_71792;
    struct memblock mem_75363 = {.desc ="mem_75363", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81734->free_mem_75363,
                                 .size =0, .references =NULL};
    struct memblock mem_75366 = {.desc ="mem_75366", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81734->free_mem_75366,
                                 .size =0, .references =NULL};
    struct memblock mem_75372 = {.desc ="mem_75372", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81734->free_mem_75372,
                                 .size =0, .references =NULL};
    int64_t min_res_76612 =
            futhark_mc_segred_stage_1_parloop_struct_81734->free_min_res_76612;
    int64_t max_res_76677 =
            futhark_mc_segred_stage_1_parloop_struct_81734->free_max_res_76677;
    float defunc_1_f_res_76696 =
          futhark_mc_segred_stage_1_parloop_struct_81734->free_defunc_1_f_res_76696;
    float a0_76717 =
          futhark_mc_segred_stage_1_parloop_struct_81734->free_a0_76717;
    struct memblock reduce_stage_1_tid_res_arr_mem_77136 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_77136",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81734->free_reduce_stage_1_tid_res_arr_mem_77136,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77138 = start;
    float x_77093;
    float x_77094;
    float local_acc_77139 = 0.0F;
    
    for (; iter_77138 < end; iter_77138++) {
        int64_t gtid_71647 = iter_77138;
        float x_77096 = ((float *) mem_75372.mem)[gtid_71647];
        bool cond_77097 = sle64(last_res_71792, gtid_71647);
        int64_t defunc_0_f_res_77098;
        
        if (cond_77097) {
            defunc_0_f_res_77098 = (int64_t) 0;
        } else {
            int64_t i_77099 = add64(gtid_71647, max_res_76677);
            int64_t defunc_0_add_arg_77100 =
                    ((int64_t *) mem_75366.mem)[i_77099];
            int64_t defunc_1_add_res_77101 = add64((int64_t) 1,
                                                   defunc_0_add_arg_77100);
            
            defunc_0_f_res_77098 = defunc_1_add_res_77101;
        }
        
        int64_t binop_p_77102 = sub64(defunc_0_f_res_77098, min_res_76612);
        float defunc_0_f_res_77103 = sitofp_i64_f32(binop_p_77102);
        float abs_res_77104 = (float) fabs(defunc_0_f_res_77103);
        float tmp1_77105 = abs_res_77104 / defunc_1_f_res_76696;
        float x_77106 = tmp1_77105 * tmp1_77105;
        float y_77107 = tmp1_77105 * x_77106;
        float tmp2_77108 = 1.0F - y_77107;
        float x_77109 = tmp2_77108 * tmp2_77108;
        float tmp3_77110 = tmp2_77108 * x_77109;
        float tmp4_77111 = x_77096 * tmp3_77110;
        float defunc_0_f_res_77112;
        
        if (cond_77097) {
            defunc_0_f_res_77112 = 0.0F;
        } else {
            int64_t i_77113 = add64(gtid_71647, max_res_76677);
            float defunc_0_add_arg_77114 = ((float *) mem_75363.mem)[i_77113];
            
            defunc_0_f_res_77112 = defunc_0_add_arg_77114;
        }
        
        float x_77115 = a0_76717 * tmp4_77111;
        float defunc_9_fit_fun_res_77116 = defunc_0_f_res_77112 * x_77115;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_77093 = local_acc_77139;
        }
        // Load next params
        {
            x_77094 = defunc_9_fit_fun_res_77116;
        }
        // Red body
        {
            float defunc_1_op_res_77095 = x_77093 + x_77094;
            
            local_acc_77139 = defunc_1_op_res_77095;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_77136.mem)[flat_tid_71646] =
        local_acc_77139;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81735_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81735_end -
                 futhark_mc_segred_stage_1_parloop_81735_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81735_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81735_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81735_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81732(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71646 = tid;
    int num_tasks_77135 = info.nsubtasks;
    struct futhark_mc_task_81731 *futhark_mc_task_81731 =
                                 (struct futhark_mc_task_81731 *) args;
    struct futhark_context *ctx = futhark_mc_task_81731->ctx;
    uint64_t futhark_mc_segred_task_81732_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81732_start = get_wall_time();
    
    int64_t last_res_71792 = futhark_mc_task_81731->free_last_res_71792;
    struct memblock mem_75363 = {.desc ="mem_75363", .mem =
                                 futhark_mc_task_81731->free_mem_75363, .size =
                                 0, .references =NULL};
    struct memblock mem_75366 = {.desc ="mem_75366", .mem =
                                 futhark_mc_task_81731->free_mem_75366, .size =
                                 0, .references =NULL};
    struct memblock mem_75372 = {.desc ="mem_75372", .mem =
                                 futhark_mc_task_81731->free_mem_75372, .size =
                                 0, .references =NULL};
    int64_t min_res_76612 = futhark_mc_task_81731->free_min_res_76612;
    int64_t max_res_76677 = futhark_mc_task_81731->free_max_res_76677;
    float defunc_1_f_res_76696 =
          futhark_mc_task_81731->free_defunc_1_f_res_76696;
    float a0_76717 = futhark_mc_task_81731->free_a0_76717;
    float defunc_2_reduce_res_76718 =
          *futhark_mc_task_81731->retval_defunc_2_reduce_res_76718;
    size_t reduce_stage_1_tid_res_arr_mem_77136_cached_sizze_81733 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_77136 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_77136_cached_sizze_81733 <
        (size_t) ((int64_t) 4 * num_tasks_77135)) {
        reduce_stage_1_tid_res_arr_mem_77136 =
            realloc(reduce_stage_1_tid_res_arr_mem_77136, (int64_t) 4 *
                    num_tasks_77135);
        reduce_stage_1_tid_res_arr_mem_77136_cached_sizze_81733 = (int64_t) 4 *
            num_tasks_77135;
    }
    
    int64_t iter_77138;
    struct futhark_mc_segred_stage_1_parloop_struct_81734
    futhark_mc_segred_stage_1_parloop_struct_81734;
    
    futhark_mc_segred_stage_1_parloop_struct_81734.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81734.free_last_res_71792 =
        last_res_71792;
    futhark_mc_segred_stage_1_parloop_struct_81734.free_mem_75363 =
        mem_75363.mem;
    futhark_mc_segred_stage_1_parloop_struct_81734.free_mem_75366 =
        mem_75366.mem;
    futhark_mc_segred_stage_1_parloop_struct_81734.free_mem_75372 =
        mem_75372.mem;
    futhark_mc_segred_stage_1_parloop_struct_81734.free_min_res_76612 =
        min_res_76612;
    futhark_mc_segred_stage_1_parloop_struct_81734.free_max_res_76677 =
        max_res_76677;
    futhark_mc_segred_stage_1_parloop_struct_81734.free_defunc_1_f_res_76696 =
        defunc_1_f_res_76696;
    futhark_mc_segred_stage_1_parloop_struct_81734.free_a0_76717 = a0_76717;
    futhark_mc_segred_stage_1_parloop_struct_81734.free_reduce_stage_1_tid_res_arr_mem_77136 =
        reduce_stage_1_tid_res_arr_mem_77136;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81735_task;
    
    futhark_mc_segred_stage_1_parloop_81735_task.name =
        "futhark_mc_segred_stage_1_parloop_81735";
    futhark_mc_segred_stage_1_parloop_81735_task.fn =
        futhark_mc_segred_stage_1_parloop_81735;
    futhark_mc_segred_stage_1_parloop_81735_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81734;
    futhark_mc_segred_stage_1_parloop_81735_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81735_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81735_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81735_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81735_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81735_task);
    
    if (futhark_mc_segred_stage_1_parloop_81735_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81735_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81735_total_end -
                 futhark_mc_segred_stage_1_parloop_81735_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81735_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81735_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81735_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_76718 = 0.0F;
    }
    
    float x_77140;
    float x_77141;
    
    for (int32_t i_77143 = 0; i_77143 < num_tasks_77135; i_77143++) {
        flat_tid_71646 = i_77143;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_77140 = defunc_2_reduce_res_76718;
            }
            // load next params
            {
                x_77141 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_77136)[flat_tid_71646];
            }
            // red body
            {
                float defunc_1_op_res_77142 = x_77140 + x_77141;
                
                defunc_2_reduce_res_76718 = defunc_1_op_res_77142;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_77136);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81732_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81732_end -
                 futhark_mc_segred_task_81732_start;
        
        ctx->futhark_mc_segred_task_81732_runs[tid]++;
        ctx->futhark_mc_segred_task_81732_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81732_iter[tid] += iterations;
    }
    *futhark_mc_task_81731->retval_defunc_2_reduce_res_76718 =
        defunc_2_reduce_res_76718;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81725(void *args, int64_t start,
                                           int64_t end, int flat_tid_71642,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81724
    *futhark_mc_segmap_parloop_struct_81724 =
    (struct futhark_mc_segmap_parloop_struct_81724 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81724->ctx;
    uint64_t futhark_mc_segmap_parloop_81725_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81725_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81724->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81724->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81724->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81724->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81724->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81724->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81724->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81724->free_loop_cond_70305;
    int64_t last_res_71792 =
            futhark_mc_segmap_parloop_struct_81724->free_last_res_71792;
    int64_t min_arg_71807 =
            futhark_mc_segmap_parloop_struct_81724->free_min_arg_71807;
    int64_t min_arg_71808 =
            futhark_mc_segmap_parloop_struct_81724->free_min_arg_71808;
    int64_t min_res_71809 =
            futhark_mc_segmap_parloop_struct_81724->free_min_res_71809;
    float max_res_71813 =
          futhark_mc_segmap_parloop_struct_81724->free_max_res_71813;
    struct memblock mem_75363 = {.desc ="mem_75363", .mem =
                                 futhark_mc_segmap_parloop_struct_81724->free_mem_75363,
                                 .size =0, .references =NULL};
    struct memblock mem_75366 = {.desc ="mem_75366", .mem =
                                 futhark_mc_segmap_parloop_struct_81724->free_mem_75366,
                                 .size =0, .references =NULL};
    struct memblock mem_75369 = {.desc ="mem_75369", .mem =
                                 futhark_mc_segmap_parloop_struct_81724->free_mem_75369,
                                 .size =0, .references =NULL};
    struct memblock mem_75372 = {.desc ="mem_75372", .mem =
                                 futhark_mc_segmap_parloop_struct_81724->free_mem_75372,
                                 .size =0, .references =NULL};
    struct memblock mem_75375 = {.desc ="mem_75375", .mem =
                                 futhark_mc_segmap_parloop_struct_81724->free_mem_75375,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77018 = start;
    
    for (; iter_77018 < end; iter_77018++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77117 = n_m_70288;
        int64_t gtid_71643 = iter_77018;
        int64_t remnant_77118 = iter_77018 - gtid_71643;
        int64_t min_arg_76611 = mul64(jump_70284, gtid_71643);
        int64_t min_res_76612 = smin64(i_70294, min_arg_76611);
        int64_t defunc_0_g_res_76613 = add64((int64_t) 1, min_res_76612);
        bool init_idx_76614;
        int64_t init_idx_76615;
        int64_t init_idx_76616;
        bool loop_while_77019;
        int64_t low_77020;
        int64_t high_77021;
        
        loop_while_77019 = x_70295;
        low_77020 = (int64_t) 0;
        high_77021 = i_70294;
        while (loop_while_77019) {
            int64_t x_77022 = add64(low_77020, high_77021);
            int64_t mid_77023 = sdiv64(x_77022, (int64_t) 2);
            bool x_77024 = sle64((int64_t) 0, mid_77023);
            bool y_77025 = slt64(mid_77023, n_70280);
            bool bounds_check_77026 = x_77024 && y_77025;
            bool index_certs_77027;
            
            if (!bounds_check_77026) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_77023,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t mid_id_77028 = ((int64_t *) mem_75369.mem)[mid_77023];
            bool cond_77029 = slt64(mid_id_77028, (int64_t) 0);
            int64_t mid_idx_77030;
            
            if (cond_77029) {
                mid_idx_77030 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_77030 = mid_id_77028;
            }
            
            bool cond_77031 = sle64(defunc_0_g_res_76613, mid_idx_77030);
            int64_t loopres_77032;
            int64_t loopres_77033;
            
            if (cond_77031) {
                int64_t loopres_t_res_77034 = sub64(mid_77023, (int64_t) 1);
                
                loopres_77032 = low_77020;
                loopres_77033 = loopres_t_res_77034;
            } else {
                int64_t loopres_f_res_77035 = add64((int64_t) 1, mid_77023);
                
                loopres_77032 = loopres_f_res_77035;
                loopres_77033 = high_77021;
            }
            
            bool loop_cond_77036 = sle64(loopres_77032, loopres_77033);
            bool loop_while_tmp_77119 = loop_cond_77036;
            int64_t low_tmp_77120 = loopres_77032;
            int64_t high_tmp_77121 = loopres_77033;
            
            loop_while_77019 = loop_while_tmp_77119;
            low_77020 = low_tmp_77120;
            high_77021 = high_tmp_77121;
        }
        init_idx_76614 = loop_while_77019;
        init_idx_76615 = low_77020;
        init_idx_76616 = high_77021;
        
        bool idx_76635;
        int64_t idx_76636;
        int64_t idx_76637;
        int64_t idx_76638;
        bool loop_while_77037;
        int64_t l_idx_77038;
        int64_t r_idx_77039;
        int64_t span_77040;
        
        loop_while_77037 = loop_cond_70305;
        l_idx_77038 = init_idx_76615;
        r_idx_77039 = init_idx_76615;
        span_77040 = (int64_t) 1;
        while (loop_while_77037) {
            int64_t max_arg_77041 = sub64(l_idx_77038, (int64_t) 1);
            int64_t max_res_77042 = smax64((int64_t) 0, max_arg_77041);
            int64_t min_arg_77043 = add64((int64_t) 1, r_idx_77039);
            int64_t min_res_77044 = smin64(min_arg_71807, min_arg_77043);
            bool x_77045 = sle64((int64_t) 0, max_res_77042);
            bool y_77046 = slt64(max_res_77042, n_70280);
            bool bounds_check_77047 = x_77045 && y_77046;
            bool index_certs_77048;
            
            if (!bounds_check_77047) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_77042,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_77049 = ((int64_t *) mem_75369.mem)[max_res_77042];
            int64_t abs_arg_77050 = sub64(x_77049, defunc_0_g_res_76613);
            int64_t abs_res_77051 = abs64(abs_arg_77050);
            bool x_77052 = sle64((int64_t) 0, min_res_77044);
            bool y_77053 = slt64(min_res_77044, n_70280);
            bool bounds_check_77054 = x_77052 && y_77053;
            bool index_certs_77055;
            
            if (!bounds_check_77054) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_77044,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_77056 = ((int64_t *) mem_75369.mem)[min_res_77044];
            int64_t abs_arg_77057 = sub64(x_77056, defunc_0_g_res_76613);
            int64_t abs_res_77058 = abs64(abs_arg_77057);
            bool cond_77059 = max_res_77042 == l_idx_77038;
            int64_t loopres_77060;
            int64_t loopres_77061;
            int64_t loopres_77062;
            
            if (cond_77059) {
                loopres_77060 = l_idx_77038;
                loopres_77061 = r_idx_77039;
                loopres_77062 = min_res_70300;
            } else {
                bool cond_77063 = slt64(abs_res_77051, abs_res_77058);
                bool cond_f_res_77064 = min_res_77044 == r_idx_77039;
                bool x_77065 = !cond_77063;
                bool y_77066 = cond_f_res_77064 && x_77065;
                bool cond_77067 = cond_77063 || y_77066;
                int64_t loopres_f_res_77068;
                
                if (cond_77067) {
                    loopres_f_res_77068 = max_res_77042;
                } else {
                    loopres_f_res_77068 = l_idx_77038;
                }
                
                int64_t loopres_f_res_77069;
                
                if (cond_77067) {
                    loopres_f_res_77069 = r_idx_77039;
                } else {
                    loopres_f_res_77069 = min_res_77044;
                }
                
                int64_t loopres_f_res_77070;
                
                if (cond_77067) {
                    int64_t loopres_f_res_t_res_77071 = add64((int64_t) 1,
                                                              span_77040);
                    
                    loopres_f_res_77070 = loopres_f_res_t_res_77071;
                } else {
                    int64_t loopres_f_res_f_res_77072 = add64((int64_t) 1,
                                                              span_77040);
                    
                    loopres_f_res_77070 = loopres_f_res_f_res_77072;
                }
                loopres_77060 = loopres_f_res_77068;
                loopres_77061 = loopres_f_res_77069;
                loopres_77062 = loopres_f_res_77070;
            }
            
            bool loop_cond_77073 = slt64(loopres_77062, min_res_70300);
            bool loop_while_tmp_77122 = loop_cond_77073;
            int64_t l_idx_tmp_77123 = loopres_77060;
            int64_t r_idx_tmp_77124 = loopres_77061;
            int64_t span_tmp_77125 = loopres_77062;
            
            loop_while_77037 = loop_while_tmp_77122;
            l_idx_77038 = l_idx_tmp_77123;
            r_idx_77039 = r_idx_tmp_77124;
            span_77040 = span_tmp_77125;
        }
        idx_76635 = loop_while_77037;
        idx_76636 = l_idx_77038;
        idx_76637 = r_idx_77039;
        idx_76638 = span_77040;
        
        int64_t min_res_76676 = smin64(min_arg_71808, idx_76636);
        int64_t max_res_76677 = smax64((int64_t) 0, min_res_76676);
        int64_t x_76678 = add64(min_res_71809, max_res_76677);
        int64_t r_76679 = sub64(x_76678, (int64_t) 1);
        bool x_76680 = sle64((int64_t) 0, r_76679);
        bool y_76681 = slt64(r_76679, n_70280);
        bool bounds_check_76682 = x_76680 && y_76681;
        bool index_certs_76683;
        
        if (!bounds_check_76682) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_76679,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_76684 = ((int64_t *) mem_75366.mem)[r_76679];
        int64_t abs_arg_76685 = sub64(x_76684, min_res_76612);
        int64_t abs_res_76686 = abs64(abs_arg_76685);
        bool x_76687 = sle64((int64_t) 0, max_res_76677);
        bool y_76688 = slt64(max_res_76677, n_70280);
        bool bounds_check_76689 = x_76687 && y_76688;
        bool index_certs_76690;
        
        if (!bounds_check_76689) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_76677,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_76691 = ((int64_t *) mem_75366.mem)[max_res_76677];
        int64_t abs_arg_76692 = sub64(x_76691, min_res_76612);
        int64_t abs_res_76693 = abs64(abs_arg_76692);
        int64_t max_res_76694 = smax64(abs_res_76686, abs_res_76693);
        float defunc_0_f_res_76695 = sitofp_i64_f32(max_res_76694);
        float defunc_1_f_res_76696 = max_res_71813 + defunc_0_f_res_76695;
        float defunc_2_reduce_res_76697;
        int64_t flat_tid_71644 = (int64_t) 0;
        int32_t num_tasks_77126;
        struct futhark_mc_task_81726 futhark_mc_task_81726;
        
        futhark_mc_task_81726.ctx = ctx;
        futhark_mc_task_81726.free_last_res_71792 = last_res_71792;
        futhark_mc_task_81726.free_mem_75366 = mem_75366.mem;
        futhark_mc_task_81726.free_mem_75372 = mem_75372.mem;
        futhark_mc_task_81726.free_min_res_76612 = min_res_76612;
        futhark_mc_task_81726.free_max_res_76677 = max_res_76677;
        futhark_mc_task_81726.free_defunc_1_f_res_76696 = defunc_1_f_res_76696;
        futhark_mc_task_81726.retval_defunc_2_reduce_res_76697 =
            &defunc_2_reduce_res_76697;
        
        struct scheduler_segop futhark_mc_task_81726_task;
        
        futhark_mc_task_81726_task.args = &futhark_mc_task_81726;
        futhark_mc_task_81726_task.top_level_fn = futhark_mc_segred_task_81727;
        futhark_mc_task_81726_task.name = "futhark_mc_segred_task_81727";
        futhark_mc_task_81726_task.iterations = q_70282;
        futhark_mc_task_81726_task.task_time =
            &ctx->futhark_mc_segred_task_81727_total_time;
        futhark_mc_task_81726_task.task_iter =
            &ctx->futhark_mc_segred_task_81727_total_iter;
        futhark_mc_task_81726_task.sched = STATIC;
        futhark_mc_task_81726_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81727_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81726_task);
        
        if (futhark_mc_segred_task_81727_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_76717 = 1.0F / defunc_2_reduce_res_76697;
        float defunc_2_reduce_res_76718;
        int64_t flat_tid_71646 = (int64_t) 0;
        int32_t num_tasks_77135;
        struct futhark_mc_task_81731 futhark_mc_task_81731;
        
        futhark_mc_task_81731.ctx = ctx;
        futhark_mc_task_81731.free_last_res_71792 = last_res_71792;
        futhark_mc_task_81731.free_mem_75363 = mem_75363.mem;
        futhark_mc_task_81731.free_mem_75366 = mem_75366.mem;
        futhark_mc_task_81731.free_mem_75372 = mem_75372.mem;
        futhark_mc_task_81731.free_min_res_76612 = min_res_76612;
        futhark_mc_task_81731.free_max_res_76677 = max_res_76677;
        futhark_mc_task_81731.free_defunc_1_f_res_76696 = defunc_1_f_res_76696;
        futhark_mc_task_81731.free_a0_76717 = a0_76717;
        futhark_mc_task_81731.retval_defunc_2_reduce_res_76718 =
            &defunc_2_reduce_res_76718;
        
        struct scheduler_segop futhark_mc_task_81731_task;
        
        futhark_mc_task_81731_task.args = &futhark_mc_task_81731;
        futhark_mc_task_81731_task.top_level_fn = futhark_mc_segred_task_81732;
        futhark_mc_task_81731_task.name = "futhark_mc_segred_task_81732";
        futhark_mc_task_81731_task.iterations = q_70282;
        futhark_mc_task_81731_task.task_time =
            &ctx->futhark_mc_segred_task_81732_total_time;
        futhark_mc_task_81731_task.task_iter =
            &ctx->futhark_mc_segred_task_81732_total_iter;
        futhark_mc_task_81731_task.sched = STATIC;
        futhark_mc_task_81731_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81732_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81731_task);
        
        if (futhark_mc_segred_task_81732_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_75375.mem)[gtid_71643] = defunc_2_reduce_res_76718;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81725_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81725_end -
                 futhark_mc_segmap_parloop_81725_start;
        
        ctx->futhark_mc_segmap_parloop_81725_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81725_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81725_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81723(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71642 = tid;
    int num_tasks_76907 = info.nsubtasks;
    struct futhark_mc_task_81719 *futhark_mc_task_81719 =
                                 (struct futhark_mc_task_81719 *) args;
    struct futhark_context *ctx = futhark_mc_task_81719->ctx;
    uint64_t futhark_mc_segmap_nested_task_81723_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81723_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81719->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81719->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81719->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81719->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81719->free_i_70294;
    bool x_70295 = futhark_mc_task_81719->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81719->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81719->free_loop_cond_70305;
    int64_t last_res_71792 = futhark_mc_task_81719->free_last_res_71792;
    int64_t min_arg_71807 = futhark_mc_task_81719->free_min_arg_71807;
    int64_t min_arg_71808 = futhark_mc_task_81719->free_min_arg_71808;
    int64_t min_res_71809 = futhark_mc_task_81719->free_min_res_71809;
    float max_res_71813 = futhark_mc_task_81719->free_max_res_71813;
    struct memblock mem_75363 = {.desc ="mem_75363", .mem =
                                 futhark_mc_task_81719->free_mem_75363, .size =
                                 0, .references =NULL};
    struct memblock mem_75366 = {.desc ="mem_75366", .mem =
                                 futhark_mc_task_81719->free_mem_75366, .size =
                                 0, .references =NULL};
    struct memblock mem_75369 = {.desc ="mem_75369", .mem =
                                 futhark_mc_task_81719->free_mem_75369, .size =
                                 0, .references =NULL};
    struct memblock mem_75372 = {.desc ="mem_75372", .mem =
                                 futhark_mc_task_81719->free_mem_75372, .size =
                                 0, .references =NULL};
    struct memblock mem_75375 = {.desc ="mem_75375", .mem =
                                 futhark_mc_task_81719->free_mem_75375, .size =
                                 0, .references =NULL};
    int64_t iter_77018;
    struct futhark_mc_segmap_parloop_struct_81724
    futhark_mc_segmap_parloop_struct_81724;
    
    futhark_mc_segmap_parloop_struct_81724.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81724.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81724.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81724.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81724.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81724.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81724.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81724.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81724.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81724.free_last_res_71792 = last_res_71792;
    futhark_mc_segmap_parloop_struct_81724.free_min_arg_71807 = min_arg_71807;
    futhark_mc_segmap_parloop_struct_81724.free_min_arg_71808 = min_arg_71808;
    futhark_mc_segmap_parloop_struct_81724.free_min_res_71809 = min_res_71809;
    futhark_mc_segmap_parloop_struct_81724.free_max_res_71813 = max_res_71813;
    futhark_mc_segmap_parloop_struct_81724.free_mem_75363 = mem_75363.mem;
    futhark_mc_segmap_parloop_struct_81724.free_mem_75366 = mem_75366.mem;
    futhark_mc_segmap_parloop_struct_81724.free_mem_75369 = mem_75369.mem;
    futhark_mc_segmap_parloop_struct_81724.free_mem_75372 = mem_75372.mem;
    futhark_mc_segmap_parloop_struct_81724.free_mem_75375 = mem_75375.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81725_task;
    
    futhark_mc_segmap_parloop_81725_task.name =
        "futhark_mc_segmap_parloop_81725";
    futhark_mc_segmap_parloop_81725_task.fn = futhark_mc_segmap_parloop_81725;
    futhark_mc_segmap_parloop_81725_task.args =
        &futhark_mc_segmap_parloop_struct_81724;
    futhark_mc_segmap_parloop_81725_task.iterations = iterations;
    futhark_mc_segmap_parloop_81725_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81725_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81725_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81725_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81725_task);
    
    if (futhark_mc_segmap_parloop_81725_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81725_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81725_total_end -
                 futhark_mc_segmap_parloop_81725_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81725_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81725_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81725_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81723_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81723_end -
                 futhark_mc_segmap_nested_task_81723_start;
        
        ctx->futhark_mc_segmap_nested_task_81723_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81723_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81723_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81693(void *args, int64_t start,
                                           int64_t end, int flat_tid_71630,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81692
    *futhark_mc_segmap_parloop_struct_81692 =
    (struct futhark_mc_segmap_parloop_struct_81692 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81692->ctx;
    uint64_t futhark_mc_segmap_parloop_81693_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81693_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_segmap_parloop_struct_81692->free_m_70279;
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81692->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81692->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81692->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81692->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81692->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81692->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81692->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81692->free_loop_cond_70305;
    float i64_res_70306 =
          futhark_mc_segmap_parloop_struct_81692->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81692->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75359 =
            futhark_mc_segmap_parloop_struct_81692->free_bytes_75359;
    int64_t bytes_75362 =
            futhark_mc_segmap_parloop_struct_81692->free_bytes_75362;
    int64_t bytes_75371 =
            futhark_mc_segmap_parloop_struct_81692->free_bytes_75371;
    int64_t bytes_75374 =
            futhark_mc_segmap_parloop_struct_81692->free_bytes_75374;
    struct memblock mem_75469 = {.desc ="mem_75469", .mem =
                                 futhark_mc_segmap_parloop_struct_81692->free_mem_75469,
                                 .size =0, .references =NULL};
    size_t mem_75360_cached_sizze_81694 = 0;
    unsigned char *mem_75360 = NULL;
    size_t mem_75363_cached_sizze_81695 = 0;
    unsigned char *mem_75363 = NULL;
    size_t mem_75366_cached_sizze_81696 = 0;
    unsigned char *mem_75366 = NULL;
    size_t mem_75369_cached_sizze_81697 = 0;
    unsigned char *mem_75369 = NULL;
    size_t mem_75372_cached_sizze_81698 = 0;
    unsigned char *mem_75372 = NULL;
    size_t mem_75375_cached_sizze_81699 = 0;
    unsigned char *mem_75375 = NULL;
    int64_t iterations = end - start;
    int64_t iter_76593 = start;
    
    if (mem_75360_cached_sizze_81694 < (size_t) bytes_75359) {
        mem_75360 = realloc(mem_75360, bytes_75359);
        mem_75360_cached_sizze_81694 = bytes_75359;
    }
    if (mem_75363_cached_sizze_81695 < (size_t) bytes_75362) {
        mem_75363 = realloc(mem_75363, bytes_75362);
        mem_75363_cached_sizze_81695 = bytes_75362;
    }
    if (mem_75366_cached_sizze_81696 < (size_t) bytes_75359) {
        mem_75366 = realloc(mem_75366, bytes_75359);
        mem_75366_cached_sizze_81696 = bytes_75359;
    }
    if (mem_75369_cached_sizze_81697 < (size_t) bytes_75359) {
        mem_75369 = realloc(mem_75369, bytes_75359);
        mem_75369_cached_sizze_81697 = bytes_75359;
    }
    if (mem_75372_cached_sizze_81698 < (size_t) bytes_75371) {
        mem_75372 = realloc(mem_75372, bytes_75371);
        mem_75372_cached_sizze_81698 = bytes_75371;
    }
    if (mem_75375_cached_sizze_81699 < (size_t) bytes_75374) {
        mem_75375 = realloc(mem_75375, bytes_75374);
        mem_75375_cached_sizze_81699 = bytes_75374;
    }
    for (; iter_76593 < end; iter_76593++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76875 = m_70279;
        int64_t gtid_71631 = iter_76593;
        int64_t remnant_76876 = iter_76593 - gtid_71631;
        int64_t flat_tid_71632 = (int64_t) 0;
        int32_t num_tasks_76877;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_81700 futhark_mc_task_81700;
        
        futhark_mc_task_81700.ctx = ctx;
        futhark_mc_task_81700.free_n_70280 = n_70280;
        futhark_mc_task_81700.free_gtid_71631 = gtid_71631;
        futhark_mc_task_81700.free_Y_mem_75353 = Y_mem_75353.mem;
        futhark_mc_task_81700.free_mem_75360 = mem_75360;
        
        struct scheduler_segop futhark_mc_task_81700_task;
        
        futhark_mc_task_81700_task.args = &futhark_mc_task_81700;
        futhark_mc_task_81700_task.top_level_fn = futhark_mc_segscan_task_81701;
        futhark_mc_task_81700_task.name = "futhark_mc_segscan_task_81701";
        futhark_mc_task_81700_task.iterations = n_70280;
        futhark_mc_task_81700_task.task_time =
            &ctx->futhark_mc_segscan_task_81701_total_time;
        futhark_mc_task_81700_task.task_iter =
            &ctx->futhark_mc_segscan_task_81701_total_iter;
        futhark_mc_task_81700_task.sched = STATIC;
        futhark_mc_task_81700_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_81701_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81700_task);
        
        if (futhark_mc_segscan_task_81701_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_71792 = ((int64_t *) mem_75360)[i_70294];
        
        for (int64_t i_76891 = 0; i_76891 < n_70280; i_76891++) {
            ((float *) mem_75363)[i_76891] = 0.0F;
        }
        for (int64_t i_76892 = 0; i_76892 < n_70280; i_76892++) {
            ((int64_t *) mem_75366)[i_76892] = (int64_t) -1;
        }
        
        int64_t flat_tid_71634 = (int64_t) 0;
        int32_t num_tasks_76893;
        struct futhark_mc_task_81707 futhark_mc_task_81707;
        
        futhark_mc_task_81707.ctx = ctx;
        futhark_mc_task_81707.free_n_70280 = n_70280;
        futhark_mc_task_81707.free_gtid_71631 = gtid_71631;
        futhark_mc_task_81707.free_Y_mem_75353 = Y_mem_75353.mem;
        futhark_mc_task_81707.free_mem_75360 = mem_75360;
        futhark_mc_task_81707.free_mem_75363 = mem_75363;
        futhark_mc_task_81707.free_mem_75366 = mem_75366;
        
        struct scheduler_segop futhark_mc_task_81707_task;
        
        futhark_mc_task_81707_task.args = &futhark_mc_task_81707;
        futhark_mc_task_81707_task.top_level_fn = futhark_mc_segmap_task_81708;
        futhark_mc_task_81707_task.name = "futhark_mc_segmap_task_81708";
        futhark_mc_task_81707_task.iterations = n_70280;
        futhark_mc_task_81707_task.task_time =
            &ctx->futhark_mc_segmap_task_81708_total_time;
        futhark_mc_task_81707_task.task_iter =
            &ctx->futhark_mc_segmap_task_81708_total_iter;
        futhark_mc_task_81707_task.sched = STATIC;
        futhark_mc_task_81707_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81708_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81707_task);
        
        if (futhark_mc_segmap_task_81708_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_71636 = (int64_t) 0;
        int32_t num_tasks_76899;
        struct futhark_mc_task_81711 futhark_mc_task_81711;
        
        futhark_mc_task_81711.ctx = ctx;
        futhark_mc_task_81711.free_n_70280 = n_70280;
        futhark_mc_task_81711.free_mem_75366 = mem_75366;
        futhark_mc_task_81711.free_mem_75369 = mem_75369;
        
        struct scheduler_segop futhark_mc_task_81711_task;
        
        futhark_mc_task_81711_task.args = &futhark_mc_task_81711;
        futhark_mc_task_81711_task.top_level_fn = futhark_mc_segmap_task_81712;
        futhark_mc_task_81711_task.name = "futhark_mc_segmap_task_81712";
        futhark_mc_task_81711_task.iterations = n_70280;
        futhark_mc_task_81711_task.task_time =
            &ctx->futhark_mc_segmap_task_81712_total_time;
        futhark_mc_task_81711_task.task_iter =
            &ctx->futhark_mc_segmap_task_81712_total_iter;
        futhark_mc_task_81711_task.sched = STATIC;
        futhark_mc_task_81711_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81712_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81711_task);
        
        if (futhark_mc_segmap_task_81712_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_71807 = sub64(last_res_71792, (int64_t) 1);
        int64_t min_arg_71808 = sub64(last_res_71792, min_res_70300);
        int64_t min_res_71809 = smin64(q_70282, last_res_71792);
        float i64_res_71810 = sitofp_i64_f32(last_res_71792);
        float x_71811 = i64_res_70306 - i64_res_71810;
        float max_arg_71812 = x_71811 / 2.0F;
        float max_res_71813 = fmax32(0.0F, max_arg_71812);
        int64_t flat_tid_71638 = (int64_t) 0;
        int32_t num_tasks_76903;
        struct futhark_mc_task_81715 futhark_mc_task_81715;
        
        futhark_mc_task_81715.ctx = ctx;
        futhark_mc_task_81715.free_q_70282 = q_70282;
        futhark_mc_task_81715.free_last_res_71792 = last_res_71792;
        futhark_mc_task_81715.free_mem_75372 = mem_75372;
        
        struct scheduler_segop futhark_mc_task_81715_task;
        
        futhark_mc_task_81715_task.args = &futhark_mc_task_81715;
        futhark_mc_task_81715_task.top_level_fn = futhark_mc_segmap_task_81716;
        futhark_mc_task_81715_task.name = "futhark_mc_segmap_task_81716";
        futhark_mc_task_81715_task.iterations = q_70282;
        futhark_mc_task_81715_task.task_time =
            &ctx->futhark_mc_segmap_task_81716_total_time;
        futhark_mc_task_81715_task.task_iter =
            &ctx->futhark_mc_segmap_task_81716_total_iter;
        futhark_mc_task_81715_task.sched = STATIC;
        futhark_mc_task_81715_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81716_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81715_task);
        
        if (futhark_mc_segmap_task_81716_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_71640 = (int64_t) 0;
        int32_t num_tasks_76907;
        int64_t flat_tid_71642 = (int64_t) 0;
        struct futhark_mc_task_81719 futhark_mc_task_81719;
        
        futhark_mc_task_81719.ctx = ctx;
        futhark_mc_task_81719.free_n_70280 = n_70280;
        futhark_mc_task_81719.free_q_70282 = q_70282;
        futhark_mc_task_81719.free_jump_70284 = jump_70284;
        futhark_mc_task_81719.free_n_m_70288 = n_m_70288;
        futhark_mc_task_81719.free_i_70294 = i_70294;
        futhark_mc_task_81719.free_x_70295 = x_70295;
        futhark_mc_task_81719.free_min_res_70300 = min_res_70300;
        futhark_mc_task_81719.free_loop_cond_70305 = loop_cond_70305;
        futhark_mc_task_81719.free_last_res_71792 = last_res_71792;
        futhark_mc_task_81719.free_min_arg_71807 = min_arg_71807;
        futhark_mc_task_81719.free_min_arg_71808 = min_arg_71808;
        futhark_mc_task_81719.free_min_res_71809 = min_res_71809;
        futhark_mc_task_81719.free_max_res_71813 = max_res_71813;
        futhark_mc_task_81719.free_mem_75363 = mem_75363;
        futhark_mc_task_81719.free_mem_75366 = mem_75366;
        futhark_mc_task_81719.free_mem_75369 = mem_75369;
        futhark_mc_task_81719.free_mem_75372 = mem_75372;
        futhark_mc_task_81719.free_mem_75375 = mem_75375;
        
        struct scheduler_segop futhark_mc_task_81719_task;
        
        futhark_mc_task_81719_task.args = &futhark_mc_task_81719;
        futhark_mc_task_81719_task.top_level_fn = futhark_mc_segmap_task_81720;
        futhark_mc_task_81719_task.name = "futhark_mc_segmap_task_81720";
        futhark_mc_task_81719_task.iterations = n_m_70288;
        futhark_mc_task_81719_task.task_time =
            &ctx->futhark_mc_segmap_task_81720_total_time;
        futhark_mc_task_81719_task.task_iter =
            &ctx->futhark_mc_segmap_task_81720_total_iter;
        futhark_mc_task_81719_task.sched = DYNAMIC;
        futhark_mc_task_81719_task.nested_fn =
            futhark_mc_segmap_nested_task_81723;
        
        int futhark_mc_segmap_task_81720_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81719_task);
        
        if (futhark_mc_segmap_task_81720_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_75469.mem + gtid_71631 * n_m_70288 * (int64_t) 4,
                    mem_75375 + (int64_t) 0, n_m_70288 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75360);
    free(mem_75363);
    free(mem_75366);
    free(mem_75369);
    free(mem_75372);
    free(mem_75375);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81693_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81693_end -
                 futhark_mc_segmap_parloop_81693_start;
        
        ctx->futhark_mc_segmap_parloop_81693_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81693_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81693_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81691(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_71630 = tid;
    int num_tasks_76405 = info.nsubtasks;
    struct futhark_mc_task_81681 *futhark_mc_task_81681 =
                                 (struct futhark_mc_task_81681 *) args;
    struct futhark_context *ctx = futhark_mc_task_81681->ctx;
    uint64_t futhark_mc_segmap_nested_task_81691_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81691_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_task_81681->free_m_70279;
    int64_t n_70280 = futhark_mc_task_81681->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81681->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81681->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81681->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81681->free_i_70294;
    bool x_70295 = futhark_mc_task_81681->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81681->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81681->free_loop_cond_70305;
    float i64_res_70306 = futhark_mc_task_81681->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81681->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75359 = futhark_mc_task_81681->free_bytes_75359;
    int64_t bytes_75362 = futhark_mc_task_81681->free_bytes_75362;
    int64_t bytes_75371 = futhark_mc_task_81681->free_bytes_75371;
    int64_t bytes_75374 = futhark_mc_task_81681->free_bytes_75374;
    struct memblock mem_75469 = {.desc ="mem_75469", .mem =
                                 futhark_mc_task_81681->free_mem_75469, .size =
                                 0, .references =NULL};
    int64_t iter_76593;
    struct futhark_mc_segmap_parloop_struct_81692
    futhark_mc_segmap_parloop_struct_81692;
    
    futhark_mc_segmap_parloop_struct_81692.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81692.free_m_70279 = m_70279;
    futhark_mc_segmap_parloop_struct_81692.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81692.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81692.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81692.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81692.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81692.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81692.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81692.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81692.free_i64_res_70306 = i64_res_70306;
    futhark_mc_segmap_parloop_struct_81692.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81692.free_bytes_75359 = bytes_75359;
    futhark_mc_segmap_parloop_struct_81692.free_bytes_75362 = bytes_75362;
    futhark_mc_segmap_parloop_struct_81692.free_bytes_75371 = bytes_75371;
    futhark_mc_segmap_parloop_struct_81692.free_bytes_75374 = bytes_75374;
    futhark_mc_segmap_parloop_struct_81692.free_mem_75469 = mem_75469.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81693_task;
    
    futhark_mc_segmap_parloop_81693_task.name =
        "futhark_mc_segmap_parloop_81693";
    futhark_mc_segmap_parloop_81693_task.fn = futhark_mc_segmap_parloop_81693;
    futhark_mc_segmap_parloop_81693_task.args =
        &futhark_mc_segmap_parloop_struct_81692;
    futhark_mc_segmap_parloop_81693_task.iterations = iterations;
    futhark_mc_segmap_parloop_81693_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81693_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81693_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81693_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81693_task);
    
    if (futhark_mc_segmap_parloop_81693_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81693_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81693_total_end -
                 futhark_mc_segmap_parloop_81693_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81693_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81693_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81693_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81691_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81691_end -
                 futhark_mc_segmap_nested_task_81691_start;
        
        ctx->futhark_mc_segmap_nested_task_81691_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81691_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81691_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81736 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75471;
    int64_t free_bytes_75474;
    int64_t free_bytes_75483;
    int64_t free_bytes_75486;
    unsigned char *free_mem_75599;
    unsigned char *free_mem_75603;
};
struct futhark_mc_segmap_parloop_struct_81738 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75471;
    int64_t free_bytes_75474;
    int64_t free_bytes_75483;
    int64_t free_bytes_75486;
    unsigned char *free_mem_75599;
    unsigned char *free_mem_75603;
};
static int futhark_mc_segmap_parloop_81739(void *args, int64_t start,
                                           int64_t end, int flat_tid_72089,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81738
    *futhark_mc_segmap_parloop_struct_81738 =
    (struct futhark_mc_segmap_parloop_struct_81738 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81738->ctx;
    uint64_t futhark_mc_segmap_parloop_81739_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81739_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_segmap_parloop_struct_81738->free_m_70279;
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81738->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81738->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81738->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81738->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81738->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81738->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81738->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81738->free_loop_cond_70305;
    float i64_res_70306 =
          futhark_mc_segmap_parloop_struct_81738->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81738->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75471 =
            futhark_mc_segmap_parloop_struct_81738->free_bytes_75471;
    int64_t bytes_75474 =
            futhark_mc_segmap_parloop_struct_81738->free_bytes_75474;
    int64_t bytes_75483 =
            futhark_mc_segmap_parloop_struct_81738->free_bytes_75483;
    int64_t bytes_75486 =
            futhark_mc_segmap_parloop_struct_81738->free_bytes_75486;
    struct memblock mem_75599 = {.desc ="mem_75599", .mem =
                                 futhark_mc_segmap_parloop_struct_81738->free_mem_75599,
                                 .size =0, .references =NULL};
    struct memblock mem_75603 = {.desc ="mem_75603", .mem =
                                 futhark_mc_segmap_parloop_struct_81738->free_mem_75603,
                                 .size =0, .references =NULL};
    size_t mem_75493_cached_sizze_81740 = 0;
    unsigned char *mem_75493 = NULL;
    size_t mem_75508_cached_sizze_81741 = 0;
    unsigned char *mem_75508 = NULL;
    size_t mem_75511_cached_sizze_81742 = 0;
    unsigned char *mem_75511 = NULL;
    size_t mem_75538_cached_sizze_81743 = 0;
    unsigned char *mem_75538 = NULL;
    size_t mem_75553_cached_sizze_81744 = 0;
    unsigned char *mem_75553 = NULL;
    size_t mem_75568_cached_sizze_81745 = 0;
    unsigned char *mem_75568 = NULL;
    size_t mem_75571_cached_sizze_81746 = 0;
    unsigned char *mem_75571 = NULL;
    int64_t iterations = end - start;
    int64_t iter_77145 = start;
    
    if (mem_75493_cached_sizze_81740 < (size_t) bytes_75471) {
        mem_75493 = realloc(mem_75493, bytes_75471);
        mem_75493_cached_sizze_81740 = bytes_75471;
    }
    if (mem_75508_cached_sizze_81741 < (size_t) bytes_75474) {
        mem_75508 = realloc(mem_75508, bytes_75474);
        mem_75508_cached_sizze_81741 = bytes_75474;
    }
    if (mem_75511_cached_sizze_81742 < (size_t) bytes_75471) {
        mem_75511 = realloc(mem_75511, bytes_75471);
        mem_75511_cached_sizze_81742 = bytes_75471;
    }
    if (mem_75538_cached_sizze_81743 < (size_t) bytes_75471) {
        mem_75538 = realloc(mem_75538, bytes_75471);
        mem_75538_cached_sizze_81743 = bytes_75471;
    }
    if (mem_75553_cached_sizze_81744 < (size_t) bytes_75483) {
        mem_75553 = realloc(mem_75553, bytes_75483);
        mem_75553_cached_sizze_81744 = bytes_75483;
    }
    if (mem_75568_cached_sizze_81745 < (size_t) bytes_75486) {
        mem_75568 = realloc(mem_75568, bytes_75486);
        mem_75568_cached_sizze_81745 = bytes_75486;
    }
    if (mem_75571_cached_sizze_81746 < (size_t) bytes_75486) {
        mem_75571 = realloc(mem_75571, bytes_75486);
        mem_75571_cached_sizze_81746 = bytes_75486;
    }
    for (; iter_77145 < end; iter_77145++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77339 = m_70279;
        int64_t gtid_72090 = iter_77145;
        int64_t remnant_77340 = iter_77145 - gtid_72090;
        int64_t discard_75005;
        int64_t scanacc_77147 = (int64_t) 0;
        
        for (int64_t i_77146 = 0; i_77146 < n_70280; i_77146++) {
            float x_77149 = ((float *) Y_mem_75353.mem)[gtid_72090 * n_70280 +
                                                        i_77146];
            bool isnan_res_77150;
            
            isnan_res_77150 = futrts_isnan32(x_77149);
            
            bool defunc_0_p_res_77151 = !isnan_res_77150;
            int64_t defunc_0_f_res_77152 = btoi_bool_i64(defunc_0_p_res_77151);
            int64_t defunc_1_op_res_77153 = add64(defunc_0_f_res_77152,
                                                  scanacc_77147);
            
            ((int64_t *) mem_75493)[i_77146] = defunc_1_op_res_77153;
            
            int64_t scanacc_tmp_77341 = defunc_1_op_res_77153;
            
            scanacc_77147 = scanacc_tmp_77341;
        }
        discard_75005 = scanacc_77147;
        
        int64_t last_res_70508 = ((int64_t *) mem_75493)[i_70294];
        
        for (int64_t i_77343 = 0; i_77343 < n_70280; i_77343++) {
            ((float *) mem_75508)[i_77343] = 0.0F;
        }
        for (int64_t i_77344 = 0; i_77344 < n_70280; i_77344++) {
            ((int64_t *) mem_75511)[i_77344] = (int64_t) -1;
        }
        for (int64_t write_iter_77155 = 0; write_iter_77155 < n_70280;
             write_iter_77155++) {
            float write_iv_77158 = ((float *) Y_mem_75353.mem)[gtid_72090 *
                                                               n_70280 +
                                                               write_iter_77155];
            bool isnan_res_77159;
            
            isnan_res_77159 = futrts_isnan32(write_iv_77158);
            
            bool defunc_0_p_res_77160 = !isnan_res_77159;
            int64_t defunc_1_f_res_77161;
            
            if (defunc_0_p_res_77160) {
                int64_t write_iv_77162 =
                        ((int64_t *) mem_75493)[write_iter_77155];
                int64_t defunc_1_f_res_t_res_77163 = sub64(write_iv_77162,
                                                           (int64_t) 1);
                
                defunc_1_f_res_77161 = defunc_1_f_res_t_res_77163;
            } else {
                defunc_1_f_res_77161 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_77161) &&
                slt64(defunc_1_f_res_77161, n_70280)) {
                ((int64_t *) mem_75511)[defunc_1_f_res_77161] =
                    write_iter_77155;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_77161) &&
                slt64(defunc_1_f_res_77161, n_70280)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_75508 + defunc_1_f_res_77161 * (int64_t) 4,
                            Y_mem_75353.mem + (gtid_72090 * n_70280 +
                                               write_iter_77155) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        for (int64_t i_77167 = 0; i_77167 < n_70280; i_77167++) {
            int64_t x_77169 = ((int64_t *) mem_75511)[i_77167];
            int64_t defunc_0_f_res_77170 = add64((int64_t) 1, x_77169);
            
            ((int64_t *) mem_75538)[i_77167] = defunc_0_f_res_77170;
        }
        
        int64_t min_arg_70523 = sub64(last_res_70508, (int64_t) 1);
        int64_t min_arg_70524 = sub64(last_res_70508, min_res_70300);
        int64_t min_res_70525 = smin64(q_70282, last_res_70508);
        float i64_res_70526 = sitofp_i64_f32(last_res_70508);
        float x_70527 = i64_res_70306 - i64_res_70526;
        float max_arg_70528 = x_70527 / 2.0F;
        float max_res_70529 = fmax32(0.0F, max_arg_70528);
        
        for (int64_t i_77172 = 0; i_77172 < q_70282; i_77172++) {
            bool cond_77174 = sle64(last_res_70508, i_77172);
            float defunc_0_f_res_77175;
            
            if (cond_77174) {
                defunc_0_f_res_77175 = 0.0F;
            } else {
                defunc_0_f_res_77175 = 1.0F;
            }
            ((float *) mem_75553)[i_77172] = defunc_0_f_res_77175;
        }
        for (int64_t i_77177 = 0; i_77177 < n_m_70288; i_77177++) {
            int64_t min_arg_77180 = mul64(jump_70284, i_77177);
            int64_t min_res_77181 = smin64(i_70294, min_arg_77180);
            int64_t defunc_0_g_res_77182 = add64((int64_t) 1, min_res_77181);
            bool init_idx_77183;
            int64_t init_idx_77184;
            int64_t init_idx_77185;
            bool loop_while_77186;
            int64_t low_77187;
            int64_t high_77188;
            
            loop_while_77186 = x_70295;
            low_77187 = (int64_t) 0;
            high_77188 = i_70294;
            while (loop_while_77186) {
                int64_t x_77189 = add64(low_77187, high_77188);
                int64_t mid_77190 = sdiv64(x_77189, (int64_t) 2);
                bool x_77191 = sle64((int64_t) 0, mid_77190);
                bool y_77192 = slt64(mid_77190, n_70280);
                bool bounds_check_77193 = x_77191 && y_77192;
                bool index_certs_77194;
                
                if (!bounds_check_77193) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_77190,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t mid_id_77195 = ((int64_t *) mem_75538)[mid_77190];
                bool cond_77196 = slt64(mid_id_77195, (int64_t) 0);
                int64_t mid_idx_77197;
                
                if (cond_77196) {
                    mid_idx_77197 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_77197 = mid_id_77195;
                }
                
                bool cond_77198 = sle64(defunc_0_g_res_77182, mid_idx_77197);
                int64_t loopres_77199;
                int64_t loopres_77200;
                
                if (cond_77198) {
                    int64_t loopres_t_res_77201 = sub64(mid_77190, (int64_t) 1);
                    
                    loopres_77199 = low_77187;
                    loopres_77200 = loopres_t_res_77201;
                } else {
                    int64_t loopres_f_res_77202 = add64((int64_t) 1, mid_77190);
                    
                    loopres_77199 = loopres_f_res_77202;
                    loopres_77200 = high_77188;
                }
                
                bool loop_cond_77203 = sle64(loopres_77199, loopres_77200);
                bool loop_while_tmp_77351 = loop_cond_77203;
                int64_t low_tmp_77352 = loopres_77199;
                int64_t high_tmp_77353 = loopres_77200;
                
                loop_while_77186 = loop_while_tmp_77351;
                low_77187 = low_tmp_77352;
                high_77188 = high_tmp_77353;
            }
            init_idx_77183 = loop_while_77186;
            init_idx_77184 = low_77187;
            init_idx_77185 = high_77188;
            
            bool idx_77204;
            int64_t idx_77205;
            int64_t idx_77206;
            int64_t idx_77207;
            bool loop_while_77208;
            int64_t l_idx_77209;
            int64_t r_idx_77210;
            int64_t span_77211;
            
            loop_while_77208 = loop_cond_70305;
            l_idx_77209 = init_idx_77184;
            r_idx_77210 = init_idx_77184;
            span_77211 = (int64_t) 1;
            while (loop_while_77208) {
                int64_t max_arg_77212 = sub64(l_idx_77209, (int64_t) 1);
                int64_t max_res_77213 = smax64((int64_t) 0, max_arg_77212);
                int64_t min_arg_77214 = add64((int64_t) 1, r_idx_77210);
                int64_t min_res_77215 = smin64(min_arg_70523, min_arg_77214);
                bool x_77216 = sle64((int64_t) 0, max_res_77213);
                bool y_77217 = slt64(max_res_77213, n_70280);
                bool bounds_check_77218 = x_77216 && y_77217;
                bool index_certs_77219;
                
                if (!bounds_check_77218) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_77213,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t x_77220 = ((int64_t *) mem_75538)[max_res_77213];
                int64_t abs_arg_77221 = sub64(x_77220, defunc_0_g_res_77182);
                int64_t abs_res_77222 = abs64(abs_arg_77221);
                bool x_77223 = sle64((int64_t) 0, min_res_77215);
                bool y_77224 = slt64(min_res_77215, n_70280);
                bool bounds_check_77225 = x_77223 && y_77224;
                bool index_certs_77226;
                
                if (!bounds_check_77225) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_77215,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t x_77227 = ((int64_t *) mem_75538)[min_res_77215];
                int64_t abs_arg_77228 = sub64(x_77227, defunc_0_g_res_77182);
                int64_t abs_res_77229 = abs64(abs_arg_77228);
                bool cond_77230 = max_res_77213 == l_idx_77209;
                int64_t loopres_77231;
                int64_t loopres_77232;
                int64_t loopres_77233;
                
                if (cond_77230) {
                    loopres_77231 = l_idx_77209;
                    loopres_77232 = r_idx_77210;
                    loopres_77233 = min_res_70300;
                } else {
                    bool cond_77234 = slt64(abs_res_77222, abs_res_77229);
                    bool cond_f_res_77235 = min_res_77215 == r_idx_77210;
                    bool x_77236 = !cond_77234;
                    bool y_77237 = cond_f_res_77235 && x_77236;
                    bool cond_77238 = cond_77234 || y_77237;
                    int64_t loopres_f_res_77239;
                    
                    if (cond_77238) {
                        loopres_f_res_77239 = max_res_77213;
                    } else {
                        loopres_f_res_77239 = l_idx_77209;
                    }
                    
                    int64_t loopres_f_res_77240;
                    
                    if (cond_77238) {
                        loopres_f_res_77240 = r_idx_77210;
                    } else {
                        loopres_f_res_77240 = min_res_77215;
                    }
                    
                    int64_t loopres_f_res_77241;
                    
                    if (cond_77238) {
                        int64_t loopres_f_res_t_res_77242 = add64((int64_t) 1,
                                                                  span_77211);
                        
                        loopres_f_res_77241 = loopres_f_res_t_res_77242;
                    } else {
                        int64_t loopres_f_res_f_res_77243 = add64((int64_t) 1,
                                                                  span_77211);
                        
                        loopres_f_res_77241 = loopres_f_res_f_res_77243;
                    }
                    loopres_77231 = loopres_f_res_77239;
                    loopres_77232 = loopres_f_res_77240;
                    loopres_77233 = loopres_f_res_77241;
                }
                
                bool loop_cond_77244 = slt64(loopres_77233, min_res_70300);
                bool loop_while_tmp_77354 = loop_cond_77244;
                int64_t l_idx_tmp_77355 = loopres_77231;
                int64_t r_idx_tmp_77356 = loopres_77232;
                int64_t span_tmp_77357 = loopres_77233;
                
                loop_while_77208 = loop_while_tmp_77354;
                l_idx_77209 = l_idx_tmp_77355;
                r_idx_77210 = r_idx_tmp_77356;
                span_77211 = span_tmp_77357;
            }
            idx_77204 = loop_while_77208;
            idx_77205 = l_idx_77209;
            idx_77206 = r_idx_77210;
            idx_77207 = span_77211;
            
            int64_t min_res_77245 = smin64(min_arg_70524, idx_77205);
            int64_t max_res_77246 = smax64((int64_t) 0, min_res_77245);
            int64_t x_77247 = add64(min_res_70525, max_res_77246);
            int64_t r_77248 = sub64(x_77247, (int64_t) 1);
            bool x_77249 = sle64((int64_t) 0, r_77248);
            bool y_77250 = slt64(r_77248, n_70280);
            bool bounds_check_77251 = x_77249 && y_77250;
            bool index_certs_77252;
            
            if (!bounds_check_77251) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_77248,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_77253 = ((int64_t *) mem_75511)[r_77248];
            int64_t abs_arg_77254 = sub64(x_77253, min_res_77181);
            int64_t abs_res_77255 = abs64(abs_arg_77254);
            bool x_77256 = sle64((int64_t) 0, max_res_77246);
            bool y_77257 = slt64(max_res_77246, n_70280);
            bool bounds_check_77258 = x_77256 && y_77257;
            bool index_certs_77259;
            
            if (!bounds_check_77258) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_77246,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_77260 = ((int64_t *) mem_75511)[max_res_77246];
            int64_t abs_arg_77261 = sub64(x_77260, min_res_77181);
            int64_t abs_res_77262 = abs64(abs_arg_77261);
            int64_t max_res_77263 = smax64(abs_res_77255, abs_res_77262);
            float defunc_0_f_res_77264 = sitofp_i64_f32(max_res_77263);
            float defunc_1_f_res_77265 = max_res_70529 + defunc_0_f_res_77264;
            float defunc_2_reduce_res_77266;
            float defunc_2_reduce_res_77267;
            float defunc_2_reduce_res_77268;
            float redout_77270;
            float redout_77271;
            float redout_77272;
            
            redout_77270 = 0.0F;
            redout_77271 = 0.0F;
            redout_77272 = 0.0F;
            for (int64_t i_77269 = 0; i_77269 < q_70282; i_77269++) {
                float x_77273 = ((float *) mem_75553)[i_77269];
                bool cond_77274 = sle64(last_res_70508, i_77269);
                int64_t defunc_0_f_res_77275;
                
                if (cond_77274) {
                    defunc_0_f_res_77275 = (int64_t) 0;
                } else {
                    int64_t i_77276 = add64(max_res_77246, i_77269);
                    int64_t defunc_0_add_arg_77277 =
                            ((int64_t *) mem_75511)[i_77276];
                    int64_t defunc_1_add_res_77278 = add64((int64_t) 1,
                                                           defunc_0_add_arg_77277);
                    
                    defunc_0_f_res_77275 = defunc_1_add_res_77278;
                }
                
                int64_t binop_p_77279 = sub64(defunc_0_f_res_77275,
                                              min_res_77181);
                float defunc_0_f_res_77280 = sitofp_i64_f32(binop_p_77279);
                float abs_res_77281 = (float) fabs(defunc_0_f_res_77280);
                float tmp1_77282 = abs_res_77281 / defunc_1_f_res_77265;
                float x_77283 = tmp1_77282 * tmp1_77282;
                float y_77284 = tmp1_77282 * x_77283;
                float tmp2_77285 = 1.0F - y_77284;
                float x_77286 = tmp2_77285 * tmp2_77285;
                float tmp3_77287 = tmp2_77285 * x_77286;
                float w_j_77288 = x_77273 * tmp3_77287;
                float xw_j_77289 = defunc_0_f_res_77280 * w_j_77288;
                float x2w_j_77290 = defunc_0_f_res_77280 * xw_j_77289;
                float defunc_1_op_res_77291 = w_j_77288 + redout_77270;
                float defunc_1_op_res_77292 = xw_j_77289 + redout_77271;
                float defunc_1_op_res_77293 = x2w_j_77290 + redout_77272;
                float redout_tmp_77358 = defunc_1_op_res_77291;
                float redout_tmp_77359 = defunc_1_op_res_77292;
                float redout_tmp_77360 = defunc_1_op_res_77293;
                
                redout_77270 = redout_tmp_77358;
                redout_77271 = redout_tmp_77359;
                redout_77272 = redout_tmp_77360;
            }
            defunc_2_reduce_res_77266 = redout_77270;
            defunc_2_reduce_res_77267 = redout_77271;
            defunc_2_reduce_res_77268 = redout_77272;
            
            float x_77294 = defunc_2_reduce_res_77266 *
                  defunc_2_reduce_res_77268;
            float y_77295 = defunc_2_reduce_res_77267 *
                  defunc_2_reduce_res_77267;
            float y_77296 = x_77294 - y_77295;
            float det1_77297 = 1.0F / y_77296;
            float a11_77298 = defunc_2_reduce_res_77268 * det1_77297;
            float x_77299 = 0.0F - defunc_2_reduce_res_77267;
            float b11_77300 = det1_77297 * x_77299;
            float c11_77301 = defunc_2_reduce_res_77266 * det1_77297;
            float defunc_2_reduce_res_77302;
            float defunc_2_reduce_res_77303;
            float redout_77305;
            float redout_77306;
            
            redout_77305 = 0.0F;
            redout_77306 = 0.0F;
            for (int64_t i_77304 = 0; i_77304 < q_70282; i_77304++) {
                float x_77307 = ((float *) mem_75553)[i_77304];
                bool cond_77308 = sle64(last_res_70508, i_77304);
                int64_t defunc_0_f_res_77309;
                
                if (cond_77308) {
                    defunc_0_f_res_77309 = (int64_t) 0;
                } else {
                    int64_t i_77310 = add64(max_res_77246, i_77304);
                    int64_t defunc_0_add_arg_77311 =
                            ((int64_t *) mem_75511)[i_77310];
                    int64_t defunc_1_add_res_77312 = add64((int64_t) 1,
                                                           defunc_0_add_arg_77311);
                    
                    defunc_0_f_res_77309 = defunc_1_add_res_77312;
                }
                
                int64_t binop_p_77313 = sub64(defunc_0_f_res_77309,
                                              min_res_77181);
                float defunc_0_f_res_77314 = sitofp_i64_f32(binop_p_77313);
                float abs_res_77315 = (float) fabs(defunc_0_f_res_77314);
                float tmp1_77316 = abs_res_77315 / defunc_1_f_res_77265;
                float x_77317 = tmp1_77316 * tmp1_77316;
                float y_77318 = tmp1_77316 * x_77317;
                float tmp2_77319 = 1.0F - y_77318;
                float x_77320 = tmp2_77319 * tmp2_77319;
                float tmp3_77321 = tmp2_77319 * x_77320;
                float tmp4_77322 = x_77307 * tmp3_77321;
                float defunc_1_f_res_77323 = defunc_0_f_res_77314 * tmp4_77322;
                float defunc_0_f_res_77324;
                
                if (cond_77308) {
                    defunc_0_f_res_77324 = 0.0F;
                } else {
                    int64_t i_77325 = add64(max_res_77246, i_77304);
                    float defunc_0_add_arg_77326 =
                          ((float *) mem_75508)[i_77325];
                    
                    defunc_0_f_res_77324 = defunc_0_add_arg_77326;
                }
                
                float x_77327 = a11_77298 * tmp4_77322;
                float y_77328 = b11_77300 * defunc_1_f_res_77323;
                float x_77329 = x_77327 + y_77328;
                float defunc_9_fit_fun_res_77330 = defunc_0_f_res_77324 *
                      x_77329;
                float x_77331 = b11_77300 * tmp4_77322;
                float y_77332 = c11_77301 * defunc_1_f_res_77323;
                float x_77333 = x_77331 + y_77332;
                float defunc_9_slope_fun_res_77334 = defunc_0_f_res_77324 *
                      x_77333;
                float defunc_1_op_res_77335 = defunc_9_fit_fun_res_77330 +
                      redout_77305;
                float defunc_1_op_res_77336 = defunc_9_slope_fun_res_77334 +
                      redout_77306;
                float redout_tmp_77361 = defunc_1_op_res_77335;
                float redout_tmp_77362 = defunc_1_op_res_77336;
                
                redout_77305 = redout_tmp_77361;
                redout_77306 = redout_tmp_77362;
            }
            defunc_2_reduce_res_77302 = redout_77305;
            defunc_2_reduce_res_77303 = redout_77306;
            ((float *) mem_75568)[i_77177] = defunc_2_reduce_res_77302;
            ((float *) mem_75571)[i_77177] = defunc_2_reduce_res_77303;
        }
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_75599.mem + gtid_72090 * n_m_70288 * (int64_t) 4,
                    mem_75568 + (int64_t) 0, n_m_70288 * (int64_t) 4);
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_75603.mem + gtid_72090 * n_m_70288 * (int64_t) 4,
                    mem_75571 + (int64_t) 0, n_m_70288 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75493);
    free(mem_75508);
    free(mem_75511);
    free(mem_75538);
    free(mem_75553);
    free(mem_75568);
    free(mem_75571);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81739_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81739_end -
                 futhark_mc_segmap_parloop_81739_start;
        
        ctx->futhark_mc_segmap_parloop_81739_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81739_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81739_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81737(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72089 = tid;
    int num_tasks_77144 = info.nsubtasks;
    struct futhark_mc_task_81736 *futhark_mc_task_81736 =
                                 (struct futhark_mc_task_81736 *) args;
    struct futhark_context *ctx = futhark_mc_task_81736->ctx;
    uint64_t futhark_mc_segmap_task_81737_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81737_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_task_81736->free_m_70279;
    int64_t n_70280 = futhark_mc_task_81736->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81736->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81736->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81736->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81736->free_i_70294;
    bool x_70295 = futhark_mc_task_81736->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81736->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81736->free_loop_cond_70305;
    float i64_res_70306 = futhark_mc_task_81736->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81736->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75471 = futhark_mc_task_81736->free_bytes_75471;
    int64_t bytes_75474 = futhark_mc_task_81736->free_bytes_75474;
    int64_t bytes_75483 = futhark_mc_task_81736->free_bytes_75483;
    int64_t bytes_75486 = futhark_mc_task_81736->free_bytes_75486;
    struct memblock mem_75599 = {.desc ="mem_75599", .mem =
                                 futhark_mc_task_81736->free_mem_75599, .size =
                                 0, .references =NULL};
    struct memblock mem_75603 = {.desc ="mem_75603", .mem =
                                 futhark_mc_task_81736->free_mem_75603, .size =
                                 0, .references =NULL};
    int64_t iter_77145;
    struct futhark_mc_segmap_parloop_struct_81738
    futhark_mc_segmap_parloop_struct_81738;
    
    futhark_mc_segmap_parloop_struct_81738.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81738.free_m_70279 = m_70279;
    futhark_mc_segmap_parloop_struct_81738.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81738.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81738.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81738.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81738.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81738.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81738.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81738.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81738.free_i64_res_70306 = i64_res_70306;
    futhark_mc_segmap_parloop_struct_81738.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81738.free_bytes_75471 = bytes_75471;
    futhark_mc_segmap_parloop_struct_81738.free_bytes_75474 = bytes_75474;
    futhark_mc_segmap_parloop_struct_81738.free_bytes_75483 = bytes_75483;
    futhark_mc_segmap_parloop_struct_81738.free_bytes_75486 = bytes_75486;
    futhark_mc_segmap_parloop_struct_81738.free_mem_75599 = mem_75599.mem;
    futhark_mc_segmap_parloop_struct_81738.free_mem_75603 = mem_75603.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81739_task;
    
    futhark_mc_segmap_parloop_81739_task.name =
        "futhark_mc_segmap_parloop_81739";
    futhark_mc_segmap_parloop_81739_task.fn = futhark_mc_segmap_parloop_81739;
    futhark_mc_segmap_parloop_81739_task.args =
        &futhark_mc_segmap_parloop_struct_81738;
    futhark_mc_segmap_parloop_81739_task.iterations = iterations;
    futhark_mc_segmap_parloop_81739_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81739_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81739_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81739_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81739_task);
    
    if (futhark_mc_segmap_parloop_81739_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81739_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81739_total_end -
                 futhark_mc_segmap_parloop_81739_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81739_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81739_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81739_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81737_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81737_end -
                 futhark_mc_segmap_task_81737_start;
        
        ctx->futhark_mc_segmap_task_81737_runs[tid]++;
        ctx->futhark_mc_segmap_task_81737_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81737_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81748 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75471;
    int64_t free_bytes_75474;
    int64_t free_bytes_75483;
    int64_t free_bytes_75486;
    unsigned char *free_mem_75599;
    unsigned char *free_mem_75603;
};
struct futhark_mc_task_81757 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_72092;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75472;
};
struct futhark_mc_scan_stage_1_parloop_struct_81760 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_72092;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75472;
};
static int futhark_mc_scan_stage_1_parloop_81761(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_72093, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_81760
    *futhark_mc_scan_stage_1_parloop_struct_81760 =
    (struct futhark_mc_scan_stage_1_parloop_struct_81760 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_81760->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_81761_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81761_start = get_wall_time();
    
    int64_t n_70280 =
            futhark_mc_scan_stage_1_parloop_struct_81760->free_n_70280;
    int64_t gtid_72092 =
            futhark_mc_scan_stage_1_parloop_struct_81760->free_gtid_72092;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_81760->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75472 = {.desc ="mem_75472", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_81760->free_mem_75472,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77701 = start;
    int64_t x_77364;
    int64_t x_77365;
    
    x_77364 = (int64_t) 0;
    for (; iter_77701 < end; iter_77701++) {
        int64_t gtid_72094 = iter_77701;
        
        // stage 1 scan body
        {
            float x_77367 = ((float *) Y_mem_75353.mem)[gtid_72092 * n_70280 +
                                                        gtid_72094];
            bool isnan_res_77368;
            
            isnan_res_77368 = futrts_isnan32(x_77367);
            
            bool defunc_0_p_res_77369 = !isnan_res_77368;
            int64_t defunc_0_f_res_77370 = btoi_bool_i64(defunc_0_p_res_77369);
            
            // write mapped values results to memory
            { }
            x_77364 = x_77364;
            // Read next values
            {
                x_77365 = defunc_0_f_res_77370;
            }
            
            int64_t defunc_1_op_res_77366 = add64(x_77364, x_77365);
            
            ((int64_t *) mem_75472.mem)[gtid_72094] = defunc_1_op_res_77366;
            x_77364 = defunc_1_op_res_77366;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81761_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81761_end -
                 futhark_mc_scan_stage_1_parloop_81761_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_81761_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_81761_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_81761_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_81762 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_72092;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75472;
};
static int futhark_mc_scan_stage_3_parloop_81763(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_72093, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_81762
    *futhark_mc_scan_stage_3_parloop_struct_81762 =
    (struct futhark_mc_scan_stage_3_parloop_struct_81762 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_81762->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_81763_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_81763_start = get_wall_time();
    
    int64_t n_70280 =
            futhark_mc_scan_stage_3_parloop_struct_81762->free_n_70280;
    int64_t gtid_72092 =
            futhark_mc_scan_stage_3_parloop_struct_81762->free_gtid_72092;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_81762->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75472 = {.desc ="mem_75472", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_81762->free_mem_75472,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77713 = start;
    int64_t x_77710;
    int64_t x_77711;
    
    if (iter_77713 == (int64_t) 0) {
        x_77710 = (int64_t) 0;
    } else {
        x_77710 = ((int64_t *) mem_75472.mem)[iter_77713 - (int64_t) 1];
    }
    for (; iter_77713 < end; iter_77713++) {
        int64_t gtid_72094 = iter_77713;
        
        // stage 3 scan body
        {
            float x_77367 = ((float *) Y_mem_75353.mem)[gtid_72092 * n_70280 +
                                                        gtid_72094];
            bool isnan_res_77368;
            
            isnan_res_77368 = futrts_isnan32(x_77367);
            
            bool defunc_0_p_res_77369 = !isnan_res_77368;
            int64_t defunc_0_f_res_77370 = btoi_bool_i64(defunc_0_p_res_77369);
            
            x_77710 = x_77710;
            x_77711 = defunc_0_f_res_77370;
            
            int64_t defunc_1_op_res_77712 = add64(x_77710, x_77711);
            
            ((int64_t *) mem_75472.mem)[gtid_72094] = defunc_1_op_res_77712;
            x_77710 = defunc_1_op_res_77712;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_81763_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81763_end -
                 futhark_mc_scan_stage_3_parloop_81763_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_81763_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_81763_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_81763_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_81758(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72093 = tid;
    int num_tasks_77700 = info.nsubtasks;
    struct futhark_mc_task_81757 *futhark_mc_task_81757 =
                                 (struct futhark_mc_task_81757 *) args;
    struct futhark_context *ctx = futhark_mc_task_81757->ctx;
    uint64_t futhark_mc_segscan_task_81758_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_81758_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81757->free_n_70280;
    int64_t gtid_72092 = futhark_mc_task_81757->free_gtid_72092;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81757->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75472 = {.desc ="mem_75472", .mem =
                                 futhark_mc_task_81757->free_mem_75472, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_77707_cached_sizze_81759 = 0;
    unsigned char *scan_stage_2_accum_mem_77707 = NULL;
    int64_t iter_77701;
    struct futhark_mc_scan_stage_1_parloop_struct_81760
    futhark_mc_scan_stage_1_parloop_struct_81760;
    
    futhark_mc_scan_stage_1_parloop_struct_81760.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_81760.free_n_70280 = n_70280;
    futhark_mc_scan_stage_1_parloop_struct_81760.free_gtid_72092 = gtid_72092;
    futhark_mc_scan_stage_1_parloop_struct_81760.free_Y_mem_75353 =
        Y_mem_75353.mem;
    futhark_mc_scan_stage_1_parloop_struct_81760.free_mem_75472 = mem_75472.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_81761_task;
    
    futhark_mc_scan_stage_1_parloop_81761_task.name =
        "futhark_mc_scan_stage_1_parloop_81761";
    futhark_mc_scan_stage_1_parloop_81761_task.fn =
        futhark_mc_scan_stage_1_parloop_81761;
    futhark_mc_scan_stage_1_parloop_81761_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_81760;
    futhark_mc_scan_stage_1_parloop_81761_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_81761_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_81761_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81761_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_81761_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_81761_task);
    
    if (futhark_mc_scan_stage_1_parloop_81761_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81761_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81761_total_end -
                 futhark_mc_scan_stage_1_parloop_81761_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81761_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81761_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81761_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_77700)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_77702;
        int64_t x_77703;
        int64_t offset_77705 = (int64_t) 0;
        int64_t offset_index_77706 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_77707_cached_sizze_81759 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_77707 = realloc(scan_stage_2_accum_mem_77707,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_77707_cached_sizze_81759 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_77707)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_77709 = 0; i_77709 < num_tasks_77700 - 1; i_77709++) {
            offset_77705 = squot64(n_70280, sext_i32_i64(num_tasks_77700));
            if (slt64(sext_i32_i64(i_77709), srem64(n_70280,
                                                    sext_i32_i64(num_tasks_77700)))) {
                offset_77705 += (int64_t) 1;
            }
            offset_index_77706 += offset_77705;
            
            int64_t gtid_72094 = offset_index_77706;
            float x_77367 = ((float *) Y_mem_75353.mem)[gtid_72092 * n_70280 +
                                                        gtid_72094];
            bool isnan_res_77368;
            
            isnan_res_77368 = futrts_isnan32(x_77367);
            
            bool defunc_0_p_res_77369 = !isnan_res_77368;
            int64_t defunc_0_f_res_77370 = btoi_bool_i64(defunc_0_p_res_77369);
            
            // Read carry in
            {
                x_77702 =
                    ((int64_t *) scan_stage_2_accum_mem_77707)[(int64_t) 0];
            }
            // Read next values
            {
                x_77703 = ((int64_t *) mem_75472.mem)[offset_index_77706 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_77704 = add64(x_77702, x_77703);
            
            ((int64_t *) mem_75472.mem)[offset_index_77706 - (int64_t) 1] =
                defunc_1_op_res_77704;
            ((int64_t *) scan_stage_2_accum_mem_77707)[(int64_t) 0] =
                defunc_1_op_res_77704;
        }
        
        int64_t iter_77713 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_81762
        futhark_mc_scan_stage_3_parloop_struct_81762;
        
        futhark_mc_scan_stage_3_parloop_struct_81762.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_81762.free_n_70280 = n_70280;
        futhark_mc_scan_stage_3_parloop_struct_81762.free_gtid_72092 =
            gtid_72092;
        futhark_mc_scan_stage_3_parloop_struct_81762.free_Y_mem_75353 =
            Y_mem_75353.mem;
        futhark_mc_scan_stage_3_parloop_struct_81762.free_mem_75472 =
            mem_75472.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_81763_task;
        
        futhark_mc_scan_stage_3_parloop_81763_task.name =
            "futhark_mc_scan_stage_3_parloop_81763";
        futhark_mc_scan_stage_3_parloop_81763_task.fn =
            futhark_mc_scan_stage_3_parloop_81763;
        futhark_mc_scan_stage_3_parloop_81763_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_81762;
        futhark_mc_scan_stage_3_parloop_81763_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_81763_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_81763_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_81763_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_81763_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_81763_task);
        
        if (futhark_mc_scan_stage_3_parloop_81763_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_81763_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81763_total_end -
                     futhark_mc_scan_stage_3_parloop_81763_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81763_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81763_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81763_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_77707);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_81758_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_81758_end -
                 futhark_mc_segscan_task_81758_start;
        
        ctx->futhark_mc_segscan_task_81758_runs[tid]++;
        ctx->futhark_mc_segscan_task_81758_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_81758_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81764 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_72092;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75472;
    unsigned char *free_mem_75475;
    unsigned char *free_mem_75478;
};
struct futhark_mc_segmap_parloop_struct_81766 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_72092;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75472;
    unsigned char *free_mem_75475;
    unsigned char *free_mem_75478;
};
static int futhark_mc_segmap_parloop_81767(void *args, int64_t start,
                                           int64_t end, int flat_tid_72095,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81766
    *futhark_mc_segmap_parloop_struct_81766 =
    (struct futhark_mc_segmap_parloop_struct_81766 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81766->ctx;
    uint64_t futhark_mc_segmap_parloop_81767_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81767_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81766->free_n_70280;
    int64_t gtid_72092 =
            futhark_mc_segmap_parloop_struct_81766->free_gtid_72092;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81766->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75472 = {.desc ="mem_75472", .mem =
                                 futhark_mc_segmap_parloop_struct_81766->free_mem_75472,
                                 .size =0, .references =NULL};
    struct memblock mem_75475 = {.desc ="mem_75475", .mem =
                                 futhark_mc_segmap_parloop_struct_81766->free_mem_75475,
                                 .size =0, .references =NULL};
    struct memblock mem_75478 = {.desc ="mem_75478", .mem =
                                 futhark_mc_segmap_parloop_struct_81766->free_mem_75478,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77717 = start;
    
    for (; iter_77717 < end; iter_77717++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77720 = n_70280;
        int64_t gtid_72096 = iter_77717;
        int64_t remnant_77721 = iter_77717 - gtid_72096;
        float x_77371 = ((float *) Y_mem_75353.mem)[gtid_72092 * n_70280 +
                                                    gtid_72096];
        bool isnan_res_77372;
        
        isnan_res_77372 = futrts_isnan32(x_77371);
        
        bool defunc_0_p_res_77373 = !isnan_res_77372;
        int64_t defunc_1_f_res_77374;
        
        if (defunc_0_p_res_77373) {
            int64_t x_77718 = ((int64_t *) mem_75472.mem)[gtid_72096];
            int64_t defunc_1_f_res_t_res_77719 = sub64(x_77718, (int64_t) 1);
            
            defunc_1_f_res_77374 = defunc_1_f_res_t_res_77719;
        } else {
            defunc_1_f_res_77374 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_77374) &&
            slt64(defunc_1_f_res_77374, n_70280)) {
            ((int64_t *) mem_75478.mem)[defunc_1_f_res_77374] = gtid_72096;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_77374) &&
            slt64(defunc_1_f_res_77374, n_70280)) {
            ((float *) mem_75475.mem)[defunc_1_f_res_77374] = x_77371;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81767_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81767_end -
                 futhark_mc_segmap_parloop_81767_start;
        
        ctx->futhark_mc_segmap_parloop_81767_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81767_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81767_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81765(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72095 = tid;
    int num_tasks_77716 = info.nsubtasks;
    struct futhark_mc_task_81764 *futhark_mc_task_81764 =
                                 (struct futhark_mc_task_81764 *) args;
    struct futhark_context *ctx = futhark_mc_task_81764->ctx;
    uint64_t futhark_mc_segmap_task_81765_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81765_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81764->free_n_70280;
    int64_t gtid_72092 = futhark_mc_task_81764->free_gtid_72092;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81764->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75472 = {.desc ="mem_75472", .mem =
                                 futhark_mc_task_81764->free_mem_75472, .size =
                                 0, .references =NULL};
    struct memblock mem_75475 = {.desc ="mem_75475", .mem =
                                 futhark_mc_task_81764->free_mem_75475, .size =
                                 0, .references =NULL};
    struct memblock mem_75478 = {.desc ="mem_75478", .mem =
                                 futhark_mc_task_81764->free_mem_75478, .size =
                                 0, .references =NULL};
    int64_t iter_77717;
    struct futhark_mc_segmap_parloop_struct_81766
    futhark_mc_segmap_parloop_struct_81766;
    
    futhark_mc_segmap_parloop_struct_81766.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81766.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81766.free_gtid_72092 = gtid_72092;
    futhark_mc_segmap_parloop_struct_81766.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81766.free_mem_75472 = mem_75472.mem;
    futhark_mc_segmap_parloop_struct_81766.free_mem_75475 = mem_75475.mem;
    futhark_mc_segmap_parloop_struct_81766.free_mem_75478 = mem_75478.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81767_task;
    
    futhark_mc_segmap_parloop_81767_task.name =
        "futhark_mc_segmap_parloop_81767";
    futhark_mc_segmap_parloop_81767_task.fn = futhark_mc_segmap_parloop_81767;
    futhark_mc_segmap_parloop_81767_task.args =
        &futhark_mc_segmap_parloop_struct_81766;
    futhark_mc_segmap_parloop_81767_task.iterations = iterations;
    futhark_mc_segmap_parloop_81767_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81767_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81767_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81767_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81767_task);
    
    if (futhark_mc_segmap_parloop_81767_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81767_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81767_total_end -
                 futhark_mc_segmap_parloop_81767_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81767_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81767_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81767_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81765_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81765_end -
                 futhark_mc_segmap_task_81765_start;
        
        ctx->futhark_mc_segmap_task_81765_runs[tid]++;
        ctx->futhark_mc_segmap_task_81765_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81765_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81768 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    unsigned char *free_mem_75478;
    unsigned char *free_mem_75481;
};
struct futhark_mc_segmap_parloop_struct_81770 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    unsigned char *free_mem_75478;
    unsigned char *free_mem_75481;
};
static int futhark_mc_segmap_parloop_81771(void *args, int64_t start,
                                           int64_t end, int flat_tid_72097,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81770
    *futhark_mc_segmap_parloop_struct_81770 =
    (struct futhark_mc_segmap_parloop_struct_81770 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81770->ctx;
    uint64_t futhark_mc_segmap_parloop_81771_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81771_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81770->free_n_70280;
    struct memblock mem_75478 = {.desc ="mem_75478", .mem =
                                 futhark_mc_segmap_parloop_struct_81770->free_mem_75478,
                                 .size =0, .references =NULL};
    struct memblock mem_75481 = {.desc ="mem_75481", .mem =
                                 futhark_mc_segmap_parloop_struct_81770->free_mem_75481,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77723 = start;
    
    for (; iter_77723 < end; iter_77723++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77724 = n_70280;
        int64_t gtid_72098 = iter_77723;
        int64_t remnant_77725 = iter_77723 - gtid_72098;
        int64_t x_77377 = ((int64_t *) mem_75478.mem)[gtid_72098];
        int64_t defunc_0_f_res_77378 = add64((int64_t) 1, x_77377);
        
        ((int64_t *) mem_75481.mem)[gtid_72098] = defunc_0_f_res_77378;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81771_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81771_end -
                 futhark_mc_segmap_parloop_81771_start;
        
        ctx->futhark_mc_segmap_parloop_81771_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81771_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81771_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81769(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72097 = tid;
    int num_tasks_77722 = info.nsubtasks;
    struct futhark_mc_task_81768 *futhark_mc_task_81768 =
                                 (struct futhark_mc_task_81768 *) args;
    struct futhark_context *ctx = futhark_mc_task_81768->ctx;
    uint64_t futhark_mc_segmap_task_81769_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81769_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81768->free_n_70280;
    struct memblock mem_75478 = {.desc ="mem_75478", .mem =
                                 futhark_mc_task_81768->free_mem_75478, .size =
                                 0, .references =NULL};
    struct memblock mem_75481 = {.desc ="mem_75481", .mem =
                                 futhark_mc_task_81768->free_mem_75481, .size =
                                 0, .references =NULL};
    int64_t iter_77723;
    struct futhark_mc_segmap_parloop_struct_81770
    futhark_mc_segmap_parloop_struct_81770;
    
    futhark_mc_segmap_parloop_struct_81770.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81770.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81770.free_mem_75478 = mem_75478.mem;
    futhark_mc_segmap_parloop_struct_81770.free_mem_75481 = mem_75481.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81771_task;
    
    futhark_mc_segmap_parloop_81771_task.name =
        "futhark_mc_segmap_parloop_81771";
    futhark_mc_segmap_parloop_81771_task.fn = futhark_mc_segmap_parloop_81771;
    futhark_mc_segmap_parloop_81771_task.args =
        &futhark_mc_segmap_parloop_struct_81770;
    futhark_mc_segmap_parloop_81771_task.iterations = iterations;
    futhark_mc_segmap_parloop_81771_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81771_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81771_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81771_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81771_task);
    
    if (futhark_mc_segmap_parloop_81771_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81771_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81771_total_end -
                 futhark_mc_segmap_parloop_81771_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81771_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81771_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81771_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81769_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81769_end -
                 futhark_mc_segmap_task_81769_start;
        
        ctx->futhark_mc_segmap_task_81769_runs[tid]++;
        ctx->futhark_mc_segmap_task_81769_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81769_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81772 {
    struct futhark_context *ctx;
    int64_t free_q_70282;
    int64_t free_last_res_72281;
    unsigned char *free_mem_75484;
};
struct futhark_mc_segmap_parloop_struct_81774 {
    struct futhark_context *ctx;
    int64_t free_q_70282;
    int64_t free_last_res_72281;
    unsigned char *free_mem_75484;
};
static int futhark_mc_segmap_parloop_81775(void *args, int64_t start,
                                           int64_t end, int flat_tid_72099,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81774
    *futhark_mc_segmap_parloop_struct_81774 =
    (struct futhark_mc_segmap_parloop_struct_81774 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81774->ctx;
    uint64_t futhark_mc_segmap_parloop_81775_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81775_start = get_wall_time();
    
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81774->free_q_70282;
    int64_t last_res_72281 =
            futhark_mc_segmap_parloop_struct_81774->free_last_res_72281;
    struct memblock mem_75484 = {.desc ="mem_75484", .mem =
                                 futhark_mc_segmap_parloop_struct_81774->free_mem_75484,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77727 = start;
    
    for (; iter_77727 < end; iter_77727++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77728 = q_70282;
        int64_t gtid_72100 = iter_77727;
        int64_t remnant_77729 = iter_77727 - gtid_72100;
        bool cond_77379 = sle64(last_res_72281, gtid_72100);
        float defunc_0_f_res_77380;
        
        if (cond_77379) {
            defunc_0_f_res_77380 = 0.0F;
        } else {
            defunc_0_f_res_77380 = 1.0F;
        }
        ((float *) mem_75484.mem)[gtid_72100] = defunc_0_f_res_77380;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81775_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81775_end -
                 futhark_mc_segmap_parloop_81775_start;
        
        ctx->futhark_mc_segmap_parloop_81775_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81775_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81775_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81773(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72099 = tid;
    int num_tasks_77726 = info.nsubtasks;
    struct futhark_mc_task_81772 *futhark_mc_task_81772 =
                                 (struct futhark_mc_task_81772 *) args;
    struct futhark_context *ctx = futhark_mc_task_81772->ctx;
    uint64_t futhark_mc_segmap_task_81773_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81773_start = get_wall_time();
    
    int64_t q_70282 = futhark_mc_task_81772->free_q_70282;
    int64_t last_res_72281 = futhark_mc_task_81772->free_last_res_72281;
    struct memblock mem_75484 = {.desc ="mem_75484", .mem =
                                 futhark_mc_task_81772->free_mem_75484, .size =
                                 0, .references =NULL};
    int64_t iter_77727;
    struct futhark_mc_segmap_parloop_struct_81774
    futhark_mc_segmap_parloop_struct_81774;
    
    futhark_mc_segmap_parloop_struct_81774.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81774.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81774.free_last_res_72281 = last_res_72281;
    futhark_mc_segmap_parloop_struct_81774.free_mem_75484 = mem_75484.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81775_task;
    
    futhark_mc_segmap_parloop_81775_task.name =
        "futhark_mc_segmap_parloop_81775";
    futhark_mc_segmap_parloop_81775_task.fn = futhark_mc_segmap_parloop_81775;
    futhark_mc_segmap_parloop_81775_task.args =
        &futhark_mc_segmap_parloop_struct_81774;
    futhark_mc_segmap_parloop_81775_task.iterations = iterations;
    futhark_mc_segmap_parloop_81775_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81775_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81775_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81775_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81775_task);
    
    if (futhark_mc_segmap_parloop_81775_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81775_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81775_total_end -
                 futhark_mc_segmap_parloop_81775_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81775_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81775_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81775_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81773_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81773_end -
                 futhark_mc_segmap_task_81773_start;
        
        ctx->futhark_mc_segmap_task_81773_runs[tid]++;
        ctx->futhark_mc_segmap_task_81773_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81773_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81776 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_72281;
    int64_t free_min_arg_72296;
    int64_t free_min_arg_72297;
    int64_t free_min_res_72298;
    float free_max_res_72302;
    unsigned char *free_mem_75475;
    unsigned char *free_mem_75478;
    unsigned char *free_mem_75481;
    unsigned char *free_mem_75484;
    unsigned char *free_mem_75487;
    unsigned char *free_mem_75490;
};
struct futhark_mc_segmap_parloop_struct_81778 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_72281;
    int64_t free_min_arg_72296;
    int64_t free_min_arg_72297;
    int64_t free_min_res_72298;
    float free_max_res_72302;
    unsigned char *free_mem_75475;
    unsigned char *free_mem_75478;
    unsigned char *free_mem_75481;
    unsigned char *free_mem_75484;
    unsigned char *free_mem_75487;
    unsigned char *free_mem_75490;
};
static int futhark_mc_segmap_parloop_81779(void *args, int64_t start,
                                           int64_t end, int flat_tid_72101,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81778
    *futhark_mc_segmap_parloop_struct_81778 =
    (struct futhark_mc_segmap_parloop_struct_81778 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81778->ctx;
    uint64_t futhark_mc_segmap_parloop_81779_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81779_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81778->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81778->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81778->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81778->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81778->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81778->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81778->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81778->free_loop_cond_70305;
    int64_t last_res_72281 =
            futhark_mc_segmap_parloop_struct_81778->free_last_res_72281;
    int64_t min_arg_72296 =
            futhark_mc_segmap_parloop_struct_81778->free_min_arg_72296;
    int64_t min_arg_72297 =
            futhark_mc_segmap_parloop_struct_81778->free_min_arg_72297;
    int64_t min_res_72298 =
            futhark_mc_segmap_parloop_struct_81778->free_min_res_72298;
    float max_res_72302 =
          futhark_mc_segmap_parloop_struct_81778->free_max_res_72302;
    struct memblock mem_75475 = {.desc ="mem_75475", .mem =
                                 futhark_mc_segmap_parloop_struct_81778->free_mem_75475,
                                 .size =0, .references =NULL};
    struct memblock mem_75478 = {.desc ="mem_75478", .mem =
                                 futhark_mc_segmap_parloop_struct_81778->free_mem_75478,
                                 .size =0, .references =NULL};
    struct memblock mem_75481 = {.desc ="mem_75481", .mem =
                                 futhark_mc_segmap_parloop_struct_81778->free_mem_75481,
                                 .size =0, .references =NULL};
    struct memblock mem_75484 = {.desc ="mem_75484", .mem =
                                 futhark_mc_segmap_parloop_struct_81778->free_mem_75484,
                                 .size =0, .references =NULL};
    struct memblock mem_75487 = {.desc ="mem_75487", .mem =
                                 futhark_mc_segmap_parloop_struct_81778->free_mem_75487,
                                 .size =0, .references =NULL};
    struct memblock mem_75490 = {.desc ="mem_75490", .mem =
                                 futhark_mc_segmap_parloop_struct_81778->free_mem_75490,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77731 = start;
    
    for (; iter_77731 < end; iter_77731++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77845 = n_m_70288;
        int64_t gtid_72102 = iter_77731;
        int64_t remnant_77846 = iter_77731 - gtid_72102;
        int64_t min_arg_77541 = mul64(jump_70284, gtid_72102);
        int64_t min_res_77542 = smin64(i_70294, min_arg_77541);
        int64_t defunc_0_g_res_77543 = add64((int64_t) 1, min_res_77542);
        bool init_idx_77544;
        int64_t init_idx_77545;
        int64_t init_idx_77546;
        bool loop_while_77732;
        int64_t low_77733;
        int64_t high_77734;
        
        loop_while_77732 = x_70295;
        low_77733 = (int64_t) 0;
        high_77734 = i_70294;
        while (loop_while_77732) {
            int64_t x_77735 = add64(low_77733, high_77734);
            int64_t mid_77736 = sdiv64(x_77735, (int64_t) 2);
            bool x_77737 = sle64((int64_t) 0, mid_77736);
            bool y_77738 = slt64(mid_77736, n_70280);
            bool bounds_check_77739 = x_77737 && y_77738;
            bool index_certs_77740;
            
            if (!bounds_check_77739) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_77736,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t mid_id_77741 = ((int64_t *) mem_75481.mem)[mid_77736];
            bool cond_77742 = slt64(mid_id_77741, (int64_t) 0);
            int64_t mid_idx_77743;
            
            if (cond_77742) {
                mid_idx_77743 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_77743 = mid_id_77741;
            }
            
            bool cond_77744 = sle64(defunc_0_g_res_77543, mid_idx_77743);
            int64_t loopres_77745;
            int64_t loopres_77746;
            
            if (cond_77744) {
                int64_t loopres_t_res_77747 = sub64(mid_77736, (int64_t) 1);
                
                loopres_77745 = low_77733;
                loopres_77746 = loopres_t_res_77747;
            } else {
                int64_t loopres_f_res_77748 = add64((int64_t) 1, mid_77736);
                
                loopres_77745 = loopres_f_res_77748;
                loopres_77746 = high_77734;
            }
            
            bool loop_cond_77749 = sle64(loopres_77745, loopres_77746);
            bool loop_while_tmp_77847 = loop_cond_77749;
            int64_t low_tmp_77848 = loopres_77745;
            int64_t high_tmp_77849 = loopres_77746;
            
            loop_while_77732 = loop_while_tmp_77847;
            low_77733 = low_tmp_77848;
            high_77734 = high_tmp_77849;
        }
        init_idx_77544 = loop_while_77732;
        init_idx_77545 = low_77733;
        init_idx_77546 = high_77734;
        
        bool idx_77565;
        int64_t idx_77566;
        int64_t idx_77567;
        int64_t idx_77568;
        bool loop_while_77750;
        int64_t l_idx_77751;
        int64_t r_idx_77752;
        int64_t span_77753;
        
        loop_while_77750 = loop_cond_70305;
        l_idx_77751 = init_idx_77545;
        r_idx_77752 = init_idx_77545;
        span_77753 = (int64_t) 1;
        while (loop_while_77750) {
            int64_t max_arg_77754 = sub64(l_idx_77751, (int64_t) 1);
            int64_t max_res_77755 = smax64((int64_t) 0, max_arg_77754);
            int64_t min_arg_77756 = add64((int64_t) 1, r_idx_77752);
            int64_t min_res_77757 = smin64(min_arg_72296, min_arg_77756);
            bool x_77758 = sle64((int64_t) 0, max_res_77755);
            bool y_77759 = slt64(max_res_77755, n_70280);
            bool bounds_check_77760 = x_77758 && y_77759;
            bool index_certs_77761;
            
            if (!bounds_check_77760) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_77755,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_77762 = ((int64_t *) mem_75481.mem)[max_res_77755];
            int64_t abs_arg_77763 = sub64(x_77762, defunc_0_g_res_77543);
            int64_t abs_res_77764 = abs64(abs_arg_77763);
            bool x_77765 = sle64((int64_t) 0, min_res_77757);
            bool y_77766 = slt64(min_res_77757, n_70280);
            bool bounds_check_77767 = x_77765 && y_77766;
            bool index_certs_77768;
            
            if (!bounds_check_77767) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_77757,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_77769 = ((int64_t *) mem_75481.mem)[min_res_77757];
            int64_t abs_arg_77770 = sub64(x_77769, defunc_0_g_res_77543);
            int64_t abs_res_77771 = abs64(abs_arg_77770);
            bool cond_77772 = max_res_77755 == l_idx_77751;
            int64_t loopres_77773;
            int64_t loopres_77774;
            int64_t loopres_77775;
            
            if (cond_77772) {
                loopres_77773 = l_idx_77751;
                loopres_77774 = r_idx_77752;
                loopres_77775 = min_res_70300;
            } else {
                bool cond_77776 = slt64(abs_res_77764, abs_res_77771);
                bool cond_f_res_77777 = min_res_77757 == r_idx_77752;
                bool x_77778 = !cond_77776;
                bool y_77779 = cond_f_res_77777 && x_77778;
                bool cond_77780 = cond_77776 || y_77779;
                int64_t loopres_f_res_77781;
                
                if (cond_77780) {
                    loopres_f_res_77781 = max_res_77755;
                } else {
                    loopres_f_res_77781 = l_idx_77751;
                }
                
                int64_t loopres_f_res_77782;
                
                if (cond_77780) {
                    loopres_f_res_77782 = r_idx_77752;
                } else {
                    loopres_f_res_77782 = min_res_77757;
                }
                
                int64_t loopres_f_res_77783;
                
                if (cond_77780) {
                    int64_t loopres_f_res_t_res_77784 = add64((int64_t) 1,
                                                              span_77753);
                    
                    loopres_f_res_77783 = loopres_f_res_t_res_77784;
                } else {
                    int64_t loopres_f_res_f_res_77785 = add64((int64_t) 1,
                                                              span_77753);
                    
                    loopres_f_res_77783 = loopres_f_res_f_res_77785;
                }
                loopres_77773 = loopres_f_res_77781;
                loopres_77774 = loopres_f_res_77782;
                loopres_77775 = loopres_f_res_77783;
            }
            
            bool loop_cond_77786 = slt64(loopres_77775, min_res_70300);
            bool loop_while_tmp_77850 = loop_cond_77786;
            int64_t l_idx_tmp_77851 = loopres_77773;
            int64_t r_idx_tmp_77852 = loopres_77774;
            int64_t span_tmp_77853 = loopres_77775;
            
            loop_while_77750 = loop_while_tmp_77850;
            l_idx_77751 = l_idx_tmp_77851;
            r_idx_77752 = r_idx_tmp_77852;
            span_77753 = span_tmp_77853;
        }
        idx_77565 = loop_while_77750;
        idx_77566 = l_idx_77751;
        idx_77567 = r_idx_77752;
        idx_77568 = span_77753;
        
        int64_t min_res_77606 = smin64(min_arg_72297, idx_77566);
        int64_t max_res_77607 = smax64((int64_t) 0, min_res_77606);
        int64_t x_77608 = add64(min_res_72298, max_res_77607);
        int64_t r_77609 = sub64(x_77608, (int64_t) 1);
        bool x_77610 = sle64((int64_t) 0, r_77609);
        bool y_77611 = slt64(r_77609, n_70280);
        bool bounds_check_77612 = x_77610 && y_77611;
        bool index_certs_77613;
        
        if (!bounds_check_77612) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_77609,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_77614 = ((int64_t *) mem_75478.mem)[r_77609];
        int64_t abs_arg_77615 = sub64(x_77614, min_res_77542);
        int64_t abs_res_77616 = abs64(abs_arg_77615);
        bool x_77617 = sle64((int64_t) 0, max_res_77607);
        bool y_77618 = slt64(max_res_77607, n_70280);
        bool bounds_check_77619 = x_77617 && y_77618;
        bool index_certs_77620;
        
        if (!bounds_check_77619) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_77607,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_77621 = ((int64_t *) mem_75478.mem)[max_res_77607];
        int64_t abs_arg_77622 = sub64(x_77621, min_res_77542);
        int64_t abs_res_77623 = abs64(abs_arg_77622);
        int64_t max_res_77624 = smax64(abs_res_77616, abs_res_77623);
        float defunc_0_f_res_77625 = sitofp_i64_f32(max_res_77624);
        float defunc_1_f_res_77626 = max_res_72302 + defunc_0_f_res_77625;
        float defunc_2_reduce_res_77627;
        float defunc_2_reduce_res_77628;
        float defunc_2_reduce_res_77629;
        float redout_77788;
        float redout_77789;
        float redout_77790;
        
        redout_77788 = 0.0F;
        redout_77789 = 0.0F;
        redout_77790 = 0.0F;
        for (int64_t i_77787 = 0; i_77787 < q_70282; i_77787++) {
            float x_77791 = ((float *) mem_75484.mem)[i_77787];
            bool cond_77792 = sle64(last_res_72281, i_77787);
            int64_t defunc_0_f_res_77793;
            
            if (cond_77792) {
                defunc_0_f_res_77793 = (int64_t) 0;
            } else {
                int64_t i_77794 = add64(max_res_77607, i_77787);
                int64_t defunc_0_add_arg_77795 =
                        ((int64_t *) mem_75478.mem)[i_77794];
                int64_t defunc_1_add_res_77796 = add64((int64_t) 1,
                                                       defunc_0_add_arg_77795);
                
                defunc_0_f_res_77793 = defunc_1_add_res_77796;
            }
            
            int64_t binop_p_77797 = sub64(defunc_0_f_res_77793, min_res_77542);
            float defunc_0_f_res_77798 = sitofp_i64_f32(binop_p_77797);
            float abs_res_77799 = (float) fabs(defunc_0_f_res_77798);
            float tmp1_77800 = abs_res_77799 / defunc_1_f_res_77626;
            float x_77801 = tmp1_77800 * tmp1_77800;
            float y_77802 = tmp1_77800 * x_77801;
            float tmp2_77803 = 1.0F - y_77802;
            float x_77804 = tmp2_77803 * tmp2_77803;
            float tmp3_77805 = tmp2_77803 * x_77804;
            float w_j_77806 = x_77791 * tmp3_77805;
            float xw_j_77807 = defunc_0_f_res_77798 * w_j_77806;
            float x2w_j_77808 = defunc_0_f_res_77798 * xw_j_77807;
            float defunc_1_op_res_77809 = w_j_77806 + redout_77788;
            float defunc_1_op_res_77810 = xw_j_77807 + redout_77789;
            float defunc_1_op_res_77811 = x2w_j_77808 + redout_77790;
            float redout_tmp_77854 = defunc_1_op_res_77809;
            float redout_tmp_77855 = defunc_1_op_res_77810;
            float redout_tmp_77856 = defunc_1_op_res_77811;
            
            redout_77788 = redout_tmp_77854;
            redout_77789 = redout_tmp_77855;
            redout_77790 = redout_tmp_77856;
        }
        defunc_2_reduce_res_77627 = redout_77788;
        defunc_2_reduce_res_77628 = redout_77789;
        defunc_2_reduce_res_77629 = redout_77790;
        
        float x_77655 = defunc_2_reduce_res_77627 * defunc_2_reduce_res_77629;
        float y_77656 = defunc_2_reduce_res_77628 * defunc_2_reduce_res_77628;
        float y_77657 = x_77655 - y_77656;
        float det1_77658 = 1.0F / y_77657;
        float a11_77659 = defunc_2_reduce_res_77629 * det1_77658;
        float x_77660 = 0.0F - defunc_2_reduce_res_77628;
        float b11_77661 = det1_77658 * x_77660;
        float c11_77662 = defunc_2_reduce_res_77627 * det1_77658;
        float defunc_2_reduce_res_77663;
        float defunc_2_reduce_res_77664;
        float redout_77813;
        float redout_77814;
        
        redout_77813 = 0.0F;
        redout_77814 = 0.0F;
        for (int64_t i_77812 = 0; i_77812 < q_70282; i_77812++) {
            float x_77815 = ((float *) mem_75484.mem)[i_77812];
            bool cond_77816 = sle64(last_res_72281, i_77812);
            int64_t defunc_0_f_res_77817;
            
            if (cond_77816) {
                defunc_0_f_res_77817 = (int64_t) 0;
            } else {
                int64_t i_77818 = add64(max_res_77607, i_77812);
                int64_t defunc_0_add_arg_77819 =
                        ((int64_t *) mem_75478.mem)[i_77818];
                int64_t defunc_1_add_res_77820 = add64((int64_t) 1,
                                                       defunc_0_add_arg_77819);
                
                defunc_0_f_res_77817 = defunc_1_add_res_77820;
            }
            
            int64_t binop_p_77821 = sub64(defunc_0_f_res_77817, min_res_77542);
            float defunc_0_f_res_77822 = sitofp_i64_f32(binop_p_77821);
            float abs_res_77823 = (float) fabs(defunc_0_f_res_77822);
            float tmp1_77824 = abs_res_77823 / defunc_1_f_res_77626;
            float x_77825 = tmp1_77824 * tmp1_77824;
            float y_77826 = tmp1_77824 * x_77825;
            float tmp2_77827 = 1.0F - y_77826;
            float x_77828 = tmp2_77827 * tmp2_77827;
            float tmp3_77829 = tmp2_77827 * x_77828;
            float tmp4_77830 = x_77815 * tmp3_77829;
            float defunc_1_f_res_77831 = defunc_0_f_res_77822 * tmp4_77830;
            float defunc_0_f_res_77832;
            
            if (cond_77816) {
                defunc_0_f_res_77832 = 0.0F;
            } else {
                int64_t i_77833 = add64(max_res_77607, i_77812);
                float defunc_0_add_arg_77834 =
                      ((float *) mem_75475.mem)[i_77833];
                
                defunc_0_f_res_77832 = defunc_0_add_arg_77834;
            }
            
            float x_77835 = a11_77659 * tmp4_77830;
            float y_77836 = b11_77661 * defunc_1_f_res_77831;
            float x_77837 = x_77835 + y_77836;
            float defunc_9_fit_fun_res_77838 = defunc_0_f_res_77832 * x_77837;
            float x_77839 = b11_77661 * tmp4_77830;
            float y_77840 = c11_77662 * defunc_1_f_res_77831;
            float x_77841 = x_77839 + y_77840;
            float defunc_9_slope_fun_res_77842 = defunc_0_f_res_77832 * x_77841;
            float defunc_1_op_res_77843 = defunc_9_fit_fun_res_77838 +
                  redout_77813;
            float defunc_1_op_res_77844 = defunc_9_slope_fun_res_77842 +
                  redout_77814;
            float redout_tmp_77857 = defunc_1_op_res_77843;
            float redout_tmp_77858 = defunc_1_op_res_77844;
            
            redout_77813 = redout_tmp_77857;
            redout_77814 = redout_tmp_77858;
        }
        defunc_2_reduce_res_77663 = redout_77813;
        defunc_2_reduce_res_77664 = redout_77814;
        ((float *) mem_75487.mem)[gtid_72102] = defunc_2_reduce_res_77663;
        ((float *) mem_75490.mem)[gtid_72102] = defunc_2_reduce_res_77664;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81779_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81779_end -
                 futhark_mc_segmap_parloop_81779_start;
        
        ctx->futhark_mc_segmap_parloop_81779_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81779_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81779_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81777(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72101 = tid;
    int num_tasks_77730 = info.nsubtasks;
    struct futhark_mc_task_81776 *futhark_mc_task_81776 =
                                 (struct futhark_mc_task_81776 *) args;
    struct futhark_context *ctx = futhark_mc_task_81776->ctx;
    uint64_t futhark_mc_segmap_task_81777_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81777_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81776->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81776->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81776->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81776->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81776->free_i_70294;
    bool x_70295 = futhark_mc_task_81776->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81776->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81776->free_loop_cond_70305;
    int64_t last_res_72281 = futhark_mc_task_81776->free_last_res_72281;
    int64_t min_arg_72296 = futhark_mc_task_81776->free_min_arg_72296;
    int64_t min_arg_72297 = futhark_mc_task_81776->free_min_arg_72297;
    int64_t min_res_72298 = futhark_mc_task_81776->free_min_res_72298;
    float max_res_72302 = futhark_mc_task_81776->free_max_res_72302;
    struct memblock mem_75475 = {.desc ="mem_75475", .mem =
                                 futhark_mc_task_81776->free_mem_75475, .size =
                                 0, .references =NULL};
    struct memblock mem_75478 = {.desc ="mem_75478", .mem =
                                 futhark_mc_task_81776->free_mem_75478, .size =
                                 0, .references =NULL};
    struct memblock mem_75481 = {.desc ="mem_75481", .mem =
                                 futhark_mc_task_81776->free_mem_75481, .size =
                                 0, .references =NULL};
    struct memblock mem_75484 = {.desc ="mem_75484", .mem =
                                 futhark_mc_task_81776->free_mem_75484, .size =
                                 0, .references =NULL};
    struct memblock mem_75487 = {.desc ="mem_75487", .mem =
                                 futhark_mc_task_81776->free_mem_75487, .size =
                                 0, .references =NULL};
    struct memblock mem_75490 = {.desc ="mem_75490", .mem =
                                 futhark_mc_task_81776->free_mem_75490, .size =
                                 0, .references =NULL};
    int64_t iter_77731;
    struct futhark_mc_segmap_parloop_struct_81778
    futhark_mc_segmap_parloop_struct_81778;
    
    futhark_mc_segmap_parloop_struct_81778.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81778.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81778.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81778.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81778.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81778.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81778.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81778.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81778.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81778.free_last_res_72281 = last_res_72281;
    futhark_mc_segmap_parloop_struct_81778.free_min_arg_72296 = min_arg_72296;
    futhark_mc_segmap_parloop_struct_81778.free_min_arg_72297 = min_arg_72297;
    futhark_mc_segmap_parloop_struct_81778.free_min_res_72298 = min_res_72298;
    futhark_mc_segmap_parloop_struct_81778.free_max_res_72302 = max_res_72302;
    futhark_mc_segmap_parloop_struct_81778.free_mem_75475 = mem_75475.mem;
    futhark_mc_segmap_parloop_struct_81778.free_mem_75478 = mem_75478.mem;
    futhark_mc_segmap_parloop_struct_81778.free_mem_75481 = mem_75481.mem;
    futhark_mc_segmap_parloop_struct_81778.free_mem_75484 = mem_75484.mem;
    futhark_mc_segmap_parloop_struct_81778.free_mem_75487 = mem_75487.mem;
    futhark_mc_segmap_parloop_struct_81778.free_mem_75490 = mem_75490.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81779_task;
    
    futhark_mc_segmap_parloop_81779_task.name =
        "futhark_mc_segmap_parloop_81779";
    futhark_mc_segmap_parloop_81779_task.fn = futhark_mc_segmap_parloop_81779;
    futhark_mc_segmap_parloop_81779_task.args =
        &futhark_mc_segmap_parloop_struct_81778;
    futhark_mc_segmap_parloop_81779_task.iterations = iterations;
    futhark_mc_segmap_parloop_81779_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81779_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81779_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81779_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81779_task);
    
    if (futhark_mc_segmap_parloop_81779_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81779_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81779_total_end -
                 futhark_mc_segmap_parloop_81779_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81779_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81779_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81779_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81777_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81777_end -
                 futhark_mc_segmap_task_81777_start;
        
        ctx->futhark_mc_segmap_task_81777_runs[tid]++;
        ctx->futhark_mc_segmap_task_81777_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81777_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81781 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_72281;
    int64_t free_min_arg_72296;
    int64_t free_min_arg_72297;
    int64_t free_min_res_72298;
    float free_max_res_72302;
    unsigned char *free_mem_75475;
    unsigned char *free_mem_75478;
    unsigned char *free_mem_75481;
    unsigned char *free_mem_75484;
    unsigned char *free_mem_75487;
    unsigned char *free_mem_75490;
};
struct futhark_mc_task_81783 {
    struct futhark_context *ctx;
    int64_t free_last_res_72281;
    unsigned char *free_mem_75478;
    unsigned char *free_mem_75484;
    int64_t free_min_res_77382;
    int64_t free_max_res_77447;
    float free_defunc_1_f_res_77466;
    float *retval_defunc_2_reduce_res_77467;
    float *retval_defunc_2_reduce_res_77468;
    float *retval_defunc_2_reduce_res_77469;
};
struct futhark_mc_segred_stage_1_parloop_struct_81788 {
    struct futhark_context *ctx;
    int64_t free_last_res_72281;
    unsigned char *free_mem_75478;
    unsigned char *free_mem_75484;
    int64_t free_min_res_77382;
    int64_t free_max_res_77447;
    float free_defunc_1_f_res_77466;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_77986;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_77988;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_77990;
};
static int futhark_mc_segred_stage_1_parloop_81789(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_72105, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81788
    *futhark_mc_segred_stage_1_parloop_struct_81788 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81788 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81788->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81789_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81789_start = get_wall_time();
    
    int64_t last_res_72281 =
            futhark_mc_segred_stage_1_parloop_struct_81788->free_last_res_72281;
    struct memblock mem_75478 = {.desc ="mem_75478", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81788->free_mem_75478,
                                 .size =0, .references =NULL};
    struct memblock mem_75484 = {.desc ="mem_75484", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81788->free_mem_75484,
                                 .size =0, .references =NULL};
    int64_t min_res_77382 =
            futhark_mc_segred_stage_1_parloop_struct_81788->free_min_res_77382;
    int64_t max_res_77447 =
            futhark_mc_segred_stage_1_parloop_struct_81788->free_max_res_77447;
    float defunc_1_f_res_77466 =
          futhark_mc_segred_stage_1_parloop_struct_81788->free_defunc_1_f_res_77466;
    struct memblock reduce_stage_1_tid_res_arr_mem_77986 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_77986",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81788->free_reduce_stage_1_tid_res_arr_mem_77986,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_77988 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_77988",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81788->free_reduce_stage_1_tid_res_arr_mem_77988,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_77990 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_77990",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81788->free_reduce_stage_1_tid_res_arr_mem_77990,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77992 = start;
    float x_77915;
    float x_77916;
    float x_77918;
    float x_77919;
    float x_77921;
    float x_77922;
    float local_acc_77993 = 0.0F;
    float local_acc_77994 = 0.0F;
    float local_acc_77995 = 0.0F;
    
    for (; iter_77992 < end; iter_77992++) {
        int64_t gtid_72106 = iter_77992;
        float x_77924 = ((float *) mem_75484.mem)[gtid_72106];
        bool cond_77925 = sle64(last_res_72281, gtid_72106);
        int64_t defunc_0_f_res_77926;
        
        if (cond_77925) {
            defunc_0_f_res_77926 = (int64_t) 0;
        } else {
            int64_t i_77927 = add64(gtid_72106, max_res_77447);
            int64_t defunc_0_add_arg_77928 =
                    ((int64_t *) mem_75478.mem)[i_77927];
            int64_t defunc_1_add_res_77929 = add64((int64_t) 1,
                                                   defunc_0_add_arg_77928);
            
            defunc_0_f_res_77926 = defunc_1_add_res_77929;
        }
        
        int64_t binop_p_77930 = sub64(defunc_0_f_res_77926, min_res_77382);
        float defunc_0_f_res_77931 = sitofp_i64_f32(binop_p_77930);
        float abs_res_77932 = (float) fabs(defunc_0_f_res_77931);
        float tmp1_77933 = abs_res_77932 / defunc_1_f_res_77466;
        float x_77934 = tmp1_77933 * tmp1_77933;
        float y_77935 = tmp1_77933 * x_77934;
        float tmp2_77936 = 1.0F - y_77935;
        float x_77937 = tmp2_77936 * tmp2_77936;
        float tmp3_77938 = tmp2_77936 * x_77937;
        float w_j_77939 = x_77924 * tmp3_77938;
        float xw_j_77940 = defunc_0_f_res_77931 * w_j_77939;
        float x2w_j_77941 = defunc_0_f_res_77931 * xw_j_77940;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_77915 = local_acc_77993;
        }
        // Load next params
        {
            x_77916 = w_j_77939;
        }
        // Red body
        {
            float defunc_1_op_res_77917 = x_77915 + x_77916;
            
            local_acc_77993 = defunc_1_op_res_77917;
        }
        // Load accum params
        {
            x_77918 = local_acc_77994;
        }
        // Load next params
        {
            x_77919 = xw_j_77940;
        }
        // Red body
        {
            float defunc_1_op_res_77920 = x_77918 + x_77919;
            
            local_acc_77994 = defunc_1_op_res_77920;
        }
        // Load accum params
        {
            x_77921 = local_acc_77995;
        }
        // Load next params
        {
            x_77922 = x2w_j_77941;
        }
        // Red body
        {
            float defunc_1_op_res_77923 = x_77921 + x_77922;
            
            local_acc_77995 = defunc_1_op_res_77923;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_77986.mem)[flat_tid_72105] =
        local_acc_77993;
    ((float *) reduce_stage_1_tid_res_arr_mem_77988.mem)[flat_tid_72105] =
        local_acc_77994;
    ((float *) reduce_stage_1_tid_res_arr_mem_77990.mem)[flat_tid_72105] =
        local_acc_77995;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81789_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81789_end -
                 futhark_mc_segred_stage_1_parloop_81789_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81789_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81789_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81789_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81784(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72105 = tid;
    int num_tasks_77985 = info.nsubtasks;
    struct futhark_mc_task_81783 *futhark_mc_task_81783 =
                                 (struct futhark_mc_task_81783 *) args;
    struct futhark_context *ctx = futhark_mc_task_81783->ctx;
    uint64_t futhark_mc_segred_task_81784_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81784_start = get_wall_time();
    
    int64_t last_res_72281 = futhark_mc_task_81783->free_last_res_72281;
    struct memblock mem_75478 = {.desc ="mem_75478", .mem =
                                 futhark_mc_task_81783->free_mem_75478, .size =
                                 0, .references =NULL};
    struct memblock mem_75484 = {.desc ="mem_75484", .mem =
                                 futhark_mc_task_81783->free_mem_75484, .size =
                                 0, .references =NULL};
    int64_t min_res_77382 = futhark_mc_task_81783->free_min_res_77382;
    int64_t max_res_77447 = futhark_mc_task_81783->free_max_res_77447;
    float defunc_1_f_res_77466 =
          futhark_mc_task_81783->free_defunc_1_f_res_77466;
    float defunc_2_reduce_res_77467 =
          *futhark_mc_task_81783->retval_defunc_2_reduce_res_77467;
    float defunc_2_reduce_res_77468 =
          *futhark_mc_task_81783->retval_defunc_2_reduce_res_77468;
    float defunc_2_reduce_res_77469 =
          *futhark_mc_task_81783->retval_defunc_2_reduce_res_77469;
    size_t reduce_stage_1_tid_res_arr_mem_77986_cached_sizze_81785 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_77986 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_77988_cached_sizze_81786 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_77988 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_77990_cached_sizze_81787 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_77990 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_77986_cached_sizze_81785 <
        (size_t) ((int64_t) 4 * num_tasks_77985)) {
        reduce_stage_1_tid_res_arr_mem_77986 =
            realloc(reduce_stage_1_tid_res_arr_mem_77986, (int64_t) 4 *
                    num_tasks_77985);
        reduce_stage_1_tid_res_arr_mem_77986_cached_sizze_81785 = (int64_t) 4 *
            num_tasks_77985;
    }
    if (reduce_stage_1_tid_res_arr_mem_77988_cached_sizze_81786 <
        (size_t) ((int64_t) 4 * num_tasks_77985)) {
        reduce_stage_1_tid_res_arr_mem_77988 =
            realloc(reduce_stage_1_tid_res_arr_mem_77988, (int64_t) 4 *
                    num_tasks_77985);
        reduce_stage_1_tid_res_arr_mem_77988_cached_sizze_81786 = (int64_t) 4 *
            num_tasks_77985;
    }
    if (reduce_stage_1_tid_res_arr_mem_77990_cached_sizze_81787 <
        (size_t) ((int64_t) 4 * num_tasks_77985)) {
        reduce_stage_1_tid_res_arr_mem_77990 =
            realloc(reduce_stage_1_tid_res_arr_mem_77990, (int64_t) 4 *
                    num_tasks_77985);
        reduce_stage_1_tid_res_arr_mem_77990_cached_sizze_81787 = (int64_t) 4 *
            num_tasks_77985;
    }
    
    int64_t iter_77992;
    struct futhark_mc_segred_stage_1_parloop_struct_81788
    futhark_mc_segred_stage_1_parloop_struct_81788;
    
    futhark_mc_segred_stage_1_parloop_struct_81788.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81788.free_last_res_72281 =
        last_res_72281;
    futhark_mc_segred_stage_1_parloop_struct_81788.free_mem_75478 =
        mem_75478.mem;
    futhark_mc_segred_stage_1_parloop_struct_81788.free_mem_75484 =
        mem_75484.mem;
    futhark_mc_segred_stage_1_parloop_struct_81788.free_min_res_77382 =
        min_res_77382;
    futhark_mc_segred_stage_1_parloop_struct_81788.free_max_res_77447 =
        max_res_77447;
    futhark_mc_segred_stage_1_parloop_struct_81788.free_defunc_1_f_res_77466 =
        defunc_1_f_res_77466;
    futhark_mc_segred_stage_1_parloop_struct_81788.free_reduce_stage_1_tid_res_arr_mem_77986 =
        reduce_stage_1_tid_res_arr_mem_77986;
    futhark_mc_segred_stage_1_parloop_struct_81788.free_reduce_stage_1_tid_res_arr_mem_77988 =
        reduce_stage_1_tid_res_arr_mem_77988;
    futhark_mc_segred_stage_1_parloop_struct_81788.free_reduce_stage_1_tid_res_arr_mem_77990 =
        reduce_stage_1_tid_res_arr_mem_77990;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81789_task;
    
    futhark_mc_segred_stage_1_parloop_81789_task.name =
        "futhark_mc_segred_stage_1_parloop_81789";
    futhark_mc_segred_stage_1_parloop_81789_task.fn =
        futhark_mc_segred_stage_1_parloop_81789;
    futhark_mc_segred_stage_1_parloop_81789_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81788;
    futhark_mc_segred_stage_1_parloop_81789_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81789_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81789_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81789_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81789_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81789_task);
    
    if (futhark_mc_segred_stage_1_parloop_81789_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81789_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81789_total_end -
                 futhark_mc_segred_stage_1_parloop_81789_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81789_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81789_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81789_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_77467 = 0.0F;
        defunc_2_reduce_res_77468 = 0.0F;
        defunc_2_reduce_res_77469 = 0.0F;
    }
    
    float x_77996;
    float x_77997;
    float x_77999;
    float x_78000;
    float x_78002;
    float x_78003;
    
    for (int32_t i_78005 = 0; i_78005 < num_tasks_77985; i_78005++) {
        flat_tid_72105 = i_78005;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_77996 = defunc_2_reduce_res_77467;
            }
            // load next params
            {
                x_77997 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_77986)[flat_tid_72105];
            }
            // red body
            {
                float defunc_1_op_res_77998 = x_77996 + x_77997;
                
                defunc_2_reduce_res_77467 = defunc_1_op_res_77998;
            }
            // load acc params
            {
                x_77999 = defunc_2_reduce_res_77468;
            }
            // load next params
            {
                x_78000 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_77988)[flat_tid_72105];
            }
            // red body
            {
                float defunc_1_op_res_78001 = x_77999 + x_78000;
                
                defunc_2_reduce_res_77468 = defunc_1_op_res_78001;
            }
            // load acc params
            {
                x_78002 = defunc_2_reduce_res_77469;
            }
            // load next params
            {
                x_78003 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_77990)[flat_tid_72105];
            }
            // red body
            {
                float defunc_1_op_res_78004 = x_78002 + x_78003;
                
                defunc_2_reduce_res_77469 = defunc_1_op_res_78004;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_77986);
    free(reduce_stage_1_tid_res_arr_mem_77988);
    free(reduce_stage_1_tid_res_arr_mem_77990);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81784_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81784_end -
                 futhark_mc_segred_task_81784_start;
        
        ctx->futhark_mc_segred_task_81784_runs[tid]++;
        ctx->futhark_mc_segred_task_81784_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81784_iter[tid] += iterations;
    }
    *futhark_mc_task_81783->retval_defunc_2_reduce_res_77467 =
        defunc_2_reduce_res_77467;
    *futhark_mc_task_81783->retval_defunc_2_reduce_res_77468 =
        defunc_2_reduce_res_77468;
    *futhark_mc_task_81783->retval_defunc_2_reduce_res_77469 =
        defunc_2_reduce_res_77469;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81790 {
    struct futhark_context *ctx;
    int64_t free_last_res_72281;
    unsigned char *free_mem_75475;
    unsigned char *free_mem_75478;
    unsigned char *free_mem_75484;
    int64_t free_min_res_77382;
    int64_t free_max_res_77447;
    float free_defunc_1_f_res_77466;
    float free_a11_77501;
    float free_b11_77503;
    float free_c11_77504;
    float *retval_defunc_2_reduce_res_77505;
    float *retval_defunc_2_reduce_res_77506;
};
struct futhark_mc_segred_stage_1_parloop_struct_81794 {
    struct futhark_context *ctx;
    int64_t free_last_res_72281;
    unsigned char *free_mem_75475;
    unsigned char *free_mem_75478;
    unsigned char *free_mem_75484;
    int64_t free_min_res_77382;
    int64_t free_max_res_77447;
    float free_defunc_1_f_res_77466;
    float free_a11_77501;
    float free_b11_77503;
    float free_c11_77504;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_78007;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_78009;
};
static int futhark_mc_segred_stage_1_parloop_81795(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_72107, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81794
    *futhark_mc_segred_stage_1_parloop_struct_81794 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81794 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81794->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81795_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81795_start = get_wall_time();
    
    int64_t last_res_72281 =
            futhark_mc_segred_stage_1_parloop_struct_81794->free_last_res_72281;
    struct memblock mem_75475 = {.desc ="mem_75475", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81794->free_mem_75475,
                                 .size =0, .references =NULL};
    struct memblock mem_75478 = {.desc ="mem_75478", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81794->free_mem_75478,
                                 .size =0, .references =NULL};
    struct memblock mem_75484 = {.desc ="mem_75484", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81794->free_mem_75484,
                                 .size =0, .references =NULL};
    int64_t min_res_77382 =
            futhark_mc_segred_stage_1_parloop_struct_81794->free_min_res_77382;
    int64_t max_res_77447 =
            futhark_mc_segred_stage_1_parloop_struct_81794->free_max_res_77447;
    float defunc_1_f_res_77466 =
          futhark_mc_segred_stage_1_parloop_struct_81794->free_defunc_1_f_res_77466;
    float a11_77501 =
          futhark_mc_segred_stage_1_parloop_struct_81794->free_a11_77501;
    float b11_77503 =
          futhark_mc_segred_stage_1_parloop_struct_81794->free_b11_77503;
    float c11_77504 =
          futhark_mc_segred_stage_1_parloop_struct_81794->free_c11_77504;
    struct memblock reduce_stage_1_tid_res_arr_mem_78007 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_78007",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81794->free_reduce_stage_1_tid_res_arr_mem_78007,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_78009 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_78009",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81794->free_reduce_stage_1_tid_res_arr_mem_78009,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78011 = start;
    float x_77942;
    float x_77943;
    float x_77945;
    float x_77946;
    float local_acc_78012 = 0.0F;
    float local_acc_78013 = 0.0F;
    
    for (; iter_78011 < end; iter_78011++) {
        int64_t gtid_72108 = iter_78011;
        float x_77948 = ((float *) mem_75484.mem)[gtid_72108];
        bool cond_77949 = sle64(last_res_72281, gtid_72108);
        int64_t defunc_0_f_res_77950;
        
        if (cond_77949) {
            defunc_0_f_res_77950 = (int64_t) 0;
        } else {
            int64_t i_77951 = add64(gtid_72108, max_res_77447);
            int64_t defunc_0_add_arg_77952 =
                    ((int64_t *) mem_75478.mem)[i_77951];
            int64_t defunc_1_add_res_77953 = add64((int64_t) 1,
                                                   defunc_0_add_arg_77952);
            
            defunc_0_f_res_77950 = defunc_1_add_res_77953;
        }
        
        int64_t binop_p_77954 = sub64(defunc_0_f_res_77950, min_res_77382);
        float defunc_0_f_res_77955 = sitofp_i64_f32(binop_p_77954);
        float abs_res_77956 = (float) fabs(defunc_0_f_res_77955);
        float tmp1_77957 = abs_res_77956 / defunc_1_f_res_77466;
        float x_77958 = tmp1_77957 * tmp1_77957;
        float y_77959 = tmp1_77957 * x_77958;
        float tmp2_77960 = 1.0F - y_77959;
        float x_77961 = tmp2_77960 * tmp2_77960;
        float tmp3_77962 = tmp2_77960 * x_77961;
        float tmp4_77963 = x_77948 * tmp3_77962;
        float defunc_1_f_res_77964 = defunc_0_f_res_77955 * tmp4_77963;
        float defunc_0_f_res_77965;
        
        if (cond_77949) {
            defunc_0_f_res_77965 = 0.0F;
        } else {
            int64_t i_77966 = add64(gtid_72108, max_res_77447);
            float defunc_0_add_arg_77967 = ((float *) mem_75475.mem)[i_77966];
            
            defunc_0_f_res_77965 = defunc_0_add_arg_77967;
        }
        
        float x_77968 = a11_77501 * tmp4_77963;
        float y_77969 = b11_77503 * defunc_1_f_res_77964;
        float x_77970 = x_77968 + y_77969;
        float defunc_9_fit_fun_res_77971 = defunc_0_f_res_77965 * x_77970;
        float x_77972 = b11_77503 * tmp4_77963;
        float y_77973 = c11_77504 * defunc_1_f_res_77964;
        float x_77974 = x_77972 + y_77973;
        float defunc_9_slope_fun_res_77975 = defunc_0_f_res_77965 * x_77974;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_77942 = local_acc_78012;
        }
        // Load next params
        {
            x_77943 = defunc_9_fit_fun_res_77971;
        }
        // Red body
        {
            float defunc_1_op_res_77944 = x_77942 + x_77943;
            
            local_acc_78012 = defunc_1_op_res_77944;
        }
        // Load accum params
        {
            x_77945 = local_acc_78013;
        }
        // Load next params
        {
            x_77946 = defunc_9_slope_fun_res_77975;
        }
        // Red body
        {
            float defunc_1_op_res_77947 = x_77945 + x_77946;
            
            local_acc_78013 = defunc_1_op_res_77947;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_78007.mem)[flat_tid_72107] =
        local_acc_78012;
    ((float *) reduce_stage_1_tid_res_arr_mem_78009.mem)[flat_tid_72107] =
        local_acc_78013;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81795_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81795_end -
                 futhark_mc_segred_stage_1_parloop_81795_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81795_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81795_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81795_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81791(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72107 = tid;
    int num_tasks_78006 = info.nsubtasks;
    struct futhark_mc_task_81790 *futhark_mc_task_81790 =
                                 (struct futhark_mc_task_81790 *) args;
    struct futhark_context *ctx = futhark_mc_task_81790->ctx;
    uint64_t futhark_mc_segred_task_81791_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81791_start = get_wall_time();
    
    int64_t last_res_72281 = futhark_mc_task_81790->free_last_res_72281;
    struct memblock mem_75475 = {.desc ="mem_75475", .mem =
                                 futhark_mc_task_81790->free_mem_75475, .size =
                                 0, .references =NULL};
    struct memblock mem_75478 = {.desc ="mem_75478", .mem =
                                 futhark_mc_task_81790->free_mem_75478, .size =
                                 0, .references =NULL};
    struct memblock mem_75484 = {.desc ="mem_75484", .mem =
                                 futhark_mc_task_81790->free_mem_75484, .size =
                                 0, .references =NULL};
    int64_t min_res_77382 = futhark_mc_task_81790->free_min_res_77382;
    int64_t max_res_77447 = futhark_mc_task_81790->free_max_res_77447;
    float defunc_1_f_res_77466 =
          futhark_mc_task_81790->free_defunc_1_f_res_77466;
    float a11_77501 = futhark_mc_task_81790->free_a11_77501;
    float b11_77503 = futhark_mc_task_81790->free_b11_77503;
    float c11_77504 = futhark_mc_task_81790->free_c11_77504;
    float defunc_2_reduce_res_77505 =
          *futhark_mc_task_81790->retval_defunc_2_reduce_res_77505;
    float defunc_2_reduce_res_77506 =
          *futhark_mc_task_81790->retval_defunc_2_reduce_res_77506;
    size_t reduce_stage_1_tid_res_arr_mem_78007_cached_sizze_81792 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_78007 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_78009_cached_sizze_81793 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_78009 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_78007_cached_sizze_81792 <
        (size_t) ((int64_t) 4 * num_tasks_78006)) {
        reduce_stage_1_tid_res_arr_mem_78007 =
            realloc(reduce_stage_1_tid_res_arr_mem_78007, (int64_t) 4 *
                    num_tasks_78006);
        reduce_stage_1_tid_res_arr_mem_78007_cached_sizze_81792 = (int64_t) 4 *
            num_tasks_78006;
    }
    if (reduce_stage_1_tid_res_arr_mem_78009_cached_sizze_81793 <
        (size_t) ((int64_t) 4 * num_tasks_78006)) {
        reduce_stage_1_tid_res_arr_mem_78009 =
            realloc(reduce_stage_1_tid_res_arr_mem_78009, (int64_t) 4 *
                    num_tasks_78006);
        reduce_stage_1_tid_res_arr_mem_78009_cached_sizze_81793 = (int64_t) 4 *
            num_tasks_78006;
    }
    
    int64_t iter_78011;
    struct futhark_mc_segred_stage_1_parloop_struct_81794
    futhark_mc_segred_stage_1_parloop_struct_81794;
    
    futhark_mc_segred_stage_1_parloop_struct_81794.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81794.free_last_res_72281 =
        last_res_72281;
    futhark_mc_segred_stage_1_parloop_struct_81794.free_mem_75475 =
        mem_75475.mem;
    futhark_mc_segred_stage_1_parloop_struct_81794.free_mem_75478 =
        mem_75478.mem;
    futhark_mc_segred_stage_1_parloop_struct_81794.free_mem_75484 =
        mem_75484.mem;
    futhark_mc_segred_stage_1_parloop_struct_81794.free_min_res_77382 =
        min_res_77382;
    futhark_mc_segred_stage_1_parloop_struct_81794.free_max_res_77447 =
        max_res_77447;
    futhark_mc_segred_stage_1_parloop_struct_81794.free_defunc_1_f_res_77466 =
        defunc_1_f_res_77466;
    futhark_mc_segred_stage_1_parloop_struct_81794.free_a11_77501 = a11_77501;
    futhark_mc_segred_stage_1_parloop_struct_81794.free_b11_77503 = b11_77503;
    futhark_mc_segred_stage_1_parloop_struct_81794.free_c11_77504 = c11_77504;
    futhark_mc_segred_stage_1_parloop_struct_81794.free_reduce_stage_1_tid_res_arr_mem_78007 =
        reduce_stage_1_tid_res_arr_mem_78007;
    futhark_mc_segred_stage_1_parloop_struct_81794.free_reduce_stage_1_tid_res_arr_mem_78009 =
        reduce_stage_1_tid_res_arr_mem_78009;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81795_task;
    
    futhark_mc_segred_stage_1_parloop_81795_task.name =
        "futhark_mc_segred_stage_1_parloop_81795";
    futhark_mc_segred_stage_1_parloop_81795_task.fn =
        futhark_mc_segred_stage_1_parloop_81795;
    futhark_mc_segred_stage_1_parloop_81795_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81794;
    futhark_mc_segred_stage_1_parloop_81795_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81795_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81795_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81795_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81795_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81795_task);
    
    if (futhark_mc_segred_stage_1_parloop_81795_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81795_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81795_total_end -
                 futhark_mc_segred_stage_1_parloop_81795_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81795_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81795_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81795_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_77505 = 0.0F;
        defunc_2_reduce_res_77506 = 0.0F;
    }
    
    float x_78014;
    float x_78015;
    float x_78017;
    float x_78018;
    
    for (int32_t i_78020 = 0; i_78020 < num_tasks_78006; i_78020++) {
        flat_tid_72107 = i_78020;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_78014 = defunc_2_reduce_res_77505;
            }
            // load next params
            {
                x_78015 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_78007)[flat_tid_72107];
            }
            // red body
            {
                float defunc_1_op_res_78016 = x_78014 + x_78015;
                
                defunc_2_reduce_res_77505 = defunc_1_op_res_78016;
            }
            // load acc params
            {
                x_78017 = defunc_2_reduce_res_77506;
            }
            // load next params
            {
                x_78018 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_78009)[flat_tid_72107];
            }
            // red body
            {
                float defunc_1_op_res_78019 = x_78017 + x_78018;
                
                defunc_2_reduce_res_77506 = defunc_1_op_res_78019;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_78007);
    free(reduce_stage_1_tid_res_arr_mem_78009);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81791_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81791_end -
                 futhark_mc_segred_task_81791_start;
        
        ctx->futhark_mc_segred_task_81791_runs[tid]++;
        ctx->futhark_mc_segred_task_81791_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81791_iter[tid] += iterations;
    }
    *futhark_mc_task_81790->retval_defunc_2_reduce_res_77505 =
        defunc_2_reduce_res_77505;
    *futhark_mc_task_81790->retval_defunc_2_reduce_res_77506 =
        defunc_2_reduce_res_77506;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81782(void *args, int64_t start,
                                           int64_t end, int flat_tid_72103,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81781
    *futhark_mc_segmap_parloop_struct_81781 =
    (struct futhark_mc_segmap_parloop_struct_81781 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81781->ctx;
    uint64_t futhark_mc_segmap_parloop_81782_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81782_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81781->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81781->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81781->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81781->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81781->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81781->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81781->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81781->free_loop_cond_70305;
    int64_t last_res_72281 =
            futhark_mc_segmap_parloop_struct_81781->free_last_res_72281;
    int64_t min_arg_72296 =
            futhark_mc_segmap_parloop_struct_81781->free_min_arg_72296;
    int64_t min_arg_72297 =
            futhark_mc_segmap_parloop_struct_81781->free_min_arg_72297;
    int64_t min_res_72298 =
            futhark_mc_segmap_parloop_struct_81781->free_min_res_72298;
    float max_res_72302 =
          futhark_mc_segmap_parloop_struct_81781->free_max_res_72302;
    struct memblock mem_75475 = {.desc ="mem_75475", .mem =
                                 futhark_mc_segmap_parloop_struct_81781->free_mem_75475,
                                 .size =0, .references =NULL};
    struct memblock mem_75478 = {.desc ="mem_75478", .mem =
                                 futhark_mc_segmap_parloop_struct_81781->free_mem_75478,
                                 .size =0, .references =NULL};
    struct memblock mem_75481 = {.desc ="mem_75481", .mem =
                                 futhark_mc_segmap_parloop_struct_81781->free_mem_75481,
                                 .size =0, .references =NULL};
    struct memblock mem_75484 = {.desc ="mem_75484", .mem =
                                 futhark_mc_segmap_parloop_struct_81781->free_mem_75484,
                                 .size =0, .references =NULL};
    struct memblock mem_75487 = {.desc ="mem_75487", .mem =
                                 futhark_mc_segmap_parloop_struct_81781->free_mem_75487,
                                 .size =0, .references =NULL};
    struct memblock mem_75490 = {.desc ="mem_75490", .mem =
                                 futhark_mc_segmap_parloop_struct_81781->free_mem_75490,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_77859 = start;
    
    for (; iter_77859 < end; iter_77859++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77976 = n_m_70288;
        int64_t gtid_72104 = iter_77859;
        int64_t remnant_77977 = iter_77859 - gtid_72104;
        int64_t min_arg_77381 = mul64(jump_70284, gtid_72104);
        int64_t min_res_77382 = smin64(i_70294, min_arg_77381);
        int64_t defunc_0_g_res_77383 = add64((int64_t) 1, min_res_77382);
        bool init_idx_77384;
        int64_t init_idx_77385;
        int64_t init_idx_77386;
        bool loop_while_77860;
        int64_t low_77861;
        int64_t high_77862;
        
        loop_while_77860 = x_70295;
        low_77861 = (int64_t) 0;
        high_77862 = i_70294;
        while (loop_while_77860) {
            int64_t x_77863 = add64(low_77861, high_77862);
            int64_t mid_77864 = sdiv64(x_77863, (int64_t) 2);
            bool x_77865 = sle64((int64_t) 0, mid_77864);
            bool y_77866 = slt64(mid_77864, n_70280);
            bool bounds_check_77867 = x_77865 && y_77866;
            bool index_certs_77868;
            
            if (!bounds_check_77867) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_77864,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t mid_id_77869 = ((int64_t *) mem_75481.mem)[mid_77864];
            bool cond_77870 = slt64(mid_id_77869, (int64_t) 0);
            int64_t mid_idx_77871;
            
            if (cond_77870) {
                mid_idx_77871 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_77871 = mid_id_77869;
            }
            
            bool cond_77872 = sle64(defunc_0_g_res_77383, mid_idx_77871);
            int64_t loopres_77873;
            int64_t loopres_77874;
            
            if (cond_77872) {
                int64_t loopres_t_res_77875 = sub64(mid_77864, (int64_t) 1);
                
                loopres_77873 = low_77861;
                loopres_77874 = loopres_t_res_77875;
            } else {
                int64_t loopres_f_res_77876 = add64((int64_t) 1, mid_77864);
                
                loopres_77873 = loopres_f_res_77876;
                loopres_77874 = high_77862;
            }
            
            bool loop_cond_77877 = sle64(loopres_77873, loopres_77874);
            bool loop_while_tmp_77978 = loop_cond_77877;
            int64_t low_tmp_77979 = loopres_77873;
            int64_t high_tmp_77980 = loopres_77874;
            
            loop_while_77860 = loop_while_tmp_77978;
            low_77861 = low_tmp_77979;
            high_77862 = high_tmp_77980;
        }
        init_idx_77384 = loop_while_77860;
        init_idx_77385 = low_77861;
        init_idx_77386 = high_77862;
        
        bool idx_77405;
        int64_t idx_77406;
        int64_t idx_77407;
        int64_t idx_77408;
        bool loop_while_77878;
        int64_t l_idx_77879;
        int64_t r_idx_77880;
        int64_t span_77881;
        
        loop_while_77878 = loop_cond_70305;
        l_idx_77879 = init_idx_77385;
        r_idx_77880 = init_idx_77385;
        span_77881 = (int64_t) 1;
        while (loop_while_77878) {
            int64_t max_arg_77882 = sub64(l_idx_77879, (int64_t) 1);
            int64_t max_res_77883 = smax64((int64_t) 0, max_arg_77882);
            int64_t min_arg_77884 = add64((int64_t) 1, r_idx_77880);
            int64_t min_res_77885 = smin64(min_arg_72296, min_arg_77884);
            bool x_77886 = sle64((int64_t) 0, max_res_77883);
            bool y_77887 = slt64(max_res_77883, n_70280);
            bool bounds_check_77888 = x_77886 && y_77887;
            bool index_certs_77889;
            
            if (!bounds_check_77888) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_77883,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_77890 = ((int64_t *) mem_75481.mem)[max_res_77883];
            int64_t abs_arg_77891 = sub64(x_77890, defunc_0_g_res_77383);
            int64_t abs_res_77892 = abs64(abs_arg_77891);
            bool x_77893 = sle64((int64_t) 0, min_res_77885);
            bool y_77894 = slt64(min_res_77885, n_70280);
            bool bounds_check_77895 = x_77893 && y_77894;
            bool index_certs_77896;
            
            if (!bounds_check_77895) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_77885,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_77897 = ((int64_t *) mem_75481.mem)[min_res_77885];
            int64_t abs_arg_77898 = sub64(x_77897, defunc_0_g_res_77383);
            int64_t abs_res_77899 = abs64(abs_arg_77898);
            bool cond_77900 = max_res_77883 == l_idx_77879;
            int64_t loopres_77901;
            int64_t loopres_77902;
            int64_t loopres_77903;
            
            if (cond_77900) {
                loopres_77901 = l_idx_77879;
                loopres_77902 = r_idx_77880;
                loopres_77903 = min_res_70300;
            } else {
                bool cond_77904 = slt64(abs_res_77892, abs_res_77899);
                bool cond_f_res_77905 = min_res_77885 == r_idx_77880;
                bool x_77906 = !cond_77904;
                bool y_77907 = cond_f_res_77905 && x_77906;
                bool cond_77908 = cond_77904 || y_77907;
                int64_t loopres_f_res_77909;
                
                if (cond_77908) {
                    loopres_f_res_77909 = max_res_77883;
                } else {
                    loopres_f_res_77909 = l_idx_77879;
                }
                
                int64_t loopres_f_res_77910;
                
                if (cond_77908) {
                    loopres_f_res_77910 = r_idx_77880;
                } else {
                    loopres_f_res_77910 = min_res_77885;
                }
                
                int64_t loopres_f_res_77911;
                
                if (cond_77908) {
                    int64_t loopres_f_res_t_res_77912 = add64((int64_t) 1,
                                                              span_77881);
                    
                    loopres_f_res_77911 = loopres_f_res_t_res_77912;
                } else {
                    int64_t loopres_f_res_f_res_77913 = add64((int64_t) 1,
                                                              span_77881);
                    
                    loopres_f_res_77911 = loopres_f_res_f_res_77913;
                }
                loopres_77901 = loopres_f_res_77909;
                loopres_77902 = loopres_f_res_77910;
                loopres_77903 = loopres_f_res_77911;
            }
            
            bool loop_cond_77914 = slt64(loopres_77903, min_res_70300);
            bool loop_while_tmp_77981 = loop_cond_77914;
            int64_t l_idx_tmp_77982 = loopres_77901;
            int64_t r_idx_tmp_77983 = loopres_77902;
            int64_t span_tmp_77984 = loopres_77903;
            
            loop_while_77878 = loop_while_tmp_77981;
            l_idx_77879 = l_idx_tmp_77982;
            r_idx_77880 = r_idx_tmp_77983;
            span_77881 = span_tmp_77984;
        }
        idx_77405 = loop_while_77878;
        idx_77406 = l_idx_77879;
        idx_77407 = r_idx_77880;
        idx_77408 = span_77881;
        
        int64_t min_res_77446 = smin64(min_arg_72297, idx_77406);
        int64_t max_res_77447 = smax64((int64_t) 0, min_res_77446);
        int64_t x_77448 = add64(min_res_72298, max_res_77447);
        int64_t r_77449 = sub64(x_77448, (int64_t) 1);
        bool x_77450 = sle64((int64_t) 0, r_77449);
        bool y_77451 = slt64(r_77449, n_70280);
        bool bounds_check_77452 = x_77450 && y_77451;
        bool index_certs_77453;
        
        if (!bounds_check_77452) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_77449,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_77454 = ((int64_t *) mem_75478.mem)[r_77449];
        int64_t abs_arg_77455 = sub64(x_77454, min_res_77382);
        int64_t abs_res_77456 = abs64(abs_arg_77455);
        bool x_77457 = sle64((int64_t) 0, max_res_77447);
        bool y_77458 = slt64(max_res_77447, n_70280);
        bool bounds_check_77459 = x_77457 && y_77458;
        bool index_certs_77460;
        
        if (!bounds_check_77459) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_77447,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_77461 = ((int64_t *) mem_75478.mem)[max_res_77447];
        int64_t abs_arg_77462 = sub64(x_77461, min_res_77382);
        int64_t abs_res_77463 = abs64(abs_arg_77462);
        int64_t max_res_77464 = smax64(abs_res_77456, abs_res_77463);
        float defunc_0_f_res_77465 = sitofp_i64_f32(max_res_77464);
        float defunc_1_f_res_77466 = max_res_72302 + defunc_0_f_res_77465;
        float defunc_2_reduce_res_77467;
        float defunc_2_reduce_res_77468;
        float defunc_2_reduce_res_77469;
        int64_t flat_tid_72105 = (int64_t) 0;
        int32_t num_tasks_77985;
        struct futhark_mc_task_81783 futhark_mc_task_81783;
        
        futhark_mc_task_81783.ctx = ctx;
        futhark_mc_task_81783.free_last_res_72281 = last_res_72281;
        futhark_mc_task_81783.free_mem_75478 = mem_75478.mem;
        futhark_mc_task_81783.free_mem_75484 = mem_75484.mem;
        futhark_mc_task_81783.free_min_res_77382 = min_res_77382;
        futhark_mc_task_81783.free_max_res_77447 = max_res_77447;
        futhark_mc_task_81783.free_defunc_1_f_res_77466 = defunc_1_f_res_77466;
        futhark_mc_task_81783.retval_defunc_2_reduce_res_77467 =
            &defunc_2_reduce_res_77467;
        futhark_mc_task_81783.retval_defunc_2_reduce_res_77468 =
            &defunc_2_reduce_res_77468;
        futhark_mc_task_81783.retval_defunc_2_reduce_res_77469 =
            &defunc_2_reduce_res_77469;
        
        struct scheduler_segop futhark_mc_task_81783_task;
        
        futhark_mc_task_81783_task.args = &futhark_mc_task_81783;
        futhark_mc_task_81783_task.top_level_fn = futhark_mc_segred_task_81784;
        futhark_mc_task_81783_task.name = "futhark_mc_segred_task_81784";
        futhark_mc_task_81783_task.iterations = q_70282;
        futhark_mc_task_81783_task.task_time =
            &ctx->futhark_mc_segred_task_81784_total_time;
        futhark_mc_task_81783_task.task_iter =
            &ctx->futhark_mc_segred_task_81784_total_iter;
        futhark_mc_task_81783_task.sched = STATIC;
        futhark_mc_task_81783_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81784_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81783_task);
        
        if (futhark_mc_segred_task_81784_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_77497 = defunc_2_reduce_res_77467 * defunc_2_reduce_res_77469;
        float y_77498 = defunc_2_reduce_res_77468 * defunc_2_reduce_res_77468;
        float y_77499 = x_77497 - y_77498;
        float det1_77500 = 1.0F / y_77499;
        float a11_77501 = defunc_2_reduce_res_77469 * det1_77500;
        float x_77502 = 0.0F - defunc_2_reduce_res_77468;
        float b11_77503 = det1_77500 * x_77502;
        float c11_77504 = defunc_2_reduce_res_77467 * det1_77500;
        float defunc_2_reduce_res_77505;
        float defunc_2_reduce_res_77506;
        int64_t flat_tid_72107 = (int64_t) 0;
        int32_t num_tasks_78006;
        struct futhark_mc_task_81790 futhark_mc_task_81790;
        
        futhark_mc_task_81790.ctx = ctx;
        futhark_mc_task_81790.free_last_res_72281 = last_res_72281;
        futhark_mc_task_81790.free_mem_75475 = mem_75475.mem;
        futhark_mc_task_81790.free_mem_75478 = mem_75478.mem;
        futhark_mc_task_81790.free_mem_75484 = mem_75484.mem;
        futhark_mc_task_81790.free_min_res_77382 = min_res_77382;
        futhark_mc_task_81790.free_max_res_77447 = max_res_77447;
        futhark_mc_task_81790.free_defunc_1_f_res_77466 = defunc_1_f_res_77466;
        futhark_mc_task_81790.free_a11_77501 = a11_77501;
        futhark_mc_task_81790.free_b11_77503 = b11_77503;
        futhark_mc_task_81790.free_c11_77504 = c11_77504;
        futhark_mc_task_81790.retval_defunc_2_reduce_res_77505 =
            &defunc_2_reduce_res_77505;
        futhark_mc_task_81790.retval_defunc_2_reduce_res_77506 =
            &defunc_2_reduce_res_77506;
        
        struct scheduler_segop futhark_mc_task_81790_task;
        
        futhark_mc_task_81790_task.args = &futhark_mc_task_81790;
        futhark_mc_task_81790_task.top_level_fn = futhark_mc_segred_task_81791;
        futhark_mc_task_81790_task.name = "futhark_mc_segred_task_81791";
        futhark_mc_task_81790_task.iterations = q_70282;
        futhark_mc_task_81790_task.task_time =
            &ctx->futhark_mc_segred_task_81791_total_time;
        futhark_mc_task_81790_task.task_iter =
            &ctx->futhark_mc_segred_task_81791_total_iter;
        futhark_mc_task_81790_task.sched = STATIC;
        futhark_mc_task_81790_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81791_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81790_task);
        
        if (futhark_mc_segred_task_81791_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_75487.mem)[gtid_72104] = defunc_2_reduce_res_77505;
        ((float *) mem_75490.mem)[gtid_72104] = defunc_2_reduce_res_77506;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81782_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81782_end -
                 futhark_mc_segmap_parloop_81782_start;
        
        ctx->futhark_mc_segmap_parloop_81782_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81782_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81782_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81780(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72103 = tid;
    int num_tasks_77730 = info.nsubtasks;
    struct futhark_mc_task_81776 *futhark_mc_task_81776 =
                                 (struct futhark_mc_task_81776 *) args;
    struct futhark_context *ctx = futhark_mc_task_81776->ctx;
    uint64_t futhark_mc_segmap_nested_task_81780_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81780_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81776->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81776->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81776->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81776->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81776->free_i_70294;
    bool x_70295 = futhark_mc_task_81776->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81776->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81776->free_loop_cond_70305;
    int64_t last_res_72281 = futhark_mc_task_81776->free_last_res_72281;
    int64_t min_arg_72296 = futhark_mc_task_81776->free_min_arg_72296;
    int64_t min_arg_72297 = futhark_mc_task_81776->free_min_arg_72297;
    int64_t min_res_72298 = futhark_mc_task_81776->free_min_res_72298;
    float max_res_72302 = futhark_mc_task_81776->free_max_res_72302;
    struct memblock mem_75475 = {.desc ="mem_75475", .mem =
                                 futhark_mc_task_81776->free_mem_75475, .size =
                                 0, .references =NULL};
    struct memblock mem_75478 = {.desc ="mem_75478", .mem =
                                 futhark_mc_task_81776->free_mem_75478, .size =
                                 0, .references =NULL};
    struct memblock mem_75481 = {.desc ="mem_75481", .mem =
                                 futhark_mc_task_81776->free_mem_75481, .size =
                                 0, .references =NULL};
    struct memblock mem_75484 = {.desc ="mem_75484", .mem =
                                 futhark_mc_task_81776->free_mem_75484, .size =
                                 0, .references =NULL};
    struct memblock mem_75487 = {.desc ="mem_75487", .mem =
                                 futhark_mc_task_81776->free_mem_75487, .size =
                                 0, .references =NULL};
    struct memblock mem_75490 = {.desc ="mem_75490", .mem =
                                 futhark_mc_task_81776->free_mem_75490, .size =
                                 0, .references =NULL};
    int64_t iter_77859;
    struct futhark_mc_segmap_parloop_struct_81781
    futhark_mc_segmap_parloop_struct_81781;
    
    futhark_mc_segmap_parloop_struct_81781.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81781.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81781.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81781.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81781.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81781.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81781.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81781.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81781.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81781.free_last_res_72281 = last_res_72281;
    futhark_mc_segmap_parloop_struct_81781.free_min_arg_72296 = min_arg_72296;
    futhark_mc_segmap_parloop_struct_81781.free_min_arg_72297 = min_arg_72297;
    futhark_mc_segmap_parloop_struct_81781.free_min_res_72298 = min_res_72298;
    futhark_mc_segmap_parloop_struct_81781.free_max_res_72302 = max_res_72302;
    futhark_mc_segmap_parloop_struct_81781.free_mem_75475 = mem_75475.mem;
    futhark_mc_segmap_parloop_struct_81781.free_mem_75478 = mem_75478.mem;
    futhark_mc_segmap_parloop_struct_81781.free_mem_75481 = mem_75481.mem;
    futhark_mc_segmap_parloop_struct_81781.free_mem_75484 = mem_75484.mem;
    futhark_mc_segmap_parloop_struct_81781.free_mem_75487 = mem_75487.mem;
    futhark_mc_segmap_parloop_struct_81781.free_mem_75490 = mem_75490.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81782_task;
    
    futhark_mc_segmap_parloop_81782_task.name =
        "futhark_mc_segmap_parloop_81782";
    futhark_mc_segmap_parloop_81782_task.fn = futhark_mc_segmap_parloop_81782;
    futhark_mc_segmap_parloop_81782_task.args =
        &futhark_mc_segmap_parloop_struct_81781;
    futhark_mc_segmap_parloop_81782_task.iterations = iterations;
    futhark_mc_segmap_parloop_81782_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81782_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81782_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81782_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81782_task);
    
    if (futhark_mc_segmap_parloop_81782_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81782_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81782_total_end -
                 futhark_mc_segmap_parloop_81782_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81782_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81782_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81782_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81780_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81780_end -
                 futhark_mc_segmap_nested_task_81780_start;
        
        ctx->futhark_mc_segmap_nested_task_81780_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81780_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81780_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81749(void *args, int64_t start,
                                           int64_t end, int flat_tid_72091,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81748
    *futhark_mc_segmap_parloop_struct_81748 =
    (struct futhark_mc_segmap_parloop_struct_81748 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81748->ctx;
    uint64_t futhark_mc_segmap_parloop_81749_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81749_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_segmap_parloop_struct_81748->free_m_70279;
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81748->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81748->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81748->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81748->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81748->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81748->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81748->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81748->free_loop_cond_70305;
    float i64_res_70306 =
          futhark_mc_segmap_parloop_struct_81748->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81748->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75471 =
            futhark_mc_segmap_parloop_struct_81748->free_bytes_75471;
    int64_t bytes_75474 =
            futhark_mc_segmap_parloop_struct_81748->free_bytes_75474;
    int64_t bytes_75483 =
            futhark_mc_segmap_parloop_struct_81748->free_bytes_75483;
    int64_t bytes_75486 =
            futhark_mc_segmap_parloop_struct_81748->free_bytes_75486;
    struct memblock mem_75599 = {.desc ="mem_75599", .mem =
                                 futhark_mc_segmap_parloop_struct_81748->free_mem_75599,
                                 .size =0, .references =NULL};
    struct memblock mem_75603 = {.desc ="mem_75603", .mem =
                                 futhark_mc_segmap_parloop_struct_81748->free_mem_75603,
                                 .size =0, .references =NULL};
    size_t mem_75472_cached_sizze_81750 = 0;
    unsigned char *mem_75472 = NULL;
    size_t mem_75475_cached_sizze_81751 = 0;
    unsigned char *mem_75475 = NULL;
    size_t mem_75478_cached_sizze_81752 = 0;
    unsigned char *mem_75478 = NULL;
    size_t mem_75481_cached_sizze_81753 = 0;
    unsigned char *mem_75481 = NULL;
    size_t mem_75484_cached_sizze_81754 = 0;
    unsigned char *mem_75484 = NULL;
    size_t mem_75487_cached_sizze_81755 = 0;
    unsigned char *mem_75487 = NULL;
    size_t mem_75490_cached_sizze_81756 = 0;
    unsigned char *mem_75490 = NULL;
    int64_t iterations = end - start;
    int64_t iter_77363 = start;
    
    if (mem_75472_cached_sizze_81750 < (size_t) bytes_75471) {
        mem_75472 = realloc(mem_75472, bytes_75471);
        mem_75472_cached_sizze_81750 = bytes_75471;
    }
    if (mem_75475_cached_sizze_81751 < (size_t) bytes_75474) {
        mem_75475 = realloc(mem_75475, bytes_75474);
        mem_75475_cached_sizze_81751 = bytes_75474;
    }
    if (mem_75478_cached_sizze_81752 < (size_t) bytes_75471) {
        mem_75478 = realloc(mem_75478, bytes_75471);
        mem_75478_cached_sizze_81752 = bytes_75471;
    }
    if (mem_75481_cached_sizze_81753 < (size_t) bytes_75471) {
        mem_75481 = realloc(mem_75481, bytes_75471);
        mem_75481_cached_sizze_81753 = bytes_75471;
    }
    if (mem_75484_cached_sizze_81754 < (size_t) bytes_75483) {
        mem_75484 = realloc(mem_75484, bytes_75483);
        mem_75484_cached_sizze_81754 = bytes_75483;
    }
    if (mem_75487_cached_sizze_81755 < (size_t) bytes_75486) {
        mem_75487 = realloc(mem_75487, bytes_75486);
        mem_75487_cached_sizze_81755 = bytes_75486;
    }
    if (mem_75490_cached_sizze_81756 < (size_t) bytes_75486) {
        mem_75490 = realloc(mem_75490, bytes_75486);
        mem_75490_cached_sizze_81756 = bytes_75486;
    }
    for (; iter_77363 < end; iter_77363++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_77698 = m_70279;
        int64_t gtid_72092 = iter_77363;
        int64_t remnant_77699 = iter_77363 - gtid_72092;
        int64_t flat_tid_72093 = (int64_t) 0;
        int32_t num_tasks_77700;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_81757 futhark_mc_task_81757;
        
        futhark_mc_task_81757.ctx = ctx;
        futhark_mc_task_81757.free_n_70280 = n_70280;
        futhark_mc_task_81757.free_gtid_72092 = gtid_72092;
        futhark_mc_task_81757.free_Y_mem_75353 = Y_mem_75353.mem;
        futhark_mc_task_81757.free_mem_75472 = mem_75472;
        
        struct scheduler_segop futhark_mc_task_81757_task;
        
        futhark_mc_task_81757_task.args = &futhark_mc_task_81757;
        futhark_mc_task_81757_task.top_level_fn = futhark_mc_segscan_task_81758;
        futhark_mc_task_81757_task.name = "futhark_mc_segscan_task_81758";
        futhark_mc_task_81757_task.iterations = n_70280;
        futhark_mc_task_81757_task.task_time =
            &ctx->futhark_mc_segscan_task_81758_total_time;
        futhark_mc_task_81757_task.task_iter =
            &ctx->futhark_mc_segscan_task_81758_total_iter;
        futhark_mc_task_81757_task.sched = STATIC;
        futhark_mc_task_81757_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_81758_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81757_task);
        
        if (futhark_mc_segscan_task_81758_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_72281 = ((int64_t *) mem_75472)[i_70294];
        
        for (int64_t i_77714 = 0; i_77714 < n_70280; i_77714++) {
            ((float *) mem_75475)[i_77714] = 0.0F;
        }
        for (int64_t i_77715 = 0; i_77715 < n_70280; i_77715++) {
            ((int64_t *) mem_75478)[i_77715] = (int64_t) -1;
        }
        
        int64_t flat_tid_72095 = (int64_t) 0;
        int32_t num_tasks_77716;
        struct futhark_mc_task_81764 futhark_mc_task_81764;
        
        futhark_mc_task_81764.ctx = ctx;
        futhark_mc_task_81764.free_n_70280 = n_70280;
        futhark_mc_task_81764.free_gtid_72092 = gtid_72092;
        futhark_mc_task_81764.free_Y_mem_75353 = Y_mem_75353.mem;
        futhark_mc_task_81764.free_mem_75472 = mem_75472;
        futhark_mc_task_81764.free_mem_75475 = mem_75475;
        futhark_mc_task_81764.free_mem_75478 = mem_75478;
        
        struct scheduler_segop futhark_mc_task_81764_task;
        
        futhark_mc_task_81764_task.args = &futhark_mc_task_81764;
        futhark_mc_task_81764_task.top_level_fn = futhark_mc_segmap_task_81765;
        futhark_mc_task_81764_task.name = "futhark_mc_segmap_task_81765";
        futhark_mc_task_81764_task.iterations = n_70280;
        futhark_mc_task_81764_task.task_time =
            &ctx->futhark_mc_segmap_task_81765_total_time;
        futhark_mc_task_81764_task.task_iter =
            &ctx->futhark_mc_segmap_task_81765_total_iter;
        futhark_mc_task_81764_task.sched = STATIC;
        futhark_mc_task_81764_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81765_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81764_task);
        
        if (futhark_mc_segmap_task_81765_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_72097 = (int64_t) 0;
        int32_t num_tasks_77722;
        struct futhark_mc_task_81768 futhark_mc_task_81768;
        
        futhark_mc_task_81768.ctx = ctx;
        futhark_mc_task_81768.free_n_70280 = n_70280;
        futhark_mc_task_81768.free_mem_75478 = mem_75478;
        futhark_mc_task_81768.free_mem_75481 = mem_75481;
        
        struct scheduler_segop futhark_mc_task_81768_task;
        
        futhark_mc_task_81768_task.args = &futhark_mc_task_81768;
        futhark_mc_task_81768_task.top_level_fn = futhark_mc_segmap_task_81769;
        futhark_mc_task_81768_task.name = "futhark_mc_segmap_task_81769";
        futhark_mc_task_81768_task.iterations = n_70280;
        futhark_mc_task_81768_task.task_time =
            &ctx->futhark_mc_segmap_task_81769_total_time;
        futhark_mc_task_81768_task.task_iter =
            &ctx->futhark_mc_segmap_task_81769_total_iter;
        futhark_mc_task_81768_task.sched = STATIC;
        futhark_mc_task_81768_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81769_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81768_task);
        
        if (futhark_mc_segmap_task_81769_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_72296 = sub64(last_res_72281, (int64_t) 1);
        int64_t min_arg_72297 = sub64(last_res_72281, min_res_70300);
        int64_t min_res_72298 = smin64(q_70282, last_res_72281);
        float i64_res_72299 = sitofp_i64_f32(last_res_72281);
        float x_72300 = i64_res_70306 - i64_res_72299;
        float max_arg_72301 = x_72300 / 2.0F;
        float max_res_72302 = fmax32(0.0F, max_arg_72301);
        int64_t flat_tid_72099 = (int64_t) 0;
        int32_t num_tasks_77726;
        struct futhark_mc_task_81772 futhark_mc_task_81772;
        
        futhark_mc_task_81772.ctx = ctx;
        futhark_mc_task_81772.free_q_70282 = q_70282;
        futhark_mc_task_81772.free_last_res_72281 = last_res_72281;
        futhark_mc_task_81772.free_mem_75484 = mem_75484;
        
        struct scheduler_segop futhark_mc_task_81772_task;
        
        futhark_mc_task_81772_task.args = &futhark_mc_task_81772;
        futhark_mc_task_81772_task.top_level_fn = futhark_mc_segmap_task_81773;
        futhark_mc_task_81772_task.name = "futhark_mc_segmap_task_81773";
        futhark_mc_task_81772_task.iterations = q_70282;
        futhark_mc_task_81772_task.task_time =
            &ctx->futhark_mc_segmap_task_81773_total_time;
        futhark_mc_task_81772_task.task_iter =
            &ctx->futhark_mc_segmap_task_81773_total_iter;
        futhark_mc_task_81772_task.sched = STATIC;
        futhark_mc_task_81772_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81773_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81772_task);
        
        if (futhark_mc_segmap_task_81773_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_72101 = (int64_t) 0;
        int32_t num_tasks_77730;
        int64_t flat_tid_72103 = (int64_t) 0;
        struct futhark_mc_task_81776 futhark_mc_task_81776;
        
        futhark_mc_task_81776.ctx = ctx;
        futhark_mc_task_81776.free_n_70280 = n_70280;
        futhark_mc_task_81776.free_q_70282 = q_70282;
        futhark_mc_task_81776.free_jump_70284 = jump_70284;
        futhark_mc_task_81776.free_n_m_70288 = n_m_70288;
        futhark_mc_task_81776.free_i_70294 = i_70294;
        futhark_mc_task_81776.free_x_70295 = x_70295;
        futhark_mc_task_81776.free_min_res_70300 = min_res_70300;
        futhark_mc_task_81776.free_loop_cond_70305 = loop_cond_70305;
        futhark_mc_task_81776.free_last_res_72281 = last_res_72281;
        futhark_mc_task_81776.free_min_arg_72296 = min_arg_72296;
        futhark_mc_task_81776.free_min_arg_72297 = min_arg_72297;
        futhark_mc_task_81776.free_min_res_72298 = min_res_72298;
        futhark_mc_task_81776.free_max_res_72302 = max_res_72302;
        futhark_mc_task_81776.free_mem_75475 = mem_75475;
        futhark_mc_task_81776.free_mem_75478 = mem_75478;
        futhark_mc_task_81776.free_mem_75481 = mem_75481;
        futhark_mc_task_81776.free_mem_75484 = mem_75484;
        futhark_mc_task_81776.free_mem_75487 = mem_75487;
        futhark_mc_task_81776.free_mem_75490 = mem_75490;
        
        struct scheduler_segop futhark_mc_task_81776_task;
        
        futhark_mc_task_81776_task.args = &futhark_mc_task_81776;
        futhark_mc_task_81776_task.top_level_fn = futhark_mc_segmap_task_81777;
        futhark_mc_task_81776_task.name = "futhark_mc_segmap_task_81777";
        futhark_mc_task_81776_task.iterations = n_m_70288;
        futhark_mc_task_81776_task.task_time =
            &ctx->futhark_mc_segmap_task_81777_total_time;
        futhark_mc_task_81776_task.task_iter =
            &ctx->futhark_mc_segmap_task_81777_total_iter;
        futhark_mc_task_81776_task.sched = DYNAMIC;
        futhark_mc_task_81776_task.nested_fn =
            futhark_mc_segmap_nested_task_81780;
        
        int futhark_mc_segmap_task_81777_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81776_task);
        
        if (futhark_mc_segmap_task_81777_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_75599.mem + gtid_72092 * n_m_70288 * (int64_t) 4,
                    mem_75487 + (int64_t) 0, n_m_70288 * (int64_t) 4);
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_75603.mem + gtid_72092 * n_m_70288 * (int64_t) 4,
                    mem_75490 + (int64_t) 0, n_m_70288 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75472);
    free(mem_75475);
    free(mem_75478);
    free(mem_75481);
    free(mem_75484);
    free(mem_75487);
    free(mem_75490);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81749_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81749_end -
                 futhark_mc_segmap_parloop_81749_start;
        
        ctx->futhark_mc_segmap_parloop_81749_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81749_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81749_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81747(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72091 = tid;
    int num_tasks_77144 = info.nsubtasks;
    struct futhark_mc_task_81736 *futhark_mc_task_81736 =
                                 (struct futhark_mc_task_81736 *) args;
    struct futhark_context *ctx = futhark_mc_task_81736->ctx;
    uint64_t futhark_mc_segmap_nested_task_81747_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81747_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_task_81736->free_m_70279;
    int64_t n_70280 = futhark_mc_task_81736->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81736->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81736->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81736->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81736->free_i_70294;
    bool x_70295 = futhark_mc_task_81736->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81736->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81736->free_loop_cond_70305;
    float i64_res_70306 = futhark_mc_task_81736->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81736->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75471 = futhark_mc_task_81736->free_bytes_75471;
    int64_t bytes_75474 = futhark_mc_task_81736->free_bytes_75474;
    int64_t bytes_75483 = futhark_mc_task_81736->free_bytes_75483;
    int64_t bytes_75486 = futhark_mc_task_81736->free_bytes_75486;
    struct memblock mem_75599 = {.desc ="mem_75599", .mem =
                                 futhark_mc_task_81736->free_mem_75599, .size =
                                 0, .references =NULL};
    struct memblock mem_75603 = {.desc ="mem_75603", .mem =
                                 futhark_mc_task_81736->free_mem_75603, .size =
                                 0, .references =NULL};
    int64_t iter_77363;
    struct futhark_mc_segmap_parloop_struct_81748
    futhark_mc_segmap_parloop_struct_81748;
    
    futhark_mc_segmap_parloop_struct_81748.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81748.free_m_70279 = m_70279;
    futhark_mc_segmap_parloop_struct_81748.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81748.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81748.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81748.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81748.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81748.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81748.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81748.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81748.free_i64_res_70306 = i64_res_70306;
    futhark_mc_segmap_parloop_struct_81748.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81748.free_bytes_75471 = bytes_75471;
    futhark_mc_segmap_parloop_struct_81748.free_bytes_75474 = bytes_75474;
    futhark_mc_segmap_parloop_struct_81748.free_bytes_75483 = bytes_75483;
    futhark_mc_segmap_parloop_struct_81748.free_bytes_75486 = bytes_75486;
    futhark_mc_segmap_parloop_struct_81748.free_mem_75599 = mem_75599.mem;
    futhark_mc_segmap_parloop_struct_81748.free_mem_75603 = mem_75603.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81749_task;
    
    futhark_mc_segmap_parloop_81749_task.name =
        "futhark_mc_segmap_parloop_81749";
    futhark_mc_segmap_parloop_81749_task.fn = futhark_mc_segmap_parloop_81749;
    futhark_mc_segmap_parloop_81749_task.args =
        &futhark_mc_segmap_parloop_struct_81748;
    futhark_mc_segmap_parloop_81749_task.iterations = iterations;
    futhark_mc_segmap_parloop_81749_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81749_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81749_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81749_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81749_task);
    
    if (futhark_mc_segmap_parloop_81749_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81749_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81749_total_end -
                 futhark_mc_segmap_parloop_81749_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81749_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81749_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81749_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81747_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81747_end -
                 futhark_mc_segmap_nested_task_81747_start;
        
        ctx->futhark_mc_segmap_nested_task_81747_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81747_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81747_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81796 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75605;
    int64_t free_bytes_75608;
    int64_t free_bytes_75617;
    int64_t free_bytes_75620;
    unsigned char *free_mem_75733;
    unsigned char *free_mem_75737;
};
struct futhark_mc_segmap_parloop_struct_81798 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75605;
    int64_t free_bytes_75608;
    int64_t free_bytes_75617;
    int64_t free_bytes_75620;
    unsigned char *free_mem_75733;
    unsigned char *free_mem_75737;
};
static int futhark_mc_segmap_parloop_81799(void *args, int64_t start,
                                           int64_t end, int flat_tid_72635,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81798
    *futhark_mc_segmap_parloop_struct_81798 =
    (struct futhark_mc_segmap_parloop_struct_81798 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81798->ctx;
    uint64_t futhark_mc_segmap_parloop_81799_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81799_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_segmap_parloop_struct_81798->free_m_70279;
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81798->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81798->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81798->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81798->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81798->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81798->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81798->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81798->free_loop_cond_70305;
    float i64_res_70306 =
          futhark_mc_segmap_parloop_struct_81798->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81798->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75605 =
            futhark_mc_segmap_parloop_struct_81798->free_bytes_75605;
    int64_t bytes_75608 =
            futhark_mc_segmap_parloop_struct_81798->free_bytes_75608;
    int64_t bytes_75617 =
            futhark_mc_segmap_parloop_struct_81798->free_bytes_75617;
    int64_t bytes_75620 =
            futhark_mc_segmap_parloop_struct_81798->free_bytes_75620;
    struct memblock mem_75733 = {.desc ="mem_75733", .mem =
                                 futhark_mc_segmap_parloop_struct_81798->free_mem_75733,
                                 .size =0, .references =NULL};
    struct memblock mem_75737 = {.desc ="mem_75737", .mem =
                                 futhark_mc_segmap_parloop_struct_81798->free_mem_75737,
                                 .size =0, .references =NULL};
    size_t mem_75627_cached_sizze_81800 = 0;
    unsigned char *mem_75627 = NULL;
    size_t mem_75642_cached_sizze_81801 = 0;
    unsigned char *mem_75642 = NULL;
    size_t mem_75645_cached_sizze_81802 = 0;
    unsigned char *mem_75645 = NULL;
    size_t mem_75672_cached_sizze_81803 = 0;
    unsigned char *mem_75672 = NULL;
    size_t mem_75687_cached_sizze_81804 = 0;
    unsigned char *mem_75687 = NULL;
    size_t mem_75702_cached_sizze_81805 = 0;
    unsigned char *mem_75702 = NULL;
    size_t mem_75705_cached_sizze_81806 = 0;
    unsigned char *mem_75705 = NULL;
    int64_t iterations = end - start;
    int64_t iter_78022 = start;
    
    if (mem_75627_cached_sizze_81800 < (size_t) bytes_75605) {
        mem_75627 = realloc(mem_75627, bytes_75605);
        mem_75627_cached_sizze_81800 = bytes_75605;
    }
    if (mem_75642_cached_sizze_81801 < (size_t) bytes_75608) {
        mem_75642 = realloc(mem_75642, bytes_75608);
        mem_75642_cached_sizze_81801 = bytes_75608;
    }
    if (mem_75645_cached_sizze_81802 < (size_t) bytes_75605) {
        mem_75645 = realloc(mem_75645, bytes_75605);
        mem_75645_cached_sizze_81802 = bytes_75605;
    }
    if (mem_75672_cached_sizze_81803 < (size_t) bytes_75605) {
        mem_75672 = realloc(mem_75672, bytes_75605);
        mem_75672_cached_sizze_81803 = bytes_75605;
    }
    if (mem_75687_cached_sizze_81804 < (size_t) bytes_75617) {
        mem_75687 = realloc(mem_75687, bytes_75617);
        mem_75687_cached_sizze_81804 = bytes_75617;
    }
    if (mem_75702_cached_sizze_81805 < (size_t) bytes_75620) {
        mem_75702 = realloc(mem_75702, bytes_75620);
        mem_75702_cached_sizze_81805 = bytes_75620;
    }
    if (mem_75705_cached_sizze_81806 < (size_t) bytes_75620) {
        mem_75705 = realloc(mem_75705, bytes_75620);
        mem_75705_cached_sizze_81806 = bytes_75620;
    }
    for (; iter_78022 < end; iter_78022++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_78246 = m_70279;
        int64_t gtid_72636 = iter_78022;
        int64_t remnant_78247 = iter_78022 - gtid_72636;
        int64_t discard_75050;
        int64_t scanacc_78024 = (int64_t) 0;
        
        for (int64_t i_78023 = 0; i_78023 < n_70280; i_78023++) {
            float x_78026 = ((float *) Y_mem_75353.mem)[gtid_72636 * n_70280 +
                                                        i_78023];
            bool isnan_res_78027;
            
            isnan_res_78027 = futrts_isnan32(x_78026);
            
            bool defunc_0_p_res_78028 = !isnan_res_78027;
            int64_t defunc_0_f_res_78029 = btoi_bool_i64(defunc_0_p_res_78028);
            int64_t defunc_1_op_res_78030 = add64(defunc_0_f_res_78029,
                                                  scanacc_78024);
            
            ((int64_t *) mem_75627)[i_78023] = defunc_1_op_res_78030;
            
            int64_t scanacc_tmp_78248 = defunc_1_op_res_78030;
            
            scanacc_78024 = scanacc_tmp_78248;
        }
        discard_75050 = scanacc_78024;
        
        int64_t last_res_70713 = ((int64_t *) mem_75627)[i_70294];
        
        for (int64_t i_78250 = 0; i_78250 < n_70280; i_78250++) {
            ((float *) mem_75642)[i_78250] = 0.0F;
        }
        for (int64_t i_78251 = 0; i_78251 < n_70280; i_78251++) {
            ((int64_t *) mem_75645)[i_78251] = (int64_t) -1;
        }
        for (int64_t write_iter_78032 = 0; write_iter_78032 < n_70280;
             write_iter_78032++) {
            float write_iv_78035 = ((float *) Y_mem_75353.mem)[gtid_72636 *
                                                               n_70280 +
                                                               write_iter_78032];
            bool isnan_res_78036;
            
            isnan_res_78036 = futrts_isnan32(write_iv_78035);
            
            bool defunc_0_p_res_78037 = !isnan_res_78036;
            int64_t defunc_1_f_res_78038;
            
            if (defunc_0_p_res_78037) {
                int64_t write_iv_78039 =
                        ((int64_t *) mem_75627)[write_iter_78032];
                int64_t defunc_1_f_res_t_res_78040 = sub64(write_iv_78039,
                                                           (int64_t) 1);
                
                defunc_1_f_res_78038 = defunc_1_f_res_t_res_78040;
            } else {
                defunc_1_f_res_78038 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_78038) &&
                slt64(defunc_1_f_res_78038, n_70280)) {
                ((int64_t *) mem_75645)[defunc_1_f_res_78038] =
                    write_iter_78032;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_78038) &&
                slt64(defunc_1_f_res_78038, n_70280)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_75642 + defunc_1_f_res_78038 * (int64_t) 4,
                            Y_mem_75353.mem + (gtid_72636 * n_70280 +
                                               write_iter_78032) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        for (int64_t i_78044 = 0; i_78044 < n_70280; i_78044++) {
            int64_t x_78046 = ((int64_t *) mem_75645)[i_78044];
            int64_t defunc_0_f_res_78047 = add64((int64_t) 1, x_78046);
            
            ((int64_t *) mem_75672)[i_78044] = defunc_0_f_res_78047;
        }
        
        int64_t min_arg_70728 = sub64(last_res_70713, (int64_t) 1);
        int64_t min_arg_70729 = sub64(last_res_70713, min_res_70300);
        int64_t min_res_70730 = smin64(q_70282, last_res_70713);
        float i64_res_70731 = sitofp_i64_f32(last_res_70713);
        float x_70732 = i64_res_70306 - i64_res_70731;
        float max_arg_70733 = x_70732 / 2.0F;
        float max_res_70734 = fmax32(0.0F, max_arg_70733);
        
        for (int64_t i_78049 = 0; i_78049 < q_70282; i_78049++) {
            bool cond_78051 = sle64(last_res_70713, i_78049);
            float defunc_0_f_res_78052;
            
            if (cond_78051) {
                defunc_0_f_res_78052 = 0.0F;
            } else {
                defunc_0_f_res_78052 = 1.0F;
            }
            ((float *) mem_75687)[i_78049] = defunc_0_f_res_78052;
        }
        for (int64_t i_78054 = 0; i_78054 < n_m_70288; i_78054++) {
            int64_t min_arg_78057 = mul64(jump_70284, i_78054);
            int64_t min_res_78058 = smin64(i_70294, min_arg_78057);
            int64_t defunc_0_g_res_78059 = add64((int64_t) 1, min_res_78058);
            bool init_idx_78060;
            int64_t init_idx_78061;
            int64_t init_idx_78062;
            bool loop_while_78063;
            int64_t low_78064;
            int64_t high_78065;
            
            loop_while_78063 = x_70295;
            low_78064 = (int64_t) 0;
            high_78065 = i_70294;
            while (loop_while_78063) {
                int64_t x_78066 = add64(low_78064, high_78065);
                int64_t mid_78067 = sdiv64(x_78066, (int64_t) 2);
                bool x_78068 = sle64((int64_t) 0, mid_78067);
                bool y_78069 = slt64(mid_78067, n_70280);
                bool bounds_check_78070 = x_78068 && y_78069;
                bool index_certs_78071;
                
                if (!bounds_check_78070) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_78067,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t mid_id_78072 = ((int64_t *) mem_75672)[mid_78067];
                bool cond_78073 = slt64(mid_id_78072, (int64_t) 0);
                int64_t mid_idx_78074;
                
                if (cond_78073) {
                    mid_idx_78074 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_78074 = mid_id_78072;
                }
                
                bool cond_78075 = sle64(defunc_0_g_res_78059, mid_idx_78074);
                int64_t loopres_78076;
                int64_t loopres_78077;
                
                if (cond_78075) {
                    int64_t loopres_t_res_78078 = sub64(mid_78067, (int64_t) 1);
                    
                    loopres_78076 = low_78064;
                    loopres_78077 = loopres_t_res_78078;
                } else {
                    int64_t loopres_f_res_78079 = add64((int64_t) 1, mid_78067);
                    
                    loopres_78076 = loopres_f_res_78079;
                    loopres_78077 = high_78065;
                }
                
                bool loop_cond_78080 = sle64(loopres_78076, loopres_78077);
                bool loop_while_tmp_78258 = loop_cond_78080;
                int64_t low_tmp_78259 = loopres_78076;
                int64_t high_tmp_78260 = loopres_78077;
                
                loop_while_78063 = loop_while_tmp_78258;
                low_78064 = low_tmp_78259;
                high_78065 = high_tmp_78260;
            }
            init_idx_78060 = loop_while_78063;
            init_idx_78061 = low_78064;
            init_idx_78062 = high_78065;
            
            bool idx_78081;
            int64_t idx_78082;
            int64_t idx_78083;
            int64_t idx_78084;
            bool loop_while_78085;
            int64_t l_idx_78086;
            int64_t r_idx_78087;
            int64_t span_78088;
            
            loop_while_78085 = loop_cond_70305;
            l_idx_78086 = init_idx_78061;
            r_idx_78087 = init_idx_78061;
            span_78088 = (int64_t) 1;
            while (loop_while_78085) {
                int64_t max_arg_78089 = sub64(l_idx_78086, (int64_t) 1);
                int64_t max_res_78090 = smax64((int64_t) 0, max_arg_78089);
                int64_t min_arg_78091 = add64((int64_t) 1, r_idx_78087);
                int64_t min_res_78092 = smin64(min_arg_70728, min_arg_78091);
                bool x_78093 = sle64((int64_t) 0, max_res_78090);
                bool y_78094 = slt64(max_res_78090, n_70280);
                bool bounds_check_78095 = x_78093 && y_78094;
                bool index_certs_78096;
                
                if (!bounds_check_78095) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_78090,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t x_78097 = ((int64_t *) mem_75672)[max_res_78090];
                int64_t abs_arg_78098 = sub64(x_78097, defunc_0_g_res_78059);
                int64_t abs_res_78099 = abs64(abs_arg_78098);
                bool x_78100 = sle64((int64_t) 0, min_res_78092);
                bool y_78101 = slt64(min_res_78092, n_70280);
                bool bounds_check_78102 = x_78100 && y_78101;
                bool index_certs_78103;
                
                if (!bounds_check_78102) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_78092,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t x_78104 = ((int64_t *) mem_75672)[min_res_78092];
                int64_t abs_arg_78105 = sub64(x_78104, defunc_0_g_res_78059);
                int64_t abs_res_78106 = abs64(abs_arg_78105);
                bool cond_78107 = max_res_78090 == l_idx_78086;
                int64_t loopres_78108;
                int64_t loopres_78109;
                int64_t loopres_78110;
                
                if (cond_78107) {
                    loopres_78108 = l_idx_78086;
                    loopres_78109 = r_idx_78087;
                    loopres_78110 = min_res_70300;
                } else {
                    bool cond_78111 = slt64(abs_res_78099, abs_res_78106);
                    bool cond_f_res_78112 = min_res_78092 == r_idx_78087;
                    bool x_78113 = !cond_78111;
                    bool y_78114 = cond_f_res_78112 && x_78113;
                    bool cond_78115 = cond_78111 || y_78114;
                    int64_t loopres_f_res_78116;
                    
                    if (cond_78115) {
                        loopres_f_res_78116 = max_res_78090;
                    } else {
                        loopres_f_res_78116 = l_idx_78086;
                    }
                    
                    int64_t loopres_f_res_78117;
                    
                    if (cond_78115) {
                        loopres_f_res_78117 = r_idx_78087;
                    } else {
                        loopres_f_res_78117 = min_res_78092;
                    }
                    
                    int64_t loopres_f_res_78118;
                    
                    if (cond_78115) {
                        int64_t loopres_f_res_t_res_78119 = add64((int64_t) 1,
                                                                  span_78088);
                        
                        loopres_f_res_78118 = loopres_f_res_t_res_78119;
                    } else {
                        int64_t loopres_f_res_f_res_78120 = add64((int64_t) 1,
                                                                  span_78088);
                        
                        loopres_f_res_78118 = loopres_f_res_f_res_78120;
                    }
                    loopres_78108 = loopres_f_res_78116;
                    loopres_78109 = loopres_f_res_78117;
                    loopres_78110 = loopres_f_res_78118;
                }
                
                bool loop_cond_78121 = slt64(loopres_78110, min_res_70300);
                bool loop_while_tmp_78261 = loop_cond_78121;
                int64_t l_idx_tmp_78262 = loopres_78108;
                int64_t r_idx_tmp_78263 = loopres_78109;
                int64_t span_tmp_78264 = loopres_78110;
                
                loop_while_78085 = loop_while_tmp_78261;
                l_idx_78086 = l_idx_tmp_78262;
                r_idx_78087 = r_idx_tmp_78263;
                span_78088 = span_tmp_78264;
            }
            idx_78081 = loop_while_78085;
            idx_78082 = l_idx_78086;
            idx_78083 = r_idx_78087;
            idx_78084 = span_78088;
            
            int64_t min_res_78122 = smin64(min_arg_70729, idx_78082);
            int64_t max_res_78123 = smax64((int64_t) 0, min_res_78122);
            int64_t x_78124 = add64(min_res_70730, max_res_78123);
            int64_t r_78125 = sub64(x_78124, (int64_t) 1);
            bool x_78126 = sle64((int64_t) 0, r_78125);
            bool y_78127 = slt64(r_78125, n_70280);
            bool bounds_check_78128 = x_78126 && y_78127;
            bool index_certs_78129;
            
            if (!bounds_check_78128) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_78125,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_78130 = ((int64_t *) mem_75645)[r_78125];
            int64_t abs_arg_78131 = sub64(x_78130, min_res_78058);
            int64_t abs_res_78132 = abs64(abs_arg_78131);
            bool x_78133 = sle64((int64_t) 0, max_res_78123);
            bool y_78134 = slt64(max_res_78123, n_70280);
            bool bounds_check_78135 = x_78133 && y_78134;
            bool index_certs_78136;
            
            if (!bounds_check_78135) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_78123,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_78137 = ((int64_t *) mem_75645)[max_res_78123];
            int64_t abs_arg_78138 = sub64(x_78137, min_res_78058);
            int64_t abs_res_78139 = abs64(abs_arg_78138);
            int64_t max_res_78140 = smax64(abs_res_78132, abs_res_78139);
            float defunc_0_f_res_78141 = sitofp_i64_f32(max_res_78140);
            float defunc_1_f_res_78142 = max_res_70734 + defunc_0_f_res_78141;
            float defunc_2_reduce_res_78143;
            float defunc_2_reduce_res_78144;
            float defunc_2_reduce_res_78145;
            float defunc_2_reduce_res_78146;
            float defunc_2_reduce_res_78147;
            float redout_78149;
            float redout_78150;
            float redout_78151;
            float redout_78152;
            float redout_78153;
            
            redout_78149 = 0.0F;
            redout_78150 = 0.0F;
            redout_78151 = 0.0F;
            redout_78152 = 0.0F;
            redout_78153 = 0.0F;
            for (int64_t i_78148 = 0; i_78148 < q_70282; i_78148++) {
                float x_78154 = ((float *) mem_75687)[i_78148];
                bool cond_78155 = sle64(last_res_70713, i_78148);
                int64_t defunc_0_f_res_78156;
                
                if (cond_78155) {
                    defunc_0_f_res_78156 = (int64_t) 0;
                } else {
                    int64_t i_78157 = add64(max_res_78123, i_78148);
                    int64_t defunc_0_add_arg_78158 =
                            ((int64_t *) mem_75645)[i_78157];
                    int64_t defunc_1_add_res_78159 = add64((int64_t) 1,
                                                           defunc_0_add_arg_78158);
                    
                    defunc_0_f_res_78156 = defunc_1_add_res_78159;
                }
                
                int64_t binop_p_78160 = sub64(defunc_0_f_res_78156,
                                              min_res_78058);
                float defunc_0_f_res_78161 = sitofp_i64_f32(binop_p_78160);
                float abs_res_78162 = (float) fabs(defunc_0_f_res_78161);
                float tmp1_78163 = abs_res_78162 / defunc_1_f_res_78142;
                float x_78164 = tmp1_78163 * tmp1_78163;
                float y_78165 = tmp1_78163 * x_78164;
                float tmp2_78166 = 1.0F - y_78165;
                float x_78167 = tmp2_78166 * tmp2_78166;
                float tmp3_78168 = tmp2_78166 * x_78167;
                float w_j_78169 = x_78154 * tmp3_78168;
                float xw_j_78170 = defunc_0_f_res_78161 * w_j_78169;
                float x2w_j_78171 = defunc_0_f_res_78161 * xw_j_78170;
                float x3w_j_78172 = defunc_0_f_res_78161 * x2w_j_78171;
                float x4w_j_78173 = defunc_0_f_res_78161 * x3w_j_78172;
                float defunc_1_op_res_78174 = w_j_78169 + redout_78149;
                float defunc_1_op_res_78175 = xw_j_78170 + redout_78150;
                float defunc_1_op_res_78176 = x2w_j_78171 + redout_78151;
                float defunc_1_op_res_78177 = x3w_j_78172 + redout_78152;
                float defunc_1_op_res_78178 = x4w_j_78173 + redout_78153;
                float redout_tmp_78265 = defunc_1_op_res_78174;
                float redout_tmp_78266 = defunc_1_op_res_78175;
                float redout_tmp_78267 = defunc_1_op_res_78176;
                float redout_tmp_78268 = defunc_1_op_res_78177;
                float redout_tmp_78269 = defunc_1_op_res_78178;
                
                redout_78149 = redout_tmp_78265;
                redout_78150 = redout_tmp_78266;
                redout_78151 = redout_tmp_78267;
                redout_78152 = redout_tmp_78268;
                redout_78153 = redout_tmp_78269;
            }
            defunc_2_reduce_res_78143 = redout_78149;
            defunc_2_reduce_res_78144 = redout_78150;
            defunc_2_reduce_res_78145 = redout_78151;
            defunc_2_reduce_res_78146 = redout_78152;
            defunc_2_reduce_res_78147 = redout_78153;
            
            float x_78179 = defunc_2_reduce_res_78145 *
                  defunc_2_reduce_res_78147;
            float y_78180 = defunc_2_reduce_res_78146 *
                  defunc_2_reduce_res_78146;
            float a12_78181 = x_78179 - y_78180;
            float x_78182 = defunc_2_reduce_res_78145 *
                  defunc_2_reduce_res_78146;
            float y_78183 = defunc_2_reduce_res_78144 *
                  defunc_2_reduce_res_78147;
            float b12_78184 = x_78182 - y_78183;
            float x_78185 = defunc_2_reduce_res_78144 *
                  defunc_2_reduce_res_78146;
            float y_78186 = defunc_2_reduce_res_78145 *
                  defunc_2_reduce_res_78145;
            float c12_78187 = x_78185 - y_78186;
            float x_78188 = defunc_2_reduce_res_78143 *
                  defunc_2_reduce_res_78147;
            float b2_78189 = x_78188 - y_78186;
            float x_78190 = defunc_2_reduce_res_78144 *
                  defunc_2_reduce_res_78145;
            float y_78191 = defunc_2_reduce_res_78143 *
                  defunc_2_reduce_res_78146;
            float c2_78192 = x_78190 - y_78191;
            float x_78193 = defunc_2_reduce_res_78143 * a12_78181;
            float y_78194 = defunc_2_reduce_res_78144 * b12_78184;
            float x_78195 = x_78193 + y_78194;
            float y_78196 = defunc_2_reduce_res_78145 * c12_78187;
            float y_78197 = x_78195 + y_78196;
            float det_78198 = 1.0F / y_78197;
            float a12_78199 = a12_78181 * det_78198;
            float b12_78200 = b12_78184 * det_78198;
            float c12_78201 = c12_78187 * det_78198;
            float b2_78202 = b2_78189 * det_78198;
            float c2_78203 = c2_78192 * det_78198;
            float defunc_2_reduce_res_78204;
            float defunc_2_reduce_res_78205;
            float redout_78207;
            float redout_78208;
            
            redout_78207 = 0.0F;
            redout_78208 = 0.0F;
            for (int64_t i_78206 = 0; i_78206 < q_70282; i_78206++) {
                float x_78209 = ((float *) mem_75687)[i_78206];
                bool cond_78210 = sle64(last_res_70713, i_78206);
                int64_t defunc_0_f_res_78211;
                
                if (cond_78210) {
                    defunc_0_f_res_78211 = (int64_t) 0;
                } else {
                    int64_t i_78212 = add64(max_res_78123, i_78206);
                    int64_t defunc_0_add_arg_78213 =
                            ((int64_t *) mem_75645)[i_78212];
                    int64_t defunc_1_add_res_78214 = add64((int64_t) 1,
                                                           defunc_0_add_arg_78213);
                    
                    defunc_0_f_res_78211 = defunc_1_add_res_78214;
                }
                
                int64_t binop_p_78215 = sub64(defunc_0_f_res_78211,
                                              min_res_78058);
                float defunc_0_f_res_78216 = sitofp_i64_f32(binop_p_78215);
                float abs_res_78217 = (float) fabs(defunc_0_f_res_78216);
                float tmp1_78218 = abs_res_78217 / defunc_1_f_res_78142;
                float x_78219 = tmp1_78218 * tmp1_78218;
                float y_78220 = tmp1_78218 * x_78219;
                float tmp2_78221 = 1.0F - y_78220;
                float x_78222 = tmp2_78221 * tmp2_78221;
                float tmp3_78223 = tmp2_78221 * x_78222;
                float tmp4_78224 = x_78209 * tmp3_78223;
                float defunc_1_f_res_78225 = defunc_0_f_res_78216 * tmp4_78224;
                float defunc_1_f_res_78226 = defunc_0_f_res_78216 *
                      defunc_1_f_res_78225;
                float defunc_0_f_res_78227;
                
                if (cond_78210) {
                    defunc_0_f_res_78227 = 0.0F;
                } else {
                    int64_t i_78228 = add64(max_res_78123, i_78206);
                    float defunc_0_add_arg_78229 =
                          ((float *) mem_75642)[i_78228];
                    
                    defunc_0_f_res_78227 = defunc_0_add_arg_78229;
                }
                
                float x_78230 = a12_78199 * tmp4_78224;
                float y_78231 = b12_78200 * defunc_1_f_res_78225;
                float x_78232 = x_78230 + y_78231;
                float y_78233 = c12_78201 * defunc_1_f_res_78226;
                float x_78234 = x_78232 + y_78233;
                float defunc_9_fit_fun_res_78235 = defunc_0_f_res_78227 *
                      x_78234;
                float x_78236 = b12_78200 * tmp4_78224;
                float y_78237 = b2_78202 * defunc_1_f_res_78225;
                float x_78238 = x_78236 + y_78237;
                float y_78239 = c2_78203 * defunc_1_f_res_78226;
                float x_78240 = x_78238 + y_78239;
                float defunc_9_slope_fun_res_78241 = defunc_0_f_res_78227 *
                      x_78240;
                float defunc_1_op_res_78242 = defunc_9_fit_fun_res_78235 +
                      redout_78207;
                float defunc_1_op_res_78243 = defunc_9_slope_fun_res_78241 +
                      redout_78208;
                float redout_tmp_78270 = defunc_1_op_res_78242;
                float redout_tmp_78271 = defunc_1_op_res_78243;
                
                redout_78207 = redout_tmp_78270;
                redout_78208 = redout_tmp_78271;
            }
            defunc_2_reduce_res_78204 = redout_78207;
            defunc_2_reduce_res_78205 = redout_78208;
            ((float *) mem_75702)[i_78054] = defunc_2_reduce_res_78204;
            ((float *) mem_75705)[i_78054] = defunc_2_reduce_res_78205;
        }
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_75733.mem + gtid_72636 * n_m_70288 * (int64_t) 4,
                    mem_75702 + (int64_t) 0, n_m_70288 * (int64_t) 4);
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_75737.mem + gtid_72636 * n_m_70288 * (int64_t) 4,
                    mem_75705 + (int64_t) 0, n_m_70288 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75627);
    free(mem_75642);
    free(mem_75645);
    free(mem_75672);
    free(mem_75687);
    free(mem_75702);
    free(mem_75705);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81799_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81799_end -
                 futhark_mc_segmap_parloop_81799_start;
        
        ctx->futhark_mc_segmap_parloop_81799_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81799_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81799_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81797(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72635 = tid;
    int num_tasks_78021 = info.nsubtasks;
    struct futhark_mc_task_81796 *futhark_mc_task_81796 =
                                 (struct futhark_mc_task_81796 *) args;
    struct futhark_context *ctx = futhark_mc_task_81796->ctx;
    uint64_t futhark_mc_segmap_task_81797_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81797_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_task_81796->free_m_70279;
    int64_t n_70280 = futhark_mc_task_81796->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81796->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81796->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81796->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81796->free_i_70294;
    bool x_70295 = futhark_mc_task_81796->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81796->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81796->free_loop_cond_70305;
    float i64_res_70306 = futhark_mc_task_81796->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81796->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75605 = futhark_mc_task_81796->free_bytes_75605;
    int64_t bytes_75608 = futhark_mc_task_81796->free_bytes_75608;
    int64_t bytes_75617 = futhark_mc_task_81796->free_bytes_75617;
    int64_t bytes_75620 = futhark_mc_task_81796->free_bytes_75620;
    struct memblock mem_75733 = {.desc ="mem_75733", .mem =
                                 futhark_mc_task_81796->free_mem_75733, .size =
                                 0, .references =NULL};
    struct memblock mem_75737 = {.desc ="mem_75737", .mem =
                                 futhark_mc_task_81796->free_mem_75737, .size =
                                 0, .references =NULL};
    int64_t iter_78022;
    struct futhark_mc_segmap_parloop_struct_81798
    futhark_mc_segmap_parloop_struct_81798;
    
    futhark_mc_segmap_parloop_struct_81798.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81798.free_m_70279 = m_70279;
    futhark_mc_segmap_parloop_struct_81798.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81798.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81798.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81798.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81798.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81798.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81798.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81798.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81798.free_i64_res_70306 = i64_res_70306;
    futhark_mc_segmap_parloop_struct_81798.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81798.free_bytes_75605 = bytes_75605;
    futhark_mc_segmap_parloop_struct_81798.free_bytes_75608 = bytes_75608;
    futhark_mc_segmap_parloop_struct_81798.free_bytes_75617 = bytes_75617;
    futhark_mc_segmap_parloop_struct_81798.free_bytes_75620 = bytes_75620;
    futhark_mc_segmap_parloop_struct_81798.free_mem_75733 = mem_75733.mem;
    futhark_mc_segmap_parloop_struct_81798.free_mem_75737 = mem_75737.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81799_task;
    
    futhark_mc_segmap_parloop_81799_task.name =
        "futhark_mc_segmap_parloop_81799";
    futhark_mc_segmap_parloop_81799_task.fn = futhark_mc_segmap_parloop_81799;
    futhark_mc_segmap_parloop_81799_task.args =
        &futhark_mc_segmap_parloop_struct_81798;
    futhark_mc_segmap_parloop_81799_task.iterations = iterations;
    futhark_mc_segmap_parloop_81799_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81799_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81799_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81799_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81799_task);
    
    if (futhark_mc_segmap_parloop_81799_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81799_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81799_total_end -
                 futhark_mc_segmap_parloop_81799_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81799_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81799_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81799_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81797_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81797_end -
                 futhark_mc_segmap_task_81797_start;
        
        ctx->futhark_mc_segmap_task_81797_runs[tid]++;
        ctx->futhark_mc_segmap_task_81797_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81797_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81808 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75605;
    int64_t free_bytes_75608;
    int64_t free_bytes_75617;
    int64_t free_bytes_75620;
    unsigned char *free_mem_75733;
    unsigned char *free_mem_75737;
};
struct futhark_mc_task_81817 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_72638;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75606;
};
struct futhark_mc_scan_stage_1_parloop_struct_81820 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_72638;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75606;
};
static int futhark_mc_scan_stage_1_parloop_81821(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_72639, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_81820
    *futhark_mc_scan_stage_1_parloop_struct_81820 =
    (struct futhark_mc_scan_stage_1_parloop_struct_81820 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_81820->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_81821_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81821_start = get_wall_time();
    
    int64_t n_70280 =
            futhark_mc_scan_stage_1_parloop_struct_81820->free_n_70280;
    int64_t gtid_72638 =
            futhark_mc_scan_stage_1_parloop_struct_81820->free_gtid_72638;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_81820->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75606 = {.desc ="mem_75606", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_81820->free_mem_75606,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78672 = start;
    int64_t x_78273;
    int64_t x_78274;
    
    x_78273 = (int64_t) 0;
    for (; iter_78672 < end; iter_78672++) {
        int64_t gtid_72640 = iter_78672;
        
        // stage 1 scan body
        {
            float x_78276 = ((float *) Y_mem_75353.mem)[gtid_72638 * n_70280 +
                                                        gtid_72640];
            bool isnan_res_78277;
            
            isnan_res_78277 = futrts_isnan32(x_78276);
            
            bool defunc_0_p_res_78278 = !isnan_res_78277;
            int64_t defunc_0_f_res_78279 = btoi_bool_i64(defunc_0_p_res_78278);
            
            // write mapped values results to memory
            { }
            x_78273 = x_78273;
            // Read next values
            {
                x_78274 = defunc_0_f_res_78279;
            }
            
            int64_t defunc_1_op_res_78275 = add64(x_78273, x_78274);
            
            ((int64_t *) mem_75606.mem)[gtid_72640] = defunc_1_op_res_78275;
            x_78273 = defunc_1_op_res_78275;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81821_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81821_end -
                 futhark_mc_scan_stage_1_parloop_81821_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_81821_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_81821_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_81821_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_81822 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_72638;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75606;
};
static int futhark_mc_scan_stage_3_parloop_81823(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_72639, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_81822
    *futhark_mc_scan_stage_3_parloop_struct_81822 =
    (struct futhark_mc_scan_stage_3_parloop_struct_81822 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_81822->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_81823_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_81823_start = get_wall_time();
    
    int64_t n_70280 =
            futhark_mc_scan_stage_3_parloop_struct_81822->free_n_70280;
    int64_t gtid_72638 =
            futhark_mc_scan_stage_3_parloop_struct_81822->free_gtid_72638;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_81822->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75606 = {.desc ="mem_75606", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_81822->free_mem_75606,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78684 = start;
    int64_t x_78681;
    int64_t x_78682;
    
    if (iter_78684 == (int64_t) 0) {
        x_78681 = (int64_t) 0;
    } else {
        x_78681 = ((int64_t *) mem_75606.mem)[iter_78684 - (int64_t) 1];
    }
    for (; iter_78684 < end; iter_78684++) {
        int64_t gtid_72640 = iter_78684;
        
        // stage 3 scan body
        {
            float x_78276 = ((float *) Y_mem_75353.mem)[gtid_72638 * n_70280 +
                                                        gtid_72640];
            bool isnan_res_78277;
            
            isnan_res_78277 = futrts_isnan32(x_78276);
            
            bool defunc_0_p_res_78278 = !isnan_res_78277;
            int64_t defunc_0_f_res_78279 = btoi_bool_i64(defunc_0_p_res_78278);
            
            x_78681 = x_78681;
            x_78682 = defunc_0_f_res_78279;
            
            int64_t defunc_1_op_res_78683 = add64(x_78681, x_78682);
            
            ((int64_t *) mem_75606.mem)[gtid_72640] = defunc_1_op_res_78683;
            x_78681 = defunc_1_op_res_78683;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_81823_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81823_end -
                 futhark_mc_scan_stage_3_parloop_81823_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_81823_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_81823_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_81823_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_81818(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72639 = tid;
    int num_tasks_78671 = info.nsubtasks;
    struct futhark_mc_task_81817 *futhark_mc_task_81817 =
                                 (struct futhark_mc_task_81817 *) args;
    struct futhark_context *ctx = futhark_mc_task_81817->ctx;
    uint64_t futhark_mc_segscan_task_81818_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_81818_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81817->free_n_70280;
    int64_t gtid_72638 = futhark_mc_task_81817->free_gtid_72638;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81817->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75606 = {.desc ="mem_75606", .mem =
                                 futhark_mc_task_81817->free_mem_75606, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_78678_cached_sizze_81819 = 0;
    unsigned char *scan_stage_2_accum_mem_78678 = NULL;
    int64_t iter_78672;
    struct futhark_mc_scan_stage_1_parloop_struct_81820
    futhark_mc_scan_stage_1_parloop_struct_81820;
    
    futhark_mc_scan_stage_1_parloop_struct_81820.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_81820.free_n_70280 = n_70280;
    futhark_mc_scan_stage_1_parloop_struct_81820.free_gtid_72638 = gtid_72638;
    futhark_mc_scan_stage_1_parloop_struct_81820.free_Y_mem_75353 =
        Y_mem_75353.mem;
    futhark_mc_scan_stage_1_parloop_struct_81820.free_mem_75606 = mem_75606.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_81821_task;
    
    futhark_mc_scan_stage_1_parloop_81821_task.name =
        "futhark_mc_scan_stage_1_parloop_81821";
    futhark_mc_scan_stage_1_parloop_81821_task.fn =
        futhark_mc_scan_stage_1_parloop_81821;
    futhark_mc_scan_stage_1_parloop_81821_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_81820;
    futhark_mc_scan_stage_1_parloop_81821_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_81821_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_81821_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81821_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_81821_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_81821_task);
    
    if (futhark_mc_scan_stage_1_parloop_81821_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81821_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81821_total_end -
                 futhark_mc_scan_stage_1_parloop_81821_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81821_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81821_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81821_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_78671)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_78673;
        int64_t x_78674;
        int64_t offset_78676 = (int64_t) 0;
        int64_t offset_index_78677 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_78678_cached_sizze_81819 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_78678 = realloc(scan_stage_2_accum_mem_78678,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_78678_cached_sizze_81819 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_78678)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_78680 = 0; i_78680 < num_tasks_78671 - 1; i_78680++) {
            offset_78676 = squot64(n_70280, sext_i32_i64(num_tasks_78671));
            if (slt64(sext_i32_i64(i_78680), srem64(n_70280,
                                                    sext_i32_i64(num_tasks_78671)))) {
                offset_78676 += (int64_t) 1;
            }
            offset_index_78677 += offset_78676;
            
            int64_t gtid_72640 = offset_index_78677;
            float x_78276 = ((float *) Y_mem_75353.mem)[gtid_72638 * n_70280 +
                                                        gtid_72640];
            bool isnan_res_78277;
            
            isnan_res_78277 = futrts_isnan32(x_78276);
            
            bool defunc_0_p_res_78278 = !isnan_res_78277;
            int64_t defunc_0_f_res_78279 = btoi_bool_i64(defunc_0_p_res_78278);
            
            // Read carry in
            {
                x_78673 =
                    ((int64_t *) scan_stage_2_accum_mem_78678)[(int64_t) 0];
            }
            // Read next values
            {
                x_78674 = ((int64_t *) mem_75606.mem)[offset_index_78677 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_78675 = add64(x_78673, x_78674);
            
            ((int64_t *) mem_75606.mem)[offset_index_78677 - (int64_t) 1] =
                defunc_1_op_res_78675;
            ((int64_t *) scan_stage_2_accum_mem_78678)[(int64_t) 0] =
                defunc_1_op_res_78675;
        }
        
        int64_t iter_78684 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_81822
        futhark_mc_scan_stage_3_parloop_struct_81822;
        
        futhark_mc_scan_stage_3_parloop_struct_81822.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_81822.free_n_70280 = n_70280;
        futhark_mc_scan_stage_3_parloop_struct_81822.free_gtid_72638 =
            gtid_72638;
        futhark_mc_scan_stage_3_parloop_struct_81822.free_Y_mem_75353 =
            Y_mem_75353.mem;
        futhark_mc_scan_stage_3_parloop_struct_81822.free_mem_75606 =
            mem_75606.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_81823_task;
        
        futhark_mc_scan_stage_3_parloop_81823_task.name =
            "futhark_mc_scan_stage_3_parloop_81823";
        futhark_mc_scan_stage_3_parloop_81823_task.fn =
            futhark_mc_scan_stage_3_parloop_81823;
        futhark_mc_scan_stage_3_parloop_81823_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_81822;
        futhark_mc_scan_stage_3_parloop_81823_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_81823_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_81823_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_81823_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_81823_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_81823_task);
        
        if (futhark_mc_scan_stage_3_parloop_81823_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_81823_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81823_total_end -
                     futhark_mc_scan_stage_3_parloop_81823_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81823_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81823_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81823_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_78678);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_81818_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_81818_end -
                 futhark_mc_segscan_task_81818_start;
        
        ctx->futhark_mc_segscan_task_81818_runs[tid]++;
        ctx->futhark_mc_segscan_task_81818_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_81818_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81824 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_72638;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75606;
    unsigned char *free_mem_75609;
    unsigned char *free_mem_75612;
};
struct futhark_mc_segmap_parloop_struct_81826 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_72638;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75606;
    unsigned char *free_mem_75609;
    unsigned char *free_mem_75612;
};
static int futhark_mc_segmap_parloop_81827(void *args, int64_t start,
                                           int64_t end, int flat_tid_72641,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81826
    *futhark_mc_segmap_parloop_struct_81826 =
    (struct futhark_mc_segmap_parloop_struct_81826 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81826->ctx;
    uint64_t futhark_mc_segmap_parloop_81827_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81827_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81826->free_n_70280;
    int64_t gtid_72638 =
            futhark_mc_segmap_parloop_struct_81826->free_gtid_72638;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81826->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75606 = {.desc ="mem_75606", .mem =
                                 futhark_mc_segmap_parloop_struct_81826->free_mem_75606,
                                 .size =0, .references =NULL};
    struct memblock mem_75609 = {.desc ="mem_75609", .mem =
                                 futhark_mc_segmap_parloop_struct_81826->free_mem_75609,
                                 .size =0, .references =NULL};
    struct memblock mem_75612 = {.desc ="mem_75612", .mem =
                                 futhark_mc_segmap_parloop_struct_81826->free_mem_75612,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78688 = start;
    
    for (; iter_78688 < end; iter_78688++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_78691 = n_70280;
        int64_t gtid_72642 = iter_78688;
        int64_t remnant_78692 = iter_78688 - gtid_72642;
        float x_78280 = ((float *) Y_mem_75353.mem)[gtid_72638 * n_70280 +
                                                    gtid_72642];
        bool isnan_res_78281;
        
        isnan_res_78281 = futrts_isnan32(x_78280);
        
        bool defunc_0_p_res_78282 = !isnan_res_78281;
        int64_t defunc_1_f_res_78283;
        
        if (defunc_0_p_res_78282) {
            int64_t x_78689 = ((int64_t *) mem_75606.mem)[gtid_72642];
            int64_t defunc_1_f_res_t_res_78690 = sub64(x_78689, (int64_t) 1);
            
            defunc_1_f_res_78283 = defunc_1_f_res_t_res_78690;
        } else {
            defunc_1_f_res_78283 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_78283) &&
            slt64(defunc_1_f_res_78283, n_70280)) {
            ((int64_t *) mem_75612.mem)[defunc_1_f_res_78283] = gtid_72642;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_78283) &&
            slt64(defunc_1_f_res_78283, n_70280)) {
            ((float *) mem_75609.mem)[defunc_1_f_res_78283] = x_78280;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81827_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81827_end -
                 futhark_mc_segmap_parloop_81827_start;
        
        ctx->futhark_mc_segmap_parloop_81827_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81827_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81827_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81825(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72641 = tid;
    int num_tasks_78687 = info.nsubtasks;
    struct futhark_mc_task_81824 *futhark_mc_task_81824 =
                                 (struct futhark_mc_task_81824 *) args;
    struct futhark_context *ctx = futhark_mc_task_81824->ctx;
    uint64_t futhark_mc_segmap_task_81825_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81825_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81824->free_n_70280;
    int64_t gtid_72638 = futhark_mc_task_81824->free_gtid_72638;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81824->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75606 = {.desc ="mem_75606", .mem =
                                 futhark_mc_task_81824->free_mem_75606, .size =
                                 0, .references =NULL};
    struct memblock mem_75609 = {.desc ="mem_75609", .mem =
                                 futhark_mc_task_81824->free_mem_75609, .size =
                                 0, .references =NULL};
    struct memblock mem_75612 = {.desc ="mem_75612", .mem =
                                 futhark_mc_task_81824->free_mem_75612, .size =
                                 0, .references =NULL};
    int64_t iter_78688;
    struct futhark_mc_segmap_parloop_struct_81826
    futhark_mc_segmap_parloop_struct_81826;
    
    futhark_mc_segmap_parloop_struct_81826.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81826.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81826.free_gtid_72638 = gtid_72638;
    futhark_mc_segmap_parloop_struct_81826.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81826.free_mem_75606 = mem_75606.mem;
    futhark_mc_segmap_parloop_struct_81826.free_mem_75609 = mem_75609.mem;
    futhark_mc_segmap_parloop_struct_81826.free_mem_75612 = mem_75612.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81827_task;
    
    futhark_mc_segmap_parloop_81827_task.name =
        "futhark_mc_segmap_parloop_81827";
    futhark_mc_segmap_parloop_81827_task.fn = futhark_mc_segmap_parloop_81827;
    futhark_mc_segmap_parloop_81827_task.args =
        &futhark_mc_segmap_parloop_struct_81826;
    futhark_mc_segmap_parloop_81827_task.iterations = iterations;
    futhark_mc_segmap_parloop_81827_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81827_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81827_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81827_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81827_task);
    
    if (futhark_mc_segmap_parloop_81827_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81827_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81827_total_end -
                 futhark_mc_segmap_parloop_81827_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81827_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81827_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81827_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81825_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81825_end -
                 futhark_mc_segmap_task_81825_start;
        
        ctx->futhark_mc_segmap_task_81825_runs[tid]++;
        ctx->futhark_mc_segmap_task_81825_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81825_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81828 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    unsigned char *free_mem_75612;
    unsigned char *free_mem_75615;
};
struct futhark_mc_segmap_parloop_struct_81830 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    unsigned char *free_mem_75612;
    unsigned char *free_mem_75615;
};
static int futhark_mc_segmap_parloop_81831(void *args, int64_t start,
                                           int64_t end, int flat_tid_72643,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81830
    *futhark_mc_segmap_parloop_struct_81830 =
    (struct futhark_mc_segmap_parloop_struct_81830 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81830->ctx;
    uint64_t futhark_mc_segmap_parloop_81831_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81831_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81830->free_n_70280;
    struct memblock mem_75612 = {.desc ="mem_75612", .mem =
                                 futhark_mc_segmap_parloop_struct_81830->free_mem_75612,
                                 .size =0, .references =NULL};
    struct memblock mem_75615 = {.desc ="mem_75615", .mem =
                                 futhark_mc_segmap_parloop_struct_81830->free_mem_75615,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78694 = start;
    
    for (; iter_78694 < end; iter_78694++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_78695 = n_70280;
        int64_t gtid_72644 = iter_78694;
        int64_t remnant_78696 = iter_78694 - gtid_72644;
        int64_t x_78286 = ((int64_t *) mem_75612.mem)[gtid_72644];
        int64_t defunc_0_f_res_78287 = add64((int64_t) 1, x_78286);
        
        ((int64_t *) mem_75615.mem)[gtid_72644] = defunc_0_f_res_78287;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81831_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81831_end -
                 futhark_mc_segmap_parloop_81831_start;
        
        ctx->futhark_mc_segmap_parloop_81831_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81831_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81831_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81829(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72643 = tid;
    int num_tasks_78693 = info.nsubtasks;
    struct futhark_mc_task_81828 *futhark_mc_task_81828 =
                                 (struct futhark_mc_task_81828 *) args;
    struct futhark_context *ctx = futhark_mc_task_81828->ctx;
    uint64_t futhark_mc_segmap_task_81829_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81829_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81828->free_n_70280;
    struct memblock mem_75612 = {.desc ="mem_75612", .mem =
                                 futhark_mc_task_81828->free_mem_75612, .size =
                                 0, .references =NULL};
    struct memblock mem_75615 = {.desc ="mem_75615", .mem =
                                 futhark_mc_task_81828->free_mem_75615, .size =
                                 0, .references =NULL};
    int64_t iter_78694;
    struct futhark_mc_segmap_parloop_struct_81830
    futhark_mc_segmap_parloop_struct_81830;
    
    futhark_mc_segmap_parloop_struct_81830.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81830.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81830.free_mem_75612 = mem_75612.mem;
    futhark_mc_segmap_parloop_struct_81830.free_mem_75615 = mem_75615.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81831_task;
    
    futhark_mc_segmap_parloop_81831_task.name =
        "futhark_mc_segmap_parloop_81831";
    futhark_mc_segmap_parloop_81831_task.fn = futhark_mc_segmap_parloop_81831;
    futhark_mc_segmap_parloop_81831_task.args =
        &futhark_mc_segmap_parloop_struct_81830;
    futhark_mc_segmap_parloop_81831_task.iterations = iterations;
    futhark_mc_segmap_parloop_81831_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81831_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81831_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81831_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81831_task);
    
    if (futhark_mc_segmap_parloop_81831_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81831_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81831_total_end -
                 futhark_mc_segmap_parloop_81831_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81831_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81831_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81831_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81829_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81829_end -
                 futhark_mc_segmap_task_81829_start;
        
        ctx->futhark_mc_segmap_task_81829_runs[tid]++;
        ctx->futhark_mc_segmap_task_81829_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81829_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81832 {
    struct futhark_context *ctx;
    int64_t free_q_70282;
    int64_t free_last_res_72859;
    unsigned char *free_mem_75618;
};
struct futhark_mc_segmap_parloop_struct_81834 {
    struct futhark_context *ctx;
    int64_t free_q_70282;
    int64_t free_last_res_72859;
    unsigned char *free_mem_75618;
};
static int futhark_mc_segmap_parloop_81835(void *args, int64_t start,
                                           int64_t end, int flat_tid_72645,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81834
    *futhark_mc_segmap_parloop_struct_81834 =
    (struct futhark_mc_segmap_parloop_struct_81834 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81834->ctx;
    uint64_t futhark_mc_segmap_parloop_81835_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81835_start = get_wall_time();
    
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81834->free_q_70282;
    int64_t last_res_72859 =
            futhark_mc_segmap_parloop_struct_81834->free_last_res_72859;
    struct memblock mem_75618 = {.desc ="mem_75618", .mem =
                                 futhark_mc_segmap_parloop_struct_81834->free_mem_75618,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78698 = start;
    
    for (; iter_78698 < end; iter_78698++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_78699 = q_70282;
        int64_t gtid_72646 = iter_78698;
        int64_t remnant_78700 = iter_78698 - gtid_72646;
        bool cond_78288 = sle64(last_res_72859, gtid_72646);
        float defunc_0_f_res_78289;
        
        if (cond_78288) {
            defunc_0_f_res_78289 = 0.0F;
        } else {
            defunc_0_f_res_78289 = 1.0F;
        }
        ((float *) mem_75618.mem)[gtid_72646] = defunc_0_f_res_78289;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81835_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81835_end -
                 futhark_mc_segmap_parloop_81835_start;
        
        ctx->futhark_mc_segmap_parloop_81835_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81835_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81835_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81833(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72645 = tid;
    int num_tasks_78697 = info.nsubtasks;
    struct futhark_mc_task_81832 *futhark_mc_task_81832 =
                                 (struct futhark_mc_task_81832 *) args;
    struct futhark_context *ctx = futhark_mc_task_81832->ctx;
    uint64_t futhark_mc_segmap_task_81833_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81833_start = get_wall_time();
    
    int64_t q_70282 = futhark_mc_task_81832->free_q_70282;
    int64_t last_res_72859 = futhark_mc_task_81832->free_last_res_72859;
    struct memblock mem_75618 = {.desc ="mem_75618", .mem =
                                 futhark_mc_task_81832->free_mem_75618, .size =
                                 0, .references =NULL};
    int64_t iter_78698;
    struct futhark_mc_segmap_parloop_struct_81834
    futhark_mc_segmap_parloop_struct_81834;
    
    futhark_mc_segmap_parloop_struct_81834.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81834.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81834.free_last_res_72859 = last_res_72859;
    futhark_mc_segmap_parloop_struct_81834.free_mem_75618 = mem_75618.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81835_task;
    
    futhark_mc_segmap_parloop_81835_task.name =
        "futhark_mc_segmap_parloop_81835";
    futhark_mc_segmap_parloop_81835_task.fn = futhark_mc_segmap_parloop_81835;
    futhark_mc_segmap_parloop_81835_task.args =
        &futhark_mc_segmap_parloop_struct_81834;
    futhark_mc_segmap_parloop_81835_task.iterations = iterations;
    futhark_mc_segmap_parloop_81835_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81835_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81835_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81835_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81835_task);
    
    if (futhark_mc_segmap_parloop_81835_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81835_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81835_total_end -
                 futhark_mc_segmap_parloop_81835_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81835_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81835_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81835_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81833_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81833_end -
                 futhark_mc_segmap_task_81833_start;
        
        ctx->futhark_mc_segmap_task_81833_runs[tid]++;
        ctx->futhark_mc_segmap_task_81833_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81833_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81836 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_72859;
    int64_t free_min_arg_72874;
    int64_t free_min_arg_72875;
    int64_t free_min_res_72876;
    float free_max_res_72880;
    unsigned char *free_mem_75609;
    unsigned char *free_mem_75612;
    unsigned char *free_mem_75615;
    unsigned char *free_mem_75618;
    unsigned char *free_mem_75621;
    unsigned char *free_mem_75624;
};
struct futhark_mc_segmap_parloop_struct_81838 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_72859;
    int64_t free_min_arg_72874;
    int64_t free_min_arg_72875;
    int64_t free_min_res_72876;
    float free_max_res_72880;
    unsigned char *free_mem_75609;
    unsigned char *free_mem_75612;
    unsigned char *free_mem_75615;
    unsigned char *free_mem_75618;
    unsigned char *free_mem_75621;
    unsigned char *free_mem_75624;
};
static int futhark_mc_segmap_parloop_81839(void *args, int64_t start,
                                           int64_t end, int flat_tid_72647,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81838
    *futhark_mc_segmap_parloop_struct_81838 =
    (struct futhark_mc_segmap_parloop_struct_81838 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81838->ctx;
    uint64_t futhark_mc_segmap_parloop_81839_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81839_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81838->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81838->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81838->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81838->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81838->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81838->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81838->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81838->free_loop_cond_70305;
    int64_t last_res_72859 =
            futhark_mc_segmap_parloop_struct_81838->free_last_res_72859;
    int64_t min_arg_72874 =
            futhark_mc_segmap_parloop_struct_81838->free_min_arg_72874;
    int64_t min_arg_72875 =
            futhark_mc_segmap_parloop_struct_81838->free_min_arg_72875;
    int64_t min_res_72876 =
            futhark_mc_segmap_parloop_struct_81838->free_min_res_72876;
    float max_res_72880 =
          futhark_mc_segmap_parloop_struct_81838->free_max_res_72880;
    struct memblock mem_75609 = {.desc ="mem_75609", .mem =
                                 futhark_mc_segmap_parloop_struct_81838->free_mem_75609,
                                 .size =0, .references =NULL};
    struct memblock mem_75612 = {.desc ="mem_75612", .mem =
                                 futhark_mc_segmap_parloop_struct_81838->free_mem_75612,
                                 .size =0, .references =NULL};
    struct memblock mem_75615 = {.desc ="mem_75615", .mem =
                                 futhark_mc_segmap_parloop_struct_81838->free_mem_75615,
                                 .size =0, .references =NULL};
    struct memblock mem_75618 = {.desc ="mem_75618", .mem =
                                 futhark_mc_segmap_parloop_struct_81838->free_mem_75618,
                                 .size =0, .references =NULL};
    struct memblock mem_75621 = {.desc ="mem_75621", .mem =
                                 futhark_mc_segmap_parloop_struct_81838->free_mem_75621,
                                 .size =0, .references =NULL};
    struct memblock mem_75624 = {.desc ="mem_75624", .mem =
                                 futhark_mc_segmap_parloop_struct_81838->free_mem_75624,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78702 = start;
    
    for (; iter_78702 < end; iter_78702++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_78827 = n_m_70288;
        int64_t gtid_72648 = iter_78702;
        int64_t remnant_78828 = iter_78702 - gtid_72648;
        int64_t min_arg_78482 = mul64(jump_70284, gtid_72648);
        int64_t min_res_78483 = smin64(i_70294, min_arg_78482);
        int64_t defunc_0_g_res_78484 = add64((int64_t) 1, min_res_78483);
        bool init_idx_78485;
        int64_t init_idx_78486;
        int64_t init_idx_78487;
        bool loop_while_78703;
        int64_t low_78704;
        int64_t high_78705;
        
        loop_while_78703 = x_70295;
        low_78704 = (int64_t) 0;
        high_78705 = i_70294;
        while (loop_while_78703) {
            int64_t x_78706 = add64(low_78704, high_78705);
            int64_t mid_78707 = sdiv64(x_78706, (int64_t) 2);
            bool x_78708 = sle64((int64_t) 0, mid_78707);
            bool y_78709 = slt64(mid_78707, n_70280);
            bool bounds_check_78710 = x_78708 && y_78709;
            bool index_certs_78711;
            
            if (!bounds_check_78710) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_78707,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t mid_id_78712 = ((int64_t *) mem_75615.mem)[mid_78707];
            bool cond_78713 = slt64(mid_id_78712, (int64_t) 0);
            int64_t mid_idx_78714;
            
            if (cond_78713) {
                mid_idx_78714 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_78714 = mid_id_78712;
            }
            
            bool cond_78715 = sle64(defunc_0_g_res_78484, mid_idx_78714);
            int64_t loopres_78716;
            int64_t loopres_78717;
            
            if (cond_78715) {
                int64_t loopres_t_res_78718 = sub64(mid_78707, (int64_t) 1);
                
                loopres_78716 = low_78704;
                loopres_78717 = loopres_t_res_78718;
            } else {
                int64_t loopres_f_res_78719 = add64((int64_t) 1, mid_78707);
                
                loopres_78716 = loopres_f_res_78719;
                loopres_78717 = high_78705;
            }
            
            bool loop_cond_78720 = sle64(loopres_78716, loopres_78717);
            bool loop_while_tmp_78829 = loop_cond_78720;
            int64_t low_tmp_78830 = loopres_78716;
            int64_t high_tmp_78831 = loopres_78717;
            
            loop_while_78703 = loop_while_tmp_78829;
            low_78704 = low_tmp_78830;
            high_78705 = high_tmp_78831;
        }
        init_idx_78485 = loop_while_78703;
        init_idx_78486 = low_78704;
        init_idx_78487 = high_78705;
        
        bool idx_78506;
        int64_t idx_78507;
        int64_t idx_78508;
        int64_t idx_78509;
        bool loop_while_78721;
        int64_t l_idx_78722;
        int64_t r_idx_78723;
        int64_t span_78724;
        
        loop_while_78721 = loop_cond_70305;
        l_idx_78722 = init_idx_78486;
        r_idx_78723 = init_idx_78486;
        span_78724 = (int64_t) 1;
        while (loop_while_78721) {
            int64_t max_arg_78725 = sub64(l_idx_78722, (int64_t) 1);
            int64_t max_res_78726 = smax64((int64_t) 0, max_arg_78725);
            int64_t min_arg_78727 = add64((int64_t) 1, r_idx_78723);
            int64_t min_res_78728 = smin64(min_arg_72874, min_arg_78727);
            bool x_78729 = sle64((int64_t) 0, max_res_78726);
            bool y_78730 = slt64(max_res_78726, n_70280);
            bool bounds_check_78731 = x_78729 && y_78730;
            bool index_certs_78732;
            
            if (!bounds_check_78731) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_78726,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_78733 = ((int64_t *) mem_75615.mem)[max_res_78726];
            int64_t abs_arg_78734 = sub64(x_78733, defunc_0_g_res_78484);
            int64_t abs_res_78735 = abs64(abs_arg_78734);
            bool x_78736 = sle64((int64_t) 0, min_res_78728);
            bool y_78737 = slt64(min_res_78728, n_70280);
            bool bounds_check_78738 = x_78736 && y_78737;
            bool index_certs_78739;
            
            if (!bounds_check_78738) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_78728,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_78740 = ((int64_t *) mem_75615.mem)[min_res_78728];
            int64_t abs_arg_78741 = sub64(x_78740, defunc_0_g_res_78484);
            int64_t abs_res_78742 = abs64(abs_arg_78741);
            bool cond_78743 = max_res_78726 == l_idx_78722;
            int64_t loopres_78744;
            int64_t loopres_78745;
            int64_t loopres_78746;
            
            if (cond_78743) {
                loopres_78744 = l_idx_78722;
                loopres_78745 = r_idx_78723;
                loopres_78746 = min_res_70300;
            } else {
                bool cond_78747 = slt64(abs_res_78735, abs_res_78742);
                bool cond_f_res_78748 = min_res_78728 == r_idx_78723;
                bool x_78749 = !cond_78747;
                bool y_78750 = cond_f_res_78748 && x_78749;
                bool cond_78751 = cond_78747 || y_78750;
                int64_t loopres_f_res_78752;
                
                if (cond_78751) {
                    loopres_f_res_78752 = max_res_78726;
                } else {
                    loopres_f_res_78752 = l_idx_78722;
                }
                
                int64_t loopres_f_res_78753;
                
                if (cond_78751) {
                    loopres_f_res_78753 = r_idx_78723;
                } else {
                    loopres_f_res_78753 = min_res_78728;
                }
                
                int64_t loopres_f_res_78754;
                
                if (cond_78751) {
                    int64_t loopres_f_res_t_res_78755 = add64((int64_t) 1,
                                                              span_78724);
                    
                    loopres_f_res_78754 = loopres_f_res_t_res_78755;
                } else {
                    int64_t loopres_f_res_f_res_78756 = add64((int64_t) 1,
                                                              span_78724);
                    
                    loopres_f_res_78754 = loopres_f_res_f_res_78756;
                }
                loopres_78744 = loopres_f_res_78752;
                loopres_78745 = loopres_f_res_78753;
                loopres_78746 = loopres_f_res_78754;
            }
            
            bool loop_cond_78757 = slt64(loopres_78746, min_res_70300);
            bool loop_while_tmp_78832 = loop_cond_78757;
            int64_t l_idx_tmp_78833 = loopres_78744;
            int64_t r_idx_tmp_78834 = loopres_78745;
            int64_t span_tmp_78835 = loopres_78746;
            
            loop_while_78721 = loop_while_tmp_78832;
            l_idx_78722 = l_idx_tmp_78833;
            r_idx_78723 = r_idx_tmp_78834;
            span_78724 = span_tmp_78835;
        }
        idx_78506 = loop_while_78721;
        idx_78507 = l_idx_78722;
        idx_78508 = r_idx_78723;
        idx_78509 = span_78724;
        
        int64_t min_res_78547 = smin64(min_arg_72875, idx_78507);
        int64_t max_res_78548 = smax64((int64_t) 0, min_res_78547);
        int64_t x_78549 = add64(min_res_72876, max_res_78548);
        int64_t r_78550 = sub64(x_78549, (int64_t) 1);
        bool x_78551 = sle64((int64_t) 0, r_78550);
        bool y_78552 = slt64(r_78550, n_70280);
        bool bounds_check_78553 = x_78551 && y_78552;
        bool index_certs_78554;
        
        if (!bounds_check_78553) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_78550,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_78555 = ((int64_t *) mem_75612.mem)[r_78550];
        int64_t abs_arg_78556 = sub64(x_78555, min_res_78483);
        int64_t abs_res_78557 = abs64(abs_arg_78556);
        bool x_78558 = sle64((int64_t) 0, max_res_78548);
        bool y_78559 = slt64(max_res_78548, n_70280);
        bool bounds_check_78560 = x_78558 && y_78559;
        bool index_certs_78561;
        
        if (!bounds_check_78560) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_78548,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_78562 = ((int64_t *) mem_75612.mem)[max_res_78548];
        int64_t abs_arg_78563 = sub64(x_78562, min_res_78483);
        int64_t abs_res_78564 = abs64(abs_arg_78563);
        int64_t max_res_78565 = smax64(abs_res_78557, abs_res_78564);
        float defunc_0_f_res_78566 = sitofp_i64_f32(max_res_78565);
        float defunc_1_f_res_78567 = max_res_72880 + defunc_0_f_res_78566;
        float defunc_2_reduce_res_78568;
        float defunc_2_reduce_res_78569;
        float defunc_2_reduce_res_78570;
        float defunc_2_reduce_res_78571;
        float defunc_2_reduce_res_78572;
        float redout_78759;
        float redout_78760;
        float redout_78761;
        float redout_78762;
        float redout_78763;
        
        redout_78759 = 0.0F;
        redout_78760 = 0.0F;
        redout_78761 = 0.0F;
        redout_78762 = 0.0F;
        redout_78763 = 0.0F;
        for (int64_t i_78758 = 0; i_78758 < q_70282; i_78758++) {
            float x_78764 = ((float *) mem_75618.mem)[i_78758];
            bool cond_78765 = sle64(last_res_72859, i_78758);
            int64_t defunc_0_f_res_78766;
            
            if (cond_78765) {
                defunc_0_f_res_78766 = (int64_t) 0;
            } else {
                int64_t i_78767 = add64(max_res_78548, i_78758);
                int64_t defunc_0_add_arg_78768 =
                        ((int64_t *) mem_75612.mem)[i_78767];
                int64_t defunc_1_add_res_78769 = add64((int64_t) 1,
                                                       defunc_0_add_arg_78768);
                
                defunc_0_f_res_78766 = defunc_1_add_res_78769;
            }
            
            int64_t binop_p_78770 = sub64(defunc_0_f_res_78766, min_res_78483);
            float defunc_0_f_res_78771 = sitofp_i64_f32(binop_p_78770);
            float abs_res_78772 = (float) fabs(defunc_0_f_res_78771);
            float tmp1_78773 = abs_res_78772 / defunc_1_f_res_78567;
            float x_78774 = tmp1_78773 * tmp1_78773;
            float y_78775 = tmp1_78773 * x_78774;
            float tmp2_78776 = 1.0F - y_78775;
            float x_78777 = tmp2_78776 * tmp2_78776;
            float tmp3_78778 = tmp2_78776 * x_78777;
            float w_j_78779 = x_78764 * tmp3_78778;
            float xw_j_78780 = defunc_0_f_res_78771 * w_j_78779;
            float x2w_j_78781 = defunc_0_f_res_78771 * xw_j_78780;
            float x3w_j_78782 = defunc_0_f_res_78771 * x2w_j_78781;
            float x4w_j_78783 = defunc_0_f_res_78771 * x3w_j_78782;
            float defunc_1_op_res_78784 = w_j_78779 + redout_78759;
            float defunc_1_op_res_78785 = xw_j_78780 + redout_78760;
            float defunc_1_op_res_78786 = x2w_j_78781 + redout_78761;
            float defunc_1_op_res_78787 = x3w_j_78782 + redout_78762;
            float defunc_1_op_res_78788 = x4w_j_78783 + redout_78763;
            float redout_tmp_78836 = defunc_1_op_res_78784;
            float redout_tmp_78837 = defunc_1_op_res_78785;
            float redout_tmp_78838 = defunc_1_op_res_78786;
            float redout_tmp_78839 = defunc_1_op_res_78787;
            float redout_tmp_78840 = defunc_1_op_res_78788;
            
            redout_78759 = redout_tmp_78836;
            redout_78760 = redout_tmp_78837;
            redout_78761 = redout_tmp_78838;
            redout_78762 = redout_tmp_78839;
            redout_78763 = redout_tmp_78840;
        }
        defunc_2_reduce_res_78568 = redout_78759;
        defunc_2_reduce_res_78569 = redout_78760;
        defunc_2_reduce_res_78570 = redout_78761;
        defunc_2_reduce_res_78571 = redout_78762;
        defunc_2_reduce_res_78572 = redout_78763;
        
        float x_78604 = defunc_2_reduce_res_78570 * defunc_2_reduce_res_78572;
        float y_78605 = defunc_2_reduce_res_78571 * defunc_2_reduce_res_78571;
        float a12_78606 = x_78604 - y_78605;
        float x_78607 = defunc_2_reduce_res_78570 * defunc_2_reduce_res_78571;
        float y_78608 = defunc_2_reduce_res_78569 * defunc_2_reduce_res_78572;
        float b12_78609 = x_78607 - y_78608;
        float x_78610 = defunc_2_reduce_res_78569 * defunc_2_reduce_res_78571;
        float y_78611 = defunc_2_reduce_res_78570 * defunc_2_reduce_res_78570;
        float c12_78612 = x_78610 - y_78611;
        float x_78613 = defunc_2_reduce_res_78568 * defunc_2_reduce_res_78572;
        float b2_78614 = x_78613 - y_78611;
        float x_78615 = defunc_2_reduce_res_78569 * defunc_2_reduce_res_78570;
        float y_78616 = defunc_2_reduce_res_78568 * defunc_2_reduce_res_78571;
        float c2_78617 = x_78615 - y_78616;
        float x_78618 = defunc_2_reduce_res_78568 * a12_78606;
        float y_78619 = defunc_2_reduce_res_78569 * b12_78609;
        float x_78620 = x_78618 + y_78619;
        float y_78621 = defunc_2_reduce_res_78570 * c12_78612;
        float y_78622 = x_78620 + y_78621;
        float det_78623 = 1.0F / y_78622;
        float a12_78624 = a12_78606 * det_78623;
        float b12_78625 = b12_78609 * det_78623;
        float c12_78626 = c12_78612 * det_78623;
        float b2_78627 = b2_78614 * det_78623;
        float c2_78628 = c2_78617 * det_78623;
        float defunc_2_reduce_res_78629;
        float defunc_2_reduce_res_78630;
        float redout_78790;
        float redout_78791;
        
        redout_78790 = 0.0F;
        redout_78791 = 0.0F;
        for (int64_t i_78789 = 0; i_78789 < q_70282; i_78789++) {
            float x_78792 = ((float *) mem_75618.mem)[i_78789];
            bool cond_78793 = sle64(last_res_72859, i_78789);
            int64_t defunc_0_f_res_78794;
            
            if (cond_78793) {
                defunc_0_f_res_78794 = (int64_t) 0;
            } else {
                int64_t i_78795 = add64(max_res_78548, i_78789);
                int64_t defunc_0_add_arg_78796 =
                        ((int64_t *) mem_75612.mem)[i_78795];
                int64_t defunc_1_add_res_78797 = add64((int64_t) 1,
                                                       defunc_0_add_arg_78796);
                
                defunc_0_f_res_78794 = defunc_1_add_res_78797;
            }
            
            int64_t binop_p_78798 = sub64(defunc_0_f_res_78794, min_res_78483);
            float defunc_0_f_res_78799 = sitofp_i64_f32(binop_p_78798);
            float abs_res_78800 = (float) fabs(defunc_0_f_res_78799);
            float tmp1_78801 = abs_res_78800 / defunc_1_f_res_78567;
            float x_78802 = tmp1_78801 * tmp1_78801;
            float y_78803 = tmp1_78801 * x_78802;
            float tmp2_78804 = 1.0F - y_78803;
            float x_78805 = tmp2_78804 * tmp2_78804;
            float tmp3_78806 = tmp2_78804 * x_78805;
            float tmp4_78807 = x_78792 * tmp3_78806;
            float defunc_1_f_res_78808 = defunc_0_f_res_78799 * tmp4_78807;
            float defunc_1_f_res_78809 = defunc_0_f_res_78799 *
                  defunc_1_f_res_78808;
            float defunc_0_f_res_78810;
            
            if (cond_78793) {
                defunc_0_f_res_78810 = 0.0F;
            } else {
                int64_t i_78811 = add64(max_res_78548, i_78789);
                float defunc_0_add_arg_78812 =
                      ((float *) mem_75609.mem)[i_78811];
                
                defunc_0_f_res_78810 = defunc_0_add_arg_78812;
            }
            
            float x_78813 = a12_78624 * tmp4_78807;
            float y_78814 = b12_78625 * defunc_1_f_res_78808;
            float x_78815 = x_78813 + y_78814;
            float y_78816 = c12_78626 * defunc_1_f_res_78809;
            float x_78817 = x_78815 + y_78816;
            float defunc_9_fit_fun_res_78818 = defunc_0_f_res_78810 * x_78817;
            float x_78819 = b12_78625 * tmp4_78807;
            float y_78820 = b2_78627 * defunc_1_f_res_78808;
            float x_78821 = x_78819 + y_78820;
            float y_78822 = c2_78628 * defunc_1_f_res_78809;
            float x_78823 = x_78821 + y_78822;
            float defunc_9_slope_fun_res_78824 = defunc_0_f_res_78810 * x_78823;
            float defunc_1_op_res_78825 = defunc_9_fit_fun_res_78818 +
                  redout_78790;
            float defunc_1_op_res_78826 = defunc_9_slope_fun_res_78824 +
                  redout_78791;
            float redout_tmp_78841 = defunc_1_op_res_78825;
            float redout_tmp_78842 = defunc_1_op_res_78826;
            
            redout_78790 = redout_tmp_78841;
            redout_78791 = redout_tmp_78842;
        }
        defunc_2_reduce_res_78629 = redout_78790;
        defunc_2_reduce_res_78630 = redout_78791;
        ((float *) mem_75621.mem)[gtid_72648] = defunc_2_reduce_res_78629;
        ((float *) mem_75624.mem)[gtid_72648] = defunc_2_reduce_res_78630;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81839_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81839_end -
                 futhark_mc_segmap_parloop_81839_start;
        
        ctx->futhark_mc_segmap_parloop_81839_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81839_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81839_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81837(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72647 = tid;
    int num_tasks_78701 = info.nsubtasks;
    struct futhark_mc_task_81836 *futhark_mc_task_81836 =
                                 (struct futhark_mc_task_81836 *) args;
    struct futhark_context *ctx = futhark_mc_task_81836->ctx;
    uint64_t futhark_mc_segmap_task_81837_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81837_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81836->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81836->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81836->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81836->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81836->free_i_70294;
    bool x_70295 = futhark_mc_task_81836->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81836->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81836->free_loop_cond_70305;
    int64_t last_res_72859 = futhark_mc_task_81836->free_last_res_72859;
    int64_t min_arg_72874 = futhark_mc_task_81836->free_min_arg_72874;
    int64_t min_arg_72875 = futhark_mc_task_81836->free_min_arg_72875;
    int64_t min_res_72876 = futhark_mc_task_81836->free_min_res_72876;
    float max_res_72880 = futhark_mc_task_81836->free_max_res_72880;
    struct memblock mem_75609 = {.desc ="mem_75609", .mem =
                                 futhark_mc_task_81836->free_mem_75609, .size =
                                 0, .references =NULL};
    struct memblock mem_75612 = {.desc ="mem_75612", .mem =
                                 futhark_mc_task_81836->free_mem_75612, .size =
                                 0, .references =NULL};
    struct memblock mem_75615 = {.desc ="mem_75615", .mem =
                                 futhark_mc_task_81836->free_mem_75615, .size =
                                 0, .references =NULL};
    struct memblock mem_75618 = {.desc ="mem_75618", .mem =
                                 futhark_mc_task_81836->free_mem_75618, .size =
                                 0, .references =NULL};
    struct memblock mem_75621 = {.desc ="mem_75621", .mem =
                                 futhark_mc_task_81836->free_mem_75621, .size =
                                 0, .references =NULL};
    struct memblock mem_75624 = {.desc ="mem_75624", .mem =
                                 futhark_mc_task_81836->free_mem_75624, .size =
                                 0, .references =NULL};
    int64_t iter_78702;
    struct futhark_mc_segmap_parloop_struct_81838
    futhark_mc_segmap_parloop_struct_81838;
    
    futhark_mc_segmap_parloop_struct_81838.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81838.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81838.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81838.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81838.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81838.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81838.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81838.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81838.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81838.free_last_res_72859 = last_res_72859;
    futhark_mc_segmap_parloop_struct_81838.free_min_arg_72874 = min_arg_72874;
    futhark_mc_segmap_parloop_struct_81838.free_min_arg_72875 = min_arg_72875;
    futhark_mc_segmap_parloop_struct_81838.free_min_res_72876 = min_res_72876;
    futhark_mc_segmap_parloop_struct_81838.free_max_res_72880 = max_res_72880;
    futhark_mc_segmap_parloop_struct_81838.free_mem_75609 = mem_75609.mem;
    futhark_mc_segmap_parloop_struct_81838.free_mem_75612 = mem_75612.mem;
    futhark_mc_segmap_parloop_struct_81838.free_mem_75615 = mem_75615.mem;
    futhark_mc_segmap_parloop_struct_81838.free_mem_75618 = mem_75618.mem;
    futhark_mc_segmap_parloop_struct_81838.free_mem_75621 = mem_75621.mem;
    futhark_mc_segmap_parloop_struct_81838.free_mem_75624 = mem_75624.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81839_task;
    
    futhark_mc_segmap_parloop_81839_task.name =
        "futhark_mc_segmap_parloop_81839";
    futhark_mc_segmap_parloop_81839_task.fn = futhark_mc_segmap_parloop_81839;
    futhark_mc_segmap_parloop_81839_task.args =
        &futhark_mc_segmap_parloop_struct_81838;
    futhark_mc_segmap_parloop_81839_task.iterations = iterations;
    futhark_mc_segmap_parloop_81839_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81839_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81839_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81839_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81839_task);
    
    if (futhark_mc_segmap_parloop_81839_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81839_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81839_total_end -
                 futhark_mc_segmap_parloop_81839_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81839_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81839_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81839_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81837_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81837_end -
                 futhark_mc_segmap_task_81837_start;
        
        ctx->futhark_mc_segmap_task_81837_runs[tid]++;
        ctx->futhark_mc_segmap_task_81837_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81837_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81841 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_72859;
    int64_t free_min_arg_72874;
    int64_t free_min_arg_72875;
    int64_t free_min_res_72876;
    float free_max_res_72880;
    unsigned char *free_mem_75609;
    unsigned char *free_mem_75612;
    unsigned char *free_mem_75615;
    unsigned char *free_mem_75618;
    unsigned char *free_mem_75621;
    unsigned char *free_mem_75624;
};
struct futhark_mc_task_81843 {
    struct futhark_context *ctx;
    int64_t free_last_res_72859;
    unsigned char *free_mem_75612;
    unsigned char *free_mem_75618;
    int64_t free_min_res_78291;
    int64_t free_max_res_78356;
    float free_defunc_1_f_res_78375;
    float *retval_defunc_2_reduce_res_78376;
    float *retval_defunc_2_reduce_res_78377;
    float *retval_defunc_2_reduce_res_78378;
    float *retval_defunc_2_reduce_res_78379;
    float *retval_defunc_2_reduce_res_78380;
};
struct futhark_mc_segred_stage_1_parloop_struct_81850 {
    struct futhark_context *ctx;
    int64_t free_last_res_72859;
    unsigned char *free_mem_75612;
    unsigned char *free_mem_75618;
    int64_t free_min_res_78291;
    int64_t free_max_res_78356;
    float free_defunc_1_f_res_78375;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_78983;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_78985;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_78987;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_78989;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_78991;
};
static int futhark_mc_segred_stage_1_parloop_81851(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_72651, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81850
    *futhark_mc_segred_stage_1_parloop_struct_81850 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81850 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81850->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81851_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81851_start = get_wall_time();
    
    int64_t last_res_72859 =
            futhark_mc_segred_stage_1_parloop_struct_81850->free_last_res_72859;
    struct memblock mem_75612 = {.desc ="mem_75612", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81850->free_mem_75612,
                                 .size =0, .references =NULL};
    struct memblock mem_75618 = {.desc ="mem_75618", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81850->free_mem_75618,
                                 .size =0, .references =NULL};
    int64_t min_res_78291 =
            futhark_mc_segred_stage_1_parloop_struct_81850->free_min_res_78291;
    int64_t max_res_78356 =
            futhark_mc_segred_stage_1_parloop_struct_81850->free_max_res_78356;
    float defunc_1_f_res_78375 =
          futhark_mc_segred_stage_1_parloop_struct_81850->free_defunc_1_f_res_78375;
    struct memblock reduce_stage_1_tid_res_arr_mem_78983 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_78983",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81850->free_reduce_stage_1_tid_res_arr_mem_78983,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_78985 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_78985",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81850->free_reduce_stage_1_tid_res_arr_mem_78985,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_78987 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_78987",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81850->free_reduce_stage_1_tid_res_arr_mem_78987,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_78989 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_78989",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81850->free_reduce_stage_1_tid_res_arr_mem_78989,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_78991 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_78991",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81850->free_reduce_stage_1_tid_res_arr_mem_78991,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78993 = start;
    float x_78899;
    float x_78900;
    float x_78902;
    float x_78903;
    float x_78905;
    float x_78906;
    float x_78908;
    float x_78909;
    float x_78911;
    float x_78912;
    float local_acc_78994 = 0.0F;
    float local_acc_78995 = 0.0F;
    float local_acc_78996 = 0.0F;
    float local_acc_78997 = 0.0F;
    float local_acc_78998 = 0.0F;
    
    for (; iter_78993 < end; iter_78993++) {
        int64_t gtid_72652 = iter_78993;
        float x_78914 = ((float *) mem_75618.mem)[gtid_72652];
        bool cond_78915 = sle64(last_res_72859, gtid_72652);
        int64_t defunc_0_f_res_78916;
        
        if (cond_78915) {
            defunc_0_f_res_78916 = (int64_t) 0;
        } else {
            int64_t i_78917 = add64(gtid_72652, max_res_78356);
            int64_t defunc_0_add_arg_78918 =
                    ((int64_t *) mem_75612.mem)[i_78917];
            int64_t defunc_1_add_res_78919 = add64((int64_t) 1,
                                                   defunc_0_add_arg_78918);
            
            defunc_0_f_res_78916 = defunc_1_add_res_78919;
        }
        
        int64_t binop_p_78920 = sub64(defunc_0_f_res_78916, min_res_78291);
        float defunc_0_f_res_78921 = sitofp_i64_f32(binop_p_78920);
        float abs_res_78922 = (float) fabs(defunc_0_f_res_78921);
        float tmp1_78923 = abs_res_78922 / defunc_1_f_res_78375;
        float x_78924 = tmp1_78923 * tmp1_78923;
        float y_78925 = tmp1_78923 * x_78924;
        float tmp2_78926 = 1.0F - y_78925;
        float x_78927 = tmp2_78926 * tmp2_78926;
        float tmp3_78928 = tmp2_78926 * x_78927;
        float w_j_78929 = x_78914 * tmp3_78928;
        float xw_j_78930 = defunc_0_f_res_78921 * w_j_78929;
        float x2w_j_78931 = defunc_0_f_res_78921 * xw_j_78930;
        float x3w_j_78932 = defunc_0_f_res_78921 * x2w_j_78931;
        float x4w_j_78933 = defunc_0_f_res_78921 * x3w_j_78932;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_78899 = local_acc_78994;
        }
        // Load next params
        {
            x_78900 = w_j_78929;
        }
        // Red body
        {
            float defunc_1_op_res_78901 = x_78899 + x_78900;
            
            local_acc_78994 = defunc_1_op_res_78901;
        }
        // Load accum params
        {
            x_78902 = local_acc_78995;
        }
        // Load next params
        {
            x_78903 = xw_j_78930;
        }
        // Red body
        {
            float defunc_1_op_res_78904 = x_78902 + x_78903;
            
            local_acc_78995 = defunc_1_op_res_78904;
        }
        // Load accum params
        {
            x_78905 = local_acc_78996;
        }
        // Load next params
        {
            x_78906 = x2w_j_78931;
        }
        // Red body
        {
            float defunc_1_op_res_78907 = x_78905 + x_78906;
            
            local_acc_78996 = defunc_1_op_res_78907;
        }
        // Load accum params
        {
            x_78908 = local_acc_78997;
        }
        // Load next params
        {
            x_78909 = x3w_j_78932;
        }
        // Red body
        {
            float defunc_1_op_res_78910 = x_78908 + x_78909;
            
            local_acc_78997 = defunc_1_op_res_78910;
        }
        // Load accum params
        {
            x_78911 = local_acc_78998;
        }
        // Load next params
        {
            x_78912 = x4w_j_78933;
        }
        // Red body
        {
            float defunc_1_op_res_78913 = x_78911 + x_78912;
            
            local_acc_78998 = defunc_1_op_res_78913;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_78983.mem)[flat_tid_72651] =
        local_acc_78994;
    ((float *) reduce_stage_1_tid_res_arr_mem_78985.mem)[flat_tid_72651] =
        local_acc_78995;
    ((float *) reduce_stage_1_tid_res_arr_mem_78987.mem)[flat_tid_72651] =
        local_acc_78996;
    ((float *) reduce_stage_1_tid_res_arr_mem_78989.mem)[flat_tid_72651] =
        local_acc_78997;
    ((float *) reduce_stage_1_tid_res_arr_mem_78991.mem)[flat_tid_72651] =
        local_acc_78998;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81851_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81851_end -
                 futhark_mc_segred_stage_1_parloop_81851_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81851_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81851_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81851_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81844(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72651 = tid;
    int num_tasks_78982 = info.nsubtasks;
    struct futhark_mc_task_81843 *futhark_mc_task_81843 =
                                 (struct futhark_mc_task_81843 *) args;
    struct futhark_context *ctx = futhark_mc_task_81843->ctx;
    uint64_t futhark_mc_segred_task_81844_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81844_start = get_wall_time();
    
    int64_t last_res_72859 = futhark_mc_task_81843->free_last_res_72859;
    struct memblock mem_75612 = {.desc ="mem_75612", .mem =
                                 futhark_mc_task_81843->free_mem_75612, .size =
                                 0, .references =NULL};
    struct memblock mem_75618 = {.desc ="mem_75618", .mem =
                                 futhark_mc_task_81843->free_mem_75618, .size =
                                 0, .references =NULL};
    int64_t min_res_78291 = futhark_mc_task_81843->free_min_res_78291;
    int64_t max_res_78356 = futhark_mc_task_81843->free_max_res_78356;
    float defunc_1_f_res_78375 =
          futhark_mc_task_81843->free_defunc_1_f_res_78375;
    float defunc_2_reduce_res_78376 =
          *futhark_mc_task_81843->retval_defunc_2_reduce_res_78376;
    float defunc_2_reduce_res_78377 =
          *futhark_mc_task_81843->retval_defunc_2_reduce_res_78377;
    float defunc_2_reduce_res_78378 =
          *futhark_mc_task_81843->retval_defunc_2_reduce_res_78378;
    float defunc_2_reduce_res_78379 =
          *futhark_mc_task_81843->retval_defunc_2_reduce_res_78379;
    float defunc_2_reduce_res_78380 =
          *futhark_mc_task_81843->retval_defunc_2_reduce_res_78380;
    size_t reduce_stage_1_tid_res_arr_mem_78983_cached_sizze_81845 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_78983 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_78985_cached_sizze_81846 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_78985 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_78987_cached_sizze_81847 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_78987 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_78989_cached_sizze_81848 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_78989 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_78991_cached_sizze_81849 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_78991 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_78983_cached_sizze_81845 <
        (size_t) ((int64_t) 4 * num_tasks_78982)) {
        reduce_stage_1_tid_res_arr_mem_78983 =
            realloc(reduce_stage_1_tid_res_arr_mem_78983, (int64_t) 4 *
                    num_tasks_78982);
        reduce_stage_1_tid_res_arr_mem_78983_cached_sizze_81845 = (int64_t) 4 *
            num_tasks_78982;
    }
    if (reduce_stage_1_tid_res_arr_mem_78985_cached_sizze_81846 <
        (size_t) ((int64_t) 4 * num_tasks_78982)) {
        reduce_stage_1_tid_res_arr_mem_78985 =
            realloc(reduce_stage_1_tid_res_arr_mem_78985, (int64_t) 4 *
                    num_tasks_78982);
        reduce_stage_1_tid_res_arr_mem_78985_cached_sizze_81846 = (int64_t) 4 *
            num_tasks_78982;
    }
    if (reduce_stage_1_tid_res_arr_mem_78987_cached_sizze_81847 <
        (size_t) ((int64_t) 4 * num_tasks_78982)) {
        reduce_stage_1_tid_res_arr_mem_78987 =
            realloc(reduce_stage_1_tid_res_arr_mem_78987, (int64_t) 4 *
                    num_tasks_78982);
        reduce_stage_1_tid_res_arr_mem_78987_cached_sizze_81847 = (int64_t) 4 *
            num_tasks_78982;
    }
    if (reduce_stage_1_tid_res_arr_mem_78989_cached_sizze_81848 <
        (size_t) ((int64_t) 4 * num_tasks_78982)) {
        reduce_stage_1_tid_res_arr_mem_78989 =
            realloc(reduce_stage_1_tid_res_arr_mem_78989, (int64_t) 4 *
                    num_tasks_78982);
        reduce_stage_1_tid_res_arr_mem_78989_cached_sizze_81848 = (int64_t) 4 *
            num_tasks_78982;
    }
    if (reduce_stage_1_tid_res_arr_mem_78991_cached_sizze_81849 <
        (size_t) ((int64_t) 4 * num_tasks_78982)) {
        reduce_stage_1_tid_res_arr_mem_78991 =
            realloc(reduce_stage_1_tid_res_arr_mem_78991, (int64_t) 4 *
                    num_tasks_78982);
        reduce_stage_1_tid_res_arr_mem_78991_cached_sizze_81849 = (int64_t) 4 *
            num_tasks_78982;
    }
    
    int64_t iter_78993;
    struct futhark_mc_segred_stage_1_parloop_struct_81850
    futhark_mc_segred_stage_1_parloop_struct_81850;
    
    futhark_mc_segred_stage_1_parloop_struct_81850.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81850.free_last_res_72859 =
        last_res_72859;
    futhark_mc_segred_stage_1_parloop_struct_81850.free_mem_75612 =
        mem_75612.mem;
    futhark_mc_segred_stage_1_parloop_struct_81850.free_mem_75618 =
        mem_75618.mem;
    futhark_mc_segred_stage_1_parloop_struct_81850.free_min_res_78291 =
        min_res_78291;
    futhark_mc_segred_stage_1_parloop_struct_81850.free_max_res_78356 =
        max_res_78356;
    futhark_mc_segred_stage_1_parloop_struct_81850.free_defunc_1_f_res_78375 =
        defunc_1_f_res_78375;
    futhark_mc_segred_stage_1_parloop_struct_81850.free_reduce_stage_1_tid_res_arr_mem_78983 =
        reduce_stage_1_tid_res_arr_mem_78983;
    futhark_mc_segred_stage_1_parloop_struct_81850.free_reduce_stage_1_tid_res_arr_mem_78985 =
        reduce_stage_1_tid_res_arr_mem_78985;
    futhark_mc_segred_stage_1_parloop_struct_81850.free_reduce_stage_1_tid_res_arr_mem_78987 =
        reduce_stage_1_tid_res_arr_mem_78987;
    futhark_mc_segred_stage_1_parloop_struct_81850.free_reduce_stage_1_tid_res_arr_mem_78989 =
        reduce_stage_1_tid_res_arr_mem_78989;
    futhark_mc_segred_stage_1_parloop_struct_81850.free_reduce_stage_1_tid_res_arr_mem_78991 =
        reduce_stage_1_tid_res_arr_mem_78991;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81851_task;
    
    futhark_mc_segred_stage_1_parloop_81851_task.name =
        "futhark_mc_segred_stage_1_parloop_81851";
    futhark_mc_segred_stage_1_parloop_81851_task.fn =
        futhark_mc_segred_stage_1_parloop_81851;
    futhark_mc_segred_stage_1_parloop_81851_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81850;
    futhark_mc_segred_stage_1_parloop_81851_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81851_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81851_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81851_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81851_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81851_task);
    
    if (futhark_mc_segred_stage_1_parloop_81851_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81851_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81851_total_end -
                 futhark_mc_segred_stage_1_parloop_81851_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81851_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81851_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81851_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_78376 = 0.0F;
        defunc_2_reduce_res_78377 = 0.0F;
        defunc_2_reduce_res_78378 = 0.0F;
        defunc_2_reduce_res_78379 = 0.0F;
        defunc_2_reduce_res_78380 = 0.0F;
    }
    
    float x_78999;
    float x_79000;
    float x_79002;
    float x_79003;
    float x_79005;
    float x_79006;
    float x_79008;
    float x_79009;
    float x_79011;
    float x_79012;
    
    for (int32_t i_79014 = 0; i_79014 < num_tasks_78982; i_79014++) {
        flat_tid_72651 = i_79014;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_78999 = defunc_2_reduce_res_78376;
            }
            // load next params
            {
                x_79000 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_78983)[flat_tid_72651];
            }
            // red body
            {
                float defunc_1_op_res_79001 = x_78999 + x_79000;
                
                defunc_2_reduce_res_78376 = defunc_1_op_res_79001;
            }
            // load acc params
            {
                x_79002 = defunc_2_reduce_res_78377;
            }
            // load next params
            {
                x_79003 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_78985)[flat_tid_72651];
            }
            // red body
            {
                float defunc_1_op_res_79004 = x_79002 + x_79003;
                
                defunc_2_reduce_res_78377 = defunc_1_op_res_79004;
            }
            // load acc params
            {
                x_79005 = defunc_2_reduce_res_78378;
            }
            // load next params
            {
                x_79006 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_78987)[flat_tid_72651];
            }
            // red body
            {
                float defunc_1_op_res_79007 = x_79005 + x_79006;
                
                defunc_2_reduce_res_78378 = defunc_1_op_res_79007;
            }
            // load acc params
            {
                x_79008 = defunc_2_reduce_res_78379;
            }
            // load next params
            {
                x_79009 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_78989)[flat_tid_72651];
            }
            // red body
            {
                float defunc_1_op_res_79010 = x_79008 + x_79009;
                
                defunc_2_reduce_res_78379 = defunc_1_op_res_79010;
            }
            // load acc params
            {
                x_79011 = defunc_2_reduce_res_78380;
            }
            // load next params
            {
                x_79012 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_78991)[flat_tid_72651];
            }
            // red body
            {
                float defunc_1_op_res_79013 = x_79011 + x_79012;
                
                defunc_2_reduce_res_78380 = defunc_1_op_res_79013;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_78983);
    free(reduce_stage_1_tid_res_arr_mem_78985);
    free(reduce_stage_1_tid_res_arr_mem_78987);
    free(reduce_stage_1_tid_res_arr_mem_78989);
    free(reduce_stage_1_tid_res_arr_mem_78991);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81844_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81844_end -
                 futhark_mc_segred_task_81844_start;
        
        ctx->futhark_mc_segred_task_81844_runs[tid]++;
        ctx->futhark_mc_segred_task_81844_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81844_iter[tid] += iterations;
    }
    *futhark_mc_task_81843->retval_defunc_2_reduce_res_78376 =
        defunc_2_reduce_res_78376;
    *futhark_mc_task_81843->retval_defunc_2_reduce_res_78377 =
        defunc_2_reduce_res_78377;
    *futhark_mc_task_81843->retval_defunc_2_reduce_res_78378 =
        defunc_2_reduce_res_78378;
    *futhark_mc_task_81843->retval_defunc_2_reduce_res_78379 =
        defunc_2_reduce_res_78379;
    *futhark_mc_task_81843->retval_defunc_2_reduce_res_78380 =
        defunc_2_reduce_res_78380;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81852 {
    struct futhark_context *ctx;
    int64_t free_last_res_72859;
    unsigned char *free_mem_75609;
    unsigned char *free_mem_75612;
    unsigned char *free_mem_75618;
    int64_t free_min_res_78291;
    int64_t free_max_res_78356;
    float free_defunc_1_f_res_78375;
    float free_a12_78436;
    float free_b12_78437;
    float free_c12_78438;
    float free_b2_78439;
    float free_c2_78440;
    float *retval_defunc_2_reduce_res_78441;
    float *retval_defunc_2_reduce_res_78442;
};
struct futhark_mc_segred_stage_1_parloop_struct_81856 {
    struct futhark_context *ctx;
    int64_t free_last_res_72859;
    unsigned char *free_mem_75609;
    unsigned char *free_mem_75612;
    unsigned char *free_mem_75618;
    int64_t free_min_res_78291;
    int64_t free_max_res_78356;
    float free_defunc_1_f_res_78375;
    float free_a12_78436;
    float free_b12_78437;
    float free_c12_78438;
    float free_b2_78439;
    float free_c2_78440;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_79016;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_79018;
};
static int futhark_mc_segred_stage_1_parloop_81857(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_72653, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81856
    *futhark_mc_segred_stage_1_parloop_struct_81856 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81856 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81856->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81857_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81857_start = get_wall_time();
    
    int64_t last_res_72859 =
            futhark_mc_segred_stage_1_parloop_struct_81856->free_last_res_72859;
    struct memblock mem_75609 = {.desc ="mem_75609", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81856->free_mem_75609,
                                 .size =0, .references =NULL};
    struct memblock mem_75612 = {.desc ="mem_75612", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81856->free_mem_75612,
                                 .size =0, .references =NULL};
    struct memblock mem_75618 = {.desc ="mem_75618", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81856->free_mem_75618,
                                 .size =0, .references =NULL};
    int64_t min_res_78291 =
            futhark_mc_segred_stage_1_parloop_struct_81856->free_min_res_78291;
    int64_t max_res_78356 =
            futhark_mc_segred_stage_1_parloop_struct_81856->free_max_res_78356;
    float defunc_1_f_res_78375 =
          futhark_mc_segred_stage_1_parloop_struct_81856->free_defunc_1_f_res_78375;
    float a12_78436 =
          futhark_mc_segred_stage_1_parloop_struct_81856->free_a12_78436;
    float b12_78437 =
          futhark_mc_segred_stage_1_parloop_struct_81856->free_b12_78437;
    float c12_78438 =
          futhark_mc_segred_stage_1_parloop_struct_81856->free_c12_78438;
    float b2_78439 =
          futhark_mc_segred_stage_1_parloop_struct_81856->free_b2_78439;
    float c2_78440 =
          futhark_mc_segred_stage_1_parloop_struct_81856->free_c2_78440;
    struct memblock reduce_stage_1_tid_res_arr_mem_79016 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_79016",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81856->free_reduce_stage_1_tid_res_arr_mem_79016,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_79018 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_79018",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81856->free_reduce_stage_1_tid_res_arr_mem_79018,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79020 = start;
    float x_78934;
    float x_78935;
    float x_78937;
    float x_78938;
    float local_acc_79021 = 0.0F;
    float local_acc_79022 = 0.0F;
    
    for (; iter_79020 < end; iter_79020++) {
        int64_t gtid_72654 = iter_79020;
        float x_78940 = ((float *) mem_75618.mem)[gtid_72654];
        bool cond_78941 = sle64(last_res_72859, gtid_72654);
        int64_t defunc_0_f_res_78942;
        
        if (cond_78941) {
            defunc_0_f_res_78942 = (int64_t) 0;
        } else {
            int64_t i_78943 = add64(gtid_72654, max_res_78356);
            int64_t defunc_0_add_arg_78944 =
                    ((int64_t *) mem_75612.mem)[i_78943];
            int64_t defunc_1_add_res_78945 = add64((int64_t) 1,
                                                   defunc_0_add_arg_78944);
            
            defunc_0_f_res_78942 = defunc_1_add_res_78945;
        }
        
        int64_t binop_p_78946 = sub64(defunc_0_f_res_78942, min_res_78291);
        float defunc_0_f_res_78947 = sitofp_i64_f32(binop_p_78946);
        float abs_res_78948 = (float) fabs(defunc_0_f_res_78947);
        float tmp1_78949 = abs_res_78948 / defunc_1_f_res_78375;
        float x_78950 = tmp1_78949 * tmp1_78949;
        float y_78951 = tmp1_78949 * x_78950;
        float tmp2_78952 = 1.0F - y_78951;
        float x_78953 = tmp2_78952 * tmp2_78952;
        float tmp3_78954 = tmp2_78952 * x_78953;
        float tmp4_78955 = x_78940 * tmp3_78954;
        float defunc_1_f_res_78956 = defunc_0_f_res_78947 * tmp4_78955;
        float defunc_1_f_res_78957 = defunc_0_f_res_78947 *
              defunc_1_f_res_78956;
        float defunc_0_f_res_78958;
        
        if (cond_78941) {
            defunc_0_f_res_78958 = 0.0F;
        } else {
            int64_t i_78959 = add64(gtid_72654, max_res_78356);
            float defunc_0_add_arg_78960 = ((float *) mem_75609.mem)[i_78959];
            
            defunc_0_f_res_78958 = defunc_0_add_arg_78960;
        }
        
        float x_78961 = a12_78436 * tmp4_78955;
        float y_78962 = b12_78437 * defunc_1_f_res_78956;
        float x_78963 = x_78961 + y_78962;
        float y_78964 = c12_78438 * defunc_1_f_res_78957;
        float x_78965 = x_78963 + y_78964;
        float defunc_9_fit_fun_res_78966 = defunc_0_f_res_78958 * x_78965;
        float x_78967 = b12_78437 * tmp4_78955;
        float y_78968 = b2_78439 * defunc_1_f_res_78956;
        float x_78969 = x_78967 + y_78968;
        float y_78970 = c2_78440 * defunc_1_f_res_78957;
        float x_78971 = x_78969 + y_78970;
        float defunc_9_slope_fun_res_78972 = defunc_0_f_res_78958 * x_78971;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_78934 = local_acc_79021;
        }
        // Load next params
        {
            x_78935 = defunc_9_fit_fun_res_78966;
        }
        // Red body
        {
            float defunc_1_op_res_78936 = x_78934 + x_78935;
            
            local_acc_79021 = defunc_1_op_res_78936;
        }
        // Load accum params
        {
            x_78937 = local_acc_79022;
        }
        // Load next params
        {
            x_78938 = defunc_9_slope_fun_res_78972;
        }
        // Red body
        {
            float defunc_1_op_res_78939 = x_78937 + x_78938;
            
            local_acc_79022 = defunc_1_op_res_78939;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_79016.mem)[flat_tid_72653] =
        local_acc_79021;
    ((float *) reduce_stage_1_tid_res_arr_mem_79018.mem)[flat_tid_72653] =
        local_acc_79022;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81857_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81857_end -
                 futhark_mc_segred_stage_1_parloop_81857_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81857_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81857_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81857_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81853(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72653 = tid;
    int num_tasks_79015 = info.nsubtasks;
    struct futhark_mc_task_81852 *futhark_mc_task_81852 =
                                 (struct futhark_mc_task_81852 *) args;
    struct futhark_context *ctx = futhark_mc_task_81852->ctx;
    uint64_t futhark_mc_segred_task_81853_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81853_start = get_wall_time();
    
    int64_t last_res_72859 = futhark_mc_task_81852->free_last_res_72859;
    struct memblock mem_75609 = {.desc ="mem_75609", .mem =
                                 futhark_mc_task_81852->free_mem_75609, .size =
                                 0, .references =NULL};
    struct memblock mem_75612 = {.desc ="mem_75612", .mem =
                                 futhark_mc_task_81852->free_mem_75612, .size =
                                 0, .references =NULL};
    struct memblock mem_75618 = {.desc ="mem_75618", .mem =
                                 futhark_mc_task_81852->free_mem_75618, .size =
                                 0, .references =NULL};
    int64_t min_res_78291 = futhark_mc_task_81852->free_min_res_78291;
    int64_t max_res_78356 = futhark_mc_task_81852->free_max_res_78356;
    float defunc_1_f_res_78375 =
          futhark_mc_task_81852->free_defunc_1_f_res_78375;
    float a12_78436 = futhark_mc_task_81852->free_a12_78436;
    float b12_78437 = futhark_mc_task_81852->free_b12_78437;
    float c12_78438 = futhark_mc_task_81852->free_c12_78438;
    float b2_78439 = futhark_mc_task_81852->free_b2_78439;
    float c2_78440 = futhark_mc_task_81852->free_c2_78440;
    float defunc_2_reduce_res_78441 =
          *futhark_mc_task_81852->retval_defunc_2_reduce_res_78441;
    float defunc_2_reduce_res_78442 =
          *futhark_mc_task_81852->retval_defunc_2_reduce_res_78442;
    size_t reduce_stage_1_tid_res_arr_mem_79016_cached_sizze_81854 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_79016 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_79018_cached_sizze_81855 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_79018 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_79016_cached_sizze_81854 <
        (size_t) ((int64_t) 4 * num_tasks_79015)) {
        reduce_stage_1_tid_res_arr_mem_79016 =
            realloc(reduce_stage_1_tid_res_arr_mem_79016, (int64_t) 4 *
                    num_tasks_79015);
        reduce_stage_1_tid_res_arr_mem_79016_cached_sizze_81854 = (int64_t) 4 *
            num_tasks_79015;
    }
    if (reduce_stage_1_tid_res_arr_mem_79018_cached_sizze_81855 <
        (size_t) ((int64_t) 4 * num_tasks_79015)) {
        reduce_stage_1_tid_res_arr_mem_79018 =
            realloc(reduce_stage_1_tid_res_arr_mem_79018, (int64_t) 4 *
                    num_tasks_79015);
        reduce_stage_1_tid_res_arr_mem_79018_cached_sizze_81855 = (int64_t) 4 *
            num_tasks_79015;
    }
    
    int64_t iter_79020;
    struct futhark_mc_segred_stage_1_parloop_struct_81856
    futhark_mc_segred_stage_1_parloop_struct_81856;
    
    futhark_mc_segred_stage_1_parloop_struct_81856.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81856.free_last_res_72859 =
        last_res_72859;
    futhark_mc_segred_stage_1_parloop_struct_81856.free_mem_75609 =
        mem_75609.mem;
    futhark_mc_segred_stage_1_parloop_struct_81856.free_mem_75612 =
        mem_75612.mem;
    futhark_mc_segred_stage_1_parloop_struct_81856.free_mem_75618 =
        mem_75618.mem;
    futhark_mc_segred_stage_1_parloop_struct_81856.free_min_res_78291 =
        min_res_78291;
    futhark_mc_segred_stage_1_parloop_struct_81856.free_max_res_78356 =
        max_res_78356;
    futhark_mc_segred_stage_1_parloop_struct_81856.free_defunc_1_f_res_78375 =
        defunc_1_f_res_78375;
    futhark_mc_segred_stage_1_parloop_struct_81856.free_a12_78436 = a12_78436;
    futhark_mc_segred_stage_1_parloop_struct_81856.free_b12_78437 = b12_78437;
    futhark_mc_segred_stage_1_parloop_struct_81856.free_c12_78438 = c12_78438;
    futhark_mc_segred_stage_1_parloop_struct_81856.free_b2_78439 = b2_78439;
    futhark_mc_segred_stage_1_parloop_struct_81856.free_c2_78440 = c2_78440;
    futhark_mc_segred_stage_1_parloop_struct_81856.free_reduce_stage_1_tid_res_arr_mem_79016 =
        reduce_stage_1_tid_res_arr_mem_79016;
    futhark_mc_segred_stage_1_parloop_struct_81856.free_reduce_stage_1_tid_res_arr_mem_79018 =
        reduce_stage_1_tid_res_arr_mem_79018;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81857_task;
    
    futhark_mc_segred_stage_1_parloop_81857_task.name =
        "futhark_mc_segred_stage_1_parloop_81857";
    futhark_mc_segred_stage_1_parloop_81857_task.fn =
        futhark_mc_segred_stage_1_parloop_81857;
    futhark_mc_segred_stage_1_parloop_81857_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81856;
    futhark_mc_segred_stage_1_parloop_81857_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81857_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81857_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81857_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81857_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81857_task);
    
    if (futhark_mc_segred_stage_1_parloop_81857_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81857_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81857_total_end -
                 futhark_mc_segred_stage_1_parloop_81857_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81857_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81857_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81857_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_78441 = 0.0F;
        defunc_2_reduce_res_78442 = 0.0F;
    }
    
    float x_79023;
    float x_79024;
    float x_79026;
    float x_79027;
    
    for (int32_t i_79029 = 0; i_79029 < num_tasks_79015; i_79029++) {
        flat_tid_72653 = i_79029;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_79023 = defunc_2_reduce_res_78441;
            }
            // load next params
            {
                x_79024 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_79016)[flat_tid_72653];
            }
            // red body
            {
                float defunc_1_op_res_79025 = x_79023 + x_79024;
                
                defunc_2_reduce_res_78441 = defunc_1_op_res_79025;
            }
            // load acc params
            {
                x_79026 = defunc_2_reduce_res_78442;
            }
            // load next params
            {
                x_79027 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_79018)[flat_tid_72653];
            }
            // red body
            {
                float defunc_1_op_res_79028 = x_79026 + x_79027;
                
                defunc_2_reduce_res_78442 = defunc_1_op_res_79028;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_79016);
    free(reduce_stage_1_tid_res_arr_mem_79018);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81853_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81853_end -
                 futhark_mc_segred_task_81853_start;
        
        ctx->futhark_mc_segred_task_81853_runs[tid]++;
        ctx->futhark_mc_segred_task_81853_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81853_iter[tid] += iterations;
    }
    *futhark_mc_task_81852->retval_defunc_2_reduce_res_78441 =
        defunc_2_reduce_res_78441;
    *futhark_mc_task_81852->retval_defunc_2_reduce_res_78442 =
        defunc_2_reduce_res_78442;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81842(void *args, int64_t start,
                                           int64_t end, int flat_tid_72649,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81841
    *futhark_mc_segmap_parloop_struct_81841 =
    (struct futhark_mc_segmap_parloop_struct_81841 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81841->ctx;
    uint64_t futhark_mc_segmap_parloop_81842_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81842_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81841->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81841->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81841->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81841->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81841->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81841->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81841->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81841->free_loop_cond_70305;
    int64_t last_res_72859 =
            futhark_mc_segmap_parloop_struct_81841->free_last_res_72859;
    int64_t min_arg_72874 =
            futhark_mc_segmap_parloop_struct_81841->free_min_arg_72874;
    int64_t min_arg_72875 =
            futhark_mc_segmap_parloop_struct_81841->free_min_arg_72875;
    int64_t min_res_72876 =
            futhark_mc_segmap_parloop_struct_81841->free_min_res_72876;
    float max_res_72880 =
          futhark_mc_segmap_parloop_struct_81841->free_max_res_72880;
    struct memblock mem_75609 = {.desc ="mem_75609", .mem =
                                 futhark_mc_segmap_parloop_struct_81841->free_mem_75609,
                                 .size =0, .references =NULL};
    struct memblock mem_75612 = {.desc ="mem_75612", .mem =
                                 futhark_mc_segmap_parloop_struct_81841->free_mem_75612,
                                 .size =0, .references =NULL};
    struct memblock mem_75615 = {.desc ="mem_75615", .mem =
                                 futhark_mc_segmap_parloop_struct_81841->free_mem_75615,
                                 .size =0, .references =NULL};
    struct memblock mem_75618 = {.desc ="mem_75618", .mem =
                                 futhark_mc_segmap_parloop_struct_81841->free_mem_75618,
                                 .size =0, .references =NULL};
    struct memblock mem_75621 = {.desc ="mem_75621", .mem =
                                 futhark_mc_segmap_parloop_struct_81841->free_mem_75621,
                                 .size =0, .references =NULL};
    struct memblock mem_75624 = {.desc ="mem_75624", .mem =
                                 futhark_mc_segmap_parloop_struct_81841->free_mem_75624,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_78843 = start;
    
    for (; iter_78843 < end; iter_78843++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_78973 = n_m_70288;
        int64_t gtid_72650 = iter_78843;
        int64_t remnant_78974 = iter_78843 - gtid_72650;
        int64_t min_arg_78290 = mul64(jump_70284, gtid_72650);
        int64_t min_res_78291 = smin64(i_70294, min_arg_78290);
        int64_t defunc_0_g_res_78292 = add64((int64_t) 1, min_res_78291);
        bool init_idx_78293;
        int64_t init_idx_78294;
        int64_t init_idx_78295;
        bool loop_while_78844;
        int64_t low_78845;
        int64_t high_78846;
        
        loop_while_78844 = x_70295;
        low_78845 = (int64_t) 0;
        high_78846 = i_70294;
        while (loop_while_78844) {
            int64_t x_78847 = add64(low_78845, high_78846);
            int64_t mid_78848 = sdiv64(x_78847, (int64_t) 2);
            bool x_78849 = sle64((int64_t) 0, mid_78848);
            bool y_78850 = slt64(mid_78848, n_70280);
            bool bounds_check_78851 = x_78849 && y_78850;
            bool index_certs_78852;
            
            if (!bounds_check_78851) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_78848,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t mid_id_78853 = ((int64_t *) mem_75615.mem)[mid_78848];
            bool cond_78854 = slt64(mid_id_78853, (int64_t) 0);
            int64_t mid_idx_78855;
            
            if (cond_78854) {
                mid_idx_78855 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_78855 = mid_id_78853;
            }
            
            bool cond_78856 = sle64(defunc_0_g_res_78292, mid_idx_78855);
            int64_t loopres_78857;
            int64_t loopres_78858;
            
            if (cond_78856) {
                int64_t loopres_t_res_78859 = sub64(mid_78848, (int64_t) 1);
                
                loopres_78857 = low_78845;
                loopres_78858 = loopres_t_res_78859;
            } else {
                int64_t loopres_f_res_78860 = add64((int64_t) 1, mid_78848);
                
                loopres_78857 = loopres_f_res_78860;
                loopres_78858 = high_78846;
            }
            
            bool loop_cond_78861 = sle64(loopres_78857, loopres_78858);
            bool loop_while_tmp_78975 = loop_cond_78861;
            int64_t low_tmp_78976 = loopres_78857;
            int64_t high_tmp_78977 = loopres_78858;
            
            loop_while_78844 = loop_while_tmp_78975;
            low_78845 = low_tmp_78976;
            high_78846 = high_tmp_78977;
        }
        init_idx_78293 = loop_while_78844;
        init_idx_78294 = low_78845;
        init_idx_78295 = high_78846;
        
        bool idx_78314;
        int64_t idx_78315;
        int64_t idx_78316;
        int64_t idx_78317;
        bool loop_while_78862;
        int64_t l_idx_78863;
        int64_t r_idx_78864;
        int64_t span_78865;
        
        loop_while_78862 = loop_cond_70305;
        l_idx_78863 = init_idx_78294;
        r_idx_78864 = init_idx_78294;
        span_78865 = (int64_t) 1;
        while (loop_while_78862) {
            int64_t max_arg_78866 = sub64(l_idx_78863, (int64_t) 1);
            int64_t max_res_78867 = smax64((int64_t) 0, max_arg_78866);
            int64_t min_arg_78868 = add64((int64_t) 1, r_idx_78864);
            int64_t min_res_78869 = smin64(min_arg_72874, min_arg_78868);
            bool x_78870 = sle64((int64_t) 0, max_res_78867);
            bool y_78871 = slt64(max_res_78867, n_70280);
            bool bounds_check_78872 = x_78870 && y_78871;
            bool index_certs_78873;
            
            if (!bounds_check_78872) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_78867,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_78874 = ((int64_t *) mem_75615.mem)[max_res_78867];
            int64_t abs_arg_78875 = sub64(x_78874, defunc_0_g_res_78292);
            int64_t abs_res_78876 = abs64(abs_arg_78875);
            bool x_78877 = sle64((int64_t) 0, min_res_78869);
            bool y_78878 = slt64(min_res_78869, n_70280);
            bool bounds_check_78879 = x_78877 && y_78878;
            bool index_certs_78880;
            
            if (!bounds_check_78879) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_78869,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_78881 = ((int64_t *) mem_75615.mem)[min_res_78869];
            int64_t abs_arg_78882 = sub64(x_78881, defunc_0_g_res_78292);
            int64_t abs_res_78883 = abs64(abs_arg_78882);
            bool cond_78884 = max_res_78867 == l_idx_78863;
            int64_t loopres_78885;
            int64_t loopres_78886;
            int64_t loopres_78887;
            
            if (cond_78884) {
                loopres_78885 = l_idx_78863;
                loopres_78886 = r_idx_78864;
                loopres_78887 = min_res_70300;
            } else {
                bool cond_78888 = slt64(abs_res_78876, abs_res_78883);
                bool cond_f_res_78889 = min_res_78869 == r_idx_78864;
                bool x_78890 = !cond_78888;
                bool y_78891 = cond_f_res_78889 && x_78890;
                bool cond_78892 = cond_78888 || y_78891;
                int64_t loopres_f_res_78893;
                
                if (cond_78892) {
                    loopres_f_res_78893 = max_res_78867;
                } else {
                    loopres_f_res_78893 = l_idx_78863;
                }
                
                int64_t loopres_f_res_78894;
                
                if (cond_78892) {
                    loopres_f_res_78894 = r_idx_78864;
                } else {
                    loopres_f_res_78894 = min_res_78869;
                }
                
                int64_t loopres_f_res_78895;
                
                if (cond_78892) {
                    int64_t loopres_f_res_t_res_78896 = add64((int64_t) 1,
                                                              span_78865);
                    
                    loopres_f_res_78895 = loopres_f_res_t_res_78896;
                } else {
                    int64_t loopres_f_res_f_res_78897 = add64((int64_t) 1,
                                                              span_78865);
                    
                    loopres_f_res_78895 = loopres_f_res_f_res_78897;
                }
                loopres_78885 = loopres_f_res_78893;
                loopres_78886 = loopres_f_res_78894;
                loopres_78887 = loopres_f_res_78895;
            }
            
            bool loop_cond_78898 = slt64(loopres_78887, min_res_70300);
            bool loop_while_tmp_78978 = loop_cond_78898;
            int64_t l_idx_tmp_78979 = loopres_78885;
            int64_t r_idx_tmp_78980 = loopres_78886;
            int64_t span_tmp_78981 = loopres_78887;
            
            loop_while_78862 = loop_while_tmp_78978;
            l_idx_78863 = l_idx_tmp_78979;
            r_idx_78864 = r_idx_tmp_78980;
            span_78865 = span_tmp_78981;
        }
        idx_78314 = loop_while_78862;
        idx_78315 = l_idx_78863;
        idx_78316 = r_idx_78864;
        idx_78317 = span_78865;
        
        int64_t min_res_78355 = smin64(min_arg_72875, idx_78315);
        int64_t max_res_78356 = smax64((int64_t) 0, min_res_78355);
        int64_t x_78357 = add64(min_res_72876, max_res_78356);
        int64_t r_78358 = sub64(x_78357, (int64_t) 1);
        bool x_78359 = sle64((int64_t) 0, r_78358);
        bool y_78360 = slt64(r_78358, n_70280);
        bool bounds_check_78361 = x_78359 && y_78360;
        bool index_certs_78362;
        
        if (!bounds_check_78361) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_78358,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_78363 = ((int64_t *) mem_75612.mem)[r_78358];
        int64_t abs_arg_78364 = sub64(x_78363, min_res_78291);
        int64_t abs_res_78365 = abs64(abs_arg_78364);
        bool x_78366 = sle64((int64_t) 0, max_res_78356);
        bool y_78367 = slt64(max_res_78356, n_70280);
        bool bounds_check_78368 = x_78366 && y_78367;
        bool index_certs_78369;
        
        if (!bounds_check_78368) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_78356,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_78370 = ((int64_t *) mem_75612.mem)[max_res_78356];
        int64_t abs_arg_78371 = sub64(x_78370, min_res_78291);
        int64_t abs_res_78372 = abs64(abs_arg_78371);
        int64_t max_res_78373 = smax64(abs_res_78365, abs_res_78372);
        float defunc_0_f_res_78374 = sitofp_i64_f32(max_res_78373);
        float defunc_1_f_res_78375 = max_res_72880 + defunc_0_f_res_78374;
        float defunc_2_reduce_res_78376;
        float defunc_2_reduce_res_78377;
        float defunc_2_reduce_res_78378;
        float defunc_2_reduce_res_78379;
        float defunc_2_reduce_res_78380;
        int64_t flat_tid_72651 = (int64_t) 0;
        int32_t num_tasks_78982;
        struct futhark_mc_task_81843 futhark_mc_task_81843;
        
        futhark_mc_task_81843.ctx = ctx;
        futhark_mc_task_81843.free_last_res_72859 = last_res_72859;
        futhark_mc_task_81843.free_mem_75612 = mem_75612.mem;
        futhark_mc_task_81843.free_mem_75618 = mem_75618.mem;
        futhark_mc_task_81843.free_min_res_78291 = min_res_78291;
        futhark_mc_task_81843.free_max_res_78356 = max_res_78356;
        futhark_mc_task_81843.free_defunc_1_f_res_78375 = defunc_1_f_res_78375;
        futhark_mc_task_81843.retval_defunc_2_reduce_res_78376 =
            &defunc_2_reduce_res_78376;
        futhark_mc_task_81843.retval_defunc_2_reduce_res_78377 =
            &defunc_2_reduce_res_78377;
        futhark_mc_task_81843.retval_defunc_2_reduce_res_78378 =
            &defunc_2_reduce_res_78378;
        futhark_mc_task_81843.retval_defunc_2_reduce_res_78379 =
            &defunc_2_reduce_res_78379;
        futhark_mc_task_81843.retval_defunc_2_reduce_res_78380 =
            &defunc_2_reduce_res_78380;
        
        struct scheduler_segop futhark_mc_task_81843_task;
        
        futhark_mc_task_81843_task.args = &futhark_mc_task_81843;
        futhark_mc_task_81843_task.top_level_fn = futhark_mc_segred_task_81844;
        futhark_mc_task_81843_task.name = "futhark_mc_segred_task_81844";
        futhark_mc_task_81843_task.iterations = q_70282;
        futhark_mc_task_81843_task.task_time =
            &ctx->futhark_mc_segred_task_81844_total_time;
        futhark_mc_task_81843_task.task_iter =
            &ctx->futhark_mc_segred_task_81844_total_iter;
        futhark_mc_task_81843_task.sched = STATIC;
        futhark_mc_task_81843_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81844_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81843_task);
        
        if (futhark_mc_segred_task_81844_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_78416 = defunc_2_reduce_res_78378 * defunc_2_reduce_res_78380;
        float y_78417 = defunc_2_reduce_res_78379 * defunc_2_reduce_res_78379;
        float a12_78418 = x_78416 - y_78417;
        float x_78419 = defunc_2_reduce_res_78378 * defunc_2_reduce_res_78379;
        float y_78420 = defunc_2_reduce_res_78377 * defunc_2_reduce_res_78380;
        float b12_78421 = x_78419 - y_78420;
        float x_78422 = defunc_2_reduce_res_78377 * defunc_2_reduce_res_78379;
        float y_78423 = defunc_2_reduce_res_78378 * defunc_2_reduce_res_78378;
        float c12_78424 = x_78422 - y_78423;
        float x_78425 = defunc_2_reduce_res_78376 * defunc_2_reduce_res_78380;
        float b2_78426 = x_78425 - y_78423;
        float x_78427 = defunc_2_reduce_res_78377 * defunc_2_reduce_res_78378;
        float y_78428 = defunc_2_reduce_res_78376 * defunc_2_reduce_res_78379;
        float c2_78429 = x_78427 - y_78428;
        float x_78430 = defunc_2_reduce_res_78376 * a12_78418;
        float y_78431 = defunc_2_reduce_res_78377 * b12_78421;
        float x_78432 = x_78430 + y_78431;
        float y_78433 = defunc_2_reduce_res_78378 * c12_78424;
        float y_78434 = x_78432 + y_78433;
        float det_78435 = 1.0F / y_78434;
        float a12_78436 = a12_78418 * det_78435;
        float b12_78437 = b12_78421 * det_78435;
        float c12_78438 = c12_78424 * det_78435;
        float b2_78439 = b2_78426 * det_78435;
        float c2_78440 = c2_78429 * det_78435;
        float defunc_2_reduce_res_78441;
        float defunc_2_reduce_res_78442;
        int64_t flat_tid_72653 = (int64_t) 0;
        int32_t num_tasks_79015;
        struct futhark_mc_task_81852 futhark_mc_task_81852;
        
        futhark_mc_task_81852.ctx = ctx;
        futhark_mc_task_81852.free_last_res_72859 = last_res_72859;
        futhark_mc_task_81852.free_mem_75609 = mem_75609.mem;
        futhark_mc_task_81852.free_mem_75612 = mem_75612.mem;
        futhark_mc_task_81852.free_mem_75618 = mem_75618.mem;
        futhark_mc_task_81852.free_min_res_78291 = min_res_78291;
        futhark_mc_task_81852.free_max_res_78356 = max_res_78356;
        futhark_mc_task_81852.free_defunc_1_f_res_78375 = defunc_1_f_res_78375;
        futhark_mc_task_81852.free_a12_78436 = a12_78436;
        futhark_mc_task_81852.free_b12_78437 = b12_78437;
        futhark_mc_task_81852.free_c12_78438 = c12_78438;
        futhark_mc_task_81852.free_b2_78439 = b2_78439;
        futhark_mc_task_81852.free_c2_78440 = c2_78440;
        futhark_mc_task_81852.retval_defunc_2_reduce_res_78441 =
            &defunc_2_reduce_res_78441;
        futhark_mc_task_81852.retval_defunc_2_reduce_res_78442 =
            &defunc_2_reduce_res_78442;
        
        struct scheduler_segop futhark_mc_task_81852_task;
        
        futhark_mc_task_81852_task.args = &futhark_mc_task_81852;
        futhark_mc_task_81852_task.top_level_fn = futhark_mc_segred_task_81853;
        futhark_mc_task_81852_task.name = "futhark_mc_segred_task_81853";
        futhark_mc_task_81852_task.iterations = q_70282;
        futhark_mc_task_81852_task.task_time =
            &ctx->futhark_mc_segred_task_81853_total_time;
        futhark_mc_task_81852_task.task_iter =
            &ctx->futhark_mc_segred_task_81853_total_iter;
        futhark_mc_task_81852_task.sched = STATIC;
        futhark_mc_task_81852_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81853_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81852_task);
        
        if (futhark_mc_segred_task_81853_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_75621.mem)[gtid_72650] = defunc_2_reduce_res_78441;
        ((float *) mem_75624.mem)[gtid_72650] = defunc_2_reduce_res_78442;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81842_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81842_end -
                 futhark_mc_segmap_parloop_81842_start;
        
        ctx->futhark_mc_segmap_parloop_81842_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81842_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81842_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81840(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72649 = tid;
    int num_tasks_78701 = info.nsubtasks;
    struct futhark_mc_task_81836 *futhark_mc_task_81836 =
                                 (struct futhark_mc_task_81836 *) args;
    struct futhark_context *ctx = futhark_mc_task_81836->ctx;
    uint64_t futhark_mc_segmap_nested_task_81840_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81840_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81836->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81836->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81836->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81836->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81836->free_i_70294;
    bool x_70295 = futhark_mc_task_81836->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81836->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81836->free_loop_cond_70305;
    int64_t last_res_72859 = futhark_mc_task_81836->free_last_res_72859;
    int64_t min_arg_72874 = futhark_mc_task_81836->free_min_arg_72874;
    int64_t min_arg_72875 = futhark_mc_task_81836->free_min_arg_72875;
    int64_t min_res_72876 = futhark_mc_task_81836->free_min_res_72876;
    float max_res_72880 = futhark_mc_task_81836->free_max_res_72880;
    struct memblock mem_75609 = {.desc ="mem_75609", .mem =
                                 futhark_mc_task_81836->free_mem_75609, .size =
                                 0, .references =NULL};
    struct memblock mem_75612 = {.desc ="mem_75612", .mem =
                                 futhark_mc_task_81836->free_mem_75612, .size =
                                 0, .references =NULL};
    struct memblock mem_75615 = {.desc ="mem_75615", .mem =
                                 futhark_mc_task_81836->free_mem_75615, .size =
                                 0, .references =NULL};
    struct memblock mem_75618 = {.desc ="mem_75618", .mem =
                                 futhark_mc_task_81836->free_mem_75618, .size =
                                 0, .references =NULL};
    struct memblock mem_75621 = {.desc ="mem_75621", .mem =
                                 futhark_mc_task_81836->free_mem_75621, .size =
                                 0, .references =NULL};
    struct memblock mem_75624 = {.desc ="mem_75624", .mem =
                                 futhark_mc_task_81836->free_mem_75624, .size =
                                 0, .references =NULL};
    int64_t iter_78843;
    struct futhark_mc_segmap_parloop_struct_81841
    futhark_mc_segmap_parloop_struct_81841;
    
    futhark_mc_segmap_parloop_struct_81841.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81841.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81841.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81841.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81841.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81841.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81841.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81841.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81841.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81841.free_last_res_72859 = last_res_72859;
    futhark_mc_segmap_parloop_struct_81841.free_min_arg_72874 = min_arg_72874;
    futhark_mc_segmap_parloop_struct_81841.free_min_arg_72875 = min_arg_72875;
    futhark_mc_segmap_parloop_struct_81841.free_min_res_72876 = min_res_72876;
    futhark_mc_segmap_parloop_struct_81841.free_max_res_72880 = max_res_72880;
    futhark_mc_segmap_parloop_struct_81841.free_mem_75609 = mem_75609.mem;
    futhark_mc_segmap_parloop_struct_81841.free_mem_75612 = mem_75612.mem;
    futhark_mc_segmap_parloop_struct_81841.free_mem_75615 = mem_75615.mem;
    futhark_mc_segmap_parloop_struct_81841.free_mem_75618 = mem_75618.mem;
    futhark_mc_segmap_parloop_struct_81841.free_mem_75621 = mem_75621.mem;
    futhark_mc_segmap_parloop_struct_81841.free_mem_75624 = mem_75624.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81842_task;
    
    futhark_mc_segmap_parloop_81842_task.name =
        "futhark_mc_segmap_parloop_81842";
    futhark_mc_segmap_parloop_81842_task.fn = futhark_mc_segmap_parloop_81842;
    futhark_mc_segmap_parloop_81842_task.args =
        &futhark_mc_segmap_parloop_struct_81841;
    futhark_mc_segmap_parloop_81842_task.iterations = iterations;
    futhark_mc_segmap_parloop_81842_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81842_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81842_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81842_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81842_task);
    
    if (futhark_mc_segmap_parloop_81842_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81842_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81842_total_end -
                 futhark_mc_segmap_parloop_81842_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81842_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81842_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81842_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81840_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81840_end -
                 futhark_mc_segmap_nested_task_81840_start;
        
        ctx->futhark_mc_segmap_nested_task_81840_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81840_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81840_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81809(void *args, int64_t start,
                                           int64_t end, int flat_tid_72637,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81808
    *futhark_mc_segmap_parloop_struct_81808 =
    (struct futhark_mc_segmap_parloop_struct_81808 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81808->ctx;
    uint64_t futhark_mc_segmap_parloop_81809_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81809_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_segmap_parloop_struct_81808->free_m_70279;
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81808->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81808->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81808->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81808->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81808->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81808->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81808->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81808->free_loop_cond_70305;
    float i64_res_70306 =
          futhark_mc_segmap_parloop_struct_81808->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81808->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75605 =
            futhark_mc_segmap_parloop_struct_81808->free_bytes_75605;
    int64_t bytes_75608 =
            futhark_mc_segmap_parloop_struct_81808->free_bytes_75608;
    int64_t bytes_75617 =
            futhark_mc_segmap_parloop_struct_81808->free_bytes_75617;
    int64_t bytes_75620 =
            futhark_mc_segmap_parloop_struct_81808->free_bytes_75620;
    struct memblock mem_75733 = {.desc ="mem_75733", .mem =
                                 futhark_mc_segmap_parloop_struct_81808->free_mem_75733,
                                 .size =0, .references =NULL};
    struct memblock mem_75737 = {.desc ="mem_75737", .mem =
                                 futhark_mc_segmap_parloop_struct_81808->free_mem_75737,
                                 .size =0, .references =NULL};
    size_t mem_75606_cached_sizze_81810 = 0;
    unsigned char *mem_75606 = NULL;
    size_t mem_75609_cached_sizze_81811 = 0;
    unsigned char *mem_75609 = NULL;
    size_t mem_75612_cached_sizze_81812 = 0;
    unsigned char *mem_75612 = NULL;
    size_t mem_75615_cached_sizze_81813 = 0;
    unsigned char *mem_75615 = NULL;
    size_t mem_75618_cached_sizze_81814 = 0;
    unsigned char *mem_75618 = NULL;
    size_t mem_75621_cached_sizze_81815 = 0;
    unsigned char *mem_75621 = NULL;
    size_t mem_75624_cached_sizze_81816 = 0;
    unsigned char *mem_75624 = NULL;
    int64_t iterations = end - start;
    int64_t iter_78272 = start;
    
    if (mem_75606_cached_sizze_81810 < (size_t) bytes_75605) {
        mem_75606 = realloc(mem_75606, bytes_75605);
        mem_75606_cached_sizze_81810 = bytes_75605;
    }
    if (mem_75609_cached_sizze_81811 < (size_t) bytes_75608) {
        mem_75609 = realloc(mem_75609, bytes_75608);
        mem_75609_cached_sizze_81811 = bytes_75608;
    }
    if (mem_75612_cached_sizze_81812 < (size_t) bytes_75605) {
        mem_75612 = realloc(mem_75612, bytes_75605);
        mem_75612_cached_sizze_81812 = bytes_75605;
    }
    if (mem_75615_cached_sizze_81813 < (size_t) bytes_75605) {
        mem_75615 = realloc(mem_75615, bytes_75605);
        mem_75615_cached_sizze_81813 = bytes_75605;
    }
    if (mem_75618_cached_sizze_81814 < (size_t) bytes_75617) {
        mem_75618 = realloc(mem_75618, bytes_75617);
        mem_75618_cached_sizze_81814 = bytes_75617;
    }
    if (mem_75621_cached_sizze_81815 < (size_t) bytes_75620) {
        mem_75621 = realloc(mem_75621, bytes_75620);
        mem_75621_cached_sizze_81815 = bytes_75620;
    }
    if (mem_75624_cached_sizze_81816 < (size_t) bytes_75620) {
        mem_75624 = realloc(mem_75624, bytes_75620);
        mem_75624_cached_sizze_81816 = bytes_75620;
    }
    for (; iter_78272 < end; iter_78272++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_78669 = m_70279;
        int64_t gtid_72638 = iter_78272;
        int64_t remnant_78670 = iter_78272 - gtid_72638;
        int64_t flat_tid_72639 = (int64_t) 0;
        int32_t num_tasks_78671;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_81817 futhark_mc_task_81817;
        
        futhark_mc_task_81817.ctx = ctx;
        futhark_mc_task_81817.free_n_70280 = n_70280;
        futhark_mc_task_81817.free_gtid_72638 = gtid_72638;
        futhark_mc_task_81817.free_Y_mem_75353 = Y_mem_75353.mem;
        futhark_mc_task_81817.free_mem_75606 = mem_75606;
        
        struct scheduler_segop futhark_mc_task_81817_task;
        
        futhark_mc_task_81817_task.args = &futhark_mc_task_81817;
        futhark_mc_task_81817_task.top_level_fn = futhark_mc_segscan_task_81818;
        futhark_mc_task_81817_task.name = "futhark_mc_segscan_task_81818";
        futhark_mc_task_81817_task.iterations = n_70280;
        futhark_mc_task_81817_task.task_time =
            &ctx->futhark_mc_segscan_task_81818_total_time;
        futhark_mc_task_81817_task.task_iter =
            &ctx->futhark_mc_segscan_task_81818_total_iter;
        futhark_mc_task_81817_task.sched = STATIC;
        futhark_mc_task_81817_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_81818_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81817_task);
        
        if (futhark_mc_segscan_task_81818_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_72859 = ((int64_t *) mem_75606)[i_70294];
        
        for (int64_t i_78685 = 0; i_78685 < n_70280; i_78685++) {
            ((float *) mem_75609)[i_78685] = 0.0F;
        }
        for (int64_t i_78686 = 0; i_78686 < n_70280; i_78686++) {
            ((int64_t *) mem_75612)[i_78686] = (int64_t) -1;
        }
        
        int64_t flat_tid_72641 = (int64_t) 0;
        int32_t num_tasks_78687;
        struct futhark_mc_task_81824 futhark_mc_task_81824;
        
        futhark_mc_task_81824.ctx = ctx;
        futhark_mc_task_81824.free_n_70280 = n_70280;
        futhark_mc_task_81824.free_gtid_72638 = gtid_72638;
        futhark_mc_task_81824.free_Y_mem_75353 = Y_mem_75353.mem;
        futhark_mc_task_81824.free_mem_75606 = mem_75606;
        futhark_mc_task_81824.free_mem_75609 = mem_75609;
        futhark_mc_task_81824.free_mem_75612 = mem_75612;
        
        struct scheduler_segop futhark_mc_task_81824_task;
        
        futhark_mc_task_81824_task.args = &futhark_mc_task_81824;
        futhark_mc_task_81824_task.top_level_fn = futhark_mc_segmap_task_81825;
        futhark_mc_task_81824_task.name = "futhark_mc_segmap_task_81825";
        futhark_mc_task_81824_task.iterations = n_70280;
        futhark_mc_task_81824_task.task_time =
            &ctx->futhark_mc_segmap_task_81825_total_time;
        futhark_mc_task_81824_task.task_iter =
            &ctx->futhark_mc_segmap_task_81825_total_iter;
        futhark_mc_task_81824_task.sched = STATIC;
        futhark_mc_task_81824_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81825_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81824_task);
        
        if (futhark_mc_segmap_task_81825_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_72643 = (int64_t) 0;
        int32_t num_tasks_78693;
        struct futhark_mc_task_81828 futhark_mc_task_81828;
        
        futhark_mc_task_81828.ctx = ctx;
        futhark_mc_task_81828.free_n_70280 = n_70280;
        futhark_mc_task_81828.free_mem_75612 = mem_75612;
        futhark_mc_task_81828.free_mem_75615 = mem_75615;
        
        struct scheduler_segop futhark_mc_task_81828_task;
        
        futhark_mc_task_81828_task.args = &futhark_mc_task_81828;
        futhark_mc_task_81828_task.top_level_fn = futhark_mc_segmap_task_81829;
        futhark_mc_task_81828_task.name = "futhark_mc_segmap_task_81829";
        futhark_mc_task_81828_task.iterations = n_70280;
        futhark_mc_task_81828_task.task_time =
            &ctx->futhark_mc_segmap_task_81829_total_time;
        futhark_mc_task_81828_task.task_iter =
            &ctx->futhark_mc_segmap_task_81829_total_iter;
        futhark_mc_task_81828_task.sched = STATIC;
        futhark_mc_task_81828_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81829_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81828_task);
        
        if (futhark_mc_segmap_task_81829_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_72874 = sub64(last_res_72859, (int64_t) 1);
        int64_t min_arg_72875 = sub64(last_res_72859, min_res_70300);
        int64_t min_res_72876 = smin64(q_70282, last_res_72859);
        float i64_res_72877 = sitofp_i64_f32(last_res_72859);
        float x_72878 = i64_res_70306 - i64_res_72877;
        float max_arg_72879 = x_72878 / 2.0F;
        float max_res_72880 = fmax32(0.0F, max_arg_72879);
        int64_t flat_tid_72645 = (int64_t) 0;
        int32_t num_tasks_78697;
        struct futhark_mc_task_81832 futhark_mc_task_81832;
        
        futhark_mc_task_81832.ctx = ctx;
        futhark_mc_task_81832.free_q_70282 = q_70282;
        futhark_mc_task_81832.free_last_res_72859 = last_res_72859;
        futhark_mc_task_81832.free_mem_75618 = mem_75618;
        
        struct scheduler_segop futhark_mc_task_81832_task;
        
        futhark_mc_task_81832_task.args = &futhark_mc_task_81832;
        futhark_mc_task_81832_task.top_level_fn = futhark_mc_segmap_task_81833;
        futhark_mc_task_81832_task.name = "futhark_mc_segmap_task_81833";
        futhark_mc_task_81832_task.iterations = q_70282;
        futhark_mc_task_81832_task.task_time =
            &ctx->futhark_mc_segmap_task_81833_total_time;
        futhark_mc_task_81832_task.task_iter =
            &ctx->futhark_mc_segmap_task_81833_total_iter;
        futhark_mc_task_81832_task.sched = STATIC;
        futhark_mc_task_81832_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81833_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81832_task);
        
        if (futhark_mc_segmap_task_81833_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_72647 = (int64_t) 0;
        int32_t num_tasks_78701;
        int64_t flat_tid_72649 = (int64_t) 0;
        struct futhark_mc_task_81836 futhark_mc_task_81836;
        
        futhark_mc_task_81836.ctx = ctx;
        futhark_mc_task_81836.free_n_70280 = n_70280;
        futhark_mc_task_81836.free_q_70282 = q_70282;
        futhark_mc_task_81836.free_jump_70284 = jump_70284;
        futhark_mc_task_81836.free_n_m_70288 = n_m_70288;
        futhark_mc_task_81836.free_i_70294 = i_70294;
        futhark_mc_task_81836.free_x_70295 = x_70295;
        futhark_mc_task_81836.free_min_res_70300 = min_res_70300;
        futhark_mc_task_81836.free_loop_cond_70305 = loop_cond_70305;
        futhark_mc_task_81836.free_last_res_72859 = last_res_72859;
        futhark_mc_task_81836.free_min_arg_72874 = min_arg_72874;
        futhark_mc_task_81836.free_min_arg_72875 = min_arg_72875;
        futhark_mc_task_81836.free_min_res_72876 = min_res_72876;
        futhark_mc_task_81836.free_max_res_72880 = max_res_72880;
        futhark_mc_task_81836.free_mem_75609 = mem_75609;
        futhark_mc_task_81836.free_mem_75612 = mem_75612;
        futhark_mc_task_81836.free_mem_75615 = mem_75615;
        futhark_mc_task_81836.free_mem_75618 = mem_75618;
        futhark_mc_task_81836.free_mem_75621 = mem_75621;
        futhark_mc_task_81836.free_mem_75624 = mem_75624;
        
        struct scheduler_segop futhark_mc_task_81836_task;
        
        futhark_mc_task_81836_task.args = &futhark_mc_task_81836;
        futhark_mc_task_81836_task.top_level_fn = futhark_mc_segmap_task_81837;
        futhark_mc_task_81836_task.name = "futhark_mc_segmap_task_81837";
        futhark_mc_task_81836_task.iterations = n_m_70288;
        futhark_mc_task_81836_task.task_time =
            &ctx->futhark_mc_segmap_task_81837_total_time;
        futhark_mc_task_81836_task.task_iter =
            &ctx->futhark_mc_segmap_task_81837_total_iter;
        futhark_mc_task_81836_task.sched = DYNAMIC;
        futhark_mc_task_81836_task.nested_fn =
            futhark_mc_segmap_nested_task_81840;
        
        int futhark_mc_segmap_task_81837_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81836_task);
        
        if (futhark_mc_segmap_task_81837_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_75733.mem + gtid_72638 * n_m_70288 * (int64_t) 4,
                    mem_75621 + (int64_t) 0, n_m_70288 * (int64_t) 4);
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_75737.mem + gtid_72638 * n_m_70288 * (int64_t) 4,
                    mem_75624 + (int64_t) 0, n_m_70288 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75606);
    free(mem_75609);
    free(mem_75612);
    free(mem_75615);
    free(mem_75618);
    free(mem_75621);
    free(mem_75624);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81809_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81809_end -
                 futhark_mc_segmap_parloop_81809_start;
        
        ctx->futhark_mc_segmap_parloop_81809_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81809_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81809_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81807(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_72637 = tid;
    int num_tasks_78021 = info.nsubtasks;
    struct futhark_mc_task_81796 *futhark_mc_task_81796 =
                                 (struct futhark_mc_task_81796 *) args;
    struct futhark_context *ctx = futhark_mc_task_81796->ctx;
    uint64_t futhark_mc_segmap_nested_task_81807_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81807_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_task_81796->free_m_70279;
    int64_t n_70280 = futhark_mc_task_81796->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81796->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81796->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81796->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81796->free_i_70294;
    bool x_70295 = futhark_mc_task_81796->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81796->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81796->free_loop_cond_70305;
    float i64_res_70306 = futhark_mc_task_81796->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81796->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75605 = futhark_mc_task_81796->free_bytes_75605;
    int64_t bytes_75608 = futhark_mc_task_81796->free_bytes_75608;
    int64_t bytes_75617 = futhark_mc_task_81796->free_bytes_75617;
    int64_t bytes_75620 = futhark_mc_task_81796->free_bytes_75620;
    struct memblock mem_75733 = {.desc ="mem_75733", .mem =
                                 futhark_mc_task_81796->free_mem_75733, .size =
                                 0, .references =NULL};
    struct memblock mem_75737 = {.desc ="mem_75737", .mem =
                                 futhark_mc_task_81796->free_mem_75737, .size =
                                 0, .references =NULL};
    int64_t iter_78272;
    struct futhark_mc_segmap_parloop_struct_81808
    futhark_mc_segmap_parloop_struct_81808;
    
    futhark_mc_segmap_parloop_struct_81808.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81808.free_m_70279 = m_70279;
    futhark_mc_segmap_parloop_struct_81808.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81808.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81808.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81808.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81808.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81808.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81808.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81808.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81808.free_i64_res_70306 = i64_res_70306;
    futhark_mc_segmap_parloop_struct_81808.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81808.free_bytes_75605 = bytes_75605;
    futhark_mc_segmap_parloop_struct_81808.free_bytes_75608 = bytes_75608;
    futhark_mc_segmap_parloop_struct_81808.free_bytes_75617 = bytes_75617;
    futhark_mc_segmap_parloop_struct_81808.free_bytes_75620 = bytes_75620;
    futhark_mc_segmap_parloop_struct_81808.free_mem_75733 = mem_75733.mem;
    futhark_mc_segmap_parloop_struct_81808.free_mem_75737 = mem_75737.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81809_task;
    
    futhark_mc_segmap_parloop_81809_task.name =
        "futhark_mc_segmap_parloop_81809";
    futhark_mc_segmap_parloop_81809_task.fn = futhark_mc_segmap_parloop_81809;
    futhark_mc_segmap_parloop_81809_task.args =
        &futhark_mc_segmap_parloop_struct_81808;
    futhark_mc_segmap_parloop_81809_task.iterations = iterations;
    futhark_mc_segmap_parloop_81809_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81809_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81809_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81809_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81809_task);
    
    if (futhark_mc_segmap_parloop_81809_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81809_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81809_total_end -
                 futhark_mc_segmap_parloop_81809_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81809_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81809_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81809_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81807_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81807_end -
                 futhark_mc_segmap_nested_task_81807_start;
        
        ctx->futhark_mc_segmap_nested_task_81807_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81807_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81807_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81858 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75747;
    int64_t free_bytes_75750;
    int64_t free_bytes_75759;
    int64_t free_bytes_75780;
    unsigned char *free_mem_75890;
};
struct futhark_mc_segmap_parloop_struct_81860 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75747;
    int64_t free_bytes_75750;
    int64_t free_bytes_75759;
    int64_t free_bytes_75780;
    unsigned char *free_mem_75890;
};
static int futhark_mc_segmap_parloop_81861(void *args, int64_t start,
                                           int64_t end, int flat_tid_73277,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81860
    *futhark_mc_segmap_parloop_struct_81860 =
    (struct futhark_mc_segmap_parloop_struct_81860 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81860->ctx;
    uint64_t futhark_mc_segmap_parloop_81861_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81861_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_segmap_parloop_struct_81860->free_m_70279;
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81860->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81860->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81860->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81860->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81860->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81860->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81860->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81860->free_loop_cond_70305;
    float i64_res_70306 =
          futhark_mc_segmap_parloop_struct_81860->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81860->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75747 =
            futhark_mc_segmap_parloop_struct_81860->free_bytes_75747;
    int64_t bytes_75750 =
            futhark_mc_segmap_parloop_struct_81860->free_bytes_75750;
    int64_t bytes_75759 =
            futhark_mc_segmap_parloop_struct_81860->free_bytes_75759;
    int64_t bytes_75780 =
            futhark_mc_segmap_parloop_struct_81860->free_bytes_75780;
    struct memblock mem_75890 = {.desc ="mem_75890", .mem =
                                 futhark_mc_segmap_parloop_struct_81860->free_mem_75890,
                                 .size =0, .references =NULL};
    size_t mem_75784_cached_sizze_81862 = 0;
    unsigned char *mem_75784 = NULL;
    size_t mem_75799_cached_sizze_81863 = 0;
    unsigned char *mem_75799 = NULL;
    size_t mem_75802_cached_sizze_81864 = 0;
    unsigned char *mem_75802 = NULL;
    size_t mem_75829_cached_sizze_81865 = 0;
    unsigned char *mem_75829 = NULL;
    size_t mem_75844_cached_sizze_81866 = 0;
    unsigned char *mem_75844 = NULL;
    size_t mem_75859_cached_sizze_81867 = 0;
    unsigned char *mem_75859 = NULL;
    size_t mem_75869_cached_sizze_81868 = 0;
    unsigned char *mem_75869 = NULL;
    int64_t iterations = end - start;
    int64_t iter_79033 = start;
    
    if (mem_75784_cached_sizze_81862 < (size_t) bytes_75747) {
        mem_75784 = realloc(mem_75784, bytes_75747);
        mem_75784_cached_sizze_81862 = bytes_75747;
    }
    if (mem_75799_cached_sizze_81863 < (size_t) bytes_75750) {
        mem_75799 = realloc(mem_75799, bytes_75750);
        mem_75799_cached_sizze_81863 = bytes_75750;
    }
    if (mem_75802_cached_sizze_81864 < (size_t) bytes_75747) {
        mem_75802 = realloc(mem_75802, bytes_75747);
        mem_75802_cached_sizze_81864 = bytes_75747;
    }
    if (mem_75829_cached_sizze_81865 < (size_t) bytes_75747) {
        mem_75829 = realloc(mem_75829, bytes_75747);
        mem_75829_cached_sizze_81865 = bytes_75747;
    }
    if (mem_75844_cached_sizze_81866 < (size_t) bytes_75759) {
        mem_75844 = realloc(mem_75844, bytes_75759);
        mem_75844_cached_sizze_81866 = bytes_75759;
    }
    if (mem_75859_cached_sizze_81867 < (size_t) bytes_75780) {
        mem_75859 = realloc(mem_75859, bytes_75780);
        mem_75859_cached_sizze_81867 = bytes_75780;
    }
    if (mem_75869_cached_sizze_81868 < (size_t) bytes_75759) {
        mem_75869 = realloc(mem_75869, bytes_75759);
        mem_75869_cached_sizze_81868 = bytes_75759;
    }
    for (; iter_79033 < end; iter_79033++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79190 = m_70279;
        int64_t gtid_73278 = iter_79033;
        int64_t remnant_79191 = iter_79033 - gtid_73278;
        int64_t discard_75095;
        int64_t scanacc_79035 = (int64_t) 0;
        
        for (int64_t i_79034 = 0; i_79034 < n_70280; i_79034++) {
            float x_79037 = ((float *) Y_mem_75353.mem)[gtid_73278 * n_70280 +
                                                        i_79034];
            bool isnan_res_79038;
            
            isnan_res_79038 = futrts_isnan32(x_79037);
            
            bool defunc_0_p_res_79039 = !isnan_res_79038;
            int64_t defunc_0_f_res_79040 = btoi_bool_i64(defunc_0_p_res_79039);
            int64_t defunc_1_op_res_79041 = add64(defunc_0_f_res_79040,
                                                  scanacc_79035);
            
            ((int64_t *) mem_75784)[i_79034] = defunc_1_op_res_79041;
            
            int64_t scanacc_tmp_79192 = defunc_1_op_res_79041;
            
            scanacc_79035 = scanacc_tmp_79192;
        }
        discard_75095 = scanacc_79035;
        
        int64_t last_res_70953 = ((int64_t *) mem_75784)[i_70294];
        
        for (int64_t i_79194 = 0; i_79194 < n_70280; i_79194++) {
            ((float *) mem_75799)[i_79194] = 0.0F;
        }
        for (int64_t i_79195 = 0; i_79195 < n_70280; i_79195++) {
            ((int64_t *) mem_75802)[i_79195] = (int64_t) -1;
        }
        for (int64_t write_iter_79043 = 0; write_iter_79043 < n_70280;
             write_iter_79043++) {
            float write_iv_79046 = ((float *) Y_mem_75353.mem)[gtid_73278 *
                                                               n_70280 +
                                                               write_iter_79043];
            bool isnan_res_79047;
            
            isnan_res_79047 = futrts_isnan32(write_iv_79046);
            
            bool defunc_0_p_res_79048 = !isnan_res_79047;
            int64_t defunc_1_f_res_79049;
            
            if (defunc_0_p_res_79048) {
                int64_t write_iv_79050 =
                        ((int64_t *) mem_75784)[write_iter_79043];
                int64_t defunc_1_f_res_t_res_79051 = sub64(write_iv_79050,
                                                           (int64_t) 1);
                
                defunc_1_f_res_79049 = defunc_1_f_res_t_res_79051;
            } else {
                defunc_1_f_res_79049 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_79049) &&
                slt64(defunc_1_f_res_79049, n_70280)) {
                ((int64_t *) mem_75802)[defunc_1_f_res_79049] =
                    write_iter_79043;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_79049) &&
                slt64(defunc_1_f_res_79049, n_70280)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_75799 + defunc_1_f_res_79049 * (int64_t) 4,
                            Y_mem_75353.mem + (gtid_73278 * n_70280 +
                                               write_iter_79043) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        for (int64_t i_79055 = 0; i_79055 < n_70280; i_79055++) {
            int64_t x_79057 = ((int64_t *) mem_75802)[i_79055];
            int64_t defunc_0_f_res_79058 = add64((int64_t) 1, x_79057);
            
            ((int64_t *) mem_75829)[i_79055] = defunc_0_f_res_79058;
        }
        
        int64_t min_arg_70968 = sub64(last_res_70953, (int64_t) 1);
        int64_t min_arg_70969 = sub64(last_res_70953, min_res_70300);
        int64_t min_res_70970 = smin64(q_70282, last_res_70953);
        float i64_res_70971 = sitofp_i64_f32(last_res_70953);
        float x_70972 = i64_res_70306 - i64_res_70971;
        float max_arg_70973 = x_70972 / 2.0F;
        float max_res_70974 = fmax32(0.0F, max_arg_70973);
        
        for (int64_t i_79060 = 0; i_79060 < q_70282; i_79060++) {
            bool cond_79062 = sle64(last_res_70953, i_79060);
            float defunc_0_f_res_79063;
            
            if (cond_79062) {
                defunc_0_f_res_79063 = 0.0F;
            } else {
                defunc_0_f_res_79063 = 1.0F;
            }
            ((float *) mem_75844)[i_79060] = defunc_0_f_res_79063;
        }
        for (int64_t i_79065 = 0; i_79065 < n_m_70288; i_79065++) {
            int64_t min_arg_79067 = mul64(jump_70284, i_79065);
            int64_t min_res_79068 = smin64(i_70294, min_arg_79067);
            int64_t defunc_0_g_res_79069 = add64((int64_t) 1, min_res_79068);
            bool init_idx_79070;
            int64_t init_idx_79071;
            int64_t init_idx_79072;
            bool loop_while_79073;
            int64_t low_79074;
            int64_t high_79075;
            
            loop_while_79073 = x_70295;
            low_79074 = (int64_t) 0;
            high_79075 = i_70294;
            while (loop_while_79073) {
                int64_t x_79076 = add64(low_79074, high_79075);
                int64_t mid_79077 = sdiv64(x_79076, (int64_t) 2);
                bool x_79078 = sle64((int64_t) 0, mid_79077);
                bool y_79079 = slt64(mid_79077, n_70280);
                bool bounds_check_79080 = x_79078 && y_79079;
                bool index_certs_79081;
                
                if (!bounds_check_79080) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_79077,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t mid_id_79082 = ((int64_t *) mem_75829)[mid_79077];
                bool cond_79083 = slt64(mid_id_79082, (int64_t) 0);
                int64_t mid_idx_79084;
                
                if (cond_79083) {
                    mid_idx_79084 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_79084 = mid_id_79082;
                }
                
                bool cond_79085 = sle64(defunc_0_g_res_79069, mid_idx_79084);
                int64_t loopres_79086;
                int64_t loopres_79087;
                
                if (cond_79085) {
                    int64_t loopres_t_res_79088 = sub64(mid_79077, (int64_t) 1);
                    
                    loopres_79086 = low_79074;
                    loopres_79087 = loopres_t_res_79088;
                } else {
                    int64_t loopres_f_res_79089 = add64((int64_t) 1, mid_79077);
                    
                    loopres_79086 = loopres_f_res_79089;
                    loopres_79087 = high_79075;
                }
                
                bool loop_cond_79090 = sle64(loopres_79086, loopres_79087);
                bool loop_while_tmp_79201 = loop_cond_79090;
                int64_t low_tmp_79202 = loopres_79086;
                int64_t high_tmp_79203 = loopres_79087;
                
                loop_while_79073 = loop_while_tmp_79201;
                low_79074 = low_tmp_79202;
                high_79075 = high_tmp_79203;
            }
            init_idx_79070 = loop_while_79073;
            init_idx_79071 = low_79074;
            init_idx_79072 = high_79075;
            
            bool idx_79091;
            int64_t idx_79092;
            int64_t idx_79093;
            int64_t idx_79094;
            bool loop_while_79095;
            int64_t l_idx_79096;
            int64_t r_idx_79097;
            int64_t span_79098;
            
            loop_while_79095 = loop_cond_70305;
            l_idx_79096 = init_idx_79071;
            r_idx_79097 = init_idx_79071;
            span_79098 = (int64_t) 1;
            while (loop_while_79095) {
                int64_t max_arg_79099 = sub64(l_idx_79096, (int64_t) 1);
                int64_t max_res_79100 = smax64((int64_t) 0, max_arg_79099);
                int64_t min_arg_79101 = add64((int64_t) 1, r_idx_79097);
                int64_t min_res_79102 = smin64(min_arg_70968, min_arg_79101);
                bool x_79103 = sle64((int64_t) 0, max_res_79100);
                bool y_79104 = slt64(max_res_79100, n_70280);
                bool bounds_check_79105 = x_79103 && y_79104;
                bool index_certs_79106;
                
                if (!bounds_check_79105) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_79100,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t x_79107 = ((int64_t *) mem_75829)[max_res_79100];
                int64_t abs_arg_79108 = sub64(x_79107, defunc_0_g_res_79069);
                int64_t abs_res_79109 = abs64(abs_arg_79108);
                bool x_79110 = sle64((int64_t) 0, min_res_79102);
                bool y_79111 = slt64(min_res_79102, n_70280);
                bool bounds_check_79112 = x_79110 && y_79111;
                bool index_certs_79113;
                
                if (!bounds_check_79112) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_79102,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t x_79114 = ((int64_t *) mem_75829)[min_res_79102];
                int64_t abs_arg_79115 = sub64(x_79114, defunc_0_g_res_79069);
                int64_t abs_res_79116 = abs64(abs_arg_79115);
                bool cond_79117 = max_res_79100 == l_idx_79096;
                int64_t loopres_79118;
                int64_t loopres_79119;
                int64_t loopres_79120;
                
                if (cond_79117) {
                    loopres_79118 = l_idx_79096;
                    loopres_79119 = r_idx_79097;
                    loopres_79120 = min_res_70300;
                } else {
                    bool cond_79121 = slt64(abs_res_79109, abs_res_79116);
                    bool cond_f_res_79122 = min_res_79102 == r_idx_79097;
                    bool x_79123 = !cond_79121;
                    bool y_79124 = cond_f_res_79122 && x_79123;
                    bool cond_79125 = cond_79121 || y_79124;
                    int64_t loopres_f_res_79126;
                    
                    if (cond_79125) {
                        loopres_f_res_79126 = max_res_79100;
                    } else {
                        loopres_f_res_79126 = l_idx_79096;
                    }
                    
                    int64_t loopres_f_res_79127;
                    
                    if (cond_79125) {
                        loopres_f_res_79127 = r_idx_79097;
                    } else {
                        loopres_f_res_79127 = min_res_79102;
                    }
                    
                    int64_t loopres_f_res_79128;
                    
                    if (cond_79125) {
                        int64_t loopres_f_res_t_res_79129 = add64((int64_t) 1,
                                                                  span_79098);
                        
                        loopres_f_res_79128 = loopres_f_res_t_res_79129;
                    } else {
                        int64_t loopres_f_res_f_res_79130 = add64((int64_t) 1,
                                                                  span_79098);
                        
                        loopres_f_res_79128 = loopres_f_res_f_res_79130;
                    }
                    loopres_79118 = loopres_f_res_79126;
                    loopres_79119 = loopres_f_res_79127;
                    loopres_79120 = loopres_f_res_79128;
                }
                
                bool loop_cond_79131 = slt64(loopres_79120, min_res_70300);
                bool loop_while_tmp_79204 = loop_cond_79131;
                int64_t l_idx_tmp_79205 = loopres_79118;
                int64_t r_idx_tmp_79206 = loopres_79119;
                int64_t span_tmp_79207 = loopres_79120;
                
                loop_while_79095 = loop_while_tmp_79204;
                l_idx_79096 = l_idx_tmp_79205;
                r_idx_79097 = r_idx_tmp_79206;
                span_79098 = span_tmp_79207;
            }
            idx_79091 = loop_while_79095;
            idx_79092 = l_idx_79096;
            idx_79093 = r_idx_79097;
            idx_79094 = span_79098;
            
            int64_t min_res_79132 = smin64(min_arg_70969, idx_79092);
            int64_t max_res_79133 = smax64((int64_t) 0, min_res_79132);
            int64_t x_79134 = add64(min_res_70970, max_res_79133);
            int64_t r_79135 = sub64(x_79134, (int64_t) 1);
            bool x_79136 = sle64((int64_t) 0, r_79135);
            bool y_79137 = slt64(r_79135, n_70280);
            bool bounds_check_79138 = x_79136 && y_79137;
            bool index_certs_79139;
            
            if (!bounds_check_79138) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_79135,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_79140 = ((int64_t *) mem_75802)[r_79135];
            int64_t abs_arg_79141 = sub64(x_79140, min_res_79068);
            int64_t abs_res_79142 = abs64(abs_arg_79141);
            bool x_79143 = sle64((int64_t) 0, max_res_79133);
            bool y_79144 = slt64(max_res_79133, n_70280);
            bool bounds_check_79145 = x_79143 && y_79144;
            bool index_certs_79146;
            
            if (!bounds_check_79145) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_79133,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_79147 = ((int64_t *) mem_75802)[max_res_79133];
            int64_t abs_arg_79148 = sub64(x_79147, min_res_79068);
            int64_t abs_res_79149 = abs64(abs_arg_79148);
            int64_t max_res_79150 = smax64(abs_res_79142, abs_res_79149);
            float defunc_0_f_res_79151 = sitofp_i64_f32(max_res_79150);
            float defunc_1_f_res_79152 = max_res_70974 + defunc_0_f_res_79151;
            float defunc_2_reduce_res_79154;
            float redout_79157 = 0.0F;
            
            for (int64_t i_79156 = 0; i_79156 < q_70282; i_79156++) {
                float x_79159 = ((float *) mem_75844)[i_79156];
                bool cond_79160 = sle64(last_res_70953, i_79156);
                int64_t defunc_0_f_res_79161;
                
                if (cond_79160) {
                    defunc_0_f_res_79161 = (int64_t) 0;
                } else {
                    int64_t i_79162 = add64(max_res_79133, i_79156);
                    int64_t defunc_0_add_arg_79163 =
                            ((int64_t *) mem_75802)[i_79162];
                    int64_t defunc_1_add_res_79164 = add64((int64_t) 1,
                                                           defunc_0_add_arg_79163);
                    
                    defunc_0_f_res_79161 = defunc_1_add_res_79164;
                }
                
                int64_t binop_p_79165 = sub64(defunc_0_f_res_79161,
                                              min_res_79068);
                float defunc_0_f_res_79166 = sitofp_i64_f32(binop_p_79165);
                float abs_res_79167 = (float) fabs(defunc_0_f_res_79166);
                float tmp1_79168 = abs_res_79167 / defunc_1_f_res_79152;
                float x_79169 = tmp1_79168 * tmp1_79168;
                float y_79170 = tmp1_79168 * x_79169;
                float tmp2_79171 = 1.0F - y_79170;
                float x_79172 = tmp2_79171 * tmp2_79171;
                float tmp3_79173 = tmp2_79171 * x_79172;
                float tmp4_79174 = x_79159 * tmp3_79173;
                float defunc_1_op_res_79175 = tmp4_79174 + redout_79157;
                
                ((float *) mem_75869)[i_79156] = tmp4_79174;
                
                float redout_tmp_79208 = defunc_1_op_res_79175;
                
                redout_79157 = redout_tmp_79208;
            }
            defunc_2_reduce_res_79154 = redout_79157;
            
            float a0_79177 = 1.0F / defunc_2_reduce_res_79154;
            float defunc_2_reduce_res_79178;
            float redout_79180 = 0.0F;
            
            for (int64_t i_79179 = 0; i_79179 < q_70282; i_79179++) {
                float x_79181 = ((float *) mem_75869)[i_79179];
                bool cond_79182 = sle64(last_res_70953, i_79179);
                float defunc_0_f_res_79183;
                
                if (cond_79182) {
                    defunc_0_f_res_79183 = 0.0F;
                } else {
                    int64_t i_79184 = add64(max_res_79133, i_79179);
                    float defunc_0_add_arg_79185 =
                          ((float *) mem_75799)[i_79184];
                    
                    defunc_0_f_res_79183 = defunc_0_add_arg_79185;
                }
                
                float x_79186 = a0_79177 * x_79181;
                float defunc_9_fit_fun_res_79187 = defunc_0_f_res_79183 *
                      x_79186;
                float defunc_1_op_res_79188 = defunc_9_fit_fun_res_79187 +
                      redout_79180;
                float redout_tmp_79210 = defunc_1_op_res_79188;
                
                redout_79180 = redout_tmp_79210;
            }
            defunc_2_reduce_res_79178 = redout_79180;
            ((float *) mem_75859)[i_79065] = defunc_2_reduce_res_79178;
        }
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_75890.mem + gtid_73278 * n_m_70288 * (int64_t) 4,
                    mem_75859 + (int64_t) 0, n_m_70288 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75784);
    free(mem_75799);
    free(mem_75802);
    free(mem_75829);
    free(mem_75844);
    free(mem_75859);
    free(mem_75869);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81861_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81861_end -
                 futhark_mc_segmap_parloop_81861_start;
        
        ctx->futhark_mc_segmap_parloop_81861_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81861_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81861_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81859(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73277 = tid;
    int num_tasks_79032 = info.nsubtasks;
    struct futhark_mc_task_81858 *futhark_mc_task_81858 =
                                 (struct futhark_mc_task_81858 *) args;
    struct futhark_context *ctx = futhark_mc_task_81858->ctx;
    uint64_t futhark_mc_segmap_task_81859_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81859_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_task_81858->free_m_70279;
    int64_t n_70280 = futhark_mc_task_81858->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81858->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81858->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81858->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81858->free_i_70294;
    bool x_70295 = futhark_mc_task_81858->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81858->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81858->free_loop_cond_70305;
    float i64_res_70306 = futhark_mc_task_81858->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81858->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75747 = futhark_mc_task_81858->free_bytes_75747;
    int64_t bytes_75750 = futhark_mc_task_81858->free_bytes_75750;
    int64_t bytes_75759 = futhark_mc_task_81858->free_bytes_75759;
    int64_t bytes_75780 = futhark_mc_task_81858->free_bytes_75780;
    struct memblock mem_75890 = {.desc ="mem_75890", .mem =
                                 futhark_mc_task_81858->free_mem_75890, .size =
                                 0, .references =NULL};
    int64_t iter_79033;
    struct futhark_mc_segmap_parloop_struct_81860
    futhark_mc_segmap_parloop_struct_81860;
    
    futhark_mc_segmap_parloop_struct_81860.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81860.free_m_70279 = m_70279;
    futhark_mc_segmap_parloop_struct_81860.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81860.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81860.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81860.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81860.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81860.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81860.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81860.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81860.free_i64_res_70306 = i64_res_70306;
    futhark_mc_segmap_parloop_struct_81860.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81860.free_bytes_75747 = bytes_75747;
    futhark_mc_segmap_parloop_struct_81860.free_bytes_75750 = bytes_75750;
    futhark_mc_segmap_parloop_struct_81860.free_bytes_75759 = bytes_75759;
    futhark_mc_segmap_parloop_struct_81860.free_bytes_75780 = bytes_75780;
    futhark_mc_segmap_parloop_struct_81860.free_mem_75890 = mem_75890.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81861_task;
    
    futhark_mc_segmap_parloop_81861_task.name =
        "futhark_mc_segmap_parloop_81861";
    futhark_mc_segmap_parloop_81861_task.fn = futhark_mc_segmap_parloop_81861;
    futhark_mc_segmap_parloop_81861_task.args =
        &futhark_mc_segmap_parloop_struct_81860;
    futhark_mc_segmap_parloop_81861_task.iterations = iterations;
    futhark_mc_segmap_parloop_81861_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81861_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81861_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81861_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81861_task);
    
    if (futhark_mc_segmap_parloop_81861_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81861_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81861_total_end -
                 futhark_mc_segmap_parloop_81861_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81861_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81861_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81861_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81859_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81859_end -
                 futhark_mc_segmap_task_81859_start;
        
        ctx->futhark_mc_segmap_task_81859_runs[tid]++;
        ctx->futhark_mc_segmap_task_81859_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81859_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81870 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75747;
    int64_t free_bytes_75750;
    int64_t free_bytes_75759;
    int64_t free_bytes_75780;
    unsigned char *free_mem_75890;
};
struct futhark_mc_task_81878 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_73280;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75748;
};
struct futhark_mc_scan_stage_1_parloop_struct_81881 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_73280;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75748;
};
static int futhark_mc_scan_stage_1_parloop_81882(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_73281, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_81881
    *futhark_mc_scan_stage_1_parloop_struct_81881 =
    (struct futhark_mc_scan_stage_1_parloop_struct_81881 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_81881->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_81882_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81882_start = get_wall_time();
    
    int64_t n_70280 =
            futhark_mc_scan_stage_1_parloop_struct_81881->free_n_70280;
    int64_t gtid_73280 =
            futhark_mc_scan_stage_1_parloop_struct_81881->free_gtid_73280;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_81881->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75748 = {.desc ="mem_75748", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_81881->free_mem_75748,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79475 = start;
    int64_t x_79212;
    int64_t x_79213;
    
    x_79212 = (int64_t) 0;
    for (; iter_79475 < end; iter_79475++) {
        int64_t gtid_73282 = iter_79475;
        
        // stage 1 scan body
        {
            float x_79215 = ((float *) Y_mem_75353.mem)[gtid_73280 * n_70280 +
                                                        gtid_73282];
            bool isnan_res_79216;
            
            isnan_res_79216 = futrts_isnan32(x_79215);
            
            bool defunc_0_p_res_79217 = !isnan_res_79216;
            int64_t defunc_0_f_res_79218 = btoi_bool_i64(defunc_0_p_res_79217);
            
            // write mapped values results to memory
            { }
            x_79212 = x_79212;
            // Read next values
            {
                x_79213 = defunc_0_f_res_79218;
            }
            
            int64_t defunc_1_op_res_79214 = add64(x_79212, x_79213);
            
            ((int64_t *) mem_75748.mem)[gtid_73282] = defunc_1_op_res_79214;
            x_79212 = defunc_1_op_res_79214;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81882_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81882_end -
                 futhark_mc_scan_stage_1_parloop_81882_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_81882_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_81882_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_81882_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_81883 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_73280;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75748;
};
static int futhark_mc_scan_stage_3_parloop_81884(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_73281, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_81883
    *futhark_mc_scan_stage_3_parloop_struct_81883 =
    (struct futhark_mc_scan_stage_3_parloop_struct_81883 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_81883->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_81884_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_81884_start = get_wall_time();
    
    int64_t n_70280 =
            futhark_mc_scan_stage_3_parloop_struct_81883->free_n_70280;
    int64_t gtid_73280 =
            futhark_mc_scan_stage_3_parloop_struct_81883->free_gtid_73280;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_81883->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75748 = {.desc ="mem_75748", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_81883->free_mem_75748,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79487 = start;
    int64_t x_79484;
    int64_t x_79485;
    
    if (iter_79487 == (int64_t) 0) {
        x_79484 = (int64_t) 0;
    } else {
        x_79484 = ((int64_t *) mem_75748.mem)[iter_79487 - (int64_t) 1];
    }
    for (; iter_79487 < end; iter_79487++) {
        int64_t gtid_73282 = iter_79487;
        
        // stage 3 scan body
        {
            float x_79215 = ((float *) Y_mem_75353.mem)[gtid_73280 * n_70280 +
                                                        gtid_73282];
            bool isnan_res_79216;
            
            isnan_res_79216 = futrts_isnan32(x_79215);
            
            bool defunc_0_p_res_79217 = !isnan_res_79216;
            int64_t defunc_0_f_res_79218 = btoi_bool_i64(defunc_0_p_res_79217);
            
            x_79484 = x_79484;
            x_79485 = defunc_0_f_res_79218;
            
            int64_t defunc_1_op_res_79486 = add64(x_79484, x_79485);
            
            ((int64_t *) mem_75748.mem)[gtid_73282] = defunc_1_op_res_79486;
            x_79484 = defunc_1_op_res_79486;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_81884_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81884_end -
                 futhark_mc_scan_stage_3_parloop_81884_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_81884_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_81884_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_81884_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_81879(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73281 = tid;
    int num_tasks_79474 = info.nsubtasks;
    struct futhark_mc_task_81878 *futhark_mc_task_81878 =
                                 (struct futhark_mc_task_81878 *) args;
    struct futhark_context *ctx = futhark_mc_task_81878->ctx;
    uint64_t futhark_mc_segscan_task_81879_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_81879_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81878->free_n_70280;
    int64_t gtid_73280 = futhark_mc_task_81878->free_gtid_73280;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81878->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75748 = {.desc ="mem_75748", .mem =
                                 futhark_mc_task_81878->free_mem_75748, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_79481_cached_sizze_81880 = 0;
    unsigned char *scan_stage_2_accum_mem_79481 = NULL;
    int64_t iter_79475;
    struct futhark_mc_scan_stage_1_parloop_struct_81881
    futhark_mc_scan_stage_1_parloop_struct_81881;
    
    futhark_mc_scan_stage_1_parloop_struct_81881.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_81881.free_n_70280 = n_70280;
    futhark_mc_scan_stage_1_parloop_struct_81881.free_gtid_73280 = gtid_73280;
    futhark_mc_scan_stage_1_parloop_struct_81881.free_Y_mem_75353 =
        Y_mem_75353.mem;
    futhark_mc_scan_stage_1_parloop_struct_81881.free_mem_75748 = mem_75748.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_81882_task;
    
    futhark_mc_scan_stage_1_parloop_81882_task.name =
        "futhark_mc_scan_stage_1_parloop_81882";
    futhark_mc_scan_stage_1_parloop_81882_task.fn =
        futhark_mc_scan_stage_1_parloop_81882;
    futhark_mc_scan_stage_1_parloop_81882_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_81881;
    futhark_mc_scan_stage_1_parloop_81882_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_81882_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_81882_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81882_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_81882_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_81882_task);
    
    if (futhark_mc_scan_stage_1_parloop_81882_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81882_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81882_total_end -
                 futhark_mc_scan_stage_1_parloop_81882_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81882_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81882_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81882_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_79474)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_79476;
        int64_t x_79477;
        int64_t offset_79479 = (int64_t) 0;
        int64_t offset_index_79480 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_79481_cached_sizze_81880 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_79481 = realloc(scan_stage_2_accum_mem_79481,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_79481_cached_sizze_81880 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_79481)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_79483 = 0; i_79483 < num_tasks_79474 - 1; i_79483++) {
            offset_79479 = squot64(n_70280, sext_i32_i64(num_tasks_79474));
            if (slt64(sext_i32_i64(i_79483), srem64(n_70280,
                                                    sext_i32_i64(num_tasks_79474)))) {
                offset_79479 += (int64_t) 1;
            }
            offset_index_79480 += offset_79479;
            
            int64_t gtid_73282 = offset_index_79480;
            float x_79215 = ((float *) Y_mem_75353.mem)[gtid_73280 * n_70280 +
                                                        gtid_73282];
            bool isnan_res_79216;
            
            isnan_res_79216 = futrts_isnan32(x_79215);
            
            bool defunc_0_p_res_79217 = !isnan_res_79216;
            int64_t defunc_0_f_res_79218 = btoi_bool_i64(defunc_0_p_res_79217);
            
            // Read carry in
            {
                x_79476 =
                    ((int64_t *) scan_stage_2_accum_mem_79481)[(int64_t) 0];
            }
            // Read next values
            {
                x_79477 = ((int64_t *) mem_75748.mem)[offset_index_79480 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_79478 = add64(x_79476, x_79477);
            
            ((int64_t *) mem_75748.mem)[offset_index_79480 - (int64_t) 1] =
                defunc_1_op_res_79478;
            ((int64_t *) scan_stage_2_accum_mem_79481)[(int64_t) 0] =
                defunc_1_op_res_79478;
        }
        
        int64_t iter_79487 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_81883
        futhark_mc_scan_stage_3_parloop_struct_81883;
        
        futhark_mc_scan_stage_3_parloop_struct_81883.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_81883.free_n_70280 = n_70280;
        futhark_mc_scan_stage_3_parloop_struct_81883.free_gtid_73280 =
            gtid_73280;
        futhark_mc_scan_stage_3_parloop_struct_81883.free_Y_mem_75353 =
            Y_mem_75353.mem;
        futhark_mc_scan_stage_3_parloop_struct_81883.free_mem_75748 =
            mem_75748.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_81884_task;
        
        futhark_mc_scan_stage_3_parloop_81884_task.name =
            "futhark_mc_scan_stage_3_parloop_81884";
        futhark_mc_scan_stage_3_parloop_81884_task.fn =
            futhark_mc_scan_stage_3_parloop_81884;
        futhark_mc_scan_stage_3_parloop_81884_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_81883;
        futhark_mc_scan_stage_3_parloop_81884_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_81884_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_81884_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_81884_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_81884_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_81884_task);
        
        if (futhark_mc_scan_stage_3_parloop_81884_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_81884_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81884_total_end -
                     futhark_mc_scan_stage_3_parloop_81884_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81884_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81884_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81884_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_79481);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_81879_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_81879_end -
                 futhark_mc_segscan_task_81879_start;
        
        ctx->futhark_mc_segscan_task_81879_runs[tid]++;
        ctx->futhark_mc_segscan_task_81879_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_81879_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81885 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_73280;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75748;
    unsigned char *free_mem_75751;
    unsigned char *free_mem_75754;
};
struct futhark_mc_segmap_parloop_struct_81887 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_73280;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75748;
    unsigned char *free_mem_75751;
    unsigned char *free_mem_75754;
};
static int futhark_mc_segmap_parloop_81888(void *args, int64_t start,
                                           int64_t end, int flat_tid_73283,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81887
    *futhark_mc_segmap_parloop_struct_81887 =
    (struct futhark_mc_segmap_parloop_struct_81887 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81887->ctx;
    uint64_t futhark_mc_segmap_parloop_81888_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81888_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81887->free_n_70280;
    int64_t gtid_73280 =
            futhark_mc_segmap_parloop_struct_81887->free_gtid_73280;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81887->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75748 = {.desc ="mem_75748", .mem =
                                 futhark_mc_segmap_parloop_struct_81887->free_mem_75748,
                                 .size =0, .references =NULL};
    struct memblock mem_75751 = {.desc ="mem_75751", .mem =
                                 futhark_mc_segmap_parloop_struct_81887->free_mem_75751,
                                 .size =0, .references =NULL};
    struct memblock mem_75754 = {.desc ="mem_75754", .mem =
                                 futhark_mc_segmap_parloop_struct_81887->free_mem_75754,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79491 = start;
    
    for (; iter_79491 < end; iter_79491++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79494 = n_70280;
        int64_t gtid_73284 = iter_79491;
        int64_t remnant_79495 = iter_79491 - gtid_73284;
        float x_79219 = ((float *) Y_mem_75353.mem)[gtid_73280 * n_70280 +
                                                    gtid_73284];
        bool isnan_res_79220;
        
        isnan_res_79220 = futrts_isnan32(x_79219);
        
        bool defunc_0_p_res_79221 = !isnan_res_79220;
        int64_t defunc_1_f_res_79222;
        
        if (defunc_0_p_res_79221) {
            int64_t x_79492 = ((int64_t *) mem_75748.mem)[gtid_73284];
            int64_t defunc_1_f_res_t_res_79493 = sub64(x_79492, (int64_t) 1);
            
            defunc_1_f_res_79222 = defunc_1_f_res_t_res_79493;
        } else {
            defunc_1_f_res_79222 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_79222) &&
            slt64(defunc_1_f_res_79222, n_70280)) {
            ((int64_t *) mem_75754.mem)[defunc_1_f_res_79222] = gtid_73284;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_79222) &&
            slt64(defunc_1_f_res_79222, n_70280)) {
            ((float *) mem_75751.mem)[defunc_1_f_res_79222] = x_79219;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81888_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81888_end -
                 futhark_mc_segmap_parloop_81888_start;
        
        ctx->futhark_mc_segmap_parloop_81888_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81888_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81888_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81886(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73283 = tid;
    int num_tasks_79490 = info.nsubtasks;
    struct futhark_mc_task_81885 *futhark_mc_task_81885 =
                                 (struct futhark_mc_task_81885 *) args;
    struct futhark_context *ctx = futhark_mc_task_81885->ctx;
    uint64_t futhark_mc_segmap_task_81886_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81886_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81885->free_n_70280;
    int64_t gtid_73280 = futhark_mc_task_81885->free_gtid_73280;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81885->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75748 = {.desc ="mem_75748", .mem =
                                 futhark_mc_task_81885->free_mem_75748, .size =
                                 0, .references =NULL};
    struct memblock mem_75751 = {.desc ="mem_75751", .mem =
                                 futhark_mc_task_81885->free_mem_75751, .size =
                                 0, .references =NULL};
    struct memblock mem_75754 = {.desc ="mem_75754", .mem =
                                 futhark_mc_task_81885->free_mem_75754, .size =
                                 0, .references =NULL};
    int64_t iter_79491;
    struct futhark_mc_segmap_parloop_struct_81887
    futhark_mc_segmap_parloop_struct_81887;
    
    futhark_mc_segmap_parloop_struct_81887.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81887.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81887.free_gtid_73280 = gtid_73280;
    futhark_mc_segmap_parloop_struct_81887.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81887.free_mem_75748 = mem_75748.mem;
    futhark_mc_segmap_parloop_struct_81887.free_mem_75751 = mem_75751.mem;
    futhark_mc_segmap_parloop_struct_81887.free_mem_75754 = mem_75754.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81888_task;
    
    futhark_mc_segmap_parloop_81888_task.name =
        "futhark_mc_segmap_parloop_81888";
    futhark_mc_segmap_parloop_81888_task.fn = futhark_mc_segmap_parloop_81888;
    futhark_mc_segmap_parloop_81888_task.args =
        &futhark_mc_segmap_parloop_struct_81887;
    futhark_mc_segmap_parloop_81888_task.iterations = iterations;
    futhark_mc_segmap_parloop_81888_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81888_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81888_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81888_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81888_task);
    
    if (futhark_mc_segmap_parloop_81888_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81888_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81888_total_end -
                 futhark_mc_segmap_parloop_81888_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81888_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81888_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81888_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81886_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81886_end -
                 futhark_mc_segmap_task_81886_start;
        
        ctx->futhark_mc_segmap_task_81886_runs[tid]++;
        ctx->futhark_mc_segmap_task_81886_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81886_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81889 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    unsigned char *free_mem_75754;
    unsigned char *free_mem_75757;
};
struct futhark_mc_segmap_parloop_struct_81891 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    unsigned char *free_mem_75754;
    unsigned char *free_mem_75757;
};
static int futhark_mc_segmap_parloop_81892(void *args, int64_t start,
                                           int64_t end, int flat_tid_73285,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81891
    *futhark_mc_segmap_parloop_struct_81891 =
    (struct futhark_mc_segmap_parloop_struct_81891 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81891->ctx;
    uint64_t futhark_mc_segmap_parloop_81892_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81892_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81891->free_n_70280;
    struct memblock mem_75754 = {.desc ="mem_75754", .mem =
                                 futhark_mc_segmap_parloop_struct_81891->free_mem_75754,
                                 .size =0, .references =NULL};
    struct memblock mem_75757 = {.desc ="mem_75757", .mem =
                                 futhark_mc_segmap_parloop_struct_81891->free_mem_75757,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79497 = start;
    
    for (; iter_79497 < end; iter_79497++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79498 = n_70280;
        int64_t gtid_73286 = iter_79497;
        int64_t remnant_79499 = iter_79497 - gtid_73286;
        int64_t x_79225 = ((int64_t *) mem_75754.mem)[gtid_73286];
        int64_t defunc_0_f_res_79226 = add64((int64_t) 1, x_79225);
        
        ((int64_t *) mem_75757.mem)[gtid_73286] = defunc_0_f_res_79226;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81892_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81892_end -
                 futhark_mc_segmap_parloop_81892_start;
        
        ctx->futhark_mc_segmap_parloop_81892_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81892_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81892_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81890(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73285 = tid;
    int num_tasks_79496 = info.nsubtasks;
    struct futhark_mc_task_81889 *futhark_mc_task_81889 =
                                 (struct futhark_mc_task_81889 *) args;
    struct futhark_context *ctx = futhark_mc_task_81889->ctx;
    uint64_t futhark_mc_segmap_task_81890_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81890_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81889->free_n_70280;
    struct memblock mem_75754 = {.desc ="mem_75754", .mem =
                                 futhark_mc_task_81889->free_mem_75754, .size =
                                 0, .references =NULL};
    struct memblock mem_75757 = {.desc ="mem_75757", .mem =
                                 futhark_mc_task_81889->free_mem_75757, .size =
                                 0, .references =NULL};
    int64_t iter_79497;
    struct futhark_mc_segmap_parloop_struct_81891
    futhark_mc_segmap_parloop_struct_81891;
    
    futhark_mc_segmap_parloop_struct_81891.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81891.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81891.free_mem_75754 = mem_75754.mem;
    futhark_mc_segmap_parloop_struct_81891.free_mem_75757 = mem_75757.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81892_task;
    
    futhark_mc_segmap_parloop_81892_task.name =
        "futhark_mc_segmap_parloop_81892";
    futhark_mc_segmap_parloop_81892_task.fn = futhark_mc_segmap_parloop_81892;
    futhark_mc_segmap_parloop_81892_task.args =
        &futhark_mc_segmap_parloop_struct_81891;
    futhark_mc_segmap_parloop_81892_task.iterations = iterations;
    futhark_mc_segmap_parloop_81892_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81892_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81892_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81892_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81892_task);
    
    if (futhark_mc_segmap_parloop_81892_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81892_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81892_total_end -
                 futhark_mc_segmap_parloop_81892_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81892_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81892_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81892_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81890_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81890_end -
                 futhark_mc_segmap_task_81890_start;
        
        ctx->futhark_mc_segmap_task_81890_runs[tid]++;
        ctx->futhark_mc_segmap_task_81890_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81890_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81893 {
    struct futhark_context *ctx;
    int64_t free_q_70282;
    int64_t free_last_res_73428;
    unsigned char *free_mem_75760;
};
struct futhark_mc_segmap_parloop_struct_81895 {
    struct futhark_context *ctx;
    int64_t free_q_70282;
    int64_t free_last_res_73428;
    unsigned char *free_mem_75760;
};
static int futhark_mc_segmap_parloop_81896(void *args, int64_t start,
                                           int64_t end, int flat_tid_73287,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81895
    *futhark_mc_segmap_parloop_struct_81895 =
    (struct futhark_mc_segmap_parloop_struct_81895 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81895->ctx;
    uint64_t futhark_mc_segmap_parloop_81896_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81896_start = get_wall_time();
    
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81895->free_q_70282;
    int64_t last_res_73428 =
            futhark_mc_segmap_parloop_struct_81895->free_last_res_73428;
    struct memblock mem_75760 = {.desc ="mem_75760", .mem =
                                 futhark_mc_segmap_parloop_struct_81895->free_mem_75760,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79501 = start;
    
    for (; iter_79501 < end; iter_79501++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79502 = q_70282;
        int64_t gtid_73288 = iter_79501;
        int64_t remnant_79503 = iter_79501 - gtid_73288;
        bool cond_79227 = sle64(last_res_73428, gtid_73288);
        float defunc_0_f_res_79228;
        
        if (cond_79227) {
            defunc_0_f_res_79228 = 0.0F;
        } else {
            defunc_0_f_res_79228 = 1.0F;
        }
        ((float *) mem_75760.mem)[gtid_73288] = defunc_0_f_res_79228;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81896_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81896_end -
                 futhark_mc_segmap_parloop_81896_start;
        
        ctx->futhark_mc_segmap_parloop_81896_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81896_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81896_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81894(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73287 = tid;
    int num_tasks_79500 = info.nsubtasks;
    struct futhark_mc_task_81893 *futhark_mc_task_81893 =
                                 (struct futhark_mc_task_81893 *) args;
    struct futhark_context *ctx = futhark_mc_task_81893->ctx;
    uint64_t futhark_mc_segmap_task_81894_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81894_start = get_wall_time();
    
    int64_t q_70282 = futhark_mc_task_81893->free_q_70282;
    int64_t last_res_73428 = futhark_mc_task_81893->free_last_res_73428;
    struct memblock mem_75760 = {.desc ="mem_75760", .mem =
                                 futhark_mc_task_81893->free_mem_75760, .size =
                                 0, .references =NULL};
    int64_t iter_79501;
    struct futhark_mc_segmap_parloop_struct_81895
    futhark_mc_segmap_parloop_struct_81895;
    
    futhark_mc_segmap_parloop_struct_81895.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81895.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81895.free_last_res_73428 = last_res_73428;
    futhark_mc_segmap_parloop_struct_81895.free_mem_75760 = mem_75760.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81896_task;
    
    futhark_mc_segmap_parloop_81896_task.name =
        "futhark_mc_segmap_parloop_81896";
    futhark_mc_segmap_parloop_81896_task.fn = futhark_mc_segmap_parloop_81896;
    futhark_mc_segmap_parloop_81896_task.args =
        &futhark_mc_segmap_parloop_struct_81895;
    futhark_mc_segmap_parloop_81896_task.iterations = iterations;
    futhark_mc_segmap_parloop_81896_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81896_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81896_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81896_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81896_task);
    
    if (futhark_mc_segmap_parloop_81896_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81896_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81896_total_end -
                 futhark_mc_segmap_parloop_81896_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81896_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81896_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81896_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81894_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81894_end -
                 futhark_mc_segmap_task_81894_start;
        
        ctx->futhark_mc_segmap_task_81894_runs[tid]++;
        ctx->futhark_mc_segmap_task_81894_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81894_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81897 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_73428;
    int64_t free_min_arg_73443;
    int64_t free_min_arg_73444;
    int64_t free_min_res_73445;
    float free_max_res_73449;
    unsigned char *free_mem_75751;
    unsigned char *free_mem_75754;
    unsigned char *free_mem_75757;
    int64_t free_bytes_75759;
    unsigned char *free_mem_75760;
    unsigned char *free_mem_75781;
};
struct futhark_mc_segmap_parloop_struct_81899 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_73428;
    int64_t free_min_arg_73443;
    int64_t free_min_arg_73444;
    int64_t free_min_res_73445;
    float free_max_res_73449;
    unsigned char *free_mem_75751;
    unsigned char *free_mem_75754;
    unsigned char *free_mem_75757;
    int64_t free_bytes_75759;
    unsigned char *free_mem_75760;
    unsigned char *free_mem_75781;
};
static int futhark_mc_segmap_parloop_81900(void *args, int64_t start,
                                           int64_t end, int flat_tid_73289,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81899
    *futhark_mc_segmap_parloop_struct_81899 =
    (struct futhark_mc_segmap_parloop_struct_81899 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81899->ctx;
    uint64_t futhark_mc_segmap_parloop_81900_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81900_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81899->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81899->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81899->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81899->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81899->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81899->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81899->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81899->free_loop_cond_70305;
    int64_t last_res_73428 =
            futhark_mc_segmap_parloop_struct_81899->free_last_res_73428;
    int64_t min_arg_73443 =
            futhark_mc_segmap_parloop_struct_81899->free_min_arg_73443;
    int64_t min_arg_73444 =
            futhark_mc_segmap_parloop_struct_81899->free_min_arg_73444;
    int64_t min_res_73445 =
            futhark_mc_segmap_parloop_struct_81899->free_min_res_73445;
    float max_res_73449 =
          futhark_mc_segmap_parloop_struct_81899->free_max_res_73449;
    struct memblock mem_75751 = {.desc ="mem_75751", .mem =
                                 futhark_mc_segmap_parloop_struct_81899->free_mem_75751,
                                 .size =0, .references =NULL};
    struct memblock mem_75754 = {.desc ="mem_75754", .mem =
                                 futhark_mc_segmap_parloop_struct_81899->free_mem_75754,
                                 .size =0, .references =NULL};
    struct memblock mem_75757 = {.desc ="mem_75757", .mem =
                                 futhark_mc_segmap_parloop_struct_81899->free_mem_75757,
                                 .size =0, .references =NULL};
    int64_t bytes_75759 =
            futhark_mc_segmap_parloop_struct_81899->free_bytes_75759;
    struct memblock mem_75760 = {.desc ="mem_75760", .mem =
                                 futhark_mc_segmap_parloop_struct_81899->free_mem_75760,
                                 .size =0, .references =NULL};
    struct memblock mem_75781 = {.desc ="mem_75781", .mem =
                                 futhark_mc_segmap_parloop_struct_81899->free_mem_75781,
                                 .size =0, .references =NULL};
    size_t mem_79435_cached_sizze_81901 = 0;
    unsigned char *mem_79435 = NULL;
    int64_t iterations = end - start;
    int64_t iter_79505 = start;
    
    if (mem_79435_cached_sizze_81901 < (size_t) bytes_75759) {
        mem_79435 = realloc(mem_79435, bytes_75759);
        mem_79435_cached_sizze_81901 = bytes_75759;
    }
    for (; iter_79505 < end; iter_79505++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79592 = n_m_70288;
        int64_t gtid_73290 = iter_79505;
        int64_t remnant_79593 = iter_79505 - gtid_73290;
        int64_t min_arg_79349 = mul64(jump_70284, gtid_73290);
        int64_t min_res_79350 = smin64(i_70294, min_arg_79349);
        int64_t defunc_0_g_res_79351 = add64((int64_t) 1, min_res_79350);
        bool init_idx_79352;
        int64_t init_idx_79353;
        int64_t init_idx_79354;
        bool loop_while_79506;
        int64_t low_79507;
        int64_t high_79508;
        
        loop_while_79506 = x_70295;
        low_79507 = (int64_t) 0;
        high_79508 = i_70294;
        while (loop_while_79506) {
            int64_t x_79509 = add64(low_79507, high_79508);
            int64_t mid_79510 = sdiv64(x_79509, (int64_t) 2);
            bool x_79511 = sle64((int64_t) 0, mid_79510);
            bool y_79512 = slt64(mid_79510, n_70280);
            bool bounds_check_79513 = x_79511 && y_79512;
            bool index_certs_79514;
            
            if (!bounds_check_79513) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_79510,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t mid_id_79515 = ((int64_t *) mem_75757.mem)[mid_79510];
            bool cond_79516 = slt64(mid_id_79515, (int64_t) 0);
            int64_t mid_idx_79517;
            
            if (cond_79516) {
                mid_idx_79517 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_79517 = mid_id_79515;
            }
            
            bool cond_79518 = sle64(defunc_0_g_res_79351, mid_idx_79517);
            int64_t loopres_79519;
            int64_t loopres_79520;
            
            if (cond_79518) {
                int64_t loopres_t_res_79521 = sub64(mid_79510, (int64_t) 1);
                
                loopres_79519 = low_79507;
                loopres_79520 = loopres_t_res_79521;
            } else {
                int64_t loopres_f_res_79522 = add64((int64_t) 1, mid_79510);
                
                loopres_79519 = loopres_f_res_79522;
                loopres_79520 = high_79508;
            }
            
            bool loop_cond_79523 = sle64(loopres_79519, loopres_79520);
            bool loop_while_tmp_79594 = loop_cond_79523;
            int64_t low_tmp_79595 = loopres_79519;
            int64_t high_tmp_79596 = loopres_79520;
            
            loop_while_79506 = loop_while_tmp_79594;
            low_79507 = low_tmp_79595;
            high_79508 = high_tmp_79596;
        }
        init_idx_79352 = loop_while_79506;
        init_idx_79353 = low_79507;
        init_idx_79354 = high_79508;
        
        bool idx_79373;
        int64_t idx_79374;
        int64_t idx_79375;
        int64_t idx_79376;
        bool loop_while_79524;
        int64_t l_idx_79525;
        int64_t r_idx_79526;
        int64_t span_79527;
        
        loop_while_79524 = loop_cond_70305;
        l_idx_79525 = init_idx_79353;
        r_idx_79526 = init_idx_79353;
        span_79527 = (int64_t) 1;
        while (loop_while_79524) {
            int64_t max_arg_79528 = sub64(l_idx_79525, (int64_t) 1);
            int64_t max_res_79529 = smax64((int64_t) 0, max_arg_79528);
            int64_t min_arg_79530 = add64((int64_t) 1, r_idx_79526);
            int64_t min_res_79531 = smin64(min_arg_73443, min_arg_79530);
            bool x_79532 = sle64((int64_t) 0, max_res_79529);
            bool y_79533 = slt64(max_res_79529, n_70280);
            bool bounds_check_79534 = x_79532 && y_79533;
            bool index_certs_79535;
            
            if (!bounds_check_79534) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_79529,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_79536 = ((int64_t *) mem_75757.mem)[max_res_79529];
            int64_t abs_arg_79537 = sub64(x_79536, defunc_0_g_res_79351);
            int64_t abs_res_79538 = abs64(abs_arg_79537);
            bool x_79539 = sle64((int64_t) 0, min_res_79531);
            bool y_79540 = slt64(min_res_79531, n_70280);
            bool bounds_check_79541 = x_79539 && y_79540;
            bool index_certs_79542;
            
            if (!bounds_check_79541) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_79531,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_79543 = ((int64_t *) mem_75757.mem)[min_res_79531];
            int64_t abs_arg_79544 = sub64(x_79543, defunc_0_g_res_79351);
            int64_t abs_res_79545 = abs64(abs_arg_79544);
            bool cond_79546 = max_res_79529 == l_idx_79525;
            int64_t loopres_79547;
            int64_t loopres_79548;
            int64_t loopres_79549;
            
            if (cond_79546) {
                loopres_79547 = l_idx_79525;
                loopres_79548 = r_idx_79526;
                loopres_79549 = min_res_70300;
            } else {
                bool cond_79550 = slt64(abs_res_79538, abs_res_79545);
                bool cond_f_res_79551 = min_res_79531 == r_idx_79526;
                bool x_79552 = !cond_79550;
                bool y_79553 = cond_f_res_79551 && x_79552;
                bool cond_79554 = cond_79550 || y_79553;
                int64_t loopres_f_res_79555;
                
                if (cond_79554) {
                    loopres_f_res_79555 = max_res_79529;
                } else {
                    loopres_f_res_79555 = l_idx_79525;
                }
                
                int64_t loopres_f_res_79556;
                
                if (cond_79554) {
                    loopres_f_res_79556 = r_idx_79526;
                } else {
                    loopres_f_res_79556 = min_res_79531;
                }
                
                int64_t loopres_f_res_79557;
                
                if (cond_79554) {
                    int64_t loopres_f_res_t_res_79558 = add64((int64_t) 1,
                                                              span_79527);
                    
                    loopres_f_res_79557 = loopres_f_res_t_res_79558;
                } else {
                    int64_t loopres_f_res_f_res_79559 = add64((int64_t) 1,
                                                              span_79527);
                    
                    loopres_f_res_79557 = loopres_f_res_f_res_79559;
                }
                loopres_79547 = loopres_f_res_79555;
                loopres_79548 = loopres_f_res_79556;
                loopres_79549 = loopres_f_res_79557;
            }
            
            bool loop_cond_79560 = slt64(loopres_79549, min_res_70300);
            bool loop_while_tmp_79597 = loop_cond_79560;
            int64_t l_idx_tmp_79598 = loopres_79547;
            int64_t r_idx_tmp_79599 = loopres_79548;
            int64_t span_tmp_79600 = loopres_79549;
            
            loop_while_79524 = loop_while_tmp_79597;
            l_idx_79525 = l_idx_tmp_79598;
            r_idx_79526 = r_idx_tmp_79599;
            span_79527 = span_tmp_79600;
        }
        idx_79373 = loop_while_79524;
        idx_79374 = l_idx_79525;
        idx_79375 = r_idx_79526;
        idx_79376 = span_79527;
        
        int64_t min_res_79414 = smin64(min_arg_73444, idx_79374);
        int64_t max_res_79415 = smax64((int64_t) 0, min_res_79414);
        int64_t x_79416 = add64(min_res_73445, max_res_79415);
        int64_t r_79417 = sub64(x_79416, (int64_t) 1);
        bool x_79418 = sle64((int64_t) 0, r_79417);
        bool y_79419 = slt64(r_79417, n_70280);
        bool bounds_check_79420 = x_79418 && y_79419;
        bool index_certs_79421;
        
        if (!bounds_check_79420) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_79417,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_79422 = ((int64_t *) mem_75754.mem)[r_79417];
        int64_t abs_arg_79423 = sub64(x_79422, min_res_79350);
        int64_t abs_res_79424 = abs64(abs_arg_79423);
        bool x_79425 = sle64((int64_t) 0, max_res_79415);
        bool y_79426 = slt64(max_res_79415, n_70280);
        bool bounds_check_79427 = x_79425 && y_79426;
        bool index_certs_79428;
        
        if (!bounds_check_79427) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_79415,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_79429 = ((int64_t *) mem_75754.mem)[max_res_79415];
        int64_t abs_arg_79430 = sub64(x_79429, min_res_79350);
        int64_t abs_res_79431 = abs64(abs_arg_79430);
        int64_t max_res_79432 = smax64(abs_res_79424, abs_res_79431);
        float defunc_0_f_res_79433 = sitofp_i64_f32(max_res_79432);
        float defunc_1_f_res_79434 = max_res_73449 + defunc_0_f_res_79433;
        float defunc_2_reduce_res_79437;
        float redout_79562 = 0.0F;
        
        for (int64_t i_79561 = 0; i_79561 < q_70282; i_79561++) {
            float x_79564 = ((float *) mem_75760.mem)[i_79561];
            bool cond_79565 = sle64(last_res_73428, i_79561);
            int64_t defunc_0_f_res_79566;
            
            if (cond_79565) {
                defunc_0_f_res_79566 = (int64_t) 0;
            } else {
                int64_t i_79567 = add64(max_res_79415, i_79561);
                int64_t defunc_0_add_arg_79568 =
                        ((int64_t *) mem_75754.mem)[i_79567];
                int64_t defunc_1_add_res_79569 = add64((int64_t) 1,
                                                       defunc_0_add_arg_79568);
                
                defunc_0_f_res_79566 = defunc_1_add_res_79569;
            }
            
            int64_t binop_p_79570 = sub64(defunc_0_f_res_79566, min_res_79350);
            float defunc_0_f_res_79571 = sitofp_i64_f32(binop_p_79570);
            float abs_res_79572 = (float) fabs(defunc_0_f_res_79571);
            float tmp1_79573 = abs_res_79572 / defunc_1_f_res_79434;
            float x_79574 = tmp1_79573 * tmp1_79573;
            float y_79575 = tmp1_79573 * x_79574;
            float tmp2_79576 = 1.0F - y_79575;
            float x_79577 = tmp2_79576 * tmp2_79576;
            float tmp3_79578 = tmp2_79576 * x_79577;
            float tmp4_79579 = x_79564 * tmp3_79578;
            float defunc_1_op_res_79580 = tmp4_79579 + redout_79562;
            
            ((float *) mem_79435)[i_79561] = tmp4_79579;
            
            float redout_tmp_79601 = defunc_1_op_res_79580;
            
            redout_79562 = redout_tmp_79601;
        }
        defunc_2_reduce_res_79437 = redout_79562;
        
        float a0_79460 = 1.0F / defunc_2_reduce_res_79437;
        float defunc_2_reduce_res_79461;
        float redout_79583 = 0.0F;
        
        for (int64_t i_79582 = 0; i_79582 < q_70282; i_79582++) {
            float x_79584 = ((float *) mem_79435)[i_79582];
            bool cond_79585 = sle64(last_res_73428, i_79582);
            float defunc_0_f_res_79586;
            
            if (cond_79585) {
                defunc_0_f_res_79586 = 0.0F;
            } else {
                int64_t i_79587 = add64(max_res_79415, i_79582);
                float defunc_0_add_arg_79588 =
                      ((float *) mem_75751.mem)[i_79587];
                
                defunc_0_f_res_79586 = defunc_0_add_arg_79588;
            }
            
            float x_79589 = a0_79460 * x_79584;
            float defunc_9_fit_fun_res_79590 = defunc_0_f_res_79586 * x_79589;
            float defunc_1_op_res_79591 = defunc_9_fit_fun_res_79590 +
                  redout_79583;
            float redout_tmp_79603 = defunc_1_op_res_79591;
            
            redout_79583 = redout_tmp_79603;
        }
        defunc_2_reduce_res_79461 = redout_79583;
        ((float *) mem_75781.mem)[gtid_73290] = defunc_2_reduce_res_79461;
    }
    
  cleanup:
    { }
    free(mem_79435);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81900_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81900_end -
                 futhark_mc_segmap_parloop_81900_start;
        
        ctx->futhark_mc_segmap_parloop_81900_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81900_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81900_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81898(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73289 = tid;
    int num_tasks_79504 = info.nsubtasks;
    struct futhark_mc_task_81897 *futhark_mc_task_81897 =
                                 (struct futhark_mc_task_81897 *) args;
    struct futhark_context *ctx = futhark_mc_task_81897->ctx;
    uint64_t futhark_mc_segmap_task_81898_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81898_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81897->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81897->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81897->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81897->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81897->free_i_70294;
    bool x_70295 = futhark_mc_task_81897->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81897->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81897->free_loop_cond_70305;
    int64_t last_res_73428 = futhark_mc_task_81897->free_last_res_73428;
    int64_t min_arg_73443 = futhark_mc_task_81897->free_min_arg_73443;
    int64_t min_arg_73444 = futhark_mc_task_81897->free_min_arg_73444;
    int64_t min_res_73445 = futhark_mc_task_81897->free_min_res_73445;
    float max_res_73449 = futhark_mc_task_81897->free_max_res_73449;
    struct memblock mem_75751 = {.desc ="mem_75751", .mem =
                                 futhark_mc_task_81897->free_mem_75751, .size =
                                 0, .references =NULL};
    struct memblock mem_75754 = {.desc ="mem_75754", .mem =
                                 futhark_mc_task_81897->free_mem_75754, .size =
                                 0, .references =NULL};
    struct memblock mem_75757 = {.desc ="mem_75757", .mem =
                                 futhark_mc_task_81897->free_mem_75757, .size =
                                 0, .references =NULL};
    int64_t bytes_75759 = futhark_mc_task_81897->free_bytes_75759;
    struct memblock mem_75760 = {.desc ="mem_75760", .mem =
                                 futhark_mc_task_81897->free_mem_75760, .size =
                                 0, .references =NULL};
    struct memblock mem_75781 = {.desc ="mem_75781", .mem =
                                 futhark_mc_task_81897->free_mem_75781, .size =
                                 0, .references =NULL};
    int64_t iter_79505;
    struct futhark_mc_segmap_parloop_struct_81899
    futhark_mc_segmap_parloop_struct_81899;
    
    futhark_mc_segmap_parloop_struct_81899.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81899.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81899.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81899.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81899.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81899.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81899.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81899.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81899.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81899.free_last_res_73428 = last_res_73428;
    futhark_mc_segmap_parloop_struct_81899.free_min_arg_73443 = min_arg_73443;
    futhark_mc_segmap_parloop_struct_81899.free_min_arg_73444 = min_arg_73444;
    futhark_mc_segmap_parloop_struct_81899.free_min_res_73445 = min_res_73445;
    futhark_mc_segmap_parloop_struct_81899.free_max_res_73449 = max_res_73449;
    futhark_mc_segmap_parloop_struct_81899.free_mem_75751 = mem_75751.mem;
    futhark_mc_segmap_parloop_struct_81899.free_mem_75754 = mem_75754.mem;
    futhark_mc_segmap_parloop_struct_81899.free_mem_75757 = mem_75757.mem;
    futhark_mc_segmap_parloop_struct_81899.free_bytes_75759 = bytes_75759;
    futhark_mc_segmap_parloop_struct_81899.free_mem_75760 = mem_75760.mem;
    futhark_mc_segmap_parloop_struct_81899.free_mem_75781 = mem_75781.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81900_task;
    
    futhark_mc_segmap_parloop_81900_task.name =
        "futhark_mc_segmap_parloop_81900";
    futhark_mc_segmap_parloop_81900_task.fn = futhark_mc_segmap_parloop_81900;
    futhark_mc_segmap_parloop_81900_task.args =
        &futhark_mc_segmap_parloop_struct_81899;
    futhark_mc_segmap_parloop_81900_task.iterations = iterations;
    futhark_mc_segmap_parloop_81900_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81900_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81900_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81900_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81900_task);
    
    if (futhark_mc_segmap_parloop_81900_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81900_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81900_total_end -
                 futhark_mc_segmap_parloop_81900_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81900_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81900_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81900_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81898_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81898_end -
                 futhark_mc_segmap_task_81898_start;
        
        ctx->futhark_mc_segmap_task_81898_runs[tid]++;
        ctx->futhark_mc_segmap_task_81898_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81898_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81903 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_73428;
    int64_t free_min_arg_73443;
    int64_t free_min_arg_73444;
    int64_t free_min_res_73445;
    float free_max_res_73449;
    unsigned char *free_mem_75751;
    unsigned char *free_mem_75754;
    unsigned char *free_mem_75757;
    int64_t free_bytes_75759;
    unsigned char *free_mem_75760;
    unsigned char *free_mem_75781;
};
struct futhark_mc_task_81906 {
    struct futhark_context *ctx;
    int64_t free_last_res_73428;
    unsigned char *free_mem_75754;
    unsigned char *free_mem_75760;
    int64_t free_min_res_79230;
    int64_t free_max_res_79295;
    float free_defunc_1_f_res_79314;
    float *retval_defunc_2_reduce_res_79316;
    unsigned char *retval_mem_79315;
};
struct futhark_mc_segred_stage_1_parloop_struct_81909 {
    struct futhark_context *ctx;
    int64_t free_last_res_73428;
    unsigned char *free_mem_75754;
    unsigned char *free_mem_75760;
    int64_t free_min_res_79230;
    int64_t free_max_res_79295;
    float free_defunc_1_f_res_79314;
    unsigned char *free_mem_79315;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_79699;
};
static int futhark_mc_segred_stage_1_parloop_81910(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_73293, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81909
    *futhark_mc_segred_stage_1_parloop_struct_81909 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81909 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81909->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81910_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81910_start = get_wall_time();
    
    int64_t last_res_73428 =
            futhark_mc_segred_stage_1_parloop_struct_81909->free_last_res_73428;
    struct memblock mem_75754 = {.desc ="mem_75754", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81909->free_mem_75754,
                                 .size =0, .references =NULL};
    struct memblock mem_75760 = {.desc ="mem_75760", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81909->free_mem_75760,
                                 .size =0, .references =NULL};
    int64_t min_res_79230 =
            futhark_mc_segred_stage_1_parloop_struct_81909->free_min_res_79230;
    int64_t max_res_79295 =
            futhark_mc_segred_stage_1_parloop_struct_81909->free_max_res_79295;
    float defunc_1_f_res_79314 =
          futhark_mc_segred_stage_1_parloop_struct_81909->free_defunc_1_f_res_79314;
    struct memblock mem_79315 = {.desc ="mem_79315", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81909->free_mem_79315,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_79699 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_79699",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81909->free_reduce_stage_1_tid_res_arr_mem_79699,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79701 = start;
    float x_79660;
    float x_79661;
    float local_acc_79702 = 0.0F;
    
    for (; iter_79701 < end; iter_79701++) {
        int64_t gtid_73294 = iter_79701;
        float x_79663 = ((float *) mem_75760.mem)[gtid_73294];
        bool cond_79664 = sle64(last_res_73428, gtid_73294);
        int64_t defunc_0_f_res_79665;
        
        if (cond_79664) {
            defunc_0_f_res_79665 = (int64_t) 0;
        } else {
            int64_t i_79666 = add64(gtid_73294, max_res_79295);
            int64_t defunc_0_add_arg_79667 =
                    ((int64_t *) mem_75754.mem)[i_79666];
            int64_t defunc_1_add_res_79668 = add64((int64_t) 1,
                                                   defunc_0_add_arg_79667);
            
            defunc_0_f_res_79665 = defunc_1_add_res_79668;
        }
        
        int64_t binop_p_79669 = sub64(defunc_0_f_res_79665, min_res_79230);
        float defunc_0_f_res_79670 = sitofp_i64_f32(binop_p_79669);
        float abs_res_79671 = (float) fabs(defunc_0_f_res_79670);
        float tmp1_79672 = abs_res_79671 / defunc_1_f_res_79314;
        float x_79673 = tmp1_79672 * tmp1_79672;
        float y_79674 = tmp1_79672 * x_79673;
        float tmp2_79675 = 1.0F - y_79674;
        float x_79676 = tmp2_79675 * tmp2_79675;
        float tmp3_79677 = tmp2_79675 * x_79676;
        float tmp4_79678 = x_79663 * tmp3_79677;
        
        // save map-out results
        {
            ((float *) mem_79315.mem)[gtid_73294] = tmp4_79678;
        }
        // Load accum params
        {
            x_79660 = local_acc_79702;
        }
        // Load next params
        {
            x_79661 = tmp4_79678;
        }
        // Red body
        {
            float defunc_1_op_res_79662 = x_79660 + x_79661;
            
            local_acc_79702 = defunc_1_op_res_79662;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_79699.mem)[flat_tid_73293] =
        local_acc_79702;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81910_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81910_end -
                 futhark_mc_segred_stage_1_parloop_81910_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81910_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81910_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81910_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81907(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73293 = tid;
    int num_tasks_79698 = info.nsubtasks;
    struct futhark_mc_task_81906 *futhark_mc_task_81906 =
                                 (struct futhark_mc_task_81906 *) args;
    struct futhark_context *ctx = futhark_mc_task_81906->ctx;
    uint64_t futhark_mc_segred_task_81907_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81907_start = get_wall_time();
    
    int64_t last_res_73428 = futhark_mc_task_81906->free_last_res_73428;
    struct memblock mem_75754 = {.desc ="mem_75754", .mem =
                                 futhark_mc_task_81906->free_mem_75754, .size =
                                 0, .references =NULL};
    struct memblock mem_75760 = {.desc ="mem_75760", .mem =
                                 futhark_mc_task_81906->free_mem_75760, .size =
                                 0, .references =NULL};
    int64_t min_res_79230 = futhark_mc_task_81906->free_min_res_79230;
    int64_t max_res_79295 = futhark_mc_task_81906->free_max_res_79295;
    float defunc_1_f_res_79314 =
          futhark_mc_task_81906->free_defunc_1_f_res_79314;
    float defunc_2_reduce_res_79316 =
          *futhark_mc_task_81906->retval_defunc_2_reduce_res_79316;
    struct memblock mem_79315 = {.desc ="mem_79315", .mem =
                                 futhark_mc_task_81906->retval_mem_79315,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_79699_cached_sizze_81908 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_79699 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_79699_cached_sizze_81908 <
        (size_t) ((int64_t) 4 * num_tasks_79698)) {
        reduce_stage_1_tid_res_arr_mem_79699 =
            realloc(reduce_stage_1_tid_res_arr_mem_79699, (int64_t) 4 *
                    num_tasks_79698);
        reduce_stage_1_tid_res_arr_mem_79699_cached_sizze_81908 = (int64_t) 4 *
            num_tasks_79698;
    }
    
    int64_t iter_79701;
    struct futhark_mc_segred_stage_1_parloop_struct_81909
    futhark_mc_segred_stage_1_parloop_struct_81909;
    
    futhark_mc_segred_stage_1_parloop_struct_81909.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81909.free_last_res_73428 =
        last_res_73428;
    futhark_mc_segred_stage_1_parloop_struct_81909.free_mem_75754 =
        mem_75754.mem;
    futhark_mc_segred_stage_1_parloop_struct_81909.free_mem_75760 =
        mem_75760.mem;
    futhark_mc_segred_stage_1_parloop_struct_81909.free_min_res_79230 =
        min_res_79230;
    futhark_mc_segred_stage_1_parloop_struct_81909.free_max_res_79295 =
        max_res_79295;
    futhark_mc_segred_stage_1_parloop_struct_81909.free_defunc_1_f_res_79314 =
        defunc_1_f_res_79314;
    futhark_mc_segred_stage_1_parloop_struct_81909.free_mem_79315 =
        mem_79315.mem;
    futhark_mc_segred_stage_1_parloop_struct_81909.free_reduce_stage_1_tid_res_arr_mem_79699 =
        reduce_stage_1_tid_res_arr_mem_79699;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81910_task;
    
    futhark_mc_segred_stage_1_parloop_81910_task.name =
        "futhark_mc_segred_stage_1_parloop_81910";
    futhark_mc_segred_stage_1_parloop_81910_task.fn =
        futhark_mc_segred_stage_1_parloop_81910;
    futhark_mc_segred_stage_1_parloop_81910_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81909;
    futhark_mc_segred_stage_1_parloop_81910_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81910_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81910_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81910_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81910_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81910_task);
    
    if (futhark_mc_segred_stage_1_parloop_81910_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81910_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81910_total_end -
                 futhark_mc_segred_stage_1_parloop_81910_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81910_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81910_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81910_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_79316 = 0.0F;
    }
    
    float x_79703;
    float x_79704;
    
    for (int32_t i_79706 = 0; i_79706 < num_tasks_79698; i_79706++) {
        flat_tid_73293 = i_79706;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_79703 = defunc_2_reduce_res_79316;
            }
            // load next params
            {
                x_79704 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_79699)[flat_tid_73293];
            }
            // red body
            {
                float defunc_1_op_res_79705 = x_79703 + x_79704;
                
                defunc_2_reduce_res_79316 = defunc_1_op_res_79705;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_79699);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81907_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81907_end -
                 futhark_mc_segred_task_81907_start;
        
        ctx->futhark_mc_segred_task_81907_runs[tid]++;
        ctx->futhark_mc_segred_task_81907_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81907_iter[tid] += iterations;
    }
    *futhark_mc_task_81906->retval_defunc_2_reduce_res_79316 =
        defunc_2_reduce_res_79316;
    futhark_mc_task_81906->retval_mem_79315 = mem_79315.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81911 {
    struct futhark_context *ctx;
    int64_t free_last_res_73428;
    unsigned char *free_mem_75751;
    int64_t free_max_res_79295;
    unsigned char *free_mem_79315;
    float free_a0_79337;
    float *retval_defunc_2_reduce_res_79338;
};
struct futhark_mc_segred_stage_1_parloop_struct_81914 {
    struct futhark_context *ctx;
    int64_t free_last_res_73428;
    unsigned char *free_mem_75751;
    int64_t free_max_res_79295;
    unsigned char *free_mem_79315;
    float free_a0_79337;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_79708;
};
static int futhark_mc_segred_stage_1_parloop_81915(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_73295, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81914
    *futhark_mc_segred_stage_1_parloop_struct_81914 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81914 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81914->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81915_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81915_start = get_wall_time();
    
    int64_t last_res_73428 =
            futhark_mc_segred_stage_1_parloop_struct_81914->free_last_res_73428;
    struct memblock mem_75751 = {.desc ="mem_75751", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81914->free_mem_75751,
                                 .size =0, .references =NULL};
    int64_t max_res_79295 =
            futhark_mc_segred_stage_1_parloop_struct_81914->free_max_res_79295;
    struct memblock mem_79315 = {.desc ="mem_79315", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81914->free_mem_79315,
                                 .size =0, .references =NULL};
    float a0_79337 =
          futhark_mc_segred_stage_1_parloop_struct_81914->free_a0_79337;
    struct memblock reduce_stage_1_tid_res_arr_mem_79708 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_79708",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81914->free_reduce_stage_1_tid_res_arr_mem_79708,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_79710 = start;
    float x_79679;
    float x_79680;
    float local_acc_79711 = 0.0F;
    
    for (; iter_79710 < end; iter_79710++) {
        int64_t gtid_73296 = iter_79710;
        float x_79682 = ((float *) mem_79315.mem)[gtid_73296];
        bool cond_79683 = sle64(last_res_73428, gtid_73296);
        float defunc_0_f_res_79684;
        
        if (cond_79683) {
            defunc_0_f_res_79684 = 0.0F;
        } else {
            int64_t i_79685 = add64(gtid_73296, max_res_79295);
            float defunc_0_add_arg_79686 = ((float *) mem_75751.mem)[i_79685];
            
            defunc_0_f_res_79684 = defunc_0_add_arg_79686;
        }
        
        float x_79687 = a0_79337 * x_79682;
        float defunc_9_fit_fun_res_79688 = defunc_0_f_res_79684 * x_79687;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_79679 = local_acc_79711;
        }
        // Load next params
        {
            x_79680 = defunc_9_fit_fun_res_79688;
        }
        // Red body
        {
            float defunc_1_op_res_79681 = x_79679 + x_79680;
            
            local_acc_79711 = defunc_1_op_res_79681;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_79708.mem)[flat_tid_73295] =
        local_acc_79711;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81915_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81915_end -
                 futhark_mc_segred_stage_1_parloop_81915_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81915_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81915_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81915_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81912(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73295 = tid;
    int num_tasks_79707 = info.nsubtasks;
    struct futhark_mc_task_81911 *futhark_mc_task_81911 =
                                 (struct futhark_mc_task_81911 *) args;
    struct futhark_context *ctx = futhark_mc_task_81911->ctx;
    uint64_t futhark_mc_segred_task_81912_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81912_start = get_wall_time();
    
    int64_t last_res_73428 = futhark_mc_task_81911->free_last_res_73428;
    struct memblock mem_75751 = {.desc ="mem_75751", .mem =
                                 futhark_mc_task_81911->free_mem_75751, .size =
                                 0, .references =NULL};
    int64_t max_res_79295 = futhark_mc_task_81911->free_max_res_79295;
    struct memblock mem_79315 = {.desc ="mem_79315", .mem =
                                 futhark_mc_task_81911->free_mem_79315, .size =
                                 0, .references =NULL};
    float a0_79337 = futhark_mc_task_81911->free_a0_79337;
    float defunc_2_reduce_res_79338 =
          *futhark_mc_task_81911->retval_defunc_2_reduce_res_79338;
    size_t reduce_stage_1_tid_res_arr_mem_79708_cached_sizze_81913 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_79708 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_79708_cached_sizze_81913 <
        (size_t) ((int64_t) 4 * num_tasks_79707)) {
        reduce_stage_1_tid_res_arr_mem_79708 =
            realloc(reduce_stage_1_tid_res_arr_mem_79708, (int64_t) 4 *
                    num_tasks_79707);
        reduce_stage_1_tid_res_arr_mem_79708_cached_sizze_81913 = (int64_t) 4 *
            num_tasks_79707;
    }
    
    int64_t iter_79710;
    struct futhark_mc_segred_stage_1_parloop_struct_81914
    futhark_mc_segred_stage_1_parloop_struct_81914;
    
    futhark_mc_segred_stage_1_parloop_struct_81914.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81914.free_last_res_73428 =
        last_res_73428;
    futhark_mc_segred_stage_1_parloop_struct_81914.free_mem_75751 =
        mem_75751.mem;
    futhark_mc_segred_stage_1_parloop_struct_81914.free_max_res_79295 =
        max_res_79295;
    futhark_mc_segred_stage_1_parloop_struct_81914.free_mem_79315 =
        mem_79315.mem;
    futhark_mc_segred_stage_1_parloop_struct_81914.free_a0_79337 = a0_79337;
    futhark_mc_segred_stage_1_parloop_struct_81914.free_reduce_stage_1_tid_res_arr_mem_79708 =
        reduce_stage_1_tid_res_arr_mem_79708;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81915_task;
    
    futhark_mc_segred_stage_1_parloop_81915_task.name =
        "futhark_mc_segred_stage_1_parloop_81915";
    futhark_mc_segred_stage_1_parloop_81915_task.fn =
        futhark_mc_segred_stage_1_parloop_81915;
    futhark_mc_segred_stage_1_parloop_81915_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81914;
    futhark_mc_segred_stage_1_parloop_81915_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81915_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81915_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81915_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81915_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81915_task);
    
    if (futhark_mc_segred_stage_1_parloop_81915_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81915_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81915_total_end -
                 futhark_mc_segred_stage_1_parloop_81915_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81915_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81915_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81915_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_79338 = 0.0F;
    }
    
    float x_79712;
    float x_79713;
    
    for (int32_t i_79715 = 0; i_79715 < num_tasks_79707; i_79715++) {
        flat_tid_73295 = i_79715;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_79712 = defunc_2_reduce_res_79338;
            }
            // load next params
            {
                x_79713 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_79708)[flat_tid_73295];
            }
            // red body
            {
                float defunc_1_op_res_79714 = x_79712 + x_79713;
                
                defunc_2_reduce_res_79338 = defunc_1_op_res_79714;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_79708);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81912_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81912_end -
                 futhark_mc_segred_task_81912_start;
        
        ctx->futhark_mc_segred_task_81912_runs[tid]++;
        ctx->futhark_mc_segred_task_81912_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81912_iter[tid] += iterations;
    }
    *futhark_mc_task_81911->retval_defunc_2_reduce_res_79338 =
        defunc_2_reduce_res_79338;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81904(void *args, int64_t start,
                                           int64_t end, int flat_tid_73291,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81903
    *futhark_mc_segmap_parloop_struct_81903 =
    (struct futhark_mc_segmap_parloop_struct_81903 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81903->ctx;
    uint64_t futhark_mc_segmap_parloop_81904_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81904_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81903->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81903->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81903->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81903->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81903->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81903->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81903->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81903->free_loop_cond_70305;
    int64_t last_res_73428 =
            futhark_mc_segmap_parloop_struct_81903->free_last_res_73428;
    int64_t min_arg_73443 =
            futhark_mc_segmap_parloop_struct_81903->free_min_arg_73443;
    int64_t min_arg_73444 =
            futhark_mc_segmap_parloop_struct_81903->free_min_arg_73444;
    int64_t min_res_73445 =
            futhark_mc_segmap_parloop_struct_81903->free_min_res_73445;
    float max_res_73449 =
          futhark_mc_segmap_parloop_struct_81903->free_max_res_73449;
    struct memblock mem_75751 = {.desc ="mem_75751", .mem =
                                 futhark_mc_segmap_parloop_struct_81903->free_mem_75751,
                                 .size =0, .references =NULL};
    struct memblock mem_75754 = {.desc ="mem_75754", .mem =
                                 futhark_mc_segmap_parloop_struct_81903->free_mem_75754,
                                 .size =0, .references =NULL};
    struct memblock mem_75757 = {.desc ="mem_75757", .mem =
                                 futhark_mc_segmap_parloop_struct_81903->free_mem_75757,
                                 .size =0, .references =NULL};
    int64_t bytes_75759 =
            futhark_mc_segmap_parloop_struct_81903->free_bytes_75759;
    struct memblock mem_75760 = {.desc ="mem_75760", .mem =
                                 futhark_mc_segmap_parloop_struct_81903->free_mem_75760,
                                 .size =0, .references =NULL};
    struct memblock mem_75781 = {.desc ="mem_75781", .mem =
                                 futhark_mc_segmap_parloop_struct_81903->free_mem_75781,
                                 .size =0, .references =NULL};
    size_t mem_79315_cached_sizze_81905 = 0;
    unsigned char *mem_79315 = NULL;
    int64_t iterations = end - start;
    int64_t iter_79604 = start;
    
    if (mem_79315_cached_sizze_81905 < (size_t) bytes_75759) {
        mem_79315 = realloc(mem_79315, bytes_75759);
        mem_79315_cached_sizze_81905 = bytes_75759;
    }
    for (; iter_79604 < end; iter_79604++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79689 = n_m_70288;
        int64_t gtid_73292 = iter_79604;
        int64_t remnant_79690 = iter_79604 - gtid_73292;
        int64_t min_arg_79229 = mul64(jump_70284, gtid_73292);
        int64_t min_res_79230 = smin64(i_70294, min_arg_79229);
        int64_t defunc_0_g_res_79231 = add64((int64_t) 1, min_res_79230);
        bool init_idx_79232;
        int64_t init_idx_79233;
        int64_t init_idx_79234;
        bool loop_while_79605;
        int64_t low_79606;
        int64_t high_79607;
        
        loop_while_79605 = x_70295;
        low_79606 = (int64_t) 0;
        high_79607 = i_70294;
        while (loop_while_79605) {
            int64_t x_79608 = add64(low_79606, high_79607);
            int64_t mid_79609 = sdiv64(x_79608, (int64_t) 2);
            bool x_79610 = sle64((int64_t) 0, mid_79609);
            bool y_79611 = slt64(mid_79609, n_70280);
            bool bounds_check_79612 = x_79610 && y_79611;
            bool index_certs_79613;
            
            if (!bounds_check_79612) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_79609,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t mid_id_79614 = ((int64_t *) mem_75757.mem)[mid_79609];
            bool cond_79615 = slt64(mid_id_79614, (int64_t) 0);
            int64_t mid_idx_79616;
            
            if (cond_79615) {
                mid_idx_79616 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_79616 = mid_id_79614;
            }
            
            bool cond_79617 = sle64(defunc_0_g_res_79231, mid_idx_79616);
            int64_t loopres_79618;
            int64_t loopres_79619;
            
            if (cond_79617) {
                int64_t loopres_t_res_79620 = sub64(mid_79609, (int64_t) 1);
                
                loopres_79618 = low_79606;
                loopres_79619 = loopres_t_res_79620;
            } else {
                int64_t loopres_f_res_79621 = add64((int64_t) 1, mid_79609);
                
                loopres_79618 = loopres_f_res_79621;
                loopres_79619 = high_79607;
            }
            
            bool loop_cond_79622 = sle64(loopres_79618, loopres_79619);
            bool loop_while_tmp_79691 = loop_cond_79622;
            int64_t low_tmp_79692 = loopres_79618;
            int64_t high_tmp_79693 = loopres_79619;
            
            loop_while_79605 = loop_while_tmp_79691;
            low_79606 = low_tmp_79692;
            high_79607 = high_tmp_79693;
        }
        init_idx_79232 = loop_while_79605;
        init_idx_79233 = low_79606;
        init_idx_79234 = high_79607;
        
        bool idx_79253;
        int64_t idx_79254;
        int64_t idx_79255;
        int64_t idx_79256;
        bool loop_while_79623;
        int64_t l_idx_79624;
        int64_t r_idx_79625;
        int64_t span_79626;
        
        loop_while_79623 = loop_cond_70305;
        l_idx_79624 = init_idx_79233;
        r_idx_79625 = init_idx_79233;
        span_79626 = (int64_t) 1;
        while (loop_while_79623) {
            int64_t max_arg_79627 = sub64(l_idx_79624, (int64_t) 1);
            int64_t max_res_79628 = smax64((int64_t) 0, max_arg_79627);
            int64_t min_arg_79629 = add64((int64_t) 1, r_idx_79625);
            int64_t min_res_79630 = smin64(min_arg_73443, min_arg_79629);
            bool x_79631 = sle64((int64_t) 0, max_res_79628);
            bool y_79632 = slt64(max_res_79628, n_70280);
            bool bounds_check_79633 = x_79631 && y_79632;
            bool index_certs_79634;
            
            if (!bounds_check_79633) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_79628,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_79635 = ((int64_t *) mem_75757.mem)[max_res_79628];
            int64_t abs_arg_79636 = sub64(x_79635, defunc_0_g_res_79231);
            int64_t abs_res_79637 = abs64(abs_arg_79636);
            bool x_79638 = sle64((int64_t) 0, min_res_79630);
            bool y_79639 = slt64(min_res_79630, n_70280);
            bool bounds_check_79640 = x_79638 && y_79639;
            bool index_certs_79641;
            
            if (!bounds_check_79640) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_79630,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_79642 = ((int64_t *) mem_75757.mem)[min_res_79630];
            int64_t abs_arg_79643 = sub64(x_79642, defunc_0_g_res_79231);
            int64_t abs_res_79644 = abs64(abs_arg_79643);
            bool cond_79645 = max_res_79628 == l_idx_79624;
            int64_t loopres_79646;
            int64_t loopres_79647;
            int64_t loopres_79648;
            
            if (cond_79645) {
                loopres_79646 = l_idx_79624;
                loopres_79647 = r_idx_79625;
                loopres_79648 = min_res_70300;
            } else {
                bool cond_79649 = slt64(abs_res_79637, abs_res_79644);
                bool cond_f_res_79650 = min_res_79630 == r_idx_79625;
                bool x_79651 = !cond_79649;
                bool y_79652 = cond_f_res_79650 && x_79651;
                bool cond_79653 = cond_79649 || y_79652;
                int64_t loopres_f_res_79654;
                
                if (cond_79653) {
                    loopres_f_res_79654 = max_res_79628;
                } else {
                    loopres_f_res_79654 = l_idx_79624;
                }
                
                int64_t loopres_f_res_79655;
                
                if (cond_79653) {
                    loopres_f_res_79655 = r_idx_79625;
                } else {
                    loopres_f_res_79655 = min_res_79630;
                }
                
                int64_t loopres_f_res_79656;
                
                if (cond_79653) {
                    int64_t loopres_f_res_t_res_79657 = add64((int64_t) 1,
                                                              span_79626);
                    
                    loopres_f_res_79656 = loopres_f_res_t_res_79657;
                } else {
                    int64_t loopres_f_res_f_res_79658 = add64((int64_t) 1,
                                                              span_79626);
                    
                    loopres_f_res_79656 = loopres_f_res_f_res_79658;
                }
                loopres_79646 = loopres_f_res_79654;
                loopres_79647 = loopres_f_res_79655;
                loopres_79648 = loopres_f_res_79656;
            }
            
            bool loop_cond_79659 = slt64(loopres_79648, min_res_70300);
            bool loop_while_tmp_79694 = loop_cond_79659;
            int64_t l_idx_tmp_79695 = loopres_79646;
            int64_t r_idx_tmp_79696 = loopres_79647;
            int64_t span_tmp_79697 = loopres_79648;
            
            loop_while_79623 = loop_while_tmp_79694;
            l_idx_79624 = l_idx_tmp_79695;
            r_idx_79625 = r_idx_tmp_79696;
            span_79626 = span_tmp_79697;
        }
        idx_79253 = loop_while_79623;
        idx_79254 = l_idx_79624;
        idx_79255 = r_idx_79625;
        idx_79256 = span_79626;
        
        int64_t min_res_79294 = smin64(min_arg_73444, idx_79254);
        int64_t max_res_79295 = smax64((int64_t) 0, min_res_79294);
        int64_t x_79296 = add64(min_res_73445, max_res_79295);
        int64_t r_79297 = sub64(x_79296, (int64_t) 1);
        bool x_79298 = sle64((int64_t) 0, r_79297);
        bool y_79299 = slt64(r_79297, n_70280);
        bool bounds_check_79300 = x_79298 && y_79299;
        bool index_certs_79301;
        
        if (!bounds_check_79300) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_79297,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_79302 = ((int64_t *) mem_75754.mem)[r_79297];
        int64_t abs_arg_79303 = sub64(x_79302, min_res_79230);
        int64_t abs_res_79304 = abs64(abs_arg_79303);
        bool x_79305 = sle64((int64_t) 0, max_res_79295);
        bool y_79306 = slt64(max_res_79295, n_70280);
        bool bounds_check_79307 = x_79305 && y_79306;
        bool index_certs_79308;
        
        if (!bounds_check_79307) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_79295,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_79309 = ((int64_t *) mem_75754.mem)[max_res_79295];
        int64_t abs_arg_79310 = sub64(x_79309, min_res_79230);
        int64_t abs_res_79311 = abs64(abs_arg_79310);
        int64_t max_res_79312 = smax64(abs_res_79304, abs_res_79311);
        float defunc_0_f_res_79313 = sitofp_i64_f32(max_res_79312);
        float defunc_1_f_res_79314 = max_res_73449 + defunc_0_f_res_79313;
        float defunc_2_reduce_res_79316;
        int64_t flat_tid_73293 = (int64_t) 0;
        int32_t num_tasks_79698;
        struct futhark_mc_task_81906 futhark_mc_task_81906;
        
        futhark_mc_task_81906.ctx = ctx;
        futhark_mc_task_81906.free_last_res_73428 = last_res_73428;
        futhark_mc_task_81906.free_mem_75754 = mem_75754.mem;
        futhark_mc_task_81906.free_mem_75760 = mem_75760.mem;
        futhark_mc_task_81906.free_min_res_79230 = min_res_79230;
        futhark_mc_task_81906.free_max_res_79295 = max_res_79295;
        futhark_mc_task_81906.free_defunc_1_f_res_79314 = defunc_1_f_res_79314;
        futhark_mc_task_81906.retval_defunc_2_reduce_res_79316 =
            &defunc_2_reduce_res_79316;
        futhark_mc_task_81906.retval_mem_79315 = mem_79315;
        
        struct scheduler_segop futhark_mc_task_81906_task;
        
        futhark_mc_task_81906_task.args = &futhark_mc_task_81906;
        futhark_mc_task_81906_task.top_level_fn = futhark_mc_segred_task_81907;
        futhark_mc_task_81906_task.name = "futhark_mc_segred_task_81907";
        futhark_mc_task_81906_task.iterations = q_70282;
        futhark_mc_task_81906_task.task_time =
            &ctx->futhark_mc_segred_task_81907_total_time;
        futhark_mc_task_81906_task.task_iter =
            &ctx->futhark_mc_segred_task_81907_total_iter;
        futhark_mc_task_81906_task.sched = STATIC;
        futhark_mc_task_81906_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81907_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81906_task);
        
        if (futhark_mc_segred_task_81907_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_79337 = 1.0F / defunc_2_reduce_res_79316;
        float defunc_2_reduce_res_79338;
        int64_t flat_tid_73295 = (int64_t) 0;
        int32_t num_tasks_79707;
        struct futhark_mc_task_81911 futhark_mc_task_81911;
        
        futhark_mc_task_81911.ctx = ctx;
        futhark_mc_task_81911.free_last_res_73428 = last_res_73428;
        futhark_mc_task_81911.free_mem_75751 = mem_75751.mem;
        futhark_mc_task_81911.free_max_res_79295 = max_res_79295;
        futhark_mc_task_81911.free_mem_79315 = mem_79315;
        futhark_mc_task_81911.free_a0_79337 = a0_79337;
        futhark_mc_task_81911.retval_defunc_2_reduce_res_79338 =
            &defunc_2_reduce_res_79338;
        
        struct scheduler_segop futhark_mc_task_81911_task;
        
        futhark_mc_task_81911_task.args = &futhark_mc_task_81911;
        futhark_mc_task_81911_task.top_level_fn = futhark_mc_segred_task_81912;
        futhark_mc_task_81911_task.name = "futhark_mc_segred_task_81912";
        futhark_mc_task_81911_task.iterations = q_70282;
        futhark_mc_task_81911_task.task_time =
            &ctx->futhark_mc_segred_task_81912_total_time;
        futhark_mc_task_81911_task.task_iter =
            &ctx->futhark_mc_segred_task_81912_total_iter;
        futhark_mc_task_81911_task.sched = STATIC;
        futhark_mc_task_81911_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81912_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81911_task);
        
        if (futhark_mc_segred_task_81912_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_75781.mem)[gtid_73292] = defunc_2_reduce_res_79338;
    }
    
  cleanup:
    { }
    free(mem_79315);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81904_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81904_end -
                 futhark_mc_segmap_parloop_81904_start;
        
        ctx->futhark_mc_segmap_parloop_81904_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81904_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81904_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81902(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73291 = tid;
    int num_tasks_79504 = info.nsubtasks;
    struct futhark_mc_task_81897 *futhark_mc_task_81897 =
                                 (struct futhark_mc_task_81897 *) args;
    struct futhark_context *ctx = futhark_mc_task_81897->ctx;
    uint64_t futhark_mc_segmap_nested_task_81902_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81902_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81897->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81897->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81897->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81897->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81897->free_i_70294;
    bool x_70295 = futhark_mc_task_81897->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81897->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81897->free_loop_cond_70305;
    int64_t last_res_73428 = futhark_mc_task_81897->free_last_res_73428;
    int64_t min_arg_73443 = futhark_mc_task_81897->free_min_arg_73443;
    int64_t min_arg_73444 = futhark_mc_task_81897->free_min_arg_73444;
    int64_t min_res_73445 = futhark_mc_task_81897->free_min_res_73445;
    float max_res_73449 = futhark_mc_task_81897->free_max_res_73449;
    struct memblock mem_75751 = {.desc ="mem_75751", .mem =
                                 futhark_mc_task_81897->free_mem_75751, .size =
                                 0, .references =NULL};
    struct memblock mem_75754 = {.desc ="mem_75754", .mem =
                                 futhark_mc_task_81897->free_mem_75754, .size =
                                 0, .references =NULL};
    struct memblock mem_75757 = {.desc ="mem_75757", .mem =
                                 futhark_mc_task_81897->free_mem_75757, .size =
                                 0, .references =NULL};
    int64_t bytes_75759 = futhark_mc_task_81897->free_bytes_75759;
    struct memblock mem_75760 = {.desc ="mem_75760", .mem =
                                 futhark_mc_task_81897->free_mem_75760, .size =
                                 0, .references =NULL};
    struct memblock mem_75781 = {.desc ="mem_75781", .mem =
                                 futhark_mc_task_81897->free_mem_75781, .size =
                                 0, .references =NULL};
    int64_t iter_79604;
    struct futhark_mc_segmap_parloop_struct_81903
    futhark_mc_segmap_parloop_struct_81903;
    
    futhark_mc_segmap_parloop_struct_81903.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81903.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81903.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81903.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81903.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81903.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81903.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81903.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81903.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81903.free_last_res_73428 = last_res_73428;
    futhark_mc_segmap_parloop_struct_81903.free_min_arg_73443 = min_arg_73443;
    futhark_mc_segmap_parloop_struct_81903.free_min_arg_73444 = min_arg_73444;
    futhark_mc_segmap_parloop_struct_81903.free_min_res_73445 = min_res_73445;
    futhark_mc_segmap_parloop_struct_81903.free_max_res_73449 = max_res_73449;
    futhark_mc_segmap_parloop_struct_81903.free_mem_75751 = mem_75751.mem;
    futhark_mc_segmap_parloop_struct_81903.free_mem_75754 = mem_75754.mem;
    futhark_mc_segmap_parloop_struct_81903.free_mem_75757 = mem_75757.mem;
    futhark_mc_segmap_parloop_struct_81903.free_bytes_75759 = bytes_75759;
    futhark_mc_segmap_parloop_struct_81903.free_mem_75760 = mem_75760.mem;
    futhark_mc_segmap_parloop_struct_81903.free_mem_75781 = mem_75781.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81904_task;
    
    futhark_mc_segmap_parloop_81904_task.name =
        "futhark_mc_segmap_parloop_81904";
    futhark_mc_segmap_parloop_81904_task.fn = futhark_mc_segmap_parloop_81904;
    futhark_mc_segmap_parloop_81904_task.args =
        &futhark_mc_segmap_parloop_struct_81903;
    futhark_mc_segmap_parloop_81904_task.iterations = iterations;
    futhark_mc_segmap_parloop_81904_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81904_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81904_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81904_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81904_task);
    
    if (futhark_mc_segmap_parloop_81904_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81904_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81904_total_end -
                 futhark_mc_segmap_parloop_81904_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81904_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81904_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81904_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81902_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81902_end -
                 futhark_mc_segmap_nested_task_81902_start;
        
        ctx->futhark_mc_segmap_nested_task_81902_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81902_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81902_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81871(void *args, int64_t start,
                                           int64_t end, int flat_tid_73279,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81870
    *futhark_mc_segmap_parloop_struct_81870 =
    (struct futhark_mc_segmap_parloop_struct_81870 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81870->ctx;
    uint64_t futhark_mc_segmap_parloop_81871_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81871_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_segmap_parloop_struct_81870->free_m_70279;
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81870->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81870->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81870->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81870->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81870->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81870->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81870->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81870->free_loop_cond_70305;
    float i64_res_70306 =
          futhark_mc_segmap_parloop_struct_81870->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81870->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75747 =
            futhark_mc_segmap_parloop_struct_81870->free_bytes_75747;
    int64_t bytes_75750 =
            futhark_mc_segmap_parloop_struct_81870->free_bytes_75750;
    int64_t bytes_75759 =
            futhark_mc_segmap_parloop_struct_81870->free_bytes_75759;
    int64_t bytes_75780 =
            futhark_mc_segmap_parloop_struct_81870->free_bytes_75780;
    struct memblock mem_75890 = {.desc ="mem_75890", .mem =
                                 futhark_mc_segmap_parloop_struct_81870->free_mem_75890,
                                 .size =0, .references =NULL};
    size_t mem_75748_cached_sizze_81872 = 0;
    unsigned char *mem_75748 = NULL;
    size_t mem_75751_cached_sizze_81873 = 0;
    unsigned char *mem_75751 = NULL;
    size_t mem_75754_cached_sizze_81874 = 0;
    unsigned char *mem_75754 = NULL;
    size_t mem_75757_cached_sizze_81875 = 0;
    unsigned char *mem_75757 = NULL;
    size_t mem_75760_cached_sizze_81876 = 0;
    unsigned char *mem_75760 = NULL;
    size_t mem_75781_cached_sizze_81877 = 0;
    unsigned char *mem_75781 = NULL;
    int64_t iterations = end - start;
    int64_t iter_79211 = start;
    
    if (mem_75748_cached_sizze_81872 < (size_t) bytes_75747) {
        mem_75748 = realloc(mem_75748, bytes_75747);
        mem_75748_cached_sizze_81872 = bytes_75747;
    }
    if (mem_75751_cached_sizze_81873 < (size_t) bytes_75750) {
        mem_75751 = realloc(mem_75751, bytes_75750);
        mem_75751_cached_sizze_81873 = bytes_75750;
    }
    if (mem_75754_cached_sizze_81874 < (size_t) bytes_75747) {
        mem_75754 = realloc(mem_75754, bytes_75747);
        mem_75754_cached_sizze_81874 = bytes_75747;
    }
    if (mem_75757_cached_sizze_81875 < (size_t) bytes_75747) {
        mem_75757 = realloc(mem_75757, bytes_75747);
        mem_75757_cached_sizze_81875 = bytes_75747;
    }
    if (mem_75760_cached_sizze_81876 < (size_t) bytes_75759) {
        mem_75760 = realloc(mem_75760, bytes_75759);
        mem_75760_cached_sizze_81876 = bytes_75759;
    }
    if (mem_75781_cached_sizze_81877 < (size_t) bytes_75780) {
        mem_75781 = realloc(mem_75781, bytes_75780);
        mem_75781_cached_sizze_81877 = bytes_75780;
    }
    for (; iter_79211 < end; iter_79211++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79472 = m_70279;
        int64_t gtid_73280 = iter_79211;
        int64_t remnant_79473 = iter_79211 - gtid_73280;
        int64_t flat_tid_73281 = (int64_t) 0;
        int32_t num_tasks_79474;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_81878 futhark_mc_task_81878;
        
        futhark_mc_task_81878.ctx = ctx;
        futhark_mc_task_81878.free_n_70280 = n_70280;
        futhark_mc_task_81878.free_gtid_73280 = gtid_73280;
        futhark_mc_task_81878.free_Y_mem_75353 = Y_mem_75353.mem;
        futhark_mc_task_81878.free_mem_75748 = mem_75748;
        
        struct scheduler_segop futhark_mc_task_81878_task;
        
        futhark_mc_task_81878_task.args = &futhark_mc_task_81878;
        futhark_mc_task_81878_task.top_level_fn = futhark_mc_segscan_task_81879;
        futhark_mc_task_81878_task.name = "futhark_mc_segscan_task_81879";
        futhark_mc_task_81878_task.iterations = n_70280;
        futhark_mc_task_81878_task.task_time =
            &ctx->futhark_mc_segscan_task_81879_total_time;
        futhark_mc_task_81878_task.task_iter =
            &ctx->futhark_mc_segscan_task_81879_total_iter;
        futhark_mc_task_81878_task.sched = STATIC;
        futhark_mc_task_81878_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_81879_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81878_task);
        
        if (futhark_mc_segscan_task_81879_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_73428 = ((int64_t *) mem_75748)[i_70294];
        
        for (int64_t i_79488 = 0; i_79488 < n_70280; i_79488++) {
            ((float *) mem_75751)[i_79488] = 0.0F;
        }
        for (int64_t i_79489 = 0; i_79489 < n_70280; i_79489++) {
            ((int64_t *) mem_75754)[i_79489] = (int64_t) -1;
        }
        
        int64_t flat_tid_73283 = (int64_t) 0;
        int32_t num_tasks_79490;
        struct futhark_mc_task_81885 futhark_mc_task_81885;
        
        futhark_mc_task_81885.ctx = ctx;
        futhark_mc_task_81885.free_n_70280 = n_70280;
        futhark_mc_task_81885.free_gtid_73280 = gtid_73280;
        futhark_mc_task_81885.free_Y_mem_75353 = Y_mem_75353.mem;
        futhark_mc_task_81885.free_mem_75748 = mem_75748;
        futhark_mc_task_81885.free_mem_75751 = mem_75751;
        futhark_mc_task_81885.free_mem_75754 = mem_75754;
        
        struct scheduler_segop futhark_mc_task_81885_task;
        
        futhark_mc_task_81885_task.args = &futhark_mc_task_81885;
        futhark_mc_task_81885_task.top_level_fn = futhark_mc_segmap_task_81886;
        futhark_mc_task_81885_task.name = "futhark_mc_segmap_task_81886";
        futhark_mc_task_81885_task.iterations = n_70280;
        futhark_mc_task_81885_task.task_time =
            &ctx->futhark_mc_segmap_task_81886_total_time;
        futhark_mc_task_81885_task.task_iter =
            &ctx->futhark_mc_segmap_task_81886_total_iter;
        futhark_mc_task_81885_task.sched = STATIC;
        futhark_mc_task_81885_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81886_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81885_task);
        
        if (futhark_mc_segmap_task_81886_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_73285 = (int64_t) 0;
        int32_t num_tasks_79496;
        struct futhark_mc_task_81889 futhark_mc_task_81889;
        
        futhark_mc_task_81889.ctx = ctx;
        futhark_mc_task_81889.free_n_70280 = n_70280;
        futhark_mc_task_81889.free_mem_75754 = mem_75754;
        futhark_mc_task_81889.free_mem_75757 = mem_75757;
        
        struct scheduler_segop futhark_mc_task_81889_task;
        
        futhark_mc_task_81889_task.args = &futhark_mc_task_81889;
        futhark_mc_task_81889_task.top_level_fn = futhark_mc_segmap_task_81890;
        futhark_mc_task_81889_task.name = "futhark_mc_segmap_task_81890";
        futhark_mc_task_81889_task.iterations = n_70280;
        futhark_mc_task_81889_task.task_time =
            &ctx->futhark_mc_segmap_task_81890_total_time;
        futhark_mc_task_81889_task.task_iter =
            &ctx->futhark_mc_segmap_task_81890_total_iter;
        futhark_mc_task_81889_task.sched = STATIC;
        futhark_mc_task_81889_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81890_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81889_task);
        
        if (futhark_mc_segmap_task_81890_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_73443 = sub64(last_res_73428, (int64_t) 1);
        int64_t min_arg_73444 = sub64(last_res_73428, min_res_70300);
        int64_t min_res_73445 = smin64(q_70282, last_res_73428);
        float i64_res_73446 = sitofp_i64_f32(last_res_73428);
        float x_73447 = i64_res_70306 - i64_res_73446;
        float max_arg_73448 = x_73447 / 2.0F;
        float max_res_73449 = fmax32(0.0F, max_arg_73448);
        int64_t flat_tid_73287 = (int64_t) 0;
        int32_t num_tasks_79500;
        struct futhark_mc_task_81893 futhark_mc_task_81893;
        
        futhark_mc_task_81893.ctx = ctx;
        futhark_mc_task_81893.free_q_70282 = q_70282;
        futhark_mc_task_81893.free_last_res_73428 = last_res_73428;
        futhark_mc_task_81893.free_mem_75760 = mem_75760;
        
        struct scheduler_segop futhark_mc_task_81893_task;
        
        futhark_mc_task_81893_task.args = &futhark_mc_task_81893;
        futhark_mc_task_81893_task.top_level_fn = futhark_mc_segmap_task_81894;
        futhark_mc_task_81893_task.name = "futhark_mc_segmap_task_81894";
        futhark_mc_task_81893_task.iterations = q_70282;
        futhark_mc_task_81893_task.task_time =
            &ctx->futhark_mc_segmap_task_81894_total_time;
        futhark_mc_task_81893_task.task_iter =
            &ctx->futhark_mc_segmap_task_81894_total_iter;
        futhark_mc_task_81893_task.sched = STATIC;
        futhark_mc_task_81893_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81894_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81893_task);
        
        if (futhark_mc_segmap_task_81894_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_73289 = (int64_t) 0;
        int32_t num_tasks_79504;
        int64_t flat_tid_73291 = (int64_t) 0;
        struct futhark_mc_task_81897 futhark_mc_task_81897;
        
        futhark_mc_task_81897.ctx = ctx;
        futhark_mc_task_81897.free_n_70280 = n_70280;
        futhark_mc_task_81897.free_q_70282 = q_70282;
        futhark_mc_task_81897.free_jump_70284 = jump_70284;
        futhark_mc_task_81897.free_n_m_70288 = n_m_70288;
        futhark_mc_task_81897.free_i_70294 = i_70294;
        futhark_mc_task_81897.free_x_70295 = x_70295;
        futhark_mc_task_81897.free_min_res_70300 = min_res_70300;
        futhark_mc_task_81897.free_loop_cond_70305 = loop_cond_70305;
        futhark_mc_task_81897.free_last_res_73428 = last_res_73428;
        futhark_mc_task_81897.free_min_arg_73443 = min_arg_73443;
        futhark_mc_task_81897.free_min_arg_73444 = min_arg_73444;
        futhark_mc_task_81897.free_min_res_73445 = min_res_73445;
        futhark_mc_task_81897.free_max_res_73449 = max_res_73449;
        futhark_mc_task_81897.free_mem_75751 = mem_75751;
        futhark_mc_task_81897.free_mem_75754 = mem_75754;
        futhark_mc_task_81897.free_mem_75757 = mem_75757;
        futhark_mc_task_81897.free_bytes_75759 = bytes_75759;
        futhark_mc_task_81897.free_mem_75760 = mem_75760;
        futhark_mc_task_81897.free_mem_75781 = mem_75781;
        
        struct scheduler_segop futhark_mc_task_81897_task;
        
        futhark_mc_task_81897_task.args = &futhark_mc_task_81897;
        futhark_mc_task_81897_task.top_level_fn = futhark_mc_segmap_task_81898;
        futhark_mc_task_81897_task.name = "futhark_mc_segmap_task_81898";
        futhark_mc_task_81897_task.iterations = n_m_70288;
        futhark_mc_task_81897_task.task_time =
            &ctx->futhark_mc_segmap_task_81898_total_time;
        futhark_mc_task_81897_task.task_iter =
            &ctx->futhark_mc_segmap_task_81898_total_iter;
        futhark_mc_task_81897_task.sched = DYNAMIC;
        futhark_mc_task_81897_task.nested_fn =
            futhark_mc_segmap_nested_task_81902;
        
        int futhark_mc_segmap_task_81898_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81897_task);
        
        if (futhark_mc_segmap_task_81898_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_75890.mem + gtid_73280 * n_m_70288 * (int64_t) 4,
                    mem_75781 + (int64_t) 0, n_m_70288 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75748);
    free(mem_75751);
    free(mem_75754);
    free(mem_75757);
    free(mem_75760);
    free(mem_75781);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81871_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81871_end -
                 futhark_mc_segmap_parloop_81871_start;
        
        ctx->futhark_mc_segmap_parloop_81871_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81871_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81871_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81869(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73279 = tid;
    int num_tasks_79032 = info.nsubtasks;
    struct futhark_mc_task_81858 *futhark_mc_task_81858 =
                                 (struct futhark_mc_task_81858 *) args;
    struct futhark_context *ctx = futhark_mc_task_81858->ctx;
    uint64_t futhark_mc_segmap_nested_task_81869_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81869_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_task_81858->free_m_70279;
    int64_t n_70280 = futhark_mc_task_81858->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81858->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81858->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81858->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81858->free_i_70294;
    bool x_70295 = futhark_mc_task_81858->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81858->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81858->free_loop_cond_70305;
    float i64_res_70306 = futhark_mc_task_81858->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81858->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75747 = futhark_mc_task_81858->free_bytes_75747;
    int64_t bytes_75750 = futhark_mc_task_81858->free_bytes_75750;
    int64_t bytes_75759 = futhark_mc_task_81858->free_bytes_75759;
    int64_t bytes_75780 = futhark_mc_task_81858->free_bytes_75780;
    struct memblock mem_75890 = {.desc ="mem_75890", .mem =
                                 futhark_mc_task_81858->free_mem_75890, .size =
                                 0, .references =NULL};
    int64_t iter_79211;
    struct futhark_mc_segmap_parloop_struct_81870
    futhark_mc_segmap_parloop_struct_81870;
    
    futhark_mc_segmap_parloop_struct_81870.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81870.free_m_70279 = m_70279;
    futhark_mc_segmap_parloop_struct_81870.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81870.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81870.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81870.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81870.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81870.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81870.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81870.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81870.free_i64_res_70306 = i64_res_70306;
    futhark_mc_segmap_parloop_struct_81870.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81870.free_bytes_75747 = bytes_75747;
    futhark_mc_segmap_parloop_struct_81870.free_bytes_75750 = bytes_75750;
    futhark_mc_segmap_parloop_struct_81870.free_bytes_75759 = bytes_75759;
    futhark_mc_segmap_parloop_struct_81870.free_bytes_75780 = bytes_75780;
    futhark_mc_segmap_parloop_struct_81870.free_mem_75890 = mem_75890.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81871_task;
    
    futhark_mc_segmap_parloop_81871_task.name =
        "futhark_mc_segmap_parloop_81871";
    futhark_mc_segmap_parloop_81871_task.fn = futhark_mc_segmap_parloop_81871;
    futhark_mc_segmap_parloop_81871_task.args =
        &futhark_mc_segmap_parloop_struct_81870;
    futhark_mc_segmap_parloop_81871_task.iterations = iterations;
    futhark_mc_segmap_parloop_81871_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81871_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81871_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81871_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81871_task);
    
    if (futhark_mc_segmap_parloop_81871_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81871_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81871_total_end -
                 futhark_mc_segmap_parloop_81871_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81871_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81871_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81871_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81869_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81869_end -
                 futhark_mc_segmap_nested_task_81869_start;
        
        ctx->futhark_mc_segmap_nested_task_81869_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81869_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81869_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81916 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75892;
    int64_t free_bytes_75895;
    int64_t free_bytes_75904;
    int64_t free_bytes_75943;
    unsigned char *free_mem_76086;
    unsigned char *free_mem_76090;
};
struct futhark_mc_segmap_parloop_struct_81918 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75892;
    int64_t free_bytes_75895;
    int64_t free_bytes_75904;
    int64_t free_bytes_75943;
    unsigned char *free_mem_76086;
    unsigned char *free_mem_76090;
};
static int futhark_mc_segmap_parloop_81919(void *args, int64_t start,
                                           int64_t end, int flat_tid_73699,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81918
    *futhark_mc_segmap_parloop_struct_81918 =
    (struct futhark_mc_segmap_parloop_struct_81918 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81918->ctx;
    uint64_t futhark_mc_segmap_parloop_81919_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81919_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_segmap_parloop_struct_81918->free_m_70279;
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81918->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81918->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81918->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81918->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81918->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81918->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81918->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81918->free_loop_cond_70305;
    float i64_res_70306 =
          futhark_mc_segmap_parloop_struct_81918->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81918->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75892 =
            futhark_mc_segmap_parloop_struct_81918->free_bytes_75892;
    int64_t bytes_75895 =
            futhark_mc_segmap_parloop_struct_81918->free_bytes_75895;
    int64_t bytes_75904 =
            futhark_mc_segmap_parloop_struct_81918->free_bytes_75904;
    int64_t bytes_75943 =
            futhark_mc_segmap_parloop_struct_81918->free_bytes_75943;
    struct memblock mem_76086 = {.desc ="mem_76086", .mem =
                                 futhark_mc_segmap_parloop_struct_81918->free_mem_76086,
                                 .size =0, .references =NULL};
    struct memblock mem_76090 = {.desc ="mem_76090", .mem =
                                 futhark_mc_segmap_parloop_struct_81918->free_mem_76090,
                                 .size =0, .references =NULL};
    size_t mem_75950_cached_sizze_81920 = 0;
    unsigned char *mem_75950 = NULL;
    size_t mem_75965_cached_sizze_81921 = 0;
    unsigned char *mem_75965 = NULL;
    size_t mem_75968_cached_sizze_81922 = 0;
    unsigned char *mem_75968 = NULL;
    size_t mem_75995_cached_sizze_81923 = 0;
    unsigned char *mem_75995 = NULL;
    size_t mem_76010_cached_sizze_81924 = 0;
    unsigned char *mem_76010 = NULL;
    size_t mem_76025_cached_sizze_81925 = 0;
    unsigned char *mem_76025 = NULL;
    size_t mem_76028_cached_sizze_81926 = 0;
    unsigned char *mem_76028 = NULL;
    size_t mem_76045_cached_sizze_81927 = 0;
    unsigned char *mem_76045 = NULL;
    size_t mem_76048_cached_sizze_81928 = 0;
    unsigned char *mem_76048 = NULL;
    int64_t iterations = end - start;
    int64_t iter_79717 = start;
    
    if (mem_75950_cached_sizze_81920 < (size_t) bytes_75892) {
        mem_75950 = realloc(mem_75950, bytes_75892);
        mem_75950_cached_sizze_81920 = bytes_75892;
    }
    if (mem_75965_cached_sizze_81921 < (size_t) bytes_75895) {
        mem_75965 = realloc(mem_75965, bytes_75895);
        mem_75965_cached_sizze_81921 = bytes_75895;
    }
    if (mem_75968_cached_sizze_81922 < (size_t) bytes_75892) {
        mem_75968 = realloc(mem_75968, bytes_75892);
        mem_75968_cached_sizze_81922 = bytes_75892;
    }
    if (mem_75995_cached_sizze_81923 < (size_t) bytes_75892) {
        mem_75995 = realloc(mem_75995, bytes_75892);
        mem_75995_cached_sizze_81923 = bytes_75892;
    }
    if (mem_76010_cached_sizze_81924 < (size_t) bytes_75904) {
        mem_76010 = realloc(mem_76010, bytes_75904);
        mem_76010_cached_sizze_81924 = bytes_75904;
    }
    if (mem_76025_cached_sizze_81925 < (size_t) bytes_75943) {
        mem_76025 = realloc(mem_76025, bytes_75943);
        mem_76025_cached_sizze_81925 = bytes_75943;
    }
    if (mem_76028_cached_sizze_81926 < (size_t) bytes_75943) {
        mem_76028 = realloc(mem_76028, bytes_75943);
        mem_76028_cached_sizze_81926 = bytes_75943;
    }
    if (mem_76045_cached_sizze_81927 < (size_t) bytes_75904) {
        mem_76045 = realloc(mem_76045, bytes_75904);
        mem_76045_cached_sizze_81927 = bytes_75904;
    }
    if (mem_76048_cached_sizze_81928 < (size_t) bytes_75904) {
        mem_76048 = realloc(mem_76048, bytes_75904);
        mem_76048_cached_sizze_81928 = bytes_75904;
    }
    for (; iter_79717 < end; iter_79717++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_79905 = m_70279;
        int64_t gtid_73700 = iter_79717;
        int64_t remnant_79906 = iter_79717 - gtid_73700;
        int64_t discard_75141;
        int64_t scanacc_79719 = (int64_t) 0;
        
        for (int64_t i_79718 = 0; i_79718 < n_70280; i_79718++) {
            float x_79721 = ((float *) Y_mem_75353.mem)[gtid_73700 * n_70280 +
                                                        i_79718];
            bool isnan_res_79722;
            
            isnan_res_79722 = futrts_isnan32(x_79721);
            
            bool defunc_0_p_res_79723 = !isnan_res_79722;
            int64_t defunc_0_f_res_79724 = btoi_bool_i64(defunc_0_p_res_79723);
            int64_t defunc_1_op_res_79725 = add64(defunc_0_f_res_79724,
                                                  scanacc_79719);
            
            ((int64_t *) mem_75950)[i_79718] = defunc_1_op_res_79725;
            
            int64_t scanacc_tmp_79907 = defunc_1_op_res_79725;
            
            scanacc_79719 = scanacc_tmp_79907;
        }
        discard_75141 = scanacc_79719;
        
        int64_t last_res_71119 = ((int64_t *) mem_75950)[i_70294];
        
        for (int64_t i_79909 = 0; i_79909 < n_70280; i_79909++) {
            ((float *) mem_75965)[i_79909] = 0.0F;
        }
        for (int64_t i_79910 = 0; i_79910 < n_70280; i_79910++) {
            ((int64_t *) mem_75968)[i_79910] = (int64_t) -1;
        }
        for (int64_t write_iter_79727 = 0; write_iter_79727 < n_70280;
             write_iter_79727++) {
            float write_iv_79730 = ((float *) Y_mem_75353.mem)[gtid_73700 *
                                                               n_70280 +
                                                               write_iter_79727];
            bool isnan_res_79731;
            
            isnan_res_79731 = futrts_isnan32(write_iv_79730);
            
            bool defunc_0_p_res_79732 = !isnan_res_79731;
            int64_t defunc_1_f_res_79733;
            
            if (defunc_0_p_res_79732) {
                int64_t write_iv_79734 =
                        ((int64_t *) mem_75950)[write_iter_79727];
                int64_t defunc_1_f_res_t_res_79735 = sub64(write_iv_79734,
                                                           (int64_t) 1);
                
                defunc_1_f_res_79733 = defunc_1_f_res_t_res_79735;
            } else {
                defunc_1_f_res_79733 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_79733) &&
                slt64(defunc_1_f_res_79733, n_70280)) {
                ((int64_t *) mem_75968)[defunc_1_f_res_79733] =
                    write_iter_79727;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_79733) &&
                slt64(defunc_1_f_res_79733, n_70280)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_75965 + defunc_1_f_res_79733 * (int64_t) 4,
                            Y_mem_75353.mem + (gtid_73700 * n_70280 +
                                               write_iter_79727) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        for (int64_t i_79739 = 0; i_79739 < n_70280; i_79739++) {
            int64_t x_79741 = ((int64_t *) mem_75968)[i_79739];
            int64_t defunc_0_f_res_79742 = add64((int64_t) 1, x_79741);
            
            ((int64_t *) mem_75995)[i_79739] = defunc_0_f_res_79742;
        }
        
        int64_t min_arg_71134 = sub64(last_res_71119, (int64_t) 1);
        int64_t min_arg_71135 = sub64(last_res_71119, min_res_70300);
        int64_t min_res_71136 = smin64(q_70282, last_res_71119);
        float i64_res_71137 = sitofp_i64_f32(last_res_71119);
        float x_71138 = i64_res_70306 - i64_res_71137;
        float max_arg_71139 = x_71138 / 2.0F;
        float max_res_71140 = fmax32(0.0F, max_arg_71139);
        
        for (int64_t i_79744 = 0; i_79744 < q_70282; i_79744++) {
            bool cond_79746 = sle64(last_res_71119, i_79744);
            float defunc_0_f_res_79747;
            
            if (cond_79746) {
                defunc_0_f_res_79747 = 0.0F;
            } else {
                defunc_0_f_res_79747 = 1.0F;
            }
            ((float *) mem_76010)[i_79744] = defunc_0_f_res_79747;
        }
        for (int64_t i_79749 = 0; i_79749 < n_m_70288; i_79749++) {
            int64_t min_arg_79752 = mul64(jump_70284, i_79749);
            int64_t min_res_79753 = smin64(i_70294, min_arg_79752);
            int64_t defunc_0_g_res_79754 = add64((int64_t) 1, min_res_79753);
            bool init_idx_79755;
            int64_t init_idx_79756;
            int64_t init_idx_79757;
            bool loop_while_79758;
            int64_t low_79759;
            int64_t high_79760;
            
            loop_while_79758 = x_70295;
            low_79759 = (int64_t) 0;
            high_79760 = i_70294;
            while (loop_while_79758) {
                int64_t x_79761 = add64(low_79759, high_79760);
                int64_t mid_79762 = sdiv64(x_79761, (int64_t) 2);
                bool x_79763 = sle64((int64_t) 0, mid_79762);
                bool y_79764 = slt64(mid_79762, n_70280);
                bool bounds_check_79765 = x_79763 && y_79764;
                bool index_certs_79766;
                
                if (!bounds_check_79765) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_79762,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t mid_id_79767 = ((int64_t *) mem_75995)[mid_79762];
                bool cond_79768 = slt64(mid_id_79767, (int64_t) 0);
                int64_t mid_idx_79769;
                
                if (cond_79768) {
                    mid_idx_79769 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_79769 = mid_id_79767;
                }
                
                bool cond_79770 = sle64(defunc_0_g_res_79754, mid_idx_79769);
                int64_t loopres_79771;
                int64_t loopres_79772;
                
                if (cond_79770) {
                    int64_t loopres_t_res_79773 = sub64(mid_79762, (int64_t) 1);
                    
                    loopres_79771 = low_79759;
                    loopres_79772 = loopres_t_res_79773;
                } else {
                    int64_t loopres_f_res_79774 = add64((int64_t) 1, mid_79762);
                    
                    loopres_79771 = loopres_f_res_79774;
                    loopres_79772 = high_79760;
                }
                
                bool loop_cond_79775 = sle64(loopres_79771, loopres_79772);
                bool loop_while_tmp_79917 = loop_cond_79775;
                int64_t low_tmp_79918 = loopres_79771;
                int64_t high_tmp_79919 = loopres_79772;
                
                loop_while_79758 = loop_while_tmp_79917;
                low_79759 = low_tmp_79918;
                high_79760 = high_tmp_79919;
            }
            init_idx_79755 = loop_while_79758;
            init_idx_79756 = low_79759;
            init_idx_79757 = high_79760;
            
            bool idx_79776;
            int64_t idx_79777;
            int64_t idx_79778;
            int64_t idx_79779;
            bool loop_while_79780;
            int64_t l_idx_79781;
            int64_t r_idx_79782;
            int64_t span_79783;
            
            loop_while_79780 = loop_cond_70305;
            l_idx_79781 = init_idx_79756;
            r_idx_79782 = init_idx_79756;
            span_79783 = (int64_t) 1;
            while (loop_while_79780) {
                int64_t max_arg_79784 = sub64(l_idx_79781, (int64_t) 1);
                int64_t max_res_79785 = smax64((int64_t) 0, max_arg_79784);
                int64_t min_arg_79786 = add64((int64_t) 1, r_idx_79782);
                int64_t min_res_79787 = smin64(min_arg_71134, min_arg_79786);
                bool x_79788 = sle64((int64_t) 0, max_res_79785);
                bool y_79789 = slt64(max_res_79785, n_70280);
                bool bounds_check_79790 = x_79788 && y_79789;
                bool index_certs_79791;
                
                if (!bounds_check_79790) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_79785,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t x_79792 = ((int64_t *) mem_75995)[max_res_79785];
                int64_t abs_arg_79793 = sub64(x_79792, defunc_0_g_res_79754);
                int64_t abs_res_79794 = abs64(abs_arg_79793);
                bool x_79795 = sle64((int64_t) 0, min_res_79787);
                bool y_79796 = slt64(min_res_79787, n_70280);
                bool bounds_check_79797 = x_79795 && y_79796;
                bool index_certs_79798;
                
                if (!bounds_check_79797) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_79787,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t x_79799 = ((int64_t *) mem_75995)[min_res_79787];
                int64_t abs_arg_79800 = sub64(x_79799, defunc_0_g_res_79754);
                int64_t abs_res_79801 = abs64(abs_arg_79800);
                bool cond_79802 = max_res_79785 == l_idx_79781;
                int64_t loopres_79803;
                int64_t loopres_79804;
                int64_t loopres_79805;
                
                if (cond_79802) {
                    loopres_79803 = l_idx_79781;
                    loopres_79804 = r_idx_79782;
                    loopres_79805 = min_res_70300;
                } else {
                    bool cond_79806 = slt64(abs_res_79794, abs_res_79801);
                    bool cond_f_res_79807 = min_res_79787 == r_idx_79782;
                    bool x_79808 = !cond_79806;
                    bool y_79809 = cond_f_res_79807 && x_79808;
                    bool cond_79810 = cond_79806 || y_79809;
                    int64_t loopres_f_res_79811;
                    
                    if (cond_79810) {
                        loopres_f_res_79811 = max_res_79785;
                    } else {
                        loopres_f_res_79811 = l_idx_79781;
                    }
                    
                    int64_t loopres_f_res_79812;
                    
                    if (cond_79810) {
                        loopres_f_res_79812 = r_idx_79782;
                    } else {
                        loopres_f_res_79812 = min_res_79787;
                    }
                    
                    int64_t loopres_f_res_79813;
                    
                    if (cond_79810) {
                        int64_t loopres_f_res_t_res_79814 = add64((int64_t) 1,
                                                                  span_79783);
                        
                        loopres_f_res_79813 = loopres_f_res_t_res_79814;
                    } else {
                        int64_t loopres_f_res_f_res_79815 = add64((int64_t) 1,
                                                                  span_79783);
                        
                        loopres_f_res_79813 = loopres_f_res_f_res_79815;
                    }
                    loopres_79803 = loopres_f_res_79811;
                    loopres_79804 = loopres_f_res_79812;
                    loopres_79805 = loopres_f_res_79813;
                }
                
                bool loop_cond_79816 = slt64(loopres_79805, min_res_70300);
                bool loop_while_tmp_79920 = loop_cond_79816;
                int64_t l_idx_tmp_79921 = loopres_79803;
                int64_t r_idx_tmp_79922 = loopres_79804;
                int64_t span_tmp_79923 = loopres_79805;
                
                loop_while_79780 = loop_while_tmp_79920;
                l_idx_79781 = l_idx_tmp_79921;
                r_idx_79782 = r_idx_tmp_79922;
                span_79783 = span_tmp_79923;
            }
            idx_79776 = loop_while_79780;
            idx_79777 = l_idx_79781;
            idx_79778 = r_idx_79782;
            idx_79779 = span_79783;
            
            int64_t min_res_79817 = smin64(min_arg_71135, idx_79777);
            int64_t max_res_79818 = smax64((int64_t) 0, min_res_79817);
            int64_t x_79819 = add64(min_res_71136, max_res_79818);
            int64_t r_79820 = sub64(x_79819, (int64_t) 1);
            bool x_79821 = sle64((int64_t) 0, r_79820);
            bool y_79822 = slt64(r_79820, n_70280);
            bool bounds_check_79823 = x_79821 && y_79822;
            bool index_certs_79824;
            
            if (!bounds_check_79823) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_79820,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_79825 = ((int64_t *) mem_75968)[r_79820];
            int64_t abs_arg_79826 = sub64(x_79825, min_res_79753);
            int64_t abs_res_79827 = abs64(abs_arg_79826);
            bool x_79828 = sle64((int64_t) 0, max_res_79818);
            bool y_79829 = slt64(max_res_79818, n_70280);
            bool bounds_check_79830 = x_79828 && y_79829;
            bool index_certs_79831;
            
            if (!bounds_check_79830) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_79818,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_79832 = ((int64_t *) mem_75968)[max_res_79818];
            int64_t abs_arg_79833 = sub64(x_79832, min_res_79753);
            int64_t abs_res_79834 = abs64(abs_arg_79833);
            int64_t max_res_79835 = smax64(abs_res_79827, abs_res_79834);
            float defunc_0_f_res_79836 = sitofp_i64_f32(max_res_79835);
            float defunc_1_f_res_79837 = max_res_71140 + defunc_0_f_res_79836;
            float defunc_2_reduce_res_79840;
            float defunc_2_reduce_res_79841;
            float defunc_2_reduce_res_79842;
            float redout_79846;
            float redout_79847;
            float redout_79848;
            
            redout_79846 = 0.0F;
            redout_79847 = 0.0F;
            redout_79848 = 0.0F;
            for (int64_t i_79845 = 0; i_79845 < q_70282; i_79845++) {
                float x_79851 = ((float *) mem_76010)[i_79845];
                bool cond_79852 = sle64(last_res_71119, i_79845);
                int64_t defunc_0_f_res_79853;
                
                if (cond_79852) {
                    defunc_0_f_res_79853 = (int64_t) 0;
                } else {
                    int64_t i_79854 = add64(max_res_79818, i_79845);
                    int64_t defunc_0_add_arg_79855 =
                            ((int64_t *) mem_75968)[i_79854];
                    int64_t defunc_1_add_res_79856 = add64((int64_t) 1,
                                                           defunc_0_add_arg_79855);
                    
                    defunc_0_f_res_79853 = defunc_1_add_res_79856;
                }
                
                int64_t binop_p_79857 = sub64(defunc_0_f_res_79853,
                                              min_res_79753);
                float defunc_0_f_res_79858 = sitofp_i64_f32(binop_p_79857);
                float abs_res_79859 = (float) fabs(defunc_0_f_res_79858);
                float tmp1_79860 = abs_res_79859 / defunc_1_f_res_79837;
                float x_79861 = tmp1_79860 * tmp1_79860;
                float y_79862 = tmp1_79860 * x_79861;
                float tmp2_79863 = 1.0F - y_79862;
                float x_79864 = tmp2_79863 * tmp2_79863;
                float tmp3_79865 = tmp2_79863 * x_79864;
                float tmp4_79866 = x_79851 * tmp3_79865;
                float defunc_1_f_res_79867 = defunc_0_f_res_79858 * tmp4_79866;
                float defunc_1_f_res_79868 = defunc_0_f_res_79858 *
                      defunc_1_f_res_79867;
                float defunc_1_op_res_79869 = tmp4_79866 + redout_79846;
                float defunc_1_op_res_79870 = defunc_1_f_res_79867 +
                      redout_79847;
                float defunc_1_op_res_79871 = defunc_1_f_res_79868 +
                      redout_79848;
                
                ((float *) mem_76045)[i_79845] = defunc_1_f_res_79867;
                ((float *) mem_76048)[i_79845] = tmp4_79866;
                
                float redout_tmp_79924 = defunc_1_op_res_79869;
                float redout_tmp_79925 = defunc_1_op_res_79870;
                float redout_tmp_79926 = defunc_1_op_res_79871;
                
                redout_79846 = redout_tmp_79924;
                redout_79847 = redout_tmp_79925;
                redout_79848 = redout_tmp_79926;
            }
            defunc_2_reduce_res_79840 = redout_79846;
            defunc_2_reduce_res_79841 = redout_79847;
            defunc_2_reduce_res_79842 = redout_79848;
            
            float x_79874 = defunc_2_reduce_res_79840 *
                  defunc_2_reduce_res_79842;
            float y_79875 = defunc_2_reduce_res_79841 *
                  defunc_2_reduce_res_79841;
            float y_79876 = x_79874 - y_79875;
            float det1_79877 = 1.0F / y_79876;
            float a11_79878 = defunc_2_reduce_res_79842 * det1_79877;
            float x_79879 = 0.0F - defunc_2_reduce_res_79841;
            float b11_79880 = det1_79877 * x_79879;
            float c11_79881 = defunc_2_reduce_res_79840 * det1_79877;
            float defunc_2_reduce_res_79882;
            float defunc_2_reduce_res_79883;
            float redout_79885;
            float redout_79886;
            
            redout_79885 = 0.0F;
            redout_79886 = 0.0F;
            for (int64_t i_79884 = 0; i_79884 < q_70282; i_79884++) {
                float x_79887 = ((float *) mem_76048)[i_79884];
                float x_79888 = ((float *) mem_76045)[i_79884];
                bool cond_79889 = sle64(last_res_71119, i_79884);
                float defunc_0_f_res_79890;
                
                if (cond_79889) {
                    defunc_0_f_res_79890 = 0.0F;
                } else {
                    int64_t i_79891 = add64(max_res_79818, i_79884);
                    float defunc_0_add_arg_79892 =
                          ((float *) mem_75965)[i_79891];
                    
                    defunc_0_f_res_79890 = defunc_0_add_arg_79892;
                }
                
                float x_79893 = a11_79878 * x_79887;
                float y_79894 = b11_79880 * x_79888;
                float x_79895 = x_79893 + y_79894;
                float defunc_9_fit_fun_res_79896 = defunc_0_f_res_79890 *
                      x_79895;
                float x_79897 = b11_79880 * x_79887;
                float y_79898 = c11_79881 * x_79888;
                float x_79899 = x_79897 + y_79898;
                float defunc_9_slope_fun_res_79900 = defunc_0_f_res_79890 *
                      x_79899;
                float defunc_1_op_res_79901 = defunc_9_fit_fun_res_79896 +
                      redout_79885;
                float defunc_1_op_res_79902 = defunc_9_slope_fun_res_79900 +
                      redout_79886;
                float redout_tmp_79929 = defunc_1_op_res_79901;
                float redout_tmp_79930 = defunc_1_op_res_79902;
                
                redout_79885 = redout_tmp_79929;
                redout_79886 = redout_tmp_79930;
            }
            defunc_2_reduce_res_79882 = redout_79885;
            defunc_2_reduce_res_79883 = redout_79886;
            ((float *) mem_76025)[i_79749] = defunc_2_reduce_res_79882;
            ((float *) mem_76028)[i_79749] = defunc_2_reduce_res_79883;
        }
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_76086.mem + gtid_73700 * n_m_70288 * (int64_t) 4,
                    mem_76025 + (int64_t) 0, n_m_70288 * (int64_t) 4);
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_76090.mem + gtid_73700 * n_m_70288 * (int64_t) 4,
                    mem_76028 + (int64_t) 0, n_m_70288 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75950);
    free(mem_75965);
    free(mem_75968);
    free(mem_75995);
    free(mem_76010);
    free(mem_76025);
    free(mem_76028);
    free(mem_76045);
    free(mem_76048);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81919_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81919_end -
                 futhark_mc_segmap_parloop_81919_start;
        
        ctx->futhark_mc_segmap_parloop_81919_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81919_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81919_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81917(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73699 = tid;
    int num_tasks_79716 = info.nsubtasks;
    struct futhark_mc_task_81916 *futhark_mc_task_81916 =
                                 (struct futhark_mc_task_81916 *) args;
    struct futhark_context *ctx = futhark_mc_task_81916->ctx;
    uint64_t futhark_mc_segmap_task_81917_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81917_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_task_81916->free_m_70279;
    int64_t n_70280 = futhark_mc_task_81916->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81916->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81916->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81916->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81916->free_i_70294;
    bool x_70295 = futhark_mc_task_81916->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81916->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81916->free_loop_cond_70305;
    float i64_res_70306 = futhark_mc_task_81916->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81916->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75892 = futhark_mc_task_81916->free_bytes_75892;
    int64_t bytes_75895 = futhark_mc_task_81916->free_bytes_75895;
    int64_t bytes_75904 = futhark_mc_task_81916->free_bytes_75904;
    int64_t bytes_75943 = futhark_mc_task_81916->free_bytes_75943;
    struct memblock mem_76086 = {.desc ="mem_76086", .mem =
                                 futhark_mc_task_81916->free_mem_76086, .size =
                                 0, .references =NULL};
    struct memblock mem_76090 = {.desc ="mem_76090", .mem =
                                 futhark_mc_task_81916->free_mem_76090, .size =
                                 0, .references =NULL};
    int64_t iter_79717;
    struct futhark_mc_segmap_parloop_struct_81918
    futhark_mc_segmap_parloop_struct_81918;
    
    futhark_mc_segmap_parloop_struct_81918.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81918.free_m_70279 = m_70279;
    futhark_mc_segmap_parloop_struct_81918.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81918.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81918.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81918.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81918.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81918.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81918.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81918.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81918.free_i64_res_70306 = i64_res_70306;
    futhark_mc_segmap_parloop_struct_81918.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81918.free_bytes_75892 = bytes_75892;
    futhark_mc_segmap_parloop_struct_81918.free_bytes_75895 = bytes_75895;
    futhark_mc_segmap_parloop_struct_81918.free_bytes_75904 = bytes_75904;
    futhark_mc_segmap_parloop_struct_81918.free_bytes_75943 = bytes_75943;
    futhark_mc_segmap_parloop_struct_81918.free_mem_76086 = mem_76086.mem;
    futhark_mc_segmap_parloop_struct_81918.free_mem_76090 = mem_76090.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81919_task;
    
    futhark_mc_segmap_parloop_81919_task.name =
        "futhark_mc_segmap_parloop_81919";
    futhark_mc_segmap_parloop_81919_task.fn = futhark_mc_segmap_parloop_81919;
    futhark_mc_segmap_parloop_81919_task.args =
        &futhark_mc_segmap_parloop_struct_81918;
    futhark_mc_segmap_parloop_81919_task.iterations = iterations;
    futhark_mc_segmap_parloop_81919_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81919_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81919_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81919_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81919_task);
    
    if (futhark_mc_segmap_parloop_81919_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81919_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81919_total_end -
                 futhark_mc_segmap_parloop_81919_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81919_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81919_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81919_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81917_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81917_end -
                 futhark_mc_segmap_task_81917_start;
        
        ctx->futhark_mc_segmap_task_81917_runs[tid]++;
        ctx->futhark_mc_segmap_task_81917_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81917_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81930 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_75892;
    int64_t free_bytes_75895;
    int64_t free_bytes_75904;
    int64_t free_bytes_75943;
    unsigned char *free_mem_76086;
    unsigned char *free_mem_76090;
};
struct futhark_mc_task_81939 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_73702;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75893;
};
struct futhark_mc_scan_stage_1_parloop_struct_81942 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_73702;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75893;
};
static int futhark_mc_scan_stage_1_parloop_81943(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_73703, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_81942
    *futhark_mc_scan_stage_1_parloop_struct_81942 =
    (struct futhark_mc_scan_stage_1_parloop_struct_81942 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_81942->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_81943_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81943_start = get_wall_time();
    
    int64_t n_70280 =
            futhark_mc_scan_stage_1_parloop_struct_81942->free_n_70280;
    int64_t gtid_73702 =
            futhark_mc_scan_stage_1_parloop_struct_81942->free_gtid_73702;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_81942->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75893 = {.desc ="mem_75893", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_81942->free_mem_75893,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_80255 = start;
    int64_t x_79932;
    int64_t x_79933;
    
    x_79932 = (int64_t) 0;
    for (; iter_80255 < end; iter_80255++) {
        int64_t gtid_73704 = iter_80255;
        
        // stage 1 scan body
        {
            float x_79935 = ((float *) Y_mem_75353.mem)[gtid_73702 * n_70280 +
                                                        gtid_73704];
            bool isnan_res_79936;
            
            isnan_res_79936 = futrts_isnan32(x_79935);
            
            bool defunc_0_p_res_79937 = !isnan_res_79936;
            int64_t defunc_0_f_res_79938 = btoi_bool_i64(defunc_0_p_res_79937);
            
            // write mapped values results to memory
            { }
            x_79932 = x_79932;
            // Read next values
            {
                x_79933 = defunc_0_f_res_79938;
            }
            
            int64_t defunc_1_op_res_79934 = add64(x_79932, x_79933);
            
            ((int64_t *) mem_75893.mem)[gtid_73704] = defunc_1_op_res_79934;
            x_79932 = defunc_1_op_res_79934;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81943_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81943_end -
                 futhark_mc_scan_stage_1_parloop_81943_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_81943_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_81943_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_81943_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_81944 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_73702;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75893;
};
static int futhark_mc_scan_stage_3_parloop_81945(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_73703, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_81944
    *futhark_mc_scan_stage_3_parloop_struct_81944 =
    (struct futhark_mc_scan_stage_3_parloop_struct_81944 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_81944->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_81945_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_81945_start = get_wall_time();
    
    int64_t n_70280 =
            futhark_mc_scan_stage_3_parloop_struct_81944->free_n_70280;
    int64_t gtid_73702 =
            futhark_mc_scan_stage_3_parloop_struct_81944->free_gtid_73702;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_81944->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75893 = {.desc ="mem_75893", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_81944->free_mem_75893,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_80267 = start;
    int64_t x_80264;
    int64_t x_80265;
    
    if (iter_80267 == (int64_t) 0) {
        x_80264 = (int64_t) 0;
    } else {
        x_80264 = ((int64_t *) mem_75893.mem)[iter_80267 - (int64_t) 1];
    }
    for (; iter_80267 < end; iter_80267++) {
        int64_t gtid_73704 = iter_80267;
        
        // stage 3 scan body
        {
            float x_79935 = ((float *) Y_mem_75353.mem)[gtid_73702 * n_70280 +
                                                        gtid_73704];
            bool isnan_res_79936;
            
            isnan_res_79936 = futrts_isnan32(x_79935);
            
            bool defunc_0_p_res_79937 = !isnan_res_79936;
            int64_t defunc_0_f_res_79938 = btoi_bool_i64(defunc_0_p_res_79937);
            
            x_80264 = x_80264;
            x_80265 = defunc_0_f_res_79938;
            
            int64_t defunc_1_op_res_80266 = add64(x_80264, x_80265);
            
            ((int64_t *) mem_75893.mem)[gtid_73704] = defunc_1_op_res_80266;
            x_80264 = defunc_1_op_res_80266;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_81945_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81945_end -
                 futhark_mc_scan_stage_3_parloop_81945_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_81945_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_81945_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_81945_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_81940(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73703 = tid;
    int num_tasks_80254 = info.nsubtasks;
    struct futhark_mc_task_81939 *futhark_mc_task_81939 =
                                 (struct futhark_mc_task_81939 *) args;
    struct futhark_context *ctx = futhark_mc_task_81939->ctx;
    uint64_t futhark_mc_segscan_task_81940_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_81940_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81939->free_n_70280;
    int64_t gtid_73702 = futhark_mc_task_81939->free_gtid_73702;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81939->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75893 = {.desc ="mem_75893", .mem =
                                 futhark_mc_task_81939->free_mem_75893, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_80261_cached_sizze_81941 = 0;
    unsigned char *scan_stage_2_accum_mem_80261 = NULL;
    int64_t iter_80255;
    struct futhark_mc_scan_stage_1_parloop_struct_81942
    futhark_mc_scan_stage_1_parloop_struct_81942;
    
    futhark_mc_scan_stage_1_parloop_struct_81942.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_81942.free_n_70280 = n_70280;
    futhark_mc_scan_stage_1_parloop_struct_81942.free_gtid_73702 = gtid_73702;
    futhark_mc_scan_stage_1_parloop_struct_81942.free_Y_mem_75353 =
        Y_mem_75353.mem;
    futhark_mc_scan_stage_1_parloop_struct_81942.free_mem_75893 = mem_75893.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_81943_task;
    
    futhark_mc_scan_stage_1_parloop_81943_task.name =
        "futhark_mc_scan_stage_1_parloop_81943";
    futhark_mc_scan_stage_1_parloop_81943_task.fn =
        futhark_mc_scan_stage_1_parloop_81943;
    futhark_mc_scan_stage_1_parloop_81943_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_81942;
    futhark_mc_scan_stage_1_parloop_81943_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_81943_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_81943_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_81943_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_81943_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_81943_task);
    
    if (futhark_mc_scan_stage_1_parloop_81943_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_81943_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_81943_total_end -
                 futhark_mc_scan_stage_1_parloop_81943_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81943_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81943_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_81943_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_80254)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_80256;
        int64_t x_80257;
        int64_t offset_80259 = (int64_t) 0;
        int64_t offset_index_80260 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_80261_cached_sizze_81941 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_80261 = realloc(scan_stage_2_accum_mem_80261,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_80261_cached_sizze_81941 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_80261)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_80263 = 0; i_80263 < num_tasks_80254 - 1; i_80263++) {
            offset_80259 = squot64(n_70280, sext_i32_i64(num_tasks_80254));
            if (slt64(sext_i32_i64(i_80263), srem64(n_70280,
                                                    sext_i32_i64(num_tasks_80254)))) {
                offset_80259 += (int64_t) 1;
            }
            offset_index_80260 += offset_80259;
            
            int64_t gtid_73704 = offset_index_80260;
            float x_79935 = ((float *) Y_mem_75353.mem)[gtid_73702 * n_70280 +
                                                        gtid_73704];
            bool isnan_res_79936;
            
            isnan_res_79936 = futrts_isnan32(x_79935);
            
            bool defunc_0_p_res_79937 = !isnan_res_79936;
            int64_t defunc_0_f_res_79938 = btoi_bool_i64(defunc_0_p_res_79937);
            
            // Read carry in
            {
                x_80256 =
                    ((int64_t *) scan_stage_2_accum_mem_80261)[(int64_t) 0];
            }
            // Read next values
            {
                x_80257 = ((int64_t *) mem_75893.mem)[offset_index_80260 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_80258 = add64(x_80256, x_80257);
            
            ((int64_t *) mem_75893.mem)[offset_index_80260 - (int64_t) 1] =
                defunc_1_op_res_80258;
            ((int64_t *) scan_stage_2_accum_mem_80261)[(int64_t) 0] =
                defunc_1_op_res_80258;
        }
        
        int64_t iter_80267 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_81944
        futhark_mc_scan_stage_3_parloop_struct_81944;
        
        futhark_mc_scan_stage_3_parloop_struct_81944.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_81944.free_n_70280 = n_70280;
        futhark_mc_scan_stage_3_parloop_struct_81944.free_gtid_73702 =
            gtid_73702;
        futhark_mc_scan_stage_3_parloop_struct_81944.free_Y_mem_75353 =
            Y_mem_75353.mem;
        futhark_mc_scan_stage_3_parloop_struct_81944.free_mem_75893 =
            mem_75893.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_81945_task;
        
        futhark_mc_scan_stage_3_parloop_81945_task.name =
            "futhark_mc_scan_stage_3_parloop_81945";
        futhark_mc_scan_stage_3_parloop_81945_task.fn =
            futhark_mc_scan_stage_3_parloop_81945;
        futhark_mc_scan_stage_3_parloop_81945_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_81944;
        futhark_mc_scan_stage_3_parloop_81945_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_81945_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_81945_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_81945_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_81945_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_81945_task);
        
        if (futhark_mc_scan_stage_3_parloop_81945_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_81945_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_81945_total_end -
                     futhark_mc_scan_stage_3_parloop_81945_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81945_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81945_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_81945_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_80261);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_81940_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_81940_end -
                 futhark_mc_segscan_task_81940_start;
        
        ctx->futhark_mc_segscan_task_81940_runs[tid]++;
        ctx->futhark_mc_segscan_task_81940_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_81940_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81946 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_73702;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75893;
    unsigned char *free_mem_75896;
    unsigned char *free_mem_75899;
};
struct futhark_mc_segmap_parloop_struct_81948 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_73702;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_75893;
    unsigned char *free_mem_75896;
    unsigned char *free_mem_75899;
};
static int futhark_mc_segmap_parloop_81949(void *args, int64_t start,
                                           int64_t end, int flat_tid_73705,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81948
    *futhark_mc_segmap_parloop_struct_81948 =
    (struct futhark_mc_segmap_parloop_struct_81948 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81948->ctx;
    uint64_t futhark_mc_segmap_parloop_81949_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81949_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81948->free_n_70280;
    int64_t gtid_73702 =
            futhark_mc_segmap_parloop_struct_81948->free_gtid_73702;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81948->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75893 = {.desc ="mem_75893", .mem =
                                 futhark_mc_segmap_parloop_struct_81948->free_mem_75893,
                                 .size =0, .references =NULL};
    struct memblock mem_75896 = {.desc ="mem_75896", .mem =
                                 futhark_mc_segmap_parloop_struct_81948->free_mem_75896,
                                 .size =0, .references =NULL};
    struct memblock mem_75899 = {.desc ="mem_75899", .mem =
                                 futhark_mc_segmap_parloop_struct_81948->free_mem_75899,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_80271 = start;
    
    for (; iter_80271 < end; iter_80271++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_80274 = n_70280;
        int64_t gtid_73706 = iter_80271;
        int64_t remnant_80275 = iter_80271 - gtid_73706;
        float x_79939 = ((float *) Y_mem_75353.mem)[gtid_73702 * n_70280 +
                                                    gtid_73706];
        bool isnan_res_79940;
        
        isnan_res_79940 = futrts_isnan32(x_79939);
        
        bool defunc_0_p_res_79941 = !isnan_res_79940;
        int64_t defunc_1_f_res_79942;
        
        if (defunc_0_p_res_79941) {
            int64_t x_80272 = ((int64_t *) mem_75893.mem)[gtid_73706];
            int64_t defunc_1_f_res_t_res_80273 = sub64(x_80272, (int64_t) 1);
            
            defunc_1_f_res_79942 = defunc_1_f_res_t_res_80273;
        } else {
            defunc_1_f_res_79942 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_79942) &&
            slt64(defunc_1_f_res_79942, n_70280)) {
            ((int64_t *) mem_75899.mem)[defunc_1_f_res_79942] = gtid_73706;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_79942) &&
            slt64(defunc_1_f_res_79942, n_70280)) {
            ((float *) mem_75896.mem)[defunc_1_f_res_79942] = x_79939;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81949_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81949_end -
                 futhark_mc_segmap_parloop_81949_start;
        
        ctx->futhark_mc_segmap_parloop_81949_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81949_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81949_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81947(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73705 = tid;
    int num_tasks_80270 = info.nsubtasks;
    struct futhark_mc_task_81946 *futhark_mc_task_81946 =
                                 (struct futhark_mc_task_81946 *) args;
    struct futhark_context *ctx = futhark_mc_task_81946->ctx;
    uint64_t futhark_mc_segmap_task_81947_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81947_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81946->free_n_70280;
    int64_t gtid_73702 = futhark_mc_task_81946->free_gtid_73702;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81946->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_75893 = {.desc ="mem_75893", .mem =
                                 futhark_mc_task_81946->free_mem_75893, .size =
                                 0, .references =NULL};
    struct memblock mem_75896 = {.desc ="mem_75896", .mem =
                                 futhark_mc_task_81946->free_mem_75896, .size =
                                 0, .references =NULL};
    struct memblock mem_75899 = {.desc ="mem_75899", .mem =
                                 futhark_mc_task_81946->free_mem_75899, .size =
                                 0, .references =NULL};
    int64_t iter_80271;
    struct futhark_mc_segmap_parloop_struct_81948
    futhark_mc_segmap_parloop_struct_81948;
    
    futhark_mc_segmap_parloop_struct_81948.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81948.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81948.free_gtid_73702 = gtid_73702;
    futhark_mc_segmap_parloop_struct_81948.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81948.free_mem_75893 = mem_75893.mem;
    futhark_mc_segmap_parloop_struct_81948.free_mem_75896 = mem_75896.mem;
    futhark_mc_segmap_parloop_struct_81948.free_mem_75899 = mem_75899.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81949_task;
    
    futhark_mc_segmap_parloop_81949_task.name =
        "futhark_mc_segmap_parloop_81949";
    futhark_mc_segmap_parloop_81949_task.fn = futhark_mc_segmap_parloop_81949;
    futhark_mc_segmap_parloop_81949_task.args =
        &futhark_mc_segmap_parloop_struct_81948;
    futhark_mc_segmap_parloop_81949_task.iterations = iterations;
    futhark_mc_segmap_parloop_81949_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81949_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81949_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81949_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81949_task);
    
    if (futhark_mc_segmap_parloop_81949_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81949_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81949_total_end -
                 futhark_mc_segmap_parloop_81949_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81949_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81949_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81949_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81947_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81947_end -
                 futhark_mc_segmap_task_81947_start;
        
        ctx->futhark_mc_segmap_task_81947_runs[tid]++;
        ctx->futhark_mc_segmap_task_81947_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81947_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81950 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    unsigned char *free_mem_75899;
    unsigned char *free_mem_75902;
};
struct futhark_mc_segmap_parloop_struct_81952 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    unsigned char *free_mem_75899;
    unsigned char *free_mem_75902;
};
static int futhark_mc_segmap_parloop_81953(void *args, int64_t start,
                                           int64_t end, int flat_tid_73707,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81952
    *futhark_mc_segmap_parloop_struct_81952 =
    (struct futhark_mc_segmap_parloop_struct_81952 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81952->ctx;
    uint64_t futhark_mc_segmap_parloop_81953_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81953_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81952->free_n_70280;
    struct memblock mem_75899 = {.desc ="mem_75899", .mem =
                                 futhark_mc_segmap_parloop_struct_81952->free_mem_75899,
                                 .size =0, .references =NULL};
    struct memblock mem_75902 = {.desc ="mem_75902", .mem =
                                 futhark_mc_segmap_parloop_struct_81952->free_mem_75902,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_80277 = start;
    
    for (; iter_80277 < end; iter_80277++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_80278 = n_70280;
        int64_t gtid_73708 = iter_80277;
        int64_t remnant_80279 = iter_80277 - gtid_73708;
        int64_t x_79945 = ((int64_t *) mem_75899.mem)[gtid_73708];
        int64_t defunc_0_f_res_79946 = add64((int64_t) 1, x_79945);
        
        ((int64_t *) mem_75902.mem)[gtid_73708] = defunc_0_f_res_79946;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81953_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81953_end -
                 futhark_mc_segmap_parloop_81953_start;
        
        ctx->futhark_mc_segmap_parloop_81953_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81953_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81953_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81951(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73707 = tid;
    int num_tasks_80276 = info.nsubtasks;
    struct futhark_mc_task_81950 *futhark_mc_task_81950 =
                                 (struct futhark_mc_task_81950 *) args;
    struct futhark_context *ctx = futhark_mc_task_81950->ctx;
    uint64_t futhark_mc_segmap_task_81951_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81951_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81950->free_n_70280;
    struct memblock mem_75899 = {.desc ="mem_75899", .mem =
                                 futhark_mc_task_81950->free_mem_75899, .size =
                                 0, .references =NULL};
    struct memblock mem_75902 = {.desc ="mem_75902", .mem =
                                 futhark_mc_task_81950->free_mem_75902, .size =
                                 0, .references =NULL};
    int64_t iter_80277;
    struct futhark_mc_segmap_parloop_struct_81952
    futhark_mc_segmap_parloop_struct_81952;
    
    futhark_mc_segmap_parloop_struct_81952.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81952.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81952.free_mem_75899 = mem_75899.mem;
    futhark_mc_segmap_parloop_struct_81952.free_mem_75902 = mem_75902.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81953_task;
    
    futhark_mc_segmap_parloop_81953_task.name =
        "futhark_mc_segmap_parloop_81953";
    futhark_mc_segmap_parloop_81953_task.fn = futhark_mc_segmap_parloop_81953;
    futhark_mc_segmap_parloop_81953_task.args =
        &futhark_mc_segmap_parloop_struct_81952;
    futhark_mc_segmap_parloop_81953_task.iterations = iterations;
    futhark_mc_segmap_parloop_81953_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81953_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81953_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81953_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81953_task);
    
    if (futhark_mc_segmap_parloop_81953_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81953_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81953_total_end -
                 futhark_mc_segmap_parloop_81953_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81953_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81953_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81953_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81951_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81951_end -
                 futhark_mc_segmap_task_81951_start;
        
        ctx->futhark_mc_segmap_task_81951_runs[tid]++;
        ctx->futhark_mc_segmap_task_81951_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81951_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81954 {
    struct futhark_context *ctx;
    int64_t free_q_70282;
    int64_t free_last_res_73879;
    unsigned char *free_mem_75905;
};
struct futhark_mc_segmap_parloop_struct_81956 {
    struct futhark_context *ctx;
    int64_t free_q_70282;
    int64_t free_last_res_73879;
    unsigned char *free_mem_75905;
};
static int futhark_mc_segmap_parloop_81957(void *args, int64_t start,
                                           int64_t end, int flat_tid_73709,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81956
    *futhark_mc_segmap_parloop_struct_81956 =
    (struct futhark_mc_segmap_parloop_struct_81956 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81956->ctx;
    uint64_t futhark_mc_segmap_parloop_81957_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81957_start = get_wall_time();
    
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81956->free_q_70282;
    int64_t last_res_73879 =
            futhark_mc_segmap_parloop_struct_81956->free_last_res_73879;
    struct memblock mem_75905 = {.desc ="mem_75905", .mem =
                                 futhark_mc_segmap_parloop_struct_81956->free_mem_75905,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_80281 = start;
    
    for (; iter_80281 < end; iter_80281++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_80282 = q_70282;
        int64_t gtid_73710 = iter_80281;
        int64_t remnant_80283 = iter_80281 - gtid_73710;
        bool cond_79947 = sle64(last_res_73879, gtid_73710);
        float defunc_0_f_res_79948;
        
        if (cond_79947) {
            defunc_0_f_res_79948 = 0.0F;
        } else {
            defunc_0_f_res_79948 = 1.0F;
        }
        ((float *) mem_75905.mem)[gtid_73710] = defunc_0_f_res_79948;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81957_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81957_end -
                 futhark_mc_segmap_parloop_81957_start;
        
        ctx->futhark_mc_segmap_parloop_81957_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81957_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81957_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81955(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73709 = tid;
    int num_tasks_80280 = info.nsubtasks;
    struct futhark_mc_task_81954 *futhark_mc_task_81954 =
                                 (struct futhark_mc_task_81954 *) args;
    struct futhark_context *ctx = futhark_mc_task_81954->ctx;
    uint64_t futhark_mc_segmap_task_81955_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81955_start = get_wall_time();
    
    int64_t q_70282 = futhark_mc_task_81954->free_q_70282;
    int64_t last_res_73879 = futhark_mc_task_81954->free_last_res_73879;
    struct memblock mem_75905 = {.desc ="mem_75905", .mem =
                                 futhark_mc_task_81954->free_mem_75905, .size =
                                 0, .references =NULL};
    int64_t iter_80281;
    struct futhark_mc_segmap_parloop_struct_81956
    futhark_mc_segmap_parloop_struct_81956;
    
    futhark_mc_segmap_parloop_struct_81956.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81956.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81956.free_last_res_73879 = last_res_73879;
    futhark_mc_segmap_parloop_struct_81956.free_mem_75905 = mem_75905.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81957_task;
    
    futhark_mc_segmap_parloop_81957_task.name =
        "futhark_mc_segmap_parloop_81957";
    futhark_mc_segmap_parloop_81957_task.fn = futhark_mc_segmap_parloop_81957;
    futhark_mc_segmap_parloop_81957_task.args =
        &futhark_mc_segmap_parloop_struct_81956;
    futhark_mc_segmap_parloop_81957_task.iterations = iterations;
    futhark_mc_segmap_parloop_81957_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81957_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81957_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81957_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81957_task);
    
    if (futhark_mc_segmap_parloop_81957_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81957_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81957_total_end -
                 futhark_mc_segmap_parloop_81957_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81957_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81957_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81957_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81955_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81955_end -
                 futhark_mc_segmap_task_81955_start;
        
        ctx->futhark_mc_segmap_task_81955_runs[tid]++;
        ctx->futhark_mc_segmap_task_81955_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81955_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81958 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_73879;
    int64_t free_min_arg_73894;
    int64_t free_min_arg_73895;
    int64_t free_min_res_73896;
    float free_max_res_73900;
    unsigned char *free_mem_75896;
    unsigned char *free_mem_75899;
    unsigned char *free_mem_75902;
    int64_t free_bytes_75904;
    unsigned char *free_mem_75905;
    unsigned char *free_mem_75944;
    unsigned char *free_mem_75947;
};
struct futhark_mc_segmap_parloop_struct_81960 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_73879;
    int64_t free_min_arg_73894;
    int64_t free_min_arg_73895;
    int64_t free_min_res_73896;
    float free_max_res_73900;
    unsigned char *free_mem_75896;
    unsigned char *free_mem_75899;
    unsigned char *free_mem_75902;
    int64_t free_bytes_75904;
    unsigned char *free_mem_75905;
    unsigned char *free_mem_75944;
    unsigned char *free_mem_75947;
};
static int futhark_mc_segmap_parloop_81961(void *args, int64_t start,
                                           int64_t end, int flat_tid_73711,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81960
    *futhark_mc_segmap_parloop_struct_81960 =
    (struct futhark_mc_segmap_parloop_struct_81960 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81960->ctx;
    uint64_t futhark_mc_segmap_parloop_81961_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81961_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81960->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81960->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81960->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81960->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81960->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81960->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81960->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81960->free_loop_cond_70305;
    int64_t last_res_73879 =
            futhark_mc_segmap_parloop_struct_81960->free_last_res_73879;
    int64_t min_arg_73894 =
            futhark_mc_segmap_parloop_struct_81960->free_min_arg_73894;
    int64_t min_arg_73895 =
            futhark_mc_segmap_parloop_struct_81960->free_min_arg_73895;
    int64_t min_res_73896 =
            futhark_mc_segmap_parloop_struct_81960->free_min_res_73896;
    float max_res_73900 =
          futhark_mc_segmap_parloop_struct_81960->free_max_res_73900;
    struct memblock mem_75896 = {.desc ="mem_75896", .mem =
                                 futhark_mc_segmap_parloop_struct_81960->free_mem_75896,
                                 .size =0, .references =NULL};
    struct memblock mem_75899 = {.desc ="mem_75899", .mem =
                                 futhark_mc_segmap_parloop_struct_81960->free_mem_75899,
                                 .size =0, .references =NULL};
    struct memblock mem_75902 = {.desc ="mem_75902", .mem =
                                 futhark_mc_segmap_parloop_struct_81960->free_mem_75902,
                                 .size =0, .references =NULL};
    int64_t bytes_75904 =
            futhark_mc_segmap_parloop_struct_81960->free_bytes_75904;
    struct memblock mem_75905 = {.desc ="mem_75905", .mem =
                                 futhark_mc_segmap_parloop_struct_81960->free_mem_75905,
                                 .size =0, .references =NULL};
    struct memblock mem_75944 = {.desc ="mem_75944", .mem =
                                 futhark_mc_segmap_parloop_struct_81960->free_mem_75944,
                                 .size =0, .references =NULL};
    struct memblock mem_75947 = {.desc ="mem_75947", .mem =
                                 futhark_mc_segmap_parloop_struct_81960->free_mem_75947,
                                 .size =0, .references =NULL};
    size_t mem_80185_cached_sizze_81962 = 0;
    unsigned char *mem_80185 = NULL;
    size_t mem_80187_cached_sizze_81963 = 0;
    unsigned char *mem_80187 = NULL;
    int64_t iterations = end - start;
    int64_t iter_80285 = start;
    
    if (mem_80185_cached_sizze_81962 < (size_t) bytes_75904) {
        mem_80185 = realloc(mem_80185, bytes_75904);
        mem_80185_cached_sizze_81962 = bytes_75904;
    }
    if (mem_80187_cached_sizze_81963 < (size_t) bytes_75904) {
        mem_80187 = realloc(mem_80187, bytes_75904);
        mem_80187_cached_sizze_81963 = bytes_75904;
    }
    for (; iter_80285 < end; iter_80285++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_80389 = n_m_70288;
        int64_t gtid_73712 = iter_80285;
        int64_t remnant_80390 = iter_80285 - gtid_73712;
        int64_t min_arg_80099 = mul64(jump_70284, gtid_73712);
        int64_t min_res_80100 = smin64(i_70294, min_arg_80099);
        int64_t defunc_0_g_res_80101 = add64((int64_t) 1, min_res_80100);
        bool init_idx_80102;
        int64_t init_idx_80103;
        int64_t init_idx_80104;
        bool loop_while_80286;
        int64_t low_80287;
        int64_t high_80288;
        
        loop_while_80286 = x_70295;
        low_80287 = (int64_t) 0;
        high_80288 = i_70294;
        while (loop_while_80286) {
            int64_t x_80289 = add64(low_80287, high_80288);
            int64_t mid_80290 = sdiv64(x_80289, (int64_t) 2);
            bool x_80291 = sle64((int64_t) 0, mid_80290);
            bool y_80292 = slt64(mid_80290, n_70280);
            bool bounds_check_80293 = x_80291 && y_80292;
            bool index_certs_80294;
            
            if (!bounds_check_80293) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_80290,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t mid_id_80295 = ((int64_t *) mem_75902.mem)[mid_80290];
            bool cond_80296 = slt64(mid_id_80295, (int64_t) 0);
            int64_t mid_idx_80297;
            
            if (cond_80296) {
                mid_idx_80297 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_80297 = mid_id_80295;
            }
            
            bool cond_80298 = sle64(defunc_0_g_res_80101, mid_idx_80297);
            int64_t loopres_80299;
            int64_t loopres_80300;
            
            if (cond_80298) {
                int64_t loopres_t_res_80301 = sub64(mid_80290, (int64_t) 1);
                
                loopres_80299 = low_80287;
                loopres_80300 = loopres_t_res_80301;
            } else {
                int64_t loopres_f_res_80302 = add64((int64_t) 1, mid_80290);
                
                loopres_80299 = loopres_f_res_80302;
                loopres_80300 = high_80288;
            }
            
            bool loop_cond_80303 = sle64(loopres_80299, loopres_80300);
            bool loop_while_tmp_80391 = loop_cond_80303;
            int64_t low_tmp_80392 = loopres_80299;
            int64_t high_tmp_80393 = loopres_80300;
            
            loop_while_80286 = loop_while_tmp_80391;
            low_80287 = low_tmp_80392;
            high_80288 = high_tmp_80393;
        }
        init_idx_80102 = loop_while_80286;
        init_idx_80103 = low_80287;
        init_idx_80104 = high_80288;
        
        bool idx_80123;
        int64_t idx_80124;
        int64_t idx_80125;
        int64_t idx_80126;
        bool loop_while_80304;
        int64_t l_idx_80305;
        int64_t r_idx_80306;
        int64_t span_80307;
        
        loop_while_80304 = loop_cond_70305;
        l_idx_80305 = init_idx_80103;
        r_idx_80306 = init_idx_80103;
        span_80307 = (int64_t) 1;
        while (loop_while_80304) {
            int64_t max_arg_80308 = sub64(l_idx_80305, (int64_t) 1);
            int64_t max_res_80309 = smax64((int64_t) 0, max_arg_80308);
            int64_t min_arg_80310 = add64((int64_t) 1, r_idx_80306);
            int64_t min_res_80311 = smin64(min_arg_73894, min_arg_80310);
            bool x_80312 = sle64((int64_t) 0, max_res_80309);
            bool y_80313 = slt64(max_res_80309, n_70280);
            bool bounds_check_80314 = x_80312 && y_80313;
            bool index_certs_80315;
            
            if (!bounds_check_80314) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_80309,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_80316 = ((int64_t *) mem_75902.mem)[max_res_80309];
            int64_t abs_arg_80317 = sub64(x_80316, defunc_0_g_res_80101);
            int64_t abs_res_80318 = abs64(abs_arg_80317);
            bool x_80319 = sle64((int64_t) 0, min_res_80311);
            bool y_80320 = slt64(min_res_80311, n_70280);
            bool bounds_check_80321 = x_80319 && y_80320;
            bool index_certs_80322;
            
            if (!bounds_check_80321) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_80311,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_80323 = ((int64_t *) mem_75902.mem)[min_res_80311];
            int64_t abs_arg_80324 = sub64(x_80323, defunc_0_g_res_80101);
            int64_t abs_res_80325 = abs64(abs_arg_80324);
            bool cond_80326 = max_res_80309 == l_idx_80305;
            int64_t loopres_80327;
            int64_t loopres_80328;
            int64_t loopres_80329;
            
            if (cond_80326) {
                loopres_80327 = l_idx_80305;
                loopres_80328 = r_idx_80306;
                loopres_80329 = min_res_70300;
            } else {
                bool cond_80330 = slt64(abs_res_80318, abs_res_80325);
                bool cond_f_res_80331 = min_res_80311 == r_idx_80306;
                bool x_80332 = !cond_80330;
                bool y_80333 = cond_f_res_80331 && x_80332;
                bool cond_80334 = cond_80330 || y_80333;
                int64_t loopres_f_res_80335;
                
                if (cond_80334) {
                    loopres_f_res_80335 = max_res_80309;
                } else {
                    loopres_f_res_80335 = l_idx_80305;
                }
                
                int64_t loopres_f_res_80336;
                
                if (cond_80334) {
                    loopres_f_res_80336 = r_idx_80306;
                } else {
                    loopres_f_res_80336 = min_res_80311;
                }
                
                int64_t loopres_f_res_80337;
                
                if (cond_80334) {
                    int64_t loopres_f_res_t_res_80338 = add64((int64_t) 1,
                                                              span_80307);
                    
                    loopres_f_res_80337 = loopres_f_res_t_res_80338;
                } else {
                    int64_t loopres_f_res_f_res_80339 = add64((int64_t) 1,
                                                              span_80307);
                    
                    loopres_f_res_80337 = loopres_f_res_f_res_80339;
                }
                loopres_80327 = loopres_f_res_80335;
                loopres_80328 = loopres_f_res_80336;
                loopres_80329 = loopres_f_res_80337;
            }
            
            bool loop_cond_80340 = slt64(loopres_80329, min_res_70300);
            bool loop_while_tmp_80394 = loop_cond_80340;
            int64_t l_idx_tmp_80395 = loopres_80327;
            int64_t r_idx_tmp_80396 = loopres_80328;
            int64_t span_tmp_80397 = loopres_80329;
            
            loop_while_80304 = loop_while_tmp_80394;
            l_idx_80305 = l_idx_tmp_80395;
            r_idx_80306 = r_idx_tmp_80396;
            span_80307 = span_tmp_80397;
        }
        idx_80123 = loop_while_80304;
        idx_80124 = l_idx_80305;
        idx_80125 = r_idx_80306;
        idx_80126 = span_80307;
        
        int64_t min_res_80164 = smin64(min_arg_73895, idx_80124);
        int64_t max_res_80165 = smax64((int64_t) 0, min_res_80164);
        int64_t x_80166 = add64(min_res_73896, max_res_80165);
        int64_t r_80167 = sub64(x_80166, (int64_t) 1);
        bool x_80168 = sle64((int64_t) 0, r_80167);
        bool y_80169 = slt64(r_80167, n_70280);
        bool bounds_check_80170 = x_80168 && y_80169;
        bool index_certs_80171;
        
        if (!bounds_check_80170) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_80167,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_80172 = ((int64_t *) mem_75899.mem)[r_80167];
        int64_t abs_arg_80173 = sub64(x_80172, min_res_80100);
        int64_t abs_res_80174 = abs64(abs_arg_80173);
        bool x_80175 = sle64((int64_t) 0, max_res_80165);
        bool y_80176 = slt64(max_res_80165, n_70280);
        bool bounds_check_80177 = x_80175 && y_80176;
        bool index_certs_80178;
        
        if (!bounds_check_80177) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_80165,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_80179 = ((int64_t *) mem_75899.mem)[max_res_80165];
        int64_t abs_arg_80180 = sub64(x_80179, min_res_80100);
        int64_t abs_res_80181 = abs64(abs_arg_80180);
        int64_t max_res_80182 = smax64(abs_res_80174, abs_res_80181);
        float defunc_0_f_res_80183 = sitofp_i64_f32(max_res_80182);
        float defunc_1_f_res_80184 = max_res_73900 + defunc_0_f_res_80183;
        float defunc_2_reduce_res_80189;
        float defunc_2_reduce_res_80190;
        float defunc_2_reduce_res_80191;
        float redout_80342;
        float redout_80343;
        float redout_80344;
        
        redout_80342 = 0.0F;
        redout_80343 = 0.0F;
        redout_80344 = 0.0F;
        for (int64_t i_80341 = 0; i_80341 < q_70282; i_80341++) {
            float x_80347 = ((float *) mem_75905.mem)[i_80341];
            bool cond_80348 = sle64(last_res_73879, i_80341);
            int64_t defunc_0_f_res_80349;
            
            if (cond_80348) {
                defunc_0_f_res_80349 = (int64_t) 0;
            } else {
                int64_t i_80350 = add64(max_res_80165, i_80341);
                int64_t defunc_0_add_arg_80351 =
                        ((int64_t *) mem_75899.mem)[i_80350];
                int64_t defunc_1_add_res_80352 = add64((int64_t) 1,
                                                       defunc_0_add_arg_80351);
                
                defunc_0_f_res_80349 = defunc_1_add_res_80352;
            }
            
            int64_t binop_p_80353 = sub64(defunc_0_f_res_80349, min_res_80100);
            float defunc_0_f_res_80354 = sitofp_i64_f32(binop_p_80353);
            float abs_res_80355 = (float) fabs(defunc_0_f_res_80354);
            float tmp1_80356 = abs_res_80355 / defunc_1_f_res_80184;
            float x_80357 = tmp1_80356 * tmp1_80356;
            float y_80358 = tmp1_80356 * x_80357;
            float tmp2_80359 = 1.0F - y_80358;
            float x_80360 = tmp2_80359 * tmp2_80359;
            float tmp3_80361 = tmp2_80359 * x_80360;
            float tmp4_80362 = x_80347 * tmp3_80361;
            float defunc_1_f_res_80363 = defunc_0_f_res_80354 * tmp4_80362;
            float defunc_1_f_res_80364 = defunc_0_f_res_80354 *
                  defunc_1_f_res_80363;
            float defunc_1_op_res_80365 = tmp4_80362 + redout_80342;
            float defunc_1_op_res_80366 = defunc_1_f_res_80363 + redout_80343;
            float defunc_1_op_res_80367 = defunc_1_f_res_80364 + redout_80344;
            
            ((float *) mem_80185)[i_80341] = defunc_1_f_res_80363;
            ((float *) mem_80187)[i_80341] = tmp4_80362;
            
            float redout_tmp_80398 = defunc_1_op_res_80365;
            float redout_tmp_80399 = defunc_1_op_res_80366;
            float redout_tmp_80400 = defunc_1_op_res_80367;
            
            redout_80342 = redout_tmp_80398;
            redout_80343 = redout_tmp_80399;
            redout_80344 = redout_tmp_80400;
        }
        defunc_2_reduce_res_80189 = redout_80342;
        defunc_2_reduce_res_80190 = redout_80343;
        defunc_2_reduce_res_80191 = redout_80344;
        
        float x_80223 = defunc_2_reduce_res_80189 * defunc_2_reduce_res_80191;
        float y_80224 = defunc_2_reduce_res_80190 * defunc_2_reduce_res_80190;
        float y_80225 = x_80223 - y_80224;
        float det1_80226 = 1.0F / y_80225;
        float a11_80227 = defunc_2_reduce_res_80191 * det1_80226;
        float x_80228 = 0.0F - defunc_2_reduce_res_80190;
        float b11_80229 = det1_80226 * x_80228;
        float c11_80230 = defunc_2_reduce_res_80189 * det1_80226;
        float defunc_2_reduce_res_80231;
        float defunc_2_reduce_res_80232;
        float redout_80371;
        float redout_80372;
        
        redout_80371 = 0.0F;
        redout_80372 = 0.0F;
        for (int64_t i_80370 = 0; i_80370 < q_70282; i_80370++) {
            float x_80373 = ((float *) mem_80187)[i_80370];
            float x_80374 = ((float *) mem_80185)[i_80370];
            bool cond_80375 = sle64(last_res_73879, i_80370);
            float defunc_0_f_res_80376;
            
            if (cond_80375) {
                defunc_0_f_res_80376 = 0.0F;
            } else {
                int64_t i_80377 = add64(max_res_80165, i_80370);
                float defunc_0_add_arg_80378 =
                      ((float *) mem_75896.mem)[i_80377];
                
                defunc_0_f_res_80376 = defunc_0_add_arg_80378;
            }
            
            float x_80379 = a11_80227 * x_80373;
            float y_80380 = b11_80229 * x_80374;
            float x_80381 = x_80379 + y_80380;
            float defunc_9_fit_fun_res_80382 = defunc_0_f_res_80376 * x_80381;
            float x_80383 = b11_80229 * x_80373;
            float y_80384 = c11_80230 * x_80374;
            float x_80385 = x_80383 + y_80384;
            float defunc_9_slope_fun_res_80386 = defunc_0_f_res_80376 * x_80385;
            float defunc_1_op_res_80387 = defunc_9_fit_fun_res_80382 +
                  redout_80371;
            float defunc_1_op_res_80388 = defunc_9_slope_fun_res_80386 +
                  redout_80372;
            float redout_tmp_80403 = defunc_1_op_res_80387;
            float redout_tmp_80404 = defunc_1_op_res_80388;
            
            redout_80371 = redout_tmp_80403;
            redout_80372 = redout_tmp_80404;
        }
        defunc_2_reduce_res_80231 = redout_80371;
        defunc_2_reduce_res_80232 = redout_80372;
        ((float *) mem_75944.mem)[gtid_73712] = defunc_2_reduce_res_80231;
        ((float *) mem_75947.mem)[gtid_73712] = defunc_2_reduce_res_80232;
    }
    
  cleanup:
    { }
    free(mem_80185);
    free(mem_80187);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81961_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81961_end -
                 futhark_mc_segmap_parloop_81961_start;
        
        ctx->futhark_mc_segmap_parloop_81961_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81961_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81961_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81959(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73711 = tid;
    int num_tasks_80284 = info.nsubtasks;
    struct futhark_mc_task_81958 *futhark_mc_task_81958 =
                                 (struct futhark_mc_task_81958 *) args;
    struct futhark_context *ctx = futhark_mc_task_81958->ctx;
    uint64_t futhark_mc_segmap_task_81959_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81959_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81958->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81958->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81958->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81958->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81958->free_i_70294;
    bool x_70295 = futhark_mc_task_81958->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81958->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81958->free_loop_cond_70305;
    int64_t last_res_73879 = futhark_mc_task_81958->free_last_res_73879;
    int64_t min_arg_73894 = futhark_mc_task_81958->free_min_arg_73894;
    int64_t min_arg_73895 = futhark_mc_task_81958->free_min_arg_73895;
    int64_t min_res_73896 = futhark_mc_task_81958->free_min_res_73896;
    float max_res_73900 = futhark_mc_task_81958->free_max_res_73900;
    struct memblock mem_75896 = {.desc ="mem_75896", .mem =
                                 futhark_mc_task_81958->free_mem_75896, .size =
                                 0, .references =NULL};
    struct memblock mem_75899 = {.desc ="mem_75899", .mem =
                                 futhark_mc_task_81958->free_mem_75899, .size =
                                 0, .references =NULL};
    struct memblock mem_75902 = {.desc ="mem_75902", .mem =
                                 futhark_mc_task_81958->free_mem_75902, .size =
                                 0, .references =NULL};
    int64_t bytes_75904 = futhark_mc_task_81958->free_bytes_75904;
    struct memblock mem_75905 = {.desc ="mem_75905", .mem =
                                 futhark_mc_task_81958->free_mem_75905, .size =
                                 0, .references =NULL};
    struct memblock mem_75944 = {.desc ="mem_75944", .mem =
                                 futhark_mc_task_81958->free_mem_75944, .size =
                                 0, .references =NULL};
    struct memblock mem_75947 = {.desc ="mem_75947", .mem =
                                 futhark_mc_task_81958->free_mem_75947, .size =
                                 0, .references =NULL};
    int64_t iter_80285;
    struct futhark_mc_segmap_parloop_struct_81960
    futhark_mc_segmap_parloop_struct_81960;
    
    futhark_mc_segmap_parloop_struct_81960.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81960.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81960.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81960.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81960.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81960.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81960.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81960.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81960.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81960.free_last_res_73879 = last_res_73879;
    futhark_mc_segmap_parloop_struct_81960.free_min_arg_73894 = min_arg_73894;
    futhark_mc_segmap_parloop_struct_81960.free_min_arg_73895 = min_arg_73895;
    futhark_mc_segmap_parloop_struct_81960.free_min_res_73896 = min_res_73896;
    futhark_mc_segmap_parloop_struct_81960.free_max_res_73900 = max_res_73900;
    futhark_mc_segmap_parloop_struct_81960.free_mem_75896 = mem_75896.mem;
    futhark_mc_segmap_parloop_struct_81960.free_mem_75899 = mem_75899.mem;
    futhark_mc_segmap_parloop_struct_81960.free_mem_75902 = mem_75902.mem;
    futhark_mc_segmap_parloop_struct_81960.free_bytes_75904 = bytes_75904;
    futhark_mc_segmap_parloop_struct_81960.free_mem_75905 = mem_75905.mem;
    futhark_mc_segmap_parloop_struct_81960.free_mem_75944 = mem_75944.mem;
    futhark_mc_segmap_parloop_struct_81960.free_mem_75947 = mem_75947.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81961_task;
    
    futhark_mc_segmap_parloop_81961_task.name =
        "futhark_mc_segmap_parloop_81961";
    futhark_mc_segmap_parloop_81961_task.fn = futhark_mc_segmap_parloop_81961;
    futhark_mc_segmap_parloop_81961_task.args =
        &futhark_mc_segmap_parloop_struct_81960;
    futhark_mc_segmap_parloop_81961_task.iterations = iterations;
    futhark_mc_segmap_parloop_81961_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81961_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81961_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81961_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81961_task);
    
    if (futhark_mc_segmap_parloop_81961_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81961_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81961_total_end -
                 futhark_mc_segmap_parloop_81961_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81961_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81961_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81961_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81959_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81959_end -
                 futhark_mc_segmap_task_81959_start;
        
        ctx->futhark_mc_segmap_task_81959_runs[tid]++;
        ctx->futhark_mc_segmap_task_81959_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81959_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81965 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_73879;
    int64_t free_min_arg_73894;
    int64_t free_min_arg_73895;
    int64_t free_min_res_73896;
    float free_max_res_73900;
    unsigned char *free_mem_75896;
    unsigned char *free_mem_75899;
    unsigned char *free_mem_75902;
    int64_t free_bytes_75904;
    unsigned char *free_mem_75905;
    unsigned char *free_mem_75944;
    unsigned char *free_mem_75947;
};
struct futhark_mc_task_81969 {
    struct futhark_context *ctx;
    int64_t free_last_res_73879;
    unsigned char *free_mem_75899;
    unsigned char *free_mem_75905;
    int64_t free_min_res_79950;
    int64_t free_max_res_80015;
    float free_defunc_1_f_res_80034;
    float *retval_defunc_2_reduce_res_80037;
    float *retval_defunc_2_reduce_res_80038;
    float *retval_defunc_2_reduce_res_80039;
    unsigned char *retval_mem_80035;
    unsigned char *retval_mem_80036;
};
struct futhark_mc_segred_stage_1_parloop_struct_81974 {
    struct futhark_context *ctx;
    int64_t free_last_res_73879;
    unsigned char *free_mem_75899;
    unsigned char *free_mem_75905;
    int64_t free_min_res_79950;
    int64_t free_max_res_80015;
    float free_defunc_1_f_res_80034;
    unsigned char *free_mem_80035;
    unsigned char *free_mem_80036;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_80518;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_80520;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_80522;
};
static int futhark_mc_segred_stage_1_parloop_81975(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_73715, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81974
    *futhark_mc_segred_stage_1_parloop_struct_81974 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81974 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81974->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81975_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81975_start = get_wall_time();
    
    int64_t last_res_73879 =
            futhark_mc_segred_stage_1_parloop_struct_81974->free_last_res_73879;
    struct memblock mem_75899 = {.desc ="mem_75899", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81974->free_mem_75899,
                                 .size =0, .references =NULL};
    struct memblock mem_75905 = {.desc ="mem_75905", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81974->free_mem_75905,
                                 .size =0, .references =NULL};
    int64_t min_res_79950 =
            futhark_mc_segred_stage_1_parloop_struct_81974->free_min_res_79950;
    int64_t max_res_80015 =
            futhark_mc_segred_stage_1_parloop_struct_81974->free_max_res_80015;
    float defunc_1_f_res_80034 =
          futhark_mc_segred_stage_1_parloop_struct_81974->free_defunc_1_f_res_80034;
    struct memblock mem_80035 = {.desc ="mem_80035", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81974->free_mem_80035,
                                 .size =0, .references =NULL};
    struct memblock mem_80036 = {.desc ="mem_80036", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81974->free_mem_80036,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_80518 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_80518",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81974->free_reduce_stage_1_tid_res_arr_mem_80518,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_80520 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_80520",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81974->free_reduce_stage_1_tid_res_arr_mem_80520,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_80522 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_80522",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81974->free_reduce_stage_1_tid_res_arr_mem_80522,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_80524 = start;
    float x_80461;
    float x_80462;
    float x_80464;
    float x_80465;
    float x_80467;
    float x_80468;
    float local_acc_80525 = 0.0F;
    float local_acc_80526 = 0.0F;
    float local_acc_80527 = 0.0F;
    
    for (; iter_80524 < end; iter_80524++) {
        int64_t gtid_73716 = iter_80524;
        float x_80470 = ((float *) mem_75905.mem)[gtid_73716];
        bool cond_80471 = sle64(last_res_73879, gtid_73716);
        int64_t defunc_0_f_res_80472;
        
        if (cond_80471) {
            defunc_0_f_res_80472 = (int64_t) 0;
        } else {
            int64_t i_80473 = add64(gtid_73716, max_res_80015);
            int64_t defunc_0_add_arg_80474 =
                    ((int64_t *) mem_75899.mem)[i_80473];
            int64_t defunc_1_add_res_80475 = add64((int64_t) 1,
                                                   defunc_0_add_arg_80474);
            
            defunc_0_f_res_80472 = defunc_1_add_res_80475;
        }
        
        int64_t binop_p_80476 = sub64(defunc_0_f_res_80472, min_res_79950);
        float defunc_0_f_res_80477 = sitofp_i64_f32(binop_p_80476);
        float abs_res_80478 = (float) fabs(defunc_0_f_res_80477);
        float tmp1_80479 = abs_res_80478 / defunc_1_f_res_80034;
        float x_80480 = tmp1_80479 * tmp1_80479;
        float y_80481 = tmp1_80479 * x_80480;
        float tmp2_80482 = 1.0F - y_80481;
        float x_80483 = tmp2_80482 * tmp2_80482;
        float tmp3_80484 = tmp2_80482 * x_80483;
        float tmp4_80485 = x_80470 * tmp3_80484;
        float defunc_1_f_res_80486 = defunc_0_f_res_80477 * tmp4_80485;
        float defunc_1_f_res_80487 = defunc_0_f_res_80477 *
              defunc_1_f_res_80486;
        
        // save map-out results
        {
            ((float *) mem_80035.mem)[gtid_73716] = defunc_1_f_res_80486;
            ((float *) mem_80036.mem)[gtid_73716] = tmp4_80485;
        }
        // Load accum params
        {
            x_80461 = local_acc_80525;
        }
        // Load next params
        {
            x_80462 = tmp4_80485;
        }
        // Red body
        {
            float defunc_1_op_res_80463 = x_80461 + x_80462;
            
            local_acc_80525 = defunc_1_op_res_80463;
        }
        // Load accum params
        {
            x_80464 = local_acc_80526;
        }
        // Load next params
        {
            x_80465 = defunc_1_f_res_80486;
        }
        // Red body
        {
            float defunc_1_op_res_80466 = x_80464 + x_80465;
            
            local_acc_80526 = defunc_1_op_res_80466;
        }
        // Load accum params
        {
            x_80467 = local_acc_80527;
        }
        // Load next params
        {
            x_80468 = defunc_1_f_res_80487;
        }
        // Red body
        {
            float defunc_1_op_res_80469 = x_80467 + x_80468;
            
            local_acc_80527 = defunc_1_op_res_80469;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_80518.mem)[flat_tid_73715] =
        local_acc_80525;
    ((float *) reduce_stage_1_tid_res_arr_mem_80520.mem)[flat_tid_73715] =
        local_acc_80526;
    ((float *) reduce_stage_1_tid_res_arr_mem_80522.mem)[flat_tid_73715] =
        local_acc_80527;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81975_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81975_end -
                 futhark_mc_segred_stage_1_parloop_81975_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81975_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81975_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81975_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81970(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73715 = tid;
    int num_tasks_80517 = info.nsubtasks;
    struct futhark_mc_task_81969 *futhark_mc_task_81969 =
                                 (struct futhark_mc_task_81969 *) args;
    struct futhark_context *ctx = futhark_mc_task_81969->ctx;
    uint64_t futhark_mc_segred_task_81970_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81970_start = get_wall_time();
    
    int64_t last_res_73879 = futhark_mc_task_81969->free_last_res_73879;
    struct memblock mem_75899 = {.desc ="mem_75899", .mem =
                                 futhark_mc_task_81969->free_mem_75899, .size =
                                 0, .references =NULL};
    struct memblock mem_75905 = {.desc ="mem_75905", .mem =
                                 futhark_mc_task_81969->free_mem_75905, .size =
                                 0, .references =NULL};
    int64_t min_res_79950 = futhark_mc_task_81969->free_min_res_79950;
    int64_t max_res_80015 = futhark_mc_task_81969->free_max_res_80015;
    float defunc_1_f_res_80034 =
          futhark_mc_task_81969->free_defunc_1_f_res_80034;
    float defunc_2_reduce_res_80037 =
          *futhark_mc_task_81969->retval_defunc_2_reduce_res_80037;
    float defunc_2_reduce_res_80038 =
          *futhark_mc_task_81969->retval_defunc_2_reduce_res_80038;
    float defunc_2_reduce_res_80039 =
          *futhark_mc_task_81969->retval_defunc_2_reduce_res_80039;
    struct memblock mem_80035 = {.desc ="mem_80035", .mem =
                                 futhark_mc_task_81969->retval_mem_80035,
                                 .size =0, .references =NULL};
    struct memblock mem_80036 = {.desc ="mem_80036", .mem =
                                 futhark_mc_task_81969->retval_mem_80036,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_80518_cached_sizze_81971 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_80518 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_80520_cached_sizze_81972 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_80520 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_80522_cached_sizze_81973 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_80522 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_80518_cached_sizze_81971 <
        (size_t) ((int64_t) 4 * num_tasks_80517)) {
        reduce_stage_1_tid_res_arr_mem_80518 =
            realloc(reduce_stage_1_tid_res_arr_mem_80518, (int64_t) 4 *
                    num_tasks_80517);
        reduce_stage_1_tid_res_arr_mem_80518_cached_sizze_81971 = (int64_t) 4 *
            num_tasks_80517;
    }
    if (reduce_stage_1_tid_res_arr_mem_80520_cached_sizze_81972 <
        (size_t) ((int64_t) 4 * num_tasks_80517)) {
        reduce_stage_1_tid_res_arr_mem_80520 =
            realloc(reduce_stage_1_tid_res_arr_mem_80520, (int64_t) 4 *
                    num_tasks_80517);
        reduce_stage_1_tid_res_arr_mem_80520_cached_sizze_81972 = (int64_t) 4 *
            num_tasks_80517;
    }
    if (reduce_stage_1_tid_res_arr_mem_80522_cached_sizze_81973 <
        (size_t) ((int64_t) 4 * num_tasks_80517)) {
        reduce_stage_1_tid_res_arr_mem_80522 =
            realloc(reduce_stage_1_tid_res_arr_mem_80522, (int64_t) 4 *
                    num_tasks_80517);
        reduce_stage_1_tid_res_arr_mem_80522_cached_sizze_81973 = (int64_t) 4 *
            num_tasks_80517;
    }
    
    int64_t iter_80524;
    struct futhark_mc_segred_stage_1_parloop_struct_81974
    futhark_mc_segred_stage_1_parloop_struct_81974;
    
    futhark_mc_segred_stage_1_parloop_struct_81974.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81974.free_last_res_73879 =
        last_res_73879;
    futhark_mc_segred_stage_1_parloop_struct_81974.free_mem_75899 =
        mem_75899.mem;
    futhark_mc_segred_stage_1_parloop_struct_81974.free_mem_75905 =
        mem_75905.mem;
    futhark_mc_segred_stage_1_parloop_struct_81974.free_min_res_79950 =
        min_res_79950;
    futhark_mc_segred_stage_1_parloop_struct_81974.free_max_res_80015 =
        max_res_80015;
    futhark_mc_segred_stage_1_parloop_struct_81974.free_defunc_1_f_res_80034 =
        defunc_1_f_res_80034;
    futhark_mc_segred_stage_1_parloop_struct_81974.free_mem_80035 =
        mem_80035.mem;
    futhark_mc_segred_stage_1_parloop_struct_81974.free_mem_80036 =
        mem_80036.mem;
    futhark_mc_segred_stage_1_parloop_struct_81974.free_reduce_stage_1_tid_res_arr_mem_80518 =
        reduce_stage_1_tid_res_arr_mem_80518;
    futhark_mc_segred_stage_1_parloop_struct_81974.free_reduce_stage_1_tid_res_arr_mem_80520 =
        reduce_stage_1_tid_res_arr_mem_80520;
    futhark_mc_segred_stage_1_parloop_struct_81974.free_reduce_stage_1_tid_res_arr_mem_80522 =
        reduce_stage_1_tid_res_arr_mem_80522;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81975_task;
    
    futhark_mc_segred_stage_1_parloop_81975_task.name =
        "futhark_mc_segred_stage_1_parloop_81975";
    futhark_mc_segred_stage_1_parloop_81975_task.fn =
        futhark_mc_segred_stage_1_parloop_81975;
    futhark_mc_segred_stage_1_parloop_81975_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81974;
    futhark_mc_segred_stage_1_parloop_81975_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81975_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81975_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81975_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81975_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81975_task);
    
    if (futhark_mc_segred_stage_1_parloop_81975_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81975_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81975_total_end -
                 futhark_mc_segred_stage_1_parloop_81975_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81975_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81975_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81975_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_80037 = 0.0F;
        defunc_2_reduce_res_80038 = 0.0F;
        defunc_2_reduce_res_80039 = 0.0F;
    }
    
    float x_80528;
    float x_80529;
    float x_80531;
    float x_80532;
    float x_80534;
    float x_80535;
    
    for (int32_t i_80537 = 0; i_80537 < num_tasks_80517; i_80537++) {
        flat_tid_73715 = i_80537;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_80528 = defunc_2_reduce_res_80037;
            }
            // load next params
            {
                x_80529 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_80518)[flat_tid_73715];
            }
            // red body
            {
                float defunc_1_op_res_80530 = x_80528 + x_80529;
                
                defunc_2_reduce_res_80037 = defunc_1_op_res_80530;
            }
            // load acc params
            {
                x_80531 = defunc_2_reduce_res_80038;
            }
            // load next params
            {
                x_80532 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_80520)[flat_tid_73715];
            }
            // red body
            {
                float defunc_1_op_res_80533 = x_80531 + x_80532;
                
                defunc_2_reduce_res_80038 = defunc_1_op_res_80533;
            }
            // load acc params
            {
                x_80534 = defunc_2_reduce_res_80039;
            }
            // load next params
            {
                x_80535 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_80522)[flat_tid_73715];
            }
            // red body
            {
                float defunc_1_op_res_80536 = x_80534 + x_80535;
                
                defunc_2_reduce_res_80039 = defunc_1_op_res_80536;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_80518);
    free(reduce_stage_1_tid_res_arr_mem_80520);
    free(reduce_stage_1_tid_res_arr_mem_80522);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81970_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81970_end -
                 futhark_mc_segred_task_81970_start;
        
        ctx->futhark_mc_segred_task_81970_runs[tid]++;
        ctx->futhark_mc_segred_task_81970_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81970_iter[tid] += iterations;
    }
    *futhark_mc_task_81969->retval_defunc_2_reduce_res_80037 =
        defunc_2_reduce_res_80037;
    *futhark_mc_task_81969->retval_defunc_2_reduce_res_80038 =
        defunc_2_reduce_res_80038;
    *futhark_mc_task_81969->retval_defunc_2_reduce_res_80039 =
        defunc_2_reduce_res_80039;
    futhark_mc_task_81969->retval_mem_80035 = mem_80035.mem;
    futhark_mc_task_81969->retval_mem_80036 = mem_80036.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81976 {
    struct futhark_context *ctx;
    int64_t free_last_res_73879;
    unsigned char *free_mem_75896;
    int64_t free_max_res_80015;
    unsigned char *free_mem_80035;
    unsigned char *free_mem_80036;
    float free_a11_80073;
    float free_b11_80075;
    float free_c11_80076;
    float *retval_defunc_2_reduce_res_80077;
    float *retval_defunc_2_reduce_res_80078;
};
struct futhark_mc_segred_stage_1_parloop_struct_81980 {
    struct futhark_context *ctx;
    int64_t free_last_res_73879;
    unsigned char *free_mem_75896;
    int64_t free_max_res_80015;
    unsigned char *free_mem_80035;
    unsigned char *free_mem_80036;
    float free_a11_80073;
    float free_b11_80075;
    float free_c11_80076;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_80539;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_80541;
};
static int futhark_mc_segred_stage_1_parloop_81981(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_73717, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_81980
    *futhark_mc_segred_stage_1_parloop_struct_81980 =
    (struct futhark_mc_segred_stage_1_parloop_struct_81980 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_81980->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_81981_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81981_start = get_wall_time();
    
    int64_t last_res_73879 =
            futhark_mc_segred_stage_1_parloop_struct_81980->free_last_res_73879;
    struct memblock mem_75896 = {.desc ="mem_75896", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81980->free_mem_75896,
                                 .size =0, .references =NULL};
    int64_t max_res_80015 =
            futhark_mc_segred_stage_1_parloop_struct_81980->free_max_res_80015;
    struct memblock mem_80035 = {.desc ="mem_80035", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81980->free_mem_80035,
                                 .size =0, .references =NULL};
    struct memblock mem_80036 = {.desc ="mem_80036", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_81980->free_mem_80036,
                                 .size =0, .references =NULL};
    float a11_80073 =
          futhark_mc_segred_stage_1_parloop_struct_81980->free_a11_80073;
    float b11_80075 =
          futhark_mc_segred_stage_1_parloop_struct_81980->free_b11_80075;
    float c11_80076 =
          futhark_mc_segred_stage_1_parloop_struct_81980->free_c11_80076;
    struct memblock reduce_stage_1_tid_res_arr_mem_80539 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_80539",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81980->free_reduce_stage_1_tid_res_arr_mem_80539,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_80541 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_80541",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_81980->free_reduce_stage_1_tid_res_arr_mem_80541,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_80543 = start;
    float x_80488;
    float x_80489;
    float x_80491;
    float x_80492;
    float local_acc_80544 = 0.0F;
    float local_acc_80545 = 0.0F;
    
    for (; iter_80543 < end; iter_80543++) {
        int64_t gtid_73718 = iter_80543;
        float x_80494 = ((float *) mem_80036.mem)[gtid_73718];
        float x_80495 = ((float *) mem_80035.mem)[gtid_73718];
        bool cond_80496 = sle64(last_res_73879, gtid_73718);
        float defunc_0_f_res_80497;
        
        if (cond_80496) {
            defunc_0_f_res_80497 = 0.0F;
        } else {
            int64_t i_80498 = add64(gtid_73718, max_res_80015);
            float defunc_0_add_arg_80499 = ((float *) mem_75896.mem)[i_80498];
            
            defunc_0_f_res_80497 = defunc_0_add_arg_80499;
        }
        
        float x_80500 = a11_80073 * x_80494;
        float y_80501 = b11_80075 * x_80495;
        float x_80502 = x_80500 + y_80501;
        float defunc_9_fit_fun_res_80503 = defunc_0_f_res_80497 * x_80502;
        float x_80504 = b11_80075 * x_80494;
        float y_80505 = c11_80076 * x_80495;
        float x_80506 = x_80504 + y_80505;
        float defunc_9_slope_fun_res_80507 = defunc_0_f_res_80497 * x_80506;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_80488 = local_acc_80544;
        }
        // Load next params
        {
            x_80489 = defunc_9_fit_fun_res_80503;
        }
        // Red body
        {
            float defunc_1_op_res_80490 = x_80488 + x_80489;
            
            local_acc_80544 = defunc_1_op_res_80490;
        }
        // Load accum params
        {
            x_80491 = local_acc_80545;
        }
        // Load next params
        {
            x_80492 = defunc_9_slope_fun_res_80507;
        }
        // Red body
        {
            float defunc_1_op_res_80493 = x_80491 + x_80492;
            
            local_acc_80545 = defunc_1_op_res_80493;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_80539.mem)[flat_tid_73717] =
        local_acc_80544;
    ((float *) reduce_stage_1_tid_res_arr_mem_80541.mem)[flat_tid_73717] =
        local_acc_80545;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81981_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81981_end -
                 futhark_mc_segred_stage_1_parloop_81981_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_81981_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_81981_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_81981_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_81977(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73717 = tid;
    int num_tasks_80538 = info.nsubtasks;
    struct futhark_mc_task_81976 *futhark_mc_task_81976 =
                                 (struct futhark_mc_task_81976 *) args;
    struct futhark_context *ctx = futhark_mc_task_81976->ctx;
    uint64_t futhark_mc_segred_task_81977_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_81977_start = get_wall_time();
    
    int64_t last_res_73879 = futhark_mc_task_81976->free_last_res_73879;
    struct memblock mem_75896 = {.desc ="mem_75896", .mem =
                                 futhark_mc_task_81976->free_mem_75896, .size =
                                 0, .references =NULL};
    int64_t max_res_80015 = futhark_mc_task_81976->free_max_res_80015;
    struct memblock mem_80035 = {.desc ="mem_80035", .mem =
                                 futhark_mc_task_81976->free_mem_80035, .size =
                                 0, .references =NULL};
    struct memblock mem_80036 = {.desc ="mem_80036", .mem =
                                 futhark_mc_task_81976->free_mem_80036, .size =
                                 0, .references =NULL};
    float a11_80073 = futhark_mc_task_81976->free_a11_80073;
    float b11_80075 = futhark_mc_task_81976->free_b11_80075;
    float c11_80076 = futhark_mc_task_81976->free_c11_80076;
    float defunc_2_reduce_res_80077 =
          *futhark_mc_task_81976->retval_defunc_2_reduce_res_80077;
    float defunc_2_reduce_res_80078 =
          *futhark_mc_task_81976->retval_defunc_2_reduce_res_80078;
    size_t reduce_stage_1_tid_res_arr_mem_80539_cached_sizze_81978 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_80539 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_80541_cached_sizze_81979 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_80541 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_80539_cached_sizze_81978 <
        (size_t) ((int64_t) 4 * num_tasks_80538)) {
        reduce_stage_1_tid_res_arr_mem_80539 =
            realloc(reduce_stage_1_tid_res_arr_mem_80539, (int64_t) 4 *
                    num_tasks_80538);
        reduce_stage_1_tid_res_arr_mem_80539_cached_sizze_81978 = (int64_t) 4 *
            num_tasks_80538;
    }
    if (reduce_stage_1_tid_res_arr_mem_80541_cached_sizze_81979 <
        (size_t) ((int64_t) 4 * num_tasks_80538)) {
        reduce_stage_1_tid_res_arr_mem_80541 =
            realloc(reduce_stage_1_tid_res_arr_mem_80541, (int64_t) 4 *
                    num_tasks_80538);
        reduce_stage_1_tid_res_arr_mem_80541_cached_sizze_81979 = (int64_t) 4 *
            num_tasks_80538;
    }
    
    int64_t iter_80543;
    struct futhark_mc_segred_stage_1_parloop_struct_81980
    futhark_mc_segred_stage_1_parloop_struct_81980;
    
    futhark_mc_segred_stage_1_parloop_struct_81980.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_81980.free_last_res_73879 =
        last_res_73879;
    futhark_mc_segred_stage_1_parloop_struct_81980.free_mem_75896 =
        mem_75896.mem;
    futhark_mc_segred_stage_1_parloop_struct_81980.free_max_res_80015 =
        max_res_80015;
    futhark_mc_segred_stage_1_parloop_struct_81980.free_mem_80035 =
        mem_80035.mem;
    futhark_mc_segred_stage_1_parloop_struct_81980.free_mem_80036 =
        mem_80036.mem;
    futhark_mc_segred_stage_1_parloop_struct_81980.free_a11_80073 = a11_80073;
    futhark_mc_segred_stage_1_parloop_struct_81980.free_b11_80075 = b11_80075;
    futhark_mc_segred_stage_1_parloop_struct_81980.free_c11_80076 = c11_80076;
    futhark_mc_segred_stage_1_parloop_struct_81980.free_reduce_stage_1_tid_res_arr_mem_80539 =
        reduce_stage_1_tid_res_arr_mem_80539;
    futhark_mc_segred_stage_1_parloop_struct_81980.free_reduce_stage_1_tid_res_arr_mem_80541 =
        reduce_stage_1_tid_res_arr_mem_80541;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_81981_task;
    
    futhark_mc_segred_stage_1_parloop_81981_task.name =
        "futhark_mc_segred_stage_1_parloop_81981";
    futhark_mc_segred_stage_1_parloop_81981_task.fn =
        futhark_mc_segred_stage_1_parloop_81981;
    futhark_mc_segred_stage_1_parloop_81981_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_81980;
    futhark_mc_segred_stage_1_parloop_81981_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_81981_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_81981_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_81981_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_81981_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_81981_task);
    
    if (futhark_mc_segred_stage_1_parloop_81981_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_81981_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_81981_total_end -
                 futhark_mc_segred_stage_1_parloop_81981_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81981_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81981_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_81981_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_80077 = 0.0F;
        defunc_2_reduce_res_80078 = 0.0F;
    }
    
    float x_80546;
    float x_80547;
    float x_80549;
    float x_80550;
    
    for (int32_t i_80552 = 0; i_80552 < num_tasks_80538; i_80552++) {
        flat_tid_73717 = i_80552;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_80546 = defunc_2_reduce_res_80077;
            }
            // load next params
            {
                x_80547 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_80539)[flat_tid_73717];
            }
            // red body
            {
                float defunc_1_op_res_80548 = x_80546 + x_80547;
                
                defunc_2_reduce_res_80077 = defunc_1_op_res_80548;
            }
            // load acc params
            {
                x_80549 = defunc_2_reduce_res_80078;
            }
            // load next params
            {
                x_80550 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_80541)[flat_tid_73717];
            }
            // red body
            {
                float defunc_1_op_res_80551 = x_80549 + x_80550;
                
                defunc_2_reduce_res_80078 = defunc_1_op_res_80551;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_80539);
    free(reduce_stage_1_tid_res_arr_mem_80541);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_81977_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_81977_end -
                 futhark_mc_segred_task_81977_start;
        
        ctx->futhark_mc_segred_task_81977_runs[tid]++;
        ctx->futhark_mc_segred_task_81977_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_81977_iter[tid] += iterations;
    }
    *futhark_mc_task_81976->retval_defunc_2_reduce_res_80077 =
        defunc_2_reduce_res_80077;
    *futhark_mc_task_81976->retval_defunc_2_reduce_res_80078 =
        defunc_2_reduce_res_80078;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81966(void *args, int64_t start,
                                           int64_t end, int flat_tid_73713,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81965
    *futhark_mc_segmap_parloop_struct_81965 =
    (struct futhark_mc_segmap_parloop_struct_81965 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81965->ctx;
    uint64_t futhark_mc_segmap_parloop_81966_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81966_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81965->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81965->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81965->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81965->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81965->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81965->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81965->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81965->free_loop_cond_70305;
    int64_t last_res_73879 =
            futhark_mc_segmap_parloop_struct_81965->free_last_res_73879;
    int64_t min_arg_73894 =
            futhark_mc_segmap_parloop_struct_81965->free_min_arg_73894;
    int64_t min_arg_73895 =
            futhark_mc_segmap_parloop_struct_81965->free_min_arg_73895;
    int64_t min_res_73896 =
            futhark_mc_segmap_parloop_struct_81965->free_min_res_73896;
    float max_res_73900 =
          futhark_mc_segmap_parloop_struct_81965->free_max_res_73900;
    struct memblock mem_75896 = {.desc ="mem_75896", .mem =
                                 futhark_mc_segmap_parloop_struct_81965->free_mem_75896,
                                 .size =0, .references =NULL};
    struct memblock mem_75899 = {.desc ="mem_75899", .mem =
                                 futhark_mc_segmap_parloop_struct_81965->free_mem_75899,
                                 .size =0, .references =NULL};
    struct memblock mem_75902 = {.desc ="mem_75902", .mem =
                                 futhark_mc_segmap_parloop_struct_81965->free_mem_75902,
                                 .size =0, .references =NULL};
    int64_t bytes_75904 =
            futhark_mc_segmap_parloop_struct_81965->free_bytes_75904;
    struct memblock mem_75905 = {.desc ="mem_75905", .mem =
                                 futhark_mc_segmap_parloop_struct_81965->free_mem_75905,
                                 .size =0, .references =NULL};
    struct memblock mem_75944 = {.desc ="mem_75944", .mem =
                                 futhark_mc_segmap_parloop_struct_81965->free_mem_75944,
                                 .size =0, .references =NULL};
    struct memblock mem_75947 = {.desc ="mem_75947", .mem =
                                 futhark_mc_segmap_parloop_struct_81965->free_mem_75947,
                                 .size =0, .references =NULL};
    size_t mem_80035_cached_sizze_81967 = 0;
    unsigned char *mem_80035 = NULL;
    size_t mem_80036_cached_sizze_81968 = 0;
    unsigned char *mem_80036 = NULL;
    int64_t iterations = end - start;
    int64_t iter_80405 = start;
    
    if (mem_80035_cached_sizze_81967 < (size_t) bytes_75904) {
        mem_80035 = realloc(mem_80035, bytes_75904);
        mem_80035_cached_sizze_81967 = bytes_75904;
    }
    if (mem_80036_cached_sizze_81968 < (size_t) bytes_75904) {
        mem_80036 = realloc(mem_80036, bytes_75904);
        mem_80036_cached_sizze_81968 = bytes_75904;
    }
    for (; iter_80405 < end; iter_80405++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_80508 = n_m_70288;
        int64_t gtid_73714 = iter_80405;
        int64_t remnant_80509 = iter_80405 - gtid_73714;
        int64_t min_arg_79949 = mul64(jump_70284, gtid_73714);
        int64_t min_res_79950 = smin64(i_70294, min_arg_79949);
        int64_t defunc_0_g_res_79951 = add64((int64_t) 1, min_res_79950);
        bool init_idx_79952;
        int64_t init_idx_79953;
        int64_t init_idx_79954;
        bool loop_while_80406;
        int64_t low_80407;
        int64_t high_80408;
        
        loop_while_80406 = x_70295;
        low_80407 = (int64_t) 0;
        high_80408 = i_70294;
        while (loop_while_80406) {
            int64_t x_80409 = add64(low_80407, high_80408);
            int64_t mid_80410 = sdiv64(x_80409, (int64_t) 2);
            bool x_80411 = sle64((int64_t) 0, mid_80410);
            bool y_80412 = slt64(mid_80410, n_70280);
            bool bounds_check_80413 = x_80411 && y_80412;
            bool index_certs_80414;
            
            if (!bounds_check_80413) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_80410,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t mid_id_80415 = ((int64_t *) mem_75902.mem)[mid_80410];
            bool cond_80416 = slt64(mid_id_80415, (int64_t) 0);
            int64_t mid_idx_80417;
            
            if (cond_80416) {
                mid_idx_80417 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_80417 = mid_id_80415;
            }
            
            bool cond_80418 = sle64(defunc_0_g_res_79951, mid_idx_80417);
            int64_t loopres_80419;
            int64_t loopres_80420;
            
            if (cond_80418) {
                int64_t loopres_t_res_80421 = sub64(mid_80410, (int64_t) 1);
                
                loopres_80419 = low_80407;
                loopres_80420 = loopres_t_res_80421;
            } else {
                int64_t loopres_f_res_80422 = add64((int64_t) 1, mid_80410);
                
                loopres_80419 = loopres_f_res_80422;
                loopres_80420 = high_80408;
            }
            
            bool loop_cond_80423 = sle64(loopres_80419, loopres_80420);
            bool loop_while_tmp_80510 = loop_cond_80423;
            int64_t low_tmp_80511 = loopres_80419;
            int64_t high_tmp_80512 = loopres_80420;
            
            loop_while_80406 = loop_while_tmp_80510;
            low_80407 = low_tmp_80511;
            high_80408 = high_tmp_80512;
        }
        init_idx_79952 = loop_while_80406;
        init_idx_79953 = low_80407;
        init_idx_79954 = high_80408;
        
        bool idx_79973;
        int64_t idx_79974;
        int64_t idx_79975;
        int64_t idx_79976;
        bool loop_while_80424;
        int64_t l_idx_80425;
        int64_t r_idx_80426;
        int64_t span_80427;
        
        loop_while_80424 = loop_cond_70305;
        l_idx_80425 = init_idx_79953;
        r_idx_80426 = init_idx_79953;
        span_80427 = (int64_t) 1;
        while (loop_while_80424) {
            int64_t max_arg_80428 = sub64(l_idx_80425, (int64_t) 1);
            int64_t max_res_80429 = smax64((int64_t) 0, max_arg_80428);
            int64_t min_arg_80430 = add64((int64_t) 1, r_idx_80426);
            int64_t min_res_80431 = smin64(min_arg_73894, min_arg_80430);
            bool x_80432 = sle64((int64_t) 0, max_res_80429);
            bool y_80433 = slt64(max_res_80429, n_70280);
            bool bounds_check_80434 = x_80432 && y_80433;
            bool index_certs_80435;
            
            if (!bounds_check_80434) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_80429,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_80436 = ((int64_t *) mem_75902.mem)[max_res_80429];
            int64_t abs_arg_80437 = sub64(x_80436, defunc_0_g_res_79951);
            int64_t abs_res_80438 = abs64(abs_arg_80437);
            bool x_80439 = sle64((int64_t) 0, min_res_80431);
            bool y_80440 = slt64(min_res_80431, n_70280);
            bool bounds_check_80441 = x_80439 && y_80440;
            bool index_certs_80442;
            
            if (!bounds_check_80441) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_80431,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_80443 = ((int64_t *) mem_75902.mem)[min_res_80431];
            int64_t abs_arg_80444 = sub64(x_80443, defunc_0_g_res_79951);
            int64_t abs_res_80445 = abs64(abs_arg_80444);
            bool cond_80446 = max_res_80429 == l_idx_80425;
            int64_t loopres_80447;
            int64_t loopres_80448;
            int64_t loopres_80449;
            
            if (cond_80446) {
                loopres_80447 = l_idx_80425;
                loopres_80448 = r_idx_80426;
                loopres_80449 = min_res_70300;
            } else {
                bool cond_80450 = slt64(abs_res_80438, abs_res_80445);
                bool cond_f_res_80451 = min_res_80431 == r_idx_80426;
                bool x_80452 = !cond_80450;
                bool y_80453 = cond_f_res_80451 && x_80452;
                bool cond_80454 = cond_80450 || y_80453;
                int64_t loopres_f_res_80455;
                
                if (cond_80454) {
                    loopres_f_res_80455 = max_res_80429;
                } else {
                    loopres_f_res_80455 = l_idx_80425;
                }
                
                int64_t loopres_f_res_80456;
                
                if (cond_80454) {
                    loopres_f_res_80456 = r_idx_80426;
                } else {
                    loopres_f_res_80456 = min_res_80431;
                }
                
                int64_t loopres_f_res_80457;
                
                if (cond_80454) {
                    int64_t loopres_f_res_t_res_80458 = add64((int64_t) 1,
                                                              span_80427);
                    
                    loopres_f_res_80457 = loopres_f_res_t_res_80458;
                } else {
                    int64_t loopres_f_res_f_res_80459 = add64((int64_t) 1,
                                                              span_80427);
                    
                    loopres_f_res_80457 = loopres_f_res_f_res_80459;
                }
                loopres_80447 = loopres_f_res_80455;
                loopres_80448 = loopres_f_res_80456;
                loopres_80449 = loopres_f_res_80457;
            }
            
            bool loop_cond_80460 = slt64(loopres_80449, min_res_70300);
            bool loop_while_tmp_80513 = loop_cond_80460;
            int64_t l_idx_tmp_80514 = loopres_80447;
            int64_t r_idx_tmp_80515 = loopres_80448;
            int64_t span_tmp_80516 = loopres_80449;
            
            loop_while_80424 = loop_while_tmp_80513;
            l_idx_80425 = l_idx_tmp_80514;
            r_idx_80426 = r_idx_tmp_80515;
            span_80427 = span_tmp_80516;
        }
        idx_79973 = loop_while_80424;
        idx_79974 = l_idx_80425;
        idx_79975 = r_idx_80426;
        idx_79976 = span_80427;
        
        int64_t min_res_80014 = smin64(min_arg_73895, idx_79974);
        int64_t max_res_80015 = smax64((int64_t) 0, min_res_80014);
        int64_t x_80016 = add64(min_res_73896, max_res_80015);
        int64_t r_80017 = sub64(x_80016, (int64_t) 1);
        bool x_80018 = sle64((int64_t) 0, r_80017);
        bool y_80019 = slt64(r_80017, n_70280);
        bool bounds_check_80020 = x_80018 && y_80019;
        bool index_certs_80021;
        
        if (!bounds_check_80020) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_80017,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_80022 = ((int64_t *) mem_75899.mem)[r_80017];
        int64_t abs_arg_80023 = sub64(x_80022, min_res_79950);
        int64_t abs_res_80024 = abs64(abs_arg_80023);
        bool x_80025 = sle64((int64_t) 0, max_res_80015);
        bool y_80026 = slt64(max_res_80015, n_70280);
        bool bounds_check_80027 = x_80025 && y_80026;
        bool index_certs_80028;
        
        if (!bounds_check_80027) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_80015,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_80029 = ((int64_t *) mem_75899.mem)[max_res_80015];
        int64_t abs_arg_80030 = sub64(x_80029, min_res_79950);
        int64_t abs_res_80031 = abs64(abs_arg_80030);
        int64_t max_res_80032 = smax64(abs_res_80024, abs_res_80031);
        float defunc_0_f_res_80033 = sitofp_i64_f32(max_res_80032);
        float defunc_1_f_res_80034 = max_res_73900 + defunc_0_f_res_80033;
        float defunc_2_reduce_res_80037;
        float defunc_2_reduce_res_80038;
        float defunc_2_reduce_res_80039;
        int64_t flat_tid_73715 = (int64_t) 0;
        int32_t num_tasks_80517;
        struct futhark_mc_task_81969 futhark_mc_task_81969;
        
        futhark_mc_task_81969.ctx = ctx;
        futhark_mc_task_81969.free_last_res_73879 = last_res_73879;
        futhark_mc_task_81969.free_mem_75899 = mem_75899.mem;
        futhark_mc_task_81969.free_mem_75905 = mem_75905.mem;
        futhark_mc_task_81969.free_min_res_79950 = min_res_79950;
        futhark_mc_task_81969.free_max_res_80015 = max_res_80015;
        futhark_mc_task_81969.free_defunc_1_f_res_80034 = defunc_1_f_res_80034;
        futhark_mc_task_81969.retval_defunc_2_reduce_res_80037 =
            &defunc_2_reduce_res_80037;
        futhark_mc_task_81969.retval_defunc_2_reduce_res_80038 =
            &defunc_2_reduce_res_80038;
        futhark_mc_task_81969.retval_defunc_2_reduce_res_80039 =
            &defunc_2_reduce_res_80039;
        futhark_mc_task_81969.retval_mem_80035 = mem_80035;
        futhark_mc_task_81969.retval_mem_80036 = mem_80036;
        
        struct scheduler_segop futhark_mc_task_81969_task;
        
        futhark_mc_task_81969_task.args = &futhark_mc_task_81969;
        futhark_mc_task_81969_task.top_level_fn = futhark_mc_segred_task_81970;
        futhark_mc_task_81969_task.name = "futhark_mc_segred_task_81970";
        futhark_mc_task_81969_task.iterations = q_70282;
        futhark_mc_task_81969_task.task_time =
            &ctx->futhark_mc_segred_task_81970_total_time;
        futhark_mc_task_81969_task.task_iter =
            &ctx->futhark_mc_segred_task_81970_total_iter;
        futhark_mc_task_81969_task.sched = STATIC;
        futhark_mc_task_81969_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81970_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81969_task);
        
        if (futhark_mc_segred_task_81970_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_80069 = defunc_2_reduce_res_80037 * defunc_2_reduce_res_80039;
        float y_80070 = defunc_2_reduce_res_80038 * defunc_2_reduce_res_80038;
        float y_80071 = x_80069 - y_80070;
        float det1_80072 = 1.0F / y_80071;
        float a11_80073 = defunc_2_reduce_res_80039 * det1_80072;
        float x_80074 = 0.0F - defunc_2_reduce_res_80038;
        float b11_80075 = det1_80072 * x_80074;
        float c11_80076 = defunc_2_reduce_res_80037 * det1_80072;
        float defunc_2_reduce_res_80077;
        float defunc_2_reduce_res_80078;
        int64_t flat_tid_73717 = (int64_t) 0;
        int32_t num_tasks_80538;
        struct futhark_mc_task_81976 futhark_mc_task_81976;
        
        futhark_mc_task_81976.ctx = ctx;
        futhark_mc_task_81976.free_last_res_73879 = last_res_73879;
        futhark_mc_task_81976.free_mem_75896 = mem_75896.mem;
        futhark_mc_task_81976.free_max_res_80015 = max_res_80015;
        futhark_mc_task_81976.free_mem_80035 = mem_80035;
        futhark_mc_task_81976.free_mem_80036 = mem_80036;
        futhark_mc_task_81976.free_a11_80073 = a11_80073;
        futhark_mc_task_81976.free_b11_80075 = b11_80075;
        futhark_mc_task_81976.free_c11_80076 = c11_80076;
        futhark_mc_task_81976.retval_defunc_2_reduce_res_80077 =
            &defunc_2_reduce_res_80077;
        futhark_mc_task_81976.retval_defunc_2_reduce_res_80078 =
            &defunc_2_reduce_res_80078;
        
        struct scheduler_segop futhark_mc_task_81976_task;
        
        futhark_mc_task_81976_task.args = &futhark_mc_task_81976;
        futhark_mc_task_81976_task.top_level_fn = futhark_mc_segred_task_81977;
        futhark_mc_task_81976_task.name = "futhark_mc_segred_task_81977";
        futhark_mc_task_81976_task.iterations = q_70282;
        futhark_mc_task_81976_task.task_time =
            &ctx->futhark_mc_segred_task_81977_total_time;
        futhark_mc_task_81976_task.task_iter =
            &ctx->futhark_mc_segred_task_81977_total_iter;
        futhark_mc_task_81976_task.sched = STATIC;
        futhark_mc_task_81976_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_81977_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81976_task);
        
        if (futhark_mc_segred_task_81977_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_75944.mem)[gtid_73714] = defunc_2_reduce_res_80077;
        ((float *) mem_75947.mem)[gtid_73714] = defunc_2_reduce_res_80078;
    }
    
  cleanup:
    { }
    free(mem_80035);
    free(mem_80036);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81966_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81966_end -
                 futhark_mc_segmap_parloop_81966_start;
        
        ctx->futhark_mc_segmap_parloop_81966_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81966_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81966_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81964(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73713 = tid;
    int num_tasks_80284 = info.nsubtasks;
    struct futhark_mc_task_81958 *futhark_mc_task_81958 =
                                 (struct futhark_mc_task_81958 *) args;
    struct futhark_context *ctx = futhark_mc_task_81958->ctx;
    uint64_t futhark_mc_segmap_nested_task_81964_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81964_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_81958->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81958->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81958->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81958->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81958->free_i_70294;
    bool x_70295 = futhark_mc_task_81958->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81958->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81958->free_loop_cond_70305;
    int64_t last_res_73879 = futhark_mc_task_81958->free_last_res_73879;
    int64_t min_arg_73894 = futhark_mc_task_81958->free_min_arg_73894;
    int64_t min_arg_73895 = futhark_mc_task_81958->free_min_arg_73895;
    int64_t min_res_73896 = futhark_mc_task_81958->free_min_res_73896;
    float max_res_73900 = futhark_mc_task_81958->free_max_res_73900;
    struct memblock mem_75896 = {.desc ="mem_75896", .mem =
                                 futhark_mc_task_81958->free_mem_75896, .size =
                                 0, .references =NULL};
    struct memblock mem_75899 = {.desc ="mem_75899", .mem =
                                 futhark_mc_task_81958->free_mem_75899, .size =
                                 0, .references =NULL};
    struct memblock mem_75902 = {.desc ="mem_75902", .mem =
                                 futhark_mc_task_81958->free_mem_75902, .size =
                                 0, .references =NULL};
    int64_t bytes_75904 = futhark_mc_task_81958->free_bytes_75904;
    struct memblock mem_75905 = {.desc ="mem_75905", .mem =
                                 futhark_mc_task_81958->free_mem_75905, .size =
                                 0, .references =NULL};
    struct memblock mem_75944 = {.desc ="mem_75944", .mem =
                                 futhark_mc_task_81958->free_mem_75944, .size =
                                 0, .references =NULL};
    struct memblock mem_75947 = {.desc ="mem_75947", .mem =
                                 futhark_mc_task_81958->free_mem_75947, .size =
                                 0, .references =NULL};
    int64_t iter_80405;
    struct futhark_mc_segmap_parloop_struct_81965
    futhark_mc_segmap_parloop_struct_81965;
    
    futhark_mc_segmap_parloop_struct_81965.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81965.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81965.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81965.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81965.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81965.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81965.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81965.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81965.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81965.free_last_res_73879 = last_res_73879;
    futhark_mc_segmap_parloop_struct_81965.free_min_arg_73894 = min_arg_73894;
    futhark_mc_segmap_parloop_struct_81965.free_min_arg_73895 = min_arg_73895;
    futhark_mc_segmap_parloop_struct_81965.free_min_res_73896 = min_res_73896;
    futhark_mc_segmap_parloop_struct_81965.free_max_res_73900 = max_res_73900;
    futhark_mc_segmap_parloop_struct_81965.free_mem_75896 = mem_75896.mem;
    futhark_mc_segmap_parloop_struct_81965.free_mem_75899 = mem_75899.mem;
    futhark_mc_segmap_parloop_struct_81965.free_mem_75902 = mem_75902.mem;
    futhark_mc_segmap_parloop_struct_81965.free_bytes_75904 = bytes_75904;
    futhark_mc_segmap_parloop_struct_81965.free_mem_75905 = mem_75905.mem;
    futhark_mc_segmap_parloop_struct_81965.free_mem_75944 = mem_75944.mem;
    futhark_mc_segmap_parloop_struct_81965.free_mem_75947 = mem_75947.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81966_task;
    
    futhark_mc_segmap_parloop_81966_task.name =
        "futhark_mc_segmap_parloop_81966";
    futhark_mc_segmap_parloop_81966_task.fn = futhark_mc_segmap_parloop_81966;
    futhark_mc_segmap_parloop_81966_task.args =
        &futhark_mc_segmap_parloop_struct_81965;
    futhark_mc_segmap_parloop_81966_task.iterations = iterations;
    futhark_mc_segmap_parloop_81966_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81966_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81966_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81966_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81966_task);
    
    if (futhark_mc_segmap_parloop_81966_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81966_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81966_total_end -
                 futhark_mc_segmap_parloop_81966_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81966_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81966_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81966_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81964_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81964_end -
                 futhark_mc_segmap_nested_task_81964_start;
        
        ctx->futhark_mc_segmap_nested_task_81964_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81964_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81964_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81931(void *args, int64_t start,
                                           int64_t end, int flat_tid_73701,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81930
    *futhark_mc_segmap_parloop_struct_81930 =
    (struct futhark_mc_segmap_parloop_struct_81930 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81930->ctx;
    uint64_t futhark_mc_segmap_parloop_81931_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81931_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_segmap_parloop_struct_81930->free_m_70279;
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81930->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81930->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81930->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81930->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81930->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81930->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81930->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81930->free_loop_cond_70305;
    float i64_res_70306 =
          futhark_mc_segmap_parloop_struct_81930->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81930->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75892 =
            futhark_mc_segmap_parloop_struct_81930->free_bytes_75892;
    int64_t bytes_75895 =
            futhark_mc_segmap_parloop_struct_81930->free_bytes_75895;
    int64_t bytes_75904 =
            futhark_mc_segmap_parloop_struct_81930->free_bytes_75904;
    int64_t bytes_75943 =
            futhark_mc_segmap_parloop_struct_81930->free_bytes_75943;
    struct memblock mem_76086 = {.desc ="mem_76086", .mem =
                                 futhark_mc_segmap_parloop_struct_81930->free_mem_76086,
                                 .size =0, .references =NULL};
    struct memblock mem_76090 = {.desc ="mem_76090", .mem =
                                 futhark_mc_segmap_parloop_struct_81930->free_mem_76090,
                                 .size =0, .references =NULL};
    size_t mem_75893_cached_sizze_81932 = 0;
    unsigned char *mem_75893 = NULL;
    size_t mem_75896_cached_sizze_81933 = 0;
    unsigned char *mem_75896 = NULL;
    size_t mem_75899_cached_sizze_81934 = 0;
    unsigned char *mem_75899 = NULL;
    size_t mem_75902_cached_sizze_81935 = 0;
    unsigned char *mem_75902 = NULL;
    size_t mem_75905_cached_sizze_81936 = 0;
    unsigned char *mem_75905 = NULL;
    size_t mem_75944_cached_sizze_81937 = 0;
    unsigned char *mem_75944 = NULL;
    size_t mem_75947_cached_sizze_81938 = 0;
    unsigned char *mem_75947 = NULL;
    int64_t iterations = end - start;
    int64_t iter_79931 = start;
    
    if (mem_75893_cached_sizze_81932 < (size_t) bytes_75892) {
        mem_75893 = realloc(mem_75893, bytes_75892);
        mem_75893_cached_sizze_81932 = bytes_75892;
    }
    if (mem_75896_cached_sizze_81933 < (size_t) bytes_75895) {
        mem_75896 = realloc(mem_75896, bytes_75895);
        mem_75896_cached_sizze_81933 = bytes_75895;
    }
    if (mem_75899_cached_sizze_81934 < (size_t) bytes_75892) {
        mem_75899 = realloc(mem_75899, bytes_75892);
        mem_75899_cached_sizze_81934 = bytes_75892;
    }
    if (mem_75902_cached_sizze_81935 < (size_t) bytes_75892) {
        mem_75902 = realloc(mem_75902, bytes_75892);
        mem_75902_cached_sizze_81935 = bytes_75892;
    }
    if (mem_75905_cached_sizze_81936 < (size_t) bytes_75904) {
        mem_75905 = realloc(mem_75905, bytes_75904);
        mem_75905_cached_sizze_81936 = bytes_75904;
    }
    if (mem_75944_cached_sizze_81937 < (size_t) bytes_75943) {
        mem_75944 = realloc(mem_75944, bytes_75943);
        mem_75944_cached_sizze_81937 = bytes_75943;
    }
    if (mem_75947_cached_sizze_81938 < (size_t) bytes_75943) {
        mem_75947 = realloc(mem_75947, bytes_75943);
        mem_75947_cached_sizze_81938 = bytes_75943;
    }
    for (; iter_79931 < end; iter_79931++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_80252 = m_70279;
        int64_t gtid_73702 = iter_79931;
        int64_t remnant_80253 = iter_79931 - gtid_73702;
        int64_t flat_tid_73703 = (int64_t) 0;
        int32_t num_tasks_80254;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_81939 futhark_mc_task_81939;
        
        futhark_mc_task_81939.ctx = ctx;
        futhark_mc_task_81939.free_n_70280 = n_70280;
        futhark_mc_task_81939.free_gtid_73702 = gtid_73702;
        futhark_mc_task_81939.free_Y_mem_75353 = Y_mem_75353.mem;
        futhark_mc_task_81939.free_mem_75893 = mem_75893;
        
        struct scheduler_segop futhark_mc_task_81939_task;
        
        futhark_mc_task_81939_task.args = &futhark_mc_task_81939;
        futhark_mc_task_81939_task.top_level_fn = futhark_mc_segscan_task_81940;
        futhark_mc_task_81939_task.name = "futhark_mc_segscan_task_81940";
        futhark_mc_task_81939_task.iterations = n_70280;
        futhark_mc_task_81939_task.task_time =
            &ctx->futhark_mc_segscan_task_81940_total_time;
        futhark_mc_task_81939_task.task_iter =
            &ctx->futhark_mc_segscan_task_81940_total_iter;
        futhark_mc_task_81939_task.sched = STATIC;
        futhark_mc_task_81939_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_81940_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81939_task);
        
        if (futhark_mc_segscan_task_81940_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_73879 = ((int64_t *) mem_75893)[i_70294];
        
        for (int64_t i_80268 = 0; i_80268 < n_70280; i_80268++) {
            ((float *) mem_75896)[i_80268] = 0.0F;
        }
        for (int64_t i_80269 = 0; i_80269 < n_70280; i_80269++) {
            ((int64_t *) mem_75899)[i_80269] = (int64_t) -1;
        }
        
        int64_t flat_tid_73705 = (int64_t) 0;
        int32_t num_tasks_80270;
        struct futhark_mc_task_81946 futhark_mc_task_81946;
        
        futhark_mc_task_81946.ctx = ctx;
        futhark_mc_task_81946.free_n_70280 = n_70280;
        futhark_mc_task_81946.free_gtid_73702 = gtid_73702;
        futhark_mc_task_81946.free_Y_mem_75353 = Y_mem_75353.mem;
        futhark_mc_task_81946.free_mem_75893 = mem_75893;
        futhark_mc_task_81946.free_mem_75896 = mem_75896;
        futhark_mc_task_81946.free_mem_75899 = mem_75899;
        
        struct scheduler_segop futhark_mc_task_81946_task;
        
        futhark_mc_task_81946_task.args = &futhark_mc_task_81946;
        futhark_mc_task_81946_task.top_level_fn = futhark_mc_segmap_task_81947;
        futhark_mc_task_81946_task.name = "futhark_mc_segmap_task_81947";
        futhark_mc_task_81946_task.iterations = n_70280;
        futhark_mc_task_81946_task.task_time =
            &ctx->futhark_mc_segmap_task_81947_total_time;
        futhark_mc_task_81946_task.task_iter =
            &ctx->futhark_mc_segmap_task_81947_total_iter;
        futhark_mc_task_81946_task.sched = STATIC;
        futhark_mc_task_81946_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81947_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81946_task);
        
        if (futhark_mc_segmap_task_81947_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_73707 = (int64_t) 0;
        int32_t num_tasks_80276;
        struct futhark_mc_task_81950 futhark_mc_task_81950;
        
        futhark_mc_task_81950.ctx = ctx;
        futhark_mc_task_81950.free_n_70280 = n_70280;
        futhark_mc_task_81950.free_mem_75899 = mem_75899;
        futhark_mc_task_81950.free_mem_75902 = mem_75902;
        
        struct scheduler_segop futhark_mc_task_81950_task;
        
        futhark_mc_task_81950_task.args = &futhark_mc_task_81950;
        futhark_mc_task_81950_task.top_level_fn = futhark_mc_segmap_task_81951;
        futhark_mc_task_81950_task.name = "futhark_mc_segmap_task_81951";
        futhark_mc_task_81950_task.iterations = n_70280;
        futhark_mc_task_81950_task.task_time =
            &ctx->futhark_mc_segmap_task_81951_total_time;
        futhark_mc_task_81950_task.task_iter =
            &ctx->futhark_mc_segmap_task_81951_total_iter;
        futhark_mc_task_81950_task.sched = STATIC;
        futhark_mc_task_81950_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81951_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81950_task);
        
        if (futhark_mc_segmap_task_81951_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_73894 = sub64(last_res_73879, (int64_t) 1);
        int64_t min_arg_73895 = sub64(last_res_73879, min_res_70300);
        int64_t min_res_73896 = smin64(q_70282, last_res_73879);
        float i64_res_73897 = sitofp_i64_f32(last_res_73879);
        float x_73898 = i64_res_70306 - i64_res_73897;
        float max_arg_73899 = x_73898 / 2.0F;
        float max_res_73900 = fmax32(0.0F, max_arg_73899);
        int64_t flat_tid_73709 = (int64_t) 0;
        int32_t num_tasks_80280;
        struct futhark_mc_task_81954 futhark_mc_task_81954;
        
        futhark_mc_task_81954.ctx = ctx;
        futhark_mc_task_81954.free_q_70282 = q_70282;
        futhark_mc_task_81954.free_last_res_73879 = last_res_73879;
        futhark_mc_task_81954.free_mem_75905 = mem_75905;
        
        struct scheduler_segop futhark_mc_task_81954_task;
        
        futhark_mc_task_81954_task.args = &futhark_mc_task_81954;
        futhark_mc_task_81954_task.top_level_fn = futhark_mc_segmap_task_81955;
        futhark_mc_task_81954_task.name = "futhark_mc_segmap_task_81955";
        futhark_mc_task_81954_task.iterations = q_70282;
        futhark_mc_task_81954_task.task_time =
            &ctx->futhark_mc_segmap_task_81955_total_time;
        futhark_mc_task_81954_task.task_iter =
            &ctx->futhark_mc_segmap_task_81955_total_iter;
        futhark_mc_task_81954_task.sched = STATIC;
        futhark_mc_task_81954_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_81955_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81954_task);
        
        if (futhark_mc_segmap_task_81955_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_73711 = (int64_t) 0;
        int32_t num_tasks_80284;
        int64_t flat_tid_73713 = (int64_t) 0;
        struct futhark_mc_task_81958 futhark_mc_task_81958;
        
        futhark_mc_task_81958.ctx = ctx;
        futhark_mc_task_81958.free_n_70280 = n_70280;
        futhark_mc_task_81958.free_q_70282 = q_70282;
        futhark_mc_task_81958.free_jump_70284 = jump_70284;
        futhark_mc_task_81958.free_n_m_70288 = n_m_70288;
        futhark_mc_task_81958.free_i_70294 = i_70294;
        futhark_mc_task_81958.free_x_70295 = x_70295;
        futhark_mc_task_81958.free_min_res_70300 = min_res_70300;
        futhark_mc_task_81958.free_loop_cond_70305 = loop_cond_70305;
        futhark_mc_task_81958.free_last_res_73879 = last_res_73879;
        futhark_mc_task_81958.free_min_arg_73894 = min_arg_73894;
        futhark_mc_task_81958.free_min_arg_73895 = min_arg_73895;
        futhark_mc_task_81958.free_min_res_73896 = min_res_73896;
        futhark_mc_task_81958.free_max_res_73900 = max_res_73900;
        futhark_mc_task_81958.free_mem_75896 = mem_75896;
        futhark_mc_task_81958.free_mem_75899 = mem_75899;
        futhark_mc_task_81958.free_mem_75902 = mem_75902;
        futhark_mc_task_81958.free_bytes_75904 = bytes_75904;
        futhark_mc_task_81958.free_mem_75905 = mem_75905;
        futhark_mc_task_81958.free_mem_75944 = mem_75944;
        futhark_mc_task_81958.free_mem_75947 = mem_75947;
        
        struct scheduler_segop futhark_mc_task_81958_task;
        
        futhark_mc_task_81958_task.args = &futhark_mc_task_81958;
        futhark_mc_task_81958_task.top_level_fn = futhark_mc_segmap_task_81959;
        futhark_mc_task_81958_task.name = "futhark_mc_segmap_task_81959";
        futhark_mc_task_81958_task.iterations = n_m_70288;
        futhark_mc_task_81958_task.task_time =
            &ctx->futhark_mc_segmap_task_81959_total_time;
        futhark_mc_task_81958_task.task_iter =
            &ctx->futhark_mc_segmap_task_81959_total_iter;
        futhark_mc_task_81958_task.sched = DYNAMIC;
        futhark_mc_task_81958_task.nested_fn =
            futhark_mc_segmap_nested_task_81964;
        
        int futhark_mc_segmap_task_81959_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_81958_task);
        
        if (futhark_mc_segmap_task_81959_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_76086.mem + gtid_73702 * n_m_70288 * (int64_t) 4,
                    mem_75944 + (int64_t) 0, n_m_70288 * (int64_t) 4);
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_76090.mem + gtid_73702 * n_m_70288 * (int64_t) 4,
                    mem_75947 + (int64_t) 0, n_m_70288 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_75893);
    free(mem_75896);
    free(mem_75899);
    free(mem_75902);
    free(mem_75905);
    free(mem_75944);
    free(mem_75947);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81931_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81931_end -
                 futhark_mc_segmap_parloop_81931_start;
        
        ctx->futhark_mc_segmap_parloop_81931_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81931_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81931_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81929(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_73701 = tid;
    int num_tasks_79716 = info.nsubtasks;
    struct futhark_mc_task_81916 *futhark_mc_task_81916 =
                                 (struct futhark_mc_task_81916 *) args;
    struct futhark_context *ctx = futhark_mc_task_81916->ctx;
    uint64_t futhark_mc_segmap_nested_task_81929_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81929_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_task_81916->free_m_70279;
    int64_t n_70280 = futhark_mc_task_81916->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81916->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81916->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81916->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81916->free_i_70294;
    bool x_70295 = futhark_mc_task_81916->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81916->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81916->free_loop_cond_70305;
    float i64_res_70306 = futhark_mc_task_81916->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81916->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_75892 = futhark_mc_task_81916->free_bytes_75892;
    int64_t bytes_75895 = futhark_mc_task_81916->free_bytes_75895;
    int64_t bytes_75904 = futhark_mc_task_81916->free_bytes_75904;
    int64_t bytes_75943 = futhark_mc_task_81916->free_bytes_75943;
    struct memblock mem_76086 = {.desc ="mem_76086", .mem =
                                 futhark_mc_task_81916->free_mem_76086, .size =
                                 0, .references =NULL};
    struct memblock mem_76090 = {.desc ="mem_76090", .mem =
                                 futhark_mc_task_81916->free_mem_76090, .size =
                                 0, .references =NULL};
    int64_t iter_79931;
    struct futhark_mc_segmap_parloop_struct_81930
    futhark_mc_segmap_parloop_struct_81930;
    
    futhark_mc_segmap_parloop_struct_81930.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81930.free_m_70279 = m_70279;
    futhark_mc_segmap_parloop_struct_81930.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81930.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81930.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81930.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81930.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81930.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81930.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81930.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81930.free_i64_res_70306 = i64_res_70306;
    futhark_mc_segmap_parloop_struct_81930.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81930.free_bytes_75892 = bytes_75892;
    futhark_mc_segmap_parloop_struct_81930.free_bytes_75895 = bytes_75895;
    futhark_mc_segmap_parloop_struct_81930.free_bytes_75904 = bytes_75904;
    futhark_mc_segmap_parloop_struct_81930.free_bytes_75943 = bytes_75943;
    futhark_mc_segmap_parloop_struct_81930.free_mem_76086 = mem_76086.mem;
    futhark_mc_segmap_parloop_struct_81930.free_mem_76090 = mem_76090.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81931_task;
    
    futhark_mc_segmap_parloop_81931_task.name =
        "futhark_mc_segmap_parloop_81931";
    futhark_mc_segmap_parloop_81931_task.fn = futhark_mc_segmap_parloop_81931;
    futhark_mc_segmap_parloop_81931_task.args =
        &futhark_mc_segmap_parloop_struct_81930;
    futhark_mc_segmap_parloop_81931_task.iterations = iterations;
    futhark_mc_segmap_parloop_81931_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81931_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81931_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81931_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81931_task);
    
    if (futhark_mc_segmap_parloop_81931_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81931_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81931_total_end -
                 futhark_mc_segmap_parloop_81931_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81931_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81931_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81931_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81929_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81929_end -
                 futhark_mc_segmap_nested_task_81929_start;
        
        ctx->futhark_mc_segmap_nested_task_81929_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81929_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81929_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_81982 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_76092;
    int64_t free_bytes_76095;
    int64_t free_bytes_76104;
    int64_t free_bytes_76179;
    unsigned char *free_mem_76352;
    unsigned char *free_mem_76356;
};
struct futhark_mc_segmap_parloop_struct_81984 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_76092;
    int64_t free_bytes_76095;
    int64_t free_bytes_76104;
    int64_t free_bytes_76179;
    unsigned char *free_mem_76352;
    unsigned char *free_mem_76356;
};
static int futhark_mc_segmap_parloop_81985(void *args, int64_t start,
                                           int64_t end, int flat_tid_74209,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81984
    *futhark_mc_segmap_parloop_struct_81984 =
    (struct futhark_mc_segmap_parloop_struct_81984 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81984->ctx;
    uint64_t futhark_mc_segmap_parloop_81985_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81985_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_segmap_parloop_struct_81984->free_m_70279;
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81984->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81984->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81984->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81984->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81984->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81984->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81984->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81984->free_loop_cond_70305;
    float i64_res_70306 =
          futhark_mc_segmap_parloop_struct_81984->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81984->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_76092 =
            futhark_mc_segmap_parloop_struct_81984->free_bytes_76092;
    int64_t bytes_76095 =
            futhark_mc_segmap_parloop_struct_81984->free_bytes_76095;
    int64_t bytes_76104 =
            futhark_mc_segmap_parloop_struct_81984->free_bytes_76104;
    int64_t bytes_76179 =
            futhark_mc_segmap_parloop_struct_81984->free_bytes_76179;
    struct memblock mem_76352 = {.desc ="mem_76352", .mem =
                                 futhark_mc_segmap_parloop_struct_81984->free_mem_76352,
                                 .size =0, .references =NULL};
    struct memblock mem_76356 = {.desc ="mem_76356", .mem =
                                 futhark_mc_segmap_parloop_struct_81984->free_mem_76356,
                                 .size =0, .references =NULL};
    size_t mem_76186_cached_sizze_81986 = 0;
    unsigned char *mem_76186 = NULL;
    size_t mem_76201_cached_sizze_81987 = 0;
    unsigned char *mem_76201 = NULL;
    size_t mem_76204_cached_sizze_81988 = 0;
    unsigned char *mem_76204 = NULL;
    size_t mem_76231_cached_sizze_81989 = 0;
    unsigned char *mem_76231 = NULL;
    size_t mem_76246_cached_sizze_81990 = 0;
    unsigned char *mem_76246 = NULL;
    size_t mem_76261_cached_sizze_81991 = 0;
    unsigned char *mem_76261 = NULL;
    size_t mem_76264_cached_sizze_81992 = 0;
    unsigned char *mem_76264 = NULL;
    size_t mem_76281_cached_sizze_81993 = 0;
    unsigned char *mem_76281 = NULL;
    size_t mem_76284_cached_sizze_81994 = 0;
    unsigned char *mem_76284 = NULL;
    size_t mem_76311_cached_sizze_81995 = 0;
    unsigned char *mem_76311 = NULL;
    size_t mem_76314_cached_sizze_81996 = 0;
    unsigned char *mem_76314 = NULL;
    int64_t iterations = end - start;
    int64_t iter_80554 = start;
    
    if (mem_76186_cached_sizze_81986 < (size_t) bytes_76092) {
        mem_76186 = realloc(mem_76186, bytes_76092);
        mem_76186_cached_sizze_81986 = bytes_76092;
    }
    if (mem_76201_cached_sizze_81987 < (size_t) bytes_76095) {
        mem_76201 = realloc(mem_76201, bytes_76095);
        mem_76201_cached_sizze_81987 = bytes_76095;
    }
    if (mem_76204_cached_sizze_81988 < (size_t) bytes_76092) {
        mem_76204 = realloc(mem_76204, bytes_76092);
        mem_76204_cached_sizze_81988 = bytes_76092;
    }
    if (mem_76231_cached_sizze_81989 < (size_t) bytes_76092) {
        mem_76231 = realloc(mem_76231, bytes_76092);
        mem_76231_cached_sizze_81989 = bytes_76092;
    }
    if (mem_76246_cached_sizze_81990 < (size_t) bytes_76104) {
        mem_76246 = realloc(mem_76246, bytes_76104);
        mem_76246_cached_sizze_81990 = bytes_76104;
    }
    if (mem_76261_cached_sizze_81991 < (size_t) bytes_76179) {
        mem_76261 = realloc(mem_76261, bytes_76179);
        mem_76261_cached_sizze_81991 = bytes_76179;
    }
    if (mem_76264_cached_sizze_81992 < (size_t) bytes_76179) {
        mem_76264 = realloc(mem_76264, bytes_76179);
        mem_76264_cached_sizze_81992 = bytes_76179;
    }
    if (mem_76281_cached_sizze_81993 < (size_t) bytes_76104) {
        mem_76281 = realloc(mem_76281, bytes_76104);
        mem_76281_cached_sizze_81993 = bytes_76104;
    }
    if (mem_76284_cached_sizze_81994 < (size_t) bytes_76104) {
        mem_76284 = realloc(mem_76284, bytes_76104);
        mem_76284_cached_sizze_81994 = bytes_76104;
    }
    if (mem_76311_cached_sizze_81995 < (size_t) bytes_76104) {
        mem_76311 = realloc(mem_76311, bytes_76104);
        mem_76311_cached_sizze_81995 = bytes_76104;
    }
    if (mem_76314_cached_sizze_81996 < (size_t) bytes_76104) {
        mem_76314 = realloc(mem_76314, bytes_76104);
        mem_76314_cached_sizze_81996 = bytes_76104;
    }
    for (; iter_80554 < end; iter_80554++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_80783 = m_70279;
        int64_t gtid_74210 = iter_80554;
        int64_t remnant_80784 = iter_80554 - gtid_74210;
        int64_t discard_75205;
        int64_t scanacc_80556 = (int64_t) 0;
        
        for (int64_t i_80555 = 0; i_80555 < n_70280; i_80555++) {
            float x_80558 = ((float *) Y_mem_75353.mem)[gtid_74210 * n_70280 +
                                                        i_80555];
            bool isnan_res_80559;
            
            isnan_res_80559 = futrts_isnan32(x_80558);
            
            bool defunc_0_p_res_80560 = !isnan_res_80559;
            int64_t defunc_0_f_res_80561 = btoi_bool_i64(defunc_0_p_res_80560);
            int64_t defunc_1_op_res_80562 = add64(defunc_0_f_res_80561,
                                                  scanacc_80556);
            
            ((int64_t *) mem_76186)[i_80555] = defunc_1_op_res_80562;
            
            int64_t scanacc_tmp_80785 = defunc_1_op_res_80562;
            
            scanacc_80556 = scanacc_tmp_80785;
        }
        discard_75205 = scanacc_80556;
        
        int64_t last_res_71338 = ((int64_t *) mem_76186)[i_70294];
        
        for (int64_t i_80787 = 0; i_80787 < n_70280; i_80787++) {
            ((float *) mem_76201)[i_80787] = 0.0F;
        }
        for (int64_t i_80788 = 0; i_80788 < n_70280; i_80788++) {
            ((int64_t *) mem_76204)[i_80788] = (int64_t) -1;
        }
        for (int64_t write_iter_80564 = 0; write_iter_80564 < n_70280;
             write_iter_80564++) {
            float write_iv_80567 = ((float *) Y_mem_75353.mem)[gtid_74210 *
                                                               n_70280 +
                                                               write_iter_80564];
            bool isnan_res_80568;
            
            isnan_res_80568 = futrts_isnan32(write_iv_80567);
            
            bool defunc_0_p_res_80569 = !isnan_res_80568;
            int64_t defunc_1_f_res_80570;
            
            if (defunc_0_p_res_80569) {
                int64_t write_iv_80571 =
                        ((int64_t *) mem_76186)[write_iter_80564];
                int64_t defunc_1_f_res_t_res_80572 = sub64(write_iv_80571,
                                                           (int64_t) 1);
                
                defunc_1_f_res_80570 = defunc_1_f_res_t_res_80572;
            } else {
                defunc_1_f_res_80570 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_80570) &&
                slt64(defunc_1_f_res_80570, n_70280)) {
                ((int64_t *) mem_76204)[defunc_1_f_res_80570] =
                    write_iter_80564;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_80570) &&
                slt64(defunc_1_f_res_80570, n_70280)) {
                if ((int64_t) 4 > 0)
                    memmove(mem_76201 + defunc_1_f_res_80570 * (int64_t) 4,
                            Y_mem_75353.mem + (gtid_74210 * n_70280 +
                                               write_iter_80564) * (int64_t) 4,
                            (int64_t) 4);
            }
        }
        for (int64_t i_80576 = 0; i_80576 < n_70280; i_80576++) {
            int64_t x_80578 = ((int64_t *) mem_76204)[i_80576];
            int64_t defunc_0_f_res_80579 = add64((int64_t) 1, x_80578);
            
            ((int64_t *) mem_76231)[i_80576] = defunc_0_f_res_80579;
        }
        
        int64_t min_arg_71353 = sub64(last_res_71338, (int64_t) 1);
        int64_t min_arg_71354 = sub64(last_res_71338, min_res_70300);
        int64_t min_res_71355 = smin64(q_70282, last_res_71338);
        float i64_res_71356 = sitofp_i64_f32(last_res_71338);
        float x_71357 = i64_res_70306 - i64_res_71356;
        float max_arg_71358 = x_71357 / 2.0F;
        float max_res_71359 = fmax32(0.0F, max_arg_71358);
        
        for (int64_t i_80581 = 0; i_80581 < q_70282; i_80581++) {
            bool cond_80583 = sle64(last_res_71338, i_80581);
            float defunc_0_f_res_80584;
            
            if (cond_80583) {
                defunc_0_f_res_80584 = 0.0F;
            } else {
                defunc_0_f_res_80584 = 1.0F;
            }
            ((float *) mem_76246)[i_80581] = defunc_0_f_res_80584;
        }
        for (int64_t i_80586 = 0; i_80586 < n_m_70288; i_80586++) {
            int64_t min_arg_80589 = mul64(jump_70284, i_80586);
            int64_t min_res_80590 = smin64(i_70294, min_arg_80589);
            int64_t defunc_0_g_res_80591 = add64((int64_t) 1, min_res_80590);
            bool init_idx_80592;
            int64_t init_idx_80593;
            int64_t init_idx_80594;
            bool loop_while_80595;
            int64_t low_80596;
            int64_t high_80597;
            
            loop_while_80595 = x_70295;
            low_80596 = (int64_t) 0;
            high_80597 = i_70294;
            while (loop_while_80595) {
                int64_t x_80598 = add64(low_80596, high_80597);
                int64_t mid_80599 = sdiv64(x_80598, (int64_t) 2);
                bool x_80600 = sle64((int64_t) 0, mid_80599);
                bool y_80601 = slt64(mid_80599, n_70280);
                bool bounds_check_80602 = x_80600 && y_80601;
                bool index_certs_80603;
                
                if (!bounds_check_80602) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_80599,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t mid_id_80604 = ((int64_t *) mem_76231)[mid_80599];
                bool cond_80605 = slt64(mid_id_80604, (int64_t) 0);
                int64_t mid_idx_80606;
                
                if (cond_80605) {
                    mid_idx_80606 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_80606 = mid_id_80604;
                }
                
                bool cond_80607 = sle64(defunc_0_g_res_80591, mid_idx_80606);
                int64_t loopres_80608;
                int64_t loopres_80609;
                
                if (cond_80607) {
                    int64_t loopres_t_res_80610 = sub64(mid_80599, (int64_t) 1);
                    
                    loopres_80608 = low_80596;
                    loopres_80609 = loopres_t_res_80610;
                } else {
                    int64_t loopres_f_res_80611 = add64((int64_t) 1, mid_80599);
                    
                    loopres_80608 = loopres_f_res_80611;
                    loopres_80609 = high_80597;
                }
                
                bool loop_cond_80612 = sle64(loopres_80608, loopres_80609);
                bool loop_while_tmp_80795 = loop_cond_80612;
                int64_t low_tmp_80796 = loopres_80608;
                int64_t high_tmp_80797 = loopres_80609;
                
                loop_while_80595 = loop_while_tmp_80795;
                low_80596 = low_tmp_80796;
                high_80597 = high_tmp_80797;
            }
            init_idx_80592 = loop_while_80595;
            init_idx_80593 = low_80596;
            init_idx_80594 = high_80597;
            
            bool idx_80613;
            int64_t idx_80614;
            int64_t idx_80615;
            int64_t idx_80616;
            bool loop_while_80617;
            int64_t l_idx_80618;
            int64_t r_idx_80619;
            int64_t span_80620;
            
            loop_while_80617 = loop_cond_70305;
            l_idx_80618 = init_idx_80593;
            r_idx_80619 = init_idx_80593;
            span_80620 = (int64_t) 1;
            while (loop_while_80617) {
                int64_t max_arg_80621 = sub64(l_idx_80618, (int64_t) 1);
                int64_t max_res_80622 = smax64((int64_t) 0, max_arg_80621);
                int64_t min_arg_80623 = add64((int64_t) 1, r_idx_80619);
                int64_t min_res_80624 = smin64(min_arg_71353, min_arg_80623);
                bool x_80625 = sle64((int64_t) 0, max_res_80622);
                bool y_80626 = slt64(max_res_80622, n_70280);
                bool bounds_check_80627 = x_80625 && y_80626;
                bool index_certs_80628;
                
                if (!bounds_check_80627) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_80622,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t x_80629 = ((int64_t *) mem_76231)[max_res_80622];
                int64_t abs_arg_80630 = sub64(x_80629, defunc_0_g_res_80591);
                int64_t abs_res_80631 = abs64(abs_arg_80630);
                bool x_80632 = sle64((int64_t) 0, min_res_80624);
                bool y_80633 = slt64(min_res_80624, n_70280);
                bool bounds_check_80634 = x_80632 && y_80633;
                bool index_certs_80635;
                
                if (!bounds_check_80634) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_80624,
                                  "] out of bounds for array of shape [",
                                  (long long) n_70280, "].",
                                  "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                    return 1;
                }
                
                int64_t x_80636 = ((int64_t *) mem_76231)[min_res_80624];
                int64_t abs_arg_80637 = sub64(x_80636, defunc_0_g_res_80591);
                int64_t abs_res_80638 = abs64(abs_arg_80637);
                bool cond_80639 = max_res_80622 == l_idx_80618;
                int64_t loopres_80640;
                int64_t loopres_80641;
                int64_t loopres_80642;
                
                if (cond_80639) {
                    loopres_80640 = l_idx_80618;
                    loopres_80641 = r_idx_80619;
                    loopres_80642 = min_res_70300;
                } else {
                    bool cond_80643 = slt64(abs_res_80631, abs_res_80638);
                    bool cond_f_res_80644 = min_res_80624 == r_idx_80619;
                    bool x_80645 = !cond_80643;
                    bool y_80646 = cond_f_res_80644 && x_80645;
                    bool cond_80647 = cond_80643 || y_80646;
                    int64_t loopres_f_res_80648;
                    
                    if (cond_80647) {
                        loopres_f_res_80648 = max_res_80622;
                    } else {
                        loopres_f_res_80648 = l_idx_80618;
                    }
                    
                    int64_t loopres_f_res_80649;
                    
                    if (cond_80647) {
                        loopres_f_res_80649 = r_idx_80619;
                    } else {
                        loopres_f_res_80649 = min_res_80624;
                    }
                    
                    int64_t loopres_f_res_80650;
                    
                    if (cond_80647) {
                        int64_t loopres_f_res_t_res_80651 = add64((int64_t) 1,
                                                                  span_80620);
                        
                        loopres_f_res_80650 = loopres_f_res_t_res_80651;
                    } else {
                        int64_t loopres_f_res_f_res_80652 = add64((int64_t) 1,
                                                                  span_80620);
                        
                        loopres_f_res_80650 = loopres_f_res_f_res_80652;
                    }
                    loopres_80640 = loopres_f_res_80648;
                    loopres_80641 = loopres_f_res_80649;
                    loopres_80642 = loopres_f_res_80650;
                }
                
                bool loop_cond_80653 = slt64(loopres_80642, min_res_70300);
                bool loop_while_tmp_80798 = loop_cond_80653;
                int64_t l_idx_tmp_80799 = loopres_80640;
                int64_t r_idx_tmp_80800 = loopres_80641;
                int64_t span_tmp_80801 = loopres_80642;
                
                loop_while_80617 = loop_while_tmp_80798;
                l_idx_80618 = l_idx_tmp_80799;
                r_idx_80619 = r_idx_tmp_80800;
                span_80620 = span_tmp_80801;
            }
            idx_80613 = loop_while_80617;
            idx_80614 = l_idx_80618;
            idx_80615 = r_idx_80619;
            idx_80616 = span_80620;
            
            int64_t min_res_80654 = smin64(min_arg_71354, idx_80614);
            int64_t max_res_80655 = smax64((int64_t) 0, min_res_80654);
            int64_t x_80656 = add64(min_res_71355, max_res_80655);
            int64_t r_80657 = sub64(x_80656, (int64_t) 1);
            bool x_80658 = sle64((int64_t) 0, r_80657);
            bool y_80659 = slt64(r_80657, n_70280);
            bool bounds_check_80660 = x_80658 && y_80659;
            bool index_certs_80661;
            
            if (!bounds_check_80660) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_80657,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_80662 = ((int64_t *) mem_76204)[r_80657];
            int64_t abs_arg_80663 = sub64(x_80662, min_res_80590);
            int64_t abs_res_80664 = abs64(abs_arg_80663);
            bool x_80665 = sle64((int64_t) 0, max_res_80655);
            bool y_80666 = slt64(max_res_80655, n_70280);
            bool bounds_check_80667 = x_80665 && y_80666;
            bool index_certs_80668;
            
            if (!bounds_check_80667) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_80655,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_80669 = ((int64_t *) mem_76204)[max_res_80655];
            int64_t abs_arg_80670 = sub64(x_80669, min_res_80590);
            int64_t abs_res_80671 = abs64(abs_arg_80670);
            int64_t max_res_80672 = smax64(abs_res_80664, abs_res_80671);
            float defunc_0_f_res_80673 = sitofp_i64_f32(max_res_80672);
            float defunc_1_f_res_80674 = max_res_71359 + defunc_0_f_res_80673;
            
            for (int64_t i_80679 = 0; i_80679 < q_70282; i_80679++) {
                float x_80682 = ((float *) mem_76246)[i_80679];
                bool cond_80683 = sle64(last_res_71338, i_80679);
                int64_t defunc_0_f_res_80684;
                
                if (cond_80683) {
                    defunc_0_f_res_80684 = (int64_t) 0;
                } else {
                    int64_t i_80685 = add64(max_res_80655, i_80679);
                    int64_t defunc_0_add_arg_80686 =
                            ((int64_t *) mem_76204)[i_80685];
                    int64_t defunc_1_add_res_80687 = add64((int64_t) 1,
                                                           defunc_0_add_arg_80686);
                    
                    defunc_0_f_res_80684 = defunc_1_add_res_80687;
                }
                
                int64_t binop_p_80688 = sub64(defunc_0_f_res_80684,
                                              min_res_80590);
                float defunc_0_f_res_80689 = sitofp_i64_f32(binop_p_80688);
                float abs_res_80690 = (float) fabs(defunc_0_f_res_80689);
                float tmp1_80691 = abs_res_80690 / defunc_1_f_res_80674;
                float x_80692 = tmp1_80691 * tmp1_80691;
                float y_80693 = tmp1_80691 * x_80692;
                float tmp2_80694 = 1.0F - y_80693;
                float x_80695 = tmp2_80694 * tmp2_80694;
                float tmp3_80696 = tmp2_80694 * x_80695;
                float tmp4_80697 = x_80682 * tmp3_80696;
                
                ((float *) mem_76281)[i_80679] = defunc_0_f_res_80689;
                ((float *) mem_76284)[i_80679] = tmp4_80697;
            }
            
            float defunc_2_reduce_res_80702;
            float defunc_2_reduce_res_80703;
            float defunc_2_reduce_res_80704;
            float defunc_2_reduce_res_80705;
            float defunc_2_reduce_res_80706;
            float redout_80710;
            float redout_80711;
            float redout_80712;
            float redout_80713;
            float redout_80714;
            
            redout_80710 = 0.0F;
            redout_80711 = 0.0F;
            redout_80712 = 0.0F;
            redout_80713 = 0.0F;
            redout_80714 = 0.0F;
            for (int64_t i_80709 = 0; i_80709 < q_70282; i_80709++) {
                float x_80717 = ((float *) mem_76281)[i_80709];
                float x_80718 = ((float *) mem_76284)[i_80709];
                float defunc_1_f_res_80719 = x_80717 * x_80718;
                float defunc_1_f_res_80720 = x_80717 * defunc_1_f_res_80719;
                float defunc_1_f_res_80721 = x_80717 * defunc_1_f_res_80720;
                float defunc_1_f_res_80722 = x_80717 * defunc_1_f_res_80721;
                float defunc_1_op_res_80723 = x_80718 + redout_80710;
                float defunc_1_op_res_80724 = defunc_1_f_res_80719 +
                      redout_80711;
                float defunc_1_op_res_80725 = defunc_1_f_res_80720 +
                      redout_80712;
                float defunc_1_op_res_80726 = defunc_1_f_res_80721 +
                      redout_80713;
                float defunc_1_op_res_80727 = defunc_1_f_res_80722 +
                      redout_80714;
                
                ((float *) mem_76311)[i_80709] = defunc_1_f_res_80720;
                ((float *) mem_76314)[i_80709] = defunc_1_f_res_80719;
                
                float redout_tmp_80804 = defunc_1_op_res_80723;
                float redout_tmp_80805 = defunc_1_op_res_80724;
                float redout_tmp_80806 = defunc_1_op_res_80725;
                float redout_tmp_80807 = defunc_1_op_res_80726;
                float redout_tmp_80808 = defunc_1_op_res_80727;
                
                redout_80710 = redout_tmp_80804;
                redout_80711 = redout_tmp_80805;
                redout_80712 = redout_tmp_80806;
                redout_80713 = redout_tmp_80807;
                redout_80714 = redout_tmp_80808;
            }
            defunc_2_reduce_res_80702 = redout_80710;
            defunc_2_reduce_res_80703 = redout_80711;
            defunc_2_reduce_res_80704 = redout_80712;
            defunc_2_reduce_res_80705 = redout_80713;
            defunc_2_reduce_res_80706 = redout_80714;
            
            float x_80730 = defunc_2_reduce_res_80704 *
                  defunc_2_reduce_res_80706;
            float y_80731 = defunc_2_reduce_res_80705 *
                  defunc_2_reduce_res_80705;
            float a12_80732 = x_80730 - y_80731;
            float x_80733 = defunc_2_reduce_res_80704 *
                  defunc_2_reduce_res_80705;
            float y_80734 = defunc_2_reduce_res_80703 *
                  defunc_2_reduce_res_80706;
            float b12_80735 = x_80733 - y_80734;
            float x_80736 = defunc_2_reduce_res_80703 *
                  defunc_2_reduce_res_80705;
            float y_80737 = defunc_2_reduce_res_80704 *
                  defunc_2_reduce_res_80704;
            float c12_80738 = x_80736 - y_80737;
            float x_80739 = defunc_2_reduce_res_80702 *
                  defunc_2_reduce_res_80706;
            float b2_80740 = x_80739 - y_80737;
            float x_80741 = defunc_2_reduce_res_80703 *
                  defunc_2_reduce_res_80704;
            float y_80742 = defunc_2_reduce_res_80702 *
                  defunc_2_reduce_res_80705;
            float c2_80743 = x_80741 - y_80742;
            float x_80744 = defunc_2_reduce_res_80702 * a12_80732;
            float y_80745 = defunc_2_reduce_res_80703 * b12_80735;
            float x_80746 = x_80744 + y_80745;
            float y_80747 = defunc_2_reduce_res_80704 * c12_80738;
            float y_80748 = x_80746 + y_80747;
            float det_80749 = 1.0F / y_80748;
            float a12_80750 = a12_80732 * det_80749;
            float b12_80751 = b12_80735 * det_80749;
            float c12_80752 = c12_80738 * det_80749;
            float b2_80753 = b2_80740 * det_80749;
            float c2_80754 = c2_80743 * det_80749;
            float defunc_2_reduce_res_80755;
            float defunc_2_reduce_res_80756;
            float redout_80758;
            float redout_80759;
            
            redout_80758 = 0.0F;
            redout_80759 = 0.0F;
            for (int64_t i_80757 = 0; i_80757 < q_70282; i_80757++) {
                float x_80760 = ((float *) mem_76284)[i_80757];
                float x_80761 = ((float *) mem_76314)[i_80757];
                float x_80762 = ((float *) mem_76311)[i_80757];
                bool cond_80763 = sle64(last_res_71338, i_80757);
                float defunc_0_f_res_80764;
                
                if (cond_80763) {
                    defunc_0_f_res_80764 = 0.0F;
                } else {
                    int64_t i_80765 = add64(max_res_80655, i_80757);
                    float defunc_0_add_arg_80766 =
                          ((float *) mem_76201)[i_80765];
                    
                    defunc_0_f_res_80764 = defunc_0_add_arg_80766;
                }
                
                float x_80767 = a12_80750 * x_80760;
                float y_80768 = b12_80751 * x_80761;
                float x_80769 = x_80767 + y_80768;
                float y_80770 = c12_80752 * x_80762;
                float x_80771 = x_80769 + y_80770;
                float defunc_9_fit_fun_res_80772 = defunc_0_f_res_80764 *
                      x_80771;
                float x_80773 = b12_80751 * x_80760;
                float y_80774 = b2_80753 * x_80761;
                float x_80775 = x_80773 + y_80774;
                float y_80776 = c2_80754 * x_80762;
                float x_80777 = x_80775 + y_80776;
                float defunc_9_slope_fun_res_80778 = defunc_0_f_res_80764 *
                      x_80777;
                float defunc_1_op_res_80779 = defunc_9_fit_fun_res_80772 +
                      redout_80758;
                float defunc_1_op_res_80780 = defunc_9_slope_fun_res_80778 +
                      redout_80759;
                float redout_tmp_80811 = defunc_1_op_res_80779;
                float redout_tmp_80812 = defunc_1_op_res_80780;
                
                redout_80758 = redout_tmp_80811;
                redout_80759 = redout_tmp_80812;
            }
            defunc_2_reduce_res_80755 = redout_80758;
            defunc_2_reduce_res_80756 = redout_80759;
            ((float *) mem_76261)[i_80586] = defunc_2_reduce_res_80755;
            ((float *) mem_76264)[i_80586] = defunc_2_reduce_res_80756;
        }
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_76352.mem + gtid_74210 * n_m_70288 * (int64_t) 4,
                    mem_76261 + (int64_t) 0, n_m_70288 * (int64_t) 4);
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_76356.mem + gtid_74210 * n_m_70288 * (int64_t) 4,
                    mem_76264 + (int64_t) 0, n_m_70288 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_76186);
    free(mem_76201);
    free(mem_76204);
    free(mem_76231);
    free(mem_76246);
    free(mem_76261);
    free(mem_76264);
    free(mem_76281);
    free(mem_76284);
    free(mem_76311);
    free(mem_76314);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81985_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81985_end -
                 futhark_mc_segmap_parloop_81985_start;
        
        ctx->futhark_mc_segmap_parloop_81985_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81985_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81985_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_81983(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74209 = tid;
    int num_tasks_80553 = info.nsubtasks;
    struct futhark_mc_task_81982 *futhark_mc_task_81982 =
                                 (struct futhark_mc_task_81982 *) args;
    struct futhark_context *ctx = futhark_mc_task_81982->ctx;
    uint64_t futhark_mc_segmap_task_81983_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_81983_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_task_81982->free_m_70279;
    int64_t n_70280 = futhark_mc_task_81982->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81982->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81982->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81982->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81982->free_i_70294;
    bool x_70295 = futhark_mc_task_81982->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81982->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81982->free_loop_cond_70305;
    float i64_res_70306 = futhark_mc_task_81982->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81982->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_76092 = futhark_mc_task_81982->free_bytes_76092;
    int64_t bytes_76095 = futhark_mc_task_81982->free_bytes_76095;
    int64_t bytes_76104 = futhark_mc_task_81982->free_bytes_76104;
    int64_t bytes_76179 = futhark_mc_task_81982->free_bytes_76179;
    struct memblock mem_76352 = {.desc ="mem_76352", .mem =
                                 futhark_mc_task_81982->free_mem_76352, .size =
                                 0, .references =NULL};
    struct memblock mem_76356 = {.desc ="mem_76356", .mem =
                                 futhark_mc_task_81982->free_mem_76356, .size =
                                 0, .references =NULL};
    int64_t iter_80554;
    struct futhark_mc_segmap_parloop_struct_81984
    futhark_mc_segmap_parloop_struct_81984;
    
    futhark_mc_segmap_parloop_struct_81984.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81984.free_m_70279 = m_70279;
    futhark_mc_segmap_parloop_struct_81984.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81984.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81984.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81984.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81984.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81984.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81984.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81984.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81984.free_i64_res_70306 = i64_res_70306;
    futhark_mc_segmap_parloop_struct_81984.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81984.free_bytes_76092 = bytes_76092;
    futhark_mc_segmap_parloop_struct_81984.free_bytes_76095 = bytes_76095;
    futhark_mc_segmap_parloop_struct_81984.free_bytes_76104 = bytes_76104;
    futhark_mc_segmap_parloop_struct_81984.free_bytes_76179 = bytes_76179;
    futhark_mc_segmap_parloop_struct_81984.free_mem_76352 = mem_76352.mem;
    futhark_mc_segmap_parloop_struct_81984.free_mem_76356 = mem_76356.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81985_task;
    
    futhark_mc_segmap_parloop_81985_task.name =
        "futhark_mc_segmap_parloop_81985";
    futhark_mc_segmap_parloop_81985_task.fn = futhark_mc_segmap_parloop_81985;
    futhark_mc_segmap_parloop_81985_task.args =
        &futhark_mc_segmap_parloop_struct_81984;
    futhark_mc_segmap_parloop_81985_task.iterations = iterations;
    futhark_mc_segmap_parloop_81985_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81985_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81985_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81985_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81985_task);
    
    if (futhark_mc_segmap_parloop_81985_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81985_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81985_total_end -
                 futhark_mc_segmap_parloop_81985_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81985_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81985_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81985_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_81983_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_81983_end -
                 futhark_mc_segmap_task_81983_start;
        
        ctx->futhark_mc_segmap_task_81983_runs[tid]++;
        ctx->futhark_mc_segmap_task_81983_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_81983_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_81998 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    float free_i64_res_70306;
    unsigned char *free_Y_mem_75353;
    int64_t free_bytes_76092;
    int64_t free_bytes_76095;
    int64_t free_bytes_76104;
    int64_t free_bytes_76179;
    unsigned char *free_mem_76352;
    unsigned char *free_mem_76356;
};
struct futhark_mc_task_82007 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_74212;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_76093;
};
struct futhark_mc_scan_stage_1_parloop_struct_82010 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_74212;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_76093;
};
static int futhark_mc_scan_stage_1_parloop_82011(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_74213, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_82010
    *futhark_mc_scan_stage_1_parloop_struct_82010 =
    (struct futhark_mc_scan_stage_1_parloop_struct_82010 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_82010->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_82011_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_82011_start = get_wall_time();
    
    int64_t n_70280 =
            futhark_mc_scan_stage_1_parloop_struct_82010->free_n_70280;
    int64_t gtid_74212 =
            futhark_mc_scan_stage_1_parloop_struct_82010->free_gtid_74212;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_82010->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_76093 = {.desc ="mem_76093", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_82010->free_mem_76093,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81218 = start;
    int64_t x_80814;
    int64_t x_80815;
    
    x_80814 = (int64_t) 0;
    for (; iter_81218 < end; iter_81218++) {
        int64_t gtid_74214 = iter_81218;
        
        // stage 1 scan body
        {
            float x_80817 = ((float *) Y_mem_75353.mem)[gtid_74212 * n_70280 +
                                                        gtid_74214];
            bool isnan_res_80818;
            
            isnan_res_80818 = futrts_isnan32(x_80817);
            
            bool defunc_0_p_res_80819 = !isnan_res_80818;
            int64_t defunc_0_f_res_80820 = btoi_bool_i64(defunc_0_p_res_80819);
            
            // write mapped values results to memory
            { }
            x_80814 = x_80814;
            // Read next values
            {
                x_80815 = defunc_0_f_res_80820;
            }
            
            int64_t defunc_1_op_res_80816 = add64(x_80814, x_80815);
            
            ((int64_t *) mem_76093.mem)[gtid_74214] = defunc_1_op_res_80816;
            x_80814 = defunc_1_op_res_80816;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_82011_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_82011_end -
                 futhark_mc_scan_stage_1_parloop_82011_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_82011_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_82011_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_82011_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_82012 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_74212;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_76093;
};
static int futhark_mc_scan_stage_3_parloop_82013(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_74213, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_82012
    *futhark_mc_scan_stage_3_parloop_struct_82012 =
    (struct futhark_mc_scan_stage_3_parloop_struct_82012 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_82012->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_82013_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_82013_start = get_wall_time();
    
    int64_t n_70280 =
            futhark_mc_scan_stage_3_parloop_struct_82012->free_n_70280;
    int64_t gtid_74212 =
            futhark_mc_scan_stage_3_parloop_struct_82012->free_gtid_74212;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_82012->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_76093 = {.desc ="mem_76093", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_82012->free_mem_76093,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81230 = start;
    int64_t x_81227;
    int64_t x_81228;
    
    if (iter_81230 == (int64_t) 0) {
        x_81227 = (int64_t) 0;
    } else {
        x_81227 = ((int64_t *) mem_76093.mem)[iter_81230 - (int64_t) 1];
    }
    for (; iter_81230 < end; iter_81230++) {
        int64_t gtid_74214 = iter_81230;
        
        // stage 3 scan body
        {
            float x_80817 = ((float *) Y_mem_75353.mem)[gtid_74212 * n_70280 +
                                                        gtid_74214];
            bool isnan_res_80818;
            
            isnan_res_80818 = futrts_isnan32(x_80817);
            
            bool defunc_0_p_res_80819 = !isnan_res_80818;
            int64_t defunc_0_f_res_80820 = btoi_bool_i64(defunc_0_p_res_80819);
            
            x_81227 = x_81227;
            x_81228 = defunc_0_f_res_80820;
            
            int64_t defunc_1_op_res_81229 = add64(x_81227, x_81228);
            
            ((int64_t *) mem_76093.mem)[gtid_74214] = defunc_1_op_res_81229;
            x_81227 = defunc_1_op_res_81229;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_82013_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_82013_end -
                 futhark_mc_scan_stage_3_parloop_82013_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_82013_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_82013_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_82013_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_82008(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74213 = tid;
    int num_tasks_81217 = info.nsubtasks;
    struct futhark_mc_task_82007 *futhark_mc_task_82007 =
                                 (struct futhark_mc_task_82007 *) args;
    struct futhark_context *ctx = futhark_mc_task_82007->ctx;
    uint64_t futhark_mc_segscan_task_82008_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_82008_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_82007->free_n_70280;
    int64_t gtid_74212 = futhark_mc_task_82007->free_gtid_74212;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_82007->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_76093 = {.desc ="mem_76093", .mem =
                                 futhark_mc_task_82007->free_mem_76093, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_81224_cached_sizze_82009 = 0;
    unsigned char *scan_stage_2_accum_mem_81224 = NULL;
    int64_t iter_81218;
    struct futhark_mc_scan_stage_1_parloop_struct_82010
    futhark_mc_scan_stage_1_parloop_struct_82010;
    
    futhark_mc_scan_stage_1_parloop_struct_82010.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_82010.free_n_70280 = n_70280;
    futhark_mc_scan_stage_1_parloop_struct_82010.free_gtid_74212 = gtid_74212;
    futhark_mc_scan_stage_1_parloop_struct_82010.free_Y_mem_75353 =
        Y_mem_75353.mem;
    futhark_mc_scan_stage_1_parloop_struct_82010.free_mem_76093 = mem_76093.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_82011_task;
    
    futhark_mc_scan_stage_1_parloop_82011_task.name =
        "futhark_mc_scan_stage_1_parloop_82011";
    futhark_mc_scan_stage_1_parloop_82011_task.fn =
        futhark_mc_scan_stage_1_parloop_82011;
    futhark_mc_scan_stage_1_parloop_82011_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_82010;
    futhark_mc_scan_stage_1_parloop_82011_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_82011_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_82011_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_82011_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_82011_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_82011_task);
    
    if (futhark_mc_scan_stage_1_parloop_82011_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_82011_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_82011_total_end -
                 futhark_mc_scan_stage_1_parloop_82011_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_82011_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_82011_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_82011_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_81217)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_81219;
        int64_t x_81220;
        int64_t offset_81222 = (int64_t) 0;
        int64_t offset_index_81223 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_81224_cached_sizze_82009 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_81224 = realloc(scan_stage_2_accum_mem_81224,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_81224_cached_sizze_82009 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_81224)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_81226 = 0; i_81226 < num_tasks_81217 - 1; i_81226++) {
            offset_81222 = squot64(n_70280, sext_i32_i64(num_tasks_81217));
            if (slt64(sext_i32_i64(i_81226), srem64(n_70280,
                                                    sext_i32_i64(num_tasks_81217)))) {
                offset_81222 += (int64_t) 1;
            }
            offset_index_81223 += offset_81222;
            
            int64_t gtid_74214 = offset_index_81223;
            float x_80817 = ((float *) Y_mem_75353.mem)[gtid_74212 * n_70280 +
                                                        gtid_74214];
            bool isnan_res_80818;
            
            isnan_res_80818 = futrts_isnan32(x_80817);
            
            bool defunc_0_p_res_80819 = !isnan_res_80818;
            int64_t defunc_0_f_res_80820 = btoi_bool_i64(defunc_0_p_res_80819);
            
            // Read carry in
            {
                x_81219 =
                    ((int64_t *) scan_stage_2_accum_mem_81224)[(int64_t) 0];
            }
            // Read next values
            {
                x_81220 = ((int64_t *) mem_76093.mem)[offset_index_81223 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_81221 = add64(x_81219, x_81220);
            
            ((int64_t *) mem_76093.mem)[offset_index_81223 - (int64_t) 1] =
                defunc_1_op_res_81221;
            ((int64_t *) scan_stage_2_accum_mem_81224)[(int64_t) 0] =
                defunc_1_op_res_81221;
        }
        
        int64_t iter_81230 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_82012
        futhark_mc_scan_stage_3_parloop_struct_82012;
        
        futhark_mc_scan_stage_3_parloop_struct_82012.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_82012.free_n_70280 = n_70280;
        futhark_mc_scan_stage_3_parloop_struct_82012.free_gtid_74212 =
            gtid_74212;
        futhark_mc_scan_stage_3_parloop_struct_82012.free_Y_mem_75353 =
            Y_mem_75353.mem;
        futhark_mc_scan_stage_3_parloop_struct_82012.free_mem_76093 =
            mem_76093.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_82013_task;
        
        futhark_mc_scan_stage_3_parloop_82013_task.name =
            "futhark_mc_scan_stage_3_parloop_82013";
        futhark_mc_scan_stage_3_parloop_82013_task.fn =
            futhark_mc_scan_stage_3_parloop_82013;
        futhark_mc_scan_stage_3_parloop_82013_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_82012;
        futhark_mc_scan_stage_3_parloop_82013_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_82013_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_82013_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_82013_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_82013_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_82013_task);
        
        if (futhark_mc_scan_stage_3_parloop_82013_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_82013_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_82013_total_end -
                     futhark_mc_scan_stage_3_parloop_82013_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_82013_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_82013_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_82013_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_81224);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_82008_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_82008_end -
                 futhark_mc_segscan_task_82008_start;
        
        ctx->futhark_mc_segscan_task_82008_runs[tid]++;
        ctx->futhark_mc_segscan_task_82008_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_82008_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_82014 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_74212;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_76093;
    unsigned char *free_mem_76096;
    unsigned char *free_mem_76099;
};
struct futhark_mc_segmap_parloop_struct_82016 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_gtid_74212;
    unsigned char *free_Y_mem_75353;
    unsigned char *free_mem_76093;
    unsigned char *free_mem_76096;
    unsigned char *free_mem_76099;
};
static int futhark_mc_segmap_parloop_82017(void *args, int64_t start,
                                           int64_t end, int flat_tid_74215,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_82016
    *futhark_mc_segmap_parloop_struct_82016 =
    (struct futhark_mc_segmap_parloop_struct_82016 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_82016->ctx;
    uint64_t futhark_mc_segmap_parloop_82017_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82017_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_82016->free_n_70280;
    int64_t gtid_74212 =
            futhark_mc_segmap_parloop_struct_82016->free_gtid_74212;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_82016->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_76093 = {.desc ="mem_76093", .mem =
                                 futhark_mc_segmap_parloop_struct_82016->free_mem_76093,
                                 .size =0, .references =NULL};
    struct memblock mem_76096 = {.desc ="mem_76096", .mem =
                                 futhark_mc_segmap_parloop_struct_82016->free_mem_76096,
                                 .size =0, .references =NULL};
    struct memblock mem_76099 = {.desc ="mem_76099", .mem =
                                 futhark_mc_segmap_parloop_struct_82016->free_mem_76099,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81234 = start;
    
    for (; iter_81234 < end; iter_81234++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81237 = n_70280;
        int64_t gtid_74216 = iter_81234;
        int64_t remnant_81238 = iter_81234 - gtid_74216;
        float x_80821 = ((float *) Y_mem_75353.mem)[gtid_74212 * n_70280 +
                                                    gtid_74216];
        bool isnan_res_80822;
        
        isnan_res_80822 = futrts_isnan32(x_80821);
        
        bool defunc_0_p_res_80823 = !isnan_res_80822;
        int64_t defunc_1_f_res_80824;
        
        if (defunc_0_p_res_80823) {
            int64_t x_81235 = ((int64_t *) mem_76093.mem)[gtid_74216];
            int64_t defunc_1_f_res_t_res_81236 = sub64(x_81235, (int64_t) 1);
            
            defunc_1_f_res_80824 = defunc_1_f_res_t_res_81236;
        } else {
            defunc_1_f_res_80824 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_80824) &&
            slt64(defunc_1_f_res_80824, n_70280)) {
            ((int64_t *) mem_76099.mem)[defunc_1_f_res_80824] = gtid_74216;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_80824) &&
            slt64(defunc_1_f_res_80824, n_70280)) {
            ((float *) mem_76096.mem)[defunc_1_f_res_80824] = x_80821;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82017_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82017_end -
                 futhark_mc_segmap_parloop_82017_start;
        
        ctx->futhark_mc_segmap_parloop_82017_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_82017_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_82017_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_82015(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74215 = tid;
    int num_tasks_81233 = info.nsubtasks;
    struct futhark_mc_task_82014 *futhark_mc_task_82014 =
                                 (struct futhark_mc_task_82014 *) args;
    struct futhark_context *ctx = futhark_mc_task_82014->ctx;
    uint64_t futhark_mc_segmap_task_82015_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_82015_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_82014->free_n_70280;
    int64_t gtid_74212 = futhark_mc_task_82014->free_gtid_74212;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_82014->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    struct memblock mem_76093 = {.desc ="mem_76093", .mem =
                                 futhark_mc_task_82014->free_mem_76093, .size =
                                 0, .references =NULL};
    struct memblock mem_76096 = {.desc ="mem_76096", .mem =
                                 futhark_mc_task_82014->free_mem_76096, .size =
                                 0, .references =NULL};
    struct memblock mem_76099 = {.desc ="mem_76099", .mem =
                                 futhark_mc_task_82014->free_mem_76099, .size =
                                 0, .references =NULL};
    int64_t iter_81234;
    struct futhark_mc_segmap_parloop_struct_82016
    futhark_mc_segmap_parloop_struct_82016;
    
    futhark_mc_segmap_parloop_struct_82016.ctx = ctx;
    futhark_mc_segmap_parloop_struct_82016.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_82016.free_gtid_74212 = gtid_74212;
    futhark_mc_segmap_parloop_struct_82016.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_82016.free_mem_76093 = mem_76093.mem;
    futhark_mc_segmap_parloop_struct_82016.free_mem_76096 = mem_76096.mem;
    futhark_mc_segmap_parloop_struct_82016.free_mem_76099 = mem_76099.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_82017_task;
    
    futhark_mc_segmap_parloop_82017_task.name =
        "futhark_mc_segmap_parloop_82017";
    futhark_mc_segmap_parloop_82017_task.fn = futhark_mc_segmap_parloop_82017;
    futhark_mc_segmap_parloop_82017_task.args =
        &futhark_mc_segmap_parloop_struct_82016;
    futhark_mc_segmap_parloop_82017_task.iterations = iterations;
    futhark_mc_segmap_parloop_82017_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_82017_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82017_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_82017_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_82017_task);
    
    if (futhark_mc_segmap_parloop_82017_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82017_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82017_total_end -
                 futhark_mc_segmap_parloop_82017_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82017_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82017_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82017_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_82015_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_82015_end -
                 futhark_mc_segmap_task_82015_start;
        
        ctx->futhark_mc_segmap_task_82015_runs[tid]++;
        ctx->futhark_mc_segmap_task_82015_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_82015_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_82018 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    unsigned char *free_mem_76099;
    unsigned char *free_mem_76102;
};
struct futhark_mc_segmap_parloop_struct_82020 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    unsigned char *free_mem_76099;
    unsigned char *free_mem_76102;
};
static int futhark_mc_segmap_parloop_82021(void *args, int64_t start,
                                           int64_t end, int flat_tid_74217,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_82020
    *futhark_mc_segmap_parloop_struct_82020 =
    (struct futhark_mc_segmap_parloop_struct_82020 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_82020->ctx;
    uint64_t futhark_mc_segmap_parloop_82021_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82021_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_82020->free_n_70280;
    struct memblock mem_76099 = {.desc ="mem_76099", .mem =
                                 futhark_mc_segmap_parloop_struct_82020->free_mem_76099,
                                 .size =0, .references =NULL};
    struct memblock mem_76102 = {.desc ="mem_76102", .mem =
                                 futhark_mc_segmap_parloop_struct_82020->free_mem_76102,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81240 = start;
    
    for (; iter_81240 < end; iter_81240++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81241 = n_70280;
        int64_t gtid_74218 = iter_81240;
        int64_t remnant_81242 = iter_81240 - gtid_74218;
        int64_t x_80827 = ((int64_t *) mem_76099.mem)[gtid_74218];
        int64_t defunc_0_f_res_80828 = add64((int64_t) 1, x_80827);
        
        ((int64_t *) mem_76102.mem)[gtid_74218] = defunc_0_f_res_80828;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82021_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82021_end -
                 futhark_mc_segmap_parloop_82021_start;
        
        ctx->futhark_mc_segmap_parloop_82021_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_82021_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_82021_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_82019(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74217 = tid;
    int num_tasks_81239 = info.nsubtasks;
    struct futhark_mc_task_82018 *futhark_mc_task_82018 =
                                 (struct futhark_mc_task_82018 *) args;
    struct futhark_context *ctx = futhark_mc_task_82018->ctx;
    uint64_t futhark_mc_segmap_task_82019_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_82019_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_82018->free_n_70280;
    struct memblock mem_76099 = {.desc ="mem_76099", .mem =
                                 futhark_mc_task_82018->free_mem_76099, .size =
                                 0, .references =NULL};
    struct memblock mem_76102 = {.desc ="mem_76102", .mem =
                                 futhark_mc_task_82018->free_mem_76102, .size =
                                 0, .references =NULL};
    int64_t iter_81240;
    struct futhark_mc_segmap_parloop_struct_82020
    futhark_mc_segmap_parloop_struct_82020;
    
    futhark_mc_segmap_parloop_struct_82020.ctx = ctx;
    futhark_mc_segmap_parloop_struct_82020.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_82020.free_mem_76099 = mem_76099.mem;
    futhark_mc_segmap_parloop_struct_82020.free_mem_76102 = mem_76102.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_82021_task;
    
    futhark_mc_segmap_parloop_82021_task.name =
        "futhark_mc_segmap_parloop_82021";
    futhark_mc_segmap_parloop_82021_task.fn = futhark_mc_segmap_parloop_82021;
    futhark_mc_segmap_parloop_82021_task.args =
        &futhark_mc_segmap_parloop_struct_82020;
    futhark_mc_segmap_parloop_82021_task.iterations = iterations;
    futhark_mc_segmap_parloop_82021_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_82021_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82021_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_82021_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_82021_task);
    
    if (futhark_mc_segmap_parloop_82021_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82021_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82021_total_end -
                 futhark_mc_segmap_parloop_82021_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82021_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82021_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82021_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_82019_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_82019_end -
                 futhark_mc_segmap_task_82019_start;
        
        ctx->futhark_mc_segmap_task_82019_runs[tid]++;
        ctx->futhark_mc_segmap_task_82019_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_82019_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_82022 {
    struct futhark_context *ctx;
    int64_t free_q_70282;
    int64_t free_last_res_74427;
    unsigned char *free_mem_76105;
};
struct futhark_mc_segmap_parloop_struct_82024 {
    struct futhark_context *ctx;
    int64_t free_q_70282;
    int64_t free_last_res_74427;
    unsigned char *free_mem_76105;
};
static int futhark_mc_segmap_parloop_82025(void *args, int64_t start,
                                           int64_t end, int flat_tid_74219,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_82024
    *futhark_mc_segmap_parloop_struct_82024 =
    (struct futhark_mc_segmap_parloop_struct_82024 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_82024->ctx;
    uint64_t futhark_mc_segmap_parloop_82025_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82025_start = get_wall_time();
    
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_82024->free_q_70282;
    int64_t last_res_74427 =
            futhark_mc_segmap_parloop_struct_82024->free_last_res_74427;
    struct memblock mem_76105 = {.desc ="mem_76105", .mem =
                                 futhark_mc_segmap_parloop_struct_82024->free_mem_76105,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81244 = start;
    
    for (; iter_81244 < end; iter_81244++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81245 = q_70282;
        int64_t gtid_74220 = iter_81244;
        int64_t remnant_81246 = iter_81244 - gtid_74220;
        bool cond_80829 = sle64(last_res_74427, gtid_74220);
        float defunc_0_f_res_80830;
        
        if (cond_80829) {
            defunc_0_f_res_80830 = 0.0F;
        } else {
            defunc_0_f_res_80830 = 1.0F;
        }
        ((float *) mem_76105.mem)[gtid_74220] = defunc_0_f_res_80830;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82025_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82025_end -
                 futhark_mc_segmap_parloop_82025_start;
        
        ctx->futhark_mc_segmap_parloop_82025_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_82025_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_82025_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_82023(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74219 = tid;
    int num_tasks_81243 = info.nsubtasks;
    struct futhark_mc_task_82022 *futhark_mc_task_82022 =
                                 (struct futhark_mc_task_82022 *) args;
    struct futhark_context *ctx = futhark_mc_task_82022->ctx;
    uint64_t futhark_mc_segmap_task_82023_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_82023_start = get_wall_time();
    
    int64_t q_70282 = futhark_mc_task_82022->free_q_70282;
    int64_t last_res_74427 = futhark_mc_task_82022->free_last_res_74427;
    struct memblock mem_76105 = {.desc ="mem_76105", .mem =
                                 futhark_mc_task_82022->free_mem_76105, .size =
                                 0, .references =NULL};
    int64_t iter_81244;
    struct futhark_mc_segmap_parloop_struct_82024
    futhark_mc_segmap_parloop_struct_82024;
    
    futhark_mc_segmap_parloop_struct_82024.ctx = ctx;
    futhark_mc_segmap_parloop_struct_82024.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_82024.free_last_res_74427 = last_res_74427;
    futhark_mc_segmap_parloop_struct_82024.free_mem_76105 = mem_76105.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_82025_task;
    
    futhark_mc_segmap_parloop_82025_task.name =
        "futhark_mc_segmap_parloop_82025";
    futhark_mc_segmap_parloop_82025_task.fn = futhark_mc_segmap_parloop_82025;
    futhark_mc_segmap_parloop_82025_task.args =
        &futhark_mc_segmap_parloop_struct_82024;
    futhark_mc_segmap_parloop_82025_task.iterations = iterations;
    futhark_mc_segmap_parloop_82025_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_82025_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82025_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_82025_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_82025_task);
    
    if (futhark_mc_segmap_parloop_82025_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82025_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82025_total_end -
                 futhark_mc_segmap_parloop_82025_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82025_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82025_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82025_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_82023_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_82023_end -
                 futhark_mc_segmap_task_82023_start;
        
        ctx->futhark_mc_segmap_task_82023_runs[tid]++;
        ctx->futhark_mc_segmap_task_82023_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_82023_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_82026 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_74427;
    int64_t free_min_arg_74442;
    int64_t free_min_arg_74443;
    int64_t free_min_res_74444;
    float free_max_res_74448;
    unsigned char *free_mem_76096;
    unsigned char *free_mem_76099;
    unsigned char *free_mem_76102;
    int64_t free_bytes_76104;
    unsigned char *free_mem_76105;
    unsigned char *free_mem_76180;
    unsigned char *free_mem_76183;
};
struct futhark_mc_segmap_parloop_struct_82028 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_74427;
    int64_t free_min_arg_74442;
    int64_t free_min_arg_74443;
    int64_t free_min_res_74444;
    float free_max_res_74448;
    unsigned char *free_mem_76096;
    unsigned char *free_mem_76099;
    unsigned char *free_mem_76102;
    int64_t free_bytes_76104;
    unsigned char *free_mem_76105;
    unsigned char *free_mem_76180;
    unsigned char *free_mem_76183;
};
static int futhark_mc_segmap_parloop_82029(void *args, int64_t start,
                                           int64_t end, int flat_tid_74221,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_82028
    *futhark_mc_segmap_parloop_struct_82028 =
    (struct futhark_mc_segmap_parloop_struct_82028 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_82028->ctx;
    uint64_t futhark_mc_segmap_parloop_82029_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82029_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_82028->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_82028->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_82028->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_82028->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_82028->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_82028->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_82028->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_82028->free_loop_cond_70305;
    int64_t last_res_74427 =
            futhark_mc_segmap_parloop_struct_82028->free_last_res_74427;
    int64_t min_arg_74442 =
            futhark_mc_segmap_parloop_struct_82028->free_min_arg_74442;
    int64_t min_arg_74443 =
            futhark_mc_segmap_parloop_struct_82028->free_min_arg_74443;
    int64_t min_res_74444 =
            futhark_mc_segmap_parloop_struct_82028->free_min_res_74444;
    float max_res_74448 =
          futhark_mc_segmap_parloop_struct_82028->free_max_res_74448;
    struct memblock mem_76096 = {.desc ="mem_76096", .mem =
                                 futhark_mc_segmap_parloop_struct_82028->free_mem_76096,
                                 .size =0, .references =NULL};
    struct memblock mem_76099 = {.desc ="mem_76099", .mem =
                                 futhark_mc_segmap_parloop_struct_82028->free_mem_76099,
                                 .size =0, .references =NULL};
    struct memblock mem_76102 = {.desc ="mem_76102", .mem =
                                 futhark_mc_segmap_parloop_struct_82028->free_mem_76102,
                                 .size =0, .references =NULL};
    int64_t bytes_76104 =
            futhark_mc_segmap_parloop_struct_82028->free_bytes_76104;
    struct memblock mem_76105 = {.desc ="mem_76105", .mem =
                                 futhark_mc_segmap_parloop_struct_82028->free_mem_76105,
                                 .size =0, .references =NULL};
    struct memblock mem_76180 = {.desc ="mem_76180", .mem =
                                 futhark_mc_segmap_parloop_struct_82028->free_mem_76180,
                                 .size =0, .references =NULL};
    struct memblock mem_76183 = {.desc ="mem_76183", .mem =
                                 futhark_mc_segmap_parloop_struct_82028->free_mem_76183,
                                 .size =0, .references =NULL};
    size_t mem_81105_cached_sizze_82030 = 0;
    unsigned char *mem_81105 = NULL;
    size_t mem_81107_cached_sizze_82031 = 0;
    unsigned char *mem_81107 = NULL;
    size_t mem_81132_cached_sizze_82032 = 0;
    unsigned char *mem_81132 = NULL;
    size_t mem_81134_cached_sizze_82033 = 0;
    unsigned char *mem_81134 = NULL;
    int64_t iterations = end - start;
    int64_t iter_81248 = start;
    
    if (mem_81105_cached_sizze_82030 < (size_t) bytes_76104) {
        mem_81105 = realloc(mem_81105, bytes_76104);
        mem_81105_cached_sizze_82030 = bytes_76104;
    }
    if (mem_81107_cached_sizze_82031 < (size_t) bytes_76104) {
        mem_81107 = realloc(mem_81107, bytes_76104);
        mem_81107_cached_sizze_82031 = bytes_76104;
    }
    if (mem_81132_cached_sizze_82032 < (size_t) bytes_76104) {
        mem_81132 = realloc(mem_81132, bytes_76104);
        mem_81132_cached_sizze_82032 = bytes_76104;
    }
    if (mem_81134_cached_sizze_82033 < (size_t) bytes_76104) {
        mem_81134 = realloc(mem_81134, bytes_76104);
        mem_81134_cached_sizze_82033 = bytes_76104;
    }
    for (; iter_81248 < end; iter_81248++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81370 = n_m_70288;
        int64_t gtid_74222 = iter_81248;
        int64_t remnant_81371 = iter_81248 - gtid_74222;
        int64_t min_arg_81019 = mul64(jump_70284, gtid_74222);
        int64_t min_res_81020 = smin64(i_70294, min_arg_81019);
        int64_t defunc_0_g_res_81021 = add64((int64_t) 1, min_res_81020);
        bool init_idx_81022;
        int64_t init_idx_81023;
        int64_t init_idx_81024;
        bool loop_while_81249;
        int64_t low_81250;
        int64_t high_81251;
        
        loop_while_81249 = x_70295;
        low_81250 = (int64_t) 0;
        high_81251 = i_70294;
        while (loop_while_81249) {
            int64_t x_81252 = add64(low_81250, high_81251);
            int64_t mid_81253 = sdiv64(x_81252, (int64_t) 2);
            bool x_81254 = sle64((int64_t) 0, mid_81253);
            bool y_81255 = slt64(mid_81253, n_70280);
            bool bounds_check_81256 = x_81254 && y_81255;
            bool index_certs_81257;
            
            if (!bounds_check_81256) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_81253,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t mid_id_81258 = ((int64_t *) mem_76102.mem)[mid_81253];
            bool cond_81259 = slt64(mid_id_81258, (int64_t) 0);
            int64_t mid_idx_81260;
            
            if (cond_81259) {
                mid_idx_81260 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_81260 = mid_id_81258;
            }
            
            bool cond_81261 = sle64(defunc_0_g_res_81021, mid_idx_81260);
            int64_t loopres_81262;
            int64_t loopres_81263;
            
            if (cond_81261) {
                int64_t loopres_t_res_81264 = sub64(mid_81253, (int64_t) 1);
                
                loopres_81262 = low_81250;
                loopres_81263 = loopres_t_res_81264;
            } else {
                int64_t loopres_f_res_81265 = add64((int64_t) 1, mid_81253);
                
                loopres_81262 = loopres_f_res_81265;
                loopres_81263 = high_81251;
            }
            
            bool loop_cond_81266 = sle64(loopres_81262, loopres_81263);
            bool loop_while_tmp_81372 = loop_cond_81266;
            int64_t low_tmp_81373 = loopres_81262;
            int64_t high_tmp_81374 = loopres_81263;
            
            loop_while_81249 = loop_while_tmp_81372;
            low_81250 = low_tmp_81373;
            high_81251 = high_tmp_81374;
        }
        init_idx_81022 = loop_while_81249;
        init_idx_81023 = low_81250;
        init_idx_81024 = high_81251;
        
        bool idx_81043;
        int64_t idx_81044;
        int64_t idx_81045;
        int64_t idx_81046;
        bool loop_while_81267;
        int64_t l_idx_81268;
        int64_t r_idx_81269;
        int64_t span_81270;
        
        loop_while_81267 = loop_cond_70305;
        l_idx_81268 = init_idx_81023;
        r_idx_81269 = init_idx_81023;
        span_81270 = (int64_t) 1;
        while (loop_while_81267) {
            int64_t max_arg_81271 = sub64(l_idx_81268, (int64_t) 1);
            int64_t max_res_81272 = smax64((int64_t) 0, max_arg_81271);
            int64_t min_arg_81273 = add64((int64_t) 1, r_idx_81269);
            int64_t min_res_81274 = smin64(min_arg_74442, min_arg_81273);
            bool x_81275 = sle64((int64_t) 0, max_res_81272);
            bool y_81276 = slt64(max_res_81272, n_70280);
            bool bounds_check_81277 = x_81275 && y_81276;
            bool index_certs_81278;
            
            if (!bounds_check_81277) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_81272,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_81279 = ((int64_t *) mem_76102.mem)[max_res_81272];
            int64_t abs_arg_81280 = sub64(x_81279, defunc_0_g_res_81021);
            int64_t abs_res_81281 = abs64(abs_arg_81280);
            bool x_81282 = sle64((int64_t) 0, min_res_81274);
            bool y_81283 = slt64(min_res_81274, n_70280);
            bool bounds_check_81284 = x_81282 && y_81283;
            bool index_certs_81285;
            
            if (!bounds_check_81284) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_81274,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_81286 = ((int64_t *) mem_76102.mem)[min_res_81274];
            int64_t abs_arg_81287 = sub64(x_81286, defunc_0_g_res_81021);
            int64_t abs_res_81288 = abs64(abs_arg_81287);
            bool cond_81289 = max_res_81272 == l_idx_81268;
            int64_t loopres_81290;
            int64_t loopres_81291;
            int64_t loopres_81292;
            
            if (cond_81289) {
                loopres_81290 = l_idx_81268;
                loopres_81291 = r_idx_81269;
                loopres_81292 = min_res_70300;
            } else {
                bool cond_81293 = slt64(abs_res_81281, abs_res_81288);
                bool cond_f_res_81294 = min_res_81274 == r_idx_81269;
                bool x_81295 = !cond_81293;
                bool y_81296 = cond_f_res_81294 && x_81295;
                bool cond_81297 = cond_81293 || y_81296;
                int64_t loopres_f_res_81298;
                
                if (cond_81297) {
                    loopres_f_res_81298 = max_res_81272;
                } else {
                    loopres_f_res_81298 = l_idx_81268;
                }
                
                int64_t loopres_f_res_81299;
                
                if (cond_81297) {
                    loopres_f_res_81299 = r_idx_81269;
                } else {
                    loopres_f_res_81299 = min_res_81274;
                }
                
                int64_t loopres_f_res_81300;
                
                if (cond_81297) {
                    int64_t loopres_f_res_t_res_81301 = add64((int64_t) 1,
                                                              span_81270);
                    
                    loopres_f_res_81300 = loopres_f_res_t_res_81301;
                } else {
                    int64_t loopres_f_res_f_res_81302 = add64((int64_t) 1,
                                                              span_81270);
                    
                    loopres_f_res_81300 = loopres_f_res_f_res_81302;
                }
                loopres_81290 = loopres_f_res_81298;
                loopres_81291 = loopres_f_res_81299;
                loopres_81292 = loopres_f_res_81300;
            }
            
            bool loop_cond_81303 = slt64(loopres_81292, min_res_70300);
            bool loop_while_tmp_81375 = loop_cond_81303;
            int64_t l_idx_tmp_81376 = loopres_81290;
            int64_t r_idx_tmp_81377 = loopres_81291;
            int64_t span_tmp_81378 = loopres_81292;
            
            loop_while_81267 = loop_while_tmp_81375;
            l_idx_81268 = l_idx_tmp_81376;
            r_idx_81269 = r_idx_tmp_81377;
            span_81270 = span_tmp_81378;
        }
        idx_81043 = loop_while_81267;
        idx_81044 = l_idx_81268;
        idx_81045 = r_idx_81269;
        idx_81046 = span_81270;
        
        int64_t min_res_81084 = smin64(min_arg_74443, idx_81044);
        int64_t max_res_81085 = smax64((int64_t) 0, min_res_81084);
        int64_t x_81086 = add64(min_res_74444, max_res_81085);
        int64_t r_81087 = sub64(x_81086, (int64_t) 1);
        bool x_81088 = sle64((int64_t) 0, r_81087);
        bool y_81089 = slt64(r_81087, n_70280);
        bool bounds_check_81090 = x_81088 && y_81089;
        bool index_certs_81091;
        
        if (!bounds_check_81090) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_81087,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_81092 = ((int64_t *) mem_76099.mem)[r_81087];
        int64_t abs_arg_81093 = sub64(x_81092, min_res_81020);
        int64_t abs_res_81094 = abs64(abs_arg_81093);
        bool x_81095 = sle64((int64_t) 0, max_res_81085);
        bool y_81096 = slt64(max_res_81085, n_70280);
        bool bounds_check_81097 = x_81095 && y_81096;
        bool index_certs_81098;
        
        if (!bounds_check_81097) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_81085,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_81099 = ((int64_t *) mem_76099.mem)[max_res_81085];
        int64_t abs_arg_81100 = sub64(x_81099, min_res_81020);
        int64_t abs_res_81101 = abs64(abs_arg_81100);
        int64_t max_res_81102 = smax64(abs_res_81094, abs_res_81101);
        float defunc_0_f_res_81103 = sitofp_i64_f32(max_res_81102);
        float defunc_1_f_res_81104 = max_res_74448 + defunc_0_f_res_81103;
        
        for (int64_t i_81304 = 0; i_81304 < q_70282; i_81304++) {
            float x_81307 = ((float *) mem_76105.mem)[i_81304];
            bool cond_81308 = sle64(last_res_74427, i_81304);
            int64_t defunc_0_f_res_81309;
            
            if (cond_81308) {
                defunc_0_f_res_81309 = (int64_t) 0;
            } else {
                int64_t i_81310 = add64(max_res_81085, i_81304);
                int64_t defunc_0_add_arg_81311 =
                        ((int64_t *) mem_76099.mem)[i_81310];
                int64_t defunc_1_add_res_81312 = add64((int64_t) 1,
                                                       defunc_0_add_arg_81311);
                
                defunc_0_f_res_81309 = defunc_1_add_res_81312;
            }
            
            int64_t binop_p_81313 = sub64(defunc_0_f_res_81309, min_res_81020);
            float defunc_0_f_res_81314 = sitofp_i64_f32(binop_p_81313);
            float abs_res_81315 = (float) fabs(defunc_0_f_res_81314);
            float tmp1_81316 = abs_res_81315 / defunc_1_f_res_81104;
            float x_81317 = tmp1_81316 * tmp1_81316;
            float y_81318 = tmp1_81316 * x_81317;
            float tmp2_81319 = 1.0F - y_81318;
            float x_81320 = tmp2_81319 * tmp2_81319;
            float tmp3_81321 = tmp2_81319 * x_81320;
            float tmp4_81322 = x_81307 * tmp3_81321;
            
            ((float *) mem_81105)[i_81304] = defunc_0_f_res_81314;
            ((float *) mem_81107)[i_81304] = tmp4_81322;
        }
        
        float defunc_2_reduce_res_81136;
        float defunc_2_reduce_res_81137;
        float defunc_2_reduce_res_81138;
        float defunc_2_reduce_res_81139;
        float defunc_2_reduce_res_81140;
        float redout_81326;
        float redout_81327;
        float redout_81328;
        float redout_81329;
        float redout_81330;
        
        redout_81326 = 0.0F;
        redout_81327 = 0.0F;
        redout_81328 = 0.0F;
        redout_81329 = 0.0F;
        redout_81330 = 0.0F;
        for (int64_t i_81325 = 0; i_81325 < q_70282; i_81325++) {
            float x_81333 = ((float *) mem_81105)[i_81325];
            float x_81334 = ((float *) mem_81107)[i_81325];
            float defunc_1_f_res_81335 = x_81333 * x_81334;
            float defunc_1_f_res_81336 = x_81333 * defunc_1_f_res_81335;
            float defunc_1_f_res_81337 = x_81333 * defunc_1_f_res_81336;
            float defunc_1_f_res_81338 = x_81333 * defunc_1_f_res_81337;
            float defunc_1_op_res_81339 = x_81334 + redout_81326;
            float defunc_1_op_res_81340 = defunc_1_f_res_81335 + redout_81327;
            float defunc_1_op_res_81341 = defunc_1_f_res_81336 + redout_81328;
            float defunc_1_op_res_81342 = defunc_1_f_res_81337 + redout_81329;
            float defunc_1_op_res_81343 = defunc_1_f_res_81338 + redout_81330;
            
            ((float *) mem_81132)[i_81325] = defunc_1_f_res_81336;
            ((float *) mem_81134)[i_81325] = defunc_1_f_res_81335;
            
            float redout_tmp_81381 = defunc_1_op_res_81339;
            float redout_tmp_81382 = defunc_1_op_res_81340;
            float redout_tmp_81383 = defunc_1_op_res_81341;
            float redout_tmp_81384 = defunc_1_op_res_81342;
            float redout_tmp_81385 = defunc_1_op_res_81343;
            
            redout_81326 = redout_tmp_81381;
            redout_81327 = redout_tmp_81382;
            redout_81328 = redout_tmp_81383;
            redout_81329 = redout_tmp_81384;
            redout_81330 = redout_tmp_81385;
        }
        defunc_2_reduce_res_81136 = redout_81326;
        defunc_2_reduce_res_81137 = redout_81327;
        defunc_2_reduce_res_81138 = redout_81328;
        defunc_2_reduce_res_81139 = redout_81329;
        defunc_2_reduce_res_81140 = redout_81330;
        
        float x_81164 = defunc_2_reduce_res_81138 * defunc_2_reduce_res_81140;
        float y_81165 = defunc_2_reduce_res_81139 * defunc_2_reduce_res_81139;
        float a12_81166 = x_81164 - y_81165;
        float x_81167 = defunc_2_reduce_res_81138 * defunc_2_reduce_res_81139;
        float y_81168 = defunc_2_reduce_res_81137 * defunc_2_reduce_res_81140;
        float b12_81169 = x_81167 - y_81168;
        float x_81170 = defunc_2_reduce_res_81137 * defunc_2_reduce_res_81139;
        float y_81171 = defunc_2_reduce_res_81138 * defunc_2_reduce_res_81138;
        float c12_81172 = x_81170 - y_81171;
        float x_81173 = defunc_2_reduce_res_81136 * defunc_2_reduce_res_81140;
        float b2_81174 = x_81173 - y_81171;
        float x_81175 = defunc_2_reduce_res_81137 * defunc_2_reduce_res_81138;
        float y_81176 = defunc_2_reduce_res_81136 * defunc_2_reduce_res_81139;
        float c2_81177 = x_81175 - y_81176;
        float x_81178 = defunc_2_reduce_res_81136 * a12_81166;
        float y_81179 = defunc_2_reduce_res_81137 * b12_81169;
        float x_81180 = x_81178 + y_81179;
        float y_81181 = defunc_2_reduce_res_81138 * c12_81172;
        float y_81182 = x_81180 + y_81181;
        float det_81183 = 1.0F / y_81182;
        float a12_81184 = a12_81166 * det_81183;
        float b12_81185 = b12_81169 * det_81183;
        float c12_81186 = c12_81172 * det_81183;
        float b2_81187 = b2_81174 * det_81183;
        float c2_81188 = c2_81177 * det_81183;
        float defunc_2_reduce_res_81189;
        float defunc_2_reduce_res_81190;
        float redout_81347;
        float redout_81348;
        
        redout_81347 = 0.0F;
        redout_81348 = 0.0F;
        for (int64_t i_81346 = 0; i_81346 < q_70282; i_81346++) {
            float x_81349 = ((float *) mem_81107)[i_81346];
            float x_81350 = ((float *) mem_81134)[i_81346];
            float x_81351 = ((float *) mem_81132)[i_81346];
            bool cond_81352 = sle64(last_res_74427, i_81346);
            float defunc_0_f_res_81353;
            
            if (cond_81352) {
                defunc_0_f_res_81353 = 0.0F;
            } else {
                int64_t i_81354 = add64(max_res_81085, i_81346);
                float defunc_0_add_arg_81355 =
                      ((float *) mem_76096.mem)[i_81354];
                
                defunc_0_f_res_81353 = defunc_0_add_arg_81355;
            }
            
            float x_81356 = a12_81184 * x_81349;
            float y_81357 = b12_81185 * x_81350;
            float x_81358 = x_81356 + y_81357;
            float y_81359 = c12_81186 * x_81351;
            float x_81360 = x_81358 + y_81359;
            float defunc_9_fit_fun_res_81361 = defunc_0_f_res_81353 * x_81360;
            float x_81362 = b12_81185 * x_81349;
            float y_81363 = b2_81187 * x_81350;
            float x_81364 = x_81362 + y_81363;
            float y_81365 = c2_81188 * x_81351;
            float x_81366 = x_81364 + y_81365;
            float defunc_9_slope_fun_res_81367 = defunc_0_f_res_81353 * x_81366;
            float defunc_1_op_res_81368 = defunc_9_fit_fun_res_81361 +
                  redout_81347;
            float defunc_1_op_res_81369 = defunc_9_slope_fun_res_81367 +
                  redout_81348;
            float redout_tmp_81388 = defunc_1_op_res_81368;
            float redout_tmp_81389 = defunc_1_op_res_81369;
            
            redout_81347 = redout_tmp_81388;
            redout_81348 = redout_tmp_81389;
        }
        defunc_2_reduce_res_81189 = redout_81347;
        defunc_2_reduce_res_81190 = redout_81348;
        ((float *) mem_76180.mem)[gtid_74222] = defunc_2_reduce_res_81189;
        ((float *) mem_76183.mem)[gtid_74222] = defunc_2_reduce_res_81190;
    }
    
  cleanup:
    { }
    free(mem_81105);
    free(mem_81107);
    free(mem_81132);
    free(mem_81134);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82029_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82029_end -
                 futhark_mc_segmap_parloop_82029_start;
        
        ctx->futhark_mc_segmap_parloop_82029_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_82029_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_82029_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_82027(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74221 = tid;
    int num_tasks_81247 = info.nsubtasks;
    struct futhark_mc_task_82026 *futhark_mc_task_82026 =
                                 (struct futhark_mc_task_82026 *) args;
    struct futhark_context *ctx = futhark_mc_task_82026->ctx;
    uint64_t futhark_mc_segmap_task_82027_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_82027_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_82026->free_n_70280;
    int64_t q_70282 = futhark_mc_task_82026->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_82026->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_82026->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_82026->free_i_70294;
    bool x_70295 = futhark_mc_task_82026->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_82026->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_82026->free_loop_cond_70305;
    int64_t last_res_74427 = futhark_mc_task_82026->free_last_res_74427;
    int64_t min_arg_74442 = futhark_mc_task_82026->free_min_arg_74442;
    int64_t min_arg_74443 = futhark_mc_task_82026->free_min_arg_74443;
    int64_t min_res_74444 = futhark_mc_task_82026->free_min_res_74444;
    float max_res_74448 = futhark_mc_task_82026->free_max_res_74448;
    struct memblock mem_76096 = {.desc ="mem_76096", .mem =
                                 futhark_mc_task_82026->free_mem_76096, .size =
                                 0, .references =NULL};
    struct memblock mem_76099 = {.desc ="mem_76099", .mem =
                                 futhark_mc_task_82026->free_mem_76099, .size =
                                 0, .references =NULL};
    struct memblock mem_76102 = {.desc ="mem_76102", .mem =
                                 futhark_mc_task_82026->free_mem_76102, .size =
                                 0, .references =NULL};
    int64_t bytes_76104 = futhark_mc_task_82026->free_bytes_76104;
    struct memblock mem_76105 = {.desc ="mem_76105", .mem =
                                 futhark_mc_task_82026->free_mem_76105, .size =
                                 0, .references =NULL};
    struct memblock mem_76180 = {.desc ="mem_76180", .mem =
                                 futhark_mc_task_82026->free_mem_76180, .size =
                                 0, .references =NULL};
    struct memblock mem_76183 = {.desc ="mem_76183", .mem =
                                 futhark_mc_task_82026->free_mem_76183, .size =
                                 0, .references =NULL};
    int64_t iter_81248;
    struct futhark_mc_segmap_parloop_struct_82028
    futhark_mc_segmap_parloop_struct_82028;
    
    futhark_mc_segmap_parloop_struct_82028.ctx = ctx;
    futhark_mc_segmap_parloop_struct_82028.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_82028.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_82028.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_82028.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_82028.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_82028.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_82028.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_82028.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_82028.free_last_res_74427 = last_res_74427;
    futhark_mc_segmap_parloop_struct_82028.free_min_arg_74442 = min_arg_74442;
    futhark_mc_segmap_parloop_struct_82028.free_min_arg_74443 = min_arg_74443;
    futhark_mc_segmap_parloop_struct_82028.free_min_res_74444 = min_res_74444;
    futhark_mc_segmap_parloop_struct_82028.free_max_res_74448 = max_res_74448;
    futhark_mc_segmap_parloop_struct_82028.free_mem_76096 = mem_76096.mem;
    futhark_mc_segmap_parloop_struct_82028.free_mem_76099 = mem_76099.mem;
    futhark_mc_segmap_parloop_struct_82028.free_mem_76102 = mem_76102.mem;
    futhark_mc_segmap_parloop_struct_82028.free_bytes_76104 = bytes_76104;
    futhark_mc_segmap_parloop_struct_82028.free_mem_76105 = mem_76105.mem;
    futhark_mc_segmap_parloop_struct_82028.free_mem_76180 = mem_76180.mem;
    futhark_mc_segmap_parloop_struct_82028.free_mem_76183 = mem_76183.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_82029_task;
    
    futhark_mc_segmap_parloop_82029_task.name =
        "futhark_mc_segmap_parloop_82029";
    futhark_mc_segmap_parloop_82029_task.fn = futhark_mc_segmap_parloop_82029;
    futhark_mc_segmap_parloop_82029_task.args =
        &futhark_mc_segmap_parloop_struct_82028;
    futhark_mc_segmap_parloop_82029_task.iterations = iterations;
    futhark_mc_segmap_parloop_82029_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_82029_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82029_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_82029_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_82029_task);
    
    if (futhark_mc_segmap_parloop_82029_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82029_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82029_total_end -
                 futhark_mc_segmap_parloop_82029_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82029_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82029_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82029_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_82027_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_82027_end -
                 futhark_mc_segmap_task_82027_start;
        
        ctx->futhark_mc_segmap_task_82027_runs[tid]++;
        ctx->futhark_mc_segmap_task_82027_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_82027_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_82035 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_q_70282;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    bool free_x_70295;
    int64_t free_min_res_70300;
    bool free_loop_cond_70305;
    int64_t free_last_res_74427;
    int64_t free_min_arg_74442;
    int64_t free_min_arg_74443;
    int64_t free_min_res_74444;
    float free_max_res_74448;
    unsigned char *free_mem_76096;
    unsigned char *free_mem_76099;
    unsigned char *free_mem_76102;
    int64_t free_bytes_76104;
    unsigned char *free_mem_76105;
    unsigned char *free_mem_76180;
    unsigned char *free_mem_76183;
};
struct futhark_mc_task_82041 {
    struct futhark_context *ctx;
    int64_t free_q_70282;
    int64_t free_last_res_74427;
    unsigned char *free_mem_76099;
    unsigned char *free_mem_76105;
    int64_t free_min_res_80832;
    int64_t free_max_res_80897;
    float free_defunc_1_f_res_80916;
    unsigned char *free_mem_80917;
    unsigned char *free_mem_80918;
};
struct futhark_mc_segmap_parloop_struct_82043 {
    struct futhark_context *ctx;
    int64_t free_q_70282;
    int64_t free_last_res_74427;
    unsigned char *free_mem_76099;
    unsigned char *free_mem_76105;
    int64_t free_min_res_80832;
    int64_t free_max_res_80897;
    float free_defunc_1_f_res_80916;
    unsigned char *free_mem_80917;
    unsigned char *free_mem_80918;
};
static int futhark_mc_segmap_parloop_82044(void *args, int64_t start,
                                           int64_t end, int flat_tid_74225,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_82043
    *futhark_mc_segmap_parloop_struct_82043 =
    (struct futhark_mc_segmap_parloop_struct_82043 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_82043->ctx;
    uint64_t futhark_mc_segmap_parloop_82044_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82044_start = get_wall_time();
    
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_82043->free_q_70282;
    int64_t last_res_74427 =
            futhark_mc_segmap_parloop_struct_82043->free_last_res_74427;
    struct memblock mem_76099 = {.desc ="mem_76099", .mem =
                                 futhark_mc_segmap_parloop_struct_82043->free_mem_76099,
                                 .size =0, .references =NULL};
    struct memblock mem_76105 = {.desc ="mem_76105", .mem =
                                 futhark_mc_segmap_parloop_struct_82043->free_mem_76105,
                                 .size =0, .references =NULL};
    int64_t min_res_80832 =
            futhark_mc_segmap_parloop_struct_82043->free_min_res_80832;
    int64_t max_res_80897 =
            futhark_mc_segmap_parloop_struct_82043->free_max_res_80897;
    float defunc_1_f_res_80916 =
          futhark_mc_segmap_parloop_struct_82043->free_defunc_1_f_res_80916;
    struct memblock mem_80917 = {.desc ="mem_80917", .mem =
                                 futhark_mc_segmap_parloop_struct_82043->free_mem_80917,
                                 .size =0, .references =NULL};
    struct memblock mem_80918 = {.desc ="mem_80918", .mem =
                                 futhark_mc_segmap_parloop_struct_82043->free_mem_80918,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81518 = start;
    
    for (; iter_81518 < end; iter_81518++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81522 = q_70282;
        int64_t gtid_74226 = iter_81518;
        int64_t remnant_81523 = iter_81518 - gtid_74226;
        float x_81446 = ((float *) mem_76105.mem)[gtid_74226];
        bool cond_81447 = sle64(last_res_74427, gtid_74226);
        int64_t defunc_0_f_res_81448;
        
        if (cond_81447) {
            defunc_0_f_res_81448 = (int64_t) 0;
        } else {
            int64_t i_81519 = add64(gtid_74226, max_res_80897);
            int64_t defunc_0_add_arg_81520 =
                    ((int64_t *) mem_76099.mem)[i_81519];
            int64_t defunc_1_add_res_81521 = add64((int64_t) 1,
                                                   defunc_0_add_arg_81520);
            
            defunc_0_f_res_81448 = defunc_1_add_res_81521;
        }
        
        int64_t binop_p_81452 = sub64(defunc_0_f_res_81448, min_res_80832);
        float defunc_0_f_res_81453 = sitofp_i64_f32(binop_p_81452);
        float abs_res_81454 = (float) fabs(defunc_0_f_res_81453);
        float tmp1_81455 = abs_res_81454 / defunc_1_f_res_80916;
        float x_81456 = tmp1_81455 * tmp1_81455;
        float y_81457 = tmp1_81455 * x_81456;
        float tmp2_81458 = 1.0F - y_81457;
        float x_81459 = tmp2_81458 * tmp2_81458;
        float tmp3_81460 = tmp2_81458 * x_81459;
        float tmp4_81461 = x_81446 * tmp3_81460;
        
        ((float *) mem_80917.mem)[gtid_74226] = defunc_0_f_res_81453;
        ((float *) mem_80918.mem)[gtid_74226] = tmp4_81461;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82044_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82044_end -
                 futhark_mc_segmap_parloop_82044_start;
        
        ctx->futhark_mc_segmap_parloop_82044_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_82044_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_82044_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_82042(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74225 = tid;
    int num_tasks_81517 = info.nsubtasks;
    struct futhark_mc_task_82041 *futhark_mc_task_82041 =
                                 (struct futhark_mc_task_82041 *) args;
    struct futhark_context *ctx = futhark_mc_task_82041->ctx;
    uint64_t futhark_mc_segmap_task_82042_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_82042_start = get_wall_time();
    
    int64_t q_70282 = futhark_mc_task_82041->free_q_70282;
    int64_t last_res_74427 = futhark_mc_task_82041->free_last_res_74427;
    struct memblock mem_76099 = {.desc ="mem_76099", .mem =
                                 futhark_mc_task_82041->free_mem_76099, .size =
                                 0, .references =NULL};
    struct memblock mem_76105 = {.desc ="mem_76105", .mem =
                                 futhark_mc_task_82041->free_mem_76105, .size =
                                 0, .references =NULL};
    int64_t min_res_80832 = futhark_mc_task_82041->free_min_res_80832;
    int64_t max_res_80897 = futhark_mc_task_82041->free_max_res_80897;
    float defunc_1_f_res_80916 =
          futhark_mc_task_82041->free_defunc_1_f_res_80916;
    struct memblock mem_80917 = {.desc ="mem_80917", .mem =
                                 futhark_mc_task_82041->free_mem_80917, .size =
                                 0, .references =NULL};
    struct memblock mem_80918 = {.desc ="mem_80918", .mem =
                                 futhark_mc_task_82041->free_mem_80918, .size =
                                 0, .references =NULL};
    int64_t iter_81518;
    struct futhark_mc_segmap_parloop_struct_82043
    futhark_mc_segmap_parloop_struct_82043;
    
    futhark_mc_segmap_parloop_struct_82043.ctx = ctx;
    futhark_mc_segmap_parloop_struct_82043.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_82043.free_last_res_74427 = last_res_74427;
    futhark_mc_segmap_parloop_struct_82043.free_mem_76099 = mem_76099.mem;
    futhark_mc_segmap_parloop_struct_82043.free_mem_76105 = mem_76105.mem;
    futhark_mc_segmap_parloop_struct_82043.free_min_res_80832 = min_res_80832;
    futhark_mc_segmap_parloop_struct_82043.free_max_res_80897 = max_res_80897;
    futhark_mc_segmap_parloop_struct_82043.free_defunc_1_f_res_80916 =
        defunc_1_f_res_80916;
    futhark_mc_segmap_parloop_struct_82043.free_mem_80917 = mem_80917.mem;
    futhark_mc_segmap_parloop_struct_82043.free_mem_80918 = mem_80918.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_82044_task;
    
    futhark_mc_segmap_parloop_82044_task.name =
        "futhark_mc_segmap_parloop_82044";
    futhark_mc_segmap_parloop_82044_task.fn = futhark_mc_segmap_parloop_82044;
    futhark_mc_segmap_parloop_82044_task.args =
        &futhark_mc_segmap_parloop_struct_82043;
    futhark_mc_segmap_parloop_82044_task.iterations = iterations;
    futhark_mc_segmap_parloop_82044_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_82044_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82044_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_82044_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_82044_task);
    
    if (futhark_mc_segmap_parloop_82044_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82044_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82044_total_end -
                 futhark_mc_segmap_parloop_82044_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82044_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82044_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82044_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_82042_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_82042_end -
                 futhark_mc_segmap_task_82042_start;
        
        ctx->futhark_mc_segmap_task_82042_runs[tid]++;
        ctx->futhark_mc_segmap_task_82042_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_82042_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_82045 {
    struct futhark_context *ctx;
    unsigned char *free_mem_80917;
    unsigned char *free_mem_80918;
    float *retval_defunc_2_reduce_res_80939;
    float *retval_defunc_2_reduce_res_80940;
    float *retval_defunc_2_reduce_res_80941;
    float *retval_defunc_2_reduce_res_80942;
    float *retval_defunc_2_reduce_res_80943;
    unsigned char *retval_mem_80937;
    unsigned char *retval_mem_80938;
};
struct futhark_mc_segred_stage_1_parloop_struct_82052 {
    struct futhark_context *ctx;
    unsigned char *free_mem_80917;
    unsigned char *free_mem_80918;
    unsigned char *free_mem_80937;
    unsigned char *free_mem_80938;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_81525;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_81527;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_81529;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_81531;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_81533;
};
static int futhark_mc_segred_stage_1_parloop_82053(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_74227, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_82052
    *futhark_mc_segred_stage_1_parloop_struct_82052 =
    (struct futhark_mc_segred_stage_1_parloop_struct_82052 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_82052->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_82053_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_82053_start = get_wall_time();
    
    struct memblock mem_80917 = {.desc ="mem_80917", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82052->free_mem_80917,
                                 .size =0, .references =NULL};
    struct memblock mem_80918 = {.desc ="mem_80918", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82052->free_mem_80918,
                                 .size =0, .references =NULL};
    struct memblock mem_80937 = {.desc ="mem_80937", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82052->free_mem_80937,
                                 .size =0, .references =NULL};
    struct memblock mem_80938 = {.desc ="mem_80938", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82052->free_mem_80938,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_81525 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_81525",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_82052->free_reduce_stage_1_tid_res_arr_mem_81525,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_81527 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_81527",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_82052->free_reduce_stage_1_tid_res_arr_mem_81527,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_81529 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_81529",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_82052->free_reduce_stage_1_tid_res_arr_mem_81529,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_81531 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_81531",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_82052->free_reduce_stage_1_tid_res_arr_mem_81531,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_81533 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_81533",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_82052->free_reduce_stage_1_tid_res_arr_mem_81533,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81535 = start;
    float x_81462;
    float x_81463;
    float x_81465;
    float x_81466;
    float x_81468;
    float x_81469;
    float x_81471;
    float x_81472;
    float x_81474;
    float x_81475;
    float local_acc_81536 = 0.0F;
    float local_acc_81537 = 0.0F;
    float local_acc_81538 = 0.0F;
    float local_acc_81539 = 0.0F;
    float local_acc_81540 = 0.0F;
    
    for (; iter_81535 < end; iter_81535++) {
        int64_t gtid_74228 = iter_81535;
        float x_81477 = ((float *) mem_80917.mem)[gtid_74228];
        float x_81478 = ((float *) mem_80918.mem)[gtid_74228];
        float defunc_1_f_res_81479 = x_81477 * x_81478;
        float defunc_1_f_res_81480 = x_81477 * defunc_1_f_res_81479;
        float defunc_1_f_res_81481 = x_81477 * defunc_1_f_res_81480;
        float defunc_1_f_res_81482 = x_81477 * defunc_1_f_res_81481;
        
        // save map-out results
        {
            ((float *) mem_80937.mem)[gtid_74228] = defunc_1_f_res_81480;
            ((float *) mem_80938.mem)[gtid_74228] = defunc_1_f_res_81479;
        }
        // Load accum params
        {
            x_81462 = local_acc_81536;
        }
        // Load next params
        {
            x_81463 = x_81478;
        }
        // Red body
        {
            float defunc_1_op_res_81464 = x_81462 + x_81463;
            
            local_acc_81536 = defunc_1_op_res_81464;
        }
        // Load accum params
        {
            x_81465 = local_acc_81537;
        }
        // Load next params
        {
            x_81466 = defunc_1_f_res_81479;
        }
        // Red body
        {
            float defunc_1_op_res_81467 = x_81465 + x_81466;
            
            local_acc_81537 = defunc_1_op_res_81467;
        }
        // Load accum params
        {
            x_81468 = local_acc_81538;
        }
        // Load next params
        {
            x_81469 = defunc_1_f_res_81480;
        }
        // Red body
        {
            float defunc_1_op_res_81470 = x_81468 + x_81469;
            
            local_acc_81538 = defunc_1_op_res_81470;
        }
        // Load accum params
        {
            x_81471 = local_acc_81539;
        }
        // Load next params
        {
            x_81472 = defunc_1_f_res_81481;
        }
        // Red body
        {
            float defunc_1_op_res_81473 = x_81471 + x_81472;
            
            local_acc_81539 = defunc_1_op_res_81473;
        }
        // Load accum params
        {
            x_81474 = local_acc_81540;
        }
        // Load next params
        {
            x_81475 = defunc_1_f_res_81482;
        }
        // Red body
        {
            float defunc_1_op_res_81476 = x_81474 + x_81475;
            
            local_acc_81540 = defunc_1_op_res_81476;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_81525.mem)[flat_tid_74227] =
        local_acc_81536;
    ((float *) reduce_stage_1_tid_res_arr_mem_81527.mem)[flat_tid_74227] =
        local_acc_81537;
    ((float *) reduce_stage_1_tid_res_arr_mem_81529.mem)[flat_tid_74227] =
        local_acc_81538;
    ((float *) reduce_stage_1_tid_res_arr_mem_81531.mem)[flat_tid_74227] =
        local_acc_81539;
    ((float *) reduce_stage_1_tid_res_arr_mem_81533.mem)[flat_tid_74227] =
        local_acc_81540;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_82053_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_82053_end -
                 futhark_mc_segred_stage_1_parloop_82053_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_82053_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_82053_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_82053_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_82046(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74227 = tid;
    int num_tasks_81524 = info.nsubtasks;
    struct futhark_mc_task_82045 *futhark_mc_task_82045 =
                                 (struct futhark_mc_task_82045 *) args;
    struct futhark_context *ctx = futhark_mc_task_82045->ctx;
    uint64_t futhark_mc_segred_task_82046_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_82046_start = get_wall_time();
    
    struct memblock mem_80917 = {.desc ="mem_80917", .mem =
                                 futhark_mc_task_82045->free_mem_80917, .size =
                                 0, .references =NULL};
    struct memblock mem_80918 = {.desc ="mem_80918", .mem =
                                 futhark_mc_task_82045->free_mem_80918, .size =
                                 0, .references =NULL};
    float defunc_2_reduce_res_80939 =
          *futhark_mc_task_82045->retval_defunc_2_reduce_res_80939;
    float defunc_2_reduce_res_80940 =
          *futhark_mc_task_82045->retval_defunc_2_reduce_res_80940;
    float defunc_2_reduce_res_80941 =
          *futhark_mc_task_82045->retval_defunc_2_reduce_res_80941;
    float defunc_2_reduce_res_80942 =
          *futhark_mc_task_82045->retval_defunc_2_reduce_res_80942;
    float defunc_2_reduce_res_80943 =
          *futhark_mc_task_82045->retval_defunc_2_reduce_res_80943;
    struct memblock mem_80937 = {.desc ="mem_80937", .mem =
                                 futhark_mc_task_82045->retval_mem_80937,
                                 .size =0, .references =NULL};
    struct memblock mem_80938 = {.desc ="mem_80938", .mem =
                                 futhark_mc_task_82045->retval_mem_80938,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_81525_cached_sizze_82047 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_81525 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_81527_cached_sizze_82048 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_81527 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_81529_cached_sizze_82049 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_81529 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_81531_cached_sizze_82050 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_81531 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_81533_cached_sizze_82051 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_81533 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_81525_cached_sizze_82047 <
        (size_t) ((int64_t) 4 * num_tasks_81524)) {
        reduce_stage_1_tid_res_arr_mem_81525 =
            realloc(reduce_stage_1_tid_res_arr_mem_81525, (int64_t) 4 *
                    num_tasks_81524);
        reduce_stage_1_tid_res_arr_mem_81525_cached_sizze_82047 = (int64_t) 4 *
            num_tasks_81524;
    }
    if (reduce_stage_1_tid_res_arr_mem_81527_cached_sizze_82048 <
        (size_t) ((int64_t) 4 * num_tasks_81524)) {
        reduce_stage_1_tid_res_arr_mem_81527 =
            realloc(reduce_stage_1_tid_res_arr_mem_81527, (int64_t) 4 *
                    num_tasks_81524);
        reduce_stage_1_tid_res_arr_mem_81527_cached_sizze_82048 = (int64_t) 4 *
            num_tasks_81524;
    }
    if (reduce_stage_1_tid_res_arr_mem_81529_cached_sizze_82049 <
        (size_t) ((int64_t) 4 * num_tasks_81524)) {
        reduce_stage_1_tid_res_arr_mem_81529 =
            realloc(reduce_stage_1_tid_res_arr_mem_81529, (int64_t) 4 *
                    num_tasks_81524);
        reduce_stage_1_tid_res_arr_mem_81529_cached_sizze_82049 = (int64_t) 4 *
            num_tasks_81524;
    }
    if (reduce_stage_1_tid_res_arr_mem_81531_cached_sizze_82050 <
        (size_t) ((int64_t) 4 * num_tasks_81524)) {
        reduce_stage_1_tid_res_arr_mem_81531 =
            realloc(reduce_stage_1_tid_res_arr_mem_81531, (int64_t) 4 *
                    num_tasks_81524);
        reduce_stage_1_tid_res_arr_mem_81531_cached_sizze_82050 = (int64_t) 4 *
            num_tasks_81524;
    }
    if (reduce_stage_1_tid_res_arr_mem_81533_cached_sizze_82051 <
        (size_t) ((int64_t) 4 * num_tasks_81524)) {
        reduce_stage_1_tid_res_arr_mem_81533 =
            realloc(reduce_stage_1_tid_res_arr_mem_81533, (int64_t) 4 *
                    num_tasks_81524);
        reduce_stage_1_tid_res_arr_mem_81533_cached_sizze_82051 = (int64_t) 4 *
            num_tasks_81524;
    }
    
    int64_t iter_81535;
    struct futhark_mc_segred_stage_1_parloop_struct_82052
    futhark_mc_segred_stage_1_parloop_struct_82052;
    
    futhark_mc_segred_stage_1_parloop_struct_82052.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_82052.free_mem_80917 =
        mem_80917.mem;
    futhark_mc_segred_stage_1_parloop_struct_82052.free_mem_80918 =
        mem_80918.mem;
    futhark_mc_segred_stage_1_parloop_struct_82052.free_mem_80937 =
        mem_80937.mem;
    futhark_mc_segred_stage_1_parloop_struct_82052.free_mem_80938 =
        mem_80938.mem;
    futhark_mc_segred_stage_1_parloop_struct_82052.free_reduce_stage_1_tid_res_arr_mem_81525 =
        reduce_stage_1_tid_res_arr_mem_81525;
    futhark_mc_segred_stage_1_parloop_struct_82052.free_reduce_stage_1_tid_res_arr_mem_81527 =
        reduce_stage_1_tid_res_arr_mem_81527;
    futhark_mc_segred_stage_1_parloop_struct_82052.free_reduce_stage_1_tid_res_arr_mem_81529 =
        reduce_stage_1_tid_res_arr_mem_81529;
    futhark_mc_segred_stage_1_parloop_struct_82052.free_reduce_stage_1_tid_res_arr_mem_81531 =
        reduce_stage_1_tid_res_arr_mem_81531;
    futhark_mc_segred_stage_1_parloop_struct_82052.free_reduce_stage_1_tid_res_arr_mem_81533 =
        reduce_stage_1_tid_res_arr_mem_81533;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_82053_task;
    
    futhark_mc_segred_stage_1_parloop_82053_task.name =
        "futhark_mc_segred_stage_1_parloop_82053";
    futhark_mc_segred_stage_1_parloop_82053_task.fn =
        futhark_mc_segred_stage_1_parloop_82053;
    futhark_mc_segred_stage_1_parloop_82053_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_82052;
    futhark_mc_segred_stage_1_parloop_82053_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_82053_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_82053_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_82053_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_82053_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_82053_task);
    
    if (futhark_mc_segred_stage_1_parloop_82053_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_82053_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_82053_total_end -
                 futhark_mc_segred_stage_1_parloop_82053_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_82053_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_82053_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_82053_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_80939 = 0.0F;
        defunc_2_reduce_res_80940 = 0.0F;
        defunc_2_reduce_res_80941 = 0.0F;
        defunc_2_reduce_res_80942 = 0.0F;
        defunc_2_reduce_res_80943 = 0.0F;
    }
    
    float x_81541;
    float x_81542;
    float x_81544;
    float x_81545;
    float x_81547;
    float x_81548;
    float x_81550;
    float x_81551;
    float x_81553;
    float x_81554;
    
    for (int32_t i_81556 = 0; i_81556 < num_tasks_81524; i_81556++) {
        flat_tid_74227 = i_81556;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_81541 = defunc_2_reduce_res_80939;
            }
            // load next params
            {
                x_81542 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_81525)[flat_tid_74227];
            }
            // red body
            {
                float defunc_1_op_res_81543 = x_81541 + x_81542;
                
                defunc_2_reduce_res_80939 = defunc_1_op_res_81543;
            }
            // load acc params
            {
                x_81544 = defunc_2_reduce_res_80940;
            }
            // load next params
            {
                x_81545 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_81527)[flat_tid_74227];
            }
            // red body
            {
                float defunc_1_op_res_81546 = x_81544 + x_81545;
                
                defunc_2_reduce_res_80940 = defunc_1_op_res_81546;
            }
            // load acc params
            {
                x_81547 = defunc_2_reduce_res_80941;
            }
            // load next params
            {
                x_81548 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_81529)[flat_tid_74227];
            }
            // red body
            {
                float defunc_1_op_res_81549 = x_81547 + x_81548;
                
                defunc_2_reduce_res_80941 = defunc_1_op_res_81549;
            }
            // load acc params
            {
                x_81550 = defunc_2_reduce_res_80942;
            }
            // load next params
            {
                x_81551 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_81531)[flat_tid_74227];
            }
            // red body
            {
                float defunc_1_op_res_81552 = x_81550 + x_81551;
                
                defunc_2_reduce_res_80942 = defunc_1_op_res_81552;
            }
            // load acc params
            {
                x_81553 = defunc_2_reduce_res_80943;
            }
            // load next params
            {
                x_81554 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_81533)[flat_tid_74227];
            }
            // red body
            {
                float defunc_1_op_res_81555 = x_81553 + x_81554;
                
                defunc_2_reduce_res_80943 = defunc_1_op_res_81555;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_81525);
    free(reduce_stage_1_tid_res_arr_mem_81527);
    free(reduce_stage_1_tid_res_arr_mem_81529);
    free(reduce_stage_1_tid_res_arr_mem_81531);
    free(reduce_stage_1_tid_res_arr_mem_81533);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_82046_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_82046_end -
                 futhark_mc_segred_task_82046_start;
        
        ctx->futhark_mc_segred_task_82046_runs[tid]++;
        ctx->futhark_mc_segred_task_82046_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_82046_iter[tid] += iterations;
    }
    *futhark_mc_task_82045->retval_defunc_2_reduce_res_80939 =
        defunc_2_reduce_res_80939;
    *futhark_mc_task_82045->retval_defunc_2_reduce_res_80940 =
        defunc_2_reduce_res_80940;
    *futhark_mc_task_82045->retval_defunc_2_reduce_res_80941 =
        defunc_2_reduce_res_80941;
    *futhark_mc_task_82045->retval_defunc_2_reduce_res_80942 =
        defunc_2_reduce_res_80942;
    *futhark_mc_task_82045->retval_defunc_2_reduce_res_80943 =
        defunc_2_reduce_res_80943;
    futhark_mc_task_82045->retval_mem_80937 = mem_80937.mem;
    futhark_mc_task_82045->retval_mem_80938 = mem_80938.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_82054 {
    struct futhark_context *ctx;
    int64_t free_last_res_74427;
    unsigned char *free_mem_76096;
    int64_t free_max_res_80897;
    unsigned char *free_mem_80918;
    unsigned char *free_mem_80937;
    unsigned char *free_mem_80938;
    float free_a12_80987;
    float free_b12_80988;
    float free_c12_80989;
    float free_b2_80990;
    float free_c2_80991;
    float *retval_defunc_2_reduce_res_80992;
    float *retval_defunc_2_reduce_res_80993;
};
struct futhark_mc_segred_stage_1_parloop_struct_82058 {
    struct futhark_context *ctx;
    int64_t free_last_res_74427;
    unsigned char *free_mem_76096;
    int64_t free_max_res_80897;
    unsigned char *free_mem_80918;
    unsigned char *free_mem_80937;
    unsigned char *free_mem_80938;
    float free_a12_80987;
    float free_b12_80988;
    float free_c12_80989;
    float free_b2_80990;
    float free_c2_80991;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_81558;
    unsigned char *free_reduce_stage_1_tid_res_arr_mem_81560;
};
static int futhark_mc_segred_stage_1_parloop_82059(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_74229, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_82058
    *futhark_mc_segred_stage_1_parloop_struct_82058 =
    (struct futhark_mc_segred_stage_1_parloop_struct_82058 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_82058->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_82059_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_82059_start = get_wall_time();
    
    int64_t last_res_74427 =
            futhark_mc_segred_stage_1_parloop_struct_82058->free_last_res_74427;
    struct memblock mem_76096 = {.desc ="mem_76096", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82058->free_mem_76096,
                                 .size =0, .references =NULL};
    int64_t max_res_80897 =
            futhark_mc_segred_stage_1_parloop_struct_82058->free_max_res_80897;
    struct memblock mem_80918 = {.desc ="mem_80918", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82058->free_mem_80918,
                                 .size =0, .references =NULL};
    struct memblock mem_80937 = {.desc ="mem_80937", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82058->free_mem_80937,
                                 .size =0, .references =NULL};
    struct memblock mem_80938 = {.desc ="mem_80938", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_82058->free_mem_80938,
                                 .size =0, .references =NULL};
    float a12_80987 =
          futhark_mc_segred_stage_1_parloop_struct_82058->free_a12_80987;
    float b12_80988 =
          futhark_mc_segred_stage_1_parloop_struct_82058->free_b12_80988;
    float c12_80989 =
          futhark_mc_segred_stage_1_parloop_struct_82058->free_c12_80989;
    float b2_80990 =
          futhark_mc_segred_stage_1_parloop_struct_82058->free_b2_80990;
    float c2_80991 =
          futhark_mc_segred_stage_1_parloop_struct_82058->free_c2_80991;
    struct memblock reduce_stage_1_tid_res_arr_mem_81558 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_81558",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_82058->free_reduce_stage_1_tid_res_arr_mem_81558,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_81560 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_81560",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_82058->free_reduce_stage_1_tid_res_arr_mem_81560,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81562 = start;
    float x_81483;
    float x_81484;
    float x_81486;
    float x_81487;
    float local_acc_81563 = 0.0F;
    float local_acc_81564 = 0.0F;
    
    for (; iter_81562 < end; iter_81562++) {
        int64_t gtid_74230 = iter_81562;
        float x_81489 = ((float *) mem_80918.mem)[gtid_74230];
        float x_81490 = ((float *) mem_80938.mem)[gtid_74230];
        float x_81491 = ((float *) mem_80937.mem)[gtid_74230];
        bool cond_81492 = sle64(last_res_74427, gtid_74230);
        float defunc_0_f_res_81493;
        
        if (cond_81492) {
            defunc_0_f_res_81493 = 0.0F;
        } else {
            int64_t i_81494 = add64(gtid_74230, max_res_80897);
            float defunc_0_add_arg_81495 = ((float *) mem_76096.mem)[i_81494];
            
            defunc_0_f_res_81493 = defunc_0_add_arg_81495;
        }
        
        float x_81496 = a12_80987 * x_81489;
        float y_81497 = b12_80988 * x_81490;
        float x_81498 = x_81496 + y_81497;
        float y_81499 = c12_80989 * x_81491;
        float x_81500 = x_81498 + y_81499;
        float defunc_9_fit_fun_res_81501 = defunc_0_f_res_81493 * x_81500;
        float x_81502 = b12_80988 * x_81489;
        float y_81503 = b2_80990 * x_81490;
        float x_81504 = x_81502 + y_81503;
        float y_81505 = c2_80991 * x_81491;
        float x_81506 = x_81504 + y_81505;
        float defunc_9_slope_fun_res_81507 = defunc_0_f_res_81493 * x_81506;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_81483 = local_acc_81563;
        }
        // Load next params
        {
            x_81484 = defunc_9_fit_fun_res_81501;
        }
        // Red body
        {
            float defunc_1_op_res_81485 = x_81483 + x_81484;
            
            local_acc_81563 = defunc_1_op_res_81485;
        }
        // Load accum params
        {
            x_81486 = local_acc_81564;
        }
        // Load next params
        {
            x_81487 = defunc_9_slope_fun_res_81507;
        }
        // Red body
        {
            float defunc_1_op_res_81488 = x_81486 + x_81487;
            
            local_acc_81564 = defunc_1_op_res_81488;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_81558.mem)[flat_tid_74229] =
        local_acc_81563;
    ((float *) reduce_stage_1_tid_res_arr_mem_81560.mem)[flat_tid_74229] =
        local_acc_81564;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_82059_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_82059_end -
                 futhark_mc_segred_stage_1_parloop_82059_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_82059_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_82059_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_82059_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_82055(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74229 = tid;
    int num_tasks_81557 = info.nsubtasks;
    struct futhark_mc_task_82054 *futhark_mc_task_82054 =
                                 (struct futhark_mc_task_82054 *) args;
    struct futhark_context *ctx = futhark_mc_task_82054->ctx;
    uint64_t futhark_mc_segred_task_82055_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_82055_start = get_wall_time();
    
    int64_t last_res_74427 = futhark_mc_task_82054->free_last_res_74427;
    struct memblock mem_76096 = {.desc ="mem_76096", .mem =
                                 futhark_mc_task_82054->free_mem_76096, .size =
                                 0, .references =NULL};
    int64_t max_res_80897 = futhark_mc_task_82054->free_max_res_80897;
    struct memblock mem_80918 = {.desc ="mem_80918", .mem =
                                 futhark_mc_task_82054->free_mem_80918, .size =
                                 0, .references =NULL};
    struct memblock mem_80937 = {.desc ="mem_80937", .mem =
                                 futhark_mc_task_82054->free_mem_80937, .size =
                                 0, .references =NULL};
    struct memblock mem_80938 = {.desc ="mem_80938", .mem =
                                 futhark_mc_task_82054->free_mem_80938, .size =
                                 0, .references =NULL};
    float a12_80987 = futhark_mc_task_82054->free_a12_80987;
    float b12_80988 = futhark_mc_task_82054->free_b12_80988;
    float c12_80989 = futhark_mc_task_82054->free_c12_80989;
    float b2_80990 = futhark_mc_task_82054->free_b2_80990;
    float c2_80991 = futhark_mc_task_82054->free_c2_80991;
    float defunc_2_reduce_res_80992 =
          *futhark_mc_task_82054->retval_defunc_2_reduce_res_80992;
    float defunc_2_reduce_res_80993 =
          *futhark_mc_task_82054->retval_defunc_2_reduce_res_80993;
    size_t reduce_stage_1_tid_res_arr_mem_81558_cached_sizze_82056 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_81558 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_81560_cached_sizze_82057 = 0;
    unsigned char *reduce_stage_1_tid_res_arr_mem_81560 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_81558_cached_sizze_82056 <
        (size_t) ((int64_t) 4 * num_tasks_81557)) {
        reduce_stage_1_tid_res_arr_mem_81558 =
            realloc(reduce_stage_1_tid_res_arr_mem_81558, (int64_t) 4 *
                    num_tasks_81557);
        reduce_stage_1_tid_res_arr_mem_81558_cached_sizze_82056 = (int64_t) 4 *
            num_tasks_81557;
    }
    if (reduce_stage_1_tid_res_arr_mem_81560_cached_sizze_82057 <
        (size_t) ((int64_t) 4 * num_tasks_81557)) {
        reduce_stage_1_tid_res_arr_mem_81560 =
            realloc(reduce_stage_1_tid_res_arr_mem_81560, (int64_t) 4 *
                    num_tasks_81557);
        reduce_stage_1_tid_res_arr_mem_81560_cached_sizze_82057 = (int64_t) 4 *
            num_tasks_81557;
    }
    
    int64_t iter_81562;
    struct futhark_mc_segred_stage_1_parloop_struct_82058
    futhark_mc_segred_stage_1_parloop_struct_82058;
    
    futhark_mc_segred_stage_1_parloop_struct_82058.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_82058.free_last_res_74427 =
        last_res_74427;
    futhark_mc_segred_stage_1_parloop_struct_82058.free_mem_76096 =
        mem_76096.mem;
    futhark_mc_segred_stage_1_parloop_struct_82058.free_max_res_80897 =
        max_res_80897;
    futhark_mc_segred_stage_1_parloop_struct_82058.free_mem_80918 =
        mem_80918.mem;
    futhark_mc_segred_stage_1_parloop_struct_82058.free_mem_80937 =
        mem_80937.mem;
    futhark_mc_segred_stage_1_parloop_struct_82058.free_mem_80938 =
        mem_80938.mem;
    futhark_mc_segred_stage_1_parloop_struct_82058.free_a12_80987 = a12_80987;
    futhark_mc_segred_stage_1_parloop_struct_82058.free_b12_80988 = b12_80988;
    futhark_mc_segred_stage_1_parloop_struct_82058.free_c12_80989 = c12_80989;
    futhark_mc_segred_stage_1_parloop_struct_82058.free_b2_80990 = b2_80990;
    futhark_mc_segred_stage_1_parloop_struct_82058.free_c2_80991 = c2_80991;
    futhark_mc_segred_stage_1_parloop_struct_82058.free_reduce_stage_1_tid_res_arr_mem_81558 =
        reduce_stage_1_tid_res_arr_mem_81558;
    futhark_mc_segred_stage_1_parloop_struct_82058.free_reduce_stage_1_tid_res_arr_mem_81560 =
        reduce_stage_1_tid_res_arr_mem_81560;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_82059_task;
    
    futhark_mc_segred_stage_1_parloop_82059_task.name =
        "futhark_mc_segred_stage_1_parloop_82059";
    futhark_mc_segred_stage_1_parloop_82059_task.fn =
        futhark_mc_segred_stage_1_parloop_82059;
    futhark_mc_segred_stage_1_parloop_82059_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_82058;
    futhark_mc_segred_stage_1_parloop_82059_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_82059_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_82059_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_82059_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_82059_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_82059_task);
    
    if (futhark_mc_segred_stage_1_parloop_82059_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_82059_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_82059_total_end -
                 futhark_mc_segred_stage_1_parloop_82059_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_82059_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_82059_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_82059_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_80992 = 0.0F;
        defunc_2_reduce_res_80993 = 0.0F;
    }
    
    float x_81565;
    float x_81566;
    float x_81568;
    float x_81569;
    
    for (int32_t i_81571 = 0; i_81571 < num_tasks_81557; i_81571++) {
        flat_tid_74229 = i_81571;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_81565 = defunc_2_reduce_res_80992;
            }
            // load next params
            {
                x_81566 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_81558)[flat_tid_74229];
            }
            // red body
            {
                float defunc_1_op_res_81567 = x_81565 + x_81566;
                
                defunc_2_reduce_res_80992 = defunc_1_op_res_81567;
            }
            // load acc params
            {
                x_81568 = defunc_2_reduce_res_80993;
            }
            // load next params
            {
                x_81569 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_81560)[flat_tid_74229];
            }
            // red body
            {
                float defunc_1_op_res_81570 = x_81568 + x_81569;
                
                defunc_2_reduce_res_80993 = defunc_1_op_res_81570;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_81558);
    free(reduce_stage_1_tid_res_arr_mem_81560);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_82055_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_82055_end -
                 futhark_mc_segred_task_82055_start;
        
        ctx->futhark_mc_segred_task_82055_runs[tid]++;
        ctx->futhark_mc_segred_task_82055_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_82055_iter[tid] += iterations;
    }
    *futhark_mc_task_82054->retval_defunc_2_reduce_res_80992 =
        defunc_2_reduce_res_80992;
    *futhark_mc_task_82054->retval_defunc_2_reduce_res_80993 =
        defunc_2_reduce_res_80993;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_82036(void *args, int64_t start,
                                           int64_t end, int flat_tid_74223,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_82035
    *futhark_mc_segmap_parloop_struct_82035 =
    (struct futhark_mc_segmap_parloop_struct_82035 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_82035->ctx;
    uint64_t futhark_mc_segmap_parloop_82036_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82036_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_82035->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_82035->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_82035->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_82035->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_82035->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_82035->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_82035->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_82035->free_loop_cond_70305;
    int64_t last_res_74427 =
            futhark_mc_segmap_parloop_struct_82035->free_last_res_74427;
    int64_t min_arg_74442 =
            futhark_mc_segmap_parloop_struct_82035->free_min_arg_74442;
    int64_t min_arg_74443 =
            futhark_mc_segmap_parloop_struct_82035->free_min_arg_74443;
    int64_t min_res_74444 =
            futhark_mc_segmap_parloop_struct_82035->free_min_res_74444;
    float max_res_74448 =
          futhark_mc_segmap_parloop_struct_82035->free_max_res_74448;
    struct memblock mem_76096 = {.desc ="mem_76096", .mem =
                                 futhark_mc_segmap_parloop_struct_82035->free_mem_76096,
                                 .size =0, .references =NULL};
    struct memblock mem_76099 = {.desc ="mem_76099", .mem =
                                 futhark_mc_segmap_parloop_struct_82035->free_mem_76099,
                                 .size =0, .references =NULL};
    struct memblock mem_76102 = {.desc ="mem_76102", .mem =
                                 futhark_mc_segmap_parloop_struct_82035->free_mem_76102,
                                 .size =0, .references =NULL};
    int64_t bytes_76104 =
            futhark_mc_segmap_parloop_struct_82035->free_bytes_76104;
    struct memblock mem_76105 = {.desc ="mem_76105", .mem =
                                 futhark_mc_segmap_parloop_struct_82035->free_mem_76105,
                                 .size =0, .references =NULL};
    struct memblock mem_76180 = {.desc ="mem_76180", .mem =
                                 futhark_mc_segmap_parloop_struct_82035->free_mem_76180,
                                 .size =0, .references =NULL};
    struct memblock mem_76183 = {.desc ="mem_76183", .mem =
                                 futhark_mc_segmap_parloop_struct_82035->free_mem_76183,
                                 .size =0, .references =NULL};
    size_t mem_80917_cached_sizze_82037 = 0;
    unsigned char *mem_80917 = NULL;
    size_t mem_80918_cached_sizze_82038 = 0;
    unsigned char *mem_80918 = NULL;
    size_t mem_80937_cached_sizze_82039 = 0;
    unsigned char *mem_80937 = NULL;
    size_t mem_80938_cached_sizze_82040 = 0;
    unsigned char *mem_80938 = NULL;
    int64_t iterations = end - start;
    int64_t iter_81390 = start;
    
    if (mem_80917_cached_sizze_82037 < (size_t) bytes_76104) {
        mem_80917 = realloc(mem_80917, bytes_76104);
        mem_80917_cached_sizze_82037 = bytes_76104;
    }
    if (mem_80918_cached_sizze_82038 < (size_t) bytes_76104) {
        mem_80918 = realloc(mem_80918, bytes_76104);
        mem_80918_cached_sizze_82038 = bytes_76104;
    }
    if (mem_80937_cached_sizze_82039 < (size_t) bytes_76104) {
        mem_80937 = realloc(mem_80937, bytes_76104);
        mem_80937_cached_sizze_82039 = bytes_76104;
    }
    if (mem_80938_cached_sizze_82040 < (size_t) bytes_76104) {
        mem_80938 = realloc(mem_80938, bytes_76104);
        mem_80938_cached_sizze_82040 = bytes_76104;
    }
    for (; iter_81390 < end; iter_81390++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81508 = n_m_70288;
        int64_t gtid_74224 = iter_81390;
        int64_t remnant_81509 = iter_81390 - gtid_74224;
        int64_t min_arg_80831 = mul64(jump_70284, gtid_74224);
        int64_t min_res_80832 = smin64(i_70294, min_arg_80831);
        int64_t defunc_0_g_res_80833 = add64((int64_t) 1, min_res_80832);
        bool init_idx_80834;
        int64_t init_idx_80835;
        int64_t init_idx_80836;
        bool loop_while_81391;
        int64_t low_81392;
        int64_t high_81393;
        
        loop_while_81391 = x_70295;
        low_81392 = (int64_t) 0;
        high_81393 = i_70294;
        while (loop_while_81391) {
            int64_t x_81394 = add64(low_81392, high_81393);
            int64_t mid_81395 = sdiv64(x_81394, (int64_t) 2);
            bool x_81396 = sle64((int64_t) 0, mid_81395);
            bool y_81397 = slt64(mid_81395, n_70280);
            bool bounds_check_81398 = x_81396 && y_81397;
            bool index_certs_81399;
            
            if (!bounds_check_81398) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_81395,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:449:26-36\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t mid_id_81400 = ((int64_t *) mem_76102.mem)[mid_81395];
            bool cond_81401 = slt64(mid_id_81400, (int64_t) 0);
            int64_t mid_idx_81402;
            
            if (cond_81401) {
                mid_idx_81402 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_81402 = mid_id_81400;
            }
            
            bool cond_81403 = sle64(defunc_0_g_res_80833, mid_idx_81402);
            int64_t loopres_81404;
            int64_t loopres_81405;
            
            if (cond_81403) {
                int64_t loopres_t_res_81406 = sub64(mid_81395, (int64_t) 1);
                
                loopres_81404 = low_81392;
                loopres_81405 = loopres_t_res_81406;
            } else {
                int64_t loopres_f_res_81407 = add64((int64_t) 1, mid_81395);
                
                loopres_81404 = loopres_f_res_81407;
                loopres_81405 = high_81393;
            }
            
            bool loop_cond_81408 = sle64(loopres_81404, loopres_81405);
            bool loop_while_tmp_81510 = loop_cond_81408;
            int64_t low_tmp_81511 = loopres_81404;
            int64_t high_tmp_81512 = loopres_81405;
            
            loop_while_81391 = loop_while_tmp_81510;
            low_81392 = low_tmp_81511;
            high_81393 = high_tmp_81512;
        }
        init_idx_80834 = loop_while_81391;
        init_idx_80835 = low_81392;
        init_idx_80836 = high_81393;
        
        bool idx_80855;
        int64_t idx_80856;
        int64_t idx_80857;
        int64_t idx_80858;
        bool loop_while_81409;
        int64_t l_idx_81410;
        int64_t r_idx_81411;
        int64_t span_81412;
        
        loop_while_81409 = loop_cond_70305;
        l_idx_81410 = init_idx_80835;
        r_idx_81411 = init_idx_80835;
        span_81412 = (int64_t) 1;
        while (loop_while_81409) {
            int64_t max_arg_81413 = sub64(l_idx_81410, (int64_t) 1);
            int64_t max_res_81414 = smax64((int64_t) 0, max_arg_81413);
            int64_t min_arg_81415 = add64((int64_t) 1, r_idx_81411);
            int64_t min_res_81416 = smin64(min_arg_74442, min_arg_81415);
            bool x_81417 = sle64((int64_t) 0, max_res_81414);
            bool y_81418 = slt64(max_res_81414, n_70280);
            bool bounds_check_81419 = x_81417 && y_81418;
            bool index_certs_81420;
            
            if (!bounds_check_81419) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_81414,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:459:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_81421 = ((int64_t *) mem_76102.mem)[max_res_81414];
            int64_t abs_arg_81422 = sub64(x_81421, defunc_0_g_res_80833);
            int64_t abs_res_81423 = abs64(abs_arg_81422);
            bool x_81424 = sle64((int64_t) 0, min_res_81416);
            bool y_81425 = slt64(min_res_81416, n_70280);
            bool bounds_check_81426 = x_81424 && y_81425;
            bool index_certs_81427;
            
            if (!bounds_check_81426) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_81416,
                              "] out of bounds for array of shape [",
                              (long long) n_70280, "].",
                              "-> #0  loess.fut:460:35-48\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:442:3-469:10\n   #5  loess.fut:502:15-61\n   #6  loess.fut:589:13-56\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:588:5-590:26\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            int64_t x_81428 = ((int64_t *) mem_76102.mem)[min_res_81416];
            int64_t abs_arg_81429 = sub64(x_81428, defunc_0_g_res_80833);
            int64_t abs_res_81430 = abs64(abs_arg_81429);
            bool cond_81431 = max_res_81414 == l_idx_81410;
            int64_t loopres_81432;
            int64_t loopres_81433;
            int64_t loopres_81434;
            
            if (cond_81431) {
                loopres_81432 = l_idx_81410;
                loopres_81433 = r_idx_81411;
                loopres_81434 = min_res_70300;
            } else {
                bool cond_81435 = slt64(abs_res_81423, abs_res_81430);
                bool cond_f_res_81436 = min_res_81416 == r_idx_81411;
                bool x_81437 = !cond_81435;
                bool y_81438 = cond_f_res_81436 && x_81437;
                bool cond_81439 = cond_81435 || y_81438;
                int64_t loopres_f_res_81440;
                
                if (cond_81439) {
                    loopres_f_res_81440 = max_res_81414;
                } else {
                    loopres_f_res_81440 = l_idx_81410;
                }
                
                int64_t loopres_f_res_81441;
                
                if (cond_81439) {
                    loopres_f_res_81441 = r_idx_81411;
                } else {
                    loopres_f_res_81441 = min_res_81416;
                }
                
                int64_t loopres_f_res_81442;
                
                if (cond_81439) {
                    int64_t loopres_f_res_t_res_81443 = add64((int64_t) 1,
                                                              span_81412);
                    
                    loopres_f_res_81442 = loopres_f_res_t_res_81443;
                } else {
                    int64_t loopres_f_res_f_res_81444 = add64((int64_t) 1,
                                                              span_81412);
                    
                    loopres_f_res_81442 = loopres_f_res_f_res_81444;
                }
                loopres_81432 = loopres_f_res_81440;
                loopres_81433 = loopres_f_res_81441;
                loopres_81434 = loopres_f_res_81442;
            }
            
            bool loop_cond_81445 = slt64(loopres_81434, min_res_70300);
            bool loop_while_tmp_81513 = loop_cond_81445;
            int64_t l_idx_tmp_81514 = loopres_81432;
            int64_t r_idx_tmp_81515 = loopres_81433;
            int64_t span_tmp_81516 = loopres_81434;
            
            loop_while_81409 = loop_while_tmp_81513;
            l_idx_81410 = l_idx_tmp_81514;
            r_idx_81411 = r_idx_tmp_81515;
            span_81412 = span_tmp_81516;
        }
        idx_80855 = loop_while_81409;
        idx_80856 = l_idx_81410;
        idx_80857 = r_idx_81411;
        idx_80858 = span_81412;
        
        int64_t min_res_80896 = smin64(min_arg_74443, idx_80856);
        int64_t max_res_80897 = smax64((int64_t) 0, min_res_80896);
        int64_t x_80898 = add64(min_res_74444, max_res_80897);
        int64_t r_80899 = sub64(x_80898, (int64_t) 1);
        bool x_80900 = sle64((int64_t) 0, r_80899);
        bool y_80901 = slt64(r_80899, n_70280);
        bool bounds_check_80902 = x_80900 && y_80901;
        bool index_certs_80903;
        
        if (!bounds_check_80902) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_80899,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:484:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_80904 = ((int64_t *) mem_76099.mem)[r_80899];
        int64_t abs_arg_80905 = sub64(x_80904, min_res_80832);
        int64_t abs_res_80906 = abs64(abs_arg_80905);
        bool x_80907 = sle64((int64_t) 0, max_res_80897);
        bool y_80908 = slt64(max_res_80897, n_70280);
        bool bounds_check_80909 = x_80907 && y_80908;
        bool index_certs_80910;
        
        if (!bounds_check_80909) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_80897,
                                   "] out of bounds for array of shape [",
                                   (long long) n_70280, "].",
                                   "-> #0  loess.fut:483:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:479:3-487:25\n   #4  loess.fut:503:16-51\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
            return 1;
        }
        
        int64_t x_80911 = ((int64_t *) mem_76099.mem)[max_res_80897];
        int64_t abs_arg_80912 = sub64(x_80911, min_res_80832);
        int64_t abs_res_80913 = abs64(abs_arg_80912);
        int64_t max_res_80914 = smax64(abs_res_80906, abs_res_80913);
        float defunc_0_f_res_80915 = sitofp_i64_f32(max_res_80914);
        float defunc_1_f_res_80916 = max_res_74448 + defunc_0_f_res_80915;
        int64_t flat_tid_74225 = (int64_t) 0;
        int32_t num_tasks_81517;
        struct futhark_mc_task_82041 futhark_mc_task_82041;
        
        futhark_mc_task_82041.ctx = ctx;
        futhark_mc_task_82041.free_q_70282 = q_70282;
        futhark_mc_task_82041.free_last_res_74427 = last_res_74427;
        futhark_mc_task_82041.free_mem_76099 = mem_76099.mem;
        futhark_mc_task_82041.free_mem_76105 = mem_76105.mem;
        futhark_mc_task_82041.free_min_res_80832 = min_res_80832;
        futhark_mc_task_82041.free_max_res_80897 = max_res_80897;
        futhark_mc_task_82041.free_defunc_1_f_res_80916 = defunc_1_f_res_80916;
        futhark_mc_task_82041.free_mem_80917 = mem_80917;
        futhark_mc_task_82041.free_mem_80918 = mem_80918;
        
        struct scheduler_segop futhark_mc_task_82041_task;
        
        futhark_mc_task_82041_task.args = &futhark_mc_task_82041;
        futhark_mc_task_82041_task.top_level_fn = futhark_mc_segmap_task_82042;
        futhark_mc_task_82041_task.name = "futhark_mc_segmap_task_82042";
        futhark_mc_task_82041_task.iterations = q_70282;
        futhark_mc_task_82041_task.task_time =
            &ctx->futhark_mc_segmap_task_82042_total_time;
        futhark_mc_task_82041_task.task_iter =
            &ctx->futhark_mc_segmap_task_82042_total_iter;
        futhark_mc_task_82041_task.sched = STATIC;
        futhark_mc_task_82041_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_82042_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_82041_task);
        
        if (futhark_mc_segmap_task_82042_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_80939;
        float defunc_2_reduce_res_80940;
        float defunc_2_reduce_res_80941;
        float defunc_2_reduce_res_80942;
        float defunc_2_reduce_res_80943;
        int64_t flat_tid_74227 = (int64_t) 0;
        int32_t num_tasks_81524;
        struct futhark_mc_task_82045 futhark_mc_task_82045;
        
        futhark_mc_task_82045.ctx = ctx;
        futhark_mc_task_82045.free_mem_80917 = mem_80917;
        futhark_mc_task_82045.free_mem_80918 = mem_80918;
        futhark_mc_task_82045.retval_defunc_2_reduce_res_80939 =
            &defunc_2_reduce_res_80939;
        futhark_mc_task_82045.retval_defunc_2_reduce_res_80940 =
            &defunc_2_reduce_res_80940;
        futhark_mc_task_82045.retval_defunc_2_reduce_res_80941 =
            &defunc_2_reduce_res_80941;
        futhark_mc_task_82045.retval_defunc_2_reduce_res_80942 =
            &defunc_2_reduce_res_80942;
        futhark_mc_task_82045.retval_defunc_2_reduce_res_80943 =
            &defunc_2_reduce_res_80943;
        futhark_mc_task_82045.retval_mem_80937 = mem_80937;
        futhark_mc_task_82045.retval_mem_80938 = mem_80938;
        
        struct scheduler_segop futhark_mc_task_82045_task;
        
        futhark_mc_task_82045_task.args = &futhark_mc_task_82045;
        futhark_mc_task_82045_task.top_level_fn = futhark_mc_segred_task_82046;
        futhark_mc_task_82045_task.name = "futhark_mc_segred_task_82046";
        futhark_mc_task_82045_task.iterations = q_70282;
        futhark_mc_task_82045_task.task_time =
            &ctx->futhark_mc_segred_task_82046_total_time;
        futhark_mc_task_82045_task.task_iter =
            &ctx->futhark_mc_segred_task_82046_total_iter;
        futhark_mc_task_82045_task.sched = STATIC;
        futhark_mc_task_82045_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_82046_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_82045_task);
        
        if (futhark_mc_segred_task_82046_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_80967 = defunc_2_reduce_res_80941 * defunc_2_reduce_res_80943;
        float y_80968 = defunc_2_reduce_res_80942 * defunc_2_reduce_res_80942;
        float a12_80969 = x_80967 - y_80968;
        float x_80970 = defunc_2_reduce_res_80941 * defunc_2_reduce_res_80942;
        float y_80971 = defunc_2_reduce_res_80940 * defunc_2_reduce_res_80943;
        float b12_80972 = x_80970 - y_80971;
        float x_80973 = defunc_2_reduce_res_80940 * defunc_2_reduce_res_80942;
        float y_80974 = defunc_2_reduce_res_80941 * defunc_2_reduce_res_80941;
        float c12_80975 = x_80973 - y_80974;
        float x_80976 = defunc_2_reduce_res_80939 * defunc_2_reduce_res_80943;
        float b2_80977 = x_80976 - y_80974;
        float x_80978 = defunc_2_reduce_res_80940 * defunc_2_reduce_res_80941;
        float y_80979 = defunc_2_reduce_res_80939 * defunc_2_reduce_res_80942;
        float c2_80980 = x_80978 - y_80979;
        float x_80981 = defunc_2_reduce_res_80939 * a12_80969;
        float y_80982 = defunc_2_reduce_res_80940 * b12_80972;
        float x_80983 = x_80981 + y_80982;
        float y_80984 = defunc_2_reduce_res_80941 * c12_80975;
        float y_80985 = x_80983 + y_80984;
        float det_80986 = 1.0F / y_80985;
        float a12_80987 = a12_80969 * det_80986;
        float b12_80988 = b12_80972 * det_80986;
        float c12_80989 = c12_80975 * det_80986;
        float b2_80990 = b2_80977 * det_80986;
        float c2_80991 = c2_80980 * det_80986;
        float defunc_2_reduce_res_80992;
        float defunc_2_reduce_res_80993;
        int64_t flat_tid_74229 = (int64_t) 0;
        int32_t num_tasks_81557;
        struct futhark_mc_task_82054 futhark_mc_task_82054;
        
        futhark_mc_task_82054.ctx = ctx;
        futhark_mc_task_82054.free_last_res_74427 = last_res_74427;
        futhark_mc_task_82054.free_mem_76096 = mem_76096.mem;
        futhark_mc_task_82054.free_max_res_80897 = max_res_80897;
        futhark_mc_task_82054.free_mem_80918 = mem_80918;
        futhark_mc_task_82054.free_mem_80937 = mem_80937;
        futhark_mc_task_82054.free_mem_80938 = mem_80938;
        futhark_mc_task_82054.free_a12_80987 = a12_80987;
        futhark_mc_task_82054.free_b12_80988 = b12_80988;
        futhark_mc_task_82054.free_c12_80989 = c12_80989;
        futhark_mc_task_82054.free_b2_80990 = b2_80990;
        futhark_mc_task_82054.free_c2_80991 = c2_80991;
        futhark_mc_task_82054.retval_defunc_2_reduce_res_80992 =
            &defunc_2_reduce_res_80992;
        futhark_mc_task_82054.retval_defunc_2_reduce_res_80993 =
            &defunc_2_reduce_res_80993;
        
        struct scheduler_segop futhark_mc_task_82054_task;
        
        futhark_mc_task_82054_task.args = &futhark_mc_task_82054;
        futhark_mc_task_82054_task.top_level_fn = futhark_mc_segred_task_82055;
        futhark_mc_task_82054_task.name = "futhark_mc_segred_task_82055";
        futhark_mc_task_82054_task.iterations = q_70282;
        futhark_mc_task_82054_task.task_time =
            &ctx->futhark_mc_segred_task_82055_total_time;
        futhark_mc_task_82054_task.task_iter =
            &ctx->futhark_mc_segred_task_82055_total_iter;
        futhark_mc_task_82054_task.sched = STATIC;
        futhark_mc_task_82054_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_82055_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_82054_task);
        
        if (futhark_mc_segred_task_82055_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_76180.mem)[gtid_74224] = defunc_2_reduce_res_80992;
        ((float *) mem_76183.mem)[gtid_74224] = defunc_2_reduce_res_80993;
    }
    
  cleanup:
    { }
    free(mem_80917);
    free(mem_80918);
    free(mem_80937);
    free(mem_80938);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82036_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82036_end -
                 futhark_mc_segmap_parloop_82036_start;
        
        ctx->futhark_mc_segmap_parloop_82036_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_82036_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_82036_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_82034(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74223 = tid;
    int num_tasks_81247 = info.nsubtasks;
    struct futhark_mc_task_82026 *futhark_mc_task_82026 =
                                 (struct futhark_mc_task_82026 *) args;
    struct futhark_context *ctx = futhark_mc_task_82026->ctx;
    uint64_t futhark_mc_segmap_nested_task_82034_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_82034_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_82026->free_n_70280;
    int64_t q_70282 = futhark_mc_task_82026->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_82026->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_82026->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_82026->free_i_70294;
    bool x_70295 = futhark_mc_task_82026->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_82026->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_82026->free_loop_cond_70305;
    int64_t last_res_74427 = futhark_mc_task_82026->free_last_res_74427;
    int64_t min_arg_74442 = futhark_mc_task_82026->free_min_arg_74442;
    int64_t min_arg_74443 = futhark_mc_task_82026->free_min_arg_74443;
    int64_t min_res_74444 = futhark_mc_task_82026->free_min_res_74444;
    float max_res_74448 = futhark_mc_task_82026->free_max_res_74448;
    struct memblock mem_76096 = {.desc ="mem_76096", .mem =
                                 futhark_mc_task_82026->free_mem_76096, .size =
                                 0, .references =NULL};
    struct memblock mem_76099 = {.desc ="mem_76099", .mem =
                                 futhark_mc_task_82026->free_mem_76099, .size =
                                 0, .references =NULL};
    struct memblock mem_76102 = {.desc ="mem_76102", .mem =
                                 futhark_mc_task_82026->free_mem_76102, .size =
                                 0, .references =NULL};
    int64_t bytes_76104 = futhark_mc_task_82026->free_bytes_76104;
    struct memblock mem_76105 = {.desc ="mem_76105", .mem =
                                 futhark_mc_task_82026->free_mem_76105, .size =
                                 0, .references =NULL};
    struct memblock mem_76180 = {.desc ="mem_76180", .mem =
                                 futhark_mc_task_82026->free_mem_76180, .size =
                                 0, .references =NULL};
    struct memblock mem_76183 = {.desc ="mem_76183", .mem =
                                 futhark_mc_task_82026->free_mem_76183, .size =
                                 0, .references =NULL};
    int64_t iter_81390;
    struct futhark_mc_segmap_parloop_struct_82035
    futhark_mc_segmap_parloop_struct_82035;
    
    futhark_mc_segmap_parloop_struct_82035.ctx = ctx;
    futhark_mc_segmap_parloop_struct_82035.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_82035.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_82035.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_82035.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_82035.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_82035.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_82035.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_82035.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_82035.free_last_res_74427 = last_res_74427;
    futhark_mc_segmap_parloop_struct_82035.free_min_arg_74442 = min_arg_74442;
    futhark_mc_segmap_parloop_struct_82035.free_min_arg_74443 = min_arg_74443;
    futhark_mc_segmap_parloop_struct_82035.free_min_res_74444 = min_res_74444;
    futhark_mc_segmap_parloop_struct_82035.free_max_res_74448 = max_res_74448;
    futhark_mc_segmap_parloop_struct_82035.free_mem_76096 = mem_76096.mem;
    futhark_mc_segmap_parloop_struct_82035.free_mem_76099 = mem_76099.mem;
    futhark_mc_segmap_parloop_struct_82035.free_mem_76102 = mem_76102.mem;
    futhark_mc_segmap_parloop_struct_82035.free_bytes_76104 = bytes_76104;
    futhark_mc_segmap_parloop_struct_82035.free_mem_76105 = mem_76105.mem;
    futhark_mc_segmap_parloop_struct_82035.free_mem_76180 = mem_76180.mem;
    futhark_mc_segmap_parloop_struct_82035.free_mem_76183 = mem_76183.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_82036_task;
    
    futhark_mc_segmap_parloop_82036_task.name =
        "futhark_mc_segmap_parloop_82036";
    futhark_mc_segmap_parloop_82036_task.fn = futhark_mc_segmap_parloop_82036;
    futhark_mc_segmap_parloop_82036_task.args =
        &futhark_mc_segmap_parloop_struct_82035;
    futhark_mc_segmap_parloop_82036_task.iterations = iterations;
    futhark_mc_segmap_parloop_82036_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_82036_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82036_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_82036_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_82036_task);
    
    if (futhark_mc_segmap_parloop_82036_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82036_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82036_total_end -
                 futhark_mc_segmap_parloop_82036_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82036_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82036_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82036_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_82034_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_82034_end -
                 futhark_mc_segmap_nested_task_82034_start;
        
        ctx->futhark_mc_segmap_nested_task_82034_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_82034_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_82034_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_81999(void *args, int64_t start,
                                           int64_t end, int flat_tid_74211,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_81998
    *futhark_mc_segmap_parloop_struct_81998 =
    (struct futhark_mc_segmap_parloop_struct_81998 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_81998->ctx;
    uint64_t futhark_mc_segmap_parloop_81999_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81999_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_segmap_parloop_struct_81998->free_m_70279;
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_81998->free_n_70280;
    int64_t q_70282 = futhark_mc_segmap_parloop_struct_81998->free_q_70282;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_81998->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_81998->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_81998->free_i_70294;
    bool x_70295 = futhark_mc_segmap_parloop_struct_81998->free_x_70295;
    int64_t min_res_70300 =
            futhark_mc_segmap_parloop_struct_81998->free_min_res_70300;
    bool loop_cond_70305 =
         futhark_mc_segmap_parloop_struct_81998->free_loop_cond_70305;
    float i64_res_70306 =
          futhark_mc_segmap_parloop_struct_81998->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_segmap_parloop_struct_81998->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_76092 =
            futhark_mc_segmap_parloop_struct_81998->free_bytes_76092;
    int64_t bytes_76095 =
            futhark_mc_segmap_parloop_struct_81998->free_bytes_76095;
    int64_t bytes_76104 =
            futhark_mc_segmap_parloop_struct_81998->free_bytes_76104;
    int64_t bytes_76179 =
            futhark_mc_segmap_parloop_struct_81998->free_bytes_76179;
    struct memblock mem_76352 = {.desc ="mem_76352", .mem =
                                 futhark_mc_segmap_parloop_struct_81998->free_mem_76352,
                                 .size =0, .references =NULL};
    struct memblock mem_76356 = {.desc ="mem_76356", .mem =
                                 futhark_mc_segmap_parloop_struct_81998->free_mem_76356,
                                 .size =0, .references =NULL};
    size_t mem_76093_cached_sizze_82000 = 0;
    unsigned char *mem_76093 = NULL;
    size_t mem_76096_cached_sizze_82001 = 0;
    unsigned char *mem_76096 = NULL;
    size_t mem_76099_cached_sizze_82002 = 0;
    unsigned char *mem_76099 = NULL;
    size_t mem_76102_cached_sizze_82003 = 0;
    unsigned char *mem_76102 = NULL;
    size_t mem_76105_cached_sizze_82004 = 0;
    unsigned char *mem_76105 = NULL;
    size_t mem_76180_cached_sizze_82005 = 0;
    unsigned char *mem_76180 = NULL;
    size_t mem_76183_cached_sizze_82006 = 0;
    unsigned char *mem_76183 = NULL;
    int64_t iterations = end - start;
    int64_t iter_80813 = start;
    
    if (mem_76093_cached_sizze_82000 < (size_t) bytes_76092) {
        mem_76093 = realloc(mem_76093, bytes_76092);
        mem_76093_cached_sizze_82000 = bytes_76092;
    }
    if (mem_76096_cached_sizze_82001 < (size_t) bytes_76095) {
        mem_76096 = realloc(mem_76096, bytes_76095);
        mem_76096_cached_sizze_82001 = bytes_76095;
    }
    if (mem_76099_cached_sizze_82002 < (size_t) bytes_76092) {
        mem_76099 = realloc(mem_76099, bytes_76092);
        mem_76099_cached_sizze_82002 = bytes_76092;
    }
    if (mem_76102_cached_sizze_82003 < (size_t) bytes_76092) {
        mem_76102 = realloc(mem_76102, bytes_76092);
        mem_76102_cached_sizze_82003 = bytes_76092;
    }
    if (mem_76105_cached_sizze_82004 < (size_t) bytes_76104) {
        mem_76105 = realloc(mem_76105, bytes_76104);
        mem_76105_cached_sizze_82004 = bytes_76104;
    }
    if (mem_76180_cached_sizze_82005 < (size_t) bytes_76179) {
        mem_76180 = realloc(mem_76180, bytes_76179);
        mem_76180_cached_sizze_82005 = bytes_76179;
    }
    if (mem_76183_cached_sizze_82006 < (size_t) bytes_76179) {
        mem_76183 = realloc(mem_76183, bytes_76179);
        mem_76183_cached_sizze_82006 = bytes_76179;
    }
    for (; iter_80813 < end; iter_80813++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81215 = m_70279;
        int64_t gtid_74212 = iter_80813;
        int64_t remnant_81216 = iter_80813 - gtid_74212;
        int64_t flat_tid_74213 = (int64_t) 0;
        int32_t num_tasks_81217;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_82007 futhark_mc_task_82007;
        
        futhark_mc_task_82007.ctx = ctx;
        futhark_mc_task_82007.free_n_70280 = n_70280;
        futhark_mc_task_82007.free_gtid_74212 = gtid_74212;
        futhark_mc_task_82007.free_Y_mem_75353 = Y_mem_75353.mem;
        futhark_mc_task_82007.free_mem_76093 = mem_76093;
        
        struct scheduler_segop futhark_mc_task_82007_task;
        
        futhark_mc_task_82007_task.args = &futhark_mc_task_82007;
        futhark_mc_task_82007_task.top_level_fn = futhark_mc_segscan_task_82008;
        futhark_mc_task_82007_task.name = "futhark_mc_segscan_task_82008";
        futhark_mc_task_82007_task.iterations = n_70280;
        futhark_mc_task_82007_task.task_time =
            &ctx->futhark_mc_segscan_task_82008_total_time;
        futhark_mc_task_82007_task.task_iter =
            &ctx->futhark_mc_segscan_task_82008_total_iter;
        futhark_mc_task_82007_task.sched = STATIC;
        futhark_mc_task_82007_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_82008_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_82007_task);
        
        if (futhark_mc_segscan_task_82008_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_74427 = ((int64_t *) mem_76093)[i_70294];
        
        for (int64_t i_81231 = 0; i_81231 < n_70280; i_81231++) {
            ((float *) mem_76096)[i_81231] = 0.0F;
        }
        for (int64_t i_81232 = 0; i_81232 < n_70280; i_81232++) {
            ((int64_t *) mem_76099)[i_81232] = (int64_t) -1;
        }
        
        int64_t flat_tid_74215 = (int64_t) 0;
        int32_t num_tasks_81233;
        struct futhark_mc_task_82014 futhark_mc_task_82014;
        
        futhark_mc_task_82014.ctx = ctx;
        futhark_mc_task_82014.free_n_70280 = n_70280;
        futhark_mc_task_82014.free_gtid_74212 = gtid_74212;
        futhark_mc_task_82014.free_Y_mem_75353 = Y_mem_75353.mem;
        futhark_mc_task_82014.free_mem_76093 = mem_76093;
        futhark_mc_task_82014.free_mem_76096 = mem_76096;
        futhark_mc_task_82014.free_mem_76099 = mem_76099;
        
        struct scheduler_segop futhark_mc_task_82014_task;
        
        futhark_mc_task_82014_task.args = &futhark_mc_task_82014;
        futhark_mc_task_82014_task.top_level_fn = futhark_mc_segmap_task_82015;
        futhark_mc_task_82014_task.name = "futhark_mc_segmap_task_82015";
        futhark_mc_task_82014_task.iterations = n_70280;
        futhark_mc_task_82014_task.task_time =
            &ctx->futhark_mc_segmap_task_82015_total_time;
        futhark_mc_task_82014_task.task_iter =
            &ctx->futhark_mc_segmap_task_82015_total_iter;
        futhark_mc_task_82014_task.sched = STATIC;
        futhark_mc_task_82014_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_82015_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_82014_task);
        
        if (futhark_mc_segmap_task_82015_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_74217 = (int64_t) 0;
        int32_t num_tasks_81239;
        struct futhark_mc_task_82018 futhark_mc_task_82018;
        
        futhark_mc_task_82018.ctx = ctx;
        futhark_mc_task_82018.free_n_70280 = n_70280;
        futhark_mc_task_82018.free_mem_76099 = mem_76099;
        futhark_mc_task_82018.free_mem_76102 = mem_76102;
        
        struct scheduler_segop futhark_mc_task_82018_task;
        
        futhark_mc_task_82018_task.args = &futhark_mc_task_82018;
        futhark_mc_task_82018_task.top_level_fn = futhark_mc_segmap_task_82019;
        futhark_mc_task_82018_task.name = "futhark_mc_segmap_task_82019";
        futhark_mc_task_82018_task.iterations = n_70280;
        futhark_mc_task_82018_task.task_time =
            &ctx->futhark_mc_segmap_task_82019_total_time;
        futhark_mc_task_82018_task.task_iter =
            &ctx->futhark_mc_segmap_task_82019_total_iter;
        futhark_mc_task_82018_task.sched = STATIC;
        futhark_mc_task_82018_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_82019_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_82018_task);
        
        if (futhark_mc_segmap_task_82019_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_74442 = sub64(last_res_74427, (int64_t) 1);
        int64_t min_arg_74443 = sub64(last_res_74427, min_res_70300);
        int64_t min_res_74444 = smin64(q_70282, last_res_74427);
        float i64_res_74445 = sitofp_i64_f32(last_res_74427);
        float x_74446 = i64_res_70306 - i64_res_74445;
        float max_arg_74447 = x_74446 / 2.0F;
        float max_res_74448 = fmax32(0.0F, max_arg_74447);
        int64_t flat_tid_74219 = (int64_t) 0;
        int32_t num_tasks_81243;
        struct futhark_mc_task_82022 futhark_mc_task_82022;
        
        futhark_mc_task_82022.ctx = ctx;
        futhark_mc_task_82022.free_q_70282 = q_70282;
        futhark_mc_task_82022.free_last_res_74427 = last_res_74427;
        futhark_mc_task_82022.free_mem_76105 = mem_76105;
        
        struct scheduler_segop futhark_mc_task_82022_task;
        
        futhark_mc_task_82022_task.args = &futhark_mc_task_82022;
        futhark_mc_task_82022_task.top_level_fn = futhark_mc_segmap_task_82023;
        futhark_mc_task_82022_task.name = "futhark_mc_segmap_task_82023";
        futhark_mc_task_82022_task.iterations = q_70282;
        futhark_mc_task_82022_task.task_time =
            &ctx->futhark_mc_segmap_task_82023_total_time;
        futhark_mc_task_82022_task.task_iter =
            &ctx->futhark_mc_segmap_task_82023_total_iter;
        futhark_mc_task_82022_task.sched = STATIC;
        futhark_mc_task_82022_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_82023_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_82022_task);
        
        if (futhark_mc_segmap_task_82023_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_74221 = (int64_t) 0;
        int32_t num_tasks_81247;
        int64_t flat_tid_74223 = (int64_t) 0;
        struct futhark_mc_task_82026 futhark_mc_task_82026;
        
        futhark_mc_task_82026.ctx = ctx;
        futhark_mc_task_82026.free_n_70280 = n_70280;
        futhark_mc_task_82026.free_q_70282 = q_70282;
        futhark_mc_task_82026.free_jump_70284 = jump_70284;
        futhark_mc_task_82026.free_n_m_70288 = n_m_70288;
        futhark_mc_task_82026.free_i_70294 = i_70294;
        futhark_mc_task_82026.free_x_70295 = x_70295;
        futhark_mc_task_82026.free_min_res_70300 = min_res_70300;
        futhark_mc_task_82026.free_loop_cond_70305 = loop_cond_70305;
        futhark_mc_task_82026.free_last_res_74427 = last_res_74427;
        futhark_mc_task_82026.free_min_arg_74442 = min_arg_74442;
        futhark_mc_task_82026.free_min_arg_74443 = min_arg_74443;
        futhark_mc_task_82026.free_min_res_74444 = min_res_74444;
        futhark_mc_task_82026.free_max_res_74448 = max_res_74448;
        futhark_mc_task_82026.free_mem_76096 = mem_76096;
        futhark_mc_task_82026.free_mem_76099 = mem_76099;
        futhark_mc_task_82026.free_mem_76102 = mem_76102;
        futhark_mc_task_82026.free_bytes_76104 = bytes_76104;
        futhark_mc_task_82026.free_mem_76105 = mem_76105;
        futhark_mc_task_82026.free_mem_76180 = mem_76180;
        futhark_mc_task_82026.free_mem_76183 = mem_76183;
        
        struct scheduler_segop futhark_mc_task_82026_task;
        
        futhark_mc_task_82026_task.args = &futhark_mc_task_82026;
        futhark_mc_task_82026_task.top_level_fn = futhark_mc_segmap_task_82027;
        futhark_mc_task_82026_task.name = "futhark_mc_segmap_task_82027";
        futhark_mc_task_82026_task.iterations = n_m_70288;
        futhark_mc_task_82026_task.task_time =
            &ctx->futhark_mc_segmap_task_82027_total_time;
        futhark_mc_task_82026_task.task_iter =
            &ctx->futhark_mc_segmap_task_82027_total_iter;
        futhark_mc_task_82026_task.sched = DYNAMIC;
        futhark_mc_task_82026_task.nested_fn =
            futhark_mc_segmap_nested_task_82034;
        
        int futhark_mc_segmap_task_82027_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_82026_task);
        
        if (futhark_mc_segmap_task_82027_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_76352.mem + gtid_74212 * n_m_70288 * (int64_t) 4,
                    mem_76180 + (int64_t) 0, n_m_70288 * (int64_t) 4);
        if (n_m_70288 * (int64_t) 4 > 0)
            memmove(mem_76356.mem + gtid_74212 * n_m_70288 * (int64_t) 4,
                    mem_76183 + (int64_t) 0, n_m_70288 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_76093);
    free(mem_76096);
    free(mem_76099);
    free(mem_76102);
    free(mem_76105);
    free(mem_76180);
    free(mem_76183);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81999_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81999_end -
                 futhark_mc_segmap_parloop_81999_start;
        
        ctx->futhark_mc_segmap_parloop_81999_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_81999_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_81999_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_81997(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74211 = tid;
    int num_tasks_80553 = info.nsubtasks;
    struct futhark_mc_task_81982 *futhark_mc_task_81982 =
                                 (struct futhark_mc_task_81982 *) args;
    struct futhark_context *ctx = futhark_mc_task_81982->ctx;
    uint64_t futhark_mc_segmap_nested_task_81997_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_81997_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_task_81982->free_m_70279;
    int64_t n_70280 = futhark_mc_task_81982->free_n_70280;
    int64_t q_70282 = futhark_mc_task_81982->free_q_70282;
    int64_t jump_70284 = futhark_mc_task_81982->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_81982->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_81982->free_i_70294;
    bool x_70295 = futhark_mc_task_81982->free_x_70295;
    int64_t min_res_70300 = futhark_mc_task_81982->free_min_res_70300;
    bool loop_cond_70305 = futhark_mc_task_81982->free_loop_cond_70305;
    float i64_res_70306 = futhark_mc_task_81982->free_i64_res_70306;
    struct memblock Y_mem_75353 = {.desc ="Y_mem_75353", .mem =
                                   futhark_mc_task_81982->free_Y_mem_75353,
                                   .size =0, .references =NULL};
    int64_t bytes_76092 = futhark_mc_task_81982->free_bytes_76092;
    int64_t bytes_76095 = futhark_mc_task_81982->free_bytes_76095;
    int64_t bytes_76104 = futhark_mc_task_81982->free_bytes_76104;
    int64_t bytes_76179 = futhark_mc_task_81982->free_bytes_76179;
    struct memblock mem_76352 = {.desc ="mem_76352", .mem =
                                 futhark_mc_task_81982->free_mem_76352, .size =
                                 0, .references =NULL};
    struct memblock mem_76356 = {.desc ="mem_76356", .mem =
                                 futhark_mc_task_81982->free_mem_76356, .size =
                                 0, .references =NULL};
    int64_t iter_80813;
    struct futhark_mc_segmap_parloop_struct_81998
    futhark_mc_segmap_parloop_struct_81998;
    
    futhark_mc_segmap_parloop_struct_81998.ctx = ctx;
    futhark_mc_segmap_parloop_struct_81998.free_m_70279 = m_70279;
    futhark_mc_segmap_parloop_struct_81998.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_81998.free_q_70282 = q_70282;
    futhark_mc_segmap_parloop_struct_81998.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_81998.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_81998.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_81998.free_x_70295 = x_70295;
    futhark_mc_segmap_parloop_struct_81998.free_min_res_70300 = min_res_70300;
    futhark_mc_segmap_parloop_struct_81998.free_loop_cond_70305 =
        loop_cond_70305;
    futhark_mc_segmap_parloop_struct_81998.free_i64_res_70306 = i64_res_70306;
    futhark_mc_segmap_parloop_struct_81998.free_Y_mem_75353 = Y_mem_75353.mem;
    futhark_mc_segmap_parloop_struct_81998.free_bytes_76092 = bytes_76092;
    futhark_mc_segmap_parloop_struct_81998.free_bytes_76095 = bytes_76095;
    futhark_mc_segmap_parloop_struct_81998.free_bytes_76104 = bytes_76104;
    futhark_mc_segmap_parloop_struct_81998.free_bytes_76179 = bytes_76179;
    futhark_mc_segmap_parloop_struct_81998.free_mem_76352 = mem_76352.mem;
    futhark_mc_segmap_parloop_struct_81998.free_mem_76356 = mem_76356.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_81999_task;
    
    futhark_mc_segmap_parloop_81999_task.name =
        "futhark_mc_segmap_parloop_81999";
    futhark_mc_segmap_parloop_81999_task.fn = futhark_mc_segmap_parloop_81999;
    futhark_mc_segmap_parloop_81999_task.args =
        &futhark_mc_segmap_parloop_struct_81998;
    futhark_mc_segmap_parloop_81999_task.iterations = iterations;
    futhark_mc_segmap_parloop_81999_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_81999_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_81999_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_81999_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_81999_task);
    
    if (futhark_mc_segmap_parloop_81999_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_81999_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_81999_total_end -
                 futhark_mc_segmap_parloop_81999_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81999_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81999_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_81999_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_81997_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_81997_end -
                 futhark_mc_segmap_nested_task_81997_start;
        
        ctx->futhark_mc_segmap_nested_task_81997_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_81997_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_81997_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_82060 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    int64_t free_y_71573;
    unsigned char *free_ext_mem_76361;
    unsigned char *free_ext_mem_76362;
    int64_t free_bytes_76364;
    unsigned char *free_mem_76384;
};
struct futhark_mc_segmap_parloop_struct_82062 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    int64_t free_y_71573;
    unsigned char *free_ext_mem_76361;
    unsigned char *free_ext_mem_76362;
    int64_t free_bytes_76364;
    unsigned char *free_mem_76384;
};
static int futhark_mc_segmap_parloop_82063(void *args, int64_t start,
                                           int64_t end, int flat_tid_74829,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_82062
    *futhark_mc_segmap_parloop_struct_82062 =
    (struct futhark_mc_segmap_parloop_struct_82062 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_82062->ctx;
    uint64_t futhark_mc_segmap_parloop_82063_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82063_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_segmap_parloop_struct_82062->free_m_70279;
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_82062->free_n_70280;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_82062->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_82062->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_82062->free_i_70294;
    int64_t y_71573 = futhark_mc_segmap_parloop_struct_82062->free_y_71573;
    struct memblock ext_mem_76361 = {.desc ="ext_mem_76361", .mem =
                                     futhark_mc_segmap_parloop_struct_82062->free_ext_mem_76361,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_76362 = {.desc ="ext_mem_76362", .mem =
                                     futhark_mc_segmap_parloop_struct_82062->free_ext_mem_76362,
                                     .size =0, .references =NULL};
    int64_t bytes_76364 =
            futhark_mc_segmap_parloop_struct_82062->free_bytes_76364;
    struct memblock mem_76384 = {.desc ="mem_76384", .mem =
                                 futhark_mc_segmap_parloop_struct_82062->free_mem_76384,
                                 .size =0, .references =NULL};
    size_t mem_76368_cached_sizze_82064 = 0;
    unsigned char *mem_76368 = NULL;
    int64_t iterations = end - start;
    int64_t iter_81573 = start;
    
    if (mem_76368_cached_sizze_82064 < (size_t) bytes_76364) {
        mem_76368 = realloc(mem_76368, bytes_76364);
        mem_76368_cached_sizze_82064 = bytes_76364;
    }
    for (; iter_81573 < end; iter_81573++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81623 = m_70279;
        int64_t gtid_74830 = iter_81573;
        int64_t remnant_81624 = iter_81573 - gtid_74830;
        
        for (int64_t i_81574 = 0; i_81574 < n_70280; i_81574++) {
            int64_t m_v_81576 = sdiv64(i_81574, jump_70284);
            bool cond_81577 = m_v_81576 == y_71573;
            int64_t j_81578;
            
            if (cond_81577) {
                int64_t j_t_res_81579 = sub64(m_v_81576, (int64_t) 1);
                
                j_81578 = j_t_res_81579;
            } else {
                j_81578 = m_v_81576;
            }
            
            int64_t min_arg_81580 = mul64(jump_70284, j_81578);
            int64_t min_res_81581 = smin64(i_70294, min_arg_81580);
            int64_t defunc_0_m_fun_arg_81582 = add64((int64_t) 1, j_81578);
            int64_t min_arg_81583 = mul64(jump_70284, defunc_0_m_fun_arg_81582);
            int64_t min_res_81584 = smin64(i_70294, min_arg_81583);
            int64_t i64_arg_81585 = sub64(min_res_81584, min_res_81581);
            float i64_res_81586 = sitofp_i64_f32(i64_arg_81585);
            int64_t i64_arg_81587 = sub64(i_81574, min_res_81581);
            float i64_res_81588 = sitofp_i64_f32(i64_arg_81587);
            float u_81589 = i64_res_81588 / i64_res_81586;
            float u2_81590 = u_81589 * u_81589;
            float u3_81591 = u_81589 * u2_81590;
            float x_81592 = 2.0F * u3_81591;
            float y_81593 = 3.0F * u2_81590;
            float x_81594 = x_81592 - y_81593;
            float x_81595 = 1.0F + x_81594;
            bool x_81596 = sle64((int64_t) 0, j_81578);
            bool y_81597 = slt64(j_81578, n_m_70288);
            bool bounds_check_81598 = x_81596 && y_81597;
            bool index_certs_81599;
            
            if (!bounds_check_81598) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_81578,
                              "] out of bounds for array of shape [",
                              (long long) n_m_70288, "].",
                              "-> #0  loess.fut:535:27-33\n   #1  loess.fut:548:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:545:3-549:9\n   #6  loess.fut:608:13-59\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:607:5-609:29\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            float y_81600 = ((float *) ext_mem_76362.mem)[gtid_74830 *
                                                          n_m_70288 + j_81578];
            float x_81601 = x_81595 * y_81600;
            float x_81602 = y_81593 - x_81592;
            bool x_81603 = sle64((int64_t) 0, defunc_0_m_fun_arg_81582);
            bool y_81604 = slt64(defunc_0_m_fun_arg_81582, n_m_70288);
            bool bounds_check_81605 = x_81603 && y_81604;
            bool index_certs_81606;
            
            if (!bounds_check_81605) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_81582,
                              "] out of bounds for array of shape [",
                              (long long) n_m_70288, "].",
                              "-> #0  loess.fut:536:27-37\n   #1  loess.fut:548:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:545:3-549:9\n   #6  loess.fut:608:13-59\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:607:5-609:29\n   #10 loess.fut:572:1-611:26\n");
                return 1;
            }
            
            float y_81607 = ((float *) ext_mem_76362.mem)[gtid_74830 *
                                                          n_m_70288 +
                                                          defunc_0_m_fun_arg_81582];
            float y_81608 = x_81602 * y_81607;
            float x_81609 = x_81601 + y_81608;
            float y_81610 = 2.0F * u2_81590;
            float x_81611 = u3_81591 - y_81610;
            float x_81612 = u_81589 + x_81611;
            float y_81613 = ((float *) ext_mem_76361.mem)[gtid_74830 *
                                                          n_m_70288 + j_81578];
            float x_81614 = x_81612 * y_81613;
            float y_81615 = i64_res_81586 * x_81614;
            float x_81616 = x_81609 + y_81615;
            float x_81617 = u3_81591 - u2_81590;
            float y_81618 = ((float *) ext_mem_76361.mem)[gtid_74830 *
                                                          n_m_70288 +
                                                          defunc_0_m_fun_arg_81582];
            float x_81619 = x_81617 * y_81618;
            float y_81620 = i64_res_81586 * x_81619;
            float defunc_4_interpolate_proc_res_81621 = x_81616 + y_81620;
            
            ((float *) mem_76368)[i_81574] =
                defunc_4_interpolate_proc_res_81621;
        }
        if (n_70280 * (int64_t) 4 > 0)
            memmove(mem_76384.mem + gtid_74830 * n_70280 * (int64_t) 4,
                    mem_76368 + (int64_t) 0, n_70280 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_76368);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82063_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82063_end -
                 futhark_mc_segmap_parloop_82063_start;
        
        ctx->futhark_mc_segmap_parloop_82063_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_82063_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_82063_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_82061(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74829 = tid;
    int num_tasks_81572 = info.nsubtasks;
    struct futhark_mc_task_82060 *futhark_mc_task_82060 =
                                 (struct futhark_mc_task_82060 *) args;
    struct futhark_context *ctx = futhark_mc_task_82060->ctx;
    uint64_t futhark_mc_segmap_task_82061_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_82061_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_task_82060->free_m_70279;
    int64_t n_70280 = futhark_mc_task_82060->free_n_70280;
    int64_t jump_70284 = futhark_mc_task_82060->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_82060->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_82060->free_i_70294;
    int64_t y_71573 = futhark_mc_task_82060->free_y_71573;
    struct memblock ext_mem_76361 = {.desc ="ext_mem_76361", .mem =
                                     futhark_mc_task_82060->free_ext_mem_76361,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_76362 = {.desc ="ext_mem_76362", .mem =
                                     futhark_mc_task_82060->free_ext_mem_76362,
                                     .size =0, .references =NULL};
    int64_t bytes_76364 = futhark_mc_task_82060->free_bytes_76364;
    struct memblock mem_76384 = {.desc ="mem_76384", .mem =
                                 futhark_mc_task_82060->free_mem_76384, .size =
                                 0, .references =NULL};
    int64_t iter_81573;
    struct futhark_mc_segmap_parloop_struct_82062
    futhark_mc_segmap_parloop_struct_82062;
    
    futhark_mc_segmap_parloop_struct_82062.ctx = ctx;
    futhark_mc_segmap_parloop_struct_82062.free_m_70279 = m_70279;
    futhark_mc_segmap_parloop_struct_82062.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_82062.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_82062.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_82062.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_82062.free_y_71573 = y_71573;
    futhark_mc_segmap_parloop_struct_82062.free_ext_mem_76361 =
        ext_mem_76361.mem;
    futhark_mc_segmap_parloop_struct_82062.free_ext_mem_76362 =
        ext_mem_76362.mem;
    futhark_mc_segmap_parloop_struct_82062.free_bytes_76364 = bytes_76364;
    futhark_mc_segmap_parloop_struct_82062.free_mem_76384 = mem_76384.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_82063_task;
    
    futhark_mc_segmap_parloop_82063_task.name =
        "futhark_mc_segmap_parloop_82063";
    futhark_mc_segmap_parloop_82063_task.fn = futhark_mc_segmap_parloop_82063;
    futhark_mc_segmap_parloop_82063_task.args =
        &futhark_mc_segmap_parloop_struct_82062;
    futhark_mc_segmap_parloop_82063_task.iterations = iterations;
    futhark_mc_segmap_parloop_82063_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_82063_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82063_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_82063_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_82063_task);
    
    if (futhark_mc_segmap_parloop_82063_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82063_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82063_total_end -
                 futhark_mc_segmap_parloop_82063_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82063_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82063_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82063_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_82061_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_82061_end -
                 futhark_mc_segmap_task_82061_start;
        
        ctx->futhark_mc_segmap_task_82061_runs[tid]++;
        ctx->futhark_mc_segmap_task_82061_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_82061_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_82066 {
    struct futhark_context *ctx;
    int64_t free_m_70279;
    int64_t free_n_70280;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    int64_t free_y_71573;
    unsigned char *free_ext_mem_76361;
    unsigned char *free_ext_mem_76362;
    int64_t free_bytes_76364;
    unsigned char *free_mem_76384;
};
struct futhark_mc_task_82069 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    int64_t free_y_71573;
    int64_t free_gtid_74832;
    unsigned char *free_ext_mem_76361;
    unsigned char *free_ext_mem_76362;
    unsigned char *free_mem_76365;
};
struct futhark_mc_segmap_parloop_struct_82071 {
    struct futhark_context *ctx;
    int64_t free_n_70280;
    int64_t free_jump_70284;
    int64_t free_n_m_70288;
    int64_t free_i_70294;
    int64_t free_y_71573;
    int64_t free_gtid_74832;
    unsigned char *free_ext_mem_76361;
    unsigned char *free_ext_mem_76362;
    unsigned char *free_mem_76365;
};
static int futhark_mc_segmap_parloop_82072(void *args, int64_t start,
                                           int64_t end, int flat_tid_74833,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_82071
    *futhark_mc_segmap_parloop_struct_82071 =
    (struct futhark_mc_segmap_parloop_struct_82071 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_82071->ctx;
    uint64_t futhark_mc_segmap_parloop_82072_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82072_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_82071->free_n_70280;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_82071->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_82071->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_82071->free_i_70294;
    int64_t y_71573 = futhark_mc_segmap_parloop_struct_82071->free_y_71573;
    int64_t gtid_74832 =
            futhark_mc_segmap_parloop_struct_82071->free_gtid_74832;
    struct memblock ext_mem_76361 = {.desc ="ext_mem_76361", .mem =
                                     futhark_mc_segmap_parloop_struct_82071->free_ext_mem_76361,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_76362 = {.desc ="ext_mem_76362", .mem =
                                     futhark_mc_segmap_parloop_struct_82071->free_ext_mem_76362,
                                     .size =0, .references =NULL};
    struct memblock mem_76365 = {.desc ="mem_76365", .mem =
                                 futhark_mc_segmap_parloop_struct_82071->free_mem_76365,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_81676 = start;
    
    for (; iter_81676 < end; iter_81676++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81678 = n_70280;
        int64_t gtid_74834 = iter_81676;
        int64_t remnant_81679 = iter_81676 - gtid_74834;
        int64_t m_v_81627 = sdiv64(gtid_74834, jump_70284);
        bool cond_81628 = m_v_81627 == y_71573;
        int64_t j_81629;
        
        if (cond_81628) {
            int64_t j_t_res_81677 = sub64(m_v_81627, (int64_t) 1);
            
            j_81629 = j_t_res_81677;
        } else {
            j_81629 = m_v_81627;
        }
        
        int64_t min_arg_81631 = mul64(jump_70284, j_81629);
        int64_t min_res_81632 = smin64(i_70294, min_arg_81631);
        int64_t defunc_0_m_fun_arg_81633 = add64((int64_t) 1, j_81629);
        int64_t min_arg_81634 = mul64(jump_70284, defunc_0_m_fun_arg_81633);
        int64_t min_res_81635 = smin64(i_70294, min_arg_81634);
        int64_t i64_arg_81636 = sub64(min_res_81635, min_res_81632);
        float i64_res_81637 = sitofp_i64_f32(i64_arg_81636);
        int64_t i64_arg_81638 = sub64(gtid_74834, min_res_81632);
        float i64_res_81639 = sitofp_i64_f32(i64_arg_81638);
        float u_81640 = i64_res_81639 / i64_res_81637;
        float u2_81641 = u_81640 * u_81640;
        float u3_81642 = u_81640 * u2_81641;
        float x_81643 = 2.0F * u3_81642;
        float y_81644 = 3.0F * u2_81641;
        float x_81645 = x_81643 - y_81644;
        float x_81646 = 1.0F + x_81645;
        bool x_81647 = sle64((int64_t) 0, j_81629);
        bool y_81648 = slt64(j_81629, n_m_70288);
        bool bounds_check_81649 = x_81647 && y_81648;
        bool index_certs_81650;
        
        if (!bounds_check_81649) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_81629,
                                   "] out of bounds for array of shape [",
                                   (long long) n_m_70288, "].",
                                   "-> #0  loess.fut:535:27-33\n   #1  loess.fut:548:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:545:3-549:9\n   #6  loess.fut:608:13-59\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:607:5-609:29\n   #10 loess.fut:572:1-611:26\n");
            return 1;
        }
        
        float y_81651 = ((float *) ext_mem_76362.mem)[gtid_74832 * n_m_70288 +
                                                      j_81629];
        float x_81652 = x_81646 * y_81651;
        float x_81653 = y_81644 - x_81643;
        bool x_81654 = sle64((int64_t) 0, defunc_0_m_fun_arg_81633);
        bool y_81655 = slt64(defunc_0_m_fun_arg_81633, n_m_70288);
        bool bounds_check_81656 = x_81654 && y_81655;
        bool index_certs_81657;
        
        if (!bounds_check_81656) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_81633,
                                   "] out of bounds for array of shape [",
                                   (long long) n_m_70288, "].",
                                   "-> #0  loess.fut:536:27-37\n   #1  loess.fut:548:13-50\n   #2  /prelude/soacs.fut:59:3-10\n   #3  /prelude/array.fut:195:3-17\n   #4  utils.fut:6:3-16\n   #5  loess.fut:545:3-549:9\n   #6  loess.fut:608:13-59\n   #7  /prelude/soacs.fut:67:19-23\n   #8  /prelude/soacs.fut:67:3-37\n   #9  loess.fut:607:5-609:29\n   #10 loess.fut:572:1-611:26\n");
            return 1;
        }
        
        float y_81658 = ((float *) ext_mem_76362.mem)[gtid_74832 * n_m_70288 +
                                                      defunc_0_m_fun_arg_81633];
        float y_81659 = x_81653 * y_81658;
        float x_81660 = x_81652 + y_81659;
        float y_81661 = 2.0F * u2_81641;
        float x_81662 = u3_81642 - y_81661;
        float x_81663 = u_81640 + x_81662;
        float y_81664 = ((float *) ext_mem_76361.mem)[gtid_74832 * n_m_70288 +
                                                      j_81629];
        float x_81665 = x_81663 * y_81664;
        float y_81666 = i64_res_81637 * x_81665;
        float x_81667 = x_81660 + y_81666;
        float x_81668 = u3_81642 - u2_81641;
        float y_81669 = ((float *) ext_mem_76361.mem)[gtid_74832 * n_m_70288 +
                                                      defunc_0_m_fun_arg_81633];
        float x_81670 = x_81668 * y_81669;
        float y_81671 = i64_res_81637 * x_81670;
        float defunc_4_interpolate_proc_res_81672 = x_81667 + y_81671;
        
        ((float *) mem_76365.mem)[gtid_74834] =
            defunc_4_interpolate_proc_res_81672;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82072_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82072_end -
                 futhark_mc_segmap_parloop_82072_start;
        
        ctx->futhark_mc_segmap_parloop_82072_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_82072_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_82072_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_82070(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74833 = tid;
    int num_tasks_81675 = info.nsubtasks;
    struct futhark_mc_task_82069 *futhark_mc_task_82069 =
                                 (struct futhark_mc_task_82069 *) args;
    struct futhark_context *ctx = futhark_mc_task_82069->ctx;
    uint64_t futhark_mc_segmap_task_82070_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_82070_start = get_wall_time();
    
    int64_t n_70280 = futhark_mc_task_82069->free_n_70280;
    int64_t jump_70284 = futhark_mc_task_82069->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_82069->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_82069->free_i_70294;
    int64_t y_71573 = futhark_mc_task_82069->free_y_71573;
    int64_t gtid_74832 = futhark_mc_task_82069->free_gtid_74832;
    struct memblock ext_mem_76361 = {.desc ="ext_mem_76361", .mem =
                                     futhark_mc_task_82069->free_ext_mem_76361,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_76362 = {.desc ="ext_mem_76362", .mem =
                                     futhark_mc_task_82069->free_ext_mem_76362,
                                     .size =0, .references =NULL};
    struct memblock mem_76365 = {.desc ="mem_76365", .mem =
                                 futhark_mc_task_82069->free_mem_76365, .size =
                                 0, .references =NULL};
    int64_t iter_81676;
    struct futhark_mc_segmap_parloop_struct_82071
    futhark_mc_segmap_parloop_struct_82071;
    
    futhark_mc_segmap_parloop_struct_82071.ctx = ctx;
    futhark_mc_segmap_parloop_struct_82071.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_82071.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_82071.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_82071.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_82071.free_y_71573 = y_71573;
    futhark_mc_segmap_parloop_struct_82071.free_gtid_74832 = gtid_74832;
    futhark_mc_segmap_parloop_struct_82071.free_ext_mem_76361 =
        ext_mem_76361.mem;
    futhark_mc_segmap_parloop_struct_82071.free_ext_mem_76362 =
        ext_mem_76362.mem;
    futhark_mc_segmap_parloop_struct_82071.free_mem_76365 = mem_76365.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_82072_task;
    
    futhark_mc_segmap_parloop_82072_task.name =
        "futhark_mc_segmap_parloop_82072";
    futhark_mc_segmap_parloop_82072_task.fn = futhark_mc_segmap_parloop_82072;
    futhark_mc_segmap_parloop_82072_task.args =
        &futhark_mc_segmap_parloop_struct_82071;
    futhark_mc_segmap_parloop_82072_task.iterations = iterations;
    futhark_mc_segmap_parloop_82072_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_82072_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82072_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_82072_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_82072_task);
    
    if (futhark_mc_segmap_parloop_82072_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82072_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82072_total_end -
                 futhark_mc_segmap_parloop_82072_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82072_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82072_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82072_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_82070_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_82070_end -
                 futhark_mc_segmap_task_82070_start;
        
        ctx->futhark_mc_segmap_task_82070_runs[tid]++;
        ctx->futhark_mc_segmap_task_82070_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_82070_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_82067(void *args, int64_t start,
                                           int64_t end, int flat_tid_74831,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_82066
    *futhark_mc_segmap_parloop_struct_82066 =
    (struct futhark_mc_segmap_parloop_struct_82066 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_82066->ctx;
    uint64_t futhark_mc_segmap_parloop_82067_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82067_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_segmap_parloop_struct_82066->free_m_70279;
    int64_t n_70280 = futhark_mc_segmap_parloop_struct_82066->free_n_70280;
    int64_t jump_70284 =
            futhark_mc_segmap_parloop_struct_82066->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_segmap_parloop_struct_82066->free_n_m_70288;
    int64_t i_70294 = futhark_mc_segmap_parloop_struct_82066->free_i_70294;
    int64_t y_71573 = futhark_mc_segmap_parloop_struct_82066->free_y_71573;
    struct memblock ext_mem_76361 = {.desc ="ext_mem_76361", .mem =
                                     futhark_mc_segmap_parloop_struct_82066->free_ext_mem_76361,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_76362 = {.desc ="ext_mem_76362", .mem =
                                     futhark_mc_segmap_parloop_struct_82066->free_ext_mem_76362,
                                     .size =0, .references =NULL};
    int64_t bytes_76364 =
            futhark_mc_segmap_parloop_struct_82066->free_bytes_76364;
    struct memblock mem_76384 = {.desc ="mem_76384", .mem =
                                 futhark_mc_segmap_parloop_struct_82066->free_mem_76384,
                                 .size =0, .references =NULL};
    size_t mem_76365_cached_sizze_82068 = 0;
    unsigned char *mem_76365 = NULL;
    int64_t iterations = end - start;
    int64_t iter_81626 = start;
    
    if (mem_76365_cached_sizze_82068 < (size_t) bytes_76364) {
        mem_76365 = realloc(mem_76365, bytes_76364);
        mem_76365_cached_sizze_82068 = bytes_76364;
    }
    for (; iter_81626 < end; iter_81626++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_81673 = m_70279;
        int64_t gtid_74832 = iter_81626;
        int64_t remnant_81674 = iter_81626 - gtid_74832;
        int64_t flat_tid_74833 = (int64_t) 0;
        int32_t num_tasks_81675;
        struct futhark_mc_task_82069 futhark_mc_task_82069;
        
        futhark_mc_task_82069.ctx = ctx;
        futhark_mc_task_82069.free_n_70280 = n_70280;
        futhark_mc_task_82069.free_jump_70284 = jump_70284;
        futhark_mc_task_82069.free_n_m_70288 = n_m_70288;
        futhark_mc_task_82069.free_i_70294 = i_70294;
        futhark_mc_task_82069.free_y_71573 = y_71573;
        futhark_mc_task_82069.free_gtid_74832 = gtid_74832;
        futhark_mc_task_82069.free_ext_mem_76361 = ext_mem_76361.mem;
        futhark_mc_task_82069.free_ext_mem_76362 = ext_mem_76362.mem;
        futhark_mc_task_82069.free_mem_76365 = mem_76365;
        
        struct scheduler_segop futhark_mc_task_82069_task;
        
        futhark_mc_task_82069_task.args = &futhark_mc_task_82069;
        futhark_mc_task_82069_task.top_level_fn = futhark_mc_segmap_task_82070;
        futhark_mc_task_82069_task.name = "futhark_mc_segmap_task_82070";
        futhark_mc_task_82069_task.iterations = n_70280;
        futhark_mc_task_82069_task.task_time =
            &ctx->futhark_mc_segmap_task_82070_total_time;
        futhark_mc_task_82069_task.task_iter =
            &ctx->futhark_mc_segmap_task_82070_total_iter;
        futhark_mc_task_82069_task.sched = STATIC;
        futhark_mc_task_82069_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_82070_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_82069_task);
        
        if (futhark_mc_segmap_task_82070_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (n_70280 * (int64_t) 4 > 0)
            memmove(mem_76384.mem + gtid_74832 * n_70280 * (int64_t) 4,
                    mem_76365 + (int64_t) 0, n_70280 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_76365);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82067_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82067_end -
                 futhark_mc_segmap_parloop_82067_start;
        
        ctx->futhark_mc_segmap_parloop_82067_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_82067_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_82067_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_82065(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_74831 = tid;
    int num_tasks_81572 = info.nsubtasks;
    struct futhark_mc_task_82060 *futhark_mc_task_82060 =
                                 (struct futhark_mc_task_82060 *) args;
    struct futhark_context *ctx = futhark_mc_task_82060->ctx;
    uint64_t futhark_mc_segmap_nested_task_82065_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_82065_start = get_wall_time();
    
    int64_t m_70279 = futhark_mc_task_82060->free_m_70279;
    int64_t n_70280 = futhark_mc_task_82060->free_n_70280;
    int64_t jump_70284 = futhark_mc_task_82060->free_jump_70284;
    int64_t n_m_70288 = futhark_mc_task_82060->free_n_m_70288;
    int64_t i_70294 = futhark_mc_task_82060->free_i_70294;
    int64_t y_71573 = futhark_mc_task_82060->free_y_71573;
    struct memblock ext_mem_76361 = {.desc ="ext_mem_76361", .mem =
                                     futhark_mc_task_82060->free_ext_mem_76361,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_76362 = {.desc ="ext_mem_76362", .mem =
                                     futhark_mc_task_82060->free_ext_mem_76362,
                                     .size =0, .references =NULL};
    int64_t bytes_76364 = futhark_mc_task_82060->free_bytes_76364;
    struct memblock mem_76384 = {.desc ="mem_76384", .mem =
                                 futhark_mc_task_82060->free_mem_76384, .size =
                                 0, .references =NULL};
    int64_t iter_81626;
    struct futhark_mc_segmap_parloop_struct_82066
    futhark_mc_segmap_parloop_struct_82066;
    
    futhark_mc_segmap_parloop_struct_82066.ctx = ctx;
    futhark_mc_segmap_parloop_struct_82066.free_m_70279 = m_70279;
    futhark_mc_segmap_parloop_struct_82066.free_n_70280 = n_70280;
    futhark_mc_segmap_parloop_struct_82066.free_jump_70284 = jump_70284;
    futhark_mc_segmap_parloop_struct_82066.free_n_m_70288 = n_m_70288;
    futhark_mc_segmap_parloop_struct_82066.free_i_70294 = i_70294;
    futhark_mc_segmap_parloop_struct_82066.free_y_71573 = y_71573;
    futhark_mc_segmap_parloop_struct_82066.free_ext_mem_76361 =
        ext_mem_76361.mem;
    futhark_mc_segmap_parloop_struct_82066.free_ext_mem_76362 =
        ext_mem_76362.mem;
    futhark_mc_segmap_parloop_struct_82066.free_bytes_76364 = bytes_76364;
    futhark_mc_segmap_parloop_struct_82066.free_mem_76384 = mem_76384.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_82067_task;
    
    futhark_mc_segmap_parloop_82067_task.name =
        "futhark_mc_segmap_parloop_82067";
    futhark_mc_segmap_parloop_82067_task.fn = futhark_mc_segmap_parloop_82067;
    futhark_mc_segmap_parloop_82067_task.args =
        &futhark_mc_segmap_parloop_struct_82066;
    futhark_mc_segmap_parloop_82067_task.iterations = iterations;
    futhark_mc_segmap_parloop_82067_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_82067_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_82067_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_82067_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_82067_task);
    
    if (futhark_mc_segmap_parloop_82067_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_82067_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_82067_total_end -
                 futhark_mc_segmap_parloop_82067_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82067_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82067_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_82067_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_82065_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_82065_end -
                 futhark_mc_segmap_nested_task_82065_start;
        
        ctx->futhark_mc_segmap_nested_task_82065_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_82065_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_82065_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 4 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 4 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if ((size_t) (arr->shape[0] * arr->shape[1]) * 4 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                      arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                         struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}

static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_81680,
                             struct memblock Y_mem_75353, int64_t m_70279,
                             int64_t n_70280, int64_t q_70282,
                             int64_t degree_70283, int64_t jump_70284,
                             int64_t jump_threshold_70285,
                             int64_t q_threshold_70286)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_out_76402;
    
    mem_out_76402.references = NULL;
    
    bool cond_70287 = jump_70284 == (int64_t) 1;
    int64_t n_m_70288;
    
    if (cond_70287) {
        n_m_70288 = n_70280;
    } else {
        bool zzero_70289 = jump_70284 == (int64_t) 0;
        bool nonzzero_70290 = !zzero_70289;
        bool nonzzero_cert_70291;
        
        if (!nonzzero_70290) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:579:38-45\n   #1  loess.fut:572:1-611:26\n");
            if (memblock_unref(ctx, &mem_out_76402, "mem_out_76402") != 0)
                return 1;
            return 1;
        }
        
        int64_t x_70292 = sdiv64(n_70280, jump_70284);
        int64_t n_m_f_res_70293 = add64((int64_t) 1, x_70292);
        
        n_m_70288 = n_m_f_res_70293;
    }
    
    int64_t i_70294 = sub64(n_70280, (int64_t) 1);
    bool x_70295 = sle64((int64_t) 0, i_70294);
    bool y_70296 = slt64(i_70294, n_70280);
    bool bounds_check_70297 = x_70295 && y_70296;
    bool index_certs_70298;
    
    if (!bounds_check_70297) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_70294,
                               "] out of bounds for array of shape [",
                               (long long) n_70280, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:45:13-20\n   #2  loess.fut:584:5-54\n   #3  loess.fut:572:1-611:26\n");
        if (memblock_unref(ctx, &mem_out_76402, "mem_out_76402") != 0)
            return 1;
        return 1;
    }
    
    int64_t min_res_70300 = smin64(n_70280, q_70282);
    bool bounds_invalid_upwards_70301 = slt64(n_m_70288, (int64_t) 0);
    bool valid_70302 = !bounds_invalid_upwards_70301;
    bool range_valid_c_70303;
    
    if (!valid_70302) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_m_70288, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  utils.fut:6:3-16\n   #3  loess.fut:442:3-469:10\n   #4  loess.fut:502:15-61\n   #5  loess.fut:589:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:588:5-590:26\n   #9  loess.fut:572:1-611:26\n");
        if (memblock_unref(ctx, &mem_out_76402, "mem_out_76402") != 0)
            return 1;
        return 1;
    }
    
    bool loop_cond_70305 = slt64((int64_t) 1, min_res_70300);
    float i64_res_70306 = sitofp_i64_f32(q_70282);
    bool cond_70307 = slt64(jump_70284, jump_threshold_70285);
    bool cond_f_res_70308 = slt64(q_threshold_70286, q_70282);
    bool x_70309 = !cond_70307;
    bool y_70310 = cond_f_res_70308 && x_70309;
    bool cond_70311 = cond_70307 || y_70310;
    struct memblock ext_mem_76362;
    
    ext_mem_76362.references = NULL;
    
    struct memblock ext_mem_76361;
    
    ext_mem_76361.references = NULL;
    if (cond_70311) {
        bool match_lit_70314 = (int64_t) 0 == degree_70283;
        int64_t binop_x_75354 = m_70279 * n_m_70288;
        int64_t binop_y_75355 = (int64_t) 4 * binop_x_75354;
        int64_t bytes_75356 = smax64((int64_t) 0, binop_y_75355);
        struct memblock ext_mem_75741;
        
        ext_mem_75741.references = NULL;
        
        struct memblock ext_mem_75740;
        
        ext_mem_75740.references = NULL;
        if (match_lit_70314) {
            struct memblock mem_75357;
            
            mem_75357.references = NULL;
            if (memblock_alloc(ctx, &mem_75357, bytes_75356, "mem_75357")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_76403 = 0; i_76403 < m_70279; i_76403++) {
                for (int64_t i_76404 = 0; i_76404 < n_m_70288; i_76404++) {
                    ((float *) mem_75357.mem)[i_76403 * n_m_70288 + i_76404] =
                        0.0F;
                }
            }
            
            struct memblock mem_75469;
            
            mem_75469.references = NULL;
            if (memblock_alloc(ctx, &mem_75469, bytes_75356, "mem_75469")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_75358 = (int64_t) 8 * n_70280;
            int64_t bytes_75359 = smax64((int64_t) 0, binop_y_75358);
            int64_t binop_y_75361 = (int64_t) 4 * n_70280;
            int64_t bytes_75362 = smax64((int64_t) 0, binop_y_75361);
            int64_t binop_y_75370 = (int64_t) 4 * q_70282;
            int64_t bytes_75371 = smax64((int64_t) 0, binop_y_75370);
            int64_t binop_y_75373 = (int64_t) 4 * n_m_70288;
            int64_t bytes_75374 = smax64((int64_t) 0, binop_y_75373);
            int64_t flat_tid_71628 = (int64_t) 0;
            int32_t num_tasks_76405;
            int64_t flat_tid_71630 = (int64_t) 0;
            struct futhark_mc_task_81681 futhark_mc_task_81681;
            
            futhark_mc_task_81681.ctx = ctx;
            futhark_mc_task_81681.free_m_70279 = m_70279;
            futhark_mc_task_81681.free_n_70280 = n_70280;
            futhark_mc_task_81681.free_q_70282 = q_70282;
            futhark_mc_task_81681.free_jump_70284 = jump_70284;
            futhark_mc_task_81681.free_n_m_70288 = n_m_70288;
            futhark_mc_task_81681.free_i_70294 = i_70294;
            futhark_mc_task_81681.free_x_70295 = x_70295;
            futhark_mc_task_81681.free_min_res_70300 = min_res_70300;
            futhark_mc_task_81681.free_loop_cond_70305 = loop_cond_70305;
            futhark_mc_task_81681.free_i64_res_70306 = i64_res_70306;
            futhark_mc_task_81681.free_Y_mem_75353 = Y_mem_75353.mem;
            futhark_mc_task_81681.free_bytes_75359 = bytes_75359;
            futhark_mc_task_81681.free_bytes_75362 = bytes_75362;
            futhark_mc_task_81681.free_bytes_75371 = bytes_75371;
            futhark_mc_task_81681.free_bytes_75374 = bytes_75374;
            futhark_mc_task_81681.free_mem_75469 = mem_75469.mem;
            
            struct scheduler_segop futhark_mc_task_81681_task;
            
            futhark_mc_task_81681_task.args = &futhark_mc_task_81681;
            futhark_mc_task_81681_task.top_level_fn =
                futhark_mc_segmap_task_81682;
            futhark_mc_task_81681_task.name = "futhark_mc_segmap_task_81682";
            futhark_mc_task_81681_task.iterations = m_70279;
            futhark_mc_task_81681_task.task_time =
                &ctx->futhark_mc_segmap_task_81682_total_time;
            futhark_mc_task_81681_task.task_iter =
                &ctx->futhark_mc_segmap_task_81682_total_iter;
            futhark_mc_task_81681_task.sched = DYNAMIC;
            futhark_mc_task_81681_task.nested_fn =
                futhark_mc_segmap_nested_task_81691;
            
            int futhark_mc_segmap_task_81682_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_81681_task);
            
            if (futhark_mc_segmap_task_81682_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_75741, &mem_75469, "mem_75469") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_75740, &mem_75357, "mem_75357") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_75469, "mem_75469") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_75357, "mem_75357") != 0)
                return 1;
        } else {
            bool match_lit_70493 = (int64_t) 1 == degree_70283;
            struct memblock ext_mem_75739;
            
            ext_mem_75739.references = NULL;
            
            struct memblock ext_mem_75738;
            
            ext_mem_75738.references = NULL;
            if (match_lit_70493) {
                struct memblock mem_75599;
                
                mem_75599.references = NULL;
                if (memblock_alloc(ctx, &mem_75599, bytes_75356, "mem_75599")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_75603;
                
                mem_75603.references = NULL;
                if (memblock_alloc(ctx, &mem_75603, bytes_75356, "mem_75603")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_75470 = (int64_t) 8 * n_70280;
                int64_t bytes_75471 = smax64((int64_t) 0, binop_y_75470);
                int64_t binop_y_75473 = (int64_t) 4 * n_70280;
                int64_t bytes_75474 = smax64((int64_t) 0, binop_y_75473);
                int64_t binop_y_75482 = (int64_t) 4 * q_70282;
                int64_t bytes_75483 = smax64((int64_t) 0, binop_y_75482);
                int64_t binop_y_75485 = (int64_t) 4 * n_m_70288;
                int64_t bytes_75486 = smax64((int64_t) 0, binop_y_75485);
                int64_t flat_tid_72089 = (int64_t) 0;
                int32_t num_tasks_77144;
                int64_t flat_tid_72091 = (int64_t) 0;
                struct futhark_mc_task_81736 futhark_mc_task_81736;
                
                futhark_mc_task_81736.ctx = ctx;
                futhark_mc_task_81736.free_m_70279 = m_70279;
                futhark_mc_task_81736.free_n_70280 = n_70280;
                futhark_mc_task_81736.free_q_70282 = q_70282;
                futhark_mc_task_81736.free_jump_70284 = jump_70284;
                futhark_mc_task_81736.free_n_m_70288 = n_m_70288;
                futhark_mc_task_81736.free_i_70294 = i_70294;
                futhark_mc_task_81736.free_x_70295 = x_70295;
                futhark_mc_task_81736.free_min_res_70300 = min_res_70300;
                futhark_mc_task_81736.free_loop_cond_70305 = loop_cond_70305;
                futhark_mc_task_81736.free_i64_res_70306 = i64_res_70306;
                futhark_mc_task_81736.free_Y_mem_75353 = Y_mem_75353.mem;
                futhark_mc_task_81736.free_bytes_75471 = bytes_75471;
                futhark_mc_task_81736.free_bytes_75474 = bytes_75474;
                futhark_mc_task_81736.free_bytes_75483 = bytes_75483;
                futhark_mc_task_81736.free_bytes_75486 = bytes_75486;
                futhark_mc_task_81736.free_mem_75599 = mem_75599.mem;
                futhark_mc_task_81736.free_mem_75603 = mem_75603.mem;
                
                struct scheduler_segop futhark_mc_task_81736_task;
                
                futhark_mc_task_81736_task.args = &futhark_mc_task_81736;
                futhark_mc_task_81736_task.top_level_fn =
                    futhark_mc_segmap_task_81737;
                futhark_mc_task_81736_task.name =
                    "futhark_mc_segmap_task_81737";
                futhark_mc_task_81736_task.iterations = m_70279;
                futhark_mc_task_81736_task.task_time =
                    &ctx->futhark_mc_segmap_task_81737_total_time;
                futhark_mc_task_81736_task.task_iter =
                    &ctx->futhark_mc_segmap_task_81737_total_iter;
                futhark_mc_task_81736_task.sched = DYNAMIC;
                futhark_mc_task_81736_task.nested_fn =
                    futhark_mc_segmap_nested_task_81747;
                
                int futhark_mc_segmap_task_81737_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_81736_task);
                
                if (futhark_mc_segmap_task_81737_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_75739, &mem_75599,
                                 "mem_75599") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_75738, &mem_75603,
                                 "mem_75603") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_75603, "mem_75603") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_75599, "mem_75599") != 0)
                    return 1;
            } else {
                struct memblock mem_75733;
                
                mem_75733.references = NULL;
                if (memblock_alloc(ctx, &mem_75733, bytes_75356, "mem_75733")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_75737;
                
                mem_75737.references = NULL;
                if (memblock_alloc(ctx, &mem_75737, bytes_75356, "mem_75737")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_75604 = (int64_t) 8 * n_70280;
                int64_t bytes_75605 = smax64((int64_t) 0, binop_y_75604);
                int64_t binop_y_75607 = (int64_t) 4 * n_70280;
                int64_t bytes_75608 = smax64((int64_t) 0, binop_y_75607);
                int64_t binop_y_75616 = (int64_t) 4 * q_70282;
                int64_t bytes_75617 = smax64((int64_t) 0, binop_y_75616);
                int64_t binop_y_75619 = (int64_t) 4 * n_m_70288;
                int64_t bytes_75620 = smax64((int64_t) 0, binop_y_75619);
                int64_t flat_tid_72635 = (int64_t) 0;
                int32_t num_tasks_78021;
                int64_t flat_tid_72637 = (int64_t) 0;
                struct futhark_mc_task_81796 futhark_mc_task_81796;
                
                futhark_mc_task_81796.ctx = ctx;
                futhark_mc_task_81796.free_m_70279 = m_70279;
                futhark_mc_task_81796.free_n_70280 = n_70280;
                futhark_mc_task_81796.free_q_70282 = q_70282;
                futhark_mc_task_81796.free_jump_70284 = jump_70284;
                futhark_mc_task_81796.free_n_m_70288 = n_m_70288;
                futhark_mc_task_81796.free_i_70294 = i_70294;
                futhark_mc_task_81796.free_x_70295 = x_70295;
                futhark_mc_task_81796.free_min_res_70300 = min_res_70300;
                futhark_mc_task_81796.free_loop_cond_70305 = loop_cond_70305;
                futhark_mc_task_81796.free_i64_res_70306 = i64_res_70306;
                futhark_mc_task_81796.free_Y_mem_75353 = Y_mem_75353.mem;
                futhark_mc_task_81796.free_bytes_75605 = bytes_75605;
                futhark_mc_task_81796.free_bytes_75608 = bytes_75608;
                futhark_mc_task_81796.free_bytes_75617 = bytes_75617;
                futhark_mc_task_81796.free_bytes_75620 = bytes_75620;
                futhark_mc_task_81796.free_mem_75733 = mem_75733.mem;
                futhark_mc_task_81796.free_mem_75737 = mem_75737.mem;
                
                struct scheduler_segop futhark_mc_task_81796_task;
                
                futhark_mc_task_81796_task.args = &futhark_mc_task_81796;
                futhark_mc_task_81796_task.top_level_fn =
                    futhark_mc_segmap_task_81797;
                futhark_mc_task_81796_task.name =
                    "futhark_mc_segmap_task_81797";
                futhark_mc_task_81796_task.iterations = m_70279;
                futhark_mc_task_81796_task.task_time =
                    &ctx->futhark_mc_segmap_task_81797_total_time;
                futhark_mc_task_81796_task.task_iter =
                    &ctx->futhark_mc_segmap_task_81797_total_iter;
                futhark_mc_task_81796_task.sched = DYNAMIC;
                futhark_mc_task_81796_task.nested_fn =
                    futhark_mc_segmap_nested_task_81807;
                
                int futhark_mc_segmap_task_81797_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_81796_task);
                
                if (futhark_mc_segmap_task_81797_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_75739, &mem_75733,
                                 "mem_75733") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_75738, &mem_75737,
                                 "mem_75737") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_75737, "mem_75737") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_75733, "mem_75733") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_75741, &ext_mem_75739,
                             "ext_mem_75739") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_75740, &ext_mem_75738,
                             "ext_mem_75738") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_75738, "ext_mem_75738") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_75739, "ext_mem_75739") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_76362, &ext_mem_75741,
                         "ext_mem_75741") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_76361, &ext_mem_75740,
                         "ext_mem_75740") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_75740, "ext_mem_75740") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_75741, "ext_mem_75741") != 0)
            return 1;
    } else {
        bool match_lit_70938 = (int64_t) 0 == degree_70283;
        int64_t binop_x_75742 = m_70279 * n_m_70288;
        int64_t binop_y_75743 = (int64_t) 4 * binop_x_75742;
        int64_t bytes_75744 = smax64((int64_t) 0, binop_y_75743);
        struct memblock ext_mem_76360;
        
        ext_mem_76360.references = NULL;
        
        struct memblock ext_mem_76359;
        
        ext_mem_76359.references = NULL;
        if (match_lit_70938) {
            struct memblock mem_75745;
            
            mem_75745.references = NULL;
            if (memblock_alloc(ctx, &mem_75745, bytes_75744, "mem_75745")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_79030 = 0; i_79030 < m_70279; i_79030++) {
                for (int64_t i_79031 = 0; i_79031 < n_m_70288; i_79031++) {
                    ((float *) mem_75745.mem)[i_79030 * n_m_70288 + i_79031] =
                        0.0F;
                }
            }
            
            struct memblock mem_75890;
            
            mem_75890.references = NULL;
            if (memblock_alloc(ctx, &mem_75890, bytes_75744, "mem_75890")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_75746 = (int64_t) 8 * n_70280;
            int64_t bytes_75747 = smax64((int64_t) 0, binop_y_75746);
            int64_t binop_y_75749 = (int64_t) 4 * n_70280;
            int64_t bytes_75750 = smax64((int64_t) 0, binop_y_75749);
            int64_t binop_y_75758 = (int64_t) 4 * q_70282;
            int64_t bytes_75759 = smax64((int64_t) 0, binop_y_75758);
            int64_t binop_y_75779 = (int64_t) 4 * n_m_70288;
            int64_t bytes_75780 = smax64((int64_t) 0, binop_y_75779);
            int64_t flat_tid_73277 = (int64_t) 0;
            int32_t num_tasks_79032;
            int64_t flat_tid_73279 = (int64_t) 0;
            struct futhark_mc_task_81858 futhark_mc_task_81858;
            
            futhark_mc_task_81858.ctx = ctx;
            futhark_mc_task_81858.free_m_70279 = m_70279;
            futhark_mc_task_81858.free_n_70280 = n_70280;
            futhark_mc_task_81858.free_q_70282 = q_70282;
            futhark_mc_task_81858.free_jump_70284 = jump_70284;
            futhark_mc_task_81858.free_n_m_70288 = n_m_70288;
            futhark_mc_task_81858.free_i_70294 = i_70294;
            futhark_mc_task_81858.free_x_70295 = x_70295;
            futhark_mc_task_81858.free_min_res_70300 = min_res_70300;
            futhark_mc_task_81858.free_loop_cond_70305 = loop_cond_70305;
            futhark_mc_task_81858.free_i64_res_70306 = i64_res_70306;
            futhark_mc_task_81858.free_Y_mem_75353 = Y_mem_75353.mem;
            futhark_mc_task_81858.free_bytes_75747 = bytes_75747;
            futhark_mc_task_81858.free_bytes_75750 = bytes_75750;
            futhark_mc_task_81858.free_bytes_75759 = bytes_75759;
            futhark_mc_task_81858.free_bytes_75780 = bytes_75780;
            futhark_mc_task_81858.free_mem_75890 = mem_75890.mem;
            
            struct scheduler_segop futhark_mc_task_81858_task;
            
            futhark_mc_task_81858_task.args = &futhark_mc_task_81858;
            futhark_mc_task_81858_task.top_level_fn =
                futhark_mc_segmap_task_81859;
            futhark_mc_task_81858_task.name = "futhark_mc_segmap_task_81859";
            futhark_mc_task_81858_task.iterations = m_70279;
            futhark_mc_task_81858_task.task_time =
                &ctx->futhark_mc_segmap_task_81859_total_time;
            futhark_mc_task_81858_task.task_iter =
                &ctx->futhark_mc_segmap_task_81859_total_iter;
            futhark_mc_task_81858_task.sched = DYNAMIC;
            futhark_mc_task_81858_task.nested_fn =
                futhark_mc_segmap_nested_task_81869;
            
            int futhark_mc_segmap_task_81859_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_81858_task);
            
            if (futhark_mc_segmap_task_81859_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_76360, &mem_75890, "mem_75890") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_76359, &mem_75745, "mem_75745") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_75890, "mem_75890") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_75745, "mem_75745") != 0)
                return 1;
        } else {
            bool match_lit_71104 = (int64_t) 1 == degree_70283;
            struct memblock ext_mem_76358;
            
            ext_mem_76358.references = NULL;
            
            struct memblock ext_mem_76357;
            
            ext_mem_76357.references = NULL;
            if (match_lit_71104) {
                struct memblock mem_76086;
                
                mem_76086.references = NULL;
                if (memblock_alloc(ctx, &mem_76086, bytes_75744, "mem_76086")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_76090;
                
                mem_76090.references = NULL;
                if (memblock_alloc(ctx, &mem_76090, bytes_75744, "mem_76090")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_75891 = (int64_t) 8 * n_70280;
                int64_t bytes_75892 = smax64((int64_t) 0, binop_y_75891);
                int64_t binop_y_75894 = (int64_t) 4 * n_70280;
                int64_t bytes_75895 = smax64((int64_t) 0, binop_y_75894);
                int64_t binop_y_75903 = (int64_t) 4 * q_70282;
                int64_t bytes_75904 = smax64((int64_t) 0, binop_y_75903);
                int64_t binop_y_75942 = (int64_t) 4 * n_m_70288;
                int64_t bytes_75943 = smax64((int64_t) 0, binop_y_75942);
                int64_t flat_tid_73699 = (int64_t) 0;
                int32_t num_tasks_79716;
                int64_t flat_tid_73701 = (int64_t) 0;
                struct futhark_mc_task_81916 futhark_mc_task_81916;
                
                futhark_mc_task_81916.ctx = ctx;
                futhark_mc_task_81916.free_m_70279 = m_70279;
                futhark_mc_task_81916.free_n_70280 = n_70280;
                futhark_mc_task_81916.free_q_70282 = q_70282;
                futhark_mc_task_81916.free_jump_70284 = jump_70284;
                futhark_mc_task_81916.free_n_m_70288 = n_m_70288;
                futhark_mc_task_81916.free_i_70294 = i_70294;
                futhark_mc_task_81916.free_x_70295 = x_70295;
                futhark_mc_task_81916.free_min_res_70300 = min_res_70300;
                futhark_mc_task_81916.free_loop_cond_70305 = loop_cond_70305;
                futhark_mc_task_81916.free_i64_res_70306 = i64_res_70306;
                futhark_mc_task_81916.free_Y_mem_75353 = Y_mem_75353.mem;
                futhark_mc_task_81916.free_bytes_75892 = bytes_75892;
                futhark_mc_task_81916.free_bytes_75895 = bytes_75895;
                futhark_mc_task_81916.free_bytes_75904 = bytes_75904;
                futhark_mc_task_81916.free_bytes_75943 = bytes_75943;
                futhark_mc_task_81916.free_mem_76086 = mem_76086.mem;
                futhark_mc_task_81916.free_mem_76090 = mem_76090.mem;
                
                struct scheduler_segop futhark_mc_task_81916_task;
                
                futhark_mc_task_81916_task.args = &futhark_mc_task_81916;
                futhark_mc_task_81916_task.top_level_fn =
                    futhark_mc_segmap_task_81917;
                futhark_mc_task_81916_task.name =
                    "futhark_mc_segmap_task_81917";
                futhark_mc_task_81916_task.iterations = m_70279;
                futhark_mc_task_81916_task.task_time =
                    &ctx->futhark_mc_segmap_task_81917_total_time;
                futhark_mc_task_81916_task.task_iter =
                    &ctx->futhark_mc_segmap_task_81917_total_iter;
                futhark_mc_task_81916_task.sched = DYNAMIC;
                futhark_mc_task_81916_task.nested_fn =
                    futhark_mc_segmap_nested_task_81929;
                
                int futhark_mc_segmap_task_81917_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_81916_task);
                
                if (futhark_mc_segmap_task_81917_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_76358, &mem_76086,
                                 "mem_76086") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_76357, &mem_76090,
                                 "mem_76090") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_76090, "mem_76090") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_76086, "mem_76086") != 0)
                    return 1;
            } else {
                struct memblock mem_76352;
                
                mem_76352.references = NULL;
                if (memblock_alloc(ctx, &mem_76352, bytes_75744, "mem_76352")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_76356;
                
                mem_76356.references = NULL;
                if (memblock_alloc(ctx, &mem_76356, bytes_75744, "mem_76356")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_76091 = (int64_t) 8 * n_70280;
                int64_t bytes_76092 = smax64((int64_t) 0, binop_y_76091);
                int64_t binop_y_76094 = (int64_t) 4 * n_70280;
                int64_t bytes_76095 = smax64((int64_t) 0, binop_y_76094);
                int64_t binop_y_76103 = (int64_t) 4 * q_70282;
                int64_t bytes_76104 = smax64((int64_t) 0, binop_y_76103);
                int64_t binop_y_76178 = (int64_t) 4 * n_m_70288;
                int64_t bytes_76179 = smax64((int64_t) 0, binop_y_76178);
                int64_t flat_tid_74209 = (int64_t) 0;
                int32_t num_tasks_80553;
                int64_t flat_tid_74211 = (int64_t) 0;
                struct futhark_mc_task_81982 futhark_mc_task_81982;
                
                futhark_mc_task_81982.ctx = ctx;
                futhark_mc_task_81982.free_m_70279 = m_70279;
                futhark_mc_task_81982.free_n_70280 = n_70280;
                futhark_mc_task_81982.free_q_70282 = q_70282;
                futhark_mc_task_81982.free_jump_70284 = jump_70284;
                futhark_mc_task_81982.free_n_m_70288 = n_m_70288;
                futhark_mc_task_81982.free_i_70294 = i_70294;
                futhark_mc_task_81982.free_x_70295 = x_70295;
                futhark_mc_task_81982.free_min_res_70300 = min_res_70300;
                futhark_mc_task_81982.free_loop_cond_70305 = loop_cond_70305;
                futhark_mc_task_81982.free_i64_res_70306 = i64_res_70306;
                futhark_mc_task_81982.free_Y_mem_75353 = Y_mem_75353.mem;
                futhark_mc_task_81982.free_bytes_76092 = bytes_76092;
                futhark_mc_task_81982.free_bytes_76095 = bytes_76095;
                futhark_mc_task_81982.free_bytes_76104 = bytes_76104;
                futhark_mc_task_81982.free_bytes_76179 = bytes_76179;
                futhark_mc_task_81982.free_mem_76352 = mem_76352.mem;
                futhark_mc_task_81982.free_mem_76356 = mem_76356.mem;
                
                struct scheduler_segop futhark_mc_task_81982_task;
                
                futhark_mc_task_81982_task.args = &futhark_mc_task_81982;
                futhark_mc_task_81982_task.top_level_fn =
                    futhark_mc_segmap_task_81983;
                futhark_mc_task_81982_task.name =
                    "futhark_mc_segmap_task_81983";
                futhark_mc_task_81982_task.iterations = m_70279;
                futhark_mc_task_81982_task.task_time =
                    &ctx->futhark_mc_segmap_task_81983_total_time;
                futhark_mc_task_81982_task.task_iter =
                    &ctx->futhark_mc_segmap_task_81983_total_iter;
                futhark_mc_task_81982_task.sched = DYNAMIC;
                futhark_mc_task_81982_task.nested_fn =
                    futhark_mc_segmap_nested_task_81997;
                
                int futhark_mc_segmap_task_81983_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_81982_task);
                
                if (futhark_mc_segmap_task_81983_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_76358, &mem_76352,
                                 "mem_76352") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_76357, &mem_76356,
                                 "mem_76356") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_76356, "mem_76356") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_76352, "mem_76352") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_76360, &ext_mem_76358,
                             "ext_mem_76358") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_76359, &ext_mem_76357,
                             "ext_mem_76357") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_76357, "ext_mem_76357") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_76358, "ext_mem_76358") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_76362, &ext_mem_76360,
                         "ext_mem_76360") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_76361, &ext_mem_76359,
                         "ext_mem_76359") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_76359, "ext_mem_76359") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_76360, "ext_mem_76360") != 0)
            return 1;
    }
    
    bool cond_71568 = slt64((int64_t) 1, jump_70284);
    int64_t binop_x_76381 = m_70279 * n_70280;
    int64_t binop_y_76382 = (int64_t) 4 * binop_x_76381;
    int64_t bytes_76383 = smax64((int64_t) 0, binop_y_76382);
    int64_t ext_76386;
    
    if (cond_71568) {
        ext_76386 = n_70280;
    } else {
        ext_76386 = n_m_70288;
    }
    
    struct memblock ext_mem_76385;
    
    ext_mem_76385.references = NULL;
    if (cond_71568) {
        bool zzero_71570 = jump_70284 == (int64_t) 0;
        bool nonzzero_71571 = !zzero_71570;
        bool nonzzero_cert_71572;
        
        if (!nonzzero_71571) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:546:20-27\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  utils.fut:6:3-16\n   #4  loess.fut:545:3-549:9\n   #5  loess.fut:608:13-59\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:607:5-609:29\n   #9  loess.fut:572:1-611:26\n");
            if (memblock_unref(ctx, &ext_mem_76385, "ext_mem_76385") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_76361, "ext_mem_76361") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_76362, "ext_mem_76362") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_76402, "mem_out_76402") != 0)
                return 1;
            return 1;
        }
        
        int64_t y_71573 = sub64(n_m_70288, (int64_t) 1);
        struct memblock mem_76384;
        
        mem_76384.references = NULL;
        if (memblock_alloc(ctx, &mem_76384, bytes_76383, "mem_76384")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t binop_y_76363 = (int64_t) 4 * n_70280;
        int64_t bytes_76364 = smax64((int64_t) 0, binop_y_76363);
        int64_t flat_tid_74829 = (int64_t) 0;
        int32_t num_tasks_81572;
        int64_t flat_tid_74831 = (int64_t) 0;
        struct futhark_mc_task_82060 futhark_mc_task_82060;
        
        futhark_mc_task_82060.ctx = ctx;
        futhark_mc_task_82060.free_m_70279 = m_70279;
        futhark_mc_task_82060.free_n_70280 = n_70280;
        futhark_mc_task_82060.free_jump_70284 = jump_70284;
        futhark_mc_task_82060.free_n_m_70288 = n_m_70288;
        futhark_mc_task_82060.free_i_70294 = i_70294;
        futhark_mc_task_82060.free_y_71573 = y_71573;
        futhark_mc_task_82060.free_ext_mem_76361 = ext_mem_76361.mem;
        futhark_mc_task_82060.free_ext_mem_76362 = ext_mem_76362.mem;
        futhark_mc_task_82060.free_bytes_76364 = bytes_76364;
        futhark_mc_task_82060.free_mem_76384 = mem_76384.mem;
        
        struct scheduler_segop futhark_mc_task_82060_task;
        
        futhark_mc_task_82060_task.args = &futhark_mc_task_82060;
        futhark_mc_task_82060_task.top_level_fn = futhark_mc_segmap_task_82061;
        futhark_mc_task_82060_task.name = "futhark_mc_segmap_task_82061";
        futhark_mc_task_82060_task.iterations = m_70279;
        futhark_mc_task_82060_task.task_time =
            &ctx->futhark_mc_segmap_task_82061_total_time;
        futhark_mc_task_82060_task.task_iter =
            &ctx->futhark_mc_segmap_task_82061_total_iter;
        futhark_mc_task_82060_task.sched = STATIC;
        futhark_mc_task_82060_task.nested_fn =
            futhark_mc_segmap_nested_task_82065;
        
        int futhark_mc_segmap_task_82061_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_82060_task);
        
        if (futhark_mc_segmap_task_82061_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_76385, &mem_76384, "mem_76384") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_76384, "mem_76384") != 0)
            return 1;
    } else {
        bool dim_match_71625 = n_70280 == n_m_70288;
        bool empty_or_match_cert_71626;
        
        if (!dim_match_71625) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Value of (core language) shape (",
                          (long long) m_70279, ", ", (long long) n_m_70288,
                          ") cannot match shape of type `[",
                          (long long) m_70279, "][", (long long) n_70280,
                          "]f32`.",
                          "-> #0  loess.fut:611:5-26\n   #1  loess.fut:572:1-611:26\n");
            if (memblock_unref(ctx, &ext_mem_76385, "ext_mem_76385") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_76361, "ext_mem_76361") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_76362, "ext_mem_76362") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_76402, "mem_out_76402") != 0)
                return 1;
            return 1;
        }
        if (memblock_set(ctx, &ext_mem_76385, &ext_mem_76362,
                         "ext_mem_76362") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &ext_mem_76361, "ext_mem_76361") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_76362, "ext_mem_76362") != 0)
        return 1;
    
    struct memblock mem_76390;
    
    mem_76390.references = NULL;
    if (memblock_alloc(ctx, &mem_76390, bytes_76383, "mem_76390")) {
        err = 1;
        goto cleanup;
    }
    if (m_70279 * n_70280 * (int64_t) 4 > 0)
        memmove(mem_76390.mem + (int64_t) 0, ext_mem_76385.mem + (int64_t) 0,
                m_70279 * n_70280 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_76385, "ext_mem_76385") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_76402, &mem_76390, "mem_76390") != 0)
        return 1;
    (*mem_out_p_81680).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_81680, &mem_out_76402, "mem_out_76402") !=
        0)
        return 1;
    if (memblock_unref(ctx, &mem_76390, "mem_76390") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_76385, "ext_mem_76385") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_76361, "ext_mem_76361") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_76362, "ext_mem_76362") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_76402, "mem_out_76402") != 0)
        return 1;
    
  cleanup:
    { }
    return err;
}

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5)
{
    struct memblock Y_mem_75353;
    
    Y_mem_75353.references = NULL;
    
    int64_t m_70279;
    int64_t n_70280;
    int64_t q_70282;
    int64_t degree_70283;
    int64_t jump_70284;
    int64_t jump_threshold_70285;
    int64_t q_threshold_70286;
    struct memblock mem_out_76402;
    
    mem_out_76402.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    Y_mem_75353 = in0->mem;
    m_70279 = in0->shape[0];
    n_70280 = in0->shape[1];
    q_70282 = in1;
    degree_70283 = in2;
    jump_70284 = in3;
    jump_threshold_70285 = in4;
    q_threshold_70286 = in5;
    if (!(m_70279 == in0->shape[0] && n_70280 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_76402, Y_mem_75353, m_70279,
                                n_70280, q_70282, degree_70283, jump_70284,
                                jump_threshold_70285, q_threshold_70286);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_76402;
            (*out0)->shape[0] = m_70279;
            (*out0)->shape[1] = n_70280;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
  
