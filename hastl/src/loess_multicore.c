// Generated by Futhark 0.20.0
// git: 5cc4d4b (Tue Jul 6 11:53:53 2021 -0700)
#ifndef _GNU_SOURCE
#define _GNU_SOURCE
#endif
#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif
// Headers

#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation

struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_sync(struct futhark_context *ctx);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);

// Arrays

struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5);

// Miscellaneous

char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_multicore
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}


static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, msg...) check_err(err, 0, __func__, __LINE__, msg)
#define CHECK_ERRNO(err, msg...) check_err(err, 1, __func__, __LINE__, msg)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  size_t start = ftell(f);
  fseek(f, 0, SEEK_END);
  size_t src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc(src_size + 1);
  if (fread(s, 1, src_size, f) != src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.

// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>

// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

static inline uint8_t add8(uint8_t x, uint8_t y)
{
    return x + y;
}
static inline uint16_t add16(uint16_t x, uint16_t y)
{
    return x + y;
}
static inline uint32_t add32(uint32_t x, uint32_t y)
{
    return x + y;
}
static inline uint64_t add64(uint64_t x, uint64_t y)
{
    return x + y;
}
static inline uint8_t sub8(uint8_t x, uint8_t y)
{
    return x - y;
}
static inline uint16_t sub16(uint16_t x, uint16_t y)
{
    return x - y;
}
static inline uint32_t sub32(uint32_t x, uint32_t y)
{
    return x - y;
}
static inline uint64_t sub64(uint64_t x, uint64_t y)
{
    return x - y;
}
static inline uint8_t mul8(uint8_t x, uint8_t y)
{
    return x * y;
}
static inline uint16_t mul16(uint16_t x, uint16_t y)
{
    return x * y;
}
static inline uint32_t mul32(uint32_t x, uint32_t y)
{
    return x * y;
}
static inline uint64_t mul64(uint64_t x, uint64_t y)
{
    return x * y;
}
static inline uint8_t udiv8(uint8_t x, uint8_t y)
{
    return x / y;
}
static inline uint16_t udiv16(uint16_t x, uint16_t y)
{
    return x / y;
}
static inline uint32_t udiv32(uint32_t x, uint32_t y)
{
    return x / y;
}
static inline uint64_t udiv64(uint64_t x, uint64_t y)
{
    return x / y;
}
static inline uint8_t udiv_up8(uint8_t x, uint8_t y)
{
    return (x + y - 1) / y;
}
static inline uint16_t udiv_up16(uint16_t x, uint16_t y)
{
    return (x + y - 1) / y;
}
static inline uint32_t udiv_up32(uint32_t x, uint32_t y)
{
    return (x + y - 1) / y;
}
static inline uint64_t udiv_up64(uint64_t x, uint64_t y)
{
    return (x + y - 1) / y;
}
static inline uint8_t umod8(uint8_t x, uint8_t y)
{
    return x % y;
}
static inline uint16_t umod16(uint16_t x, uint16_t y)
{
    return x % y;
}
static inline uint32_t umod32(uint32_t x, uint32_t y)
{
    return x % y;
}
static inline uint64_t umod64(uint64_t x, uint64_t y)
{
    return x % y;
}
static inline uint8_t udiv_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint16_t udiv_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint32_t udiv_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint64_t udiv_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint8_t umod_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint16_t umod_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint32_t umod_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint64_t umod_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t sdiv8(int8_t x, int8_t y)
{
    int8_t q = x / y;
    int8_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int16_t sdiv16(int16_t x, int16_t y)
{
    int16_t q = x / y;
    int16_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int32_t sdiv32(int32_t x, int32_t y)
{
    int32_t q = x / y;
    int32_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int64_t sdiv64(int64_t x, int64_t y)
{
    int64_t q = x / y;
    int64_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int8_t sdiv_up8(int8_t x, int8_t y)
{
    return sdiv8(x + y - 1, y);
}
static inline int16_t sdiv_up16(int16_t x, int16_t y)
{
    return sdiv16(x + y - 1, y);
}
static inline int32_t sdiv_up32(int32_t x, int32_t y)
{
    return sdiv32(x + y - 1, y);
}
static inline int64_t sdiv_up64(int64_t x, int64_t y)
{
    return sdiv64(x + y - 1, y);
}
static inline int8_t smod8(int8_t x, int8_t y)
{
    int8_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int16_t smod16(int16_t x, int16_t y)
{
    int16_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int32_t smod32(int32_t x, int32_t y)
{
    int32_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int64_t smod64(int64_t x, int64_t y)
{
    int64_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int8_t sdiv_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : sdiv8(x, y);
}
static inline int16_t sdiv_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : sdiv16(x, y);
}
static inline int32_t sdiv_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : sdiv32(x, y);
}
static inline int64_t sdiv_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : sdiv64(x, y);
}
static inline int8_t sdiv_up_safe8(int8_t x, int8_t y)
{
    return sdiv_safe8(x + y - 1, y);
}
static inline int16_t sdiv_up_safe16(int16_t x, int16_t y)
{
    return sdiv_safe16(x + y - 1, y);
}
static inline int32_t sdiv_up_safe32(int32_t x, int32_t y)
{
    return sdiv_safe32(x + y - 1, y);
}
static inline int64_t sdiv_up_safe64(int64_t x, int64_t y)
{
    return sdiv_safe64(x + y - 1, y);
}
static inline int8_t smod_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : smod8(x, y);
}
static inline int16_t smod_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : smod16(x, y);
}
static inline int32_t smod_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : smod32(x, y);
}
static inline int64_t smod_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : smod64(x, y);
}
static inline int8_t squot8(int8_t x, int8_t y)
{
    return x / y;
}
static inline int16_t squot16(int16_t x, int16_t y)
{
    return x / y;
}
static inline int32_t squot32(int32_t x, int32_t y)
{
    return x / y;
}
static inline int64_t squot64(int64_t x, int64_t y)
{
    return x / y;
}
static inline int8_t srem8(int8_t x, int8_t y)
{
    return x % y;
}
static inline int16_t srem16(int16_t x, int16_t y)
{
    return x % y;
}
static inline int32_t srem32(int32_t x, int32_t y)
{
    return x % y;
}
static inline int64_t srem64(int64_t x, int64_t y)
{
    return x % y;
}
static inline int8_t squot_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int16_t squot_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int32_t squot_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int64_t squot_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int8_t srem_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int16_t srem_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int32_t srem_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int64_t srem_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t smin8(int8_t x, int8_t y)
{
    return x < y ? x : y;
}
static inline int16_t smin16(int16_t x, int16_t y)
{
    return x < y ? x : y;
}
static inline int32_t smin32(int32_t x, int32_t y)
{
    return x < y ? x : y;
}
static inline int64_t smin64(int64_t x, int64_t y)
{
    return x < y ? x : y;
}
static inline uint8_t umin8(uint8_t x, uint8_t y)
{
    return x < y ? x : y;
}
static inline uint16_t umin16(uint16_t x, uint16_t y)
{
    return x < y ? x : y;
}
static inline uint32_t umin32(uint32_t x, uint32_t y)
{
    return x < y ? x : y;
}
static inline uint64_t umin64(uint64_t x, uint64_t y)
{
    return x < y ? x : y;
}
static inline int8_t smax8(int8_t x, int8_t y)
{
    return x < y ? y : x;
}
static inline int16_t smax16(int16_t x, int16_t y)
{
    return x < y ? y : x;
}
static inline int32_t smax32(int32_t x, int32_t y)
{
    return x < y ? y : x;
}
static inline int64_t smax64(int64_t x, int64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t umax8(uint8_t x, uint8_t y)
{
    return x < y ? y : x;
}
static inline uint16_t umax16(uint16_t x, uint16_t y)
{
    return x < y ? y : x;
}
static inline uint32_t umax32(uint32_t x, uint32_t y)
{
    return x < y ? y : x;
}
static inline uint64_t umax64(uint64_t x, uint64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t shl8(uint8_t x, uint8_t y)
{
    return x << y;
}
static inline uint16_t shl16(uint16_t x, uint16_t y)
{
    return x << y;
}
static inline uint32_t shl32(uint32_t x, uint32_t y)
{
    return x << y;
}
static inline uint64_t shl64(uint64_t x, uint64_t y)
{
    return x << y;
}
static inline uint8_t lshr8(uint8_t x, uint8_t y)
{
    return x >> y;
}
static inline uint16_t lshr16(uint16_t x, uint16_t y)
{
    return x >> y;
}
static inline uint32_t lshr32(uint32_t x, uint32_t y)
{
    return x >> y;
}
static inline uint64_t lshr64(uint64_t x, uint64_t y)
{
    return x >> y;
}
static inline int8_t ashr8(int8_t x, int8_t y)
{
    return x >> y;
}
static inline int16_t ashr16(int16_t x, int16_t y)
{
    return x >> y;
}
static inline int32_t ashr32(int32_t x, int32_t y)
{
    return x >> y;
}
static inline int64_t ashr64(int64_t x, int64_t y)
{
    return x >> y;
}
static inline uint8_t and8(uint8_t x, uint8_t y)
{
    return x & y;
}
static inline uint16_t and16(uint16_t x, uint16_t y)
{
    return x & y;
}
static inline uint32_t and32(uint32_t x, uint32_t y)
{
    return x & y;
}
static inline uint64_t and64(uint64_t x, uint64_t y)
{
    return x & y;
}
static inline uint8_t or8(uint8_t x, uint8_t y)
{
    return x | y;
}
static inline uint16_t or16(uint16_t x, uint16_t y)
{
    return x | y;
}
static inline uint32_t or32(uint32_t x, uint32_t y)
{
    return x | y;
}
static inline uint64_t or64(uint64_t x, uint64_t y)
{
    return x | y;
}
static inline uint8_t xor8(uint8_t x, uint8_t y)
{
    return x ^ y;
}
static inline uint16_t xor16(uint16_t x, uint16_t y)
{
    return x ^ y;
}
static inline uint32_t xor32(uint32_t x, uint32_t y)
{
    return x ^ y;
}
static inline uint64_t xor64(uint64_t x, uint64_t y)
{
    return x ^ y;
}
static inline bool ult8(uint8_t x, uint8_t y)
{
    return x < y;
}
static inline bool ult16(uint16_t x, uint16_t y)
{
    return x < y;
}
static inline bool ult32(uint32_t x, uint32_t y)
{
    return x < y;
}
static inline bool ult64(uint64_t x, uint64_t y)
{
    return x < y;
}
static inline bool ule8(uint8_t x, uint8_t y)
{
    return x <= y;
}
static inline bool ule16(uint16_t x, uint16_t y)
{
    return x <= y;
}
static inline bool ule32(uint32_t x, uint32_t y)
{
    return x <= y;
}
static inline bool ule64(uint64_t x, uint64_t y)
{
    return x <= y;
}
static inline bool slt8(int8_t x, int8_t y)
{
    return x < y;
}
static inline bool slt16(int16_t x, int16_t y)
{
    return x < y;
}
static inline bool slt32(int32_t x, int32_t y)
{
    return x < y;
}
static inline bool slt64(int64_t x, int64_t y)
{
    return x < y;
}
static inline bool sle8(int8_t x, int8_t y)
{
    return x <= y;
}
static inline bool sle16(int16_t x, int16_t y)
{
    return x <= y;
}
static inline bool sle32(int32_t x, int32_t y)
{
    return x <= y;
}
static inline bool sle64(int64_t x, int64_t y)
{
    return x <= y;
}
static inline int8_t pow8(int8_t x, int8_t y)
{
    int8_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int16_t pow16(int16_t x, int16_t y)
{
    int16_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int32_t pow32(int32_t x, int32_t y)
{
    int32_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int64_t pow64(int64_t x, int64_t y)
{
    int64_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline bool itob_i8_bool(int8_t x)
{
    return x;
}
static inline bool itob_i16_bool(int16_t x)
{
    return x;
}
static inline bool itob_i32_bool(int32_t x)
{
    return x;
}
static inline bool itob_i64_bool(int64_t x)
{
    return x;
}
static inline int8_t btoi_bool_i8(bool x)
{
    return x;
}
static inline int16_t btoi_bool_i16(bool x)
{
    return x;
}
static inline int32_t btoi_bool_i32(bool x)
{
    return x;
}
static inline int64_t btoi_bool_i64(bool x)
{
    return x;
}
#define sext_i8_i8(x) ((int8_t) (int8_t) x)
#define sext_i8_i16(x) ((int16_t) (int8_t) x)
#define sext_i8_i32(x) ((int32_t) (int8_t) x)
#define sext_i8_i64(x) ((int64_t) (int8_t) x)
#define sext_i16_i8(x) ((int8_t) (int16_t) x)
#define sext_i16_i16(x) ((int16_t) (int16_t) x)
#define sext_i16_i32(x) ((int32_t) (int16_t) x)
#define sext_i16_i64(x) ((int64_t) (int16_t) x)
#define sext_i32_i8(x) ((int8_t) (int32_t) x)
#define sext_i32_i16(x) ((int16_t) (int32_t) x)
#define sext_i32_i32(x) ((int32_t) (int32_t) x)
#define sext_i32_i64(x) ((int64_t) (int32_t) x)
#define sext_i64_i8(x) ((int8_t) (int64_t) x)
#define sext_i64_i16(x) ((int16_t) (int64_t) x)
#define sext_i64_i32(x) ((int32_t) (int64_t) x)
#define sext_i64_i64(x) ((int64_t) (int64_t) x)
#define zext_i8_i8(x) ((int8_t) (uint8_t) x)
#define zext_i8_i16(x) ((int16_t) (uint8_t) x)
#define zext_i8_i32(x) ((int32_t) (uint8_t) x)
#define zext_i8_i64(x) ((int64_t) (uint8_t) x)
#define zext_i16_i8(x) ((int8_t) (uint16_t) x)
#define zext_i16_i16(x) ((int16_t) (uint16_t) x)
#define zext_i16_i32(x) ((int32_t) (uint16_t) x)
#define zext_i16_i64(x) ((int64_t) (uint16_t) x)
#define zext_i32_i8(x) ((int8_t) (uint32_t) x)
#define zext_i32_i16(x) ((int16_t) (uint32_t) x)
#define zext_i32_i32(x) ((int32_t) (uint32_t) x)
#define zext_i32_i64(x) ((int64_t) (uint32_t) x)
#define zext_i64_i8(x) ((int8_t) (uint64_t) x)
#define zext_i64_i16(x) ((int16_t) (uint64_t) x)
#define zext_i64_i32(x) ((int32_t) (uint64_t) x)
#define zext_i64_i64(x) ((int64_t) (uint64_t) x)
static int8_t abs8(int8_t x)
{
    return abs(x);
}
static int16_t abs16(int16_t x)
{
    return abs(x);
}
static int32_t abs32(int32_t x)
{
    return abs(x);
}
#if defined(__OPENCL_VERSION__)
static int64_t abs64(int64_t x)
{
    return abs(x);
}
#else
static int64_t abs64(int64_t x)
{
    return llabs(x);
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x)
{
    return popcount(x);
}
static int32_t futrts_popc16(int16_t x)
{
    return popcount(x);
}
static int32_t futrts_popc32(int32_t x)
{
    return popcount(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return popcount(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_popc8(int8_t x)
{
    return __popc(zext_i8_i32(x));
}
static int32_t futrts_popc16(int16_t x)
{
    return __popc(zext_i16_i32(x));
}
static int32_t futrts_popc32(int32_t x)
{
    return __popc(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return __popcll(x);
}
#else
static int32_t futrts_popc8(int8_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc16(int16_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc32(int32_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc64(int64_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    return mul_hi(a, b);
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    return mul_hi(a, b);
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mul_hi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul_hi(a, b);
}
#elif defined(__CUDA_ARCH__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mulhi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul64hi(a, b);
}
#else
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    uint64_t aa = a;
    uint64_t bb = b;
    
    return aa * bb >> 32;
}
#ifdef __EMSCRIPTEN__
static uint64_t futrts_mul_hi64(uint64_t x, uint64_t y)
{
    uint64_t a = x >> 32, b = x & 0xffffffff;
    uint64_t c = y >> 32, d = y & 0xffffffff;
    uint64_t ac = a * c;
    uint64_t bc = b * c;
    uint64_t ad = a * d;
    uint64_t bd = b * d;
    uint64_t mid34 = (bd >> 32) + (bc & 0xffffffff) + (ad & 0xffffffff);
    uint64_t upper64 = ac + (bc >> 32) + (ad >> 32) + (mid34 >> 32);
    
    return upper64;
}
#else
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    __uint128_t aa = a;
    __uint128_t bb = b;
    
    return aa * bb >> 64;
}
#endif
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return mad_hi(a, b, c);
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return mad_hi(a, b, c);
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return mad_hi(a, b, c);
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return mad_hi(a, b, c);
}
#else
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return futrts_mul_hi8(a, b) + c;
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return futrts_mul_hi16(a, b) + c;
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return futrts_mul_hi32(a, b) + c;
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return futrts_mul_hi64(a, b) + c;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x)
{
    return clz(x);
}
static int32_t futrts_clzz16(int16_t x)
{
    return clz(x);
}
static int32_t futrts_clzz32(int32_t x)
{
    return clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return clz(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_clzz8(int8_t x)
{
    return __clz(zext_i8_i32(x)) - 24;
}
static int32_t futrts_clzz16(int16_t x)
{
    return __clz(zext_i16_i32(x)) - 16;
}
static int32_t futrts_clzz32(int32_t x)
{
    return __clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return __clzll(x);
}
#else
static int32_t futrts_clzz8(int8_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz16(int16_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz32(int32_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz64(int64_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x)
{
    int i = 0;
    
    for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int i = 0;
    
    for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int i = 0;
    
    for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int i = 0;
    
    for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_ctzz8(int8_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 8 : y - 1;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 16 : y - 1;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 32 : y - 1;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int y = __ffsll(x);
    
    return y == 0 ? 64 : y - 1;
}
#else
static int32_t futrts_ctzz8(int8_t x)
{
    return x == 0 ? 8 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz16(int16_t x)
{
    return x == 0 ? 16 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz32(int32_t x)
{
    return x == 0 ? 32 : __builtin_ctz(x);
}
static int32_t futrts_ctzz64(int64_t x)
{
    return x == 0 ? 64 : __builtin_ctzll(x);
}
#endif
static inline float fdiv32(float x, float y)
{
    return x / y;
}
static inline float fadd32(float x, float y)
{
    return x + y;
}
static inline float fsub32(float x, float y)
{
    return x - y;
}
static inline float fmul32(float x, float y)
{
    return x * y;
}
static inline bool cmplt32(float x, float y)
{
    return x < y;
}
static inline bool cmple32(float x, float y)
{
    return x <= y;
}
static inline float sitofp_i8_f32(int8_t x)
{
    return (float) x;
}
static inline float sitofp_i16_f32(int16_t x)
{
    return (float) x;
}
static inline float sitofp_i32_f32(int32_t x)
{
    return (float) x;
}
static inline float sitofp_i64_f32(int64_t x)
{
    return (float) x;
}
static inline float uitofp_i8_f32(uint8_t x)
{
    return (float) x;
}
static inline float uitofp_i16_f32(uint16_t x)
{
    return (float) x;
}
static inline float uitofp_i32_f32(uint32_t x)
{
    return (float) x;
}
static inline float uitofp_i64_f32(uint64_t x)
{
    return (float) x;
}
static inline int8_t fptosi_f32_i8(float x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f32_i16(float x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f32_i32(float x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f32_i64(float x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f32_i8(float x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f32_i16(float x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f32_i32(float x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f32_i64(float x)
{
    return (uint64_t) x;
}
static inline double fdiv64(double x, double y)
{
    return x / y;
}
static inline double fadd64(double x, double y)
{
    return x + y;
}
static inline double fsub64(double x, double y)
{
    return x - y;
}
static inline double fmul64(double x, double y)
{
    return x * y;
}
static inline bool cmplt64(double x, double y)
{
    return x < y;
}
static inline bool cmple64(double x, double y)
{
    return x <= y;
}
static inline double sitofp_i8_f64(int8_t x)
{
    return (double) x;
}
static inline double sitofp_i16_f64(int16_t x)
{
    return (double) x;
}
static inline double sitofp_i32_f64(int32_t x)
{
    return (double) x;
}
static inline double sitofp_i64_f64(int64_t x)
{
    return (double) x;
}
static inline double uitofp_i8_f64(uint8_t x)
{
    return (double) x;
}
static inline double uitofp_i16_f64(uint16_t x)
{
    return (double) x;
}
static inline double uitofp_i32_f64(uint32_t x)
{
    return (double) x;
}
static inline double uitofp_i64_f64(uint64_t x)
{
    return (double) x;
}
static inline int8_t fptosi_f64_i8(double x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f64_i16(double x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f64_i32(double x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f64_i64(double x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f64_i8(double x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f64_i16(double x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f64_i32(double x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f64_i64(double x)
{
    return (uint64_t) x;
}
static inline float fpconv_f32_f32(float x)
{
    return (float) x;
}
static inline double fpconv_f32_f64(float x)
{
    return (double) x;
}
static inline float fpconv_f64_f32(double x)
{
    return (float) x;
}
static inline double fpconv_f64_f64(double x)
{
    return (double) x;
}
#ifdef __OPENCL_VERSION__
static inline float fabs32(float x)
{
    return fabs(x);
}
static inline float fmax32(float x, float y)
{
    return fmax(x, y);
}
static inline float fmin32(float x, float y)
{
    return fmin(x, y);
}
static inline float fpow32(float x, float y)
{
    return pow(x, y);
}
#else
static inline float fabs32(float x)
{
    return fabsf(x);
}
static inline float fmax32(float x, float y)
{
    return fmaxf(x, y);
}
static inline float fmin32(float x, float y)
{
    return fminf(x, y);
}
static inline float fpow32(float x, float y)
{
    return powf(x, y);
}
#endif
static inline bool futrts_isnan32(float x)
{
    return isnan(x);
}
static inline bool futrts_isinf32(float x)
{
    return isinf(x);
}
#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x)
{
    return log(x);
}
static inline float futrts_log2_32(float x)
{
    return log2(x);
}
static inline float futrts_log10_32(float x)
{
    return log10(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrt(x);
}
static inline float futrts_exp32(float x)
{
    return exp(x);
}
static inline float futrts_cos32(float x)
{
    return cos(x);
}
static inline float futrts_sin32(float x)
{
    return sin(x);
}
static inline float futrts_tan32(float x)
{
    return tan(x);
}
static inline float futrts_acos32(float x)
{
    return acos(x);
}
static inline float futrts_asin32(float x)
{
    return asin(x);
}
static inline float futrts_atan32(float x)
{
    return atan(x);
}
static inline float futrts_cosh32(float x)
{
    return cosh(x);
}
static inline float futrts_sinh32(float x)
{
    return sinh(x);
}
static inline float futrts_tanh32(float x)
{
    return tanh(x);
}
static inline float futrts_acosh32(float x)
{
    return acosh(x);
}
static inline float futrts_asinh32(float x)
{
    return asinh(x);
}
static inline float futrts_atanh32(float x)
{
    return atanh(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypot(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgamma(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgamma(x);
}
static inline float fmod32(float x, float y)
{
    return fmod(x, y);
}
static inline float futrts_round32(float x)
{
    return rint(x);
}
static inline float futrts_floor32(float x)
{
    return floor(x);
}
static inline float futrts_ceil32(float x)
{
    return ceil(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return mix(v0, v1, t);
}
static inline float futrts_mad32(float a, float b, float c)
{
    return mad(a, b, c);
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fma(a, b, c);
}
#else
static inline float futrts_log32(float x)
{
    return logf(x);
}
static inline float futrts_log2_32(float x)
{
    return log2f(x);
}
static inline float futrts_log10_32(float x)
{
    return log10f(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrtf(x);
}
static inline float futrts_exp32(float x)
{
    return expf(x);
}
static inline float futrts_cos32(float x)
{
    return cosf(x);
}
static inline float futrts_sin32(float x)
{
    return sinf(x);
}
static inline float futrts_tan32(float x)
{
    return tanf(x);
}
static inline float futrts_acos32(float x)
{
    return acosf(x);
}
static inline float futrts_asin32(float x)
{
    return asinf(x);
}
static inline float futrts_atan32(float x)
{
    return atanf(x);
}
static inline float futrts_cosh32(float x)
{
    return coshf(x);
}
static inline float futrts_sinh32(float x)
{
    return sinhf(x);
}
static inline float futrts_tanh32(float x)
{
    return tanhf(x);
}
static inline float futrts_acosh32(float x)
{
    return acoshf(x);
}
static inline float futrts_asinh32(float x)
{
    return asinhf(x);
}
static inline float futrts_atanh32(float x)
{
    return atanhf(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2f(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypotf(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgammaf(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgammaf(x);
}
static inline float fmod32(float x, float y)
{
    return fmodf(x, y);
}
static inline float futrts_round32(float x)
{
    return rintf(x);
}
static inline float futrts_floor32(float x)
{
    return floorf(x);
}
static inline float futrts_ceil32(float x)
{
    return ceilf(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return v0 + (v1 - v0) * t;
}
static inline float futrts_mad32(float a, float b, float c)
{
    return a * b + c;
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fmaf(a, b, c);
}
#endif
static inline int32_t futrts_to_bits32(float x)
{
    union {
        float f;
        int32_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float futrts_from_bits32(int32_t x)
{
    union {
        int32_t f;
        float t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float fsignum32(float x)
{
    return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}
static inline double fabs64(double x)
{
    return fabs(x);
}
static inline float fmax64(double x, double y)
{
    return fmax(x, y);
}
static inline float fmin64(double x, double y)
{
    return fmin(x, y);
}
static inline double fpow64(double x, double y)
{
    return pow(x, y);
}
static inline double futrts_log64(double x)
{
    return log(x);
}
static inline double futrts_log2_64(double x)
{
    return log2(x);
}
static inline double futrts_log10_64(double x)
{
    return log10(x);
}
static inline double futrts_sqrt64(double x)
{
    return sqrt(x);
}
static inline double futrts_exp64(double x)
{
    return exp(x);
}
static inline double futrts_cos64(double x)
{
    return cos(x);
}
static inline double futrts_sin64(double x)
{
    return sin(x);
}
static inline double futrts_tan64(double x)
{
    return tan(x);
}
static inline double futrts_acos64(double x)
{
    return acos(x);
}
static inline double futrts_asin64(double x)
{
    return asin(x);
}
static inline double futrts_atan64(double x)
{
    return atan(x);
}
static inline double futrts_cosh64(double x)
{
    return cosh(x);
}
static inline double futrts_sinh64(double x)
{
    return sinh(x);
}
static inline double futrts_tanh64(double x)
{
    return tanh(x);
}
static inline double futrts_acosh64(double x)
{
    return acosh(x);
}
static inline double futrts_asinh64(double x)
{
    return asinh(x);
}
static inline double futrts_atanh64(double x)
{
    return atanh(x);
}
static inline double futrts_atan2_64(double x, double y)
{
    return atan2(x, y);
}
static inline double futrts_hypot64(double x, double y)
{
    return hypot(x, y);
}
static inline double futrts_gamma64(double x)
{
    return tgamma(x);
}
static inline double futrts_lgamma64(double x)
{
    return lgamma(x);
}
static inline double futrts_fma64(double a, double b, double c)
{
    return fma(a, b, c);
}
static inline double futrts_round64(double x)
{
    return rint(x);
}
static inline double futrts_ceil64(double x)
{
    return ceil(x);
}
static inline double futrts_floor64(double x)
{
    return floor(x);
}
static inline bool futrts_isnan64(double x)
{
    return isnan(x);
}
static inline bool futrts_isinf64(double x)
{
    return isinf(x);
}
static inline int64_t futrts_to_bits64(double x)
{
    union {
        double f;
        int64_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double futrts_from_bits64(int64_t x)
{
    union {
        int64_t f;
        double t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double fmod64(double x, double y)
{
    return fmod(x, y);
}
static inline double fsignum64(double x)
{
    return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}
#ifdef __OPENCL_VERSION__
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return mix(v0, v1, t);
}
static inline double futrts_mad64(double a, double b, double c)
{
    return mad(a, b, c);
}
#else
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return v0 + (v1 - v0) * t;
}
static inline double futrts_mad64(double a, double b, double c)
{
    return a * b + c;
}
#endif
static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    char *mem;
    int64_t size;
    const char *desc;
};
// start of scheduler.h

// First, the API that the generated code will access.  In principle,
// we could then compile the scheduler separately and link an object
// file with the generated code.  In practice, we will embed all of
// this in the generated code.

// Scheduler handle.
struct scheduler;

// Initialise a scheduler (and start worker threads).
static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa);

// Shut down a scheduler (and destroy worker threads).
static int scheduler_destroy(struct scheduler *scheduler);

// Figure out the smallest amount of work that amortises task
// creation.
static int determine_kappa(double *kappa);

// How a segop should be scheduled.
enum scheduling {
  DYNAMIC,
  STATIC
};

// How a given task should be executed.  Filled out by the scheduler
// and passed to the segop function
struct scheduler_info {
  int64_t iter_pr_subtask;
  int64_t remainder;
  int nsubtasks;
  enum scheduling sched;
  int wake_up_threads;

  int64_t *task_time;
  int64_t *task_iter;
};

// A segop function.  This is what you hand the scheduler for
// execution.
typedef int (*segop_fn)(void* args,
                        int64_t iterations,
                        int tid,
                        struct scheduler_info info);

// A task for the scheduler to execute.
struct scheduler_segop {
  void *args;
  segop_fn top_level_fn;
  segop_fn nested_fn;
  int64_t iterations;
  enum scheduling sched;

  // Pointers to timer and iter associated with the task
  int64_t *task_time;
  int64_t *task_iter;

  // For debugging
  const char* name;
};

static inline int scheduler_prepare_task(struct scheduler *scheduler,
                                         struct scheduler_segop *task);

typedef int (*parloop_fn)(void* args,
                          int64_t start,
                          int64_t end,
                          int subtask_id,
                          int tid);

// A parallel parloop task.
struct scheduler_parloop {
  void* args;
  parloop_fn fn;
  int64_t iterations;
  struct scheduler_info info;

  // For debugging
  const char* name;
};

static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task);

// Then the API implementation.

#include <signal.h>

#if defined(_WIN32)
#include <windows.h>
#elif defined(__APPLE__)
#include <sys/sysctl.h>
// For getting cpu usage of threads
#include <mach/mach.h>
#include <sys/resource.h>
#elif defined(__linux__)
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#elif defined(__EMSCRIPTEN__)
#include <emscripten/threading.h>
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#endif

/* Multicore Utility functions */

/* A wrapper for getting rusage on Linux and MacOS */
/* TODO maybe figure out this for windows */
static inline int getrusage_thread(struct rusage *rusage)
{
  int err = -1;
#if  defined(__APPLE__)
    thread_basic_info_data_t info = { 0 };
    mach_msg_type_number_t info_count = THREAD_BASIC_INFO_COUNT;
    kern_return_t kern_err;

    kern_err = thread_info(mach_thread_self(),
                           THREAD_BASIC_INFO,
                           (thread_info_t)&info,
                           &info_count);
    if (kern_err == KERN_SUCCESS) {
        memset(rusage, 0, sizeof(struct rusage));
        rusage->ru_utime.tv_sec = info.user_time.seconds;
        rusage->ru_utime.tv_usec = info.user_time.microseconds;
        rusage->ru_stime.tv_sec = info.system_time.seconds;
        rusage->ru_stime.tv_usec = info.system_time.microseconds;
        err = 0;
    } else {
        errno = EINVAL;
    }
#elif defined(__linux__) || __EMSCRIPTEN__
    err = getrusage(RUSAGE_THREAD, rusage);
#endif
    return err;
}

/* returns the number of logical cores */
static int num_processors()
{
#if  defined(_WIN32)
/* https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/ns-sysinfoapi-system_info */
    SYSTEM_INFO sysinfo;
    GetSystemInfo(&sysinfo);
    int ncores = sysinfo.dwNumberOfProcessors;
    fprintf(stderr, "Found %d cores on your Windows machine\n Is that correct?\n", ncores);
    return ncores;
#elif defined(__APPLE__)
    int ncores;
    size_t ncores_size = sizeof(ncores);
    CHECK_ERRNO(sysctlbyname("hw.logicalcpu", &ncores, &ncores_size, NULL, 0),
                "sysctlbyname (hw.logicalcpu)");
    return ncores;
#elif defined(__linux__)
  return get_nprocs();
#elif __EMSCRIPTEN__
  return emscripten_num_logical_cores();
#else
  fprintf(stderr, "operating system not recognised\n");
  return -1;
#endif
}

static unsigned int g_seed;

// Used to seed the generator.
static inline void fast_srand(unsigned int seed) {
    g_seed = seed;
}

// Compute a pseudorandom integer.
// Output value in range [0, 32767]
static inline unsigned int fast_rand(void) {
    g_seed = (214013*g_seed+2531011);
    return (g_seed>>16)&0x7FFF;
}

struct subtask_queue {
  int capacity;             // Size of the buffer.
  int first;                // Index of the start of the ring buffer.
  int num_used;             // Number of used elements in the buffer.
  struct subtask **buffer;

  pthread_mutex_t mutex;    // Mutex used for synchronisation.
  pthread_cond_t cond;      // Condition variable used for synchronisation.
  int dead;

#if defined(MCPROFILE)
  /* Profiling fields */
  uint64_t time_enqueue;
  uint64_t time_dequeue;
  uint64_t n_dequeues;
  uint64_t n_enqueues;
#endif
};

/* A subtask that can be executed by a worker */
struct subtask {
  /* The parloop function */
  parloop_fn fn;
  /* Execution parameters */
  void* args;
  int64_t start, end;
  int id;

  /* Dynamic scheduling parameters */
  int chunkable;
  int64_t chunk_size;

  /* Shared variables across subtasks */
  volatile int *counter; // Counter for ongoing subtasks
  // Shared task timers and iterators
  int64_t *task_time;
  int64_t *task_iter;

  /* For debugging */
  const char *name;
};


struct worker {
  pthread_t thread;
  struct scheduler *scheduler;  /* Reference to the scheduler struct the worker belongs to*/
  struct subtask_queue q;
  int dead;
  int tid;                      /* Just a thread id */

  /* "thread local" time fields used for online algorithm */
  uint64_t timer;
  uint64_t total;
  int nested; /* How nested the current computation is */

  // Profiling fields
  int output_usage;            /* Whether to dump thread usage */
  uint64_t time_spent_working; /* Time spent in parloop functions */
};

static inline void output_worker_usage(struct worker *worker)
{
  struct rusage usage;
  CHECK_ERRNO(getrusage_thread(&usage), "getrusage_thread");
  struct timeval user_cpu_time = usage.ru_utime;
  struct timeval sys_cpu_time = usage.ru_stime;
  fprintf(stderr, "tid: %2d - work time %10llu us - user time: %10llu us - sys: %10llu us\n",
          worker->tid,
          (long long unsigned)worker->time_spent_working / 1000,
          (long long unsigned)(user_cpu_time.tv_sec * 1000000 + user_cpu_time.tv_usec),
          (long long unsigned)(sys_cpu_time.tv_sec * 1000000 + sys_cpu_time.tv_usec));
}

/* Doubles the size of the queue */
static inline int subtask_queue_grow_queue(struct subtask_queue *subtask_queue) {

  int new_capacity = 2 * subtask_queue->capacity;
#ifdef MCDEBUG
  fprintf(stderr, "Growing queue to %d\n", subtask_queue->capacity * 2);
#endif

  struct subtask **new_buffer = calloc(new_capacity, sizeof(struct subtask*));
  for (int i = 0; i < subtask_queue->num_used; i++) {
    new_buffer[i] = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
  }

  free(subtask_queue->buffer);
  subtask_queue->buffer = new_buffer;
  subtask_queue->capacity = new_capacity;
  subtask_queue->first = 0;

  return 0;
}

// Initialise a job queue with the given capacity.  The queue starts out
// empty.  Returns non-zero on error.
static inline int subtask_queue_init(struct subtask_queue *subtask_queue, int capacity)
{
  assert(subtask_queue != NULL);
  memset(subtask_queue, 0, sizeof(struct subtask_queue));

  subtask_queue->capacity = capacity;
  subtask_queue->buffer = calloc(capacity, sizeof(struct subtask*));
  if (subtask_queue->buffer == NULL) {
    return -1;
  }

  CHECK_ERRNO(pthread_mutex_init(&subtask_queue->mutex, NULL), "pthread_mutex_init");
  CHECK_ERRNO(pthread_cond_init(&subtask_queue->cond, NULL), "pthread_cond_init");

  return 0;
}

// Destroy the job queue.  Blocks until the queue is empty before it
// is destroyed.
static inline int subtask_queue_destroy(struct subtask_queue *subtask_queue)
{
  assert(subtask_queue != NULL);

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  while (subtask_queue->num_used != 0) {
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  // Queue is now empty.  Let's kill it!
  subtask_queue->dead = 1;
  free(subtask_queue->buffer);
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline void dump_queue(struct worker *worker)
{
  struct subtask_queue *subtask_queue = &worker->q;
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  for (int i = 0; i < subtask_queue->num_used; i++) {
    struct subtask * subtask = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
    printf("queue tid %d with %d task %s\n", worker->tid, i, subtask->name);
  }
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
}

// Push an element onto the end of the job queue.  Blocks if the
// subtask_queue is full (its size is equal to its capacity).  Returns
// non-zero on error.  It is an error to push a job onto a queue that
// has been destroyed.
static inline int subtask_queue_enqueue(struct worker *worker, struct subtask *subtask )
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  // Wait until there is room in the subtask_queue.
  while (subtask_queue->num_used == subtask_queue->capacity && !subtask_queue->dead) {
    if (subtask_queue->num_used == subtask_queue->capacity) {
      CHECK_ERR(subtask_queue_grow_queue(subtask_queue), "subtask_queue_grow_queue");
      continue;
    }
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // If we made it past the loop, there is room in the subtask_queue.
  subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used) % subtask_queue->capacity] = subtask;
  subtask_queue->num_used++;

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_enqueue += (end - start);
  subtask_queue->n_enqueues++;
#endif
  // Broadcast a reader (if any) that there is now an element.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


/* Like subtask_queue_dequeue, but with two differences:
   1) the subtask is stolen from the __front__ of the queue
   2) returns immediately if there is no subtasks queued,
      as we dont' want to block on another workers queue and
*/
static inline int subtask_queue_steal(struct worker *worker,
                                      struct subtask **subtask)
{
  struct subtask_queue *subtask_queue = &worker->q;
  assert(subtask_queue != NULL);

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  if (subtask_queue->num_used == 0) {
    CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // Tasks gets stolen from the "front"
  struct subtask *cur_back = subtask_queue->buffer[subtask_queue->first];
  struct subtask *new_subtask = NULL;
  int remaining_iter = cur_back->end - cur_back->start;
  // If subtask is chunkable, we steal half of the iterations
  if (cur_back->chunkable && remaining_iter > 1) {
      int64_t half = remaining_iter / 2;
      new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *cur_back;
      new_subtask->start = cur_back->end - half;
      cur_back->end = new_subtask->start;
      __atomic_fetch_add(cur_back->counter, 1, __ATOMIC_RELAXED);
  } else {
    new_subtask = cur_back;
    subtask_queue->num_used--;
    subtask_queue->first = (subtask_queue->first + 1) % subtask_queue->capacity;
  }
  *subtask = new_subtask;

  if (*subtask == NULL) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return 1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


// Pop an element from the back of the job queue.
// Optional argument can be provided to block or not
static inline int subtask_queue_dequeue(struct worker *worker,
                                        struct subtask **subtask, int blocking)
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  if (subtask_queue->num_used == 0 && !blocking) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }
  // Try to steal some work while the subtask_queue is empty
  while (subtask_queue->num_used == 0 && !subtask_queue->dead) {
    pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex);
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // dequeue pops from the back
  *subtask = subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used - 1) % subtask_queue->capacity];
  subtask_queue->num_used--;

  if (*subtask == NULL) {
    assert(!"got NULL ptr");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return -1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline int subtask_queue_is_empty(struct subtask_queue *subtask_queue)
{
  return subtask_queue->num_used == 0;
}

/* Scheduler definitions */

struct scheduler {
  struct worker *workers;
  int num_threads;

  // If there is work to steal => active_work > 0
  volatile int active_work;

  // Only one error can be returned at the time now.  Maybe we can
  // provide a stack like structure for pushing errors onto if we wish
  // to backpropagte multiple errors
  volatile int error;

  // kappa time unit in nanoseconds
  double kappa;
};


// Thread local variable worker struct
// Note that, accesses to tls variables are expensive
// Minimize direct references to this variable
__thread struct worker* worker_local = NULL;

static int64_t total_now(int64_t total, int64_t time) {
  return total + (get_wall_time_ns() - time);
}

static int random_other_worker(struct scheduler *scheduler, int my_id) {
  int my_num_workers = scheduler->num_threads;
  assert(my_num_workers != 1);
  int i = fast_rand() % (my_num_workers - 1);
  if (i >= my_id) {
    i++;
  }
#ifdef MCDEBUG
  assert(i >= 0);
  assert(i < my_num_workers);
  assert(i != my_id);
#endif

  return i;
}


static inline int64_t compute_chunk_size(double kappa, struct subtask* subtask)
{
  double C = (double)*subtask->task_time / (double)*subtask->task_iter;
  if (C == 0.0F) C += DBL_EPSILON;
  return smax64((int64_t)(kappa / C), 1);
}

/* Takes a chunk from subtask and enqueues the remaining iterations onto the worker's queue */
/* A no-op if the subtask is not chunkable */
static inline struct subtask* chunk_subtask(struct worker* worker, struct subtask *subtask)
{
  if (subtask->chunkable) {
    // Do we have information from previous runs avaliable
    if (*subtask->task_iter > 0) {
      subtask->chunk_size = compute_chunk_size(worker->scheduler->kappa, subtask);
      assert(subtask->chunk_size > 0);
    }
    int64_t remaining_iter = subtask->end - subtask->start;
    assert(remaining_iter > 0);
    if (remaining_iter > subtask->chunk_size) {
      struct subtask *new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *subtask;
      // increment the subtask join counter to account for new subtask
      __atomic_fetch_add(subtask->counter, 1, __ATOMIC_RELAXED);
      // Update range parameters
      subtask->end = subtask->start + subtask->chunk_size;
      new_subtask->start = subtask->end;
      subtask_queue_enqueue(worker, new_subtask);
    }
  }
  return subtask;
}

static inline int run_subtask(struct worker* worker, struct subtask* subtask)
{
  assert(subtask != NULL);
  assert(worker != NULL);

  subtask = chunk_subtask(worker, subtask);
  worker->total = 0;
  worker->timer = get_wall_time_ns();
#if defined(MCPROFILE)
  int64_t start = worker->timer;
#endif
  worker->nested++;
  int err = subtask->fn(subtask->args, subtask->start, subtask->end,
                        subtask->chunkable ? worker->tid : subtask->id,
                        worker->tid);
  worker->nested--;
  // Some error occured during some other subtask
  // so we just clean-up and return
  if (worker->scheduler->error != 0) {
    // Even a failed task counts as finished.
    __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
    free(subtask);
    return 0;
  }
  if (err != 0) {
    __atomic_store_n(&worker->scheduler->error, err, __ATOMIC_RELAXED);
  }
  // Total sequential time spent
  int64_t time_elapsed = total_now(worker->total, worker->timer);
#if defined(MCPROFILE)
  worker->time_spent_working += get_wall_time_ns() - start;
#endif
  int64_t iter = subtask->end - subtask->start;
  // report measurements
  // These updates should really be done using a single atomic CAS operation
  __atomic_fetch_add(subtask->task_time, time_elapsed, __ATOMIC_RELAXED);
  __atomic_fetch_add(subtask->task_iter, iter, __ATOMIC_RELAXED);
  // We need a fence here, since if the counter is decremented before either
  // of the two above are updated bad things can happen, e.g. if they are stack-allocated
  __atomic_thread_fence(__ATOMIC_SEQ_CST);
  __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
  free(subtask);
  return 0;
}


static inline int is_small(struct scheduler_segop *task, struct scheduler *scheduler, int *nsubtasks)
{
  int64_t time = *task->task_time;
  int64_t iter = *task->task_iter;

  if (task->sched == DYNAMIC || iter == 0) {
    *nsubtasks = scheduler->num_threads;
    return 0;
  }

  // Estimate the constant C
  double C = (double)time / (double)iter;
  double cur_task_iter = (double) task->iterations;

  // Returns true if the task is small i.e.
  // if the number of iterations times C is smaller
  // than the overhead of subtask creation
  if (C == 0.0F || C * cur_task_iter < scheduler->kappa) {
    *nsubtasks = 1;
    return 1;
  }

  // Else compute how many subtasks this tasks should create
  int64_t min_iter_pr_subtask = smax64(scheduler->kappa / C, 1);
  *nsubtasks = smin64(smax64(task->iterations / min_iter_pr_subtask, 1), scheduler->num_threads);

  return 0;
}

// TODO make this prettier
static inline struct subtask* create_subtask(parloop_fn fn,
                                             void* args,
                                             const char* name,
                                             volatile int* counter,
                                             int64_t *timer,
                                             int64_t *iter,
                                             int64_t start, int64_t end,
                                             int chunkable,
                                             int64_t chunk_size,
                                             int id)
{
  struct subtask* subtask = malloc(sizeof(struct subtask));
  if (subtask == NULL) {
    assert(!"malloc failed in create_subtask");
    return NULL;
  }
  subtask->fn         = fn;
  subtask->args       = args;

  subtask->counter    = counter;
  subtask->task_time  = timer;
  subtask->task_iter  = iter;

  subtask->start      = start;
  subtask->end        = end;
  subtask->id         = id;
  subtask->chunkable  = chunkable;
  subtask->chunk_size = chunk_size;

  subtask->name       = name;
  return subtask;
}

static int dummy_counter = 0;
static int64_t dummy_timer = 0;
static int64_t dummy_iter = 0;

static int dummy_fn(void *args, int64_t start, int64_t end, int subtask_id, int tid) {
  (void)args;
  (void)start;
  (void)end;
  (void)subtask_id;
  (void)tid;
  return 0;
}

// Wake up threads, who are blocking by pushing a dummy task
// onto their queue
static inline void wake_up_threads(struct scheduler *scheduler, int start_tid, int end_tid) {

#if defined(MCDEBUG)
  assert(start_tid >= 1);
  assert(end_tid <= scheduler->num_threads);
#endif
  for (int i = start_tid; i < end_tid; i++) {
    struct subtask *subtask = create_subtask(dummy_fn, NULL, "dummy_fn",
                                            &dummy_counter,
                                            &dummy_timer, &dummy_iter,
                                            0, 0,
                                            0, 0,
                                            0);
    CHECK_ERR(subtask_queue_enqueue(&scheduler->workers[i], subtask), "subtask_queue_enqueue");
  }
}

static inline int is_finished(struct worker *worker) {
  return worker->dead && subtask_queue_is_empty(&worker->q);
}

// Try to steal from a random queue
static inline int steal_from_random_worker(struct worker* worker)
{
  int my_id = worker->tid;
  struct scheduler* scheduler = worker->scheduler;
  int k = random_other_worker(scheduler, my_id);
  struct worker *worker_k = &scheduler->workers[k];
  struct subtask* subtask =  NULL;
  int retval = subtask_queue_steal(worker_k, &subtask);
  if (retval == 0) {
    subtask_queue_enqueue(worker, subtask);
    return 1;
  }
  return 0;
}


static inline void *scheduler_worker(void* args)
{
  struct worker *worker = (struct worker*) args;
  struct scheduler *scheduler = worker->scheduler;
  worker_local = worker;
  struct subtask *subtask = NULL;

  while(!is_finished(worker)) {
    if (!subtask_queue_is_empty(&worker->q)) {
      int retval = subtask_queue_dequeue(worker, &subtask, 0);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      } // else someone stole our work

    } else if (scheduler->active_work) { /* steal */
      while (!is_finished(worker) && scheduler->active_work) {
        if (steal_from_random_worker(worker)) {
          break;
        }
      }
    } else { /* go back to sleep and wait for work */
      int retval = subtask_queue_dequeue(worker, &subtask, 1);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    }
  }

  assert(subtask_queue_is_empty(&worker->q));
#if defined(MCPROFILE)
  if (worker->output_usage)
    output_worker_usage(worker);
#endif
  return NULL;
}


static inline int scheduler_execute_parloop(struct scheduler *scheduler,
                                            struct scheduler_parloop *task,
                                            int64_t *timer)
{

  struct worker *worker = worker_local;

  struct scheduler_info info = task->info;
  int64_t iter_pr_subtask = info.iter_pr_subtask;
  int64_t remainder = info.remainder;
  int nsubtasks = info.nsubtasks;
  volatile int join_counter = nsubtasks;

  // Shared timer used to sum up all
  // sequential work from each subtask
  int64_t task_timer = 0;
  int64_t task_iter = 0;

  enum scheduling sched = info.sched;
  /* If each subtasks should be processed in chunks */
  int chunkable = sched == STATIC ? 0 : 1;
  int64_t chunk_size = 1; // The initial chunk size when no info is avaliable


  if (info.wake_up_threads || sched == DYNAMIC)
    __atomic_add_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);

  int64_t start = 0;
  int64_t end = iter_pr_subtask + (int64_t)(remainder != 0);
  for (int subtask_id = 0; subtask_id < nsubtasks; subtask_id++) {
    struct subtask *subtask = create_subtask(task->fn, task->args, task->name,
                                              &join_counter,
                                              &task_timer, &task_iter,
                                              start, end,
                                              chunkable, chunk_size,
                                              subtask_id);
    assert(subtask != NULL);
    // In most cases we will never have more subtasks than workers,
    // but there can be exceptions (e.g. the kappa tuning function).
    struct worker *subtask_worker =
      worker->nested
      ? &scheduler->workers[worker->tid]
      : &scheduler->workers[subtask_id % scheduler->num_threads];
    CHECK_ERR(subtask_queue_enqueue(subtask_worker, subtask),
              "subtask_queue_enqueue");
    // Update range params
    start = end;
    end += iter_pr_subtask + ((subtask_id + 1) < remainder);
  }

  if (info.wake_up_threads) {
    wake_up_threads(scheduler, nsubtasks, scheduler->num_threads);
  }

  // Join (wait for subtasks to finish)
  while(join_counter != 0) {
    if (!subtask_queue_is_empty(&worker->q)) {
      struct subtask *subtask = NULL;
      int err = subtask_queue_dequeue(worker, &subtask, 0);
      if (err == 0 ) {
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    } else {
      if (steal_from_random_worker(worker)) {
        struct subtask *subtask = NULL;
        int err = subtask_queue_dequeue(worker, &subtask, 0);
        if (err == 0) {
          CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
        }
      }
    }
  }


  if (info.wake_up_threads || sched == DYNAMIC) {
    __atomic_sub_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);
  }

  // Write back timing results of all sequential work
  (*timer) += task_timer;
  return scheduler->error;
}


static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task)
{

  struct worker *worker = worker_local;

  int err = 0;

  // How much sequential work was performed by the task
  int64_t task_timer = 0;

  /* Execute task sequential or parallel based on decision made earlier */
  if (task->info.nsubtasks == 1) {
    int64_t start = get_wall_time_ns();
    err = task->fn(task->args, 0, task->iterations, 0, worker->tid);
    int64_t end = get_wall_time_ns();
    task_timer = end - start;
    worker->time_spent_working += task_timer;
    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);
  } else {
    // Add "before" time if we already are inside a task
    int64_t time_before = 0;
    if (worker->nested > 0) {
      time_before = total_now(worker->total, worker->timer);
    }

    err = scheduler_execute_parloop(scheduler, task, &task_timer);

    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);

    // Update timers to account for new timings
    worker->total = time_before + task_timer;
    worker->timer = get_wall_time_ns();
  }


  return err;
}

/* Decide on how schedule the incoming task i.e. how many subtasks and
   to run sequential or (potentially nested) parallel code body */
static inline int scheduler_prepare_task(struct scheduler* scheduler,
                                         struct scheduler_segop *task)
{
  assert(task != NULL);

  struct worker *worker = worker_local;
  struct scheduler_info info;
  info.task_time = task->task_time;
  info.task_iter = task->task_iter;

  int nsubtasks;
  // Decide if task should be scheduled sequentially
  if (is_small(task, scheduler, &nsubtasks)) {
    info.iter_pr_subtask = task->iterations;
    info.remainder = 0;
    info.nsubtasks = nsubtasks;
    return task->top_level_fn(task->args, task->iterations, worker->tid, info);
  } else {
    info.iter_pr_subtask = task->iterations / nsubtasks;
    info.remainder = task->iterations % nsubtasks;
    info.sched = task->sched;
    switch (task->sched) {
    case STATIC:
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : ((task->iterations - info.remainder) / info.iter_pr_subtask);
      break;
    case DYNAMIC:
      // As any thread can take any subtasks, we are being safe with using
      // an upper bound on the number of tasks such that the task allocate enough memory
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : nsubtasks;
      break;
    default:
      assert(!"Got unknown scheduling");
    }
  }

  info.wake_up_threads = 0;
  // We only use the nested parallel segop function if we can't exchaust all cores
  // using the outer most level
  if (task->nested_fn != NULL && info.nsubtasks < scheduler->num_threads && info.nsubtasks == task->iterations) {
    if (worker->nested == 0)
      info.wake_up_threads = 1;
    return task->nested_fn(task->args, task->iterations, worker->tid, info);
  }

  return task->top_level_fn(task->args, task->iterations, worker->tid, info);
}

// Now some code for finding the proper value of kappa on a given
// machine (the smallest amount of work that amortises the cost of
// task creation).

struct tuning_struct {
  int32_t *free_tuning_res;
  int32_t *array;
};

// Reduction function over an integer array
static int tuning_loop(void *args, int64_t start, int64_t end,
                                     int flat_tid, int tid) {
  (void)flat_tid;
  (void)tid;

  int err = 0;
  struct tuning_struct *tuning_struct = (struct tuning_struct *) args;
  int32_t *array = tuning_struct->array;
  int32_t *tuning_res = tuning_struct->free_tuning_res;

  int32_t sum = 0;
  for (int i = start; i < end; i++) {
    int32_t y = array[i];
    sum = add32(sum, y);
  }
  *tuning_res = sum;
  return err;
}

// The main entry point for the tuning process.  Sets the provided
// variable ``kappa``.
static int determine_kappa(double *kappa) {
  int err = 0;

  int64_t iterations = 100000000;
  int64_t tuning_time = 0;
  int64_t tuning_iter = 0;

  int32_t *array = malloc(sizeof(int32_t) * iterations);
  for (int64_t i = 0; i < iterations; i++) {
    array[i] = fast_rand();
  }

  int64_t start_tuning = get_wall_time_ns();
  /* **************************** */
  /* Run sequential reduce first' */
  /* **************************** */
  int64_t tuning_sequentiual_start = get_wall_time_ns();
  struct tuning_struct tuning_struct;
  int32_t tuning_res;
  tuning_struct.free_tuning_res = &tuning_res;
  tuning_struct.array = array;

  err = tuning_loop(&tuning_struct, 0, iterations, 0, 0);
  int64_t tuning_sequentiual_end = get_wall_time_ns();
  int64_t sequential_elapsed = tuning_sequentiual_end - tuning_sequentiual_start;

  double C = (double)sequential_elapsed / (double)iterations;
  fprintf(stderr, " Time for sequential run is %lld - Found C %f\n", (long long)sequential_elapsed, C);

  /* ********************** */
  /* Now run tuning process */
  /* ********************** */
  // Setup a scheduler with a single worker
  struct scheduler scheduler;
  scheduler.num_threads = 1;
  scheduler.workers = malloc(sizeof(struct worker));
  worker_local = &scheduler.workers[0];
  worker_local->tid = 0;
  CHECK_ERR(subtask_queue_init(&scheduler.workers[0].q, 1024),
            "failed to init queue for worker %d\n", 0);

  // Start tuning for kappa
  double kappa_tune = 1000; // Initial kappa is 1 us
  double ratio;
  int64_t time_elapsed;
  while(1) {
    int64_t min_iter_pr_subtask = (int64_t) (kappa_tune / C) == 0 ? 1 : (kappa_tune / C);
    int nsubtasks = iterations / min_iter_pr_subtask;
    struct scheduler_info info;
    info.iter_pr_subtask = min_iter_pr_subtask;

    info.nsubtasks = iterations / min_iter_pr_subtask;
    info.remainder = iterations % min_iter_pr_subtask;
    info.task_time = &tuning_time;
    info.task_iter = &tuning_iter;
    info.sched = STATIC;

    struct scheduler_parloop parloop;
    parloop.name = "tuning_loop";
    parloop.fn = tuning_loop;
    parloop.args = &tuning_struct;
    parloop.iterations = iterations;
    parloop.info = info;

    int64_t tuning_chunked_start = get_wall_time_ns();
    int determine_kappa_err =
      scheduler_execute_task(&scheduler,
                             &parloop);
    assert(determine_kappa_err == 0);
    int64_t tuning_chunked_end = get_wall_time_ns();
    time_elapsed =  tuning_chunked_end - tuning_chunked_start;

    ratio = (double)time_elapsed / (double)sequential_elapsed;
    if (ratio < 1.055) {
      break;
    }
    kappa_tune += 100; // Increase by 100 ns at the time
    fprintf(stderr, "nsubtask %d - kappa %f - ratio %f\n", nsubtasks, kappa_tune, ratio);
  }

  int64_t end_tuning = get_wall_time_ns();
  fprintf(stderr, "tuning took %lld ns and found kappa %f - time %lld - ratio %f\n",
          (long long)end_tuning - start_tuning,
          kappa_tune,
          (long long)time_elapsed,
          ratio);
  *kappa = kappa_tune;

  // Clean-up
  CHECK_ERR(subtask_queue_destroy(&scheduler.workers[0].q), "failed to destroy queue");
  free(array);
  free(scheduler.workers);
  return err;
}

static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa) {
  assert(num_workers > 0);

  scheduler->kappa = kappa;
  scheduler->num_threads = num_workers;
  scheduler->active_work = 0;
  scheduler->error = 0;

  scheduler->workers = calloc(num_workers, sizeof(struct worker));

  const int queue_capacity = 1024;

  worker_local = &scheduler->workers[0];
  worker_local->tid = 0;
  worker_local->scheduler = scheduler;
  CHECK_ERR(subtask_queue_init(&worker_local->q, queue_capacity),
            "failed to init queue for worker %d\n", 0);

  for (int i = 1; i < num_workers; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    memset(cur_worker, 0, sizeof(struct worker));
    cur_worker->tid = i;
    cur_worker->output_usage = 0;
    cur_worker->scheduler = scheduler;
    CHECK_ERR(subtask_queue_init(&cur_worker->q, queue_capacity),
              "failed to init queue for worker %d\n", i);

    CHECK_ERR(pthread_create(&cur_worker->thread,
                             NULL,
                             &scheduler_worker,
                             cur_worker),
              "Failed to create worker %d\n", i);
  }

  return 0;
}

static int scheduler_destroy(struct scheduler *scheduler) {
  // First mark them all as dead.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    cur_worker->dead = 1;
  }

  // Then destroy their task queues (this will wake up the threads and
  // make them do their shutdown).
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    subtask_queue_destroy(&cur_worker->q);
  }

  // Then actually wait for them to stop.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    CHECK_ERR(pthread_join(scheduler->workers[i].thread, NULL), "pthread_join");
  }

  free(scheduler->workers);

  return 0;
}

// End of scheduler.h

struct futhark_context_config {
    int debugging;
    int profiling;
    int num_threads;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->debugging = 0;
    cfg->profiling = 0;
    cfg->num_threads = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    /* Does nothing for this backend. */
    (void) cfg;
    (void) detail;
}
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n)
{
    cfg->num_threads = n;
}
struct futhark_context {
    struct scheduler scheduler;
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int total_runs;
    long total_runtime;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    int64_t *futhark_mc_segmap_parloop_76402_total_runtime;
    int *futhark_mc_segmap_parloop_76402_runs;
    int64_t *futhark_mc_segmap_parloop_76402_iter;
    int64_t futhark_mc_segmap_parloop_76402_total_total_runtime;
    int futhark_mc_segmap_parloop_76402_total_runs;
    int64_t futhark_mc_segmap_parloop_76402_total_iter;
    int64_t *futhark_mc_segmap_task_76400_total_runtime;
    int *futhark_mc_segmap_task_76400_runs;
    int64_t *futhark_mc_segmap_task_76400_iter;
    int64_t futhark_mc_segmap_task_76400_total_time;
    int64_t futhark_mc_segmap_task_76400_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_76426_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_76426_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_76426_iter;
    int64_t futhark_mc_scan_stage_1_parloop_76426_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_76426_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_76426_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_76428_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_76428_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_76428_iter;
    int64_t futhark_mc_scan_stage_3_parloop_76428_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_76428_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_76428_total_iter;
    int64_t *futhark_mc_segscan_task_76423_total_runtime;
    int *futhark_mc_segscan_task_76423_runs;
    int64_t *futhark_mc_segscan_task_76423_iter;
    int64_t futhark_mc_segscan_task_76423_total_time;
    int64_t futhark_mc_segscan_task_76423_total_iter;
    int64_t *futhark_mc_segmap_parloop_76432_total_runtime;
    int *futhark_mc_segmap_parloop_76432_runs;
    int64_t *futhark_mc_segmap_parloop_76432_iter;
    int64_t futhark_mc_segmap_parloop_76432_total_total_runtime;
    int futhark_mc_segmap_parloop_76432_total_runs;
    int64_t futhark_mc_segmap_parloop_76432_total_iter;
    int64_t *futhark_mc_segmap_task_76430_total_runtime;
    int *futhark_mc_segmap_task_76430_runs;
    int64_t *futhark_mc_segmap_task_76430_iter;
    int64_t futhark_mc_segmap_task_76430_total_time;
    int64_t futhark_mc_segmap_task_76430_total_iter;
    int64_t *futhark_mc_segmap_parloop_76436_total_runtime;
    int *futhark_mc_segmap_parloop_76436_runs;
    int64_t *futhark_mc_segmap_parloop_76436_iter;
    int64_t futhark_mc_segmap_parloop_76436_total_total_runtime;
    int futhark_mc_segmap_parloop_76436_total_runs;
    int64_t futhark_mc_segmap_parloop_76436_total_iter;
    int64_t *futhark_mc_segmap_task_76434_total_runtime;
    int *futhark_mc_segmap_task_76434_runs;
    int64_t *futhark_mc_segmap_task_76434_iter;
    int64_t futhark_mc_segmap_task_76434_total_time;
    int64_t futhark_mc_segmap_task_76434_total_iter;
    int64_t *futhark_mc_segmap_parloop_76440_total_runtime;
    int *futhark_mc_segmap_parloop_76440_runs;
    int64_t *futhark_mc_segmap_parloop_76440_iter;
    int64_t futhark_mc_segmap_parloop_76440_total_total_runtime;
    int futhark_mc_segmap_parloop_76440_total_runs;
    int64_t futhark_mc_segmap_parloop_76440_total_iter;
    int64_t *futhark_mc_segmap_task_76438_total_runtime;
    int *futhark_mc_segmap_task_76438_runs;
    int64_t *futhark_mc_segmap_task_76438_iter;
    int64_t futhark_mc_segmap_task_76438_total_time;
    int64_t futhark_mc_segmap_task_76438_total_iter;
    int64_t *futhark_mc_segmap_parloop_76444_total_runtime;
    int *futhark_mc_segmap_parloop_76444_runs;
    int64_t *futhark_mc_segmap_parloop_76444_iter;
    int64_t futhark_mc_segmap_parloop_76444_total_total_runtime;
    int futhark_mc_segmap_parloop_76444_total_runs;
    int64_t futhark_mc_segmap_parloop_76444_total_iter;
    int64_t *futhark_mc_segmap_task_76442_total_runtime;
    int *futhark_mc_segmap_task_76442_runs;
    int64_t *futhark_mc_segmap_task_76442_iter;
    int64_t futhark_mc_segmap_task_76442_total_time;
    int64_t futhark_mc_segmap_task_76442_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76452_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76452_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76452_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76452_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76452_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76452_total_iter;
    int64_t *futhark_mc_segred_task_76449_total_runtime;
    int *futhark_mc_segred_task_76449_runs;
    int64_t *futhark_mc_segred_task_76449_iter;
    int64_t futhark_mc_segred_task_76449_total_time;
    int64_t futhark_mc_segred_task_76449_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76457_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76457_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76457_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76457_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76457_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76457_total_iter;
    int64_t *futhark_mc_segred_task_76454_total_runtime;
    int *futhark_mc_segred_task_76454_runs;
    int64_t *futhark_mc_segred_task_76454_iter;
    int64_t futhark_mc_segred_task_76454_total_time;
    int64_t futhark_mc_segred_task_76454_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76462_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76462_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76462_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76462_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76462_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76462_total_iter;
    int64_t *futhark_mc_segred_task_76459_total_runtime;
    int *futhark_mc_segred_task_76459_runs;
    int64_t *futhark_mc_segred_task_76459_iter;
    int64_t futhark_mc_segred_task_76459_total_time;
    int64_t futhark_mc_segred_task_76459_total_iter;
    int64_t *futhark_mc_segmap_parloop_76447_total_runtime;
    int *futhark_mc_segmap_parloop_76447_runs;
    int64_t *futhark_mc_segmap_parloop_76447_iter;
    int64_t futhark_mc_segmap_parloop_76447_total_total_runtime;
    int futhark_mc_segmap_parloop_76447_total_runs;
    int64_t futhark_mc_segmap_parloop_76447_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76445_total_runtime;
    int *futhark_mc_segmap_nested_task_76445_runs;
    int64_t *futhark_mc_segmap_nested_task_76445_iter;
    int64_t *futhark_mc_segmap_parloop_76413_total_runtime;
    int *futhark_mc_segmap_parloop_76413_runs;
    int64_t *futhark_mc_segmap_parloop_76413_iter;
    int64_t futhark_mc_segmap_parloop_76413_total_total_runtime;
    int futhark_mc_segmap_parloop_76413_total_runs;
    int64_t futhark_mc_segmap_parloop_76413_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76411_total_runtime;
    int *futhark_mc_segmap_nested_task_76411_runs;
    int64_t *futhark_mc_segmap_nested_task_76411_iter;
    int64_t *futhark_mc_segmap_parloop_76466_total_runtime;
    int *futhark_mc_segmap_parloop_76466_runs;
    int64_t *futhark_mc_segmap_parloop_76466_iter;
    int64_t futhark_mc_segmap_parloop_76466_total_total_runtime;
    int futhark_mc_segmap_parloop_76466_total_runs;
    int64_t futhark_mc_segmap_parloop_76466_total_iter;
    int64_t *futhark_mc_segmap_task_76464_total_runtime;
    int *futhark_mc_segmap_task_76464_runs;
    int64_t *futhark_mc_segmap_task_76464_iter;
    int64_t futhark_mc_segmap_task_76464_total_time;
    int64_t futhark_mc_segmap_task_76464_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_76492_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_76492_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_76492_iter;
    int64_t futhark_mc_scan_stage_1_parloop_76492_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_76492_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_76492_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_76494_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_76494_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_76494_iter;
    int64_t futhark_mc_scan_stage_3_parloop_76494_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_76494_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_76494_total_iter;
    int64_t *futhark_mc_segscan_task_76489_total_runtime;
    int *futhark_mc_segscan_task_76489_runs;
    int64_t *futhark_mc_segscan_task_76489_iter;
    int64_t futhark_mc_segscan_task_76489_total_time;
    int64_t futhark_mc_segscan_task_76489_total_iter;
    int64_t *futhark_mc_segmap_parloop_76498_total_runtime;
    int *futhark_mc_segmap_parloop_76498_runs;
    int64_t *futhark_mc_segmap_parloop_76498_iter;
    int64_t futhark_mc_segmap_parloop_76498_total_total_runtime;
    int futhark_mc_segmap_parloop_76498_total_runs;
    int64_t futhark_mc_segmap_parloop_76498_total_iter;
    int64_t *futhark_mc_segmap_task_76496_total_runtime;
    int *futhark_mc_segmap_task_76496_runs;
    int64_t *futhark_mc_segmap_task_76496_iter;
    int64_t futhark_mc_segmap_task_76496_total_time;
    int64_t futhark_mc_segmap_task_76496_total_iter;
    int64_t *futhark_mc_segmap_parloop_76502_total_runtime;
    int *futhark_mc_segmap_parloop_76502_runs;
    int64_t *futhark_mc_segmap_parloop_76502_iter;
    int64_t futhark_mc_segmap_parloop_76502_total_total_runtime;
    int futhark_mc_segmap_parloop_76502_total_runs;
    int64_t futhark_mc_segmap_parloop_76502_total_iter;
    int64_t *futhark_mc_segmap_task_76500_total_runtime;
    int *futhark_mc_segmap_task_76500_runs;
    int64_t *futhark_mc_segmap_task_76500_iter;
    int64_t futhark_mc_segmap_task_76500_total_time;
    int64_t futhark_mc_segmap_task_76500_total_iter;
    int64_t *futhark_mc_segmap_parloop_76506_total_runtime;
    int *futhark_mc_segmap_parloop_76506_runs;
    int64_t *futhark_mc_segmap_parloop_76506_iter;
    int64_t futhark_mc_segmap_parloop_76506_total_total_runtime;
    int futhark_mc_segmap_parloop_76506_total_runs;
    int64_t futhark_mc_segmap_parloop_76506_total_iter;
    int64_t *futhark_mc_segmap_task_76504_total_runtime;
    int *futhark_mc_segmap_task_76504_runs;
    int64_t *futhark_mc_segmap_task_76504_iter;
    int64_t futhark_mc_segmap_task_76504_total_time;
    int64_t futhark_mc_segmap_task_76504_total_iter;
    int64_t *futhark_mc_segmap_parloop_76510_total_runtime;
    int *futhark_mc_segmap_parloop_76510_runs;
    int64_t *futhark_mc_segmap_parloop_76510_iter;
    int64_t futhark_mc_segmap_parloop_76510_total_total_runtime;
    int futhark_mc_segmap_parloop_76510_total_runs;
    int64_t futhark_mc_segmap_parloop_76510_total_iter;
    int64_t *futhark_mc_segmap_task_76508_total_runtime;
    int *futhark_mc_segmap_task_76508_runs;
    int64_t *futhark_mc_segmap_task_76508_iter;
    int64_t futhark_mc_segmap_task_76508_total_time;
    int64_t futhark_mc_segmap_task_76508_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76518_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76518_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76518_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76518_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76518_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76518_total_iter;
    int64_t *futhark_mc_segred_task_76515_total_runtime;
    int *futhark_mc_segred_task_76515_runs;
    int64_t *futhark_mc_segred_task_76515_iter;
    int64_t futhark_mc_segred_task_76515_total_time;
    int64_t futhark_mc_segred_task_76515_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76525_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76525_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76525_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76525_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76525_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76525_total_iter;
    int64_t *futhark_mc_segred_task_76520_total_runtime;
    int *futhark_mc_segred_task_76520_runs;
    int64_t *futhark_mc_segred_task_76520_iter;
    int64_t futhark_mc_segred_task_76520_total_time;
    int64_t futhark_mc_segred_task_76520_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76531_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76531_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76531_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76531_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76531_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76531_total_iter;
    int64_t *futhark_mc_segred_task_76527_total_runtime;
    int *futhark_mc_segred_task_76527_runs;
    int64_t *futhark_mc_segred_task_76527_iter;
    int64_t futhark_mc_segred_task_76527_total_time;
    int64_t futhark_mc_segred_task_76527_total_iter;
    int64_t *futhark_mc_segmap_parloop_76513_total_runtime;
    int *futhark_mc_segmap_parloop_76513_runs;
    int64_t *futhark_mc_segmap_parloop_76513_iter;
    int64_t futhark_mc_segmap_parloop_76513_total_total_runtime;
    int futhark_mc_segmap_parloop_76513_total_runs;
    int64_t futhark_mc_segmap_parloop_76513_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76511_total_runtime;
    int *futhark_mc_segmap_nested_task_76511_runs;
    int64_t *futhark_mc_segmap_nested_task_76511_iter;
    int64_t *futhark_mc_segmap_parloop_76478_total_runtime;
    int *futhark_mc_segmap_parloop_76478_runs;
    int64_t *futhark_mc_segmap_parloop_76478_iter;
    int64_t futhark_mc_segmap_parloop_76478_total_total_runtime;
    int futhark_mc_segmap_parloop_76478_total_runs;
    int64_t futhark_mc_segmap_parloop_76478_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76476_total_runtime;
    int *futhark_mc_segmap_nested_task_76476_runs;
    int64_t *futhark_mc_segmap_nested_task_76476_iter;
    int64_t *futhark_mc_segmap_parloop_76535_total_runtime;
    int *futhark_mc_segmap_parloop_76535_runs;
    int64_t *futhark_mc_segmap_parloop_76535_iter;
    int64_t futhark_mc_segmap_parloop_76535_total_total_runtime;
    int futhark_mc_segmap_parloop_76535_total_runs;
    int64_t futhark_mc_segmap_parloop_76535_total_iter;
    int64_t *futhark_mc_segmap_task_76533_total_runtime;
    int *futhark_mc_segmap_task_76533_runs;
    int64_t *futhark_mc_segmap_task_76533_iter;
    int64_t futhark_mc_segmap_task_76533_total_time;
    int64_t futhark_mc_segmap_task_76533_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_76561_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_76561_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_76561_iter;
    int64_t futhark_mc_scan_stage_1_parloop_76561_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_76561_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_76561_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_76563_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_76563_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_76563_iter;
    int64_t futhark_mc_scan_stage_3_parloop_76563_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_76563_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_76563_total_iter;
    int64_t *futhark_mc_segscan_task_76558_total_runtime;
    int *futhark_mc_segscan_task_76558_runs;
    int64_t *futhark_mc_segscan_task_76558_iter;
    int64_t futhark_mc_segscan_task_76558_total_time;
    int64_t futhark_mc_segscan_task_76558_total_iter;
    int64_t *futhark_mc_segmap_parloop_76567_total_runtime;
    int *futhark_mc_segmap_parloop_76567_runs;
    int64_t *futhark_mc_segmap_parloop_76567_iter;
    int64_t futhark_mc_segmap_parloop_76567_total_total_runtime;
    int futhark_mc_segmap_parloop_76567_total_runs;
    int64_t futhark_mc_segmap_parloop_76567_total_iter;
    int64_t *futhark_mc_segmap_task_76565_total_runtime;
    int *futhark_mc_segmap_task_76565_runs;
    int64_t *futhark_mc_segmap_task_76565_iter;
    int64_t futhark_mc_segmap_task_76565_total_time;
    int64_t futhark_mc_segmap_task_76565_total_iter;
    int64_t *futhark_mc_segmap_parloop_76571_total_runtime;
    int *futhark_mc_segmap_parloop_76571_runs;
    int64_t *futhark_mc_segmap_parloop_76571_iter;
    int64_t futhark_mc_segmap_parloop_76571_total_total_runtime;
    int futhark_mc_segmap_parloop_76571_total_runs;
    int64_t futhark_mc_segmap_parloop_76571_total_iter;
    int64_t *futhark_mc_segmap_task_76569_total_runtime;
    int *futhark_mc_segmap_task_76569_runs;
    int64_t *futhark_mc_segmap_task_76569_iter;
    int64_t futhark_mc_segmap_task_76569_total_time;
    int64_t futhark_mc_segmap_task_76569_total_iter;
    int64_t *futhark_mc_segmap_parloop_76575_total_runtime;
    int *futhark_mc_segmap_parloop_76575_runs;
    int64_t *futhark_mc_segmap_parloop_76575_iter;
    int64_t futhark_mc_segmap_parloop_76575_total_total_runtime;
    int futhark_mc_segmap_parloop_76575_total_runs;
    int64_t futhark_mc_segmap_parloop_76575_total_iter;
    int64_t *futhark_mc_segmap_task_76573_total_runtime;
    int *futhark_mc_segmap_task_76573_runs;
    int64_t *futhark_mc_segmap_task_76573_iter;
    int64_t futhark_mc_segmap_task_76573_total_time;
    int64_t futhark_mc_segmap_task_76573_total_iter;
    int64_t *futhark_mc_segmap_parloop_76579_total_runtime;
    int *futhark_mc_segmap_parloop_76579_runs;
    int64_t *futhark_mc_segmap_parloop_76579_iter;
    int64_t futhark_mc_segmap_parloop_76579_total_total_runtime;
    int futhark_mc_segmap_parloop_76579_total_runs;
    int64_t futhark_mc_segmap_parloop_76579_total_iter;
    int64_t *futhark_mc_segmap_task_76577_total_runtime;
    int *futhark_mc_segmap_task_76577_runs;
    int64_t *futhark_mc_segmap_task_76577_iter;
    int64_t futhark_mc_segmap_task_76577_total_time;
    int64_t futhark_mc_segmap_task_76577_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76587_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76587_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76587_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76587_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76587_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76587_total_iter;
    int64_t *futhark_mc_segred_task_76584_total_runtime;
    int *futhark_mc_segred_task_76584_runs;
    int64_t *futhark_mc_segred_task_76584_iter;
    int64_t futhark_mc_segred_task_76584_total_time;
    int64_t futhark_mc_segred_task_76584_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76596_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76596_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76596_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76596_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76596_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76596_total_iter;
    int64_t *futhark_mc_segred_task_76589_total_runtime;
    int *futhark_mc_segred_task_76589_runs;
    int64_t *futhark_mc_segred_task_76589_iter;
    int64_t futhark_mc_segred_task_76589_total_time;
    int64_t futhark_mc_segred_task_76589_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76602_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76602_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76602_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76602_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76602_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76602_total_iter;
    int64_t *futhark_mc_segred_task_76598_total_runtime;
    int *futhark_mc_segred_task_76598_runs;
    int64_t *futhark_mc_segred_task_76598_iter;
    int64_t futhark_mc_segred_task_76598_total_time;
    int64_t futhark_mc_segred_task_76598_total_iter;
    int64_t *futhark_mc_segmap_parloop_76582_total_runtime;
    int *futhark_mc_segmap_parloop_76582_runs;
    int64_t *futhark_mc_segmap_parloop_76582_iter;
    int64_t futhark_mc_segmap_parloop_76582_total_total_runtime;
    int futhark_mc_segmap_parloop_76582_total_runs;
    int64_t futhark_mc_segmap_parloop_76582_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76580_total_runtime;
    int *futhark_mc_segmap_nested_task_76580_runs;
    int64_t *futhark_mc_segmap_nested_task_76580_iter;
    int64_t *futhark_mc_segmap_parloop_76547_total_runtime;
    int *futhark_mc_segmap_parloop_76547_runs;
    int64_t *futhark_mc_segmap_parloop_76547_iter;
    int64_t futhark_mc_segmap_parloop_76547_total_total_runtime;
    int futhark_mc_segmap_parloop_76547_total_runs;
    int64_t futhark_mc_segmap_parloop_76547_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76545_total_runtime;
    int *futhark_mc_segmap_nested_task_76545_runs;
    int64_t *futhark_mc_segmap_nested_task_76545_iter;
    int64_t *futhark_mc_segmap_parloop_76606_total_runtime;
    int *futhark_mc_segmap_parloop_76606_runs;
    int64_t *futhark_mc_segmap_parloop_76606_iter;
    int64_t futhark_mc_segmap_parloop_76606_total_total_runtime;
    int futhark_mc_segmap_parloop_76606_total_runs;
    int64_t futhark_mc_segmap_parloop_76606_total_iter;
    int64_t *futhark_mc_segmap_task_76604_total_runtime;
    int *futhark_mc_segmap_task_76604_runs;
    int64_t *futhark_mc_segmap_task_76604_iter;
    int64_t futhark_mc_segmap_task_76604_total_time;
    int64_t futhark_mc_segmap_task_76604_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_76631_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_76631_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_76631_iter;
    int64_t futhark_mc_scan_stage_1_parloop_76631_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_76631_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_76631_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_76633_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_76633_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_76633_iter;
    int64_t futhark_mc_scan_stage_3_parloop_76633_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_76633_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_76633_total_iter;
    int64_t *futhark_mc_segscan_task_76628_total_runtime;
    int *futhark_mc_segscan_task_76628_runs;
    int64_t *futhark_mc_segscan_task_76628_iter;
    int64_t futhark_mc_segscan_task_76628_total_time;
    int64_t futhark_mc_segscan_task_76628_total_iter;
    int64_t *futhark_mc_segmap_parloop_76637_total_runtime;
    int *futhark_mc_segmap_parloop_76637_runs;
    int64_t *futhark_mc_segmap_parloop_76637_iter;
    int64_t futhark_mc_segmap_parloop_76637_total_total_runtime;
    int futhark_mc_segmap_parloop_76637_total_runs;
    int64_t futhark_mc_segmap_parloop_76637_total_iter;
    int64_t *futhark_mc_segmap_task_76635_total_runtime;
    int *futhark_mc_segmap_task_76635_runs;
    int64_t *futhark_mc_segmap_task_76635_iter;
    int64_t futhark_mc_segmap_task_76635_total_time;
    int64_t futhark_mc_segmap_task_76635_total_iter;
    int64_t *futhark_mc_segmap_parloop_76641_total_runtime;
    int *futhark_mc_segmap_parloop_76641_runs;
    int64_t *futhark_mc_segmap_parloop_76641_iter;
    int64_t futhark_mc_segmap_parloop_76641_total_total_runtime;
    int futhark_mc_segmap_parloop_76641_total_runs;
    int64_t futhark_mc_segmap_parloop_76641_total_iter;
    int64_t *futhark_mc_segmap_task_76639_total_runtime;
    int *futhark_mc_segmap_task_76639_runs;
    int64_t *futhark_mc_segmap_task_76639_iter;
    int64_t futhark_mc_segmap_task_76639_total_time;
    int64_t futhark_mc_segmap_task_76639_total_iter;
    int64_t *futhark_mc_segmap_parloop_76645_total_runtime;
    int *futhark_mc_segmap_parloop_76645_runs;
    int64_t *futhark_mc_segmap_parloop_76645_iter;
    int64_t futhark_mc_segmap_parloop_76645_total_total_runtime;
    int futhark_mc_segmap_parloop_76645_total_runs;
    int64_t futhark_mc_segmap_parloop_76645_total_iter;
    int64_t *futhark_mc_segmap_task_76643_total_runtime;
    int *futhark_mc_segmap_task_76643_runs;
    int64_t *futhark_mc_segmap_task_76643_iter;
    int64_t futhark_mc_segmap_task_76643_total_time;
    int64_t futhark_mc_segmap_task_76643_total_iter;
    int64_t *futhark_mc_segmap_parloop_76649_total_runtime;
    int *futhark_mc_segmap_parloop_76649_runs;
    int64_t *futhark_mc_segmap_parloop_76649_iter;
    int64_t futhark_mc_segmap_parloop_76649_total_total_runtime;
    int futhark_mc_segmap_parloop_76649_total_runs;
    int64_t futhark_mc_segmap_parloop_76649_total_iter;
    int64_t *futhark_mc_segmap_task_76647_total_runtime;
    int *futhark_mc_segmap_task_76647_runs;
    int64_t *futhark_mc_segmap_task_76647_iter;
    int64_t futhark_mc_segmap_task_76647_total_time;
    int64_t futhark_mc_segmap_task_76647_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76659_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76659_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76659_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76659_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76659_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76659_total_iter;
    int64_t *futhark_mc_segred_task_76656_total_runtime;
    int *futhark_mc_segred_task_76656_runs;
    int64_t *futhark_mc_segred_task_76656_iter;
    int64_t futhark_mc_segred_task_76656_total_time;
    int64_t futhark_mc_segred_task_76656_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76664_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76664_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76664_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76664_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76664_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76664_total_iter;
    int64_t *futhark_mc_segred_task_76661_total_runtime;
    int *futhark_mc_segred_task_76661_runs;
    int64_t *futhark_mc_segred_task_76661_iter;
    int64_t futhark_mc_segred_task_76661_total_time;
    int64_t futhark_mc_segred_task_76661_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76669_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76669_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76669_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76669_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76669_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76669_total_iter;
    int64_t *futhark_mc_segred_task_76666_total_runtime;
    int *futhark_mc_segred_task_76666_runs;
    int64_t *futhark_mc_segred_task_76666_iter;
    int64_t futhark_mc_segred_task_76666_total_time;
    int64_t futhark_mc_segred_task_76666_total_iter;
    int64_t *futhark_mc_segmap_parloop_76653_total_runtime;
    int *futhark_mc_segmap_parloop_76653_runs;
    int64_t *futhark_mc_segmap_parloop_76653_iter;
    int64_t futhark_mc_segmap_parloop_76653_total_total_runtime;
    int futhark_mc_segmap_parloop_76653_total_runs;
    int64_t futhark_mc_segmap_parloop_76653_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76651_total_runtime;
    int *futhark_mc_segmap_nested_task_76651_runs;
    int64_t *futhark_mc_segmap_nested_task_76651_iter;
    int64_t *futhark_mc_segmap_parloop_76618_total_runtime;
    int *futhark_mc_segmap_parloop_76618_runs;
    int64_t *futhark_mc_segmap_parloop_76618_iter;
    int64_t futhark_mc_segmap_parloop_76618_total_total_runtime;
    int futhark_mc_segmap_parloop_76618_total_runs;
    int64_t futhark_mc_segmap_parloop_76618_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76616_total_runtime;
    int *futhark_mc_segmap_nested_task_76616_runs;
    int64_t *futhark_mc_segmap_nested_task_76616_iter;
    int64_t *futhark_mc_segmap_parloop_76673_total_runtime;
    int *futhark_mc_segmap_parloop_76673_runs;
    int64_t *futhark_mc_segmap_parloop_76673_iter;
    int64_t futhark_mc_segmap_parloop_76673_total_total_runtime;
    int futhark_mc_segmap_parloop_76673_total_runs;
    int64_t futhark_mc_segmap_parloop_76673_total_iter;
    int64_t *futhark_mc_segmap_task_76671_total_runtime;
    int *futhark_mc_segmap_task_76671_runs;
    int64_t *futhark_mc_segmap_task_76671_iter;
    int64_t futhark_mc_segmap_task_76671_total_time;
    int64_t futhark_mc_segmap_task_76671_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_76701_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_76701_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_76701_iter;
    int64_t futhark_mc_scan_stage_1_parloop_76701_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_76701_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_76701_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_76703_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_76703_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_76703_iter;
    int64_t futhark_mc_scan_stage_3_parloop_76703_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_76703_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_76703_total_iter;
    int64_t *futhark_mc_segscan_task_76698_total_runtime;
    int *futhark_mc_segscan_task_76698_runs;
    int64_t *futhark_mc_segscan_task_76698_iter;
    int64_t futhark_mc_segscan_task_76698_total_time;
    int64_t futhark_mc_segscan_task_76698_total_iter;
    int64_t *futhark_mc_segmap_parloop_76707_total_runtime;
    int *futhark_mc_segmap_parloop_76707_runs;
    int64_t *futhark_mc_segmap_parloop_76707_iter;
    int64_t futhark_mc_segmap_parloop_76707_total_total_runtime;
    int futhark_mc_segmap_parloop_76707_total_runs;
    int64_t futhark_mc_segmap_parloop_76707_total_iter;
    int64_t *futhark_mc_segmap_task_76705_total_runtime;
    int *futhark_mc_segmap_task_76705_runs;
    int64_t *futhark_mc_segmap_task_76705_iter;
    int64_t futhark_mc_segmap_task_76705_total_time;
    int64_t futhark_mc_segmap_task_76705_total_iter;
    int64_t *futhark_mc_segmap_parloop_76711_total_runtime;
    int *futhark_mc_segmap_parloop_76711_runs;
    int64_t *futhark_mc_segmap_parloop_76711_iter;
    int64_t futhark_mc_segmap_parloop_76711_total_total_runtime;
    int futhark_mc_segmap_parloop_76711_total_runs;
    int64_t futhark_mc_segmap_parloop_76711_total_iter;
    int64_t *futhark_mc_segmap_task_76709_total_runtime;
    int *futhark_mc_segmap_task_76709_runs;
    int64_t *futhark_mc_segmap_task_76709_iter;
    int64_t futhark_mc_segmap_task_76709_total_time;
    int64_t futhark_mc_segmap_task_76709_total_iter;
    int64_t *futhark_mc_segmap_parloop_76715_total_runtime;
    int *futhark_mc_segmap_parloop_76715_runs;
    int64_t *futhark_mc_segmap_parloop_76715_iter;
    int64_t futhark_mc_segmap_parloop_76715_total_total_runtime;
    int futhark_mc_segmap_parloop_76715_total_runs;
    int64_t futhark_mc_segmap_parloop_76715_total_iter;
    int64_t *futhark_mc_segmap_task_76713_total_runtime;
    int *futhark_mc_segmap_task_76713_runs;
    int64_t *futhark_mc_segmap_task_76713_iter;
    int64_t futhark_mc_segmap_task_76713_total_time;
    int64_t futhark_mc_segmap_task_76713_total_iter;
    int64_t *futhark_mc_segmap_parloop_76719_total_runtime;
    int *futhark_mc_segmap_parloop_76719_runs;
    int64_t *futhark_mc_segmap_parloop_76719_iter;
    int64_t futhark_mc_segmap_parloop_76719_total_total_runtime;
    int futhark_mc_segmap_parloop_76719_total_runs;
    int64_t futhark_mc_segmap_parloop_76719_total_iter;
    int64_t *futhark_mc_segmap_task_76717_total_runtime;
    int *futhark_mc_segmap_task_76717_runs;
    int64_t *futhark_mc_segmap_task_76717_iter;
    int64_t futhark_mc_segmap_task_76717_total_time;
    int64_t futhark_mc_segmap_task_76717_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76731_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76731_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76731_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76731_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76731_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76731_total_iter;
    int64_t *futhark_mc_segred_task_76728_total_runtime;
    int *futhark_mc_segred_task_76728_runs;
    int64_t *futhark_mc_segred_task_76728_iter;
    int64_t futhark_mc_segred_task_76728_total_time;
    int64_t futhark_mc_segred_task_76728_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76738_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76738_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76738_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76738_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76738_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76738_total_iter;
    int64_t *futhark_mc_segred_task_76733_total_runtime;
    int *futhark_mc_segred_task_76733_runs;
    int64_t *futhark_mc_segred_task_76733_iter;
    int64_t futhark_mc_segred_task_76733_total_time;
    int64_t futhark_mc_segred_task_76733_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76744_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76744_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76744_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76744_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76744_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76744_total_iter;
    int64_t *futhark_mc_segred_task_76740_total_runtime;
    int *futhark_mc_segred_task_76740_runs;
    int64_t *futhark_mc_segred_task_76740_iter;
    int64_t futhark_mc_segred_task_76740_total_time;
    int64_t futhark_mc_segred_task_76740_total_iter;
    int64_t *futhark_mc_segmap_parloop_76724_total_runtime;
    int *futhark_mc_segmap_parloop_76724_runs;
    int64_t *futhark_mc_segmap_parloop_76724_iter;
    int64_t futhark_mc_segmap_parloop_76724_total_total_runtime;
    int futhark_mc_segmap_parloop_76724_total_runs;
    int64_t futhark_mc_segmap_parloop_76724_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76722_total_runtime;
    int *futhark_mc_segmap_nested_task_76722_runs;
    int64_t *futhark_mc_segmap_nested_task_76722_iter;
    int64_t *futhark_mc_segmap_parloop_76687_total_runtime;
    int *futhark_mc_segmap_parloop_76687_runs;
    int64_t *futhark_mc_segmap_parloop_76687_iter;
    int64_t futhark_mc_segmap_parloop_76687_total_total_runtime;
    int futhark_mc_segmap_parloop_76687_total_runs;
    int64_t futhark_mc_segmap_parloop_76687_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76685_total_runtime;
    int *futhark_mc_segmap_nested_task_76685_runs;
    int64_t *futhark_mc_segmap_nested_task_76685_iter;
    int64_t *futhark_mc_segmap_parloop_76748_total_runtime;
    int *futhark_mc_segmap_parloop_76748_runs;
    int64_t *futhark_mc_segmap_parloop_76748_iter;
    int64_t futhark_mc_segmap_parloop_76748_total_total_runtime;
    int futhark_mc_segmap_parloop_76748_total_runs;
    int64_t futhark_mc_segmap_parloop_76748_total_iter;
    int64_t *futhark_mc_segmap_task_76746_total_runtime;
    int *futhark_mc_segmap_task_76746_runs;
    int64_t *futhark_mc_segmap_task_76746_iter;
    int64_t futhark_mc_segmap_task_76746_total_time;
    int64_t futhark_mc_segmap_task_76746_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_76778_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_76778_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_76778_iter;
    int64_t futhark_mc_scan_stage_1_parloop_76778_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_76778_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_76778_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_76780_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_76780_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_76780_iter;
    int64_t futhark_mc_scan_stage_3_parloop_76780_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_76780_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_76780_total_iter;
    int64_t *futhark_mc_segscan_task_76775_total_runtime;
    int *futhark_mc_segscan_task_76775_runs;
    int64_t *futhark_mc_segscan_task_76775_iter;
    int64_t futhark_mc_segscan_task_76775_total_time;
    int64_t futhark_mc_segscan_task_76775_total_iter;
    int64_t *futhark_mc_segmap_parloop_76784_total_runtime;
    int *futhark_mc_segmap_parloop_76784_runs;
    int64_t *futhark_mc_segmap_parloop_76784_iter;
    int64_t futhark_mc_segmap_parloop_76784_total_total_runtime;
    int futhark_mc_segmap_parloop_76784_total_runs;
    int64_t futhark_mc_segmap_parloop_76784_total_iter;
    int64_t *futhark_mc_segmap_task_76782_total_runtime;
    int *futhark_mc_segmap_task_76782_runs;
    int64_t *futhark_mc_segmap_task_76782_iter;
    int64_t futhark_mc_segmap_task_76782_total_time;
    int64_t futhark_mc_segmap_task_76782_total_iter;
    int64_t *futhark_mc_segmap_parloop_76788_total_runtime;
    int *futhark_mc_segmap_parloop_76788_runs;
    int64_t *futhark_mc_segmap_parloop_76788_iter;
    int64_t futhark_mc_segmap_parloop_76788_total_total_runtime;
    int futhark_mc_segmap_parloop_76788_total_runs;
    int64_t futhark_mc_segmap_parloop_76788_total_iter;
    int64_t *futhark_mc_segmap_task_76786_total_runtime;
    int *futhark_mc_segmap_task_76786_runs;
    int64_t *futhark_mc_segmap_task_76786_iter;
    int64_t futhark_mc_segmap_task_76786_total_time;
    int64_t futhark_mc_segmap_task_76786_total_iter;
    int64_t *futhark_mc_segmap_parloop_76792_total_runtime;
    int *futhark_mc_segmap_parloop_76792_runs;
    int64_t *futhark_mc_segmap_parloop_76792_iter;
    int64_t futhark_mc_segmap_parloop_76792_total_total_runtime;
    int futhark_mc_segmap_parloop_76792_total_runs;
    int64_t futhark_mc_segmap_parloop_76792_total_iter;
    int64_t *futhark_mc_segmap_task_76790_total_runtime;
    int *futhark_mc_segmap_task_76790_runs;
    int64_t *futhark_mc_segmap_task_76790_iter;
    int64_t futhark_mc_segmap_task_76790_total_time;
    int64_t futhark_mc_segmap_task_76790_total_iter;
    int64_t *futhark_mc_segmap_parloop_76796_total_runtime;
    int *futhark_mc_segmap_parloop_76796_runs;
    int64_t *futhark_mc_segmap_parloop_76796_iter;
    int64_t futhark_mc_segmap_parloop_76796_total_total_runtime;
    int futhark_mc_segmap_parloop_76796_total_runs;
    int64_t futhark_mc_segmap_parloop_76796_total_iter;
    int64_t *futhark_mc_segmap_task_76794_total_runtime;
    int *futhark_mc_segmap_task_76794_runs;
    int64_t *futhark_mc_segmap_task_76794_iter;
    int64_t futhark_mc_segmap_task_76794_total_time;
    int64_t futhark_mc_segmap_task_76794_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76812_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76812_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76812_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76812_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76812_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76812_total_iter;
    int64_t *futhark_mc_segred_task_76809_total_runtime;
    int *futhark_mc_segred_task_76809_runs;
    int64_t *futhark_mc_segred_task_76809_iter;
    int64_t futhark_mc_segred_task_76809_total_time;
    int64_t futhark_mc_segred_task_76809_total_iter;
    int64_t *futhark_mc_segmap_parloop_76816_total_runtime;
    int *futhark_mc_segmap_parloop_76816_runs;
    int64_t *futhark_mc_segmap_parloop_76816_iter;
    int64_t futhark_mc_segmap_parloop_76816_total_total_runtime;
    int futhark_mc_segmap_parloop_76816_total_runs;
    int64_t futhark_mc_segmap_parloop_76816_total_iter;
    int64_t *futhark_mc_segmap_task_76814_total_runtime;
    int *futhark_mc_segmap_task_76814_runs;
    int64_t *futhark_mc_segmap_task_76814_iter;
    int64_t futhark_mc_segmap_task_76814_total_time;
    int64_t futhark_mc_segmap_task_76814_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76825_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76825_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76825_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76825_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76825_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76825_total_iter;
    int64_t *futhark_mc_segred_task_76818_total_runtime;
    int *futhark_mc_segred_task_76818_runs;
    int64_t *futhark_mc_segred_task_76818_iter;
    int64_t futhark_mc_segred_task_76818_total_time;
    int64_t futhark_mc_segred_task_76818_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_76831_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_76831_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_76831_iter;
    int64_t futhark_mc_segred_stage_1_parloop_76831_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_76831_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_76831_total_iter;
    int64_t *futhark_mc_segred_task_76827_total_runtime;
    int *futhark_mc_segred_task_76827_runs;
    int64_t *futhark_mc_segred_task_76827_iter;
    int64_t futhark_mc_segred_task_76827_total_time;
    int64_t futhark_mc_segred_task_76827_total_iter;
    int64_t *futhark_mc_segmap_parloop_76803_total_runtime;
    int *futhark_mc_segmap_parloop_76803_runs;
    int64_t *futhark_mc_segmap_parloop_76803_iter;
    int64_t futhark_mc_segmap_parloop_76803_total_total_runtime;
    int futhark_mc_segmap_parloop_76803_total_runs;
    int64_t futhark_mc_segmap_parloop_76803_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76801_total_runtime;
    int *futhark_mc_segmap_nested_task_76801_runs;
    int64_t *futhark_mc_segmap_nested_task_76801_iter;
    int64_t *futhark_mc_segmap_parloop_76764_total_runtime;
    int *futhark_mc_segmap_parloop_76764_runs;
    int64_t *futhark_mc_segmap_parloop_76764_iter;
    int64_t futhark_mc_segmap_parloop_76764_total_total_runtime;
    int futhark_mc_segmap_parloop_76764_total_runs;
    int64_t futhark_mc_segmap_parloop_76764_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76762_total_runtime;
    int *futhark_mc_segmap_nested_task_76762_runs;
    int64_t *futhark_mc_segmap_nested_task_76762_iter;
    int64_t *futhark_mc_segmap_parloop_76835_total_runtime;
    int *futhark_mc_segmap_parloop_76835_runs;
    int64_t *futhark_mc_segmap_parloop_76835_iter;
    int64_t futhark_mc_segmap_parloop_76835_total_total_runtime;
    int futhark_mc_segmap_parloop_76835_total_runs;
    int64_t futhark_mc_segmap_parloop_76835_total_iter;
    int64_t *futhark_mc_segmap_task_76833_total_runtime;
    int *futhark_mc_segmap_task_76833_runs;
    int64_t *futhark_mc_segmap_task_76833_iter;
    int64_t futhark_mc_segmap_task_76833_total_time;
    int64_t futhark_mc_segmap_task_76833_total_iter;
    int64_t *futhark_mc_segmap_parloop_76844_total_runtime;
    int *futhark_mc_segmap_parloop_76844_runs;
    int64_t *futhark_mc_segmap_parloop_76844_iter;
    int64_t futhark_mc_segmap_parloop_76844_total_total_runtime;
    int futhark_mc_segmap_parloop_76844_total_runs;
    int64_t futhark_mc_segmap_parloop_76844_total_iter;
    int64_t *futhark_mc_segmap_task_76842_total_runtime;
    int *futhark_mc_segmap_task_76842_runs;
    int64_t *futhark_mc_segmap_task_76842_iter;
    int64_t futhark_mc_segmap_task_76842_total_time;
    int64_t futhark_mc_segmap_task_76842_total_iter;
    int64_t *futhark_mc_segmap_parloop_76839_total_runtime;
    int *futhark_mc_segmap_parloop_76839_runs;
    int64_t *futhark_mc_segmap_parloop_76839_iter;
    int64_t futhark_mc_segmap_parloop_76839_total_total_runtime;
    int futhark_mc_segmap_parloop_76839_total_runs;
    int64_t futhark_mc_segmap_parloop_76839_total_iter;
    int64_t *futhark_mc_segmap_nested_task_76837_total_runtime;
    int *futhark_mc_segmap_nested_task_76837_runs;
    int64_t *futhark_mc_segmap_nested_task_76837_iter;
    int64_t tuning_timing;
    int64_t tuning_iter;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    fast_srand(time(0));
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->profiling;
    ctx->profiling_paused = 0;
    ctx->logging = 0;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    
    int tune_kappa = 0;
    double kappa = 5.1f * 1000;
    
    if (tune_kappa) {
        if (determine_kappa(&kappa) != 0)
            return NULL;
    }
    if (scheduler_init(&ctx->scheduler, cfg->num_threads >
                       0 ? cfg->num_threads : num_processors(), kappa) != 0)
        return NULL;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->futhark_mc_segmap_parloop_76402_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76402_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76402_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76402_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76402_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76402_total_iter = 0;
    ctx->futhark_mc_segmap_task_76400_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76400_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76400_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76400_total_time = 0;
    ctx->futhark_mc_segmap_task_76400_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76426_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76426_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76426_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76426_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76426_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76426_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76428_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76428_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76428_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76428_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76428_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76428_total_iter = 0;
    ctx->futhark_mc_segscan_task_76423_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76423_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76423_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76423_total_time = 0;
    ctx->futhark_mc_segscan_task_76423_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76432_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76432_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76432_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76432_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76432_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76432_total_iter = 0;
    ctx->futhark_mc_segmap_task_76430_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76430_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76430_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76430_total_time = 0;
    ctx->futhark_mc_segmap_task_76430_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76436_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76436_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76436_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76436_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76436_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76436_total_iter = 0;
    ctx->futhark_mc_segmap_task_76434_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76434_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76434_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76434_total_time = 0;
    ctx->futhark_mc_segmap_task_76434_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76440_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76440_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76440_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76440_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76440_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76440_total_iter = 0;
    ctx->futhark_mc_segmap_task_76438_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76438_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76438_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76438_total_time = 0;
    ctx->futhark_mc_segmap_task_76438_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76444_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76444_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76444_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76444_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76444_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76444_total_iter = 0;
    ctx->futhark_mc_segmap_task_76442_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76442_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76442_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76442_total_time = 0;
    ctx->futhark_mc_segmap_task_76442_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76452_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76452_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76452_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76452_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76452_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76452_total_iter = 0;
    ctx->futhark_mc_segred_task_76449_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76449_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76449_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76449_total_time = 0;
    ctx->futhark_mc_segred_task_76449_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76457_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76457_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76457_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76457_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76457_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76457_total_iter = 0;
    ctx->futhark_mc_segred_task_76454_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76454_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76454_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76454_total_time = 0;
    ctx->futhark_mc_segred_task_76454_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76462_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76462_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76462_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76462_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76462_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76462_total_iter = 0;
    ctx->futhark_mc_segred_task_76459_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76459_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76459_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76459_total_time = 0;
    ctx->futhark_mc_segred_task_76459_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76447_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76447_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76447_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76447_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76447_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76447_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76445_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76445_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76445_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76413_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76413_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76413_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76413_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76413_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76413_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76411_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76411_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76411_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76466_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76466_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76466_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76466_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76466_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76466_total_iter = 0;
    ctx->futhark_mc_segmap_task_76464_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76464_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76464_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76464_total_time = 0;
    ctx->futhark_mc_segmap_task_76464_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76492_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76492_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76492_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76492_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76492_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76492_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76494_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76494_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76494_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76494_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76494_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76494_total_iter = 0;
    ctx->futhark_mc_segscan_task_76489_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76489_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76489_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76489_total_time = 0;
    ctx->futhark_mc_segscan_task_76489_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76498_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76498_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76498_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76498_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76498_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76498_total_iter = 0;
    ctx->futhark_mc_segmap_task_76496_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76496_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76496_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76496_total_time = 0;
    ctx->futhark_mc_segmap_task_76496_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76502_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76502_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76502_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76502_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76502_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76502_total_iter = 0;
    ctx->futhark_mc_segmap_task_76500_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76500_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76500_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76500_total_time = 0;
    ctx->futhark_mc_segmap_task_76500_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76506_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76506_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76506_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76506_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76506_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76506_total_iter = 0;
    ctx->futhark_mc_segmap_task_76504_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76504_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76504_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76504_total_time = 0;
    ctx->futhark_mc_segmap_task_76504_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76510_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76510_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76510_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76510_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76510_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76510_total_iter = 0;
    ctx->futhark_mc_segmap_task_76508_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76508_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76508_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76508_total_time = 0;
    ctx->futhark_mc_segmap_task_76508_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76518_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76518_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76518_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76518_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76518_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76518_total_iter = 0;
    ctx->futhark_mc_segred_task_76515_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76515_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76515_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76515_total_time = 0;
    ctx->futhark_mc_segred_task_76515_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76525_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76525_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76525_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76525_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76525_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76525_total_iter = 0;
    ctx->futhark_mc_segred_task_76520_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76520_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76520_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76520_total_time = 0;
    ctx->futhark_mc_segred_task_76520_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76531_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76531_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76531_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76531_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76531_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76531_total_iter = 0;
    ctx->futhark_mc_segred_task_76527_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76527_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76527_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76527_total_time = 0;
    ctx->futhark_mc_segred_task_76527_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76513_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76513_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76513_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76513_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76513_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76513_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76511_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76511_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76511_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76478_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76478_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76478_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76478_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76478_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76478_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76476_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76476_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76476_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76535_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76535_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76535_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76535_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76535_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76535_total_iter = 0;
    ctx->futhark_mc_segmap_task_76533_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76533_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76533_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76533_total_time = 0;
    ctx->futhark_mc_segmap_task_76533_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76561_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76561_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76561_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76561_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76561_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76561_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76563_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76563_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76563_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76563_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76563_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76563_total_iter = 0;
    ctx->futhark_mc_segscan_task_76558_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76558_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76558_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76558_total_time = 0;
    ctx->futhark_mc_segscan_task_76558_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76567_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76567_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76567_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76567_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76567_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76567_total_iter = 0;
    ctx->futhark_mc_segmap_task_76565_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76565_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76565_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76565_total_time = 0;
    ctx->futhark_mc_segmap_task_76565_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76571_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76571_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76571_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76571_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76571_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76571_total_iter = 0;
    ctx->futhark_mc_segmap_task_76569_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76569_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76569_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76569_total_time = 0;
    ctx->futhark_mc_segmap_task_76569_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76575_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76575_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76575_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76575_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76575_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76575_total_iter = 0;
    ctx->futhark_mc_segmap_task_76573_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76573_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76573_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76573_total_time = 0;
    ctx->futhark_mc_segmap_task_76573_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76579_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76579_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76579_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76579_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76579_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76579_total_iter = 0;
    ctx->futhark_mc_segmap_task_76577_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76577_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76577_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76577_total_time = 0;
    ctx->futhark_mc_segmap_task_76577_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76587_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76587_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76587_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76587_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76587_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76587_total_iter = 0;
    ctx->futhark_mc_segred_task_76584_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76584_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76584_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76584_total_time = 0;
    ctx->futhark_mc_segred_task_76584_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76596_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76596_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76596_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76596_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76596_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76596_total_iter = 0;
    ctx->futhark_mc_segred_task_76589_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76589_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76589_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76589_total_time = 0;
    ctx->futhark_mc_segred_task_76589_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76602_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76602_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76602_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76602_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76602_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76602_total_iter = 0;
    ctx->futhark_mc_segred_task_76598_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76598_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76598_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76598_total_time = 0;
    ctx->futhark_mc_segred_task_76598_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76582_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76582_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76582_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76582_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76582_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76582_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76580_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76580_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76580_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76547_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76547_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76547_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76547_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76547_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76547_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76545_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76545_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76545_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76606_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76606_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76606_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76606_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76606_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76606_total_iter = 0;
    ctx->futhark_mc_segmap_task_76604_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76604_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76604_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76604_total_time = 0;
    ctx->futhark_mc_segmap_task_76604_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76631_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76631_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76631_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76631_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76631_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76631_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76633_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76633_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76633_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76633_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76633_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76633_total_iter = 0;
    ctx->futhark_mc_segscan_task_76628_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76628_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76628_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76628_total_time = 0;
    ctx->futhark_mc_segscan_task_76628_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76637_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76637_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76637_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76637_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76637_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76637_total_iter = 0;
    ctx->futhark_mc_segmap_task_76635_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76635_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76635_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76635_total_time = 0;
    ctx->futhark_mc_segmap_task_76635_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76641_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76641_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76641_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76641_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76641_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76641_total_iter = 0;
    ctx->futhark_mc_segmap_task_76639_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76639_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76639_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76639_total_time = 0;
    ctx->futhark_mc_segmap_task_76639_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76645_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76645_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76645_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76645_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76645_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76645_total_iter = 0;
    ctx->futhark_mc_segmap_task_76643_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76643_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76643_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76643_total_time = 0;
    ctx->futhark_mc_segmap_task_76643_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76649_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76649_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76649_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76649_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76649_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76649_total_iter = 0;
    ctx->futhark_mc_segmap_task_76647_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76647_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76647_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76647_total_time = 0;
    ctx->futhark_mc_segmap_task_76647_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76659_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76659_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76659_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76659_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76659_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76659_total_iter = 0;
    ctx->futhark_mc_segred_task_76656_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76656_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76656_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76656_total_time = 0;
    ctx->futhark_mc_segred_task_76656_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76664_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76664_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76664_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76664_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76664_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76664_total_iter = 0;
    ctx->futhark_mc_segred_task_76661_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76661_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76661_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76661_total_time = 0;
    ctx->futhark_mc_segred_task_76661_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76669_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76669_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76669_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76669_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76669_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76669_total_iter = 0;
    ctx->futhark_mc_segred_task_76666_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76666_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76666_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76666_total_time = 0;
    ctx->futhark_mc_segred_task_76666_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76653_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76653_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76653_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76653_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76653_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76653_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76651_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76651_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76651_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76618_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76618_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76618_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76618_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76618_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76618_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76616_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76616_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76616_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76673_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76673_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76673_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76673_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76673_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76673_total_iter = 0;
    ctx->futhark_mc_segmap_task_76671_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76671_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76671_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76671_total_time = 0;
    ctx->futhark_mc_segmap_task_76671_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76701_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76701_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76701_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76701_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76701_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76701_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76703_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76703_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76703_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76703_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76703_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76703_total_iter = 0;
    ctx->futhark_mc_segscan_task_76698_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76698_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76698_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76698_total_time = 0;
    ctx->futhark_mc_segscan_task_76698_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76707_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76707_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76707_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76707_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76707_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76707_total_iter = 0;
    ctx->futhark_mc_segmap_task_76705_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76705_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76705_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76705_total_time = 0;
    ctx->futhark_mc_segmap_task_76705_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76711_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76711_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76711_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76711_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76711_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76711_total_iter = 0;
    ctx->futhark_mc_segmap_task_76709_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76709_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76709_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76709_total_time = 0;
    ctx->futhark_mc_segmap_task_76709_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76715_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76715_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76715_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76715_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76715_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76715_total_iter = 0;
    ctx->futhark_mc_segmap_task_76713_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76713_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76713_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76713_total_time = 0;
    ctx->futhark_mc_segmap_task_76713_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76719_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76719_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76719_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76719_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76719_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76719_total_iter = 0;
    ctx->futhark_mc_segmap_task_76717_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76717_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76717_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76717_total_time = 0;
    ctx->futhark_mc_segmap_task_76717_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76731_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76731_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76731_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76731_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76731_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76731_total_iter = 0;
    ctx->futhark_mc_segred_task_76728_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76728_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76728_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76728_total_time = 0;
    ctx->futhark_mc_segred_task_76728_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76738_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76738_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76738_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76738_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76738_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76738_total_iter = 0;
    ctx->futhark_mc_segred_task_76733_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76733_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76733_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76733_total_time = 0;
    ctx->futhark_mc_segred_task_76733_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76744_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76744_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76744_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76744_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76744_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76744_total_iter = 0;
    ctx->futhark_mc_segred_task_76740_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76740_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76740_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76740_total_time = 0;
    ctx->futhark_mc_segred_task_76740_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76724_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76724_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76724_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76724_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76724_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76724_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76722_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76722_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76722_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76687_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76687_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76687_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76687_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76687_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76687_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76685_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76685_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76685_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76748_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76748_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76748_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76748_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76748_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76748_total_iter = 0;
    ctx->futhark_mc_segmap_task_76746_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76746_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76746_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76746_total_time = 0;
    ctx->futhark_mc_segmap_task_76746_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76778_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76778_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76778_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_76778_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76778_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_76778_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76780_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76780_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76780_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_76780_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76780_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_76780_total_iter = 0;
    ctx->futhark_mc_segscan_task_76775_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76775_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76775_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_76775_total_time = 0;
    ctx->futhark_mc_segscan_task_76775_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76784_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76784_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76784_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76784_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76784_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76784_total_iter = 0;
    ctx->futhark_mc_segmap_task_76782_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76782_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76782_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76782_total_time = 0;
    ctx->futhark_mc_segmap_task_76782_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76788_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76788_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76788_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76788_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76788_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76788_total_iter = 0;
    ctx->futhark_mc_segmap_task_76786_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76786_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76786_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76786_total_time = 0;
    ctx->futhark_mc_segmap_task_76786_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76792_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76792_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76792_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76792_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76792_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76792_total_iter = 0;
    ctx->futhark_mc_segmap_task_76790_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76790_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76790_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76790_total_time = 0;
    ctx->futhark_mc_segmap_task_76790_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76796_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76796_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76796_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76796_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76796_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76796_total_iter = 0;
    ctx->futhark_mc_segmap_task_76794_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76794_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76794_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76794_total_time = 0;
    ctx->futhark_mc_segmap_task_76794_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76812_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76812_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76812_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76812_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76812_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76812_total_iter = 0;
    ctx->futhark_mc_segred_task_76809_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76809_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76809_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76809_total_time = 0;
    ctx->futhark_mc_segred_task_76809_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76816_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76816_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76816_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76816_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76816_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76816_total_iter = 0;
    ctx->futhark_mc_segmap_task_76814_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76814_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76814_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76814_total_time = 0;
    ctx->futhark_mc_segmap_task_76814_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76825_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76825_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76825_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76825_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76825_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76825_total_iter = 0;
    ctx->futhark_mc_segred_task_76818_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76818_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76818_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76818_total_time = 0;
    ctx->futhark_mc_segred_task_76818_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76831_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76831_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76831_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_76831_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76831_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_76831_total_iter = 0;
    ctx->futhark_mc_segred_task_76827_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76827_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76827_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_76827_total_time = 0;
    ctx->futhark_mc_segred_task_76827_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76803_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76803_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76803_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76803_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76803_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76803_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76801_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76801_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76801_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76764_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76764_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76764_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76764_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76764_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76764_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76762_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76762_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76762_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76835_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76835_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76835_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76835_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76835_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76835_total_iter = 0;
    ctx->futhark_mc_segmap_task_76833_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76833_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76833_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76833_total_time = 0;
    ctx->futhark_mc_segmap_task_76833_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76844_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76844_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76844_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76844_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76844_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76844_total_iter = 0;
    ctx->futhark_mc_segmap_task_76842_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76842_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76842_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_76842_total_time = 0;
    ctx->futhark_mc_segmap_task_76842_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_76839_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76839_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76839_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_76839_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_76839_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_76839_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_76837_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76837_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_76837_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    (void) scheduler_destroy(&ctx->scheduler);
    free_lock(&ctx->lock);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *size_names[0];
static const char *size_vars[0];
static const char *size_classes[0];
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    (void) cfg;
    (void) size_name;
    (void) size_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (char *) malloc(size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_num_sizes(void)
{
    return sizeof(size_names) / sizeof(size_names[0]);
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) {
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76402          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76402_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76402_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76402_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76402_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76402_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76402_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76402_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76402_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76402_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76402_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76402_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76402_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76402_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76402_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76402_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76402_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76402_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76402_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76402_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76402_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76402_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76402_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76402_total_iter /
                (ctx->futhark_mc_segmap_parloop_76402_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76402_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76402_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76402_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_76426    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_76426_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76426_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76426_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76426_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76426_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_76426_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76426_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76426_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76426_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76426_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76426_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76426_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_76426_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_76426_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76426_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76426_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76426_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76426_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_76426_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76426_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76426_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76426_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76426_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_76426_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76426_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_76426_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_76426_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_76428    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_76428_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76428_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76428_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76428_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76428_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_76428_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76428_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76428_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76428_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76428_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76428_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76428_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_76428_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_76428_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76428_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76428_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76428_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76428_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_76428_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76428_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76428_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76428_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76428_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_76428_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76428_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_76428_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_76428_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_76423            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_76423_runs[i],
                    (long) ctx->futhark_mc_segscan_task_76423_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76423_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76423_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_76423_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_76423_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76423_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_76423_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_76423_iter[i],
                    (long) ctx->futhark_mc_segscan_task_76423_iter[i] /
                    (ctx->futhark_mc_segscan_task_76423_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76423_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76432          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76432_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76432_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76432_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76432_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76432_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76432_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76432_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76432_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76432_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76432_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76432_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76432_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76432_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76432_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76432_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76432_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76432_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76432_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76432_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76432_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76432_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76432_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76432_total_iter /
                (ctx->futhark_mc_segmap_parloop_76432_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76432_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76432_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76432_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76430             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76430_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76430_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76430_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76430_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76430_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76430_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76430_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76430_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76430_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76430_iter[i] /
                    (ctx->futhark_mc_segmap_task_76430_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76430_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76436          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76436_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76436_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76436_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76436_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76436_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76436_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76436_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76436_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76436_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76436_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76436_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76436_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76436_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76436_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76436_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76436_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76436_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76436_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76436_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76436_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76436_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76436_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76436_total_iter /
                (ctx->futhark_mc_segmap_parloop_76436_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76436_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76436_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76436_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76434             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76434_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76434_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76434_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76434_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76434_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76434_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76434_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76434_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76434_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76434_iter[i] /
                    (ctx->futhark_mc_segmap_task_76434_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76434_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76440          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76440_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76440_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76440_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76440_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76440_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76440_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76440_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76440_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76440_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76440_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76440_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76440_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76440_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76440_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76440_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76440_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76440_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76440_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76440_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76440_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76440_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76440_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76440_total_iter /
                (ctx->futhark_mc_segmap_parloop_76440_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76440_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76440_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76440_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76438             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76438_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76438_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76438_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76438_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76438_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76438_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76438_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76438_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76438_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76438_iter[i] /
                    (ctx->futhark_mc_segmap_task_76438_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76438_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76444          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76444_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76444_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76444_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76444_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76444_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76444_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76444_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76444_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76444_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76444_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76444_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76444_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76444_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76444_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76444_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76444_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76444_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76444_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76444_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76444_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76444_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76444_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76444_total_iter /
                (ctx->futhark_mc_segmap_parloop_76444_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76444_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76444_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76444_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76452  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76452_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76452_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76452_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76452_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76452_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76452_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76452_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76452_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76452_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76452_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76452_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76452_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76452_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76452_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76452_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76452_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76452_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76452_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76452_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76452_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76452_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76452_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76452_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76452_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76452_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76452_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76452_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76449             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76449_runs[i],
                    (long) ctx->futhark_mc_segred_task_76449_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76449_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76449_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76449_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76449_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76449_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76449_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76449_iter[i],
                    (long) ctx->futhark_mc_segred_task_76449_iter[i] /
                    (ctx->futhark_mc_segred_task_76449_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76449_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76457  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76457_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76457_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76457_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76457_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76457_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76457_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76457_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76457_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76457_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76457_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76457_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76457_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76457_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76457_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76457_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76457_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76457_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76457_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76457_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76457_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76457_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76457_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76457_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76457_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76457_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76457_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76457_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76454             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76454_runs[i],
                    (long) ctx->futhark_mc_segred_task_76454_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76454_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76454_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76454_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76454_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76454_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76454_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76454_iter[i],
                    (long) ctx->futhark_mc_segred_task_76454_iter[i] /
                    (ctx->futhark_mc_segred_task_76454_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76454_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76462  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76462_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76462_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76462_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76462_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76462_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76462_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76462_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76462_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76462_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76462_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76462_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76462_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76462_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76462_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76462_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76462_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76462_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76462_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76462_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76462_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76462_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76462_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76462_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76462_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76462_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76462_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76462_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76459             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76459_runs[i],
                    (long) ctx->futhark_mc_segred_task_76459_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76459_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76459_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76459_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76459_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76459_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76459_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76459_iter[i],
                    (long) ctx->futhark_mc_segred_task_76459_iter[i] /
                    (ctx->futhark_mc_segred_task_76459_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76459_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76447          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76447_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76447_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76447_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76447_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76447_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76447_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76447_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76447_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76447_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76447_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76447_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76447_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76447_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76447_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76447_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76447_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76447_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76447_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76447_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76447_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76447_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76447_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76447_total_iter /
                (ctx->futhark_mc_segmap_parloop_76447_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76447_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76447_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76447_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76442             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76442_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76442_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76442_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76442_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76442_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76442_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76442_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76442_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76442_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76442_iter[i] /
                    (ctx->futhark_mc_segmap_task_76442_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76442_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76445      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76445_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76445_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76445_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76445_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76445_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76445_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76445_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76445_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76445_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76445_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76445_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76445_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76413          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76413_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76413_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76413_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76413_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76413_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76413_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76413_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76413_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76413_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76413_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76413_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76413_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76413_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76413_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76413_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76413_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76413_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76413_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76413_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76413_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76413_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76413_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76413_total_iter /
                (ctx->futhark_mc_segmap_parloop_76413_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76413_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76413_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76413_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76400             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76400_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76400_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76400_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76400_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76400_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76400_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76400_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76400_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76400_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76400_iter[i] /
                    (ctx->futhark_mc_segmap_task_76400_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76400_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76411      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76411_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76411_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76411_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76411_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76411_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76411_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76411_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76411_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76411_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76411_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76411_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76411_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76466          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76466_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76466_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76466_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76466_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76466_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76466_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76466_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76466_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76466_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76466_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76466_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76466_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76466_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76466_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76466_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76466_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76466_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76466_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76466_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76466_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76466_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76466_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76466_total_iter /
                (ctx->futhark_mc_segmap_parloop_76466_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76466_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76466_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76466_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_76492    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_76492_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76492_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76492_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76492_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76492_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_76492_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76492_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76492_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76492_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76492_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76492_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76492_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_76492_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_76492_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76492_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76492_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76492_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76492_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_76492_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76492_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76492_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76492_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76492_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_76492_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76492_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_76492_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_76492_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_76494    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_76494_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76494_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76494_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76494_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76494_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_76494_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76494_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76494_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76494_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76494_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76494_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76494_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_76494_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_76494_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76494_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76494_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76494_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76494_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_76494_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76494_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76494_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76494_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76494_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_76494_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76494_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_76494_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_76494_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_76489            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_76489_runs[i],
                    (long) ctx->futhark_mc_segscan_task_76489_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76489_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76489_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_76489_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_76489_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76489_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_76489_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_76489_iter[i],
                    (long) ctx->futhark_mc_segscan_task_76489_iter[i] /
                    (ctx->futhark_mc_segscan_task_76489_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76489_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76498          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76498_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76498_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76498_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76498_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76498_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76498_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76498_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76498_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76498_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76498_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76498_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76498_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76498_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76498_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76498_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76498_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76498_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76498_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76498_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76498_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76498_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76498_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76498_total_iter /
                (ctx->futhark_mc_segmap_parloop_76498_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76498_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76498_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76498_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76496             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76496_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76496_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76496_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76496_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76496_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76496_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76496_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76496_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76496_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76496_iter[i] /
                    (ctx->futhark_mc_segmap_task_76496_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76496_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76502          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76502_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76502_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76502_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76502_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76502_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76502_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76502_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76502_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76502_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76502_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76502_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76502_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76502_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76502_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76502_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76502_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76502_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76502_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76502_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76502_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76502_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76502_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76502_total_iter /
                (ctx->futhark_mc_segmap_parloop_76502_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76502_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76502_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76502_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76500             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76500_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76500_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76500_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76500_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76500_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76500_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76500_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76500_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76500_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76500_iter[i] /
                    (ctx->futhark_mc_segmap_task_76500_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76500_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76506          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76506_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76506_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76506_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76506_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76506_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76506_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76506_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76506_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76506_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76506_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76506_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76506_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76506_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76506_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76506_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76506_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76506_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76506_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76506_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76506_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76506_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76506_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76506_total_iter /
                (ctx->futhark_mc_segmap_parloop_76506_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76506_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76506_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76506_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76504             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76504_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76504_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76504_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76504_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76504_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76504_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76504_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76504_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76504_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76504_iter[i] /
                    (ctx->futhark_mc_segmap_task_76504_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76504_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76510          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76510_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76510_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76510_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76510_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76510_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76510_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76510_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76510_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76510_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76510_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76510_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76510_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76510_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76510_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76510_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76510_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76510_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76510_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76510_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76510_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76510_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76510_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76510_total_iter /
                (ctx->futhark_mc_segmap_parloop_76510_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76510_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76510_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76510_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76518  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76518_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76518_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76518_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76518_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76518_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76518_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76518_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76518_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76518_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76518_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76518_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76518_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76518_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76518_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76518_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76518_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76518_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76518_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76518_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76518_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76518_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76518_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76518_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76518_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76518_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76518_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76518_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76515             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76515_runs[i],
                    (long) ctx->futhark_mc_segred_task_76515_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76515_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76515_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76515_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76515_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76515_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76515_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76515_iter[i],
                    (long) ctx->futhark_mc_segred_task_76515_iter[i] /
                    (ctx->futhark_mc_segred_task_76515_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76515_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76525  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76525_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76525_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76525_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76525_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76525_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76525_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76525_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76525_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76525_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76525_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76525_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76525_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76525_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76525_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76525_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76525_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76525_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76525_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76525_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76525_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76525_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76525_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76525_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76525_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76525_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76525_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76525_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76520             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76520_runs[i],
                    (long) ctx->futhark_mc_segred_task_76520_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76520_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76520_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76520_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76520_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76520_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76520_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76520_iter[i],
                    (long) ctx->futhark_mc_segred_task_76520_iter[i] /
                    (ctx->futhark_mc_segred_task_76520_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76520_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76531  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76531_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76531_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76531_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76531_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76531_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76531_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76531_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76531_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76531_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76531_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76531_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76531_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76531_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76531_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76531_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76531_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76531_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76531_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76531_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76531_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76531_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76531_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76531_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76531_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76531_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76531_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76531_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76527             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76527_runs[i],
                    (long) ctx->futhark_mc_segred_task_76527_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76527_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76527_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76527_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76527_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76527_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76527_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76527_iter[i],
                    (long) ctx->futhark_mc_segred_task_76527_iter[i] /
                    (ctx->futhark_mc_segred_task_76527_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76527_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76513          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76513_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76513_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76513_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76513_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76513_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76513_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76513_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76513_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76513_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76513_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76513_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76513_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76513_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76513_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76513_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76513_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76513_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76513_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76513_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76513_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76513_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76513_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76513_total_iter /
                (ctx->futhark_mc_segmap_parloop_76513_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76513_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76513_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76513_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76508             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76508_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76508_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76508_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76508_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76508_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76508_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76508_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76508_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76508_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76508_iter[i] /
                    (ctx->futhark_mc_segmap_task_76508_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76508_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76511      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76511_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76511_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76511_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76511_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76511_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76511_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76511_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76511_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76511_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76511_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76511_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76511_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76478          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76478_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76478_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76478_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76478_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76478_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76478_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76478_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76478_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76478_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76478_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76478_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76478_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76478_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76478_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76478_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76478_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76478_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76478_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76478_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76478_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76478_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76478_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76478_total_iter /
                (ctx->futhark_mc_segmap_parloop_76478_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76478_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76478_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76478_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76464             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76464_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76464_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76464_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76464_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76464_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76464_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76464_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76464_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76464_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76464_iter[i] /
                    (ctx->futhark_mc_segmap_task_76464_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76464_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76476      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76476_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76476_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76476_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76476_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76476_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76476_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76476_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76476_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76476_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76476_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76476_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76476_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76535          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76535_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76535_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76535_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76535_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76535_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76535_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76535_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76535_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76535_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76535_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76535_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76535_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76535_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76535_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76535_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76535_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76535_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76535_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76535_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76535_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76535_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76535_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76535_total_iter /
                (ctx->futhark_mc_segmap_parloop_76535_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76535_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76535_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76535_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_76561    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_76561_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76561_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76561_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76561_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76561_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_76561_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76561_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76561_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76561_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76561_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76561_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76561_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_76561_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_76561_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76561_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76561_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76561_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76561_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_76561_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76561_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76561_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76561_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76561_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_76561_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76561_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_76561_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_76561_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_76563    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_76563_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76563_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76563_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76563_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76563_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_76563_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76563_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76563_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76563_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76563_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76563_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76563_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_76563_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_76563_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76563_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76563_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76563_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76563_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_76563_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76563_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76563_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76563_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76563_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_76563_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76563_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_76563_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_76563_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_76558            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_76558_runs[i],
                    (long) ctx->futhark_mc_segscan_task_76558_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76558_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76558_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_76558_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_76558_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76558_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_76558_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_76558_iter[i],
                    (long) ctx->futhark_mc_segscan_task_76558_iter[i] /
                    (ctx->futhark_mc_segscan_task_76558_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76558_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76567          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76567_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76567_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76567_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76567_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76567_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76567_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76567_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76567_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76567_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76567_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76567_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76567_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76567_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76567_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76567_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76567_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76567_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76567_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76567_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76567_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76567_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76567_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76567_total_iter /
                (ctx->futhark_mc_segmap_parloop_76567_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76567_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76567_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76567_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76565             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76565_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76565_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76565_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76565_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76565_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76565_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76565_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76565_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76565_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76565_iter[i] /
                    (ctx->futhark_mc_segmap_task_76565_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76565_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76571          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76571_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76571_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76571_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76571_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76571_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76571_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76571_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76571_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76571_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76571_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76571_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76571_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76571_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76571_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76571_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76571_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76571_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76571_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76571_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76571_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76571_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76571_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76571_total_iter /
                (ctx->futhark_mc_segmap_parloop_76571_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76571_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76571_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76571_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76569             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76569_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76569_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76569_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76569_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76569_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76569_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76569_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76569_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76569_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76569_iter[i] /
                    (ctx->futhark_mc_segmap_task_76569_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76569_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76575          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76575_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76575_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76575_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76575_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76575_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76575_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76575_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76575_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76575_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76575_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76575_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76575_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76575_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76575_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76575_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76575_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76575_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76575_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76575_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76575_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76575_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76575_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76575_total_iter /
                (ctx->futhark_mc_segmap_parloop_76575_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76575_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76575_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76575_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76573             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76573_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76573_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76573_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76573_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76573_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76573_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76573_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76573_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76573_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76573_iter[i] /
                    (ctx->futhark_mc_segmap_task_76573_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76573_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76579          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76579_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76579_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76579_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76579_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76579_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76579_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76579_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76579_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76579_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76579_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76579_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76579_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76579_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76579_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76579_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76579_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76579_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76579_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76579_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76579_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76579_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76579_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76579_total_iter /
                (ctx->futhark_mc_segmap_parloop_76579_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76579_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76579_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76579_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76587  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76587_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76587_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76587_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76587_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76587_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76587_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76587_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76587_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76587_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76587_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76587_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76587_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76587_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76587_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76587_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76587_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76587_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76587_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76587_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76587_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76587_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76587_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76587_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76587_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76587_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76587_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76587_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76584             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76584_runs[i],
                    (long) ctx->futhark_mc_segred_task_76584_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76584_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76584_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76584_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76584_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76584_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76584_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76584_iter[i],
                    (long) ctx->futhark_mc_segred_task_76584_iter[i] /
                    (ctx->futhark_mc_segred_task_76584_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76584_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76596  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76596_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76596_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76596_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76596_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76596_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76596_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76596_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76596_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76596_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76596_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76596_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76596_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76596_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76596_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76596_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76596_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76596_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76596_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76596_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76596_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76596_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76596_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76596_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76596_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76596_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76596_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76596_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76589             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76589_runs[i],
                    (long) ctx->futhark_mc_segred_task_76589_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76589_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76589_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76589_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76589_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76589_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76589_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76589_iter[i],
                    (long) ctx->futhark_mc_segred_task_76589_iter[i] /
                    (ctx->futhark_mc_segred_task_76589_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76589_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76602  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76602_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76602_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76602_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76602_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76602_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76602_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76602_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76602_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76602_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76602_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76602_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76602_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76602_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76602_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76602_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76602_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76602_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76602_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76602_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76602_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76602_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76602_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76602_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76602_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76602_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76602_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76602_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76598             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76598_runs[i],
                    (long) ctx->futhark_mc_segred_task_76598_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76598_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76598_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76598_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76598_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76598_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76598_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76598_iter[i],
                    (long) ctx->futhark_mc_segred_task_76598_iter[i] /
                    (ctx->futhark_mc_segred_task_76598_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76598_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76582          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76582_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76582_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76582_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76582_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76582_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76582_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76582_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76582_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76582_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76582_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76582_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76582_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76582_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76582_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76582_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76582_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76582_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76582_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76582_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76582_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76582_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76582_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76582_total_iter /
                (ctx->futhark_mc_segmap_parloop_76582_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76582_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76582_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76582_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76577             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76577_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76577_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76577_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76577_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76577_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76577_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76577_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76577_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76577_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76577_iter[i] /
                    (ctx->futhark_mc_segmap_task_76577_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76577_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76580      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76580_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76580_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76580_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76580_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76580_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76580_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76580_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76580_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76580_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76580_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76580_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76580_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76547          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76547_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76547_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76547_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76547_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76547_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76547_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76547_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76547_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76547_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76547_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76547_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76547_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76547_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76547_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76547_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76547_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76547_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76547_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76547_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76547_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76547_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76547_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76547_total_iter /
                (ctx->futhark_mc_segmap_parloop_76547_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76547_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76547_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76547_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76533             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76533_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76533_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76533_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76533_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76533_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76533_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76533_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76533_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76533_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76533_iter[i] /
                    (ctx->futhark_mc_segmap_task_76533_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76533_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76545      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76545_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76545_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76545_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76545_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76545_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76545_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76545_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76545_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76545_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76545_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76545_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76545_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76606          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76606_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76606_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76606_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76606_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76606_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76606_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76606_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76606_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76606_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76606_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76606_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76606_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76606_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76606_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76606_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76606_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76606_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76606_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76606_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76606_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76606_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76606_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76606_total_iter /
                (ctx->futhark_mc_segmap_parloop_76606_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76606_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76606_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76606_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_76631    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_76631_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76631_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76631_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76631_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76631_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_76631_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76631_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76631_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76631_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76631_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76631_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76631_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_76631_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_76631_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76631_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76631_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76631_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76631_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_76631_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76631_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76631_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76631_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76631_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_76631_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76631_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_76631_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_76631_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_76633    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_76633_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76633_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76633_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76633_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76633_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_76633_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76633_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76633_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76633_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76633_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76633_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76633_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_76633_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_76633_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76633_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76633_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76633_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76633_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_76633_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76633_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76633_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76633_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76633_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_76633_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76633_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_76633_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_76633_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_76628            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_76628_runs[i],
                    (long) ctx->futhark_mc_segscan_task_76628_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76628_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76628_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_76628_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_76628_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76628_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_76628_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_76628_iter[i],
                    (long) ctx->futhark_mc_segscan_task_76628_iter[i] /
                    (ctx->futhark_mc_segscan_task_76628_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76628_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76637          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76637_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76637_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76637_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76637_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76637_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76637_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76637_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76637_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76637_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76637_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76637_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76637_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76637_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76637_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76637_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76637_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76637_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76637_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76637_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76637_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76637_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76637_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76637_total_iter /
                (ctx->futhark_mc_segmap_parloop_76637_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76637_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76637_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76637_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76635             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76635_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76635_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76635_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76635_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76635_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76635_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76635_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76635_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76635_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76635_iter[i] /
                    (ctx->futhark_mc_segmap_task_76635_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76635_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76641          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76641_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76641_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76641_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76641_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76641_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76641_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76641_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76641_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76641_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76641_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76641_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76641_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76641_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76641_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76641_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76641_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76641_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76641_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76641_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76641_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76641_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76641_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76641_total_iter /
                (ctx->futhark_mc_segmap_parloop_76641_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76641_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76641_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76641_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76639             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76639_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76639_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76639_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76639_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76639_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76639_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76639_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76639_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76639_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76639_iter[i] /
                    (ctx->futhark_mc_segmap_task_76639_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76639_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76645          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76645_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76645_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76645_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76645_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76645_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76645_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76645_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76645_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76645_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76645_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76645_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76645_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76645_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76645_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76645_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76645_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76645_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76645_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76645_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76645_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76645_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76645_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76645_total_iter /
                (ctx->futhark_mc_segmap_parloop_76645_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76645_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76645_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76645_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76643             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76643_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76643_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76643_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76643_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76643_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76643_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76643_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76643_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76643_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76643_iter[i] /
                    (ctx->futhark_mc_segmap_task_76643_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76643_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76649          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76649_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76649_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76649_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76649_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76649_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76649_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76649_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76649_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76649_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76649_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76649_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76649_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76649_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76649_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76649_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76649_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76649_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76649_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76649_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76649_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76649_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76649_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76649_total_iter /
                (ctx->futhark_mc_segmap_parloop_76649_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76649_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76649_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76649_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76659  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76659_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76659_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76659_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76659_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76659_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76659_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76659_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76659_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76659_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76659_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76659_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76659_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76659_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76659_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76659_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76659_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76659_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76659_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76659_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76659_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76659_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76659_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76659_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76659_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76659_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76659_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76659_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76656             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76656_runs[i],
                    (long) ctx->futhark_mc_segred_task_76656_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76656_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76656_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76656_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76656_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76656_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76656_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76656_iter[i],
                    (long) ctx->futhark_mc_segred_task_76656_iter[i] /
                    (ctx->futhark_mc_segred_task_76656_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76656_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76664  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76664_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76664_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76664_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76664_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76664_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76664_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76664_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76664_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76664_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76664_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76664_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76664_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76664_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76664_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76664_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76664_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76664_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76664_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76664_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76664_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76664_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76664_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76664_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76664_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76664_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76664_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76664_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76661             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76661_runs[i],
                    (long) ctx->futhark_mc_segred_task_76661_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76661_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76661_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76661_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76661_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76661_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76661_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76661_iter[i],
                    (long) ctx->futhark_mc_segred_task_76661_iter[i] /
                    (ctx->futhark_mc_segred_task_76661_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76661_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76669  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76669_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76669_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76669_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76669_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76669_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76669_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76669_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76669_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76669_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76669_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76669_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76669_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76669_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76669_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76669_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76669_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76669_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76669_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76669_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76669_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76669_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76669_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76669_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76669_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76669_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76669_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76669_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76666             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76666_runs[i],
                    (long) ctx->futhark_mc_segred_task_76666_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76666_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76666_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76666_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76666_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76666_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76666_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76666_iter[i],
                    (long) ctx->futhark_mc_segred_task_76666_iter[i] /
                    (ctx->futhark_mc_segred_task_76666_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76666_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76653          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76653_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76653_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76653_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76653_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76653_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76653_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76653_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76653_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76653_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76653_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76653_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76653_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76653_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76653_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76653_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76653_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76653_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76653_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76653_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76653_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76653_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76653_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76653_total_iter /
                (ctx->futhark_mc_segmap_parloop_76653_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76653_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76653_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76653_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76647             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76647_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76647_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76647_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76647_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76647_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76647_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76647_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76647_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76647_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76647_iter[i] /
                    (ctx->futhark_mc_segmap_task_76647_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76647_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76651      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76651_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76651_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76651_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76651_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76651_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76651_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76651_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76651_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76651_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76651_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76651_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76651_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76618          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76618_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76618_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76618_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76618_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76618_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76618_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76618_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76618_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76618_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76618_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76618_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76618_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76618_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76618_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76618_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76618_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76618_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76618_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76618_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76618_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76618_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76618_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76618_total_iter /
                (ctx->futhark_mc_segmap_parloop_76618_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76618_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76618_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76618_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76604             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76604_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76604_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76604_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76604_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76604_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76604_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76604_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76604_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76604_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76604_iter[i] /
                    (ctx->futhark_mc_segmap_task_76604_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76604_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76616      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76616_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76616_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76616_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76616_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76616_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76616_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76616_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76616_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76616_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76616_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76616_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76616_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76673          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76673_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76673_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76673_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76673_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76673_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76673_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76673_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76673_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76673_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76673_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76673_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76673_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76673_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76673_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76673_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76673_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76673_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76673_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76673_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76673_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76673_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76673_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76673_total_iter /
                (ctx->futhark_mc_segmap_parloop_76673_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76673_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76673_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76673_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_76701    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_76701_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76701_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76701_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76701_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76701_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_76701_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76701_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76701_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76701_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76701_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76701_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76701_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_76701_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_76701_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76701_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76701_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76701_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76701_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_76701_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76701_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76701_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76701_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76701_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_76701_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76701_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_76701_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_76701_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_76703    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_76703_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76703_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76703_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76703_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76703_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_76703_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76703_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76703_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76703_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76703_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76703_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76703_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_76703_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_76703_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76703_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76703_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76703_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76703_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_76703_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76703_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76703_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76703_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76703_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_76703_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76703_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_76703_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_76703_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_76698            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_76698_runs[i],
                    (long) ctx->futhark_mc_segscan_task_76698_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76698_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76698_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_76698_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_76698_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76698_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_76698_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_76698_iter[i],
                    (long) ctx->futhark_mc_segscan_task_76698_iter[i] /
                    (ctx->futhark_mc_segscan_task_76698_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76698_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76707          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76707_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76707_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76707_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76707_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76707_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76707_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76707_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76707_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76707_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76707_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76707_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76707_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76707_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76707_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76707_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76707_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76707_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76707_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76707_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76707_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76707_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76707_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76707_total_iter /
                (ctx->futhark_mc_segmap_parloop_76707_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76707_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76707_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76707_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76705             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76705_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76705_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76705_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76705_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76705_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76705_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76705_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76705_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76705_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76705_iter[i] /
                    (ctx->futhark_mc_segmap_task_76705_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76705_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76711          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76711_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76711_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76711_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76711_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76711_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76711_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76711_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76711_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76711_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76711_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76711_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76711_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76711_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76711_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76711_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76711_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76711_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76711_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76711_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76711_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76711_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76711_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76711_total_iter /
                (ctx->futhark_mc_segmap_parloop_76711_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76711_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76711_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76711_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76709             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76709_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76709_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76709_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76709_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76709_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76709_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76709_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76709_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76709_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76709_iter[i] /
                    (ctx->futhark_mc_segmap_task_76709_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76709_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76715          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76715_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76715_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76715_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76715_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76715_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76715_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76715_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76715_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76715_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76715_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76715_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76715_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76715_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76715_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76715_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76715_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76715_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76715_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76715_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76715_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76715_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76715_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76715_total_iter /
                (ctx->futhark_mc_segmap_parloop_76715_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76715_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76715_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76715_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76713             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76713_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76713_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76713_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76713_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76713_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76713_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76713_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76713_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76713_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76713_iter[i] /
                    (ctx->futhark_mc_segmap_task_76713_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76713_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76719          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76719_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76719_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76719_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76719_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76719_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76719_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76719_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76719_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76719_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76719_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76719_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76719_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76719_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76719_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76719_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76719_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76719_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76719_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76719_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76719_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76719_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76719_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76719_total_iter /
                (ctx->futhark_mc_segmap_parloop_76719_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76719_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76719_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76719_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76731  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76731_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76731_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76731_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76731_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76731_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76731_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76731_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76731_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76731_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76731_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76731_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76731_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76731_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76731_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76731_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76731_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76731_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76731_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76731_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76731_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76731_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76731_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76731_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76731_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76731_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76731_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76731_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76728             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76728_runs[i],
                    (long) ctx->futhark_mc_segred_task_76728_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76728_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76728_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76728_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76728_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76728_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76728_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76728_iter[i],
                    (long) ctx->futhark_mc_segred_task_76728_iter[i] /
                    (ctx->futhark_mc_segred_task_76728_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76728_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76738  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76738_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76738_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76738_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76738_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76738_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76738_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76738_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76738_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76738_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76738_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76738_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76738_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76738_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76738_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76738_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76738_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76738_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76738_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76738_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76738_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76738_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76738_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76738_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76738_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76738_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76738_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76738_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76733             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76733_runs[i],
                    (long) ctx->futhark_mc_segred_task_76733_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76733_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76733_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76733_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76733_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76733_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76733_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76733_iter[i],
                    (long) ctx->futhark_mc_segred_task_76733_iter[i] /
                    (ctx->futhark_mc_segred_task_76733_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76733_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76744  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76744_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76744_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76744_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76744_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76744_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76744_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76744_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76744_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76744_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76744_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76744_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76744_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76744_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76744_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76744_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76744_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76744_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76744_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76744_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76744_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76744_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76744_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76744_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76744_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76744_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76744_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76744_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76740             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76740_runs[i],
                    (long) ctx->futhark_mc_segred_task_76740_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76740_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76740_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76740_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76740_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76740_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76740_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76740_iter[i],
                    (long) ctx->futhark_mc_segred_task_76740_iter[i] /
                    (ctx->futhark_mc_segred_task_76740_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76740_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76724          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76724_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76724_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76724_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76724_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76724_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76724_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76724_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76724_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76724_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76724_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76724_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76724_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76724_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76724_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76724_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76724_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76724_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76724_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76724_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76724_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76724_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76724_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76724_total_iter /
                (ctx->futhark_mc_segmap_parloop_76724_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76724_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76724_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76724_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76717             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76717_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76717_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76717_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76717_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76717_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76717_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76717_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76717_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76717_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76717_iter[i] /
                    (ctx->futhark_mc_segmap_task_76717_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76717_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76722      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76722_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76722_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76722_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76722_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76722_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76722_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76722_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76722_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76722_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76722_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76722_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76722_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76687          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76687_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76687_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76687_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76687_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76687_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76687_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76687_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76687_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76687_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76687_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76687_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76687_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76687_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76687_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76687_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76687_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76687_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76687_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76687_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76687_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76687_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76687_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76687_total_iter /
                (ctx->futhark_mc_segmap_parloop_76687_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76687_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76687_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76687_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76671             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76671_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76671_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76671_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76671_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76671_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76671_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76671_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76671_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76671_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76671_iter[i] /
                    (ctx->futhark_mc_segmap_task_76671_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76671_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76685      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76685_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76685_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76685_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76685_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76685_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76685_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76685_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76685_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76685_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76685_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76685_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76685_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76748          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76748_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76748_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76748_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76748_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76748_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76748_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76748_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76748_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76748_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76748_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76748_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76748_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76748_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76748_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76748_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76748_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76748_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76748_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76748_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76748_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76748_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76748_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76748_total_iter /
                (ctx->futhark_mc_segmap_parloop_76748_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76748_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76748_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76748_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_76778    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_76778_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76778_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76778_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76778_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76778_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_76778_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76778_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76778_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76778_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_76778_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_76778_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_76778_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_76778_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_76778_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76778_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76778_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76778_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76778_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_76778_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_76778_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_76778_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_76778_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_76778_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_76778_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_76778_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_76778_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_76778_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_76780    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_76780_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76780_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76780_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76780_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76780_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_76780_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76780_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76780_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76780_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_76780_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_76780_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_76780_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_76780_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_76780_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76780_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76780_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76780_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76780_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_76780_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_76780_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_76780_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_76780_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_76780_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_76780_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_76780_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_76780_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_76780_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_76775            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_76775_runs[i],
                    (long) ctx->futhark_mc_segscan_task_76775_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76775_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76775_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_76775_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_76775_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_76775_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_76775_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_76775_iter[i],
                    (long) ctx->futhark_mc_segscan_task_76775_iter[i] /
                    (ctx->futhark_mc_segscan_task_76775_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_76775_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76784          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76784_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76784_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76784_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76784_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76784_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76784_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76784_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76784_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76784_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76784_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76784_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76784_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76784_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76784_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76784_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76784_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76784_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76784_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76784_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76784_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76784_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76784_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76784_total_iter /
                (ctx->futhark_mc_segmap_parloop_76784_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76784_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76784_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76784_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76782             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76782_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76782_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76782_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76782_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76782_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76782_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76782_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76782_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76782_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76782_iter[i] /
                    (ctx->futhark_mc_segmap_task_76782_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76782_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76788          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76788_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76788_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76788_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76788_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76788_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76788_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76788_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76788_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76788_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76788_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76788_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76788_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76788_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76788_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76788_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76788_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76788_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76788_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76788_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76788_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76788_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76788_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76788_total_iter /
                (ctx->futhark_mc_segmap_parloop_76788_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76788_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76788_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76788_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76786             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76786_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76786_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76786_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76786_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76786_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76786_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76786_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76786_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76786_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76786_iter[i] /
                    (ctx->futhark_mc_segmap_task_76786_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76786_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76792          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76792_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76792_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76792_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76792_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76792_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76792_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76792_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76792_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76792_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76792_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76792_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76792_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76792_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76792_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76792_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76792_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76792_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76792_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76792_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76792_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76792_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76792_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76792_total_iter /
                (ctx->futhark_mc_segmap_parloop_76792_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76792_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76792_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76792_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76790             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76790_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76790_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76790_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76790_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76790_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76790_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76790_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76790_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76790_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76790_iter[i] /
                    (ctx->futhark_mc_segmap_task_76790_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76790_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76796          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76796_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76796_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76796_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76796_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76796_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76796_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76796_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76796_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76796_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76796_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76796_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76796_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76796_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76796_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76796_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76796_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76796_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76796_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76796_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76796_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76796_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76796_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76796_total_iter /
                (ctx->futhark_mc_segmap_parloop_76796_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76796_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76796_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76796_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76812  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76812_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76812_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76812_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76812_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76812_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76812_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76812_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76812_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76812_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76812_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76812_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76812_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76812_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76812_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76812_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76812_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76812_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76812_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76812_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76812_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76812_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76812_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76812_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76812_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76812_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76812_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76812_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76809             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76809_runs[i],
                    (long) ctx->futhark_mc_segred_task_76809_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76809_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76809_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76809_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76809_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76809_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76809_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76809_iter[i],
                    (long) ctx->futhark_mc_segred_task_76809_iter[i] /
                    (ctx->futhark_mc_segred_task_76809_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76809_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76816          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76816_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76816_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76816_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76816_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76816_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76816_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76816_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76816_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76816_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76816_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76816_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76816_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76816_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76816_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76816_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76816_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76816_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76816_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76816_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76816_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76816_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76816_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76816_total_iter /
                (ctx->futhark_mc_segmap_parloop_76816_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76816_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76816_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76816_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76814             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76814_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76814_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76814_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76814_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76814_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76814_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76814_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76814_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76814_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76814_iter[i] /
                    (ctx->futhark_mc_segmap_task_76814_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76814_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76825  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76825_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76825_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76825_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76825_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76825_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76825_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76825_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76825_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76825_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76825_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76825_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76825_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76825_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76825_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76825_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76825_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76825_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76825_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76825_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76825_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76825_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76825_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76825_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76825_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76825_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76825_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76825_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76818             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76818_runs[i],
                    (long) ctx->futhark_mc_segred_task_76818_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76818_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76818_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76818_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76818_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76818_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76818_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76818_iter[i],
                    (long) ctx->futhark_mc_segred_task_76818_iter[i] /
                    (ctx->futhark_mc_segred_task_76818_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76818_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_76831  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_76831_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76831_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76831_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76831_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76831_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_76831_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76831_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76831_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76831_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_76831_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_76831_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_76831_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_76831_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_76831_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76831_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76831_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76831_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76831_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_76831_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_76831_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_76831_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_76831_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_76831_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_76831_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_76831_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_76831_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_76831_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_76827             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_76827_runs[i],
                    (long) ctx->futhark_mc_segred_task_76827_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76827_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76827_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_76827_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_76827_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_76827_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_76827_iter[i]),
                    (long) ctx->futhark_mc_segred_task_76827_iter[i],
                    (long) ctx->futhark_mc_segred_task_76827_iter[i] /
                    (ctx->futhark_mc_segred_task_76827_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_76827_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76803          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76803_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76803_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76803_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76803_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76803_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76803_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76803_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76803_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76803_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76803_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76803_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76803_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76803_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76803_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76803_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76803_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76803_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76803_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76803_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76803_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76803_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76803_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76803_total_iter /
                (ctx->futhark_mc_segmap_parloop_76803_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76803_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76803_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76803_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76794             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76794_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76794_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76794_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76794_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76794_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76794_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76794_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76794_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76794_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76794_iter[i] /
                    (ctx->futhark_mc_segmap_task_76794_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76794_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76801      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76801_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76801_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76801_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76801_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76801_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76801_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76801_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76801_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76801_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76801_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76801_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76801_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76764          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76764_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76764_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76764_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76764_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76764_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76764_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76764_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76764_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76764_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76764_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76764_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76764_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76764_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76764_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76764_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76764_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76764_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76764_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76764_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76764_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76764_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76764_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76764_total_iter /
                (ctx->futhark_mc_segmap_parloop_76764_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76764_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76764_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76764_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76746             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76746_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76746_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76746_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76746_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76746_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76746_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76746_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76746_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76746_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76746_iter[i] /
                    (ctx->futhark_mc_segmap_task_76746_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76746_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76762      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76762_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76762_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76762_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76762_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76762_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76762_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76762_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76762_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76762_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76762_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76762_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76762_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76835          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76835_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76835_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76835_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76835_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76835_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76835_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76835_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76835_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76835_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76835_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76835_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76835_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76835_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76835_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76835_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76835_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76835_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76835_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76835_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76835_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76835_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76835_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76835_total_iter /
                (ctx->futhark_mc_segmap_parloop_76835_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76835_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76835_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76835_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76844          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76844_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76844_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76844_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76844_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76844_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76844_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76844_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76844_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76844_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76844_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76844_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76844_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76844_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76844_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76844_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76844_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76844_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76844_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76844_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76844_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76844_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76844_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76844_total_iter /
                (ctx->futhark_mc_segmap_parloop_76844_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76844_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76844_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76844_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76842             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76842_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76842_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76842_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76842_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76842_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76842_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76842_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76842_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76842_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76842_iter[i] /
                    (ctx->futhark_mc_segmap_task_76842_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76842_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_76839          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_76839_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_76839_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76839_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76839_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_76839_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_76839_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_76839_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76839_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_76839_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_76839_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_76839_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_76839_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_76839_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_76839_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_76839_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76839_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76839_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_76839_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_76839_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_76839_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_76839_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_76839_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_76839_total_iter /
                (ctx->futhark_mc_segmap_parloop_76839_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_76839_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_76839_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_76839_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_76833             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_76833_runs[i],
                    (long) ctx->futhark_mc_segmap_task_76833_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76833_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76833_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_76833_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_76833_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_76833_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_76833_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_76833_iter[i],
                    (long) ctx->futhark_mc_segmap_task_76833_iter[i] /
                    (ctx->futhark_mc_segmap_task_76833_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_76833_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_76837      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_76837_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76837_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76837_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76837_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_76837_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_76837_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_76837_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_76837_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_76837_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_76837_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_76837_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_76837_runs[i] : 1));
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_76398,
                             struct memblock Y_mem_69552, int64_t m_64027,
                             int64_t n_64028, int64_t q_64030,
                             int64_t degree_64031, int64_t jump_64032,
                             int64_t jump_threshold_64033,
                             int64_t q_threshold_64034);
static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_mc_task_76399 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_69557;
    int64_t free_bytes_69560;
    int64_t free_bytes_69575;
    int64_t free_bytes_69578;
    char *free_mem_69704;
};
struct futhark_mc_segmap_parloop_struct_76401 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_69557;
    int64_t free_bytes_69560;
    int64_t free_bytes_69575;
    int64_t free_bytes_69578;
    char *free_mem_69704;
};
static int futhark_mc_segmap_parloop_76402(void *args, int64_t start,
                                           int64_t end, int flat_tid_65512,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76401
    *futhark_mc_segmap_parloop_struct_76401 =
    (struct futhark_mc_segmap_parloop_struct_76401 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76401->ctx;
    uint64_t futhark_mc_segmap_parloop_76402_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76402_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_segmap_parloop_struct_76401->free_m_64027;
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76401->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76401->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76401->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76401->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76401->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76401->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76401->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76401->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76401->free_m_64052;
    float i64_res_64053 =
          futhark_mc_segmap_parloop_struct_76401->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76401->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_69557 =
            futhark_mc_segmap_parloop_struct_76401->free_bytes_69557;
    int64_t bytes_69560 =
            futhark_mc_segmap_parloop_struct_76401->free_bytes_69560;
    int64_t bytes_69575 =
            futhark_mc_segmap_parloop_struct_76401->free_bytes_69575;
    int64_t bytes_69578 =
            futhark_mc_segmap_parloop_struct_76401->free_bytes_69578;
    struct memblock mem_69704 = {.desc ="mem_69704", .mem =
                                 futhark_mc_segmap_parloop_struct_76401->free_mem_69704,
                                 .size =0, .references =NULL};
    size_t mem_69583_cached_sizze_76403 = 0;
    char *mem_69583 = NULL;
    size_t mem_69598_cached_sizze_76404 = 0;
    char *mem_69598 = NULL;
    size_t mem_69601_cached_sizze_76405 = 0;
    char *mem_69601 = NULL;
    size_t mem_69628_cached_sizze_76406 = 0;
    char *mem_69628 = NULL;
    size_t mem_69631_cached_sizze_76407 = 0;
    char *mem_69631 = NULL;
    size_t mem_69634_cached_sizze_76408 = 0;
    char *mem_69634 = NULL;
    size_t mem_69673_cached_sizze_76409 = 0;
    char *mem_69673 = NULL;
    size_t mem_69688_cached_sizze_76410 = 0;
    char *mem_69688 = NULL;
    int64_t iterations = end - start;
    int64_t iter_70821 = start;
    
    if (mem_69583_cached_sizze_76403 < (size_t) bytes_69557) {
        mem_69583 = realloc(mem_69583, bytes_69557);
        mem_69583_cached_sizze_76403 = bytes_69557;
    }
    if (mem_69598_cached_sizze_76404 < (size_t) bytes_69560) {
        mem_69598 = realloc(mem_69598, bytes_69560);
        mem_69598_cached_sizze_76404 = bytes_69560;
    }
    if (mem_69601_cached_sizze_76405 < (size_t) bytes_69557) {
        mem_69601 = realloc(mem_69601, bytes_69557);
        mem_69601_cached_sizze_76405 = bytes_69557;
    }
    if (mem_69628_cached_sizze_76406 < (size_t) bytes_69560) {
        mem_69628 = realloc(mem_69628, bytes_69560);
        mem_69628_cached_sizze_76406 = bytes_69560;
    }
    if (mem_69631_cached_sizze_76407 < (size_t) bytes_69557) {
        mem_69631 = realloc(mem_69631, bytes_69557);
        mem_69631_cached_sizze_76407 = bytes_69557;
    }
    if (mem_69634_cached_sizze_76408 < (size_t) bytes_69557) {
        mem_69634 = realloc(mem_69634, bytes_69557);
        mem_69634_cached_sizze_76408 = bytes_69557;
    }
    if (mem_69673_cached_sizze_76409 < (size_t) bytes_69575) {
        mem_69673 = realloc(mem_69673, bytes_69575);
        mem_69673_cached_sizze_76409 = bytes_69575;
    }
    if (mem_69688_cached_sizze_76410 < (size_t) bytes_69578) {
        mem_69688 = realloc(mem_69688, bytes_69578);
        mem_69688_cached_sizze_76410 = bytes_69578;
    }
    for (; iter_70821 < end; iter_70821++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71006 = m_64027;
        int64_t gtid_65513 = iter_70821;
        int64_t remnant_71007 = iter_70821 - gtid_65513;
        int64_t discard_69097;
        int64_t scanacc_70823 = (int64_t) 0;
        
        for (int64_t i_70822 = 0; i_70822 < n_64028; i_70822++) {
            float x_70825 = ((float *) Y_mem_69552.mem)[gtid_65513 * n_64028 +
                                                        i_70822];
            bool isnan_res_70826;
            
            isnan_res_70826 = futrts_isnan32(x_70825);
            
            bool defunc_0_p_res_70827 = !isnan_res_70826;
            int64_t defunc_0_f_res_70828 = btoi_bool_i64(defunc_0_p_res_70827);
            int64_t defunc_1_op_res_70829 = add64(defunc_0_f_res_70828,
                                                  scanacc_70823);
            
            ((int64_t *) mem_69583)[i_70822] = defunc_1_op_res_70829;
            
            int64_t scanacc_tmp_71008 = defunc_1_op_res_70829;
            
            scanacc_70823 = scanacc_tmp_71008;
        }
        discard_69097 = scanacc_70823;
        
        int64_t last_res_64076 = ((int64_t *) mem_69583)[i_64040];
        
        for (int64_t i_71010 = 0; i_71010 < n_64028; i_71010++) {
            ((float *) mem_69598)[i_71010] = 0.0F;
        }
        for (int64_t i_71011 = 0; i_71011 < n_64028; i_71011++) {
            ((int64_t *) mem_69601)[i_71011] = (int64_t) -1;
        }
        for (int64_t write_iter_70831 = 0; write_iter_70831 < n_64028;
             write_iter_70831++) {
            float write_iv_70834 = ((float *) Y_mem_69552.mem)[gtid_65513 *
                                                               n_64028 +
                                                               write_iter_70831];
            bool isnan_res_70835;
            
            isnan_res_70835 = futrts_isnan32(write_iv_70834);
            
            bool defunc_0_p_res_70836 = !isnan_res_70835;
            int64_t defunc_1_f_res_70837;
            
            if (defunc_0_p_res_70836) {
                int64_t write_iv_70838 =
                        ((int64_t *) mem_69583)[write_iter_70831];
                int64_t defunc_1_f_res_t_res_70839 = sub64(write_iv_70838,
                                                           (int64_t) 1);
                
                defunc_1_f_res_70837 = defunc_1_f_res_t_res_70839;
            } else {
                defunc_1_f_res_70837 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_70837) &&
                slt64(defunc_1_f_res_70837, n_64028)) {
                ((int64_t *) mem_69601)[defunc_1_f_res_70837] =
                    write_iter_70831;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_70837) &&
                slt64(defunc_1_f_res_70837, n_64028)) {
                memmove(mem_69598 + defunc_1_f_res_70837 * (int64_t) 4,
                        Y_mem_69552.mem + (gtid_65513 * n_64028 +
                                           write_iter_70831) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_64094 = sub64(last_res_64076, min_res_64046);
        float i64_res_64095 = sitofp_i64_f32(last_res_64076);
        float x_64096 = i64_res_64053 - i64_res_64095;
        float max_arg_64097 = x_64096 / 2.0F;
        float max_res_64098 = fmax32(0.0F, max_arg_64097);
        
        for (int64_t i_70843 = 0; i_70843 < n_64028; i_70843++) {
            int64_t x_70847 = ((int64_t *) mem_69601)[i_70843];
            int64_t defunc_0_f_res_70848 = add64((int64_t) 1, x_70847);
            bool cond_70849 = slt64(defunc_0_f_res_70848, (int64_t) 0);
            int64_t defunc_0_f_res_70850;
            
            if (cond_70849) {
                defunc_0_f_res_70850 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_70850 = defunc_0_f_res_70848;
            }
            
            float defunc_0_f_res_70851 = sitofp_i64_f32(x_70847);
            
            ((float *) mem_69628)[i_70843] = defunc_0_f_res_70851;
            ((int64_t *) mem_69631)[i_70843] = defunc_0_f_res_70850;
            ((int64_t *) mem_69634)[i_70843] = defunc_0_f_res_70848;
        }
        for (int64_t i_70855 = 0; i_70855 < q_64030; i_70855++) {
            bool cond_70857 = sle64(last_res_64076, i_70855);
            float defunc_0_f_res_70858;
            
            if (cond_70857) {
                defunc_0_f_res_70858 = 0.0F;
            } else {
                defunc_0_f_res_70858 = 1.0F;
            }
            ((float *) mem_69673)[i_70855] = defunc_0_f_res_70858;
        }
        for (int64_t i_70860 = 0; i_70860 < n_m_64039; i_70860++) {
            int64_t min_arg_70862 = mul64(jump_64032, i_70860);
            int64_t min_res_70863 = smin64(i_64040, min_arg_70862);
            int64_t defunc_0_g_res_70864 = add64((int64_t) 1, min_res_70863);
            bool nearest_idx_70865;
            int64_t nearest_idx_70866;
            int64_t nearest_idx_70867;
            bool loop_while_70868;
            int64_t low_70869;
            int64_t high_70870;
            
            loop_while_70868 = x_64041;
            low_70869 = (int64_t) 0;
            high_70870 = i_64040;
            while (loop_while_70868) {
                int64_t x_70871 = add64(low_70869, high_70870);
                int64_t mid_70872 = sdiv64(x_70871, (int64_t) 2);
                bool x_70873 = sle64((int64_t) 0, mid_70872);
                bool y_70874 = slt64(mid_70872, n_64028);
                bool bounds_check_70875 = x_70873 && y_70874;
                bool index_certs_70876;
                
                if (!bounds_check_70875) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_70872,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t x_70877 = ((int64_t *) mem_69631)[mid_70872];
                bool cond_70878 = sle64(defunc_0_g_res_70864, x_70877);
                int64_t loopres_70879;
                int64_t loopres_70880;
                
                if (cond_70878) {
                    int64_t loopres_t_res_70881 = sub64(mid_70872, (int64_t) 1);
                    
                    loopres_70879 = low_70869;
                    loopres_70880 = loopres_t_res_70881;
                } else {
                    int64_t loopres_f_res_70882 = add64((int64_t) 1, mid_70872);
                    
                    loopres_70879 = loopres_f_res_70882;
                    loopres_70880 = high_70870;
                }
                
                bool loop_cond_70883 = sle64(loopres_70879, loopres_70880);
                bool loop_while_tmp_71019 = loop_cond_70883;
                int64_t low_tmp_71020 = loopres_70879;
                int64_t high_tmp_71021 = loopres_70880;
                
                loop_while_70868 = loop_while_tmp_71019;
                low_70869 = low_tmp_71020;
                high_70870 = high_tmp_71021;
            }
            nearest_idx_70865 = loop_while_70868;
            nearest_idx_70866 = low_70869;
            nearest_idx_70867 = high_70870;
            
            int64_t max_arg_70884 = sub64(nearest_idx_70866, min_res_64046);
            int64_t max_res_70885 = smax64((int64_t) 0, max_arg_70884);
            int64_t j_70886 = add64(min_res_64046, max_res_70885);
            int64_t i_p_m_t_s_70887 = add64(m_64052, max_res_70885);
            bool zzero_leq_i_p_m_t_s_70888 = sle64((int64_t) 0,
                                                   i_p_m_t_s_70887);
            bool i_p_m_t_s_leq_w_70889 = slt64(i_p_m_t_s_70887, n_64028);
            bool zzero_lte_i_70890 = sle64((int64_t) 0, max_res_70885);
            bool i_lte_j_70891 = sle64(max_res_70885, j_70886);
            bool y_70892 = i_p_m_t_s_leq_w_70889 && zzero_lte_i_70890;
            bool y_70893 = zzero_leq_i_p_m_t_s_70888 && y_70892;
            bool y_70894 = i_lte_j_70891 && y_70893;
            bool forwards_ok_70895 = zzero_lte_i_70890 && y_70894;
            bool ok_or_empty_70896 = empty_slice_64051 || forwards_ok_70895;
            bool index_certs_70897;
            
            if (!ok_or_empty_70896) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_70885, ":",
                              (long long) j_70886,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_70898;
            int64_t redout_70900 = (int64_t) 0;
            
            for (int64_t i_70899 = 0; i_70899 < min_res_64046; i_70899++) {
                int64_t slice_70901 = max_res_70885 + i_70899;
                int64_t x_70902 = ((int64_t *) mem_69634)[slice_70901];
                int64_t abs_arg_70903 = sub64(x_70902, defunc_0_g_res_70864);
                int64_t abs_res_70904 = abs64(abs_arg_70903);
                int64_t defunc_1_op_res_70905 = add64(abs_res_70904,
                                                      redout_70900);
                int64_t redout_tmp_71022 = defunc_1_op_res_70905;
                
                redout_70900 = redout_tmp_71022;
            }
            defunc_2_reduce_res_70898 = redout_70900;
            
            int64_t idx_70906;
            int64_t idx_70907;
            int64_t idx_70908;
            int64_t idx_70909;
            int64_t best_idx_70911;
            int64_t last_idx_70912;
            int64_t best_sum_70913;
            int64_t curr_sum_70914;
            
            best_idx_70911 = max_res_70885;
            last_idx_70912 = max_res_70885;
            best_sum_70913 = defunc_2_reduce_res_70898;
            curr_sum_70914 = defunc_2_reduce_res_70898;
            for (int64_t j_70910 = 0; j_70910 < min_res_64046; j_70910++) {
                int64_t new_idx_70915 = add64(max_res_70885, j_70910);
                int64_t x_70916 = add64(min_res_64046, new_idx_70915);
                bool cond_70917 = slt64(last_res_64076, x_70916);
                int64_t new_sum_70918;
                
                if (cond_70917) {
                    new_sum_70918 = (int64_t) 9223372036854775807;
                } else {
                    bool x_70919 = sle64((int64_t) 0, last_idx_70912);
                    bool y_70920 = slt64(last_idx_70912, n_64028);
                    bool bounds_check_70921 = x_70919 && y_70920;
                    bool index_certs_70922;
                    
                    if (!bounds_check_70921) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_70912,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        return 1;
                    }
                    
                    int64_t y_70923 = ((int64_t *) mem_69634)[last_idx_70912];
                    int64_t binop_p_70924 = sub64(defunc_0_g_res_70864,
                                                  y_70923);
                    int64_t defunc_0_f_res_70925 = abs64(binop_p_70924);
                    int64_t x_70926 = sub64(curr_sum_70914,
                                            defunc_0_f_res_70925);
                    int64_t min_arg_70927 = add64(min_res_64046,
                                                  last_idx_70912);
                    int64_t min_res_70928 = smin64(i_64040, min_arg_70927);
                    bool x_70929 = sle64((int64_t) 0, min_res_70928);
                    bool y_70930 = slt64(min_res_70928, n_64028);
                    bool bounds_check_70931 = x_70929 && y_70930;
                    bool index_certs_70932;
                    
                    if (!bounds_check_70931) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_70928,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        return 1;
                    }
                    
                    int64_t y_70933 = ((int64_t *) mem_69634)[min_res_70928];
                    int64_t binop_p_70934 = sub64(defunc_0_g_res_70864,
                                                  y_70933);
                    int64_t defunc_0_f_res_70935 = abs64(binop_p_70934);
                    int64_t new_sum_f_res_70936 = add64(x_70926,
                                                        defunc_0_f_res_70935);
                    
                    new_sum_70918 = new_sum_f_res_70936;
                }
                
                bool cond_70937 = sle64(new_sum_70918, best_sum_70913);
                int64_t loopres_70938;
                
                if (cond_70937) {
                    loopres_70938 = new_idx_70915;
                } else {
                    loopres_70938 = best_idx_70911;
                }
                
                int64_t loopres_70939;
                
                if (cond_70937) {
                    loopres_70939 = new_sum_70918;
                } else {
                    loopres_70939 = best_sum_70913;
                }
                
                int64_t best_idx_tmp_71023 = loopres_70938;
                int64_t last_idx_tmp_71024 = new_idx_70915;
                int64_t best_sum_tmp_71025 = loopres_70939;
                int64_t curr_sum_tmp_71026 = new_sum_70918;
                
                best_idx_70911 = best_idx_tmp_71023;
                last_idx_70912 = last_idx_tmp_71024;
                best_sum_70913 = best_sum_tmp_71025;
                curr_sum_70914 = curr_sum_tmp_71026;
            }
            idx_70906 = best_idx_70911;
            idx_70907 = last_idx_70912;
            idx_70908 = best_sum_70913;
            idx_70909 = curr_sum_70914;
            
            int64_t min_res_70940 = smin64(min_arg_64094, idx_70906);
            int64_t x_70941 = add64(min_res_64046, min_res_70940);
            int64_t r_70942 = sub64(x_70941, (int64_t) 1);
            bool x_70943 = sle64((int64_t) 0, r_70942);
            bool y_70944 = slt64(r_70942, n_64028);
            bool bounds_check_70945 = x_70943 && y_70944;
            bool index_certs_70946;
            
            if (!bounds_check_70945) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_70942,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_70947 = ((int64_t *) mem_69601)[r_70942];
            int64_t abs_arg_70948 = sub64(x_70947, min_res_70863);
            int64_t abs_res_70949 = abs64(abs_arg_70948);
            bool x_70950 = sle64((int64_t) 0, min_res_70940);
            bool y_70951 = slt64(min_res_70940, n_64028);
            bool bounds_check_70952 = x_70950 && y_70951;
            bool index_certs_70953;
            
            if (!bounds_check_70952) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_70940,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_70954 = ((int64_t *) mem_69601)[min_res_70940];
            int64_t abs_arg_70955 = sub64(x_70954, min_res_70863);
            int64_t abs_res_70956 = abs64(abs_arg_70955);
            int64_t max_res_70957 = smax64(abs_res_70949, abs_res_70956);
            float defunc_0_f_res_70958 = sitofp_i64_f32(max_res_70957);
            float defunc_1_f_res_70959 = max_res_64098 + defunc_0_f_res_70958;
            float defunc_0_f_res_70960 = sitofp_i64_f32(min_res_70863);
            float defunc_2_reduce_res_70961;
            float redout_70963 = 0.0F;
            
            for (int64_t i_70962 = 0; i_70962 < q_64030; i_70962++) {
                float x_70964 = ((float *) mem_69673)[i_70962];
                bool cond_70965 = sle64(last_res_64076, i_70962);
                float defunc_0_f_res_70966;
                
                if (cond_70965) {
                    defunc_0_f_res_70966 = 0.0F;
                } else {
                    int64_t i_70967 = add64(min_res_70940, i_70962);
                    float x_70968 = ((float *) mem_69628)[i_70967];
                    float defunc_0_f_res_f_res_70969 = 1.0F + x_70968;
                    
                    defunc_0_f_res_70966 = defunc_0_f_res_f_res_70969;
                }
                
                float x_j_70970 = defunc_0_f_res_70966 - defunc_0_f_res_70960;
                float abs_res_70971 = (float) fabs(x_j_70970);
                float tmp1_70972 = abs_res_70971 / defunc_1_f_res_70959;
                float x_70973 = tmp1_70972 * tmp1_70972;
                float y_70974 = tmp1_70972 * x_70973;
                float tmp2_70975 = 1.0F - y_70974;
                float x_70976 = tmp2_70975 * tmp2_70975;
                float tmp3_70977 = tmp2_70975 * x_70976;
                float w_j_70978 = x_70964 * tmp3_70977;
                float defunc_1_op_res_70979 = w_j_70978 + redout_70963;
                float redout_tmp_71027 = defunc_1_op_res_70979;
                
                redout_70963 = redout_tmp_71027;
            }
            defunc_2_reduce_res_70961 = redout_70963;
            
            float a0_70980 = 1.0F / defunc_2_reduce_res_70961;
            float defunc_2_reduce_res_70981;
            float redout_70983 = 0.0F;
            
            for (int64_t i_70982 = 0; i_70982 < q_64030; i_70982++) {
                float x_70984 = ((float *) mem_69673)[i_70982];
                bool cond_70985 = sle64(last_res_64076, i_70982);
                float defunc_0_f_res_70986;
                
                if (cond_70985) {
                    defunc_0_f_res_70986 = 0.0F;
                } else {
                    int64_t i_70987 = add64(min_res_70940, i_70982);
                    float x_70988 = ((float *) mem_69628)[i_70987];
                    float defunc_0_f_res_f_res_70989 = 1.0F + x_70988;
                    
                    defunc_0_f_res_70986 = defunc_0_f_res_f_res_70989;
                }
                
                float x_j_70990 = defunc_0_f_res_70986 - defunc_0_f_res_70960;
                float abs_res_70991 = (float) fabs(x_j_70990);
                float tmp1_70992 = abs_res_70991 / defunc_1_f_res_70959;
                float x_70993 = tmp1_70992 * tmp1_70992;
                float y_70994 = tmp1_70992 * x_70993;
                float tmp2_70995 = 1.0F - y_70994;
                float x_70996 = tmp2_70995 * tmp2_70995;
                float tmp3_70997 = tmp2_70995 * x_70996;
                float tmp4_70998 = x_70984 * tmp3_70997;
                float defunc_0_f_res_70999;
                
                if (cond_70985) {
                    defunc_0_f_res_70999 = 0.0F;
                } else {
                    int64_t i_71000 = add64(min_res_70940, i_70982);
                    float x_71001 = ((float *) mem_69598)[i_71000];
                    
                    defunc_0_f_res_70999 = x_71001;
                }
                
                float x_71002 = a0_70980 * tmp4_70998;
                float defunc_9_fit_fun_res_71003 = defunc_0_f_res_70999 *
                      x_71002;
                float defunc_1_op_res_71004 = defunc_9_fit_fun_res_71003 +
                      redout_70983;
                float redout_tmp_71028 = defunc_1_op_res_71004;
                
                redout_70983 = redout_tmp_71028;
            }
            defunc_2_reduce_res_70981 = redout_70983;
            ((float *) mem_69688)[i_70860] = defunc_2_reduce_res_70981;
        }
        memmove(mem_69704.mem + gtid_65513 * n_m_64039 * (int64_t) 4,
                mem_69688 + (int64_t) 0, n_m_64039 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_69583);
    free(mem_69598);
    free(mem_69601);
    free(mem_69628);
    free(mem_69631);
    free(mem_69634);
    free(mem_69673);
    free(mem_69688);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76402_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76402_end -
                 futhark_mc_segmap_parloop_76402_start;
        
        ctx->futhark_mc_segmap_parloop_76402_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76402_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76402_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76400(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65512 = tid;
    int num_tasks_70820 = info.nsubtasks;
    struct futhark_mc_task_76399 *futhark_mc_task_76399 =
                                 (struct futhark_mc_task_76399 *) args;
    struct futhark_context *ctx = futhark_mc_task_76399->ctx;
    uint64_t futhark_mc_segmap_task_76400_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76400_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_task_76399->free_m_64027;
    int64_t n_64028 = futhark_mc_task_76399->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76399->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76399->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76399->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76399->free_i_64040;
    bool x_64041 = futhark_mc_task_76399->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76399->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76399->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76399->free_m_64052;
    float i64_res_64053 = futhark_mc_task_76399->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76399->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_69557 = futhark_mc_task_76399->free_bytes_69557;
    int64_t bytes_69560 = futhark_mc_task_76399->free_bytes_69560;
    int64_t bytes_69575 = futhark_mc_task_76399->free_bytes_69575;
    int64_t bytes_69578 = futhark_mc_task_76399->free_bytes_69578;
    struct memblock mem_69704 = {.desc ="mem_69704", .mem =
                                 futhark_mc_task_76399->free_mem_69704, .size =
                                 0, .references =NULL};
    int64_t iter_70821;
    struct futhark_mc_segmap_parloop_struct_76401
    futhark_mc_segmap_parloop_struct_76401;
    
    futhark_mc_segmap_parloop_struct_76401.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76401.free_m_64027 = m_64027;
    futhark_mc_segmap_parloop_struct_76401.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76401.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76401.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76401.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76401.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76401.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76401.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76401.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76401.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76401.free_i64_res_64053 = i64_res_64053;
    futhark_mc_segmap_parloop_struct_76401.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76401.free_bytes_69557 = bytes_69557;
    futhark_mc_segmap_parloop_struct_76401.free_bytes_69560 = bytes_69560;
    futhark_mc_segmap_parloop_struct_76401.free_bytes_69575 = bytes_69575;
    futhark_mc_segmap_parloop_struct_76401.free_bytes_69578 = bytes_69578;
    futhark_mc_segmap_parloop_struct_76401.free_mem_69704 = mem_69704.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76402_task;
    
    futhark_mc_segmap_parloop_76402_task.name =
        "futhark_mc_segmap_parloop_76402";
    futhark_mc_segmap_parloop_76402_task.fn = futhark_mc_segmap_parloop_76402;
    futhark_mc_segmap_parloop_76402_task.args =
        &futhark_mc_segmap_parloop_struct_76401;
    futhark_mc_segmap_parloop_76402_task.iterations = iterations;
    futhark_mc_segmap_parloop_76402_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76402_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76402_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76402_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76402_task);
    
    if (futhark_mc_segmap_parloop_76402_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76402_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76402_total_end -
                 futhark_mc_segmap_parloop_76402_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76402_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76402_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76402_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76400_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76400_end -
                 futhark_mc_segmap_task_76400_start;
        
        ctx->futhark_mc_segmap_task_76400_runs[tid]++;
        ctx->futhark_mc_segmap_task_76400_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76400_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76412 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_69557;
    int64_t free_bytes_69560;
    int64_t free_bytes_69575;
    int64_t free_bytes_69578;
    char *free_mem_69704;
};
struct futhark_mc_task_76422 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_65515;
    char *free_Y_mem_69552;
    char *free_mem_69559;
};
struct futhark_mc_scan_stage_1_parloop_struct_76425 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_65515;
    char *free_Y_mem_69552;
    char *free_mem_69559;
};
static int futhark_mc_scan_stage_1_parloop_76426(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_65516, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_76425
    *futhark_mc_scan_stage_1_parloop_struct_76425 =
    (struct futhark_mc_scan_stage_1_parloop_struct_76425 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_76425->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_76426_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76426_start = get_wall_time();
    
    int64_t n_64028 =
            futhark_mc_scan_stage_1_parloop_struct_76425->free_n_64028;
    int64_t gtid_65515 =
            futhark_mc_scan_stage_1_parloop_struct_76425->free_gtid_65515;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_76425->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69559 = {.desc ="mem_69559", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_76425->free_mem_69559,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71339 = start;
    int64_t x_71030;
    int64_t x_71031;
    
    x_71030 = (int64_t) 0;
    for (; iter_71339 < end; iter_71339++) {
        int64_t gtid_65517 = iter_71339;
        
        // stage 1 scan body
        {
            float x_71033 = ((float *) Y_mem_69552.mem)[gtid_65515 * n_64028 +
                                                        gtid_65517];
            bool isnan_res_71034;
            
            isnan_res_71034 = futrts_isnan32(x_71033);
            
            bool defunc_0_p_res_71035 = !isnan_res_71034;
            int64_t defunc_0_f_res_71036 = btoi_bool_i64(defunc_0_p_res_71035);
            
            // write mapped values results to memory
            { }
            x_71030 = x_71030;
            // Read next values
            {
                x_71031 = defunc_0_f_res_71036;
            }
            
            int64_t defunc_1_op_res_71032 = add64(x_71030, x_71031);
            
            ((int64_t *) mem_69559.mem)[gtid_65517] = defunc_1_op_res_71032;
            x_71030 = defunc_1_op_res_71032;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76426_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76426_end -
                 futhark_mc_scan_stage_1_parloop_76426_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_76426_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_76426_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_76426_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_76427 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_65515;
    char *free_Y_mem_69552;
    char *free_mem_69559;
};
static int futhark_mc_scan_stage_3_parloop_76428(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_65516, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_76427
    *futhark_mc_scan_stage_3_parloop_struct_76427 =
    (struct futhark_mc_scan_stage_3_parloop_struct_76427 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_76427->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_76428_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_76428_start = get_wall_time();
    
    int64_t n_64028 =
            futhark_mc_scan_stage_3_parloop_struct_76427->free_n_64028;
    int64_t gtid_65515 =
            futhark_mc_scan_stage_3_parloop_struct_76427->free_gtid_65515;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_76427->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69559 = {.desc ="mem_69559", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_76427->free_mem_69559,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71351 = start;
    int64_t x_71348;
    int64_t x_71349;
    
    if (iter_71351 == (int64_t) 0) {
        x_71348 = (int64_t) 0;
    } else {
        x_71348 = ((int64_t *) mem_69559.mem)[iter_71351 - (int64_t) 1];
    }
    for (; iter_71351 < end; iter_71351++) {
        int64_t gtid_65517 = iter_71351;
        
        // stage 3 scan body
        {
            float x_71033 = ((float *) Y_mem_69552.mem)[gtid_65515 * n_64028 +
                                                        gtid_65517];
            bool isnan_res_71034;
            
            isnan_res_71034 = futrts_isnan32(x_71033);
            
            bool defunc_0_p_res_71035 = !isnan_res_71034;
            int64_t defunc_0_f_res_71036 = btoi_bool_i64(defunc_0_p_res_71035);
            
            x_71348 = x_71348;
            x_71349 = defunc_0_f_res_71036;
            
            int64_t defunc_1_op_res_71350 = add64(x_71348, x_71349);
            
            ((int64_t *) mem_69559.mem)[gtid_65517] = defunc_1_op_res_71350;
            x_71348 = defunc_1_op_res_71350;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_76428_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76428_end -
                 futhark_mc_scan_stage_3_parloop_76428_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_76428_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_76428_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_76428_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_76423(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65516 = tid;
    int num_tasks_71338 = info.nsubtasks;
    struct futhark_mc_task_76422 *futhark_mc_task_76422 =
                                 (struct futhark_mc_task_76422 *) args;
    struct futhark_context *ctx = futhark_mc_task_76422->ctx;
    uint64_t futhark_mc_segscan_task_76423_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_76423_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76422->free_n_64028;
    int64_t gtid_65515 = futhark_mc_task_76422->free_gtid_65515;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76422->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69559 = {.desc ="mem_69559", .mem =
                                 futhark_mc_task_76422->free_mem_69559, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_71345_cached_sizze_76424 = 0;
    char *scan_stage_2_accum_mem_71345 = NULL;
    int64_t iter_71339;
    struct futhark_mc_scan_stage_1_parloop_struct_76425
    futhark_mc_scan_stage_1_parloop_struct_76425;
    
    futhark_mc_scan_stage_1_parloop_struct_76425.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_76425.free_n_64028 = n_64028;
    futhark_mc_scan_stage_1_parloop_struct_76425.free_gtid_65515 = gtid_65515;
    futhark_mc_scan_stage_1_parloop_struct_76425.free_Y_mem_69552 =
        Y_mem_69552.mem;
    futhark_mc_scan_stage_1_parloop_struct_76425.free_mem_69559 = mem_69559.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_76426_task;
    
    futhark_mc_scan_stage_1_parloop_76426_task.name =
        "futhark_mc_scan_stage_1_parloop_76426";
    futhark_mc_scan_stage_1_parloop_76426_task.fn =
        futhark_mc_scan_stage_1_parloop_76426;
    futhark_mc_scan_stage_1_parloop_76426_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_76425;
    futhark_mc_scan_stage_1_parloop_76426_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_76426_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_76426_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76426_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_76426_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_76426_task);
    
    if (futhark_mc_scan_stage_1_parloop_76426_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76426_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76426_total_end -
                 futhark_mc_scan_stage_1_parloop_76426_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76426_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76426_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76426_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_71338)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_71340;
        int64_t x_71341;
        int64_t offset_71343 = (int64_t) 0;
        int64_t offset_index_71344 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_71345_cached_sizze_76424 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_71345 = realloc(scan_stage_2_accum_mem_71345,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_71345_cached_sizze_76424 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_71345)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_71347 = 0; i_71347 < num_tasks_71338 - 1; i_71347++) {
            offset_71343 = squot64(n_64028, sext_i32_i64(num_tasks_71338));
            if (slt64(sext_i32_i64(i_71347), srem64(n_64028,
                                                    sext_i32_i64(num_tasks_71338)))) {
                offset_71343 += (int64_t) 1;
            }
            offset_index_71344 += offset_71343;
            
            int64_t gtid_65517 = offset_index_71344;
            float x_71033 = ((float *) Y_mem_69552.mem)[gtid_65515 * n_64028 +
                                                        gtid_65517];
            bool isnan_res_71034;
            
            isnan_res_71034 = futrts_isnan32(x_71033);
            
            bool defunc_0_p_res_71035 = !isnan_res_71034;
            int64_t defunc_0_f_res_71036 = btoi_bool_i64(defunc_0_p_res_71035);
            
            // Read carry in
            {
                x_71340 =
                    ((int64_t *) scan_stage_2_accum_mem_71345)[(int64_t) 0];
            }
            // Read next values
            {
                x_71341 = ((int64_t *) mem_69559.mem)[offset_index_71344 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_71342 = add64(x_71340, x_71341);
            
            ((int64_t *) mem_69559.mem)[offset_index_71344 - (int64_t) 1] =
                defunc_1_op_res_71342;
            ((int64_t *) scan_stage_2_accum_mem_71345)[(int64_t) 0] =
                defunc_1_op_res_71342;
        }
        
        int64_t iter_71351 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_76427
        futhark_mc_scan_stage_3_parloop_struct_76427;
        
        futhark_mc_scan_stage_3_parloop_struct_76427.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_76427.free_n_64028 = n_64028;
        futhark_mc_scan_stage_3_parloop_struct_76427.free_gtid_65515 =
            gtid_65515;
        futhark_mc_scan_stage_3_parloop_struct_76427.free_Y_mem_69552 =
            Y_mem_69552.mem;
        futhark_mc_scan_stage_3_parloop_struct_76427.free_mem_69559 =
            mem_69559.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_76428_task;
        
        futhark_mc_scan_stage_3_parloop_76428_task.name =
            "futhark_mc_scan_stage_3_parloop_76428";
        futhark_mc_scan_stage_3_parloop_76428_task.fn =
            futhark_mc_scan_stage_3_parloop_76428;
        futhark_mc_scan_stage_3_parloop_76428_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_76427;
        futhark_mc_scan_stage_3_parloop_76428_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_76428_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_76428_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_76428_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_76428_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_76428_task);
        
        if (futhark_mc_scan_stage_3_parloop_76428_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_76428_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76428_total_end -
                     futhark_mc_scan_stage_3_parloop_76428_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76428_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76428_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76428_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_71345);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_76423_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_76423_end -
                 futhark_mc_segscan_task_76423_start;
        
        ctx->futhark_mc_segscan_task_76423_runs[tid]++;
        ctx->futhark_mc_segscan_task_76423_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_76423_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76429 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_65515;
    char *free_Y_mem_69552;
    char *free_mem_69559;
    char *free_mem_69562;
    char *free_mem_69565;
};
struct futhark_mc_segmap_parloop_struct_76431 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_65515;
    char *free_Y_mem_69552;
    char *free_mem_69559;
    char *free_mem_69562;
    char *free_mem_69565;
};
static int futhark_mc_segmap_parloop_76432(void *args, int64_t start,
                                           int64_t end, int flat_tid_65518,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76431
    *futhark_mc_segmap_parloop_struct_76431 =
    (struct futhark_mc_segmap_parloop_struct_76431 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76431->ctx;
    uint64_t futhark_mc_segmap_parloop_76432_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76432_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76431->free_n_64028;
    int64_t gtid_65515 =
            futhark_mc_segmap_parloop_struct_76431->free_gtid_65515;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76431->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69559 = {.desc ="mem_69559", .mem =
                                 futhark_mc_segmap_parloop_struct_76431->free_mem_69559,
                                 .size =0, .references =NULL};
    struct memblock mem_69562 = {.desc ="mem_69562", .mem =
                                 futhark_mc_segmap_parloop_struct_76431->free_mem_69562,
                                 .size =0, .references =NULL};
    struct memblock mem_69565 = {.desc ="mem_69565", .mem =
                                 futhark_mc_segmap_parloop_struct_76431->free_mem_69565,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71355 = start;
    
    for (; iter_71355 < end; iter_71355++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71358 = n_64028;
        int64_t gtid_65519 = iter_71355;
        int64_t remnant_71359 = iter_71355 - gtid_65519;
        float x_71037 = ((float *) Y_mem_69552.mem)[gtid_65515 * n_64028 +
                                                    gtid_65519];
        bool isnan_res_71038;
        
        isnan_res_71038 = futrts_isnan32(x_71037);
        
        bool defunc_0_p_res_71039 = !isnan_res_71038;
        int64_t defunc_1_f_res_71040;
        
        if (defunc_0_p_res_71039) {
            int64_t x_71356 = ((int64_t *) mem_69559.mem)[gtid_65519];
            int64_t defunc_1_f_res_t_res_71357 = sub64(x_71356, (int64_t) 1);
            
            defunc_1_f_res_71040 = defunc_1_f_res_t_res_71357;
        } else {
            defunc_1_f_res_71040 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_71040) &&
            slt64(defunc_1_f_res_71040, n_64028)) {
            ((int64_t *) mem_69565.mem)[defunc_1_f_res_71040] = gtid_65519;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_71040) &&
            slt64(defunc_1_f_res_71040, n_64028)) {
            ((float *) mem_69562.mem)[defunc_1_f_res_71040] = x_71037;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76432_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76432_end -
                 futhark_mc_segmap_parloop_76432_start;
        
        ctx->futhark_mc_segmap_parloop_76432_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76432_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76432_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76430(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65518 = tid;
    int num_tasks_71354 = info.nsubtasks;
    struct futhark_mc_task_76429 *futhark_mc_task_76429 =
                                 (struct futhark_mc_task_76429 *) args;
    struct futhark_context *ctx = futhark_mc_task_76429->ctx;
    uint64_t futhark_mc_segmap_task_76430_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76430_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76429->free_n_64028;
    int64_t gtid_65515 = futhark_mc_task_76429->free_gtid_65515;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76429->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69559 = {.desc ="mem_69559", .mem =
                                 futhark_mc_task_76429->free_mem_69559, .size =
                                 0, .references =NULL};
    struct memblock mem_69562 = {.desc ="mem_69562", .mem =
                                 futhark_mc_task_76429->free_mem_69562, .size =
                                 0, .references =NULL};
    struct memblock mem_69565 = {.desc ="mem_69565", .mem =
                                 futhark_mc_task_76429->free_mem_69565, .size =
                                 0, .references =NULL};
    int64_t iter_71355;
    struct futhark_mc_segmap_parloop_struct_76431
    futhark_mc_segmap_parloop_struct_76431;
    
    futhark_mc_segmap_parloop_struct_76431.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76431.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76431.free_gtid_65515 = gtid_65515;
    futhark_mc_segmap_parloop_struct_76431.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76431.free_mem_69559 = mem_69559.mem;
    futhark_mc_segmap_parloop_struct_76431.free_mem_69562 = mem_69562.mem;
    futhark_mc_segmap_parloop_struct_76431.free_mem_69565 = mem_69565.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76432_task;
    
    futhark_mc_segmap_parloop_76432_task.name =
        "futhark_mc_segmap_parloop_76432";
    futhark_mc_segmap_parloop_76432_task.fn = futhark_mc_segmap_parloop_76432;
    futhark_mc_segmap_parloop_76432_task.args =
        &futhark_mc_segmap_parloop_struct_76431;
    futhark_mc_segmap_parloop_76432_task.iterations = iterations;
    futhark_mc_segmap_parloop_76432_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76432_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76432_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76432_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76432_task);
    
    if (futhark_mc_segmap_parloop_76432_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76432_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76432_total_end -
                 futhark_mc_segmap_parloop_76432_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76432_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76432_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76432_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76430_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76430_end -
                 futhark_mc_segmap_task_76430_start;
        
        ctx->futhark_mc_segmap_task_76430_runs[tid]++;
        ctx->futhark_mc_segmap_task_76430_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76430_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76433 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    char *free_mem_69565;
    char *free_mem_69568;
    char *free_mem_69571;
    char *free_mem_69574;
};
struct futhark_mc_segmap_parloop_struct_76435 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    char *free_mem_69565;
    char *free_mem_69568;
    char *free_mem_69571;
    char *free_mem_69574;
};
static int futhark_mc_segmap_parloop_76436(void *args, int64_t start,
                                           int64_t end, int flat_tid_65520,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76435
    *futhark_mc_segmap_parloop_struct_76435 =
    (struct futhark_mc_segmap_parloop_struct_76435 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76435->ctx;
    uint64_t futhark_mc_segmap_parloop_76436_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76436_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76435->free_n_64028;
    struct memblock mem_69565 = {.desc ="mem_69565", .mem =
                                 futhark_mc_segmap_parloop_struct_76435->free_mem_69565,
                                 .size =0, .references =NULL};
    struct memblock mem_69568 = {.desc ="mem_69568", .mem =
                                 futhark_mc_segmap_parloop_struct_76435->free_mem_69568,
                                 .size =0, .references =NULL};
    struct memblock mem_69571 = {.desc ="mem_69571", .mem =
                                 futhark_mc_segmap_parloop_struct_76435->free_mem_69571,
                                 .size =0, .references =NULL};
    struct memblock mem_69574 = {.desc ="mem_69574", .mem =
                                 futhark_mc_segmap_parloop_struct_76435->free_mem_69574,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71361 = start;
    
    for (; iter_71361 < end; iter_71361++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71362 = n_64028;
        int64_t gtid_65521 = iter_71361;
        int64_t remnant_71363 = iter_71361 - gtid_65521;
        int64_t x_71043 = ((int64_t *) mem_69565.mem)[gtid_65521];
        int64_t defunc_0_f_res_71044 = add64((int64_t) 1, x_71043);
        bool cond_71045 = slt64(defunc_0_f_res_71044, (int64_t) 0);
        int64_t defunc_0_f_res_71046;
        
        if (cond_71045) {
            defunc_0_f_res_71046 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_71046 = defunc_0_f_res_71044;
        }
        
        float defunc_0_f_res_71047 = sitofp_i64_f32(x_71043);
        
        ((float *) mem_69568.mem)[gtid_65521] = defunc_0_f_res_71047;
        ((int64_t *) mem_69571.mem)[gtid_65521] = defunc_0_f_res_71046;
        ((int64_t *) mem_69574.mem)[gtid_65521] = defunc_0_f_res_71044;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76436_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76436_end -
                 futhark_mc_segmap_parloop_76436_start;
        
        ctx->futhark_mc_segmap_parloop_76436_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76436_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76436_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76434(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65520 = tid;
    int num_tasks_71360 = info.nsubtasks;
    struct futhark_mc_task_76433 *futhark_mc_task_76433 =
                                 (struct futhark_mc_task_76433 *) args;
    struct futhark_context *ctx = futhark_mc_task_76433->ctx;
    uint64_t futhark_mc_segmap_task_76434_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76434_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76433->free_n_64028;
    struct memblock mem_69565 = {.desc ="mem_69565", .mem =
                                 futhark_mc_task_76433->free_mem_69565, .size =
                                 0, .references =NULL};
    struct memblock mem_69568 = {.desc ="mem_69568", .mem =
                                 futhark_mc_task_76433->free_mem_69568, .size =
                                 0, .references =NULL};
    struct memblock mem_69571 = {.desc ="mem_69571", .mem =
                                 futhark_mc_task_76433->free_mem_69571, .size =
                                 0, .references =NULL};
    struct memblock mem_69574 = {.desc ="mem_69574", .mem =
                                 futhark_mc_task_76433->free_mem_69574, .size =
                                 0, .references =NULL};
    int64_t iter_71361;
    struct futhark_mc_segmap_parloop_struct_76435
    futhark_mc_segmap_parloop_struct_76435;
    
    futhark_mc_segmap_parloop_struct_76435.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76435.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76435.free_mem_69565 = mem_69565.mem;
    futhark_mc_segmap_parloop_struct_76435.free_mem_69568 = mem_69568.mem;
    futhark_mc_segmap_parloop_struct_76435.free_mem_69571 = mem_69571.mem;
    futhark_mc_segmap_parloop_struct_76435.free_mem_69574 = mem_69574.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76436_task;
    
    futhark_mc_segmap_parloop_76436_task.name =
        "futhark_mc_segmap_parloop_76436";
    futhark_mc_segmap_parloop_76436_task.fn = futhark_mc_segmap_parloop_76436;
    futhark_mc_segmap_parloop_76436_task.args =
        &futhark_mc_segmap_parloop_struct_76435;
    futhark_mc_segmap_parloop_76436_task.iterations = iterations;
    futhark_mc_segmap_parloop_76436_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76436_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76436_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76436_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76436_task);
    
    if (futhark_mc_segmap_parloop_76436_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76436_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76436_total_end -
                 futhark_mc_segmap_parloop_76436_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76436_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76436_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76436_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76434_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76434_end -
                 futhark_mc_segmap_task_76434_start;
        
        ctx->futhark_mc_segmap_task_76434_runs[tid]++;
        ctx->futhark_mc_segmap_task_76434_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76434_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76437 {
    struct futhark_context *ctx;
    int64_t free_q_64030;
    int64_t free_last_res_65689;
    char *free_mem_69577;
};
struct futhark_mc_segmap_parloop_struct_76439 {
    struct futhark_context *ctx;
    int64_t free_q_64030;
    int64_t free_last_res_65689;
    char *free_mem_69577;
};
static int futhark_mc_segmap_parloop_76440(void *args, int64_t start,
                                           int64_t end, int flat_tid_65522,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76439
    *futhark_mc_segmap_parloop_struct_76439 =
    (struct futhark_mc_segmap_parloop_struct_76439 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76439->ctx;
    uint64_t futhark_mc_segmap_parloop_76440_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76440_start = get_wall_time();
    
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76439->free_q_64030;
    int64_t last_res_65689 =
            futhark_mc_segmap_parloop_struct_76439->free_last_res_65689;
    struct memblock mem_69577 = {.desc ="mem_69577", .mem =
                                 futhark_mc_segmap_parloop_struct_76439->free_mem_69577,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71365 = start;
    
    for (; iter_71365 < end; iter_71365++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71366 = q_64030;
        int64_t gtid_65523 = iter_71365;
        int64_t remnant_71367 = iter_71365 - gtid_65523;
        bool cond_71048 = sle64(last_res_65689, gtid_65523);
        float defunc_0_f_res_71049;
        
        if (cond_71048) {
            defunc_0_f_res_71049 = 0.0F;
        } else {
            defunc_0_f_res_71049 = 1.0F;
        }
        ((float *) mem_69577.mem)[gtid_65523] = defunc_0_f_res_71049;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76440_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76440_end -
                 futhark_mc_segmap_parloop_76440_start;
        
        ctx->futhark_mc_segmap_parloop_76440_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76440_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76440_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76438(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65522 = tid;
    int num_tasks_71364 = info.nsubtasks;
    struct futhark_mc_task_76437 *futhark_mc_task_76437 =
                                 (struct futhark_mc_task_76437 *) args;
    struct futhark_context *ctx = futhark_mc_task_76437->ctx;
    uint64_t futhark_mc_segmap_task_76438_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76438_start = get_wall_time();
    
    int64_t q_64030 = futhark_mc_task_76437->free_q_64030;
    int64_t last_res_65689 = futhark_mc_task_76437->free_last_res_65689;
    struct memblock mem_69577 = {.desc ="mem_69577", .mem =
                                 futhark_mc_task_76437->free_mem_69577, .size =
                                 0, .references =NULL};
    int64_t iter_71365;
    struct futhark_mc_segmap_parloop_struct_76439
    futhark_mc_segmap_parloop_struct_76439;
    
    futhark_mc_segmap_parloop_struct_76439.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76439.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76439.free_last_res_65689 = last_res_65689;
    futhark_mc_segmap_parloop_struct_76439.free_mem_69577 = mem_69577.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76440_task;
    
    futhark_mc_segmap_parloop_76440_task.name =
        "futhark_mc_segmap_parloop_76440";
    futhark_mc_segmap_parloop_76440_task.fn = futhark_mc_segmap_parloop_76440;
    futhark_mc_segmap_parloop_76440_task.args =
        &futhark_mc_segmap_parloop_struct_76439;
    futhark_mc_segmap_parloop_76440_task.iterations = iterations;
    futhark_mc_segmap_parloop_76440_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76440_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76440_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76440_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76440_task);
    
    if (futhark_mc_segmap_parloop_76440_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76440_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76440_total_end -
                 futhark_mc_segmap_parloop_76440_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76440_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76440_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76440_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76438_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76438_end -
                 futhark_mc_segmap_task_76438_start;
        
        ctx->futhark_mc_segmap_task_76438_runs[tid]++;
        ctx->futhark_mc_segmap_task_76438_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76438_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76441 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_65689;
    int64_t free_min_arg_65701;
    float free_max_res_65705;
    char *free_mem_69562;
    char *free_mem_69565;
    char *free_mem_69568;
    char *free_mem_69571;
    char *free_mem_69574;
    char *free_mem_69577;
    char *free_mem_69580;
};
struct futhark_mc_segmap_parloop_struct_76443 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_65689;
    int64_t free_min_arg_65701;
    float free_max_res_65705;
    char *free_mem_69562;
    char *free_mem_69565;
    char *free_mem_69568;
    char *free_mem_69571;
    char *free_mem_69574;
    char *free_mem_69577;
    char *free_mem_69580;
};
static int futhark_mc_segmap_parloop_76444(void *args, int64_t start,
                                           int64_t end, int flat_tid_65524,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76443
    *futhark_mc_segmap_parloop_struct_76443 =
    (struct futhark_mc_segmap_parloop_struct_76443 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76443->ctx;
    uint64_t futhark_mc_segmap_parloop_76444_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76444_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76443->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76443->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76443->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76443->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76443->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76443->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76443->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76443->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76443->free_m_64052;
    int64_t last_res_65689 =
            futhark_mc_segmap_parloop_struct_76443->free_last_res_65689;
    int64_t min_arg_65701 =
            futhark_mc_segmap_parloop_struct_76443->free_min_arg_65701;
    float max_res_65705 =
          futhark_mc_segmap_parloop_struct_76443->free_max_res_65705;
    struct memblock mem_69562 = {.desc ="mem_69562", .mem =
                                 futhark_mc_segmap_parloop_struct_76443->free_mem_69562,
                                 .size =0, .references =NULL};
    struct memblock mem_69565 = {.desc ="mem_69565", .mem =
                                 futhark_mc_segmap_parloop_struct_76443->free_mem_69565,
                                 .size =0, .references =NULL};
    struct memblock mem_69568 = {.desc ="mem_69568", .mem =
                                 futhark_mc_segmap_parloop_struct_76443->free_mem_69568,
                                 .size =0, .references =NULL};
    struct memblock mem_69571 = {.desc ="mem_69571", .mem =
                                 futhark_mc_segmap_parloop_struct_76443->free_mem_69571,
                                 .size =0, .references =NULL};
    struct memblock mem_69574 = {.desc ="mem_69574", .mem =
                                 futhark_mc_segmap_parloop_struct_76443->free_mem_69574,
                                 .size =0, .references =NULL};
    struct memblock mem_69577 = {.desc ="mem_69577", .mem =
                                 futhark_mc_segmap_parloop_struct_76443->free_mem_69577,
                                 .size =0, .references =NULL};
    struct memblock mem_69580 = {.desc ="mem_69580", .mem =
                                 futhark_mc_segmap_parloop_struct_76443->free_mem_69580,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71369 = start;
    
    for (; iter_71369 < end; iter_71369++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71464 = n_m_64039;
        int64_t gtid_65525 = iter_71369;
        int64_t remnant_71465 = iter_71369 - gtid_65525;
        int64_t min_arg_71193 = mul64(jump_64032, gtid_65525);
        int64_t min_res_71194 = smin64(i_64040, min_arg_71193);
        int64_t defunc_0_g_res_71195 = add64((int64_t) 1, min_res_71194);
        bool nearest_idx_71196;
        int64_t nearest_idx_71197;
        int64_t nearest_idx_71198;
        bool loop_while_71370;
        int64_t low_71371;
        int64_t high_71372;
        
        loop_while_71370 = x_64041;
        low_71371 = (int64_t) 0;
        high_71372 = i_64040;
        while (loop_while_71370) {
            int64_t x_71373 = add64(low_71371, high_71372);
            int64_t mid_71374 = sdiv64(x_71373, (int64_t) 2);
            bool x_71375 = sle64((int64_t) 0, mid_71374);
            bool y_71376 = slt64(mid_71374, n_64028);
            bool bounds_check_71377 = x_71375 && y_71376;
            bool index_certs_71378;
            
            if (!bounds_check_71377) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_71374,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_71379 = ((int64_t *) mem_69571.mem)[mid_71374];
            bool cond_71380 = sle64(defunc_0_g_res_71195, x_71379);
            int64_t loopres_71381;
            int64_t loopres_71382;
            
            if (cond_71380) {
                int64_t loopres_t_res_71383 = sub64(mid_71374, (int64_t) 1);
                
                loopres_71381 = low_71371;
                loopres_71382 = loopres_t_res_71383;
            } else {
                int64_t loopres_f_res_71384 = add64((int64_t) 1, mid_71374);
                
                loopres_71381 = loopres_f_res_71384;
                loopres_71382 = high_71372;
            }
            
            bool loop_cond_71385 = sle64(loopres_71381, loopres_71382);
            bool loop_while_tmp_71466 = loop_cond_71385;
            int64_t low_tmp_71467 = loopres_71381;
            int64_t high_tmp_71468 = loopres_71382;
            
            loop_while_71370 = loop_while_tmp_71466;
            low_71371 = low_tmp_71467;
            high_71372 = high_tmp_71468;
        }
        nearest_idx_71196 = loop_while_71370;
        nearest_idx_71197 = low_71371;
        nearest_idx_71198 = high_71372;
        
        int64_t max_arg_71215 = sub64(nearest_idx_71197, min_res_64046);
        int64_t max_res_71216 = smax64((int64_t) 0, max_arg_71215);
        int64_t j_71217 = add64(min_res_64046, max_res_71216);
        int64_t i_p_m_t_s_71218 = add64(m_64052, max_res_71216);
        bool zzero_leq_i_p_m_t_s_71219 = sle64((int64_t) 0, i_p_m_t_s_71218);
        bool i_p_m_t_s_leq_w_71220 = slt64(i_p_m_t_s_71218, n_64028);
        bool zzero_lte_i_71221 = sle64((int64_t) 0, max_res_71216);
        bool i_lte_j_71222 = sle64(max_res_71216, j_71217);
        bool y_71223 = i_p_m_t_s_leq_w_71220 && zzero_lte_i_71221;
        bool y_71224 = zzero_leq_i_p_m_t_s_71219 && y_71223;
        bool y_71225 = i_lte_j_71222 && y_71224;
        bool forwards_ok_71226 = zzero_lte_i_71221 && y_71225;
        bool ok_or_empty_71227 = empty_slice_64051 || forwards_ok_71226;
        bool index_certs_71228;
        
        if (!ok_or_empty_71227) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_71216, ":",
                          (long long) j_71217,
                          "] out of bounds for array of shape [",
                          (long long) n_64028, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_71229;
        int64_t redout_71387 = (int64_t) 0;
        
        for (int64_t i_71386 = 0; i_71386 < min_res_64046; i_71386++) {
            int64_t slice_71388 = max_res_71216 + i_71386;
            int64_t x_71389 = ((int64_t *) mem_69574.mem)[slice_71388];
            int64_t abs_arg_71390 = sub64(x_71389, defunc_0_g_res_71195);
            int64_t abs_res_71391 = abs64(abs_arg_71390);
            int64_t defunc_1_op_res_71392 = add64(abs_res_71391, redout_71387);
            int64_t redout_tmp_71469 = defunc_1_op_res_71392;
            
            redout_71387 = redout_tmp_71469;
        }
        defunc_2_reduce_res_71229 = redout_71387;
        
        int64_t idx_71237;
        int64_t idx_71238;
        int64_t idx_71239;
        int64_t idx_71240;
        int64_t best_idx_71394;
        int64_t last_idx_71395;
        int64_t best_sum_71396;
        int64_t curr_sum_71397;
        
        best_idx_71394 = max_res_71216;
        last_idx_71395 = max_res_71216;
        best_sum_71396 = defunc_2_reduce_res_71229;
        curr_sum_71397 = defunc_2_reduce_res_71229;
        for (int64_t j_71393 = 0; j_71393 < min_res_64046; j_71393++) {
            int64_t new_idx_71398 = add64(max_res_71216, j_71393);
            int64_t x_71399 = add64(min_res_64046, new_idx_71398);
            bool cond_71400 = slt64(last_res_65689, x_71399);
            int64_t new_sum_71401;
            
            if (cond_71400) {
                new_sum_71401 = (int64_t) 9223372036854775807;
            } else {
                bool x_71402 = sle64((int64_t) 0, last_idx_71395);
                bool y_71403 = slt64(last_idx_71395, n_64028);
                bool bounds_check_71404 = x_71402 && y_71403;
                bool index_certs_71405;
                
                if (!bounds_check_71404) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_71395,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_71406 = ((int64_t *) mem_69574.mem)[last_idx_71395];
                int64_t binop_p_71407 = sub64(defunc_0_g_res_71195, y_71406);
                int64_t defunc_0_f_res_71408 = abs64(binop_p_71407);
                int64_t x_71409 = sub64(curr_sum_71397, defunc_0_f_res_71408);
                int64_t min_arg_71410 = add64(min_res_64046, last_idx_71395);
                int64_t min_res_71411 = smin64(i_64040, min_arg_71410);
                bool x_71412 = sle64((int64_t) 0, min_res_71411);
                bool y_71413 = slt64(min_res_71411, n_64028);
                bool bounds_check_71414 = x_71412 && y_71413;
                bool index_certs_71415;
                
                if (!bounds_check_71414) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_71411,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_71416 = ((int64_t *) mem_69574.mem)[min_res_71411];
                int64_t binop_p_71417 = sub64(defunc_0_g_res_71195, y_71416);
                int64_t defunc_0_f_res_71418 = abs64(binop_p_71417);
                int64_t new_sum_f_res_71419 = add64(x_71409,
                                                    defunc_0_f_res_71418);
                
                new_sum_71401 = new_sum_f_res_71419;
            }
            
            bool cond_71420 = sle64(new_sum_71401, best_sum_71396);
            int64_t loopres_71421;
            
            if (cond_71420) {
                loopres_71421 = new_idx_71398;
            } else {
                loopres_71421 = best_idx_71394;
            }
            
            int64_t loopres_71422;
            
            if (cond_71420) {
                loopres_71422 = new_sum_71401;
            } else {
                loopres_71422 = best_sum_71396;
            }
            
            int64_t best_idx_tmp_71470 = loopres_71421;
            int64_t last_idx_tmp_71471 = new_idx_71398;
            int64_t best_sum_tmp_71472 = loopres_71422;
            int64_t curr_sum_tmp_71473 = new_sum_71401;
            
            best_idx_71394 = best_idx_tmp_71470;
            last_idx_71395 = last_idx_tmp_71471;
            best_sum_71396 = best_sum_tmp_71472;
            curr_sum_71397 = curr_sum_tmp_71473;
        }
        idx_71237 = best_idx_71394;
        idx_71238 = last_idx_71395;
        idx_71239 = best_sum_71396;
        idx_71240 = curr_sum_71397;
        
        int64_t min_res_71271 = smin64(min_arg_65701, idx_71237);
        int64_t x_71272 = add64(min_res_64046, min_res_71271);
        int64_t r_71273 = sub64(x_71272, (int64_t) 1);
        bool x_71274 = sle64((int64_t) 0, r_71273);
        bool y_71275 = slt64(r_71273, n_64028);
        bool bounds_check_71276 = x_71274 && y_71275;
        bool index_certs_71277;
        
        if (!bounds_check_71276) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_71273,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_71278 = ((int64_t *) mem_69565.mem)[r_71273];
        int64_t abs_arg_71279 = sub64(x_71278, min_res_71194);
        int64_t abs_res_71280 = abs64(abs_arg_71279);
        bool x_71281 = sle64((int64_t) 0, min_res_71271);
        bool y_71282 = slt64(min_res_71271, n_64028);
        bool bounds_check_71283 = x_71281 && y_71282;
        bool index_certs_71284;
        
        if (!bounds_check_71283) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_71271,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_71285 = ((int64_t *) mem_69565.mem)[min_res_71271];
        int64_t abs_arg_71286 = sub64(x_71285, min_res_71194);
        int64_t abs_res_71287 = abs64(abs_arg_71286);
        int64_t max_res_71288 = smax64(abs_res_71280, abs_res_71287);
        float defunc_0_f_res_71289 = sitofp_i64_f32(max_res_71288);
        float defunc_1_f_res_71290 = max_res_65705 + defunc_0_f_res_71289;
        float defunc_0_f_res_71291 = sitofp_i64_f32(min_res_71194);
        float defunc_2_reduce_res_71292;
        float redout_71424 = 0.0F;
        
        for (int64_t i_71423 = 0; i_71423 < q_64030; i_71423++) {
            float x_71425 = ((float *) mem_69577.mem)[i_71423];
            bool cond_71426 = sle64(last_res_65689, i_71423);
            float defunc_0_f_res_71427;
            
            if (cond_71426) {
                defunc_0_f_res_71427 = 0.0F;
            } else {
                int64_t i_71428 = add64(min_res_71271, i_71423);
                float x_71429 = ((float *) mem_69568.mem)[i_71428];
                float defunc_0_f_res_f_res_71430 = 1.0F + x_71429;
                
                defunc_0_f_res_71427 = defunc_0_f_res_f_res_71430;
            }
            
            float x_j_71431 = defunc_0_f_res_71427 - defunc_0_f_res_71291;
            float abs_res_71432 = (float) fabs(x_j_71431);
            float tmp1_71433 = abs_res_71432 / defunc_1_f_res_71290;
            float x_71434 = tmp1_71433 * tmp1_71433;
            float y_71435 = tmp1_71433 * x_71434;
            float tmp2_71436 = 1.0F - y_71435;
            float x_71437 = tmp2_71436 * tmp2_71436;
            float tmp3_71438 = tmp2_71436 * x_71437;
            float w_j_71439 = x_71425 * tmp3_71438;
            float defunc_1_op_res_71440 = w_j_71439 + redout_71424;
            float redout_tmp_71474 = defunc_1_op_res_71440;
            
            redout_71424 = redout_tmp_71474;
        }
        defunc_2_reduce_res_71292 = redout_71424;
        
        float a0_71311 = 1.0F / defunc_2_reduce_res_71292;
        float defunc_2_reduce_res_71312;
        float redout_71442 = 0.0F;
        
        for (int64_t i_71441 = 0; i_71441 < q_64030; i_71441++) {
            float x_71443 = ((float *) mem_69577.mem)[i_71441];
            bool cond_71444 = sle64(last_res_65689, i_71441);
            float defunc_0_f_res_71445;
            
            if (cond_71444) {
                defunc_0_f_res_71445 = 0.0F;
            } else {
                int64_t i_71446 = add64(min_res_71271, i_71441);
                float x_71447 = ((float *) mem_69568.mem)[i_71446];
                float defunc_0_f_res_f_res_71448 = 1.0F + x_71447;
                
                defunc_0_f_res_71445 = defunc_0_f_res_f_res_71448;
            }
            
            float x_j_71449 = defunc_0_f_res_71445 - defunc_0_f_res_71291;
            float abs_res_71450 = (float) fabs(x_j_71449);
            float tmp1_71451 = abs_res_71450 / defunc_1_f_res_71290;
            float x_71452 = tmp1_71451 * tmp1_71451;
            float y_71453 = tmp1_71451 * x_71452;
            float tmp2_71454 = 1.0F - y_71453;
            float x_71455 = tmp2_71454 * tmp2_71454;
            float tmp3_71456 = tmp2_71454 * x_71455;
            float tmp4_71457 = x_71443 * tmp3_71456;
            float defunc_0_f_res_71458;
            
            if (cond_71444) {
                defunc_0_f_res_71458 = 0.0F;
            } else {
                int64_t i_71459 = add64(min_res_71271, i_71441);
                float x_71460 = ((float *) mem_69562.mem)[i_71459];
                
                defunc_0_f_res_71458 = x_71460;
            }
            
            float x_71461 = a0_71311 * tmp4_71457;
            float defunc_9_fit_fun_res_71462 = defunc_0_f_res_71458 * x_71461;
            float defunc_1_op_res_71463 = defunc_9_fit_fun_res_71462 +
                  redout_71442;
            float redout_tmp_71475 = defunc_1_op_res_71463;
            
            redout_71442 = redout_tmp_71475;
        }
        defunc_2_reduce_res_71312 = redout_71442;
        ((float *) mem_69580.mem)[gtid_65525] = defunc_2_reduce_res_71312;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76444_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76444_end -
                 futhark_mc_segmap_parloop_76444_start;
        
        ctx->futhark_mc_segmap_parloop_76444_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76444_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76444_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76442(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65524 = tid;
    int num_tasks_71368 = info.nsubtasks;
    struct futhark_mc_task_76441 *futhark_mc_task_76441 =
                                 (struct futhark_mc_task_76441 *) args;
    struct futhark_context *ctx = futhark_mc_task_76441->ctx;
    uint64_t futhark_mc_segmap_task_76442_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76442_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76441->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76441->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76441->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76441->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76441->free_i_64040;
    bool x_64041 = futhark_mc_task_76441->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76441->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76441->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76441->free_m_64052;
    int64_t last_res_65689 = futhark_mc_task_76441->free_last_res_65689;
    int64_t min_arg_65701 = futhark_mc_task_76441->free_min_arg_65701;
    float max_res_65705 = futhark_mc_task_76441->free_max_res_65705;
    struct memblock mem_69562 = {.desc ="mem_69562", .mem =
                                 futhark_mc_task_76441->free_mem_69562, .size =
                                 0, .references =NULL};
    struct memblock mem_69565 = {.desc ="mem_69565", .mem =
                                 futhark_mc_task_76441->free_mem_69565, .size =
                                 0, .references =NULL};
    struct memblock mem_69568 = {.desc ="mem_69568", .mem =
                                 futhark_mc_task_76441->free_mem_69568, .size =
                                 0, .references =NULL};
    struct memblock mem_69571 = {.desc ="mem_69571", .mem =
                                 futhark_mc_task_76441->free_mem_69571, .size =
                                 0, .references =NULL};
    struct memblock mem_69574 = {.desc ="mem_69574", .mem =
                                 futhark_mc_task_76441->free_mem_69574, .size =
                                 0, .references =NULL};
    struct memblock mem_69577 = {.desc ="mem_69577", .mem =
                                 futhark_mc_task_76441->free_mem_69577, .size =
                                 0, .references =NULL};
    struct memblock mem_69580 = {.desc ="mem_69580", .mem =
                                 futhark_mc_task_76441->free_mem_69580, .size =
                                 0, .references =NULL};
    int64_t iter_71369;
    struct futhark_mc_segmap_parloop_struct_76443
    futhark_mc_segmap_parloop_struct_76443;
    
    futhark_mc_segmap_parloop_struct_76443.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76443.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76443.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76443.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76443.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76443.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76443.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76443.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76443.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76443.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76443.free_last_res_65689 = last_res_65689;
    futhark_mc_segmap_parloop_struct_76443.free_min_arg_65701 = min_arg_65701;
    futhark_mc_segmap_parloop_struct_76443.free_max_res_65705 = max_res_65705;
    futhark_mc_segmap_parloop_struct_76443.free_mem_69562 = mem_69562.mem;
    futhark_mc_segmap_parloop_struct_76443.free_mem_69565 = mem_69565.mem;
    futhark_mc_segmap_parloop_struct_76443.free_mem_69568 = mem_69568.mem;
    futhark_mc_segmap_parloop_struct_76443.free_mem_69571 = mem_69571.mem;
    futhark_mc_segmap_parloop_struct_76443.free_mem_69574 = mem_69574.mem;
    futhark_mc_segmap_parloop_struct_76443.free_mem_69577 = mem_69577.mem;
    futhark_mc_segmap_parloop_struct_76443.free_mem_69580 = mem_69580.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76444_task;
    
    futhark_mc_segmap_parloop_76444_task.name =
        "futhark_mc_segmap_parloop_76444";
    futhark_mc_segmap_parloop_76444_task.fn = futhark_mc_segmap_parloop_76444;
    futhark_mc_segmap_parloop_76444_task.args =
        &futhark_mc_segmap_parloop_struct_76443;
    futhark_mc_segmap_parloop_76444_task.iterations = iterations;
    futhark_mc_segmap_parloop_76444_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76444_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76444_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76444_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76444_task);
    
    if (futhark_mc_segmap_parloop_76444_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76444_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76444_total_end -
                 futhark_mc_segmap_parloop_76444_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76444_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76444_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76444_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76442_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76442_end -
                 futhark_mc_segmap_task_76442_start;
        
        ctx->futhark_mc_segmap_task_76442_runs[tid]++;
        ctx->futhark_mc_segmap_task_76442_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76442_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76446 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_65689;
    int64_t free_min_arg_65701;
    float free_max_res_65705;
    char *free_mem_69562;
    char *free_mem_69565;
    char *free_mem_69568;
    char *free_mem_69571;
    char *free_mem_69574;
    char *free_mem_69577;
    char *free_mem_69580;
};
struct futhark_mc_task_76448 {
    struct futhark_context *ctx;
    char *free_mem_69574;
    int64_t free_defunc_0_g_res_71052;
    int64_t free_max_res_71073;
    int64_t *retval_defunc_2_reduce_res_71086;
};
struct futhark_mc_segred_stage_1_parloop_struct_76451 {
    struct futhark_context *ctx;
    char *free_mem_69574;
    int64_t free_defunc_0_g_res_71052;
    int64_t free_max_res_71073;
    char *free_reduce_stage_1_tid_res_arr_mem_71577;
};
static int futhark_mc_segred_stage_1_parloop_76452(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_65528, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76451
    *futhark_mc_segred_stage_1_parloop_struct_76451 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76451 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76451->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76452_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76452_start = get_wall_time();
    
    struct memblock mem_69574 = {.desc ="mem_69574", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76451->free_mem_69574,
                                 .size =0, .references =NULL};
    int64_t defunc_0_g_res_71052 =
            futhark_mc_segred_stage_1_parloop_struct_76451->free_defunc_0_g_res_71052;
    int64_t max_res_71073 =
            futhark_mc_segred_stage_1_parloop_struct_76451->free_max_res_71073;
    struct memblock reduce_stage_1_tid_res_arr_mem_71577 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71577",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76451->free_reduce_stage_1_tid_res_arr_mem_71577,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71579 = start;
    int64_t x_71493;
    int64_t x_71494;
    int64_t local_acc_71580 = (int64_t) 0;
    
    for (; iter_71579 < end; iter_71579++) {
        int64_t gtid_65529 = iter_71579;
        int64_t slice_71496 = gtid_65529 + max_res_71073;
        int64_t x_71497 = ((int64_t *) mem_69574.mem)[slice_71496];
        int64_t abs_arg_71498 = sub64(x_71497, defunc_0_g_res_71052);
        int64_t abs_res_71499 = abs64(abs_arg_71498);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_71493 = local_acc_71580;
        }
        // Load next params
        {
            x_71494 = abs_res_71499;
        }
        // Red body
        {
            int64_t defunc_1_op_res_71495 = add64(x_71493, x_71494);
            
            local_acc_71580 = defunc_1_op_res_71495;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_71577.mem)[flat_tid_65528] =
        local_acc_71580;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76452_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76452_end -
                 futhark_mc_segred_stage_1_parloop_76452_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76452_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76452_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76452_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76449(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65528 = tid;
    int num_tasks_71576 = info.nsubtasks;
    struct futhark_mc_task_76448 *futhark_mc_task_76448 =
                                 (struct futhark_mc_task_76448 *) args;
    struct futhark_context *ctx = futhark_mc_task_76448->ctx;
    uint64_t futhark_mc_segred_task_76449_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76449_start = get_wall_time();
    
    struct memblock mem_69574 = {.desc ="mem_69574", .mem =
                                 futhark_mc_task_76448->free_mem_69574, .size =
                                 0, .references =NULL};
    int64_t defunc_0_g_res_71052 =
            futhark_mc_task_76448->free_defunc_0_g_res_71052;
    int64_t max_res_71073 = futhark_mc_task_76448->free_max_res_71073;
    int64_t defunc_2_reduce_res_71086 =
            *futhark_mc_task_76448->retval_defunc_2_reduce_res_71086;
    size_t reduce_stage_1_tid_res_arr_mem_71577_cached_sizze_76450 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71577 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_71577_cached_sizze_76450 <
        (size_t) ((int64_t) 8 * num_tasks_71576)) {
        reduce_stage_1_tid_res_arr_mem_71577 =
            realloc(reduce_stage_1_tid_res_arr_mem_71577, (int64_t) 8 *
                    num_tasks_71576);
        reduce_stage_1_tid_res_arr_mem_71577_cached_sizze_76450 = (int64_t) 8 *
            num_tasks_71576;
    }
    
    int64_t iter_71579;
    struct futhark_mc_segred_stage_1_parloop_struct_76451
    futhark_mc_segred_stage_1_parloop_struct_76451;
    
    futhark_mc_segred_stage_1_parloop_struct_76451.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76451.free_mem_69574 =
        mem_69574.mem;
    futhark_mc_segred_stage_1_parloop_struct_76451.free_defunc_0_g_res_71052 =
        defunc_0_g_res_71052;
    futhark_mc_segred_stage_1_parloop_struct_76451.free_max_res_71073 =
        max_res_71073;
    futhark_mc_segred_stage_1_parloop_struct_76451.free_reduce_stage_1_tid_res_arr_mem_71577 =
        reduce_stage_1_tid_res_arr_mem_71577;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76452_task;
    
    futhark_mc_segred_stage_1_parloop_76452_task.name =
        "futhark_mc_segred_stage_1_parloop_76452";
    futhark_mc_segred_stage_1_parloop_76452_task.fn =
        futhark_mc_segred_stage_1_parloop_76452;
    futhark_mc_segred_stage_1_parloop_76452_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76451;
    futhark_mc_segred_stage_1_parloop_76452_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76452_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76452_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76452_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76452_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76452_task);
    
    if (futhark_mc_segred_stage_1_parloop_76452_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76452_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76452_total_end -
                 futhark_mc_segred_stage_1_parloop_76452_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76452_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76452_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76452_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_71086 = (int64_t) 0;
    }
    
    int64_t x_71581;
    int64_t x_71582;
    
    for (int32_t i_71584 = 0; i_71584 < num_tasks_71576; i_71584++) {
        flat_tid_65528 = i_71584;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_71581 = defunc_2_reduce_res_71086;
            }
            // load next params
            {
                x_71582 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_71577)[flat_tid_65528];
            }
            // red body
            {
                int64_t defunc_1_op_res_71583 = add64(x_71581, x_71582);
                
                defunc_2_reduce_res_71086 = defunc_1_op_res_71583;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_71577);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76449_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76449_end -
                 futhark_mc_segred_task_76449_start;
        
        ctx->futhark_mc_segred_task_76449_runs[tid]++;
        ctx->futhark_mc_segred_task_76449_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76449_iter[tid] += iterations;
    }
    *futhark_mc_task_76448->retval_defunc_2_reduce_res_71086 =
        defunc_2_reduce_res_71086;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76453 {
    struct futhark_context *ctx;
    int64_t free_last_res_65689;
    char *free_mem_69568;
    char *free_mem_69577;
    int64_t free_min_res_71128;
    float free_defunc_1_f_res_71147;
    float free_defunc_0_f_res_71148;
    float *retval_defunc_2_reduce_res_71149;
};
struct futhark_mc_segred_stage_1_parloop_struct_76456 {
    struct futhark_context *ctx;
    int64_t free_last_res_65689;
    char *free_mem_69568;
    char *free_mem_69577;
    int64_t free_min_res_71128;
    float free_defunc_1_f_res_71147;
    float free_defunc_0_f_res_71148;
    char *free_reduce_stage_1_tid_res_arr_mem_71590;
};
static int futhark_mc_segred_stage_1_parloop_76457(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_65530, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76456
    *futhark_mc_segred_stage_1_parloop_struct_76456 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76456 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76456->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76457_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76457_start = get_wall_time();
    
    int64_t last_res_65689 =
            futhark_mc_segred_stage_1_parloop_struct_76456->free_last_res_65689;
    struct memblock mem_69568 = {.desc ="mem_69568", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76456->free_mem_69568,
                                 .size =0, .references =NULL};
    struct memblock mem_69577 = {.desc ="mem_69577", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76456->free_mem_69577,
                                 .size =0, .references =NULL};
    int64_t min_res_71128 =
            futhark_mc_segred_stage_1_parloop_struct_76456->free_min_res_71128;
    float defunc_1_f_res_71147 =
          futhark_mc_segred_stage_1_parloop_struct_76456->free_defunc_1_f_res_71147;
    float defunc_0_f_res_71148 =
          futhark_mc_segred_stage_1_parloop_struct_76456->free_defunc_0_f_res_71148;
    struct memblock reduce_stage_1_tid_res_arr_mem_71590 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71590",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76456->free_reduce_stage_1_tid_res_arr_mem_71590,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71592 = start;
    float x_71530;
    float x_71531;
    float local_acc_71593 = 0.0F;
    
    for (; iter_71592 < end; iter_71592++) {
        int64_t gtid_65531 = iter_71592;
        float x_71533 = ((float *) mem_69577.mem)[gtid_65531];
        bool cond_71534 = sle64(last_res_65689, gtid_65531);
        float defunc_0_f_res_71535;
        
        if (cond_71534) {
            defunc_0_f_res_71535 = 0.0F;
        } else {
            int64_t i_71536 = add64(gtid_65531, min_res_71128);
            float x_71537 = ((float *) mem_69568.mem)[i_71536];
            float defunc_0_f_res_f_res_71538 = 1.0F + x_71537;
            
            defunc_0_f_res_71535 = defunc_0_f_res_f_res_71538;
        }
        
        float x_j_71539 = defunc_0_f_res_71535 - defunc_0_f_res_71148;
        float abs_res_71540 = (float) fabs(x_j_71539);
        float tmp1_71541 = abs_res_71540 / defunc_1_f_res_71147;
        float x_71542 = tmp1_71541 * tmp1_71541;
        float y_71543 = tmp1_71541 * x_71542;
        float tmp2_71544 = 1.0F - y_71543;
        float x_71545 = tmp2_71544 * tmp2_71544;
        float tmp3_71546 = tmp2_71544 * x_71545;
        float w_j_71547 = x_71533 * tmp3_71546;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_71530 = local_acc_71593;
        }
        // Load next params
        {
            x_71531 = w_j_71547;
        }
        // Red body
        {
            float defunc_1_op_res_71532 = x_71530 + x_71531;
            
            local_acc_71593 = defunc_1_op_res_71532;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_71590.mem)[flat_tid_65530] =
        local_acc_71593;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76457_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76457_end -
                 futhark_mc_segred_stage_1_parloop_76457_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76457_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76457_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76457_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76454(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65530 = tid;
    int num_tasks_71589 = info.nsubtasks;
    struct futhark_mc_task_76453 *futhark_mc_task_76453 =
                                 (struct futhark_mc_task_76453 *) args;
    struct futhark_context *ctx = futhark_mc_task_76453->ctx;
    uint64_t futhark_mc_segred_task_76454_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76454_start = get_wall_time();
    
    int64_t last_res_65689 = futhark_mc_task_76453->free_last_res_65689;
    struct memblock mem_69568 = {.desc ="mem_69568", .mem =
                                 futhark_mc_task_76453->free_mem_69568, .size =
                                 0, .references =NULL};
    struct memblock mem_69577 = {.desc ="mem_69577", .mem =
                                 futhark_mc_task_76453->free_mem_69577, .size =
                                 0, .references =NULL};
    int64_t min_res_71128 = futhark_mc_task_76453->free_min_res_71128;
    float defunc_1_f_res_71147 =
          futhark_mc_task_76453->free_defunc_1_f_res_71147;
    float defunc_0_f_res_71148 =
          futhark_mc_task_76453->free_defunc_0_f_res_71148;
    float defunc_2_reduce_res_71149 =
          *futhark_mc_task_76453->retval_defunc_2_reduce_res_71149;
    size_t reduce_stage_1_tid_res_arr_mem_71590_cached_sizze_76455 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71590 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_71590_cached_sizze_76455 <
        (size_t) ((int64_t) 4 * num_tasks_71589)) {
        reduce_stage_1_tid_res_arr_mem_71590 =
            realloc(reduce_stage_1_tid_res_arr_mem_71590, (int64_t) 4 *
                    num_tasks_71589);
        reduce_stage_1_tid_res_arr_mem_71590_cached_sizze_76455 = (int64_t) 4 *
            num_tasks_71589;
    }
    
    int64_t iter_71592;
    struct futhark_mc_segred_stage_1_parloop_struct_76456
    futhark_mc_segred_stage_1_parloop_struct_76456;
    
    futhark_mc_segred_stage_1_parloop_struct_76456.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76456.free_last_res_65689 =
        last_res_65689;
    futhark_mc_segred_stage_1_parloop_struct_76456.free_mem_69568 =
        mem_69568.mem;
    futhark_mc_segred_stage_1_parloop_struct_76456.free_mem_69577 =
        mem_69577.mem;
    futhark_mc_segred_stage_1_parloop_struct_76456.free_min_res_71128 =
        min_res_71128;
    futhark_mc_segred_stage_1_parloop_struct_76456.free_defunc_1_f_res_71147 =
        defunc_1_f_res_71147;
    futhark_mc_segred_stage_1_parloop_struct_76456.free_defunc_0_f_res_71148 =
        defunc_0_f_res_71148;
    futhark_mc_segred_stage_1_parloop_struct_76456.free_reduce_stage_1_tid_res_arr_mem_71590 =
        reduce_stage_1_tid_res_arr_mem_71590;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76457_task;
    
    futhark_mc_segred_stage_1_parloop_76457_task.name =
        "futhark_mc_segred_stage_1_parloop_76457";
    futhark_mc_segred_stage_1_parloop_76457_task.fn =
        futhark_mc_segred_stage_1_parloop_76457;
    futhark_mc_segred_stage_1_parloop_76457_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76456;
    futhark_mc_segred_stage_1_parloop_76457_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76457_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76457_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76457_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76457_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76457_task);
    
    if (futhark_mc_segred_stage_1_parloop_76457_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76457_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76457_total_end -
                 futhark_mc_segred_stage_1_parloop_76457_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76457_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76457_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76457_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_71149 = 0.0F;
    }
    
    float x_71594;
    float x_71595;
    
    for (int32_t i_71597 = 0; i_71597 < num_tasks_71589; i_71597++) {
        flat_tid_65530 = i_71597;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_71594 = defunc_2_reduce_res_71149;
            }
            // load next params
            {
                x_71595 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71590)[flat_tid_65530];
            }
            // red body
            {
                float defunc_1_op_res_71596 = x_71594 + x_71595;
                
                defunc_2_reduce_res_71149 = defunc_1_op_res_71596;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_71590);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76454_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76454_end -
                 futhark_mc_segred_task_76454_start;
        
        ctx->futhark_mc_segred_task_76454_runs[tid]++;
        ctx->futhark_mc_segred_task_76454_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76454_iter[tid] += iterations;
    }
    *futhark_mc_task_76453->retval_defunc_2_reduce_res_71149 =
        defunc_2_reduce_res_71149;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76458 {
    struct futhark_context *ctx;
    int64_t free_last_res_65689;
    char *free_mem_69562;
    char *free_mem_69568;
    char *free_mem_69577;
    int64_t free_min_res_71128;
    float free_defunc_1_f_res_71147;
    float free_defunc_0_f_res_71148;
    float free_a0_71168;
    float *retval_defunc_2_reduce_res_71169;
};
struct futhark_mc_segred_stage_1_parloop_struct_76461 {
    struct futhark_context *ctx;
    int64_t free_last_res_65689;
    char *free_mem_69562;
    char *free_mem_69568;
    char *free_mem_69577;
    int64_t free_min_res_71128;
    float free_defunc_1_f_res_71147;
    float free_defunc_0_f_res_71148;
    float free_a0_71168;
    char *free_reduce_stage_1_tid_res_arr_mem_71599;
};
static int futhark_mc_segred_stage_1_parloop_76462(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_65532, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76461
    *futhark_mc_segred_stage_1_parloop_struct_76461 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76461 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76461->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76462_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76462_start = get_wall_time();
    
    int64_t last_res_65689 =
            futhark_mc_segred_stage_1_parloop_struct_76461->free_last_res_65689;
    struct memblock mem_69562 = {.desc ="mem_69562", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76461->free_mem_69562,
                                 .size =0, .references =NULL};
    struct memblock mem_69568 = {.desc ="mem_69568", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76461->free_mem_69568,
                                 .size =0, .references =NULL};
    struct memblock mem_69577 = {.desc ="mem_69577", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76461->free_mem_69577,
                                 .size =0, .references =NULL};
    int64_t min_res_71128 =
            futhark_mc_segred_stage_1_parloop_struct_76461->free_min_res_71128;
    float defunc_1_f_res_71147 =
          futhark_mc_segred_stage_1_parloop_struct_76461->free_defunc_1_f_res_71147;
    float defunc_0_f_res_71148 =
          futhark_mc_segred_stage_1_parloop_struct_76461->free_defunc_0_f_res_71148;
    float a0_71168 =
          futhark_mc_segred_stage_1_parloop_struct_76461->free_a0_71168;
    struct memblock reduce_stage_1_tid_res_arr_mem_71599 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71599",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76461->free_reduce_stage_1_tid_res_arr_mem_71599,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71601 = start;
    float x_71548;
    float x_71549;
    float local_acc_71602 = 0.0F;
    
    for (; iter_71601 < end; iter_71601++) {
        int64_t gtid_65533 = iter_71601;
        float x_71551 = ((float *) mem_69577.mem)[gtid_65533];
        bool cond_71552 = sle64(last_res_65689, gtid_65533);
        float defunc_0_f_res_71553;
        
        if (cond_71552) {
            defunc_0_f_res_71553 = 0.0F;
        } else {
            int64_t i_71554 = add64(gtid_65533, min_res_71128);
            float x_71555 = ((float *) mem_69568.mem)[i_71554];
            float defunc_0_f_res_f_res_71556 = 1.0F + x_71555;
            
            defunc_0_f_res_71553 = defunc_0_f_res_f_res_71556;
        }
        
        float x_j_71557 = defunc_0_f_res_71553 - defunc_0_f_res_71148;
        float abs_res_71558 = (float) fabs(x_j_71557);
        float tmp1_71559 = abs_res_71558 / defunc_1_f_res_71147;
        float x_71560 = tmp1_71559 * tmp1_71559;
        float y_71561 = tmp1_71559 * x_71560;
        float tmp2_71562 = 1.0F - y_71561;
        float x_71563 = tmp2_71562 * tmp2_71562;
        float tmp3_71564 = tmp2_71562 * x_71563;
        float tmp4_71565 = x_71551 * tmp3_71564;
        float defunc_0_f_res_71566;
        
        if (cond_71552) {
            defunc_0_f_res_71566 = 0.0F;
        } else {
            int64_t i_71567 = add64(gtid_65533, min_res_71128);
            float x_71568 = ((float *) mem_69562.mem)[i_71567];
            
            defunc_0_f_res_71566 = x_71568;
        }
        
        float x_71569 = a0_71168 * tmp4_71565;
        float defunc_9_fit_fun_res_71570 = defunc_0_f_res_71566 * x_71569;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_71548 = local_acc_71602;
        }
        // Load next params
        {
            x_71549 = defunc_9_fit_fun_res_71570;
        }
        // Red body
        {
            float defunc_1_op_res_71550 = x_71548 + x_71549;
            
            local_acc_71602 = defunc_1_op_res_71550;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_71599.mem)[flat_tid_65532] =
        local_acc_71602;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76462_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76462_end -
                 futhark_mc_segred_stage_1_parloop_76462_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76462_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76462_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76462_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76459(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65532 = tid;
    int num_tasks_71598 = info.nsubtasks;
    struct futhark_mc_task_76458 *futhark_mc_task_76458 =
                                 (struct futhark_mc_task_76458 *) args;
    struct futhark_context *ctx = futhark_mc_task_76458->ctx;
    uint64_t futhark_mc_segred_task_76459_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76459_start = get_wall_time();
    
    int64_t last_res_65689 = futhark_mc_task_76458->free_last_res_65689;
    struct memblock mem_69562 = {.desc ="mem_69562", .mem =
                                 futhark_mc_task_76458->free_mem_69562, .size =
                                 0, .references =NULL};
    struct memblock mem_69568 = {.desc ="mem_69568", .mem =
                                 futhark_mc_task_76458->free_mem_69568, .size =
                                 0, .references =NULL};
    struct memblock mem_69577 = {.desc ="mem_69577", .mem =
                                 futhark_mc_task_76458->free_mem_69577, .size =
                                 0, .references =NULL};
    int64_t min_res_71128 = futhark_mc_task_76458->free_min_res_71128;
    float defunc_1_f_res_71147 =
          futhark_mc_task_76458->free_defunc_1_f_res_71147;
    float defunc_0_f_res_71148 =
          futhark_mc_task_76458->free_defunc_0_f_res_71148;
    float a0_71168 = futhark_mc_task_76458->free_a0_71168;
    float defunc_2_reduce_res_71169 =
          *futhark_mc_task_76458->retval_defunc_2_reduce_res_71169;
    size_t reduce_stage_1_tid_res_arr_mem_71599_cached_sizze_76460 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71599 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_71599_cached_sizze_76460 <
        (size_t) ((int64_t) 4 * num_tasks_71598)) {
        reduce_stage_1_tid_res_arr_mem_71599 =
            realloc(reduce_stage_1_tid_res_arr_mem_71599, (int64_t) 4 *
                    num_tasks_71598);
        reduce_stage_1_tid_res_arr_mem_71599_cached_sizze_76460 = (int64_t) 4 *
            num_tasks_71598;
    }
    
    int64_t iter_71601;
    struct futhark_mc_segred_stage_1_parloop_struct_76461
    futhark_mc_segred_stage_1_parloop_struct_76461;
    
    futhark_mc_segred_stage_1_parloop_struct_76461.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76461.free_last_res_65689 =
        last_res_65689;
    futhark_mc_segred_stage_1_parloop_struct_76461.free_mem_69562 =
        mem_69562.mem;
    futhark_mc_segred_stage_1_parloop_struct_76461.free_mem_69568 =
        mem_69568.mem;
    futhark_mc_segred_stage_1_parloop_struct_76461.free_mem_69577 =
        mem_69577.mem;
    futhark_mc_segred_stage_1_parloop_struct_76461.free_min_res_71128 =
        min_res_71128;
    futhark_mc_segred_stage_1_parloop_struct_76461.free_defunc_1_f_res_71147 =
        defunc_1_f_res_71147;
    futhark_mc_segred_stage_1_parloop_struct_76461.free_defunc_0_f_res_71148 =
        defunc_0_f_res_71148;
    futhark_mc_segred_stage_1_parloop_struct_76461.free_a0_71168 = a0_71168;
    futhark_mc_segred_stage_1_parloop_struct_76461.free_reduce_stage_1_tid_res_arr_mem_71599 =
        reduce_stage_1_tid_res_arr_mem_71599;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76462_task;
    
    futhark_mc_segred_stage_1_parloop_76462_task.name =
        "futhark_mc_segred_stage_1_parloop_76462";
    futhark_mc_segred_stage_1_parloop_76462_task.fn =
        futhark_mc_segred_stage_1_parloop_76462;
    futhark_mc_segred_stage_1_parloop_76462_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76461;
    futhark_mc_segred_stage_1_parloop_76462_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76462_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76462_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76462_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76462_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76462_task);
    
    if (futhark_mc_segred_stage_1_parloop_76462_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76462_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76462_total_end -
                 futhark_mc_segred_stage_1_parloop_76462_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76462_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76462_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76462_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_71169 = 0.0F;
    }
    
    float x_71603;
    float x_71604;
    
    for (int32_t i_71606 = 0; i_71606 < num_tasks_71598; i_71606++) {
        flat_tid_65532 = i_71606;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_71603 = defunc_2_reduce_res_71169;
            }
            // load next params
            {
                x_71604 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71599)[flat_tid_65532];
            }
            // red body
            {
                float defunc_1_op_res_71605 = x_71603 + x_71604;
                
                defunc_2_reduce_res_71169 = defunc_1_op_res_71605;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_71599);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76459_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76459_end -
                 futhark_mc_segred_task_76459_start;
        
        ctx->futhark_mc_segred_task_76459_runs[tid]++;
        ctx->futhark_mc_segred_task_76459_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76459_iter[tid] += iterations;
    }
    *futhark_mc_task_76458->retval_defunc_2_reduce_res_71169 =
        defunc_2_reduce_res_71169;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76447(void *args, int64_t start,
                                           int64_t end, int flat_tid_65526,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76446
    *futhark_mc_segmap_parloop_struct_76446 =
    (struct futhark_mc_segmap_parloop_struct_76446 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76446->ctx;
    uint64_t futhark_mc_segmap_parloop_76447_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76447_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76446->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76446->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76446->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76446->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76446->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76446->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76446->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76446->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76446->free_m_64052;
    int64_t last_res_65689 =
            futhark_mc_segmap_parloop_struct_76446->free_last_res_65689;
    int64_t min_arg_65701 =
            futhark_mc_segmap_parloop_struct_76446->free_min_arg_65701;
    float max_res_65705 =
          futhark_mc_segmap_parloop_struct_76446->free_max_res_65705;
    struct memblock mem_69562 = {.desc ="mem_69562", .mem =
                                 futhark_mc_segmap_parloop_struct_76446->free_mem_69562,
                                 .size =0, .references =NULL};
    struct memblock mem_69565 = {.desc ="mem_69565", .mem =
                                 futhark_mc_segmap_parloop_struct_76446->free_mem_69565,
                                 .size =0, .references =NULL};
    struct memblock mem_69568 = {.desc ="mem_69568", .mem =
                                 futhark_mc_segmap_parloop_struct_76446->free_mem_69568,
                                 .size =0, .references =NULL};
    struct memblock mem_69571 = {.desc ="mem_69571", .mem =
                                 futhark_mc_segmap_parloop_struct_76446->free_mem_69571,
                                 .size =0, .references =NULL};
    struct memblock mem_69574 = {.desc ="mem_69574", .mem =
                                 futhark_mc_segmap_parloop_struct_76446->free_mem_69574,
                                 .size =0, .references =NULL};
    struct memblock mem_69577 = {.desc ="mem_69577", .mem =
                                 futhark_mc_segmap_parloop_struct_76446->free_mem_69577,
                                 .size =0, .references =NULL};
    struct memblock mem_69580 = {.desc ="mem_69580", .mem =
                                 futhark_mc_segmap_parloop_struct_76446->free_mem_69580,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71476 = start;
    
    for (; iter_71476 < end; iter_71476++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71571 = n_m_64039;
        int64_t gtid_65527 = iter_71476;
        int64_t remnant_71572 = iter_71476 - gtid_65527;
        int64_t min_arg_71050 = mul64(jump_64032, gtid_65527);
        int64_t min_res_71051 = smin64(i_64040, min_arg_71050);
        int64_t defunc_0_g_res_71052 = add64((int64_t) 1, min_res_71051);
        bool nearest_idx_71053;
        int64_t nearest_idx_71054;
        int64_t nearest_idx_71055;
        bool loop_while_71477;
        int64_t low_71478;
        int64_t high_71479;
        
        loop_while_71477 = x_64041;
        low_71478 = (int64_t) 0;
        high_71479 = i_64040;
        while (loop_while_71477) {
            int64_t x_71480 = add64(low_71478, high_71479);
            int64_t mid_71481 = sdiv64(x_71480, (int64_t) 2);
            bool x_71482 = sle64((int64_t) 0, mid_71481);
            bool y_71483 = slt64(mid_71481, n_64028);
            bool bounds_check_71484 = x_71482 && y_71483;
            bool index_certs_71485;
            
            if (!bounds_check_71484) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_71481,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_71486 = ((int64_t *) mem_69571.mem)[mid_71481];
            bool cond_71487 = sle64(defunc_0_g_res_71052, x_71486);
            int64_t loopres_71488;
            int64_t loopres_71489;
            
            if (cond_71487) {
                int64_t loopres_t_res_71490 = sub64(mid_71481, (int64_t) 1);
                
                loopres_71488 = low_71478;
                loopres_71489 = loopres_t_res_71490;
            } else {
                int64_t loopres_f_res_71491 = add64((int64_t) 1, mid_71481);
                
                loopres_71488 = loopres_f_res_71491;
                loopres_71489 = high_71479;
            }
            
            bool loop_cond_71492 = sle64(loopres_71488, loopres_71489);
            bool loop_while_tmp_71573 = loop_cond_71492;
            int64_t low_tmp_71574 = loopres_71488;
            int64_t high_tmp_71575 = loopres_71489;
            
            loop_while_71477 = loop_while_tmp_71573;
            low_71478 = low_tmp_71574;
            high_71479 = high_tmp_71575;
        }
        nearest_idx_71053 = loop_while_71477;
        nearest_idx_71054 = low_71478;
        nearest_idx_71055 = high_71479;
        
        int64_t max_arg_71072 = sub64(nearest_idx_71054, min_res_64046);
        int64_t max_res_71073 = smax64((int64_t) 0, max_arg_71072);
        int64_t j_71074 = add64(min_res_64046, max_res_71073);
        int64_t i_p_m_t_s_71075 = add64(m_64052, max_res_71073);
        bool zzero_leq_i_p_m_t_s_71076 = sle64((int64_t) 0, i_p_m_t_s_71075);
        bool i_p_m_t_s_leq_w_71077 = slt64(i_p_m_t_s_71075, n_64028);
        bool zzero_lte_i_71078 = sle64((int64_t) 0, max_res_71073);
        bool i_lte_j_71079 = sle64(max_res_71073, j_71074);
        bool y_71080 = i_p_m_t_s_leq_w_71077 && zzero_lte_i_71078;
        bool y_71081 = zzero_leq_i_p_m_t_s_71076 && y_71080;
        bool y_71082 = i_lte_j_71079 && y_71081;
        bool forwards_ok_71083 = zzero_lte_i_71078 && y_71082;
        bool ok_or_empty_71084 = empty_slice_64051 || forwards_ok_71083;
        bool index_certs_71085;
        
        if (!ok_or_empty_71084) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_71073, ":",
                          (long long) j_71074,
                          "] out of bounds for array of shape [",
                          (long long) n_64028, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_71086;
        int64_t flat_tid_65528 = (int64_t) 0;
        int32_t num_tasks_71576;
        struct futhark_mc_task_76448 futhark_mc_task_76448;
        
        futhark_mc_task_76448.ctx = ctx;
        futhark_mc_task_76448.free_mem_69574 = mem_69574.mem;
        futhark_mc_task_76448.free_defunc_0_g_res_71052 = defunc_0_g_res_71052;
        futhark_mc_task_76448.free_max_res_71073 = max_res_71073;
        futhark_mc_task_76448.retval_defunc_2_reduce_res_71086 =
            &defunc_2_reduce_res_71086;
        
        struct scheduler_segop futhark_mc_task_76448_task;
        
        futhark_mc_task_76448_task.args = &futhark_mc_task_76448;
        futhark_mc_task_76448_task.top_level_fn = futhark_mc_segred_task_76449;
        futhark_mc_task_76448_task.name = "futhark_mc_segred_task_76449";
        futhark_mc_task_76448_task.iterations = min_res_64046;
        futhark_mc_task_76448_task.task_time =
            &ctx->futhark_mc_segred_task_76449_total_time;
        futhark_mc_task_76448_task.task_iter =
            &ctx->futhark_mc_segred_task_76449_total_iter;
        futhark_mc_task_76448_task.sched = STATIC;
        futhark_mc_task_76448_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76449_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76448_task);
        
        if (futhark_mc_segred_task_76449_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_71094;
        int64_t idx_71095;
        int64_t idx_71096;
        int64_t idx_71097;
        int64_t best_idx_71501;
        int64_t last_idx_71502;
        int64_t best_sum_71503;
        int64_t curr_sum_71504;
        
        best_idx_71501 = max_res_71073;
        last_idx_71502 = max_res_71073;
        best_sum_71503 = defunc_2_reduce_res_71086;
        curr_sum_71504 = defunc_2_reduce_res_71086;
        for (int64_t j_71500 = 0; j_71500 < min_res_64046; j_71500++) {
            int64_t new_idx_71505 = add64(max_res_71073, j_71500);
            int64_t x_71506 = add64(min_res_64046, new_idx_71505);
            bool cond_71507 = slt64(last_res_65689, x_71506);
            int64_t new_sum_71508;
            
            if (cond_71507) {
                new_sum_71508 = (int64_t) 9223372036854775807;
            } else {
                bool x_71509 = sle64((int64_t) 0, last_idx_71502);
                bool y_71510 = slt64(last_idx_71502, n_64028);
                bool bounds_check_71511 = x_71509 && y_71510;
                bool index_certs_71512;
                
                if (!bounds_check_71511) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_71502,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_71513 = ((int64_t *) mem_69574.mem)[last_idx_71502];
                int64_t binop_p_71514 = sub64(defunc_0_g_res_71052, y_71513);
                int64_t defunc_0_f_res_71515 = abs64(binop_p_71514);
                int64_t x_71516 = sub64(curr_sum_71504, defunc_0_f_res_71515);
                int64_t min_arg_71517 = add64(min_res_64046, last_idx_71502);
                int64_t min_res_71518 = smin64(i_64040, min_arg_71517);
                bool x_71519 = sle64((int64_t) 0, min_res_71518);
                bool y_71520 = slt64(min_res_71518, n_64028);
                bool bounds_check_71521 = x_71519 && y_71520;
                bool index_certs_71522;
                
                if (!bounds_check_71521) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_71518,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_71523 = ((int64_t *) mem_69574.mem)[min_res_71518];
                int64_t binop_p_71524 = sub64(defunc_0_g_res_71052, y_71523);
                int64_t defunc_0_f_res_71525 = abs64(binop_p_71524);
                int64_t new_sum_f_res_71526 = add64(x_71516,
                                                    defunc_0_f_res_71525);
                
                new_sum_71508 = new_sum_f_res_71526;
            }
            
            bool cond_71527 = sle64(new_sum_71508, best_sum_71503);
            int64_t loopres_71528;
            
            if (cond_71527) {
                loopres_71528 = new_idx_71505;
            } else {
                loopres_71528 = best_idx_71501;
            }
            
            int64_t loopres_71529;
            
            if (cond_71527) {
                loopres_71529 = new_sum_71508;
            } else {
                loopres_71529 = best_sum_71503;
            }
            
            int64_t best_idx_tmp_71585 = loopres_71528;
            int64_t last_idx_tmp_71586 = new_idx_71505;
            int64_t best_sum_tmp_71587 = loopres_71529;
            int64_t curr_sum_tmp_71588 = new_sum_71508;
            
            best_idx_71501 = best_idx_tmp_71585;
            last_idx_71502 = last_idx_tmp_71586;
            best_sum_71503 = best_sum_tmp_71587;
            curr_sum_71504 = curr_sum_tmp_71588;
        }
        idx_71094 = best_idx_71501;
        idx_71095 = last_idx_71502;
        idx_71096 = best_sum_71503;
        idx_71097 = curr_sum_71504;
        
        int64_t min_res_71128 = smin64(min_arg_65701, idx_71094);
        int64_t x_71129 = add64(min_res_64046, min_res_71128);
        int64_t r_71130 = sub64(x_71129, (int64_t) 1);
        bool x_71131 = sle64((int64_t) 0, r_71130);
        bool y_71132 = slt64(r_71130, n_64028);
        bool bounds_check_71133 = x_71131 && y_71132;
        bool index_certs_71134;
        
        if (!bounds_check_71133) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_71130,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_71135 = ((int64_t *) mem_69565.mem)[r_71130];
        int64_t abs_arg_71136 = sub64(x_71135, min_res_71051);
        int64_t abs_res_71137 = abs64(abs_arg_71136);
        bool x_71138 = sle64((int64_t) 0, min_res_71128);
        bool y_71139 = slt64(min_res_71128, n_64028);
        bool bounds_check_71140 = x_71138 && y_71139;
        bool index_certs_71141;
        
        if (!bounds_check_71140) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_71128,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_71142 = ((int64_t *) mem_69565.mem)[min_res_71128];
        int64_t abs_arg_71143 = sub64(x_71142, min_res_71051);
        int64_t abs_res_71144 = abs64(abs_arg_71143);
        int64_t max_res_71145 = smax64(abs_res_71137, abs_res_71144);
        float defunc_0_f_res_71146 = sitofp_i64_f32(max_res_71145);
        float defunc_1_f_res_71147 = max_res_65705 + defunc_0_f_res_71146;
        float defunc_0_f_res_71148 = sitofp_i64_f32(min_res_71051);
        float defunc_2_reduce_res_71149;
        int64_t flat_tid_65530 = (int64_t) 0;
        int32_t num_tasks_71589;
        struct futhark_mc_task_76453 futhark_mc_task_76453;
        
        futhark_mc_task_76453.ctx = ctx;
        futhark_mc_task_76453.free_last_res_65689 = last_res_65689;
        futhark_mc_task_76453.free_mem_69568 = mem_69568.mem;
        futhark_mc_task_76453.free_mem_69577 = mem_69577.mem;
        futhark_mc_task_76453.free_min_res_71128 = min_res_71128;
        futhark_mc_task_76453.free_defunc_1_f_res_71147 = defunc_1_f_res_71147;
        futhark_mc_task_76453.free_defunc_0_f_res_71148 = defunc_0_f_res_71148;
        futhark_mc_task_76453.retval_defunc_2_reduce_res_71149 =
            &defunc_2_reduce_res_71149;
        
        struct scheduler_segop futhark_mc_task_76453_task;
        
        futhark_mc_task_76453_task.args = &futhark_mc_task_76453;
        futhark_mc_task_76453_task.top_level_fn = futhark_mc_segred_task_76454;
        futhark_mc_task_76453_task.name = "futhark_mc_segred_task_76454";
        futhark_mc_task_76453_task.iterations = q_64030;
        futhark_mc_task_76453_task.task_time =
            &ctx->futhark_mc_segred_task_76454_total_time;
        futhark_mc_task_76453_task.task_iter =
            &ctx->futhark_mc_segred_task_76454_total_iter;
        futhark_mc_task_76453_task.sched = STATIC;
        futhark_mc_task_76453_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76454_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76453_task);
        
        if (futhark_mc_segred_task_76454_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_71168 = 1.0F / defunc_2_reduce_res_71149;
        float defunc_2_reduce_res_71169;
        int64_t flat_tid_65532 = (int64_t) 0;
        int32_t num_tasks_71598;
        struct futhark_mc_task_76458 futhark_mc_task_76458;
        
        futhark_mc_task_76458.ctx = ctx;
        futhark_mc_task_76458.free_last_res_65689 = last_res_65689;
        futhark_mc_task_76458.free_mem_69562 = mem_69562.mem;
        futhark_mc_task_76458.free_mem_69568 = mem_69568.mem;
        futhark_mc_task_76458.free_mem_69577 = mem_69577.mem;
        futhark_mc_task_76458.free_min_res_71128 = min_res_71128;
        futhark_mc_task_76458.free_defunc_1_f_res_71147 = defunc_1_f_res_71147;
        futhark_mc_task_76458.free_defunc_0_f_res_71148 = defunc_0_f_res_71148;
        futhark_mc_task_76458.free_a0_71168 = a0_71168;
        futhark_mc_task_76458.retval_defunc_2_reduce_res_71169 =
            &defunc_2_reduce_res_71169;
        
        struct scheduler_segop futhark_mc_task_76458_task;
        
        futhark_mc_task_76458_task.args = &futhark_mc_task_76458;
        futhark_mc_task_76458_task.top_level_fn = futhark_mc_segred_task_76459;
        futhark_mc_task_76458_task.name = "futhark_mc_segred_task_76459";
        futhark_mc_task_76458_task.iterations = q_64030;
        futhark_mc_task_76458_task.task_time =
            &ctx->futhark_mc_segred_task_76459_total_time;
        futhark_mc_task_76458_task.task_iter =
            &ctx->futhark_mc_segred_task_76459_total_iter;
        futhark_mc_task_76458_task.sched = STATIC;
        futhark_mc_task_76458_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76459_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76458_task);
        
        if (futhark_mc_segred_task_76459_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_69580.mem)[gtid_65527] = defunc_2_reduce_res_71169;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76447_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76447_end -
                 futhark_mc_segmap_parloop_76447_start;
        
        ctx->futhark_mc_segmap_parloop_76447_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76447_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76447_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76445(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65526 = tid;
    int num_tasks_71368 = info.nsubtasks;
    struct futhark_mc_task_76441 *futhark_mc_task_76441 =
                                 (struct futhark_mc_task_76441 *) args;
    struct futhark_context *ctx = futhark_mc_task_76441->ctx;
    uint64_t futhark_mc_segmap_nested_task_76445_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76445_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76441->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76441->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76441->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76441->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76441->free_i_64040;
    bool x_64041 = futhark_mc_task_76441->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76441->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76441->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76441->free_m_64052;
    int64_t last_res_65689 = futhark_mc_task_76441->free_last_res_65689;
    int64_t min_arg_65701 = futhark_mc_task_76441->free_min_arg_65701;
    float max_res_65705 = futhark_mc_task_76441->free_max_res_65705;
    struct memblock mem_69562 = {.desc ="mem_69562", .mem =
                                 futhark_mc_task_76441->free_mem_69562, .size =
                                 0, .references =NULL};
    struct memblock mem_69565 = {.desc ="mem_69565", .mem =
                                 futhark_mc_task_76441->free_mem_69565, .size =
                                 0, .references =NULL};
    struct memblock mem_69568 = {.desc ="mem_69568", .mem =
                                 futhark_mc_task_76441->free_mem_69568, .size =
                                 0, .references =NULL};
    struct memblock mem_69571 = {.desc ="mem_69571", .mem =
                                 futhark_mc_task_76441->free_mem_69571, .size =
                                 0, .references =NULL};
    struct memblock mem_69574 = {.desc ="mem_69574", .mem =
                                 futhark_mc_task_76441->free_mem_69574, .size =
                                 0, .references =NULL};
    struct memblock mem_69577 = {.desc ="mem_69577", .mem =
                                 futhark_mc_task_76441->free_mem_69577, .size =
                                 0, .references =NULL};
    struct memblock mem_69580 = {.desc ="mem_69580", .mem =
                                 futhark_mc_task_76441->free_mem_69580, .size =
                                 0, .references =NULL};
    int64_t iter_71476;
    struct futhark_mc_segmap_parloop_struct_76446
    futhark_mc_segmap_parloop_struct_76446;
    
    futhark_mc_segmap_parloop_struct_76446.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76446.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76446.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76446.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76446.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76446.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76446.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76446.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76446.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76446.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76446.free_last_res_65689 = last_res_65689;
    futhark_mc_segmap_parloop_struct_76446.free_min_arg_65701 = min_arg_65701;
    futhark_mc_segmap_parloop_struct_76446.free_max_res_65705 = max_res_65705;
    futhark_mc_segmap_parloop_struct_76446.free_mem_69562 = mem_69562.mem;
    futhark_mc_segmap_parloop_struct_76446.free_mem_69565 = mem_69565.mem;
    futhark_mc_segmap_parloop_struct_76446.free_mem_69568 = mem_69568.mem;
    futhark_mc_segmap_parloop_struct_76446.free_mem_69571 = mem_69571.mem;
    futhark_mc_segmap_parloop_struct_76446.free_mem_69574 = mem_69574.mem;
    futhark_mc_segmap_parloop_struct_76446.free_mem_69577 = mem_69577.mem;
    futhark_mc_segmap_parloop_struct_76446.free_mem_69580 = mem_69580.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76447_task;
    
    futhark_mc_segmap_parloop_76447_task.name =
        "futhark_mc_segmap_parloop_76447";
    futhark_mc_segmap_parloop_76447_task.fn = futhark_mc_segmap_parloop_76447;
    futhark_mc_segmap_parloop_76447_task.args =
        &futhark_mc_segmap_parloop_struct_76446;
    futhark_mc_segmap_parloop_76447_task.iterations = iterations;
    futhark_mc_segmap_parloop_76447_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76447_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76447_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76447_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76447_task);
    
    if (futhark_mc_segmap_parloop_76447_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76447_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76447_total_end -
                 futhark_mc_segmap_parloop_76447_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76447_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76447_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76447_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76445_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76445_end -
                 futhark_mc_segmap_nested_task_76445_start;
        
        ctx->futhark_mc_segmap_nested_task_76445_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76445_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76445_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76413(void *args, int64_t start,
                                           int64_t end, int flat_tid_65514,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76412
    *futhark_mc_segmap_parloop_struct_76412 =
    (struct futhark_mc_segmap_parloop_struct_76412 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76412->ctx;
    uint64_t futhark_mc_segmap_parloop_76413_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76413_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_segmap_parloop_struct_76412->free_m_64027;
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76412->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76412->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76412->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76412->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76412->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76412->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76412->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76412->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76412->free_m_64052;
    float i64_res_64053 =
          futhark_mc_segmap_parloop_struct_76412->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76412->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_69557 =
            futhark_mc_segmap_parloop_struct_76412->free_bytes_69557;
    int64_t bytes_69560 =
            futhark_mc_segmap_parloop_struct_76412->free_bytes_69560;
    int64_t bytes_69575 =
            futhark_mc_segmap_parloop_struct_76412->free_bytes_69575;
    int64_t bytes_69578 =
            futhark_mc_segmap_parloop_struct_76412->free_bytes_69578;
    struct memblock mem_69704 = {.desc ="mem_69704", .mem =
                                 futhark_mc_segmap_parloop_struct_76412->free_mem_69704,
                                 .size =0, .references =NULL};
    size_t mem_69559_cached_sizze_76414 = 0;
    char *mem_69559 = NULL;
    size_t mem_69562_cached_sizze_76415 = 0;
    char *mem_69562 = NULL;
    size_t mem_69565_cached_sizze_76416 = 0;
    char *mem_69565 = NULL;
    size_t mem_69568_cached_sizze_76417 = 0;
    char *mem_69568 = NULL;
    size_t mem_69571_cached_sizze_76418 = 0;
    char *mem_69571 = NULL;
    size_t mem_69574_cached_sizze_76419 = 0;
    char *mem_69574 = NULL;
    size_t mem_69577_cached_sizze_76420 = 0;
    char *mem_69577 = NULL;
    size_t mem_69580_cached_sizze_76421 = 0;
    char *mem_69580 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71029 = start;
    
    if (mem_69559_cached_sizze_76414 < (size_t) bytes_69557) {
        mem_69559 = realloc(mem_69559, bytes_69557);
        mem_69559_cached_sizze_76414 = bytes_69557;
    }
    if (mem_69562_cached_sizze_76415 < (size_t) bytes_69560) {
        mem_69562 = realloc(mem_69562, bytes_69560);
        mem_69562_cached_sizze_76415 = bytes_69560;
    }
    if (mem_69565_cached_sizze_76416 < (size_t) bytes_69557) {
        mem_69565 = realloc(mem_69565, bytes_69557);
        mem_69565_cached_sizze_76416 = bytes_69557;
    }
    if (mem_69568_cached_sizze_76417 < (size_t) bytes_69560) {
        mem_69568 = realloc(mem_69568, bytes_69560);
        mem_69568_cached_sizze_76417 = bytes_69560;
    }
    if (mem_69571_cached_sizze_76418 < (size_t) bytes_69557) {
        mem_69571 = realloc(mem_69571, bytes_69557);
        mem_69571_cached_sizze_76418 = bytes_69557;
    }
    if (mem_69574_cached_sizze_76419 < (size_t) bytes_69557) {
        mem_69574 = realloc(mem_69574, bytes_69557);
        mem_69574_cached_sizze_76419 = bytes_69557;
    }
    if (mem_69577_cached_sizze_76420 < (size_t) bytes_69575) {
        mem_69577 = realloc(mem_69577, bytes_69575);
        mem_69577_cached_sizze_76420 = bytes_69575;
    }
    if (mem_69580_cached_sizze_76421 < (size_t) bytes_69578) {
        mem_69580 = realloc(mem_69580, bytes_69578);
        mem_69580_cached_sizze_76421 = bytes_69578;
    }
    for (; iter_71029 < end; iter_71029++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71336 = m_64027;
        int64_t gtid_65515 = iter_71029;
        int64_t remnant_71337 = iter_71029 - gtid_65515;
        int64_t flat_tid_65516 = (int64_t) 0;
        int32_t num_tasks_71338;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_76422 futhark_mc_task_76422;
        
        futhark_mc_task_76422.ctx = ctx;
        futhark_mc_task_76422.free_n_64028 = n_64028;
        futhark_mc_task_76422.free_gtid_65515 = gtid_65515;
        futhark_mc_task_76422.free_Y_mem_69552 = Y_mem_69552.mem;
        futhark_mc_task_76422.free_mem_69559 = mem_69559;
        
        struct scheduler_segop futhark_mc_task_76422_task;
        
        futhark_mc_task_76422_task.args = &futhark_mc_task_76422;
        futhark_mc_task_76422_task.top_level_fn = futhark_mc_segscan_task_76423;
        futhark_mc_task_76422_task.name = "futhark_mc_segscan_task_76423";
        futhark_mc_task_76422_task.iterations = n_64028;
        futhark_mc_task_76422_task.task_time =
            &ctx->futhark_mc_segscan_task_76423_total_time;
        futhark_mc_task_76422_task.task_iter =
            &ctx->futhark_mc_segscan_task_76423_total_iter;
        futhark_mc_task_76422_task.sched = STATIC;
        futhark_mc_task_76422_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_76423_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76422_task);
        
        if (futhark_mc_segscan_task_76423_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_65689 = ((int64_t *) mem_69559)[i_64040];
        
        for (int64_t i_71352 = 0; i_71352 < n_64028; i_71352++) {
            ((float *) mem_69562)[i_71352] = 0.0F;
        }
        for (int64_t i_71353 = 0; i_71353 < n_64028; i_71353++) {
            ((int64_t *) mem_69565)[i_71353] = (int64_t) -1;
        }
        
        int64_t flat_tid_65518 = (int64_t) 0;
        int32_t num_tasks_71354;
        struct futhark_mc_task_76429 futhark_mc_task_76429;
        
        futhark_mc_task_76429.ctx = ctx;
        futhark_mc_task_76429.free_n_64028 = n_64028;
        futhark_mc_task_76429.free_gtid_65515 = gtid_65515;
        futhark_mc_task_76429.free_Y_mem_69552 = Y_mem_69552.mem;
        futhark_mc_task_76429.free_mem_69559 = mem_69559;
        futhark_mc_task_76429.free_mem_69562 = mem_69562;
        futhark_mc_task_76429.free_mem_69565 = mem_69565;
        
        struct scheduler_segop futhark_mc_task_76429_task;
        
        futhark_mc_task_76429_task.args = &futhark_mc_task_76429;
        futhark_mc_task_76429_task.top_level_fn = futhark_mc_segmap_task_76430;
        futhark_mc_task_76429_task.name = "futhark_mc_segmap_task_76430";
        futhark_mc_task_76429_task.iterations = n_64028;
        futhark_mc_task_76429_task.task_time =
            &ctx->futhark_mc_segmap_task_76430_total_time;
        futhark_mc_task_76429_task.task_iter =
            &ctx->futhark_mc_segmap_task_76430_total_iter;
        futhark_mc_task_76429_task.sched = STATIC;
        futhark_mc_task_76429_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76430_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76429_task);
        
        if (futhark_mc_segmap_task_76430_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_65701 = sub64(last_res_65689, min_res_64046);
        float i64_res_65702 = sitofp_i64_f32(last_res_65689);
        float x_65703 = i64_res_64053 - i64_res_65702;
        float max_arg_65704 = x_65703 / 2.0F;
        float max_res_65705 = fmax32(0.0F, max_arg_65704);
        int64_t flat_tid_65520 = (int64_t) 0;
        int32_t num_tasks_71360;
        struct futhark_mc_task_76433 futhark_mc_task_76433;
        
        futhark_mc_task_76433.ctx = ctx;
        futhark_mc_task_76433.free_n_64028 = n_64028;
        futhark_mc_task_76433.free_mem_69565 = mem_69565;
        futhark_mc_task_76433.free_mem_69568 = mem_69568;
        futhark_mc_task_76433.free_mem_69571 = mem_69571;
        futhark_mc_task_76433.free_mem_69574 = mem_69574;
        
        struct scheduler_segop futhark_mc_task_76433_task;
        
        futhark_mc_task_76433_task.args = &futhark_mc_task_76433;
        futhark_mc_task_76433_task.top_level_fn = futhark_mc_segmap_task_76434;
        futhark_mc_task_76433_task.name = "futhark_mc_segmap_task_76434";
        futhark_mc_task_76433_task.iterations = n_64028;
        futhark_mc_task_76433_task.task_time =
            &ctx->futhark_mc_segmap_task_76434_total_time;
        futhark_mc_task_76433_task.task_iter =
            &ctx->futhark_mc_segmap_task_76434_total_iter;
        futhark_mc_task_76433_task.sched = STATIC;
        futhark_mc_task_76433_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76434_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76433_task);
        
        if (futhark_mc_segmap_task_76434_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_65522 = (int64_t) 0;
        int32_t num_tasks_71364;
        struct futhark_mc_task_76437 futhark_mc_task_76437;
        
        futhark_mc_task_76437.ctx = ctx;
        futhark_mc_task_76437.free_q_64030 = q_64030;
        futhark_mc_task_76437.free_last_res_65689 = last_res_65689;
        futhark_mc_task_76437.free_mem_69577 = mem_69577;
        
        struct scheduler_segop futhark_mc_task_76437_task;
        
        futhark_mc_task_76437_task.args = &futhark_mc_task_76437;
        futhark_mc_task_76437_task.top_level_fn = futhark_mc_segmap_task_76438;
        futhark_mc_task_76437_task.name = "futhark_mc_segmap_task_76438";
        futhark_mc_task_76437_task.iterations = q_64030;
        futhark_mc_task_76437_task.task_time =
            &ctx->futhark_mc_segmap_task_76438_total_time;
        futhark_mc_task_76437_task.task_iter =
            &ctx->futhark_mc_segmap_task_76438_total_iter;
        futhark_mc_task_76437_task.sched = STATIC;
        futhark_mc_task_76437_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76438_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76437_task);
        
        if (futhark_mc_segmap_task_76438_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_65524 = (int64_t) 0;
        int32_t num_tasks_71368;
        int64_t flat_tid_65526 = (int64_t) 0;
        struct futhark_mc_task_76441 futhark_mc_task_76441;
        
        futhark_mc_task_76441.ctx = ctx;
        futhark_mc_task_76441.free_n_64028 = n_64028;
        futhark_mc_task_76441.free_q_64030 = q_64030;
        futhark_mc_task_76441.free_jump_64032 = jump_64032;
        futhark_mc_task_76441.free_n_m_64039 = n_m_64039;
        futhark_mc_task_76441.free_i_64040 = i_64040;
        futhark_mc_task_76441.free_x_64041 = x_64041;
        futhark_mc_task_76441.free_min_res_64046 = min_res_64046;
        futhark_mc_task_76441.free_empty_slice_64051 = empty_slice_64051;
        futhark_mc_task_76441.free_m_64052 = m_64052;
        futhark_mc_task_76441.free_last_res_65689 = last_res_65689;
        futhark_mc_task_76441.free_min_arg_65701 = min_arg_65701;
        futhark_mc_task_76441.free_max_res_65705 = max_res_65705;
        futhark_mc_task_76441.free_mem_69562 = mem_69562;
        futhark_mc_task_76441.free_mem_69565 = mem_69565;
        futhark_mc_task_76441.free_mem_69568 = mem_69568;
        futhark_mc_task_76441.free_mem_69571 = mem_69571;
        futhark_mc_task_76441.free_mem_69574 = mem_69574;
        futhark_mc_task_76441.free_mem_69577 = mem_69577;
        futhark_mc_task_76441.free_mem_69580 = mem_69580;
        
        struct scheduler_segop futhark_mc_task_76441_task;
        
        futhark_mc_task_76441_task.args = &futhark_mc_task_76441;
        futhark_mc_task_76441_task.top_level_fn = futhark_mc_segmap_task_76442;
        futhark_mc_task_76441_task.name = "futhark_mc_segmap_task_76442";
        futhark_mc_task_76441_task.iterations = n_m_64039;
        futhark_mc_task_76441_task.task_time =
            &ctx->futhark_mc_segmap_task_76442_total_time;
        futhark_mc_task_76441_task.task_iter =
            &ctx->futhark_mc_segmap_task_76442_total_iter;
        futhark_mc_task_76441_task.sched = DYNAMIC;
        futhark_mc_task_76441_task.nested_fn =
            futhark_mc_segmap_nested_task_76445;
        
        int futhark_mc_segmap_task_76442_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76441_task);
        
        if (futhark_mc_segmap_task_76442_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_69704.mem + gtid_65515 * n_m_64039 * (int64_t) 4,
                mem_69580 + (int64_t) 0, n_m_64039 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_69559);
    free(mem_69562);
    free(mem_69565);
    free(mem_69568);
    free(mem_69571);
    free(mem_69574);
    free(mem_69577);
    free(mem_69580);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76413_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76413_end -
                 futhark_mc_segmap_parloop_76413_start;
        
        ctx->futhark_mc_segmap_parloop_76413_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76413_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76413_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76411(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65514 = tid;
    int num_tasks_70820 = info.nsubtasks;
    struct futhark_mc_task_76399 *futhark_mc_task_76399 =
                                 (struct futhark_mc_task_76399 *) args;
    struct futhark_context *ctx = futhark_mc_task_76399->ctx;
    uint64_t futhark_mc_segmap_nested_task_76411_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76411_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_task_76399->free_m_64027;
    int64_t n_64028 = futhark_mc_task_76399->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76399->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76399->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76399->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76399->free_i_64040;
    bool x_64041 = futhark_mc_task_76399->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76399->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76399->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76399->free_m_64052;
    float i64_res_64053 = futhark_mc_task_76399->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76399->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_69557 = futhark_mc_task_76399->free_bytes_69557;
    int64_t bytes_69560 = futhark_mc_task_76399->free_bytes_69560;
    int64_t bytes_69575 = futhark_mc_task_76399->free_bytes_69575;
    int64_t bytes_69578 = futhark_mc_task_76399->free_bytes_69578;
    struct memblock mem_69704 = {.desc ="mem_69704", .mem =
                                 futhark_mc_task_76399->free_mem_69704, .size =
                                 0, .references =NULL};
    int64_t iter_71029;
    struct futhark_mc_segmap_parloop_struct_76412
    futhark_mc_segmap_parloop_struct_76412;
    
    futhark_mc_segmap_parloop_struct_76412.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76412.free_m_64027 = m_64027;
    futhark_mc_segmap_parloop_struct_76412.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76412.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76412.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76412.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76412.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76412.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76412.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76412.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76412.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76412.free_i64_res_64053 = i64_res_64053;
    futhark_mc_segmap_parloop_struct_76412.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76412.free_bytes_69557 = bytes_69557;
    futhark_mc_segmap_parloop_struct_76412.free_bytes_69560 = bytes_69560;
    futhark_mc_segmap_parloop_struct_76412.free_bytes_69575 = bytes_69575;
    futhark_mc_segmap_parloop_struct_76412.free_bytes_69578 = bytes_69578;
    futhark_mc_segmap_parloop_struct_76412.free_mem_69704 = mem_69704.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76413_task;
    
    futhark_mc_segmap_parloop_76413_task.name =
        "futhark_mc_segmap_parloop_76413";
    futhark_mc_segmap_parloop_76413_task.fn = futhark_mc_segmap_parloop_76413;
    futhark_mc_segmap_parloop_76413_task.args =
        &futhark_mc_segmap_parloop_struct_76412;
    futhark_mc_segmap_parloop_76413_task.iterations = iterations;
    futhark_mc_segmap_parloop_76413_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76413_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76413_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76413_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76413_task);
    
    if (futhark_mc_segmap_parloop_76413_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76413_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76413_total_end -
                 futhark_mc_segmap_parloop_76413_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76413_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76413_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76413_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76411_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76411_end -
                 futhark_mc_segmap_nested_task_76411_start;
        
        ctx->futhark_mc_segmap_nested_task_76411_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76411_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76411_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76463 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_69705;
    int64_t free_bytes_69708;
    int64_t free_bytes_69723;
    int64_t free_bytes_69726;
    char *free_mem_69870;
    char *free_mem_69874;
};
struct futhark_mc_segmap_parloop_struct_76465 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_69705;
    int64_t free_bytes_69708;
    int64_t free_bytes_69723;
    int64_t free_bytes_69726;
    char *free_mem_69870;
    char *free_mem_69874;
};
static int futhark_mc_segmap_parloop_76466(void *args, int64_t start,
                                           int64_t end, int flat_tid_66011,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76465
    *futhark_mc_segmap_parloop_struct_76465 =
    (struct futhark_mc_segmap_parloop_struct_76465 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76465->ctx;
    uint64_t futhark_mc_segmap_parloop_76466_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76466_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_segmap_parloop_struct_76465->free_m_64027;
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76465->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76465->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76465->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76465->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76465->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76465->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76465->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76465->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76465->free_m_64052;
    float i64_res_64053 =
          futhark_mc_segmap_parloop_struct_76465->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76465->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_69705 =
            futhark_mc_segmap_parloop_struct_76465->free_bytes_69705;
    int64_t bytes_69708 =
            futhark_mc_segmap_parloop_struct_76465->free_bytes_69708;
    int64_t bytes_69723 =
            futhark_mc_segmap_parloop_struct_76465->free_bytes_69723;
    int64_t bytes_69726 =
            futhark_mc_segmap_parloop_struct_76465->free_bytes_69726;
    struct memblock mem_69870 = {.desc ="mem_69870", .mem =
                                 futhark_mc_segmap_parloop_struct_76465->free_mem_69870,
                                 .size =0, .references =NULL};
    struct memblock mem_69874 = {.desc ="mem_69874", .mem =
                                 futhark_mc_segmap_parloop_struct_76465->free_mem_69874,
                                 .size =0, .references =NULL};
    size_t mem_69734_cached_sizze_76467 = 0;
    char *mem_69734 = NULL;
    size_t mem_69749_cached_sizze_76468 = 0;
    char *mem_69749 = NULL;
    size_t mem_69752_cached_sizze_76469 = 0;
    char *mem_69752 = NULL;
    size_t mem_69779_cached_sizze_76470 = 0;
    char *mem_69779 = NULL;
    size_t mem_69782_cached_sizze_76471 = 0;
    char *mem_69782 = NULL;
    size_t mem_69785_cached_sizze_76472 = 0;
    char *mem_69785 = NULL;
    size_t mem_69824_cached_sizze_76473 = 0;
    char *mem_69824 = NULL;
    size_t mem_69839_cached_sizze_76474 = 0;
    char *mem_69839 = NULL;
    size_t mem_69842_cached_sizze_76475 = 0;
    char *mem_69842 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71608 = start;
    
    if (mem_69734_cached_sizze_76467 < (size_t) bytes_69705) {
        mem_69734 = realloc(mem_69734, bytes_69705);
        mem_69734_cached_sizze_76467 = bytes_69705;
    }
    if (mem_69749_cached_sizze_76468 < (size_t) bytes_69708) {
        mem_69749 = realloc(mem_69749, bytes_69708);
        mem_69749_cached_sizze_76468 = bytes_69708;
    }
    if (mem_69752_cached_sizze_76469 < (size_t) bytes_69705) {
        mem_69752 = realloc(mem_69752, bytes_69705);
        mem_69752_cached_sizze_76469 = bytes_69705;
    }
    if (mem_69779_cached_sizze_76470 < (size_t) bytes_69708) {
        mem_69779 = realloc(mem_69779, bytes_69708);
        mem_69779_cached_sizze_76470 = bytes_69708;
    }
    if (mem_69782_cached_sizze_76471 < (size_t) bytes_69705) {
        mem_69782 = realloc(mem_69782, bytes_69705);
        mem_69782_cached_sizze_76471 = bytes_69705;
    }
    if (mem_69785_cached_sizze_76472 < (size_t) bytes_69705) {
        mem_69785 = realloc(mem_69785, bytes_69705);
        mem_69785_cached_sizze_76472 = bytes_69705;
    }
    if (mem_69824_cached_sizze_76473 < (size_t) bytes_69723) {
        mem_69824 = realloc(mem_69824, bytes_69723);
        mem_69824_cached_sizze_76473 = bytes_69723;
    }
    if (mem_69839_cached_sizze_76474 < (size_t) bytes_69726) {
        mem_69839 = realloc(mem_69839, bytes_69726);
        mem_69839_cached_sizze_76474 = bytes_69726;
    }
    if (mem_69842_cached_sizze_76475 < (size_t) bytes_69726) {
        mem_69842 = realloc(mem_69842, bytes_69726);
        mem_69842_cached_sizze_76475 = bytes_69726;
    }
    for (; iter_71608 < end; iter_71608++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71820 = m_64027;
        int64_t gtid_66012 = iter_71608;
        int64_t remnant_71821 = iter_71608 - gtid_66012;
        int64_t discard_69144;
        int64_t scanacc_71610 = (int64_t) 0;
        
        for (int64_t i_71609 = 0; i_71609 < n_64028; i_71609++) {
            float x_71612 = ((float *) Y_mem_69552.mem)[gtid_66012 * n_64028 +
                                                        i_71609];
            bool isnan_res_71613;
            
            isnan_res_71613 = futrts_isnan32(x_71612);
            
            bool defunc_0_p_res_71614 = !isnan_res_71613;
            int64_t defunc_0_f_res_71615 = btoi_bool_i64(defunc_0_p_res_71614);
            int64_t defunc_1_op_res_71616 = add64(defunc_0_f_res_71615,
                                                  scanacc_71610);
            
            ((int64_t *) mem_69734)[i_71609] = defunc_1_op_res_71616;
            
            int64_t scanacc_tmp_71822 = defunc_1_op_res_71616;
            
            scanacc_71610 = scanacc_tmp_71822;
        }
        discard_69144 = scanacc_71610;
        
        int64_t last_res_64278 = ((int64_t *) mem_69734)[i_64040];
        
        for (int64_t i_71824 = 0; i_71824 < n_64028; i_71824++) {
            ((float *) mem_69749)[i_71824] = 0.0F;
        }
        for (int64_t i_71825 = 0; i_71825 < n_64028; i_71825++) {
            ((int64_t *) mem_69752)[i_71825] = (int64_t) -1;
        }
        for (int64_t write_iter_71618 = 0; write_iter_71618 < n_64028;
             write_iter_71618++) {
            float write_iv_71621 = ((float *) Y_mem_69552.mem)[gtid_66012 *
                                                               n_64028 +
                                                               write_iter_71618];
            bool isnan_res_71622;
            
            isnan_res_71622 = futrts_isnan32(write_iv_71621);
            
            bool defunc_0_p_res_71623 = !isnan_res_71622;
            int64_t defunc_1_f_res_71624;
            
            if (defunc_0_p_res_71623) {
                int64_t write_iv_71625 =
                        ((int64_t *) mem_69734)[write_iter_71618];
                int64_t defunc_1_f_res_t_res_71626 = sub64(write_iv_71625,
                                                           (int64_t) 1);
                
                defunc_1_f_res_71624 = defunc_1_f_res_t_res_71626;
            } else {
                defunc_1_f_res_71624 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_71624) &&
                slt64(defunc_1_f_res_71624, n_64028)) {
                ((int64_t *) mem_69752)[defunc_1_f_res_71624] =
                    write_iter_71618;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_71624) &&
                slt64(defunc_1_f_res_71624, n_64028)) {
                memmove(mem_69749 + defunc_1_f_res_71624 * (int64_t) 4,
                        Y_mem_69552.mem + (gtid_66012 * n_64028 +
                                           write_iter_71618) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_64296 = sub64(last_res_64278, min_res_64046);
        float i64_res_64297 = sitofp_i64_f32(last_res_64278);
        float x_64298 = i64_res_64053 - i64_res_64297;
        float max_arg_64299 = x_64298 / 2.0F;
        float max_res_64300 = fmax32(0.0F, max_arg_64299);
        
        for (int64_t i_71630 = 0; i_71630 < n_64028; i_71630++) {
            int64_t x_71634 = ((int64_t *) mem_69752)[i_71630];
            int64_t defunc_0_f_res_71635 = add64((int64_t) 1, x_71634);
            bool cond_71636 = slt64(defunc_0_f_res_71635, (int64_t) 0);
            int64_t defunc_0_f_res_71637;
            
            if (cond_71636) {
                defunc_0_f_res_71637 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_71637 = defunc_0_f_res_71635;
            }
            
            float defunc_0_f_res_71638 = sitofp_i64_f32(x_71634);
            
            ((float *) mem_69779)[i_71630] = defunc_0_f_res_71638;
            ((int64_t *) mem_69782)[i_71630] = defunc_0_f_res_71637;
            ((int64_t *) mem_69785)[i_71630] = defunc_0_f_res_71635;
        }
        for (int64_t i_71642 = 0; i_71642 < q_64030; i_71642++) {
            bool cond_71644 = sle64(last_res_64278, i_71642);
            float defunc_0_f_res_71645;
            
            if (cond_71644) {
                defunc_0_f_res_71645 = 0.0F;
            } else {
                defunc_0_f_res_71645 = 1.0F;
            }
            ((float *) mem_69824)[i_71642] = defunc_0_f_res_71645;
        }
        for (int64_t i_71647 = 0; i_71647 < n_m_64039; i_71647++) {
            int64_t min_arg_71650 = mul64(jump_64032, i_71647);
            int64_t min_res_71651 = smin64(i_64040, min_arg_71650);
            int64_t defunc_0_g_res_71652 = add64((int64_t) 1, min_res_71651);
            bool nearest_idx_71653;
            int64_t nearest_idx_71654;
            int64_t nearest_idx_71655;
            bool loop_while_71656;
            int64_t low_71657;
            int64_t high_71658;
            
            loop_while_71656 = x_64041;
            low_71657 = (int64_t) 0;
            high_71658 = i_64040;
            while (loop_while_71656) {
                int64_t x_71659 = add64(low_71657, high_71658);
                int64_t mid_71660 = sdiv64(x_71659, (int64_t) 2);
                bool x_71661 = sle64((int64_t) 0, mid_71660);
                bool y_71662 = slt64(mid_71660, n_64028);
                bool bounds_check_71663 = x_71661 && y_71662;
                bool index_certs_71664;
                
                if (!bounds_check_71663) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_71660,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t x_71665 = ((int64_t *) mem_69782)[mid_71660];
                bool cond_71666 = sle64(defunc_0_g_res_71652, x_71665);
                int64_t loopres_71667;
                int64_t loopres_71668;
                
                if (cond_71666) {
                    int64_t loopres_t_res_71669 = sub64(mid_71660, (int64_t) 1);
                    
                    loopres_71667 = low_71657;
                    loopres_71668 = loopres_t_res_71669;
                } else {
                    int64_t loopres_f_res_71670 = add64((int64_t) 1, mid_71660);
                    
                    loopres_71667 = loopres_f_res_71670;
                    loopres_71668 = high_71658;
                }
                
                bool loop_cond_71671 = sle64(loopres_71667, loopres_71668);
                bool loop_while_tmp_71834 = loop_cond_71671;
                int64_t low_tmp_71835 = loopres_71667;
                int64_t high_tmp_71836 = loopres_71668;
                
                loop_while_71656 = loop_while_tmp_71834;
                low_71657 = low_tmp_71835;
                high_71658 = high_tmp_71836;
            }
            nearest_idx_71653 = loop_while_71656;
            nearest_idx_71654 = low_71657;
            nearest_idx_71655 = high_71658;
            
            int64_t max_arg_71672 = sub64(nearest_idx_71654, min_res_64046);
            int64_t max_res_71673 = smax64((int64_t) 0, max_arg_71672);
            int64_t j_71674 = add64(min_res_64046, max_res_71673);
            int64_t i_p_m_t_s_71675 = add64(m_64052, max_res_71673);
            bool zzero_leq_i_p_m_t_s_71676 = sle64((int64_t) 0,
                                                   i_p_m_t_s_71675);
            bool i_p_m_t_s_leq_w_71677 = slt64(i_p_m_t_s_71675, n_64028);
            bool zzero_lte_i_71678 = sle64((int64_t) 0, max_res_71673);
            bool i_lte_j_71679 = sle64(max_res_71673, j_71674);
            bool y_71680 = i_p_m_t_s_leq_w_71677 && zzero_lte_i_71678;
            bool y_71681 = zzero_leq_i_p_m_t_s_71676 && y_71680;
            bool y_71682 = i_lte_j_71679 && y_71681;
            bool forwards_ok_71683 = zzero_lte_i_71678 && y_71682;
            bool ok_or_empty_71684 = empty_slice_64051 || forwards_ok_71683;
            bool index_certs_71685;
            
            if (!ok_or_empty_71684) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_71673, ":",
                              (long long) j_71674,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_71686;
            int64_t redout_71688 = (int64_t) 0;
            
            for (int64_t i_71687 = 0; i_71687 < min_res_64046; i_71687++) {
                int64_t slice_71689 = max_res_71673 + i_71687;
                int64_t x_71690 = ((int64_t *) mem_69785)[slice_71689];
                int64_t abs_arg_71691 = sub64(x_71690, defunc_0_g_res_71652);
                int64_t abs_res_71692 = abs64(abs_arg_71691);
                int64_t defunc_1_op_res_71693 = add64(abs_res_71692,
                                                      redout_71688);
                int64_t redout_tmp_71837 = defunc_1_op_res_71693;
                
                redout_71688 = redout_tmp_71837;
            }
            defunc_2_reduce_res_71686 = redout_71688;
            
            int64_t idx_71694;
            int64_t idx_71695;
            int64_t idx_71696;
            int64_t idx_71697;
            int64_t best_idx_71699;
            int64_t last_idx_71700;
            int64_t best_sum_71701;
            int64_t curr_sum_71702;
            
            best_idx_71699 = max_res_71673;
            last_idx_71700 = max_res_71673;
            best_sum_71701 = defunc_2_reduce_res_71686;
            curr_sum_71702 = defunc_2_reduce_res_71686;
            for (int64_t j_71698 = 0; j_71698 < min_res_64046; j_71698++) {
                int64_t new_idx_71703 = add64(max_res_71673, j_71698);
                int64_t x_71704 = add64(min_res_64046, new_idx_71703);
                bool cond_71705 = slt64(last_res_64278, x_71704);
                int64_t new_sum_71706;
                
                if (cond_71705) {
                    new_sum_71706 = (int64_t) 9223372036854775807;
                } else {
                    bool x_71707 = sle64((int64_t) 0, last_idx_71700);
                    bool y_71708 = slt64(last_idx_71700, n_64028);
                    bool bounds_check_71709 = x_71707 && y_71708;
                    bool index_certs_71710;
                    
                    if (!bounds_check_71709) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_71700,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        return 1;
                    }
                    
                    int64_t y_71711 = ((int64_t *) mem_69785)[last_idx_71700];
                    int64_t binop_p_71712 = sub64(defunc_0_g_res_71652,
                                                  y_71711);
                    int64_t defunc_0_f_res_71713 = abs64(binop_p_71712);
                    int64_t x_71714 = sub64(curr_sum_71702,
                                            defunc_0_f_res_71713);
                    int64_t min_arg_71715 = add64(min_res_64046,
                                                  last_idx_71700);
                    int64_t min_res_71716 = smin64(i_64040, min_arg_71715);
                    bool x_71717 = sle64((int64_t) 0, min_res_71716);
                    bool y_71718 = slt64(min_res_71716, n_64028);
                    bool bounds_check_71719 = x_71717 && y_71718;
                    bool index_certs_71720;
                    
                    if (!bounds_check_71719) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_71716,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        return 1;
                    }
                    
                    int64_t y_71721 = ((int64_t *) mem_69785)[min_res_71716];
                    int64_t binop_p_71722 = sub64(defunc_0_g_res_71652,
                                                  y_71721);
                    int64_t defunc_0_f_res_71723 = abs64(binop_p_71722);
                    int64_t new_sum_f_res_71724 = add64(x_71714,
                                                        defunc_0_f_res_71723);
                    
                    new_sum_71706 = new_sum_f_res_71724;
                }
                
                bool cond_71725 = sle64(new_sum_71706, best_sum_71701);
                int64_t loopres_71726;
                
                if (cond_71725) {
                    loopres_71726 = new_idx_71703;
                } else {
                    loopres_71726 = best_idx_71699;
                }
                
                int64_t loopres_71727;
                
                if (cond_71725) {
                    loopres_71727 = new_sum_71706;
                } else {
                    loopres_71727 = best_sum_71701;
                }
                
                int64_t best_idx_tmp_71838 = loopres_71726;
                int64_t last_idx_tmp_71839 = new_idx_71703;
                int64_t best_sum_tmp_71840 = loopres_71727;
                int64_t curr_sum_tmp_71841 = new_sum_71706;
                
                best_idx_71699 = best_idx_tmp_71838;
                last_idx_71700 = last_idx_tmp_71839;
                best_sum_71701 = best_sum_tmp_71840;
                curr_sum_71702 = curr_sum_tmp_71841;
            }
            idx_71694 = best_idx_71699;
            idx_71695 = last_idx_71700;
            idx_71696 = best_sum_71701;
            idx_71697 = curr_sum_71702;
            
            int64_t min_res_71728 = smin64(min_arg_64296, idx_71694);
            int64_t x_71729 = add64(min_res_64046, min_res_71728);
            int64_t r_71730 = sub64(x_71729, (int64_t) 1);
            bool x_71731 = sle64((int64_t) 0, r_71730);
            bool y_71732 = slt64(r_71730, n_64028);
            bool bounds_check_71733 = x_71731 && y_71732;
            bool index_certs_71734;
            
            if (!bounds_check_71733) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_71730,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_71735 = ((int64_t *) mem_69752)[r_71730];
            int64_t abs_arg_71736 = sub64(x_71735, min_res_71651);
            int64_t abs_res_71737 = abs64(abs_arg_71736);
            bool x_71738 = sle64((int64_t) 0, min_res_71728);
            bool y_71739 = slt64(min_res_71728, n_64028);
            bool bounds_check_71740 = x_71738 && y_71739;
            bool index_certs_71741;
            
            if (!bounds_check_71740) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_71728,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_71742 = ((int64_t *) mem_69752)[min_res_71728];
            int64_t abs_arg_71743 = sub64(x_71742, min_res_71651);
            int64_t abs_res_71744 = abs64(abs_arg_71743);
            int64_t max_res_71745 = smax64(abs_res_71737, abs_res_71744);
            float defunc_0_f_res_71746 = sitofp_i64_f32(max_res_71745);
            float defunc_1_f_res_71747 = max_res_64300 + defunc_0_f_res_71746;
            float defunc_0_f_res_71748 = sitofp_i64_f32(min_res_71651);
            float defunc_2_reduce_res_71749;
            float defunc_2_reduce_res_71750;
            float defunc_2_reduce_res_71751;
            float redout_71753;
            float redout_71754;
            float redout_71755;
            
            redout_71753 = 0.0F;
            redout_71754 = 0.0F;
            redout_71755 = 0.0F;
            for (int64_t i_71752 = 0; i_71752 < q_64030; i_71752++) {
                float x_71756 = ((float *) mem_69824)[i_71752];
                bool cond_71757 = sle64(last_res_64278, i_71752);
                float defunc_0_f_res_71758;
                
                if (cond_71757) {
                    defunc_0_f_res_71758 = 0.0F;
                } else {
                    int64_t i_71759 = add64(min_res_71728, i_71752);
                    float x_71760 = ((float *) mem_69779)[i_71759];
                    float defunc_0_f_res_f_res_71761 = 1.0F + x_71760;
                    
                    defunc_0_f_res_71758 = defunc_0_f_res_f_res_71761;
                }
                
                float x_j_71762 = defunc_0_f_res_71758 - defunc_0_f_res_71748;
                float abs_res_71763 = (float) fabs(x_j_71762);
                float tmp1_71764 = abs_res_71763 / defunc_1_f_res_71747;
                float x_71765 = tmp1_71764 * tmp1_71764;
                float y_71766 = tmp1_71764 * x_71765;
                float tmp2_71767 = 1.0F - y_71766;
                float x_71768 = tmp2_71767 * tmp2_71767;
                float tmp3_71769 = tmp2_71767 * x_71768;
                float w_j_71770 = x_71756 * tmp3_71769;
                float xw_j_71771 = x_j_71762 * w_j_71770;
                float x2w_j_71772 = x_j_71762 * xw_j_71771;
                float defunc_1_op_res_71773 = w_j_71770 + redout_71753;
                float defunc_1_op_res_71774 = xw_j_71771 + redout_71754;
                float defunc_1_op_res_71775 = x2w_j_71772 + redout_71755;
                float redout_tmp_71842 = defunc_1_op_res_71773;
                float redout_tmp_71843 = defunc_1_op_res_71774;
                float redout_tmp_71844 = defunc_1_op_res_71775;
                
                redout_71753 = redout_tmp_71842;
                redout_71754 = redout_tmp_71843;
                redout_71755 = redout_tmp_71844;
            }
            defunc_2_reduce_res_71749 = redout_71753;
            defunc_2_reduce_res_71750 = redout_71754;
            defunc_2_reduce_res_71751 = redout_71755;
            
            float x_71776 = defunc_2_reduce_res_71749 *
                  defunc_2_reduce_res_71751;
            float y_71777 = defunc_2_reduce_res_71750 *
                  defunc_2_reduce_res_71750;
            float y_71778 = x_71776 - y_71777;
            float det1_71779 = 1.0F / y_71778;
            float a11_71780 = defunc_2_reduce_res_71751 * det1_71779;
            float negate_arg_71781 = defunc_2_reduce_res_71750 * det1_71779;
            float b11_71782 = 0.0F - negate_arg_71781;
            float c11_71783 = defunc_2_reduce_res_71749 * det1_71779;
            float defunc_2_reduce_res_71784;
            float defunc_2_reduce_res_71785;
            float redout_71787;
            float redout_71788;
            
            redout_71787 = 0.0F;
            redout_71788 = 0.0F;
            for (int64_t i_71786 = 0; i_71786 < q_64030; i_71786++) {
                float x_71789 = ((float *) mem_69824)[i_71786];
                bool cond_71790 = sle64(last_res_64278, i_71786);
                float defunc_0_f_res_71791;
                
                if (cond_71790) {
                    defunc_0_f_res_71791 = 0.0F;
                } else {
                    int64_t i_71792 = add64(min_res_71728, i_71786);
                    float x_71793 = ((float *) mem_69779)[i_71792];
                    float defunc_0_f_res_f_res_71794 = 1.0F + x_71793;
                    
                    defunc_0_f_res_71791 = defunc_0_f_res_f_res_71794;
                }
                
                float x_j_71795 = defunc_0_f_res_71791 - defunc_0_f_res_71748;
                float abs_res_71796 = (float) fabs(x_j_71795);
                float tmp1_71797 = abs_res_71796 / defunc_1_f_res_71747;
                float x_71798 = tmp1_71797 * tmp1_71797;
                float y_71799 = tmp1_71797 * x_71798;
                float tmp2_71800 = 1.0F - y_71799;
                float x_71801 = tmp2_71800 * tmp2_71800;
                float tmp3_71802 = tmp2_71800 * x_71801;
                float tmp4_71803 = x_71789 * tmp3_71802;
                float defunc_1_f_res_71804 = x_j_71795 * tmp4_71803;
                float defunc_0_f_res_71805;
                
                if (cond_71790) {
                    defunc_0_f_res_71805 = 0.0F;
                } else {
                    int64_t i_71806 = add64(min_res_71728, i_71786);
                    float x_71807 = ((float *) mem_69749)[i_71806];
                    
                    defunc_0_f_res_71805 = x_71807;
                }
                
                float x_71808 = a11_71780 * tmp4_71803;
                float y_71809 = b11_71782 * defunc_1_f_res_71804;
                float x_71810 = x_71808 + y_71809;
                float defunc_9_fit_fun_res_71811 = defunc_0_f_res_71805 *
                      x_71810;
                float x_71812 = b11_71782 * tmp4_71803;
                float y_71813 = c11_71783 * defunc_1_f_res_71804;
                float x_71814 = x_71812 + y_71813;
                float defunc_9_slope_fun_res_71815 = defunc_0_f_res_71805 *
                      x_71814;
                float defunc_1_op_res_71816 = defunc_9_fit_fun_res_71811 +
                      redout_71787;
                float defunc_1_op_res_71817 = defunc_9_slope_fun_res_71815 +
                      redout_71788;
                float redout_tmp_71845 = defunc_1_op_res_71816;
                float redout_tmp_71846 = defunc_1_op_res_71817;
                
                redout_71787 = redout_tmp_71845;
                redout_71788 = redout_tmp_71846;
            }
            defunc_2_reduce_res_71784 = redout_71787;
            defunc_2_reduce_res_71785 = redout_71788;
            ((float *) mem_69839)[i_71647] = defunc_2_reduce_res_71784;
            ((float *) mem_69842)[i_71647] = defunc_2_reduce_res_71785;
        }
        memmove(mem_69870.mem + gtid_66012 * n_m_64039 * (int64_t) 4,
                mem_69839 + (int64_t) 0, n_m_64039 * (int64_t) 4);
        memmove(mem_69874.mem + gtid_66012 * n_m_64039 * (int64_t) 4,
                mem_69842 + (int64_t) 0, n_m_64039 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_69734);
    free(mem_69749);
    free(mem_69752);
    free(mem_69779);
    free(mem_69782);
    free(mem_69785);
    free(mem_69824);
    free(mem_69839);
    free(mem_69842);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76466_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76466_end -
                 futhark_mc_segmap_parloop_76466_start;
        
        ctx->futhark_mc_segmap_parloop_76466_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76466_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76466_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76464(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66011 = tid;
    int num_tasks_71607 = info.nsubtasks;
    struct futhark_mc_task_76463 *futhark_mc_task_76463 =
                                 (struct futhark_mc_task_76463 *) args;
    struct futhark_context *ctx = futhark_mc_task_76463->ctx;
    uint64_t futhark_mc_segmap_task_76464_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76464_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_task_76463->free_m_64027;
    int64_t n_64028 = futhark_mc_task_76463->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76463->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76463->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76463->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76463->free_i_64040;
    bool x_64041 = futhark_mc_task_76463->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76463->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76463->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76463->free_m_64052;
    float i64_res_64053 = futhark_mc_task_76463->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76463->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_69705 = futhark_mc_task_76463->free_bytes_69705;
    int64_t bytes_69708 = futhark_mc_task_76463->free_bytes_69708;
    int64_t bytes_69723 = futhark_mc_task_76463->free_bytes_69723;
    int64_t bytes_69726 = futhark_mc_task_76463->free_bytes_69726;
    struct memblock mem_69870 = {.desc ="mem_69870", .mem =
                                 futhark_mc_task_76463->free_mem_69870, .size =
                                 0, .references =NULL};
    struct memblock mem_69874 = {.desc ="mem_69874", .mem =
                                 futhark_mc_task_76463->free_mem_69874, .size =
                                 0, .references =NULL};
    int64_t iter_71608;
    struct futhark_mc_segmap_parloop_struct_76465
    futhark_mc_segmap_parloop_struct_76465;
    
    futhark_mc_segmap_parloop_struct_76465.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76465.free_m_64027 = m_64027;
    futhark_mc_segmap_parloop_struct_76465.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76465.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76465.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76465.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76465.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76465.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76465.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76465.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76465.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76465.free_i64_res_64053 = i64_res_64053;
    futhark_mc_segmap_parloop_struct_76465.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76465.free_bytes_69705 = bytes_69705;
    futhark_mc_segmap_parloop_struct_76465.free_bytes_69708 = bytes_69708;
    futhark_mc_segmap_parloop_struct_76465.free_bytes_69723 = bytes_69723;
    futhark_mc_segmap_parloop_struct_76465.free_bytes_69726 = bytes_69726;
    futhark_mc_segmap_parloop_struct_76465.free_mem_69870 = mem_69870.mem;
    futhark_mc_segmap_parloop_struct_76465.free_mem_69874 = mem_69874.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76466_task;
    
    futhark_mc_segmap_parloop_76466_task.name =
        "futhark_mc_segmap_parloop_76466";
    futhark_mc_segmap_parloop_76466_task.fn = futhark_mc_segmap_parloop_76466;
    futhark_mc_segmap_parloop_76466_task.args =
        &futhark_mc_segmap_parloop_struct_76465;
    futhark_mc_segmap_parloop_76466_task.iterations = iterations;
    futhark_mc_segmap_parloop_76466_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76466_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76466_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76466_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76466_task);
    
    if (futhark_mc_segmap_parloop_76466_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76466_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76466_total_end -
                 futhark_mc_segmap_parloop_76466_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76466_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76466_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76466_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76464_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76464_end -
                 futhark_mc_segmap_task_76464_start;
        
        ctx->futhark_mc_segmap_task_76464_runs[tid]++;
        ctx->futhark_mc_segmap_task_76464_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76464_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76477 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_69705;
    int64_t free_bytes_69708;
    int64_t free_bytes_69723;
    int64_t free_bytes_69726;
    char *free_mem_69870;
    char *free_mem_69874;
};
struct futhark_mc_task_76488 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_66014;
    char *free_Y_mem_69552;
    char *free_mem_69707;
};
struct futhark_mc_scan_stage_1_parloop_struct_76491 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_66014;
    char *free_Y_mem_69552;
    char *free_mem_69707;
};
static int futhark_mc_scan_stage_1_parloop_76492(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_66015, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_76491
    *futhark_mc_scan_stage_1_parloop_struct_76491 =
    (struct futhark_mc_scan_stage_1_parloop_struct_76491 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_76491->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_76492_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76492_start = get_wall_time();
    
    int64_t n_64028 =
            futhark_mc_scan_stage_1_parloop_struct_76491->free_n_64028;
    int64_t gtid_66014 =
            futhark_mc_scan_stage_1_parloop_struct_76491->free_gtid_66014;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_76491->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69707 = {.desc ="mem_69707", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_76491->free_mem_69707,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72210 = start;
    int64_t x_71848;
    int64_t x_71849;
    
    x_71848 = (int64_t) 0;
    for (; iter_72210 < end; iter_72210++) {
        int64_t gtid_66016 = iter_72210;
        
        // stage 1 scan body
        {
            float x_71851 = ((float *) Y_mem_69552.mem)[gtid_66014 * n_64028 +
                                                        gtid_66016];
            bool isnan_res_71852;
            
            isnan_res_71852 = futrts_isnan32(x_71851);
            
            bool defunc_0_p_res_71853 = !isnan_res_71852;
            int64_t defunc_0_f_res_71854 = btoi_bool_i64(defunc_0_p_res_71853);
            
            // write mapped values results to memory
            { }
            x_71848 = x_71848;
            // Read next values
            {
                x_71849 = defunc_0_f_res_71854;
            }
            
            int64_t defunc_1_op_res_71850 = add64(x_71848, x_71849);
            
            ((int64_t *) mem_69707.mem)[gtid_66016] = defunc_1_op_res_71850;
            x_71848 = defunc_1_op_res_71850;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76492_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76492_end -
                 futhark_mc_scan_stage_1_parloop_76492_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_76492_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_76492_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_76492_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_76493 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_66014;
    char *free_Y_mem_69552;
    char *free_mem_69707;
};
static int futhark_mc_scan_stage_3_parloop_76494(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_66015, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_76493
    *futhark_mc_scan_stage_3_parloop_struct_76493 =
    (struct futhark_mc_scan_stage_3_parloop_struct_76493 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_76493->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_76494_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_76494_start = get_wall_time();
    
    int64_t n_64028 =
            futhark_mc_scan_stage_3_parloop_struct_76493->free_n_64028;
    int64_t gtid_66014 =
            futhark_mc_scan_stage_3_parloop_struct_76493->free_gtid_66014;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_76493->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69707 = {.desc ="mem_69707", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_76493->free_mem_69707,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72222 = start;
    int64_t x_72219;
    int64_t x_72220;
    
    if (iter_72222 == (int64_t) 0) {
        x_72219 = (int64_t) 0;
    } else {
        x_72219 = ((int64_t *) mem_69707.mem)[iter_72222 - (int64_t) 1];
    }
    for (; iter_72222 < end; iter_72222++) {
        int64_t gtid_66016 = iter_72222;
        
        // stage 3 scan body
        {
            float x_71851 = ((float *) Y_mem_69552.mem)[gtid_66014 * n_64028 +
                                                        gtid_66016];
            bool isnan_res_71852;
            
            isnan_res_71852 = futrts_isnan32(x_71851);
            
            bool defunc_0_p_res_71853 = !isnan_res_71852;
            int64_t defunc_0_f_res_71854 = btoi_bool_i64(defunc_0_p_res_71853);
            
            x_72219 = x_72219;
            x_72220 = defunc_0_f_res_71854;
            
            int64_t defunc_1_op_res_72221 = add64(x_72219, x_72220);
            
            ((int64_t *) mem_69707.mem)[gtid_66016] = defunc_1_op_res_72221;
            x_72219 = defunc_1_op_res_72221;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_76494_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76494_end -
                 futhark_mc_scan_stage_3_parloop_76494_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_76494_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_76494_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_76494_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_76489(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66015 = tid;
    int num_tasks_72209 = info.nsubtasks;
    struct futhark_mc_task_76488 *futhark_mc_task_76488 =
                                 (struct futhark_mc_task_76488 *) args;
    struct futhark_context *ctx = futhark_mc_task_76488->ctx;
    uint64_t futhark_mc_segscan_task_76489_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_76489_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76488->free_n_64028;
    int64_t gtid_66014 = futhark_mc_task_76488->free_gtid_66014;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76488->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69707 = {.desc ="mem_69707", .mem =
                                 futhark_mc_task_76488->free_mem_69707, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_72216_cached_sizze_76490 = 0;
    char *scan_stage_2_accum_mem_72216 = NULL;
    int64_t iter_72210;
    struct futhark_mc_scan_stage_1_parloop_struct_76491
    futhark_mc_scan_stage_1_parloop_struct_76491;
    
    futhark_mc_scan_stage_1_parloop_struct_76491.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_76491.free_n_64028 = n_64028;
    futhark_mc_scan_stage_1_parloop_struct_76491.free_gtid_66014 = gtid_66014;
    futhark_mc_scan_stage_1_parloop_struct_76491.free_Y_mem_69552 =
        Y_mem_69552.mem;
    futhark_mc_scan_stage_1_parloop_struct_76491.free_mem_69707 = mem_69707.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_76492_task;
    
    futhark_mc_scan_stage_1_parloop_76492_task.name =
        "futhark_mc_scan_stage_1_parloop_76492";
    futhark_mc_scan_stage_1_parloop_76492_task.fn =
        futhark_mc_scan_stage_1_parloop_76492;
    futhark_mc_scan_stage_1_parloop_76492_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_76491;
    futhark_mc_scan_stage_1_parloop_76492_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_76492_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_76492_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76492_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_76492_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_76492_task);
    
    if (futhark_mc_scan_stage_1_parloop_76492_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76492_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76492_total_end -
                 futhark_mc_scan_stage_1_parloop_76492_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76492_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76492_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76492_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_72209)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_72211;
        int64_t x_72212;
        int64_t offset_72214 = (int64_t) 0;
        int64_t offset_index_72215 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_72216_cached_sizze_76490 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_72216 = realloc(scan_stage_2_accum_mem_72216,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_72216_cached_sizze_76490 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_72216)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_72218 = 0; i_72218 < num_tasks_72209 - 1; i_72218++) {
            offset_72214 = squot64(n_64028, sext_i32_i64(num_tasks_72209));
            if (slt64(sext_i32_i64(i_72218), srem64(n_64028,
                                                    sext_i32_i64(num_tasks_72209)))) {
                offset_72214 += (int64_t) 1;
            }
            offset_index_72215 += offset_72214;
            
            int64_t gtid_66016 = offset_index_72215;
            float x_71851 = ((float *) Y_mem_69552.mem)[gtid_66014 * n_64028 +
                                                        gtid_66016];
            bool isnan_res_71852;
            
            isnan_res_71852 = futrts_isnan32(x_71851);
            
            bool defunc_0_p_res_71853 = !isnan_res_71852;
            int64_t defunc_0_f_res_71854 = btoi_bool_i64(defunc_0_p_res_71853);
            
            // Read carry in
            {
                x_72211 =
                    ((int64_t *) scan_stage_2_accum_mem_72216)[(int64_t) 0];
            }
            // Read next values
            {
                x_72212 = ((int64_t *) mem_69707.mem)[offset_index_72215 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_72213 = add64(x_72211, x_72212);
            
            ((int64_t *) mem_69707.mem)[offset_index_72215 - (int64_t) 1] =
                defunc_1_op_res_72213;
            ((int64_t *) scan_stage_2_accum_mem_72216)[(int64_t) 0] =
                defunc_1_op_res_72213;
        }
        
        int64_t iter_72222 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_76493
        futhark_mc_scan_stage_3_parloop_struct_76493;
        
        futhark_mc_scan_stage_3_parloop_struct_76493.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_76493.free_n_64028 = n_64028;
        futhark_mc_scan_stage_3_parloop_struct_76493.free_gtid_66014 =
            gtid_66014;
        futhark_mc_scan_stage_3_parloop_struct_76493.free_Y_mem_69552 =
            Y_mem_69552.mem;
        futhark_mc_scan_stage_3_parloop_struct_76493.free_mem_69707 =
            mem_69707.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_76494_task;
        
        futhark_mc_scan_stage_3_parloop_76494_task.name =
            "futhark_mc_scan_stage_3_parloop_76494";
        futhark_mc_scan_stage_3_parloop_76494_task.fn =
            futhark_mc_scan_stage_3_parloop_76494;
        futhark_mc_scan_stage_3_parloop_76494_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_76493;
        futhark_mc_scan_stage_3_parloop_76494_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_76494_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_76494_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_76494_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_76494_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_76494_task);
        
        if (futhark_mc_scan_stage_3_parloop_76494_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_76494_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76494_total_end -
                     futhark_mc_scan_stage_3_parloop_76494_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76494_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76494_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76494_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_72216);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_76489_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_76489_end -
                 futhark_mc_segscan_task_76489_start;
        
        ctx->futhark_mc_segscan_task_76489_runs[tid]++;
        ctx->futhark_mc_segscan_task_76489_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_76489_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76495 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_66014;
    char *free_Y_mem_69552;
    char *free_mem_69707;
    char *free_mem_69710;
    char *free_mem_69713;
};
struct futhark_mc_segmap_parloop_struct_76497 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_66014;
    char *free_Y_mem_69552;
    char *free_mem_69707;
    char *free_mem_69710;
    char *free_mem_69713;
};
static int futhark_mc_segmap_parloop_76498(void *args, int64_t start,
                                           int64_t end, int flat_tid_66017,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76497
    *futhark_mc_segmap_parloop_struct_76497 =
    (struct futhark_mc_segmap_parloop_struct_76497 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76497->ctx;
    uint64_t futhark_mc_segmap_parloop_76498_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76498_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76497->free_n_64028;
    int64_t gtid_66014 =
            futhark_mc_segmap_parloop_struct_76497->free_gtid_66014;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76497->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69707 = {.desc ="mem_69707", .mem =
                                 futhark_mc_segmap_parloop_struct_76497->free_mem_69707,
                                 .size =0, .references =NULL};
    struct memblock mem_69710 = {.desc ="mem_69710", .mem =
                                 futhark_mc_segmap_parloop_struct_76497->free_mem_69710,
                                 .size =0, .references =NULL};
    struct memblock mem_69713 = {.desc ="mem_69713", .mem =
                                 futhark_mc_segmap_parloop_struct_76497->free_mem_69713,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72226 = start;
    
    for (; iter_72226 < end; iter_72226++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72229 = n_64028;
        int64_t gtid_66018 = iter_72226;
        int64_t remnant_72230 = iter_72226 - gtid_66018;
        float x_71855 = ((float *) Y_mem_69552.mem)[gtid_66014 * n_64028 +
                                                    gtid_66018];
        bool isnan_res_71856;
        
        isnan_res_71856 = futrts_isnan32(x_71855);
        
        bool defunc_0_p_res_71857 = !isnan_res_71856;
        int64_t defunc_1_f_res_71858;
        
        if (defunc_0_p_res_71857) {
            int64_t x_72227 = ((int64_t *) mem_69707.mem)[gtid_66018];
            int64_t defunc_1_f_res_t_res_72228 = sub64(x_72227, (int64_t) 1);
            
            defunc_1_f_res_71858 = defunc_1_f_res_t_res_72228;
        } else {
            defunc_1_f_res_71858 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_71858) &&
            slt64(defunc_1_f_res_71858, n_64028)) {
            ((int64_t *) mem_69713.mem)[defunc_1_f_res_71858] = gtid_66018;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_71858) &&
            slt64(defunc_1_f_res_71858, n_64028)) {
            ((float *) mem_69710.mem)[defunc_1_f_res_71858] = x_71855;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76498_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76498_end -
                 futhark_mc_segmap_parloop_76498_start;
        
        ctx->futhark_mc_segmap_parloop_76498_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76498_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76498_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76496(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66017 = tid;
    int num_tasks_72225 = info.nsubtasks;
    struct futhark_mc_task_76495 *futhark_mc_task_76495 =
                                 (struct futhark_mc_task_76495 *) args;
    struct futhark_context *ctx = futhark_mc_task_76495->ctx;
    uint64_t futhark_mc_segmap_task_76496_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76496_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76495->free_n_64028;
    int64_t gtid_66014 = futhark_mc_task_76495->free_gtid_66014;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76495->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69707 = {.desc ="mem_69707", .mem =
                                 futhark_mc_task_76495->free_mem_69707, .size =
                                 0, .references =NULL};
    struct memblock mem_69710 = {.desc ="mem_69710", .mem =
                                 futhark_mc_task_76495->free_mem_69710, .size =
                                 0, .references =NULL};
    struct memblock mem_69713 = {.desc ="mem_69713", .mem =
                                 futhark_mc_task_76495->free_mem_69713, .size =
                                 0, .references =NULL};
    int64_t iter_72226;
    struct futhark_mc_segmap_parloop_struct_76497
    futhark_mc_segmap_parloop_struct_76497;
    
    futhark_mc_segmap_parloop_struct_76497.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76497.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76497.free_gtid_66014 = gtid_66014;
    futhark_mc_segmap_parloop_struct_76497.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76497.free_mem_69707 = mem_69707.mem;
    futhark_mc_segmap_parloop_struct_76497.free_mem_69710 = mem_69710.mem;
    futhark_mc_segmap_parloop_struct_76497.free_mem_69713 = mem_69713.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76498_task;
    
    futhark_mc_segmap_parloop_76498_task.name =
        "futhark_mc_segmap_parloop_76498";
    futhark_mc_segmap_parloop_76498_task.fn = futhark_mc_segmap_parloop_76498;
    futhark_mc_segmap_parloop_76498_task.args =
        &futhark_mc_segmap_parloop_struct_76497;
    futhark_mc_segmap_parloop_76498_task.iterations = iterations;
    futhark_mc_segmap_parloop_76498_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76498_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76498_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76498_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76498_task);
    
    if (futhark_mc_segmap_parloop_76498_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76498_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76498_total_end -
                 futhark_mc_segmap_parloop_76498_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76498_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76498_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76498_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76496_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76496_end -
                 futhark_mc_segmap_task_76496_start;
        
        ctx->futhark_mc_segmap_task_76496_runs[tid]++;
        ctx->futhark_mc_segmap_task_76496_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76496_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76499 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    char *free_mem_69713;
    char *free_mem_69716;
    char *free_mem_69719;
    char *free_mem_69722;
};
struct futhark_mc_segmap_parloop_struct_76501 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    char *free_mem_69713;
    char *free_mem_69716;
    char *free_mem_69719;
    char *free_mem_69722;
};
static int futhark_mc_segmap_parloop_76502(void *args, int64_t start,
                                           int64_t end, int flat_tid_66019,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76501
    *futhark_mc_segmap_parloop_struct_76501 =
    (struct futhark_mc_segmap_parloop_struct_76501 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76501->ctx;
    uint64_t futhark_mc_segmap_parloop_76502_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76502_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76501->free_n_64028;
    struct memblock mem_69713 = {.desc ="mem_69713", .mem =
                                 futhark_mc_segmap_parloop_struct_76501->free_mem_69713,
                                 .size =0, .references =NULL};
    struct memblock mem_69716 = {.desc ="mem_69716", .mem =
                                 futhark_mc_segmap_parloop_struct_76501->free_mem_69716,
                                 .size =0, .references =NULL};
    struct memblock mem_69719 = {.desc ="mem_69719", .mem =
                                 futhark_mc_segmap_parloop_struct_76501->free_mem_69719,
                                 .size =0, .references =NULL};
    struct memblock mem_69722 = {.desc ="mem_69722", .mem =
                                 futhark_mc_segmap_parloop_struct_76501->free_mem_69722,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72232 = start;
    
    for (; iter_72232 < end; iter_72232++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72233 = n_64028;
        int64_t gtid_66020 = iter_72232;
        int64_t remnant_72234 = iter_72232 - gtid_66020;
        int64_t x_71861 = ((int64_t *) mem_69713.mem)[gtid_66020];
        int64_t defunc_0_f_res_71862 = add64((int64_t) 1, x_71861);
        bool cond_71863 = slt64(defunc_0_f_res_71862, (int64_t) 0);
        int64_t defunc_0_f_res_71864;
        
        if (cond_71863) {
            defunc_0_f_res_71864 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_71864 = defunc_0_f_res_71862;
        }
        
        float defunc_0_f_res_71865 = sitofp_i64_f32(x_71861);
        
        ((float *) mem_69716.mem)[gtid_66020] = defunc_0_f_res_71865;
        ((int64_t *) mem_69719.mem)[gtid_66020] = defunc_0_f_res_71864;
        ((int64_t *) mem_69722.mem)[gtid_66020] = defunc_0_f_res_71862;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76502_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76502_end -
                 futhark_mc_segmap_parloop_76502_start;
        
        ctx->futhark_mc_segmap_parloop_76502_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76502_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76502_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76500(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66019 = tid;
    int num_tasks_72231 = info.nsubtasks;
    struct futhark_mc_task_76499 *futhark_mc_task_76499 =
                                 (struct futhark_mc_task_76499 *) args;
    struct futhark_context *ctx = futhark_mc_task_76499->ctx;
    uint64_t futhark_mc_segmap_task_76500_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76500_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76499->free_n_64028;
    struct memblock mem_69713 = {.desc ="mem_69713", .mem =
                                 futhark_mc_task_76499->free_mem_69713, .size =
                                 0, .references =NULL};
    struct memblock mem_69716 = {.desc ="mem_69716", .mem =
                                 futhark_mc_task_76499->free_mem_69716, .size =
                                 0, .references =NULL};
    struct memblock mem_69719 = {.desc ="mem_69719", .mem =
                                 futhark_mc_task_76499->free_mem_69719, .size =
                                 0, .references =NULL};
    struct memblock mem_69722 = {.desc ="mem_69722", .mem =
                                 futhark_mc_task_76499->free_mem_69722, .size =
                                 0, .references =NULL};
    int64_t iter_72232;
    struct futhark_mc_segmap_parloop_struct_76501
    futhark_mc_segmap_parloop_struct_76501;
    
    futhark_mc_segmap_parloop_struct_76501.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76501.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76501.free_mem_69713 = mem_69713.mem;
    futhark_mc_segmap_parloop_struct_76501.free_mem_69716 = mem_69716.mem;
    futhark_mc_segmap_parloop_struct_76501.free_mem_69719 = mem_69719.mem;
    futhark_mc_segmap_parloop_struct_76501.free_mem_69722 = mem_69722.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76502_task;
    
    futhark_mc_segmap_parloop_76502_task.name =
        "futhark_mc_segmap_parloop_76502";
    futhark_mc_segmap_parloop_76502_task.fn = futhark_mc_segmap_parloop_76502;
    futhark_mc_segmap_parloop_76502_task.args =
        &futhark_mc_segmap_parloop_struct_76501;
    futhark_mc_segmap_parloop_76502_task.iterations = iterations;
    futhark_mc_segmap_parloop_76502_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76502_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76502_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76502_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76502_task);
    
    if (futhark_mc_segmap_parloop_76502_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76502_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76502_total_end -
                 futhark_mc_segmap_parloop_76502_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76502_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76502_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76502_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76500_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76500_end -
                 futhark_mc_segmap_task_76500_start;
        
        ctx->futhark_mc_segmap_task_76500_runs[tid]++;
        ctx->futhark_mc_segmap_task_76500_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76500_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76503 {
    struct futhark_context *ctx;
    int64_t free_q_64030;
    int64_t free_last_res_66216;
    char *free_mem_69725;
};
struct futhark_mc_segmap_parloop_struct_76505 {
    struct futhark_context *ctx;
    int64_t free_q_64030;
    int64_t free_last_res_66216;
    char *free_mem_69725;
};
static int futhark_mc_segmap_parloop_76506(void *args, int64_t start,
                                           int64_t end, int flat_tid_66021,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76505
    *futhark_mc_segmap_parloop_struct_76505 =
    (struct futhark_mc_segmap_parloop_struct_76505 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76505->ctx;
    uint64_t futhark_mc_segmap_parloop_76506_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76506_start = get_wall_time();
    
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76505->free_q_64030;
    int64_t last_res_66216 =
            futhark_mc_segmap_parloop_struct_76505->free_last_res_66216;
    struct memblock mem_69725 = {.desc ="mem_69725", .mem =
                                 futhark_mc_segmap_parloop_struct_76505->free_mem_69725,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72236 = start;
    
    for (; iter_72236 < end; iter_72236++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72237 = q_64030;
        int64_t gtid_66022 = iter_72236;
        int64_t remnant_72238 = iter_72236 - gtid_66022;
        bool cond_71866 = sle64(last_res_66216, gtid_66022);
        float defunc_0_f_res_71867;
        
        if (cond_71866) {
            defunc_0_f_res_71867 = 0.0F;
        } else {
            defunc_0_f_res_71867 = 1.0F;
        }
        ((float *) mem_69725.mem)[gtid_66022] = defunc_0_f_res_71867;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76506_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76506_end -
                 futhark_mc_segmap_parloop_76506_start;
        
        ctx->futhark_mc_segmap_parloop_76506_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76506_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76506_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76504(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66021 = tid;
    int num_tasks_72235 = info.nsubtasks;
    struct futhark_mc_task_76503 *futhark_mc_task_76503 =
                                 (struct futhark_mc_task_76503 *) args;
    struct futhark_context *ctx = futhark_mc_task_76503->ctx;
    uint64_t futhark_mc_segmap_task_76504_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76504_start = get_wall_time();
    
    int64_t q_64030 = futhark_mc_task_76503->free_q_64030;
    int64_t last_res_66216 = futhark_mc_task_76503->free_last_res_66216;
    struct memblock mem_69725 = {.desc ="mem_69725", .mem =
                                 futhark_mc_task_76503->free_mem_69725, .size =
                                 0, .references =NULL};
    int64_t iter_72236;
    struct futhark_mc_segmap_parloop_struct_76505
    futhark_mc_segmap_parloop_struct_76505;
    
    futhark_mc_segmap_parloop_struct_76505.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76505.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76505.free_last_res_66216 = last_res_66216;
    futhark_mc_segmap_parloop_struct_76505.free_mem_69725 = mem_69725.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76506_task;
    
    futhark_mc_segmap_parloop_76506_task.name =
        "futhark_mc_segmap_parloop_76506";
    futhark_mc_segmap_parloop_76506_task.fn = futhark_mc_segmap_parloop_76506;
    futhark_mc_segmap_parloop_76506_task.args =
        &futhark_mc_segmap_parloop_struct_76505;
    futhark_mc_segmap_parloop_76506_task.iterations = iterations;
    futhark_mc_segmap_parloop_76506_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76506_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76506_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76506_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76506_task);
    
    if (futhark_mc_segmap_parloop_76506_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76506_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76506_total_end -
                 futhark_mc_segmap_parloop_76506_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76506_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76506_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76506_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76504_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76504_end -
                 futhark_mc_segmap_task_76504_start;
        
        ctx->futhark_mc_segmap_task_76504_runs[tid]++;
        ctx->futhark_mc_segmap_task_76504_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76504_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76507 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_66216;
    int64_t free_min_arg_66228;
    float free_max_res_66232;
    char *free_mem_69710;
    char *free_mem_69713;
    char *free_mem_69716;
    char *free_mem_69719;
    char *free_mem_69722;
    char *free_mem_69725;
    char *free_mem_69728;
    char *free_mem_69731;
};
struct futhark_mc_segmap_parloop_struct_76509 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_66216;
    int64_t free_min_arg_66228;
    float free_max_res_66232;
    char *free_mem_69710;
    char *free_mem_69713;
    char *free_mem_69716;
    char *free_mem_69719;
    char *free_mem_69722;
    char *free_mem_69725;
    char *free_mem_69728;
    char *free_mem_69731;
};
static int futhark_mc_segmap_parloop_76510(void *args, int64_t start,
                                           int64_t end, int flat_tid_66023,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76509
    *futhark_mc_segmap_parloop_struct_76509 =
    (struct futhark_mc_segmap_parloop_struct_76509 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76509->ctx;
    uint64_t futhark_mc_segmap_parloop_76510_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76510_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76509->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76509->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76509->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76509->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76509->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76509->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76509->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76509->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76509->free_m_64052;
    int64_t last_res_66216 =
            futhark_mc_segmap_parloop_struct_76509->free_last_res_66216;
    int64_t min_arg_66228 =
            futhark_mc_segmap_parloop_struct_76509->free_min_arg_66228;
    float max_res_66232 =
          futhark_mc_segmap_parloop_struct_76509->free_max_res_66232;
    struct memblock mem_69710 = {.desc ="mem_69710", .mem =
                                 futhark_mc_segmap_parloop_struct_76509->free_mem_69710,
                                 .size =0, .references =NULL};
    struct memblock mem_69713 = {.desc ="mem_69713", .mem =
                                 futhark_mc_segmap_parloop_struct_76509->free_mem_69713,
                                 .size =0, .references =NULL};
    struct memblock mem_69716 = {.desc ="mem_69716", .mem =
                                 futhark_mc_segmap_parloop_struct_76509->free_mem_69716,
                                 .size =0, .references =NULL};
    struct memblock mem_69719 = {.desc ="mem_69719", .mem =
                                 futhark_mc_segmap_parloop_struct_76509->free_mem_69719,
                                 .size =0, .references =NULL};
    struct memblock mem_69722 = {.desc ="mem_69722", .mem =
                                 futhark_mc_segmap_parloop_struct_76509->free_mem_69722,
                                 .size =0, .references =NULL};
    struct memblock mem_69725 = {.desc ="mem_69725", .mem =
                                 futhark_mc_segmap_parloop_struct_76509->free_mem_69725,
                                 .size =0, .references =NULL};
    struct memblock mem_69728 = {.desc ="mem_69728", .mem =
                                 futhark_mc_segmap_parloop_struct_76509->free_mem_69728,
                                 .size =0, .references =NULL};
    struct memblock mem_69731 = {.desc ="mem_69731", .mem =
                                 futhark_mc_segmap_parloop_struct_76509->free_mem_69731,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72240 = start;
    
    for (; iter_72240 < end; iter_72240++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72350 = n_m_64039;
        int64_t gtid_66024 = iter_72240;
        int64_t remnant_72351 = iter_72240 - gtid_66024;
        int64_t min_arg_72039 = mul64(jump_64032, gtid_66024);
        int64_t min_res_72040 = smin64(i_64040, min_arg_72039);
        int64_t defunc_0_g_res_72041 = add64((int64_t) 1, min_res_72040);
        bool nearest_idx_72042;
        int64_t nearest_idx_72043;
        int64_t nearest_idx_72044;
        bool loop_while_72241;
        int64_t low_72242;
        int64_t high_72243;
        
        loop_while_72241 = x_64041;
        low_72242 = (int64_t) 0;
        high_72243 = i_64040;
        while (loop_while_72241) {
            int64_t x_72244 = add64(low_72242, high_72243);
            int64_t mid_72245 = sdiv64(x_72244, (int64_t) 2);
            bool x_72246 = sle64((int64_t) 0, mid_72245);
            bool y_72247 = slt64(mid_72245, n_64028);
            bool bounds_check_72248 = x_72246 && y_72247;
            bool index_certs_72249;
            
            if (!bounds_check_72248) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_72245,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_72250 = ((int64_t *) mem_69719.mem)[mid_72245];
            bool cond_72251 = sle64(defunc_0_g_res_72041, x_72250);
            int64_t loopres_72252;
            int64_t loopres_72253;
            
            if (cond_72251) {
                int64_t loopres_t_res_72254 = sub64(mid_72245, (int64_t) 1);
                
                loopres_72252 = low_72242;
                loopres_72253 = loopres_t_res_72254;
            } else {
                int64_t loopres_f_res_72255 = add64((int64_t) 1, mid_72245);
                
                loopres_72252 = loopres_f_res_72255;
                loopres_72253 = high_72243;
            }
            
            bool loop_cond_72256 = sle64(loopres_72252, loopres_72253);
            bool loop_while_tmp_72352 = loop_cond_72256;
            int64_t low_tmp_72353 = loopres_72252;
            int64_t high_tmp_72354 = loopres_72253;
            
            loop_while_72241 = loop_while_tmp_72352;
            low_72242 = low_tmp_72353;
            high_72243 = high_tmp_72354;
        }
        nearest_idx_72042 = loop_while_72241;
        nearest_idx_72043 = low_72242;
        nearest_idx_72044 = high_72243;
        
        int64_t max_arg_72061 = sub64(nearest_idx_72043, min_res_64046);
        int64_t max_res_72062 = smax64((int64_t) 0, max_arg_72061);
        int64_t j_72063 = add64(min_res_64046, max_res_72062);
        int64_t i_p_m_t_s_72064 = add64(m_64052, max_res_72062);
        bool zzero_leq_i_p_m_t_s_72065 = sle64((int64_t) 0, i_p_m_t_s_72064);
        bool i_p_m_t_s_leq_w_72066 = slt64(i_p_m_t_s_72064, n_64028);
        bool zzero_lte_i_72067 = sle64((int64_t) 0, max_res_72062);
        bool i_lte_j_72068 = sle64(max_res_72062, j_72063);
        bool y_72069 = i_p_m_t_s_leq_w_72066 && zzero_lte_i_72067;
        bool y_72070 = zzero_leq_i_p_m_t_s_72065 && y_72069;
        bool y_72071 = i_lte_j_72068 && y_72070;
        bool forwards_ok_72072 = zzero_lte_i_72067 && y_72071;
        bool ok_or_empty_72073 = empty_slice_64051 || forwards_ok_72072;
        bool index_certs_72074;
        
        if (!ok_or_empty_72073) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_72062, ":",
                          (long long) j_72063,
                          "] out of bounds for array of shape [",
                          (long long) n_64028, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_72075;
        int64_t redout_72258 = (int64_t) 0;
        
        for (int64_t i_72257 = 0; i_72257 < min_res_64046; i_72257++) {
            int64_t slice_72259 = max_res_72062 + i_72257;
            int64_t x_72260 = ((int64_t *) mem_69722.mem)[slice_72259];
            int64_t abs_arg_72261 = sub64(x_72260, defunc_0_g_res_72041);
            int64_t abs_res_72262 = abs64(abs_arg_72261);
            int64_t defunc_1_op_res_72263 = add64(abs_res_72262, redout_72258);
            int64_t redout_tmp_72355 = defunc_1_op_res_72263;
            
            redout_72258 = redout_tmp_72355;
        }
        defunc_2_reduce_res_72075 = redout_72258;
        
        int64_t idx_72083;
        int64_t idx_72084;
        int64_t idx_72085;
        int64_t idx_72086;
        int64_t best_idx_72265;
        int64_t last_idx_72266;
        int64_t best_sum_72267;
        int64_t curr_sum_72268;
        
        best_idx_72265 = max_res_72062;
        last_idx_72266 = max_res_72062;
        best_sum_72267 = defunc_2_reduce_res_72075;
        curr_sum_72268 = defunc_2_reduce_res_72075;
        for (int64_t j_72264 = 0; j_72264 < min_res_64046; j_72264++) {
            int64_t new_idx_72269 = add64(max_res_72062, j_72264);
            int64_t x_72270 = add64(min_res_64046, new_idx_72269);
            bool cond_72271 = slt64(last_res_66216, x_72270);
            int64_t new_sum_72272;
            
            if (cond_72271) {
                new_sum_72272 = (int64_t) 9223372036854775807;
            } else {
                bool x_72273 = sle64((int64_t) 0, last_idx_72266);
                bool y_72274 = slt64(last_idx_72266, n_64028);
                bool bounds_check_72275 = x_72273 && y_72274;
                bool index_certs_72276;
                
                if (!bounds_check_72275) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_72266,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_72277 = ((int64_t *) mem_69722.mem)[last_idx_72266];
                int64_t binop_p_72278 = sub64(defunc_0_g_res_72041, y_72277);
                int64_t defunc_0_f_res_72279 = abs64(binop_p_72278);
                int64_t x_72280 = sub64(curr_sum_72268, defunc_0_f_res_72279);
                int64_t min_arg_72281 = add64(min_res_64046, last_idx_72266);
                int64_t min_res_72282 = smin64(i_64040, min_arg_72281);
                bool x_72283 = sle64((int64_t) 0, min_res_72282);
                bool y_72284 = slt64(min_res_72282, n_64028);
                bool bounds_check_72285 = x_72283 && y_72284;
                bool index_certs_72286;
                
                if (!bounds_check_72285) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_72282,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_72287 = ((int64_t *) mem_69722.mem)[min_res_72282];
                int64_t binop_p_72288 = sub64(defunc_0_g_res_72041, y_72287);
                int64_t defunc_0_f_res_72289 = abs64(binop_p_72288);
                int64_t new_sum_f_res_72290 = add64(x_72280,
                                                    defunc_0_f_res_72289);
                
                new_sum_72272 = new_sum_f_res_72290;
            }
            
            bool cond_72291 = sle64(new_sum_72272, best_sum_72267);
            int64_t loopres_72292;
            
            if (cond_72291) {
                loopres_72292 = new_idx_72269;
            } else {
                loopres_72292 = best_idx_72265;
            }
            
            int64_t loopres_72293;
            
            if (cond_72291) {
                loopres_72293 = new_sum_72272;
            } else {
                loopres_72293 = best_sum_72267;
            }
            
            int64_t best_idx_tmp_72356 = loopres_72292;
            int64_t last_idx_tmp_72357 = new_idx_72269;
            int64_t best_sum_tmp_72358 = loopres_72293;
            int64_t curr_sum_tmp_72359 = new_sum_72272;
            
            best_idx_72265 = best_idx_tmp_72356;
            last_idx_72266 = last_idx_tmp_72357;
            best_sum_72267 = best_sum_tmp_72358;
            curr_sum_72268 = curr_sum_tmp_72359;
        }
        idx_72083 = best_idx_72265;
        idx_72084 = last_idx_72266;
        idx_72085 = best_sum_72267;
        idx_72086 = curr_sum_72268;
        
        int64_t min_res_72117 = smin64(min_arg_66228, idx_72083);
        int64_t x_72118 = add64(min_res_64046, min_res_72117);
        int64_t r_72119 = sub64(x_72118, (int64_t) 1);
        bool x_72120 = sle64((int64_t) 0, r_72119);
        bool y_72121 = slt64(r_72119, n_64028);
        bool bounds_check_72122 = x_72120 && y_72121;
        bool index_certs_72123;
        
        if (!bounds_check_72122) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_72119,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_72124 = ((int64_t *) mem_69713.mem)[r_72119];
        int64_t abs_arg_72125 = sub64(x_72124, min_res_72040);
        int64_t abs_res_72126 = abs64(abs_arg_72125);
        bool x_72127 = sle64((int64_t) 0, min_res_72117);
        bool y_72128 = slt64(min_res_72117, n_64028);
        bool bounds_check_72129 = x_72127 && y_72128;
        bool index_certs_72130;
        
        if (!bounds_check_72129) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_72117,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_72131 = ((int64_t *) mem_69713.mem)[min_res_72117];
        int64_t abs_arg_72132 = sub64(x_72131, min_res_72040);
        int64_t abs_res_72133 = abs64(abs_arg_72132);
        int64_t max_res_72134 = smax64(abs_res_72126, abs_res_72133);
        float defunc_0_f_res_72135 = sitofp_i64_f32(max_res_72134);
        float defunc_1_f_res_72136 = max_res_66232 + defunc_0_f_res_72135;
        float defunc_0_f_res_72137 = sitofp_i64_f32(min_res_72040);
        float defunc_2_reduce_res_72138;
        float defunc_2_reduce_res_72139;
        float defunc_2_reduce_res_72140;
        float redout_72295;
        float redout_72296;
        float redout_72297;
        
        redout_72295 = 0.0F;
        redout_72296 = 0.0F;
        redout_72297 = 0.0F;
        for (int64_t i_72294 = 0; i_72294 < q_64030; i_72294++) {
            float x_72298 = ((float *) mem_69725.mem)[i_72294];
            bool cond_72299 = sle64(last_res_66216, i_72294);
            float defunc_0_f_res_72300;
            
            if (cond_72299) {
                defunc_0_f_res_72300 = 0.0F;
            } else {
                int64_t i_72301 = add64(min_res_72117, i_72294);
                float x_72302 = ((float *) mem_69716.mem)[i_72301];
                float defunc_0_f_res_f_res_72303 = 1.0F + x_72302;
                
                defunc_0_f_res_72300 = defunc_0_f_res_f_res_72303;
            }
            
            float x_j_72304 = defunc_0_f_res_72300 - defunc_0_f_res_72137;
            float abs_res_72305 = (float) fabs(x_j_72304);
            float tmp1_72306 = abs_res_72305 / defunc_1_f_res_72136;
            float x_72307 = tmp1_72306 * tmp1_72306;
            float y_72308 = tmp1_72306 * x_72307;
            float tmp2_72309 = 1.0F - y_72308;
            float x_72310 = tmp2_72309 * tmp2_72309;
            float tmp3_72311 = tmp2_72309 * x_72310;
            float w_j_72312 = x_72298 * tmp3_72311;
            float xw_j_72313 = x_j_72304 * w_j_72312;
            float x2w_j_72314 = x_j_72304 * xw_j_72313;
            float defunc_1_op_res_72315 = w_j_72312 + redout_72295;
            float defunc_1_op_res_72316 = xw_j_72313 + redout_72296;
            float defunc_1_op_res_72317 = x2w_j_72314 + redout_72297;
            float redout_tmp_72360 = defunc_1_op_res_72315;
            float redout_tmp_72361 = defunc_1_op_res_72316;
            float redout_tmp_72362 = defunc_1_op_res_72317;
            
            redout_72295 = redout_tmp_72360;
            redout_72296 = redout_tmp_72361;
            redout_72297 = redout_tmp_72362;
        }
        defunc_2_reduce_res_72138 = redout_72295;
        defunc_2_reduce_res_72139 = redout_72296;
        defunc_2_reduce_res_72140 = redout_72297;
        
        float x_72165 = defunc_2_reduce_res_72138 * defunc_2_reduce_res_72140;
        float y_72166 = defunc_2_reduce_res_72139 * defunc_2_reduce_res_72139;
        float y_72167 = x_72165 - y_72166;
        float det1_72168 = 1.0F / y_72167;
        float a11_72169 = defunc_2_reduce_res_72140 * det1_72168;
        float negate_arg_72170 = defunc_2_reduce_res_72139 * det1_72168;
        float b11_72171 = 0.0F - negate_arg_72170;
        float c11_72172 = defunc_2_reduce_res_72138 * det1_72168;
        float defunc_2_reduce_res_72173;
        float defunc_2_reduce_res_72174;
        float redout_72319;
        float redout_72320;
        
        redout_72319 = 0.0F;
        redout_72320 = 0.0F;
        for (int64_t i_72318 = 0; i_72318 < q_64030; i_72318++) {
            float x_72321 = ((float *) mem_69725.mem)[i_72318];
            bool cond_72322 = sle64(last_res_66216, i_72318);
            float defunc_0_f_res_72323;
            
            if (cond_72322) {
                defunc_0_f_res_72323 = 0.0F;
            } else {
                int64_t i_72324 = add64(min_res_72117, i_72318);
                float x_72325 = ((float *) mem_69716.mem)[i_72324];
                float defunc_0_f_res_f_res_72326 = 1.0F + x_72325;
                
                defunc_0_f_res_72323 = defunc_0_f_res_f_res_72326;
            }
            
            float x_j_72327 = defunc_0_f_res_72323 - defunc_0_f_res_72137;
            float abs_res_72328 = (float) fabs(x_j_72327);
            float tmp1_72329 = abs_res_72328 / defunc_1_f_res_72136;
            float x_72330 = tmp1_72329 * tmp1_72329;
            float y_72331 = tmp1_72329 * x_72330;
            float tmp2_72332 = 1.0F - y_72331;
            float x_72333 = tmp2_72332 * tmp2_72332;
            float tmp3_72334 = tmp2_72332 * x_72333;
            float tmp4_72335 = x_72321 * tmp3_72334;
            float defunc_1_f_res_72336 = x_j_72327 * tmp4_72335;
            float defunc_0_f_res_72337;
            
            if (cond_72322) {
                defunc_0_f_res_72337 = 0.0F;
            } else {
                int64_t i_72338 = add64(min_res_72117, i_72318);
                float x_72339 = ((float *) mem_69710.mem)[i_72338];
                
                defunc_0_f_res_72337 = x_72339;
            }
            
            float x_72340 = a11_72169 * tmp4_72335;
            float y_72341 = b11_72171 * defunc_1_f_res_72336;
            float x_72342 = x_72340 + y_72341;
            float defunc_9_fit_fun_res_72343 = defunc_0_f_res_72337 * x_72342;
            float x_72344 = b11_72171 * tmp4_72335;
            float y_72345 = c11_72172 * defunc_1_f_res_72336;
            float x_72346 = x_72344 + y_72345;
            float defunc_9_slope_fun_res_72347 = defunc_0_f_res_72337 * x_72346;
            float defunc_1_op_res_72348 = defunc_9_fit_fun_res_72343 +
                  redout_72319;
            float defunc_1_op_res_72349 = defunc_9_slope_fun_res_72347 +
                  redout_72320;
            float redout_tmp_72363 = defunc_1_op_res_72348;
            float redout_tmp_72364 = defunc_1_op_res_72349;
            
            redout_72319 = redout_tmp_72363;
            redout_72320 = redout_tmp_72364;
        }
        defunc_2_reduce_res_72173 = redout_72319;
        defunc_2_reduce_res_72174 = redout_72320;
        ((float *) mem_69728.mem)[gtid_66024] = defunc_2_reduce_res_72173;
        ((float *) mem_69731.mem)[gtid_66024] = defunc_2_reduce_res_72174;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76510_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76510_end -
                 futhark_mc_segmap_parloop_76510_start;
        
        ctx->futhark_mc_segmap_parloop_76510_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76510_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76510_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76508(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66023 = tid;
    int num_tasks_72239 = info.nsubtasks;
    struct futhark_mc_task_76507 *futhark_mc_task_76507 =
                                 (struct futhark_mc_task_76507 *) args;
    struct futhark_context *ctx = futhark_mc_task_76507->ctx;
    uint64_t futhark_mc_segmap_task_76508_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76508_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76507->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76507->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76507->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76507->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76507->free_i_64040;
    bool x_64041 = futhark_mc_task_76507->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76507->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76507->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76507->free_m_64052;
    int64_t last_res_66216 = futhark_mc_task_76507->free_last_res_66216;
    int64_t min_arg_66228 = futhark_mc_task_76507->free_min_arg_66228;
    float max_res_66232 = futhark_mc_task_76507->free_max_res_66232;
    struct memblock mem_69710 = {.desc ="mem_69710", .mem =
                                 futhark_mc_task_76507->free_mem_69710, .size =
                                 0, .references =NULL};
    struct memblock mem_69713 = {.desc ="mem_69713", .mem =
                                 futhark_mc_task_76507->free_mem_69713, .size =
                                 0, .references =NULL};
    struct memblock mem_69716 = {.desc ="mem_69716", .mem =
                                 futhark_mc_task_76507->free_mem_69716, .size =
                                 0, .references =NULL};
    struct memblock mem_69719 = {.desc ="mem_69719", .mem =
                                 futhark_mc_task_76507->free_mem_69719, .size =
                                 0, .references =NULL};
    struct memblock mem_69722 = {.desc ="mem_69722", .mem =
                                 futhark_mc_task_76507->free_mem_69722, .size =
                                 0, .references =NULL};
    struct memblock mem_69725 = {.desc ="mem_69725", .mem =
                                 futhark_mc_task_76507->free_mem_69725, .size =
                                 0, .references =NULL};
    struct memblock mem_69728 = {.desc ="mem_69728", .mem =
                                 futhark_mc_task_76507->free_mem_69728, .size =
                                 0, .references =NULL};
    struct memblock mem_69731 = {.desc ="mem_69731", .mem =
                                 futhark_mc_task_76507->free_mem_69731, .size =
                                 0, .references =NULL};
    int64_t iter_72240;
    struct futhark_mc_segmap_parloop_struct_76509
    futhark_mc_segmap_parloop_struct_76509;
    
    futhark_mc_segmap_parloop_struct_76509.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76509.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76509.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76509.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76509.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76509.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76509.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76509.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76509.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76509.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76509.free_last_res_66216 = last_res_66216;
    futhark_mc_segmap_parloop_struct_76509.free_min_arg_66228 = min_arg_66228;
    futhark_mc_segmap_parloop_struct_76509.free_max_res_66232 = max_res_66232;
    futhark_mc_segmap_parloop_struct_76509.free_mem_69710 = mem_69710.mem;
    futhark_mc_segmap_parloop_struct_76509.free_mem_69713 = mem_69713.mem;
    futhark_mc_segmap_parloop_struct_76509.free_mem_69716 = mem_69716.mem;
    futhark_mc_segmap_parloop_struct_76509.free_mem_69719 = mem_69719.mem;
    futhark_mc_segmap_parloop_struct_76509.free_mem_69722 = mem_69722.mem;
    futhark_mc_segmap_parloop_struct_76509.free_mem_69725 = mem_69725.mem;
    futhark_mc_segmap_parloop_struct_76509.free_mem_69728 = mem_69728.mem;
    futhark_mc_segmap_parloop_struct_76509.free_mem_69731 = mem_69731.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76510_task;
    
    futhark_mc_segmap_parloop_76510_task.name =
        "futhark_mc_segmap_parloop_76510";
    futhark_mc_segmap_parloop_76510_task.fn = futhark_mc_segmap_parloop_76510;
    futhark_mc_segmap_parloop_76510_task.args =
        &futhark_mc_segmap_parloop_struct_76509;
    futhark_mc_segmap_parloop_76510_task.iterations = iterations;
    futhark_mc_segmap_parloop_76510_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76510_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76510_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76510_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76510_task);
    
    if (futhark_mc_segmap_parloop_76510_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76510_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76510_total_end -
                 futhark_mc_segmap_parloop_76510_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76510_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76510_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76510_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76508_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76508_end -
                 futhark_mc_segmap_task_76508_start;
        
        ctx->futhark_mc_segmap_task_76508_runs[tid]++;
        ctx->futhark_mc_segmap_task_76508_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76508_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76512 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_66216;
    int64_t free_min_arg_66228;
    float free_max_res_66232;
    char *free_mem_69710;
    char *free_mem_69713;
    char *free_mem_69716;
    char *free_mem_69719;
    char *free_mem_69722;
    char *free_mem_69725;
    char *free_mem_69728;
    char *free_mem_69731;
};
struct futhark_mc_task_76514 {
    struct futhark_context *ctx;
    char *free_mem_69722;
    int64_t free_defunc_0_g_res_71870;
    int64_t free_max_res_71891;
    int64_t *retval_defunc_2_reduce_res_71904;
};
struct futhark_mc_segred_stage_1_parloop_struct_76517 {
    struct futhark_context *ctx;
    char *free_mem_69722;
    int64_t free_defunc_0_g_res_71870;
    int64_t free_max_res_71891;
    char *free_reduce_stage_1_tid_res_arr_mem_72484;
};
static int futhark_mc_segred_stage_1_parloop_76518(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66027, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76517
    *futhark_mc_segred_stage_1_parloop_struct_76517 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76517 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76517->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76518_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76518_start = get_wall_time();
    
    struct memblock mem_69722 = {.desc ="mem_69722", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76517->free_mem_69722,
                                 .size =0, .references =NULL};
    int64_t defunc_0_g_res_71870 =
            futhark_mc_segred_stage_1_parloop_struct_76517->free_defunc_0_g_res_71870;
    int64_t max_res_71891 =
            futhark_mc_segred_stage_1_parloop_struct_76517->free_max_res_71891;
    struct memblock reduce_stage_1_tid_res_arr_mem_72484 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72484",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76517->free_reduce_stage_1_tid_res_arr_mem_72484,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72486 = start;
    int64_t x_72382;
    int64_t x_72383;
    int64_t local_acc_72487 = (int64_t) 0;
    
    for (; iter_72486 < end; iter_72486++) {
        int64_t gtid_66028 = iter_72486;
        int64_t slice_72385 = gtid_66028 + max_res_71891;
        int64_t x_72386 = ((int64_t *) mem_69722.mem)[slice_72385];
        int64_t abs_arg_72387 = sub64(x_72386, defunc_0_g_res_71870);
        int64_t abs_res_72388 = abs64(abs_arg_72387);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_72382 = local_acc_72487;
        }
        // Load next params
        {
            x_72383 = abs_res_72388;
        }
        // Red body
        {
            int64_t defunc_1_op_res_72384 = add64(x_72382, x_72383);
            
            local_acc_72487 = defunc_1_op_res_72384;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_72484.mem)[flat_tid_66027] =
        local_acc_72487;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76518_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76518_end -
                 futhark_mc_segred_stage_1_parloop_76518_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76518_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76518_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76518_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76515(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66027 = tid;
    int num_tasks_72483 = info.nsubtasks;
    struct futhark_mc_task_76514 *futhark_mc_task_76514 =
                                 (struct futhark_mc_task_76514 *) args;
    struct futhark_context *ctx = futhark_mc_task_76514->ctx;
    uint64_t futhark_mc_segred_task_76515_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76515_start = get_wall_time();
    
    struct memblock mem_69722 = {.desc ="mem_69722", .mem =
                                 futhark_mc_task_76514->free_mem_69722, .size =
                                 0, .references =NULL};
    int64_t defunc_0_g_res_71870 =
            futhark_mc_task_76514->free_defunc_0_g_res_71870;
    int64_t max_res_71891 = futhark_mc_task_76514->free_max_res_71891;
    int64_t defunc_2_reduce_res_71904 =
            *futhark_mc_task_76514->retval_defunc_2_reduce_res_71904;
    size_t reduce_stage_1_tid_res_arr_mem_72484_cached_sizze_76516 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72484 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_72484_cached_sizze_76516 <
        (size_t) ((int64_t) 8 * num_tasks_72483)) {
        reduce_stage_1_tid_res_arr_mem_72484 =
            realloc(reduce_stage_1_tid_res_arr_mem_72484, (int64_t) 8 *
                    num_tasks_72483);
        reduce_stage_1_tid_res_arr_mem_72484_cached_sizze_76516 = (int64_t) 8 *
            num_tasks_72483;
    }
    
    int64_t iter_72486;
    struct futhark_mc_segred_stage_1_parloop_struct_76517
    futhark_mc_segred_stage_1_parloop_struct_76517;
    
    futhark_mc_segred_stage_1_parloop_struct_76517.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76517.free_mem_69722 =
        mem_69722.mem;
    futhark_mc_segred_stage_1_parloop_struct_76517.free_defunc_0_g_res_71870 =
        defunc_0_g_res_71870;
    futhark_mc_segred_stage_1_parloop_struct_76517.free_max_res_71891 =
        max_res_71891;
    futhark_mc_segred_stage_1_parloop_struct_76517.free_reduce_stage_1_tid_res_arr_mem_72484 =
        reduce_stage_1_tid_res_arr_mem_72484;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76518_task;
    
    futhark_mc_segred_stage_1_parloop_76518_task.name =
        "futhark_mc_segred_stage_1_parloop_76518";
    futhark_mc_segred_stage_1_parloop_76518_task.fn =
        futhark_mc_segred_stage_1_parloop_76518;
    futhark_mc_segred_stage_1_parloop_76518_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76517;
    futhark_mc_segred_stage_1_parloop_76518_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76518_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76518_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76518_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76518_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76518_task);
    
    if (futhark_mc_segred_stage_1_parloop_76518_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76518_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76518_total_end -
                 futhark_mc_segred_stage_1_parloop_76518_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76518_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76518_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76518_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_71904 = (int64_t) 0;
    }
    
    int64_t x_72488;
    int64_t x_72489;
    
    for (int32_t i_72491 = 0; i_72491 < num_tasks_72483; i_72491++) {
        flat_tid_66027 = i_72491;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_72488 = defunc_2_reduce_res_71904;
            }
            // load next params
            {
                x_72489 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_72484)[flat_tid_66027];
            }
            // red body
            {
                int64_t defunc_1_op_res_72490 = add64(x_72488, x_72489);
                
                defunc_2_reduce_res_71904 = defunc_1_op_res_72490;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_72484);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76515_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76515_end -
                 futhark_mc_segred_task_76515_start;
        
        ctx->futhark_mc_segred_task_76515_runs[tid]++;
        ctx->futhark_mc_segred_task_76515_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76515_iter[tid] += iterations;
    }
    *futhark_mc_task_76514->retval_defunc_2_reduce_res_71904 =
        defunc_2_reduce_res_71904;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76519 {
    struct futhark_context *ctx;
    int64_t free_last_res_66216;
    char *free_mem_69716;
    char *free_mem_69725;
    int64_t free_min_res_71946;
    float free_defunc_1_f_res_71965;
    float free_defunc_0_f_res_71966;
    float *retval_defunc_2_reduce_res_71967;
    float *retval_defunc_2_reduce_res_71968;
    float *retval_defunc_2_reduce_res_71969;
};
struct futhark_mc_segred_stage_1_parloop_struct_76524 {
    struct futhark_context *ctx;
    int64_t free_last_res_66216;
    char *free_mem_69716;
    char *free_mem_69725;
    int64_t free_min_res_71946;
    float free_defunc_1_f_res_71965;
    float free_defunc_0_f_res_71966;
    char *free_reduce_stage_1_tid_res_arr_mem_72497;
    char *free_reduce_stage_1_tid_res_arr_mem_72499;
    char *free_reduce_stage_1_tid_res_arr_mem_72501;
};
static int futhark_mc_segred_stage_1_parloop_76525(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66029, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76524
    *futhark_mc_segred_stage_1_parloop_struct_76524 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76524 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76524->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76525_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76525_start = get_wall_time();
    
    int64_t last_res_66216 =
            futhark_mc_segred_stage_1_parloop_struct_76524->free_last_res_66216;
    struct memblock mem_69716 = {.desc ="mem_69716", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76524->free_mem_69716,
                                 .size =0, .references =NULL};
    struct memblock mem_69725 = {.desc ="mem_69725", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76524->free_mem_69725,
                                 .size =0, .references =NULL};
    int64_t min_res_71946 =
            futhark_mc_segred_stage_1_parloop_struct_76524->free_min_res_71946;
    float defunc_1_f_res_71965 =
          futhark_mc_segred_stage_1_parloop_struct_76524->free_defunc_1_f_res_71965;
    float defunc_0_f_res_71966 =
          futhark_mc_segred_stage_1_parloop_struct_76524->free_defunc_0_f_res_71966;
    struct memblock reduce_stage_1_tid_res_arr_mem_72497 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72497",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76524->free_reduce_stage_1_tid_res_arr_mem_72497,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_72499 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72499",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76524->free_reduce_stage_1_tid_res_arr_mem_72499,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_72501 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72501",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76524->free_reduce_stage_1_tid_res_arr_mem_72501,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72503 = start;
    float x_72419;
    float x_72420;
    float x_72422;
    float x_72423;
    float x_72425;
    float x_72426;
    float local_acc_72504 = 0.0F;
    float local_acc_72505 = 0.0F;
    float local_acc_72506 = 0.0F;
    
    for (; iter_72503 < end; iter_72503++) {
        int64_t gtid_66030 = iter_72503;
        float x_72428 = ((float *) mem_69725.mem)[gtid_66030];
        bool cond_72429 = sle64(last_res_66216, gtid_66030);
        float defunc_0_f_res_72430;
        
        if (cond_72429) {
            defunc_0_f_res_72430 = 0.0F;
        } else {
            int64_t i_72431 = add64(gtid_66030, min_res_71946);
            float x_72432 = ((float *) mem_69716.mem)[i_72431];
            float defunc_0_f_res_f_res_72433 = 1.0F + x_72432;
            
            defunc_0_f_res_72430 = defunc_0_f_res_f_res_72433;
        }
        
        float x_j_72434 = defunc_0_f_res_72430 - defunc_0_f_res_71966;
        float abs_res_72435 = (float) fabs(x_j_72434);
        float tmp1_72436 = abs_res_72435 / defunc_1_f_res_71965;
        float x_72437 = tmp1_72436 * tmp1_72436;
        float y_72438 = tmp1_72436 * x_72437;
        float tmp2_72439 = 1.0F - y_72438;
        float x_72440 = tmp2_72439 * tmp2_72439;
        float tmp3_72441 = tmp2_72439 * x_72440;
        float w_j_72442 = x_72428 * tmp3_72441;
        float xw_j_72443 = x_j_72434 * w_j_72442;
        float x2w_j_72444 = x_j_72434 * xw_j_72443;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_72419 = local_acc_72504;
        }
        // Load next params
        {
            x_72420 = w_j_72442;
        }
        // Red body
        {
            float defunc_1_op_res_72421 = x_72419 + x_72420;
            
            local_acc_72504 = defunc_1_op_res_72421;
        }
        // Load accum params
        {
            x_72422 = local_acc_72505;
        }
        // Load next params
        {
            x_72423 = xw_j_72443;
        }
        // Red body
        {
            float defunc_1_op_res_72424 = x_72422 + x_72423;
            
            local_acc_72505 = defunc_1_op_res_72424;
        }
        // Load accum params
        {
            x_72425 = local_acc_72506;
        }
        // Load next params
        {
            x_72426 = x2w_j_72444;
        }
        // Red body
        {
            float defunc_1_op_res_72427 = x_72425 + x_72426;
            
            local_acc_72506 = defunc_1_op_res_72427;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_72497.mem)[flat_tid_66029] =
        local_acc_72504;
    ((float *) reduce_stage_1_tid_res_arr_mem_72499.mem)[flat_tid_66029] =
        local_acc_72505;
    ((float *) reduce_stage_1_tid_res_arr_mem_72501.mem)[flat_tid_66029] =
        local_acc_72506;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76525_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76525_end -
                 futhark_mc_segred_stage_1_parloop_76525_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76525_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76525_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76525_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76520(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66029 = tid;
    int num_tasks_72496 = info.nsubtasks;
    struct futhark_mc_task_76519 *futhark_mc_task_76519 =
                                 (struct futhark_mc_task_76519 *) args;
    struct futhark_context *ctx = futhark_mc_task_76519->ctx;
    uint64_t futhark_mc_segred_task_76520_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76520_start = get_wall_time();
    
    int64_t last_res_66216 = futhark_mc_task_76519->free_last_res_66216;
    struct memblock mem_69716 = {.desc ="mem_69716", .mem =
                                 futhark_mc_task_76519->free_mem_69716, .size =
                                 0, .references =NULL};
    struct memblock mem_69725 = {.desc ="mem_69725", .mem =
                                 futhark_mc_task_76519->free_mem_69725, .size =
                                 0, .references =NULL};
    int64_t min_res_71946 = futhark_mc_task_76519->free_min_res_71946;
    float defunc_1_f_res_71965 =
          futhark_mc_task_76519->free_defunc_1_f_res_71965;
    float defunc_0_f_res_71966 =
          futhark_mc_task_76519->free_defunc_0_f_res_71966;
    float defunc_2_reduce_res_71967 =
          *futhark_mc_task_76519->retval_defunc_2_reduce_res_71967;
    float defunc_2_reduce_res_71968 =
          *futhark_mc_task_76519->retval_defunc_2_reduce_res_71968;
    float defunc_2_reduce_res_71969 =
          *futhark_mc_task_76519->retval_defunc_2_reduce_res_71969;
    size_t reduce_stage_1_tid_res_arr_mem_72497_cached_sizze_76521 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72497 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_72499_cached_sizze_76522 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72499 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_72501_cached_sizze_76523 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72501 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_72497_cached_sizze_76521 <
        (size_t) ((int64_t) 4 * num_tasks_72496)) {
        reduce_stage_1_tid_res_arr_mem_72497 =
            realloc(reduce_stage_1_tid_res_arr_mem_72497, (int64_t) 4 *
                    num_tasks_72496);
        reduce_stage_1_tid_res_arr_mem_72497_cached_sizze_76521 = (int64_t) 4 *
            num_tasks_72496;
    }
    if (reduce_stage_1_tid_res_arr_mem_72499_cached_sizze_76522 <
        (size_t) ((int64_t) 4 * num_tasks_72496)) {
        reduce_stage_1_tid_res_arr_mem_72499 =
            realloc(reduce_stage_1_tid_res_arr_mem_72499, (int64_t) 4 *
                    num_tasks_72496);
        reduce_stage_1_tid_res_arr_mem_72499_cached_sizze_76522 = (int64_t) 4 *
            num_tasks_72496;
    }
    if (reduce_stage_1_tid_res_arr_mem_72501_cached_sizze_76523 <
        (size_t) ((int64_t) 4 * num_tasks_72496)) {
        reduce_stage_1_tid_res_arr_mem_72501 =
            realloc(reduce_stage_1_tid_res_arr_mem_72501, (int64_t) 4 *
                    num_tasks_72496);
        reduce_stage_1_tid_res_arr_mem_72501_cached_sizze_76523 = (int64_t) 4 *
            num_tasks_72496;
    }
    
    int64_t iter_72503;
    struct futhark_mc_segred_stage_1_parloop_struct_76524
    futhark_mc_segred_stage_1_parloop_struct_76524;
    
    futhark_mc_segred_stage_1_parloop_struct_76524.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76524.free_last_res_66216 =
        last_res_66216;
    futhark_mc_segred_stage_1_parloop_struct_76524.free_mem_69716 =
        mem_69716.mem;
    futhark_mc_segred_stage_1_parloop_struct_76524.free_mem_69725 =
        mem_69725.mem;
    futhark_mc_segred_stage_1_parloop_struct_76524.free_min_res_71946 =
        min_res_71946;
    futhark_mc_segred_stage_1_parloop_struct_76524.free_defunc_1_f_res_71965 =
        defunc_1_f_res_71965;
    futhark_mc_segred_stage_1_parloop_struct_76524.free_defunc_0_f_res_71966 =
        defunc_0_f_res_71966;
    futhark_mc_segred_stage_1_parloop_struct_76524.free_reduce_stage_1_tid_res_arr_mem_72497 =
        reduce_stage_1_tid_res_arr_mem_72497;
    futhark_mc_segred_stage_1_parloop_struct_76524.free_reduce_stage_1_tid_res_arr_mem_72499 =
        reduce_stage_1_tid_res_arr_mem_72499;
    futhark_mc_segred_stage_1_parloop_struct_76524.free_reduce_stage_1_tid_res_arr_mem_72501 =
        reduce_stage_1_tid_res_arr_mem_72501;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76525_task;
    
    futhark_mc_segred_stage_1_parloop_76525_task.name =
        "futhark_mc_segred_stage_1_parloop_76525";
    futhark_mc_segred_stage_1_parloop_76525_task.fn =
        futhark_mc_segred_stage_1_parloop_76525;
    futhark_mc_segred_stage_1_parloop_76525_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76524;
    futhark_mc_segred_stage_1_parloop_76525_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76525_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76525_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76525_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76525_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76525_task);
    
    if (futhark_mc_segred_stage_1_parloop_76525_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76525_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76525_total_end -
                 futhark_mc_segred_stage_1_parloop_76525_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76525_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76525_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76525_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_71967 = 0.0F;
        defunc_2_reduce_res_71968 = 0.0F;
        defunc_2_reduce_res_71969 = 0.0F;
    }
    
    float x_72507;
    float x_72508;
    float x_72510;
    float x_72511;
    float x_72513;
    float x_72514;
    
    for (int32_t i_72516 = 0; i_72516 < num_tasks_72496; i_72516++) {
        flat_tid_66029 = i_72516;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_72507 = defunc_2_reduce_res_71967;
            }
            // load next params
            {
                x_72508 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72497)[flat_tid_66029];
            }
            // red body
            {
                float defunc_1_op_res_72509 = x_72507 + x_72508;
                
                defunc_2_reduce_res_71967 = defunc_1_op_res_72509;
            }
            // load acc params
            {
                x_72510 = defunc_2_reduce_res_71968;
            }
            // load next params
            {
                x_72511 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72499)[flat_tid_66029];
            }
            // red body
            {
                float defunc_1_op_res_72512 = x_72510 + x_72511;
                
                defunc_2_reduce_res_71968 = defunc_1_op_res_72512;
            }
            // load acc params
            {
                x_72513 = defunc_2_reduce_res_71969;
            }
            // load next params
            {
                x_72514 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72501)[flat_tid_66029];
            }
            // red body
            {
                float defunc_1_op_res_72515 = x_72513 + x_72514;
                
                defunc_2_reduce_res_71969 = defunc_1_op_res_72515;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_72497);
    free(reduce_stage_1_tid_res_arr_mem_72499);
    free(reduce_stage_1_tid_res_arr_mem_72501);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76520_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76520_end -
                 futhark_mc_segred_task_76520_start;
        
        ctx->futhark_mc_segred_task_76520_runs[tid]++;
        ctx->futhark_mc_segred_task_76520_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76520_iter[tid] += iterations;
    }
    *futhark_mc_task_76519->retval_defunc_2_reduce_res_71967 =
        defunc_2_reduce_res_71967;
    *futhark_mc_task_76519->retval_defunc_2_reduce_res_71968 =
        defunc_2_reduce_res_71968;
    *futhark_mc_task_76519->retval_defunc_2_reduce_res_71969 =
        defunc_2_reduce_res_71969;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76526 {
    struct futhark_context *ctx;
    int64_t free_last_res_66216;
    char *free_mem_69710;
    char *free_mem_69716;
    char *free_mem_69725;
    int64_t free_min_res_71946;
    float free_defunc_1_f_res_71965;
    float free_defunc_0_f_res_71966;
    float free_a11_72000;
    float free_b11_72002;
    float free_c11_72003;
    float *retval_defunc_2_reduce_res_72004;
    float *retval_defunc_2_reduce_res_72005;
};
struct futhark_mc_segred_stage_1_parloop_struct_76530 {
    struct futhark_context *ctx;
    int64_t free_last_res_66216;
    char *free_mem_69710;
    char *free_mem_69716;
    char *free_mem_69725;
    int64_t free_min_res_71946;
    float free_defunc_1_f_res_71965;
    float free_defunc_0_f_res_71966;
    float free_a11_72000;
    float free_b11_72002;
    float free_c11_72003;
    char *free_reduce_stage_1_tid_res_arr_mem_72518;
    char *free_reduce_stage_1_tid_res_arr_mem_72520;
};
static int futhark_mc_segred_stage_1_parloop_76531(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66031, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76530
    *futhark_mc_segred_stage_1_parloop_struct_76530 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76530 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76530->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76531_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76531_start = get_wall_time();
    
    int64_t last_res_66216 =
            futhark_mc_segred_stage_1_parloop_struct_76530->free_last_res_66216;
    struct memblock mem_69710 = {.desc ="mem_69710", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76530->free_mem_69710,
                                 .size =0, .references =NULL};
    struct memblock mem_69716 = {.desc ="mem_69716", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76530->free_mem_69716,
                                 .size =0, .references =NULL};
    struct memblock mem_69725 = {.desc ="mem_69725", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76530->free_mem_69725,
                                 .size =0, .references =NULL};
    int64_t min_res_71946 =
            futhark_mc_segred_stage_1_parloop_struct_76530->free_min_res_71946;
    float defunc_1_f_res_71965 =
          futhark_mc_segred_stage_1_parloop_struct_76530->free_defunc_1_f_res_71965;
    float defunc_0_f_res_71966 =
          futhark_mc_segred_stage_1_parloop_struct_76530->free_defunc_0_f_res_71966;
    float a11_72000 =
          futhark_mc_segred_stage_1_parloop_struct_76530->free_a11_72000;
    float b11_72002 =
          futhark_mc_segred_stage_1_parloop_struct_76530->free_b11_72002;
    float c11_72003 =
          futhark_mc_segred_stage_1_parloop_struct_76530->free_c11_72003;
    struct memblock reduce_stage_1_tid_res_arr_mem_72518 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72518",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76530->free_reduce_stage_1_tid_res_arr_mem_72518,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_72520 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72520",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76530->free_reduce_stage_1_tid_res_arr_mem_72520,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72522 = start;
    float x_72445;
    float x_72446;
    float x_72448;
    float x_72449;
    float local_acc_72523 = 0.0F;
    float local_acc_72524 = 0.0F;
    
    for (; iter_72522 < end; iter_72522++) {
        int64_t gtid_66032 = iter_72522;
        float x_72451 = ((float *) mem_69725.mem)[gtid_66032];
        bool cond_72452 = sle64(last_res_66216, gtid_66032);
        float defunc_0_f_res_72453;
        
        if (cond_72452) {
            defunc_0_f_res_72453 = 0.0F;
        } else {
            int64_t i_72454 = add64(gtid_66032, min_res_71946);
            float x_72455 = ((float *) mem_69716.mem)[i_72454];
            float defunc_0_f_res_f_res_72456 = 1.0F + x_72455;
            
            defunc_0_f_res_72453 = defunc_0_f_res_f_res_72456;
        }
        
        float x_j_72457 = defunc_0_f_res_72453 - defunc_0_f_res_71966;
        float abs_res_72458 = (float) fabs(x_j_72457);
        float tmp1_72459 = abs_res_72458 / defunc_1_f_res_71965;
        float x_72460 = tmp1_72459 * tmp1_72459;
        float y_72461 = tmp1_72459 * x_72460;
        float tmp2_72462 = 1.0F - y_72461;
        float x_72463 = tmp2_72462 * tmp2_72462;
        float tmp3_72464 = tmp2_72462 * x_72463;
        float tmp4_72465 = x_72451 * tmp3_72464;
        float defunc_1_f_res_72466 = x_j_72457 * tmp4_72465;
        float defunc_0_f_res_72467;
        
        if (cond_72452) {
            defunc_0_f_res_72467 = 0.0F;
        } else {
            int64_t i_72468 = add64(gtid_66032, min_res_71946);
            float x_72469 = ((float *) mem_69710.mem)[i_72468];
            
            defunc_0_f_res_72467 = x_72469;
        }
        
        float x_72470 = a11_72000 * tmp4_72465;
        float y_72471 = b11_72002 * defunc_1_f_res_72466;
        float x_72472 = x_72470 + y_72471;
        float defunc_9_fit_fun_res_72473 = defunc_0_f_res_72467 * x_72472;
        float x_72474 = b11_72002 * tmp4_72465;
        float y_72475 = c11_72003 * defunc_1_f_res_72466;
        float x_72476 = x_72474 + y_72475;
        float defunc_9_slope_fun_res_72477 = defunc_0_f_res_72467 * x_72476;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_72445 = local_acc_72523;
        }
        // Load next params
        {
            x_72446 = defunc_9_fit_fun_res_72473;
        }
        // Red body
        {
            float defunc_1_op_res_72447 = x_72445 + x_72446;
            
            local_acc_72523 = defunc_1_op_res_72447;
        }
        // Load accum params
        {
            x_72448 = local_acc_72524;
        }
        // Load next params
        {
            x_72449 = defunc_9_slope_fun_res_72477;
        }
        // Red body
        {
            float defunc_1_op_res_72450 = x_72448 + x_72449;
            
            local_acc_72524 = defunc_1_op_res_72450;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_72518.mem)[flat_tid_66031] =
        local_acc_72523;
    ((float *) reduce_stage_1_tid_res_arr_mem_72520.mem)[flat_tid_66031] =
        local_acc_72524;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76531_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76531_end -
                 futhark_mc_segred_stage_1_parloop_76531_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76531_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76531_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76531_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76527(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66031 = tid;
    int num_tasks_72517 = info.nsubtasks;
    struct futhark_mc_task_76526 *futhark_mc_task_76526 =
                                 (struct futhark_mc_task_76526 *) args;
    struct futhark_context *ctx = futhark_mc_task_76526->ctx;
    uint64_t futhark_mc_segred_task_76527_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76527_start = get_wall_time();
    
    int64_t last_res_66216 = futhark_mc_task_76526->free_last_res_66216;
    struct memblock mem_69710 = {.desc ="mem_69710", .mem =
                                 futhark_mc_task_76526->free_mem_69710, .size =
                                 0, .references =NULL};
    struct memblock mem_69716 = {.desc ="mem_69716", .mem =
                                 futhark_mc_task_76526->free_mem_69716, .size =
                                 0, .references =NULL};
    struct memblock mem_69725 = {.desc ="mem_69725", .mem =
                                 futhark_mc_task_76526->free_mem_69725, .size =
                                 0, .references =NULL};
    int64_t min_res_71946 = futhark_mc_task_76526->free_min_res_71946;
    float defunc_1_f_res_71965 =
          futhark_mc_task_76526->free_defunc_1_f_res_71965;
    float defunc_0_f_res_71966 =
          futhark_mc_task_76526->free_defunc_0_f_res_71966;
    float a11_72000 = futhark_mc_task_76526->free_a11_72000;
    float b11_72002 = futhark_mc_task_76526->free_b11_72002;
    float c11_72003 = futhark_mc_task_76526->free_c11_72003;
    float defunc_2_reduce_res_72004 =
          *futhark_mc_task_76526->retval_defunc_2_reduce_res_72004;
    float defunc_2_reduce_res_72005 =
          *futhark_mc_task_76526->retval_defunc_2_reduce_res_72005;
    size_t reduce_stage_1_tid_res_arr_mem_72518_cached_sizze_76528 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72518 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_72520_cached_sizze_76529 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72520 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_72518_cached_sizze_76528 <
        (size_t) ((int64_t) 4 * num_tasks_72517)) {
        reduce_stage_1_tid_res_arr_mem_72518 =
            realloc(reduce_stage_1_tid_res_arr_mem_72518, (int64_t) 4 *
                    num_tasks_72517);
        reduce_stage_1_tid_res_arr_mem_72518_cached_sizze_76528 = (int64_t) 4 *
            num_tasks_72517;
    }
    if (reduce_stage_1_tid_res_arr_mem_72520_cached_sizze_76529 <
        (size_t) ((int64_t) 4 * num_tasks_72517)) {
        reduce_stage_1_tid_res_arr_mem_72520 =
            realloc(reduce_stage_1_tid_res_arr_mem_72520, (int64_t) 4 *
                    num_tasks_72517);
        reduce_stage_1_tid_res_arr_mem_72520_cached_sizze_76529 = (int64_t) 4 *
            num_tasks_72517;
    }
    
    int64_t iter_72522;
    struct futhark_mc_segred_stage_1_parloop_struct_76530
    futhark_mc_segred_stage_1_parloop_struct_76530;
    
    futhark_mc_segred_stage_1_parloop_struct_76530.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76530.free_last_res_66216 =
        last_res_66216;
    futhark_mc_segred_stage_1_parloop_struct_76530.free_mem_69710 =
        mem_69710.mem;
    futhark_mc_segred_stage_1_parloop_struct_76530.free_mem_69716 =
        mem_69716.mem;
    futhark_mc_segred_stage_1_parloop_struct_76530.free_mem_69725 =
        mem_69725.mem;
    futhark_mc_segred_stage_1_parloop_struct_76530.free_min_res_71946 =
        min_res_71946;
    futhark_mc_segred_stage_1_parloop_struct_76530.free_defunc_1_f_res_71965 =
        defunc_1_f_res_71965;
    futhark_mc_segred_stage_1_parloop_struct_76530.free_defunc_0_f_res_71966 =
        defunc_0_f_res_71966;
    futhark_mc_segred_stage_1_parloop_struct_76530.free_a11_72000 = a11_72000;
    futhark_mc_segred_stage_1_parloop_struct_76530.free_b11_72002 = b11_72002;
    futhark_mc_segred_stage_1_parloop_struct_76530.free_c11_72003 = c11_72003;
    futhark_mc_segred_stage_1_parloop_struct_76530.free_reduce_stage_1_tid_res_arr_mem_72518 =
        reduce_stage_1_tid_res_arr_mem_72518;
    futhark_mc_segred_stage_1_parloop_struct_76530.free_reduce_stage_1_tid_res_arr_mem_72520 =
        reduce_stage_1_tid_res_arr_mem_72520;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76531_task;
    
    futhark_mc_segred_stage_1_parloop_76531_task.name =
        "futhark_mc_segred_stage_1_parloop_76531";
    futhark_mc_segred_stage_1_parloop_76531_task.fn =
        futhark_mc_segred_stage_1_parloop_76531;
    futhark_mc_segred_stage_1_parloop_76531_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76530;
    futhark_mc_segred_stage_1_parloop_76531_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76531_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76531_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76531_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76531_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76531_task);
    
    if (futhark_mc_segred_stage_1_parloop_76531_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76531_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76531_total_end -
                 futhark_mc_segred_stage_1_parloop_76531_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76531_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76531_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76531_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_72004 = 0.0F;
        defunc_2_reduce_res_72005 = 0.0F;
    }
    
    float x_72525;
    float x_72526;
    float x_72528;
    float x_72529;
    
    for (int32_t i_72531 = 0; i_72531 < num_tasks_72517; i_72531++) {
        flat_tid_66031 = i_72531;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_72525 = defunc_2_reduce_res_72004;
            }
            // load next params
            {
                x_72526 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72518)[flat_tid_66031];
            }
            // red body
            {
                float defunc_1_op_res_72527 = x_72525 + x_72526;
                
                defunc_2_reduce_res_72004 = defunc_1_op_res_72527;
            }
            // load acc params
            {
                x_72528 = defunc_2_reduce_res_72005;
            }
            // load next params
            {
                x_72529 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72520)[flat_tid_66031];
            }
            // red body
            {
                float defunc_1_op_res_72530 = x_72528 + x_72529;
                
                defunc_2_reduce_res_72005 = defunc_1_op_res_72530;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_72518);
    free(reduce_stage_1_tid_res_arr_mem_72520);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76527_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76527_end -
                 futhark_mc_segred_task_76527_start;
        
        ctx->futhark_mc_segred_task_76527_runs[tid]++;
        ctx->futhark_mc_segred_task_76527_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76527_iter[tid] += iterations;
    }
    *futhark_mc_task_76526->retval_defunc_2_reduce_res_72004 =
        defunc_2_reduce_res_72004;
    *futhark_mc_task_76526->retval_defunc_2_reduce_res_72005 =
        defunc_2_reduce_res_72005;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76513(void *args, int64_t start,
                                           int64_t end, int flat_tid_66025,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76512
    *futhark_mc_segmap_parloop_struct_76512 =
    (struct futhark_mc_segmap_parloop_struct_76512 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76512->ctx;
    uint64_t futhark_mc_segmap_parloop_76513_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76513_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76512->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76512->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76512->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76512->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76512->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76512->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76512->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76512->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76512->free_m_64052;
    int64_t last_res_66216 =
            futhark_mc_segmap_parloop_struct_76512->free_last_res_66216;
    int64_t min_arg_66228 =
            futhark_mc_segmap_parloop_struct_76512->free_min_arg_66228;
    float max_res_66232 =
          futhark_mc_segmap_parloop_struct_76512->free_max_res_66232;
    struct memblock mem_69710 = {.desc ="mem_69710", .mem =
                                 futhark_mc_segmap_parloop_struct_76512->free_mem_69710,
                                 .size =0, .references =NULL};
    struct memblock mem_69713 = {.desc ="mem_69713", .mem =
                                 futhark_mc_segmap_parloop_struct_76512->free_mem_69713,
                                 .size =0, .references =NULL};
    struct memblock mem_69716 = {.desc ="mem_69716", .mem =
                                 futhark_mc_segmap_parloop_struct_76512->free_mem_69716,
                                 .size =0, .references =NULL};
    struct memblock mem_69719 = {.desc ="mem_69719", .mem =
                                 futhark_mc_segmap_parloop_struct_76512->free_mem_69719,
                                 .size =0, .references =NULL};
    struct memblock mem_69722 = {.desc ="mem_69722", .mem =
                                 futhark_mc_segmap_parloop_struct_76512->free_mem_69722,
                                 .size =0, .references =NULL};
    struct memblock mem_69725 = {.desc ="mem_69725", .mem =
                                 futhark_mc_segmap_parloop_struct_76512->free_mem_69725,
                                 .size =0, .references =NULL};
    struct memblock mem_69728 = {.desc ="mem_69728", .mem =
                                 futhark_mc_segmap_parloop_struct_76512->free_mem_69728,
                                 .size =0, .references =NULL};
    struct memblock mem_69731 = {.desc ="mem_69731", .mem =
                                 futhark_mc_segmap_parloop_struct_76512->free_mem_69731,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72365 = start;
    
    for (; iter_72365 < end; iter_72365++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72478 = n_m_64039;
        int64_t gtid_66026 = iter_72365;
        int64_t remnant_72479 = iter_72365 - gtid_66026;
        int64_t min_arg_71868 = mul64(jump_64032, gtid_66026);
        int64_t min_res_71869 = smin64(i_64040, min_arg_71868);
        int64_t defunc_0_g_res_71870 = add64((int64_t) 1, min_res_71869);
        bool nearest_idx_71871;
        int64_t nearest_idx_71872;
        int64_t nearest_idx_71873;
        bool loop_while_72366;
        int64_t low_72367;
        int64_t high_72368;
        
        loop_while_72366 = x_64041;
        low_72367 = (int64_t) 0;
        high_72368 = i_64040;
        while (loop_while_72366) {
            int64_t x_72369 = add64(low_72367, high_72368);
            int64_t mid_72370 = sdiv64(x_72369, (int64_t) 2);
            bool x_72371 = sle64((int64_t) 0, mid_72370);
            bool y_72372 = slt64(mid_72370, n_64028);
            bool bounds_check_72373 = x_72371 && y_72372;
            bool index_certs_72374;
            
            if (!bounds_check_72373) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_72370,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_72375 = ((int64_t *) mem_69719.mem)[mid_72370];
            bool cond_72376 = sle64(defunc_0_g_res_71870, x_72375);
            int64_t loopres_72377;
            int64_t loopres_72378;
            
            if (cond_72376) {
                int64_t loopres_t_res_72379 = sub64(mid_72370, (int64_t) 1);
                
                loopres_72377 = low_72367;
                loopres_72378 = loopres_t_res_72379;
            } else {
                int64_t loopres_f_res_72380 = add64((int64_t) 1, mid_72370);
                
                loopres_72377 = loopres_f_res_72380;
                loopres_72378 = high_72368;
            }
            
            bool loop_cond_72381 = sle64(loopres_72377, loopres_72378);
            bool loop_while_tmp_72480 = loop_cond_72381;
            int64_t low_tmp_72481 = loopres_72377;
            int64_t high_tmp_72482 = loopres_72378;
            
            loop_while_72366 = loop_while_tmp_72480;
            low_72367 = low_tmp_72481;
            high_72368 = high_tmp_72482;
        }
        nearest_idx_71871 = loop_while_72366;
        nearest_idx_71872 = low_72367;
        nearest_idx_71873 = high_72368;
        
        int64_t max_arg_71890 = sub64(nearest_idx_71872, min_res_64046);
        int64_t max_res_71891 = smax64((int64_t) 0, max_arg_71890);
        int64_t j_71892 = add64(min_res_64046, max_res_71891);
        int64_t i_p_m_t_s_71893 = add64(m_64052, max_res_71891);
        bool zzero_leq_i_p_m_t_s_71894 = sle64((int64_t) 0, i_p_m_t_s_71893);
        bool i_p_m_t_s_leq_w_71895 = slt64(i_p_m_t_s_71893, n_64028);
        bool zzero_lte_i_71896 = sle64((int64_t) 0, max_res_71891);
        bool i_lte_j_71897 = sle64(max_res_71891, j_71892);
        bool y_71898 = i_p_m_t_s_leq_w_71895 && zzero_lte_i_71896;
        bool y_71899 = zzero_leq_i_p_m_t_s_71894 && y_71898;
        bool y_71900 = i_lte_j_71897 && y_71899;
        bool forwards_ok_71901 = zzero_lte_i_71896 && y_71900;
        bool ok_or_empty_71902 = empty_slice_64051 || forwards_ok_71901;
        bool index_certs_71903;
        
        if (!ok_or_empty_71902) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_71891, ":",
                          (long long) j_71892,
                          "] out of bounds for array of shape [",
                          (long long) n_64028, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_71904;
        int64_t flat_tid_66027 = (int64_t) 0;
        int32_t num_tasks_72483;
        struct futhark_mc_task_76514 futhark_mc_task_76514;
        
        futhark_mc_task_76514.ctx = ctx;
        futhark_mc_task_76514.free_mem_69722 = mem_69722.mem;
        futhark_mc_task_76514.free_defunc_0_g_res_71870 = defunc_0_g_res_71870;
        futhark_mc_task_76514.free_max_res_71891 = max_res_71891;
        futhark_mc_task_76514.retval_defunc_2_reduce_res_71904 =
            &defunc_2_reduce_res_71904;
        
        struct scheduler_segop futhark_mc_task_76514_task;
        
        futhark_mc_task_76514_task.args = &futhark_mc_task_76514;
        futhark_mc_task_76514_task.top_level_fn = futhark_mc_segred_task_76515;
        futhark_mc_task_76514_task.name = "futhark_mc_segred_task_76515";
        futhark_mc_task_76514_task.iterations = min_res_64046;
        futhark_mc_task_76514_task.task_time =
            &ctx->futhark_mc_segred_task_76515_total_time;
        futhark_mc_task_76514_task.task_iter =
            &ctx->futhark_mc_segred_task_76515_total_iter;
        futhark_mc_task_76514_task.sched = STATIC;
        futhark_mc_task_76514_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76515_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76514_task);
        
        if (futhark_mc_segred_task_76515_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_71912;
        int64_t idx_71913;
        int64_t idx_71914;
        int64_t idx_71915;
        int64_t best_idx_72390;
        int64_t last_idx_72391;
        int64_t best_sum_72392;
        int64_t curr_sum_72393;
        
        best_idx_72390 = max_res_71891;
        last_idx_72391 = max_res_71891;
        best_sum_72392 = defunc_2_reduce_res_71904;
        curr_sum_72393 = defunc_2_reduce_res_71904;
        for (int64_t j_72389 = 0; j_72389 < min_res_64046; j_72389++) {
            int64_t new_idx_72394 = add64(max_res_71891, j_72389);
            int64_t x_72395 = add64(min_res_64046, new_idx_72394);
            bool cond_72396 = slt64(last_res_66216, x_72395);
            int64_t new_sum_72397;
            
            if (cond_72396) {
                new_sum_72397 = (int64_t) 9223372036854775807;
            } else {
                bool x_72398 = sle64((int64_t) 0, last_idx_72391);
                bool y_72399 = slt64(last_idx_72391, n_64028);
                bool bounds_check_72400 = x_72398 && y_72399;
                bool index_certs_72401;
                
                if (!bounds_check_72400) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_72391,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_72402 = ((int64_t *) mem_69722.mem)[last_idx_72391];
                int64_t binop_p_72403 = sub64(defunc_0_g_res_71870, y_72402);
                int64_t defunc_0_f_res_72404 = abs64(binop_p_72403);
                int64_t x_72405 = sub64(curr_sum_72393, defunc_0_f_res_72404);
                int64_t min_arg_72406 = add64(min_res_64046, last_idx_72391);
                int64_t min_res_72407 = smin64(i_64040, min_arg_72406);
                bool x_72408 = sle64((int64_t) 0, min_res_72407);
                bool y_72409 = slt64(min_res_72407, n_64028);
                bool bounds_check_72410 = x_72408 && y_72409;
                bool index_certs_72411;
                
                if (!bounds_check_72410) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_72407,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_72412 = ((int64_t *) mem_69722.mem)[min_res_72407];
                int64_t binop_p_72413 = sub64(defunc_0_g_res_71870, y_72412);
                int64_t defunc_0_f_res_72414 = abs64(binop_p_72413);
                int64_t new_sum_f_res_72415 = add64(x_72405,
                                                    defunc_0_f_res_72414);
                
                new_sum_72397 = new_sum_f_res_72415;
            }
            
            bool cond_72416 = sle64(new_sum_72397, best_sum_72392);
            int64_t loopres_72417;
            
            if (cond_72416) {
                loopres_72417 = new_idx_72394;
            } else {
                loopres_72417 = best_idx_72390;
            }
            
            int64_t loopres_72418;
            
            if (cond_72416) {
                loopres_72418 = new_sum_72397;
            } else {
                loopres_72418 = best_sum_72392;
            }
            
            int64_t best_idx_tmp_72492 = loopres_72417;
            int64_t last_idx_tmp_72493 = new_idx_72394;
            int64_t best_sum_tmp_72494 = loopres_72418;
            int64_t curr_sum_tmp_72495 = new_sum_72397;
            
            best_idx_72390 = best_idx_tmp_72492;
            last_idx_72391 = last_idx_tmp_72493;
            best_sum_72392 = best_sum_tmp_72494;
            curr_sum_72393 = curr_sum_tmp_72495;
        }
        idx_71912 = best_idx_72390;
        idx_71913 = last_idx_72391;
        idx_71914 = best_sum_72392;
        idx_71915 = curr_sum_72393;
        
        int64_t min_res_71946 = smin64(min_arg_66228, idx_71912);
        int64_t x_71947 = add64(min_res_64046, min_res_71946);
        int64_t r_71948 = sub64(x_71947, (int64_t) 1);
        bool x_71949 = sle64((int64_t) 0, r_71948);
        bool y_71950 = slt64(r_71948, n_64028);
        bool bounds_check_71951 = x_71949 && y_71950;
        bool index_certs_71952;
        
        if (!bounds_check_71951) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_71948,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_71953 = ((int64_t *) mem_69713.mem)[r_71948];
        int64_t abs_arg_71954 = sub64(x_71953, min_res_71869);
        int64_t abs_res_71955 = abs64(abs_arg_71954);
        bool x_71956 = sle64((int64_t) 0, min_res_71946);
        bool y_71957 = slt64(min_res_71946, n_64028);
        bool bounds_check_71958 = x_71956 && y_71957;
        bool index_certs_71959;
        
        if (!bounds_check_71958) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_71946,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_71960 = ((int64_t *) mem_69713.mem)[min_res_71946];
        int64_t abs_arg_71961 = sub64(x_71960, min_res_71869);
        int64_t abs_res_71962 = abs64(abs_arg_71961);
        int64_t max_res_71963 = smax64(abs_res_71955, abs_res_71962);
        float defunc_0_f_res_71964 = sitofp_i64_f32(max_res_71963);
        float defunc_1_f_res_71965 = max_res_66232 + defunc_0_f_res_71964;
        float defunc_0_f_res_71966 = sitofp_i64_f32(min_res_71869);
        float defunc_2_reduce_res_71967;
        float defunc_2_reduce_res_71968;
        float defunc_2_reduce_res_71969;
        int64_t flat_tid_66029 = (int64_t) 0;
        int32_t num_tasks_72496;
        struct futhark_mc_task_76519 futhark_mc_task_76519;
        
        futhark_mc_task_76519.ctx = ctx;
        futhark_mc_task_76519.free_last_res_66216 = last_res_66216;
        futhark_mc_task_76519.free_mem_69716 = mem_69716.mem;
        futhark_mc_task_76519.free_mem_69725 = mem_69725.mem;
        futhark_mc_task_76519.free_min_res_71946 = min_res_71946;
        futhark_mc_task_76519.free_defunc_1_f_res_71965 = defunc_1_f_res_71965;
        futhark_mc_task_76519.free_defunc_0_f_res_71966 = defunc_0_f_res_71966;
        futhark_mc_task_76519.retval_defunc_2_reduce_res_71967 =
            &defunc_2_reduce_res_71967;
        futhark_mc_task_76519.retval_defunc_2_reduce_res_71968 =
            &defunc_2_reduce_res_71968;
        futhark_mc_task_76519.retval_defunc_2_reduce_res_71969 =
            &defunc_2_reduce_res_71969;
        
        struct scheduler_segop futhark_mc_task_76519_task;
        
        futhark_mc_task_76519_task.args = &futhark_mc_task_76519;
        futhark_mc_task_76519_task.top_level_fn = futhark_mc_segred_task_76520;
        futhark_mc_task_76519_task.name = "futhark_mc_segred_task_76520";
        futhark_mc_task_76519_task.iterations = q_64030;
        futhark_mc_task_76519_task.task_time =
            &ctx->futhark_mc_segred_task_76520_total_time;
        futhark_mc_task_76519_task.task_iter =
            &ctx->futhark_mc_segred_task_76520_total_iter;
        futhark_mc_task_76519_task.sched = STATIC;
        futhark_mc_task_76519_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76520_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76519_task);
        
        if (futhark_mc_segred_task_76520_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_71996 = defunc_2_reduce_res_71967 * defunc_2_reduce_res_71969;
        float y_71997 = defunc_2_reduce_res_71968 * defunc_2_reduce_res_71968;
        float y_71998 = x_71996 - y_71997;
        float det1_71999 = 1.0F / y_71998;
        float a11_72000 = defunc_2_reduce_res_71969 * det1_71999;
        float negate_arg_72001 = defunc_2_reduce_res_71968 * det1_71999;
        float b11_72002 = 0.0F - negate_arg_72001;
        float c11_72003 = defunc_2_reduce_res_71967 * det1_71999;
        float defunc_2_reduce_res_72004;
        float defunc_2_reduce_res_72005;
        int64_t flat_tid_66031 = (int64_t) 0;
        int32_t num_tasks_72517;
        struct futhark_mc_task_76526 futhark_mc_task_76526;
        
        futhark_mc_task_76526.ctx = ctx;
        futhark_mc_task_76526.free_last_res_66216 = last_res_66216;
        futhark_mc_task_76526.free_mem_69710 = mem_69710.mem;
        futhark_mc_task_76526.free_mem_69716 = mem_69716.mem;
        futhark_mc_task_76526.free_mem_69725 = mem_69725.mem;
        futhark_mc_task_76526.free_min_res_71946 = min_res_71946;
        futhark_mc_task_76526.free_defunc_1_f_res_71965 = defunc_1_f_res_71965;
        futhark_mc_task_76526.free_defunc_0_f_res_71966 = defunc_0_f_res_71966;
        futhark_mc_task_76526.free_a11_72000 = a11_72000;
        futhark_mc_task_76526.free_b11_72002 = b11_72002;
        futhark_mc_task_76526.free_c11_72003 = c11_72003;
        futhark_mc_task_76526.retval_defunc_2_reduce_res_72004 =
            &defunc_2_reduce_res_72004;
        futhark_mc_task_76526.retval_defunc_2_reduce_res_72005 =
            &defunc_2_reduce_res_72005;
        
        struct scheduler_segop futhark_mc_task_76526_task;
        
        futhark_mc_task_76526_task.args = &futhark_mc_task_76526;
        futhark_mc_task_76526_task.top_level_fn = futhark_mc_segred_task_76527;
        futhark_mc_task_76526_task.name = "futhark_mc_segred_task_76527";
        futhark_mc_task_76526_task.iterations = q_64030;
        futhark_mc_task_76526_task.task_time =
            &ctx->futhark_mc_segred_task_76527_total_time;
        futhark_mc_task_76526_task.task_iter =
            &ctx->futhark_mc_segred_task_76527_total_iter;
        futhark_mc_task_76526_task.sched = STATIC;
        futhark_mc_task_76526_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76527_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76526_task);
        
        if (futhark_mc_segred_task_76527_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_69728.mem)[gtid_66026] = defunc_2_reduce_res_72004;
        ((float *) mem_69731.mem)[gtid_66026] = defunc_2_reduce_res_72005;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76513_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76513_end -
                 futhark_mc_segmap_parloop_76513_start;
        
        ctx->futhark_mc_segmap_parloop_76513_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76513_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76513_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76511(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66025 = tid;
    int num_tasks_72239 = info.nsubtasks;
    struct futhark_mc_task_76507 *futhark_mc_task_76507 =
                                 (struct futhark_mc_task_76507 *) args;
    struct futhark_context *ctx = futhark_mc_task_76507->ctx;
    uint64_t futhark_mc_segmap_nested_task_76511_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76511_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76507->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76507->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76507->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76507->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76507->free_i_64040;
    bool x_64041 = futhark_mc_task_76507->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76507->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76507->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76507->free_m_64052;
    int64_t last_res_66216 = futhark_mc_task_76507->free_last_res_66216;
    int64_t min_arg_66228 = futhark_mc_task_76507->free_min_arg_66228;
    float max_res_66232 = futhark_mc_task_76507->free_max_res_66232;
    struct memblock mem_69710 = {.desc ="mem_69710", .mem =
                                 futhark_mc_task_76507->free_mem_69710, .size =
                                 0, .references =NULL};
    struct memblock mem_69713 = {.desc ="mem_69713", .mem =
                                 futhark_mc_task_76507->free_mem_69713, .size =
                                 0, .references =NULL};
    struct memblock mem_69716 = {.desc ="mem_69716", .mem =
                                 futhark_mc_task_76507->free_mem_69716, .size =
                                 0, .references =NULL};
    struct memblock mem_69719 = {.desc ="mem_69719", .mem =
                                 futhark_mc_task_76507->free_mem_69719, .size =
                                 0, .references =NULL};
    struct memblock mem_69722 = {.desc ="mem_69722", .mem =
                                 futhark_mc_task_76507->free_mem_69722, .size =
                                 0, .references =NULL};
    struct memblock mem_69725 = {.desc ="mem_69725", .mem =
                                 futhark_mc_task_76507->free_mem_69725, .size =
                                 0, .references =NULL};
    struct memblock mem_69728 = {.desc ="mem_69728", .mem =
                                 futhark_mc_task_76507->free_mem_69728, .size =
                                 0, .references =NULL};
    struct memblock mem_69731 = {.desc ="mem_69731", .mem =
                                 futhark_mc_task_76507->free_mem_69731, .size =
                                 0, .references =NULL};
    int64_t iter_72365;
    struct futhark_mc_segmap_parloop_struct_76512
    futhark_mc_segmap_parloop_struct_76512;
    
    futhark_mc_segmap_parloop_struct_76512.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76512.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76512.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76512.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76512.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76512.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76512.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76512.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76512.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76512.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76512.free_last_res_66216 = last_res_66216;
    futhark_mc_segmap_parloop_struct_76512.free_min_arg_66228 = min_arg_66228;
    futhark_mc_segmap_parloop_struct_76512.free_max_res_66232 = max_res_66232;
    futhark_mc_segmap_parloop_struct_76512.free_mem_69710 = mem_69710.mem;
    futhark_mc_segmap_parloop_struct_76512.free_mem_69713 = mem_69713.mem;
    futhark_mc_segmap_parloop_struct_76512.free_mem_69716 = mem_69716.mem;
    futhark_mc_segmap_parloop_struct_76512.free_mem_69719 = mem_69719.mem;
    futhark_mc_segmap_parloop_struct_76512.free_mem_69722 = mem_69722.mem;
    futhark_mc_segmap_parloop_struct_76512.free_mem_69725 = mem_69725.mem;
    futhark_mc_segmap_parloop_struct_76512.free_mem_69728 = mem_69728.mem;
    futhark_mc_segmap_parloop_struct_76512.free_mem_69731 = mem_69731.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76513_task;
    
    futhark_mc_segmap_parloop_76513_task.name =
        "futhark_mc_segmap_parloop_76513";
    futhark_mc_segmap_parloop_76513_task.fn = futhark_mc_segmap_parloop_76513;
    futhark_mc_segmap_parloop_76513_task.args =
        &futhark_mc_segmap_parloop_struct_76512;
    futhark_mc_segmap_parloop_76513_task.iterations = iterations;
    futhark_mc_segmap_parloop_76513_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76513_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76513_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76513_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76513_task);
    
    if (futhark_mc_segmap_parloop_76513_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76513_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76513_total_end -
                 futhark_mc_segmap_parloop_76513_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76513_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76513_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76513_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76511_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76511_end -
                 futhark_mc_segmap_nested_task_76511_start;
        
        ctx->futhark_mc_segmap_nested_task_76511_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76511_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76511_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76478(void *args, int64_t start,
                                           int64_t end, int flat_tid_66013,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76477
    *futhark_mc_segmap_parloop_struct_76477 =
    (struct futhark_mc_segmap_parloop_struct_76477 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76477->ctx;
    uint64_t futhark_mc_segmap_parloop_76478_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76478_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_segmap_parloop_struct_76477->free_m_64027;
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76477->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76477->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76477->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76477->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76477->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76477->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76477->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76477->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76477->free_m_64052;
    float i64_res_64053 =
          futhark_mc_segmap_parloop_struct_76477->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76477->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_69705 =
            futhark_mc_segmap_parloop_struct_76477->free_bytes_69705;
    int64_t bytes_69708 =
            futhark_mc_segmap_parloop_struct_76477->free_bytes_69708;
    int64_t bytes_69723 =
            futhark_mc_segmap_parloop_struct_76477->free_bytes_69723;
    int64_t bytes_69726 =
            futhark_mc_segmap_parloop_struct_76477->free_bytes_69726;
    struct memblock mem_69870 = {.desc ="mem_69870", .mem =
                                 futhark_mc_segmap_parloop_struct_76477->free_mem_69870,
                                 .size =0, .references =NULL};
    struct memblock mem_69874 = {.desc ="mem_69874", .mem =
                                 futhark_mc_segmap_parloop_struct_76477->free_mem_69874,
                                 .size =0, .references =NULL};
    size_t mem_69707_cached_sizze_76479 = 0;
    char *mem_69707 = NULL;
    size_t mem_69710_cached_sizze_76480 = 0;
    char *mem_69710 = NULL;
    size_t mem_69713_cached_sizze_76481 = 0;
    char *mem_69713 = NULL;
    size_t mem_69716_cached_sizze_76482 = 0;
    char *mem_69716 = NULL;
    size_t mem_69719_cached_sizze_76483 = 0;
    char *mem_69719 = NULL;
    size_t mem_69722_cached_sizze_76484 = 0;
    char *mem_69722 = NULL;
    size_t mem_69725_cached_sizze_76485 = 0;
    char *mem_69725 = NULL;
    size_t mem_69728_cached_sizze_76486 = 0;
    char *mem_69728 = NULL;
    size_t mem_69731_cached_sizze_76487 = 0;
    char *mem_69731 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71847 = start;
    
    if (mem_69707_cached_sizze_76479 < (size_t) bytes_69705) {
        mem_69707 = realloc(mem_69707, bytes_69705);
        mem_69707_cached_sizze_76479 = bytes_69705;
    }
    if (mem_69710_cached_sizze_76480 < (size_t) bytes_69708) {
        mem_69710 = realloc(mem_69710, bytes_69708);
        mem_69710_cached_sizze_76480 = bytes_69708;
    }
    if (mem_69713_cached_sizze_76481 < (size_t) bytes_69705) {
        mem_69713 = realloc(mem_69713, bytes_69705);
        mem_69713_cached_sizze_76481 = bytes_69705;
    }
    if (mem_69716_cached_sizze_76482 < (size_t) bytes_69708) {
        mem_69716 = realloc(mem_69716, bytes_69708);
        mem_69716_cached_sizze_76482 = bytes_69708;
    }
    if (mem_69719_cached_sizze_76483 < (size_t) bytes_69705) {
        mem_69719 = realloc(mem_69719, bytes_69705);
        mem_69719_cached_sizze_76483 = bytes_69705;
    }
    if (mem_69722_cached_sizze_76484 < (size_t) bytes_69705) {
        mem_69722 = realloc(mem_69722, bytes_69705);
        mem_69722_cached_sizze_76484 = bytes_69705;
    }
    if (mem_69725_cached_sizze_76485 < (size_t) bytes_69723) {
        mem_69725 = realloc(mem_69725, bytes_69723);
        mem_69725_cached_sizze_76485 = bytes_69723;
    }
    if (mem_69728_cached_sizze_76486 < (size_t) bytes_69726) {
        mem_69728 = realloc(mem_69728, bytes_69726);
        mem_69728_cached_sizze_76486 = bytes_69726;
    }
    if (mem_69731_cached_sizze_76487 < (size_t) bytes_69726) {
        mem_69731 = realloc(mem_69731, bytes_69726);
        mem_69731_cached_sizze_76487 = bytes_69726;
    }
    for (; iter_71847 < end; iter_71847++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72207 = m_64027;
        int64_t gtid_66014 = iter_71847;
        int64_t remnant_72208 = iter_71847 - gtid_66014;
        int64_t flat_tid_66015 = (int64_t) 0;
        int32_t num_tasks_72209;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_76488 futhark_mc_task_76488;
        
        futhark_mc_task_76488.ctx = ctx;
        futhark_mc_task_76488.free_n_64028 = n_64028;
        futhark_mc_task_76488.free_gtid_66014 = gtid_66014;
        futhark_mc_task_76488.free_Y_mem_69552 = Y_mem_69552.mem;
        futhark_mc_task_76488.free_mem_69707 = mem_69707;
        
        struct scheduler_segop futhark_mc_task_76488_task;
        
        futhark_mc_task_76488_task.args = &futhark_mc_task_76488;
        futhark_mc_task_76488_task.top_level_fn = futhark_mc_segscan_task_76489;
        futhark_mc_task_76488_task.name = "futhark_mc_segscan_task_76489";
        futhark_mc_task_76488_task.iterations = n_64028;
        futhark_mc_task_76488_task.task_time =
            &ctx->futhark_mc_segscan_task_76489_total_time;
        futhark_mc_task_76488_task.task_iter =
            &ctx->futhark_mc_segscan_task_76489_total_iter;
        futhark_mc_task_76488_task.sched = STATIC;
        futhark_mc_task_76488_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_76489_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76488_task);
        
        if (futhark_mc_segscan_task_76489_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_66216 = ((int64_t *) mem_69707)[i_64040];
        
        for (int64_t i_72223 = 0; i_72223 < n_64028; i_72223++) {
            ((float *) mem_69710)[i_72223] = 0.0F;
        }
        for (int64_t i_72224 = 0; i_72224 < n_64028; i_72224++) {
            ((int64_t *) mem_69713)[i_72224] = (int64_t) -1;
        }
        
        int64_t flat_tid_66017 = (int64_t) 0;
        int32_t num_tasks_72225;
        struct futhark_mc_task_76495 futhark_mc_task_76495;
        
        futhark_mc_task_76495.ctx = ctx;
        futhark_mc_task_76495.free_n_64028 = n_64028;
        futhark_mc_task_76495.free_gtid_66014 = gtid_66014;
        futhark_mc_task_76495.free_Y_mem_69552 = Y_mem_69552.mem;
        futhark_mc_task_76495.free_mem_69707 = mem_69707;
        futhark_mc_task_76495.free_mem_69710 = mem_69710;
        futhark_mc_task_76495.free_mem_69713 = mem_69713;
        
        struct scheduler_segop futhark_mc_task_76495_task;
        
        futhark_mc_task_76495_task.args = &futhark_mc_task_76495;
        futhark_mc_task_76495_task.top_level_fn = futhark_mc_segmap_task_76496;
        futhark_mc_task_76495_task.name = "futhark_mc_segmap_task_76496";
        futhark_mc_task_76495_task.iterations = n_64028;
        futhark_mc_task_76495_task.task_time =
            &ctx->futhark_mc_segmap_task_76496_total_time;
        futhark_mc_task_76495_task.task_iter =
            &ctx->futhark_mc_segmap_task_76496_total_iter;
        futhark_mc_task_76495_task.sched = STATIC;
        futhark_mc_task_76495_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76496_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76495_task);
        
        if (futhark_mc_segmap_task_76496_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_66228 = sub64(last_res_66216, min_res_64046);
        float i64_res_66229 = sitofp_i64_f32(last_res_66216);
        float x_66230 = i64_res_64053 - i64_res_66229;
        float max_arg_66231 = x_66230 / 2.0F;
        float max_res_66232 = fmax32(0.0F, max_arg_66231);
        int64_t flat_tid_66019 = (int64_t) 0;
        int32_t num_tasks_72231;
        struct futhark_mc_task_76499 futhark_mc_task_76499;
        
        futhark_mc_task_76499.ctx = ctx;
        futhark_mc_task_76499.free_n_64028 = n_64028;
        futhark_mc_task_76499.free_mem_69713 = mem_69713;
        futhark_mc_task_76499.free_mem_69716 = mem_69716;
        futhark_mc_task_76499.free_mem_69719 = mem_69719;
        futhark_mc_task_76499.free_mem_69722 = mem_69722;
        
        struct scheduler_segop futhark_mc_task_76499_task;
        
        futhark_mc_task_76499_task.args = &futhark_mc_task_76499;
        futhark_mc_task_76499_task.top_level_fn = futhark_mc_segmap_task_76500;
        futhark_mc_task_76499_task.name = "futhark_mc_segmap_task_76500";
        futhark_mc_task_76499_task.iterations = n_64028;
        futhark_mc_task_76499_task.task_time =
            &ctx->futhark_mc_segmap_task_76500_total_time;
        futhark_mc_task_76499_task.task_iter =
            &ctx->futhark_mc_segmap_task_76500_total_iter;
        futhark_mc_task_76499_task.sched = STATIC;
        futhark_mc_task_76499_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76500_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76499_task);
        
        if (futhark_mc_segmap_task_76500_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_66021 = (int64_t) 0;
        int32_t num_tasks_72235;
        struct futhark_mc_task_76503 futhark_mc_task_76503;
        
        futhark_mc_task_76503.ctx = ctx;
        futhark_mc_task_76503.free_q_64030 = q_64030;
        futhark_mc_task_76503.free_last_res_66216 = last_res_66216;
        futhark_mc_task_76503.free_mem_69725 = mem_69725;
        
        struct scheduler_segop futhark_mc_task_76503_task;
        
        futhark_mc_task_76503_task.args = &futhark_mc_task_76503;
        futhark_mc_task_76503_task.top_level_fn = futhark_mc_segmap_task_76504;
        futhark_mc_task_76503_task.name = "futhark_mc_segmap_task_76504";
        futhark_mc_task_76503_task.iterations = q_64030;
        futhark_mc_task_76503_task.task_time =
            &ctx->futhark_mc_segmap_task_76504_total_time;
        futhark_mc_task_76503_task.task_iter =
            &ctx->futhark_mc_segmap_task_76504_total_iter;
        futhark_mc_task_76503_task.sched = STATIC;
        futhark_mc_task_76503_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76504_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76503_task);
        
        if (futhark_mc_segmap_task_76504_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_66023 = (int64_t) 0;
        int32_t num_tasks_72239;
        int64_t flat_tid_66025 = (int64_t) 0;
        struct futhark_mc_task_76507 futhark_mc_task_76507;
        
        futhark_mc_task_76507.ctx = ctx;
        futhark_mc_task_76507.free_n_64028 = n_64028;
        futhark_mc_task_76507.free_q_64030 = q_64030;
        futhark_mc_task_76507.free_jump_64032 = jump_64032;
        futhark_mc_task_76507.free_n_m_64039 = n_m_64039;
        futhark_mc_task_76507.free_i_64040 = i_64040;
        futhark_mc_task_76507.free_x_64041 = x_64041;
        futhark_mc_task_76507.free_min_res_64046 = min_res_64046;
        futhark_mc_task_76507.free_empty_slice_64051 = empty_slice_64051;
        futhark_mc_task_76507.free_m_64052 = m_64052;
        futhark_mc_task_76507.free_last_res_66216 = last_res_66216;
        futhark_mc_task_76507.free_min_arg_66228 = min_arg_66228;
        futhark_mc_task_76507.free_max_res_66232 = max_res_66232;
        futhark_mc_task_76507.free_mem_69710 = mem_69710;
        futhark_mc_task_76507.free_mem_69713 = mem_69713;
        futhark_mc_task_76507.free_mem_69716 = mem_69716;
        futhark_mc_task_76507.free_mem_69719 = mem_69719;
        futhark_mc_task_76507.free_mem_69722 = mem_69722;
        futhark_mc_task_76507.free_mem_69725 = mem_69725;
        futhark_mc_task_76507.free_mem_69728 = mem_69728;
        futhark_mc_task_76507.free_mem_69731 = mem_69731;
        
        struct scheduler_segop futhark_mc_task_76507_task;
        
        futhark_mc_task_76507_task.args = &futhark_mc_task_76507;
        futhark_mc_task_76507_task.top_level_fn = futhark_mc_segmap_task_76508;
        futhark_mc_task_76507_task.name = "futhark_mc_segmap_task_76508";
        futhark_mc_task_76507_task.iterations = n_m_64039;
        futhark_mc_task_76507_task.task_time =
            &ctx->futhark_mc_segmap_task_76508_total_time;
        futhark_mc_task_76507_task.task_iter =
            &ctx->futhark_mc_segmap_task_76508_total_iter;
        futhark_mc_task_76507_task.sched = DYNAMIC;
        futhark_mc_task_76507_task.nested_fn =
            futhark_mc_segmap_nested_task_76511;
        
        int futhark_mc_segmap_task_76508_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76507_task);
        
        if (futhark_mc_segmap_task_76508_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_69870.mem + gtid_66014 * n_m_64039 * (int64_t) 4,
                mem_69728 + (int64_t) 0, n_m_64039 * (int64_t) 4);
        memmove(mem_69874.mem + gtid_66014 * n_m_64039 * (int64_t) 4,
                mem_69731 + (int64_t) 0, n_m_64039 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_69707);
    free(mem_69710);
    free(mem_69713);
    free(mem_69716);
    free(mem_69719);
    free(mem_69722);
    free(mem_69725);
    free(mem_69728);
    free(mem_69731);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76478_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76478_end -
                 futhark_mc_segmap_parloop_76478_start;
        
        ctx->futhark_mc_segmap_parloop_76478_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76478_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76478_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76476(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66013 = tid;
    int num_tasks_71607 = info.nsubtasks;
    struct futhark_mc_task_76463 *futhark_mc_task_76463 =
                                 (struct futhark_mc_task_76463 *) args;
    struct futhark_context *ctx = futhark_mc_task_76463->ctx;
    uint64_t futhark_mc_segmap_nested_task_76476_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76476_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_task_76463->free_m_64027;
    int64_t n_64028 = futhark_mc_task_76463->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76463->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76463->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76463->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76463->free_i_64040;
    bool x_64041 = futhark_mc_task_76463->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76463->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76463->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76463->free_m_64052;
    float i64_res_64053 = futhark_mc_task_76463->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76463->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_69705 = futhark_mc_task_76463->free_bytes_69705;
    int64_t bytes_69708 = futhark_mc_task_76463->free_bytes_69708;
    int64_t bytes_69723 = futhark_mc_task_76463->free_bytes_69723;
    int64_t bytes_69726 = futhark_mc_task_76463->free_bytes_69726;
    struct memblock mem_69870 = {.desc ="mem_69870", .mem =
                                 futhark_mc_task_76463->free_mem_69870, .size =
                                 0, .references =NULL};
    struct memblock mem_69874 = {.desc ="mem_69874", .mem =
                                 futhark_mc_task_76463->free_mem_69874, .size =
                                 0, .references =NULL};
    int64_t iter_71847;
    struct futhark_mc_segmap_parloop_struct_76477
    futhark_mc_segmap_parloop_struct_76477;
    
    futhark_mc_segmap_parloop_struct_76477.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76477.free_m_64027 = m_64027;
    futhark_mc_segmap_parloop_struct_76477.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76477.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76477.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76477.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76477.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76477.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76477.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76477.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76477.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76477.free_i64_res_64053 = i64_res_64053;
    futhark_mc_segmap_parloop_struct_76477.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76477.free_bytes_69705 = bytes_69705;
    futhark_mc_segmap_parloop_struct_76477.free_bytes_69708 = bytes_69708;
    futhark_mc_segmap_parloop_struct_76477.free_bytes_69723 = bytes_69723;
    futhark_mc_segmap_parloop_struct_76477.free_bytes_69726 = bytes_69726;
    futhark_mc_segmap_parloop_struct_76477.free_mem_69870 = mem_69870.mem;
    futhark_mc_segmap_parloop_struct_76477.free_mem_69874 = mem_69874.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76478_task;
    
    futhark_mc_segmap_parloop_76478_task.name =
        "futhark_mc_segmap_parloop_76478";
    futhark_mc_segmap_parloop_76478_task.fn = futhark_mc_segmap_parloop_76478;
    futhark_mc_segmap_parloop_76478_task.args =
        &futhark_mc_segmap_parloop_struct_76477;
    futhark_mc_segmap_parloop_76478_task.iterations = iterations;
    futhark_mc_segmap_parloop_76478_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76478_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76478_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76478_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76478_task);
    
    if (futhark_mc_segmap_parloop_76478_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76478_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76478_total_end -
                 futhark_mc_segmap_parloop_76478_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76478_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76478_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76478_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76476_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76476_end -
                 futhark_mc_segmap_nested_task_76476_start;
        
        ctx->futhark_mc_segmap_nested_task_76476_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76476_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76476_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76532 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_69875;
    int64_t free_bytes_69878;
    int64_t free_bytes_69893;
    int64_t free_bytes_69896;
    char *free_mem_70040;
    char *free_mem_70044;
};
struct futhark_mc_segmap_parloop_struct_76534 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_69875;
    int64_t free_bytes_69878;
    int64_t free_bytes_69893;
    int64_t free_bytes_69896;
    char *free_mem_70040;
    char *free_mem_70044;
};
static int futhark_mc_segmap_parloop_76535(void *args, int64_t start,
                                           int64_t end, int flat_tid_66595,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76534
    *futhark_mc_segmap_parloop_struct_76534 =
    (struct futhark_mc_segmap_parloop_struct_76534 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76534->ctx;
    uint64_t futhark_mc_segmap_parloop_76535_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76535_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_segmap_parloop_struct_76534->free_m_64027;
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76534->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76534->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76534->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76534->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76534->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76534->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76534->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76534->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76534->free_m_64052;
    float i64_res_64053 =
          futhark_mc_segmap_parloop_struct_76534->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76534->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_69875 =
            futhark_mc_segmap_parloop_struct_76534->free_bytes_69875;
    int64_t bytes_69878 =
            futhark_mc_segmap_parloop_struct_76534->free_bytes_69878;
    int64_t bytes_69893 =
            futhark_mc_segmap_parloop_struct_76534->free_bytes_69893;
    int64_t bytes_69896 =
            futhark_mc_segmap_parloop_struct_76534->free_bytes_69896;
    struct memblock mem_70040 = {.desc ="mem_70040", .mem =
                                 futhark_mc_segmap_parloop_struct_76534->free_mem_70040,
                                 .size =0, .references =NULL};
    struct memblock mem_70044 = {.desc ="mem_70044", .mem =
                                 futhark_mc_segmap_parloop_struct_76534->free_mem_70044,
                                 .size =0, .references =NULL};
    size_t mem_69904_cached_sizze_76536 = 0;
    char *mem_69904 = NULL;
    size_t mem_69919_cached_sizze_76537 = 0;
    char *mem_69919 = NULL;
    size_t mem_69922_cached_sizze_76538 = 0;
    char *mem_69922 = NULL;
    size_t mem_69949_cached_sizze_76539 = 0;
    char *mem_69949 = NULL;
    size_t mem_69952_cached_sizze_76540 = 0;
    char *mem_69952 = NULL;
    size_t mem_69955_cached_sizze_76541 = 0;
    char *mem_69955 = NULL;
    size_t mem_69994_cached_sizze_76542 = 0;
    char *mem_69994 = NULL;
    size_t mem_70009_cached_sizze_76543 = 0;
    char *mem_70009 = NULL;
    size_t mem_70012_cached_sizze_76544 = 0;
    char *mem_70012 = NULL;
    int64_t iterations = end - start;
    int64_t iter_72533 = start;
    
    if (mem_69904_cached_sizze_76536 < (size_t) bytes_69875) {
        mem_69904 = realloc(mem_69904, bytes_69875);
        mem_69904_cached_sizze_76536 = bytes_69875;
    }
    if (mem_69919_cached_sizze_76537 < (size_t) bytes_69878) {
        mem_69919 = realloc(mem_69919, bytes_69878);
        mem_69919_cached_sizze_76537 = bytes_69878;
    }
    if (mem_69922_cached_sizze_76538 < (size_t) bytes_69875) {
        mem_69922 = realloc(mem_69922, bytes_69875);
        mem_69922_cached_sizze_76538 = bytes_69875;
    }
    if (mem_69949_cached_sizze_76539 < (size_t) bytes_69878) {
        mem_69949 = realloc(mem_69949, bytes_69878);
        mem_69949_cached_sizze_76539 = bytes_69878;
    }
    if (mem_69952_cached_sizze_76540 < (size_t) bytes_69875) {
        mem_69952 = realloc(mem_69952, bytes_69875);
        mem_69952_cached_sizze_76540 = bytes_69875;
    }
    if (mem_69955_cached_sizze_76541 < (size_t) bytes_69875) {
        mem_69955 = realloc(mem_69955, bytes_69875);
        mem_69955_cached_sizze_76541 = bytes_69875;
    }
    if (mem_69994_cached_sizze_76542 < (size_t) bytes_69893) {
        mem_69994 = realloc(mem_69994, bytes_69893);
        mem_69994_cached_sizze_76542 = bytes_69893;
    }
    if (mem_70009_cached_sizze_76543 < (size_t) bytes_69896) {
        mem_70009 = realloc(mem_70009, bytes_69896);
        mem_70009_cached_sizze_76543 = bytes_69896;
    }
    if (mem_70012_cached_sizze_76544 < (size_t) bytes_69896) {
        mem_70012 = realloc(mem_70012, bytes_69896);
        mem_70012_cached_sizze_76544 = bytes_69896;
    }
    for (; iter_72533 < end; iter_72533++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72775 = m_64027;
        int64_t gtid_66596 = iter_72533;
        int64_t remnant_72776 = iter_72533 - gtid_66596;
        int64_t discard_69199;
        int64_t scanacc_72535 = (int64_t) 0;
        
        for (int64_t i_72534 = 0; i_72534 < n_64028; i_72534++) {
            float x_72537 = ((float *) Y_mem_69552.mem)[gtid_66596 * n_64028 +
                                                        i_72534];
            bool isnan_res_72538;
            
            isnan_res_72538 = futrts_isnan32(x_72537);
            
            bool defunc_0_p_res_72539 = !isnan_res_72538;
            int64_t defunc_0_f_res_72540 = btoi_bool_i64(defunc_0_p_res_72539);
            int64_t defunc_1_op_res_72541 = add64(defunc_0_f_res_72540,
                                                  scanacc_72535);
            
            ((int64_t *) mem_69904)[i_72534] = defunc_1_op_res_72541;
            
            int64_t scanacc_tmp_72777 = defunc_1_op_res_72541;
            
            scanacc_72535 = scanacc_tmp_72777;
        }
        discard_69199 = scanacc_72535;
        
        int64_t last_res_64506 = ((int64_t *) mem_69904)[i_64040];
        
        for (int64_t i_72779 = 0; i_72779 < n_64028; i_72779++) {
            ((float *) mem_69919)[i_72779] = 0.0F;
        }
        for (int64_t i_72780 = 0; i_72780 < n_64028; i_72780++) {
            ((int64_t *) mem_69922)[i_72780] = (int64_t) -1;
        }
        for (int64_t write_iter_72543 = 0; write_iter_72543 < n_64028;
             write_iter_72543++) {
            float write_iv_72546 = ((float *) Y_mem_69552.mem)[gtid_66596 *
                                                               n_64028 +
                                                               write_iter_72543];
            bool isnan_res_72547;
            
            isnan_res_72547 = futrts_isnan32(write_iv_72546);
            
            bool defunc_0_p_res_72548 = !isnan_res_72547;
            int64_t defunc_1_f_res_72549;
            
            if (defunc_0_p_res_72548) {
                int64_t write_iv_72550 =
                        ((int64_t *) mem_69904)[write_iter_72543];
                int64_t defunc_1_f_res_t_res_72551 = sub64(write_iv_72550,
                                                           (int64_t) 1);
                
                defunc_1_f_res_72549 = defunc_1_f_res_t_res_72551;
            } else {
                defunc_1_f_res_72549 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_72549) &&
                slt64(defunc_1_f_res_72549, n_64028)) {
                ((int64_t *) mem_69922)[defunc_1_f_res_72549] =
                    write_iter_72543;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_72549) &&
                slt64(defunc_1_f_res_72549, n_64028)) {
                memmove(mem_69919 + defunc_1_f_res_72549 * (int64_t) 4,
                        Y_mem_69552.mem + (gtid_66596 * n_64028 +
                                           write_iter_72543) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_64524 = sub64(last_res_64506, min_res_64046);
        float i64_res_64525 = sitofp_i64_f32(last_res_64506);
        float x_64526 = i64_res_64053 - i64_res_64525;
        float max_arg_64527 = x_64526 / 2.0F;
        float max_res_64528 = fmax32(0.0F, max_arg_64527);
        
        for (int64_t i_72555 = 0; i_72555 < n_64028; i_72555++) {
            int64_t x_72559 = ((int64_t *) mem_69922)[i_72555];
            int64_t defunc_0_f_res_72560 = add64((int64_t) 1, x_72559);
            bool cond_72561 = slt64(defunc_0_f_res_72560, (int64_t) 0);
            int64_t defunc_0_f_res_72562;
            
            if (cond_72561) {
                defunc_0_f_res_72562 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_72562 = defunc_0_f_res_72560;
            }
            
            float defunc_0_f_res_72563 = sitofp_i64_f32(x_72559);
            
            ((float *) mem_69949)[i_72555] = defunc_0_f_res_72563;
            ((int64_t *) mem_69952)[i_72555] = defunc_0_f_res_72562;
            ((int64_t *) mem_69955)[i_72555] = defunc_0_f_res_72560;
        }
        for (int64_t i_72567 = 0; i_72567 < q_64030; i_72567++) {
            bool cond_72569 = sle64(last_res_64506, i_72567);
            float defunc_0_f_res_72570;
            
            if (cond_72569) {
                defunc_0_f_res_72570 = 0.0F;
            } else {
                defunc_0_f_res_72570 = 1.0F;
            }
            ((float *) mem_69994)[i_72567] = defunc_0_f_res_72570;
        }
        for (int64_t i_72572 = 0; i_72572 < n_m_64039; i_72572++) {
            int64_t min_arg_72575 = mul64(jump_64032, i_72572);
            int64_t min_res_72576 = smin64(i_64040, min_arg_72575);
            int64_t defunc_0_g_res_72577 = add64((int64_t) 1, min_res_72576);
            bool nearest_idx_72578;
            int64_t nearest_idx_72579;
            int64_t nearest_idx_72580;
            bool loop_while_72581;
            int64_t low_72582;
            int64_t high_72583;
            
            loop_while_72581 = x_64041;
            low_72582 = (int64_t) 0;
            high_72583 = i_64040;
            while (loop_while_72581) {
                int64_t x_72584 = add64(low_72582, high_72583);
                int64_t mid_72585 = sdiv64(x_72584, (int64_t) 2);
                bool x_72586 = sle64((int64_t) 0, mid_72585);
                bool y_72587 = slt64(mid_72585, n_64028);
                bool bounds_check_72588 = x_72586 && y_72587;
                bool index_certs_72589;
                
                if (!bounds_check_72588) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_72585,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t x_72590 = ((int64_t *) mem_69952)[mid_72585];
                bool cond_72591 = sle64(defunc_0_g_res_72577, x_72590);
                int64_t loopres_72592;
                int64_t loopres_72593;
                
                if (cond_72591) {
                    int64_t loopres_t_res_72594 = sub64(mid_72585, (int64_t) 1);
                    
                    loopres_72592 = low_72582;
                    loopres_72593 = loopres_t_res_72594;
                } else {
                    int64_t loopres_f_res_72595 = add64((int64_t) 1, mid_72585);
                    
                    loopres_72592 = loopres_f_res_72595;
                    loopres_72593 = high_72583;
                }
                
                bool loop_cond_72596 = sle64(loopres_72592, loopres_72593);
                bool loop_while_tmp_72789 = loop_cond_72596;
                int64_t low_tmp_72790 = loopres_72592;
                int64_t high_tmp_72791 = loopres_72593;
                
                loop_while_72581 = loop_while_tmp_72789;
                low_72582 = low_tmp_72790;
                high_72583 = high_tmp_72791;
            }
            nearest_idx_72578 = loop_while_72581;
            nearest_idx_72579 = low_72582;
            nearest_idx_72580 = high_72583;
            
            int64_t max_arg_72597 = sub64(nearest_idx_72579, min_res_64046);
            int64_t max_res_72598 = smax64((int64_t) 0, max_arg_72597);
            int64_t j_72599 = add64(min_res_64046, max_res_72598);
            int64_t i_p_m_t_s_72600 = add64(m_64052, max_res_72598);
            bool zzero_leq_i_p_m_t_s_72601 = sle64((int64_t) 0,
                                                   i_p_m_t_s_72600);
            bool i_p_m_t_s_leq_w_72602 = slt64(i_p_m_t_s_72600, n_64028);
            bool zzero_lte_i_72603 = sle64((int64_t) 0, max_res_72598);
            bool i_lte_j_72604 = sle64(max_res_72598, j_72599);
            bool y_72605 = i_p_m_t_s_leq_w_72602 && zzero_lte_i_72603;
            bool y_72606 = zzero_leq_i_p_m_t_s_72601 && y_72605;
            bool y_72607 = i_lte_j_72604 && y_72606;
            bool forwards_ok_72608 = zzero_lte_i_72603 && y_72607;
            bool ok_or_empty_72609 = empty_slice_64051 || forwards_ok_72608;
            bool index_certs_72610;
            
            if (!ok_or_empty_72609) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_72598, ":",
                              (long long) j_72599,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_72611;
            int64_t redout_72613 = (int64_t) 0;
            
            for (int64_t i_72612 = 0; i_72612 < min_res_64046; i_72612++) {
                int64_t slice_72614 = max_res_72598 + i_72612;
                int64_t x_72615 = ((int64_t *) mem_69955)[slice_72614];
                int64_t abs_arg_72616 = sub64(x_72615, defunc_0_g_res_72577);
                int64_t abs_res_72617 = abs64(abs_arg_72616);
                int64_t defunc_1_op_res_72618 = add64(abs_res_72617,
                                                      redout_72613);
                int64_t redout_tmp_72792 = defunc_1_op_res_72618;
                
                redout_72613 = redout_tmp_72792;
            }
            defunc_2_reduce_res_72611 = redout_72613;
            
            int64_t idx_72619;
            int64_t idx_72620;
            int64_t idx_72621;
            int64_t idx_72622;
            int64_t best_idx_72624;
            int64_t last_idx_72625;
            int64_t best_sum_72626;
            int64_t curr_sum_72627;
            
            best_idx_72624 = max_res_72598;
            last_idx_72625 = max_res_72598;
            best_sum_72626 = defunc_2_reduce_res_72611;
            curr_sum_72627 = defunc_2_reduce_res_72611;
            for (int64_t j_72623 = 0; j_72623 < min_res_64046; j_72623++) {
                int64_t new_idx_72628 = add64(max_res_72598, j_72623);
                int64_t x_72629 = add64(min_res_64046, new_idx_72628);
                bool cond_72630 = slt64(last_res_64506, x_72629);
                int64_t new_sum_72631;
                
                if (cond_72630) {
                    new_sum_72631 = (int64_t) 9223372036854775807;
                } else {
                    bool x_72632 = sle64((int64_t) 0, last_idx_72625);
                    bool y_72633 = slt64(last_idx_72625, n_64028);
                    bool bounds_check_72634 = x_72632 && y_72633;
                    bool index_certs_72635;
                    
                    if (!bounds_check_72634) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_72625,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        return 1;
                    }
                    
                    int64_t y_72636 = ((int64_t *) mem_69955)[last_idx_72625];
                    int64_t binop_p_72637 = sub64(defunc_0_g_res_72577,
                                                  y_72636);
                    int64_t defunc_0_f_res_72638 = abs64(binop_p_72637);
                    int64_t x_72639 = sub64(curr_sum_72627,
                                            defunc_0_f_res_72638);
                    int64_t min_arg_72640 = add64(min_res_64046,
                                                  last_idx_72625);
                    int64_t min_res_72641 = smin64(i_64040, min_arg_72640);
                    bool x_72642 = sle64((int64_t) 0, min_res_72641);
                    bool y_72643 = slt64(min_res_72641, n_64028);
                    bool bounds_check_72644 = x_72642 && y_72643;
                    bool index_certs_72645;
                    
                    if (!bounds_check_72644) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_72641,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        return 1;
                    }
                    
                    int64_t y_72646 = ((int64_t *) mem_69955)[min_res_72641];
                    int64_t binop_p_72647 = sub64(defunc_0_g_res_72577,
                                                  y_72646);
                    int64_t defunc_0_f_res_72648 = abs64(binop_p_72647);
                    int64_t new_sum_f_res_72649 = add64(x_72639,
                                                        defunc_0_f_res_72648);
                    
                    new_sum_72631 = new_sum_f_res_72649;
                }
                
                bool cond_72650 = sle64(new_sum_72631, best_sum_72626);
                int64_t loopres_72651;
                
                if (cond_72650) {
                    loopres_72651 = new_idx_72628;
                } else {
                    loopres_72651 = best_idx_72624;
                }
                
                int64_t loopres_72652;
                
                if (cond_72650) {
                    loopres_72652 = new_sum_72631;
                } else {
                    loopres_72652 = best_sum_72626;
                }
                
                int64_t best_idx_tmp_72793 = loopres_72651;
                int64_t last_idx_tmp_72794 = new_idx_72628;
                int64_t best_sum_tmp_72795 = loopres_72652;
                int64_t curr_sum_tmp_72796 = new_sum_72631;
                
                best_idx_72624 = best_idx_tmp_72793;
                last_idx_72625 = last_idx_tmp_72794;
                best_sum_72626 = best_sum_tmp_72795;
                curr_sum_72627 = curr_sum_tmp_72796;
            }
            idx_72619 = best_idx_72624;
            idx_72620 = last_idx_72625;
            idx_72621 = best_sum_72626;
            idx_72622 = curr_sum_72627;
            
            int64_t min_res_72653 = smin64(min_arg_64524, idx_72619);
            int64_t x_72654 = add64(min_res_64046, min_res_72653);
            int64_t r_72655 = sub64(x_72654, (int64_t) 1);
            bool x_72656 = sle64((int64_t) 0, r_72655);
            bool y_72657 = slt64(r_72655, n_64028);
            bool bounds_check_72658 = x_72656 && y_72657;
            bool index_certs_72659;
            
            if (!bounds_check_72658) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_72655,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_72660 = ((int64_t *) mem_69922)[r_72655];
            int64_t abs_arg_72661 = sub64(x_72660, min_res_72576);
            int64_t abs_res_72662 = abs64(abs_arg_72661);
            bool x_72663 = sle64((int64_t) 0, min_res_72653);
            bool y_72664 = slt64(min_res_72653, n_64028);
            bool bounds_check_72665 = x_72663 && y_72664;
            bool index_certs_72666;
            
            if (!bounds_check_72665) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_72653,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_72667 = ((int64_t *) mem_69922)[min_res_72653];
            int64_t abs_arg_72668 = sub64(x_72667, min_res_72576);
            int64_t abs_res_72669 = abs64(abs_arg_72668);
            int64_t max_res_72670 = smax64(abs_res_72662, abs_res_72669);
            float defunc_0_f_res_72671 = sitofp_i64_f32(max_res_72670);
            float defunc_1_f_res_72672 = max_res_64528 + defunc_0_f_res_72671;
            float defunc_0_f_res_72673 = sitofp_i64_f32(min_res_72576);
            float defunc_2_reduce_res_72674;
            float defunc_2_reduce_res_72675;
            float defunc_2_reduce_res_72676;
            float defunc_2_reduce_res_72677;
            float defunc_2_reduce_res_72678;
            float redout_72680;
            float redout_72681;
            float redout_72682;
            float redout_72683;
            float redout_72684;
            
            redout_72680 = 0.0F;
            redout_72681 = 0.0F;
            redout_72682 = 0.0F;
            redout_72683 = 0.0F;
            redout_72684 = 0.0F;
            for (int64_t i_72679 = 0; i_72679 < q_64030; i_72679++) {
                float x_72685 = ((float *) mem_69994)[i_72679];
                bool cond_72686 = sle64(last_res_64506, i_72679);
                float defunc_0_f_res_72687;
                
                if (cond_72686) {
                    defunc_0_f_res_72687 = 0.0F;
                } else {
                    int64_t i_72688 = add64(min_res_72653, i_72679);
                    float x_72689 = ((float *) mem_69949)[i_72688];
                    float defunc_0_f_res_f_res_72690 = 1.0F + x_72689;
                    
                    defunc_0_f_res_72687 = defunc_0_f_res_f_res_72690;
                }
                
                float x_j_72691 = defunc_0_f_res_72687 - defunc_0_f_res_72673;
                float abs_res_72692 = (float) fabs(x_j_72691);
                float tmp1_72693 = abs_res_72692 / defunc_1_f_res_72672;
                float x_72694 = tmp1_72693 * tmp1_72693;
                float y_72695 = tmp1_72693 * x_72694;
                float tmp2_72696 = 1.0F - y_72695;
                float x_72697 = tmp2_72696 * tmp2_72696;
                float tmp3_72698 = tmp2_72696 * x_72697;
                float w_j_72699 = x_72685 * tmp3_72698;
                float xw_j_72700 = x_j_72691 * w_j_72699;
                float x2w_j_72701 = x_j_72691 * xw_j_72700;
                float x3w_j_72702 = x_j_72691 * x2w_j_72701;
                float x4w_j_72703 = x_j_72691 * x3w_j_72702;
                float defunc_1_op_res_72704 = w_j_72699 + redout_72680;
                float defunc_1_op_res_72705 = xw_j_72700 + redout_72681;
                float defunc_1_op_res_72706 = x2w_j_72701 + redout_72682;
                float defunc_1_op_res_72707 = x3w_j_72702 + redout_72683;
                float defunc_1_op_res_72708 = x4w_j_72703 + redout_72684;
                float redout_tmp_72797 = defunc_1_op_res_72704;
                float redout_tmp_72798 = defunc_1_op_res_72705;
                float redout_tmp_72799 = defunc_1_op_res_72706;
                float redout_tmp_72800 = defunc_1_op_res_72707;
                float redout_tmp_72801 = defunc_1_op_res_72708;
                
                redout_72680 = redout_tmp_72797;
                redout_72681 = redout_tmp_72798;
                redout_72682 = redout_tmp_72799;
                redout_72683 = redout_tmp_72800;
                redout_72684 = redout_tmp_72801;
            }
            defunc_2_reduce_res_72674 = redout_72680;
            defunc_2_reduce_res_72675 = redout_72681;
            defunc_2_reduce_res_72676 = redout_72682;
            defunc_2_reduce_res_72677 = redout_72683;
            defunc_2_reduce_res_72678 = redout_72684;
            
            float x_72709 = defunc_2_reduce_res_72676 *
                  defunc_2_reduce_res_72678;
            float y_72710 = defunc_2_reduce_res_72677 *
                  defunc_2_reduce_res_72677;
            float a12_72711 = x_72709 - y_72710;
            float x_72712 = defunc_2_reduce_res_72676 *
                  defunc_2_reduce_res_72677;
            float y_72713 = defunc_2_reduce_res_72675 *
                  defunc_2_reduce_res_72678;
            float b12_72714 = x_72712 - y_72713;
            float x_72715 = defunc_2_reduce_res_72675 *
                  defunc_2_reduce_res_72677;
            float y_72716 = defunc_2_reduce_res_72676 *
                  defunc_2_reduce_res_72676;
            float c12_72717 = x_72715 - y_72716;
            float x_72718 = defunc_2_reduce_res_72674 *
                  defunc_2_reduce_res_72678;
            float b2_72719 = x_72718 - y_72716;
            float x_72720 = defunc_2_reduce_res_72675 *
                  defunc_2_reduce_res_72676;
            float y_72721 = defunc_2_reduce_res_72674 *
                  defunc_2_reduce_res_72677;
            float c2_72722 = x_72720 - y_72721;
            float x_72723 = defunc_2_reduce_res_72674 * a12_72711;
            float y_72724 = defunc_2_reduce_res_72675 * b12_72714;
            float x_72725 = x_72723 + y_72724;
            float y_72726 = defunc_2_reduce_res_72676 * c12_72717;
            float y_72727 = x_72725 + y_72726;
            float det_72728 = 1.0F / y_72727;
            float a12_72729 = a12_72711 * det_72728;
            float b12_72730 = b12_72714 * det_72728;
            float c12_72731 = c12_72717 * det_72728;
            float b2_72732 = b2_72719 * det_72728;
            float c2_72733 = c2_72722 * det_72728;
            float defunc_2_reduce_res_72734;
            float defunc_2_reduce_res_72735;
            float redout_72737;
            float redout_72738;
            
            redout_72737 = 0.0F;
            redout_72738 = 0.0F;
            for (int64_t i_72736 = 0; i_72736 < q_64030; i_72736++) {
                float x_72739 = ((float *) mem_69994)[i_72736];
                bool cond_72740 = sle64(last_res_64506, i_72736);
                float defunc_0_f_res_72741;
                
                if (cond_72740) {
                    defunc_0_f_res_72741 = 0.0F;
                } else {
                    int64_t i_72742 = add64(min_res_72653, i_72736);
                    float x_72743 = ((float *) mem_69949)[i_72742];
                    float defunc_0_f_res_f_res_72744 = 1.0F + x_72743;
                    
                    defunc_0_f_res_72741 = defunc_0_f_res_f_res_72744;
                }
                
                float x_j_72745 = defunc_0_f_res_72741 - defunc_0_f_res_72673;
                float abs_res_72746 = (float) fabs(x_j_72745);
                float tmp1_72747 = abs_res_72746 / defunc_1_f_res_72672;
                float x_72748 = tmp1_72747 * tmp1_72747;
                float y_72749 = tmp1_72747 * x_72748;
                float tmp2_72750 = 1.0F - y_72749;
                float x_72751 = tmp2_72750 * tmp2_72750;
                float tmp3_72752 = tmp2_72750 * x_72751;
                float tmp4_72753 = x_72739 * tmp3_72752;
                float defunc_1_f_res_72754 = x_j_72745 * tmp4_72753;
                float defunc_1_f_res_72755 = x_j_72745 * defunc_1_f_res_72754;
                float defunc_0_f_res_72756;
                
                if (cond_72740) {
                    defunc_0_f_res_72756 = 0.0F;
                } else {
                    int64_t i_72757 = add64(min_res_72653, i_72736);
                    float x_72758 = ((float *) mem_69919)[i_72757];
                    
                    defunc_0_f_res_72756 = x_72758;
                }
                
                float x_72759 = a12_72729 * tmp4_72753;
                float y_72760 = b12_72730 * defunc_1_f_res_72754;
                float x_72761 = x_72759 + y_72760;
                float y_72762 = c12_72731 * defunc_1_f_res_72755;
                float x_72763 = x_72761 + y_72762;
                float defunc_9_fit_fun_res_72764 = defunc_0_f_res_72756 *
                      x_72763;
                float x_72765 = b12_72730 * tmp4_72753;
                float y_72766 = b2_72732 * defunc_1_f_res_72754;
                float x_72767 = x_72765 + y_72766;
                float y_72768 = c2_72733 * defunc_1_f_res_72755;
                float x_72769 = x_72767 + y_72768;
                float defunc_9_slope_fun_res_72770 = defunc_0_f_res_72756 *
                      x_72769;
                float defunc_1_op_res_72771 = defunc_9_fit_fun_res_72764 +
                      redout_72737;
                float defunc_1_op_res_72772 = defunc_9_slope_fun_res_72770 +
                      redout_72738;
                float redout_tmp_72802 = defunc_1_op_res_72771;
                float redout_tmp_72803 = defunc_1_op_res_72772;
                
                redout_72737 = redout_tmp_72802;
                redout_72738 = redout_tmp_72803;
            }
            defunc_2_reduce_res_72734 = redout_72737;
            defunc_2_reduce_res_72735 = redout_72738;
            ((float *) mem_70009)[i_72572] = defunc_2_reduce_res_72734;
            ((float *) mem_70012)[i_72572] = defunc_2_reduce_res_72735;
        }
        memmove(mem_70040.mem + gtid_66596 * n_m_64039 * (int64_t) 4,
                mem_70009 + (int64_t) 0, n_m_64039 * (int64_t) 4);
        memmove(mem_70044.mem + gtid_66596 * n_m_64039 * (int64_t) 4,
                mem_70012 + (int64_t) 0, n_m_64039 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_69904);
    free(mem_69919);
    free(mem_69922);
    free(mem_69949);
    free(mem_69952);
    free(mem_69955);
    free(mem_69994);
    free(mem_70009);
    free(mem_70012);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76535_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76535_end -
                 futhark_mc_segmap_parloop_76535_start;
        
        ctx->futhark_mc_segmap_parloop_76535_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76535_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76535_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76533(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66595 = tid;
    int num_tasks_72532 = info.nsubtasks;
    struct futhark_mc_task_76532 *futhark_mc_task_76532 =
                                 (struct futhark_mc_task_76532 *) args;
    struct futhark_context *ctx = futhark_mc_task_76532->ctx;
    uint64_t futhark_mc_segmap_task_76533_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76533_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_task_76532->free_m_64027;
    int64_t n_64028 = futhark_mc_task_76532->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76532->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76532->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76532->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76532->free_i_64040;
    bool x_64041 = futhark_mc_task_76532->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76532->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76532->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76532->free_m_64052;
    float i64_res_64053 = futhark_mc_task_76532->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76532->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_69875 = futhark_mc_task_76532->free_bytes_69875;
    int64_t bytes_69878 = futhark_mc_task_76532->free_bytes_69878;
    int64_t bytes_69893 = futhark_mc_task_76532->free_bytes_69893;
    int64_t bytes_69896 = futhark_mc_task_76532->free_bytes_69896;
    struct memblock mem_70040 = {.desc ="mem_70040", .mem =
                                 futhark_mc_task_76532->free_mem_70040, .size =
                                 0, .references =NULL};
    struct memblock mem_70044 = {.desc ="mem_70044", .mem =
                                 futhark_mc_task_76532->free_mem_70044, .size =
                                 0, .references =NULL};
    int64_t iter_72533;
    struct futhark_mc_segmap_parloop_struct_76534
    futhark_mc_segmap_parloop_struct_76534;
    
    futhark_mc_segmap_parloop_struct_76534.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76534.free_m_64027 = m_64027;
    futhark_mc_segmap_parloop_struct_76534.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76534.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76534.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76534.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76534.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76534.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76534.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76534.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76534.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76534.free_i64_res_64053 = i64_res_64053;
    futhark_mc_segmap_parloop_struct_76534.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76534.free_bytes_69875 = bytes_69875;
    futhark_mc_segmap_parloop_struct_76534.free_bytes_69878 = bytes_69878;
    futhark_mc_segmap_parloop_struct_76534.free_bytes_69893 = bytes_69893;
    futhark_mc_segmap_parloop_struct_76534.free_bytes_69896 = bytes_69896;
    futhark_mc_segmap_parloop_struct_76534.free_mem_70040 = mem_70040.mem;
    futhark_mc_segmap_parloop_struct_76534.free_mem_70044 = mem_70044.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76535_task;
    
    futhark_mc_segmap_parloop_76535_task.name =
        "futhark_mc_segmap_parloop_76535";
    futhark_mc_segmap_parloop_76535_task.fn = futhark_mc_segmap_parloop_76535;
    futhark_mc_segmap_parloop_76535_task.args =
        &futhark_mc_segmap_parloop_struct_76534;
    futhark_mc_segmap_parloop_76535_task.iterations = iterations;
    futhark_mc_segmap_parloop_76535_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76535_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76535_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76535_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76535_task);
    
    if (futhark_mc_segmap_parloop_76535_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76535_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76535_total_end -
                 futhark_mc_segmap_parloop_76535_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76535_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76535_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76535_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76533_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76533_end -
                 futhark_mc_segmap_task_76533_start;
        
        ctx->futhark_mc_segmap_task_76533_runs[tid]++;
        ctx->futhark_mc_segmap_task_76533_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76533_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76546 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_69875;
    int64_t free_bytes_69878;
    int64_t free_bytes_69893;
    int64_t free_bytes_69896;
    char *free_mem_70040;
    char *free_mem_70044;
};
struct futhark_mc_task_76557 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_66598;
    char *free_Y_mem_69552;
    char *free_mem_69877;
};
struct futhark_mc_scan_stage_1_parloop_struct_76560 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_66598;
    char *free_Y_mem_69552;
    char *free_mem_69877;
};
static int futhark_mc_scan_stage_1_parloop_76561(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_66599, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_76560
    *futhark_mc_scan_stage_1_parloop_struct_76560 =
    (struct futhark_mc_scan_stage_1_parloop_struct_76560 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_76560->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_76561_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76561_start = get_wall_time();
    
    int64_t n_64028 =
            futhark_mc_scan_stage_1_parloop_struct_76560->free_n_64028;
    int64_t gtid_66598 =
            futhark_mc_scan_stage_1_parloop_struct_76560->free_gtid_66598;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_76560->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69877 = {.desc ="mem_69877", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_76560->free_mem_69877,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73229 = start;
    int64_t x_72805;
    int64_t x_72806;
    
    x_72805 = (int64_t) 0;
    for (; iter_73229 < end; iter_73229++) {
        int64_t gtid_66600 = iter_73229;
        
        // stage 1 scan body
        {
            float x_72808 = ((float *) Y_mem_69552.mem)[gtid_66598 * n_64028 +
                                                        gtid_66600];
            bool isnan_res_72809;
            
            isnan_res_72809 = futrts_isnan32(x_72808);
            
            bool defunc_0_p_res_72810 = !isnan_res_72809;
            int64_t defunc_0_f_res_72811 = btoi_bool_i64(defunc_0_p_res_72810);
            
            // write mapped values results to memory
            { }
            x_72805 = x_72805;
            // Read next values
            {
                x_72806 = defunc_0_f_res_72811;
            }
            
            int64_t defunc_1_op_res_72807 = add64(x_72805, x_72806);
            
            ((int64_t *) mem_69877.mem)[gtid_66600] = defunc_1_op_res_72807;
            x_72805 = defunc_1_op_res_72807;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76561_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76561_end -
                 futhark_mc_scan_stage_1_parloop_76561_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_76561_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_76561_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_76561_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_76562 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_66598;
    char *free_Y_mem_69552;
    char *free_mem_69877;
};
static int futhark_mc_scan_stage_3_parloop_76563(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_66599, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_76562
    *futhark_mc_scan_stage_3_parloop_struct_76562 =
    (struct futhark_mc_scan_stage_3_parloop_struct_76562 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_76562->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_76563_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_76563_start = get_wall_time();
    
    int64_t n_64028 =
            futhark_mc_scan_stage_3_parloop_struct_76562->free_n_64028;
    int64_t gtid_66598 =
            futhark_mc_scan_stage_3_parloop_struct_76562->free_gtid_66598;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_76562->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69877 = {.desc ="mem_69877", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_76562->free_mem_69877,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73241 = start;
    int64_t x_73238;
    int64_t x_73239;
    
    if (iter_73241 == (int64_t) 0) {
        x_73238 = (int64_t) 0;
    } else {
        x_73238 = ((int64_t *) mem_69877.mem)[iter_73241 - (int64_t) 1];
    }
    for (; iter_73241 < end; iter_73241++) {
        int64_t gtid_66600 = iter_73241;
        
        // stage 3 scan body
        {
            float x_72808 = ((float *) Y_mem_69552.mem)[gtid_66598 * n_64028 +
                                                        gtid_66600];
            bool isnan_res_72809;
            
            isnan_res_72809 = futrts_isnan32(x_72808);
            
            bool defunc_0_p_res_72810 = !isnan_res_72809;
            int64_t defunc_0_f_res_72811 = btoi_bool_i64(defunc_0_p_res_72810);
            
            x_73238 = x_73238;
            x_73239 = defunc_0_f_res_72811;
            
            int64_t defunc_1_op_res_73240 = add64(x_73238, x_73239);
            
            ((int64_t *) mem_69877.mem)[gtid_66600] = defunc_1_op_res_73240;
            x_73238 = defunc_1_op_res_73240;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_76563_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76563_end -
                 futhark_mc_scan_stage_3_parloop_76563_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_76563_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_76563_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_76563_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_76558(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66599 = tid;
    int num_tasks_73228 = info.nsubtasks;
    struct futhark_mc_task_76557 *futhark_mc_task_76557 =
                                 (struct futhark_mc_task_76557 *) args;
    struct futhark_context *ctx = futhark_mc_task_76557->ctx;
    uint64_t futhark_mc_segscan_task_76558_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_76558_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76557->free_n_64028;
    int64_t gtid_66598 = futhark_mc_task_76557->free_gtid_66598;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76557->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69877 = {.desc ="mem_69877", .mem =
                                 futhark_mc_task_76557->free_mem_69877, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_73235_cached_sizze_76559 = 0;
    char *scan_stage_2_accum_mem_73235 = NULL;
    int64_t iter_73229;
    struct futhark_mc_scan_stage_1_parloop_struct_76560
    futhark_mc_scan_stage_1_parloop_struct_76560;
    
    futhark_mc_scan_stage_1_parloop_struct_76560.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_76560.free_n_64028 = n_64028;
    futhark_mc_scan_stage_1_parloop_struct_76560.free_gtid_66598 = gtid_66598;
    futhark_mc_scan_stage_1_parloop_struct_76560.free_Y_mem_69552 =
        Y_mem_69552.mem;
    futhark_mc_scan_stage_1_parloop_struct_76560.free_mem_69877 = mem_69877.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_76561_task;
    
    futhark_mc_scan_stage_1_parloop_76561_task.name =
        "futhark_mc_scan_stage_1_parloop_76561";
    futhark_mc_scan_stage_1_parloop_76561_task.fn =
        futhark_mc_scan_stage_1_parloop_76561;
    futhark_mc_scan_stage_1_parloop_76561_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_76560;
    futhark_mc_scan_stage_1_parloop_76561_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_76561_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_76561_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76561_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_76561_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_76561_task);
    
    if (futhark_mc_scan_stage_1_parloop_76561_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76561_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76561_total_end -
                 futhark_mc_scan_stage_1_parloop_76561_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76561_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76561_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76561_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_73228)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_73230;
        int64_t x_73231;
        int64_t offset_73233 = (int64_t) 0;
        int64_t offset_index_73234 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_73235_cached_sizze_76559 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_73235 = realloc(scan_stage_2_accum_mem_73235,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_73235_cached_sizze_76559 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_73235)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_73237 = 0; i_73237 < num_tasks_73228 - 1; i_73237++) {
            offset_73233 = squot64(n_64028, sext_i32_i64(num_tasks_73228));
            if (slt64(sext_i32_i64(i_73237), srem64(n_64028,
                                                    sext_i32_i64(num_tasks_73228)))) {
                offset_73233 += (int64_t) 1;
            }
            offset_index_73234 += offset_73233;
            
            int64_t gtid_66600 = offset_index_73234;
            float x_72808 = ((float *) Y_mem_69552.mem)[gtid_66598 * n_64028 +
                                                        gtid_66600];
            bool isnan_res_72809;
            
            isnan_res_72809 = futrts_isnan32(x_72808);
            
            bool defunc_0_p_res_72810 = !isnan_res_72809;
            int64_t defunc_0_f_res_72811 = btoi_bool_i64(defunc_0_p_res_72810);
            
            // Read carry in
            {
                x_73230 =
                    ((int64_t *) scan_stage_2_accum_mem_73235)[(int64_t) 0];
            }
            // Read next values
            {
                x_73231 = ((int64_t *) mem_69877.mem)[offset_index_73234 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_73232 = add64(x_73230, x_73231);
            
            ((int64_t *) mem_69877.mem)[offset_index_73234 - (int64_t) 1] =
                defunc_1_op_res_73232;
            ((int64_t *) scan_stage_2_accum_mem_73235)[(int64_t) 0] =
                defunc_1_op_res_73232;
        }
        
        int64_t iter_73241 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_76562
        futhark_mc_scan_stage_3_parloop_struct_76562;
        
        futhark_mc_scan_stage_3_parloop_struct_76562.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_76562.free_n_64028 = n_64028;
        futhark_mc_scan_stage_3_parloop_struct_76562.free_gtid_66598 =
            gtid_66598;
        futhark_mc_scan_stage_3_parloop_struct_76562.free_Y_mem_69552 =
            Y_mem_69552.mem;
        futhark_mc_scan_stage_3_parloop_struct_76562.free_mem_69877 =
            mem_69877.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_76563_task;
        
        futhark_mc_scan_stage_3_parloop_76563_task.name =
            "futhark_mc_scan_stage_3_parloop_76563";
        futhark_mc_scan_stage_3_parloop_76563_task.fn =
            futhark_mc_scan_stage_3_parloop_76563;
        futhark_mc_scan_stage_3_parloop_76563_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_76562;
        futhark_mc_scan_stage_3_parloop_76563_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_76563_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_76563_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_76563_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_76563_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_76563_task);
        
        if (futhark_mc_scan_stage_3_parloop_76563_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_76563_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76563_total_end -
                     futhark_mc_scan_stage_3_parloop_76563_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76563_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76563_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76563_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_73235);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_76558_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_76558_end -
                 futhark_mc_segscan_task_76558_start;
        
        ctx->futhark_mc_segscan_task_76558_runs[tid]++;
        ctx->futhark_mc_segscan_task_76558_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_76558_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76564 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_66598;
    char *free_Y_mem_69552;
    char *free_mem_69877;
    char *free_mem_69880;
    char *free_mem_69883;
};
struct futhark_mc_segmap_parloop_struct_76566 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_66598;
    char *free_Y_mem_69552;
    char *free_mem_69877;
    char *free_mem_69880;
    char *free_mem_69883;
};
static int futhark_mc_segmap_parloop_76567(void *args, int64_t start,
                                           int64_t end, int flat_tid_66601,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76566
    *futhark_mc_segmap_parloop_struct_76566 =
    (struct futhark_mc_segmap_parloop_struct_76566 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76566->ctx;
    uint64_t futhark_mc_segmap_parloop_76567_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76567_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76566->free_n_64028;
    int64_t gtid_66598 =
            futhark_mc_segmap_parloop_struct_76566->free_gtid_66598;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76566->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69877 = {.desc ="mem_69877", .mem =
                                 futhark_mc_segmap_parloop_struct_76566->free_mem_69877,
                                 .size =0, .references =NULL};
    struct memblock mem_69880 = {.desc ="mem_69880", .mem =
                                 futhark_mc_segmap_parloop_struct_76566->free_mem_69880,
                                 .size =0, .references =NULL};
    struct memblock mem_69883 = {.desc ="mem_69883", .mem =
                                 futhark_mc_segmap_parloop_struct_76566->free_mem_69883,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73245 = start;
    
    for (; iter_73245 < end; iter_73245++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73248 = n_64028;
        int64_t gtid_66602 = iter_73245;
        int64_t remnant_73249 = iter_73245 - gtid_66602;
        float x_72812 = ((float *) Y_mem_69552.mem)[gtid_66598 * n_64028 +
                                                    gtid_66602];
        bool isnan_res_72813;
        
        isnan_res_72813 = futrts_isnan32(x_72812);
        
        bool defunc_0_p_res_72814 = !isnan_res_72813;
        int64_t defunc_1_f_res_72815;
        
        if (defunc_0_p_res_72814) {
            int64_t x_73246 = ((int64_t *) mem_69877.mem)[gtid_66602];
            int64_t defunc_1_f_res_t_res_73247 = sub64(x_73246, (int64_t) 1);
            
            defunc_1_f_res_72815 = defunc_1_f_res_t_res_73247;
        } else {
            defunc_1_f_res_72815 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_72815) &&
            slt64(defunc_1_f_res_72815, n_64028)) {
            ((int64_t *) mem_69883.mem)[defunc_1_f_res_72815] = gtid_66602;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_72815) &&
            slt64(defunc_1_f_res_72815, n_64028)) {
            ((float *) mem_69880.mem)[defunc_1_f_res_72815] = x_72812;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76567_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76567_end -
                 futhark_mc_segmap_parloop_76567_start;
        
        ctx->futhark_mc_segmap_parloop_76567_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76567_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76567_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76565(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66601 = tid;
    int num_tasks_73244 = info.nsubtasks;
    struct futhark_mc_task_76564 *futhark_mc_task_76564 =
                                 (struct futhark_mc_task_76564 *) args;
    struct futhark_context *ctx = futhark_mc_task_76564->ctx;
    uint64_t futhark_mc_segmap_task_76565_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76565_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76564->free_n_64028;
    int64_t gtid_66598 = futhark_mc_task_76564->free_gtid_66598;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76564->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_69877 = {.desc ="mem_69877", .mem =
                                 futhark_mc_task_76564->free_mem_69877, .size =
                                 0, .references =NULL};
    struct memblock mem_69880 = {.desc ="mem_69880", .mem =
                                 futhark_mc_task_76564->free_mem_69880, .size =
                                 0, .references =NULL};
    struct memblock mem_69883 = {.desc ="mem_69883", .mem =
                                 futhark_mc_task_76564->free_mem_69883, .size =
                                 0, .references =NULL};
    int64_t iter_73245;
    struct futhark_mc_segmap_parloop_struct_76566
    futhark_mc_segmap_parloop_struct_76566;
    
    futhark_mc_segmap_parloop_struct_76566.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76566.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76566.free_gtid_66598 = gtid_66598;
    futhark_mc_segmap_parloop_struct_76566.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76566.free_mem_69877 = mem_69877.mem;
    futhark_mc_segmap_parloop_struct_76566.free_mem_69880 = mem_69880.mem;
    futhark_mc_segmap_parloop_struct_76566.free_mem_69883 = mem_69883.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76567_task;
    
    futhark_mc_segmap_parloop_76567_task.name =
        "futhark_mc_segmap_parloop_76567";
    futhark_mc_segmap_parloop_76567_task.fn = futhark_mc_segmap_parloop_76567;
    futhark_mc_segmap_parloop_76567_task.args =
        &futhark_mc_segmap_parloop_struct_76566;
    futhark_mc_segmap_parloop_76567_task.iterations = iterations;
    futhark_mc_segmap_parloop_76567_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76567_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76567_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76567_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76567_task);
    
    if (futhark_mc_segmap_parloop_76567_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76567_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76567_total_end -
                 futhark_mc_segmap_parloop_76567_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76567_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76567_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76567_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76565_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76565_end -
                 futhark_mc_segmap_task_76565_start;
        
        ctx->futhark_mc_segmap_task_76565_runs[tid]++;
        ctx->futhark_mc_segmap_task_76565_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76565_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76568 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    char *free_mem_69883;
    char *free_mem_69886;
    char *free_mem_69889;
    char *free_mem_69892;
};
struct futhark_mc_segmap_parloop_struct_76570 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    char *free_mem_69883;
    char *free_mem_69886;
    char *free_mem_69889;
    char *free_mem_69892;
};
static int futhark_mc_segmap_parloop_76571(void *args, int64_t start,
                                           int64_t end, int flat_tid_66603,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76570
    *futhark_mc_segmap_parloop_struct_76570 =
    (struct futhark_mc_segmap_parloop_struct_76570 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76570->ctx;
    uint64_t futhark_mc_segmap_parloop_76571_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76571_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76570->free_n_64028;
    struct memblock mem_69883 = {.desc ="mem_69883", .mem =
                                 futhark_mc_segmap_parloop_struct_76570->free_mem_69883,
                                 .size =0, .references =NULL};
    struct memblock mem_69886 = {.desc ="mem_69886", .mem =
                                 futhark_mc_segmap_parloop_struct_76570->free_mem_69886,
                                 .size =0, .references =NULL};
    struct memblock mem_69889 = {.desc ="mem_69889", .mem =
                                 futhark_mc_segmap_parloop_struct_76570->free_mem_69889,
                                 .size =0, .references =NULL};
    struct memblock mem_69892 = {.desc ="mem_69892", .mem =
                                 futhark_mc_segmap_parloop_struct_76570->free_mem_69892,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73251 = start;
    
    for (; iter_73251 < end; iter_73251++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73252 = n_64028;
        int64_t gtid_66604 = iter_73251;
        int64_t remnant_73253 = iter_73251 - gtid_66604;
        int64_t x_72818 = ((int64_t *) mem_69883.mem)[gtid_66604];
        int64_t defunc_0_f_res_72819 = add64((int64_t) 1, x_72818);
        bool cond_72820 = slt64(defunc_0_f_res_72819, (int64_t) 0);
        int64_t defunc_0_f_res_72821;
        
        if (cond_72820) {
            defunc_0_f_res_72821 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_72821 = defunc_0_f_res_72819;
        }
        
        float defunc_0_f_res_72822 = sitofp_i64_f32(x_72818);
        
        ((float *) mem_69886.mem)[gtid_66604] = defunc_0_f_res_72822;
        ((int64_t *) mem_69889.mem)[gtid_66604] = defunc_0_f_res_72821;
        ((int64_t *) mem_69892.mem)[gtid_66604] = defunc_0_f_res_72819;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76571_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76571_end -
                 futhark_mc_segmap_parloop_76571_start;
        
        ctx->futhark_mc_segmap_parloop_76571_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76571_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76571_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76569(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66603 = tid;
    int num_tasks_73250 = info.nsubtasks;
    struct futhark_mc_task_76568 *futhark_mc_task_76568 =
                                 (struct futhark_mc_task_76568 *) args;
    struct futhark_context *ctx = futhark_mc_task_76568->ctx;
    uint64_t futhark_mc_segmap_task_76569_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76569_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76568->free_n_64028;
    struct memblock mem_69883 = {.desc ="mem_69883", .mem =
                                 futhark_mc_task_76568->free_mem_69883, .size =
                                 0, .references =NULL};
    struct memblock mem_69886 = {.desc ="mem_69886", .mem =
                                 futhark_mc_task_76568->free_mem_69886, .size =
                                 0, .references =NULL};
    struct memblock mem_69889 = {.desc ="mem_69889", .mem =
                                 futhark_mc_task_76568->free_mem_69889, .size =
                                 0, .references =NULL};
    struct memblock mem_69892 = {.desc ="mem_69892", .mem =
                                 futhark_mc_task_76568->free_mem_69892, .size =
                                 0, .references =NULL};
    int64_t iter_73251;
    struct futhark_mc_segmap_parloop_struct_76570
    futhark_mc_segmap_parloop_struct_76570;
    
    futhark_mc_segmap_parloop_struct_76570.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76570.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76570.free_mem_69883 = mem_69883.mem;
    futhark_mc_segmap_parloop_struct_76570.free_mem_69886 = mem_69886.mem;
    futhark_mc_segmap_parloop_struct_76570.free_mem_69889 = mem_69889.mem;
    futhark_mc_segmap_parloop_struct_76570.free_mem_69892 = mem_69892.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76571_task;
    
    futhark_mc_segmap_parloop_76571_task.name =
        "futhark_mc_segmap_parloop_76571";
    futhark_mc_segmap_parloop_76571_task.fn = futhark_mc_segmap_parloop_76571;
    futhark_mc_segmap_parloop_76571_task.args =
        &futhark_mc_segmap_parloop_struct_76570;
    futhark_mc_segmap_parloop_76571_task.iterations = iterations;
    futhark_mc_segmap_parloop_76571_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76571_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76571_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76571_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76571_task);
    
    if (futhark_mc_segmap_parloop_76571_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76571_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76571_total_end -
                 futhark_mc_segmap_parloop_76571_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76571_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76571_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76571_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76569_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76569_end -
                 futhark_mc_segmap_task_76569_start;
        
        ctx->futhark_mc_segmap_task_76569_runs[tid]++;
        ctx->futhark_mc_segmap_task_76569_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76569_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76572 {
    struct futhark_context *ctx;
    int64_t free_q_64030;
    int64_t free_last_res_66832;
    char *free_mem_69895;
};
struct futhark_mc_segmap_parloop_struct_76574 {
    struct futhark_context *ctx;
    int64_t free_q_64030;
    int64_t free_last_res_66832;
    char *free_mem_69895;
};
static int futhark_mc_segmap_parloop_76575(void *args, int64_t start,
                                           int64_t end, int flat_tid_66605,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76574
    *futhark_mc_segmap_parloop_struct_76574 =
    (struct futhark_mc_segmap_parloop_struct_76574 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76574->ctx;
    uint64_t futhark_mc_segmap_parloop_76575_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76575_start = get_wall_time();
    
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76574->free_q_64030;
    int64_t last_res_66832 =
            futhark_mc_segmap_parloop_struct_76574->free_last_res_66832;
    struct memblock mem_69895 = {.desc ="mem_69895", .mem =
                                 futhark_mc_segmap_parloop_struct_76574->free_mem_69895,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73255 = start;
    
    for (; iter_73255 < end; iter_73255++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73256 = q_64030;
        int64_t gtid_66606 = iter_73255;
        int64_t remnant_73257 = iter_73255 - gtid_66606;
        bool cond_72823 = sle64(last_res_66832, gtid_66606);
        float defunc_0_f_res_72824;
        
        if (cond_72823) {
            defunc_0_f_res_72824 = 0.0F;
        } else {
            defunc_0_f_res_72824 = 1.0F;
        }
        ((float *) mem_69895.mem)[gtid_66606] = defunc_0_f_res_72824;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76575_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76575_end -
                 futhark_mc_segmap_parloop_76575_start;
        
        ctx->futhark_mc_segmap_parloop_76575_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76575_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76575_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76573(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66605 = tid;
    int num_tasks_73254 = info.nsubtasks;
    struct futhark_mc_task_76572 *futhark_mc_task_76572 =
                                 (struct futhark_mc_task_76572 *) args;
    struct futhark_context *ctx = futhark_mc_task_76572->ctx;
    uint64_t futhark_mc_segmap_task_76573_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76573_start = get_wall_time();
    
    int64_t q_64030 = futhark_mc_task_76572->free_q_64030;
    int64_t last_res_66832 = futhark_mc_task_76572->free_last_res_66832;
    struct memblock mem_69895 = {.desc ="mem_69895", .mem =
                                 futhark_mc_task_76572->free_mem_69895, .size =
                                 0, .references =NULL};
    int64_t iter_73255;
    struct futhark_mc_segmap_parloop_struct_76574
    futhark_mc_segmap_parloop_struct_76574;
    
    futhark_mc_segmap_parloop_struct_76574.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76574.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76574.free_last_res_66832 = last_res_66832;
    futhark_mc_segmap_parloop_struct_76574.free_mem_69895 = mem_69895.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76575_task;
    
    futhark_mc_segmap_parloop_76575_task.name =
        "futhark_mc_segmap_parloop_76575";
    futhark_mc_segmap_parloop_76575_task.fn = futhark_mc_segmap_parloop_76575;
    futhark_mc_segmap_parloop_76575_task.args =
        &futhark_mc_segmap_parloop_struct_76574;
    futhark_mc_segmap_parloop_76575_task.iterations = iterations;
    futhark_mc_segmap_parloop_76575_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76575_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76575_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76575_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76575_task);
    
    if (futhark_mc_segmap_parloop_76575_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76575_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76575_total_end -
                 futhark_mc_segmap_parloop_76575_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76575_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76575_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76575_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76573_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76573_end -
                 futhark_mc_segmap_task_76573_start;
        
        ctx->futhark_mc_segmap_task_76573_runs[tid]++;
        ctx->futhark_mc_segmap_task_76573_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76573_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76576 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_66832;
    int64_t free_min_arg_66844;
    float free_max_res_66848;
    char *free_mem_69880;
    char *free_mem_69883;
    char *free_mem_69886;
    char *free_mem_69889;
    char *free_mem_69892;
    char *free_mem_69895;
    char *free_mem_69898;
    char *free_mem_69901;
};
struct futhark_mc_segmap_parloop_struct_76578 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_66832;
    int64_t free_min_arg_66844;
    float free_max_res_66848;
    char *free_mem_69880;
    char *free_mem_69883;
    char *free_mem_69886;
    char *free_mem_69889;
    char *free_mem_69892;
    char *free_mem_69895;
    char *free_mem_69898;
    char *free_mem_69901;
};
static int futhark_mc_segmap_parloop_76579(void *args, int64_t start,
                                           int64_t end, int flat_tid_66607,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76578
    *futhark_mc_segmap_parloop_struct_76578 =
    (struct futhark_mc_segmap_parloop_struct_76578 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76578->ctx;
    uint64_t futhark_mc_segmap_parloop_76579_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76579_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76578->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76578->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76578->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76578->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76578->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76578->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76578->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76578->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76578->free_m_64052;
    int64_t last_res_66832 =
            futhark_mc_segmap_parloop_struct_76578->free_last_res_66832;
    int64_t min_arg_66844 =
            futhark_mc_segmap_parloop_struct_76578->free_min_arg_66844;
    float max_res_66848 =
          futhark_mc_segmap_parloop_struct_76578->free_max_res_66848;
    struct memblock mem_69880 = {.desc ="mem_69880", .mem =
                                 futhark_mc_segmap_parloop_struct_76578->free_mem_69880,
                                 .size =0, .references =NULL};
    struct memblock mem_69883 = {.desc ="mem_69883", .mem =
                                 futhark_mc_segmap_parloop_struct_76578->free_mem_69883,
                                 .size =0, .references =NULL};
    struct memblock mem_69886 = {.desc ="mem_69886", .mem =
                                 futhark_mc_segmap_parloop_struct_76578->free_mem_69886,
                                 .size =0, .references =NULL};
    struct memblock mem_69889 = {.desc ="mem_69889", .mem =
                                 futhark_mc_segmap_parloop_struct_76578->free_mem_69889,
                                 .size =0, .references =NULL};
    struct memblock mem_69892 = {.desc ="mem_69892", .mem =
                                 futhark_mc_segmap_parloop_struct_76578->free_mem_69892,
                                 .size =0, .references =NULL};
    struct memblock mem_69895 = {.desc ="mem_69895", .mem =
                                 futhark_mc_segmap_parloop_struct_76578->free_mem_69895,
                                 .size =0, .references =NULL};
    struct memblock mem_69898 = {.desc ="mem_69898", .mem =
                                 futhark_mc_segmap_parloop_struct_76578->free_mem_69898,
                                 .size =0, .references =NULL};
    struct memblock mem_69901 = {.desc ="mem_69901", .mem =
                                 futhark_mc_segmap_parloop_struct_76578->free_mem_69901,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73259 = start;
    
    for (; iter_73259 < end; iter_73259++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73380 = n_m_64039;
        int64_t gtid_66608 = iter_73259;
        int64_t remnant_73381 = iter_73259 - gtid_66608;
        int64_t min_arg_73028 = mul64(jump_64032, gtid_66608);
        int64_t min_res_73029 = smin64(i_64040, min_arg_73028);
        int64_t defunc_0_g_res_73030 = add64((int64_t) 1, min_res_73029);
        bool nearest_idx_73031;
        int64_t nearest_idx_73032;
        int64_t nearest_idx_73033;
        bool loop_while_73260;
        int64_t low_73261;
        int64_t high_73262;
        
        loop_while_73260 = x_64041;
        low_73261 = (int64_t) 0;
        high_73262 = i_64040;
        while (loop_while_73260) {
            int64_t x_73263 = add64(low_73261, high_73262);
            int64_t mid_73264 = sdiv64(x_73263, (int64_t) 2);
            bool x_73265 = sle64((int64_t) 0, mid_73264);
            bool y_73266 = slt64(mid_73264, n_64028);
            bool bounds_check_73267 = x_73265 && y_73266;
            bool index_certs_73268;
            
            if (!bounds_check_73267) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_73264,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_73269 = ((int64_t *) mem_69889.mem)[mid_73264];
            bool cond_73270 = sle64(defunc_0_g_res_73030, x_73269);
            int64_t loopres_73271;
            int64_t loopres_73272;
            
            if (cond_73270) {
                int64_t loopres_t_res_73273 = sub64(mid_73264, (int64_t) 1);
                
                loopres_73271 = low_73261;
                loopres_73272 = loopres_t_res_73273;
            } else {
                int64_t loopres_f_res_73274 = add64((int64_t) 1, mid_73264);
                
                loopres_73271 = loopres_f_res_73274;
                loopres_73272 = high_73262;
            }
            
            bool loop_cond_73275 = sle64(loopres_73271, loopres_73272);
            bool loop_while_tmp_73382 = loop_cond_73275;
            int64_t low_tmp_73383 = loopres_73271;
            int64_t high_tmp_73384 = loopres_73272;
            
            loop_while_73260 = loop_while_tmp_73382;
            low_73261 = low_tmp_73383;
            high_73262 = high_tmp_73384;
        }
        nearest_idx_73031 = loop_while_73260;
        nearest_idx_73032 = low_73261;
        nearest_idx_73033 = high_73262;
        
        int64_t max_arg_73050 = sub64(nearest_idx_73032, min_res_64046);
        int64_t max_res_73051 = smax64((int64_t) 0, max_arg_73050);
        int64_t j_73052 = add64(min_res_64046, max_res_73051);
        int64_t i_p_m_t_s_73053 = add64(m_64052, max_res_73051);
        bool zzero_leq_i_p_m_t_s_73054 = sle64((int64_t) 0, i_p_m_t_s_73053);
        bool i_p_m_t_s_leq_w_73055 = slt64(i_p_m_t_s_73053, n_64028);
        bool zzero_lte_i_73056 = sle64((int64_t) 0, max_res_73051);
        bool i_lte_j_73057 = sle64(max_res_73051, j_73052);
        bool y_73058 = i_p_m_t_s_leq_w_73055 && zzero_lte_i_73056;
        bool y_73059 = zzero_leq_i_p_m_t_s_73054 && y_73058;
        bool y_73060 = i_lte_j_73057 && y_73059;
        bool forwards_ok_73061 = zzero_lte_i_73056 && y_73060;
        bool ok_or_empty_73062 = empty_slice_64051 || forwards_ok_73061;
        bool index_certs_73063;
        
        if (!ok_or_empty_73062) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_73051, ":",
                          (long long) j_73052,
                          "] out of bounds for array of shape [",
                          (long long) n_64028, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_73064;
        int64_t redout_73277 = (int64_t) 0;
        
        for (int64_t i_73276 = 0; i_73276 < min_res_64046; i_73276++) {
            int64_t slice_73278 = max_res_73051 + i_73276;
            int64_t x_73279 = ((int64_t *) mem_69892.mem)[slice_73278];
            int64_t abs_arg_73280 = sub64(x_73279, defunc_0_g_res_73030);
            int64_t abs_res_73281 = abs64(abs_arg_73280);
            int64_t defunc_1_op_res_73282 = add64(abs_res_73281, redout_73277);
            int64_t redout_tmp_73385 = defunc_1_op_res_73282;
            
            redout_73277 = redout_tmp_73385;
        }
        defunc_2_reduce_res_73064 = redout_73277;
        
        int64_t idx_73072;
        int64_t idx_73073;
        int64_t idx_73074;
        int64_t idx_73075;
        int64_t best_idx_73284;
        int64_t last_idx_73285;
        int64_t best_sum_73286;
        int64_t curr_sum_73287;
        
        best_idx_73284 = max_res_73051;
        last_idx_73285 = max_res_73051;
        best_sum_73286 = defunc_2_reduce_res_73064;
        curr_sum_73287 = defunc_2_reduce_res_73064;
        for (int64_t j_73283 = 0; j_73283 < min_res_64046; j_73283++) {
            int64_t new_idx_73288 = add64(max_res_73051, j_73283);
            int64_t x_73289 = add64(min_res_64046, new_idx_73288);
            bool cond_73290 = slt64(last_res_66832, x_73289);
            int64_t new_sum_73291;
            
            if (cond_73290) {
                new_sum_73291 = (int64_t) 9223372036854775807;
            } else {
                bool x_73292 = sle64((int64_t) 0, last_idx_73285);
                bool y_73293 = slt64(last_idx_73285, n_64028);
                bool bounds_check_73294 = x_73292 && y_73293;
                bool index_certs_73295;
                
                if (!bounds_check_73294) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_73285,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_73296 = ((int64_t *) mem_69892.mem)[last_idx_73285];
                int64_t binop_p_73297 = sub64(defunc_0_g_res_73030, y_73296);
                int64_t defunc_0_f_res_73298 = abs64(binop_p_73297);
                int64_t x_73299 = sub64(curr_sum_73287, defunc_0_f_res_73298);
                int64_t min_arg_73300 = add64(min_res_64046, last_idx_73285);
                int64_t min_res_73301 = smin64(i_64040, min_arg_73300);
                bool x_73302 = sle64((int64_t) 0, min_res_73301);
                bool y_73303 = slt64(min_res_73301, n_64028);
                bool bounds_check_73304 = x_73302 && y_73303;
                bool index_certs_73305;
                
                if (!bounds_check_73304) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_73301,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_73306 = ((int64_t *) mem_69892.mem)[min_res_73301];
                int64_t binop_p_73307 = sub64(defunc_0_g_res_73030, y_73306);
                int64_t defunc_0_f_res_73308 = abs64(binop_p_73307);
                int64_t new_sum_f_res_73309 = add64(x_73299,
                                                    defunc_0_f_res_73308);
                
                new_sum_73291 = new_sum_f_res_73309;
            }
            
            bool cond_73310 = sle64(new_sum_73291, best_sum_73286);
            int64_t loopres_73311;
            
            if (cond_73310) {
                loopres_73311 = new_idx_73288;
            } else {
                loopres_73311 = best_idx_73284;
            }
            
            int64_t loopres_73312;
            
            if (cond_73310) {
                loopres_73312 = new_sum_73291;
            } else {
                loopres_73312 = best_sum_73286;
            }
            
            int64_t best_idx_tmp_73386 = loopres_73311;
            int64_t last_idx_tmp_73387 = new_idx_73288;
            int64_t best_sum_tmp_73388 = loopres_73312;
            int64_t curr_sum_tmp_73389 = new_sum_73291;
            
            best_idx_73284 = best_idx_tmp_73386;
            last_idx_73285 = last_idx_tmp_73387;
            best_sum_73286 = best_sum_tmp_73388;
            curr_sum_73287 = curr_sum_tmp_73389;
        }
        idx_73072 = best_idx_73284;
        idx_73073 = last_idx_73285;
        idx_73074 = best_sum_73286;
        idx_73075 = curr_sum_73287;
        
        int64_t min_res_73106 = smin64(min_arg_66844, idx_73072);
        int64_t x_73107 = add64(min_res_64046, min_res_73106);
        int64_t r_73108 = sub64(x_73107, (int64_t) 1);
        bool x_73109 = sle64((int64_t) 0, r_73108);
        bool y_73110 = slt64(r_73108, n_64028);
        bool bounds_check_73111 = x_73109 && y_73110;
        bool index_certs_73112;
        
        if (!bounds_check_73111) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_73108,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_73113 = ((int64_t *) mem_69883.mem)[r_73108];
        int64_t abs_arg_73114 = sub64(x_73113, min_res_73029);
        int64_t abs_res_73115 = abs64(abs_arg_73114);
        bool x_73116 = sle64((int64_t) 0, min_res_73106);
        bool y_73117 = slt64(min_res_73106, n_64028);
        bool bounds_check_73118 = x_73116 && y_73117;
        bool index_certs_73119;
        
        if (!bounds_check_73118) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_73106,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_73120 = ((int64_t *) mem_69883.mem)[min_res_73106];
        int64_t abs_arg_73121 = sub64(x_73120, min_res_73029);
        int64_t abs_res_73122 = abs64(abs_arg_73121);
        int64_t max_res_73123 = smax64(abs_res_73115, abs_res_73122);
        float defunc_0_f_res_73124 = sitofp_i64_f32(max_res_73123);
        float defunc_1_f_res_73125 = max_res_66848 + defunc_0_f_res_73124;
        float defunc_0_f_res_73126 = sitofp_i64_f32(min_res_73029);
        float defunc_2_reduce_res_73127;
        float defunc_2_reduce_res_73128;
        float defunc_2_reduce_res_73129;
        float defunc_2_reduce_res_73130;
        float defunc_2_reduce_res_73131;
        float redout_73314;
        float redout_73315;
        float redout_73316;
        float redout_73317;
        float redout_73318;
        
        redout_73314 = 0.0F;
        redout_73315 = 0.0F;
        redout_73316 = 0.0F;
        redout_73317 = 0.0F;
        redout_73318 = 0.0F;
        for (int64_t i_73313 = 0; i_73313 < q_64030; i_73313++) {
            float x_73319 = ((float *) mem_69895.mem)[i_73313];
            bool cond_73320 = sle64(last_res_66832, i_73313);
            float defunc_0_f_res_73321;
            
            if (cond_73320) {
                defunc_0_f_res_73321 = 0.0F;
            } else {
                int64_t i_73322 = add64(min_res_73106, i_73313);
                float x_73323 = ((float *) mem_69886.mem)[i_73322];
                float defunc_0_f_res_f_res_73324 = 1.0F + x_73323;
                
                defunc_0_f_res_73321 = defunc_0_f_res_f_res_73324;
            }
            
            float x_j_73325 = defunc_0_f_res_73321 - defunc_0_f_res_73126;
            float abs_res_73326 = (float) fabs(x_j_73325);
            float tmp1_73327 = abs_res_73326 / defunc_1_f_res_73125;
            float x_73328 = tmp1_73327 * tmp1_73327;
            float y_73329 = tmp1_73327 * x_73328;
            float tmp2_73330 = 1.0F - y_73329;
            float x_73331 = tmp2_73330 * tmp2_73330;
            float tmp3_73332 = tmp2_73330 * x_73331;
            float w_j_73333 = x_73319 * tmp3_73332;
            float xw_j_73334 = x_j_73325 * w_j_73333;
            float x2w_j_73335 = x_j_73325 * xw_j_73334;
            float x3w_j_73336 = x_j_73325 * x2w_j_73335;
            float x4w_j_73337 = x_j_73325 * x3w_j_73336;
            float defunc_1_op_res_73338 = w_j_73333 + redout_73314;
            float defunc_1_op_res_73339 = xw_j_73334 + redout_73315;
            float defunc_1_op_res_73340 = x2w_j_73335 + redout_73316;
            float defunc_1_op_res_73341 = x3w_j_73336 + redout_73317;
            float defunc_1_op_res_73342 = x4w_j_73337 + redout_73318;
            float redout_tmp_73390 = defunc_1_op_res_73338;
            float redout_tmp_73391 = defunc_1_op_res_73339;
            float redout_tmp_73392 = defunc_1_op_res_73340;
            float redout_tmp_73393 = defunc_1_op_res_73341;
            float redout_tmp_73394 = defunc_1_op_res_73342;
            
            redout_73314 = redout_tmp_73390;
            redout_73315 = redout_tmp_73391;
            redout_73316 = redout_tmp_73392;
            redout_73317 = redout_tmp_73393;
            redout_73318 = redout_tmp_73394;
        }
        defunc_2_reduce_res_73127 = redout_73314;
        defunc_2_reduce_res_73128 = redout_73315;
        defunc_2_reduce_res_73129 = redout_73316;
        defunc_2_reduce_res_73130 = redout_73317;
        defunc_2_reduce_res_73131 = redout_73318;
        
        float x_73162 = defunc_2_reduce_res_73129 * defunc_2_reduce_res_73131;
        float y_73163 = defunc_2_reduce_res_73130 * defunc_2_reduce_res_73130;
        float a12_73164 = x_73162 - y_73163;
        float x_73165 = defunc_2_reduce_res_73129 * defunc_2_reduce_res_73130;
        float y_73166 = defunc_2_reduce_res_73128 * defunc_2_reduce_res_73131;
        float b12_73167 = x_73165 - y_73166;
        float x_73168 = defunc_2_reduce_res_73128 * defunc_2_reduce_res_73130;
        float y_73169 = defunc_2_reduce_res_73129 * defunc_2_reduce_res_73129;
        float c12_73170 = x_73168 - y_73169;
        float x_73171 = defunc_2_reduce_res_73127 * defunc_2_reduce_res_73131;
        float b2_73172 = x_73171 - y_73169;
        float x_73173 = defunc_2_reduce_res_73128 * defunc_2_reduce_res_73129;
        float y_73174 = defunc_2_reduce_res_73127 * defunc_2_reduce_res_73130;
        float c2_73175 = x_73173 - y_73174;
        float x_73176 = defunc_2_reduce_res_73127 * a12_73164;
        float y_73177 = defunc_2_reduce_res_73128 * b12_73167;
        float x_73178 = x_73176 + y_73177;
        float y_73179 = defunc_2_reduce_res_73129 * c12_73170;
        float y_73180 = x_73178 + y_73179;
        float det_73181 = 1.0F / y_73180;
        float a12_73182 = a12_73164 * det_73181;
        float b12_73183 = b12_73167 * det_73181;
        float c12_73184 = c12_73170 * det_73181;
        float b2_73185 = b2_73172 * det_73181;
        float c2_73186 = c2_73175 * det_73181;
        float defunc_2_reduce_res_73187;
        float defunc_2_reduce_res_73188;
        float redout_73344;
        float redout_73345;
        
        redout_73344 = 0.0F;
        redout_73345 = 0.0F;
        for (int64_t i_73343 = 0; i_73343 < q_64030; i_73343++) {
            float x_73346 = ((float *) mem_69895.mem)[i_73343];
            bool cond_73347 = sle64(last_res_66832, i_73343);
            float defunc_0_f_res_73348;
            
            if (cond_73347) {
                defunc_0_f_res_73348 = 0.0F;
            } else {
                int64_t i_73349 = add64(min_res_73106, i_73343);
                float x_73350 = ((float *) mem_69886.mem)[i_73349];
                float defunc_0_f_res_f_res_73351 = 1.0F + x_73350;
                
                defunc_0_f_res_73348 = defunc_0_f_res_f_res_73351;
            }
            
            float x_j_73352 = defunc_0_f_res_73348 - defunc_0_f_res_73126;
            float abs_res_73353 = (float) fabs(x_j_73352);
            float tmp1_73354 = abs_res_73353 / defunc_1_f_res_73125;
            float x_73355 = tmp1_73354 * tmp1_73354;
            float y_73356 = tmp1_73354 * x_73355;
            float tmp2_73357 = 1.0F - y_73356;
            float x_73358 = tmp2_73357 * tmp2_73357;
            float tmp3_73359 = tmp2_73357 * x_73358;
            float tmp4_73360 = x_73346 * tmp3_73359;
            float defunc_1_f_res_73361 = x_j_73352 * tmp4_73360;
            float defunc_1_f_res_73362 = x_j_73352 * defunc_1_f_res_73361;
            float defunc_0_f_res_73363;
            
            if (cond_73347) {
                defunc_0_f_res_73363 = 0.0F;
            } else {
                int64_t i_73364 = add64(min_res_73106, i_73343);
                float x_73365 = ((float *) mem_69880.mem)[i_73364];
                
                defunc_0_f_res_73363 = x_73365;
            }
            
            float x_73366 = a12_73182 * tmp4_73360;
            float y_73367 = b12_73183 * defunc_1_f_res_73361;
            float x_73368 = x_73366 + y_73367;
            float y_73369 = c12_73184 * defunc_1_f_res_73362;
            float x_73370 = x_73368 + y_73369;
            float defunc_9_fit_fun_res_73371 = defunc_0_f_res_73363 * x_73370;
            float x_73372 = b12_73183 * tmp4_73360;
            float y_73373 = b2_73185 * defunc_1_f_res_73361;
            float x_73374 = x_73372 + y_73373;
            float y_73375 = c2_73186 * defunc_1_f_res_73362;
            float x_73376 = x_73374 + y_73375;
            float defunc_9_slope_fun_res_73377 = defunc_0_f_res_73363 * x_73376;
            float defunc_1_op_res_73378 = defunc_9_fit_fun_res_73371 +
                  redout_73344;
            float defunc_1_op_res_73379 = defunc_9_slope_fun_res_73377 +
                  redout_73345;
            float redout_tmp_73395 = defunc_1_op_res_73378;
            float redout_tmp_73396 = defunc_1_op_res_73379;
            
            redout_73344 = redout_tmp_73395;
            redout_73345 = redout_tmp_73396;
        }
        defunc_2_reduce_res_73187 = redout_73344;
        defunc_2_reduce_res_73188 = redout_73345;
        ((float *) mem_69898.mem)[gtid_66608] = defunc_2_reduce_res_73187;
        ((float *) mem_69901.mem)[gtid_66608] = defunc_2_reduce_res_73188;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76579_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76579_end -
                 futhark_mc_segmap_parloop_76579_start;
        
        ctx->futhark_mc_segmap_parloop_76579_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76579_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76579_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76577(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66607 = tid;
    int num_tasks_73258 = info.nsubtasks;
    struct futhark_mc_task_76576 *futhark_mc_task_76576 =
                                 (struct futhark_mc_task_76576 *) args;
    struct futhark_context *ctx = futhark_mc_task_76576->ctx;
    uint64_t futhark_mc_segmap_task_76577_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76577_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76576->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76576->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76576->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76576->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76576->free_i_64040;
    bool x_64041 = futhark_mc_task_76576->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76576->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76576->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76576->free_m_64052;
    int64_t last_res_66832 = futhark_mc_task_76576->free_last_res_66832;
    int64_t min_arg_66844 = futhark_mc_task_76576->free_min_arg_66844;
    float max_res_66848 = futhark_mc_task_76576->free_max_res_66848;
    struct memblock mem_69880 = {.desc ="mem_69880", .mem =
                                 futhark_mc_task_76576->free_mem_69880, .size =
                                 0, .references =NULL};
    struct memblock mem_69883 = {.desc ="mem_69883", .mem =
                                 futhark_mc_task_76576->free_mem_69883, .size =
                                 0, .references =NULL};
    struct memblock mem_69886 = {.desc ="mem_69886", .mem =
                                 futhark_mc_task_76576->free_mem_69886, .size =
                                 0, .references =NULL};
    struct memblock mem_69889 = {.desc ="mem_69889", .mem =
                                 futhark_mc_task_76576->free_mem_69889, .size =
                                 0, .references =NULL};
    struct memblock mem_69892 = {.desc ="mem_69892", .mem =
                                 futhark_mc_task_76576->free_mem_69892, .size =
                                 0, .references =NULL};
    struct memblock mem_69895 = {.desc ="mem_69895", .mem =
                                 futhark_mc_task_76576->free_mem_69895, .size =
                                 0, .references =NULL};
    struct memblock mem_69898 = {.desc ="mem_69898", .mem =
                                 futhark_mc_task_76576->free_mem_69898, .size =
                                 0, .references =NULL};
    struct memblock mem_69901 = {.desc ="mem_69901", .mem =
                                 futhark_mc_task_76576->free_mem_69901, .size =
                                 0, .references =NULL};
    int64_t iter_73259;
    struct futhark_mc_segmap_parloop_struct_76578
    futhark_mc_segmap_parloop_struct_76578;
    
    futhark_mc_segmap_parloop_struct_76578.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76578.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76578.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76578.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76578.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76578.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76578.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76578.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76578.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76578.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76578.free_last_res_66832 = last_res_66832;
    futhark_mc_segmap_parloop_struct_76578.free_min_arg_66844 = min_arg_66844;
    futhark_mc_segmap_parloop_struct_76578.free_max_res_66848 = max_res_66848;
    futhark_mc_segmap_parloop_struct_76578.free_mem_69880 = mem_69880.mem;
    futhark_mc_segmap_parloop_struct_76578.free_mem_69883 = mem_69883.mem;
    futhark_mc_segmap_parloop_struct_76578.free_mem_69886 = mem_69886.mem;
    futhark_mc_segmap_parloop_struct_76578.free_mem_69889 = mem_69889.mem;
    futhark_mc_segmap_parloop_struct_76578.free_mem_69892 = mem_69892.mem;
    futhark_mc_segmap_parloop_struct_76578.free_mem_69895 = mem_69895.mem;
    futhark_mc_segmap_parloop_struct_76578.free_mem_69898 = mem_69898.mem;
    futhark_mc_segmap_parloop_struct_76578.free_mem_69901 = mem_69901.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76579_task;
    
    futhark_mc_segmap_parloop_76579_task.name =
        "futhark_mc_segmap_parloop_76579";
    futhark_mc_segmap_parloop_76579_task.fn = futhark_mc_segmap_parloop_76579;
    futhark_mc_segmap_parloop_76579_task.args =
        &futhark_mc_segmap_parloop_struct_76578;
    futhark_mc_segmap_parloop_76579_task.iterations = iterations;
    futhark_mc_segmap_parloop_76579_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76579_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76579_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76579_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76579_task);
    
    if (futhark_mc_segmap_parloop_76579_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76579_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76579_total_end -
                 futhark_mc_segmap_parloop_76579_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76579_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76579_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76579_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76577_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76577_end -
                 futhark_mc_segmap_task_76577_start;
        
        ctx->futhark_mc_segmap_task_76577_runs[tid]++;
        ctx->futhark_mc_segmap_task_76577_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76577_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76581 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_66832;
    int64_t free_min_arg_66844;
    float free_max_res_66848;
    char *free_mem_69880;
    char *free_mem_69883;
    char *free_mem_69886;
    char *free_mem_69889;
    char *free_mem_69892;
    char *free_mem_69895;
    char *free_mem_69898;
    char *free_mem_69901;
};
struct futhark_mc_task_76583 {
    struct futhark_context *ctx;
    char *free_mem_69892;
    int64_t free_defunc_0_g_res_72827;
    int64_t free_max_res_72848;
    int64_t *retval_defunc_2_reduce_res_72861;
};
struct futhark_mc_segred_stage_1_parloop_struct_76586 {
    struct futhark_context *ctx;
    char *free_mem_69892;
    int64_t free_defunc_0_g_res_72827;
    int64_t free_max_res_72848;
    char *free_reduce_stage_1_tid_res_arr_mem_73529;
};
static int futhark_mc_segred_stage_1_parloop_76587(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66611, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76586
    *futhark_mc_segred_stage_1_parloop_struct_76586 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76586 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76586->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76587_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76587_start = get_wall_time();
    
    struct memblock mem_69892 = {.desc ="mem_69892", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76586->free_mem_69892,
                                 .size =0, .references =NULL};
    int64_t defunc_0_g_res_72827 =
            futhark_mc_segred_stage_1_parloop_struct_76586->free_defunc_0_g_res_72827;
    int64_t max_res_72848 =
            futhark_mc_segred_stage_1_parloop_struct_76586->free_max_res_72848;
    struct memblock reduce_stage_1_tid_res_arr_mem_73529 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73529",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76586->free_reduce_stage_1_tid_res_arr_mem_73529,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73531 = start;
    int64_t x_73414;
    int64_t x_73415;
    int64_t local_acc_73532 = (int64_t) 0;
    
    for (; iter_73531 < end; iter_73531++) {
        int64_t gtid_66612 = iter_73531;
        int64_t slice_73417 = gtid_66612 + max_res_72848;
        int64_t x_73418 = ((int64_t *) mem_69892.mem)[slice_73417];
        int64_t abs_arg_73419 = sub64(x_73418, defunc_0_g_res_72827);
        int64_t abs_res_73420 = abs64(abs_arg_73419);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_73414 = local_acc_73532;
        }
        // Load next params
        {
            x_73415 = abs_res_73420;
        }
        // Red body
        {
            int64_t defunc_1_op_res_73416 = add64(x_73414, x_73415);
            
            local_acc_73532 = defunc_1_op_res_73416;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_73529.mem)[flat_tid_66611] =
        local_acc_73532;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76587_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76587_end -
                 futhark_mc_segred_stage_1_parloop_76587_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76587_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76587_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76587_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76584(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66611 = tid;
    int num_tasks_73528 = info.nsubtasks;
    struct futhark_mc_task_76583 *futhark_mc_task_76583 =
                                 (struct futhark_mc_task_76583 *) args;
    struct futhark_context *ctx = futhark_mc_task_76583->ctx;
    uint64_t futhark_mc_segred_task_76584_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76584_start = get_wall_time();
    
    struct memblock mem_69892 = {.desc ="mem_69892", .mem =
                                 futhark_mc_task_76583->free_mem_69892, .size =
                                 0, .references =NULL};
    int64_t defunc_0_g_res_72827 =
            futhark_mc_task_76583->free_defunc_0_g_res_72827;
    int64_t max_res_72848 = futhark_mc_task_76583->free_max_res_72848;
    int64_t defunc_2_reduce_res_72861 =
            *futhark_mc_task_76583->retval_defunc_2_reduce_res_72861;
    size_t reduce_stage_1_tid_res_arr_mem_73529_cached_sizze_76585 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73529 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_73529_cached_sizze_76585 <
        (size_t) ((int64_t) 8 * num_tasks_73528)) {
        reduce_stage_1_tid_res_arr_mem_73529 =
            realloc(reduce_stage_1_tid_res_arr_mem_73529, (int64_t) 8 *
                    num_tasks_73528);
        reduce_stage_1_tid_res_arr_mem_73529_cached_sizze_76585 = (int64_t) 8 *
            num_tasks_73528;
    }
    
    int64_t iter_73531;
    struct futhark_mc_segred_stage_1_parloop_struct_76586
    futhark_mc_segred_stage_1_parloop_struct_76586;
    
    futhark_mc_segred_stage_1_parloop_struct_76586.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76586.free_mem_69892 =
        mem_69892.mem;
    futhark_mc_segred_stage_1_parloop_struct_76586.free_defunc_0_g_res_72827 =
        defunc_0_g_res_72827;
    futhark_mc_segred_stage_1_parloop_struct_76586.free_max_res_72848 =
        max_res_72848;
    futhark_mc_segred_stage_1_parloop_struct_76586.free_reduce_stage_1_tid_res_arr_mem_73529 =
        reduce_stage_1_tid_res_arr_mem_73529;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76587_task;
    
    futhark_mc_segred_stage_1_parloop_76587_task.name =
        "futhark_mc_segred_stage_1_parloop_76587";
    futhark_mc_segred_stage_1_parloop_76587_task.fn =
        futhark_mc_segred_stage_1_parloop_76587;
    futhark_mc_segred_stage_1_parloop_76587_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76586;
    futhark_mc_segred_stage_1_parloop_76587_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76587_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76587_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76587_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76587_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76587_task);
    
    if (futhark_mc_segred_stage_1_parloop_76587_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76587_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76587_total_end -
                 futhark_mc_segred_stage_1_parloop_76587_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76587_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76587_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76587_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_72861 = (int64_t) 0;
    }
    
    int64_t x_73533;
    int64_t x_73534;
    
    for (int32_t i_73536 = 0; i_73536 < num_tasks_73528; i_73536++) {
        flat_tid_66611 = i_73536;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_73533 = defunc_2_reduce_res_72861;
            }
            // load next params
            {
                x_73534 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_73529)[flat_tid_66611];
            }
            // red body
            {
                int64_t defunc_1_op_res_73535 = add64(x_73533, x_73534);
                
                defunc_2_reduce_res_72861 = defunc_1_op_res_73535;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_73529);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76584_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76584_end -
                 futhark_mc_segred_task_76584_start;
        
        ctx->futhark_mc_segred_task_76584_runs[tid]++;
        ctx->futhark_mc_segred_task_76584_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76584_iter[tid] += iterations;
    }
    *futhark_mc_task_76583->retval_defunc_2_reduce_res_72861 =
        defunc_2_reduce_res_72861;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76588 {
    struct futhark_context *ctx;
    int64_t free_last_res_66832;
    char *free_mem_69886;
    char *free_mem_69895;
    int64_t free_min_res_72903;
    float free_defunc_1_f_res_72922;
    float free_defunc_0_f_res_72923;
    float *retval_defunc_2_reduce_res_72924;
    float *retval_defunc_2_reduce_res_72925;
    float *retval_defunc_2_reduce_res_72926;
    float *retval_defunc_2_reduce_res_72927;
    float *retval_defunc_2_reduce_res_72928;
};
struct futhark_mc_segred_stage_1_parloop_struct_76595 {
    struct futhark_context *ctx;
    int64_t free_last_res_66832;
    char *free_mem_69886;
    char *free_mem_69895;
    int64_t free_min_res_72903;
    float free_defunc_1_f_res_72922;
    float free_defunc_0_f_res_72923;
    char *free_reduce_stage_1_tid_res_arr_mem_73542;
    char *free_reduce_stage_1_tid_res_arr_mem_73544;
    char *free_reduce_stage_1_tid_res_arr_mem_73546;
    char *free_reduce_stage_1_tid_res_arr_mem_73548;
    char *free_reduce_stage_1_tid_res_arr_mem_73550;
};
static int futhark_mc_segred_stage_1_parloop_76596(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66613, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76595
    *futhark_mc_segred_stage_1_parloop_struct_76595 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76595 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76595->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76596_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76596_start = get_wall_time();
    
    int64_t last_res_66832 =
            futhark_mc_segred_stage_1_parloop_struct_76595->free_last_res_66832;
    struct memblock mem_69886 = {.desc ="mem_69886", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76595->free_mem_69886,
                                 .size =0, .references =NULL};
    struct memblock mem_69895 = {.desc ="mem_69895", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76595->free_mem_69895,
                                 .size =0, .references =NULL};
    int64_t min_res_72903 =
            futhark_mc_segred_stage_1_parloop_struct_76595->free_min_res_72903;
    float defunc_1_f_res_72922 =
          futhark_mc_segred_stage_1_parloop_struct_76595->free_defunc_1_f_res_72922;
    float defunc_0_f_res_72923 =
          futhark_mc_segred_stage_1_parloop_struct_76595->free_defunc_0_f_res_72923;
    struct memblock reduce_stage_1_tid_res_arr_mem_73542 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73542",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76595->free_reduce_stage_1_tid_res_arr_mem_73542,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73544 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73544",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76595->free_reduce_stage_1_tid_res_arr_mem_73544,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73546 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73546",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76595->free_reduce_stage_1_tid_res_arr_mem_73546,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73548 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73548",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76595->free_reduce_stage_1_tid_res_arr_mem_73548,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73550 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73550",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76595->free_reduce_stage_1_tid_res_arr_mem_73550,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73552 = start;
    float x_73451;
    float x_73452;
    float x_73454;
    float x_73455;
    float x_73457;
    float x_73458;
    float x_73460;
    float x_73461;
    float x_73463;
    float x_73464;
    float local_acc_73553 = 0.0F;
    float local_acc_73554 = 0.0F;
    float local_acc_73555 = 0.0F;
    float local_acc_73556 = 0.0F;
    float local_acc_73557 = 0.0F;
    
    for (; iter_73552 < end; iter_73552++) {
        int64_t gtid_66614 = iter_73552;
        float x_73466 = ((float *) mem_69895.mem)[gtid_66614];
        bool cond_73467 = sle64(last_res_66832, gtid_66614);
        float defunc_0_f_res_73468;
        
        if (cond_73467) {
            defunc_0_f_res_73468 = 0.0F;
        } else {
            int64_t i_73469 = add64(gtid_66614, min_res_72903);
            float x_73470 = ((float *) mem_69886.mem)[i_73469];
            float defunc_0_f_res_f_res_73471 = 1.0F + x_73470;
            
            defunc_0_f_res_73468 = defunc_0_f_res_f_res_73471;
        }
        
        float x_j_73472 = defunc_0_f_res_73468 - defunc_0_f_res_72923;
        float abs_res_73473 = (float) fabs(x_j_73472);
        float tmp1_73474 = abs_res_73473 / defunc_1_f_res_72922;
        float x_73475 = tmp1_73474 * tmp1_73474;
        float y_73476 = tmp1_73474 * x_73475;
        float tmp2_73477 = 1.0F - y_73476;
        float x_73478 = tmp2_73477 * tmp2_73477;
        float tmp3_73479 = tmp2_73477 * x_73478;
        float w_j_73480 = x_73466 * tmp3_73479;
        float xw_j_73481 = x_j_73472 * w_j_73480;
        float x2w_j_73482 = x_j_73472 * xw_j_73481;
        float x3w_j_73483 = x_j_73472 * x2w_j_73482;
        float x4w_j_73484 = x_j_73472 * x3w_j_73483;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_73451 = local_acc_73553;
        }
        // Load next params
        {
            x_73452 = w_j_73480;
        }
        // Red body
        {
            float defunc_1_op_res_73453 = x_73451 + x_73452;
            
            local_acc_73553 = defunc_1_op_res_73453;
        }
        // Load accum params
        {
            x_73454 = local_acc_73554;
        }
        // Load next params
        {
            x_73455 = xw_j_73481;
        }
        // Red body
        {
            float defunc_1_op_res_73456 = x_73454 + x_73455;
            
            local_acc_73554 = defunc_1_op_res_73456;
        }
        // Load accum params
        {
            x_73457 = local_acc_73555;
        }
        // Load next params
        {
            x_73458 = x2w_j_73482;
        }
        // Red body
        {
            float defunc_1_op_res_73459 = x_73457 + x_73458;
            
            local_acc_73555 = defunc_1_op_res_73459;
        }
        // Load accum params
        {
            x_73460 = local_acc_73556;
        }
        // Load next params
        {
            x_73461 = x3w_j_73483;
        }
        // Red body
        {
            float defunc_1_op_res_73462 = x_73460 + x_73461;
            
            local_acc_73556 = defunc_1_op_res_73462;
        }
        // Load accum params
        {
            x_73463 = local_acc_73557;
        }
        // Load next params
        {
            x_73464 = x4w_j_73484;
        }
        // Red body
        {
            float defunc_1_op_res_73465 = x_73463 + x_73464;
            
            local_acc_73557 = defunc_1_op_res_73465;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_73542.mem)[flat_tid_66613] =
        local_acc_73553;
    ((float *) reduce_stage_1_tid_res_arr_mem_73544.mem)[flat_tid_66613] =
        local_acc_73554;
    ((float *) reduce_stage_1_tid_res_arr_mem_73546.mem)[flat_tid_66613] =
        local_acc_73555;
    ((float *) reduce_stage_1_tid_res_arr_mem_73548.mem)[flat_tid_66613] =
        local_acc_73556;
    ((float *) reduce_stage_1_tid_res_arr_mem_73550.mem)[flat_tid_66613] =
        local_acc_73557;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76596_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76596_end -
                 futhark_mc_segred_stage_1_parloop_76596_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76596_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76596_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76596_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76589(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66613 = tid;
    int num_tasks_73541 = info.nsubtasks;
    struct futhark_mc_task_76588 *futhark_mc_task_76588 =
                                 (struct futhark_mc_task_76588 *) args;
    struct futhark_context *ctx = futhark_mc_task_76588->ctx;
    uint64_t futhark_mc_segred_task_76589_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76589_start = get_wall_time();
    
    int64_t last_res_66832 = futhark_mc_task_76588->free_last_res_66832;
    struct memblock mem_69886 = {.desc ="mem_69886", .mem =
                                 futhark_mc_task_76588->free_mem_69886, .size =
                                 0, .references =NULL};
    struct memblock mem_69895 = {.desc ="mem_69895", .mem =
                                 futhark_mc_task_76588->free_mem_69895, .size =
                                 0, .references =NULL};
    int64_t min_res_72903 = futhark_mc_task_76588->free_min_res_72903;
    float defunc_1_f_res_72922 =
          futhark_mc_task_76588->free_defunc_1_f_res_72922;
    float defunc_0_f_res_72923 =
          futhark_mc_task_76588->free_defunc_0_f_res_72923;
    float defunc_2_reduce_res_72924 =
          *futhark_mc_task_76588->retval_defunc_2_reduce_res_72924;
    float defunc_2_reduce_res_72925 =
          *futhark_mc_task_76588->retval_defunc_2_reduce_res_72925;
    float defunc_2_reduce_res_72926 =
          *futhark_mc_task_76588->retval_defunc_2_reduce_res_72926;
    float defunc_2_reduce_res_72927 =
          *futhark_mc_task_76588->retval_defunc_2_reduce_res_72927;
    float defunc_2_reduce_res_72928 =
          *futhark_mc_task_76588->retval_defunc_2_reduce_res_72928;
    size_t reduce_stage_1_tid_res_arr_mem_73542_cached_sizze_76590 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73542 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73544_cached_sizze_76591 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73544 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73546_cached_sizze_76592 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73546 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73548_cached_sizze_76593 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73548 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73550_cached_sizze_76594 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73550 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_73542_cached_sizze_76590 <
        (size_t) ((int64_t) 4 * num_tasks_73541)) {
        reduce_stage_1_tid_res_arr_mem_73542 =
            realloc(reduce_stage_1_tid_res_arr_mem_73542, (int64_t) 4 *
                    num_tasks_73541);
        reduce_stage_1_tid_res_arr_mem_73542_cached_sizze_76590 = (int64_t) 4 *
            num_tasks_73541;
    }
    if (reduce_stage_1_tid_res_arr_mem_73544_cached_sizze_76591 <
        (size_t) ((int64_t) 4 * num_tasks_73541)) {
        reduce_stage_1_tid_res_arr_mem_73544 =
            realloc(reduce_stage_1_tid_res_arr_mem_73544, (int64_t) 4 *
                    num_tasks_73541);
        reduce_stage_1_tid_res_arr_mem_73544_cached_sizze_76591 = (int64_t) 4 *
            num_tasks_73541;
    }
    if (reduce_stage_1_tid_res_arr_mem_73546_cached_sizze_76592 <
        (size_t) ((int64_t) 4 * num_tasks_73541)) {
        reduce_stage_1_tid_res_arr_mem_73546 =
            realloc(reduce_stage_1_tid_res_arr_mem_73546, (int64_t) 4 *
                    num_tasks_73541);
        reduce_stage_1_tid_res_arr_mem_73546_cached_sizze_76592 = (int64_t) 4 *
            num_tasks_73541;
    }
    if (reduce_stage_1_tid_res_arr_mem_73548_cached_sizze_76593 <
        (size_t) ((int64_t) 4 * num_tasks_73541)) {
        reduce_stage_1_tid_res_arr_mem_73548 =
            realloc(reduce_stage_1_tid_res_arr_mem_73548, (int64_t) 4 *
                    num_tasks_73541);
        reduce_stage_1_tid_res_arr_mem_73548_cached_sizze_76593 = (int64_t) 4 *
            num_tasks_73541;
    }
    if (reduce_stage_1_tid_res_arr_mem_73550_cached_sizze_76594 <
        (size_t) ((int64_t) 4 * num_tasks_73541)) {
        reduce_stage_1_tid_res_arr_mem_73550 =
            realloc(reduce_stage_1_tid_res_arr_mem_73550, (int64_t) 4 *
                    num_tasks_73541);
        reduce_stage_1_tid_res_arr_mem_73550_cached_sizze_76594 = (int64_t) 4 *
            num_tasks_73541;
    }
    
    int64_t iter_73552;
    struct futhark_mc_segred_stage_1_parloop_struct_76595
    futhark_mc_segred_stage_1_parloop_struct_76595;
    
    futhark_mc_segred_stage_1_parloop_struct_76595.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76595.free_last_res_66832 =
        last_res_66832;
    futhark_mc_segred_stage_1_parloop_struct_76595.free_mem_69886 =
        mem_69886.mem;
    futhark_mc_segred_stage_1_parloop_struct_76595.free_mem_69895 =
        mem_69895.mem;
    futhark_mc_segred_stage_1_parloop_struct_76595.free_min_res_72903 =
        min_res_72903;
    futhark_mc_segred_stage_1_parloop_struct_76595.free_defunc_1_f_res_72922 =
        defunc_1_f_res_72922;
    futhark_mc_segred_stage_1_parloop_struct_76595.free_defunc_0_f_res_72923 =
        defunc_0_f_res_72923;
    futhark_mc_segred_stage_1_parloop_struct_76595.free_reduce_stage_1_tid_res_arr_mem_73542 =
        reduce_stage_1_tid_res_arr_mem_73542;
    futhark_mc_segred_stage_1_parloop_struct_76595.free_reduce_stage_1_tid_res_arr_mem_73544 =
        reduce_stage_1_tid_res_arr_mem_73544;
    futhark_mc_segred_stage_1_parloop_struct_76595.free_reduce_stage_1_tid_res_arr_mem_73546 =
        reduce_stage_1_tid_res_arr_mem_73546;
    futhark_mc_segred_stage_1_parloop_struct_76595.free_reduce_stage_1_tid_res_arr_mem_73548 =
        reduce_stage_1_tid_res_arr_mem_73548;
    futhark_mc_segred_stage_1_parloop_struct_76595.free_reduce_stage_1_tid_res_arr_mem_73550 =
        reduce_stage_1_tid_res_arr_mem_73550;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76596_task;
    
    futhark_mc_segred_stage_1_parloop_76596_task.name =
        "futhark_mc_segred_stage_1_parloop_76596";
    futhark_mc_segred_stage_1_parloop_76596_task.fn =
        futhark_mc_segred_stage_1_parloop_76596;
    futhark_mc_segred_stage_1_parloop_76596_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76595;
    futhark_mc_segred_stage_1_parloop_76596_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76596_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76596_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76596_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76596_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76596_task);
    
    if (futhark_mc_segred_stage_1_parloop_76596_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76596_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76596_total_end -
                 futhark_mc_segred_stage_1_parloop_76596_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76596_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76596_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76596_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_72924 = 0.0F;
        defunc_2_reduce_res_72925 = 0.0F;
        defunc_2_reduce_res_72926 = 0.0F;
        defunc_2_reduce_res_72927 = 0.0F;
        defunc_2_reduce_res_72928 = 0.0F;
    }
    
    float x_73558;
    float x_73559;
    float x_73561;
    float x_73562;
    float x_73564;
    float x_73565;
    float x_73567;
    float x_73568;
    float x_73570;
    float x_73571;
    
    for (int32_t i_73573 = 0; i_73573 < num_tasks_73541; i_73573++) {
        flat_tid_66613 = i_73573;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_73558 = defunc_2_reduce_res_72924;
            }
            // load next params
            {
                x_73559 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73542)[flat_tid_66613];
            }
            // red body
            {
                float defunc_1_op_res_73560 = x_73558 + x_73559;
                
                defunc_2_reduce_res_72924 = defunc_1_op_res_73560;
            }
            // load acc params
            {
                x_73561 = defunc_2_reduce_res_72925;
            }
            // load next params
            {
                x_73562 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73544)[flat_tid_66613];
            }
            // red body
            {
                float defunc_1_op_res_73563 = x_73561 + x_73562;
                
                defunc_2_reduce_res_72925 = defunc_1_op_res_73563;
            }
            // load acc params
            {
                x_73564 = defunc_2_reduce_res_72926;
            }
            // load next params
            {
                x_73565 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73546)[flat_tid_66613];
            }
            // red body
            {
                float defunc_1_op_res_73566 = x_73564 + x_73565;
                
                defunc_2_reduce_res_72926 = defunc_1_op_res_73566;
            }
            // load acc params
            {
                x_73567 = defunc_2_reduce_res_72927;
            }
            // load next params
            {
                x_73568 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73548)[flat_tid_66613];
            }
            // red body
            {
                float defunc_1_op_res_73569 = x_73567 + x_73568;
                
                defunc_2_reduce_res_72927 = defunc_1_op_res_73569;
            }
            // load acc params
            {
                x_73570 = defunc_2_reduce_res_72928;
            }
            // load next params
            {
                x_73571 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73550)[flat_tid_66613];
            }
            // red body
            {
                float defunc_1_op_res_73572 = x_73570 + x_73571;
                
                defunc_2_reduce_res_72928 = defunc_1_op_res_73572;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_73542);
    free(reduce_stage_1_tid_res_arr_mem_73544);
    free(reduce_stage_1_tid_res_arr_mem_73546);
    free(reduce_stage_1_tid_res_arr_mem_73548);
    free(reduce_stage_1_tid_res_arr_mem_73550);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76589_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76589_end -
                 futhark_mc_segred_task_76589_start;
        
        ctx->futhark_mc_segred_task_76589_runs[tid]++;
        ctx->futhark_mc_segred_task_76589_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76589_iter[tid] += iterations;
    }
    *futhark_mc_task_76588->retval_defunc_2_reduce_res_72924 =
        defunc_2_reduce_res_72924;
    *futhark_mc_task_76588->retval_defunc_2_reduce_res_72925 =
        defunc_2_reduce_res_72925;
    *futhark_mc_task_76588->retval_defunc_2_reduce_res_72926 =
        defunc_2_reduce_res_72926;
    *futhark_mc_task_76588->retval_defunc_2_reduce_res_72927 =
        defunc_2_reduce_res_72927;
    *futhark_mc_task_76588->retval_defunc_2_reduce_res_72928 =
        defunc_2_reduce_res_72928;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76597 {
    struct futhark_context *ctx;
    int64_t free_last_res_66832;
    char *free_mem_69880;
    char *free_mem_69886;
    char *free_mem_69895;
    int64_t free_min_res_72903;
    float free_defunc_1_f_res_72922;
    float free_defunc_0_f_res_72923;
    float free_a12_72983;
    float free_b12_72984;
    float free_c12_72985;
    float free_b2_72986;
    float free_c2_72987;
    float *retval_defunc_2_reduce_res_72988;
    float *retval_defunc_2_reduce_res_72989;
};
struct futhark_mc_segred_stage_1_parloop_struct_76601 {
    struct futhark_context *ctx;
    int64_t free_last_res_66832;
    char *free_mem_69880;
    char *free_mem_69886;
    char *free_mem_69895;
    int64_t free_min_res_72903;
    float free_defunc_1_f_res_72922;
    float free_defunc_0_f_res_72923;
    float free_a12_72983;
    float free_b12_72984;
    float free_c12_72985;
    float free_b2_72986;
    float free_c2_72987;
    char *free_reduce_stage_1_tid_res_arr_mem_73575;
    char *free_reduce_stage_1_tid_res_arr_mem_73577;
};
static int futhark_mc_segred_stage_1_parloop_76602(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66615, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76601
    *futhark_mc_segred_stage_1_parloop_struct_76601 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76601 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76601->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76602_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76602_start = get_wall_time();
    
    int64_t last_res_66832 =
            futhark_mc_segred_stage_1_parloop_struct_76601->free_last_res_66832;
    struct memblock mem_69880 = {.desc ="mem_69880", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76601->free_mem_69880,
                                 .size =0, .references =NULL};
    struct memblock mem_69886 = {.desc ="mem_69886", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76601->free_mem_69886,
                                 .size =0, .references =NULL};
    struct memblock mem_69895 = {.desc ="mem_69895", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76601->free_mem_69895,
                                 .size =0, .references =NULL};
    int64_t min_res_72903 =
            futhark_mc_segred_stage_1_parloop_struct_76601->free_min_res_72903;
    float defunc_1_f_res_72922 =
          futhark_mc_segred_stage_1_parloop_struct_76601->free_defunc_1_f_res_72922;
    float defunc_0_f_res_72923 =
          futhark_mc_segred_stage_1_parloop_struct_76601->free_defunc_0_f_res_72923;
    float a12_72983 =
          futhark_mc_segred_stage_1_parloop_struct_76601->free_a12_72983;
    float b12_72984 =
          futhark_mc_segred_stage_1_parloop_struct_76601->free_b12_72984;
    float c12_72985 =
          futhark_mc_segred_stage_1_parloop_struct_76601->free_c12_72985;
    float b2_72986 =
          futhark_mc_segred_stage_1_parloop_struct_76601->free_b2_72986;
    float c2_72987 =
          futhark_mc_segred_stage_1_parloop_struct_76601->free_c2_72987;
    struct memblock reduce_stage_1_tid_res_arr_mem_73575 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73575",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76601->free_reduce_stage_1_tid_res_arr_mem_73575,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73577 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73577",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76601->free_reduce_stage_1_tid_res_arr_mem_73577,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73579 = start;
    float x_73485;
    float x_73486;
    float x_73488;
    float x_73489;
    float local_acc_73580 = 0.0F;
    float local_acc_73581 = 0.0F;
    
    for (; iter_73579 < end; iter_73579++) {
        int64_t gtid_66616 = iter_73579;
        float x_73491 = ((float *) mem_69895.mem)[gtid_66616];
        bool cond_73492 = sle64(last_res_66832, gtid_66616);
        float defunc_0_f_res_73493;
        
        if (cond_73492) {
            defunc_0_f_res_73493 = 0.0F;
        } else {
            int64_t i_73494 = add64(gtid_66616, min_res_72903);
            float x_73495 = ((float *) mem_69886.mem)[i_73494];
            float defunc_0_f_res_f_res_73496 = 1.0F + x_73495;
            
            defunc_0_f_res_73493 = defunc_0_f_res_f_res_73496;
        }
        
        float x_j_73497 = defunc_0_f_res_73493 - defunc_0_f_res_72923;
        float abs_res_73498 = (float) fabs(x_j_73497);
        float tmp1_73499 = abs_res_73498 / defunc_1_f_res_72922;
        float x_73500 = tmp1_73499 * tmp1_73499;
        float y_73501 = tmp1_73499 * x_73500;
        float tmp2_73502 = 1.0F - y_73501;
        float x_73503 = tmp2_73502 * tmp2_73502;
        float tmp3_73504 = tmp2_73502 * x_73503;
        float tmp4_73505 = x_73491 * tmp3_73504;
        float defunc_1_f_res_73506 = x_j_73497 * tmp4_73505;
        float defunc_1_f_res_73507 = x_j_73497 * defunc_1_f_res_73506;
        float defunc_0_f_res_73508;
        
        if (cond_73492) {
            defunc_0_f_res_73508 = 0.0F;
        } else {
            int64_t i_73509 = add64(gtid_66616, min_res_72903);
            float x_73510 = ((float *) mem_69880.mem)[i_73509];
            
            defunc_0_f_res_73508 = x_73510;
        }
        
        float x_73511 = a12_72983 * tmp4_73505;
        float y_73512 = b12_72984 * defunc_1_f_res_73506;
        float x_73513 = x_73511 + y_73512;
        float y_73514 = c12_72985 * defunc_1_f_res_73507;
        float x_73515 = x_73513 + y_73514;
        float defunc_9_fit_fun_res_73516 = defunc_0_f_res_73508 * x_73515;
        float x_73517 = b12_72984 * tmp4_73505;
        float y_73518 = b2_72986 * defunc_1_f_res_73506;
        float x_73519 = x_73517 + y_73518;
        float y_73520 = c2_72987 * defunc_1_f_res_73507;
        float x_73521 = x_73519 + y_73520;
        float defunc_9_slope_fun_res_73522 = defunc_0_f_res_73508 * x_73521;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_73485 = local_acc_73580;
        }
        // Load next params
        {
            x_73486 = defunc_9_fit_fun_res_73516;
        }
        // Red body
        {
            float defunc_1_op_res_73487 = x_73485 + x_73486;
            
            local_acc_73580 = defunc_1_op_res_73487;
        }
        // Load accum params
        {
            x_73488 = local_acc_73581;
        }
        // Load next params
        {
            x_73489 = defunc_9_slope_fun_res_73522;
        }
        // Red body
        {
            float defunc_1_op_res_73490 = x_73488 + x_73489;
            
            local_acc_73581 = defunc_1_op_res_73490;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_73575.mem)[flat_tid_66615] =
        local_acc_73580;
    ((float *) reduce_stage_1_tid_res_arr_mem_73577.mem)[flat_tid_66615] =
        local_acc_73581;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76602_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76602_end -
                 futhark_mc_segred_stage_1_parloop_76602_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76602_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76602_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76602_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76598(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66615 = tid;
    int num_tasks_73574 = info.nsubtasks;
    struct futhark_mc_task_76597 *futhark_mc_task_76597 =
                                 (struct futhark_mc_task_76597 *) args;
    struct futhark_context *ctx = futhark_mc_task_76597->ctx;
    uint64_t futhark_mc_segred_task_76598_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76598_start = get_wall_time();
    
    int64_t last_res_66832 = futhark_mc_task_76597->free_last_res_66832;
    struct memblock mem_69880 = {.desc ="mem_69880", .mem =
                                 futhark_mc_task_76597->free_mem_69880, .size =
                                 0, .references =NULL};
    struct memblock mem_69886 = {.desc ="mem_69886", .mem =
                                 futhark_mc_task_76597->free_mem_69886, .size =
                                 0, .references =NULL};
    struct memblock mem_69895 = {.desc ="mem_69895", .mem =
                                 futhark_mc_task_76597->free_mem_69895, .size =
                                 0, .references =NULL};
    int64_t min_res_72903 = futhark_mc_task_76597->free_min_res_72903;
    float defunc_1_f_res_72922 =
          futhark_mc_task_76597->free_defunc_1_f_res_72922;
    float defunc_0_f_res_72923 =
          futhark_mc_task_76597->free_defunc_0_f_res_72923;
    float a12_72983 = futhark_mc_task_76597->free_a12_72983;
    float b12_72984 = futhark_mc_task_76597->free_b12_72984;
    float c12_72985 = futhark_mc_task_76597->free_c12_72985;
    float b2_72986 = futhark_mc_task_76597->free_b2_72986;
    float c2_72987 = futhark_mc_task_76597->free_c2_72987;
    float defunc_2_reduce_res_72988 =
          *futhark_mc_task_76597->retval_defunc_2_reduce_res_72988;
    float defunc_2_reduce_res_72989 =
          *futhark_mc_task_76597->retval_defunc_2_reduce_res_72989;
    size_t reduce_stage_1_tid_res_arr_mem_73575_cached_sizze_76599 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73575 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73577_cached_sizze_76600 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73577 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_73575_cached_sizze_76599 <
        (size_t) ((int64_t) 4 * num_tasks_73574)) {
        reduce_stage_1_tid_res_arr_mem_73575 =
            realloc(reduce_stage_1_tid_res_arr_mem_73575, (int64_t) 4 *
                    num_tasks_73574);
        reduce_stage_1_tid_res_arr_mem_73575_cached_sizze_76599 = (int64_t) 4 *
            num_tasks_73574;
    }
    if (reduce_stage_1_tid_res_arr_mem_73577_cached_sizze_76600 <
        (size_t) ((int64_t) 4 * num_tasks_73574)) {
        reduce_stage_1_tid_res_arr_mem_73577 =
            realloc(reduce_stage_1_tid_res_arr_mem_73577, (int64_t) 4 *
                    num_tasks_73574);
        reduce_stage_1_tid_res_arr_mem_73577_cached_sizze_76600 = (int64_t) 4 *
            num_tasks_73574;
    }
    
    int64_t iter_73579;
    struct futhark_mc_segred_stage_1_parloop_struct_76601
    futhark_mc_segred_stage_1_parloop_struct_76601;
    
    futhark_mc_segred_stage_1_parloop_struct_76601.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76601.free_last_res_66832 =
        last_res_66832;
    futhark_mc_segred_stage_1_parloop_struct_76601.free_mem_69880 =
        mem_69880.mem;
    futhark_mc_segred_stage_1_parloop_struct_76601.free_mem_69886 =
        mem_69886.mem;
    futhark_mc_segred_stage_1_parloop_struct_76601.free_mem_69895 =
        mem_69895.mem;
    futhark_mc_segred_stage_1_parloop_struct_76601.free_min_res_72903 =
        min_res_72903;
    futhark_mc_segred_stage_1_parloop_struct_76601.free_defunc_1_f_res_72922 =
        defunc_1_f_res_72922;
    futhark_mc_segred_stage_1_parloop_struct_76601.free_defunc_0_f_res_72923 =
        defunc_0_f_res_72923;
    futhark_mc_segred_stage_1_parloop_struct_76601.free_a12_72983 = a12_72983;
    futhark_mc_segred_stage_1_parloop_struct_76601.free_b12_72984 = b12_72984;
    futhark_mc_segred_stage_1_parloop_struct_76601.free_c12_72985 = c12_72985;
    futhark_mc_segred_stage_1_parloop_struct_76601.free_b2_72986 = b2_72986;
    futhark_mc_segred_stage_1_parloop_struct_76601.free_c2_72987 = c2_72987;
    futhark_mc_segred_stage_1_parloop_struct_76601.free_reduce_stage_1_tid_res_arr_mem_73575 =
        reduce_stage_1_tid_res_arr_mem_73575;
    futhark_mc_segred_stage_1_parloop_struct_76601.free_reduce_stage_1_tid_res_arr_mem_73577 =
        reduce_stage_1_tid_res_arr_mem_73577;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76602_task;
    
    futhark_mc_segred_stage_1_parloop_76602_task.name =
        "futhark_mc_segred_stage_1_parloop_76602";
    futhark_mc_segred_stage_1_parloop_76602_task.fn =
        futhark_mc_segred_stage_1_parloop_76602;
    futhark_mc_segred_stage_1_parloop_76602_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76601;
    futhark_mc_segred_stage_1_parloop_76602_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76602_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76602_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76602_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76602_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76602_task);
    
    if (futhark_mc_segred_stage_1_parloop_76602_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76602_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76602_total_end -
                 futhark_mc_segred_stage_1_parloop_76602_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76602_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76602_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76602_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_72988 = 0.0F;
        defunc_2_reduce_res_72989 = 0.0F;
    }
    
    float x_73582;
    float x_73583;
    float x_73585;
    float x_73586;
    
    for (int32_t i_73588 = 0; i_73588 < num_tasks_73574; i_73588++) {
        flat_tid_66615 = i_73588;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_73582 = defunc_2_reduce_res_72988;
            }
            // load next params
            {
                x_73583 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73575)[flat_tid_66615];
            }
            // red body
            {
                float defunc_1_op_res_73584 = x_73582 + x_73583;
                
                defunc_2_reduce_res_72988 = defunc_1_op_res_73584;
            }
            // load acc params
            {
                x_73585 = defunc_2_reduce_res_72989;
            }
            // load next params
            {
                x_73586 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73577)[flat_tid_66615];
            }
            // red body
            {
                float defunc_1_op_res_73587 = x_73585 + x_73586;
                
                defunc_2_reduce_res_72989 = defunc_1_op_res_73587;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_73575);
    free(reduce_stage_1_tid_res_arr_mem_73577);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76598_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76598_end -
                 futhark_mc_segred_task_76598_start;
        
        ctx->futhark_mc_segred_task_76598_runs[tid]++;
        ctx->futhark_mc_segred_task_76598_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76598_iter[tid] += iterations;
    }
    *futhark_mc_task_76597->retval_defunc_2_reduce_res_72988 =
        defunc_2_reduce_res_72988;
    *futhark_mc_task_76597->retval_defunc_2_reduce_res_72989 =
        defunc_2_reduce_res_72989;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76582(void *args, int64_t start,
                                           int64_t end, int flat_tid_66609,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76581
    *futhark_mc_segmap_parloop_struct_76581 =
    (struct futhark_mc_segmap_parloop_struct_76581 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76581->ctx;
    uint64_t futhark_mc_segmap_parloop_76582_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76582_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76581->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76581->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76581->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76581->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76581->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76581->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76581->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76581->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76581->free_m_64052;
    int64_t last_res_66832 =
            futhark_mc_segmap_parloop_struct_76581->free_last_res_66832;
    int64_t min_arg_66844 =
            futhark_mc_segmap_parloop_struct_76581->free_min_arg_66844;
    float max_res_66848 =
          futhark_mc_segmap_parloop_struct_76581->free_max_res_66848;
    struct memblock mem_69880 = {.desc ="mem_69880", .mem =
                                 futhark_mc_segmap_parloop_struct_76581->free_mem_69880,
                                 .size =0, .references =NULL};
    struct memblock mem_69883 = {.desc ="mem_69883", .mem =
                                 futhark_mc_segmap_parloop_struct_76581->free_mem_69883,
                                 .size =0, .references =NULL};
    struct memblock mem_69886 = {.desc ="mem_69886", .mem =
                                 futhark_mc_segmap_parloop_struct_76581->free_mem_69886,
                                 .size =0, .references =NULL};
    struct memblock mem_69889 = {.desc ="mem_69889", .mem =
                                 futhark_mc_segmap_parloop_struct_76581->free_mem_69889,
                                 .size =0, .references =NULL};
    struct memblock mem_69892 = {.desc ="mem_69892", .mem =
                                 futhark_mc_segmap_parloop_struct_76581->free_mem_69892,
                                 .size =0, .references =NULL};
    struct memblock mem_69895 = {.desc ="mem_69895", .mem =
                                 futhark_mc_segmap_parloop_struct_76581->free_mem_69895,
                                 .size =0, .references =NULL};
    struct memblock mem_69898 = {.desc ="mem_69898", .mem =
                                 futhark_mc_segmap_parloop_struct_76581->free_mem_69898,
                                 .size =0, .references =NULL};
    struct memblock mem_69901 = {.desc ="mem_69901", .mem =
                                 futhark_mc_segmap_parloop_struct_76581->free_mem_69901,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73397 = start;
    
    for (; iter_73397 < end; iter_73397++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73523 = n_m_64039;
        int64_t gtid_66610 = iter_73397;
        int64_t remnant_73524 = iter_73397 - gtid_66610;
        int64_t min_arg_72825 = mul64(jump_64032, gtid_66610);
        int64_t min_res_72826 = smin64(i_64040, min_arg_72825);
        int64_t defunc_0_g_res_72827 = add64((int64_t) 1, min_res_72826);
        bool nearest_idx_72828;
        int64_t nearest_idx_72829;
        int64_t nearest_idx_72830;
        bool loop_while_73398;
        int64_t low_73399;
        int64_t high_73400;
        
        loop_while_73398 = x_64041;
        low_73399 = (int64_t) 0;
        high_73400 = i_64040;
        while (loop_while_73398) {
            int64_t x_73401 = add64(low_73399, high_73400);
            int64_t mid_73402 = sdiv64(x_73401, (int64_t) 2);
            bool x_73403 = sle64((int64_t) 0, mid_73402);
            bool y_73404 = slt64(mid_73402, n_64028);
            bool bounds_check_73405 = x_73403 && y_73404;
            bool index_certs_73406;
            
            if (!bounds_check_73405) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_73402,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_73407 = ((int64_t *) mem_69889.mem)[mid_73402];
            bool cond_73408 = sle64(defunc_0_g_res_72827, x_73407);
            int64_t loopres_73409;
            int64_t loopres_73410;
            
            if (cond_73408) {
                int64_t loopres_t_res_73411 = sub64(mid_73402, (int64_t) 1);
                
                loopres_73409 = low_73399;
                loopres_73410 = loopres_t_res_73411;
            } else {
                int64_t loopres_f_res_73412 = add64((int64_t) 1, mid_73402);
                
                loopres_73409 = loopres_f_res_73412;
                loopres_73410 = high_73400;
            }
            
            bool loop_cond_73413 = sle64(loopres_73409, loopres_73410);
            bool loop_while_tmp_73525 = loop_cond_73413;
            int64_t low_tmp_73526 = loopres_73409;
            int64_t high_tmp_73527 = loopres_73410;
            
            loop_while_73398 = loop_while_tmp_73525;
            low_73399 = low_tmp_73526;
            high_73400 = high_tmp_73527;
        }
        nearest_idx_72828 = loop_while_73398;
        nearest_idx_72829 = low_73399;
        nearest_idx_72830 = high_73400;
        
        int64_t max_arg_72847 = sub64(nearest_idx_72829, min_res_64046);
        int64_t max_res_72848 = smax64((int64_t) 0, max_arg_72847);
        int64_t j_72849 = add64(min_res_64046, max_res_72848);
        int64_t i_p_m_t_s_72850 = add64(m_64052, max_res_72848);
        bool zzero_leq_i_p_m_t_s_72851 = sle64((int64_t) 0, i_p_m_t_s_72850);
        bool i_p_m_t_s_leq_w_72852 = slt64(i_p_m_t_s_72850, n_64028);
        bool zzero_lte_i_72853 = sle64((int64_t) 0, max_res_72848);
        bool i_lte_j_72854 = sle64(max_res_72848, j_72849);
        bool y_72855 = i_p_m_t_s_leq_w_72852 && zzero_lte_i_72853;
        bool y_72856 = zzero_leq_i_p_m_t_s_72851 && y_72855;
        bool y_72857 = i_lte_j_72854 && y_72856;
        bool forwards_ok_72858 = zzero_lte_i_72853 && y_72857;
        bool ok_or_empty_72859 = empty_slice_64051 || forwards_ok_72858;
        bool index_certs_72860;
        
        if (!ok_or_empty_72859) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_72848, ":",
                          (long long) j_72849,
                          "] out of bounds for array of shape [",
                          (long long) n_64028, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_72861;
        int64_t flat_tid_66611 = (int64_t) 0;
        int32_t num_tasks_73528;
        struct futhark_mc_task_76583 futhark_mc_task_76583;
        
        futhark_mc_task_76583.ctx = ctx;
        futhark_mc_task_76583.free_mem_69892 = mem_69892.mem;
        futhark_mc_task_76583.free_defunc_0_g_res_72827 = defunc_0_g_res_72827;
        futhark_mc_task_76583.free_max_res_72848 = max_res_72848;
        futhark_mc_task_76583.retval_defunc_2_reduce_res_72861 =
            &defunc_2_reduce_res_72861;
        
        struct scheduler_segop futhark_mc_task_76583_task;
        
        futhark_mc_task_76583_task.args = &futhark_mc_task_76583;
        futhark_mc_task_76583_task.top_level_fn = futhark_mc_segred_task_76584;
        futhark_mc_task_76583_task.name = "futhark_mc_segred_task_76584";
        futhark_mc_task_76583_task.iterations = min_res_64046;
        futhark_mc_task_76583_task.task_time =
            &ctx->futhark_mc_segred_task_76584_total_time;
        futhark_mc_task_76583_task.task_iter =
            &ctx->futhark_mc_segred_task_76584_total_iter;
        futhark_mc_task_76583_task.sched = STATIC;
        futhark_mc_task_76583_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76584_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76583_task);
        
        if (futhark_mc_segred_task_76584_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_72869;
        int64_t idx_72870;
        int64_t idx_72871;
        int64_t idx_72872;
        int64_t best_idx_73422;
        int64_t last_idx_73423;
        int64_t best_sum_73424;
        int64_t curr_sum_73425;
        
        best_idx_73422 = max_res_72848;
        last_idx_73423 = max_res_72848;
        best_sum_73424 = defunc_2_reduce_res_72861;
        curr_sum_73425 = defunc_2_reduce_res_72861;
        for (int64_t j_73421 = 0; j_73421 < min_res_64046; j_73421++) {
            int64_t new_idx_73426 = add64(max_res_72848, j_73421);
            int64_t x_73427 = add64(min_res_64046, new_idx_73426);
            bool cond_73428 = slt64(last_res_66832, x_73427);
            int64_t new_sum_73429;
            
            if (cond_73428) {
                new_sum_73429 = (int64_t) 9223372036854775807;
            } else {
                bool x_73430 = sle64((int64_t) 0, last_idx_73423);
                bool y_73431 = slt64(last_idx_73423, n_64028);
                bool bounds_check_73432 = x_73430 && y_73431;
                bool index_certs_73433;
                
                if (!bounds_check_73432) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_73423,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_73434 = ((int64_t *) mem_69892.mem)[last_idx_73423];
                int64_t binop_p_73435 = sub64(defunc_0_g_res_72827, y_73434);
                int64_t defunc_0_f_res_73436 = abs64(binop_p_73435);
                int64_t x_73437 = sub64(curr_sum_73425, defunc_0_f_res_73436);
                int64_t min_arg_73438 = add64(min_res_64046, last_idx_73423);
                int64_t min_res_73439 = smin64(i_64040, min_arg_73438);
                bool x_73440 = sle64((int64_t) 0, min_res_73439);
                bool y_73441 = slt64(min_res_73439, n_64028);
                bool bounds_check_73442 = x_73440 && y_73441;
                bool index_certs_73443;
                
                if (!bounds_check_73442) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_73439,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_73444 = ((int64_t *) mem_69892.mem)[min_res_73439];
                int64_t binop_p_73445 = sub64(defunc_0_g_res_72827, y_73444);
                int64_t defunc_0_f_res_73446 = abs64(binop_p_73445);
                int64_t new_sum_f_res_73447 = add64(x_73437,
                                                    defunc_0_f_res_73446);
                
                new_sum_73429 = new_sum_f_res_73447;
            }
            
            bool cond_73448 = sle64(new_sum_73429, best_sum_73424);
            int64_t loopres_73449;
            
            if (cond_73448) {
                loopres_73449 = new_idx_73426;
            } else {
                loopres_73449 = best_idx_73422;
            }
            
            int64_t loopres_73450;
            
            if (cond_73448) {
                loopres_73450 = new_sum_73429;
            } else {
                loopres_73450 = best_sum_73424;
            }
            
            int64_t best_idx_tmp_73537 = loopres_73449;
            int64_t last_idx_tmp_73538 = new_idx_73426;
            int64_t best_sum_tmp_73539 = loopres_73450;
            int64_t curr_sum_tmp_73540 = new_sum_73429;
            
            best_idx_73422 = best_idx_tmp_73537;
            last_idx_73423 = last_idx_tmp_73538;
            best_sum_73424 = best_sum_tmp_73539;
            curr_sum_73425 = curr_sum_tmp_73540;
        }
        idx_72869 = best_idx_73422;
        idx_72870 = last_idx_73423;
        idx_72871 = best_sum_73424;
        idx_72872 = curr_sum_73425;
        
        int64_t min_res_72903 = smin64(min_arg_66844, idx_72869);
        int64_t x_72904 = add64(min_res_64046, min_res_72903);
        int64_t r_72905 = sub64(x_72904, (int64_t) 1);
        bool x_72906 = sle64((int64_t) 0, r_72905);
        bool y_72907 = slt64(r_72905, n_64028);
        bool bounds_check_72908 = x_72906 && y_72907;
        bool index_certs_72909;
        
        if (!bounds_check_72908) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_72905,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_72910 = ((int64_t *) mem_69883.mem)[r_72905];
        int64_t abs_arg_72911 = sub64(x_72910, min_res_72826);
        int64_t abs_res_72912 = abs64(abs_arg_72911);
        bool x_72913 = sle64((int64_t) 0, min_res_72903);
        bool y_72914 = slt64(min_res_72903, n_64028);
        bool bounds_check_72915 = x_72913 && y_72914;
        bool index_certs_72916;
        
        if (!bounds_check_72915) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_72903,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_72917 = ((int64_t *) mem_69883.mem)[min_res_72903];
        int64_t abs_arg_72918 = sub64(x_72917, min_res_72826);
        int64_t abs_res_72919 = abs64(abs_arg_72918);
        int64_t max_res_72920 = smax64(abs_res_72912, abs_res_72919);
        float defunc_0_f_res_72921 = sitofp_i64_f32(max_res_72920);
        float defunc_1_f_res_72922 = max_res_66848 + defunc_0_f_res_72921;
        float defunc_0_f_res_72923 = sitofp_i64_f32(min_res_72826);
        float defunc_2_reduce_res_72924;
        float defunc_2_reduce_res_72925;
        float defunc_2_reduce_res_72926;
        float defunc_2_reduce_res_72927;
        float defunc_2_reduce_res_72928;
        int64_t flat_tid_66613 = (int64_t) 0;
        int32_t num_tasks_73541;
        struct futhark_mc_task_76588 futhark_mc_task_76588;
        
        futhark_mc_task_76588.ctx = ctx;
        futhark_mc_task_76588.free_last_res_66832 = last_res_66832;
        futhark_mc_task_76588.free_mem_69886 = mem_69886.mem;
        futhark_mc_task_76588.free_mem_69895 = mem_69895.mem;
        futhark_mc_task_76588.free_min_res_72903 = min_res_72903;
        futhark_mc_task_76588.free_defunc_1_f_res_72922 = defunc_1_f_res_72922;
        futhark_mc_task_76588.free_defunc_0_f_res_72923 = defunc_0_f_res_72923;
        futhark_mc_task_76588.retval_defunc_2_reduce_res_72924 =
            &defunc_2_reduce_res_72924;
        futhark_mc_task_76588.retval_defunc_2_reduce_res_72925 =
            &defunc_2_reduce_res_72925;
        futhark_mc_task_76588.retval_defunc_2_reduce_res_72926 =
            &defunc_2_reduce_res_72926;
        futhark_mc_task_76588.retval_defunc_2_reduce_res_72927 =
            &defunc_2_reduce_res_72927;
        futhark_mc_task_76588.retval_defunc_2_reduce_res_72928 =
            &defunc_2_reduce_res_72928;
        
        struct scheduler_segop futhark_mc_task_76588_task;
        
        futhark_mc_task_76588_task.args = &futhark_mc_task_76588;
        futhark_mc_task_76588_task.top_level_fn = futhark_mc_segred_task_76589;
        futhark_mc_task_76588_task.name = "futhark_mc_segred_task_76589";
        futhark_mc_task_76588_task.iterations = q_64030;
        futhark_mc_task_76588_task.task_time =
            &ctx->futhark_mc_segred_task_76589_total_time;
        futhark_mc_task_76588_task.task_iter =
            &ctx->futhark_mc_segred_task_76589_total_iter;
        futhark_mc_task_76588_task.sched = STATIC;
        futhark_mc_task_76588_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76589_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76588_task);
        
        if (futhark_mc_segred_task_76589_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_72963 = defunc_2_reduce_res_72926 * defunc_2_reduce_res_72928;
        float y_72964 = defunc_2_reduce_res_72927 * defunc_2_reduce_res_72927;
        float a12_72965 = x_72963 - y_72964;
        float x_72966 = defunc_2_reduce_res_72926 * defunc_2_reduce_res_72927;
        float y_72967 = defunc_2_reduce_res_72925 * defunc_2_reduce_res_72928;
        float b12_72968 = x_72966 - y_72967;
        float x_72969 = defunc_2_reduce_res_72925 * defunc_2_reduce_res_72927;
        float y_72970 = defunc_2_reduce_res_72926 * defunc_2_reduce_res_72926;
        float c12_72971 = x_72969 - y_72970;
        float x_72972 = defunc_2_reduce_res_72924 * defunc_2_reduce_res_72928;
        float b2_72973 = x_72972 - y_72970;
        float x_72974 = defunc_2_reduce_res_72925 * defunc_2_reduce_res_72926;
        float y_72975 = defunc_2_reduce_res_72924 * defunc_2_reduce_res_72927;
        float c2_72976 = x_72974 - y_72975;
        float x_72977 = defunc_2_reduce_res_72924 * a12_72965;
        float y_72978 = defunc_2_reduce_res_72925 * b12_72968;
        float x_72979 = x_72977 + y_72978;
        float y_72980 = defunc_2_reduce_res_72926 * c12_72971;
        float y_72981 = x_72979 + y_72980;
        float det_72982 = 1.0F / y_72981;
        float a12_72983 = a12_72965 * det_72982;
        float b12_72984 = b12_72968 * det_72982;
        float c12_72985 = c12_72971 * det_72982;
        float b2_72986 = b2_72973 * det_72982;
        float c2_72987 = c2_72976 * det_72982;
        float defunc_2_reduce_res_72988;
        float defunc_2_reduce_res_72989;
        int64_t flat_tid_66615 = (int64_t) 0;
        int32_t num_tasks_73574;
        struct futhark_mc_task_76597 futhark_mc_task_76597;
        
        futhark_mc_task_76597.ctx = ctx;
        futhark_mc_task_76597.free_last_res_66832 = last_res_66832;
        futhark_mc_task_76597.free_mem_69880 = mem_69880.mem;
        futhark_mc_task_76597.free_mem_69886 = mem_69886.mem;
        futhark_mc_task_76597.free_mem_69895 = mem_69895.mem;
        futhark_mc_task_76597.free_min_res_72903 = min_res_72903;
        futhark_mc_task_76597.free_defunc_1_f_res_72922 = defunc_1_f_res_72922;
        futhark_mc_task_76597.free_defunc_0_f_res_72923 = defunc_0_f_res_72923;
        futhark_mc_task_76597.free_a12_72983 = a12_72983;
        futhark_mc_task_76597.free_b12_72984 = b12_72984;
        futhark_mc_task_76597.free_c12_72985 = c12_72985;
        futhark_mc_task_76597.free_b2_72986 = b2_72986;
        futhark_mc_task_76597.free_c2_72987 = c2_72987;
        futhark_mc_task_76597.retval_defunc_2_reduce_res_72988 =
            &defunc_2_reduce_res_72988;
        futhark_mc_task_76597.retval_defunc_2_reduce_res_72989 =
            &defunc_2_reduce_res_72989;
        
        struct scheduler_segop futhark_mc_task_76597_task;
        
        futhark_mc_task_76597_task.args = &futhark_mc_task_76597;
        futhark_mc_task_76597_task.top_level_fn = futhark_mc_segred_task_76598;
        futhark_mc_task_76597_task.name = "futhark_mc_segred_task_76598";
        futhark_mc_task_76597_task.iterations = q_64030;
        futhark_mc_task_76597_task.task_time =
            &ctx->futhark_mc_segred_task_76598_total_time;
        futhark_mc_task_76597_task.task_iter =
            &ctx->futhark_mc_segred_task_76598_total_iter;
        futhark_mc_task_76597_task.sched = STATIC;
        futhark_mc_task_76597_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76598_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76597_task);
        
        if (futhark_mc_segred_task_76598_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_69898.mem)[gtid_66610] = defunc_2_reduce_res_72988;
        ((float *) mem_69901.mem)[gtid_66610] = defunc_2_reduce_res_72989;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76582_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76582_end -
                 futhark_mc_segmap_parloop_76582_start;
        
        ctx->futhark_mc_segmap_parloop_76582_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76582_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76582_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76580(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66609 = tid;
    int num_tasks_73258 = info.nsubtasks;
    struct futhark_mc_task_76576 *futhark_mc_task_76576 =
                                 (struct futhark_mc_task_76576 *) args;
    struct futhark_context *ctx = futhark_mc_task_76576->ctx;
    uint64_t futhark_mc_segmap_nested_task_76580_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76580_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76576->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76576->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76576->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76576->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76576->free_i_64040;
    bool x_64041 = futhark_mc_task_76576->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76576->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76576->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76576->free_m_64052;
    int64_t last_res_66832 = futhark_mc_task_76576->free_last_res_66832;
    int64_t min_arg_66844 = futhark_mc_task_76576->free_min_arg_66844;
    float max_res_66848 = futhark_mc_task_76576->free_max_res_66848;
    struct memblock mem_69880 = {.desc ="mem_69880", .mem =
                                 futhark_mc_task_76576->free_mem_69880, .size =
                                 0, .references =NULL};
    struct memblock mem_69883 = {.desc ="mem_69883", .mem =
                                 futhark_mc_task_76576->free_mem_69883, .size =
                                 0, .references =NULL};
    struct memblock mem_69886 = {.desc ="mem_69886", .mem =
                                 futhark_mc_task_76576->free_mem_69886, .size =
                                 0, .references =NULL};
    struct memblock mem_69889 = {.desc ="mem_69889", .mem =
                                 futhark_mc_task_76576->free_mem_69889, .size =
                                 0, .references =NULL};
    struct memblock mem_69892 = {.desc ="mem_69892", .mem =
                                 futhark_mc_task_76576->free_mem_69892, .size =
                                 0, .references =NULL};
    struct memblock mem_69895 = {.desc ="mem_69895", .mem =
                                 futhark_mc_task_76576->free_mem_69895, .size =
                                 0, .references =NULL};
    struct memblock mem_69898 = {.desc ="mem_69898", .mem =
                                 futhark_mc_task_76576->free_mem_69898, .size =
                                 0, .references =NULL};
    struct memblock mem_69901 = {.desc ="mem_69901", .mem =
                                 futhark_mc_task_76576->free_mem_69901, .size =
                                 0, .references =NULL};
    int64_t iter_73397;
    struct futhark_mc_segmap_parloop_struct_76581
    futhark_mc_segmap_parloop_struct_76581;
    
    futhark_mc_segmap_parloop_struct_76581.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76581.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76581.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76581.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76581.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76581.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76581.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76581.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76581.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76581.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76581.free_last_res_66832 = last_res_66832;
    futhark_mc_segmap_parloop_struct_76581.free_min_arg_66844 = min_arg_66844;
    futhark_mc_segmap_parloop_struct_76581.free_max_res_66848 = max_res_66848;
    futhark_mc_segmap_parloop_struct_76581.free_mem_69880 = mem_69880.mem;
    futhark_mc_segmap_parloop_struct_76581.free_mem_69883 = mem_69883.mem;
    futhark_mc_segmap_parloop_struct_76581.free_mem_69886 = mem_69886.mem;
    futhark_mc_segmap_parloop_struct_76581.free_mem_69889 = mem_69889.mem;
    futhark_mc_segmap_parloop_struct_76581.free_mem_69892 = mem_69892.mem;
    futhark_mc_segmap_parloop_struct_76581.free_mem_69895 = mem_69895.mem;
    futhark_mc_segmap_parloop_struct_76581.free_mem_69898 = mem_69898.mem;
    futhark_mc_segmap_parloop_struct_76581.free_mem_69901 = mem_69901.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76582_task;
    
    futhark_mc_segmap_parloop_76582_task.name =
        "futhark_mc_segmap_parloop_76582";
    futhark_mc_segmap_parloop_76582_task.fn = futhark_mc_segmap_parloop_76582;
    futhark_mc_segmap_parloop_76582_task.args =
        &futhark_mc_segmap_parloop_struct_76581;
    futhark_mc_segmap_parloop_76582_task.iterations = iterations;
    futhark_mc_segmap_parloop_76582_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76582_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76582_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76582_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76582_task);
    
    if (futhark_mc_segmap_parloop_76582_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76582_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76582_total_end -
                 futhark_mc_segmap_parloop_76582_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76582_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76582_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76582_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76580_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76580_end -
                 futhark_mc_segmap_nested_task_76580_start;
        
        ctx->futhark_mc_segmap_nested_task_76580_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76580_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76580_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76547(void *args, int64_t start,
                                           int64_t end, int flat_tid_66597,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76546
    *futhark_mc_segmap_parloop_struct_76546 =
    (struct futhark_mc_segmap_parloop_struct_76546 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76546->ctx;
    uint64_t futhark_mc_segmap_parloop_76547_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76547_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_segmap_parloop_struct_76546->free_m_64027;
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76546->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76546->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76546->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76546->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76546->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76546->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76546->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76546->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76546->free_m_64052;
    float i64_res_64053 =
          futhark_mc_segmap_parloop_struct_76546->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76546->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_69875 =
            futhark_mc_segmap_parloop_struct_76546->free_bytes_69875;
    int64_t bytes_69878 =
            futhark_mc_segmap_parloop_struct_76546->free_bytes_69878;
    int64_t bytes_69893 =
            futhark_mc_segmap_parloop_struct_76546->free_bytes_69893;
    int64_t bytes_69896 =
            futhark_mc_segmap_parloop_struct_76546->free_bytes_69896;
    struct memblock mem_70040 = {.desc ="mem_70040", .mem =
                                 futhark_mc_segmap_parloop_struct_76546->free_mem_70040,
                                 .size =0, .references =NULL};
    struct memblock mem_70044 = {.desc ="mem_70044", .mem =
                                 futhark_mc_segmap_parloop_struct_76546->free_mem_70044,
                                 .size =0, .references =NULL};
    size_t mem_69877_cached_sizze_76548 = 0;
    char *mem_69877 = NULL;
    size_t mem_69880_cached_sizze_76549 = 0;
    char *mem_69880 = NULL;
    size_t mem_69883_cached_sizze_76550 = 0;
    char *mem_69883 = NULL;
    size_t mem_69886_cached_sizze_76551 = 0;
    char *mem_69886 = NULL;
    size_t mem_69889_cached_sizze_76552 = 0;
    char *mem_69889 = NULL;
    size_t mem_69892_cached_sizze_76553 = 0;
    char *mem_69892 = NULL;
    size_t mem_69895_cached_sizze_76554 = 0;
    char *mem_69895 = NULL;
    size_t mem_69898_cached_sizze_76555 = 0;
    char *mem_69898 = NULL;
    size_t mem_69901_cached_sizze_76556 = 0;
    char *mem_69901 = NULL;
    int64_t iterations = end - start;
    int64_t iter_72804 = start;
    
    if (mem_69877_cached_sizze_76548 < (size_t) bytes_69875) {
        mem_69877 = realloc(mem_69877, bytes_69875);
        mem_69877_cached_sizze_76548 = bytes_69875;
    }
    if (mem_69880_cached_sizze_76549 < (size_t) bytes_69878) {
        mem_69880 = realloc(mem_69880, bytes_69878);
        mem_69880_cached_sizze_76549 = bytes_69878;
    }
    if (mem_69883_cached_sizze_76550 < (size_t) bytes_69875) {
        mem_69883 = realloc(mem_69883, bytes_69875);
        mem_69883_cached_sizze_76550 = bytes_69875;
    }
    if (mem_69886_cached_sizze_76551 < (size_t) bytes_69878) {
        mem_69886 = realloc(mem_69886, bytes_69878);
        mem_69886_cached_sizze_76551 = bytes_69878;
    }
    if (mem_69889_cached_sizze_76552 < (size_t) bytes_69875) {
        mem_69889 = realloc(mem_69889, bytes_69875);
        mem_69889_cached_sizze_76552 = bytes_69875;
    }
    if (mem_69892_cached_sizze_76553 < (size_t) bytes_69875) {
        mem_69892 = realloc(mem_69892, bytes_69875);
        mem_69892_cached_sizze_76553 = bytes_69875;
    }
    if (mem_69895_cached_sizze_76554 < (size_t) bytes_69893) {
        mem_69895 = realloc(mem_69895, bytes_69893);
        mem_69895_cached_sizze_76554 = bytes_69893;
    }
    if (mem_69898_cached_sizze_76555 < (size_t) bytes_69896) {
        mem_69898 = realloc(mem_69898, bytes_69896);
        mem_69898_cached_sizze_76555 = bytes_69896;
    }
    if (mem_69901_cached_sizze_76556 < (size_t) bytes_69896) {
        mem_69901 = realloc(mem_69901, bytes_69896);
        mem_69901_cached_sizze_76556 = bytes_69896;
    }
    for (; iter_72804 < end; iter_72804++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73226 = m_64027;
        int64_t gtid_66598 = iter_72804;
        int64_t remnant_73227 = iter_72804 - gtid_66598;
        int64_t flat_tid_66599 = (int64_t) 0;
        int32_t num_tasks_73228;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_76557 futhark_mc_task_76557;
        
        futhark_mc_task_76557.ctx = ctx;
        futhark_mc_task_76557.free_n_64028 = n_64028;
        futhark_mc_task_76557.free_gtid_66598 = gtid_66598;
        futhark_mc_task_76557.free_Y_mem_69552 = Y_mem_69552.mem;
        futhark_mc_task_76557.free_mem_69877 = mem_69877;
        
        struct scheduler_segop futhark_mc_task_76557_task;
        
        futhark_mc_task_76557_task.args = &futhark_mc_task_76557;
        futhark_mc_task_76557_task.top_level_fn = futhark_mc_segscan_task_76558;
        futhark_mc_task_76557_task.name = "futhark_mc_segscan_task_76558";
        futhark_mc_task_76557_task.iterations = n_64028;
        futhark_mc_task_76557_task.task_time =
            &ctx->futhark_mc_segscan_task_76558_total_time;
        futhark_mc_task_76557_task.task_iter =
            &ctx->futhark_mc_segscan_task_76558_total_iter;
        futhark_mc_task_76557_task.sched = STATIC;
        futhark_mc_task_76557_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_76558_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76557_task);
        
        if (futhark_mc_segscan_task_76558_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_66832 = ((int64_t *) mem_69877)[i_64040];
        
        for (int64_t i_73242 = 0; i_73242 < n_64028; i_73242++) {
            ((float *) mem_69880)[i_73242] = 0.0F;
        }
        for (int64_t i_73243 = 0; i_73243 < n_64028; i_73243++) {
            ((int64_t *) mem_69883)[i_73243] = (int64_t) -1;
        }
        
        int64_t flat_tid_66601 = (int64_t) 0;
        int32_t num_tasks_73244;
        struct futhark_mc_task_76564 futhark_mc_task_76564;
        
        futhark_mc_task_76564.ctx = ctx;
        futhark_mc_task_76564.free_n_64028 = n_64028;
        futhark_mc_task_76564.free_gtid_66598 = gtid_66598;
        futhark_mc_task_76564.free_Y_mem_69552 = Y_mem_69552.mem;
        futhark_mc_task_76564.free_mem_69877 = mem_69877;
        futhark_mc_task_76564.free_mem_69880 = mem_69880;
        futhark_mc_task_76564.free_mem_69883 = mem_69883;
        
        struct scheduler_segop futhark_mc_task_76564_task;
        
        futhark_mc_task_76564_task.args = &futhark_mc_task_76564;
        futhark_mc_task_76564_task.top_level_fn = futhark_mc_segmap_task_76565;
        futhark_mc_task_76564_task.name = "futhark_mc_segmap_task_76565";
        futhark_mc_task_76564_task.iterations = n_64028;
        futhark_mc_task_76564_task.task_time =
            &ctx->futhark_mc_segmap_task_76565_total_time;
        futhark_mc_task_76564_task.task_iter =
            &ctx->futhark_mc_segmap_task_76565_total_iter;
        futhark_mc_task_76564_task.sched = STATIC;
        futhark_mc_task_76564_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76565_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76564_task);
        
        if (futhark_mc_segmap_task_76565_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_66844 = sub64(last_res_66832, min_res_64046);
        float i64_res_66845 = sitofp_i64_f32(last_res_66832);
        float x_66846 = i64_res_64053 - i64_res_66845;
        float max_arg_66847 = x_66846 / 2.0F;
        float max_res_66848 = fmax32(0.0F, max_arg_66847);
        int64_t flat_tid_66603 = (int64_t) 0;
        int32_t num_tasks_73250;
        struct futhark_mc_task_76568 futhark_mc_task_76568;
        
        futhark_mc_task_76568.ctx = ctx;
        futhark_mc_task_76568.free_n_64028 = n_64028;
        futhark_mc_task_76568.free_mem_69883 = mem_69883;
        futhark_mc_task_76568.free_mem_69886 = mem_69886;
        futhark_mc_task_76568.free_mem_69889 = mem_69889;
        futhark_mc_task_76568.free_mem_69892 = mem_69892;
        
        struct scheduler_segop futhark_mc_task_76568_task;
        
        futhark_mc_task_76568_task.args = &futhark_mc_task_76568;
        futhark_mc_task_76568_task.top_level_fn = futhark_mc_segmap_task_76569;
        futhark_mc_task_76568_task.name = "futhark_mc_segmap_task_76569";
        futhark_mc_task_76568_task.iterations = n_64028;
        futhark_mc_task_76568_task.task_time =
            &ctx->futhark_mc_segmap_task_76569_total_time;
        futhark_mc_task_76568_task.task_iter =
            &ctx->futhark_mc_segmap_task_76569_total_iter;
        futhark_mc_task_76568_task.sched = STATIC;
        futhark_mc_task_76568_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76569_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76568_task);
        
        if (futhark_mc_segmap_task_76569_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_66605 = (int64_t) 0;
        int32_t num_tasks_73254;
        struct futhark_mc_task_76572 futhark_mc_task_76572;
        
        futhark_mc_task_76572.ctx = ctx;
        futhark_mc_task_76572.free_q_64030 = q_64030;
        futhark_mc_task_76572.free_last_res_66832 = last_res_66832;
        futhark_mc_task_76572.free_mem_69895 = mem_69895;
        
        struct scheduler_segop futhark_mc_task_76572_task;
        
        futhark_mc_task_76572_task.args = &futhark_mc_task_76572;
        futhark_mc_task_76572_task.top_level_fn = futhark_mc_segmap_task_76573;
        futhark_mc_task_76572_task.name = "futhark_mc_segmap_task_76573";
        futhark_mc_task_76572_task.iterations = q_64030;
        futhark_mc_task_76572_task.task_time =
            &ctx->futhark_mc_segmap_task_76573_total_time;
        futhark_mc_task_76572_task.task_iter =
            &ctx->futhark_mc_segmap_task_76573_total_iter;
        futhark_mc_task_76572_task.sched = STATIC;
        futhark_mc_task_76572_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76573_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76572_task);
        
        if (futhark_mc_segmap_task_76573_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_66607 = (int64_t) 0;
        int32_t num_tasks_73258;
        int64_t flat_tid_66609 = (int64_t) 0;
        struct futhark_mc_task_76576 futhark_mc_task_76576;
        
        futhark_mc_task_76576.ctx = ctx;
        futhark_mc_task_76576.free_n_64028 = n_64028;
        futhark_mc_task_76576.free_q_64030 = q_64030;
        futhark_mc_task_76576.free_jump_64032 = jump_64032;
        futhark_mc_task_76576.free_n_m_64039 = n_m_64039;
        futhark_mc_task_76576.free_i_64040 = i_64040;
        futhark_mc_task_76576.free_x_64041 = x_64041;
        futhark_mc_task_76576.free_min_res_64046 = min_res_64046;
        futhark_mc_task_76576.free_empty_slice_64051 = empty_slice_64051;
        futhark_mc_task_76576.free_m_64052 = m_64052;
        futhark_mc_task_76576.free_last_res_66832 = last_res_66832;
        futhark_mc_task_76576.free_min_arg_66844 = min_arg_66844;
        futhark_mc_task_76576.free_max_res_66848 = max_res_66848;
        futhark_mc_task_76576.free_mem_69880 = mem_69880;
        futhark_mc_task_76576.free_mem_69883 = mem_69883;
        futhark_mc_task_76576.free_mem_69886 = mem_69886;
        futhark_mc_task_76576.free_mem_69889 = mem_69889;
        futhark_mc_task_76576.free_mem_69892 = mem_69892;
        futhark_mc_task_76576.free_mem_69895 = mem_69895;
        futhark_mc_task_76576.free_mem_69898 = mem_69898;
        futhark_mc_task_76576.free_mem_69901 = mem_69901;
        
        struct scheduler_segop futhark_mc_task_76576_task;
        
        futhark_mc_task_76576_task.args = &futhark_mc_task_76576;
        futhark_mc_task_76576_task.top_level_fn = futhark_mc_segmap_task_76577;
        futhark_mc_task_76576_task.name = "futhark_mc_segmap_task_76577";
        futhark_mc_task_76576_task.iterations = n_m_64039;
        futhark_mc_task_76576_task.task_time =
            &ctx->futhark_mc_segmap_task_76577_total_time;
        futhark_mc_task_76576_task.task_iter =
            &ctx->futhark_mc_segmap_task_76577_total_iter;
        futhark_mc_task_76576_task.sched = DYNAMIC;
        futhark_mc_task_76576_task.nested_fn =
            futhark_mc_segmap_nested_task_76580;
        
        int futhark_mc_segmap_task_76577_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76576_task);
        
        if (futhark_mc_segmap_task_76577_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_70040.mem + gtid_66598 * n_m_64039 * (int64_t) 4,
                mem_69898 + (int64_t) 0, n_m_64039 * (int64_t) 4);
        memmove(mem_70044.mem + gtid_66598 * n_m_64039 * (int64_t) 4,
                mem_69901 + (int64_t) 0, n_m_64039 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_69877);
    free(mem_69880);
    free(mem_69883);
    free(mem_69886);
    free(mem_69889);
    free(mem_69892);
    free(mem_69895);
    free(mem_69898);
    free(mem_69901);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76547_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76547_end -
                 futhark_mc_segmap_parloop_76547_start;
        
        ctx->futhark_mc_segmap_parloop_76547_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76547_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76547_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76545(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66597 = tid;
    int num_tasks_72532 = info.nsubtasks;
    struct futhark_mc_task_76532 *futhark_mc_task_76532 =
                                 (struct futhark_mc_task_76532 *) args;
    struct futhark_context *ctx = futhark_mc_task_76532->ctx;
    uint64_t futhark_mc_segmap_nested_task_76545_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76545_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_task_76532->free_m_64027;
    int64_t n_64028 = futhark_mc_task_76532->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76532->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76532->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76532->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76532->free_i_64040;
    bool x_64041 = futhark_mc_task_76532->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76532->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76532->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76532->free_m_64052;
    float i64_res_64053 = futhark_mc_task_76532->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76532->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_69875 = futhark_mc_task_76532->free_bytes_69875;
    int64_t bytes_69878 = futhark_mc_task_76532->free_bytes_69878;
    int64_t bytes_69893 = futhark_mc_task_76532->free_bytes_69893;
    int64_t bytes_69896 = futhark_mc_task_76532->free_bytes_69896;
    struct memblock mem_70040 = {.desc ="mem_70040", .mem =
                                 futhark_mc_task_76532->free_mem_70040, .size =
                                 0, .references =NULL};
    struct memblock mem_70044 = {.desc ="mem_70044", .mem =
                                 futhark_mc_task_76532->free_mem_70044, .size =
                                 0, .references =NULL};
    int64_t iter_72804;
    struct futhark_mc_segmap_parloop_struct_76546
    futhark_mc_segmap_parloop_struct_76546;
    
    futhark_mc_segmap_parloop_struct_76546.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76546.free_m_64027 = m_64027;
    futhark_mc_segmap_parloop_struct_76546.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76546.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76546.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76546.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76546.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76546.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76546.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76546.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76546.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76546.free_i64_res_64053 = i64_res_64053;
    futhark_mc_segmap_parloop_struct_76546.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76546.free_bytes_69875 = bytes_69875;
    futhark_mc_segmap_parloop_struct_76546.free_bytes_69878 = bytes_69878;
    futhark_mc_segmap_parloop_struct_76546.free_bytes_69893 = bytes_69893;
    futhark_mc_segmap_parloop_struct_76546.free_bytes_69896 = bytes_69896;
    futhark_mc_segmap_parloop_struct_76546.free_mem_70040 = mem_70040.mem;
    futhark_mc_segmap_parloop_struct_76546.free_mem_70044 = mem_70044.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76547_task;
    
    futhark_mc_segmap_parloop_76547_task.name =
        "futhark_mc_segmap_parloop_76547";
    futhark_mc_segmap_parloop_76547_task.fn = futhark_mc_segmap_parloop_76547;
    futhark_mc_segmap_parloop_76547_task.args =
        &futhark_mc_segmap_parloop_struct_76546;
    futhark_mc_segmap_parloop_76547_task.iterations = iterations;
    futhark_mc_segmap_parloop_76547_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76547_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76547_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76547_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76547_task);
    
    if (futhark_mc_segmap_parloop_76547_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76547_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76547_total_end -
                 futhark_mc_segmap_parloop_76547_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76547_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76547_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76547_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76545_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76545_end -
                 futhark_mc_segmap_nested_task_76545_start;
        
        ctx->futhark_mc_segmap_nested_task_76545_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76545_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76545_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76603 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_70053;
    int64_t free_bytes_70056;
    int64_t free_bytes_70071;
    int64_t free_bytes_70092;
    char *free_mem_70233;
};
struct futhark_mc_segmap_parloop_struct_76605 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_70053;
    int64_t free_bytes_70056;
    int64_t free_bytes_70071;
    int64_t free_bytes_70092;
    char *free_mem_70233;
};
static int futhark_mc_segmap_parloop_76606(void *args, int64_t start,
                                           int64_t end, int flat_tid_67275,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76605
    *futhark_mc_segmap_parloop_struct_76605 =
    (struct futhark_mc_segmap_parloop_struct_76605 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76605->ctx;
    uint64_t futhark_mc_segmap_parloop_76606_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76606_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_segmap_parloop_struct_76605->free_m_64027;
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76605->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76605->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76605->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76605->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76605->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76605->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76605->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76605->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76605->free_m_64052;
    float i64_res_64053 =
          futhark_mc_segmap_parloop_struct_76605->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76605->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_70053 =
            futhark_mc_segmap_parloop_struct_76605->free_bytes_70053;
    int64_t bytes_70056 =
            futhark_mc_segmap_parloop_struct_76605->free_bytes_70056;
    int64_t bytes_70071 =
            futhark_mc_segmap_parloop_struct_76605->free_bytes_70071;
    int64_t bytes_70092 =
            futhark_mc_segmap_parloop_struct_76605->free_bytes_70092;
    struct memblock mem_70233 = {.desc ="mem_70233", .mem =
                                 futhark_mc_segmap_parloop_struct_76605->free_mem_70233,
                                 .size =0, .references =NULL};
    size_t mem_70097_cached_sizze_76607 = 0;
    char *mem_70097 = NULL;
    size_t mem_70112_cached_sizze_76608 = 0;
    char *mem_70112 = NULL;
    size_t mem_70115_cached_sizze_76609 = 0;
    char *mem_70115 = NULL;
    size_t mem_70142_cached_sizze_76610 = 0;
    char *mem_70142 = NULL;
    size_t mem_70145_cached_sizze_76611 = 0;
    char *mem_70145 = NULL;
    size_t mem_70148_cached_sizze_76612 = 0;
    char *mem_70148 = NULL;
    size_t mem_70187_cached_sizze_76613 = 0;
    char *mem_70187 = NULL;
    size_t mem_70202_cached_sizze_76614 = 0;
    char *mem_70202 = NULL;
    size_t mem_70212_cached_sizze_76615 = 0;
    char *mem_70212 = NULL;
    int64_t iterations = end - start;
    int64_t iter_73592 = start;
    
    if (mem_70097_cached_sizze_76607 < (size_t) bytes_70053) {
        mem_70097 = realloc(mem_70097, bytes_70053);
        mem_70097_cached_sizze_76607 = bytes_70053;
    }
    if (mem_70112_cached_sizze_76608 < (size_t) bytes_70056) {
        mem_70112 = realloc(mem_70112, bytes_70056);
        mem_70112_cached_sizze_76608 = bytes_70056;
    }
    if (mem_70115_cached_sizze_76609 < (size_t) bytes_70053) {
        mem_70115 = realloc(mem_70115, bytes_70053);
        mem_70115_cached_sizze_76609 = bytes_70053;
    }
    if (mem_70142_cached_sizze_76610 < (size_t) bytes_70056) {
        mem_70142 = realloc(mem_70142, bytes_70056);
        mem_70142_cached_sizze_76610 = bytes_70056;
    }
    if (mem_70145_cached_sizze_76611 < (size_t) bytes_70053) {
        mem_70145 = realloc(mem_70145, bytes_70053);
        mem_70145_cached_sizze_76611 = bytes_70053;
    }
    if (mem_70148_cached_sizze_76612 < (size_t) bytes_70053) {
        mem_70148 = realloc(mem_70148, bytes_70053);
        mem_70148_cached_sizze_76612 = bytes_70053;
    }
    if (mem_70187_cached_sizze_76613 < (size_t) bytes_70071) {
        mem_70187 = realloc(mem_70187, bytes_70071);
        mem_70187_cached_sizze_76613 = bytes_70071;
    }
    if (mem_70202_cached_sizze_76614 < (size_t) bytes_70092) {
        mem_70202 = realloc(mem_70202, bytes_70092);
        mem_70202_cached_sizze_76614 = bytes_70092;
    }
    if (mem_70212_cached_sizze_76615 < (size_t) bytes_70071) {
        mem_70212 = realloc(mem_70212, bytes_70071);
        mem_70212_cached_sizze_76615 = bytes_70071;
    }
    for (; iter_73592 < end; iter_73592++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73768 = m_64027;
        int64_t gtid_67276 = iter_73592;
        int64_t remnant_73769 = iter_73592 - gtid_67276;
        int64_t discard_69254;
        int64_t scanacc_73594 = (int64_t) 0;
        
        for (int64_t i_73593 = 0; i_73593 < n_64028; i_73593++) {
            float x_73596 = ((float *) Y_mem_69552.mem)[gtid_67276 * n_64028 +
                                                        i_73593];
            bool isnan_res_73597;
            
            isnan_res_73597 = futrts_isnan32(x_73596);
            
            bool defunc_0_p_res_73598 = !isnan_res_73597;
            int64_t defunc_0_f_res_73599 = btoi_bool_i64(defunc_0_p_res_73598);
            int64_t defunc_1_op_res_73600 = add64(defunc_0_f_res_73599,
                                                  scanacc_73594);
            
            ((int64_t *) mem_70097)[i_73593] = defunc_1_op_res_73600;
            
            int64_t scanacc_tmp_73770 = defunc_1_op_res_73600;
            
            scanacc_73594 = scanacc_tmp_73770;
        }
        discard_69254 = scanacc_73594;
        
        int64_t last_res_64769 = ((int64_t *) mem_70097)[i_64040];
        
        for (int64_t i_73772 = 0; i_73772 < n_64028; i_73772++) {
            ((float *) mem_70112)[i_73772] = 0.0F;
        }
        for (int64_t i_73773 = 0; i_73773 < n_64028; i_73773++) {
            ((int64_t *) mem_70115)[i_73773] = (int64_t) -1;
        }
        for (int64_t write_iter_73602 = 0; write_iter_73602 < n_64028;
             write_iter_73602++) {
            float write_iv_73605 = ((float *) Y_mem_69552.mem)[gtid_67276 *
                                                               n_64028 +
                                                               write_iter_73602];
            bool isnan_res_73606;
            
            isnan_res_73606 = futrts_isnan32(write_iv_73605);
            
            bool defunc_0_p_res_73607 = !isnan_res_73606;
            int64_t defunc_1_f_res_73608;
            
            if (defunc_0_p_res_73607) {
                int64_t write_iv_73609 =
                        ((int64_t *) mem_70097)[write_iter_73602];
                int64_t defunc_1_f_res_t_res_73610 = sub64(write_iv_73609,
                                                           (int64_t) 1);
                
                defunc_1_f_res_73608 = defunc_1_f_res_t_res_73610;
            } else {
                defunc_1_f_res_73608 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_73608) &&
                slt64(defunc_1_f_res_73608, n_64028)) {
                ((int64_t *) mem_70115)[defunc_1_f_res_73608] =
                    write_iter_73602;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_73608) &&
                slt64(defunc_1_f_res_73608, n_64028)) {
                memmove(mem_70112 + defunc_1_f_res_73608 * (int64_t) 4,
                        Y_mem_69552.mem + (gtid_67276 * n_64028 +
                                           write_iter_73602) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_64787 = sub64(last_res_64769, min_res_64046);
        float i64_res_64788 = sitofp_i64_f32(last_res_64769);
        float x_64789 = i64_res_64053 - i64_res_64788;
        float max_arg_64790 = x_64789 / 2.0F;
        float max_res_64791 = fmax32(0.0F, max_arg_64790);
        
        for (int64_t i_73614 = 0; i_73614 < n_64028; i_73614++) {
            int64_t x_73618 = ((int64_t *) mem_70115)[i_73614];
            int64_t defunc_0_f_res_73619 = add64((int64_t) 1, x_73618);
            bool cond_73620 = slt64(defunc_0_f_res_73619, (int64_t) 0);
            int64_t defunc_0_f_res_73621;
            
            if (cond_73620) {
                defunc_0_f_res_73621 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_73621 = defunc_0_f_res_73619;
            }
            
            float defunc_0_f_res_73622 = sitofp_i64_f32(x_73618);
            
            ((float *) mem_70142)[i_73614] = defunc_0_f_res_73622;
            ((int64_t *) mem_70145)[i_73614] = defunc_0_f_res_73621;
            ((int64_t *) mem_70148)[i_73614] = defunc_0_f_res_73619;
        }
        for (int64_t i_73626 = 0; i_73626 < q_64030; i_73626++) {
            bool cond_73628 = sle64(last_res_64769, i_73626);
            float defunc_0_f_res_73629;
            
            if (cond_73628) {
                defunc_0_f_res_73629 = 0.0F;
            } else {
                defunc_0_f_res_73629 = 1.0F;
            }
            ((float *) mem_70187)[i_73626] = defunc_0_f_res_73629;
        }
        for (int64_t i_73631 = 0; i_73631 < n_m_64039; i_73631++) {
            int64_t min_arg_73633 = mul64(jump_64032, i_73631);
            int64_t min_res_73634 = smin64(i_64040, min_arg_73633);
            int64_t defunc_0_g_res_73635 = add64((int64_t) 1, min_res_73634);
            bool nearest_idx_73636;
            int64_t nearest_idx_73637;
            int64_t nearest_idx_73638;
            bool loop_while_73639;
            int64_t low_73640;
            int64_t high_73641;
            
            loop_while_73639 = x_64041;
            low_73640 = (int64_t) 0;
            high_73641 = i_64040;
            while (loop_while_73639) {
                int64_t x_73642 = add64(low_73640, high_73641);
                int64_t mid_73643 = sdiv64(x_73642, (int64_t) 2);
                bool x_73644 = sle64((int64_t) 0, mid_73643);
                bool y_73645 = slt64(mid_73643, n_64028);
                bool bounds_check_73646 = x_73644 && y_73645;
                bool index_certs_73647;
                
                if (!bounds_check_73646) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_73643,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t x_73648 = ((int64_t *) mem_70145)[mid_73643];
                bool cond_73649 = sle64(defunc_0_g_res_73635, x_73648);
                int64_t loopres_73650;
                int64_t loopres_73651;
                
                if (cond_73649) {
                    int64_t loopres_t_res_73652 = sub64(mid_73643, (int64_t) 1);
                    
                    loopres_73650 = low_73640;
                    loopres_73651 = loopres_t_res_73652;
                } else {
                    int64_t loopres_f_res_73653 = add64((int64_t) 1, mid_73643);
                    
                    loopres_73650 = loopres_f_res_73653;
                    loopres_73651 = high_73641;
                }
                
                bool loop_cond_73654 = sle64(loopres_73650, loopres_73651);
                bool loop_while_tmp_73781 = loop_cond_73654;
                int64_t low_tmp_73782 = loopres_73650;
                int64_t high_tmp_73783 = loopres_73651;
                
                loop_while_73639 = loop_while_tmp_73781;
                low_73640 = low_tmp_73782;
                high_73641 = high_tmp_73783;
            }
            nearest_idx_73636 = loop_while_73639;
            nearest_idx_73637 = low_73640;
            nearest_idx_73638 = high_73641;
            
            int64_t max_arg_73655 = sub64(nearest_idx_73637, min_res_64046);
            int64_t max_res_73656 = smax64((int64_t) 0, max_arg_73655);
            int64_t j_73657 = add64(min_res_64046, max_res_73656);
            int64_t i_p_m_t_s_73658 = add64(m_64052, max_res_73656);
            bool zzero_leq_i_p_m_t_s_73659 = sle64((int64_t) 0,
                                                   i_p_m_t_s_73658);
            bool i_p_m_t_s_leq_w_73660 = slt64(i_p_m_t_s_73658, n_64028);
            bool zzero_lte_i_73661 = sle64((int64_t) 0, max_res_73656);
            bool i_lte_j_73662 = sle64(max_res_73656, j_73657);
            bool y_73663 = i_p_m_t_s_leq_w_73660 && zzero_lte_i_73661;
            bool y_73664 = zzero_leq_i_p_m_t_s_73659 && y_73663;
            bool y_73665 = i_lte_j_73662 && y_73664;
            bool forwards_ok_73666 = zzero_lte_i_73661 && y_73665;
            bool ok_or_empty_73667 = empty_slice_64051 || forwards_ok_73666;
            bool index_certs_73668;
            
            if (!ok_or_empty_73667) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_73656, ":",
                              (long long) j_73657,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_73669;
            int64_t redout_73671 = (int64_t) 0;
            
            for (int64_t i_73670 = 0; i_73670 < min_res_64046; i_73670++) {
                int64_t slice_73672 = max_res_73656 + i_73670;
                int64_t x_73673 = ((int64_t *) mem_70148)[slice_73672];
                int64_t abs_arg_73674 = sub64(x_73673, defunc_0_g_res_73635);
                int64_t abs_res_73675 = abs64(abs_arg_73674);
                int64_t defunc_1_op_res_73676 = add64(abs_res_73675,
                                                      redout_73671);
                int64_t redout_tmp_73784 = defunc_1_op_res_73676;
                
                redout_73671 = redout_tmp_73784;
            }
            defunc_2_reduce_res_73669 = redout_73671;
            
            int64_t idx_73677;
            int64_t idx_73678;
            int64_t idx_73679;
            int64_t idx_73680;
            int64_t best_idx_73682;
            int64_t last_idx_73683;
            int64_t best_sum_73684;
            int64_t curr_sum_73685;
            
            best_idx_73682 = max_res_73656;
            last_idx_73683 = max_res_73656;
            best_sum_73684 = defunc_2_reduce_res_73669;
            curr_sum_73685 = defunc_2_reduce_res_73669;
            for (int64_t j_73681 = 0; j_73681 < min_res_64046; j_73681++) {
                int64_t new_idx_73686 = add64(max_res_73656, j_73681);
                int64_t x_73687 = add64(min_res_64046, new_idx_73686);
                bool cond_73688 = slt64(last_res_64769, x_73687);
                int64_t new_sum_73689;
                
                if (cond_73688) {
                    new_sum_73689 = (int64_t) 9223372036854775807;
                } else {
                    bool x_73690 = sle64((int64_t) 0, last_idx_73683);
                    bool y_73691 = slt64(last_idx_73683, n_64028);
                    bool bounds_check_73692 = x_73690 && y_73691;
                    bool index_certs_73693;
                    
                    if (!bounds_check_73692) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_73683,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        return 1;
                    }
                    
                    int64_t y_73694 = ((int64_t *) mem_70148)[last_idx_73683];
                    int64_t binop_p_73695 = sub64(defunc_0_g_res_73635,
                                                  y_73694);
                    int64_t defunc_0_f_res_73696 = abs64(binop_p_73695);
                    int64_t x_73697 = sub64(curr_sum_73685,
                                            defunc_0_f_res_73696);
                    int64_t min_arg_73698 = add64(min_res_64046,
                                                  last_idx_73683);
                    int64_t min_res_73699 = smin64(i_64040, min_arg_73698);
                    bool x_73700 = sle64((int64_t) 0, min_res_73699);
                    bool y_73701 = slt64(min_res_73699, n_64028);
                    bool bounds_check_73702 = x_73700 && y_73701;
                    bool index_certs_73703;
                    
                    if (!bounds_check_73702) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_73699,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        return 1;
                    }
                    
                    int64_t y_73704 = ((int64_t *) mem_70148)[min_res_73699];
                    int64_t binop_p_73705 = sub64(defunc_0_g_res_73635,
                                                  y_73704);
                    int64_t defunc_0_f_res_73706 = abs64(binop_p_73705);
                    int64_t new_sum_f_res_73707 = add64(x_73697,
                                                        defunc_0_f_res_73706);
                    
                    new_sum_73689 = new_sum_f_res_73707;
                }
                
                bool cond_73708 = sle64(new_sum_73689, best_sum_73684);
                int64_t loopres_73709;
                
                if (cond_73708) {
                    loopres_73709 = new_idx_73686;
                } else {
                    loopres_73709 = best_idx_73682;
                }
                
                int64_t loopres_73710;
                
                if (cond_73708) {
                    loopres_73710 = new_sum_73689;
                } else {
                    loopres_73710 = best_sum_73684;
                }
                
                int64_t best_idx_tmp_73785 = loopres_73709;
                int64_t last_idx_tmp_73786 = new_idx_73686;
                int64_t best_sum_tmp_73787 = loopres_73710;
                int64_t curr_sum_tmp_73788 = new_sum_73689;
                
                best_idx_73682 = best_idx_tmp_73785;
                last_idx_73683 = last_idx_tmp_73786;
                best_sum_73684 = best_sum_tmp_73787;
                curr_sum_73685 = curr_sum_tmp_73788;
            }
            idx_73677 = best_idx_73682;
            idx_73678 = last_idx_73683;
            idx_73679 = best_sum_73684;
            idx_73680 = curr_sum_73685;
            
            int64_t min_res_73711 = smin64(min_arg_64787, idx_73677);
            int64_t x_73712 = add64(min_res_64046, min_res_73711);
            int64_t r_73713 = sub64(x_73712, (int64_t) 1);
            bool x_73714 = sle64((int64_t) 0, r_73713);
            bool y_73715 = slt64(r_73713, n_64028);
            bool bounds_check_73716 = x_73714 && y_73715;
            bool index_certs_73717;
            
            if (!bounds_check_73716) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_73713,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_73718 = ((int64_t *) mem_70115)[r_73713];
            int64_t abs_arg_73719 = sub64(x_73718, min_res_73634);
            int64_t abs_res_73720 = abs64(abs_arg_73719);
            bool x_73721 = sle64((int64_t) 0, min_res_73711);
            bool y_73722 = slt64(min_res_73711, n_64028);
            bool bounds_check_73723 = x_73721 && y_73722;
            bool index_certs_73724;
            
            if (!bounds_check_73723) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_73711,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_73725 = ((int64_t *) mem_70115)[min_res_73711];
            int64_t abs_arg_73726 = sub64(x_73725, min_res_73634);
            int64_t abs_res_73727 = abs64(abs_arg_73726);
            int64_t max_res_73728 = smax64(abs_res_73720, abs_res_73727);
            float defunc_0_f_res_73729 = sitofp_i64_f32(max_res_73728);
            float defunc_1_f_res_73730 = max_res_64791 + defunc_0_f_res_73729;
            float defunc_0_f_res_73731 = sitofp_i64_f32(min_res_73634);
            float defunc_2_reduce_res_73733;
            float redout_73736 = 0.0F;
            
            for (int64_t i_73735 = 0; i_73735 < q_64030; i_73735++) {
                float x_73738 = ((float *) mem_70187)[i_73735];
                bool cond_73739 = sle64(last_res_64769, i_73735);
                float defunc_0_f_res_73740;
                
                if (cond_73739) {
                    defunc_0_f_res_73740 = 0.0F;
                } else {
                    int64_t i_73741 = add64(min_res_73711, i_73735);
                    float x_73742 = ((float *) mem_70142)[i_73741];
                    float defunc_0_f_res_f_res_73743 = 1.0F + x_73742;
                    
                    defunc_0_f_res_73740 = defunc_0_f_res_f_res_73743;
                }
                
                float x_j_73744 = defunc_0_f_res_73740 - defunc_0_f_res_73731;
                float abs_res_73745 = (float) fabs(x_j_73744);
                float tmp1_73746 = abs_res_73745 / defunc_1_f_res_73730;
                float x_73747 = tmp1_73746 * tmp1_73746;
                float y_73748 = tmp1_73746 * x_73747;
                float tmp2_73749 = 1.0F - y_73748;
                float x_73750 = tmp2_73749 * tmp2_73749;
                float tmp3_73751 = tmp2_73749 * x_73750;
                float tmp4_73752 = x_73738 * tmp3_73751;
                float defunc_1_op_res_73753 = tmp4_73752 + redout_73736;
                
                ((float *) mem_70212)[i_73735] = tmp4_73752;
                
                float redout_tmp_73789 = defunc_1_op_res_73753;
                
                redout_73736 = redout_tmp_73789;
            }
            defunc_2_reduce_res_73733 = redout_73736;
            
            float a0_73755 = 1.0F / defunc_2_reduce_res_73733;
            float defunc_2_reduce_res_73756;
            float redout_73758 = 0.0F;
            
            for (int64_t i_73757 = 0; i_73757 < q_64030; i_73757++) {
                float x_73759 = ((float *) mem_70212)[i_73757];
                bool cond_73760 = sle64(last_res_64769, i_73757);
                float defunc_0_f_res_73761;
                
                if (cond_73760) {
                    defunc_0_f_res_73761 = 0.0F;
                } else {
                    int64_t i_73762 = add64(min_res_73711, i_73757);
                    float x_73763 = ((float *) mem_70112)[i_73762];
                    
                    defunc_0_f_res_73761 = x_73763;
                }
                
                float x_73764 = a0_73755 * x_73759;
                float defunc_9_fit_fun_res_73765 = defunc_0_f_res_73761 *
                      x_73764;
                float defunc_1_op_res_73766 = defunc_9_fit_fun_res_73765 +
                      redout_73758;
                float redout_tmp_73791 = defunc_1_op_res_73766;
                
                redout_73758 = redout_tmp_73791;
            }
            defunc_2_reduce_res_73756 = redout_73758;
            ((float *) mem_70202)[i_73631] = defunc_2_reduce_res_73756;
        }
        memmove(mem_70233.mem + gtid_67276 * n_m_64039 * (int64_t) 4,
                mem_70202 + (int64_t) 0, n_m_64039 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70097);
    free(mem_70112);
    free(mem_70115);
    free(mem_70142);
    free(mem_70145);
    free(mem_70148);
    free(mem_70187);
    free(mem_70202);
    free(mem_70212);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76606_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76606_end -
                 futhark_mc_segmap_parloop_76606_start;
        
        ctx->futhark_mc_segmap_parloop_76606_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76606_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76606_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76604(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67275 = tid;
    int num_tasks_73591 = info.nsubtasks;
    struct futhark_mc_task_76603 *futhark_mc_task_76603 =
                                 (struct futhark_mc_task_76603 *) args;
    struct futhark_context *ctx = futhark_mc_task_76603->ctx;
    uint64_t futhark_mc_segmap_task_76604_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76604_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_task_76603->free_m_64027;
    int64_t n_64028 = futhark_mc_task_76603->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76603->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76603->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76603->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76603->free_i_64040;
    bool x_64041 = futhark_mc_task_76603->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76603->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76603->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76603->free_m_64052;
    float i64_res_64053 = futhark_mc_task_76603->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76603->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_70053 = futhark_mc_task_76603->free_bytes_70053;
    int64_t bytes_70056 = futhark_mc_task_76603->free_bytes_70056;
    int64_t bytes_70071 = futhark_mc_task_76603->free_bytes_70071;
    int64_t bytes_70092 = futhark_mc_task_76603->free_bytes_70092;
    struct memblock mem_70233 = {.desc ="mem_70233", .mem =
                                 futhark_mc_task_76603->free_mem_70233, .size =
                                 0, .references =NULL};
    int64_t iter_73592;
    struct futhark_mc_segmap_parloop_struct_76605
    futhark_mc_segmap_parloop_struct_76605;
    
    futhark_mc_segmap_parloop_struct_76605.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76605.free_m_64027 = m_64027;
    futhark_mc_segmap_parloop_struct_76605.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76605.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76605.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76605.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76605.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76605.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76605.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76605.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76605.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76605.free_i64_res_64053 = i64_res_64053;
    futhark_mc_segmap_parloop_struct_76605.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76605.free_bytes_70053 = bytes_70053;
    futhark_mc_segmap_parloop_struct_76605.free_bytes_70056 = bytes_70056;
    futhark_mc_segmap_parloop_struct_76605.free_bytes_70071 = bytes_70071;
    futhark_mc_segmap_parloop_struct_76605.free_bytes_70092 = bytes_70092;
    futhark_mc_segmap_parloop_struct_76605.free_mem_70233 = mem_70233.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76606_task;
    
    futhark_mc_segmap_parloop_76606_task.name =
        "futhark_mc_segmap_parloop_76606";
    futhark_mc_segmap_parloop_76606_task.fn = futhark_mc_segmap_parloop_76606;
    futhark_mc_segmap_parloop_76606_task.args =
        &futhark_mc_segmap_parloop_struct_76605;
    futhark_mc_segmap_parloop_76606_task.iterations = iterations;
    futhark_mc_segmap_parloop_76606_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76606_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76606_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76606_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76606_task);
    
    if (futhark_mc_segmap_parloop_76606_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76606_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76606_total_end -
                 futhark_mc_segmap_parloop_76606_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76606_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76606_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76606_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76604_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76604_end -
                 futhark_mc_segmap_task_76604_start;
        
        ctx->futhark_mc_segmap_task_76604_runs[tid]++;
        ctx->futhark_mc_segmap_task_76604_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76604_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76617 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_70053;
    int64_t free_bytes_70056;
    int64_t free_bytes_70071;
    int64_t free_bytes_70092;
    char *free_mem_70233;
};
struct futhark_mc_task_76627 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_67278;
    char *free_Y_mem_69552;
    char *free_mem_70055;
};
struct futhark_mc_scan_stage_1_parloop_struct_76630 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_67278;
    char *free_Y_mem_69552;
    char *free_mem_70055;
};
static int futhark_mc_scan_stage_1_parloop_76631(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_67279, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_76630
    *futhark_mc_scan_stage_1_parloop_struct_76630 =
    (struct futhark_mc_scan_stage_1_parloop_struct_76630 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_76630->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_76631_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76631_start = get_wall_time();
    
    int64_t n_64028 =
            futhark_mc_scan_stage_1_parloop_struct_76630->free_n_64028;
    int64_t gtid_67278 =
            futhark_mc_scan_stage_1_parloop_struct_76630->free_gtid_67278;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_76630->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70055 = {.desc ="mem_70055", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_76630->free_mem_70055,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74083 = start;
    int64_t x_73793;
    int64_t x_73794;
    
    x_73793 = (int64_t) 0;
    for (; iter_74083 < end; iter_74083++) {
        int64_t gtid_67280 = iter_74083;
        
        // stage 1 scan body
        {
            float x_73796 = ((float *) Y_mem_69552.mem)[gtid_67278 * n_64028 +
                                                        gtid_67280];
            bool isnan_res_73797;
            
            isnan_res_73797 = futrts_isnan32(x_73796);
            
            bool defunc_0_p_res_73798 = !isnan_res_73797;
            int64_t defunc_0_f_res_73799 = btoi_bool_i64(defunc_0_p_res_73798);
            
            // write mapped values results to memory
            { }
            x_73793 = x_73793;
            // Read next values
            {
                x_73794 = defunc_0_f_res_73799;
            }
            
            int64_t defunc_1_op_res_73795 = add64(x_73793, x_73794);
            
            ((int64_t *) mem_70055.mem)[gtid_67280] = defunc_1_op_res_73795;
            x_73793 = defunc_1_op_res_73795;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76631_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76631_end -
                 futhark_mc_scan_stage_1_parloop_76631_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_76631_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_76631_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_76631_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_76632 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_67278;
    char *free_Y_mem_69552;
    char *free_mem_70055;
};
static int futhark_mc_scan_stage_3_parloop_76633(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_67279, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_76632
    *futhark_mc_scan_stage_3_parloop_struct_76632 =
    (struct futhark_mc_scan_stage_3_parloop_struct_76632 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_76632->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_76633_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_76633_start = get_wall_time();
    
    int64_t n_64028 =
            futhark_mc_scan_stage_3_parloop_struct_76632->free_n_64028;
    int64_t gtid_67278 =
            futhark_mc_scan_stage_3_parloop_struct_76632->free_gtid_67278;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_76632->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70055 = {.desc ="mem_70055", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_76632->free_mem_70055,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74095 = start;
    int64_t x_74092;
    int64_t x_74093;
    
    if (iter_74095 == (int64_t) 0) {
        x_74092 = (int64_t) 0;
    } else {
        x_74092 = ((int64_t *) mem_70055.mem)[iter_74095 - (int64_t) 1];
    }
    for (; iter_74095 < end; iter_74095++) {
        int64_t gtid_67280 = iter_74095;
        
        // stage 3 scan body
        {
            float x_73796 = ((float *) Y_mem_69552.mem)[gtid_67278 * n_64028 +
                                                        gtid_67280];
            bool isnan_res_73797;
            
            isnan_res_73797 = futrts_isnan32(x_73796);
            
            bool defunc_0_p_res_73798 = !isnan_res_73797;
            int64_t defunc_0_f_res_73799 = btoi_bool_i64(defunc_0_p_res_73798);
            
            x_74092 = x_74092;
            x_74093 = defunc_0_f_res_73799;
            
            int64_t defunc_1_op_res_74094 = add64(x_74092, x_74093);
            
            ((int64_t *) mem_70055.mem)[gtid_67280] = defunc_1_op_res_74094;
            x_74092 = defunc_1_op_res_74094;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_76633_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76633_end -
                 futhark_mc_scan_stage_3_parloop_76633_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_76633_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_76633_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_76633_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_76628(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67279 = tid;
    int num_tasks_74082 = info.nsubtasks;
    struct futhark_mc_task_76627 *futhark_mc_task_76627 =
                                 (struct futhark_mc_task_76627 *) args;
    struct futhark_context *ctx = futhark_mc_task_76627->ctx;
    uint64_t futhark_mc_segscan_task_76628_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_76628_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76627->free_n_64028;
    int64_t gtid_67278 = futhark_mc_task_76627->free_gtid_67278;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76627->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70055 = {.desc ="mem_70055", .mem =
                                 futhark_mc_task_76627->free_mem_70055, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_74089_cached_sizze_76629 = 0;
    char *scan_stage_2_accum_mem_74089 = NULL;
    int64_t iter_74083;
    struct futhark_mc_scan_stage_1_parloop_struct_76630
    futhark_mc_scan_stage_1_parloop_struct_76630;
    
    futhark_mc_scan_stage_1_parloop_struct_76630.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_76630.free_n_64028 = n_64028;
    futhark_mc_scan_stage_1_parloop_struct_76630.free_gtid_67278 = gtid_67278;
    futhark_mc_scan_stage_1_parloop_struct_76630.free_Y_mem_69552 =
        Y_mem_69552.mem;
    futhark_mc_scan_stage_1_parloop_struct_76630.free_mem_70055 = mem_70055.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_76631_task;
    
    futhark_mc_scan_stage_1_parloop_76631_task.name =
        "futhark_mc_scan_stage_1_parloop_76631";
    futhark_mc_scan_stage_1_parloop_76631_task.fn =
        futhark_mc_scan_stage_1_parloop_76631;
    futhark_mc_scan_stage_1_parloop_76631_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_76630;
    futhark_mc_scan_stage_1_parloop_76631_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_76631_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_76631_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76631_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_76631_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_76631_task);
    
    if (futhark_mc_scan_stage_1_parloop_76631_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76631_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76631_total_end -
                 futhark_mc_scan_stage_1_parloop_76631_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76631_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76631_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76631_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_74082)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_74084;
        int64_t x_74085;
        int64_t offset_74087 = (int64_t) 0;
        int64_t offset_index_74088 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_74089_cached_sizze_76629 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_74089 = realloc(scan_stage_2_accum_mem_74089,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_74089_cached_sizze_76629 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_74089)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_74091 = 0; i_74091 < num_tasks_74082 - 1; i_74091++) {
            offset_74087 = squot64(n_64028, sext_i32_i64(num_tasks_74082));
            if (slt64(sext_i32_i64(i_74091), srem64(n_64028,
                                                    sext_i32_i64(num_tasks_74082)))) {
                offset_74087 += (int64_t) 1;
            }
            offset_index_74088 += offset_74087;
            
            int64_t gtid_67280 = offset_index_74088;
            float x_73796 = ((float *) Y_mem_69552.mem)[gtid_67278 * n_64028 +
                                                        gtid_67280];
            bool isnan_res_73797;
            
            isnan_res_73797 = futrts_isnan32(x_73796);
            
            bool defunc_0_p_res_73798 = !isnan_res_73797;
            int64_t defunc_0_f_res_73799 = btoi_bool_i64(defunc_0_p_res_73798);
            
            // Read carry in
            {
                x_74084 =
                    ((int64_t *) scan_stage_2_accum_mem_74089)[(int64_t) 0];
            }
            // Read next values
            {
                x_74085 = ((int64_t *) mem_70055.mem)[offset_index_74088 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_74086 = add64(x_74084, x_74085);
            
            ((int64_t *) mem_70055.mem)[offset_index_74088 - (int64_t) 1] =
                defunc_1_op_res_74086;
            ((int64_t *) scan_stage_2_accum_mem_74089)[(int64_t) 0] =
                defunc_1_op_res_74086;
        }
        
        int64_t iter_74095 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_76632
        futhark_mc_scan_stage_3_parloop_struct_76632;
        
        futhark_mc_scan_stage_3_parloop_struct_76632.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_76632.free_n_64028 = n_64028;
        futhark_mc_scan_stage_3_parloop_struct_76632.free_gtid_67278 =
            gtid_67278;
        futhark_mc_scan_stage_3_parloop_struct_76632.free_Y_mem_69552 =
            Y_mem_69552.mem;
        futhark_mc_scan_stage_3_parloop_struct_76632.free_mem_70055 =
            mem_70055.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_76633_task;
        
        futhark_mc_scan_stage_3_parloop_76633_task.name =
            "futhark_mc_scan_stage_3_parloop_76633";
        futhark_mc_scan_stage_3_parloop_76633_task.fn =
            futhark_mc_scan_stage_3_parloop_76633;
        futhark_mc_scan_stage_3_parloop_76633_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_76632;
        futhark_mc_scan_stage_3_parloop_76633_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_76633_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_76633_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_76633_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_76633_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_76633_task);
        
        if (futhark_mc_scan_stage_3_parloop_76633_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_76633_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76633_total_end -
                     futhark_mc_scan_stage_3_parloop_76633_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76633_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76633_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76633_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_74089);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_76628_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_76628_end -
                 futhark_mc_segscan_task_76628_start;
        
        ctx->futhark_mc_segscan_task_76628_runs[tid]++;
        ctx->futhark_mc_segscan_task_76628_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_76628_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76634 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_67278;
    char *free_Y_mem_69552;
    char *free_mem_70055;
    char *free_mem_70058;
    char *free_mem_70061;
};
struct futhark_mc_segmap_parloop_struct_76636 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_67278;
    char *free_Y_mem_69552;
    char *free_mem_70055;
    char *free_mem_70058;
    char *free_mem_70061;
};
static int futhark_mc_segmap_parloop_76637(void *args, int64_t start,
                                           int64_t end, int flat_tid_67281,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76636
    *futhark_mc_segmap_parloop_struct_76636 =
    (struct futhark_mc_segmap_parloop_struct_76636 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76636->ctx;
    uint64_t futhark_mc_segmap_parloop_76637_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76637_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76636->free_n_64028;
    int64_t gtid_67278 =
            futhark_mc_segmap_parloop_struct_76636->free_gtid_67278;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76636->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70055 = {.desc ="mem_70055", .mem =
                                 futhark_mc_segmap_parloop_struct_76636->free_mem_70055,
                                 .size =0, .references =NULL};
    struct memblock mem_70058 = {.desc ="mem_70058", .mem =
                                 futhark_mc_segmap_parloop_struct_76636->free_mem_70058,
                                 .size =0, .references =NULL};
    struct memblock mem_70061 = {.desc ="mem_70061", .mem =
                                 futhark_mc_segmap_parloop_struct_76636->free_mem_70061,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74099 = start;
    
    for (; iter_74099 < end; iter_74099++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74102 = n_64028;
        int64_t gtid_67282 = iter_74099;
        int64_t remnant_74103 = iter_74099 - gtid_67282;
        float x_73800 = ((float *) Y_mem_69552.mem)[gtid_67278 * n_64028 +
                                                    gtid_67282];
        bool isnan_res_73801;
        
        isnan_res_73801 = futrts_isnan32(x_73800);
        
        bool defunc_0_p_res_73802 = !isnan_res_73801;
        int64_t defunc_1_f_res_73803;
        
        if (defunc_0_p_res_73802) {
            int64_t x_74100 = ((int64_t *) mem_70055.mem)[gtid_67282];
            int64_t defunc_1_f_res_t_res_74101 = sub64(x_74100, (int64_t) 1);
            
            defunc_1_f_res_73803 = defunc_1_f_res_t_res_74101;
        } else {
            defunc_1_f_res_73803 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_73803) &&
            slt64(defunc_1_f_res_73803, n_64028)) {
            ((int64_t *) mem_70061.mem)[defunc_1_f_res_73803] = gtid_67282;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_73803) &&
            slt64(defunc_1_f_res_73803, n_64028)) {
            ((float *) mem_70058.mem)[defunc_1_f_res_73803] = x_73800;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76637_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76637_end -
                 futhark_mc_segmap_parloop_76637_start;
        
        ctx->futhark_mc_segmap_parloop_76637_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76637_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76637_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76635(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67281 = tid;
    int num_tasks_74098 = info.nsubtasks;
    struct futhark_mc_task_76634 *futhark_mc_task_76634 =
                                 (struct futhark_mc_task_76634 *) args;
    struct futhark_context *ctx = futhark_mc_task_76634->ctx;
    uint64_t futhark_mc_segmap_task_76635_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76635_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76634->free_n_64028;
    int64_t gtid_67278 = futhark_mc_task_76634->free_gtid_67278;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76634->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70055 = {.desc ="mem_70055", .mem =
                                 futhark_mc_task_76634->free_mem_70055, .size =
                                 0, .references =NULL};
    struct memblock mem_70058 = {.desc ="mem_70058", .mem =
                                 futhark_mc_task_76634->free_mem_70058, .size =
                                 0, .references =NULL};
    struct memblock mem_70061 = {.desc ="mem_70061", .mem =
                                 futhark_mc_task_76634->free_mem_70061, .size =
                                 0, .references =NULL};
    int64_t iter_74099;
    struct futhark_mc_segmap_parloop_struct_76636
    futhark_mc_segmap_parloop_struct_76636;
    
    futhark_mc_segmap_parloop_struct_76636.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76636.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76636.free_gtid_67278 = gtid_67278;
    futhark_mc_segmap_parloop_struct_76636.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76636.free_mem_70055 = mem_70055.mem;
    futhark_mc_segmap_parloop_struct_76636.free_mem_70058 = mem_70058.mem;
    futhark_mc_segmap_parloop_struct_76636.free_mem_70061 = mem_70061.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76637_task;
    
    futhark_mc_segmap_parloop_76637_task.name =
        "futhark_mc_segmap_parloop_76637";
    futhark_mc_segmap_parloop_76637_task.fn = futhark_mc_segmap_parloop_76637;
    futhark_mc_segmap_parloop_76637_task.args =
        &futhark_mc_segmap_parloop_struct_76636;
    futhark_mc_segmap_parloop_76637_task.iterations = iterations;
    futhark_mc_segmap_parloop_76637_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76637_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76637_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76637_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76637_task);
    
    if (futhark_mc_segmap_parloop_76637_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76637_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76637_total_end -
                 futhark_mc_segmap_parloop_76637_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76637_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76637_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76637_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76635_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76635_end -
                 futhark_mc_segmap_task_76635_start;
        
        ctx->futhark_mc_segmap_task_76635_runs[tid]++;
        ctx->futhark_mc_segmap_task_76635_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76635_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76638 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    char *free_mem_70061;
    char *free_mem_70064;
    char *free_mem_70067;
    char *free_mem_70070;
};
struct futhark_mc_segmap_parloop_struct_76640 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    char *free_mem_70061;
    char *free_mem_70064;
    char *free_mem_70067;
    char *free_mem_70070;
};
static int futhark_mc_segmap_parloop_76641(void *args, int64_t start,
                                           int64_t end, int flat_tid_67283,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76640
    *futhark_mc_segmap_parloop_struct_76640 =
    (struct futhark_mc_segmap_parloop_struct_76640 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76640->ctx;
    uint64_t futhark_mc_segmap_parloop_76641_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76641_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76640->free_n_64028;
    struct memblock mem_70061 = {.desc ="mem_70061", .mem =
                                 futhark_mc_segmap_parloop_struct_76640->free_mem_70061,
                                 .size =0, .references =NULL};
    struct memblock mem_70064 = {.desc ="mem_70064", .mem =
                                 futhark_mc_segmap_parloop_struct_76640->free_mem_70064,
                                 .size =0, .references =NULL};
    struct memblock mem_70067 = {.desc ="mem_70067", .mem =
                                 futhark_mc_segmap_parloop_struct_76640->free_mem_70067,
                                 .size =0, .references =NULL};
    struct memblock mem_70070 = {.desc ="mem_70070", .mem =
                                 futhark_mc_segmap_parloop_struct_76640->free_mem_70070,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74105 = start;
    
    for (; iter_74105 < end; iter_74105++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74106 = n_64028;
        int64_t gtid_67284 = iter_74105;
        int64_t remnant_74107 = iter_74105 - gtid_67284;
        int64_t x_73806 = ((int64_t *) mem_70061.mem)[gtid_67284];
        int64_t defunc_0_f_res_73807 = add64((int64_t) 1, x_73806);
        bool cond_73808 = slt64(defunc_0_f_res_73807, (int64_t) 0);
        int64_t defunc_0_f_res_73809;
        
        if (cond_73808) {
            defunc_0_f_res_73809 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_73809 = defunc_0_f_res_73807;
        }
        
        float defunc_0_f_res_73810 = sitofp_i64_f32(x_73806);
        
        ((float *) mem_70064.mem)[gtid_67284] = defunc_0_f_res_73810;
        ((int64_t *) mem_70067.mem)[gtid_67284] = defunc_0_f_res_73809;
        ((int64_t *) mem_70070.mem)[gtid_67284] = defunc_0_f_res_73807;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76641_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76641_end -
                 futhark_mc_segmap_parloop_76641_start;
        
        ctx->futhark_mc_segmap_parloop_76641_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76641_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76641_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76639(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67283 = tid;
    int num_tasks_74104 = info.nsubtasks;
    struct futhark_mc_task_76638 *futhark_mc_task_76638 =
                                 (struct futhark_mc_task_76638 *) args;
    struct futhark_context *ctx = futhark_mc_task_76638->ctx;
    uint64_t futhark_mc_segmap_task_76639_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76639_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76638->free_n_64028;
    struct memblock mem_70061 = {.desc ="mem_70061", .mem =
                                 futhark_mc_task_76638->free_mem_70061, .size =
                                 0, .references =NULL};
    struct memblock mem_70064 = {.desc ="mem_70064", .mem =
                                 futhark_mc_task_76638->free_mem_70064, .size =
                                 0, .references =NULL};
    struct memblock mem_70067 = {.desc ="mem_70067", .mem =
                                 futhark_mc_task_76638->free_mem_70067, .size =
                                 0, .references =NULL};
    struct memblock mem_70070 = {.desc ="mem_70070", .mem =
                                 futhark_mc_task_76638->free_mem_70070, .size =
                                 0, .references =NULL};
    int64_t iter_74105;
    struct futhark_mc_segmap_parloop_struct_76640
    futhark_mc_segmap_parloop_struct_76640;
    
    futhark_mc_segmap_parloop_struct_76640.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76640.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76640.free_mem_70061 = mem_70061.mem;
    futhark_mc_segmap_parloop_struct_76640.free_mem_70064 = mem_70064.mem;
    futhark_mc_segmap_parloop_struct_76640.free_mem_70067 = mem_70067.mem;
    futhark_mc_segmap_parloop_struct_76640.free_mem_70070 = mem_70070.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76641_task;
    
    futhark_mc_segmap_parloop_76641_task.name =
        "futhark_mc_segmap_parloop_76641";
    futhark_mc_segmap_parloop_76641_task.fn = futhark_mc_segmap_parloop_76641;
    futhark_mc_segmap_parloop_76641_task.args =
        &futhark_mc_segmap_parloop_struct_76640;
    futhark_mc_segmap_parloop_76641_task.iterations = iterations;
    futhark_mc_segmap_parloop_76641_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76641_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76641_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76641_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76641_task);
    
    if (futhark_mc_segmap_parloop_76641_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76641_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76641_total_end -
                 futhark_mc_segmap_parloop_76641_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76641_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76641_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76641_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76639_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76639_end -
                 futhark_mc_segmap_task_76639_start;
        
        ctx->futhark_mc_segmap_task_76639_runs[tid]++;
        ctx->futhark_mc_segmap_task_76639_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76639_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76642 {
    struct futhark_context *ctx;
    int64_t free_q_64030;
    int64_t free_last_res_67440;
    char *free_mem_70073;
};
struct futhark_mc_segmap_parloop_struct_76644 {
    struct futhark_context *ctx;
    int64_t free_q_64030;
    int64_t free_last_res_67440;
    char *free_mem_70073;
};
static int futhark_mc_segmap_parloop_76645(void *args, int64_t start,
                                           int64_t end, int flat_tid_67285,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76644
    *futhark_mc_segmap_parloop_struct_76644 =
    (struct futhark_mc_segmap_parloop_struct_76644 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76644->ctx;
    uint64_t futhark_mc_segmap_parloop_76645_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76645_start = get_wall_time();
    
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76644->free_q_64030;
    int64_t last_res_67440 =
            futhark_mc_segmap_parloop_struct_76644->free_last_res_67440;
    struct memblock mem_70073 = {.desc ="mem_70073", .mem =
                                 futhark_mc_segmap_parloop_struct_76644->free_mem_70073,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74109 = start;
    
    for (; iter_74109 < end; iter_74109++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74110 = q_64030;
        int64_t gtid_67286 = iter_74109;
        int64_t remnant_74111 = iter_74109 - gtid_67286;
        bool cond_73811 = sle64(last_res_67440, gtid_67286);
        float defunc_0_f_res_73812;
        
        if (cond_73811) {
            defunc_0_f_res_73812 = 0.0F;
        } else {
            defunc_0_f_res_73812 = 1.0F;
        }
        ((float *) mem_70073.mem)[gtid_67286] = defunc_0_f_res_73812;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76645_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76645_end -
                 futhark_mc_segmap_parloop_76645_start;
        
        ctx->futhark_mc_segmap_parloop_76645_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76645_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76645_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76643(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67285 = tid;
    int num_tasks_74108 = info.nsubtasks;
    struct futhark_mc_task_76642 *futhark_mc_task_76642 =
                                 (struct futhark_mc_task_76642 *) args;
    struct futhark_context *ctx = futhark_mc_task_76642->ctx;
    uint64_t futhark_mc_segmap_task_76643_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76643_start = get_wall_time();
    
    int64_t q_64030 = futhark_mc_task_76642->free_q_64030;
    int64_t last_res_67440 = futhark_mc_task_76642->free_last_res_67440;
    struct memblock mem_70073 = {.desc ="mem_70073", .mem =
                                 futhark_mc_task_76642->free_mem_70073, .size =
                                 0, .references =NULL};
    int64_t iter_74109;
    struct futhark_mc_segmap_parloop_struct_76644
    futhark_mc_segmap_parloop_struct_76644;
    
    futhark_mc_segmap_parloop_struct_76644.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76644.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76644.free_last_res_67440 = last_res_67440;
    futhark_mc_segmap_parloop_struct_76644.free_mem_70073 = mem_70073.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76645_task;
    
    futhark_mc_segmap_parloop_76645_task.name =
        "futhark_mc_segmap_parloop_76645";
    futhark_mc_segmap_parloop_76645_task.fn = futhark_mc_segmap_parloop_76645;
    futhark_mc_segmap_parloop_76645_task.args =
        &futhark_mc_segmap_parloop_struct_76644;
    futhark_mc_segmap_parloop_76645_task.iterations = iterations;
    futhark_mc_segmap_parloop_76645_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76645_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76645_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76645_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76645_task);
    
    if (futhark_mc_segmap_parloop_76645_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76645_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76645_total_end -
                 futhark_mc_segmap_parloop_76645_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76645_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76645_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76645_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76643_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76643_end -
                 futhark_mc_segmap_task_76643_start;
        
        ctx->futhark_mc_segmap_task_76643_runs[tid]++;
        ctx->futhark_mc_segmap_task_76643_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76643_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76646 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_67440;
    int64_t free_min_arg_67452;
    float free_max_res_67456;
    char *free_mem_70058;
    char *free_mem_70061;
    char *free_mem_70064;
    char *free_mem_70067;
    char *free_mem_70070;
    int64_t free_bytes_70071;
    char *free_mem_70073;
    char *free_mem_70094;
};
struct futhark_mc_segmap_parloop_struct_76648 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_67440;
    int64_t free_min_arg_67452;
    float free_max_res_67456;
    char *free_mem_70058;
    char *free_mem_70061;
    char *free_mem_70064;
    char *free_mem_70067;
    char *free_mem_70070;
    int64_t free_bytes_70071;
    char *free_mem_70073;
    char *free_mem_70094;
};
static int futhark_mc_segmap_parloop_76649(void *args, int64_t start,
                                           int64_t end, int flat_tid_67287,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76648
    *futhark_mc_segmap_parloop_struct_76648 =
    (struct futhark_mc_segmap_parloop_struct_76648 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76648->ctx;
    uint64_t futhark_mc_segmap_parloop_76649_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76649_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76648->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76648->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76648->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76648->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76648->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76648->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76648->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76648->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76648->free_m_64052;
    int64_t last_res_67440 =
            futhark_mc_segmap_parloop_struct_76648->free_last_res_67440;
    int64_t min_arg_67452 =
            futhark_mc_segmap_parloop_struct_76648->free_min_arg_67452;
    float max_res_67456 =
          futhark_mc_segmap_parloop_struct_76648->free_max_res_67456;
    struct memblock mem_70058 = {.desc ="mem_70058", .mem =
                                 futhark_mc_segmap_parloop_struct_76648->free_mem_70058,
                                 .size =0, .references =NULL};
    struct memblock mem_70061 = {.desc ="mem_70061", .mem =
                                 futhark_mc_segmap_parloop_struct_76648->free_mem_70061,
                                 .size =0, .references =NULL};
    struct memblock mem_70064 = {.desc ="mem_70064", .mem =
                                 futhark_mc_segmap_parloop_struct_76648->free_mem_70064,
                                 .size =0, .references =NULL};
    struct memblock mem_70067 = {.desc ="mem_70067", .mem =
                                 futhark_mc_segmap_parloop_struct_76648->free_mem_70067,
                                 .size =0, .references =NULL};
    struct memblock mem_70070 = {.desc ="mem_70070", .mem =
                                 futhark_mc_segmap_parloop_struct_76648->free_mem_70070,
                                 .size =0, .references =NULL};
    int64_t bytes_70071 =
            futhark_mc_segmap_parloop_struct_76648->free_bytes_70071;
    struct memblock mem_70073 = {.desc ="mem_70073", .mem =
                                 futhark_mc_segmap_parloop_struct_76648->free_mem_70073,
                                 .size =0, .references =NULL};
    struct memblock mem_70094 = {.desc ="mem_70094", .mem =
                                 futhark_mc_segmap_parloop_struct_76648->free_mem_70094,
                                 .size =0, .references =NULL};
    size_t mem_74044_cached_sizze_76650 = 0;
    char *mem_74044 = NULL;
    int64_t iterations = end - start;
    int64_t iter_74113 = start;
    
    if (mem_74044_cached_sizze_76650 < (size_t) bytes_70071) {
        mem_74044 = realloc(mem_74044, bytes_70071);
        mem_74044_cached_sizze_76650 = bytes_70071;
    }
    for (; iter_74113 < end; iter_74113++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74197 = n_m_64039;
        int64_t gtid_67288 = iter_74113;
        int64_t remnant_74198 = iter_74113 - gtid_67288;
        int64_t min_arg_73945 = mul64(jump_64032, gtid_67288);
        int64_t min_res_73946 = smin64(i_64040, min_arg_73945);
        int64_t defunc_0_g_res_73947 = add64((int64_t) 1, min_res_73946);
        bool nearest_idx_73948;
        int64_t nearest_idx_73949;
        int64_t nearest_idx_73950;
        bool loop_while_74114;
        int64_t low_74115;
        int64_t high_74116;
        
        loop_while_74114 = x_64041;
        low_74115 = (int64_t) 0;
        high_74116 = i_64040;
        while (loop_while_74114) {
            int64_t x_74117 = add64(low_74115, high_74116);
            int64_t mid_74118 = sdiv64(x_74117, (int64_t) 2);
            bool x_74119 = sle64((int64_t) 0, mid_74118);
            bool y_74120 = slt64(mid_74118, n_64028);
            bool bounds_check_74121 = x_74119 && y_74120;
            bool index_certs_74122;
            
            if (!bounds_check_74121) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_74118,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_74123 = ((int64_t *) mem_70067.mem)[mid_74118];
            bool cond_74124 = sle64(defunc_0_g_res_73947, x_74123);
            int64_t loopres_74125;
            int64_t loopres_74126;
            
            if (cond_74124) {
                int64_t loopres_t_res_74127 = sub64(mid_74118, (int64_t) 1);
                
                loopres_74125 = low_74115;
                loopres_74126 = loopres_t_res_74127;
            } else {
                int64_t loopres_f_res_74128 = add64((int64_t) 1, mid_74118);
                
                loopres_74125 = loopres_f_res_74128;
                loopres_74126 = high_74116;
            }
            
            bool loop_cond_74129 = sle64(loopres_74125, loopres_74126);
            bool loop_while_tmp_74199 = loop_cond_74129;
            int64_t low_tmp_74200 = loopres_74125;
            int64_t high_tmp_74201 = loopres_74126;
            
            loop_while_74114 = loop_while_tmp_74199;
            low_74115 = low_tmp_74200;
            high_74116 = high_tmp_74201;
        }
        nearest_idx_73948 = loop_while_74114;
        nearest_idx_73949 = low_74115;
        nearest_idx_73950 = high_74116;
        
        int64_t max_arg_73967 = sub64(nearest_idx_73949, min_res_64046);
        int64_t max_res_73968 = smax64((int64_t) 0, max_arg_73967);
        int64_t j_73969 = add64(min_res_64046, max_res_73968);
        int64_t i_p_m_t_s_73970 = add64(m_64052, max_res_73968);
        bool zzero_leq_i_p_m_t_s_73971 = sle64((int64_t) 0, i_p_m_t_s_73970);
        bool i_p_m_t_s_leq_w_73972 = slt64(i_p_m_t_s_73970, n_64028);
        bool zzero_lte_i_73973 = sle64((int64_t) 0, max_res_73968);
        bool i_lte_j_73974 = sle64(max_res_73968, j_73969);
        bool y_73975 = i_p_m_t_s_leq_w_73972 && zzero_lte_i_73973;
        bool y_73976 = zzero_leq_i_p_m_t_s_73971 && y_73975;
        bool y_73977 = i_lte_j_73974 && y_73976;
        bool forwards_ok_73978 = zzero_lte_i_73973 && y_73977;
        bool ok_or_empty_73979 = empty_slice_64051 || forwards_ok_73978;
        bool index_certs_73980;
        
        if (!ok_or_empty_73979) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_73968, ":",
                          (long long) j_73969,
                          "] out of bounds for array of shape [",
                          (long long) n_64028, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_73981;
        int64_t redout_74131 = (int64_t) 0;
        
        for (int64_t i_74130 = 0; i_74130 < min_res_64046; i_74130++) {
            int64_t slice_74132 = max_res_73968 + i_74130;
            int64_t x_74133 = ((int64_t *) mem_70070.mem)[slice_74132];
            int64_t abs_arg_74134 = sub64(x_74133, defunc_0_g_res_73947);
            int64_t abs_res_74135 = abs64(abs_arg_74134);
            int64_t defunc_1_op_res_74136 = add64(abs_res_74135, redout_74131);
            int64_t redout_tmp_74202 = defunc_1_op_res_74136;
            
            redout_74131 = redout_tmp_74202;
        }
        defunc_2_reduce_res_73981 = redout_74131;
        
        int64_t idx_73989;
        int64_t idx_73990;
        int64_t idx_73991;
        int64_t idx_73992;
        int64_t best_idx_74138;
        int64_t last_idx_74139;
        int64_t best_sum_74140;
        int64_t curr_sum_74141;
        
        best_idx_74138 = max_res_73968;
        last_idx_74139 = max_res_73968;
        best_sum_74140 = defunc_2_reduce_res_73981;
        curr_sum_74141 = defunc_2_reduce_res_73981;
        for (int64_t j_74137 = 0; j_74137 < min_res_64046; j_74137++) {
            int64_t new_idx_74142 = add64(max_res_73968, j_74137);
            int64_t x_74143 = add64(min_res_64046, new_idx_74142);
            bool cond_74144 = slt64(last_res_67440, x_74143);
            int64_t new_sum_74145;
            
            if (cond_74144) {
                new_sum_74145 = (int64_t) 9223372036854775807;
            } else {
                bool x_74146 = sle64((int64_t) 0, last_idx_74139);
                bool y_74147 = slt64(last_idx_74139, n_64028);
                bool bounds_check_74148 = x_74146 && y_74147;
                bool index_certs_74149;
                
                if (!bounds_check_74148) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_74139,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_74150 = ((int64_t *) mem_70070.mem)[last_idx_74139];
                int64_t binop_p_74151 = sub64(defunc_0_g_res_73947, y_74150);
                int64_t defunc_0_f_res_74152 = abs64(binop_p_74151);
                int64_t x_74153 = sub64(curr_sum_74141, defunc_0_f_res_74152);
                int64_t min_arg_74154 = add64(min_res_64046, last_idx_74139);
                int64_t min_res_74155 = smin64(i_64040, min_arg_74154);
                bool x_74156 = sle64((int64_t) 0, min_res_74155);
                bool y_74157 = slt64(min_res_74155, n_64028);
                bool bounds_check_74158 = x_74156 && y_74157;
                bool index_certs_74159;
                
                if (!bounds_check_74158) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_74155,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_74160 = ((int64_t *) mem_70070.mem)[min_res_74155];
                int64_t binop_p_74161 = sub64(defunc_0_g_res_73947, y_74160);
                int64_t defunc_0_f_res_74162 = abs64(binop_p_74161);
                int64_t new_sum_f_res_74163 = add64(x_74153,
                                                    defunc_0_f_res_74162);
                
                new_sum_74145 = new_sum_f_res_74163;
            }
            
            bool cond_74164 = sle64(new_sum_74145, best_sum_74140);
            int64_t loopres_74165;
            
            if (cond_74164) {
                loopres_74165 = new_idx_74142;
            } else {
                loopres_74165 = best_idx_74138;
            }
            
            int64_t loopres_74166;
            
            if (cond_74164) {
                loopres_74166 = new_sum_74145;
            } else {
                loopres_74166 = best_sum_74140;
            }
            
            int64_t best_idx_tmp_74203 = loopres_74165;
            int64_t last_idx_tmp_74204 = new_idx_74142;
            int64_t best_sum_tmp_74205 = loopres_74166;
            int64_t curr_sum_tmp_74206 = new_sum_74145;
            
            best_idx_74138 = best_idx_tmp_74203;
            last_idx_74139 = last_idx_tmp_74204;
            best_sum_74140 = best_sum_tmp_74205;
            curr_sum_74141 = curr_sum_tmp_74206;
        }
        idx_73989 = best_idx_74138;
        idx_73990 = last_idx_74139;
        idx_73991 = best_sum_74140;
        idx_73992 = curr_sum_74141;
        
        int64_t min_res_74023 = smin64(min_arg_67452, idx_73989);
        int64_t x_74024 = add64(min_res_64046, min_res_74023);
        int64_t r_74025 = sub64(x_74024, (int64_t) 1);
        bool x_74026 = sle64((int64_t) 0, r_74025);
        bool y_74027 = slt64(r_74025, n_64028);
        bool bounds_check_74028 = x_74026 && y_74027;
        bool index_certs_74029;
        
        if (!bounds_check_74028) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_74025,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_74030 = ((int64_t *) mem_70061.mem)[r_74025];
        int64_t abs_arg_74031 = sub64(x_74030, min_res_73946);
        int64_t abs_res_74032 = abs64(abs_arg_74031);
        bool x_74033 = sle64((int64_t) 0, min_res_74023);
        bool y_74034 = slt64(min_res_74023, n_64028);
        bool bounds_check_74035 = x_74033 && y_74034;
        bool index_certs_74036;
        
        if (!bounds_check_74035) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_74023,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_74037 = ((int64_t *) mem_70061.mem)[min_res_74023];
        int64_t abs_arg_74038 = sub64(x_74037, min_res_73946);
        int64_t abs_res_74039 = abs64(abs_arg_74038);
        int64_t max_res_74040 = smax64(abs_res_74032, abs_res_74039);
        float defunc_0_f_res_74041 = sitofp_i64_f32(max_res_74040);
        float defunc_1_f_res_74042 = max_res_67456 + defunc_0_f_res_74041;
        float defunc_0_f_res_74043 = sitofp_i64_f32(min_res_73946);
        float defunc_2_reduce_res_74046;
        float redout_74168 = 0.0F;
        
        for (int64_t i_74167 = 0; i_74167 < q_64030; i_74167++) {
            float x_74170 = ((float *) mem_70073.mem)[i_74167];
            bool cond_74171 = sle64(last_res_67440, i_74167);
            float defunc_0_f_res_74172;
            
            if (cond_74171) {
                defunc_0_f_res_74172 = 0.0F;
            } else {
                int64_t i_74173 = add64(min_res_74023, i_74167);
                float x_74174 = ((float *) mem_70064.mem)[i_74173];
                float defunc_0_f_res_f_res_74175 = 1.0F + x_74174;
                
                defunc_0_f_res_74172 = defunc_0_f_res_f_res_74175;
            }
            
            float x_j_74176 = defunc_0_f_res_74172 - defunc_0_f_res_74043;
            float abs_res_74177 = (float) fabs(x_j_74176);
            float tmp1_74178 = abs_res_74177 / defunc_1_f_res_74042;
            float x_74179 = tmp1_74178 * tmp1_74178;
            float y_74180 = tmp1_74178 * x_74179;
            float tmp2_74181 = 1.0F - y_74180;
            float x_74182 = tmp2_74181 * tmp2_74181;
            float tmp3_74183 = tmp2_74181 * x_74182;
            float tmp4_74184 = x_74170 * tmp3_74183;
            float defunc_1_op_res_74185 = tmp4_74184 + redout_74168;
            
            ((float *) mem_74044)[i_74167] = tmp4_74184;
            
            float redout_tmp_74207 = defunc_1_op_res_74185;
            
            redout_74168 = redout_tmp_74207;
        }
        defunc_2_reduce_res_74046 = redout_74168;
        
        float a0_74068 = 1.0F / defunc_2_reduce_res_74046;
        float defunc_2_reduce_res_74069;
        float redout_74188 = 0.0F;
        
        for (int64_t i_74187 = 0; i_74187 < q_64030; i_74187++) {
            float x_74189 = ((float *) mem_74044)[i_74187];
            bool cond_74190 = sle64(last_res_67440, i_74187);
            float defunc_0_f_res_74191;
            
            if (cond_74190) {
                defunc_0_f_res_74191 = 0.0F;
            } else {
                int64_t i_74192 = add64(min_res_74023, i_74187);
                float x_74193 = ((float *) mem_70058.mem)[i_74192];
                
                defunc_0_f_res_74191 = x_74193;
            }
            
            float x_74194 = a0_74068 * x_74189;
            float defunc_9_fit_fun_res_74195 = defunc_0_f_res_74191 * x_74194;
            float defunc_1_op_res_74196 = defunc_9_fit_fun_res_74195 +
                  redout_74188;
            float redout_tmp_74209 = defunc_1_op_res_74196;
            
            redout_74188 = redout_tmp_74209;
        }
        defunc_2_reduce_res_74069 = redout_74188;
        ((float *) mem_70094.mem)[gtid_67288] = defunc_2_reduce_res_74069;
    }
    
  cleanup:
    { }
    free(mem_74044);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76649_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76649_end -
                 futhark_mc_segmap_parloop_76649_start;
        
        ctx->futhark_mc_segmap_parloop_76649_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76649_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76649_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76647(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67287 = tid;
    int num_tasks_74112 = info.nsubtasks;
    struct futhark_mc_task_76646 *futhark_mc_task_76646 =
                                 (struct futhark_mc_task_76646 *) args;
    struct futhark_context *ctx = futhark_mc_task_76646->ctx;
    uint64_t futhark_mc_segmap_task_76647_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76647_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76646->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76646->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76646->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76646->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76646->free_i_64040;
    bool x_64041 = futhark_mc_task_76646->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76646->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76646->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76646->free_m_64052;
    int64_t last_res_67440 = futhark_mc_task_76646->free_last_res_67440;
    int64_t min_arg_67452 = futhark_mc_task_76646->free_min_arg_67452;
    float max_res_67456 = futhark_mc_task_76646->free_max_res_67456;
    struct memblock mem_70058 = {.desc ="mem_70058", .mem =
                                 futhark_mc_task_76646->free_mem_70058, .size =
                                 0, .references =NULL};
    struct memblock mem_70061 = {.desc ="mem_70061", .mem =
                                 futhark_mc_task_76646->free_mem_70061, .size =
                                 0, .references =NULL};
    struct memblock mem_70064 = {.desc ="mem_70064", .mem =
                                 futhark_mc_task_76646->free_mem_70064, .size =
                                 0, .references =NULL};
    struct memblock mem_70067 = {.desc ="mem_70067", .mem =
                                 futhark_mc_task_76646->free_mem_70067, .size =
                                 0, .references =NULL};
    struct memblock mem_70070 = {.desc ="mem_70070", .mem =
                                 futhark_mc_task_76646->free_mem_70070, .size =
                                 0, .references =NULL};
    int64_t bytes_70071 = futhark_mc_task_76646->free_bytes_70071;
    struct memblock mem_70073 = {.desc ="mem_70073", .mem =
                                 futhark_mc_task_76646->free_mem_70073, .size =
                                 0, .references =NULL};
    struct memblock mem_70094 = {.desc ="mem_70094", .mem =
                                 futhark_mc_task_76646->free_mem_70094, .size =
                                 0, .references =NULL};
    int64_t iter_74113;
    struct futhark_mc_segmap_parloop_struct_76648
    futhark_mc_segmap_parloop_struct_76648;
    
    futhark_mc_segmap_parloop_struct_76648.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76648.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76648.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76648.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76648.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76648.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76648.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76648.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76648.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76648.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76648.free_last_res_67440 = last_res_67440;
    futhark_mc_segmap_parloop_struct_76648.free_min_arg_67452 = min_arg_67452;
    futhark_mc_segmap_parloop_struct_76648.free_max_res_67456 = max_res_67456;
    futhark_mc_segmap_parloop_struct_76648.free_mem_70058 = mem_70058.mem;
    futhark_mc_segmap_parloop_struct_76648.free_mem_70061 = mem_70061.mem;
    futhark_mc_segmap_parloop_struct_76648.free_mem_70064 = mem_70064.mem;
    futhark_mc_segmap_parloop_struct_76648.free_mem_70067 = mem_70067.mem;
    futhark_mc_segmap_parloop_struct_76648.free_mem_70070 = mem_70070.mem;
    futhark_mc_segmap_parloop_struct_76648.free_bytes_70071 = bytes_70071;
    futhark_mc_segmap_parloop_struct_76648.free_mem_70073 = mem_70073.mem;
    futhark_mc_segmap_parloop_struct_76648.free_mem_70094 = mem_70094.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76649_task;
    
    futhark_mc_segmap_parloop_76649_task.name =
        "futhark_mc_segmap_parloop_76649";
    futhark_mc_segmap_parloop_76649_task.fn = futhark_mc_segmap_parloop_76649;
    futhark_mc_segmap_parloop_76649_task.args =
        &futhark_mc_segmap_parloop_struct_76648;
    futhark_mc_segmap_parloop_76649_task.iterations = iterations;
    futhark_mc_segmap_parloop_76649_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76649_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76649_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76649_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76649_task);
    
    if (futhark_mc_segmap_parloop_76649_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76649_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76649_total_end -
                 futhark_mc_segmap_parloop_76649_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76649_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76649_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76649_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76647_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76647_end -
                 futhark_mc_segmap_task_76647_start;
        
        ctx->futhark_mc_segmap_task_76647_runs[tid]++;
        ctx->futhark_mc_segmap_task_76647_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76647_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76652 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_67440;
    int64_t free_min_arg_67452;
    float free_max_res_67456;
    char *free_mem_70058;
    char *free_mem_70061;
    char *free_mem_70064;
    char *free_mem_70067;
    char *free_mem_70070;
    int64_t free_bytes_70071;
    char *free_mem_70073;
    char *free_mem_70094;
};
struct futhark_mc_task_76655 {
    struct futhark_context *ctx;
    char *free_mem_70070;
    int64_t free_defunc_0_g_res_73815;
    int64_t free_max_res_73836;
    int64_t *retval_defunc_2_reduce_res_73849;
};
struct futhark_mc_segred_stage_1_parloop_struct_76658 {
    struct futhark_context *ctx;
    char *free_mem_70070;
    int64_t free_defunc_0_g_res_73815;
    int64_t free_max_res_73836;
    char *free_reduce_stage_1_tid_res_arr_mem_74298;
};
static int futhark_mc_segred_stage_1_parloop_76659(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_67291, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76658
    *futhark_mc_segred_stage_1_parloop_struct_76658 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76658 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76658->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76659_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76659_start = get_wall_time();
    
    struct memblock mem_70070 = {.desc ="mem_70070", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76658->free_mem_70070,
                                 .size =0, .references =NULL};
    int64_t defunc_0_g_res_73815 =
            futhark_mc_segred_stage_1_parloop_struct_76658->free_defunc_0_g_res_73815;
    int64_t max_res_73836 =
            futhark_mc_segred_stage_1_parloop_struct_76658->free_max_res_73836;
    struct memblock reduce_stage_1_tid_res_arr_mem_74298 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_74298",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76658->free_reduce_stage_1_tid_res_arr_mem_74298,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74300 = start;
    int64_t x_74227;
    int64_t x_74228;
    int64_t local_acc_74301 = (int64_t) 0;
    
    for (; iter_74300 < end; iter_74300++) {
        int64_t gtid_67292 = iter_74300;
        int64_t slice_74230 = gtid_67292 + max_res_73836;
        int64_t x_74231 = ((int64_t *) mem_70070.mem)[slice_74230];
        int64_t abs_arg_74232 = sub64(x_74231, defunc_0_g_res_73815);
        int64_t abs_res_74233 = abs64(abs_arg_74232);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_74227 = local_acc_74301;
        }
        // Load next params
        {
            x_74228 = abs_res_74233;
        }
        // Red body
        {
            int64_t defunc_1_op_res_74229 = add64(x_74227, x_74228);
            
            local_acc_74301 = defunc_1_op_res_74229;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_74298.mem)[flat_tid_67291] =
        local_acc_74301;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76659_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76659_end -
                 futhark_mc_segred_stage_1_parloop_76659_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76659_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76659_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76659_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76656(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67291 = tid;
    int num_tasks_74297 = info.nsubtasks;
    struct futhark_mc_task_76655 *futhark_mc_task_76655 =
                                 (struct futhark_mc_task_76655 *) args;
    struct futhark_context *ctx = futhark_mc_task_76655->ctx;
    uint64_t futhark_mc_segred_task_76656_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76656_start = get_wall_time();
    
    struct memblock mem_70070 = {.desc ="mem_70070", .mem =
                                 futhark_mc_task_76655->free_mem_70070, .size =
                                 0, .references =NULL};
    int64_t defunc_0_g_res_73815 =
            futhark_mc_task_76655->free_defunc_0_g_res_73815;
    int64_t max_res_73836 = futhark_mc_task_76655->free_max_res_73836;
    int64_t defunc_2_reduce_res_73849 =
            *futhark_mc_task_76655->retval_defunc_2_reduce_res_73849;
    size_t reduce_stage_1_tid_res_arr_mem_74298_cached_sizze_76657 = 0;
    char *reduce_stage_1_tid_res_arr_mem_74298 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_74298_cached_sizze_76657 <
        (size_t) ((int64_t) 8 * num_tasks_74297)) {
        reduce_stage_1_tid_res_arr_mem_74298 =
            realloc(reduce_stage_1_tid_res_arr_mem_74298, (int64_t) 8 *
                    num_tasks_74297);
        reduce_stage_1_tid_res_arr_mem_74298_cached_sizze_76657 = (int64_t) 8 *
            num_tasks_74297;
    }
    
    int64_t iter_74300;
    struct futhark_mc_segred_stage_1_parloop_struct_76658
    futhark_mc_segred_stage_1_parloop_struct_76658;
    
    futhark_mc_segred_stage_1_parloop_struct_76658.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76658.free_mem_70070 =
        mem_70070.mem;
    futhark_mc_segred_stage_1_parloop_struct_76658.free_defunc_0_g_res_73815 =
        defunc_0_g_res_73815;
    futhark_mc_segred_stage_1_parloop_struct_76658.free_max_res_73836 =
        max_res_73836;
    futhark_mc_segred_stage_1_parloop_struct_76658.free_reduce_stage_1_tid_res_arr_mem_74298 =
        reduce_stage_1_tid_res_arr_mem_74298;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76659_task;
    
    futhark_mc_segred_stage_1_parloop_76659_task.name =
        "futhark_mc_segred_stage_1_parloop_76659";
    futhark_mc_segred_stage_1_parloop_76659_task.fn =
        futhark_mc_segred_stage_1_parloop_76659;
    futhark_mc_segred_stage_1_parloop_76659_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76658;
    futhark_mc_segred_stage_1_parloop_76659_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76659_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76659_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76659_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76659_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76659_task);
    
    if (futhark_mc_segred_stage_1_parloop_76659_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76659_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76659_total_end -
                 futhark_mc_segred_stage_1_parloop_76659_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76659_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76659_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76659_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_73849 = (int64_t) 0;
    }
    
    int64_t x_74302;
    int64_t x_74303;
    
    for (int32_t i_74305 = 0; i_74305 < num_tasks_74297; i_74305++) {
        flat_tid_67291 = i_74305;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_74302 = defunc_2_reduce_res_73849;
            }
            // load next params
            {
                x_74303 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_74298)[flat_tid_67291];
            }
            // red body
            {
                int64_t defunc_1_op_res_74304 = add64(x_74302, x_74303);
                
                defunc_2_reduce_res_73849 = defunc_1_op_res_74304;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_74298);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76656_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76656_end -
                 futhark_mc_segred_task_76656_start;
        
        ctx->futhark_mc_segred_task_76656_runs[tid]++;
        ctx->futhark_mc_segred_task_76656_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76656_iter[tid] += iterations;
    }
    *futhark_mc_task_76655->retval_defunc_2_reduce_res_73849 =
        defunc_2_reduce_res_73849;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76660 {
    struct futhark_context *ctx;
    int64_t free_last_res_67440;
    char *free_mem_70064;
    char *free_mem_70073;
    int64_t free_min_res_73891;
    float free_defunc_1_f_res_73910;
    float free_defunc_0_f_res_73911;
    float *retval_defunc_2_reduce_res_73913;
    char *retval_mem_73912;
};
struct futhark_mc_segred_stage_1_parloop_struct_76663 {
    struct futhark_context *ctx;
    int64_t free_last_res_67440;
    char *free_mem_70064;
    char *free_mem_70073;
    int64_t free_min_res_73891;
    float free_defunc_1_f_res_73910;
    float free_defunc_0_f_res_73911;
    char *free_mem_73912;
    char *free_reduce_stage_1_tid_res_arr_mem_74311;
};
static int futhark_mc_segred_stage_1_parloop_76664(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_67293, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76663
    *futhark_mc_segred_stage_1_parloop_struct_76663 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76663 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76663->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76664_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76664_start = get_wall_time();
    
    int64_t last_res_67440 =
            futhark_mc_segred_stage_1_parloop_struct_76663->free_last_res_67440;
    struct memblock mem_70064 = {.desc ="mem_70064", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76663->free_mem_70064,
                                 .size =0, .references =NULL};
    struct memblock mem_70073 = {.desc ="mem_70073", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76663->free_mem_70073,
                                 .size =0, .references =NULL};
    int64_t min_res_73891 =
            futhark_mc_segred_stage_1_parloop_struct_76663->free_min_res_73891;
    float defunc_1_f_res_73910 =
          futhark_mc_segred_stage_1_parloop_struct_76663->free_defunc_1_f_res_73910;
    float defunc_0_f_res_73911 =
          futhark_mc_segred_stage_1_parloop_struct_76663->free_defunc_0_f_res_73911;
    struct memblock mem_73912 = {.desc ="mem_73912", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76663->free_mem_73912,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_74311 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_74311",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76663->free_reduce_stage_1_tid_res_arr_mem_74311,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74313 = start;
    float x_74264;
    float x_74265;
    float local_acc_74314 = 0.0F;
    
    for (; iter_74313 < end; iter_74313++) {
        int64_t gtid_67294 = iter_74313;
        float x_74267 = ((float *) mem_70073.mem)[gtid_67294];
        bool cond_74268 = sle64(last_res_67440, gtid_67294);
        float defunc_0_f_res_74269;
        
        if (cond_74268) {
            defunc_0_f_res_74269 = 0.0F;
        } else {
            int64_t i_74270 = add64(gtid_67294, min_res_73891);
            float x_74271 = ((float *) mem_70064.mem)[i_74270];
            float defunc_0_f_res_f_res_74272 = 1.0F + x_74271;
            
            defunc_0_f_res_74269 = defunc_0_f_res_f_res_74272;
        }
        
        float x_j_74273 = defunc_0_f_res_74269 - defunc_0_f_res_73911;
        float abs_res_74274 = (float) fabs(x_j_74273);
        float tmp1_74275 = abs_res_74274 / defunc_1_f_res_73910;
        float x_74276 = tmp1_74275 * tmp1_74275;
        float y_74277 = tmp1_74275 * x_74276;
        float tmp2_74278 = 1.0F - y_74277;
        float x_74279 = tmp2_74278 * tmp2_74278;
        float tmp3_74280 = tmp2_74278 * x_74279;
        float tmp4_74281 = x_74267 * tmp3_74280;
        
        // save map-out results
        {
            ((float *) mem_73912.mem)[gtid_67294] = tmp4_74281;
        }
        // Load accum params
        {
            x_74264 = local_acc_74314;
        }
        // Load next params
        {
            x_74265 = tmp4_74281;
        }
        // Red body
        {
            float defunc_1_op_res_74266 = x_74264 + x_74265;
            
            local_acc_74314 = defunc_1_op_res_74266;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_74311.mem)[flat_tid_67293] =
        local_acc_74314;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76664_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76664_end -
                 futhark_mc_segred_stage_1_parloop_76664_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76664_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76664_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76664_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76661(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67293 = tid;
    int num_tasks_74310 = info.nsubtasks;
    struct futhark_mc_task_76660 *futhark_mc_task_76660 =
                                 (struct futhark_mc_task_76660 *) args;
    struct futhark_context *ctx = futhark_mc_task_76660->ctx;
    uint64_t futhark_mc_segred_task_76661_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76661_start = get_wall_time();
    
    int64_t last_res_67440 = futhark_mc_task_76660->free_last_res_67440;
    struct memblock mem_70064 = {.desc ="mem_70064", .mem =
                                 futhark_mc_task_76660->free_mem_70064, .size =
                                 0, .references =NULL};
    struct memblock mem_70073 = {.desc ="mem_70073", .mem =
                                 futhark_mc_task_76660->free_mem_70073, .size =
                                 0, .references =NULL};
    int64_t min_res_73891 = futhark_mc_task_76660->free_min_res_73891;
    float defunc_1_f_res_73910 =
          futhark_mc_task_76660->free_defunc_1_f_res_73910;
    float defunc_0_f_res_73911 =
          futhark_mc_task_76660->free_defunc_0_f_res_73911;
    float defunc_2_reduce_res_73913 =
          *futhark_mc_task_76660->retval_defunc_2_reduce_res_73913;
    struct memblock mem_73912 = {.desc ="mem_73912", .mem =
                                 futhark_mc_task_76660->retval_mem_73912,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_74311_cached_sizze_76662 = 0;
    char *reduce_stage_1_tid_res_arr_mem_74311 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_74311_cached_sizze_76662 <
        (size_t) ((int64_t) 4 * num_tasks_74310)) {
        reduce_stage_1_tid_res_arr_mem_74311 =
            realloc(reduce_stage_1_tid_res_arr_mem_74311, (int64_t) 4 *
                    num_tasks_74310);
        reduce_stage_1_tid_res_arr_mem_74311_cached_sizze_76662 = (int64_t) 4 *
            num_tasks_74310;
    }
    
    int64_t iter_74313;
    struct futhark_mc_segred_stage_1_parloop_struct_76663
    futhark_mc_segred_stage_1_parloop_struct_76663;
    
    futhark_mc_segred_stage_1_parloop_struct_76663.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76663.free_last_res_67440 =
        last_res_67440;
    futhark_mc_segred_stage_1_parloop_struct_76663.free_mem_70064 =
        mem_70064.mem;
    futhark_mc_segred_stage_1_parloop_struct_76663.free_mem_70073 =
        mem_70073.mem;
    futhark_mc_segred_stage_1_parloop_struct_76663.free_min_res_73891 =
        min_res_73891;
    futhark_mc_segred_stage_1_parloop_struct_76663.free_defunc_1_f_res_73910 =
        defunc_1_f_res_73910;
    futhark_mc_segred_stage_1_parloop_struct_76663.free_defunc_0_f_res_73911 =
        defunc_0_f_res_73911;
    futhark_mc_segred_stage_1_parloop_struct_76663.free_mem_73912 =
        mem_73912.mem;
    futhark_mc_segred_stage_1_parloop_struct_76663.free_reduce_stage_1_tid_res_arr_mem_74311 =
        reduce_stage_1_tid_res_arr_mem_74311;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76664_task;
    
    futhark_mc_segred_stage_1_parloop_76664_task.name =
        "futhark_mc_segred_stage_1_parloop_76664";
    futhark_mc_segred_stage_1_parloop_76664_task.fn =
        futhark_mc_segred_stage_1_parloop_76664;
    futhark_mc_segred_stage_1_parloop_76664_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76663;
    futhark_mc_segred_stage_1_parloop_76664_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76664_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76664_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76664_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76664_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76664_task);
    
    if (futhark_mc_segred_stage_1_parloop_76664_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76664_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76664_total_end -
                 futhark_mc_segred_stage_1_parloop_76664_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76664_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76664_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76664_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_73913 = 0.0F;
    }
    
    float x_74315;
    float x_74316;
    
    for (int32_t i_74318 = 0; i_74318 < num_tasks_74310; i_74318++) {
        flat_tid_67293 = i_74318;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_74315 = defunc_2_reduce_res_73913;
            }
            // load next params
            {
                x_74316 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_74311)[flat_tid_67293];
            }
            // red body
            {
                float defunc_1_op_res_74317 = x_74315 + x_74316;
                
                defunc_2_reduce_res_73913 = defunc_1_op_res_74317;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_74311);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76661_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76661_end -
                 futhark_mc_segred_task_76661_start;
        
        ctx->futhark_mc_segred_task_76661_runs[tid]++;
        ctx->futhark_mc_segred_task_76661_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76661_iter[tid] += iterations;
    }
    *futhark_mc_task_76660->retval_defunc_2_reduce_res_73913 =
        defunc_2_reduce_res_73913;
    futhark_mc_task_76660->retval_mem_73912 = mem_73912.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76665 {
    struct futhark_context *ctx;
    int64_t free_last_res_67440;
    char *free_mem_70058;
    int64_t free_min_res_73891;
    char *free_mem_73912;
    float free_a0_73933;
    float *retval_defunc_2_reduce_res_73934;
};
struct futhark_mc_segred_stage_1_parloop_struct_76668 {
    struct futhark_context *ctx;
    int64_t free_last_res_67440;
    char *free_mem_70058;
    int64_t free_min_res_73891;
    char *free_mem_73912;
    float free_a0_73933;
    char *free_reduce_stage_1_tid_res_arr_mem_74320;
};
static int futhark_mc_segred_stage_1_parloop_76669(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_67295, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76668
    *futhark_mc_segred_stage_1_parloop_struct_76668 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76668 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76668->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76669_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76669_start = get_wall_time();
    
    int64_t last_res_67440 =
            futhark_mc_segred_stage_1_parloop_struct_76668->free_last_res_67440;
    struct memblock mem_70058 = {.desc ="mem_70058", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76668->free_mem_70058,
                                 .size =0, .references =NULL};
    int64_t min_res_73891 =
            futhark_mc_segred_stage_1_parloop_struct_76668->free_min_res_73891;
    struct memblock mem_73912 = {.desc ="mem_73912", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76668->free_mem_73912,
                                 .size =0, .references =NULL};
    float a0_73933 =
          futhark_mc_segred_stage_1_parloop_struct_76668->free_a0_73933;
    struct memblock reduce_stage_1_tid_res_arr_mem_74320 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_74320",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76668->free_reduce_stage_1_tid_res_arr_mem_74320,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74322 = start;
    float x_74282;
    float x_74283;
    float local_acc_74323 = 0.0F;
    
    for (; iter_74322 < end; iter_74322++) {
        int64_t gtid_67296 = iter_74322;
        float x_74285 = ((float *) mem_73912.mem)[gtid_67296];
        bool cond_74286 = sle64(last_res_67440, gtid_67296);
        float defunc_0_f_res_74287;
        
        if (cond_74286) {
            defunc_0_f_res_74287 = 0.0F;
        } else {
            int64_t i_74288 = add64(gtid_67296, min_res_73891);
            float x_74289 = ((float *) mem_70058.mem)[i_74288];
            
            defunc_0_f_res_74287 = x_74289;
        }
        
        float x_74290 = a0_73933 * x_74285;
        float defunc_9_fit_fun_res_74291 = defunc_0_f_res_74287 * x_74290;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_74282 = local_acc_74323;
        }
        // Load next params
        {
            x_74283 = defunc_9_fit_fun_res_74291;
        }
        // Red body
        {
            float defunc_1_op_res_74284 = x_74282 + x_74283;
            
            local_acc_74323 = defunc_1_op_res_74284;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_74320.mem)[flat_tid_67295] =
        local_acc_74323;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76669_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76669_end -
                 futhark_mc_segred_stage_1_parloop_76669_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76669_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76669_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76669_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76666(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67295 = tid;
    int num_tasks_74319 = info.nsubtasks;
    struct futhark_mc_task_76665 *futhark_mc_task_76665 =
                                 (struct futhark_mc_task_76665 *) args;
    struct futhark_context *ctx = futhark_mc_task_76665->ctx;
    uint64_t futhark_mc_segred_task_76666_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76666_start = get_wall_time();
    
    int64_t last_res_67440 = futhark_mc_task_76665->free_last_res_67440;
    struct memblock mem_70058 = {.desc ="mem_70058", .mem =
                                 futhark_mc_task_76665->free_mem_70058, .size =
                                 0, .references =NULL};
    int64_t min_res_73891 = futhark_mc_task_76665->free_min_res_73891;
    struct memblock mem_73912 = {.desc ="mem_73912", .mem =
                                 futhark_mc_task_76665->free_mem_73912, .size =
                                 0, .references =NULL};
    float a0_73933 = futhark_mc_task_76665->free_a0_73933;
    float defunc_2_reduce_res_73934 =
          *futhark_mc_task_76665->retval_defunc_2_reduce_res_73934;
    size_t reduce_stage_1_tid_res_arr_mem_74320_cached_sizze_76667 = 0;
    char *reduce_stage_1_tid_res_arr_mem_74320 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_74320_cached_sizze_76667 <
        (size_t) ((int64_t) 4 * num_tasks_74319)) {
        reduce_stage_1_tid_res_arr_mem_74320 =
            realloc(reduce_stage_1_tid_res_arr_mem_74320, (int64_t) 4 *
                    num_tasks_74319);
        reduce_stage_1_tid_res_arr_mem_74320_cached_sizze_76667 = (int64_t) 4 *
            num_tasks_74319;
    }
    
    int64_t iter_74322;
    struct futhark_mc_segred_stage_1_parloop_struct_76668
    futhark_mc_segred_stage_1_parloop_struct_76668;
    
    futhark_mc_segred_stage_1_parloop_struct_76668.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76668.free_last_res_67440 =
        last_res_67440;
    futhark_mc_segred_stage_1_parloop_struct_76668.free_mem_70058 =
        mem_70058.mem;
    futhark_mc_segred_stage_1_parloop_struct_76668.free_min_res_73891 =
        min_res_73891;
    futhark_mc_segred_stage_1_parloop_struct_76668.free_mem_73912 =
        mem_73912.mem;
    futhark_mc_segred_stage_1_parloop_struct_76668.free_a0_73933 = a0_73933;
    futhark_mc_segred_stage_1_parloop_struct_76668.free_reduce_stage_1_tid_res_arr_mem_74320 =
        reduce_stage_1_tid_res_arr_mem_74320;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76669_task;
    
    futhark_mc_segred_stage_1_parloop_76669_task.name =
        "futhark_mc_segred_stage_1_parloop_76669";
    futhark_mc_segred_stage_1_parloop_76669_task.fn =
        futhark_mc_segred_stage_1_parloop_76669;
    futhark_mc_segred_stage_1_parloop_76669_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76668;
    futhark_mc_segred_stage_1_parloop_76669_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76669_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76669_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76669_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76669_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76669_task);
    
    if (futhark_mc_segred_stage_1_parloop_76669_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76669_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76669_total_end -
                 futhark_mc_segred_stage_1_parloop_76669_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76669_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76669_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76669_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_73934 = 0.0F;
    }
    
    float x_74324;
    float x_74325;
    
    for (int32_t i_74327 = 0; i_74327 < num_tasks_74319; i_74327++) {
        flat_tid_67295 = i_74327;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_74324 = defunc_2_reduce_res_73934;
            }
            // load next params
            {
                x_74325 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_74320)[flat_tid_67295];
            }
            // red body
            {
                float defunc_1_op_res_74326 = x_74324 + x_74325;
                
                defunc_2_reduce_res_73934 = defunc_1_op_res_74326;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_74320);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76666_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76666_end -
                 futhark_mc_segred_task_76666_start;
        
        ctx->futhark_mc_segred_task_76666_runs[tid]++;
        ctx->futhark_mc_segred_task_76666_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76666_iter[tid] += iterations;
    }
    *futhark_mc_task_76665->retval_defunc_2_reduce_res_73934 =
        defunc_2_reduce_res_73934;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76653(void *args, int64_t start,
                                           int64_t end, int flat_tid_67289,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76652
    *futhark_mc_segmap_parloop_struct_76652 =
    (struct futhark_mc_segmap_parloop_struct_76652 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76652->ctx;
    uint64_t futhark_mc_segmap_parloop_76653_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76653_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76652->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76652->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76652->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76652->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76652->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76652->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76652->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76652->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76652->free_m_64052;
    int64_t last_res_67440 =
            futhark_mc_segmap_parloop_struct_76652->free_last_res_67440;
    int64_t min_arg_67452 =
            futhark_mc_segmap_parloop_struct_76652->free_min_arg_67452;
    float max_res_67456 =
          futhark_mc_segmap_parloop_struct_76652->free_max_res_67456;
    struct memblock mem_70058 = {.desc ="mem_70058", .mem =
                                 futhark_mc_segmap_parloop_struct_76652->free_mem_70058,
                                 .size =0, .references =NULL};
    struct memblock mem_70061 = {.desc ="mem_70061", .mem =
                                 futhark_mc_segmap_parloop_struct_76652->free_mem_70061,
                                 .size =0, .references =NULL};
    struct memblock mem_70064 = {.desc ="mem_70064", .mem =
                                 futhark_mc_segmap_parloop_struct_76652->free_mem_70064,
                                 .size =0, .references =NULL};
    struct memblock mem_70067 = {.desc ="mem_70067", .mem =
                                 futhark_mc_segmap_parloop_struct_76652->free_mem_70067,
                                 .size =0, .references =NULL};
    struct memblock mem_70070 = {.desc ="mem_70070", .mem =
                                 futhark_mc_segmap_parloop_struct_76652->free_mem_70070,
                                 .size =0, .references =NULL};
    int64_t bytes_70071 =
            futhark_mc_segmap_parloop_struct_76652->free_bytes_70071;
    struct memblock mem_70073 = {.desc ="mem_70073", .mem =
                                 futhark_mc_segmap_parloop_struct_76652->free_mem_70073,
                                 .size =0, .references =NULL};
    struct memblock mem_70094 = {.desc ="mem_70094", .mem =
                                 futhark_mc_segmap_parloop_struct_76652->free_mem_70094,
                                 .size =0, .references =NULL};
    size_t mem_73912_cached_sizze_76654 = 0;
    char *mem_73912 = NULL;
    int64_t iterations = end - start;
    int64_t iter_74210 = start;
    
    if (mem_73912_cached_sizze_76654 < (size_t) bytes_70071) {
        mem_73912 = realloc(mem_73912, bytes_70071);
        mem_73912_cached_sizze_76654 = bytes_70071;
    }
    for (; iter_74210 < end; iter_74210++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74292 = n_m_64039;
        int64_t gtid_67290 = iter_74210;
        int64_t remnant_74293 = iter_74210 - gtid_67290;
        int64_t min_arg_73813 = mul64(jump_64032, gtid_67290);
        int64_t min_res_73814 = smin64(i_64040, min_arg_73813);
        int64_t defunc_0_g_res_73815 = add64((int64_t) 1, min_res_73814);
        bool nearest_idx_73816;
        int64_t nearest_idx_73817;
        int64_t nearest_idx_73818;
        bool loop_while_74211;
        int64_t low_74212;
        int64_t high_74213;
        
        loop_while_74211 = x_64041;
        low_74212 = (int64_t) 0;
        high_74213 = i_64040;
        while (loop_while_74211) {
            int64_t x_74214 = add64(low_74212, high_74213);
            int64_t mid_74215 = sdiv64(x_74214, (int64_t) 2);
            bool x_74216 = sle64((int64_t) 0, mid_74215);
            bool y_74217 = slt64(mid_74215, n_64028);
            bool bounds_check_74218 = x_74216 && y_74217;
            bool index_certs_74219;
            
            if (!bounds_check_74218) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_74215,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_74220 = ((int64_t *) mem_70067.mem)[mid_74215];
            bool cond_74221 = sle64(defunc_0_g_res_73815, x_74220);
            int64_t loopres_74222;
            int64_t loopres_74223;
            
            if (cond_74221) {
                int64_t loopres_t_res_74224 = sub64(mid_74215, (int64_t) 1);
                
                loopres_74222 = low_74212;
                loopres_74223 = loopres_t_res_74224;
            } else {
                int64_t loopres_f_res_74225 = add64((int64_t) 1, mid_74215);
                
                loopres_74222 = loopres_f_res_74225;
                loopres_74223 = high_74213;
            }
            
            bool loop_cond_74226 = sle64(loopres_74222, loopres_74223);
            bool loop_while_tmp_74294 = loop_cond_74226;
            int64_t low_tmp_74295 = loopres_74222;
            int64_t high_tmp_74296 = loopres_74223;
            
            loop_while_74211 = loop_while_tmp_74294;
            low_74212 = low_tmp_74295;
            high_74213 = high_tmp_74296;
        }
        nearest_idx_73816 = loop_while_74211;
        nearest_idx_73817 = low_74212;
        nearest_idx_73818 = high_74213;
        
        int64_t max_arg_73835 = sub64(nearest_idx_73817, min_res_64046);
        int64_t max_res_73836 = smax64((int64_t) 0, max_arg_73835);
        int64_t j_73837 = add64(min_res_64046, max_res_73836);
        int64_t i_p_m_t_s_73838 = add64(m_64052, max_res_73836);
        bool zzero_leq_i_p_m_t_s_73839 = sle64((int64_t) 0, i_p_m_t_s_73838);
        bool i_p_m_t_s_leq_w_73840 = slt64(i_p_m_t_s_73838, n_64028);
        bool zzero_lte_i_73841 = sle64((int64_t) 0, max_res_73836);
        bool i_lte_j_73842 = sle64(max_res_73836, j_73837);
        bool y_73843 = i_p_m_t_s_leq_w_73840 && zzero_lte_i_73841;
        bool y_73844 = zzero_leq_i_p_m_t_s_73839 && y_73843;
        bool y_73845 = i_lte_j_73842 && y_73844;
        bool forwards_ok_73846 = zzero_lte_i_73841 && y_73845;
        bool ok_or_empty_73847 = empty_slice_64051 || forwards_ok_73846;
        bool index_certs_73848;
        
        if (!ok_or_empty_73847) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_73836, ":",
                          (long long) j_73837,
                          "] out of bounds for array of shape [",
                          (long long) n_64028, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_73849;
        int64_t flat_tid_67291 = (int64_t) 0;
        int32_t num_tasks_74297;
        struct futhark_mc_task_76655 futhark_mc_task_76655;
        
        futhark_mc_task_76655.ctx = ctx;
        futhark_mc_task_76655.free_mem_70070 = mem_70070.mem;
        futhark_mc_task_76655.free_defunc_0_g_res_73815 = defunc_0_g_res_73815;
        futhark_mc_task_76655.free_max_res_73836 = max_res_73836;
        futhark_mc_task_76655.retval_defunc_2_reduce_res_73849 =
            &defunc_2_reduce_res_73849;
        
        struct scheduler_segop futhark_mc_task_76655_task;
        
        futhark_mc_task_76655_task.args = &futhark_mc_task_76655;
        futhark_mc_task_76655_task.top_level_fn = futhark_mc_segred_task_76656;
        futhark_mc_task_76655_task.name = "futhark_mc_segred_task_76656";
        futhark_mc_task_76655_task.iterations = min_res_64046;
        futhark_mc_task_76655_task.task_time =
            &ctx->futhark_mc_segred_task_76656_total_time;
        futhark_mc_task_76655_task.task_iter =
            &ctx->futhark_mc_segred_task_76656_total_iter;
        futhark_mc_task_76655_task.sched = STATIC;
        futhark_mc_task_76655_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76656_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76655_task);
        
        if (futhark_mc_segred_task_76656_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_73857;
        int64_t idx_73858;
        int64_t idx_73859;
        int64_t idx_73860;
        int64_t best_idx_74235;
        int64_t last_idx_74236;
        int64_t best_sum_74237;
        int64_t curr_sum_74238;
        
        best_idx_74235 = max_res_73836;
        last_idx_74236 = max_res_73836;
        best_sum_74237 = defunc_2_reduce_res_73849;
        curr_sum_74238 = defunc_2_reduce_res_73849;
        for (int64_t j_74234 = 0; j_74234 < min_res_64046; j_74234++) {
            int64_t new_idx_74239 = add64(max_res_73836, j_74234);
            int64_t x_74240 = add64(min_res_64046, new_idx_74239);
            bool cond_74241 = slt64(last_res_67440, x_74240);
            int64_t new_sum_74242;
            
            if (cond_74241) {
                new_sum_74242 = (int64_t) 9223372036854775807;
            } else {
                bool x_74243 = sle64((int64_t) 0, last_idx_74236);
                bool y_74244 = slt64(last_idx_74236, n_64028);
                bool bounds_check_74245 = x_74243 && y_74244;
                bool index_certs_74246;
                
                if (!bounds_check_74245) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_74236,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_74247 = ((int64_t *) mem_70070.mem)[last_idx_74236];
                int64_t binop_p_74248 = sub64(defunc_0_g_res_73815, y_74247);
                int64_t defunc_0_f_res_74249 = abs64(binop_p_74248);
                int64_t x_74250 = sub64(curr_sum_74238, defunc_0_f_res_74249);
                int64_t min_arg_74251 = add64(min_res_64046, last_idx_74236);
                int64_t min_res_74252 = smin64(i_64040, min_arg_74251);
                bool x_74253 = sle64((int64_t) 0, min_res_74252);
                bool y_74254 = slt64(min_res_74252, n_64028);
                bool bounds_check_74255 = x_74253 && y_74254;
                bool index_certs_74256;
                
                if (!bounds_check_74255) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_74252,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_74257 = ((int64_t *) mem_70070.mem)[min_res_74252];
                int64_t binop_p_74258 = sub64(defunc_0_g_res_73815, y_74257);
                int64_t defunc_0_f_res_74259 = abs64(binop_p_74258);
                int64_t new_sum_f_res_74260 = add64(x_74250,
                                                    defunc_0_f_res_74259);
                
                new_sum_74242 = new_sum_f_res_74260;
            }
            
            bool cond_74261 = sle64(new_sum_74242, best_sum_74237);
            int64_t loopres_74262;
            
            if (cond_74261) {
                loopres_74262 = new_idx_74239;
            } else {
                loopres_74262 = best_idx_74235;
            }
            
            int64_t loopres_74263;
            
            if (cond_74261) {
                loopres_74263 = new_sum_74242;
            } else {
                loopres_74263 = best_sum_74237;
            }
            
            int64_t best_idx_tmp_74306 = loopres_74262;
            int64_t last_idx_tmp_74307 = new_idx_74239;
            int64_t best_sum_tmp_74308 = loopres_74263;
            int64_t curr_sum_tmp_74309 = new_sum_74242;
            
            best_idx_74235 = best_idx_tmp_74306;
            last_idx_74236 = last_idx_tmp_74307;
            best_sum_74237 = best_sum_tmp_74308;
            curr_sum_74238 = curr_sum_tmp_74309;
        }
        idx_73857 = best_idx_74235;
        idx_73858 = last_idx_74236;
        idx_73859 = best_sum_74237;
        idx_73860 = curr_sum_74238;
        
        int64_t min_res_73891 = smin64(min_arg_67452, idx_73857);
        int64_t x_73892 = add64(min_res_64046, min_res_73891);
        int64_t r_73893 = sub64(x_73892, (int64_t) 1);
        bool x_73894 = sle64((int64_t) 0, r_73893);
        bool y_73895 = slt64(r_73893, n_64028);
        bool bounds_check_73896 = x_73894 && y_73895;
        bool index_certs_73897;
        
        if (!bounds_check_73896) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_73893,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_73898 = ((int64_t *) mem_70061.mem)[r_73893];
        int64_t abs_arg_73899 = sub64(x_73898, min_res_73814);
        int64_t abs_res_73900 = abs64(abs_arg_73899);
        bool x_73901 = sle64((int64_t) 0, min_res_73891);
        bool y_73902 = slt64(min_res_73891, n_64028);
        bool bounds_check_73903 = x_73901 && y_73902;
        bool index_certs_73904;
        
        if (!bounds_check_73903) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_73891,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_73905 = ((int64_t *) mem_70061.mem)[min_res_73891];
        int64_t abs_arg_73906 = sub64(x_73905, min_res_73814);
        int64_t abs_res_73907 = abs64(abs_arg_73906);
        int64_t max_res_73908 = smax64(abs_res_73900, abs_res_73907);
        float defunc_0_f_res_73909 = sitofp_i64_f32(max_res_73908);
        float defunc_1_f_res_73910 = max_res_67456 + defunc_0_f_res_73909;
        float defunc_0_f_res_73911 = sitofp_i64_f32(min_res_73814);
        float defunc_2_reduce_res_73913;
        int64_t flat_tid_67293 = (int64_t) 0;
        int32_t num_tasks_74310;
        struct futhark_mc_task_76660 futhark_mc_task_76660;
        
        futhark_mc_task_76660.ctx = ctx;
        futhark_mc_task_76660.free_last_res_67440 = last_res_67440;
        futhark_mc_task_76660.free_mem_70064 = mem_70064.mem;
        futhark_mc_task_76660.free_mem_70073 = mem_70073.mem;
        futhark_mc_task_76660.free_min_res_73891 = min_res_73891;
        futhark_mc_task_76660.free_defunc_1_f_res_73910 = defunc_1_f_res_73910;
        futhark_mc_task_76660.free_defunc_0_f_res_73911 = defunc_0_f_res_73911;
        futhark_mc_task_76660.retval_defunc_2_reduce_res_73913 =
            &defunc_2_reduce_res_73913;
        futhark_mc_task_76660.retval_mem_73912 = mem_73912;
        
        struct scheduler_segop futhark_mc_task_76660_task;
        
        futhark_mc_task_76660_task.args = &futhark_mc_task_76660;
        futhark_mc_task_76660_task.top_level_fn = futhark_mc_segred_task_76661;
        futhark_mc_task_76660_task.name = "futhark_mc_segred_task_76661";
        futhark_mc_task_76660_task.iterations = q_64030;
        futhark_mc_task_76660_task.task_time =
            &ctx->futhark_mc_segred_task_76661_total_time;
        futhark_mc_task_76660_task.task_iter =
            &ctx->futhark_mc_segred_task_76661_total_iter;
        futhark_mc_task_76660_task.sched = STATIC;
        futhark_mc_task_76660_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76661_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76660_task);
        
        if (futhark_mc_segred_task_76661_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_73933 = 1.0F / defunc_2_reduce_res_73913;
        float defunc_2_reduce_res_73934;
        int64_t flat_tid_67295 = (int64_t) 0;
        int32_t num_tasks_74319;
        struct futhark_mc_task_76665 futhark_mc_task_76665;
        
        futhark_mc_task_76665.ctx = ctx;
        futhark_mc_task_76665.free_last_res_67440 = last_res_67440;
        futhark_mc_task_76665.free_mem_70058 = mem_70058.mem;
        futhark_mc_task_76665.free_min_res_73891 = min_res_73891;
        futhark_mc_task_76665.free_mem_73912 = mem_73912;
        futhark_mc_task_76665.free_a0_73933 = a0_73933;
        futhark_mc_task_76665.retval_defunc_2_reduce_res_73934 =
            &defunc_2_reduce_res_73934;
        
        struct scheduler_segop futhark_mc_task_76665_task;
        
        futhark_mc_task_76665_task.args = &futhark_mc_task_76665;
        futhark_mc_task_76665_task.top_level_fn = futhark_mc_segred_task_76666;
        futhark_mc_task_76665_task.name = "futhark_mc_segred_task_76666";
        futhark_mc_task_76665_task.iterations = q_64030;
        futhark_mc_task_76665_task.task_time =
            &ctx->futhark_mc_segred_task_76666_total_time;
        futhark_mc_task_76665_task.task_iter =
            &ctx->futhark_mc_segred_task_76666_total_iter;
        futhark_mc_task_76665_task.sched = STATIC;
        futhark_mc_task_76665_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76666_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76665_task);
        
        if (futhark_mc_segred_task_76666_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_70094.mem)[gtid_67290] = defunc_2_reduce_res_73934;
    }
    
  cleanup:
    { }
    free(mem_73912);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76653_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76653_end -
                 futhark_mc_segmap_parloop_76653_start;
        
        ctx->futhark_mc_segmap_parloop_76653_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76653_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76653_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76651(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67289 = tid;
    int num_tasks_74112 = info.nsubtasks;
    struct futhark_mc_task_76646 *futhark_mc_task_76646 =
                                 (struct futhark_mc_task_76646 *) args;
    struct futhark_context *ctx = futhark_mc_task_76646->ctx;
    uint64_t futhark_mc_segmap_nested_task_76651_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76651_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76646->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76646->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76646->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76646->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76646->free_i_64040;
    bool x_64041 = futhark_mc_task_76646->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76646->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76646->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76646->free_m_64052;
    int64_t last_res_67440 = futhark_mc_task_76646->free_last_res_67440;
    int64_t min_arg_67452 = futhark_mc_task_76646->free_min_arg_67452;
    float max_res_67456 = futhark_mc_task_76646->free_max_res_67456;
    struct memblock mem_70058 = {.desc ="mem_70058", .mem =
                                 futhark_mc_task_76646->free_mem_70058, .size =
                                 0, .references =NULL};
    struct memblock mem_70061 = {.desc ="mem_70061", .mem =
                                 futhark_mc_task_76646->free_mem_70061, .size =
                                 0, .references =NULL};
    struct memblock mem_70064 = {.desc ="mem_70064", .mem =
                                 futhark_mc_task_76646->free_mem_70064, .size =
                                 0, .references =NULL};
    struct memblock mem_70067 = {.desc ="mem_70067", .mem =
                                 futhark_mc_task_76646->free_mem_70067, .size =
                                 0, .references =NULL};
    struct memblock mem_70070 = {.desc ="mem_70070", .mem =
                                 futhark_mc_task_76646->free_mem_70070, .size =
                                 0, .references =NULL};
    int64_t bytes_70071 = futhark_mc_task_76646->free_bytes_70071;
    struct memblock mem_70073 = {.desc ="mem_70073", .mem =
                                 futhark_mc_task_76646->free_mem_70073, .size =
                                 0, .references =NULL};
    struct memblock mem_70094 = {.desc ="mem_70094", .mem =
                                 futhark_mc_task_76646->free_mem_70094, .size =
                                 0, .references =NULL};
    int64_t iter_74210;
    struct futhark_mc_segmap_parloop_struct_76652
    futhark_mc_segmap_parloop_struct_76652;
    
    futhark_mc_segmap_parloop_struct_76652.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76652.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76652.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76652.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76652.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76652.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76652.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76652.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76652.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76652.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76652.free_last_res_67440 = last_res_67440;
    futhark_mc_segmap_parloop_struct_76652.free_min_arg_67452 = min_arg_67452;
    futhark_mc_segmap_parloop_struct_76652.free_max_res_67456 = max_res_67456;
    futhark_mc_segmap_parloop_struct_76652.free_mem_70058 = mem_70058.mem;
    futhark_mc_segmap_parloop_struct_76652.free_mem_70061 = mem_70061.mem;
    futhark_mc_segmap_parloop_struct_76652.free_mem_70064 = mem_70064.mem;
    futhark_mc_segmap_parloop_struct_76652.free_mem_70067 = mem_70067.mem;
    futhark_mc_segmap_parloop_struct_76652.free_mem_70070 = mem_70070.mem;
    futhark_mc_segmap_parloop_struct_76652.free_bytes_70071 = bytes_70071;
    futhark_mc_segmap_parloop_struct_76652.free_mem_70073 = mem_70073.mem;
    futhark_mc_segmap_parloop_struct_76652.free_mem_70094 = mem_70094.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76653_task;
    
    futhark_mc_segmap_parloop_76653_task.name =
        "futhark_mc_segmap_parloop_76653";
    futhark_mc_segmap_parloop_76653_task.fn = futhark_mc_segmap_parloop_76653;
    futhark_mc_segmap_parloop_76653_task.args =
        &futhark_mc_segmap_parloop_struct_76652;
    futhark_mc_segmap_parloop_76653_task.iterations = iterations;
    futhark_mc_segmap_parloop_76653_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76653_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76653_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76653_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76653_task);
    
    if (futhark_mc_segmap_parloop_76653_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76653_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76653_total_end -
                 futhark_mc_segmap_parloop_76653_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76653_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76653_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76653_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76651_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76651_end -
                 futhark_mc_segmap_nested_task_76651_start;
        
        ctx->futhark_mc_segmap_nested_task_76651_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76651_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76651_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76618(void *args, int64_t start,
                                           int64_t end, int flat_tid_67277,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76617
    *futhark_mc_segmap_parloop_struct_76617 =
    (struct futhark_mc_segmap_parloop_struct_76617 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76617->ctx;
    uint64_t futhark_mc_segmap_parloop_76618_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76618_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_segmap_parloop_struct_76617->free_m_64027;
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76617->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76617->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76617->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76617->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76617->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76617->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76617->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76617->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76617->free_m_64052;
    float i64_res_64053 =
          futhark_mc_segmap_parloop_struct_76617->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76617->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_70053 =
            futhark_mc_segmap_parloop_struct_76617->free_bytes_70053;
    int64_t bytes_70056 =
            futhark_mc_segmap_parloop_struct_76617->free_bytes_70056;
    int64_t bytes_70071 =
            futhark_mc_segmap_parloop_struct_76617->free_bytes_70071;
    int64_t bytes_70092 =
            futhark_mc_segmap_parloop_struct_76617->free_bytes_70092;
    struct memblock mem_70233 = {.desc ="mem_70233", .mem =
                                 futhark_mc_segmap_parloop_struct_76617->free_mem_70233,
                                 .size =0, .references =NULL};
    size_t mem_70055_cached_sizze_76619 = 0;
    char *mem_70055 = NULL;
    size_t mem_70058_cached_sizze_76620 = 0;
    char *mem_70058 = NULL;
    size_t mem_70061_cached_sizze_76621 = 0;
    char *mem_70061 = NULL;
    size_t mem_70064_cached_sizze_76622 = 0;
    char *mem_70064 = NULL;
    size_t mem_70067_cached_sizze_76623 = 0;
    char *mem_70067 = NULL;
    size_t mem_70070_cached_sizze_76624 = 0;
    char *mem_70070 = NULL;
    size_t mem_70073_cached_sizze_76625 = 0;
    char *mem_70073 = NULL;
    size_t mem_70094_cached_sizze_76626 = 0;
    char *mem_70094 = NULL;
    int64_t iterations = end - start;
    int64_t iter_73792 = start;
    
    if (mem_70055_cached_sizze_76619 < (size_t) bytes_70053) {
        mem_70055 = realloc(mem_70055, bytes_70053);
        mem_70055_cached_sizze_76619 = bytes_70053;
    }
    if (mem_70058_cached_sizze_76620 < (size_t) bytes_70056) {
        mem_70058 = realloc(mem_70058, bytes_70056);
        mem_70058_cached_sizze_76620 = bytes_70056;
    }
    if (mem_70061_cached_sizze_76621 < (size_t) bytes_70053) {
        mem_70061 = realloc(mem_70061, bytes_70053);
        mem_70061_cached_sizze_76621 = bytes_70053;
    }
    if (mem_70064_cached_sizze_76622 < (size_t) bytes_70056) {
        mem_70064 = realloc(mem_70064, bytes_70056);
        mem_70064_cached_sizze_76622 = bytes_70056;
    }
    if (mem_70067_cached_sizze_76623 < (size_t) bytes_70053) {
        mem_70067 = realloc(mem_70067, bytes_70053);
        mem_70067_cached_sizze_76623 = bytes_70053;
    }
    if (mem_70070_cached_sizze_76624 < (size_t) bytes_70053) {
        mem_70070 = realloc(mem_70070, bytes_70053);
        mem_70070_cached_sizze_76624 = bytes_70053;
    }
    if (mem_70073_cached_sizze_76625 < (size_t) bytes_70071) {
        mem_70073 = realloc(mem_70073, bytes_70071);
        mem_70073_cached_sizze_76625 = bytes_70071;
    }
    if (mem_70094_cached_sizze_76626 < (size_t) bytes_70092) {
        mem_70094 = realloc(mem_70094, bytes_70092);
        mem_70094_cached_sizze_76626 = bytes_70092;
    }
    for (; iter_73792 < end; iter_73792++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74080 = m_64027;
        int64_t gtid_67278 = iter_73792;
        int64_t remnant_74081 = iter_73792 - gtid_67278;
        int64_t flat_tid_67279 = (int64_t) 0;
        int32_t num_tasks_74082;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_76627 futhark_mc_task_76627;
        
        futhark_mc_task_76627.ctx = ctx;
        futhark_mc_task_76627.free_n_64028 = n_64028;
        futhark_mc_task_76627.free_gtid_67278 = gtid_67278;
        futhark_mc_task_76627.free_Y_mem_69552 = Y_mem_69552.mem;
        futhark_mc_task_76627.free_mem_70055 = mem_70055;
        
        struct scheduler_segop futhark_mc_task_76627_task;
        
        futhark_mc_task_76627_task.args = &futhark_mc_task_76627;
        futhark_mc_task_76627_task.top_level_fn = futhark_mc_segscan_task_76628;
        futhark_mc_task_76627_task.name = "futhark_mc_segscan_task_76628";
        futhark_mc_task_76627_task.iterations = n_64028;
        futhark_mc_task_76627_task.task_time =
            &ctx->futhark_mc_segscan_task_76628_total_time;
        futhark_mc_task_76627_task.task_iter =
            &ctx->futhark_mc_segscan_task_76628_total_iter;
        futhark_mc_task_76627_task.sched = STATIC;
        futhark_mc_task_76627_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_76628_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76627_task);
        
        if (futhark_mc_segscan_task_76628_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_67440 = ((int64_t *) mem_70055)[i_64040];
        
        for (int64_t i_74096 = 0; i_74096 < n_64028; i_74096++) {
            ((float *) mem_70058)[i_74096] = 0.0F;
        }
        for (int64_t i_74097 = 0; i_74097 < n_64028; i_74097++) {
            ((int64_t *) mem_70061)[i_74097] = (int64_t) -1;
        }
        
        int64_t flat_tid_67281 = (int64_t) 0;
        int32_t num_tasks_74098;
        struct futhark_mc_task_76634 futhark_mc_task_76634;
        
        futhark_mc_task_76634.ctx = ctx;
        futhark_mc_task_76634.free_n_64028 = n_64028;
        futhark_mc_task_76634.free_gtid_67278 = gtid_67278;
        futhark_mc_task_76634.free_Y_mem_69552 = Y_mem_69552.mem;
        futhark_mc_task_76634.free_mem_70055 = mem_70055;
        futhark_mc_task_76634.free_mem_70058 = mem_70058;
        futhark_mc_task_76634.free_mem_70061 = mem_70061;
        
        struct scheduler_segop futhark_mc_task_76634_task;
        
        futhark_mc_task_76634_task.args = &futhark_mc_task_76634;
        futhark_mc_task_76634_task.top_level_fn = futhark_mc_segmap_task_76635;
        futhark_mc_task_76634_task.name = "futhark_mc_segmap_task_76635";
        futhark_mc_task_76634_task.iterations = n_64028;
        futhark_mc_task_76634_task.task_time =
            &ctx->futhark_mc_segmap_task_76635_total_time;
        futhark_mc_task_76634_task.task_iter =
            &ctx->futhark_mc_segmap_task_76635_total_iter;
        futhark_mc_task_76634_task.sched = STATIC;
        futhark_mc_task_76634_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76635_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76634_task);
        
        if (futhark_mc_segmap_task_76635_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_67452 = sub64(last_res_67440, min_res_64046);
        float i64_res_67453 = sitofp_i64_f32(last_res_67440);
        float x_67454 = i64_res_64053 - i64_res_67453;
        float max_arg_67455 = x_67454 / 2.0F;
        float max_res_67456 = fmax32(0.0F, max_arg_67455);
        int64_t flat_tid_67283 = (int64_t) 0;
        int32_t num_tasks_74104;
        struct futhark_mc_task_76638 futhark_mc_task_76638;
        
        futhark_mc_task_76638.ctx = ctx;
        futhark_mc_task_76638.free_n_64028 = n_64028;
        futhark_mc_task_76638.free_mem_70061 = mem_70061;
        futhark_mc_task_76638.free_mem_70064 = mem_70064;
        futhark_mc_task_76638.free_mem_70067 = mem_70067;
        futhark_mc_task_76638.free_mem_70070 = mem_70070;
        
        struct scheduler_segop futhark_mc_task_76638_task;
        
        futhark_mc_task_76638_task.args = &futhark_mc_task_76638;
        futhark_mc_task_76638_task.top_level_fn = futhark_mc_segmap_task_76639;
        futhark_mc_task_76638_task.name = "futhark_mc_segmap_task_76639";
        futhark_mc_task_76638_task.iterations = n_64028;
        futhark_mc_task_76638_task.task_time =
            &ctx->futhark_mc_segmap_task_76639_total_time;
        futhark_mc_task_76638_task.task_iter =
            &ctx->futhark_mc_segmap_task_76639_total_iter;
        futhark_mc_task_76638_task.sched = STATIC;
        futhark_mc_task_76638_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76639_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76638_task);
        
        if (futhark_mc_segmap_task_76639_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_67285 = (int64_t) 0;
        int32_t num_tasks_74108;
        struct futhark_mc_task_76642 futhark_mc_task_76642;
        
        futhark_mc_task_76642.ctx = ctx;
        futhark_mc_task_76642.free_q_64030 = q_64030;
        futhark_mc_task_76642.free_last_res_67440 = last_res_67440;
        futhark_mc_task_76642.free_mem_70073 = mem_70073;
        
        struct scheduler_segop futhark_mc_task_76642_task;
        
        futhark_mc_task_76642_task.args = &futhark_mc_task_76642;
        futhark_mc_task_76642_task.top_level_fn = futhark_mc_segmap_task_76643;
        futhark_mc_task_76642_task.name = "futhark_mc_segmap_task_76643";
        futhark_mc_task_76642_task.iterations = q_64030;
        futhark_mc_task_76642_task.task_time =
            &ctx->futhark_mc_segmap_task_76643_total_time;
        futhark_mc_task_76642_task.task_iter =
            &ctx->futhark_mc_segmap_task_76643_total_iter;
        futhark_mc_task_76642_task.sched = STATIC;
        futhark_mc_task_76642_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76643_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76642_task);
        
        if (futhark_mc_segmap_task_76643_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_67287 = (int64_t) 0;
        int32_t num_tasks_74112;
        int64_t flat_tid_67289 = (int64_t) 0;
        struct futhark_mc_task_76646 futhark_mc_task_76646;
        
        futhark_mc_task_76646.ctx = ctx;
        futhark_mc_task_76646.free_n_64028 = n_64028;
        futhark_mc_task_76646.free_q_64030 = q_64030;
        futhark_mc_task_76646.free_jump_64032 = jump_64032;
        futhark_mc_task_76646.free_n_m_64039 = n_m_64039;
        futhark_mc_task_76646.free_i_64040 = i_64040;
        futhark_mc_task_76646.free_x_64041 = x_64041;
        futhark_mc_task_76646.free_min_res_64046 = min_res_64046;
        futhark_mc_task_76646.free_empty_slice_64051 = empty_slice_64051;
        futhark_mc_task_76646.free_m_64052 = m_64052;
        futhark_mc_task_76646.free_last_res_67440 = last_res_67440;
        futhark_mc_task_76646.free_min_arg_67452 = min_arg_67452;
        futhark_mc_task_76646.free_max_res_67456 = max_res_67456;
        futhark_mc_task_76646.free_mem_70058 = mem_70058;
        futhark_mc_task_76646.free_mem_70061 = mem_70061;
        futhark_mc_task_76646.free_mem_70064 = mem_70064;
        futhark_mc_task_76646.free_mem_70067 = mem_70067;
        futhark_mc_task_76646.free_mem_70070 = mem_70070;
        futhark_mc_task_76646.free_bytes_70071 = bytes_70071;
        futhark_mc_task_76646.free_mem_70073 = mem_70073;
        futhark_mc_task_76646.free_mem_70094 = mem_70094;
        
        struct scheduler_segop futhark_mc_task_76646_task;
        
        futhark_mc_task_76646_task.args = &futhark_mc_task_76646;
        futhark_mc_task_76646_task.top_level_fn = futhark_mc_segmap_task_76647;
        futhark_mc_task_76646_task.name = "futhark_mc_segmap_task_76647";
        futhark_mc_task_76646_task.iterations = n_m_64039;
        futhark_mc_task_76646_task.task_time =
            &ctx->futhark_mc_segmap_task_76647_total_time;
        futhark_mc_task_76646_task.task_iter =
            &ctx->futhark_mc_segmap_task_76647_total_iter;
        futhark_mc_task_76646_task.sched = DYNAMIC;
        futhark_mc_task_76646_task.nested_fn =
            futhark_mc_segmap_nested_task_76651;
        
        int futhark_mc_segmap_task_76647_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76646_task);
        
        if (futhark_mc_segmap_task_76647_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_70233.mem + gtid_67278 * n_m_64039 * (int64_t) 4,
                mem_70094 + (int64_t) 0, n_m_64039 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70055);
    free(mem_70058);
    free(mem_70061);
    free(mem_70064);
    free(mem_70067);
    free(mem_70070);
    free(mem_70073);
    free(mem_70094);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76618_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76618_end -
                 futhark_mc_segmap_parloop_76618_start;
        
        ctx->futhark_mc_segmap_parloop_76618_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76618_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76618_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76616(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67277 = tid;
    int num_tasks_73591 = info.nsubtasks;
    struct futhark_mc_task_76603 *futhark_mc_task_76603 =
                                 (struct futhark_mc_task_76603 *) args;
    struct futhark_context *ctx = futhark_mc_task_76603->ctx;
    uint64_t futhark_mc_segmap_nested_task_76616_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76616_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_task_76603->free_m_64027;
    int64_t n_64028 = futhark_mc_task_76603->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76603->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76603->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76603->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76603->free_i_64040;
    bool x_64041 = futhark_mc_task_76603->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76603->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76603->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76603->free_m_64052;
    float i64_res_64053 = futhark_mc_task_76603->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76603->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_70053 = futhark_mc_task_76603->free_bytes_70053;
    int64_t bytes_70056 = futhark_mc_task_76603->free_bytes_70056;
    int64_t bytes_70071 = futhark_mc_task_76603->free_bytes_70071;
    int64_t bytes_70092 = futhark_mc_task_76603->free_bytes_70092;
    struct memblock mem_70233 = {.desc ="mem_70233", .mem =
                                 futhark_mc_task_76603->free_mem_70233, .size =
                                 0, .references =NULL};
    int64_t iter_73792;
    struct futhark_mc_segmap_parloop_struct_76617
    futhark_mc_segmap_parloop_struct_76617;
    
    futhark_mc_segmap_parloop_struct_76617.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76617.free_m_64027 = m_64027;
    futhark_mc_segmap_parloop_struct_76617.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76617.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76617.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76617.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76617.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76617.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76617.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76617.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76617.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76617.free_i64_res_64053 = i64_res_64053;
    futhark_mc_segmap_parloop_struct_76617.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76617.free_bytes_70053 = bytes_70053;
    futhark_mc_segmap_parloop_struct_76617.free_bytes_70056 = bytes_70056;
    futhark_mc_segmap_parloop_struct_76617.free_bytes_70071 = bytes_70071;
    futhark_mc_segmap_parloop_struct_76617.free_bytes_70092 = bytes_70092;
    futhark_mc_segmap_parloop_struct_76617.free_mem_70233 = mem_70233.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76618_task;
    
    futhark_mc_segmap_parloop_76618_task.name =
        "futhark_mc_segmap_parloop_76618";
    futhark_mc_segmap_parloop_76618_task.fn = futhark_mc_segmap_parloop_76618;
    futhark_mc_segmap_parloop_76618_task.args =
        &futhark_mc_segmap_parloop_struct_76617;
    futhark_mc_segmap_parloop_76618_task.iterations = iterations;
    futhark_mc_segmap_parloop_76618_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76618_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76618_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76618_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76618_task);
    
    if (futhark_mc_segmap_parloop_76618_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76618_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76618_total_end -
                 futhark_mc_segmap_parloop_76618_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76618_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76618_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76618_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76616_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76616_end -
                 futhark_mc_segmap_nested_task_76616_start;
        
        ctx->futhark_mc_segmap_nested_task_76616_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76616_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76616_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76670 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_70234;
    int64_t free_bytes_70237;
    int64_t free_bytes_70252;
    int64_t free_bytes_70291;
    char *free_mem_70465;
    char *free_mem_70469;
};
struct futhark_mc_segmap_parloop_struct_76672 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_70234;
    int64_t free_bytes_70237;
    int64_t free_bytes_70252;
    int64_t free_bytes_70291;
    char *free_mem_70465;
    char *free_mem_70469;
};
static int futhark_mc_segmap_parloop_76673(void *args, int64_t start,
                                           int64_t end, int flat_tid_67738,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76672
    *futhark_mc_segmap_parloop_struct_76672 =
    (struct futhark_mc_segmap_parloop_struct_76672 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76672->ctx;
    uint64_t futhark_mc_segmap_parloop_76673_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76673_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_segmap_parloop_struct_76672->free_m_64027;
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76672->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76672->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76672->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76672->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76672->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76672->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76672->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76672->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76672->free_m_64052;
    float i64_res_64053 =
          futhark_mc_segmap_parloop_struct_76672->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76672->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_70234 =
            futhark_mc_segmap_parloop_struct_76672->free_bytes_70234;
    int64_t bytes_70237 =
            futhark_mc_segmap_parloop_struct_76672->free_bytes_70237;
    int64_t bytes_70252 =
            futhark_mc_segmap_parloop_struct_76672->free_bytes_70252;
    int64_t bytes_70291 =
            futhark_mc_segmap_parloop_struct_76672->free_bytes_70291;
    struct memblock mem_70465 = {.desc ="mem_70465", .mem =
                                 futhark_mc_segmap_parloop_struct_76672->free_mem_70465,
                                 .size =0, .references =NULL};
    struct memblock mem_70469 = {.desc ="mem_70469", .mem =
                                 futhark_mc_segmap_parloop_struct_76672->free_mem_70469,
                                 .size =0, .references =NULL};
    size_t mem_70299_cached_sizze_76674 = 0;
    char *mem_70299 = NULL;
    size_t mem_70314_cached_sizze_76675 = 0;
    char *mem_70314 = NULL;
    size_t mem_70317_cached_sizze_76676 = 0;
    char *mem_70317 = NULL;
    size_t mem_70344_cached_sizze_76677 = 0;
    char *mem_70344 = NULL;
    size_t mem_70347_cached_sizze_76678 = 0;
    char *mem_70347 = NULL;
    size_t mem_70350_cached_sizze_76679 = 0;
    char *mem_70350 = NULL;
    size_t mem_70389_cached_sizze_76680 = 0;
    char *mem_70389 = NULL;
    size_t mem_70404_cached_sizze_76681 = 0;
    char *mem_70404 = NULL;
    size_t mem_70407_cached_sizze_76682 = 0;
    char *mem_70407 = NULL;
    size_t mem_70424_cached_sizze_76683 = 0;
    char *mem_70424 = NULL;
    size_t mem_70427_cached_sizze_76684 = 0;
    char *mem_70427 = NULL;
    int64_t iterations = end - start;
    int64_t iter_74329 = start;
    
    if (mem_70299_cached_sizze_76674 < (size_t) bytes_70234) {
        mem_70299 = realloc(mem_70299, bytes_70234);
        mem_70299_cached_sizze_76674 = bytes_70234;
    }
    if (mem_70314_cached_sizze_76675 < (size_t) bytes_70237) {
        mem_70314 = realloc(mem_70314, bytes_70237);
        mem_70314_cached_sizze_76675 = bytes_70237;
    }
    if (mem_70317_cached_sizze_76676 < (size_t) bytes_70234) {
        mem_70317 = realloc(mem_70317, bytes_70234);
        mem_70317_cached_sizze_76676 = bytes_70234;
    }
    if (mem_70344_cached_sizze_76677 < (size_t) bytes_70237) {
        mem_70344 = realloc(mem_70344, bytes_70237);
        mem_70344_cached_sizze_76677 = bytes_70237;
    }
    if (mem_70347_cached_sizze_76678 < (size_t) bytes_70234) {
        mem_70347 = realloc(mem_70347, bytes_70234);
        mem_70347_cached_sizze_76678 = bytes_70234;
    }
    if (mem_70350_cached_sizze_76679 < (size_t) bytes_70234) {
        mem_70350 = realloc(mem_70350, bytes_70234);
        mem_70350_cached_sizze_76679 = bytes_70234;
    }
    if (mem_70389_cached_sizze_76680 < (size_t) bytes_70252) {
        mem_70389 = realloc(mem_70389, bytes_70252);
        mem_70389_cached_sizze_76680 = bytes_70252;
    }
    if (mem_70404_cached_sizze_76681 < (size_t) bytes_70291) {
        mem_70404 = realloc(mem_70404, bytes_70291);
        mem_70404_cached_sizze_76681 = bytes_70291;
    }
    if (mem_70407_cached_sizze_76682 < (size_t) bytes_70291) {
        mem_70407 = realloc(mem_70407, bytes_70291);
        mem_70407_cached_sizze_76682 = bytes_70291;
    }
    if (mem_70424_cached_sizze_76683 < (size_t) bytes_70252) {
        mem_70424 = realloc(mem_70424, bytes_70252);
        mem_70424_cached_sizze_76683 = bytes_70252;
    }
    if (mem_70427_cached_sizze_76684 < (size_t) bytes_70252) {
        mem_70427 = realloc(mem_70427, bytes_70252);
        mem_70427_cached_sizze_76684 = bytes_70252;
    }
    for (; iter_74329 < end; iter_74329++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74536 = m_64027;
        int64_t gtid_67739 = iter_74329;
        int64_t remnant_74537 = iter_74329 - gtid_67739;
        int64_t discard_69310;
        int64_t scanacc_74331 = (int64_t) 0;
        
        for (int64_t i_74330 = 0; i_74330 < n_64028; i_74330++) {
            float x_74333 = ((float *) Y_mem_69552.mem)[gtid_67739 * n_64028 +
                                                        i_74330];
            bool isnan_res_74334;
            
            isnan_res_74334 = futrts_isnan32(x_74333);
            
            bool defunc_0_p_res_74335 = !isnan_res_74334;
            int64_t defunc_0_f_res_74336 = btoi_bool_i64(defunc_0_p_res_74335);
            int64_t defunc_1_op_res_74337 = add64(defunc_0_f_res_74336,
                                                  scanacc_74331);
            
            ((int64_t *) mem_70299)[i_74330] = defunc_1_op_res_74337;
            
            int64_t scanacc_tmp_74538 = defunc_1_op_res_74337;
            
            scanacc_74331 = scanacc_tmp_74538;
        }
        discard_69310 = scanacc_74331;
        
        int64_t last_res_64959 = ((int64_t *) mem_70299)[i_64040];
        
        for (int64_t i_74540 = 0; i_74540 < n_64028; i_74540++) {
            ((float *) mem_70314)[i_74540] = 0.0F;
        }
        for (int64_t i_74541 = 0; i_74541 < n_64028; i_74541++) {
            ((int64_t *) mem_70317)[i_74541] = (int64_t) -1;
        }
        for (int64_t write_iter_74339 = 0; write_iter_74339 < n_64028;
             write_iter_74339++) {
            float write_iv_74342 = ((float *) Y_mem_69552.mem)[gtid_67739 *
                                                               n_64028 +
                                                               write_iter_74339];
            bool isnan_res_74343;
            
            isnan_res_74343 = futrts_isnan32(write_iv_74342);
            
            bool defunc_0_p_res_74344 = !isnan_res_74343;
            int64_t defunc_1_f_res_74345;
            
            if (defunc_0_p_res_74344) {
                int64_t write_iv_74346 =
                        ((int64_t *) mem_70299)[write_iter_74339];
                int64_t defunc_1_f_res_t_res_74347 = sub64(write_iv_74346,
                                                           (int64_t) 1);
                
                defunc_1_f_res_74345 = defunc_1_f_res_t_res_74347;
            } else {
                defunc_1_f_res_74345 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_74345) &&
                slt64(defunc_1_f_res_74345, n_64028)) {
                ((int64_t *) mem_70317)[defunc_1_f_res_74345] =
                    write_iter_74339;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_74345) &&
                slt64(defunc_1_f_res_74345, n_64028)) {
                memmove(mem_70314 + defunc_1_f_res_74345 * (int64_t) 4,
                        Y_mem_69552.mem + (gtid_67739 * n_64028 +
                                           write_iter_74339) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_64977 = sub64(last_res_64959, min_res_64046);
        float i64_res_64978 = sitofp_i64_f32(last_res_64959);
        float x_64979 = i64_res_64053 - i64_res_64978;
        float max_arg_64980 = x_64979 / 2.0F;
        float max_res_64981 = fmax32(0.0F, max_arg_64980);
        
        for (int64_t i_74351 = 0; i_74351 < n_64028; i_74351++) {
            int64_t x_74355 = ((int64_t *) mem_70317)[i_74351];
            int64_t defunc_0_f_res_74356 = add64((int64_t) 1, x_74355);
            bool cond_74357 = slt64(defunc_0_f_res_74356, (int64_t) 0);
            int64_t defunc_0_f_res_74358;
            
            if (cond_74357) {
                defunc_0_f_res_74358 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_74358 = defunc_0_f_res_74356;
            }
            
            float defunc_0_f_res_74359 = sitofp_i64_f32(x_74355);
            
            ((float *) mem_70344)[i_74351] = defunc_0_f_res_74359;
            ((int64_t *) mem_70347)[i_74351] = defunc_0_f_res_74358;
            ((int64_t *) mem_70350)[i_74351] = defunc_0_f_res_74356;
        }
        for (int64_t i_74363 = 0; i_74363 < q_64030; i_74363++) {
            bool cond_74365 = sle64(last_res_64959, i_74363);
            float defunc_0_f_res_74366;
            
            if (cond_74365) {
                defunc_0_f_res_74366 = 0.0F;
            } else {
                defunc_0_f_res_74366 = 1.0F;
            }
            ((float *) mem_70389)[i_74363] = defunc_0_f_res_74366;
        }
        for (int64_t i_74368 = 0; i_74368 < n_m_64039; i_74368++) {
            int64_t min_arg_74371 = mul64(jump_64032, i_74368);
            int64_t min_res_74372 = smin64(i_64040, min_arg_74371);
            int64_t defunc_0_g_res_74373 = add64((int64_t) 1, min_res_74372);
            bool nearest_idx_74374;
            int64_t nearest_idx_74375;
            int64_t nearest_idx_74376;
            bool loop_while_74377;
            int64_t low_74378;
            int64_t high_74379;
            
            loop_while_74377 = x_64041;
            low_74378 = (int64_t) 0;
            high_74379 = i_64040;
            while (loop_while_74377) {
                int64_t x_74380 = add64(low_74378, high_74379);
                int64_t mid_74381 = sdiv64(x_74380, (int64_t) 2);
                bool x_74382 = sle64((int64_t) 0, mid_74381);
                bool y_74383 = slt64(mid_74381, n_64028);
                bool bounds_check_74384 = x_74382 && y_74383;
                bool index_certs_74385;
                
                if (!bounds_check_74384) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_74381,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t x_74386 = ((int64_t *) mem_70347)[mid_74381];
                bool cond_74387 = sle64(defunc_0_g_res_74373, x_74386);
                int64_t loopres_74388;
                int64_t loopres_74389;
                
                if (cond_74387) {
                    int64_t loopres_t_res_74390 = sub64(mid_74381, (int64_t) 1);
                    
                    loopres_74388 = low_74378;
                    loopres_74389 = loopres_t_res_74390;
                } else {
                    int64_t loopres_f_res_74391 = add64((int64_t) 1, mid_74381);
                    
                    loopres_74388 = loopres_f_res_74391;
                    loopres_74389 = high_74379;
                }
                
                bool loop_cond_74392 = sle64(loopres_74388, loopres_74389);
                bool loop_while_tmp_74550 = loop_cond_74392;
                int64_t low_tmp_74551 = loopres_74388;
                int64_t high_tmp_74552 = loopres_74389;
                
                loop_while_74377 = loop_while_tmp_74550;
                low_74378 = low_tmp_74551;
                high_74379 = high_tmp_74552;
            }
            nearest_idx_74374 = loop_while_74377;
            nearest_idx_74375 = low_74378;
            nearest_idx_74376 = high_74379;
            
            int64_t max_arg_74393 = sub64(nearest_idx_74375, min_res_64046);
            int64_t max_res_74394 = smax64((int64_t) 0, max_arg_74393);
            int64_t j_74395 = add64(min_res_64046, max_res_74394);
            int64_t i_p_m_t_s_74396 = add64(m_64052, max_res_74394);
            bool zzero_leq_i_p_m_t_s_74397 = sle64((int64_t) 0,
                                                   i_p_m_t_s_74396);
            bool i_p_m_t_s_leq_w_74398 = slt64(i_p_m_t_s_74396, n_64028);
            bool zzero_lte_i_74399 = sle64((int64_t) 0, max_res_74394);
            bool i_lte_j_74400 = sle64(max_res_74394, j_74395);
            bool y_74401 = i_p_m_t_s_leq_w_74398 && zzero_lte_i_74399;
            bool y_74402 = zzero_leq_i_p_m_t_s_74397 && y_74401;
            bool y_74403 = i_lte_j_74400 && y_74402;
            bool forwards_ok_74404 = zzero_lte_i_74399 && y_74403;
            bool ok_or_empty_74405 = empty_slice_64051 || forwards_ok_74404;
            bool index_certs_74406;
            
            if (!ok_or_empty_74405) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_74394, ":",
                              (long long) j_74395,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_74407;
            int64_t redout_74409 = (int64_t) 0;
            
            for (int64_t i_74408 = 0; i_74408 < min_res_64046; i_74408++) {
                int64_t slice_74410 = max_res_74394 + i_74408;
                int64_t x_74411 = ((int64_t *) mem_70350)[slice_74410];
                int64_t abs_arg_74412 = sub64(x_74411, defunc_0_g_res_74373);
                int64_t abs_res_74413 = abs64(abs_arg_74412);
                int64_t defunc_1_op_res_74414 = add64(abs_res_74413,
                                                      redout_74409);
                int64_t redout_tmp_74553 = defunc_1_op_res_74414;
                
                redout_74409 = redout_tmp_74553;
            }
            defunc_2_reduce_res_74407 = redout_74409;
            
            int64_t idx_74415;
            int64_t idx_74416;
            int64_t idx_74417;
            int64_t idx_74418;
            int64_t best_idx_74420;
            int64_t last_idx_74421;
            int64_t best_sum_74422;
            int64_t curr_sum_74423;
            
            best_idx_74420 = max_res_74394;
            last_idx_74421 = max_res_74394;
            best_sum_74422 = defunc_2_reduce_res_74407;
            curr_sum_74423 = defunc_2_reduce_res_74407;
            for (int64_t j_74419 = 0; j_74419 < min_res_64046; j_74419++) {
                int64_t new_idx_74424 = add64(max_res_74394, j_74419);
                int64_t x_74425 = add64(min_res_64046, new_idx_74424);
                bool cond_74426 = slt64(last_res_64959, x_74425);
                int64_t new_sum_74427;
                
                if (cond_74426) {
                    new_sum_74427 = (int64_t) 9223372036854775807;
                } else {
                    bool x_74428 = sle64((int64_t) 0, last_idx_74421);
                    bool y_74429 = slt64(last_idx_74421, n_64028);
                    bool bounds_check_74430 = x_74428 && y_74429;
                    bool index_certs_74431;
                    
                    if (!bounds_check_74430) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_74421,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        return 1;
                    }
                    
                    int64_t y_74432 = ((int64_t *) mem_70350)[last_idx_74421];
                    int64_t binop_p_74433 = sub64(defunc_0_g_res_74373,
                                                  y_74432);
                    int64_t defunc_0_f_res_74434 = abs64(binop_p_74433);
                    int64_t x_74435 = sub64(curr_sum_74423,
                                            defunc_0_f_res_74434);
                    int64_t min_arg_74436 = add64(min_res_64046,
                                                  last_idx_74421);
                    int64_t min_res_74437 = smin64(i_64040, min_arg_74436);
                    bool x_74438 = sle64((int64_t) 0, min_res_74437);
                    bool y_74439 = slt64(min_res_74437, n_64028);
                    bool bounds_check_74440 = x_74438 && y_74439;
                    bool index_certs_74441;
                    
                    if (!bounds_check_74440) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_74437,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        return 1;
                    }
                    
                    int64_t y_74442 = ((int64_t *) mem_70350)[min_res_74437];
                    int64_t binop_p_74443 = sub64(defunc_0_g_res_74373,
                                                  y_74442);
                    int64_t defunc_0_f_res_74444 = abs64(binop_p_74443);
                    int64_t new_sum_f_res_74445 = add64(x_74435,
                                                        defunc_0_f_res_74444);
                    
                    new_sum_74427 = new_sum_f_res_74445;
                }
                
                bool cond_74446 = sle64(new_sum_74427, best_sum_74422);
                int64_t loopres_74447;
                
                if (cond_74446) {
                    loopres_74447 = new_idx_74424;
                } else {
                    loopres_74447 = best_idx_74420;
                }
                
                int64_t loopres_74448;
                
                if (cond_74446) {
                    loopres_74448 = new_sum_74427;
                } else {
                    loopres_74448 = best_sum_74422;
                }
                
                int64_t best_idx_tmp_74554 = loopres_74447;
                int64_t last_idx_tmp_74555 = new_idx_74424;
                int64_t best_sum_tmp_74556 = loopres_74448;
                int64_t curr_sum_tmp_74557 = new_sum_74427;
                
                best_idx_74420 = best_idx_tmp_74554;
                last_idx_74421 = last_idx_tmp_74555;
                best_sum_74422 = best_sum_tmp_74556;
                curr_sum_74423 = curr_sum_tmp_74557;
            }
            idx_74415 = best_idx_74420;
            idx_74416 = last_idx_74421;
            idx_74417 = best_sum_74422;
            idx_74418 = curr_sum_74423;
            
            int64_t min_res_74449 = smin64(min_arg_64977, idx_74415);
            int64_t x_74450 = add64(min_res_64046, min_res_74449);
            int64_t r_74451 = sub64(x_74450, (int64_t) 1);
            bool x_74452 = sle64((int64_t) 0, r_74451);
            bool y_74453 = slt64(r_74451, n_64028);
            bool bounds_check_74454 = x_74452 && y_74453;
            bool index_certs_74455;
            
            if (!bounds_check_74454) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_74451,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_74456 = ((int64_t *) mem_70317)[r_74451];
            int64_t abs_arg_74457 = sub64(x_74456, min_res_74372);
            int64_t abs_res_74458 = abs64(abs_arg_74457);
            bool x_74459 = sle64((int64_t) 0, min_res_74449);
            bool y_74460 = slt64(min_res_74449, n_64028);
            bool bounds_check_74461 = x_74459 && y_74460;
            bool index_certs_74462;
            
            if (!bounds_check_74461) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_74449,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_74463 = ((int64_t *) mem_70317)[min_res_74449];
            int64_t abs_arg_74464 = sub64(x_74463, min_res_74372);
            int64_t abs_res_74465 = abs64(abs_arg_74464);
            int64_t max_res_74466 = smax64(abs_res_74458, abs_res_74465);
            float defunc_0_f_res_74467 = sitofp_i64_f32(max_res_74466);
            float defunc_1_f_res_74468 = max_res_64981 + defunc_0_f_res_74467;
            float defunc_0_f_res_74469 = sitofp_i64_f32(min_res_74372);
            float defunc_2_reduce_res_74472;
            float defunc_2_reduce_res_74473;
            float defunc_2_reduce_res_74474;
            float redout_74478;
            float redout_74479;
            float redout_74480;
            
            redout_74478 = 0.0F;
            redout_74479 = 0.0F;
            redout_74480 = 0.0F;
            for (int64_t i_74477 = 0; i_74477 < q_64030; i_74477++) {
                float x_74483 = ((float *) mem_70389)[i_74477];
                bool cond_74484 = sle64(last_res_64959, i_74477);
                float defunc_0_f_res_74485;
                
                if (cond_74484) {
                    defunc_0_f_res_74485 = 0.0F;
                } else {
                    int64_t i_74486 = add64(min_res_74449, i_74477);
                    float x_74487 = ((float *) mem_70344)[i_74486];
                    float defunc_0_f_res_f_res_74488 = 1.0F + x_74487;
                    
                    defunc_0_f_res_74485 = defunc_0_f_res_f_res_74488;
                }
                
                float x_j_74489 = defunc_0_f_res_74485 - defunc_0_f_res_74469;
                float abs_res_74490 = (float) fabs(x_j_74489);
                float tmp1_74491 = abs_res_74490 / defunc_1_f_res_74468;
                float x_74492 = tmp1_74491 * tmp1_74491;
                float y_74493 = tmp1_74491 * x_74492;
                float tmp2_74494 = 1.0F - y_74493;
                float x_74495 = tmp2_74494 * tmp2_74494;
                float tmp3_74496 = tmp2_74494 * x_74495;
                float tmp4_74497 = x_74483 * tmp3_74496;
                float defunc_1_f_res_74498 = x_j_74489 * tmp4_74497;
                float defunc_1_f_res_74499 = x_j_74489 * defunc_1_f_res_74498;
                float defunc_1_op_res_74500 = tmp4_74497 + redout_74478;
                float defunc_1_op_res_74501 = defunc_1_f_res_74498 +
                      redout_74479;
                float defunc_1_op_res_74502 = defunc_1_f_res_74499 +
                      redout_74480;
                
                ((float *) mem_70424)[i_74477] = defunc_1_f_res_74498;
                ((float *) mem_70427)[i_74477] = tmp4_74497;
                
                float redout_tmp_74558 = defunc_1_op_res_74500;
                float redout_tmp_74559 = defunc_1_op_res_74501;
                float redout_tmp_74560 = defunc_1_op_res_74502;
                
                redout_74478 = redout_tmp_74558;
                redout_74479 = redout_tmp_74559;
                redout_74480 = redout_tmp_74560;
            }
            defunc_2_reduce_res_74472 = redout_74478;
            defunc_2_reduce_res_74473 = redout_74479;
            defunc_2_reduce_res_74474 = redout_74480;
            
            float x_74505 = defunc_2_reduce_res_74472 *
                  defunc_2_reduce_res_74474;
            float y_74506 = defunc_2_reduce_res_74473 *
                  defunc_2_reduce_res_74473;
            float y_74507 = x_74505 - y_74506;
            float det1_74508 = 1.0F / y_74507;
            float a11_74509 = defunc_2_reduce_res_74474 * det1_74508;
            float negate_arg_74510 = defunc_2_reduce_res_74473 * det1_74508;
            float b11_74511 = 0.0F - negate_arg_74510;
            float c11_74512 = defunc_2_reduce_res_74472 * det1_74508;
            float defunc_2_reduce_res_74513;
            float defunc_2_reduce_res_74514;
            float redout_74516;
            float redout_74517;
            
            redout_74516 = 0.0F;
            redout_74517 = 0.0F;
            for (int64_t i_74515 = 0; i_74515 < q_64030; i_74515++) {
                float x_74518 = ((float *) mem_70427)[i_74515];
                float x_74519 = ((float *) mem_70424)[i_74515];
                bool cond_74520 = sle64(last_res_64959, i_74515);
                float defunc_0_f_res_74521;
                
                if (cond_74520) {
                    defunc_0_f_res_74521 = 0.0F;
                } else {
                    int64_t i_74522 = add64(min_res_74449, i_74515);
                    float x_74523 = ((float *) mem_70314)[i_74522];
                    
                    defunc_0_f_res_74521 = x_74523;
                }
                
                float x_74524 = a11_74509 * x_74518;
                float y_74525 = b11_74511 * x_74519;
                float x_74526 = x_74524 + y_74525;
                float defunc_9_fit_fun_res_74527 = defunc_0_f_res_74521 *
                      x_74526;
                float x_74528 = b11_74511 * x_74518;
                float y_74529 = c11_74512 * x_74519;
                float x_74530 = x_74528 + y_74529;
                float defunc_9_slope_fun_res_74531 = defunc_0_f_res_74521 *
                      x_74530;
                float defunc_1_op_res_74532 = defunc_9_fit_fun_res_74527 +
                      redout_74516;
                float defunc_1_op_res_74533 = defunc_9_slope_fun_res_74531 +
                      redout_74517;
                float redout_tmp_74563 = defunc_1_op_res_74532;
                float redout_tmp_74564 = defunc_1_op_res_74533;
                
                redout_74516 = redout_tmp_74563;
                redout_74517 = redout_tmp_74564;
            }
            defunc_2_reduce_res_74513 = redout_74516;
            defunc_2_reduce_res_74514 = redout_74517;
            ((float *) mem_70404)[i_74368] = defunc_2_reduce_res_74513;
            ((float *) mem_70407)[i_74368] = defunc_2_reduce_res_74514;
        }
        memmove(mem_70465.mem + gtid_67739 * n_m_64039 * (int64_t) 4,
                mem_70404 + (int64_t) 0, n_m_64039 * (int64_t) 4);
        memmove(mem_70469.mem + gtid_67739 * n_m_64039 * (int64_t) 4,
                mem_70407 + (int64_t) 0, n_m_64039 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70299);
    free(mem_70314);
    free(mem_70317);
    free(mem_70344);
    free(mem_70347);
    free(mem_70350);
    free(mem_70389);
    free(mem_70404);
    free(mem_70407);
    free(mem_70424);
    free(mem_70427);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76673_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76673_end -
                 futhark_mc_segmap_parloop_76673_start;
        
        ctx->futhark_mc_segmap_parloop_76673_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76673_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76673_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76671(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67738 = tid;
    int num_tasks_74328 = info.nsubtasks;
    struct futhark_mc_task_76670 *futhark_mc_task_76670 =
                                 (struct futhark_mc_task_76670 *) args;
    struct futhark_context *ctx = futhark_mc_task_76670->ctx;
    uint64_t futhark_mc_segmap_task_76671_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76671_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_task_76670->free_m_64027;
    int64_t n_64028 = futhark_mc_task_76670->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76670->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76670->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76670->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76670->free_i_64040;
    bool x_64041 = futhark_mc_task_76670->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76670->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76670->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76670->free_m_64052;
    float i64_res_64053 = futhark_mc_task_76670->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76670->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_70234 = futhark_mc_task_76670->free_bytes_70234;
    int64_t bytes_70237 = futhark_mc_task_76670->free_bytes_70237;
    int64_t bytes_70252 = futhark_mc_task_76670->free_bytes_70252;
    int64_t bytes_70291 = futhark_mc_task_76670->free_bytes_70291;
    struct memblock mem_70465 = {.desc ="mem_70465", .mem =
                                 futhark_mc_task_76670->free_mem_70465, .size =
                                 0, .references =NULL};
    struct memblock mem_70469 = {.desc ="mem_70469", .mem =
                                 futhark_mc_task_76670->free_mem_70469, .size =
                                 0, .references =NULL};
    int64_t iter_74329;
    struct futhark_mc_segmap_parloop_struct_76672
    futhark_mc_segmap_parloop_struct_76672;
    
    futhark_mc_segmap_parloop_struct_76672.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76672.free_m_64027 = m_64027;
    futhark_mc_segmap_parloop_struct_76672.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76672.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76672.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76672.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76672.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76672.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76672.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76672.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76672.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76672.free_i64_res_64053 = i64_res_64053;
    futhark_mc_segmap_parloop_struct_76672.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76672.free_bytes_70234 = bytes_70234;
    futhark_mc_segmap_parloop_struct_76672.free_bytes_70237 = bytes_70237;
    futhark_mc_segmap_parloop_struct_76672.free_bytes_70252 = bytes_70252;
    futhark_mc_segmap_parloop_struct_76672.free_bytes_70291 = bytes_70291;
    futhark_mc_segmap_parloop_struct_76672.free_mem_70465 = mem_70465.mem;
    futhark_mc_segmap_parloop_struct_76672.free_mem_70469 = mem_70469.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76673_task;
    
    futhark_mc_segmap_parloop_76673_task.name =
        "futhark_mc_segmap_parloop_76673";
    futhark_mc_segmap_parloop_76673_task.fn = futhark_mc_segmap_parloop_76673;
    futhark_mc_segmap_parloop_76673_task.args =
        &futhark_mc_segmap_parloop_struct_76672;
    futhark_mc_segmap_parloop_76673_task.iterations = iterations;
    futhark_mc_segmap_parloop_76673_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76673_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76673_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76673_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76673_task);
    
    if (futhark_mc_segmap_parloop_76673_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76673_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76673_total_end -
                 futhark_mc_segmap_parloop_76673_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76673_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76673_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76673_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76671_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76671_end -
                 futhark_mc_segmap_task_76671_start;
        
        ctx->futhark_mc_segmap_task_76671_runs[tid]++;
        ctx->futhark_mc_segmap_task_76671_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76671_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76686 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_70234;
    int64_t free_bytes_70237;
    int64_t free_bytes_70252;
    int64_t free_bytes_70291;
    char *free_mem_70465;
    char *free_mem_70469;
};
struct futhark_mc_task_76697 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_67741;
    char *free_Y_mem_69552;
    char *free_mem_70236;
};
struct futhark_mc_scan_stage_1_parloop_struct_76700 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_67741;
    char *free_Y_mem_69552;
    char *free_mem_70236;
};
static int futhark_mc_scan_stage_1_parloop_76701(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_67742, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_76700
    *futhark_mc_scan_stage_1_parloop_struct_76700 =
    (struct futhark_mc_scan_stage_1_parloop_struct_76700 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_76700->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_76701_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76701_start = get_wall_time();
    
    int64_t n_64028 =
            futhark_mc_scan_stage_1_parloop_struct_76700->free_n_64028;
    int64_t gtid_67741 =
            futhark_mc_scan_stage_1_parloop_struct_76700->free_gtid_67741;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_76700->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70236 = {.desc ="mem_70236", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_76700->free_mem_70236,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74916 = start;
    int64_t x_74566;
    int64_t x_74567;
    
    x_74566 = (int64_t) 0;
    for (; iter_74916 < end; iter_74916++) {
        int64_t gtid_67743 = iter_74916;
        
        // stage 1 scan body
        {
            float x_74569 = ((float *) Y_mem_69552.mem)[gtid_67741 * n_64028 +
                                                        gtid_67743];
            bool isnan_res_74570;
            
            isnan_res_74570 = futrts_isnan32(x_74569);
            
            bool defunc_0_p_res_74571 = !isnan_res_74570;
            int64_t defunc_0_f_res_74572 = btoi_bool_i64(defunc_0_p_res_74571);
            
            // write mapped values results to memory
            { }
            x_74566 = x_74566;
            // Read next values
            {
                x_74567 = defunc_0_f_res_74572;
            }
            
            int64_t defunc_1_op_res_74568 = add64(x_74566, x_74567);
            
            ((int64_t *) mem_70236.mem)[gtid_67743] = defunc_1_op_res_74568;
            x_74566 = defunc_1_op_res_74568;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76701_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76701_end -
                 futhark_mc_scan_stage_1_parloop_76701_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_76701_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_76701_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_76701_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_76702 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_67741;
    char *free_Y_mem_69552;
    char *free_mem_70236;
};
static int futhark_mc_scan_stage_3_parloop_76703(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_67742, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_76702
    *futhark_mc_scan_stage_3_parloop_struct_76702 =
    (struct futhark_mc_scan_stage_3_parloop_struct_76702 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_76702->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_76703_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_76703_start = get_wall_time();
    
    int64_t n_64028 =
            futhark_mc_scan_stage_3_parloop_struct_76702->free_n_64028;
    int64_t gtid_67741 =
            futhark_mc_scan_stage_3_parloop_struct_76702->free_gtid_67741;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_76702->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70236 = {.desc ="mem_70236", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_76702->free_mem_70236,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74928 = start;
    int64_t x_74925;
    int64_t x_74926;
    
    if (iter_74928 == (int64_t) 0) {
        x_74925 = (int64_t) 0;
    } else {
        x_74925 = ((int64_t *) mem_70236.mem)[iter_74928 - (int64_t) 1];
    }
    for (; iter_74928 < end; iter_74928++) {
        int64_t gtid_67743 = iter_74928;
        
        // stage 3 scan body
        {
            float x_74569 = ((float *) Y_mem_69552.mem)[gtid_67741 * n_64028 +
                                                        gtid_67743];
            bool isnan_res_74570;
            
            isnan_res_74570 = futrts_isnan32(x_74569);
            
            bool defunc_0_p_res_74571 = !isnan_res_74570;
            int64_t defunc_0_f_res_74572 = btoi_bool_i64(defunc_0_p_res_74571);
            
            x_74925 = x_74925;
            x_74926 = defunc_0_f_res_74572;
            
            int64_t defunc_1_op_res_74927 = add64(x_74925, x_74926);
            
            ((int64_t *) mem_70236.mem)[gtid_67743] = defunc_1_op_res_74927;
            x_74925 = defunc_1_op_res_74927;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_76703_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76703_end -
                 futhark_mc_scan_stage_3_parloop_76703_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_76703_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_76703_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_76703_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_76698(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67742 = tid;
    int num_tasks_74915 = info.nsubtasks;
    struct futhark_mc_task_76697 *futhark_mc_task_76697 =
                                 (struct futhark_mc_task_76697 *) args;
    struct futhark_context *ctx = futhark_mc_task_76697->ctx;
    uint64_t futhark_mc_segscan_task_76698_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_76698_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76697->free_n_64028;
    int64_t gtid_67741 = futhark_mc_task_76697->free_gtid_67741;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76697->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70236 = {.desc ="mem_70236", .mem =
                                 futhark_mc_task_76697->free_mem_70236, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_74922_cached_sizze_76699 = 0;
    char *scan_stage_2_accum_mem_74922 = NULL;
    int64_t iter_74916;
    struct futhark_mc_scan_stage_1_parloop_struct_76700
    futhark_mc_scan_stage_1_parloop_struct_76700;
    
    futhark_mc_scan_stage_1_parloop_struct_76700.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_76700.free_n_64028 = n_64028;
    futhark_mc_scan_stage_1_parloop_struct_76700.free_gtid_67741 = gtid_67741;
    futhark_mc_scan_stage_1_parloop_struct_76700.free_Y_mem_69552 =
        Y_mem_69552.mem;
    futhark_mc_scan_stage_1_parloop_struct_76700.free_mem_70236 = mem_70236.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_76701_task;
    
    futhark_mc_scan_stage_1_parloop_76701_task.name =
        "futhark_mc_scan_stage_1_parloop_76701";
    futhark_mc_scan_stage_1_parloop_76701_task.fn =
        futhark_mc_scan_stage_1_parloop_76701;
    futhark_mc_scan_stage_1_parloop_76701_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_76700;
    futhark_mc_scan_stage_1_parloop_76701_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_76701_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_76701_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76701_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_76701_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_76701_task);
    
    if (futhark_mc_scan_stage_1_parloop_76701_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76701_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76701_total_end -
                 futhark_mc_scan_stage_1_parloop_76701_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76701_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76701_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76701_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_74915)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_74917;
        int64_t x_74918;
        int64_t offset_74920 = (int64_t) 0;
        int64_t offset_index_74921 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_74922_cached_sizze_76699 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_74922 = realloc(scan_stage_2_accum_mem_74922,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_74922_cached_sizze_76699 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_74922)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_74924 = 0; i_74924 < num_tasks_74915 - 1; i_74924++) {
            offset_74920 = squot64(n_64028, sext_i32_i64(num_tasks_74915));
            if (slt64(sext_i32_i64(i_74924), srem64(n_64028,
                                                    sext_i32_i64(num_tasks_74915)))) {
                offset_74920 += (int64_t) 1;
            }
            offset_index_74921 += offset_74920;
            
            int64_t gtid_67743 = offset_index_74921;
            float x_74569 = ((float *) Y_mem_69552.mem)[gtid_67741 * n_64028 +
                                                        gtid_67743];
            bool isnan_res_74570;
            
            isnan_res_74570 = futrts_isnan32(x_74569);
            
            bool defunc_0_p_res_74571 = !isnan_res_74570;
            int64_t defunc_0_f_res_74572 = btoi_bool_i64(defunc_0_p_res_74571);
            
            // Read carry in
            {
                x_74917 =
                    ((int64_t *) scan_stage_2_accum_mem_74922)[(int64_t) 0];
            }
            // Read next values
            {
                x_74918 = ((int64_t *) mem_70236.mem)[offset_index_74921 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_74919 = add64(x_74917, x_74918);
            
            ((int64_t *) mem_70236.mem)[offset_index_74921 - (int64_t) 1] =
                defunc_1_op_res_74919;
            ((int64_t *) scan_stage_2_accum_mem_74922)[(int64_t) 0] =
                defunc_1_op_res_74919;
        }
        
        int64_t iter_74928 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_76702
        futhark_mc_scan_stage_3_parloop_struct_76702;
        
        futhark_mc_scan_stage_3_parloop_struct_76702.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_76702.free_n_64028 = n_64028;
        futhark_mc_scan_stage_3_parloop_struct_76702.free_gtid_67741 =
            gtid_67741;
        futhark_mc_scan_stage_3_parloop_struct_76702.free_Y_mem_69552 =
            Y_mem_69552.mem;
        futhark_mc_scan_stage_3_parloop_struct_76702.free_mem_70236 =
            mem_70236.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_76703_task;
        
        futhark_mc_scan_stage_3_parloop_76703_task.name =
            "futhark_mc_scan_stage_3_parloop_76703";
        futhark_mc_scan_stage_3_parloop_76703_task.fn =
            futhark_mc_scan_stage_3_parloop_76703;
        futhark_mc_scan_stage_3_parloop_76703_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_76702;
        futhark_mc_scan_stage_3_parloop_76703_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_76703_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_76703_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_76703_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_76703_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_76703_task);
        
        if (futhark_mc_scan_stage_3_parloop_76703_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_76703_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76703_total_end -
                     futhark_mc_scan_stage_3_parloop_76703_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76703_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76703_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76703_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_74922);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_76698_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_76698_end -
                 futhark_mc_segscan_task_76698_start;
        
        ctx->futhark_mc_segscan_task_76698_runs[tid]++;
        ctx->futhark_mc_segscan_task_76698_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_76698_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76704 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_67741;
    char *free_Y_mem_69552;
    char *free_mem_70236;
    char *free_mem_70239;
    char *free_mem_70242;
};
struct futhark_mc_segmap_parloop_struct_76706 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_67741;
    char *free_Y_mem_69552;
    char *free_mem_70236;
    char *free_mem_70239;
    char *free_mem_70242;
};
static int futhark_mc_segmap_parloop_76707(void *args, int64_t start,
                                           int64_t end, int flat_tid_67744,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76706
    *futhark_mc_segmap_parloop_struct_76706 =
    (struct futhark_mc_segmap_parloop_struct_76706 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76706->ctx;
    uint64_t futhark_mc_segmap_parloop_76707_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76707_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76706->free_n_64028;
    int64_t gtid_67741 =
            futhark_mc_segmap_parloop_struct_76706->free_gtid_67741;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76706->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70236 = {.desc ="mem_70236", .mem =
                                 futhark_mc_segmap_parloop_struct_76706->free_mem_70236,
                                 .size =0, .references =NULL};
    struct memblock mem_70239 = {.desc ="mem_70239", .mem =
                                 futhark_mc_segmap_parloop_struct_76706->free_mem_70239,
                                 .size =0, .references =NULL};
    struct memblock mem_70242 = {.desc ="mem_70242", .mem =
                                 futhark_mc_segmap_parloop_struct_76706->free_mem_70242,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74932 = start;
    
    for (; iter_74932 < end; iter_74932++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74935 = n_64028;
        int64_t gtid_67745 = iter_74932;
        int64_t remnant_74936 = iter_74932 - gtid_67745;
        float x_74573 = ((float *) Y_mem_69552.mem)[gtid_67741 * n_64028 +
                                                    gtid_67745];
        bool isnan_res_74574;
        
        isnan_res_74574 = futrts_isnan32(x_74573);
        
        bool defunc_0_p_res_74575 = !isnan_res_74574;
        int64_t defunc_1_f_res_74576;
        
        if (defunc_0_p_res_74575) {
            int64_t x_74933 = ((int64_t *) mem_70236.mem)[gtid_67745];
            int64_t defunc_1_f_res_t_res_74934 = sub64(x_74933, (int64_t) 1);
            
            defunc_1_f_res_74576 = defunc_1_f_res_t_res_74934;
        } else {
            defunc_1_f_res_74576 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_74576) &&
            slt64(defunc_1_f_res_74576, n_64028)) {
            ((int64_t *) mem_70242.mem)[defunc_1_f_res_74576] = gtid_67745;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_74576) &&
            slt64(defunc_1_f_res_74576, n_64028)) {
            ((float *) mem_70239.mem)[defunc_1_f_res_74576] = x_74573;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76707_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76707_end -
                 futhark_mc_segmap_parloop_76707_start;
        
        ctx->futhark_mc_segmap_parloop_76707_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76707_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76707_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76705(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67744 = tid;
    int num_tasks_74931 = info.nsubtasks;
    struct futhark_mc_task_76704 *futhark_mc_task_76704 =
                                 (struct futhark_mc_task_76704 *) args;
    struct futhark_context *ctx = futhark_mc_task_76704->ctx;
    uint64_t futhark_mc_segmap_task_76705_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76705_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76704->free_n_64028;
    int64_t gtid_67741 = futhark_mc_task_76704->free_gtid_67741;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76704->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70236 = {.desc ="mem_70236", .mem =
                                 futhark_mc_task_76704->free_mem_70236, .size =
                                 0, .references =NULL};
    struct memblock mem_70239 = {.desc ="mem_70239", .mem =
                                 futhark_mc_task_76704->free_mem_70239, .size =
                                 0, .references =NULL};
    struct memblock mem_70242 = {.desc ="mem_70242", .mem =
                                 futhark_mc_task_76704->free_mem_70242, .size =
                                 0, .references =NULL};
    int64_t iter_74932;
    struct futhark_mc_segmap_parloop_struct_76706
    futhark_mc_segmap_parloop_struct_76706;
    
    futhark_mc_segmap_parloop_struct_76706.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76706.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76706.free_gtid_67741 = gtid_67741;
    futhark_mc_segmap_parloop_struct_76706.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76706.free_mem_70236 = mem_70236.mem;
    futhark_mc_segmap_parloop_struct_76706.free_mem_70239 = mem_70239.mem;
    futhark_mc_segmap_parloop_struct_76706.free_mem_70242 = mem_70242.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76707_task;
    
    futhark_mc_segmap_parloop_76707_task.name =
        "futhark_mc_segmap_parloop_76707";
    futhark_mc_segmap_parloop_76707_task.fn = futhark_mc_segmap_parloop_76707;
    futhark_mc_segmap_parloop_76707_task.args =
        &futhark_mc_segmap_parloop_struct_76706;
    futhark_mc_segmap_parloop_76707_task.iterations = iterations;
    futhark_mc_segmap_parloop_76707_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76707_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76707_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76707_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76707_task);
    
    if (futhark_mc_segmap_parloop_76707_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76707_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76707_total_end -
                 futhark_mc_segmap_parloop_76707_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76707_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76707_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76707_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76705_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76705_end -
                 futhark_mc_segmap_task_76705_start;
        
        ctx->futhark_mc_segmap_task_76705_runs[tid]++;
        ctx->futhark_mc_segmap_task_76705_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76705_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76708 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    char *free_mem_70242;
    char *free_mem_70245;
    char *free_mem_70248;
    char *free_mem_70251;
};
struct futhark_mc_segmap_parloop_struct_76710 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    char *free_mem_70242;
    char *free_mem_70245;
    char *free_mem_70248;
    char *free_mem_70251;
};
static int futhark_mc_segmap_parloop_76711(void *args, int64_t start,
                                           int64_t end, int flat_tid_67746,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76710
    *futhark_mc_segmap_parloop_struct_76710 =
    (struct futhark_mc_segmap_parloop_struct_76710 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76710->ctx;
    uint64_t futhark_mc_segmap_parloop_76711_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76711_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76710->free_n_64028;
    struct memblock mem_70242 = {.desc ="mem_70242", .mem =
                                 futhark_mc_segmap_parloop_struct_76710->free_mem_70242,
                                 .size =0, .references =NULL};
    struct memblock mem_70245 = {.desc ="mem_70245", .mem =
                                 futhark_mc_segmap_parloop_struct_76710->free_mem_70245,
                                 .size =0, .references =NULL};
    struct memblock mem_70248 = {.desc ="mem_70248", .mem =
                                 futhark_mc_segmap_parloop_struct_76710->free_mem_70248,
                                 .size =0, .references =NULL};
    struct memblock mem_70251 = {.desc ="mem_70251", .mem =
                                 futhark_mc_segmap_parloop_struct_76710->free_mem_70251,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74938 = start;
    
    for (; iter_74938 < end; iter_74938++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74939 = n_64028;
        int64_t gtid_67747 = iter_74938;
        int64_t remnant_74940 = iter_74938 - gtid_67747;
        int64_t x_74579 = ((int64_t *) mem_70242.mem)[gtid_67747];
        int64_t defunc_0_f_res_74580 = add64((int64_t) 1, x_74579);
        bool cond_74581 = slt64(defunc_0_f_res_74580, (int64_t) 0);
        int64_t defunc_0_f_res_74582;
        
        if (cond_74581) {
            defunc_0_f_res_74582 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_74582 = defunc_0_f_res_74580;
        }
        
        float defunc_0_f_res_74583 = sitofp_i64_f32(x_74579);
        
        ((float *) mem_70245.mem)[gtid_67747] = defunc_0_f_res_74583;
        ((int64_t *) mem_70248.mem)[gtid_67747] = defunc_0_f_res_74582;
        ((int64_t *) mem_70251.mem)[gtid_67747] = defunc_0_f_res_74580;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76711_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76711_end -
                 futhark_mc_segmap_parloop_76711_start;
        
        ctx->futhark_mc_segmap_parloop_76711_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76711_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76711_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76709(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67746 = tid;
    int num_tasks_74937 = info.nsubtasks;
    struct futhark_mc_task_76708 *futhark_mc_task_76708 =
                                 (struct futhark_mc_task_76708 *) args;
    struct futhark_context *ctx = futhark_mc_task_76708->ctx;
    uint64_t futhark_mc_segmap_task_76709_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76709_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76708->free_n_64028;
    struct memblock mem_70242 = {.desc ="mem_70242", .mem =
                                 futhark_mc_task_76708->free_mem_70242, .size =
                                 0, .references =NULL};
    struct memblock mem_70245 = {.desc ="mem_70245", .mem =
                                 futhark_mc_task_76708->free_mem_70245, .size =
                                 0, .references =NULL};
    struct memblock mem_70248 = {.desc ="mem_70248", .mem =
                                 futhark_mc_task_76708->free_mem_70248, .size =
                                 0, .references =NULL};
    struct memblock mem_70251 = {.desc ="mem_70251", .mem =
                                 futhark_mc_task_76708->free_mem_70251, .size =
                                 0, .references =NULL};
    int64_t iter_74938;
    struct futhark_mc_segmap_parloop_struct_76710
    futhark_mc_segmap_parloop_struct_76710;
    
    futhark_mc_segmap_parloop_struct_76710.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76710.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76710.free_mem_70242 = mem_70242.mem;
    futhark_mc_segmap_parloop_struct_76710.free_mem_70245 = mem_70245.mem;
    futhark_mc_segmap_parloop_struct_76710.free_mem_70248 = mem_70248.mem;
    futhark_mc_segmap_parloop_struct_76710.free_mem_70251 = mem_70251.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76711_task;
    
    futhark_mc_segmap_parloop_76711_task.name =
        "futhark_mc_segmap_parloop_76711";
    futhark_mc_segmap_parloop_76711_task.fn = futhark_mc_segmap_parloop_76711;
    futhark_mc_segmap_parloop_76711_task.args =
        &futhark_mc_segmap_parloop_struct_76710;
    futhark_mc_segmap_parloop_76711_task.iterations = iterations;
    futhark_mc_segmap_parloop_76711_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76711_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76711_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76711_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76711_task);
    
    if (futhark_mc_segmap_parloop_76711_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76711_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76711_total_end -
                 futhark_mc_segmap_parloop_76711_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76711_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76711_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76711_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76709_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76709_end -
                 futhark_mc_segmap_task_76709_start;
        
        ctx->futhark_mc_segmap_task_76709_runs[tid]++;
        ctx->futhark_mc_segmap_task_76709_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76709_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76712 {
    struct futhark_context *ctx;
    int64_t free_q_64030;
    int64_t free_last_res_67932;
    char *free_mem_70254;
};
struct futhark_mc_segmap_parloop_struct_76714 {
    struct futhark_context *ctx;
    int64_t free_q_64030;
    int64_t free_last_res_67932;
    char *free_mem_70254;
};
static int futhark_mc_segmap_parloop_76715(void *args, int64_t start,
                                           int64_t end, int flat_tid_67748,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76714
    *futhark_mc_segmap_parloop_struct_76714 =
    (struct futhark_mc_segmap_parloop_struct_76714 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76714->ctx;
    uint64_t futhark_mc_segmap_parloop_76715_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76715_start = get_wall_time();
    
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76714->free_q_64030;
    int64_t last_res_67932 =
            futhark_mc_segmap_parloop_struct_76714->free_last_res_67932;
    struct memblock mem_70254 = {.desc ="mem_70254", .mem =
                                 futhark_mc_segmap_parloop_struct_76714->free_mem_70254,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_74942 = start;
    
    for (; iter_74942 < end; iter_74942++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74943 = q_64030;
        int64_t gtid_67749 = iter_74942;
        int64_t remnant_74944 = iter_74942 - gtid_67749;
        bool cond_74584 = sle64(last_res_67932, gtid_67749);
        float defunc_0_f_res_74585;
        
        if (cond_74584) {
            defunc_0_f_res_74585 = 0.0F;
        } else {
            defunc_0_f_res_74585 = 1.0F;
        }
        ((float *) mem_70254.mem)[gtid_67749] = defunc_0_f_res_74585;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76715_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76715_end -
                 futhark_mc_segmap_parloop_76715_start;
        
        ctx->futhark_mc_segmap_parloop_76715_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76715_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76715_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76713(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67748 = tid;
    int num_tasks_74941 = info.nsubtasks;
    struct futhark_mc_task_76712 *futhark_mc_task_76712 =
                                 (struct futhark_mc_task_76712 *) args;
    struct futhark_context *ctx = futhark_mc_task_76712->ctx;
    uint64_t futhark_mc_segmap_task_76713_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76713_start = get_wall_time();
    
    int64_t q_64030 = futhark_mc_task_76712->free_q_64030;
    int64_t last_res_67932 = futhark_mc_task_76712->free_last_res_67932;
    struct memblock mem_70254 = {.desc ="mem_70254", .mem =
                                 futhark_mc_task_76712->free_mem_70254, .size =
                                 0, .references =NULL};
    int64_t iter_74942;
    struct futhark_mc_segmap_parloop_struct_76714
    futhark_mc_segmap_parloop_struct_76714;
    
    futhark_mc_segmap_parloop_struct_76714.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76714.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76714.free_last_res_67932 = last_res_67932;
    futhark_mc_segmap_parloop_struct_76714.free_mem_70254 = mem_70254.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76715_task;
    
    futhark_mc_segmap_parloop_76715_task.name =
        "futhark_mc_segmap_parloop_76715";
    futhark_mc_segmap_parloop_76715_task.fn = futhark_mc_segmap_parloop_76715;
    futhark_mc_segmap_parloop_76715_task.args =
        &futhark_mc_segmap_parloop_struct_76714;
    futhark_mc_segmap_parloop_76715_task.iterations = iterations;
    futhark_mc_segmap_parloop_76715_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76715_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76715_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76715_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76715_task);
    
    if (futhark_mc_segmap_parloop_76715_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76715_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76715_total_end -
                 futhark_mc_segmap_parloop_76715_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76715_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76715_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76715_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76713_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76713_end -
                 futhark_mc_segmap_task_76713_start;
        
        ctx->futhark_mc_segmap_task_76713_runs[tid]++;
        ctx->futhark_mc_segmap_task_76713_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76713_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76716 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_67932;
    int64_t free_min_arg_67944;
    float free_max_res_67948;
    char *free_mem_70239;
    char *free_mem_70242;
    char *free_mem_70245;
    char *free_mem_70248;
    char *free_mem_70251;
    int64_t free_bytes_70252;
    char *free_mem_70254;
    char *free_mem_70293;
    char *free_mem_70296;
};
struct futhark_mc_segmap_parloop_struct_76718 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_67932;
    int64_t free_min_arg_67944;
    float free_max_res_67948;
    char *free_mem_70239;
    char *free_mem_70242;
    char *free_mem_70245;
    char *free_mem_70248;
    char *free_mem_70251;
    int64_t free_bytes_70252;
    char *free_mem_70254;
    char *free_mem_70293;
    char *free_mem_70296;
};
static int futhark_mc_segmap_parloop_76719(void *args, int64_t start,
                                           int64_t end, int flat_tid_67750,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76718
    *futhark_mc_segmap_parloop_struct_76718 =
    (struct futhark_mc_segmap_parloop_struct_76718 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76718->ctx;
    uint64_t futhark_mc_segmap_parloop_76719_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76719_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76718->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76718->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76718->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76718->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76718->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76718->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76718->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76718->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76718->free_m_64052;
    int64_t last_res_67932 =
            futhark_mc_segmap_parloop_struct_76718->free_last_res_67932;
    int64_t min_arg_67944 =
            futhark_mc_segmap_parloop_struct_76718->free_min_arg_67944;
    float max_res_67948 =
          futhark_mc_segmap_parloop_struct_76718->free_max_res_67948;
    struct memblock mem_70239 = {.desc ="mem_70239", .mem =
                                 futhark_mc_segmap_parloop_struct_76718->free_mem_70239,
                                 .size =0, .references =NULL};
    struct memblock mem_70242 = {.desc ="mem_70242", .mem =
                                 futhark_mc_segmap_parloop_struct_76718->free_mem_70242,
                                 .size =0, .references =NULL};
    struct memblock mem_70245 = {.desc ="mem_70245", .mem =
                                 futhark_mc_segmap_parloop_struct_76718->free_mem_70245,
                                 .size =0, .references =NULL};
    struct memblock mem_70248 = {.desc ="mem_70248", .mem =
                                 futhark_mc_segmap_parloop_struct_76718->free_mem_70248,
                                 .size =0, .references =NULL};
    struct memblock mem_70251 = {.desc ="mem_70251", .mem =
                                 futhark_mc_segmap_parloop_struct_76718->free_mem_70251,
                                 .size =0, .references =NULL};
    int64_t bytes_70252 =
            futhark_mc_segmap_parloop_struct_76718->free_bytes_70252;
    struct memblock mem_70254 = {.desc ="mem_70254", .mem =
                                 futhark_mc_segmap_parloop_struct_76718->free_mem_70254,
                                 .size =0, .references =NULL};
    struct memblock mem_70293 = {.desc ="mem_70293", .mem =
                                 futhark_mc_segmap_parloop_struct_76718->free_mem_70293,
                                 .size =0, .references =NULL};
    struct memblock mem_70296 = {.desc ="mem_70296", .mem =
                                 futhark_mc_segmap_parloop_struct_76718->free_mem_70296,
                                 .size =0, .references =NULL};
    size_t mem_74847_cached_sizze_76720 = 0;
    char *mem_74847 = NULL;
    size_t mem_74849_cached_sizze_76721 = 0;
    char *mem_74849 = NULL;
    int64_t iterations = end - start;
    int64_t iter_74946 = start;
    
    if (mem_74847_cached_sizze_76720 < (size_t) bytes_70252) {
        mem_74847 = realloc(mem_74847, bytes_70252);
        mem_74847_cached_sizze_76720 = bytes_70252;
    }
    if (mem_74849_cached_sizze_76721 < (size_t) bytes_70252) {
        mem_74849 = realloc(mem_74849, bytes_70252);
        mem_74849_cached_sizze_76721 = bytes_70252;
    }
    for (; iter_74946 < end; iter_74946++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_75047 = n_m_64039;
        int64_t gtid_67751 = iter_74946;
        int64_t remnant_75048 = iter_74946 - gtid_67751;
        int64_t min_arg_74748 = mul64(jump_64032, gtid_67751);
        int64_t min_res_74749 = smin64(i_64040, min_arg_74748);
        int64_t defunc_0_g_res_74750 = add64((int64_t) 1, min_res_74749);
        bool nearest_idx_74751;
        int64_t nearest_idx_74752;
        int64_t nearest_idx_74753;
        bool loop_while_74947;
        int64_t low_74948;
        int64_t high_74949;
        
        loop_while_74947 = x_64041;
        low_74948 = (int64_t) 0;
        high_74949 = i_64040;
        while (loop_while_74947) {
            int64_t x_74950 = add64(low_74948, high_74949);
            int64_t mid_74951 = sdiv64(x_74950, (int64_t) 2);
            bool x_74952 = sle64((int64_t) 0, mid_74951);
            bool y_74953 = slt64(mid_74951, n_64028);
            bool bounds_check_74954 = x_74952 && y_74953;
            bool index_certs_74955;
            
            if (!bounds_check_74954) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_74951,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_74956 = ((int64_t *) mem_70248.mem)[mid_74951];
            bool cond_74957 = sle64(defunc_0_g_res_74750, x_74956);
            int64_t loopres_74958;
            int64_t loopres_74959;
            
            if (cond_74957) {
                int64_t loopres_t_res_74960 = sub64(mid_74951, (int64_t) 1);
                
                loopres_74958 = low_74948;
                loopres_74959 = loopres_t_res_74960;
            } else {
                int64_t loopres_f_res_74961 = add64((int64_t) 1, mid_74951);
                
                loopres_74958 = loopres_f_res_74961;
                loopres_74959 = high_74949;
            }
            
            bool loop_cond_74962 = sle64(loopres_74958, loopres_74959);
            bool loop_while_tmp_75049 = loop_cond_74962;
            int64_t low_tmp_75050 = loopres_74958;
            int64_t high_tmp_75051 = loopres_74959;
            
            loop_while_74947 = loop_while_tmp_75049;
            low_74948 = low_tmp_75050;
            high_74949 = high_tmp_75051;
        }
        nearest_idx_74751 = loop_while_74947;
        nearest_idx_74752 = low_74948;
        nearest_idx_74753 = high_74949;
        
        int64_t max_arg_74770 = sub64(nearest_idx_74752, min_res_64046);
        int64_t max_res_74771 = smax64((int64_t) 0, max_arg_74770);
        int64_t j_74772 = add64(min_res_64046, max_res_74771);
        int64_t i_p_m_t_s_74773 = add64(m_64052, max_res_74771);
        bool zzero_leq_i_p_m_t_s_74774 = sle64((int64_t) 0, i_p_m_t_s_74773);
        bool i_p_m_t_s_leq_w_74775 = slt64(i_p_m_t_s_74773, n_64028);
        bool zzero_lte_i_74776 = sle64((int64_t) 0, max_res_74771);
        bool i_lte_j_74777 = sle64(max_res_74771, j_74772);
        bool y_74778 = i_p_m_t_s_leq_w_74775 && zzero_lte_i_74776;
        bool y_74779 = zzero_leq_i_p_m_t_s_74774 && y_74778;
        bool y_74780 = i_lte_j_74777 && y_74779;
        bool forwards_ok_74781 = zzero_lte_i_74776 && y_74780;
        bool ok_or_empty_74782 = empty_slice_64051 || forwards_ok_74781;
        bool index_certs_74783;
        
        if (!ok_or_empty_74782) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_74771, ":",
                          (long long) j_74772,
                          "] out of bounds for array of shape [",
                          (long long) n_64028, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_74784;
        int64_t redout_74964 = (int64_t) 0;
        
        for (int64_t i_74963 = 0; i_74963 < min_res_64046; i_74963++) {
            int64_t slice_74965 = max_res_74771 + i_74963;
            int64_t x_74966 = ((int64_t *) mem_70251.mem)[slice_74965];
            int64_t abs_arg_74967 = sub64(x_74966, defunc_0_g_res_74750);
            int64_t abs_res_74968 = abs64(abs_arg_74967);
            int64_t defunc_1_op_res_74969 = add64(abs_res_74968, redout_74964);
            int64_t redout_tmp_75052 = defunc_1_op_res_74969;
            
            redout_74964 = redout_tmp_75052;
        }
        defunc_2_reduce_res_74784 = redout_74964;
        
        int64_t idx_74792;
        int64_t idx_74793;
        int64_t idx_74794;
        int64_t idx_74795;
        int64_t best_idx_74971;
        int64_t last_idx_74972;
        int64_t best_sum_74973;
        int64_t curr_sum_74974;
        
        best_idx_74971 = max_res_74771;
        last_idx_74972 = max_res_74771;
        best_sum_74973 = defunc_2_reduce_res_74784;
        curr_sum_74974 = defunc_2_reduce_res_74784;
        for (int64_t j_74970 = 0; j_74970 < min_res_64046; j_74970++) {
            int64_t new_idx_74975 = add64(max_res_74771, j_74970);
            int64_t x_74976 = add64(min_res_64046, new_idx_74975);
            bool cond_74977 = slt64(last_res_67932, x_74976);
            int64_t new_sum_74978;
            
            if (cond_74977) {
                new_sum_74978 = (int64_t) 9223372036854775807;
            } else {
                bool x_74979 = sle64((int64_t) 0, last_idx_74972);
                bool y_74980 = slt64(last_idx_74972, n_64028);
                bool bounds_check_74981 = x_74979 && y_74980;
                bool index_certs_74982;
                
                if (!bounds_check_74981) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_74972,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_74983 = ((int64_t *) mem_70251.mem)[last_idx_74972];
                int64_t binop_p_74984 = sub64(defunc_0_g_res_74750, y_74983);
                int64_t defunc_0_f_res_74985 = abs64(binop_p_74984);
                int64_t x_74986 = sub64(curr_sum_74974, defunc_0_f_res_74985);
                int64_t min_arg_74987 = add64(min_res_64046, last_idx_74972);
                int64_t min_res_74988 = smin64(i_64040, min_arg_74987);
                bool x_74989 = sle64((int64_t) 0, min_res_74988);
                bool y_74990 = slt64(min_res_74988, n_64028);
                bool bounds_check_74991 = x_74989 && y_74990;
                bool index_certs_74992;
                
                if (!bounds_check_74991) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_74988,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_74993 = ((int64_t *) mem_70251.mem)[min_res_74988];
                int64_t binop_p_74994 = sub64(defunc_0_g_res_74750, y_74993);
                int64_t defunc_0_f_res_74995 = abs64(binop_p_74994);
                int64_t new_sum_f_res_74996 = add64(x_74986,
                                                    defunc_0_f_res_74995);
                
                new_sum_74978 = new_sum_f_res_74996;
            }
            
            bool cond_74997 = sle64(new_sum_74978, best_sum_74973);
            int64_t loopres_74998;
            
            if (cond_74997) {
                loopres_74998 = new_idx_74975;
            } else {
                loopres_74998 = best_idx_74971;
            }
            
            int64_t loopres_74999;
            
            if (cond_74997) {
                loopres_74999 = new_sum_74978;
            } else {
                loopres_74999 = best_sum_74973;
            }
            
            int64_t best_idx_tmp_75053 = loopres_74998;
            int64_t last_idx_tmp_75054 = new_idx_74975;
            int64_t best_sum_tmp_75055 = loopres_74999;
            int64_t curr_sum_tmp_75056 = new_sum_74978;
            
            best_idx_74971 = best_idx_tmp_75053;
            last_idx_74972 = last_idx_tmp_75054;
            best_sum_74973 = best_sum_tmp_75055;
            curr_sum_74974 = curr_sum_tmp_75056;
        }
        idx_74792 = best_idx_74971;
        idx_74793 = last_idx_74972;
        idx_74794 = best_sum_74973;
        idx_74795 = curr_sum_74974;
        
        int64_t min_res_74826 = smin64(min_arg_67944, idx_74792);
        int64_t x_74827 = add64(min_res_64046, min_res_74826);
        int64_t r_74828 = sub64(x_74827, (int64_t) 1);
        bool x_74829 = sle64((int64_t) 0, r_74828);
        bool y_74830 = slt64(r_74828, n_64028);
        bool bounds_check_74831 = x_74829 && y_74830;
        bool index_certs_74832;
        
        if (!bounds_check_74831) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_74828,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_74833 = ((int64_t *) mem_70242.mem)[r_74828];
        int64_t abs_arg_74834 = sub64(x_74833, min_res_74749);
        int64_t abs_res_74835 = abs64(abs_arg_74834);
        bool x_74836 = sle64((int64_t) 0, min_res_74826);
        bool y_74837 = slt64(min_res_74826, n_64028);
        bool bounds_check_74838 = x_74836 && y_74837;
        bool index_certs_74839;
        
        if (!bounds_check_74838) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_74826,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_74840 = ((int64_t *) mem_70242.mem)[min_res_74826];
        int64_t abs_arg_74841 = sub64(x_74840, min_res_74749);
        int64_t abs_res_74842 = abs64(abs_arg_74841);
        int64_t max_res_74843 = smax64(abs_res_74835, abs_res_74842);
        float defunc_0_f_res_74844 = sitofp_i64_f32(max_res_74843);
        float defunc_1_f_res_74845 = max_res_67948 + defunc_0_f_res_74844;
        float defunc_0_f_res_74846 = sitofp_i64_f32(min_res_74749);
        float defunc_2_reduce_res_74851;
        float defunc_2_reduce_res_74852;
        float defunc_2_reduce_res_74853;
        float redout_75001;
        float redout_75002;
        float redout_75003;
        
        redout_75001 = 0.0F;
        redout_75002 = 0.0F;
        redout_75003 = 0.0F;
        for (int64_t i_75000 = 0; i_75000 < q_64030; i_75000++) {
            float x_75006 = ((float *) mem_70254.mem)[i_75000];
            bool cond_75007 = sle64(last_res_67932, i_75000);
            float defunc_0_f_res_75008;
            
            if (cond_75007) {
                defunc_0_f_res_75008 = 0.0F;
            } else {
                int64_t i_75009 = add64(min_res_74826, i_75000);
                float x_75010 = ((float *) mem_70245.mem)[i_75009];
                float defunc_0_f_res_f_res_75011 = 1.0F + x_75010;
                
                defunc_0_f_res_75008 = defunc_0_f_res_f_res_75011;
            }
            
            float x_j_75012 = defunc_0_f_res_75008 - defunc_0_f_res_74846;
            float abs_res_75013 = (float) fabs(x_j_75012);
            float tmp1_75014 = abs_res_75013 / defunc_1_f_res_74845;
            float x_75015 = tmp1_75014 * tmp1_75014;
            float y_75016 = tmp1_75014 * x_75015;
            float tmp2_75017 = 1.0F - y_75016;
            float x_75018 = tmp2_75017 * tmp2_75017;
            float tmp3_75019 = tmp2_75017 * x_75018;
            float tmp4_75020 = x_75006 * tmp3_75019;
            float defunc_1_f_res_75021 = x_j_75012 * tmp4_75020;
            float defunc_1_f_res_75022 = x_j_75012 * defunc_1_f_res_75021;
            float defunc_1_op_res_75023 = tmp4_75020 + redout_75001;
            float defunc_1_op_res_75024 = defunc_1_f_res_75021 + redout_75002;
            float defunc_1_op_res_75025 = defunc_1_f_res_75022 + redout_75003;
            
            ((float *) mem_74847)[i_75000] = defunc_1_f_res_75021;
            ((float *) mem_74849)[i_75000] = tmp4_75020;
            
            float redout_tmp_75057 = defunc_1_op_res_75023;
            float redout_tmp_75058 = defunc_1_op_res_75024;
            float redout_tmp_75059 = defunc_1_op_res_75025;
            
            redout_75001 = redout_tmp_75057;
            redout_75002 = redout_tmp_75058;
            redout_75003 = redout_tmp_75059;
        }
        defunc_2_reduce_res_74851 = redout_75001;
        defunc_2_reduce_res_74852 = redout_75002;
        defunc_2_reduce_res_74853 = redout_75003;
        
        float x_74884 = defunc_2_reduce_res_74851 * defunc_2_reduce_res_74853;
        float y_74885 = defunc_2_reduce_res_74852 * defunc_2_reduce_res_74852;
        float y_74886 = x_74884 - y_74885;
        float det1_74887 = 1.0F / y_74886;
        float a11_74888 = defunc_2_reduce_res_74853 * det1_74887;
        float negate_arg_74889 = defunc_2_reduce_res_74852 * det1_74887;
        float b11_74890 = 0.0F - negate_arg_74889;
        float c11_74891 = defunc_2_reduce_res_74851 * det1_74887;
        float defunc_2_reduce_res_74892;
        float defunc_2_reduce_res_74893;
        float redout_75029;
        float redout_75030;
        
        redout_75029 = 0.0F;
        redout_75030 = 0.0F;
        for (int64_t i_75028 = 0; i_75028 < q_64030; i_75028++) {
            float x_75031 = ((float *) mem_74849)[i_75028];
            float x_75032 = ((float *) mem_74847)[i_75028];
            bool cond_75033 = sle64(last_res_67932, i_75028);
            float defunc_0_f_res_75034;
            
            if (cond_75033) {
                defunc_0_f_res_75034 = 0.0F;
            } else {
                int64_t i_75035 = add64(min_res_74826, i_75028);
                float x_75036 = ((float *) mem_70239.mem)[i_75035];
                
                defunc_0_f_res_75034 = x_75036;
            }
            
            float x_75037 = a11_74888 * x_75031;
            float y_75038 = b11_74890 * x_75032;
            float x_75039 = x_75037 + y_75038;
            float defunc_9_fit_fun_res_75040 = defunc_0_f_res_75034 * x_75039;
            float x_75041 = b11_74890 * x_75031;
            float y_75042 = c11_74891 * x_75032;
            float x_75043 = x_75041 + y_75042;
            float defunc_9_slope_fun_res_75044 = defunc_0_f_res_75034 * x_75043;
            float defunc_1_op_res_75045 = defunc_9_fit_fun_res_75040 +
                  redout_75029;
            float defunc_1_op_res_75046 = defunc_9_slope_fun_res_75044 +
                  redout_75030;
            float redout_tmp_75062 = defunc_1_op_res_75045;
            float redout_tmp_75063 = defunc_1_op_res_75046;
            
            redout_75029 = redout_tmp_75062;
            redout_75030 = redout_tmp_75063;
        }
        defunc_2_reduce_res_74892 = redout_75029;
        defunc_2_reduce_res_74893 = redout_75030;
        ((float *) mem_70293.mem)[gtid_67751] = defunc_2_reduce_res_74892;
        ((float *) mem_70296.mem)[gtid_67751] = defunc_2_reduce_res_74893;
    }
    
  cleanup:
    { }
    free(mem_74847);
    free(mem_74849);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76719_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76719_end -
                 futhark_mc_segmap_parloop_76719_start;
        
        ctx->futhark_mc_segmap_parloop_76719_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76719_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76719_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76717(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67750 = tid;
    int num_tasks_74945 = info.nsubtasks;
    struct futhark_mc_task_76716 *futhark_mc_task_76716 =
                                 (struct futhark_mc_task_76716 *) args;
    struct futhark_context *ctx = futhark_mc_task_76716->ctx;
    uint64_t futhark_mc_segmap_task_76717_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76717_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76716->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76716->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76716->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76716->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76716->free_i_64040;
    bool x_64041 = futhark_mc_task_76716->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76716->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76716->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76716->free_m_64052;
    int64_t last_res_67932 = futhark_mc_task_76716->free_last_res_67932;
    int64_t min_arg_67944 = futhark_mc_task_76716->free_min_arg_67944;
    float max_res_67948 = futhark_mc_task_76716->free_max_res_67948;
    struct memblock mem_70239 = {.desc ="mem_70239", .mem =
                                 futhark_mc_task_76716->free_mem_70239, .size =
                                 0, .references =NULL};
    struct memblock mem_70242 = {.desc ="mem_70242", .mem =
                                 futhark_mc_task_76716->free_mem_70242, .size =
                                 0, .references =NULL};
    struct memblock mem_70245 = {.desc ="mem_70245", .mem =
                                 futhark_mc_task_76716->free_mem_70245, .size =
                                 0, .references =NULL};
    struct memblock mem_70248 = {.desc ="mem_70248", .mem =
                                 futhark_mc_task_76716->free_mem_70248, .size =
                                 0, .references =NULL};
    struct memblock mem_70251 = {.desc ="mem_70251", .mem =
                                 futhark_mc_task_76716->free_mem_70251, .size =
                                 0, .references =NULL};
    int64_t bytes_70252 = futhark_mc_task_76716->free_bytes_70252;
    struct memblock mem_70254 = {.desc ="mem_70254", .mem =
                                 futhark_mc_task_76716->free_mem_70254, .size =
                                 0, .references =NULL};
    struct memblock mem_70293 = {.desc ="mem_70293", .mem =
                                 futhark_mc_task_76716->free_mem_70293, .size =
                                 0, .references =NULL};
    struct memblock mem_70296 = {.desc ="mem_70296", .mem =
                                 futhark_mc_task_76716->free_mem_70296, .size =
                                 0, .references =NULL};
    int64_t iter_74946;
    struct futhark_mc_segmap_parloop_struct_76718
    futhark_mc_segmap_parloop_struct_76718;
    
    futhark_mc_segmap_parloop_struct_76718.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76718.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76718.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76718.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76718.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76718.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76718.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76718.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76718.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76718.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76718.free_last_res_67932 = last_res_67932;
    futhark_mc_segmap_parloop_struct_76718.free_min_arg_67944 = min_arg_67944;
    futhark_mc_segmap_parloop_struct_76718.free_max_res_67948 = max_res_67948;
    futhark_mc_segmap_parloop_struct_76718.free_mem_70239 = mem_70239.mem;
    futhark_mc_segmap_parloop_struct_76718.free_mem_70242 = mem_70242.mem;
    futhark_mc_segmap_parloop_struct_76718.free_mem_70245 = mem_70245.mem;
    futhark_mc_segmap_parloop_struct_76718.free_mem_70248 = mem_70248.mem;
    futhark_mc_segmap_parloop_struct_76718.free_mem_70251 = mem_70251.mem;
    futhark_mc_segmap_parloop_struct_76718.free_bytes_70252 = bytes_70252;
    futhark_mc_segmap_parloop_struct_76718.free_mem_70254 = mem_70254.mem;
    futhark_mc_segmap_parloop_struct_76718.free_mem_70293 = mem_70293.mem;
    futhark_mc_segmap_parloop_struct_76718.free_mem_70296 = mem_70296.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76719_task;
    
    futhark_mc_segmap_parloop_76719_task.name =
        "futhark_mc_segmap_parloop_76719";
    futhark_mc_segmap_parloop_76719_task.fn = futhark_mc_segmap_parloop_76719;
    futhark_mc_segmap_parloop_76719_task.args =
        &futhark_mc_segmap_parloop_struct_76718;
    futhark_mc_segmap_parloop_76719_task.iterations = iterations;
    futhark_mc_segmap_parloop_76719_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76719_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76719_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76719_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76719_task);
    
    if (futhark_mc_segmap_parloop_76719_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76719_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76719_total_end -
                 futhark_mc_segmap_parloop_76719_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76719_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76719_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76719_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76717_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76717_end -
                 futhark_mc_segmap_task_76717_start;
        
        ctx->futhark_mc_segmap_task_76717_runs[tid]++;
        ctx->futhark_mc_segmap_task_76717_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76717_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76723 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_67932;
    int64_t free_min_arg_67944;
    float free_max_res_67948;
    char *free_mem_70239;
    char *free_mem_70242;
    char *free_mem_70245;
    char *free_mem_70248;
    char *free_mem_70251;
    int64_t free_bytes_70252;
    char *free_mem_70254;
    char *free_mem_70293;
    char *free_mem_70296;
};
struct futhark_mc_task_76727 {
    struct futhark_context *ctx;
    char *free_mem_70251;
    int64_t free_defunc_0_g_res_74588;
    int64_t free_max_res_74609;
    int64_t *retval_defunc_2_reduce_res_74622;
};
struct futhark_mc_segred_stage_1_parloop_struct_76730 {
    struct futhark_context *ctx;
    char *free_mem_70251;
    int64_t free_defunc_0_g_res_74588;
    int64_t free_max_res_74609;
    char *free_reduce_stage_1_tid_res_arr_mem_75170;
};
static int futhark_mc_segred_stage_1_parloop_76731(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_67754, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76730
    *futhark_mc_segred_stage_1_parloop_struct_76730 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76730 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76730->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76731_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76731_start = get_wall_time();
    
    struct memblock mem_70251 = {.desc ="mem_70251", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76730->free_mem_70251,
                                 .size =0, .references =NULL};
    int64_t defunc_0_g_res_74588 =
            futhark_mc_segred_stage_1_parloop_struct_76730->free_defunc_0_g_res_74588;
    int64_t max_res_74609 =
            futhark_mc_segred_stage_1_parloop_struct_76730->free_max_res_74609;
    struct memblock reduce_stage_1_tid_res_arr_mem_75170 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_75170",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76730->free_reduce_stage_1_tid_res_arr_mem_75170,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75172 = start;
    int64_t x_75081;
    int64_t x_75082;
    int64_t local_acc_75173 = (int64_t) 0;
    
    for (; iter_75172 < end; iter_75172++) {
        int64_t gtid_67755 = iter_75172;
        int64_t slice_75084 = gtid_67755 + max_res_74609;
        int64_t x_75085 = ((int64_t *) mem_70251.mem)[slice_75084];
        int64_t abs_arg_75086 = sub64(x_75085, defunc_0_g_res_74588);
        int64_t abs_res_75087 = abs64(abs_arg_75086);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_75081 = local_acc_75173;
        }
        // Load next params
        {
            x_75082 = abs_res_75087;
        }
        // Red body
        {
            int64_t defunc_1_op_res_75083 = add64(x_75081, x_75082);
            
            local_acc_75173 = defunc_1_op_res_75083;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_75170.mem)[flat_tid_67754] =
        local_acc_75173;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76731_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76731_end -
                 futhark_mc_segred_stage_1_parloop_76731_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76731_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76731_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76731_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76728(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67754 = tid;
    int num_tasks_75169 = info.nsubtasks;
    struct futhark_mc_task_76727 *futhark_mc_task_76727 =
                                 (struct futhark_mc_task_76727 *) args;
    struct futhark_context *ctx = futhark_mc_task_76727->ctx;
    uint64_t futhark_mc_segred_task_76728_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76728_start = get_wall_time();
    
    struct memblock mem_70251 = {.desc ="mem_70251", .mem =
                                 futhark_mc_task_76727->free_mem_70251, .size =
                                 0, .references =NULL};
    int64_t defunc_0_g_res_74588 =
            futhark_mc_task_76727->free_defunc_0_g_res_74588;
    int64_t max_res_74609 = futhark_mc_task_76727->free_max_res_74609;
    int64_t defunc_2_reduce_res_74622 =
            *futhark_mc_task_76727->retval_defunc_2_reduce_res_74622;
    size_t reduce_stage_1_tid_res_arr_mem_75170_cached_sizze_76729 = 0;
    char *reduce_stage_1_tid_res_arr_mem_75170 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_75170_cached_sizze_76729 <
        (size_t) ((int64_t) 8 * num_tasks_75169)) {
        reduce_stage_1_tid_res_arr_mem_75170 =
            realloc(reduce_stage_1_tid_res_arr_mem_75170, (int64_t) 8 *
                    num_tasks_75169);
        reduce_stage_1_tid_res_arr_mem_75170_cached_sizze_76729 = (int64_t) 8 *
            num_tasks_75169;
    }
    
    int64_t iter_75172;
    struct futhark_mc_segred_stage_1_parloop_struct_76730
    futhark_mc_segred_stage_1_parloop_struct_76730;
    
    futhark_mc_segred_stage_1_parloop_struct_76730.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76730.free_mem_70251 =
        mem_70251.mem;
    futhark_mc_segred_stage_1_parloop_struct_76730.free_defunc_0_g_res_74588 =
        defunc_0_g_res_74588;
    futhark_mc_segred_stage_1_parloop_struct_76730.free_max_res_74609 =
        max_res_74609;
    futhark_mc_segred_stage_1_parloop_struct_76730.free_reduce_stage_1_tid_res_arr_mem_75170 =
        reduce_stage_1_tid_res_arr_mem_75170;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76731_task;
    
    futhark_mc_segred_stage_1_parloop_76731_task.name =
        "futhark_mc_segred_stage_1_parloop_76731";
    futhark_mc_segred_stage_1_parloop_76731_task.fn =
        futhark_mc_segred_stage_1_parloop_76731;
    futhark_mc_segred_stage_1_parloop_76731_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76730;
    futhark_mc_segred_stage_1_parloop_76731_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76731_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76731_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76731_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76731_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76731_task);
    
    if (futhark_mc_segred_stage_1_parloop_76731_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76731_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76731_total_end -
                 futhark_mc_segred_stage_1_parloop_76731_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76731_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76731_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76731_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_74622 = (int64_t) 0;
    }
    
    int64_t x_75174;
    int64_t x_75175;
    
    for (int32_t i_75177 = 0; i_75177 < num_tasks_75169; i_75177++) {
        flat_tid_67754 = i_75177;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_75174 = defunc_2_reduce_res_74622;
            }
            // load next params
            {
                x_75175 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_75170)[flat_tid_67754];
            }
            // red body
            {
                int64_t defunc_1_op_res_75176 = add64(x_75174, x_75175);
                
                defunc_2_reduce_res_74622 = defunc_1_op_res_75176;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_75170);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76728_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76728_end -
                 futhark_mc_segred_task_76728_start;
        
        ctx->futhark_mc_segred_task_76728_runs[tid]++;
        ctx->futhark_mc_segred_task_76728_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76728_iter[tid] += iterations;
    }
    *futhark_mc_task_76727->retval_defunc_2_reduce_res_74622 =
        defunc_2_reduce_res_74622;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76732 {
    struct futhark_context *ctx;
    int64_t free_last_res_67932;
    char *free_mem_70245;
    char *free_mem_70254;
    int64_t free_min_res_74664;
    float free_defunc_1_f_res_74683;
    float free_defunc_0_f_res_74684;
    float *retval_defunc_2_reduce_res_74687;
    float *retval_defunc_2_reduce_res_74688;
    float *retval_defunc_2_reduce_res_74689;
    char *retval_mem_74685;
    char *retval_mem_74686;
};
struct futhark_mc_segred_stage_1_parloop_struct_76737 {
    struct futhark_context *ctx;
    int64_t free_last_res_67932;
    char *free_mem_70245;
    char *free_mem_70254;
    int64_t free_min_res_74664;
    float free_defunc_1_f_res_74683;
    float free_defunc_0_f_res_74684;
    char *free_mem_74685;
    char *free_mem_74686;
    char *free_reduce_stage_1_tid_res_arr_mem_75183;
    char *free_reduce_stage_1_tid_res_arr_mem_75185;
    char *free_reduce_stage_1_tid_res_arr_mem_75187;
};
static int futhark_mc_segred_stage_1_parloop_76738(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_67756, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76737
    *futhark_mc_segred_stage_1_parloop_struct_76737 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76737 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76737->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76738_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76738_start = get_wall_time();
    
    int64_t last_res_67932 =
            futhark_mc_segred_stage_1_parloop_struct_76737->free_last_res_67932;
    struct memblock mem_70245 = {.desc ="mem_70245", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76737->free_mem_70245,
                                 .size =0, .references =NULL};
    struct memblock mem_70254 = {.desc ="mem_70254", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76737->free_mem_70254,
                                 .size =0, .references =NULL};
    int64_t min_res_74664 =
            futhark_mc_segred_stage_1_parloop_struct_76737->free_min_res_74664;
    float defunc_1_f_res_74683 =
          futhark_mc_segred_stage_1_parloop_struct_76737->free_defunc_1_f_res_74683;
    float defunc_0_f_res_74684 =
          futhark_mc_segred_stage_1_parloop_struct_76737->free_defunc_0_f_res_74684;
    struct memblock mem_74685 = {.desc ="mem_74685", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76737->free_mem_74685,
                                 .size =0, .references =NULL};
    struct memblock mem_74686 = {.desc ="mem_74686", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76737->free_mem_74686,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_75183 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_75183",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76737->free_reduce_stage_1_tid_res_arr_mem_75183,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_75185 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_75185",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76737->free_reduce_stage_1_tid_res_arr_mem_75185,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_75187 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_75187",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76737->free_reduce_stage_1_tid_res_arr_mem_75187,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75189 = start;
    float x_75118;
    float x_75119;
    float x_75121;
    float x_75122;
    float x_75124;
    float x_75125;
    float local_acc_75190 = 0.0F;
    float local_acc_75191 = 0.0F;
    float local_acc_75192 = 0.0F;
    
    for (; iter_75189 < end; iter_75189++) {
        int64_t gtid_67757 = iter_75189;
        float x_75127 = ((float *) mem_70254.mem)[gtid_67757];
        bool cond_75128 = sle64(last_res_67932, gtid_67757);
        float defunc_0_f_res_75129;
        
        if (cond_75128) {
            defunc_0_f_res_75129 = 0.0F;
        } else {
            int64_t i_75130 = add64(gtid_67757, min_res_74664);
            float x_75131 = ((float *) mem_70245.mem)[i_75130];
            float defunc_0_f_res_f_res_75132 = 1.0F + x_75131;
            
            defunc_0_f_res_75129 = defunc_0_f_res_f_res_75132;
        }
        
        float x_j_75133 = defunc_0_f_res_75129 - defunc_0_f_res_74684;
        float abs_res_75134 = (float) fabs(x_j_75133);
        float tmp1_75135 = abs_res_75134 / defunc_1_f_res_74683;
        float x_75136 = tmp1_75135 * tmp1_75135;
        float y_75137 = tmp1_75135 * x_75136;
        float tmp2_75138 = 1.0F - y_75137;
        float x_75139 = tmp2_75138 * tmp2_75138;
        float tmp3_75140 = tmp2_75138 * x_75139;
        float tmp4_75141 = x_75127 * tmp3_75140;
        float defunc_1_f_res_75142 = x_j_75133 * tmp4_75141;
        float defunc_1_f_res_75143 = x_j_75133 * defunc_1_f_res_75142;
        
        // save map-out results
        {
            ((float *) mem_74685.mem)[gtid_67757] = defunc_1_f_res_75142;
            ((float *) mem_74686.mem)[gtid_67757] = tmp4_75141;
        }
        // Load accum params
        {
            x_75118 = local_acc_75190;
        }
        // Load next params
        {
            x_75119 = tmp4_75141;
        }
        // Red body
        {
            float defunc_1_op_res_75120 = x_75118 + x_75119;
            
            local_acc_75190 = defunc_1_op_res_75120;
        }
        // Load accum params
        {
            x_75121 = local_acc_75191;
        }
        // Load next params
        {
            x_75122 = defunc_1_f_res_75142;
        }
        // Red body
        {
            float defunc_1_op_res_75123 = x_75121 + x_75122;
            
            local_acc_75191 = defunc_1_op_res_75123;
        }
        // Load accum params
        {
            x_75124 = local_acc_75192;
        }
        // Load next params
        {
            x_75125 = defunc_1_f_res_75143;
        }
        // Red body
        {
            float defunc_1_op_res_75126 = x_75124 + x_75125;
            
            local_acc_75192 = defunc_1_op_res_75126;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_75183.mem)[flat_tid_67756] =
        local_acc_75190;
    ((float *) reduce_stage_1_tid_res_arr_mem_75185.mem)[flat_tid_67756] =
        local_acc_75191;
    ((float *) reduce_stage_1_tid_res_arr_mem_75187.mem)[flat_tid_67756] =
        local_acc_75192;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76738_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76738_end -
                 futhark_mc_segred_stage_1_parloop_76738_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76738_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76738_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76738_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76733(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67756 = tid;
    int num_tasks_75182 = info.nsubtasks;
    struct futhark_mc_task_76732 *futhark_mc_task_76732 =
                                 (struct futhark_mc_task_76732 *) args;
    struct futhark_context *ctx = futhark_mc_task_76732->ctx;
    uint64_t futhark_mc_segred_task_76733_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76733_start = get_wall_time();
    
    int64_t last_res_67932 = futhark_mc_task_76732->free_last_res_67932;
    struct memblock mem_70245 = {.desc ="mem_70245", .mem =
                                 futhark_mc_task_76732->free_mem_70245, .size =
                                 0, .references =NULL};
    struct memblock mem_70254 = {.desc ="mem_70254", .mem =
                                 futhark_mc_task_76732->free_mem_70254, .size =
                                 0, .references =NULL};
    int64_t min_res_74664 = futhark_mc_task_76732->free_min_res_74664;
    float defunc_1_f_res_74683 =
          futhark_mc_task_76732->free_defunc_1_f_res_74683;
    float defunc_0_f_res_74684 =
          futhark_mc_task_76732->free_defunc_0_f_res_74684;
    float defunc_2_reduce_res_74687 =
          *futhark_mc_task_76732->retval_defunc_2_reduce_res_74687;
    float defunc_2_reduce_res_74688 =
          *futhark_mc_task_76732->retval_defunc_2_reduce_res_74688;
    float defunc_2_reduce_res_74689 =
          *futhark_mc_task_76732->retval_defunc_2_reduce_res_74689;
    struct memblock mem_74685 = {.desc ="mem_74685", .mem =
                                 futhark_mc_task_76732->retval_mem_74685,
                                 .size =0, .references =NULL};
    struct memblock mem_74686 = {.desc ="mem_74686", .mem =
                                 futhark_mc_task_76732->retval_mem_74686,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_75183_cached_sizze_76734 = 0;
    char *reduce_stage_1_tid_res_arr_mem_75183 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_75185_cached_sizze_76735 = 0;
    char *reduce_stage_1_tid_res_arr_mem_75185 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_75187_cached_sizze_76736 = 0;
    char *reduce_stage_1_tid_res_arr_mem_75187 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_75183_cached_sizze_76734 <
        (size_t) ((int64_t) 4 * num_tasks_75182)) {
        reduce_stage_1_tid_res_arr_mem_75183 =
            realloc(reduce_stage_1_tid_res_arr_mem_75183, (int64_t) 4 *
                    num_tasks_75182);
        reduce_stage_1_tid_res_arr_mem_75183_cached_sizze_76734 = (int64_t) 4 *
            num_tasks_75182;
    }
    if (reduce_stage_1_tid_res_arr_mem_75185_cached_sizze_76735 <
        (size_t) ((int64_t) 4 * num_tasks_75182)) {
        reduce_stage_1_tid_res_arr_mem_75185 =
            realloc(reduce_stage_1_tid_res_arr_mem_75185, (int64_t) 4 *
                    num_tasks_75182);
        reduce_stage_1_tid_res_arr_mem_75185_cached_sizze_76735 = (int64_t) 4 *
            num_tasks_75182;
    }
    if (reduce_stage_1_tid_res_arr_mem_75187_cached_sizze_76736 <
        (size_t) ((int64_t) 4 * num_tasks_75182)) {
        reduce_stage_1_tid_res_arr_mem_75187 =
            realloc(reduce_stage_1_tid_res_arr_mem_75187, (int64_t) 4 *
                    num_tasks_75182);
        reduce_stage_1_tid_res_arr_mem_75187_cached_sizze_76736 = (int64_t) 4 *
            num_tasks_75182;
    }
    
    int64_t iter_75189;
    struct futhark_mc_segred_stage_1_parloop_struct_76737
    futhark_mc_segred_stage_1_parloop_struct_76737;
    
    futhark_mc_segred_stage_1_parloop_struct_76737.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76737.free_last_res_67932 =
        last_res_67932;
    futhark_mc_segred_stage_1_parloop_struct_76737.free_mem_70245 =
        mem_70245.mem;
    futhark_mc_segred_stage_1_parloop_struct_76737.free_mem_70254 =
        mem_70254.mem;
    futhark_mc_segred_stage_1_parloop_struct_76737.free_min_res_74664 =
        min_res_74664;
    futhark_mc_segred_stage_1_parloop_struct_76737.free_defunc_1_f_res_74683 =
        defunc_1_f_res_74683;
    futhark_mc_segred_stage_1_parloop_struct_76737.free_defunc_0_f_res_74684 =
        defunc_0_f_res_74684;
    futhark_mc_segred_stage_1_parloop_struct_76737.free_mem_74685 =
        mem_74685.mem;
    futhark_mc_segred_stage_1_parloop_struct_76737.free_mem_74686 =
        mem_74686.mem;
    futhark_mc_segred_stage_1_parloop_struct_76737.free_reduce_stage_1_tid_res_arr_mem_75183 =
        reduce_stage_1_tid_res_arr_mem_75183;
    futhark_mc_segred_stage_1_parloop_struct_76737.free_reduce_stage_1_tid_res_arr_mem_75185 =
        reduce_stage_1_tid_res_arr_mem_75185;
    futhark_mc_segred_stage_1_parloop_struct_76737.free_reduce_stage_1_tid_res_arr_mem_75187 =
        reduce_stage_1_tid_res_arr_mem_75187;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76738_task;
    
    futhark_mc_segred_stage_1_parloop_76738_task.name =
        "futhark_mc_segred_stage_1_parloop_76738";
    futhark_mc_segred_stage_1_parloop_76738_task.fn =
        futhark_mc_segred_stage_1_parloop_76738;
    futhark_mc_segred_stage_1_parloop_76738_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76737;
    futhark_mc_segred_stage_1_parloop_76738_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76738_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76738_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76738_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76738_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76738_task);
    
    if (futhark_mc_segred_stage_1_parloop_76738_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76738_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76738_total_end -
                 futhark_mc_segred_stage_1_parloop_76738_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76738_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76738_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76738_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_74687 = 0.0F;
        defunc_2_reduce_res_74688 = 0.0F;
        defunc_2_reduce_res_74689 = 0.0F;
    }
    
    float x_75193;
    float x_75194;
    float x_75196;
    float x_75197;
    float x_75199;
    float x_75200;
    
    for (int32_t i_75202 = 0; i_75202 < num_tasks_75182; i_75202++) {
        flat_tid_67756 = i_75202;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_75193 = defunc_2_reduce_res_74687;
            }
            // load next params
            {
                x_75194 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_75183)[flat_tid_67756];
            }
            // red body
            {
                float defunc_1_op_res_75195 = x_75193 + x_75194;
                
                defunc_2_reduce_res_74687 = defunc_1_op_res_75195;
            }
            // load acc params
            {
                x_75196 = defunc_2_reduce_res_74688;
            }
            // load next params
            {
                x_75197 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_75185)[flat_tid_67756];
            }
            // red body
            {
                float defunc_1_op_res_75198 = x_75196 + x_75197;
                
                defunc_2_reduce_res_74688 = defunc_1_op_res_75198;
            }
            // load acc params
            {
                x_75199 = defunc_2_reduce_res_74689;
            }
            // load next params
            {
                x_75200 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_75187)[flat_tid_67756];
            }
            // red body
            {
                float defunc_1_op_res_75201 = x_75199 + x_75200;
                
                defunc_2_reduce_res_74689 = defunc_1_op_res_75201;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_75183);
    free(reduce_stage_1_tid_res_arr_mem_75185);
    free(reduce_stage_1_tid_res_arr_mem_75187);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76733_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76733_end -
                 futhark_mc_segred_task_76733_start;
        
        ctx->futhark_mc_segred_task_76733_runs[tid]++;
        ctx->futhark_mc_segred_task_76733_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76733_iter[tid] += iterations;
    }
    *futhark_mc_task_76732->retval_defunc_2_reduce_res_74687 =
        defunc_2_reduce_res_74687;
    *futhark_mc_task_76732->retval_defunc_2_reduce_res_74688 =
        defunc_2_reduce_res_74688;
    *futhark_mc_task_76732->retval_defunc_2_reduce_res_74689 =
        defunc_2_reduce_res_74689;
    futhark_mc_task_76732->retval_mem_74685 = mem_74685.mem;
    futhark_mc_task_76732->retval_mem_74686 = mem_74686.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76739 {
    struct futhark_context *ctx;
    int64_t free_last_res_67932;
    char *free_mem_70239;
    int64_t free_min_res_74664;
    char *free_mem_74685;
    char *free_mem_74686;
    float free_a11_74722;
    float free_b11_74724;
    float free_c11_74725;
    float *retval_defunc_2_reduce_res_74726;
    float *retval_defunc_2_reduce_res_74727;
};
struct futhark_mc_segred_stage_1_parloop_struct_76743 {
    struct futhark_context *ctx;
    int64_t free_last_res_67932;
    char *free_mem_70239;
    int64_t free_min_res_74664;
    char *free_mem_74685;
    char *free_mem_74686;
    float free_a11_74722;
    float free_b11_74724;
    float free_c11_74725;
    char *free_reduce_stage_1_tid_res_arr_mem_75204;
    char *free_reduce_stage_1_tid_res_arr_mem_75206;
};
static int futhark_mc_segred_stage_1_parloop_76744(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_67758, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76743
    *futhark_mc_segred_stage_1_parloop_struct_76743 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76743 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76743->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76744_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76744_start = get_wall_time();
    
    int64_t last_res_67932 =
            futhark_mc_segred_stage_1_parloop_struct_76743->free_last_res_67932;
    struct memblock mem_70239 = {.desc ="mem_70239", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76743->free_mem_70239,
                                 .size =0, .references =NULL};
    int64_t min_res_74664 =
            futhark_mc_segred_stage_1_parloop_struct_76743->free_min_res_74664;
    struct memblock mem_74685 = {.desc ="mem_74685", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76743->free_mem_74685,
                                 .size =0, .references =NULL};
    struct memblock mem_74686 = {.desc ="mem_74686", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76743->free_mem_74686,
                                 .size =0, .references =NULL};
    float a11_74722 =
          futhark_mc_segred_stage_1_parloop_struct_76743->free_a11_74722;
    float b11_74724 =
          futhark_mc_segred_stage_1_parloop_struct_76743->free_b11_74724;
    float c11_74725 =
          futhark_mc_segred_stage_1_parloop_struct_76743->free_c11_74725;
    struct memblock reduce_stage_1_tid_res_arr_mem_75204 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_75204",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76743->free_reduce_stage_1_tid_res_arr_mem_75204,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_75206 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_75206",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76743->free_reduce_stage_1_tid_res_arr_mem_75206,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75208 = start;
    float x_75144;
    float x_75145;
    float x_75147;
    float x_75148;
    float local_acc_75209 = 0.0F;
    float local_acc_75210 = 0.0F;
    
    for (; iter_75208 < end; iter_75208++) {
        int64_t gtid_67759 = iter_75208;
        float x_75150 = ((float *) mem_74686.mem)[gtid_67759];
        float x_75151 = ((float *) mem_74685.mem)[gtid_67759];
        bool cond_75152 = sle64(last_res_67932, gtid_67759);
        float defunc_0_f_res_75153;
        
        if (cond_75152) {
            defunc_0_f_res_75153 = 0.0F;
        } else {
            int64_t i_75154 = add64(gtid_67759, min_res_74664);
            float x_75155 = ((float *) mem_70239.mem)[i_75154];
            
            defunc_0_f_res_75153 = x_75155;
        }
        
        float x_75156 = a11_74722 * x_75150;
        float y_75157 = b11_74724 * x_75151;
        float x_75158 = x_75156 + y_75157;
        float defunc_9_fit_fun_res_75159 = defunc_0_f_res_75153 * x_75158;
        float x_75160 = b11_74724 * x_75150;
        float y_75161 = c11_74725 * x_75151;
        float x_75162 = x_75160 + y_75161;
        float defunc_9_slope_fun_res_75163 = defunc_0_f_res_75153 * x_75162;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_75144 = local_acc_75209;
        }
        // Load next params
        {
            x_75145 = defunc_9_fit_fun_res_75159;
        }
        // Red body
        {
            float defunc_1_op_res_75146 = x_75144 + x_75145;
            
            local_acc_75209 = defunc_1_op_res_75146;
        }
        // Load accum params
        {
            x_75147 = local_acc_75210;
        }
        // Load next params
        {
            x_75148 = defunc_9_slope_fun_res_75163;
        }
        // Red body
        {
            float defunc_1_op_res_75149 = x_75147 + x_75148;
            
            local_acc_75210 = defunc_1_op_res_75149;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_75204.mem)[flat_tid_67758] =
        local_acc_75209;
    ((float *) reduce_stage_1_tid_res_arr_mem_75206.mem)[flat_tid_67758] =
        local_acc_75210;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76744_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76744_end -
                 futhark_mc_segred_stage_1_parloop_76744_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76744_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76744_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76744_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76740(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67758 = tid;
    int num_tasks_75203 = info.nsubtasks;
    struct futhark_mc_task_76739 *futhark_mc_task_76739 =
                                 (struct futhark_mc_task_76739 *) args;
    struct futhark_context *ctx = futhark_mc_task_76739->ctx;
    uint64_t futhark_mc_segred_task_76740_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76740_start = get_wall_time();
    
    int64_t last_res_67932 = futhark_mc_task_76739->free_last_res_67932;
    struct memblock mem_70239 = {.desc ="mem_70239", .mem =
                                 futhark_mc_task_76739->free_mem_70239, .size =
                                 0, .references =NULL};
    int64_t min_res_74664 = futhark_mc_task_76739->free_min_res_74664;
    struct memblock mem_74685 = {.desc ="mem_74685", .mem =
                                 futhark_mc_task_76739->free_mem_74685, .size =
                                 0, .references =NULL};
    struct memblock mem_74686 = {.desc ="mem_74686", .mem =
                                 futhark_mc_task_76739->free_mem_74686, .size =
                                 0, .references =NULL};
    float a11_74722 = futhark_mc_task_76739->free_a11_74722;
    float b11_74724 = futhark_mc_task_76739->free_b11_74724;
    float c11_74725 = futhark_mc_task_76739->free_c11_74725;
    float defunc_2_reduce_res_74726 =
          *futhark_mc_task_76739->retval_defunc_2_reduce_res_74726;
    float defunc_2_reduce_res_74727 =
          *futhark_mc_task_76739->retval_defunc_2_reduce_res_74727;
    size_t reduce_stage_1_tid_res_arr_mem_75204_cached_sizze_76741 = 0;
    char *reduce_stage_1_tid_res_arr_mem_75204 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_75206_cached_sizze_76742 = 0;
    char *reduce_stage_1_tid_res_arr_mem_75206 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_75204_cached_sizze_76741 <
        (size_t) ((int64_t) 4 * num_tasks_75203)) {
        reduce_stage_1_tid_res_arr_mem_75204 =
            realloc(reduce_stage_1_tid_res_arr_mem_75204, (int64_t) 4 *
                    num_tasks_75203);
        reduce_stage_1_tid_res_arr_mem_75204_cached_sizze_76741 = (int64_t) 4 *
            num_tasks_75203;
    }
    if (reduce_stage_1_tid_res_arr_mem_75206_cached_sizze_76742 <
        (size_t) ((int64_t) 4 * num_tasks_75203)) {
        reduce_stage_1_tid_res_arr_mem_75206 =
            realloc(reduce_stage_1_tid_res_arr_mem_75206, (int64_t) 4 *
                    num_tasks_75203);
        reduce_stage_1_tid_res_arr_mem_75206_cached_sizze_76742 = (int64_t) 4 *
            num_tasks_75203;
    }
    
    int64_t iter_75208;
    struct futhark_mc_segred_stage_1_parloop_struct_76743
    futhark_mc_segred_stage_1_parloop_struct_76743;
    
    futhark_mc_segred_stage_1_parloop_struct_76743.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76743.free_last_res_67932 =
        last_res_67932;
    futhark_mc_segred_stage_1_parloop_struct_76743.free_mem_70239 =
        mem_70239.mem;
    futhark_mc_segred_stage_1_parloop_struct_76743.free_min_res_74664 =
        min_res_74664;
    futhark_mc_segred_stage_1_parloop_struct_76743.free_mem_74685 =
        mem_74685.mem;
    futhark_mc_segred_stage_1_parloop_struct_76743.free_mem_74686 =
        mem_74686.mem;
    futhark_mc_segred_stage_1_parloop_struct_76743.free_a11_74722 = a11_74722;
    futhark_mc_segred_stage_1_parloop_struct_76743.free_b11_74724 = b11_74724;
    futhark_mc_segred_stage_1_parloop_struct_76743.free_c11_74725 = c11_74725;
    futhark_mc_segred_stage_1_parloop_struct_76743.free_reduce_stage_1_tid_res_arr_mem_75204 =
        reduce_stage_1_tid_res_arr_mem_75204;
    futhark_mc_segred_stage_1_parloop_struct_76743.free_reduce_stage_1_tid_res_arr_mem_75206 =
        reduce_stage_1_tid_res_arr_mem_75206;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76744_task;
    
    futhark_mc_segred_stage_1_parloop_76744_task.name =
        "futhark_mc_segred_stage_1_parloop_76744";
    futhark_mc_segred_stage_1_parloop_76744_task.fn =
        futhark_mc_segred_stage_1_parloop_76744;
    futhark_mc_segred_stage_1_parloop_76744_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76743;
    futhark_mc_segred_stage_1_parloop_76744_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76744_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76744_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76744_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76744_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76744_task);
    
    if (futhark_mc_segred_stage_1_parloop_76744_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76744_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76744_total_end -
                 futhark_mc_segred_stage_1_parloop_76744_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76744_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76744_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76744_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_74726 = 0.0F;
        defunc_2_reduce_res_74727 = 0.0F;
    }
    
    float x_75211;
    float x_75212;
    float x_75214;
    float x_75215;
    
    for (int32_t i_75217 = 0; i_75217 < num_tasks_75203; i_75217++) {
        flat_tid_67758 = i_75217;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_75211 = defunc_2_reduce_res_74726;
            }
            // load next params
            {
                x_75212 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_75204)[flat_tid_67758];
            }
            // red body
            {
                float defunc_1_op_res_75213 = x_75211 + x_75212;
                
                defunc_2_reduce_res_74726 = defunc_1_op_res_75213;
            }
            // load acc params
            {
                x_75214 = defunc_2_reduce_res_74727;
            }
            // load next params
            {
                x_75215 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_75206)[flat_tid_67758];
            }
            // red body
            {
                float defunc_1_op_res_75216 = x_75214 + x_75215;
                
                defunc_2_reduce_res_74727 = defunc_1_op_res_75216;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_75204);
    free(reduce_stage_1_tid_res_arr_mem_75206);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76740_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76740_end -
                 futhark_mc_segred_task_76740_start;
        
        ctx->futhark_mc_segred_task_76740_runs[tid]++;
        ctx->futhark_mc_segred_task_76740_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76740_iter[tid] += iterations;
    }
    *futhark_mc_task_76739->retval_defunc_2_reduce_res_74726 =
        defunc_2_reduce_res_74726;
    *futhark_mc_task_76739->retval_defunc_2_reduce_res_74727 =
        defunc_2_reduce_res_74727;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76724(void *args, int64_t start,
                                           int64_t end, int flat_tid_67752,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76723
    *futhark_mc_segmap_parloop_struct_76723 =
    (struct futhark_mc_segmap_parloop_struct_76723 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76723->ctx;
    uint64_t futhark_mc_segmap_parloop_76724_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76724_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76723->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76723->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76723->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76723->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76723->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76723->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76723->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76723->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76723->free_m_64052;
    int64_t last_res_67932 =
            futhark_mc_segmap_parloop_struct_76723->free_last_res_67932;
    int64_t min_arg_67944 =
            futhark_mc_segmap_parloop_struct_76723->free_min_arg_67944;
    float max_res_67948 =
          futhark_mc_segmap_parloop_struct_76723->free_max_res_67948;
    struct memblock mem_70239 = {.desc ="mem_70239", .mem =
                                 futhark_mc_segmap_parloop_struct_76723->free_mem_70239,
                                 .size =0, .references =NULL};
    struct memblock mem_70242 = {.desc ="mem_70242", .mem =
                                 futhark_mc_segmap_parloop_struct_76723->free_mem_70242,
                                 .size =0, .references =NULL};
    struct memblock mem_70245 = {.desc ="mem_70245", .mem =
                                 futhark_mc_segmap_parloop_struct_76723->free_mem_70245,
                                 .size =0, .references =NULL};
    struct memblock mem_70248 = {.desc ="mem_70248", .mem =
                                 futhark_mc_segmap_parloop_struct_76723->free_mem_70248,
                                 .size =0, .references =NULL};
    struct memblock mem_70251 = {.desc ="mem_70251", .mem =
                                 futhark_mc_segmap_parloop_struct_76723->free_mem_70251,
                                 .size =0, .references =NULL};
    int64_t bytes_70252 =
            futhark_mc_segmap_parloop_struct_76723->free_bytes_70252;
    struct memblock mem_70254 = {.desc ="mem_70254", .mem =
                                 futhark_mc_segmap_parloop_struct_76723->free_mem_70254,
                                 .size =0, .references =NULL};
    struct memblock mem_70293 = {.desc ="mem_70293", .mem =
                                 futhark_mc_segmap_parloop_struct_76723->free_mem_70293,
                                 .size =0, .references =NULL};
    struct memblock mem_70296 = {.desc ="mem_70296", .mem =
                                 futhark_mc_segmap_parloop_struct_76723->free_mem_70296,
                                 .size =0, .references =NULL};
    size_t mem_74685_cached_sizze_76725 = 0;
    char *mem_74685 = NULL;
    size_t mem_74686_cached_sizze_76726 = 0;
    char *mem_74686 = NULL;
    int64_t iterations = end - start;
    int64_t iter_75064 = start;
    
    if (mem_74685_cached_sizze_76725 < (size_t) bytes_70252) {
        mem_74685 = realloc(mem_74685, bytes_70252);
        mem_74685_cached_sizze_76725 = bytes_70252;
    }
    if (mem_74686_cached_sizze_76726 < (size_t) bytes_70252) {
        mem_74686 = realloc(mem_74686, bytes_70252);
        mem_74686_cached_sizze_76726 = bytes_70252;
    }
    for (; iter_75064 < end; iter_75064++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_75164 = n_m_64039;
        int64_t gtid_67753 = iter_75064;
        int64_t remnant_75165 = iter_75064 - gtid_67753;
        int64_t min_arg_74586 = mul64(jump_64032, gtid_67753);
        int64_t min_res_74587 = smin64(i_64040, min_arg_74586);
        int64_t defunc_0_g_res_74588 = add64((int64_t) 1, min_res_74587);
        bool nearest_idx_74589;
        int64_t nearest_idx_74590;
        int64_t nearest_idx_74591;
        bool loop_while_75065;
        int64_t low_75066;
        int64_t high_75067;
        
        loop_while_75065 = x_64041;
        low_75066 = (int64_t) 0;
        high_75067 = i_64040;
        while (loop_while_75065) {
            int64_t x_75068 = add64(low_75066, high_75067);
            int64_t mid_75069 = sdiv64(x_75068, (int64_t) 2);
            bool x_75070 = sle64((int64_t) 0, mid_75069);
            bool y_75071 = slt64(mid_75069, n_64028);
            bool bounds_check_75072 = x_75070 && y_75071;
            bool index_certs_75073;
            
            if (!bounds_check_75072) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_75069,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_75074 = ((int64_t *) mem_70248.mem)[mid_75069];
            bool cond_75075 = sle64(defunc_0_g_res_74588, x_75074);
            int64_t loopres_75076;
            int64_t loopres_75077;
            
            if (cond_75075) {
                int64_t loopres_t_res_75078 = sub64(mid_75069, (int64_t) 1);
                
                loopres_75076 = low_75066;
                loopres_75077 = loopres_t_res_75078;
            } else {
                int64_t loopres_f_res_75079 = add64((int64_t) 1, mid_75069);
                
                loopres_75076 = loopres_f_res_75079;
                loopres_75077 = high_75067;
            }
            
            bool loop_cond_75080 = sle64(loopres_75076, loopres_75077);
            bool loop_while_tmp_75166 = loop_cond_75080;
            int64_t low_tmp_75167 = loopres_75076;
            int64_t high_tmp_75168 = loopres_75077;
            
            loop_while_75065 = loop_while_tmp_75166;
            low_75066 = low_tmp_75167;
            high_75067 = high_tmp_75168;
        }
        nearest_idx_74589 = loop_while_75065;
        nearest_idx_74590 = low_75066;
        nearest_idx_74591 = high_75067;
        
        int64_t max_arg_74608 = sub64(nearest_idx_74590, min_res_64046);
        int64_t max_res_74609 = smax64((int64_t) 0, max_arg_74608);
        int64_t j_74610 = add64(min_res_64046, max_res_74609);
        int64_t i_p_m_t_s_74611 = add64(m_64052, max_res_74609);
        bool zzero_leq_i_p_m_t_s_74612 = sle64((int64_t) 0, i_p_m_t_s_74611);
        bool i_p_m_t_s_leq_w_74613 = slt64(i_p_m_t_s_74611, n_64028);
        bool zzero_lte_i_74614 = sle64((int64_t) 0, max_res_74609);
        bool i_lte_j_74615 = sle64(max_res_74609, j_74610);
        bool y_74616 = i_p_m_t_s_leq_w_74613 && zzero_lte_i_74614;
        bool y_74617 = zzero_leq_i_p_m_t_s_74612 && y_74616;
        bool y_74618 = i_lte_j_74615 && y_74617;
        bool forwards_ok_74619 = zzero_lte_i_74614 && y_74618;
        bool ok_or_empty_74620 = empty_slice_64051 || forwards_ok_74619;
        bool index_certs_74621;
        
        if (!ok_or_empty_74620) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_74609, ":",
                          (long long) j_74610,
                          "] out of bounds for array of shape [",
                          (long long) n_64028, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_74622;
        int64_t flat_tid_67754 = (int64_t) 0;
        int32_t num_tasks_75169;
        struct futhark_mc_task_76727 futhark_mc_task_76727;
        
        futhark_mc_task_76727.ctx = ctx;
        futhark_mc_task_76727.free_mem_70251 = mem_70251.mem;
        futhark_mc_task_76727.free_defunc_0_g_res_74588 = defunc_0_g_res_74588;
        futhark_mc_task_76727.free_max_res_74609 = max_res_74609;
        futhark_mc_task_76727.retval_defunc_2_reduce_res_74622 =
            &defunc_2_reduce_res_74622;
        
        struct scheduler_segop futhark_mc_task_76727_task;
        
        futhark_mc_task_76727_task.args = &futhark_mc_task_76727;
        futhark_mc_task_76727_task.top_level_fn = futhark_mc_segred_task_76728;
        futhark_mc_task_76727_task.name = "futhark_mc_segred_task_76728";
        futhark_mc_task_76727_task.iterations = min_res_64046;
        futhark_mc_task_76727_task.task_time =
            &ctx->futhark_mc_segred_task_76728_total_time;
        futhark_mc_task_76727_task.task_iter =
            &ctx->futhark_mc_segred_task_76728_total_iter;
        futhark_mc_task_76727_task.sched = STATIC;
        futhark_mc_task_76727_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76728_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76727_task);
        
        if (futhark_mc_segred_task_76728_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_74630;
        int64_t idx_74631;
        int64_t idx_74632;
        int64_t idx_74633;
        int64_t best_idx_75089;
        int64_t last_idx_75090;
        int64_t best_sum_75091;
        int64_t curr_sum_75092;
        
        best_idx_75089 = max_res_74609;
        last_idx_75090 = max_res_74609;
        best_sum_75091 = defunc_2_reduce_res_74622;
        curr_sum_75092 = defunc_2_reduce_res_74622;
        for (int64_t j_75088 = 0; j_75088 < min_res_64046; j_75088++) {
            int64_t new_idx_75093 = add64(max_res_74609, j_75088);
            int64_t x_75094 = add64(min_res_64046, new_idx_75093);
            bool cond_75095 = slt64(last_res_67932, x_75094);
            int64_t new_sum_75096;
            
            if (cond_75095) {
                new_sum_75096 = (int64_t) 9223372036854775807;
            } else {
                bool x_75097 = sle64((int64_t) 0, last_idx_75090);
                bool y_75098 = slt64(last_idx_75090, n_64028);
                bool bounds_check_75099 = x_75097 && y_75098;
                bool index_certs_75100;
                
                if (!bounds_check_75099) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_75090,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_75101 = ((int64_t *) mem_70251.mem)[last_idx_75090];
                int64_t binop_p_75102 = sub64(defunc_0_g_res_74588, y_75101);
                int64_t defunc_0_f_res_75103 = abs64(binop_p_75102);
                int64_t x_75104 = sub64(curr_sum_75092, defunc_0_f_res_75103);
                int64_t min_arg_75105 = add64(min_res_64046, last_idx_75090);
                int64_t min_res_75106 = smin64(i_64040, min_arg_75105);
                bool x_75107 = sle64((int64_t) 0, min_res_75106);
                bool y_75108 = slt64(min_res_75106, n_64028);
                bool bounds_check_75109 = x_75107 && y_75108;
                bool index_certs_75110;
                
                if (!bounds_check_75109) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_75106,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_75111 = ((int64_t *) mem_70251.mem)[min_res_75106];
                int64_t binop_p_75112 = sub64(defunc_0_g_res_74588, y_75111);
                int64_t defunc_0_f_res_75113 = abs64(binop_p_75112);
                int64_t new_sum_f_res_75114 = add64(x_75104,
                                                    defunc_0_f_res_75113);
                
                new_sum_75096 = new_sum_f_res_75114;
            }
            
            bool cond_75115 = sle64(new_sum_75096, best_sum_75091);
            int64_t loopres_75116;
            
            if (cond_75115) {
                loopres_75116 = new_idx_75093;
            } else {
                loopres_75116 = best_idx_75089;
            }
            
            int64_t loopres_75117;
            
            if (cond_75115) {
                loopres_75117 = new_sum_75096;
            } else {
                loopres_75117 = best_sum_75091;
            }
            
            int64_t best_idx_tmp_75178 = loopres_75116;
            int64_t last_idx_tmp_75179 = new_idx_75093;
            int64_t best_sum_tmp_75180 = loopres_75117;
            int64_t curr_sum_tmp_75181 = new_sum_75096;
            
            best_idx_75089 = best_idx_tmp_75178;
            last_idx_75090 = last_idx_tmp_75179;
            best_sum_75091 = best_sum_tmp_75180;
            curr_sum_75092 = curr_sum_tmp_75181;
        }
        idx_74630 = best_idx_75089;
        idx_74631 = last_idx_75090;
        idx_74632 = best_sum_75091;
        idx_74633 = curr_sum_75092;
        
        int64_t min_res_74664 = smin64(min_arg_67944, idx_74630);
        int64_t x_74665 = add64(min_res_64046, min_res_74664);
        int64_t r_74666 = sub64(x_74665, (int64_t) 1);
        bool x_74667 = sle64((int64_t) 0, r_74666);
        bool y_74668 = slt64(r_74666, n_64028);
        bool bounds_check_74669 = x_74667 && y_74668;
        bool index_certs_74670;
        
        if (!bounds_check_74669) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_74666,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_74671 = ((int64_t *) mem_70242.mem)[r_74666];
        int64_t abs_arg_74672 = sub64(x_74671, min_res_74587);
        int64_t abs_res_74673 = abs64(abs_arg_74672);
        bool x_74674 = sle64((int64_t) 0, min_res_74664);
        bool y_74675 = slt64(min_res_74664, n_64028);
        bool bounds_check_74676 = x_74674 && y_74675;
        bool index_certs_74677;
        
        if (!bounds_check_74676) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_74664,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_74678 = ((int64_t *) mem_70242.mem)[min_res_74664];
        int64_t abs_arg_74679 = sub64(x_74678, min_res_74587);
        int64_t abs_res_74680 = abs64(abs_arg_74679);
        int64_t max_res_74681 = smax64(abs_res_74673, abs_res_74680);
        float defunc_0_f_res_74682 = sitofp_i64_f32(max_res_74681);
        float defunc_1_f_res_74683 = max_res_67948 + defunc_0_f_res_74682;
        float defunc_0_f_res_74684 = sitofp_i64_f32(min_res_74587);
        float defunc_2_reduce_res_74687;
        float defunc_2_reduce_res_74688;
        float defunc_2_reduce_res_74689;
        int64_t flat_tid_67756 = (int64_t) 0;
        int32_t num_tasks_75182;
        struct futhark_mc_task_76732 futhark_mc_task_76732;
        
        futhark_mc_task_76732.ctx = ctx;
        futhark_mc_task_76732.free_last_res_67932 = last_res_67932;
        futhark_mc_task_76732.free_mem_70245 = mem_70245.mem;
        futhark_mc_task_76732.free_mem_70254 = mem_70254.mem;
        futhark_mc_task_76732.free_min_res_74664 = min_res_74664;
        futhark_mc_task_76732.free_defunc_1_f_res_74683 = defunc_1_f_res_74683;
        futhark_mc_task_76732.free_defunc_0_f_res_74684 = defunc_0_f_res_74684;
        futhark_mc_task_76732.retval_defunc_2_reduce_res_74687 =
            &defunc_2_reduce_res_74687;
        futhark_mc_task_76732.retval_defunc_2_reduce_res_74688 =
            &defunc_2_reduce_res_74688;
        futhark_mc_task_76732.retval_defunc_2_reduce_res_74689 =
            &defunc_2_reduce_res_74689;
        futhark_mc_task_76732.retval_mem_74685 = mem_74685;
        futhark_mc_task_76732.retval_mem_74686 = mem_74686;
        
        struct scheduler_segop futhark_mc_task_76732_task;
        
        futhark_mc_task_76732_task.args = &futhark_mc_task_76732;
        futhark_mc_task_76732_task.top_level_fn = futhark_mc_segred_task_76733;
        futhark_mc_task_76732_task.name = "futhark_mc_segred_task_76733";
        futhark_mc_task_76732_task.iterations = q_64030;
        futhark_mc_task_76732_task.task_time =
            &ctx->futhark_mc_segred_task_76733_total_time;
        futhark_mc_task_76732_task.task_iter =
            &ctx->futhark_mc_segred_task_76733_total_iter;
        futhark_mc_task_76732_task.sched = STATIC;
        futhark_mc_task_76732_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76733_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76732_task);
        
        if (futhark_mc_segred_task_76733_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_74718 = defunc_2_reduce_res_74687 * defunc_2_reduce_res_74689;
        float y_74719 = defunc_2_reduce_res_74688 * defunc_2_reduce_res_74688;
        float y_74720 = x_74718 - y_74719;
        float det1_74721 = 1.0F / y_74720;
        float a11_74722 = defunc_2_reduce_res_74689 * det1_74721;
        float negate_arg_74723 = defunc_2_reduce_res_74688 * det1_74721;
        float b11_74724 = 0.0F - negate_arg_74723;
        float c11_74725 = defunc_2_reduce_res_74687 * det1_74721;
        float defunc_2_reduce_res_74726;
        float defunc_2_reduce_res_74727;
        int64_t flat_tid_67758 = (int64_t) 0;
        int32_t num_tasks_75203;
        struct futhark_mc_task_76739 futhark_mc_task_76739;
        
        futhark_mc_task_76739.ctx = ctx;
        futhark_mc_task_76739.free_last_res_67932 = last_res_67932;
        futhark_mc_task_76739.free_mem_70239 = mem_70239.mem;
        futhark_mc_task_76739.free_min_res_74664 = min_res_74664;
        futhark_mc_task_76739.free_mem_74685 = mem_74685;
        futhark_mc_task_76739.free_mem_74686 = mem_74686;
        futhark_mc_task_76739.free_a11_74722 = a11_74722;
        futhark_mc_task_76739.free_b11_74724 = b11_74724;
        futhark_mc_task_76739.free_c11_74725 = c11_74725;
        futhark_mc_task_76739.retval_defunc_2_reduce_res_74726 =
            &defunc_2_reduce_res_74726;
        futhark_mc_task_76739.retval_defunc_2_reduce_res_74727 =
            &defunc_2_reduce_res_74727;
        
        struct scheduler_segop futhark_mc_task_76739_task;
        
        futhark_mc_task_76739_task.args = &futhark_mc_task_76739;
        futhark_mc_task_76739_task.top_level_fn = futhark_mc_segred_task_76740;
        futhark_mc_task_76739_task.name = "futhark_mc_segred_task_76740";
        futhark_mc_task_76739_task.iterations = q_64030;
        futhark_mc_task_76739_task.task_time =
            &ctx->futhark_mc_segred_task_76740_total_time;
        futhark_mc_task_76739_task.task_iter =
            &ctx->futhark_mc_segred_task_76740_total_iter;
        futhark_mc_task_76739_task.sched = STATIC;
        futhark_mc_task_76739_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76740_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76739_task);
        
        if (futhark_mc_segred_task_76740_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_70293.mem)[gtid_67753] = defunc_2_reduce_res_74726;
        ((float *) mem_70296.mem)[gtid_67753] = defunc_2_reduce_res_74727;
    }
    
  cleanup:
    { }
    free(mem_74685);
    free(mem_74686);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76724_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76724_end -
                 futhark_mc_segmap_parloop_76724_start;
        
        ctx->futhark_mc_segmap_parloop_76724_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76724_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76724_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76722(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67752 = tid;
    int num_tasks_74945 = info.nsubtasks;
    struct futhark_mc_task_76716 *futhark_mc_task_76716 =
                                 (struct futhark_mc_task_76716 *) args;
    struct futhark_context *ctx = futhark_mc_task_76716->ctx;
    uint64_t futhark_mc_segmap_nested_task_76722_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76722_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76716->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76716->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76716->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76716->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76716->free_i_64040;
    bool x_64041 = futhark_mc_task_76716->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76716->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76716->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76716->free_m_64052;
    int64_t last_res_67932 = futhark_mc_task_76716->free_last_res_67932;
    int64_t min_arg_67944 = futhark_mc_task_76716->free_min_arg_67944;
    float max_res_67948 = futhark_mc_task_76716->free_max_res_67948;
    struct memblock mem_70239 = {.desc ="mem_70239", .mem =
                                 futhark_mc_task_76716->free_mem_70239, .size =
                                 0, .references =NULL};
    struct memblock mem_70242 = {.desc ="mem_70242", .mem =
                                 futhark_mc_task_76716->free_mem_70242, .size =
                                 0, .references =NULL};
    struct memblock mem_70245 = {.desc ="mem_70245", .mem =
                                 futhark_mc_task_76716->free_mem_70245, .size =
                                 0, .references =NULL};
    struct memblock mem_70248 = {.desc ="mem_70248", .mem =
                                 futhark_mc_task_76716->free_mem_70248, .size =
                                 0, .references =NULL};
    struct memblock mem_70251 = {.desc ="mem_70251", .mem =
                                 futhark_mc_task_76716->free_mem_70251, .size =
                                 0, .references =NULL};
    int64_t bytes_70252 = futhark_mc_task_76716->free_bytes_70252;
    struct memblock mem_70254 = {.desc ="mem_70254", .mem =
                                 futhark_mc_task_76716->free_mem_70254, .size =
                                 0, .references =NULL};
    struct memblock mem_70293 = {.desc ="mem_70293", .mem =
                                 futhark_mc_task_76716->free_mem_70293, .size =
                                 0, .references =NULL};
    struct memblock mem_70296 = {.desc ="mem_70296", .mem =
                                 futhark_mc_task_76716->free_mem_70296, .size =
                                 0, .references =NULL};
    int64_t iter_75064;
    struct futhark_mc_segmap_parloop_struct_76723
    futhark_mc_segmap_parloop_struct_76723;
    
    futhark_mc_segmap_parloop_struct_76723.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76723.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76723.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76723.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76723.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76723.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76723.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76723.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76723.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76723.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76723.free_last_res_67932 = last_res_67932;
    futhark_mc_segmap_parloop_struct_76723.free_min_arg_67944 = min_arg_67944;
    futhark_mc_segmap_parloop_struct_76723.free_max_res_67948 = max_res_67948;
    futhark_mc_segmap_parloop_struct_76723.free_mem_70239 = mem_70239.mem;
    futhark_mc_segmap_parloop_struct_76723.free_mem_70242 = mem_70242.mem;
    futhark_mc_segmap_parloop_struct_76723.free_mem_70245 = mem_70245.mem;
    futhark_mc_segmap_parloop_struct_76723.free_mem_70248 = mem_70248.mem;
    futhark_mc_segmap_parloop_struct_76723.free_mem_70251 = mem_70251.mem;
    futhark_mc_segmap_parloop_struct_76723.free_bytes_70252 = bytes_70252;
    futhark_mc_segmap_parloop_struct_76723.free_mem_70254 = mem_70254.mem;
    futhark_mc_segmap_parloop_struct_76723.free_mem_70293 = mem_70293.mem;
    futhark_mc_segmap_parloop_struct_76723.free_mem_70296 = mem_70296.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76724_task;
    
    futhark_mc_segmap_parloop_76724_task.name =
        "futhark_mc_segmap_parloop_76724";
    futhark_mc_segmap_parloop_76724_task.fn = futhark_mc_segmap_parloop_76724;
    futhark_mc_segmap_parloop_76724_task.args =
        &futhark_mc_segmap_parloop_struct_76723;
    futhark_mc_segmap_parloop_76724_task.iterations = iterations;
    futhark_mc_segmap_parloop_76724_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76724_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76724_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76724_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76724_task);
    
    if (futhark_mc_segmap_parloop_76724_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76724_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76724_total_end -
                 futhark_mc_segmap_parloop_76724_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76724_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76724_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76724_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76722_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76722_end -
                 futhark_mc_segmap_nested_task_76722_start;
        
        ctx->futhark_mc_segmap_nested_task_76722_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76722_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76722_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76687(void *args, int64_t start,
                                           int64_t end, int flat_tid_67740,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76686
    *futhark_mc_segmap_parloop_struct_76686 =
    (struct futhark_mc_segmap_parloop_struct_76686 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76686->ctx;
    uint64_t futhark_mc_segmap_parloop_76687_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76687_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_segmap_parloop_struct_76686->free_m_64027;
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76686->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76686->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76686->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76686->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76686->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76686->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76686->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76686->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76686->free_m_64052;
    float i64_res_64053 =
          futhark_mc_segmap_parloop_struct_76686->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76686->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_70234 =
            futhark_mc_segmap_parloop_struct_76686->free_bytes_70234;
    int64_t bytes_70237 =
            futhark_mc_segmap_parloop_struct_76686->free_bytes_70237;
    int64_t bytes_70252 =
            futhark_mc_segmap_parloop_struct_76686->free_bytes_70252;
    int64_t bytes_70291 =
            futhark_mc_segmap_parloop_struct_76686->free_bytes_70291;
    struct memblock mem_70465 = {.desc ="mem_70465", .mem =
                                 futhark_mc_segmap_parloop_struct_76686->free_mem_70465,
                                 .size =0, .references =NULL};
    struct memblock mem_70469 = {.desc ="mem_70469", .mem =
                                 futhark_mc_segmap_parloop_struct_76686->free_mem_70469,
                                 .size =0, .references =NULL};
    size_t mem_70236_cached_sizze_76688 = 0;
    char *mem_70236 = NULL;
    size_t mem_70239_cached_sizze_76689 = 0;
    char *mem_70239 = NULL;
    size_t mem_70242_cached_sizze_76690 = 0;
    char *mem_70242 = NULL;
    size_t mem_70245_cached_sizze_76691 = 0;
    char *mem_70245 = NULL;
    size_t mem_70248_cached_sizze_76692 = 0;
    char *mem_70248 = NULL;
    size_t mem_70251_cached_sizze_76693 = 0;
    char *mem_70251 = NULL;
    size_t mem_70254_cached_sizze_76694 = 0;
    char *mem_70254 = NULL;
    size_t mem_70293_cached_sizze_76695 = 0;
    char *mem_70293 = NULL;
    size_t mem_70296_cached_sizze_76696 = 0;
    char *mem_70296 = NULL;
    int64_t iterations = end - start;
    int64_t iter_74565 = start;
    
    if (mem_70236_cached_sizze_76688 < (size_t) bytes_70234) {
        mem_70236 = realloc(mem_70236, bytes_70234);
        mem_70236_cached_sizze_76688 = bytes_70234;
    }
    if (mem_70239_cached_sizze_76689 < (size_t) bytes_70237) {
        mem_70239 = realloc(mem_70239, bytes_70237);
        mem_70239_cached_sizze_76689 = bytes_70237;
    }
    if (mem_70242_cached_sizze_76690 < (size_t) bytes_70234) {
        mem_70242 = realloc(mem_70242, bytes_70234);
        mem_70242_cached_sizze_76690 = bytes_70234;
    }
    if (mem_70245_cached_sizze_76691 < (size_t) bytes_70237) {
        mem_70245 = realloc(mem_70245, bytes_70237);
        mem_70245_cached_sizze_76691 = bytes_70237;
    }
    if (mem_70248_cached_sizze_76692 < (size_t) bytes_70234) {
        mem_70248 = realloc(mem_70248, bytes_70234);
        mem_70248_cached_sizze_76692 = bytes_70234;
    }
    if (mem_70251_cached_sizze_76693 < (size_t) bytes_70234) {
        mem_70251 = realloc(mem_70251, bytes_70234);
        mem_70251_cached_sizze_76693 = bytes_70234;
    }
    if (mem_70254_cached_sizze_76694 < (size_t) bytes_70252) {
        mem_70254 = realloc(mem_70254, bytes_70252);
        mem_70254_cached_sizze_76694 = bytes_70252;
    }
    if (mem_70293_cached_sizze_76695 < (size_t) bytes_70291) {
        mem_70293 = realloc(mem_70293, bytes_70291);
        mem_70293_cached_sizze_76695 = bytes_70291;
    }
    if (mem_70296_cached_sizze_76696 < (size_t) bytes_70291) {
        mem_70296 = realloc(mem_70296, bytes_70291);
        mem_70296_cached_sizze_76696 = bytes_70291;
    }
    for (; iter_74565 < end; iter_74565++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_74913 = m_64027;
        int64_t gtid_67741 = iter_74565;
        int64_t remnant_74914 = iter_74565 - gtid_67741;
        int64_t flat_tid_67742 = (int64_t) 0;
        int32_t num_tasks_74915;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_76697 futhark_mc_task_76697;
        
        futhark_mc_task_76697.ctx = ctx;
        futhark_mc_task_76697.free_n_64028 = n_64028;
        futhark_mc_task_76697.free_gtid_67741 = gtid_67741;
        futhark_mc_task_76697.free_Y_mem_69552 = Y_mem_69552.mem;
        futhark_mc_task_76697.free_mem_70236 = mem_70236;
        
        struct scheduler_segop futhark_mc_task_76697_task;
        
        futhark_mc_task_76697_task.args = &futhark_mc_task_76697;
        futhark_mc_task_76697_task.top_level_fn = futhark_mc_segscan_task_76698;
        futhark_mc_task_76697_task.name = "futhark_mc_segscan_task_76698";
        futhark_mc_task_76697_task.iterations = n_64028;
        futhark_mc_task_76697_task.task_time =
            &ctx->futhark_mc_segscan_task_76698_total_time;
        futhark_mc_task_76697_task.task_iter =
            &ctx->futhark_mc_segscan_task_76698_total_iter;
        futhark_mc_task_76697_task.sched = STATIC;
        futhark_mc_task_76697_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_76698_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76697_task);
        
        if (futhark_mc_segscan_task_76698_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_67932 = ((int64_t *) mem_70236)[i_64040];
        
        for (int64_t i_74929 = 0; i_74929 < n_64028; i_74929++) {
            ((float *) mem_70239)[i_74929] = 0.0F;
        }
        for (int64_t i_74930 = 0; i_74930 < n_64028; i_74930++) {
            ((int64_t *) mem_70242)[i_74930] = (int64_t) -1;
        }
        
        int64_t flat_tid_67744 = (int64_t) 0;
        int32_t num_tasks_74931;
        struct futhark_mc_task_76704 futhark_mc_task_76704;
        
        futhark_mc_task_76704.ctx = ctx;
        futhark_mc_task_76704.free_n_64028 = n_64028;
        futhark_mc_task_76704.free_gtid_67741 = gtid_67741;
        futhark_mc_task_76704.free_Y_mem_69552 = Y_mem_69552.mem;
        futhark_mc_task_76704.free_mem_70236 = mem_70236;
        futhark_mc_task_76704.free_mem_70239 = mem_70239;
        futhark_mc_task_76704.free_mem_70242 = mem_70242;
        
        struct scheduler_segop futhark_mc_task_76704_task;
        
        futhark_mc_task_76704_task.args = &futhark_mc_task_76704;
        futhark_mc_task_76704_task.top_level_fn = futhark_mc_segmap_task_76705;
        futhark_mc_task_76704_task.name = "futhark_mc_segmap_task_76705";
        futhark_mc_task_76704_task.iterations = n_64028;
        futhark_mc_task_76704_task.task_time =
            &ctx->futhark_mc_segmap_task_76705_total_time;
        futhark_mc_task_76704_task.task_iter =
            &ctx->futhark_mc_segmap_task_76705_total_iter;
        futhark_mc_task_76704_task.sched = STATIC;
        futhark_mc_task_76704_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76705_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76704_task);
        
        if (futhark_mc_segmap_task_76705_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_67944 = sub64(last_res_67932, min_res_64046);
        float i64_res_67945 = sitofp_i64_f32(last_res_67932);
        float x_67946 = i64_res_64053 - i64_res_67945;
        float max_arg_67947 = x_67946 / 2.0F;
        float max_res_67948 = fmax32(0.0F, max_arg_67947);
        int64_t flat_tid_67746 = (int64_t) 0;
        int32_t num_tasks_74937;
        struct futhark_mc_task_76708 futhark_mc_task_76708;
        
        futhark_mc_task_76708.ctx = ctx;
        futhark_mc_task_76708.free_n_64028 = n_64028;
        futhark_mc_task_76708.free_mem_70242 = mem_70242;
        futhark_mc_task_76708.free_mem_70245 = mem_70245;
        futhark_mc_task_76708.free_mem_70248 = mem_70248;
        futhark_mc_task_76708.free_mem_70251 = mem_70251;
        
        struct scheduler_segop futhark_mc_task_76708_task;
        
        futhark_mc_task_76708_task.args = &futhark_mc_task_76708;
        futhark_mc_task_76708_task.top_level_fn = futhark_mc_segmap_task_76709;
        futhark_mc_task_76708_task.name = "futhark_mc_segmap_task_76709";
        futhark_mc_task_76708_task.iterations = n_64028;
        futhark_mc_task_76708_task.task_time =
            &ctx->futhark_mc_segmap_task_76709_total_time;
        futhark_mc_task_76708_task.task_iter =
            &ctx->futhark_mc_segmap_task_76709_total_iter;
        futhark_mc_task_76708_task.sched = STATIC;
        futhark_mc_task_76708_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76709_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76708_task);
        
        if (futhark_mc_segmap_task_76709_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_67748 = (int64_t) 0;
        int32_t num_tasks_74941;
        struct futhark_mc_task_76712 futhark_mc_task_76712;
        
        futhark_mc_task_76712.ctx = ctx;
        futhark_mc_task_76712.free_q_64030 = q_64030;
        futhark_mc_task_76712.free_last_res_67932 = last_res_67932;
        futhark_mc_task_76712.free_mem_70254 = mem_70254;
        
        struct scheduler_segop futhark_mc_task_76712_task;
        
        futhark_mc_task_76712_task.args = &futhark_mc_task_76712;
        futhark_mc_task_76712_task.top_level_fn = futhark_mc_segmap_task_76713;
        futhark_mc_task_76712_task.name = "futhark_mc_segmap_task_76713";
        futhark_mc_task_76712_task.iterations = q_64030;
        futhark_mc_task_76712_task.task_time =
            &ctx->futhark_mc_segmap_task_76713_total_time;
        futhark_mc_task_76712_task.task_iter =
            &ctx->futhark_mc_segmap_task_76713_total_iter;
        futhark_mc_task_76712_task.sched = STATIC;
        futhark_mc_task_76712_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76713_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76712_task);
        
        if (futhark_mc_segmap_task_76713_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_67750 = (int64_t) 0;
        int32_t num_tasks_74945;
        int64_t flat_tid_67752 = (int64_t) 0;
        struct futhark_mc_task_76716 futhark_mc_task_76716;
        
        futhark_mc_task_76716.ctx = ctx;
        futhark_mc_task_76716.free_n_64028 = n_64028;
        futhark_mc_task_76716.free_q_64030 = q_64030;
        futhark_mc_task_76716.free_jump_64032 = jump_64032;
        futhark_mc_task_76716.free_n_m_64039 = n_m_64039;
        futhark_mc_task_76716.free_i_64040 = i_64040;
        futhark_mc_task_76716.free_x_64041 = x_64041;
        futhark_mc_task_76716.free_min_res_64046 = min_res_64046;
        futhark_mc_task_76716.free_empty_slice_64051 = empty_slice_64051;
        futhark_mc_task_76716.free_m_64052 = m_64052;
        futhark_mc_task_76716.free_last_res_67932 = last_res_67932;
        futhark_mc_task_76716.free_min_arg_67944 = min_arg_67944;
        futhark_mc_task_76716.free_max_res_67948 = max_res_67948;
        futhark_mc_task_76716.free_mem_70239 = mem_70239;
        futhark_mc_task_76716.free_mem_70242 = mem_70242;
        futhark_mc_task_76716.free_mem_70245 = mem_70245;
        futhark_mc_task_76716.free_mem_70248 = mem_70248;
        futhark_mc_task_76716.free_mem_70251 = mem_70251;
        futhark_mc_task_76716.free_bytes_70252 = bytes_70252;
        futhark_mc_task_76716.free_mem_70254 = mem_70254;
        futhark_mc_task_76716.free_mem_70293 = mem_70293;
        futhark_mc_task_76716.free_mem_70296 = mem_70296;
        
        struct scheduler_segop futhark_mc_task_76716_task;
        
        futhark_mc_task_76716_task.args = &futhark_mc_task_76716;
        futhark_mc_task_76716_task.top_level_fn = futhark_mc_segmap_task_76717;
        futhark_mc_task_76716_task.name = "futhark_mc_segmap_task_76717";
        futhark_mc_task_76716_task.iterations = n_m_64039;
        futhark_mc_task_76716_task.task_time =
            &ctx->futhark_mc_segmap_task_76717_total_time;
        futhark_mc_task_76716_task.task_iter =
            &ctx->futhark_mc_segmap_task_76717_total_iter;
        futhark_mc_task_76716_task.sched = DYNAMIC;
        futhark_mc_task_76716_task.nested_fn =
            futhark_mc_segmap_nested_task_76722;
        
        int futhark_mc_segmap_task_76717_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76716_task);
        
        if (futhark_mc_segmap_task_76717_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_70465.mem + gtid_67741 * n_m_64039 * (int64_t) 4,
                mem_70293 + (int64_t) 0, n_m_64039 * (int64_t) 4);
        memmove(mem_70469.mem + gtid_67741 * n_m_64039 * (int64_t) 4,
                mem_70296 + (int64_t) 0, n_m_64039 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70236);
    free(mem_70239);
    free(mem_70242);
    free(mem_70245);
    free(mem_70248);
    free(mem_70251);
    free(mem_70254);
    free(mem_70293);
    free(mem_70296);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76687_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76687_end -
                 futhark_mc_segmap_parloop_76687_start;
        
        ctx->futhark_mc_segmap_parloop_76687_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76687_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76687_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76685(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_67740 = tid;
    int num_tasks_74328 = info.nsubtasks;
    struct futhark_mc_task_76670 *futhark_mc_task_76670 =
                                 (struct futhark_mc_task_76670 *) args;
    struct futhark_context *ctx = futhark_mc_task_76670->ctx;
    uint64_t futhark_mc_segmap_nested_task_76685_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76685_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_task_76670->free_m_64027;
    int64_t n_64028 = futhark_mc_task_76670->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76670->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76670->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76670->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76670->free_i_64040;
    bool x_64041 = futhark_mc_task_76670->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76670->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76670->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76670->free_m_64052;
    float i64_res_64053 = futhark_mc_task_76670->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76670->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_70234 = futhark_mc_task_76670->free_bytes_70234;
    int64_t bytes_70237 = futhark_mc_task_76670->free_bytes_70237;
    int64_t bytes_70252 = futhark_mc_task_76670->free_bytes_70252;
    int64_t bytes_70291 = futhark_mc_task_76670->free_bytes_70291;
    struct memblock mem_70465 = {.desc ="mem_70465", .mem =
                                 futhark_mc_task_76670->free_mem_70465, .size =
                                 0, .references =NULL};
    struct memblock mem_70469 = {.desc ="mem_70469", .mem =
                                 futhark_mc_task_76670->free_mem_70469, .size =
                                 0, .references =NULL};
    int64_t iter_74565;
    struct futhark_mc_segmap_parloop_struct_76686
    futhark_mc_segmap_parloop_struct_76686;
    
    futhark_mc_segmap_parloop_struct_76686.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76686.free_m_64027 = m_64027;
    futhark_mc_segmap_parloop_struct_76686.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76686.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76686.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76686.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76686.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76686.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76686.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76686.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76686.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76686.free_i64_res_64053 = i64_res_64053;
    futhark_mc_segmap_parloop_struct_76686.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76686.free_bytes_70234 = bytes_70234;
    futhark_mc_segmap_parloop_struct_76686.free_bytes_70237 = bytes_70237;
    futhark_mc_segmap_parloop_struct_76686.free_bytes_70252 = bytes_70252;
    futhark_mc_segmap_parloop_struct_76686.free_bytes_70291 = bytes_70291;
    futhark_mc_segmap_parloop_struct_76686.free_mem_70465 = mem_70465.mem;
    futhark_mc_segmap_parloop_struct_76686.free_mem_70469 = mem_70469.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76687_task;
    
    futhark_mc_segmap_parloop_76687_task.name =
        "futhark_mc_segmap_parloop_76687";
    futhark_mc_segmap_parloop_76687_task.fn = futhark_mc_segmap_parloop_76687;
    futhark_mc_segmap_parloop_76687_task.args =
        &futhark_mc_segmap_parloop_struct_76686;
    futhark_mc_segmap_parloop_76687_task.iterations = iterations;
    futhark_mc_segmap_parloop_76687_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76687_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76687_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76687_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76687_task);
    
    if (futhark_mc_segmap_parloop_76687_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76687_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76687_total_end -
                 futhark_mc_segmap_parloop_76687_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76687_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76687_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76687_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76685_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76685_end -
                 futhark_mc_segmap_nested_task_76685_start;
        
        ctx->futhark_mc_segmap_nested_task_76685_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76685_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76685_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76745 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_70470;
    int64_t free_bytes_70473;
    int64_t free_bytes_70488;
    int64_t free_bytes_70563;
    char *free_mem_70767;
    char *free_mem_70771;
};
struct futhark_mc_segmap_parloop_struct_76747 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_70470;
    int64_t free_bytes_70473;
    int64_t free_bytes_70488;
    int64_t free_bytes_70563;
    char *free_mem_70767;
    char *free_mem_70771;
};
static int futhark_mc_segmap_parloop_76748(void *args, int64_t start,
                                           int64_t end, int flat_tid_68289,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76747
    *futhark_mc_segmap_parloop_struct_76747 =
    (struct futhark_mc_segmap_parloop_struct_76747 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76747->ctx;
    uint64_t futhark_mc_segmap_parloop_76748_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76748_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_segmap_parloop_struct_76747->free_m_64027;
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76747->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76747->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76747->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76747->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76747->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76747->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76747->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76747->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76747->free_m_64052;
    float i64_res_64053 =
          futhark_mc_segmap_parloop_struct_76747->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76747->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_70470 =
            futhark_mc_segmap_parloop_struct_76747->free_bytes_70470;
    int64_t bytes_70473 =
            futhark_mc_segmap_parloop_struct_76747->free_bytes_70473;
    int64_t bytes_70488 =
            futhark_mc_segmap_parloop_struct_76747->free_bytes_70488;
    int64_t bytes_70563 =
            futhark_mc_segmap_parloop_struct_76747->free_bytes_70563;
    struct memblock mem_70767 = {.desc ="mem_70767", .mem =
                                 futhark_mc_segmap_parloop_struct_76747->free_mem_70767,
                                 .size =0, .references =NULL};
    struct memblock mem_70771 = {.desc ="mem_70771", .mem =
                                 futhark_mc_segmap_parloop_struct_76747->free_mem_70771,
                                 .size =0, .references =NULL};
    size_t mem_70571_cached_sizze_76749 = 0;
    char *mem_70571 = NULL;
    size_t mem_70586_cached_sizze_76750 = 0;
    char *mem_70586 = NULL;
    size_t mem_70589_cached_sizze_76751 = 0;
    char *mem_70589 = NULL;
    size_t mem_70616_cached_sizze_76752 = 0;
    char *mem_70616 = NULL;
    size_t mem_70619_cached_sizze_76753 = 0;
    char *mem_70619 = NULL;
    size_t mem_70622_cached_sizze_76754 = 0;
    char *mem_70622 = NULL;
    size_t mem_70661_cached_sizze_76755 = 0;
    char *mem_70661 = NULL;
    size_t mem_70676_cached_sizze_76756 = 0;
    char *mem_70676 = NULL;
    size_t mem_70679_cached_sizze_76757 = 0;
    char *mem_70679 = NULL;
    size_t mem_70696_cached_sizze_76758 = 0;
    char *mem_70696 = NULL;
    size_t mem_70699_cached_sizze_76759 = 0;
    char *mem_70699 = NULL;
    size_t mem_70726_cached_sizze_76760 = 0;
    char *mem_70726 = NULL;
    size_t mem_70729_cached_sizze_76761 = 0;
    char *mem_70729 = NULL;
    int64_t iterations = end - start;
    int64_t iter_75219 = start;
    
    if (mem_70571_cached_sizze_76749 < (size_t) bytes_70470) {
        mem_70571 = realloc(mem_70571, bytes_70470);
        mem_70571_cached_sizze_76749 = bytes_70470;
    }
    if (mem_70586_cached_sizze_76750 < (size_t) bytes_70473) {
        mem_70586 = realloc(mem_70586, bytes_70473);
        mem_70586_cached_sizze_76750 = bytes_70473;
    }
    if (mem_70589_cached_sizze_76751 < (size_t) bytes_70470) {
        mem_70589 = realloc(mem_70589, bytes_70470);
        mem_70589_cached_sizze_76751 = bytes_70470;
    }
    if (mem_70616_cached_sizze_76752 < (size_t) bytes_70473) {
        mem_70616 = realloc(mem_70616, bytes_70473);
        mem_70616_cached_sizze_76752 = bytes_70473;
    }
    if (mem_70619_cached_sizze_76753 < (size_t) bytes_70470) {
        mem_70619 = realloc(mem_70619, bytes_70470);
        mem_70619_cached_sizze_76753 = bytes_70470;
    }
    if (mem_70622_cached_sizze_76754 < (size_t) bytes_70470) {
        mem_70622 = realloc(mem_70622, bytes_70470);
        mem_70622_cached_sizze_76754 = bytes_70470;
    }
    if (mem_70661_cached_sizze_76755 < (size_t) bytes_70488) {
        mem_70661 = realloc(mem_70661, bytes_70488);
        mem_70661_cached_sizze_76755 = bytes_70488;
    }
    if (mem_70676_cached_sizze_76756 < (size_t) bytes_70563) {
        mem_70676 = realloc(mem_70676, bytes_70563);
        mem_70676_cached_sizze_76756 = bytes_70563;
    }
    if (mem_70679_cached_sizze_76757 < (size_t) bytes_70563) {
        mem_70679 = realloc(mem_70679, bytes_70563);
        mem_70679_cached_sizze_76757 = bytes_70563;
    }
    if (mem_70696_cached_sizze_76758 < (size_t) bytes_70488) {
        mem_70696 = realloc(mem_70696, bytes_70488);
        mem_70696_cached_sizze_76758 = bytes_70488;
    }
    if (mem_70699_cached_sizze_76759 < (size_t) bytes_70488) {
        mem_70699 = realloc(mem_70699, bytes_70488);
        mem_70699_cached_sizze_76759 = bytes_70488;
    }
    if (mem_70726_cached_sizze_76760 < (size_t) bytes_70488) {
        mem_70726 = realloc(mem_70726, bytes_70488);
        mem_70726_cached_sizze_76760 = bytes_70488;
    }
    if (mem_70729_cached_sizze_76761 < (size_t) bytes_70488) {
        mem_70729 = realloc(mem_70729, bytes_70488);
        mem_70729_cached_sizze_76761 = bytes_70488;
    }
    for (; iter_75219 < end; iter_75219++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_75467 = m_64027;
        int64_t gtid_68290 = iter_75219;
        int64_t remnant_75468 = iter_75219 - gtid_68290;
        int64_t discard_69384;
        int64_t scanacc_75221 = (int64_t) 0;
        
        for (int64_t i_75220 = 0; i_75220 < n_64028; i_75220++) {
            float x_75223 = ((float *) Y_mem_69552.mem)[gtid_68290 * n_64028 +
                                                        i_75220];
            bool isnan_res_75224;
            
            isnan_res_75224 = futrts_isnan32(x_75223);
            
            bool defunc_0_p_res_75225 = !isnan_res_75224;
            int64_t defunc_0_f_res_75226 = btoi_bool_i64(defunc_0_p_res_75225);
            int64_t defunc_1_op_res_75227 = add64(defunc_0_f_res_75226,
                                                  scanacc_75221);
            
            ((int64_t *) mem_70571)[i_75220] = defunc_1_op_res_75227;
            
            int64_t scanacc_tmp_75469 = defunc_1_op_res_75227;
            
            scanacc_75221 = scanacc_tmp_75469;
        }
        discard_69384 = scanacc_75221;
        
        int64_t last_res_65201 = ((int64_t *) mem_70571)[i_64040];
        
        for (int64_t i_75471 = 0; i_75471 < n_64028; i_75471++) {
            ((float *) mem_70586)[i_75471] = 0.0F;
        }
        for (int64_t i_75472 = 0; i_75472 < n_64028; i_75472++) {
            ((int64_t *) mem_70589)[i_75472] = (int64_t) -1;
        }
        for (int64_t write_iter_75229 = 0; write_iter_75229 < n_64028;
             write_iter_75229++) {
            float write_iv_75232 = ((float *) Y_mem_69552.mem)[gtid_68290 *
                                                               n_64028 +
                                                               write_iter_75229];
            bool isnan_res_75233;
            
            isnan_res_75233 = futrts_isnan32(write_iv_75232);
            
            bool defunc_0_p_res_75234 = !isnan_res_75233;
            int64_t defunc_1_f_res_75235;
            
            if (defunc_0_p_res_75234) {
                int64_t write_iv_75236 =
                        ((int64_t *) mem_70571)[write_iter_75229];
                int64_t defunc_1_f_res_t_res_75237 = sub64(write_iv_75236,
                                                           (int64_t) 1);
                
                defunc_1_f_res_75235 = defunc_1_f_res_t_res_75237;
            } else {
                defunc_1_f_res_75235 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_75235) &&
                slt64(defunc_1_f_res_75235, n_64028)) {
                ((int64_t *) mem_70589)[defunc_1_f_res_75235] =
                    write_iter_75229;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_75235) &&
                slt64(defunc_1_f_res_75235, n_64028)) {
                memmove(mem_70586 + defunc_1_f_res_75235 * (int64_t) 4,
                        Y_mem_69552.mem + (gtid_68290 * n_64028 +
                                           write_iter_75229) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_65219 = sub64(last_res_65201, min_res_64046);
        float i64_res_65220 = sitofp_i64_f32(last_res_65201);
        float x_65221 = i64_res_64053 - i64_res_65220;
        float max_arg_65222 = x_65221 / 2.0F;
        float max_res_65223 = fmax32(0.0F, max_arg_65222);
        
        for (int64_t i_75241 = 0; i_75241 < n_64028; i_75241++) {
            int64_t x_75245 = ((int64_t *) mem_70589)[i_75241];
            int64_t defunc_0_f_res_75246 = add64((int64_t) 1, x_75245);
            bool cond_75247 = slt64(defunc_0_f_res_75246, (int64_t) 0);
            int64_t defunc_0_f_res_75248;
            
            if (cond_75247) {
                defunc_0_f_res_75248 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_75248 = defunc_0_f_res_75246;
            }
            
            float defunc_0_f_res_75249 = sitofp_i64_f32(x_75245);
            
            ((float *) mem_70616)[i_75241] = defunc_0_f_res_75249;
            ((int64_t *) mem_70619)[i_75241] = defunc_0_f_res_75248;
            ((int64_t *) mem_70622)[i_75241] = defunc_0_f_res_75246;
        }
        for (int64_t i_75253 = 0; i_75253 < q_64030; i_75253++) {
            bool cond_75255 = sle64(last_res_65201, i_75253);
            float defunc_0_f_res_75256;
            
            if (cond_75255) {
                defunc_0_f_res_75256 = 0.0F;
            } else {
                defunc_0_f_res_75256 = 1.0F;
            }
            ((float *) mem_70661)[i_75253] = defunc_0_f_res_75256;
        }
        for (int64_t i_75258 = 0; i_75258 < n_m_64039; i_75258++) {
            int64_t min_arg_75261 = mul64(jump_64032, i_75258);
            int64_t min_res_75262 = smin64(i_64040, min_arg_75261);
            int64_t defunc_0_g_res_75263 = add64((int64_t) 1, min_res_75262);
            bool nearest_idx_75264;
            int64_t nearest_idx_75265;
            int64_t nearest_idx_75266;
            bool loop_while_75267;
            int64_t low_75268;
            int64_t high_75269;
            
            loop_while_75267 = x_64041;
            low_75268 = (int64_t) 0;
            high_75269 = i_64040;
            while (loop_while_75267) {
                int64_t x_75270 = add64(low_75268, high_75269);
                int64_t mid_75271 = sdiv64(x_75270, (int64_t) 2);
                bool x_75272 = sle64((int64_t) 0, mid_75271);
                bool y_75273 = slt64(mid_75271, n_64028);
                bool bounds_check_75274 = x_75272 && y_75273;
                bool index_certs_75275;
                
                if (!bounds_check_75274) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_75271,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t x_75276 = ((int64_t *) mem_70619)[mid_75271];
                bool cond_75277 = sle64(defunc_0_g_res_75263, x_75276);
                int64_t loopres_75278;
                int64_t loopres_75279;
                
                if (cond_75277) {
                    int64_t loopres_t_res_75280 = sub64(mid_75271, (int64_t) 1);
                    
                    loopres_75278 = low_75268;
                    loopres_75279 = loopres_t_res_75280;
                } else {
                    int64_t loopres_f_res_75281 = add64((int64_t) 1, mid_75271);
                    
                    loopres_75278 = loopres_f_res_75281;
                    loopres_75279 = high_75269;
                }
                
                bool loop_cond_75282 = sle64(loopres_75278, loopres_75279);
                bool loop_while_tmp_75481 = loop_cond_75282;
                int64_t low_tmp_75482 = loopres_75278;
                int64_t high_tmp_75483 = loopres_75279;
                
                loop_while_75267 = loop_while_tmp_75481;
                low_75268 = low_tmp_75482;
                high_75269 = high_tmp_75483;
            }
            nearest_idx_75264 = loop_while_75267;
            nearest_idx_75265 = low_75268;
            nearest_idx_75266 = high_75269;
            
            int64_t max_arg_75283 = sub64(nearest_idx_75265, min_res_64046);
            int64_t max_res_75284 = smax64((int64_t) 0, max_arg_75283);
            int64_t j_75285 = add64(min_res_64046, max_res_75284);
            int64_t i_p_m_t_s_75286 = add64(m_64052, max_res_75284);
            bool zzero_leq_i_p_m_t_s_75287 = sle64((int64_t) 0,
                                                   i_p_m_t_s_75286);
            bool i_p_m_t_s_leq_w_75288 = slt64(i_p_m_t_s_75286, n_64028);
            bool zzero_lte_i_75289 = sle64((int64_t) 0, max_res_75284);
            bool i_lte_j_75290 = sle64(max_res_75284, j_75285);
            bool y_75291 = i_p_m_t_s_leq_w_75288 && zzero_lte_i_75289;
            bool y_75292 = zzero_leq_i_p_m_t_s_75287 && y_75291;
            bool y_75293 = i_lte_j_75290 && y_75292;
            bool forwards_ok_75294 = zzero_lte_i_75289 && y_75293;
            bool ok_or_empty_75295 = empty_slice_64051 || forwards_ok_75294;
            bool index_certs_75296;
            
            if (!ok_or_empty_75295) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_75284, ":",
                              (long long) j_75285,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_75297;
            int64_t redout_75299 = (int64_t) 0;
            
            for (int64_t i_75298 = 0; i_75298 < min_res_64046; i_75298++) {
                int64_t slice_75300 = max_res_75284 + i_75298;
                int64_t x_75301 = ((int64_t *) mem_70622)[slice_75300];
                int64_t abs_arg_75302 = sub64(x_75301, defunc_0_g_res_75263);
                int64_t abs_res_75303 = abs64(abs_arg_75302);
                int64_t defunc_1_op_res_75304 = add64(abs_res_75303,
                                                      redout_75299);
                int64_t redout_tmp_75484 = defunc_1_op_res_75304;
                
                redout_75299 = redout_tmp_75484;
            }
            defunc_2_reduce_res_75297 = redout_75299;
            
            int64_t idx_75305;
            int64_t idx_75306;
            int64_t idx_75307;
            int64_t idx_75308;
            int64_t best_idx_75310;
            int64_t last_idx_75311;
            int64_t best_sum_75312;
            int64_t curr_sum_75313;
            
            best_idx_75310 = max_res_75284;
            last_idx_75311 = max_res_75284;
            best_sum_75312 = defunc_2_reduce_res_75297;
            curr_sum_75313 = defunc_2_reduce_res_75297;
            for (int64_t j_75309 = 0; j_75309 < min_res_64046; j_75309++) {
                int64_t new_idx_75314 = add64(max_res_75284, j_75309);
                int64_t x_75315 = add64(min_res_64046, new_idx_75314);
                bool cond_75316 = slt64(last_res_65201, x_75315);
                int64_t new_sum_75317;
                
                if (cond_75316) {
                    new_sum_75317 = (int64_t) 9223372036854775807;
                } else {
                    bool x_75318 = sle64((int64_t) 0, last_idx_75311);
                    bool y_75319 = slt64(last_idx_75311, n_64028);
                    bool bounds_check_75320 = x_75318 && y_75319;
                    bool index_certs_75321;
                    
                    if (!bounds_check_75320) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_75311,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        return 1;
                    }
                    
                    int64_t y_75322 = ((int64_t *) mem_70622)[last_idx_75311];
                    int64_t binop_p_75323 = sub64(defunc_0_g_res_75263,
                                                  y_75322);
                    int64_t defunc_0_f_res_75324 = abs64(binop_p_75323);
                    int64_t x_75325 = sub64(curr_sum_75313,
                                            defunc_0_f_res_75324);
                    int64_t min_arg_75326 = add64(min_res_64046,
                                                  last_idx_75311);
                    int64_t min_res_75327 = smin64(i_64040, min_arg_75326);
                    bool x_75328 = sle64((int64_t) 0, min_res_75327);
                    bool y_75329 = slt64(min_res_75327, n_64028);
                    bool bounds_check_75330 = x_75328 && y_75329;
                    bool index_certs_75331;
                    
                    if (!bounds_check_75330) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_75327,
                                      "] out of bounds for array of shape [",
                                      (long long) n_64028, "].",
                                      "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                        return 1;
                    }
                    
                    int64_t y_75332 = ((int64_t *) mem_70622)[min_res_75327];
                    int64_t binop_p_75333 = sub64(defunc_0_g_res_75263,
                                                  y_75332);
                    int64_t defunc_0_f_res_75334 = abs64(binop_p_75333);
                    int64_t new_sum_f_res_75335 = add64(x_75325,
                                                        defunc_0_f_res_75334);
                    
                    new_sum_75317 = new_sum_f_res_75335;
                }
                
                bool cond_75336 = sle64(new_sum_75317, best_sum_75312);
                int64_t loopres_75337;
                
                if (cond_75336) {
                    loopres_75337 = new_idx_75314;
                } else {
                    loopres_75337 = best_idx_75310;
                }
                
                int64_t loopres_75338;
                
                if (cond_75336) {
                    loopres_75338 = new_sum_75317;
                } else {
                    loopres_75338 = best_sum_75312;
                }
                
                int64_t best_idx_tmp_75485 = loopres_75337;
                int64_t last_idx_tmp_75486 = new_idx_75314;
                int64_t best_sum_tmp_75487 = loopres_75338;
                int64_t curr_sum_tmp_75488 = new_sum_75317;
                
                best_idx_75310 = best_idx_tmp_75485;
                last_idx_75311 = last_idx_tmp_75486;
                best_sum_75312 = best_sum_tmp_75487;
                curr_sum_75313 = curr_sum_tmp_75488;
            }
            idx_75305 = best_idx_75310;
            idx_75306 = last_idx_75311;
            idx_75307 = best_sum_75312;
            idx_75308 = curr_sum_75313;
            
            int64_t min_res_75339 = smin64(min_arg_65219, idx_75305);
            int64_t x_75340 = add64(min_res_64046, min_res_75339);
            int64_t r_75341 = sub64(x_75340, (int64_t) 1);
            bool x_75342 = sle64((int64_t) 0, r_75341);
            bool y_75343 = slt64(r_75341, n_64028);
            bool bounds_check_75344 = x_75342 && y_75343;
            bool index_certs_75345;
            
            if (!bounds_check_75344) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_75341,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_75346 = ((int64_t *) mem_70589)[r_75341];
            int64_t abs_arg_75347 = sub64(x_75346, min_res_75262);
            int64_t abs_res_75348 = abs64(abs_arg_75347);
            bool x_75349 = sle64((int64_t) 0, min_res_75339);
            bool y_75350 = slt64(min_res_75339, n_64028);
            bool bounds_check_75351 = x_75349 && y_75350;
            bool index_certs_75352;
            
            if (!bounds_check_75351) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_75339,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_75353 = ((int64_t *) mem_70589)[min_res_75339];
            int64_t abs_arg_75354 = sub64(x_75353, min_res_75262);
            int64_t abs_res_75355 = abs64(abs_arg_75354);
            int64_t max_res_75356 = smax64(abs_res_75348, abs_res_75355);
            float defunc_0_f_res_75357 = sitofp_i64_f32(max_res_75356);
            float defunc_1_f_res_75358 = max_res_65223 + defunc_0_f_res_75357;
            float defunc_0_f_res_75359 = sitofp_i64_f32(min_res_75262);
            
            for (int64_t i_75364 = 0; i_75364 < q_64030; i_75364++) {
                float x_75367 = ((float *) mem_70661)[i_75364];
                bool cond_75368 = sle64(last_res_65201, i_75364);
                float defunc_0_f_res_75369;
                
                if (cond_75368) {
                    defunc_0_f_res_75369 = 0.0F;
                } else {
                    int64_t i_75370 = add64(min_res_75339, i_75364);
                    float x_75371 = ((float *) mem_70616)[i_75370];
                    float defunc_0_f_res_f_res_75372 = 1.0F + x_75371;
                    
                    defunc_0_f_res_75369 = defunc_0_f_res_f_res_75372;
                }
                
                float x_j_75373 = defunc_0_f_res_75369 - defunc_0_f_res_75359;
                float abs_res_75374 = (float) fabs(x_j_75373);
                float tmp1_75375 = abs_res_75374 / defunc_1_f_res_75358;
                float x_75376 = tmp1_75375 * tmp1_75375;
                float y_75377 = tmp1_75375 * x_75376;
                float tmp2_75378 = 1.0F - y_75377;
                float x_75379 = tmp2_75378 * tmp2_75378;
                float tmp3_75380 = tmp2_75378 * x_75379;
                float tmp4_75381 = x_75367 * tmp3_75380;
                
                ((float *) mem_70696)[i_75364] = x_j_75373;
                ((float *) mem_70699)[i_75364] = tmp4_75381;
            }
            
            float defunc_2_reduce_res_75386;
            float defunc_2_reduce_res_75387;
            float defunc_2_reduce_res_75388;
            float defunc_2_reduce_res_75389;
            float defunc_2_reduce_res_75390;
            float redout_75394;
            float redout_75395;
            float redout_75396;
            float redout_75397;
            float redout_75398;
            
            redout_75394 = 0.0F;
            redout_75395 = 0.0F;
            redout_75396 = 0.0F;
            redout_75397 = 0.0F;
            redout_75398 = 0.0F;
            for (int64_t i_75393 = 0; i_75393 < q_64030; i_75393++) {
                float x_75401 = ((float *) mem_70696)[i_75393];
                float x_75402 = ((float *) mem_70699)[i_75393];
                float defunc_1_f_res_75403 = x_75401 * x_75402;
                float defunc_1_f_res_75404 = x_75401 * defunc_1_f_res_75403;
                float defunc_1_f_res_75405 = x_75401 * defunc_1_f_res_75404;
                float defunc_1_f_res_75406 = x_75401 * defunc_1_f_res_75405;
                float defunc_1_op_res_75407 = x_75402 + redout_75394;
                float defunc_1_op_res_75408 = defunc_1_f_res_75403 +
                      redout_75395;
                float defunc_1_op_res_75409 = defunc_1_f_res_75404 +
                      redout_75396;
                float defunc_1_op_res_75410 = defunc_1_f_res_75405 +
                      redout_75397;
                float defunc_1_op_res_75411 = defunc_1_f_res_75406 +
                      redout_75398;
                
                ((float *) mem_70726)[i_75393] = defunc_1_f_res_75404;
                ((float *) mem_70729)[i_75393] = defunc_1_f_res_75403;
                
                float redout_tmp_75491 = defunc_1_op_res_75407;
                float redout_tmp_75492 = defunc_1_op_res_75408;
                float redout_tmp_75493 = defunc_1_op_res_75409;
                float redout_tmp_75494 = defunc_1_op_res_75410;
                float redout_tmp_75495 = defunc_1_op_res_75411;
                
                redout_75394 = redout_tmp_75491;
                redout_75395 = redout_tmp_75492;
                redout_75396 = redout_tmp_75493;
                redout_75397 = redout_tmp_75494;
                redout_75398 = redout_tmp_75495;
            }
            defunc_2_reduce_res_75386 = redout_75394;
            defunc_2_reduce_res_75387 = redout_75395;
            defunc_2_reduce_res_75388 = redout_75396;
            defunc_2_reduce_res_75389 = redout_75397;
            defunc_2_reduce_res_75390 = redout_75398;
            
            float x_75414 = defunc_2_reduce_res_75388 *
                  defunc_2_reduce_res_75390;
            float y_75415 = defunc_2_reduce_res_75389 *
                  defunc_2_reduce_res_75389;
            float a12_75416 = x_75414 - y_75415;
            float x_75417 = defunc_2_reduce_res_75388 *
                  defunc_2_reduce_res_75389;
            float y_75418 = defunc_2_reduce_res_75387 *
                  defunc_2_reduce_res_75390;
            float b12_75419 = x_75417 - y_75418;
            float x_75420 = defunc_2_reduce_res_75387 *
                  defunc_2_reduce_res_75389;
            float y_75421 = defunc_2_reduce_res_75388 *
                  defunc_2_reduce_res_75388;
            float c12_75422 = x_75420 - y_75421;
            float x_75423 = defunc_2_reduce_res_75386 *
                  defunc_2_reduce_res_75390;
            float b2_75424 = x_75423 - y_75421;
            float x_75425 = defunc_2_reduce_res_75387 *
                  defunc_2_reduce_res_75388;
            float y_75426 = defunc_2_reduce_res_75386 *
                  defunc_2_reduce_res_75389;
            float c2_75427 = x_75425 - y_75426;
            float x_75428 = defunc_2_reduce_res_75386 * a12_75416;
            float y_75429 = defunc_2_reduce_res_75387 * b12_75419;
            float x_75430 = x_75428 + y_75429;
            float y_75431 = defunc_2_reduce_res_75388 * c12_75422;
            float y_75432 = x_75430 + y_75431;
            float det_75433 = 1.0F / y_75432;
            float a12_75434 = a12_75416 * det_75433;
            float b12_75435 = b12_75419 * det_75433;
            float c12_75436 = c12_75422 * det_75433;
            float b2_75437 = b2_75424 * det_75433;
            float c2_75438 = c2_75427 * det_75433;
            float defunc_2_reduce_res_75439;
            float defunc_2_reduce_res_75440;
            float redout_75442;
            float redout_75443;
            
            redout_75442 = 0.0F;
            redout_75443 = 0.0F;
            for (int64_t i_75441 = 0; i_75441 < q_64030; i_75441++) {
                float x_75444 = ((float *) mem_70699)[i_75441];
                float x_75445 = ((float *) mem_70729)[i_75441];
                float x_75446 = ((float *) mem_70726)[i_75441];
                bool cond_75447 = sle64(last_res_65201, i_75441);
                float defunc_0_f_res_75448;
                
                if (cond_75447) {
                    defunc_0_f_res_75448 = 0.0F;
                } else {
                    int64_t i_75449 = add64(min_res_75339, i_75441);
                    float x_75450 = ((float *) mem_70586)[i_75449];
                    
                    defunc_0_f_res_75448 = x_75450;
                }
                
                float x_75451 = a12_75434 * x_75444;
                float y_75452 = b12_75435 * x_75445;
                float x_75453 = x_75451 + y_75452;
                float y_75454 = c12_75436 * x_75446;
                float x_75455 = x_75453 + y_75454;
                float defunc_9_fit_fun_res_75456 = defunc_0_f_res_75448 *
                      x_75455;
                float x_75457 = b12_75435 * x_75444;
                float y_75458 = b2_75437 * x_75445;
                float x_75459 = x_75457 + y_75458;
                float y_75460 = c2_75438 * x_75446;
                float x_75461 = x_75459 + y_75460;
                float defunc_9_slope_fun_res_75462 = defunc_0_f_res_75448 *
                      x_75461;
                float defunc_1_op_res_75463 = defunc_9_fit_fun_res_75456 +
                      redout_75442;
                float defunc_1_op_res_75464 = defunc_9_slope_fun_res_75462 +
                      redout_75443;
                float redout_tmp_75498 = defunc_1_op_res_75463;
                float redout_tmp_75499 = defunc_1_op_res_75464;
                
                redout_75442 = redout_tmp_75498;
                redout_75443 = redout_tmp_75499;
            }
            defunc_2_reduce_res_75439 = redout_75442;
            defunc_2_reduce_res_75440 = redout_75443;
            ((float *) mem_70676)[i_75258] = defunc_2_reduce_res_75439;
            ((float *) mem_70679)[i_75258] = defunc_2_reduce_res_75440;
        }
        memmove(mem_70767.mem + gtid_68290 * n_m_64039 * (int64_t) 4,
                mem_70676 + (int64_t) 0, n_m_64039 * (int64_t) 4);
        memmove(mem_70771.mem + gtid_68290 * n_m_64039 * (int64_t) 4,
                mem_70679 + (int64_t) 0, n_m_64039 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70571);
    free(mem_70586);
    free(mem_70589);
    free(mem_70616);
    free(mem_70619);
    free(mem_70622);
    free(mem_70661);
    free(mem_70676);
    free(mem_70679);
    free(mem_70696);
    free(mem_70699);
    free(mem_70726);
    free(mem_70729);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76748_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76748_end -
                 futhark_mc_segmap_parloop_76748_start;
        
        ctx->futhark_mc_segmap_parloop_76748_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76748_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76748_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76746(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68289 = tid;
    int num_tasks_75218 = info.nsubtasks;
    struct futhark_mc_task_76745 *futhark_mc_task_76745 =
                                 (struct futhark_mc_task_76745 *) args;
    struct futhark_context *ctx = futhark_mc_task_76745->ctx;
    uint64_t futhark_mc_segmap_task_76746_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76746_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_task_76745->free_m_64027;
    int64_t n_64028 = futhark_mc_task_76745->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76745->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76745->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76745->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76745->free_i_64040;
    bool x_64041 = futhark_mc_task_76745->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76745->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76745->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76745->free_m_64052;
    float i64_res_64053 = futhark_mc_task_76745->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76745->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_70470 = futhark_mc_task_76745->free_bytes_70470;
    int64_t bytes_70473 = futhark_mc_task_76745->free_bytes_70473;
    int64_t bytes_70488 = futhark_mc_task_76745->free_bytes_70488;
    int64_t bytes_70563 = futhark_mc_task_76745->free_bytes_70563;
    struct memblock mem_70767 = {.desc ="mem_70767", .mem =
                                 futhark_mc_task_76745->free_mem_70767, .size =
                                 0, .references =NULL};
    struct memblock mem_70771 = {.desc ="mem_70771", .mem =
                                 futhark_mc_task_76745->free_mem_70771, .size =
                                 0, .references =NULL};
    int64_t iter_75219;
    struct futhark_mc_segmap_parloop_struct_76747
    futhark_mc_segmap_parloop_struct_76747;
    
    futhark_mc_segmap_parloop_struct_76747.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76747.free_m_64027 = m_64027;
    futhark_mc_segmap_parloop_struct_76747.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76747.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76747.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76747.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76747.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76747.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76747.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76747.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76747.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76747.free_i64_res_64053 = i64_res_64053;
    futhark_mc_segmap_parloop_struct_76747.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76747.free_bytes_70470 = bytes_70470;
    futhark_mc_segmap_parloop_struct_76747.free_bytes_70473 = bytes_70473;
    futhark_mc_segmap_parloop_struct_76747.free_bytes_70488 = bytes_70488;
    futhark_mc_segmap_parloop_struct_76747.free_bytes_70563 = bytes_70563;
    futhark_mc_segmap_parloop_struct_76747.free_mem_70767 = mem_70767.mem;
    futhark_mc_segmap_parloop_struct_76747.free_mem_70771 = mem_70771.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76748_task;
    
    futhark_mc_segmap_parloop_76748_task.name =
        "futhark_mc_segmap_parloop_76748";
    futhark_mc_segmap_parloop_76748_task.fn = futhark_mc_segmap_parloop_76748;
    futhark_mc_segmap_parloop_76748_task.args =
        &futhark_mc_segmap_parloop_struct_76747;
    futhark_mc_segmap_parloop_76748_task.iterations = iterations;
    futhark_mc_segmap_parloop_76748_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76748_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76748_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76748_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76748_task);
    
    if (futhark_mc_segmap_parloop_76748_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76748_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76748_total_end -
                 futhark_mc_segmap_parloop_76748_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76748_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76748_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76748_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76746_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76746_end -
                 futhark_mc_segmap_task_76746_start;
        
        ctx->futhark_mc_segmap_task_76746_runs[tid]++;
        ctx->futhark_mc_segmap_task_76746_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76746_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76763 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    float free_i64_res_64053;
    char *free_Y_mem_69552;
    int64_t free_bytes_70470;
    int64_t free_bytes_70473;
    int64_t free_bytes_70488;
    int64_t free_bytes_70563;
    char *free_mem_70767;
    char *free_mem_70771;
};
struct futhark_mc_task_76774 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_68292;
    char *free_Y_mem_69552;
    char *free_mem_70472;
};
struct futhark_mc_scan_stage_1_parloop_struct_76777 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_68292;
    char *free_Y_mem_69552;
    char *free_mem_70472;
};
static int futhark_mc_scan_stage_1_parloop_76778(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_68293, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_76777
    *futhark_mc_scan_stage_1_parloop_struct_76777 =
    (struct futhark_mc_scan_stage_1_parloop_struct_76777 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_76777->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_76778_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76778_start = get_wall_time();
    
    int64_t n_64028 =
            futhark_mc_scan_stage_1_parloop_struct_76777->free_n_64028;
    int64_t gtid_68292 =
            futhark_mc_scan_stage_1_parloop_struct_76777->free_gtid_68292;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_76777->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70472 = {.desc ="mem_70472", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_76777->free_mem_70472,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75932 = start;
    int64_t x_75501;
    int64_t x_75502;
    
    x_75501 = (int64_t) 0;
    for (; iter_75932 < end; iter_75932++) {
        int64_t gtid_68294 = iter_75932;
        
        // stage 1 scan body
        {
            float x_75504 = ((float *) Y_mem_69552.mem)[gtid_68292 * n_64028 +
                                                        gtid_68294];
            bool isnan_res_75505;
            
            isnan_res_75505 = futrts_isnan32(x_75504);
            
            bool defunc_0_p_res_75506 = !isnan_res_75505;
            int64_t defunc_0_f_res_75507 = btoi_bool_i64(defunc_0_p_res_75506);
            
            // write mapped values results to memory
            { }
            x_75501 = x_75501;
            // Read next values
            {
                x_75502 = defunc_0_f_res_75507;
            }
            
            int64_t defunc_1_op_res_75503 = add64(x_75501, x_75502);
            
            ((int64_t *) mem_70472.mem)[gtid_68294] = defunc_1_op_res_75503;
            x_75501 = defunc_1_op_res_75503;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76778_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76778_end -
                 futhark_mc_scan_stage_1_parloop_76778_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_76778_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_76778_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_76778_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_76779 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_68292;
    char *free_Y_mem_69552;
    char *free_mem_70472;
};
static int futhark_mc_scan_stage_3_parloop_76780(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_68293, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_76779
    *futhark_mc_scan_stage_3_parloop_struct_76779 =
    (struct futhark_mc_scan_stage_3_parloop_struct_76779 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_76779->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_76780_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_76780_start = get_wall_time();
    
    int64_t n_64028 =
            futhark_mc_scan_stage_3_parloop_struct_76779->free_n_64028;
    int64_t gtid_68292 =
            futhark_mc_scan_stage_3_parloop_struct_76779->free_gtid_68292;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_76779->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70472 = {.desc ="mem_70472", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_76779->free_mem_70472,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75944 = start;
    int64_t x_75941;
    int64_t x_75942;
    
    if (iter_75944 == (int64_t) 0) {
        x_75941 = (int64_t) 0;
    } else {
        x_75941 = ((int64_t *) mem_70472.mem)[iter_75944 - (int64_t) 1];
    }
    for (; iter_75944 < end; iter_75944++) {
        int64_t gtid_68294 = iter_75944;
        
        // stage 3 scan body
        {
            float x_75504 = ((float *) Y_mem_69552.mem)[gtid_68292 * n_64028 +
                                                        gtid_68294];
            bool isnan_res_75505;
            
            isnan_res_75505 = futrts_isnan32(x_75504);
            
            bool defunc_0_p_res_75506 = !isnan_res_75505;
            int64_t defunc_0_f_res_75507 = btoi_bool_i64(defunc_0_p_res_75506);
            
            x_75941 = x_75941;
            x_75942 = defunc_0_f_res_75507;
            
            int64_t defunc_1_op_res_75943 = add64(x_75941, x_75942);
            
            ((int64_t *) mem_70472.mem)[gtid_68294] = defunc_1_op_res_75943;
            x_75941 = defunc_1_op_res_75943;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_76780_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76780_end -
                 futhark_mc_scan_stage_3_parloop_76780_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_76780_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_76780_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_76780_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_76775(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68293 = tid;
    int num_tasks_75931 = info.nsubtasks;
    struct futhark_mc_task_76774 *futhark_mc_task_76774 =
                                 (struct futhark_mc_task_76774 *) args;
    struct futhark_context *ctx = futhark_mc_task_76774->ctx;
    uint64_t futhark_mc_segscan_task_76775_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_76775_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76774->free_n_64028;
    int64_t gtid_68292 = futhark_mc_task_76774->free_gtid_68292;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76774->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70472 = {.desc ="mem_70472", .mem =
                                 futhark_mc_task_76774->free_mem_70472, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_75938_cached_sizze_76776 = 0;
    char *scan_stage_2_accum_mem_75938 = NULL;
    int64_t iter_75932;
    struct futhark_mc_scan_stage_1_parloop_struct_76777
    futhark_mc_scan_stage_1_parloop_struct_76777;
    
    futhark_mc_scan_stage_1_parloop_struct_76777.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_76777.free_n_64028 = n_64028;
    futhark_mc_scan_stage_1_parloop_struct_76777.free_gtid_68292 = gtid_68292;
    futhark_mc_scan_stage_1_parloop_struct_76777.free_Y_mem_69552 =
        Y_mem_69552.mem;
    futhark_mc_scan_stage_1_parloop_struct_76777.free_mem_70472 = mem_70472.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_76778_task;
    
    futhark_mc_scan_stage_1_parloop_76778_task.name =
        "futhark_mc_scan_stage_1_parloop_76778";
    futhark_mc_scan_stage_1_parloop_76778_task.fn =
        futhark_mc_scan_stage_1_parloop_76778;
    futhark_mc_scan_stage_1_parloop_76778_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_76777;
    futhark_mc_scan_stage_1_parloop_76778_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_76778_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_76778_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_76778_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_76778_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_76778_task);
    
    if (futhark_mc_scan_stage_1_parloop_76778_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_76778_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_76778_total_end -
                 futhark_mc_scan_stage_1_parloop_76778_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76778_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76778_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_76778_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_75931)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_75933;
        int64_t x_75934;
        int64_t offset_75936 = (int64_t) 0;
        int64_t offset_index_75937 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_75938_cached_sizze_76776 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_75938 = realloc(scan_stage_2_accum_mem_75938,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_75938_cached_sizze_76776 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_75938)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_75940 = 0; i_75940 < num_tasks_75931 - 1; i_75940++) {
            offset_75936 = squot64(n_64028, sext_i32_i64(num_tasks_75931));
            if (slt64(sext_i32_i64(i_75940), srem64(n_64028,
                                                    sext_i32_i64(num_tasks_75931)))) {
                offset_75936 += (int64_t) 1;
            }
            offset_index_75937 += offset_75936;
            
            int64_t gtid_68294 = offset_index_75937;
            float x_75504 = ((float *) Y_mem_69552.mem)[gtid_68292 * n_64028 +
                                                        gtid_68294];
            bool isnan_res_75505;
            
            isnan_res_75505 = futrts_isnan32(x_75504);
            
            bool defunc_0_p_res_75506 = !isnan_res_75505;
            int64_t defunc_0_f_res_75507 = btoi_bool_i64(defunc_0_p_res_75506);
            
            // Read carry in
            {
                x_75933 =
                    ((int64_t *) scan_stage_2_accum_mem_75938)[(int64_t) 0];
            }
            // Read next values
            {
                x_75934 = ((int64_t *) mem_70472.mem)[offset_index_75937 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_75935 = add64(x_75933, x_75934);
            
            ((int64_t *) mem_70472.mem)[offset_index_75937 - (int64_t) 1] =
                defunc_1_op_res_75935;
            ((int64_t *) scan_stage_2_accum_mem_75938)[(int64_t) 0] =
                defunc_1_op_res_75935;
        }
        
        int64_t iter_75944 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_76779
        futhark_mc_scan_stage_3_parloop_struct_76779;
        
        futhark_mc_scan_stage_3_parloop_struct_76779.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_76779.free_n_64028 = n_64028;
        futhark_mc_scan_stage_3_parloop_struct_76779.free_gtid_68292 =
            gtid_68292;
        futhark_mc_scan_stage_3_parloop_struct_76779.free_Y_mem_69552 =
            Y_mem_69552.mem;
        futhark_mc_scan_stage_3_parloop_struct_76779.free_mem_70472 =
            mem_70472.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_76780_task;
        
        futhark_mc_scan_stage_3_parloop_76780_task.name =
            "futhark_mc_scan_stage_3_parloop_76780";
        futhark_mc_scan_stage_3_parloop_76780_task.fn =
            futhark_mc_scan_stage_3_parloop_76780;
        futhark_mc_scan_stage_3_parloop_76780_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_76779;
        futhark_mc_scan_stage_3_parloop_76780_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_76780_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_76780_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_76780_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_76780_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_76780_task);
        
        if (futhark_mc_scan_stage_3_parloop_76780_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_76780_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_76780_total_end -
                     futhark_mc_scan_stage_3_parloop_76780_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76780_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76780_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_76780_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_75938);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_76775_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_76775_end -
                 futhark_mc_segscan_task_76775_start;
        
        ctx->futhark_mc_segscan_task_76775_runs[tid]++;
        ctx->futhark_mc_segscan_task_76775_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_76775_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76781 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_68292;
    char *free_Y_mem_69552;
    char *free_mem_70472;
    char *free_mem_70475;
    char *free_mem_70478;
};
struct futhark_mc_segmap_parloop_struct_76783 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_gtid_68292;
    char *free_Y_mem_69552;
    char *free_mem_70472;
    char *free_mem_70475;
    char *free_mem_70478;
};
static int futhark_mc_segmap_parloop_76784(void *args, int64_t start,
                                           int64_t end, int flat_tid_68295,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76783
    *futhark_mc_segmap_parloop_struct_76783 =
    (struct futhark_mc_segmap_parloop_struct_76783 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76783->ctx;
    uint64_t futhark_mc_segmap_parloop_76784_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76784_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76783->free_n_64028;
    int64_t gtid_68292 =
            futhark_mc_segmap_parloop_struct_76783->free_gtid_68292;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76783->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70472 = {.desc ="mem_70472", .mem =
                                 futhark_mc_segmap_parloop_struct_76783->free_mem_70472,
                                 .size =0, .references =NULL};
    struct memblock mem_70475 = {.desc ="mem_70475", .mem =
                                 futhark_mc_segmap_parloop_struct_76783->free_mem_70475,
                                 .size =0, .references =NULL};
    struct memblock mem_70478 = {.desc ="mem_70478", .mem =
                                 futhark_mc_segmap_parloop_struct_76783->free_mem_70478,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75948 = start;
    
    for (; iter_75948 < end; iter_75948++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_75951 = n_64028;
        int64_t gtid_68296 = iter_75948;
        int64_t remnant_75952 = iter_75948 - gtid_68296;
        float x_75508 = ((float *) Y_mem_69552.mem)[gtid_68292 * n_64028 +
                                                    gtid_68296];
        bool isnan_res_75509;
        
        isnan_res_75509 = futrts_isnan32(x_75508);
        
        bool defunc_0_p_res_75510 = !isnan_res_75509;
        int64_t defunc_1_f_res_75511;
        
        if (defunc_0_p_res_75510) {
            int64_t x_75949 = ((int64_t *) mem_70472.mem)[gtid_68296];
            int64_t defunc_1_f_res_t_res_75950 = sub64(x_75949, (int64_t) 1);
            
            defunc_1_f_res_75511 = defunc_1_f_res_t_res_75950;
        } else {
            defunc_1_f_res_75511 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_75511) &&
            slt64(defunc_1_f_res_75511, n_64028)) {
            ((int64_t *) mem_70478.mem)[defunc_1_f_res_75511] = gtid_68296;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_75511) &&
            slt64(defunc_1_f_res_75511, n_64028)) {
            ((float *) mem_70475.mem)[defunc_1_f_res_75511] = x_75508;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76784_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76784_end -
                 futhark_mc_segmap_parloop_76784_start;
        
        ctx->futhark_mc_segmap_parloop_76784_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76784_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76784_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76782(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68295 = tid;
    int num_tasks_75947 = info.nsubtasks;
    struct futhark_mc_task_76781 *futhark_mc_task_76781 =
                                 (struct futhark_mc_task_76781 *) args;
    struct futhark_context *ctx = futhark_mc_task_76781->ctx;
    uint64_t futhark_mc_segmap_task_76782_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76782_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76781->free_n_64028;
    int64_t gtid_68292 = futhark_mc_task_76781->free_gtid_68292;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76781->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    struct memblock mem_70472 = {.desc ="mem_70472", .mem =
                                 futhark_mc_task_76781->free_mem_70472, .size =
                                 0, .references =NULL};
    struct memblock mem_70475 = {.desc ="mem_70475", .mem =
                                 futhark_mc_task_76781->free_mem_70475, .size =
                                 0, .references =NULL};
    struct memblock mem_70478 = {.desc ="mem_70478", .mem =
                                 futhark_mc_task_76781->free_mem_70478, .size =
                                 0, .references =NULL};
    int64_t iter_75948;
    struct futhark_mc_segmap_parloop_struct_76783
    futhark_mc_segmap_parloop_struct_76783;
    
    futhark_mc_segmap_parloop_struct_76783.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76783.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76783.free_gtid_68292 = gtid_68292;
    futhark_mc_segmap_parloop_struct_76783.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76783.free_mem_70472 = mem_70472.mem;
    futhark_mc_segmap_parloop_struct_76783.free_mem_70475 = mem_70475.mem;
    futhark_mc_segmap_parloop_struct_76783.free_mem_70478 = mem_70478.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76784_task;
    
    futhark_mc_segmap_parloop_76784_task.name =
        "futhark_mc_segmap_parloop_76784";
    futhark_mc_segmap_parloop_76784_task.fn = futhark_mc_segmap_parloop_76784;
    futhark_mc_segmap_parloop_76784_task.args =
        &futhark_mc_segmap_parloop_struct_76783;
    futhark_mc_segmap_parloop_76784_task.iterations = iterations;
    futhark_mc_segmap_parloop_76784_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76784_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76784_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76784_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76784_task);
    
    if (futhark_mc_segmap_parloop_76784_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76784_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76784_total_end -
                 futhark_mc_segmap_parloop_76784_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76784_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76784_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76784_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76782_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76782_end -
                 futhark_mc_segmap_task_76782_start;
        
        ctx->futhark_mc_segmap_task_76782_runs[tid]++;
        ctx->futhark_mc_segmap_task_76782_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76782_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76785 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    char *free_mem_70478;
    char *free_mem_70481;
    char *free_mem_70484;
    char *free_mem_70487;
};
struct futhark_mc_segmap_parloop_struct_76787 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    char *free_mem_70478;
    char *free_mem_70481;
    char *free_mem_70484;
    char *free_mem_70487;
};
static int futhark_mc_segmap_parloop_76788(void *args, int64_t start,
                                           int64_t end, int flat_tid_68297,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76787
    *futhark_mc_segmap_parloop_struct_76787 =
    (struct futhark_mc_segmap_parloop_struct_76787 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76787->ctx;
    uint64_t futhark_mc_segmap_parloop_76788_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76788_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76787->free_n_64028;
    struct memblock mem_70478 = {.desc ="mem_70478", .mem =
                                 futhark_mc_segmap_parloop_struct_76787->free_mem_70478,
                                 .size =0, .references =NULL};
    struct memblock mem_70481 = {.desc ="mem_70481", .mem =
                                 futhark_mc_segmap_parloop_struct_76787->free_mem_70481,
                                 .size =0, .references =NULL};
    struct memblock mem_70484 = {.desc ="mem_70484", .mem =
                                 futhark_mc_segmap_parloop_struct_76787->free_mem_70484,
                                 .size =0, .references =NULL};
    struct memblock mem_70487 = {.desc ="mem_70487", .mem =
                                 futhark_mc_segmap_parloop_struct_76787->free_mem_70487,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75954 = start;
    
    for (; iter_75954 < end; iter_75954++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_75955 = n_64028;
        int64_t gtid_68298 = iter_75954;
        int64_t remnant_75956 = iter_75954 - gtid_68298;
        int64_t x_75514 = ((int64_t *) mem_70478.mem)[gtid_68298];
        int64_t defunc_0_f_res_75515 = add64((int64_t) 1, x_75514);
        bool cond_75516 = slt64(defunc_0_f_res_75515, (int64_t) 0);
        int64_t defunc_0_f_res_75517;
        
        if (cond_75516) {
            defunc_0_f_res_75517 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_75517 = defunc_0_f_res_75515;
        }
        
        float defunc_0_f_res_75518 = sitofp_i64_f32(x_75514);
        
        ((float *) mem_70481.mem)[gtid_68298] = defunc_0_f_res_75518;
        ((int64_t *) mem_70484.mem)[gtid_68298] = defunc_0_f_res_75517;
        ((int64_t *) mem_70487.mem)[gtid_68298] = defunc_0_f_res_75515;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76788_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76788_end -
                 futhark_mc_segmap_parloop_76788_start;
        
        ctx->futhark_mc_segmap_parloop_76788_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76788_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76788_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76786(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68297 = tid;
    int num_tasks_75953 = info.nsubtasks;
    struct futhark_mc_task_76785 *futhark_mc_task_76785 =
                                 (struct futhark_mc_task_76785 *) args;
    struct futhark_context *ctx = futhark_mc_task_76785->ctx;
    uint64_t futhark_mc_segmap_task_76786_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76786_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76785->free_n_64028;
    struct memblock mem_70478 = {.desc ="mem_70478", .mem =
                                 futhark_mc_task_76785->free_mem_70478, .size =
                                 0, .references =NULL};
    struct memblock mem_70481 = {.desc ="mem_70481", .mem =
                                 futhark_mc_task_76785->free_mem_70481, .size =
                                 0, .references =NULL};
    struct memblock mem_70484 = {.desc ="mem_70484", .mem =
                                 futhark_mc_task_76785->free_mem_70484, .size =
                                 0, .references =NULL};
    struct memblock mem_70487 = {.desc ="mem_70487", .mem =
                                 futhark_mc_task_76785->free_mem_70487, .size =
                                 0, .references =NULL};
    int64_t iter_75954;
    struct futhark_mc_segmap_parloop_struct_76787
    futhark_mc_segmap_parloop_struct_76787;
    
    futhark_mc_segmap_parloop_struct_76787.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76787.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76787.free_mem_70478 = mem_70478.mem;
    futhark_mc_segmap_parloop_struct_76787.free_mem_70481 = mem_70481.mem;
    futhark_mc_segmap_parloop_struct_76787.free_mem_70484 = mem_70484.mem;
    futhark_mc_segmap_parloop_struct_76787.free_mem_70487 = mem_70487.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76788_task;
    
    futhark_mc_segmap_parloop_76788_task.name =
        "futhark_mc_segmap_parloop_76788";
    futhark_mc_segmap_parloop_76788_task.fn = futhark_mc_segmap_parloop_76788;
    futhark_mc_segmap_parloop_76788_task.args =
        &futhark_mc_segmap_parloop_struct_76787;
    futhark_mc_segmap_parloop_76788_task.iterations = iterations;
    futhark_mc_segmap_parloop_76788_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76788_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76788_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76788_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76788_task);
    
    if (futhark_mc_segmap_parloop_76788_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76788_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76788_total_end -
                 futhark_mc_segmap_parloop_76788_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76788_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76788_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76788_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76786_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76786_end -
                 futhark_mc_segmap_task_76786_start;
        
        ctx->futhark_mc_segmap_task_76786_runs[tid]++;
        ctx->futhark_mc_segmap_task_76786_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76786_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76789 {
    struct futhark_context *ctx;
    int64_t free_q_64030;
    int64_t free_last_res_68521;
    char *free_mem_70490;
};
struct futhark_mc_segmap_parloop_struct_76791 {
    struct futhark_context *ctx;
    int64_t free_q_64030;
    int64_t free_last_res_68521;
    char *free_mem_70490;
};
static int futhark_mc_segmap_parloop_76792(void *args, int64_t start,
                                           int64_t end, int flat_tid_68299,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76791
    *futhark_mc_segmap_parloop_struct_76791 =
    (struct futhark_mc_segmap_parloop_struct_76791 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76791->ctx;
    uint64_t futhark_mc_segmap_parloop_76792_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76792_start = get_wall_time();
    
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76791->free_q_64030;
    int64_t last_res_68521 =
            futhark_mc_segmap_parloop_struct_76791->free_last_res_68521;
    struct memblock mem_70490 = {.desc ="mem_70490", .mem =
                                 futhark_mc_segmap_parloop_struct_76791->free_mem_70490,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_75958 = start;
    
    for (; iter_75958 < end; iter_75958++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_75959 = q_64030;
        int64_t gtid_68300 = iter_75958;
        int64_t remnant_75960 = iter_75958 - gtid_68300;
        bool cond_75519 = sle64(last_res_68521, gtid_68300);
        float defunc_0_f_res_75520;
        
        if (cond_75519) {
            defunc_0_f_res_75520 = 0.0F;
        } else {
            defunc_0_f_res_75520 = 1.0F;
        }
        ((float *) mem_70490.mem)[gtid_68300] = defunc_0_f_res_75520;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76792_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76792_end -
                 futhark_mc_segmap_parloop_76792_start;
        
        ctx->futhark_mc_segmap_parloop_76792_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76792_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76792_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76790(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68299 = tid;
    int num_tasks_75957 = info.nsubtasks;
    struct futhark_mc_task_76789 *futhark_mc_task_76789 =
                                 (struct futhark_mc_task_76789 *) args;
    struct futhark_context *ctx = futhark_mc_task_76789->ctx;
    uint64_t futhark_mc_segmap_task_76790_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76790_start = get_wall_time();
    
    int64_t q_64030 = futhark_mc_task_76789->free_q_64030;
    int64_t last_res_68521 = futhark_mc_task_76789->free_last_res_68521;
    struct memblock mem_70490 = {.desc ="mem_70490", .mem =
                                 futhark_mc_task_76789->free_mem_70490, .size =
                                 0, .references =NULL};
    int64_t iter_75958;
    struct futhark_mc_segmap_parloop_struct_76791
    futhark_mc_segmap_parloop_struct_76791;
    
    futhark_mc_segmap_parloop_struct_76791.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76791.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76791.free_last_res_68521 = last_res_68521;
    futhark_mc_segmap_parloop_struct_76791.free_mem_70490 = mem_70490.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76792_task;
    
    futhark_mc_segmap_parloop_76792_task.name =
        "futhark_mc_segmap_parloop_76792";
    futhark_mc_segmap_parloop_76792_task.fn = futhark_mc_segmap_parloop_76792;
    futhark_mc_segmap_parloop_76792_task.args =
        &futhark_mc_segmap_parloop_struct_76791;
    futhark_mc_segmap_parloop_76792_task.iterations = iterations;
    futhark_mc_segmap_parloop_76792_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76792_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76792_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76792_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76792_task);
    
    if (futhark_mc_segmap_parloop_76792_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76792_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76792_total_end -
                 futhark_mc_segmap_parloop_76792_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76792_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76792_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76792_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76790_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76790_end -
                 futhark_mc_segmap_task_76790_start;
        
        ctx->futhark_mc_segmap_task_76790_runs[tid]++;
        ctx->futhark_mc_segmap_task_76790_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76790_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76793 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_68521;
    int64_t free_min_arg_68533;
    float free_max_res_68537;
    char *free_mem_70475;
    char *free_mem_70478;
    char *free_mem_70481;
    char *free_mem_70484;
    char *free_mem_70487;
    int64_t free_bytes_70488;
    char *free_mem_70490;
    char *free_mem_70565;
    char *free_mem_70568;
};
struct futhark_mc_segmap_parloop_struct_76795 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_68521;
    int64_t free_min_arg_68533;
    float free_max_res_68537;
    char *free_mem_70475;
    char *free_mem_70478;
    char *free_mem_70481;
    char *free_mem_70484;
    char *free_mem_70487;
    int64_t free_bytes_70488;
    char *free_mem_70490;
    char *free_mem_70565;
    char *free_mem_70568;
};
static int futhark_mc_segmap_parloop_76796(void *args, int64_t start,
                                           int64_t end, int flat_tid_68301,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76795
    *futhark_mc_segmap_parloop_struct_76795 =
    (struct futhark_mc_segmap_parloop_struct_76795 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76795->ctx;
    uint64_t futhark_mc_segmap_parloop_76796_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76796_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76795->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76795->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76795->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76795->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76795->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76795->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76795->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76795->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76795->free_m_64052;
    int64_t last_res_68521 =
            futhark_mc_segmap_parloop_struct_76795->free_last_res_68521;
    int64_t min_arg_68533 =
            futhark_mc_segmap_parloop_struct_76795->free_min_arg_68533;
    float max_res_68537 =
          futhark_mc_segmap_parloop_struct_76795->free_max_res_68537;
    struct memblock mem_70475 = {.desc ="mem_70475", .mem =
                                 futhark_mc_segmap_parloop_struct_76795->free_mem_70475,
                                 .size =0, .references =NULL};
    struct memblock mem_70478 = {.desc ="mem_70478", .mem =
                                 futhark_mc_segmap_parloop_struct_76795->free_mem_70478,
                                 .size =0, .references =NULL};
    struct memblock mem_70481 = {.desc ="mem_70481", .mem =
                                 futhark_mc_segmap_parloop_struct_76795->free_mem_70481,
                                 .size =0, .references =NULL};
    struct memblock mem_70484 = {.desc ="mem_70484", .mem =
                                 futhark_mc_segmap_parloop_struct_76795->free_mem_70484,
                                 .size =0, .references =NULL};
    struct memblock mem_70487 = {.desc ="mem_70487", .mem =
                                 futhark_mc_segmap_parloop_struct_76795->free_mem_70487,
                                 .size =0, .references =NULL};
    int64_t bytes_70488 =
            futhark_mc_segmap_parloop_struct_76795->free_bytes_70488;
    struct memblock mem_70490 = {.desc ="mem_70490", .mem =
                                 futhark_mc_segmap_parloop_struct_76795->free_mem_70490,
                                 .size =0, .references =NULL};
    struct memblock mem_70565 = {.desc ="mem_70565", .mem =
                                 futhark_mc_segmap_parloop_struct_76795->free_mem_70565,
                                 .size =0, .references =NULL};
    struct memblock mem_70568 = {.desc ="mem_70568", .mem =
                                 futhark_mc_segmap_parloop_struct_76795->free_mem_70568,
                                 .size =0, .references =NULL};
    size_t mem_75820_cached_sizze_76797 = 0;
    char *mem_75820 = NULL;
    size_t mem_75822_cached_sizze_76798 = 0;
    char *mem_75822 = NULL;
    size_t mem_75846_cached_sizze_76799 = 0;
    char *mem_75846 = NULL;
    size_t mem_75848_cached_sizze_76800 = 0;
    char *mem_75848 = NULL;
    int64_t iterations = end - start;
    int64_t iter_75962 = start;
    
    if (mem_75820_cached_sizze_76797 < (size_t) bytes_70488) {
        mem_75820 = realloc(mem_75820, bytes_70488);
        mem_75820_cached_sizze_76797 = bytes_70488;
    }
    if (mem_75822_cached_sizze_76798 < (size_t) bytes_70488) {
        mem_75822 = realloc(mem_75822, bytes_70488);
        mem_75822_cached_sizze_76798 = bytes_70488;
    }
    if (mem_75846_cached_sizze_76799 < (size_t) bytes_70488) {
        mem_75846 = realloc(mem_75846, bytes_70488);
        mem_75846_cached_sizze_76799 = bytes_70488;
    }
    if (mem_75848_cached_sizze_76800 < (size_t) bytes_70488) {
        mem_75848 = realloc(mem_75848, bytes_70488);
        mem_75848_cached_sizze_76800 = bytes_70488;
    }
    for (; iter_75962 < end; iter_75962++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76081 = n_m_64039;
        int64_t gtid_68302 = iter_75962;
        int64_t remnant_76082 = iter_75962 - gtid_68302;
        int64_t min_arg_75721 = mul64(jump_64032, gtid_68302);
        int64_t min_res_75722 = smin64(i_64040, min_arg_75721);
        int64_t defunc_0_g_res_75723 = add64((int64_t) 1, min_res_75722);
        bool nearest_idx_75724;
        int64_t nearest_idx_75725;
        int64_t nearest_idx_75726;
        bool loop_while_75963;
        int64_t low_75964;
        int64_t high_75965;
        
        loop_while_75963 = x_64041;
        low_75964 = (int64_t) 0;
        high_75965 = i_64040;
        while (loop_while_75963) {
            int64_t x_75966 = add64(low_75964, high_75965);
            int64_t mid_75967 = sdiv64(x_75966, (int64_t) 2);
            bool x_75968 = sle64((int64_t) 0, mid_75967);
            bool y_75969 = slt64(mid_75967, n_64028);
            bool bounds_check_75970 = x_75968 && y_75969;
            bool index_certs_75971;
            
            if (!bounds_check_75970) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_75967,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_75972 = ((int64_t *) mem_70484.mem)[mid_75967];
            bool cond_75973 = sle64(defunc_0_g_res_75723, x_75972);
            int64_t loopres_75974;
            int64_t loopres_75975;
            
            if (cond_75973) {
                int64_t loopres_t_res_75976 = sub64(mid_75967, (int64_t) 1);
                
                loopres_75974 = low_75964;
                loopres_75975 = loopres_t_res_75976;
            } else {
                int64_t loopres_f_res_75977 = add64((int64_t) 1, mid_75967);
                
                loopres_75974 = loopres_f_res_75977;
                loopres_75975 = high_75965;
            }
            
            bool loop_cond_75978 = sle64(loopres_75974, loopres_75975);
            bool loop_while_tmp_76083 = loop_cond_75978;
            int64_t low_tmp_76084 = loopres_75974;
            int64_t high_tmp_76085 = loopres_75975;
            
            loop_while_75963 = loop_while_tmp_76083;
            low_75964 = low_tmp_76084;
            high_75965 = high_tmp_76085;
        }
        nearest_idx_75724 = loop_while_75963;
        nearest_idx_75725 = low_75964;
        nearest_idx_75726 = high_75965;
        
        int64_t max_arg_75743 = sub64(nearest_idx_75725, min_res_64046);
        int64_t max_res_75744 = smax64((int64_t) 0, max_arg_75743);
        int64_t j_75745 = add64(min_res_64046, max_res_75744);
        int64_t i_p_m_t_s_75746 = add64(m_64052, max_res_75744);
        bool zzero_leq_i_p_m_t_s_75747 = sle64((int64_t) 0, i_p_m_t_s_75746);
        bool i_p_m_t_s_leq_w_75748 = slt64(i_p_m_t_s_75746, n_64028);
        bool zzero_lte_i_75749 = sle64((int64_t) 0, max_res_75744);
        bool i_lte_j_75750 = sle64(max_res_75744, j_75745);
        bool y_75751 = i_p_m_t_s_leq_w_75748 && zzero_lte_i_75749;
        bool y_75752 = zzero_leq_i_p_m_t_s_75747 && y_75751;
        bool y_75753 = i_lte_j_75750 && y_75752;
        bool forwards_ok_75754 = zzero_lte_i_75749 && y_75753;
        bool ok_or_empty_75755 = empty_slice_64051 || forwards_ok_75754;
        bool index_certs_75756;
        
        if (!ok_or_empty_75755) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_75744, ":",
                          (long long) j_75745,
                          "] out of bounds for array of shape [",
                          (long long) n_64028, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_75757;
        int64_t redout_75980 = (int64_t) 0;
        
        for (int64_t i_75979 = 0; i_75979 < min_res_64046; i_75979++) {
            int64_t slice_75981 = max_res_75744 + i_75979;
            int64_t x_75982 = ((int64_t *) mem_70487.mem)[slice_75981];
            int64_t abs_arg_75983 = sub64(x_75982, defunc_0_g_res_75723);
            int64_t abs_res_75984 = abs64(abs_arg_75983);
            int64_t defunc_1_op_res_75985 = add64(abs_res_75984, redout_75980);
            int64_t redout_tmp_76086 = defunc_1_op_res_75985;
            
            redout_75980 = redout_tmp_76086;
        }
        defunc_2_reduce_res_75757 = redout_75980;
        
        int64_t idx_75765;
        int64_t idx_75766;
        int64_t idx_75767;
        int64_t idx_75768;
        int64_t best_idx_75987;
        int64_t last_idx_75988;
        int64_t best_sum_75989;
        int64_t curr_sum_75990;
        
        best_idx_75987 = max_res_75744;
        last_idx_75988 = max_res_75744;
        best_sum_75989 = defunc_2_reduce_res_75757;
        curr_sum_75990 = defunc_2_reduce_res_75757;
        for (int64_t j_75986 = 0; j_75986 < min_res_64046; j_75986++) {
            int64_t new_idx_75991 = add64(max_res_75744, j_75986);
            int64_t x_75992 = add64(min_res_64046, new_idx_75991);
            bool cond_75993 = slt64(last_res_68521, x_75992);
            int64_t new_sum_75994;
            
            if (cond_75993) {
                new_sum_75994 = (int64_t) 9223372036854775807;
            } else {
                bool x_75995 = sle64((int64_t) 0, last_idx_75988);
                bool y_75996 = slt64(last_idx_75988, n_64028);
                bool bounds_check_75997 = x_75995 && y_75996;
                bool index_certs_75998;
                
                if (!bounds_check_75997) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_75988,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_75999 = ((int64_t *) mem_70487.mem)[last_idx_75988];
                int64_t binop_p_76000 = sub64(defunc_0_g_res_75723, y_75999);
                int64_t defunc_0_f_res_76001 = abs64(binop_p_76000);
                int64_t x_76002 = sub64(curr_sum_75990, defunc_0_f_res_76001);
                int64_t min_arg_76003 = add64(min_res_64046, last_idx_75988);
                int64_t min_res_76004 = smin64(i_64040, min_arg_76003);
                bool x_76005 = sle64((int64_t) 0, min_res_76004);
                bool y_76006 = slt64(min_res_76004, n_64028);
                bool bounds_check_76007 = x_76005 && y_76006;
                bool index_certs_76008;
                
                if (!bounds_check_76007) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_76004,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_76009 = ((int64_t *) mem_70487.mem)[min_res_76004];
                int64_t binop_p_76010 = sub64(defunc_0_g_res_75723, y_76009);
                int64_t defunc_0_f_res_76011 = abs64(binop_p_76010);
                int64_t new_sum_f_res_76012 = add64(x_76002,
                                                    defunc_0_f_res_76011);
                
                new_sum_75994 = new_sum_f_res_76012;
            }
            
            bool cond_76013 = sle64(new_sum_75994, best_sum_75989);
            int64_t loopres_76014;
            
            if (cond_76013) {
                loopres_76014 = new_idx_75991;
            } else {
                loopres_76014 = best_idx_75987;
            }
            
            int64_t loopres_76015;
            
            if (cond_76013) {
                loopres_76015 = new_sum_75994;
            } else {
                loopres_76015 = best_sum_75989;
            }
            
            int64_t best_idx_tmp_76087 = loopres_76014;
            int64_t last_idx_tmp_76088 = new_idx_75991;
            int64_t best_sum_tmp_76089 = loopres_76015;
            int64_t curr_sum_tmp_76090 = new_sum_75994;
            
            best_idx_75987 = best_idx_tmp_76087;
            last_idx_75988 = last_idx_tmp_76088;
            best_sum_75989 = best_sum_tmp_76089;
            curr_sum_75990 = curr_sum_tmp_76090;
        }
        idx_75765 = best_idx_75987;
        idx_75766 = last_idx_75988;
        idx_75767 = best_sum_75989;
        idx_75768 = curr_sum_75990;
        
        int64_t min_res_75799 = smin64(min_arg_68533, idx_75765);
        int64_t x_75800 = add64(min_res_64046, min_res_75799);
        int64_t r_75801 = sub64(x_75800, (int64_t) 1);
        bool x_75802 = sle64((int64_t) 0, r_75801);
        bool y_75803 = slt64(r_75801, n_64028);
        bool bounds_check_75804 = x_75802 && y_75803;
        bool index_certs_75805;
        
        if (!bounds_check_75804) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_75801,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_75806 = ((int64_t *) mem_70478.mem)[r_75801];
        int64_t abs_arg_75807 = sub64(x_75806, min_res_75722);
        int64_t abs_res_75808 = abs64(abs_arg_75807);
        bool x_75809 = sle64((int64_t) 0, min_res_75799);
        bool y_75810 = slt64(min_res_75799, n_64028);
        bool bounds_check_75811 = x_75809 && y_75810;
        bool index_certs_75812;
        
        if (!bounds_check_75811) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_75799,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_75813 = ((int64_t *) mem_70478.mem)[min_res_75799];
        int64_t abs_arg_75814 = sub64(x_75813, min_res_75722);
        int64_t abs_res_75815 = abs64(abs_arg_75814);
        int64_t max_res_75816 = smax64(abs_res_75808, abs_res_75815);
        float defunc_0_f_res_75817 = sitofp_i64_f32(max_res_75816);
        float defunc_1_f_res_75818 = max_res_68537 + defunc_0_f_res_75817;
        float defunc_0_f_res_75819 = sitofp_i64_f32(min_res_75722);
        
        for (int64_t i_76016 = 0; i_76016 < q_64030; i_76016++) {
            float x_76019 = ((float *) mem_70490.mem)[i_76016];
            bool cond_76020 = sle64(last_res_68521, i_76016);
            float defunc_0_f_res_76021;
            
            if (cond_76020) {
                defunc_0_f_res_76021 = 0.0F;
            } else {
                int64_t i_76022 = add64(min_res_75799, i_76016);
                float x_76023 = ((float *) mem_70481.mem)[i_76022];
                float defunc_0_f_res_f_res_76024 = 1.0F + x_76023;
                
                defunc_0_f_res_76021 = defunc_0_f_res_f_res_76024;
            }
            
            float x_j_76025 = defunc_0_f_res_76021 - defunc_0_f_res_75819;
            float abs_res_76026 = (float) fabs(x_j_76025);
            float tmp1_76027 = abs_res_76026 / defunc_1_f_res_75818;
            float x_76028 = tmp1_76027 * tmp1_76027;
            float y_76029 = tmp1_76027 * x_76028;
            float tmp2_76030 = 1.0F - y_76029;
            float x_76031 = tmp2_76030 * tmp2_76030;
            float tmp3_76032 = tmp2_76030 * x_76031;
            float tmp4_76033 = x_76019 * tmp3_76032;
            
            ((float *) mem_75820)[i_76016] = x_j_76025;
            ((float *) mem_75822)[i_76016] = tmp4_76033;
        }
        
        float defunc_2_reduce_res_75850;
        float defunc_2_reduce_res_75851;
        float defunc_2_reduce_res_75852;
        float defunc_2_reduce_res_75853;
        float defunc_2_reduce_res_75854;
        float redout_76037;
        float redout_76038;
        float redout_76039;
        float redout_76040;
        float redout_76041;
        
        redout_76037 = 0.0F;
        redout_76038 = 0.0F;
        redout_76039 = 0.0F;
        redout_76040 = 0.0F;
        redout_76041 = 0.0F;
        for (int64_t i_76036 = 0; i_76036 < q_64030; i_76036++) {
            float x_76044 = ((float *) mem_75820)[i_76036];
            float x_76045 = ((float *) mem_75822)[i_76036];
            float defunc_1_f_res_76046 = x_76044 * x_76045;
            float defunc_1_f_res_76047 = x_76044 * defunc_1_f_res_76046;
            float defunc_1_f_res_76048 = x_76044 * defunc_1_f_res_76047;
            float defunc_1_f_res_76049 = x_76044 * defunc_1_f_res_76048;
            float defunc_1_op_res_76050 = x_76045 + redout_76037;
            float defunc_1_op_res_76051 = defunc_1_f_res_76046 + redout_76038;
            float defunc_1_op_res_76052 = defunc_1_f_res_76047 + redout_76039;
            float defunc_1_op_res_76053 = defunc_1_f_res_76048 + redout_76040;
            float defunc_1_op_res_76054 = defunc_1_f_res_76049 + redout_76041;
            
            ((float *) mem_75846)[i_76036] = defunc_1_f_res_76047;
            ((float *) mem_75848)[i_76036] = defunc_1_f_res_76046;
            
            float redout_tmp_76093 = defunc_1_op_res_76050;
            float redout_tmp_76094 = defunc_1_op_res_76051;
            float redout_tmp_76095 = defunc_1_op_res_76052;
            float redout_tmp_76096 = defunc_1_op_res_76053;
            float redout_tmp_76097 = defunc_1_op_res_76054;
            
            redout_76037 = redout_tmp_76093;
            redout_76038 = redout_tmp_76094;
            redout_76039 = redout_tmp_76095;
            redout_76040 = redout_tmp_76096;
            redout_76041 = redout_tmp_76097;
        }
        defunc_2_reduce_res_75850 = redout_76037;
        defunc_2_reduce_res_75851 = redout_76038;
        defunc_2_reduce_res_75852 = redout_76039;
        defunc_2_reduce_res_75853 = redout_76040;
        defunc_2_reduce_res_75854 = redout_76041;
        
        float x_75878 = defunc_2_reduce_res_75852 * defunc_2_reduce_res_75854;
        float y_75879 = defunc_2_reduce_res_75853 * defunc_2_reduce_res_75853;
        float a12_75880 = x_75878 - y_75879;
        float x_75881 = defunc_2_reduce_res_75852 * defunc_2_reduce_res_75853;
        float y_75882 = defunc_2_reduce_res_75851 * defunc_2_reduce_res_75854;
        float b12_75883 = x_75881 - y_75882;
        float x_75884 = defunc_2_reduce_res_75851 * defunc_2_reduce_res_75853;
        float y_75885 = defunc_2_reduce_res_75852 * defunc_2_reduce_res_75852;
        float c12_75886 = x_75884 - y_75885;
        float x_75887 = defunc_2_reduce_res_75850 * defunc_2_reduce_res_75854;
        float b2_75888 = x_75887 - y_75885;
        float x_75889 = defunc_2_reduce_res_75851 * defunc_2_reduce_res_75852;
        float y_75890 = defunc_2_reduce_res_75850 * defunc_2_reduce_res_75853;
        float c2_75891 = x_75889 - y_75890;
        float x_75892 = defunc_2_reduce_res_75850 * a12_75880;
        float y_75893 = defunc_2_reduce_res_75851 * b12_75883;
        float x_75894 = x_75892 + y_75893;
        float y_75895 = defunc_2_reduce_res_75852 * c12_75886;
        float y_75896 = x_75894 + y_75895;
        float det_75897 = 1.0F / y_75896;
        float a12_75898 = a12_75880 * det_75897;
        float b12_75899 = b12_75883 * det_75897;
        float c12_75900 = c12_75886 * det_75897;
        float b2_75901 = b2_75888 * det_75897;
        float c2_75902 = c2_75891 * det_75897;
        float defunc_2_reduce_res_75903;
        float defunc_2_reduce_res_75904;
        float redout_76058;
        float redout_76059;
        
        redout_76058 = 0.0F;
        redout_76059 = 0.0F;
        for (int64_t i_76057 = 0; i_76057 < q_64030; i_76057++) {
            float x_76060 = ((float *) mem_75822)[i_76057];
            float x_76061 = ((float *) mem_75848)[i_76057];
            float x_76062 = ((float *) mem_75846)[i_76057];
            bool cond_76063 = sle64(last_res_68521, i_76057);
            float defunc_0_f_res_76064;
            
            if (cond_76063) {
                defunc_0_f_res_76064 = 0.0F;
            } else {
                int64_t i_76065 = add64(min_res_75799, i_76057);
                float x_76066 = ((float *) mem_70475.mem)[i_76065];
                
                defunc_0_f_res_76064 = x_76066;
            }
            
            float x_76067 = a12_75898 * x_76060;
            float y_76068 = b12_75899 * x_76061;
            float x_76069 = x_76067 + y_76068;
            float y_76070 = c12_75900 * x_76062;
            float x_76071 = x_76069 + y_76070;
            float defunc_9_fit_fun_res_76072 = defunc_0_f_res_76064 * x_76071;
            float x_76073 = b12_75899 * x_76060;
            float y_76074 = b2_75901 * x_76061;
            float x_76075 = x_76073 + y_76074;
            float y_76076 = c2_75902 * x_76062;
            float x_76077 = x_76075 + y_76076;
            float defunc_9_slope_fun_res_76078 = defunc_0_f_res_76064 * x_76077;
            float defunc_1_op_res_76079 = defunc_9_fit_fun_res_76072 +
                  redout_76058;
            float defunc_1_op_res_76080 = defunc_9_slope_fun_res_76078 +
                  redout_76059;
            float redout_tmp_76100 = defunc_1_op_res_76079;
            float redout_tmp_76101 = defunc_1_op_res_76080;
            
            redout_76058 = redout_tmp_76100;
            redout_76059 = redout_tmp_76101;
        }
        defunc_2_reduce_res_75903 = redout_76058;
        defunc_2_reduce_res_75904 = redout_76059;
        ((float *) mem_70565.mem)[gtid_68302] = defunc_2_reduce_res_75903;
        ((float *) mem_70568.mem)[gtid_68302] = defunc_2_reduce_res_75904;
    }
    
  cleanup:
    { }
    free(mem_75820);
    free(mem_75822);
    free(mem_75846);
    free(mem_75848);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76796_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76796_end -
                 futhark_mc_segmap_parloop_76796_start;
        
        ctx->futhark_mc_segmap_parloop_76796_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76796_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76796_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76794(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68301 = tid;
    int num_tasks_75961 = info.nsubtasks;
    struct futhark_mc_task_76793 *futhark_mc_task_76793 =
                                 (struct futhark_mc_task_76793 *) args;
    struct futhark_context *ctx = futhark_mc_task_76793->ctx;
    uint64_t futhark_mc_segmap_task_76794_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76794_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76793->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76793->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76793->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76793->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76793->free_i_64040;
    bool x_64041 = futhark_mc_task_76793->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76793->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76793->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76793->free_m_64052;
    int64_t last_res_68521 = futhark_mc_task_76793->free_last_res_68521;
    int64_t min_arg_68533 = futhark_mc_task_76793->free_min_arg_68533;
    float max_res_68537 = futhark_mc_task_76793->free_max_res_68537;
    struct memblock mem_70475 = {.desc ="mem_70475", .mem =
                                 futhark_mc_task_76793->free_mem_70475, .size =
                                 0, .references =NULL};
    struct memblock mem_70478 = {.desc ="mem_70478", .mem =
                                 futhark_mc_task_76793->free_mem_70478, .size =
                                 0, .references =NULL};
    struct memblock mem_70481 = {.desc ="mem_70481", .mem =
                                 futhark_mc_task_76793->free_mem_70481, .size =
                                 0, .references =NULL};
    struct memblock mem_70484 = {.desc ="mem_70484", .mem =
                                 futhark_mc_task_76793->free_mem_70484, .size =
                                 0, .references =NULL};
    struct memblock mem_70487 = {.desc ="mem_70487", .mem =
                                 futhark_mc_task_76793->free_mem_70487, .size =
                                 0, .references =NULL};
    int64_t bytes_70488 = futhark_mc_task_76793->free_bytes_70488;
    struct memblock mem_70490 = {.desc ="mem_70490", .mem =
                                 futhark_mc_task_76793->free_mem_70490, .size =
                                 0, .references =NULL};
    struct memblock mem_70565 = {.desc ="mem_70565", .mem =
                                 futhark_mc_task_76793->free_mem_70565, .size =
                                 0, .references =NULL};
    struct memblock mem_70568 = {.desc ="mem_70568", .mem =
                                 futhark_mc_task_76793->free_mem_70568, .size =
                                 0, .references =NULL};
    int64_t iter_75962;
    struct futhark_mc_segmap_parloop_struct_76795
    futhark_mc_segmap_parloop_struct_76795;
    
    futhark_mc_segmap_parloop_struct_76795.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76795.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76795.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76795.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76795.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76795.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76795.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76795.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76795.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76795.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76795.free_last_res_68521 = last_res_68521;
    futhark_mc_segmap_parloop_struct_76795.free_min_arg_68533 = min_arg_68533;
    futhark_mc_segmap_parloop_struct_76795.free_max_res_68537 = max_res_68537;
    futhark_mc_segmap_parloop_struct_76795.free_mem_70475 = mem_70475.mem;
    futhark_mc_segmap_parloop_struct_76795.free_mem_70478 = mem_70478.mem;
    futhark_mc_segmap_parloop_struct_76795.free_mem_70481 = mem_70481.mem;
    futhark_mc_segmap_parloop_struct_76795.free_mem_70484 = mem_70484.mem;
    futhark_mc_segmap_parloop_struct_76795.free_mem_70487 = mem_70487.mem;
    futhark_mc_segmap_parloop_struct_76795.free_bytes_70488 = bytes_70488;
    futhark_mc_segmap_parloop_struct_76795.free_mem_70490 = mem_70490.mem;
    futhark_mc_segmap_parloop_struct_76795.free_mem_70565 = mem_70565.mem;
    futhark_mc_segmap_parloop_struct_76795.free_mem_70568 = mem_70568.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76796_task;
    
    futhark_mc_segmap_parloop_76796_task.name =
        "futhark_mc_segmap_parloop_76796";
    futhark_mc_segmap_parloop_76796_task.fn = futhark_mc_segmap_parloop_76796;
    futhark_mc_segmap_parloop_76796_task.args =
        &futhark_mc_segmap_parloop_struct_76795;
    futhark_mc_segmap_parloop_76796_task.iterations = iterations;
    futhark_mc_segmap_parloop_76796_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76796_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76796_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76796_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76796_task);
    
    if (futhark_mc_segmap_parloop_76796_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76796_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76796_total_end -
                 futhark_mc_segmap_parloop_76796_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76796_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76796_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76796_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76794_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76794_end -
                 futhark_mc_segmap_task_76794_start;
        
        ctx->futhark_mc_segmap_task_76794_runs[tid]++;
        ctx->futhark_mc_segmap_task_76794_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76794_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76802 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_q_64030;
    int64_t free_jump_64032;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    bool free_x_64041;
    int64_t free_min_res_64046;
    bool free_empty_slice_64051;
    int64_t free_m_64052;
    int64_t free_last_res_68521;
    int64_t free_min_arg_68533;
    float free_max_res_68537;
    char *free_mem_70475;
    char *free_mem_70478;
    char *free_mem_70481;
    char *free_mem_70484;
    char *free_mem_70487;
    int64_t free_bytes_70488;
    char *free_mem_70490;
    char *free_mem_70565;
    char *free_mem_70568;
};
struct futhark_mc_task_76808 {
    struct futhark_context *ctx;
    char *free_mem_70487;
    int64_t free_defunc_0_g_res_75523;
    int64_t free_max_res_75544;
    int64_t *retval_defunc_2_reduce_res_75557;
};
struct futhark_mc_segred_stage_1_parloop_struct_76811 {
    struct futhark_context *ctx;
    char *free_mem_70487;
    int64_t free_defunc_0_g_res_75523;
    int64_t free_max_res_75544;
    char *free_reduce_stage_1_tid_res_arr_mem_76223;
};
static int futhark_mc_segred_stage_1_parloop_76812(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_68305, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76811
    *futhark_mc_segred_stage_1_parloop_struct_76811 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76811 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76811->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76812_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76812_start = get_wall_time();
    
    struct memblock mem_70487 = {.desc ="mem_70487", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76811->free_mem_70487,
                                 .size =0, .references =NULL};
    int64_t defunc_0_g_res_75523 =
            futhark_mc_segred_stage_1_parloop_struct_76811->free_defunc_0_g_res_75523;
    int64_t max_res_75544 =
            futhark_mc_segred_stage_1_parloop_struct_76811->free_max_res_75544;
    struct memblock reduce_stage_1_tid_res_arr_mem_76223 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76223",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76811->free_reduce_stage_1_tid_res_arr_mem_76223,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76225 = start;
    int64_t x_76119;
    int64_t x_76120;
    int64_t local_acc_76226 = (int64_t) 0;
    
    for (; iter_76225 < end; iter_76225++) {
        int64_t gtid_68306 = iter_76225;
        int64_t slice_76122 = gtid_68306 + max_res_75544;
        int64_t x_76123 = ((int64_t *) mem_70487.mem)[slice_76122];
        int64_t abs_arg_76124 = sub64(x_76123, defunc_0_g_res_75523);
        int64_t abs_res_76125 = abs64(abs_arg_76124);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_76119 = local_acc_76226;
        }
        // Load next params
        {
            x_76120 = abs_res_76125;
        }
        // Red body
        {
            int64_t defunc_1_op_res_76121 = add64(x_76119, x_76120);
            
            local_acc_76226 = defunc_1_op_res_76121;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_76223.mem)[flat_tid_68305] =
        local_acc_76226;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76812_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76812_end -
                 futhark_mc_segred_stage_1_parloop_76812_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76812_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76812_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76812_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76809(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68305 = tid;
    int num_tasks_76222 = info.nsubtasks;
    struct futhark_mc_task_76808 *futhark_mc_task_76808 =
                                 (struct futhark_mc_task_76808 *) args;
    struct futhark_context *ctx = futhark_mc_task_76808->ctx;
    uint64_t futhark_mc_segred_task_76809_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76809_start = get_wall_time();
    
    struct memblock mem_70487 = {.desc ="mem_70487", .mem =
                                 futhark_mc_task_76808->free_mem_70487, .size =
                                 0, .references =NULL};
    int64_t defunc_0_g_res_75523 =
            futhark_mc_task_76808->free_defunc_0_g_res_75523;
    int64_t max_res_75544 = futhark_mc_task_76808->free_max_res_75544;
    int64_t defunc_2_reduce_res_75557 =
            *futhark_mc_task_76808->retval_defunc_2_reduce_res_75557;
    size_t reduce_stage_1_tid_res_arr_mem_76223_cached_sizze_76810 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76223 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_76223_cached_sizze_76810 <
        (size_t) ((int64_t) 8 * num_tasks_76222)) {
        reduce_stage_1_tid_res_arr_mem_76223 =
            realloc(reduce_stage_1_tid_res_arr_mem_76223, (int64_t) 8 *
                    num_tasks_76222);
        reduce_stage_1_tid_res_arr_mem_76223_cached_sizze_76810 = (int64_t) 8 *
            num_tasks_76222;
    }
    
    int64_t iter_76225;
    struct futhark_mc_segred_stage_1_parloop_struct_76811
    futhark_mc_segred_stage_1_parloop_struct_76811;
    
    futhark_mc_segred_stage_1_parloop_struct_76811.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76811.free_mem_70487 =
        mem_70487.mem;
    futhark_mc_segred_stage_1_parloop_struct_76811.free_defunc_0_g_res_75523 =
        defunc_0_g_res_75523;
    futhark_mc_segred_stage_1_parloop_struct_76811.free_max_res_75544 =
        max_res_75544;
    futhark_mc_segred_stage_1_parloop_struct_76811.free_reduce_stage_1_tid_res_arr_mem_76223 =
        reduce_stage_1_tid_res_arr_mem_76223;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76812_task;
    
    futhark_mc_segred_stage_1_parloop_76812_task.name =
        "futhark_mc_segred_stage_1_parloop_76812";
    futhark_mc_segred_stage_1_parloop_76812_task.fn =
        futhark_mc_segred_stage_1_parloop_76812;
    futhark_mc_segred_stage_1_parloop_76812_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76811;
    futhark_mc_segred_stage_1_parloop_76812_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76812_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76812_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76812_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76812_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76812_task);
    
    if (futhark_mc_segred_stage_1_parloop_76812_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76812_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76812_total_end -
                 futhark_mc_segred_stage_1_parloop_76812_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76812_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76812_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76812_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_75557 = (int64_t) 0;
    }
    
    int64_t x_76227;
    int64_t x_76228;
    
    for (int32_t i_76230 = 0; i_76230 < num_tasks_76222; i_76230++) {
        flat_tid_68305 = i_76230;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_76227 = defunc_2_reduce_res_75557;
            }
            // load next params
            {
                x_76228 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_76223)[flat_tid_68305];
            }
            // red body
            {
                int64_t defunc_1_op_res_76229 = add64(x_76227, x_76228);
                
                defunc_2_reduce_res_75557 = defunc_1_op_res_76229;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_76223);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76809_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76809_end -
                 futhark_mc_segred_task_76809_start;
        
        ctx->futhark_mc_segred_task_76809_runs[tid]++;
        ctx->futhark_mc_segred_task_76809_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76809_iter[tid] += iterations;
    }
    *futhark_mc_task_76808->retval_defunc_2_reduce_res_75557 =
        defunc_2_reduce_res_75557;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76813 {
    struct futhark_context *ctx;
    int64_t free_q_64030;
    int64_t free_last_res_68521;
    char *free_mem_70481;
    char *free_mem_70490;
    int64_t free_min_res_75599;
    float free_defunc_1_f_res_75618;
    float free_defunc_0_f_res_75619;
    char *free_mem_75620;
    char *free_mem_75621;
};
struct futhark_mc_segmap_parloop_struct_76815 {
    struct futhark_context *ctx;
    int64_t free_q_64030;
    int64_t free_last_res_68521;
    char *free_mem_70481;
    char *free_mem_70490;
    int64_t free_min_res_75599;
    float free_defunc_1_f_res_75618;
    float free_defunc_0_f_res_75619;
    char *free_mem_75620;
    char *free_mem_75621;
};
static int futhark_mc_segmap_parloop_76816(void *args, int64_t start,
                                           int64_t end, int flat_tid_68307,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76815
    *futhark_mc_segmap_parloop_struct_76815 =
    (struct futhark_mc_segmap_parloop_struct_76815 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76815->ctx;
    uint64_t futhark_mc_segmap_parloop_76816_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76816_start = get_wall_time();
    
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76815->free_q_64030;
    int64_t last_res_68521 =
            futhark_mc_segmap_parloop_struct_76815->free_last_res_68521;
    struct memblock mem_70481 = {.desc ="mem_70481", .mem =
                                 futhark_mc_segmap_parloop_struct_76815->free_mem_70481,
                                 .size =0, .references =NULL};
    struct memblock mem_70490 = {.desc ="mem_70490", .mem =
                                 futhark_mc_segmap_parloop_struct_76815->free_mem_70490,
                                 .size =0, .references =NULL};
    int64_t min_res_75599 =
            futhark_mc_segmap_parloop_struct_76815->free_min_res_75599;
    float defunc_1_f_res_75618 =
          futhark_mc_segmap_parloop_struct_76815->free_defunc_1_f_res_75618;
    float defunc_0_f_res_75619 =
          futhark_mc_segmap_parloop_struct_76815->free_defunc_0_f_res_75619;
    struct memblock mem_75620 = {.desc ="mem_75620", .mem =
                                 futhark_mc_segmap_parloop_struct_76815->free_mem_75620,
                                 .size =0, .references =NULL};
    struct memblock mem_75621 = {.desc ="mem_75621", .mem =
                                 futhark_mc_segmap_parloop_struct_76815->free_mem_75621,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76236 = start;
    
    for (; iter_76236 < end; iter_76236++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76240 = q_64030;
        int64_t gtid_68308 = iter_76236;
        int64_t remnant_76241 = iter_76236 - gtid_68308;
        float x_76156 = ((float *) mem_70490.mem)[gtid_68308];
        bool cond_76157 = sle64(last_res_68521, gtid_68308);
        float defunc_0_f_res_76158;
        
        if (cond_76157) {
            defunc_0_f_res_76158 = 0.0F;
        } else {
            int64_t i_76237 = add64(gtid_68308, min_res_75599);
            float x_76238 = ((float *) mem_70481.mem)[i_76237];
            float defunc_0_f_res_f_res_76239 = 1.0F + x_76238;
            
            defunc_0_f_res_76158 = defunc_0_f_res_f_res_76239;
        }
        
        float x_j_76162 = defunc_0_f_res_76158 - defunc_0_f_res_75619;
        float abs_res_76163 = (float) fabs(x_j_76162);
        float tmp1_76164 = abs_res_76163 / defunc_1_f_res_75618;
        float x_76165 = tmp1_76164 * tmp1_76164;
        float y_76166 = tmp1_76164 * x_76165;
        float tmp2_76167 = 1.0F - y_76166;
        float x_76168 = tmp2_76167 * tmp2_76167;
        float tmp3_76169 = tmp2_76167 * x_76168;
        float tmp4_76170 = x_76156 * tmp3_76169;
        
        ((float *) mem_75620.mem)[gtid_68308] = x_j_76162;
        ((float *) mem_75621.mem)[gtid_68308] = tmp4_76170;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76816_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76816_end -
                 futhark_mc_segmap_parloop_76816_start;
        
        ctx->futhark_mc_segmap_parloop_76816_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76816_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76816_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76814(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68307 = tid;
    int num_tasks_76235 = info.nsubtasks;
    struct futhark_mc_task_76813 *futhark_mc_task_76813 =
                                 (struct futhark_mc_task_76813 *) args;
    struct futhark_context *ctx = futhark_mc_task_76813->ctx;
    uint64_t futhark_mc_segmap_task_76814_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76814_start = get_wall_time();
    
    int64_t q_64030 = futhark_mc_task_76813->free_q_64030;
    int64_t last_res_68521 = futhark_mc_task_76813->free_last_res_68521;
    struct memblock mem_70481 = {.desc ="mem_70481", .mem =
                                 futhark_mc_task_76813->free_mem_70481, .size =
                                 0, .references =NULL};
    struct memblock mem_70490 = {.desc ="mem_70490", .mem =
                                 futhark_mc_task_76813->free_mem_70490, .size =
                                 0, .references =NULL};
    int64_t min_res_75599 = futhark_mc_task_76813->free_min_res_75599;
    float defunc_1_f_res_75618 =
          futhark_mc_task_76813->free_defunc_1_f_res_75618;
    float defunc_0_f_res_75619 =
          futhark_mc_task_76813->free_defunc_0_f_res_75619;
    struct memblock mem_75620 = {.desc ="mem_75620", .mem =
                                 futhark_mc_task_76813->free_mem_75620, .size =
                                 0, .references =NULL};
    struct memblock mem_75621 = {.desc ="mem_75621", .mem =
                                 futhark_mc_task_76813->free_mem_75621, .size =
                                 0, .references =NULL};
    int64_t iter_76236;
    struct futhark_mc_segmap_parloop_struct_76815
    futhark_mc_segmap_parloop_struct_76815;
    
    futhark_mc_segmap_parloop_struct_76815.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76815.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76815.free_last_res_68521 = last_res_68521;
    futhark_mc_segmap_parloop_struct_76815.free_mem_70481 = mem_70481.mem;
    futhark_mc_segmap_parloop_struct_76815.free_mem_70490 = mem_70490.mem;
    futhark_mc_segmap_parloop_struct_76815.free_min_res_75599 = min_res_75599;
    futhark_mc_segmap_parloop_struct_76815.free_defunc_1_f_res_75618 =
        defunc_1_f_res_75618;
    futhark_mc_segmap_parloop_struct_76815.free_defunc_0_f_res_75619 =
        defunc_0_f_res_75619;
    futhark_mc_segmap_parloop_struct_76815.free_mem_75620 = mem_75620.mem;
    futhark_mc_segmap_parloop_struct_76815.free_mem_75621 = mem_75621.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76816_task;
    
    futhark_mc_segmap_parloop_76816_task.name =
        "futhark_mc_segmap_parloop_76816";
    futhark_mc_segmap_parloop_76816_task.fn = futhark_mc_segmap_parloop_76816;
    futhark_mc_segmap_parloop_76816_task.args =
        &futhark_mc_segmap_parloop_struct_76815;
    futhark_mc_segmap_parloop_76816_task.iterations = iterations;
    futhark_mc_segmap_parloop_76816_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76816_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76816_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76816_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76816_task);
    
    if (futhark_mc_segmap_parloop_76816_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76816_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76816_total_end -
                 futhark_mc_segmap_parloop_76816_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76816_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76816_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76816_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76814_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76814_end -
                 futhark_mc_segmap_task_76814_start;
        
        ctx->futhark_mc_segmap_task_76814_runs[tid]++;
        ctx->futhark_mc_segmap_task_76814_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76814_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76817 {
    struct futhark_context *ctx;
    char *free_mem_75620;
    char *free_mem_75621;
    float *retval_defunc_2_reduce_res_75641;
    float *retval_defunc_2_reduce_res_75642;
    float *retval_defunc_2_reduce_res_75643;
    float *retval_defunc_2_reduce_res_75644;
    float *retval_defunc_2_reduce_res_75645;
    char *retval_mem_75639;
    char *retval_mem_75640;
};
struct futhark_mc_segred_stage_1_parloop_struct_76824 {
    struct futhark_context *ctx;
    char *free_mem_75620;
    char *free_mem_75621;
    char *free_mem_75639;
    char *free_mem_75640;
    char *free_reduce_stage_1_tid_res_arr_mem_76243;
    char *free_reduce_stage_1_tid_res_arr_mem_76245;
    char *free_reduce_stage_1_tid_res_arr_mem_76247;
    char *free_reduce_stage_1_tid_res_arr_mem_76249;
    char *free_reduce_stage_1_tid_res_arr_mem_76251;
};
static int futhark_mc_segred_stage_1_parloop_76825(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_68309, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76824
    *futhark_mc_segred_stage_1_parloop_struct_76824 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76824 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76824->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76825_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76825_start = get_wall_time();
    
    struct memblock mem_75620 = {.desc ="mem_75620", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76824->free_mem_75620,
                                 .size =0, .references =NULL};
    struct memblock mem_75621 = {.desc ="mem_75621", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76824->free_mem_75621,
                                 .size =0, .references =NULL};
    struct memblock mem_75639 = {.desc ="mem_75639", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76824->free_mem_75639,
                                 .size =0, .references =NULL};
    struct memblock mem_75640 = {.desc ="mem_75640", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76824->free_mem_75640,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_76243 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76243",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76824->free_reduce_stage_1_tid_res_arr_mem_76243,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_76245 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76245",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76824->free_reduce_stage_1_tid_res_arr_mem_76245,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_76247 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76247",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76824->free_reduce_stage_1_tid_res_arr_mem_76247,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_76249 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76249",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76824->free_reduce_stage_1_tid_res_arr_mem_76249,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_76251 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76251",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76824->free_reduce_stage_1_tid_res_arr_mem_76251,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76253 = start;
    float x_76171;
    float x_76172;
    float x_76174;
    float x_76175;
    float x_76177;
    float x_76178;
    float x_76180;
    float x_76181;
    float x_76183;
    float x_76184;
    float local_acc_76254 = 0.0F;
    float local_acc_76255 = 0.0F;
    float local_acc_76256 = 0.0F;
    float local_acc_76257 = 0.0F;
    float local_acc_76258 = 0.0F;
    
    for (; iter_76253 < end; iter_76253++) {
        int64_t gtid_68310 = iter_76253;
        float x_76186 = ((float *) mem_75620.mem)[gtid_68310];
        float x_76187 = ((float *) mem_75621.mem)[gtid_68310];
        float defunc_1_f_res_76188 = x_76186 * x_76187;
        float defunc_1_f_res_76189 = x_76186 * defunc_1_f_res_76188;
        float defunc_1_f_res_76190 = x_76186 * defunc_1_f_res_76189;
        float defunc_1_f_res_76191 = x_76186 * defunc_1_f_res_76190;
        
        // save map-out results
        {
            ((float *) mem_75639.mem)[gtid_68310] = defunc_1_f_res_76189;
            ((float *) mem_75640.mem)[gtid_68310] = defunc_1_f_res_76188;
        }
        // Load accum params
        {
            x_76171 = local_acc_76254;
        }
        // Load next params
        {
            x_76172 = x_76187;
        }
        // Red body
        {
            float defunc_1_op_res_76173 = x_76171 + x_76172;
            
            local_acc_76254 = defunc_1_op_res_76173;
        }
        // Load accum params
        {
            x_76174 = local_acc_76255;
        }
        // Load next params
        {
            x_76175 = defunc_1_f_res_76188;
        }
        // Red body
        {
            float defunc_1_op_res_76176 = x_76174 + x_76175;
            
            local_acc_76255 = defunc_1_op_res_76176;
        }
        // Load accum params
        {
            x_76177 = local_acc_76256;
        }
        // Load next params
        {
            x_76178 = defunc_1_f_res_76189;
        }
        // Red body
        {
            float defunc_1_op_res_76179 = x_76177 + x_76178;
            
            local_acc_76256 = defunc_1_op_res_76179;
        }
        // Load accum params
        {
            x_76180 = local_acc_76257;
        }
        // Load next params
        {
            x_76181 = defunc_1_f_res_76190;
        }
        // Red body
        {
            float defunc_1_op_res_76182 = x_76180 + x_76181;
            
            local_acc_76257 = defunc_1_op_res_76182;
        }
        // Load accum params
        {
            x_76183 = local_acc_76258;
        }
        // Load next params
        {
            x_76184 = defunc_1_f_res_76191;
        }
        // Red body
        {
            float defunc_1_op_res_76185 = x_76183 + x_76184;
            
            local_acc_76258 = defunc_1_op_res_76185;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_76243.mem)[flat_tid_68309] =
        local_acc_76254;
    ((float *) reduce_stage_1_tid_res_arr_mem_76245.mem)[flat_tid_68309] =
        local_acc_76255;
    ((float *) reduce_stage_1_tid_res_arr_mem_76247.mem)[flat_tid_68309] =
        local_acc_76256;
    ((float *) reduce_stage_1_tid_res_arr_mem_76249.mem)[flat_tid_68309] =
        local_acc_76257;
    ((float *) reduce_stage_1_tid_res_arr_mem_76251.mem)[flat_tid_68309] =
        local_acc_76258;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76825_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76825_end -
                 futhark_mc_segred_stage_1_parloop_76825_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76825_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76825_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76825_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76818(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68309 = tid;
    int num_tasks_76242 = info.nsubtasks;
    struct futhark_mc_task_76817 *futhark_mc_task_76817 =
                                 (struct futhark_mc_task_76817 *) args;
    struct futhark_context *ctx = futhark_mc_task_76817->ctx;
    uint64_t futhark_mc_segred_task_76818_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76818_start = get_wall_time();
    
    struct memblock mem_75620 = {.desc ="mem_75620", .mem =
                                 futhark_mc_task_76817->free_mem_75620, .size =
                                 0, .references =NULL};
    struct memblock mem_75621 = {.desc ="mem_75621", .mem =
                                 futhark_mc_task_76817->free_mem_75621, .size =
                                 0, .references =NULL};
    float defunc_2_reduce_res_75641 =
          *futhark_mc_task_76817->retval_defunc_2_reduce_res_75641;
    float defunc_2_reduce_res_75642 =
          *futhark_mc_task_76817->retval_defunc_2_reduce_res_75642;
    float defunc_2_reduce_res_75643 =
          *futhark_mc_task_76817->retval_defunc_2_reduce_res_75643;
    float defunc_2_reduce_res_75644 =
          *futhark_mc_task_76817->retval_defunc_2_reduce_res_75644;
    float defunc_2_reduce_res_75645 =
          *futhark_mc_task_76817->retval_defunc_2_reduce_res_75645;
    struct memblock mem_75639 = {.desc ="mem_75639", .mem =
                                 futhark_mc_task_76817->retval_mem_75639,
                                 .size =0, .references =NULL};
    struct memblock mem_75640 = {.desc ="mem_75640", .mem =
                                 futhark_mc_task_76817->retval_mem_75640,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_76243_cached_sizze_76819 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76243 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_76245_cached_sizze_76820 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76245 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_76247_cached_sizze_76821 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76247 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_76249_cached_sizze_76822 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76249 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_76251_cached_sizze_76823 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76251 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_76243_cached_sizze_76819 <
        (size_t) ((int64_t) 4 * num_tasks_76242)) {
        reduce_stage_1_tid_res_arr_mem_76243 =
            realloc(reduce_stage_1_tid_res_arr_mem_76243, (int64_t) 4 *
                    num_tasks_76242);
        reduce_stage_1_tid_res_arr_mem_76243_cached_sizze_76819 = (int64_t) 4 *
            num_tasks_76242;
    }
    if (reduce_stage_1_tid_res_arr_mem_76245_cached_sizze_76820 <
        (size_t) ((int64_t) 4 * num_tasks_76242)) {
        reduce_stage_1_tid_res_arr_mem_76245 =
            realloc(reduce_stage_1_tid_res_arr_mem_76245, (int64_t) 4 *
                    num_tasks_76242);
        reduce_stage_1_tid_res_arr_mem_76245_cached_sizze_76820 = (int64_t) 4 *
            num_tasks_76242;
    }
    if (reduce_stage_1_tid_res_arr_mem_76247_cached_sizze_76821 <
        (size_t) ((int64_t) 4 * num_tasks_76242)) {
        reduce_stage_1_tid_res_arr_mem_76247 =
            realloc(reduce_stage_1_tid_res_arr_mem_76247, (int64_t) 4 *
                    num_tasks_76242);
        reduce_stage_1_tid_res_arr_mem_76247_cached_sizze_76821 = (int64_t) 4 *
            num_tasks_76242;
    }
    if (reduce_stage_1_tid_res_arr_mem_76249_cached_sizze_76822 <
        (size_t) ((int64_t) 4 * num_tasks_76242)) {
        reduce_stage_1_tid_res_arr_mem_76249 =
            realloc(reduce_stage_1_tid_res_arr_mem_76249, (int64_t) 4 *
                    num_tasks_76242);
        reduce_stage_1_tid_res_arr_mem_76249_cached_sizze_76822 = (int64_t) 4 *
            num_tasks_76242;
    }
    if (reduce_stage_1_tid_res_arr_mem_76251_cached_sizze_76823 <
        (size_t) ((int64_t) 4 * num_tasks_76242)) {
        reduce_stage_1_tid_res_arr_mem_76251 =
            realloc(reduce_stage_1_tid_res_arr_mem_76251, (int64_t) 4 *
                    num_tasks_76242);
        reduce_stage_1_tid_res_arr_mem_76251_cached_sizze_76823 = (int64_t) 4 *
            num_tasks_76242;
    }
    
    int64_t iter_76253;
    struct futhark_mc_segred_stage_1_parloop_struct_76824
    futhark_mc_segred_stage_1_parloop_struct_76824;
    
    futhark_mc_segred_stage_1_parloop_struct_76824.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76824.free_mem_75620 =
        mem_75620.mem;
    futhark_mc_segred_stage_1_parloop_struct_76824.free_mem_75621 =
        mem_75621.mem;
    futhark_mc_segred_stage_1_parloop_struct_76824.free_mem_75639 =
        mem_75639.mem;
    futhark_mc_segred_stage_1_parloop_struct_76824.free_mem_75640 =
        mem_75640.mem;
    futhark_mc_segred_stage_1_parloop_struct_76824.free_reduce_stage_1_tid_res_arr_mem_76243 =
        reduce_stage_1_tid_res_arr_mem_76243;
    futhark_mc_segred_stage_1_parloop_struct_76824.free_reduce_stage_1_tid_res_arr_mem_76245 =
        reduce_stage_1_tid_res_arr_mem_76245;
    futhark_mc_segred_stage_1_parloop_struct_76824.free_reduce_stage_1_tid_res_arr_mem_76247 =
        reduce_stage_1_tid_res_arr_mem_76247;
    futhark_mc_segred_stage_1_parloop_struct_76824.free_reduce_stage_1_tid_res_arr_mem_76249 =
        reduce_stage_1_tid_res_arr_mem_76249;
    futhark_mc_segred_stage_1_parloop_struct_76824.free_reduce_stage_1_tid_res_arr_mem_76251 =
        reduce_stage_1_tid_res_arr_mem_76251;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76825_task;
    
    futhark_mc_segred_stage_1_parloop_76825_task.name =
        "futhark_mc_segred_stage_1_parloop_76825";
    futhark_mc_segred_stage_1_parloop_76825_task.fn =
        futhark_mc_segred_stage_1_parloop_76825;
    futhark_mc_segred_stage_1_parloop_76825_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76824;
    futhark_mc_segred_stage_1_parloop_76825_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76825_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76825_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76825_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76825_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76825_task);
    
    if (futhark_mc_segred_stage_1_parloop_76825_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76825_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76825_total_end -
                 futhark_mc_segred_stage_1_parloop_76825_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76825_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76825_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76825_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_75641 = 0.0F;
        defunc_2_reduce_res_75642 = 0.0F;
        defunc_2_reduce_res_75643 = 0.0F;
        defunc_2_reduce_res_75644 = 0.0F;
        defunc_2_reduce_res_75645 = 0.0F;
    }
    
    float x_76259;
    float x_76260;
    float x_76262;
    float x_76263;
    float x_76265;
    float x_76266;
    float x_76268;
    float x_76269;
    float x_76271;
    float x_76272;
    
    for (int32_t i_76274 = 0; i_76274 < num_tasks_76242; i_76274++) {
        flat_tid_68309 = i_76274;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_76259 = defunc_2_reduce_res_75641;
            }
            // load next params
            {
                x_76260 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_76243)[flat_tid_68309];
            }
            // red body
            {
                float defunc_1_op_res_76261 = x_76259 + x_76260;
                
                defunc_2_reduce_res_75641 = defunc_1_op_res_76261;
            }
            // load acc params
            {
                x_76262 = defunc_2_reduce_res_75642;
            }
            // load next params
            {
                x_76263 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_76245)[flat_tid_68309];
            }
            // red body
            {
                float defunc_1_op_res_76264 = x_76262 + x_76263;
                
                defunc_2_reduce_res_75642 = defunc_1_op_res_76264;
            }
            // load acc params
            {
                x_76265 = defunc_2_reduce_res_75643;
            }
            // load next params
            {
                x_76266 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_76247)[flat_tid_68309];
            }
            // red body
            {
                float defunc_1_op_res_76267 = x_76265 + x_76266;
                
                defunc_2_reduce_res_75643 = defunc_1_op_res_76267;
            }
            // load acc params
            {
                x_76268 = defunc_2_reduce_res_75644;
            }
            // load next params
            {
                x_76269 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_76249)[flat_tid_68309];
            }
            // red body
            {
                float defunc_1_op_res_76270 = x_76268 + x_76269;
                
                defunc_2_reduce_res_75644 = defunc_1_op_res_76270;
            }
            // load acc params
            {
                x_76271 = defunc_2_reduce_res_75645;
            }
            // load next params
            {
                x_76272 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_76251)[flat_tid_68309];
            }
            // red body
            {
                float defunc_1_op_res_76273 = x_76271 + x_76272;
                
                defunc_2_reduce_res_75645 = defunc_1_op_res_76273;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_76243);
    free(reduce_stage_1_tid_res_arr_mem_76245);
    free(reduce_stage_1_tid_res_arr_mem_76247);
    free(reduce_stage_1_tid_res_arr_mem_76249);
    free(reduce_stage_1_tid_res_arr_mem_76251);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76818_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76818_end -
                 futhark_mc_segred_task_76818_start;
        
        ctx->futhark_mc_segred_task_76818_runs[tid]++;
        ctx->futhark_mc_segred_task_76818_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76818_iter[tid] += iterations;
    }
    *futhark_mc_task_76817->retval_defunc_2_reduce_res_75641 =
        defunc_2_reduce_res_75641;
    *futhark_mc_task_76817->retval_defunc_2_reduce_res_75642 =
        defunc_2_reduce_res_75642;
    *futhark_mc_task_76817->retval_defunc_2_reduce_res_75643 =
        defunc_2_reduce_res_75643;
    *futhark_mc_task_76817->retval_defunc_2_reduce_res_75644 =
        defunc_2_reduce_res_75644;
    *futhark_mc_task_76817->retval_defunc_2_reduce_res_75645 =
        defunc_2_reduce_res_75645;
    futhark_mc_task_76817->retval_mem_75639 = mem_75639.mem;
    futhark_mc_task_76817->retval_mem_75640 = mem_75640.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76826 {
    struct futhark_context *ctx;
    int64_t free_last_res_68521;
    char *free_mem_70475;
    int64_t free_min_res_75599;
    char *free_mem_75621;
    char *free_mem_75639;
    char *free_mem_75640;
    float free_a12_75689;
    float free_b12_75690;
    float free_c12_75691;
    float free_b2_75692;
    float free_c2_75693;
    float *retval_defunc_2_reduce_res_75694;
    float *retval_defunc_2_reduce_res_75695;
};
struct futhark_mc_segred_stage_1_parloop_struct_76830 {
    struct futhark_context *ctx;
    int64_t free_last_res_68521;
    char *free_mem_70475;
    int64_t free_min_res_75599;
    char *free_mem_75621;
    char *free_mem_75639;
    char *free_mem_75640;
    float free_a12_75689;
    float free_b12_75690;
    float free_c12_75691;
    float free_b2_75692;
    float free_c2_75693;
    char *free_reduce_stage_1_tid_res_arr_mem_76276;
    char *free_reduce_stage_1_tid_res_arr_mem_76278;
};
static int futhark_mc_segred_stage_1_parloop_76831(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_68311, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_76830
    *futhark_mc_segred_stage_1_parloop_struct_76830 =
    (struct futhark_mc_segred_stage_1_parloop_struct_76830 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_76830->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_76831_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76831_start = get_wall_time();
    
    int64_t last_res_68521 =
            futhark_mc_segred_stage_1_parloop_struct_76830->free_last_res_68521;
    struct memblock mem_70475 = {.desc ="mem_70475", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76830->free_mem_70475,
                                 .size =0, .references =NULL};
    int64_t min_res_75599 =
            futhark_mc_segred_stage_1_parloop_struct_76830->free_min_res_75599;
    struct memblock mem_75621 = {.desc ="mem_75621", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76830->free_mem_75621,
                                 .size =0, .references =NULL};
    struct memblock mem_75639 = {.desc ="mem_75639", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76830->free_mem_75639,
                                 .size =0, .references =NULL};
    struct memblock mem_75640 = {.desc ="mem_75640", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_76830->free_mem_75640,
                                 .size =0, .references =NULL};
    float a12_75689 =
          futhark_mc_segred_stage_1_parloop_struct_76830->free_a12_75689;
    float b12_75690 =
          futhark_mc_segred_stage_1_parloop_struct_76830->free_b12_75690;
    float c12_75691 =
          futhark_mc_segred_stage_1_parloop_struct_76830->free_c12_75691;
    float b2_75692 =
          futhark_mc_segred_stage_1_parloop_struct_76830->free_b2_75692;
    float c2_75693 =
          futhark_mc_segred_stage_1_parloop_struct_76830->free_c2_75693;
    struct memblock reduce_stage_1_tid_res_arr_mem_76276 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76276",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76830->free_reduce_stage_1_tid_res_arr_mem_76276,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_76278 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_76278",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_76830->free_reduce_stage_1_tid_res_arr_mem_76278,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76280 = start;
    float x_76192;
    float x_76193;
    float x_76195;
    float x_76196;
    float local_acc_76281 = 0.0F;
    float local_acc_76282 = 0.0F;
    
    for (; iter_76280 < end; iter_76280++) {
        int64_t gtid_68312 = iter_76280;
        float x_76198 = ((float *) mem_75621.mem)[gtid_68312];
        float x_76199 = ((float *) mem_75640.mem)[gtid_68312];
        float x_76200 = ((float *) mem_75639.mem)[gtid_68312];
        bool cond_76201 = sle64(last_res_68521, gtid_68312);
        float defunc_0_f_res_76202;
        
        if (cond_76201) {
            defunc_0_f_res_76202 = 0.0F;
        } else {
            int64_t i_76203 = add64(gtid_68312, min_res_75599);
            float x_76204 = ((float *) mem_70475.mem)[i_76203];
            
            defunc_0_f_res_76202 = x_76204;
        }
        
        float x_76205 = a12_75689 * x_76198;
        float y_76206 = b12_75690 * x_76199;
        float x_76207 = x_76205 + y_76206;
        float y_76208 = c12_75691 * x_76200;
        float x_76209 = x_76207 + y_76208;
        float defunc_9_fit_fun_res_76210 = defunc_0_f_res_76202 * x_76209;
        float x_76211 = b12_75690 * x_76198;
        float y_76212 = b2_75692 * x_76199;
        float x_76213 = x_76211 + y_76212;
        float y_76214 = c2_75693 * x_76200;
        float x_76215 = x_76213 + y_76214;
        float defunc_9_slope_fun_res_76216 = defunc_0_f_res_76202 * x_76215;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_76192 = local_acc_76281;
        }
        // Load next params
        {
            x_76193 = defunc_9_fit_fun_res_76210;
        }
        // Red body
        {
            float defunc_1_op_res_76194 = x_76192 + x_76193;
            
            local_acc_76281 = defunc_1_op_res_76194;
        }
        // Load accum params
        {
            x_76195 = local_acc_76282;
        }
        // Load next params
        {
            x_76196 = defunc_9_slope_fun_res_76216;
        }
        // Red body
        {
            float defunc_1_op_res_76197 = x_76195 + x_76196;
            
            local_acc_76282 = defunc_1_op_res_76197;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_76276.mem)[flat_tid_68311] =
        local_acc_76281;
    ((float *) reduce_stage_1_tid_res_arr_mem_76278.mem)[flat_tid_68311] =
        local_acc_76282;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76831_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76831_end -
                 futhark_mc_segred_stage_1_parloop_76831_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_76831_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_76831_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_76831_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_76827(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68311 = tid;
    int num_tasks_76275 = info.nsubtasks;
    struct futhark_mc_task_76826 *futhark_mc_task_76826 =
                                 (struct futhark_mc_task_76826 *) args;
    struct futhark_context *ctx = futhark_mc_task_76826->ctx;
    uint64_t futhark_mc_segred_task_76827_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_76827_start = get_wall_time();
    
    int64_t last_res_68521 = futhark_mc_task_76826->free_last_res_68521;
    struct memblock mem_70475 = {.desc ="mem_70475", .mem =
                                 futhark_mc_task_76826->free_mem_70475, .size =
                                 0, .references =NULL};
    int64_t min_res_75599 = futhark_mc_task_76826->free_min_res_75599;
    struct memblock mem_75621 = {.desc ="mem_75621", .mem =
                                 futhark_mc_task_76826->free_mem_75621, .size =
                                 0, .references =NULL};
    struct memblock mem_75639 = {.desc ="mem_75639", .mem =
                                 futhark_mc_task_76826->free_mem_75639, .size =
                                 0, .references =NULL};
    struct memblock mem_75640 = {.desc ="mem_75640", .mem =
                                 futhark_mc_task_76826->free_mem_75640, .size =
                                 0, .references =NULL};
    float a12_75689 = futhark_mc_task_76826->free_a12_75689;
    float b12_75690 = futhark_mc_task_76826->free_b12_75690;
    float c12_75691 = futhark_mc_task_76826->free_c12_75691;
    float b2_75692 = futhark_mc_task_76826->free_b2_75692;
    float c2_75693 = futhark_mc_task_76826->free_c2_75693;
    float defunc_2_reduce_res_75694 =
          *futhark_mc_task_76826->retval_defunc_2_reduce_res_75694;
    float defunc_2_reduce_res_75695 =
          *futhark_mc_task_76826->retval_defunc_2_reduce_res_75695;
    size_t reduce_stage_1_tid_res_arr_mem_76276_cached_sizze_76828 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76276 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_76278_cached_sizze_76829 = 0;
    char *reduce_stage_1_tid_res_arr_mem_76278 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_76276_cached_sizze_76828 <
        (size_t) ((int64_t) 4 * num_tasks_76275)) {
        reduce_stage_1_tid_res_arr_mem_76276 =
            realloc(reduce_stage_1_tid_res_arr_mem_76276, (int64_t) 4 *
                    num_tasks_76275);
        reduce_stage_1_tid_res_arr_mem_76276_cached_sizze_76828 = (int64_t) 4 *
            num_tasks_76275;
    }
    if (reduce_stage_1_tid_res_arr_mem_76278_cached_sizze_76829 <
        (size_t) ((int64_t) 4 * num_tasks_76275)) {
        reduce_stage_1_tid_res_arr_mem_76278 =
            realloc(reduce_stage_1_tid_res_arr_mem_76278, (int64_t) 4 *
                    num_tasks_76275);
        reduce_stage_1_tid_res_arr_mem_76278_cached_sizze_76829 = (int64_t) 4 *
            num_tasks_76275;
    }
    
    int64_t iter_76280;
    struct futhark_mc_segred_stage_1_parloop_struct_76830
    futhark_mc_segred_stage_1_parloop_struct_76830;
    
    futhark_mc_segred_stage_1_parloop_struct_76830.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_76830.free_last_res_68521 =
        last_res_68521;
    futhark_mc_segred_stage_1_parloop_struct_76830.free_mem_70475 =
        mem_70475.mem;
    futhark_mc_segred_stage_1_parloop_struct_76830.free_min_res_75599 =
        min_res_75599;
    futhark_mc_segred_stage_1_parloop_struct_76830.free_mem_75621 =
        mem_75621.mem;
    futhark_mc_segred_stage_1_parloop_struct_76830.free_mem_75639 =
        mem_75639.mem;
    futhark_mc_segred_stage_1_parloop_struct_76830.free_mem_75640 =
        mem_75640.mem;
    futhark_mc_segred_stage_1_parloop_struct_76830.free_a12_75689 = a12_75689;
    futhark_mc_segred_stage_1_parloop_struct_76830.free_b12_75690 = b12_75690;
    futhark_mc_segred_stage_1_parloop_struct_76830.free_c12_75691 = c12_75691;
    futhark_mc_segred_stage_1_parloop_struct_76830.free_b2_75692 = b2_75692;
    futhark_mc_segred_stage_1_parloop_struct_76830.free_c2_75693 = c2_75693;
    futhark_mc_segred_stage_1_parloop_struct_76830.free_reduce_stage_1_tid_res_arr_mem_76276 =
        reduce_stage_1_tid_res_arr_mem_76276;
    futhark_mc_segred_stage_1_parloop_struct_76830.free_reduce_stage_1_tid_res_arr_mem_76278 =
        reduce_stage_1_tid_res_arr_mem_76278;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_76831_task;
    
    futhark_mc_segred_stage_1_parloop_76831_task.name =
        "futhark_mc_segred_stage_1_parloop_76831";
    futhark_mc_segred_stage_1_parloop_76831_task.fn =
        futhark_mc_segred_stage_1_parloop_76831;
    futhark_mc_segred_stage_1_parloop_76831_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_76830;
    futhark_mc_segred_stage_1_parloop_76831_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_76831_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_76831_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_76831_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_76831_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_76831_task);
    
    if (futhark_mc_segred_stage_1_parloop_76831_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_76831_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_76831_total_end -
                 futhark_mc_segred_stage_1_parloop_76831_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76831_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76831_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_76831_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_75694 = 0.0F;
        defunc_2_reduce_res_75695 = 0.0F;
    }
    
    float x_76283;
    float x_76284;
    float x_76286;
    float x_76287;
    
    for (int32_t i_76289 = 0; i_76289 < num_tasks_76275; i_76289++) {
        flat_tid_68311 = i_76289;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_76283 = defunc_2_reduce_res_75694;
            }
            // load next params
            {
                x_76284 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_76276)[flat_tid_68311];
            }
            // red body
            {
                float defunc_1_op_res_76285 = x_76283 + x_76284;
                
                defunc_2_reduce_res_75694 = defunc_1_op_res_76285;
            }
            // load acc params
            {
                x_76286 = defunc_2_reduce_res_75695;
            }
            // load next params
            {
                x_76287 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_76278)[flat_tid_68311];
            }
            // red body
            {
                float defunc_1_op_res_76288 = x_76286 + x_76287;
                
                defunc_2_reduce_res_75695 = defunc_1_op_res_76288;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_76276);
    free(reduce_stage_1_tid_res_arr_mem_76278);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_76827_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_76827_end -
                 futhark_mc_segred_task_76827_start;
        
        ctx->futhark_mc_segred_task_76827_runs[tid]++;
        ctx->futhark_mc_segred_task_76827_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_76827_iter[tid] += iterations;
    }
    *futhark_mc_task_76826->retval_defunc_2_reduce_res_75694 =
        defunc_2_reduce_res_75694;
    *futhark_mc_task_76826->retval_defunc_2_reduce_res_75695 =
        defunc_2_reduce_res_75695;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76803(void *args, int64_t start,
                                           int64_t end, int flat_tid_68303,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76802
    *futhark_mc_segmap_parloop_struct_76802 =
    (struct futhark_mc_segmap_parloop_struct_76802 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76802->ctx;
    uint64_t futhark_mc_segmap_parloop_76803_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76803_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76802->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76802->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76802->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76802->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76802->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76802->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76802->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76802->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76802->free_m_64052;
    int64_t last_res_68521 =
            futhark_mc_segmap_parloop_struct_76802->free_last_res_68521;
    int64_t min_arg_68533 =
            futhark_mc_segmap_parloop_struct_76802->free_min_arg_68533;
    float max_res_68537 =
          futhark_mc_segmap_parloop_struct_76802->free_max_res_68537;
    struct memblock mem_70475 = {.desc ="mem_70475", .mem =
                                 futhark_mc_segmap_parloop_struct_76802->free_mem_70475,
                                 .size =0, .references =NULL};
    struct memblock mem_70478 = {.desc ="mem_70478", .mem =
                                 futhark_mc_segmap_parloop_struct_76802->free_mem_70478,
                                 .size =0, .references =NULL};
    struct memblock mem_70481 = {.desc ="mem_70481", .mem =
                                 futhark_mc_segmap_parloop_struct_76802->free_mem_70481,
                                 .size =0, .references =NULL};
    struct memblock mem_70484 = {.desc ="mem_70484", .mem =
                                 futhark_mc_segmap_parloop_struct_76802->free_mem_70484,
                                 .size =0, .references =NULL};
    struct memblock mem_70487 = {.desc ="mem_70487", .mem =
                                 futhark_mc_segmap_parloop_struct_76802->free_mem_70487,
                                 .size =0, .references =NULL};
    int64_t bytes_70488 =
            futhark_mc_segmap_parloop_struct_76802->free_bytes_70488;
    struct memblock mem_70490 = {.desc ="mem_70490", .mem =
                                 futhark_mc_segmap_parloop_struct_76802->free_mem_70490,
                                 .size =0, .references =NULL};
    struct memblock mem_70565 = {.desc ="mem_70565", .mem =
                                 futhark_mc_segmap_parloop_struct_76802->free_mem_70565,
                                 .size =0, .references =NULL};
    struct memblock mem_70568 = {.desc ="mem_70568", .mem =
                                 futhark_mc_segmap_parloop_struct_76802->free_mem_70568,
                                 .size =0, .references =NULL};
    size_t mem_75620_cached_sizze_76804 = 0;
    char *mem_75620 = NULL;
    size_t mem_75621_cached_sizze_76805 = 0;
    char *mem_75621 = NULL;
    size_t mem_75639_cached_sizze_76806 = 0;
    char *mem_75639 = NULL;
    size_t mem_75640_cached_sizze_76807 = 0;
    char *mem_75640 = NULL;
    int64_t iterations = end - start;
    int64_t iter_76102 = start;
    
    if (mem_75620_cached_sizze_76804 < (size_t) bytes_70488) {
        mem_75620 = realloc(mem_75620, bytes_70488);
        mem_75620_cached_sizze_76804 = bytes_70488;
    }
    if (mem_75621_cached_sizze_76805 < (size_t) bytes_70488) {
        mem_75621 = realloc(mem_75621, bytes_70488);
        mem_75621_cached_sizze_76805 = bytes_70488;
    }
    if (mem_75639_cached_sizze_76806 < (size_t) bytes_70488) {
        mem_75639 = realloc(mem_75639, bytes_70488);
        mem_75639_cached_sizze_76806 = bytes_70488;
    }
    if (mem_75640_cached_sizze_76807 < (size_t) bytes_70488) {
        mem_75640 = realloc(mem_75640, bytes_70488);
        mem_75640_cached_sizze_76807 = bytes_70488;
    }
    for (; iter_76102 < end; iter_76102++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76217 = n_m_64039;
        int64_t gtid_68304 = iter_76102;
        int64_t remnant_76218 = iter_76102 - gtid_68304;
        int64_t min_arg_75521 = mul64(jump_64032, gtid_68304);
        int64_t min_res_75522 = smin64(i_64040, min_arg_75521);
        int64_t defunc_0_g_res_75523 = add64((int64_t) 1, min_res_75522);
        bool nearest_idx_75524;
        int64_t nearest_idx_75525;
        int64_t nearest_idx_75526;
        bool loop_while_76103;
        int64_t low_76104;
        int64_t high_76105;
        
        loop_while_76103 = x_64041;
        low_76104 = (int64_t) 0;
        high_76105 = i_64040;
        while (loop_while_76103) {
            int64_t x_76106 = add64(low_76104, high_76105);
            int64_t mid_76107 = sdiv64(x_76106, (int64_t) 2);
            bool x_76108 = sle64((int64_t) 0, mid_76107);
            bool y_76109 = slt64(mid_76107, n_64028);
            bool bounds_check_76110 = x_76108 && y_76109;
            bool index_certs_76111;
            
            if (!bounds_check_76110) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_76107,
                              "] out of bounds for array of shape [",
                              (long long) n_64028, "].",
                              "-> #0  loess.fut:343:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            int64_t x_76112 = ((int64_t *) mem_70484.mem)[mid_76107];
            bool cond_76113 = sle64(defunc_0_g_res_75523, x_76112);
            int64_t loopres_76114;
            int64_t loopres_76115;
            
            if (cond_76113) {
                int64_t loopres_t_res_76116 = sub64(mid_76107, (int64_t) 1);
                
                loopres_76114 = low_76104;
                loopres_76115 = loopres_t_res_76116;
            } else {
                int64_t loopres_f_res_76117 = add64((int64_t) 1, mid_76107);
                
                loopres_76114 = loopres_f_res_76117;
                loopres_76115 = high_76105;
            }
            
            bool loop_cond_76118 = sle64(loopres_76114, loopres_76115);
            bool loop_while_tmp_76219 = loop_cond_76118;
            int64_t low_tmp_76220 = loopres_76114;
            int64_t high_tmp_76221 = loopres_76115;
            
            loop_while_76103 = loop_while_tmp_76219;
            low_76104 = low_tmp_76220;
            high_76105 = high_tmp_76221;
        }
        nearest_idx_75524 = loop_while_76103;
        nearest_idx_75525 = low_76104;
        nearest_idx_75526 = high_76105;
        
        int64_t max_arg_75543 = sub64(nearest_idx_75525, min_res_64046);
        int64_t max_res_75544 = smax64((int64_t) 0, max_arg_75543);
        int64_t j_75545 = add64(min_res_64046, max_res_75544);
        int64_t i_p_m_t_s_75546 = add64(m_64052, max_res_75544);
        bool zzero_leq_i_p_m_t_s_75547 = sle64((int64_t) 0, i_p_m_t_s_75546);
        bool i_p_m_t_s_leq_w_75548 = slt64(i_p_m_t_s_75546, n_64028);
        bool zzero_lte_i_75549 = sle64((int64_t) 0, max_res_75544);
        bool i_lte_j_75550 = sle64(max_res_75544, j_75545);
        bool y_75551 = i_p_m_t_s_leq_w_75548 && zzero_lte_i_75549;
        bool y_75552 = zzero_leq_i_p_m_t_s_75547 && y_75551;
        bool y_75553 = i_lte_j_75550 && y_75552;
        bool forwards_ok_75554 = zzero_lte_i_75549 && y_75553;
        bool ok_or_empty_75555 = empty_slice_64051 || forwards_ok_75554;
        bool index_certs_75556;
        
        if (!ok_or_empty_75555) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_75544, ":",
                          (long long) j_75545,
                          "] out of bounds for array of shape [",
                          (long long) n_64028, "].",
                          "-> #0  loess.fut:350:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_75557;
        int64_t flat_tid_68305 = (int64_t) 0;
        int32_t num_tasks_76222;
        struct futhark_mc_task_76808 futhark_mc_task_76808;
        
        futhark_mc_task_76808.ctx = ctx;
        futhark_mc_task_76808.free_mem_70487 = mem_70487.mem;
        futhark_mc_task_76808.free_defunc_0_g_res_75523 = defunc_0_g_res_75523;
        futhark_mc_task_76808.free_max_res_75544 = max_res_75544;
        futhark_mc_task_76808.retval_defunc_2_reduce_res_75557 =
            &defunc_2_reduce_res_75557;
        
        struct scheduler_segop futhark_mc_task_76808_task;
        
        futhark_mc_task_76808_task.args = &futhark_mc_task_76808;
        futhark_mc_task_76808_task.top_level_fn = futhark_mc_segred_task_76809;
        futhark_mc_task_76808_task.name = "futhark_mc_segred_task_76809";
        futhark_mc_task_76808_task.iterations = min_res_64046;
        futhark_mc_task_76808_task.task_time =
            &ctx->futhark_mc_segred_task_76809_total_time;
        futhark_mc_task_76808_task.task_iter =
            &ctx->futhark_mc_segred_task_76809_total_iter;
        futhark_mc_task_76808_task.sched = STATIC;
        futhark_mc_task_76808_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76809_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76808_task);
        
        if (futhark_mc_segred_task_76809_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_75565;
        int64_t idx_75566;
        int64_t idx_75567;
        int64_t idx_75568;
        int64_t best_idx_76127;
        int64_t last_idx_76128;
        int64_t best_sum_76129;
        int64_t curr_sum_76130;
        
        best_idx_76127 = max_res_75544;
        last_idx_76128 = max_res_75544;
        best_sum_76129 = defunc_2_reduce_res_75557;
        curr_sum_76130 = defunc_2_reduce_res_75557;
        for (int64_t j_76126 = 0; j_76126 < min_res_64046; j_76126++) {
            int64_t new_idx_76131 = add64(max_res_75544, j_76126);
            int64_t x_76132 = add64(min_res_64046, new_idx_76131);
            bool cond_76133 = slt64(last_res_68521, x_76132);
            int64_t new_sum_76134;
            
            if (cond_76133) {
                new_sum_76134 = (int64_t) 9223372036854775807;
            } else {
                bool x_76135 = sle64((int64_t) 0, last_idx_76128);
                bool y_76136 = slt64(last_idx_76128, n_64028);
                bool bounds_check_76137 = x_76135 && y_76136;
                bool index_certs_76138;
                
                if (!bounds_check_76137) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_76128,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:362:51-66\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_76139 = ((int64_t *) mem_70487.mem)[last_idx_76128];
                int64_t binop_p_76140 = sub64(defunc_0_g_res_75523, y_76139);
                int64_t defunc_0_f_res_76141 = abs64(binop_p_76140);
                int64_t x_76142 = sub64(curr_sum_76130, defunc_0_f_res_76141);
                int64_t min_arg_76143 = add64(min_res_64046, last_idx_76128);
                int64_t min_res_76144 = smin64(i_64040, min_arg_76143);
                bool x_76145 = sle64((int64_t) 0, min_res_76144);
                bool y_76146 = slt64(min_res_76144, n_64028);
                bool bounds_check_76147 = x_76145 && y_76146;
                bool index_certs_76148;
                
                if (!bounds_check_76147) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_76144,
                                  "] out of bounds for array of shape [",
                                  (long long) n_64028, "].",
                                  "-> #0  loess.fut:363:51-88\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:335:3-373:7\n   #4  loess.fut:402:15-58\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
                    return 1;
                }
                
                int64_t y_76149 = ((int64_t *) mem_70487.mem)[min_res_76144];
                int64_t binop_p_76150 = sub64(defunc_0_g_res_75523, y_76149);
                int64_t defunc_0_f_res_76151 = abs64(binop_p_76150);
                int64_t new_sum_f_res_76152 = add64(x_76142,
                                                    defunc_0_f_res_76151);
                
                new_sum_76134 = new_sum_f_res_76152;
            }
            
            bool cond_76153 = sle64(new_sum_76134, best_sum_76129);
            int64_t loopres_76154;
            
            if (cond_76153) {
                loopres_76154 = new_idx_76131;
            } else {
                loopres_76154 = best_idx_76127;
            }
            
            int64_t loopres_76155;
            
            if (cond_76153) {
                loopres_76155 = new_sum_76134;
            } else {
                loopres_76155 = best_sum_76129;
            }
            
            int64_t best_idx_tmp_76231 = loopres_76154;
            int64_t last_idx_tmp_76232 = new_idx_76131;
            int64_t best_sum_tmp_76233 = loopres_76155;
            int64_t curr_sum_tmp_76234 = new_sum_76134;
            
            best_idx_76127 = best_idx_tmp_76231;
            last_idx_76128 = last_idx_tmp_76232;
            best_sum_76129 = best_sum_tmp_76233;
            curr_sum_76130 = curr_sum_tmp_76234;
        }
        idx_75565 = best_idx_76127;
        idx_75566 = last_idx_76128;
        idx_75567 = best_sum_76129;
        idx_75568 = curr_sum_76130;
        
        int64_t min_res_75599 = smin64(min_arg_68533, idx_75565);
        int64_t x_75600 = add64(min_res_64046, min_res_75599);
        int64_t r_75601 = sub64(x_75600, (int64_t) 1);
        bool x_75602 = sle64((int64_t) 0, r_75601);
        bool y_75603 = slt64(r_75601, n_64028);
        bool bounds_check_75604 = x_75602 && y_75603;
        bool index_certs_75605;
        
        if (!bounds_check_75604) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_75601,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:66-73\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_75606 = ((int64_t *) mem_70478.mem)[r_75601];
        int64_t abs_arg_75607 = sub64(x_75606, min_res_75522);
        int64_t abs_res_75608 = abs64(abs_arg_75607);
        bool x_75609 = sle64((int64_t) 0, min_res_75599);
        bool y_75610 = slt64(min_res_75599, n_64028);
        bool bounds_check_75611 = x_75609 && y_75610;
        bool index_certs_75612;
        
        if (!bounds_check_75611) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_75599,
                                   "] out of bounds for array of shape [",
                                   (long long) n_64028, "].",
                                   "-> #0  loess.fut:388:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:385:3-391:25\n   #4  loess.fut:403:18-55\n   #5  loess.fut:446:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:445:5-447:26\n   #9  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        int64_t x_75613 = ((int64_t *) mem_70478.mem)[min_res_75599];
        int64_t abs_arg_75614 = sub64(x_75613, min_res_75522);
        int64_t abs_res_75615 = abs64(abs_arg_75614);
        int64_t max_res_75616 = smax64(abs_res_75608, abs_res_75615);
        float defunc_0_f_res_75617 = sitofp_i64_f32(max_res_75616);
        float defunc_1_f_res_75618 = max_res_68537 + defunc_0_f_res_75617;
        float defunc_0_f_res_75619 = sitofp_i64_f32(min_res_75522);
        int64_t flat_tid_68307 = (int64_t) 0;
        int32_t num_tasks_76235;
        struct futhark_mc_task_76813 futhark_mc_task_76813;
        
        futhark_mc_task_76813.ctx = ctx;
        futhark_mc_task_76813.free_q_64030 = q_64030;
        futhark_mc_task_76813.free_last_res_68521 = last_res_68521;
        futhark_mc_task_76813.free_mem_70481 = mem_70481.mem;
        futhark_mc_task_76813.free_mem_70490 = mem_70490.mem;
        futhark_mc_task_76813.free_min_res_75599 = min_res_75599;
        futhark_mc_task_76813.free_defunc_1_f_res_75618 = defunc_1_f_res_75618;
        futhark_mc_task_76813.free_defunc_0_f_res_75619 = defunc_0_f_res_75619;
        futhark_mc_task_76813.free_mem_75620 = mem_75620;
        futhark_mc_task_76813.free_mem_75621 = mem_75621;
        
        struct scheduler_segop futhark_mc_task_76813_task;
        
        futhark_mc_task_76813_task.args = &futhark_mc_task_76813;
        futhark_mc_task_76813_task.top_level_fn = futhark_mc_segmap_task_76814;
        futhark_mc_task_76813_task.name = "futhark_mc_segmap_task_76814";
        futhark_mc_task_76813_task.iterations = q_64030;
        futhark_mc_task_76813_task.task_time =
            &ctx->futhark_mc_segmap_task_76814_total_time;
        futhark_mc_task_76813_task.task_iter =
            &ctx->futhark_mc_segmap_task_76814_total_iter;
        futhark_mc_task_76813_task.sched = STATIC;
        futhark_mc_task_76813_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76814_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76813_task);
        
        if (futhark_mc_segmap_task_76814_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_75641;
        float defunc_2_reduce_res_75642;
        float defunc_2_reduce_res_75643;
        float defunc_2_reduce_res_75644;
        float defunc_2_reduce_res_75645;
        int64_t flat_tid_68309 = (int64_t) 0;
        int32_t num_tasks_76242;
        struct futhark_mc_task_76817 futhark_mc_task_76817;
        
        futhark_mc_task_76817.ctx = ctx;
        futhark_mc_task_76817.free_mem_75620 = mem_75620;
        futhark_mc_task_76817.free_mem_75621 = mem_75621;
        futhark_mc_task_76817.retval_defunc_2_reduce_res_75641 =
            &defunc_2_reduce_res_75641;
        futhark_mc_task_76817.retval_defunc_2_reduce_res_75642 =
            &defunc_2_reduce_res_75642;
        futhark_mc_task_76817.retval_defunc_2_reduce_res_75643 =
            &defunc_2_reduce_res_75643;
        futhark_mc_task_76817.retval_defunc_2_reduce_res_75644 =
            &defunc_2_reduce_res_75644;
        futhark_mc_task_76817.retval_defunc_2_reduce_res_75645 =
            &defunc_2_reduce_res_75645;
        futhark_mc_task_76817.retval_mem_75639 = mem_75639;
        futhark_mc_task_76817.retval_mem_75640 = mem_75640;
        
        struct scheduler_segop futhark_mc_task_76817_task;
        
        futhark_mc_task_76817_task.args = &futhark_mc_task_76817;
        futhark_mc_task_76817_task.top_level_fn = futhark_mc_segred_task_76818;
        futhark_mc_task_76817_task.name = "futhark_mc_segred_task_76818";
        futhark_mc_task_76817_task.iterations = q_64030;
        futhark_mc_task_76817_task.task_time =
            &ctx->futhark_mc_segred_task_76818_total_time;
        futhark_mc_task_76817_task.task_iter =
            &ctx->futhark_mc_segred_task_76818_total_iter;
        futhark_mc_task_76817_task.sched = STATIC;
        futhark_mc_task_76817_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76818_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76817_task);
        
        if (futhark_mc_segred_task_76818_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_75669 = defunc_2_reduce_res_75643 * defunc_2_reduce_res_75645;
        float y_75670 = defunc_2_reduce_res_75644 * defunc_2_reduce_res_75644;
        float a12_75671 = x_75669 - y_75670;
        float x_75672 = defunc_2_reduce_res_75643 * defunc_2_reduce_res_75644;
        float y_75673 = defunc_2_reduce_res_75642 * defunc_2_reduce_res_75645;
        float b12_75674 = x_75672 - y_75673;
        float x_75675 = defunc_2_reduce_res_75642 * defunc_2_reduce_res_75644;
        float y_75676 = defunc_2_reduce_res_75643 * defunc_2_reduce_res_75643;
        float c12_75677 = x_75675 - y_75676;
        float x_75678 = defunc_2_reduce_res_75641 * defunc_2_reduce_res_75645;
        float b2_75679 = x_75678 - y_75676;
        float x_75680 = defunc_2_reduce_res_75642 * defunc_2_reduce_res_75643;
        float y_75681 = defunc_2_reduce_res_75641 * defunc_2_reduce_res_75644;
        float c2_75682 = x_75680 - y_75681;
        float x_75683 = defunc_2_reduce_res_75641 * a12_75671;
        float y_75684 = defunc_2_reduce_res_75642 * b12_75674;
        float x_75685 = x_75683 + y_75684;
        float y_75686 = defunc_2_reduce_res_75643 * c12_75677;
        float y_75687 = x_75685 + y_75686;
        float det_75688 = 1.0F / y_75687;
        float a12_75689 = a12_75671 * det_75688;
        float b12_75690 = b12_75674 * det_75688;
        float c12_75691 = c12_75677 * det_75688;
        float b2_75692 = b2_75679 * det_75688;
        float c2_75693 = c2_75682 * det_75688;
        float defunc_2_reduce_res_75694;
        float defunc_2_reduce_res_75695;
        int64_t flat_tid_68311 = (int64_t) 0;
        int32_t num_tasks_76275;
        struct futhark_mc_task_76826 futhark_mc_task_76826;
        
        futhark_mc_task_76826.ctx = ctx;
        futhark_mc_task_76826.free_last_res_68521 = last_res_68521;
        futhark_mc_task_76826.free_mem_70475 = mem_70475.mem;
        futhark_mc_task_76826.free_min_res_75599 = min_res_75599;
        futhark_mc_task_76826.free_mem_75621 = mem_75621;
        futhark_mc_task_76826.free_mem_75639 = mem_75639;
        futhark_mc_task_76826.free_mem_75640 = mem_75640;
        futhark_mc_task_76826.free_a12_75689 = a12_75689;
        futhark_mc_task_76826.free_b12_75690 = b12_75690;
        futhark_mc_task_76826.free_c12_75691 = c12_75691;
        futhark_mc_task_76826.free_b2_75692 = b2_75692;
        futhark_mc_task_76826.free_c2_75693 = c2_75693;
        futhark_mc_task_76826.retval_defunc_2_reduce_res_75694 =
            &defunc_2_reduce_res_75694;
        futhark_mc_task_76826.retval_defunc_2_reduce_res_75695 =
            &defunc_2_reduce_res_75695;
        
        struct scheduler_segop futhark_mc_task_76826_task;
        
        futhark_mc_task_76826_task.args = &futhark_mc_task_76826;
        futhark_mc_task_76826_task.top_level_fn = futhark_mc_segred_task_76827;
        futhark_mc_task_76826_task.name = "futhark_mc_segred_task_76827";
        futhark_mc_task_76826_task.iterations = q_64030;
        futhark_mc_task_76826_task.task_time =
            &ctx->futhark_mc_segred_task_76827_total_time;
        futhark_mc_task_76826_task.task_iter =
            &ctx->futhark_mc_segred_task_76827_total_iter;
        futhark_mc_task_76826_task.sched = STATIC;
        futhark_mc_task_76826_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_76827_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76826_task);
        
        if (futhark_mc_segred_task_76827_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_70565.mem)[gtid_68304] = defunc_2_reduce_res_75694;
        ((float *) mem_70568.mem)[gtid_68304] = defunc_2_reduce_res_75695;
    }
    
  cleanup:
    { }
    free(mem_75620);
    free(mem_75621);
    free(mem_75639);
    free(mem_75640);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76803_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76803_end -
                 futhark_mc_segmap_parloop_76803_start;
        
        ctx->futhark_mc_segmap_parloop_76803_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76803_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76803_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76801(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68303 = tid;
    int num_tasks_75961 = info.nsubtasks;
    struct futhark_mc_task_76793 *futhark_mc_task_76793 =
                                 (struct futhark_mc_task_76793 *) args;
    struct futhark_context *ctx = futhark_mc_task_76793->ctx;
    uint64_t futhark_mc_segmap_nested_task_76801_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76801_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76793->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76793->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76793->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76793->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76793->free_i_64040;
    bool x_64041 = futhark_mc_task_76793->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76793->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76793->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76793->free_m_64052;
    int64_t last_res_68521 = futhark_mc_task_76793->free_last_res_68521;
    int64_t min_arg_68533 = futhark_mc_task_76793->free_min_arg_68533;
    float max_res_68537 = futhark_mc_task_76793->free_max_res_68537;
    struct memblock mem_70475 = {.desc ="mem_70475", .mem =
                                 futhark_mc_task_76793->free_mem_70475, .size =
                                 0, .references =NULL};
    struct memblock mem_70478 = {.desc ="mem_70478", .mem =
                                 futhark_mc_task_76793->free_mem_70478, .size =
                                 0, .references =NULL};
    struct memblock mem_70481 = {.desc ="mem_70481", .mem =
                                 futhark_mc_task_76793->free_mem_70481, .size =
                                 0, .references =NULL};
    struct memblock mem_70484 = {.desc ="mem_70484", .mem =
                                 futhark_mc_task_76793->free_mem_70484, .size =
                                 0, .references =NULL};
    struct memblock mem_70487 = {.desc ="mem_70487", .mem =
                                 futhark_mc_task_76793->free_mem_70487, .size =
                                 0, .references =NULL};
    int64_t bytes_70488 = futhark_mc_task_76793->free_bytes_70488;
    struct memblock mem_70490 = {.desc ="mem_70490", .mem =
                                 futhark_mc_task_76793->free_mem_70490, .size =
                                 0, .references =NULL};
    struct memblock mem_70565 = {.desc ="mem_70565", .mem =
                                 futhark_mc_task_76793->free_mem_70565, .size =
                                 0, .references =NULL};
    struct memblock mem_70568 = {.desc ="mem_70568", .mem =
                                 futhark_mc_task_76793->free_mem_70568, .size =
                                 0, .references =NULL};
    int64_t iter_76102;
    struct futhark_mc_segmap_parloop_struct_76802
    futhark_mc_segmap_parloop_struct_76802;
    
    futhark_mc_segmap_parloop_struct_76802.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76802.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76802.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76802.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76802.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76802.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76802.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76802.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76802.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76802.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76802.free_last_res_68521 = last_res_68521;
    futhark_mc_segmap_parloop_struct_76802.free_min_arg_68533 = min_arg_68533;
    futhark_mc_segmap_parloop_struct_76802.free_max_res_68537 = max_res_68537;
    futhark_mc_segmap_parloop_struct_76802.free_mem_70475 = mem_70475.mem;
    futhark_mc_segmap_parloop_struct_76802.free_mem_70478 = mem_70478.mem;
    futhark_mc_segmap_parloop_struct_76802.free_mem_70481 = mem_70481.mem;
    futhark_mc_segmap_parloop_struct_76802.free_mem_70484 = mem_70484.mem;
    futhark_mc_segmap_parloop_struct_76802.free_mem_70487 = mem_70487.mem;
    futhark_mc_segmap_parloop_struct_76802.free_bytes_70488 = bytes_70488;
    futhark_mc_segmap_parloop_struct_76802.free_mem_70490 = mem_70490.mem;
    futhark_mc_segmap_parloop_struct_76802.free_mem_70565 = mem_70565.mem;
    futhark_mc_segmap_parloop_struct_76802.free_mem_70568 = mem_70568.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76803_task;
    
    futhark_mc_segmap_parloop_76803_task.name =
        "futhark_mc_segmap_parloop_76803";
    futhark_mc_segmap_parloop_76803_task.fn = futhark_mc_segmap_parloop_76803;
    futhark_mc_segmap_parloop_76803_task.args =
        &futhark_mc_segmap_parloop_struct_76802;
    futhark_mc_segmap_parloop_76803_task.iterations = iterations;
    futhark_mc_segmap_parloop_76803_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76803_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76803_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76803_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76803_task);
    
    if (futhark_mc_segmap_parloop_76803_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76803_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76803_total_end -
                 futhark_mc_segmap_parloop_76803_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76803_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76803_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76803_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76801_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76801_end -
                 futhark_mc_segmap_nested_task_76801_start;
        
        ctx->futhark_mc_segmap_nested_task_76801_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76801_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76801_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76764(void *args, int64_t start,
                                           int64_t end, int flat_tid_68291,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76763
    *futhark_mc_segmap_parloop_struct_76763 =
    (struct futhark_mc_segmap_parloop_struct_76763 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76763->ctx;
    uint64_t futhark_mc_segmap_parloop_76764_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76764_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_segmap_parloop_struct_76763->free_m_64027;
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76763->free_n_64028;
    int64_t q_64030 = futhark_mc_segmap_parloop_struct_76763->free_q_64030;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76763->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76763->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76763->free_i_64040;
    bool x_64041 = futhark_mc_segmap_parloop_struct_76763->free_x_64041;
    int64_t min_res_64046 =
            futhark_mc_segmap_parloop_struct_76763->free_min_res_64046;
    bool empty_slice_64051 =
         futhark_mc_segmap_parloop_struct_76763->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_segmap_parloop_struct_76763->free_m_64052;
    float i64_res_64053 =
          futhark_mc_segmap_parloop_struct_76763->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_segmap_parloop_struct_76763->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_70470 =
            futhark_mc_segmap_parloop_struct_76763->free_bytes_70470;
    int64_t bytes_70473 =
            futhark_mc_segmap_parloop_struct_76763->free_bytes_70473;
    int64_t bytes_70488 =
            futhark_mc_segmap_parloop_struct_76763->free_bytes_70488;
    int64_t bytes_70563 =
            futhark_mc_segmap_parloop_struct_76763->free_bytes_70563;
    struct memblock mem_70767 = {.desc ="mem_70767", .mem =
                                 futhark_mc_segmap_parloop_struct_76763->free_mem_70767,
                                 .size =0, .references =NULL};
    struct memblock mem_70771 = {.desc ="mem_70771", .mem =
                                 futhark_mc_segmap_parloop_struct_76763->free_mem_70771,
                                 .size =0, .references =NULL};
    size_t mem_70472_cached_sizze_76765 = 0;
    char *mem_70472 = NULL;
    size_t mem_70475_cached_sizze_76766 = 0;
    char *mem_70475 = NULL;
    size_t mem_70478_cached_sizze_76767 = 0;
    char *mem_70478 = NULL;
    size_t mem_70481_cached_sizze_76768 = 0;
    char *mem_70481 = NULL;
    size_t mem_70484_cached_sizze_76769 = 0;
    char *mem_70484 = NULL;
    size_t mem_70487_cached_sizze_76770 = 0;
    char *mem_70487 = NULL;
    size_t mem_70490_cached_sizze_76771 = 0;
    char *mem_70490 = NULL;
    size_t mem_70565_cached_sizze_76772 = 0;
    char *mem_70565 = NULL;
    size_t mem_70568_cached_sizze_76773 = 0;
    char *mem_70568 = NULL;
    int64_t iterations = end - start;
    int64_t iter_75500 = start;
    
    if (mem_70472_cached_sizze_76765 < (size_t) bytes_70470) {
        mem_70472 = realloc(mem_70472, bytes_70470);
        mem_70472_cached_sizze_76765 = bytes_70470;
    }
    if (mem_70475_cached_sizze_76766 < (size_t) bytes_70473) {
        mem_70475 = realloc(mem_70475, bytes_70473);
        mem_70475_cached_sizze_76766 = bytes_70473;
    }
    if (mem_70478_cached_sizze_76767 < (size_t) bytes_70470) {
        mem_70478 = realloc(mem_70478, bytes_70470);
        mem_70478_cached_sizze_76767 = bytes_70470;
    }
    if (mem_70481_cached_sizze_76768 < (size_t) bytes_70473) {
        mem_70481 = realloc(mem_70481, bytes_70473);
        mem_70481_cached_sizze_76768 = bytes_70473;
    }
    if (mem_70484_cached_sizze_76769 < (size_t) bytes_70470) {
        mem_70484 = realloc(mem_70484, bytes_70470);
        mem_70484_cached_sizze_76769 = bytes_70470;
    }
    if (mem_70487_cached_sizze_76770 < (size_t) bytes_70470) {
        mem_70487 = realloc(mem_70487, bytes_70470);
        mem_70487_cached_sizze_76770 = bytes_70470;
    }
    if (mem_70490_cached_sizze_76771 < (size_t) bytes_70488) {
        mem_70490 = realloc(mem_70490, bytes_70488);
        mem_70490_cached_sizze_76771 = bytes_70488;
    }
    if (mem_70565_cached_sizze_76772 < (size_t) bytes_70563) {
        mem_70565 = realloc(mem_70565, bytes_70563);
        mem_70565_cached_sizze_76772 = bytes_70563;
    }
    if (mem_70568_cached_sizze_76773 < (size_t) bytes_70563) {
        mem_70568 = realloc(mem_70568, bytes_70563);
        mem_70568_cached_sizze_76773 = bytes_70563;
    }
    for (; iter_75500 < end; iter_75500++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_75929 = m_64027;
        int64_t gtid_68292 = iter_75500;
        int64_t remnant_75930 = iter_75500 - gtid_68292;
        int64_t flat_tid_68293 = (int64_t) 0;
        int32_t num_tasks_75931;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_76774 futhark_mc_task_76774;
        
        futhark_mc_task_76774.ctx = ctx;
        futhark_mc_task_76774.free_n_64028 = n_64028;
        futhark_mc_task_76774.free_gtid_68292 = gtid_68292;
        futhark_mc_task_76774.free_Y_mem_69552 = Y_mem_69552.mem;
        futhark_mc_task_76774.free_mem_70472 = mem_70472;
        
        struct scheduler_segop futhark_mc_task_76774_task;
        
        futhark_mc_task_76774_task.args = &futhark_mc_task_76774;
        futhark_mc_task_76774_task.top_level_fn = futhark_mc_segscan_task_76775;
        futhark_mc_task_76774_task.name = "futhark_mc_segscan_task_76775";
        futhark_mc_task_76774_task.iterations = n_64028;
        futhark_mc_task_76774_task.task_time =
            &ctx->futhark_mc_segscan_task_76775_total_time;
        futhark_mc_task_76774_task.task_iter =
            &ctx->futhark_mc_segscan_task_76775_total_iter;
        futhark_mc_task_76774_task.sched = STATIC;
        futhark_mc_task_76774_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_76775_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76774_task);
        
        if (futhark_mc_segscan_task_76775_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_68521 = ((int64_t *) mem_70472)[i_64040];
        
        for (int64_t i_75945 = 0; i_75945 < n_64028; i_75945++) {
            ((float *) mem_70475)[i_75945] = 0.0F;
        }
        for (int64_t i_75946 = 0; i_75946 < n_64028; i_75946++) {
            ((int64_t *) mem_70478)[i_75946] = (int64_t) -1;
        }
        
        int64_t flat_tid_68295 = (int64_t) 0;
        int32_t num_tasks_75947;
        struct futhark_mc_task_76781 futhark_mc_task_76781;
        
        futhark_mc_task_76781.ctx = ctx;
        futhark_mc_task_76781.free_n_64028 = n_64028;
        futhark_mc_task_76781.free_gtid_68292 = gtid_68292;
        futhark_mc_task_76781.free_Y_mem_69552 = Y_mem_69552.mem;
        futhark_mc_task_76781.free_mem_70472 = mem_70472;
        futhark_mc_task_76781.free_mem_70475 = mem_70475;
        futhark_mc_task_76781.free_mem_70478 = mem_70478;
        
        struct scheduler_segop futhark_mc_task_76781_task;
        
        futhark_mc_task_76781_task.args = &futhark_mc_task_76781;
        futhark_mc_task_76781_task.top_level_fn = futhark_mc_segmap_task_76782;
        futhark_mc_task_76781_task.name = "futhark_mc_segmap_task_76782";
        futhark_mc_task_76781_task.iterations = n_64028;
        futhark_mc_task_76781_task.task_time =
            &ctx->futhark_mc_segmap_task_76782_total_time;
        futhark_mc_task_76781_task.task_iter =
            &ctx->futhark_mc_segmap_task_76782_total_iter;
        futhark_mc_task_76781_task.sched = STATIC;
        futhark_mc_task_76781_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76782_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76781_task);
        
        if (futhark_mc_segmap_task_76782_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_68533 = sub64(last_res_68521, min_res_64046);
        float i64_res_68534 = sitofp_i64_f32(last_res_68521);
        float x_68535 = i64_res_64053 - i64_res_68534;
        float max_arg_68536 = x_68535 / 2.0F;
        float max_res_68537 = fmax32(0.0F, max_arg_68536);
        int64_t flat_tid_68297 = (int64_t) 0;
        int32_t num_tasks_75953;
        struct futhark_mc_task_76785 futhark_mc_task_76785;
        
        futhark_mc_task_76785.ctx = ctx;
        futhark_mc_task_76785.free_n_64028 = n_64028;
        futhark_mc_task_76785.free_mem_70478 = mem_70478;
        futhark_mc_task_76785.free_mem_70481 = mem_70481;
        futhark_mc_task_76785.free_mem_70484 = mem_70484;
        futhark_mc_task_76785.free_mem_70487 = mem_70487;
        
        struct scheduler_segop futhark_mc_task_76785_task;
        
        futhark_mc_task_76785_task.args = &futhark_mc_task_76785;
        futhark_mc_task_76785_task.top_level_fn = futhark_mc_segmap_task_76786;
        futhark_mc_task_76785_task.name = "futhark_mc_segmap_task_76786";
        futhark_mc_task_76785_task.iterations = n_64028;
        futhark_mc_task_76785_task.task_time =
            &ctx->futhark_mc_segmap_task_76786_total_time;
        futhark_mc_task_76785_task.task_iter =
            &ctx->futhark_mc_segmap_task_76786_total_iter;
        futhark_mc_task_76785_task.sched = STATIC;
        futhark_mc_task_76785_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76786_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76785_task);
        
        if (futhark_mc_segmap_task_76786_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_68299 = (int64_t) 0;
        int32_t num_tasks_75957;
        struct futhark_mc_task_76789 futhark_mc_task_76789;
        
        futhark_mc_task_76789.ctx = ctx;
        futhark_mc_task_76789.free_q_64030 = q_64030;
        futhark_mc_task_76789.free_last_res_68521 = last_res_68521;
        futhark_mc_task_76789.free_mem_70490 = mem_70490;
        
        struct scheduler_segop futhark_mc_task_76789_task;
        
        futhark_mc_task_76789_task.args = &futhark_mc_task_76789;
        futhark_mc_task_76789_task.top_level_fn = futhark_mc_segmap_task_76790;
        futhark_mc_task_76789_task.name = "futhark_mc_segmap_task_76790";
        futhark_mc_task_76789_task.iterations = q_64030;
        futhark_mc_task_76789_task.task_time =
            &ctx->futhark_mc_segmap_task_76790_total_time;
        futhark_mc_task_76789_task.task_iter =
            &ctx->futhark_mc_segmap_task_76790_total_iter;
        futhark_mc_task_76789_task.sched = STATIC;
        futhark_mc_task_76789_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76790_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76789_task);
        
        if (futhark_mc_segmap_task_76790_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_68301 = (int64_t) 0;
        int32_t num_tasks_75961;
        int64_t flat_tid_68303 = (int64_t) 0;
        struct futhark_mc_task_76793 futhark_mc_task_76793;
        
        futhark_mc_task_76793.ctx = ctx;
        futhark_mc_task_76793.free_n_64028 = n_64028;
        futhark_mc_task_76793.free_q_64030 = q_64030;
        futhark_mc_task_76793.free_jump_64032 = jump_64032;
        futhark_mc_task_76793.free_n_m_64039 = n_m_64039;
        futhark_mc_task_76793.free_i_64040 = i_64040;
        futhark_mc_task_76793.free_x_64041 = x_64041;
        futhark_mc_task_76793.free_min_res_64046 = min_res_64046;
        futhark_mc_task_76793.free_empty_slice_64051 = empty_slice_64051;
        futhark_mc_task_76793.free_m_64052 = m_64052;
        futhark_mc_task_76793.free_last_res_68521 = last_res_68521;
        futhark_mc_task_76793.free_min_arg_68533 = min_arg_68533;
        futhark_mc_task_76793.free_max_res_68537 = max_res_68537;
        futhark_mc_task_76793.free_mem_70475 = mem_70475;
        futhark_mc_task_76793.free_mem_70478 = mem_70478;
        futhark_mc_task_76793.free_mem_70481 = mem_70481;
        futhark_mc_task_76793.free_mem_70484 = mem_70484;
        futhark_mc_task_76793.free_mem_70487 = mem_70487;
        futhark_mc_task_76793.free_bytes_70488 = bytes_70488;
        futhark_mc_task_76793.free_mem_70490 = mem_70490;
        futhark_mc_task_76793.free_mem_70565 = mem_70565;
        futhark_mc_task_76793.free_mem_70568 = mem_70568;
        
        struct scheduler_segop futhark_mc_task_76793_task;
        
        futhark_mc_task_76793_task.args = &futhark_mc_task_76793;
        futhark_mc_task_76793_task.top_level_fn = futhark_mc_segmap_task_76794;
        futhark_mc_task_76793_task.name = "futhark_mc_segmap_task_76794";
        futhark_mc_task_76793_task.iterations = n_m_64039;
        futhark_mc_task_76793_task.task_time =
            &ctx->futhark_mc_segmap_task_76794_total_time;
        futhark_mc_task_76793_task.task_iter =
            &ctx->futhark_mc_segmap_task_76794_total_iter;
        futhark_mc_task_76793_task.sched = DYNAMIC;
        futhark_mc_task_76793_task.nested_fn =
            futhark_mc_segmap_nested_task_76801;
        
        int futhark_mc_segmap_task_76794_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76793_task);
        
        if (futhark_mc_segmap_task_76794_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_70767.mem + gtid_68292 * n_m_64039 * (int64_t) 4,
                mem_70565 + (int64_t) 0, n_m_64039 * (int64_t) 4);
        memmove(mem_70771.mem + gtid_68292 * n_m_64039 * (int64_t) 4,
                mem_70568 + (int64_t) 0, n_m_64039 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70472);
    free(mem_70475);
    free(mem_70478);
    free(mem_70481);
    free(mem_70484);
    free(mem_70487);
    free(mem_70490);
    free(mem_70565);
    free(mem_70568);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76764_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76764_end -
                 futhark_mc_segmap_parloop_76764_start;
        
        ctx->futhark_mc_segmap_parloop_76764_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76764_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76764_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76762(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68291 = tid;
    int num_tasks_75218 = info.nsubtasks;
    struct futhark_mc_task_76745 *futhark_mc_task_76745 =
                                 (struct futhark_mc_task_76745 *) args;
    struct futhark_context *ctx = futhark_mc_task_76745->ctx;
    uint64_t futhark_mc_segmap_nested_task_76762_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76762_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_task_76745->free_m_64027;
    int64_t n_64028 = futhark_mc_task_76745->free_n_64028;
    int64_t q_64030 = futhark_mc_task_76745->free_q_64030;
    int64_t jump_64032 = futhark_mc_task_76745->free_jump_64032;
    int64_t n_m_64039 = futhark_mc_task_76745->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76745->free_i_64040;
    bool x_64041 = futhark_mc_task_76745->free_x_64041;
    int64_t min_res_64046 = futhark_mc_task_76745->free_min_res_64046;
    bool empty_slice_64051 = futhark_mc_task_76745->free_empty_slice_64051;
    int64_t m_64052 = futhark_mc_task_76745->free_m_64052;
    float i64_res_64053 = futhark_mc_task_76745->free_i64_res_64053;
    struct memblock Y_mem_69552 = {.desc ="Y_mem_69552", .mem =
                                   futhark_mc_task_76745->free_Y_mem_69552,
                                   .size =0, .references =NULL};
    int64_t bytes_70470 = futhark_mc_task_76745->free_bytes_70470;
    int64_t bytes_70473 = futhark_mc_task_76745->free_bytes_70473;
    int64_t bytes_70488 = futhark_mc_task_76745->free_bytes_70488;
    int64_t bytes_70563 = futhark_mc_task_76745->free_bytes_70563;
    struct memblock mem_70767 = {.desc ="mem_70767", .mem =
                                 futhark_mc_task_76745->free_mem_70767, .size =
                                 0, .references =NULL};
    struct memblock mem_70771 = {.desc ="mem_70771", .mem =
                                 futhark_mc_task_76745->free_mem_70771, .size =
                                 0, .references =NULL};
    int64_t iter_75500;
    struct futhark_mc_segmap_parloop_struct_76763
    futhark_mc_segmap_parloop_struct_76763;
    
    futhark_mc_segmap_parloop_struct_76763.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76763.free_m_64027 = m_64027;
    futhark_mc_segmap_parloop_struct_76763.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76763.free_q_64030 = q_64030;
    futhark_mc_segmap_parloop_struct_76763.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76763.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76763.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76763.free_x_64041 = x_64041;
    futhark_mc_segmap_parloop_struct_76763.free_min_res_64046 = min_res_64046;
    futhark_mc_segmap_parloop_struct_76763.free_empty_slice_64051 =
        empty_slice_64051;
    futhark_mc_segmap_parloop_struct_76763.free_m_64052 = m_64052;
    futhark_mc_segmap_parloop_struct_76763.free_i64_res_64053 = i64_res_64053;
    futhark_mc_segmap_parloop_struct_76763.free_Y_mem_69552 = Y_mem_69552.mem;
    futhark_mc_segmap_parloop_struct_76763.free_bytes_70470 = bytes_70470;
    futhark_mc_segmap_parloop_struct_76763.free_bytes_70473 = bytes_70473;
    futhark_mc_segmap_parloop_struct_76763.free_bytes_70488 = bytes_70488;
    futhark_mc_segmap_parloop_struct_76763.free_bytes_70563 = bytes_70563;
    futhark_mc_segmap_parloop_struct_76763.free_mem_70767 = mem_70767.mem;
    futhark_mc_segmap_parloop_struct_76763.free_mem_70771 = mem_70771.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76764_task;
    
    futhark_mc_segmap_parloop_76764_task.name =
        "futhark_mc_segmap_parloop_76764";
    futhark_mc_segmap_parloop_76764_task.fn = futhark_mc_segmap_parloop_76764;
    futhark_mc_segmap_parloop_76764_task.args =
        &futhark_mc_segmap_parloop_struct_76763;
    futhark_mc_segmap_parloop_76764_task.iterations = iterations;
    futhark_mc_segmap_parloop_76764_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76764_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76764_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76764_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76764_task);
    
    if (futhark_mc_segmap_parloop_76764_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76764_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76764_total_end -
                 futhark_mc_segmap_parloop_76764_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76764_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76764_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76764_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76762_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76762_end -
                 futhark_mc_segmap_nested_task_76762_start;
        
        ctx->futhark_mc_segmap_nested_task_76762_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76762_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76762_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_76832 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_jump_64032;
    int64_t free_x_64038;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    char *free_ext_mem_70776;
    char *free_ext_mem_70777;
    int64_t free_bytes_70778;
    char *free_mem_70799;
};
struct futhark_mc_segmap_parloop_struct_76834 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_jump_64032;
    int64_t free_x_64038;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    char *free_ext_mem_70776;
    char *free_ext_mem_70777;
    int64_t free_bytes_70778;
    char *free_mem_70799;
};
static int futhark_mc_segmap_parloop_76835(void *args, int64_t start,
                                           int64_t end, int flat_tid_68950,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76834
    *futhark_mc_segmap_parloop_struct_76834 =
    (struct futhark_mc_segmap_parloop_struct_76834 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76834->ctx;
    uint64_t futhark_mc_segmap_parloop_76835_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76835_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_segmap_parloop_struct_76834->free_m_64027;
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76834->free_n_64028;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76834->free_jump_64032;
    int64_t x_64038 = futhark_mc_segmap_parloop_struct_76834->free_x_64038;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76834->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76834->free_i_64040;
    struct memblock ext_mem_70776 = {.desc ="ext_mem_70776", .mem =
                                     futhark_mc_segmap_parloop_struct_76834->free_ext_mem_70776,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_70777 = {.desc ="ext_mem_70777", .mem =
                                     futhark_mc_segmap_parloop_struct_76834->free_ext_mem_70777,
                                     .size =0, .references =NULL};
    int64_t bytes_70778 =
            futhark_mc_segmap_parloop_struct_76834->free_bytes_70778;
    struct memblock mem_70799 = {.desc ="mem_70799", .mem =
                                 futhark_mc_segmap_parloop_struct_76834->free_mem_70799,
                                 .size =0, .references =NULL};
    size_t mem_70783_cached_sizze_76836 = 0;
    char *mem_70783 = NULL;
    int64_t iterations = end - start;
    int64_t iter_76291 = start;
    
    if (mem_70783_cached_sizze_76836 < (size_t) bytes_70778) {
        mem_70783 = realloc(mem_70783, bytes_70778);
        mem_70783_cached_sizze_76836 = bytes_70778;
    }
    for (; iter_76291 < end; iter_76291++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76341 = m_64027;
        int64_t gtid_68951 = iter_76291;
        int64_t remnant_76342 = iter_76291 - gtid_68951;
        
        for (int64_t i_76292 = 0; i_76292 < n_64028; i_76292++) {
            int64_t m_v_76294 = sdiv64(i_76292, jump_64032);
            bool cond_76295 = m_v_76294 == x_64038;
            int64_t j_76296;
            
            if (cond_76295) {
                int64_t j_t_res_76297 = sub64(m_v_76294, (int64_t) 1);
                
                j_76296 = j_t_res_76297;
            } else {
                j_76296 = m_v_76294;
            }
            
            int64_t min_arg_76298 = mul64(jump_64032, j_76296);
            int64_t min_res_76299 = smin64(i_64040, min_arg_76298);
            int64_t defunc_0_m_fun_arg_76300 = add64((int64_t) 1, j_76296);
            int64_t min_arg_76301 = mul64(jump_64032, defunc_0_m_fun_arg_76300);
            int64_t min_res_76302 = smin64(i_64040, min_arg_76301);
            int64_t i64_arg_76303 = sub64(min_res_76302, min_res_76299);
            float i64_res_76304 = sitofp_i64_f32(i64_arg_76303);
            int64_t i64_arg_76305 = sub64(i_76292, min_res_76299);
            float i64_res_76306 = sitofp_i64_f32(i64_arg_76305);
            float u_76307 = i64_res_76306 / i64_res_76304;
            float u2_76308 = u_76307 * u_76307;
            float u3_76309 = u_76307 * u2_76308;
            float x_76310 = 2.0F * u3_76309;
            float y_76311 = 3.0F * u2_76308;
            float x_76312 = x_76310 - y_76311;
            float x_76313 = 1.0F + x_76312;
            bool x_76314 = sle64((int64_t) 0, j_76296);
            bool y_76315 = slt64(j_76296, n_m_64039);
            bool bounds_check_76316 = x_76314 && y_76315;
            bool index_certs_76317;
            
            if (!bounds_check_76316) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_76296,
                              "] out of bounds for array of shape [",
                              (long long) n_m_64039, "].",
                              "-> #0  loess.fut:423:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:414:3-427:14\n   #4  loess.fut:466:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:465:5-467:29\n   #8  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            float y_76318 = ((float *) ext_mem_70777.mem)[gtid_68951 *
                                                          n_m_64039 + j_76296];
            float x_76319 = x_76313 * y_76318;
            float x_76320 = y_76311 - x_76310;
            bool x_76321 = sle64((int64_t) 0, defunc_0_m_fun_arg_76300);
            bool y_76322 = slt64(defunc_0_m_fun_arg_76300, n_m_64039);
            bool bounds_check_76323 = x_76321 && y_76322;
            bool index_certs_76324;
            
            if (!bounds_check_76323) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_76300,
                              "] out of bounds for array of shape [",
                              (long long) n_m_64039, "].",
                              "-> #0  loess.fut:424:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:414:3-427:14\n   #4  loess.fut:466:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:465:5-467:29\n   #8  loess.fut:430:1-469:26\n");
                return 1;
            }
            
            float y_76325 = ((float *) ext_mem_70777.mem)[gtid_68951 *
                                                          n_m_64039 +
                                                          defunc_0_m_fun_arg_76300];
            float y_76326 = x_76320 * y_76325;
            float x_76327 = x_76319 + y_76326;
            float y_76328 = 2.0F * u2_76308;
            float x_76329 = u3_76309 - y_76328;
            float x_76330 = u_76307 + x_76329;
            float y_76331 = ((float *) ext_mem_70776.mem)[gtid_68951 *
                                                          n_m_64039 + j_76296];
            float x_76332 = x_76330 * y_76331;
            float y_76333 = i64_res_76304 * x_76332;
            float x_76334 = x_76327 + y_76333;
            float x_76335 = u3_76309 - u2_76308;
            float y_76336 = ((float *) ext_mem_70776.mem)[gtid_68951 *
                                                          n_m_64039 +
                                                          defunc_0_m_fun_arg_76300];
            float x_76337 = x_76335 * y_76336;
            float y_76338 = i64_res_76304 * x_76337;
            float defunc_0_f_res_76339 = x_76334 + y_76338;
            
            ((float *) mem_70783)[i_76292] = defunc_0_f_res_76339;
        }
        memmove(mem_70799.mem + gtid_68951 * n_64028 * (int64_t) 4, mem_70783 +
                (int64_t) 0, n_64028 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70783);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76835_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76835_end -
                 futhark_mc_segmap_parloop_76835_start;
        
        ctx->futhark_mc_segmap_parloop_76835_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76835_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76835_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76833(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68950 = tid;
    int num_tasks_76290 = info.nsubtasks;
    struct futhark_mc_task_76832 *futhark_mc_task_76832 =
                                 (struct futhark_mc_task_76832 *) args;
    struct futhark_context *ctx = futhark_mc_task_76832->ctx;
    uint64_t futhark_mc_segmap_task_76833_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76833_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_task_76832->free_m_64027;
    int64_t n_64028 = futhark_mc_task_76832->free_n_64028;
    int64_t jump_64032 = futhark_mc_task_76832->free_jump_64032;
    int64_t x_64038 = futhark_mc_task_76832->free_x_64038;
    int64_t n_m_64039 = futhark_mc_task_76832->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76832->free_i_64040;
    struct memblock ext_mem_70776 = {.desc ="ext_mem_70776", .mem =
                                     futhark_mc_task_76832->free_ext_mem_70776,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_70777 = {.desc ="ext_mem_70777", .mem =
                                     futhark_mc_task_76832->free_ext_mem_70777,
                                     .size =0, .references =NULL};
    int64_t bytes_70778 = futhark_mc_task_76832->free_bytes_70778;
    struct memblock mem_70799 = {.desc ="mem_70799", .mem =
                                 futhark_mc_task_76832->free_mem_70799, .size =
                                 0, .references =NULL};
    int64_t iter_76291;
    struct futhark_mc_segmap_parloop_struct_76834
    futhark_mc_segmap_parloop_struct_76834;
    
    futhark_mc_segmap_parloop_struct_76834.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76834.free_m_64027 = m_64027;
    futhark_mc_segmap_parloop_struct_76834.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76834.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76834.free_x_64038 = x_64038;
    futhark_mc_segmap_parloop_struct_76834.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76834.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76834.free_ext_mem_70776 =
        ext_mem_70776.mem;
    futhark_mc_segmap_parloop_struct_76834.free_ext_mem_70777 =
        ext_mem_70777.mem;
    futhark_mc_segmap_parloop_struct_76834.free_bytes_70778 = bytes_70778;
    futhark_mc_segmap_parloop_struct_76834.free_mem_70799 = mem_70799.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76835_task;
    
    futhark_mc_segmap_parloop_76835_task.name =
        "futhark_mc_segmap_parloop_76835";
    futhark_mc_segmap_parloop_76835_task.fn = futhark_mc_segmap_parloop_76835;
    futhark_mc_segmap_parloop_76835_task.args =
        &futhark_mc_segmap_parloop_struct_76834;
    futhark_mc_segmap_parloop_76835_task.iterations = iterations;
    futhark_mc_segmap_parloop_76835_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76835_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76835_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76835_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76835_task);
    
    if (futhark_mc_segmap_parloop_76835_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76835_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76835_total_end -
                 futhark_mc_segmap_parloop_76835_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76835_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76835_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76835_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76833_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76833_end -
                 futhark_mc_segmap_task_76833_start;
        
        ctx->futhark_mc_segmap_task_76833_runs[tid]++;
        ctx->futhark_mc_segmap_task_76833_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76833_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_76838 {
    struct futhark_context *ctx;
    int64_t free_m_64027;
    int64_t free_n_64028;
    int64_t free_jump_64032;
    int64_t free_x_64038;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    char *free_ext_mem_70776;
    char *free_ext_mem_70777;
    int64_t free_bytes_70778;
    char *free_mem_70799;
};
struct futhark_mc_task_76841 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_jump_64032;
    int64_t free_x_64038;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    int64_t free_gtid_68953;
    char *free_ext_mem_70776;
    char *free_ext_mem_70777;
    char *free_mem_70780;
};
struct futhark_mc_segmap_parloop_struct_76843 {
    struct futhark_context *ctx;
    int64_t free_n_64028;
    int64_t free_jump_64032;
    int64_t free_x_64038;
    int64_t free_n_m_64039;
    int64_t free_i_64040;
    int64_t free_gtid_68953;
    char *free_ext_mem_70776;
    char *free_ext_mem_70777;
    char *free_mem_70780;
};
static int futhark_mc_segmap_parloop_76844(void *args, int64_t start,
                                           int64_t end, int flat_tid_68954,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76843
    *futhark_mc_segmap_parloop_struct_76843 =
    (struct futhark_mc_segmap_parloop_struct_76843 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76843->ctx;
    uint64_t futhark_mc_segmap_parloop_76844_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76844_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76843->free_n_64028;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76843->free_jump_64032;
    int64_t x_64038 = futhark_mc_segmap_parloop_struct_76843->free_x_64038;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76843->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76843->free_i_64040;
    int64_t gtid_68953 =
            futhark_mc_segmap_parloop_struct_76843->free_gtid_68953;
    struct memblock ext_mem_70776 = {.desc ="ext_mem_70776", .mem =
                                     futhark_mc_segmap_parloop_struct_76843->free_ext_mem_70776,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_70777 = {.desc ="ext_mem_70777", .mem =
                                     futhark_mc_segmap_parloop_struct_76843->free_ext_mem_70777,
                                     .size =0, .references =NULL};
    struct memblock mem_70780 = {.desc ="mem_70780", .mem =
                                 futhark_mc_segmap_parloop_struct_76843->free_mem_70780,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_76394 = start;
    
    for (; iter_76394 < end; iter_76394++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76396 = n_64028;
        int64_t gtid_68955 = iter_76394;
        int64_t remnant_76397 = iter_76394 - gtid_68955;
        int64_t m_v_76345 = sdiv64(gtid_68955, jump_64032);
        bool cond_76346 = m_v_76345 == x_64038;
        int64_t j_76347;
        
        if (cond_76346) {
            int64_t j_t_res_76395 = sub64(m_v_76345, (int64_t) 1);
            
            j_76347 = j_t_res_76395;
        } else {
            j_76347 = m_v_76345;
        }
        
        int64_t min_arg_76349 = mul64(jump_64032, j_76347);
        int64_t min_res_76350 = smin64(i_64040, min_arg_76349);
        int64_t defunc_0_m_fun_arg_76351 = add64((int64_t) 1, j_76347);
        int64_t min_arg_76352 = mul64(jump_64032, defunc_0_m_fun_arg_76351);
        int64_t min_res_76353 = smin64(i_64040, min_arg_76352);
        int64_t i64_arg_76354 = sub64(min_res_76353, min_res_76350);
        float i64_res_76355 = sitofp_i64_f32(i64_arg_76354);
        int64_t i64_arg_76356 = sub64(gtid_68955, min_res_76350);
        float i64_res_76357 = sitofp_i64_f32(i64_arg_76356);
        float u_76358 = i64_res_76357 / i64_res_76355;
        float u2_76359 = u_76358 * u_76358;
        float u3_76360 = u_76358 * u2_76359;
        float x_76361 = 2.0F * u3_76360;
        float y_76362 = 3.0F * u2_76359;
        float x_76363 = x_76361 - y_76362;
        float x_76364 = 1.0F + x_76363;
        bool x_76365 = sle64((int64_t) 0, j_76347);
        bool y_76366 = slt64(j_76347, n_m_64039);
        bool bounds_check_76367 = x_76365 && y_76366;
        bool index_certs_76368;
        
        if (!bounds_check_76367) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_76347,
                                   "] out of bounds for array of shape [",
                                   (long long) n_m_64039, "].",
                                   "-> #0  loess.fut:423:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:414:3-427:14\n   #4  loess.fut:466:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:465:5-467:29\n   #8  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        float y_76369 = ((float *) ext_mem_70777.mem)[gtid_68953 * n_m_64039 +
                                                      j_76347];
        float x_76370 = x_76364 * y_76369;
        float x_76371 = y_76362 - x_76361;
        bool x_76372 = sle64((int64_t) 0, defunc_0_m_fun_arg_76351);
        bool y_76373 = slt64(defunc_0_m_fun_arg_76351, n_m_64039);
        bool bounds_check_76374 = x_76372 && y_76373;
        bool index_certs_76375;
        
        if (!bounds_check_76374) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_76351,
                                   "] out of bounds for array of shape [",
                                   (long long) n_m_64039, "].",
                                   "-> #0  loess.fut:424:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:414:3-427:14\n   #4  loess.fut:466:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:465:5-467:29\n   #8  loess.fut:430:1-469:26\n");
            return 1;
        }
        
        float y_76376 = ((float *) ext_mem_70777.mem)[gtid_68953 * n_m_64039 +
                                                      defunc_0_m_fun_arg_76351];
        float y_76377 = x_76371 * y_76376;
        float x_76378 = x_76370 + y_76377;
        float y_76379 = 2.0F * u2_76359;
        float x_76380 = u3_76360 - y_76379;
        float x_76381 = u_76358 + x_76380;
        float y_76382 = ((float *) ext_mem_70776.mem)[gtid_68953 * n_m_64039 +
                                                      j_76347];
        float x_76383 = x_76381 * y_76382;
        float y_76384 = i64_res_76355 * x_76383;
        float x_76385 = x_76378 + y_76384;
        float x_76386 = u3_76360 - u2_76359;
        float y_76387 = ((float *) ext_mem_70776.mem)[gtid_68953 * n_m_64039 +
                                                      defunc_0_m_fun_arg_76351];
        float x_76388 = x_76386 * y_76387;
        float y_76389 = i64_res_76355 * x_76388;
        float defunc_0_f_res_76390 = x_76385 + y_76389;
        
        ((float *) mem_70780.mem)[gtid_68955] = defunc_0_f_res_76390;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76844_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76844_end -
                 futhark_mc_segmap_parloop_76844_start;
        
        ctx->futhark_mc_segmap_parloop_76844_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76844_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76844_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_76842(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68954 = tid;
    int num_tasks_76393 = info.nsubtasks;
    struct futhark_mc_task_76841 *futhark_mc_task_76841 =
                                 (struct futhark_mc_task_76841 *) args;
    struct futhark_context *ctx = futhark_mc_task_76841->ctx;
    uint64_t futhark_mc_segmap_task_76842_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_76842_start = get_wall_time();
    
    int64_t n_64028 = futhark_mc_task_76841->free_n_64028;
    int64_t jump_64032 = futhark_mc_task_76841->free_jump_64032;
    int64_t x_64038 = futhark_mc_task_76841->free_x_64038;
    int64_t n_m_64039 = futhark_mc_task_76841->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76841->free_i_64040;
    int64_t gtid_68953 = futhark_mc_task_76841->free_gtid_68953;
    struct memblock ext_mem_70776 = {.desc ="ext_mem_70776", .mem =
                                     futhark_mc_task_76841->free_ext_mem_70776,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_70777 = {.desc ="ext_mem_70777", .mem =
                                     futhark_mc_task_76841->free_ext_mem_70777,
                                     .size =0, .references =NULL};
    struct memblock mem_70780 = {.desc ="mem_70780", .mem =
                                 futhark_mc_task_76841->free_mem_70780, .size =
                                 0, .references =NULL};
    int64_t iter_76394;
    struct futhark_mc_segmap_parloop_struct_76843
    futhark_mc_segmap_parloop_struct_76843;
    
    futhark_mc_segmap_parloop_struct_76843.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76843.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76843.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76843.free_x_64038 = x_64038;
    futhark_mc_segmap_parloop_struct_76843.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76843.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76843.free_gtid_68953 = gtid_68953;
    futhark_mc_segmap_parloop_struct_76843.free_ext_mem_70776 =
        ext_mem_70776.mem;
    futhark_mc_segmap_parloop_struct_76843.free_ext_mem_70777 =
        ext_mem_70777.mem;
    futhark_mc_segmap_parloop_struct_76843.free_mem_70780 = mem_70780.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76844_task;
    
    futhark_mc_segmap_parloop_76844_task.name =
        "futhark_mc_segmap_parloop_76844";
    futhark_mc_segmap_parloop_76844_task.fn = futhark_mc_segmap_parloop_76844;
    futhark_mc_segmap_parloop_76844_task.args =
        &futhark_mc_segmap_parloop_struct_76843;
    futhark_mc_segmap_parloop_76844_task.iterations = iterations;
    futhark_mc_segmap_parloop_76844_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76844_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76844_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76844_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76844_task);
    
    if (futhark_mc_segmap_parloop_76844_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76844_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76844_total_end -
                 futhark_mc_segmap_parloop_76844_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76844_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76844_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76844_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_76842_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_76842_end -
                 futhark_mc_segmap_task_76842_start;
        
        ctx->futhark_mc_segmap_task_76842_runs[tid]++;
        ctx->futhark_mc_segmap_task_76842_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_76842_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_76839(void *args, int64_t start,
                                           int64_t end, int flat_tid_68952,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_76838
    *futhark_mc_segmap_parloop_struct_76838 =
    (struct futhark_mc_segmap_parloop_struct_76838 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_76838->ctx;
    uint64_t futhark_mc_segmap_parloop_76839_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76839_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_segmap_parloop_struct_76838->free_m_64027;
    int64_t n_64028 = futhark_mc_segmap_parloop_struct_76838->free_n_64028;
    int64_t jump_64032 =
            futhark_mc_segmap_parloop_struct_76838->free_jump_64032;
    int64_t x_64038 = futhark_mc_segmap_parloop_struct_76838->free_x_64038;
    int64_t n_m_64039 = futhark_mc_segmap_parloop_struct_76838->free_n_m_64039;
    int64_t i_64040 = futhark_mc_segmap_parloop_struct_76838->free_i_64040;
    struct memblock ext_mem_70776 = {.desc ="ext_mem_70776", .mem =
                                     futhark_mc_segmap_parloop_struct_76838->free_ext_mem_70776,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_70777 = {.desc ="ext_mem_70777", .mem =
                                     futhark_mc_segmap_parloop_struct_76838->free_ext_mem_70777,
                                     .size =0, .references =NULL};
    int64_t bytes_70778 =
            futhark_mc_segmap_parloop_struct_76838->free_bytes_70778;
    struct memblock mem_70799 = {.desc ="mem_70799", .mem =
                                 futhark_mc_segmap_parloop_struct_76838->free_mem_70799,
                                 .size =0, .references =NULL};
    size_t mem_70780_cached_sizze_76840 = 0;
    char *mem_70780 = NULL;
    int64_t iterations = end - start;
    int64_t iter_76344 = start;
    
    if (mem_70780_cached_sizze_76840 < (size_t) bytes_70778) {
        mem_70780 = realloc(mem_70780, bytes_70778);
        mem_70780_cached_sizze_76840 = bytes_70778;
    }
    for (; iter_76344 < end; iter_76344++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_76391 = m_64027;
        int64_t gtid_68953 = iter_76344;
        int64_t remnant_76392 = iter_76344 - gtid_68953;
        int64_t flat_tid_68954 = (int64_t) 0;
        int32_t num_tasks_76393;
        struct futhark_mc_task_76841 futhark_mc_task_76841;
        
        futhark_mc_task_76841.ctx = ctx;
        futhark_mc_task_76841.free_n_64028 = n_64028;
        futhark_mc_task_76841.free_jump_64032 = jump_64032;
        futhark_mc_task_76841.free_x_64038 = x_64038;
        futhark_mc_task_76841.free_n_m_64039 = n_m_64039;
        futhark_mc_task_76841.free_i_64040 = i_64040;
        futhark_mc_task_76841.free_gtid_68953 = gtid_68953;
        futhark_mc_task_76841.free_ext_mem_70776 = ext_mem_70776.mem;
        futhark_mc_task_76841.free_ext_mem_70777 = ext_mem_70777.mem;
        futhark_mc_task_76841.free_mem_70780 = mem_70780;
        
        struct scheduler_segop futhark_mc_task_76841_task;
        
        futhark_mc_task_76841_task.args = &futhark_mc_task_76841;
        futhark_mc_task_76841_task.top_level_fn = futhark_mc_segmap_task_76842;
        futhark_mc_task_76841_task.name = "futhark_mc_segmap_task_76842";
        futhark_mc_task_76841_task.iterations = n_64028;
        futhark_mc_task_76841_task.task_time =
            &ctx->futhark_mc_segmap_task_76842_total_time;
        futhark_mc_task_76841_task.task_iter =
            &ctx->futhark_mc_segmap_task_76842_total_iter;
        futhark_mc_task_76841_task.sched = STATIC;
        futhark_mc_task_76841_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_76842_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76841_task);
        
        if (futhark_mc_segmap_task_76842_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_70799.mem + gtid_68953 * n_64028 * (int64_t) 4, mem_70780 +
                (int64_t) 0, n_64028 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_70780);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76839_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76839_end -
                 futhark_mc_segmap_parloop_76839_start;
        
        ctx->futhark_mc_segmap_parloop_76839_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_76839_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_76839_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_76837(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_68952 = tid;
    int num_tasks_76290 = info.nsubtasks;
    struct futhark_mc_task_76832 *futhark_mc_task_76832 =
                                 (struct futhark_mc_task_76832 *) args;
    struct futhark_context *ctx = futhark_mc_task_76832->ctx;
    uint64_t futhark_mc_segmap_nested_task_76837_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_76837_start = get_wall_time();
    
    int64_t m_64027 = futhark_mc_task_76832->free_m_64027;
    int64_t n_64028 = futhark_mc_task_76832->free_n_64028;
    int64_t jump_64032 = futhark_mc_task_76832->free_jump_64032;
    int64_t x_64038 = futhark_mc_task_76832->free_x_64038;
    int64_t n_m_64039 = futhark_mc_task_76832->free_n_m_64039;
    int64_t i_64040 = futhark_mc_task_76832->free_i_64040;
    struct memblock ext_mem_70776 = {.desc ="ext_mem_70776", .mem =
                                     futhark_mc_task_76832->free_ext_mem_70776,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_70777 = {.desc ="ext_mem_70777", .mem =
                                     futhark_mc_task_76832->free_ext_mem_70777,
                                     .size =0, .references =NULL};
    int64_t bytes_70778 = futhark_mc_task_76832->free_bytes_70778;
    struct memblock mem_70799 = {.desc ="mem_70799", .mem =
                                 futhark_mc_task_76832->free_mem_70799, .size =
                                 0, .references =NULL};
    int64_t iter_76344;
    struct futhark_mc_segmap_parloop_struct_76838
    futhark_mc_segmap_parloop_struct_76838;
    
    futhark_mc_segmap_parloop_struct_76838.ctx = ctx;
    futhark_mc_segmap_parloop_struct_76838.free_m_64027 = m_64027;
    futhark_mc_segmap_parloop_struct_76838.free_n_64028 = n_64028;
    futhark_mc_segmap_parloop_struct_76838.free_jump_64032 = jump_64032;
    futhark_mc_segmap_parloop_struct_76838.free_x_64038 = x_64038;
    futhark_mc_segmap_parloop_struct_76838.free_n_m_64039 = n_m_64039;
    futhark_mc_segmap_parloop_struct_76838.free_i_64040 = i_64040;
    futhark_mc_segmap_parloop_struct_76838.free_ext_mem_70776 =
        ext_mem_70776.mem;
    futhark_mc_segmap_parloop_struct_76838.free_ext_mem_70777 =
        ext_mem_70777.mem;
    futhark_mc_segmap_parloop_struct_76838.free_bytes_70778 = bytes_70778;
    futhark_mc_segmap_parloop_struct_76838.free_mem_70799 = mem_70799.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_76839_task;
    
    futhark_mc_segmap_parloop_76839_task.name =
        "futhark_mc_segmap_parloop_76839";
    futhark_mc_segmap_parloop_76839_task.fn = futhark_mc_segmap_parloop_76839;
    futhark_mc_segmap_parloop_76839_task.args =
        &futhark_mc_segmap_parloop_struct_76838;
    futhark_mc_segmap_parloop_76839_task.iterations = iterations;
    futhark_mc_segmap_parloop_76839_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_76839_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_76839_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_76839_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_76839_task);
    
    if (futhark_mc_segmap_parloop_76839_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_76839_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_76839_total_end -
                 futhark_mc_segmap_parloop_76839_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76839_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76839_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_76839_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_76837_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_76837_end -
                 futhark_mc_segmap_nested_task_76837_start;
        
        ctx->futhark_mc_segmap_nested_task_76837_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_76837_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_76837_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                  arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_76398,
                             struct memblock Y_mem_69552, int64_t m_64027,
                             int64_t n_64028, int64_t q_64030,
                             int64_t degree_64031, int64_t jump_64032,
                             int64_t jump_threshold_64033,
                             int64_t q_threshold_64034)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_out_70817;
    
    mem_out_70817.references = NULL;
    
    bool zzero_64035 = jump_64032 == (int64_t) 0;
    bool nonzzero_64036 = !zzero_64035;
    bool nonzzero_cert_64037;
    
    if (!nonzzero_64036) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "division by zero",
                               "-> #0  loess.fut:437:13-20\n   #1  loess.fut:430:1-469:26\n");
        if (memblock_unref(ctx, &mem_out_70817, "mem_out_70817") != 0)
            return 1;
        return 1;
    }
    
    int64_t x_64038 = sdiv64(n_64028, jump_64032);
    int64_t n_m_64039 = add64((int64_t) 1, x_64038);
    int64_t i_64040 = sub64(n_64028, (int64_t) 1);
    bool x_64041 = sle64((int64_t) 0, i_64040);
    bool y_64042 = slt64(i_64040, n_64028);
    bool bounds_check_64043 = x_64041 && y_64042;
    bool index_certs_64044;
    
    if (!bounds_check_64043) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_64040,
                               "] out of bounds for array of shape [",
                               (long long) n_64028, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:38:13-20\n   #2  loess.fut:441:36-85\n   #3  loess.fut:430:1-469:26\n");
        if (memblock_unref(ctx, &mem_out_70817, "mem_out_70817") != 0)
            return 1;
        return 1;
    }
    
    int64_t min_res_64046 = smin64(n_64028, q_64030);
    bool bounds_invalid_upwards_64047 = slt64(n_m_64039, (int64_t) 0);
    bool valid_64048 = !bounds_invalid_upwards_64047;
    bool range_valid_c_64049;
    
    if (!valid_64048) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_m_64039, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  loess.fut:335:3-373:7\n   #3  loess.fut:402:15-58\n   #4  loess.fut:446:13-56\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:445:5-447:26\n   #8  loess.fut:430:1-469:26\n");
        if (memblock_unref(ctx, &mem_out_70817, "mem_out_70817") != 0)
            return 1;
        return 1;
    }
    
    bool empty_slice_64051 = min_res_64046 == (int64_t) 0;
    int64_t m_64052 = sub64(min_res_64046, (int64_t) 1);
    float i64_res_64053 = sitofp_i64_f32(q_64030);
    bool cond_64054 = slt64(jump_64032, jump_threshold_64033);
    bool cond_f_res_64055 = slt64(q_threshold_64034, q_64030);
    bool x_64056 = !cond_64054;
    bool y_64057 = cond_f_res_64055 && x_64056;
    bool cond_64058 = cond_64054 || y_64057;
    struct memblock ext_mem_70777;
    
    ext_mem_70777.references = NULL;
    
    struct memblock ext_mem_70776;
    
    ext_mem_70776.references = NULL;
    if (cond_64058) {
        bool match_lit_64061 = (int64_t) 0 == degree_64031;
        int64_t binop_x_69554 = m_64027 * n_m_64039;
        int64_t binop_y_69555 = (int64_t) 4 * binop_x_69554;
        int64_t bytes_69553 = smax64((int64_t) 0, binop_y_69555);
        struct memblock ext_mem_70048;
        
        ext_mem_70048.references = NULL;
        
        struct memblock ext_mem_70047;
        
        ext_mem_70047.references = NULL;
        if (match_lit_64061) {
            struct memblock mem_69556;
            
            mem_69556.references = NULL;
            if (memblock_alloc(ctx, &mem_69556, bytes_69553, "mem_69556")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_70818 = 0; i_70818 < m_64027; i_70818++) {
                for (int64_t i_70819 = 0; i_70819 < n_m_64039; i_70819++) {
                    ((float *) mem_69556.mem)[i_70818 * n_m_64039 + i_70819] =
                        0.0F;
                }
            }
            
            struct memblock mem_69704;
            
            mem_69704.references = NULL;
            if (memblock_alloc(ctx, &mem_69704, bytes_69553, "mem_69704")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_69558 = (int64_t) 8 * n_64028;
            int64_t bytes_69557 = smax64((int64_t) 0, binop_y_69558);
            int64_t binop_y_69561 = (int64_t) 4 * n_64028;
            int64_t bytes_69560 = smax64((int64_t) 0, binop_y_69561);
            int64_t binop_y_69576 = (int64_t) 4 * q_64030;
            int64_t bytes_69575 = smax64((int64_t) 0, binop_y_69576);
            int64_t binop_y_69579 = (int64_t) 4 * n_m_64039;
            int64_t bytes_69578 = smax64((int64_t) 0, binop_y_69579);
            int64_t flat_tid_65512 = (int64_t) 0;
            int32_t num_tasks_70820;
            int64_t flat_tid_65514 = (int64_t) 0;
            struct futhark_mc_task_76399 futhark_mc_task_76399;
            
            futhark_mc_task_76399.ctx = ctx;
            futhark_mc_task_76399.free_m_64027 = m_64027;
            futhark_mc_task_76399.free_n_64028 = n_64028;
            futhark_mc_task_76399.free_q_64030 = q_64030;
            futhark_mc_task_76399.free_jump_64032 = jump_64032;
            futhark_mc_task_76399.free_n_m_64039 = n_m_64039;
            futhark_mc_task_76399.free_i_64040 = i_64040;
            futhark_mc_task_76399.free_x_64041 = x_64041;
            futhark_mc_task_76399.free_min_res_64046 = min_res_64046;
            futhark_mc_task_76399.free_empty_slice_64051 = empty_slice_64051;
            futhark_mc_task_76399.free_m_64052 = m_64052;
            futhark_mc_task_76399.free_i64_res_64053 = i64_res_64053;
            futhark_mc_task_76399.free_Y_mem_69552 = Y_mem_69552.mem;
            futhark_mc_task_76399.free_bytes_69557 = bytes_69557;
            futhark_mc_task_76399.free_bytes_69560 = bytes_69560;
            futhark_mc_task_76399.free_bytes_69575 = bytes_69575;
            futhark_mc_task_76399.free_bytes_69578 = bytes_69578;
            futhark_mc_task_76399.free_mem_69704 = mem_69704.mem;
            
            struct scheduler_segop futhark_mc_task_76399_task;
            
            futhark_mc_task_76399_task.args = &futhark_mc_task_76399;
            futhark_mc_task_76399_task.top_level_fn =
                futhark_mc_segmap_task_76400;
            futhark_mc_task_76399_task.name = "futhark_mc_segmap_task_76400";
            futhark_mc_task_76399_task.iterations = m_64027;
            futhark_mc_task_76399_task.task_time =
                &ctx->futhark_mc_segmap_task_76400_total_time;
            futhark_mc_task_76399_task.task_iter =
                &ctx->futhark_mc_segmap_task_76400_total_iter;
            futhark_mc_task_76399_task.sched = DYNAMIC;
            futhark_mc_task_76399_task.nested_fn =
                futhark_mc_segmap_nested_task_76411;
            
            int futhark_mc_segmap_task_76400_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_76399_task);
            
            if (futhark_mc_segmap_task_76400_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_70048, &mem_69704, "mem_69704") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_70047, &mem_69556, "mem_69556") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_69704, "mem_69704") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_69556, "mem_69556") != 0)
                return 1;
        } else {
            bool match_lit_64263 = (int64_t) 1 == degree_64031;
            struct memblock ext_mem_70046;
            
            ext_mem_70046.references = NULL;
            
            struct memblock ext_mem_70045;
            
            ext_mem_70045.references = NULL;
            if (match_lit_64263) {
                struct memblock mem_69870;
                
                mem_69870.references = NULL;
                if (memblock_alloc(ctx, &mem_69870, bytes_69553, "mem_69870")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_69874;
                
                mem_69874.references = NULL;
                if (memblock_alloc(ctx, &mem_69874, bytes_69553, "mem_69874")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_69706 = (int64_t) 8 * n_64028;
                int64_t bytes_69705 = smax64((int64_t) 0, binop_y_69706);
                int64_t binop_y_69709 = (int64_t) 4 * n_64028;
                int64_t bytes_69708 = smax64((int64_t) 0, binop_y_69709);
                int64_t binop_y_69724 = (int64_t) 4 * q_64030;
                int64_t bytes_69723 = smax64((int64_t) 0, binop_y_69724);
                int64_t binop_y_69727 = (int64_t) 4 * n_m_64039;
                int64_t bytes_69726 = smax64((int64_t) 0, binop_y_69727);
                int64_t flat_tid_66011 = (int64_t) 0;
                int32_t num_tasks_71607;
                int64_t flat_tid_66013 = (int64_t) 0;
                struct futhark_mc_task_76463 futhark_mc_task_76463;
                
                futhark_mc_task_76463.ctx = ctx;
                futhark_mc_task_76463.free_m_64027 = m_64027;
                futhark_mc_task_76463.free_n_64028 = n_64028;
                futhark_mc_task_76463.free_q_64030 = q_64030;
                futhark_mc_task_76463.free_jump_64032 = jump_64032;
                futhark_mc_task_76463.free_n_m_64039 = n_m_64039;
                futhark_mc_task_76463.free_i_64040 = i_64040;
                futhark_mc_task_76463.free_x_64041 = x_64041;
                futhark_mc_task_76463.free_min_res_64046 = min_res_64046;
                futhark_mc_task_76463.free_empty_slice_64051 =
                    empty_slice_64051;
                futhark_mc_task_76463.free_m_64052 = m_64052;
                futhark_mc_task_76463.free_i64_res_64053 = i64_res_64053;
                futhark_mc_task_76463.free_Y_mem_69552 = Y_mem_69552.mem;
                futhark_mc_task_76463.free_bytes_69705 = bytes_69705;
                futhark_mc_task_76463.free_bytes_69708 = bytes_69708;
                futhark_mc_task_76463.free_bytes_69723 = bytes_69723;
                futhark_mc_task_76463.free_bytes_69726 = bytes_69726;
                futhark_mc_task_76463.free_mem_69870 = mem_69870.mem;
                futhark_mc_task_76463.free_mem_69874 = mem_69874.mem;
                
                struct scheduler_segop futhark_mc_task_76463_task;
                
                futhark_mc_task_76463_task.args = &futhark_mc_task_76463;
                futhark_mc_task_76463_task.top_level_fn =
                    futhark_mc_segmap_task_76464;
                futhark_mc_task_76463_task.name =
                    "futhark_mc_segmap_task_76464";
                futhark_mc_task_76463_task.iterations = m_64027;
                futhark_mc_task_76463_task.task_time =
                    &ctx->futhark_mc_segmap_task_76464_total_time;
                futhark_mc_task_76463_task.task_iter =
                    &ctx->futhark_mc_segmap_task_76464_total_iter;
                futhark_mc_task_76463_task.sched = DYNAMIC;
                futhark_mc_task_76463_task.nested_fn =
                    futhark_mc_segmap_nested_task_76476;
                
                int futhark_mc_segmap_task_76464_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_76463_task);
                
                if (futhark_mc_segmap_task_76464_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_70046, &mem_69870,
                                 "mem_69870") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_70045, &mem_69874,
                                 "mem_69874") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_69874, "mem_69874") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_69870, "mem_69870") != 0)
                    return 1;
            } else {
                struct memblock mem_70040;
                
                mem_70040.references = NULL;
                if (memblock_alloc(ctx, &mem_70040, bytes_69553, "mem_70040")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_70044;
                
                mem_70044.references = NULL;
                if (memblock_alloc(ctx, &mem_70044, bytes_69553, "mem_70044")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_69876 = (int64_t) 8 * n_64028;
                int64_t bytes_69875 = smax64((int64_t) 0, binop_y_69876);
                int64_t binop_y_69879 = (int64_t) 4 * n_64028;
                int64_t bytes_69878 = smax64((int64_t) 0, binop_y_69879);
                int64_t binop_y_69894 = (int64_t) 4 * q_64030;
                int64_t bytes_69893 = smax64((int64_t) 0, binop_y_69894);
                int64_t binop_y_69897 = (int64_t) 4 * n_m_64039;
                int64_t bytes_69896 = smax64((int64_t) 0, binop_y_69897);
                int64_t flat_tid_66595 = (int64_t) 0;
                int32_t num_tasks_72532;
                int64_t flat_tid_66597 = (int64_t) 0;
                struct futhark_mc_task_76532 futhark_mc_task_76532;
                
                futhark_mc_task_76532.ctx = ctx;
                futhark_mc_task_76532.free_m_64027 = m_64027;
                futhark_mc_task_76532.free_n_64028 = n_64028;
                futhark_mc_task_76532.free_q_64030 = q_64030;
                futhark_mc_task_76532.free_jump_64032 = jump_64032;
                futhark_mc_task_76532.free_n_m_64039 = n_m_64039;
                futhark_mc_task_76532.free_i_64040 = i_64040;
                futhark_mc_task_76532.free_x_64041 = x_64041;
                futhark_mc_task_76532.free_min_res_64046 = min_res_64046;
                futhark_mc_task_76532.free_empty_slice_64051 =
                    empty_slice_64051;
                futhark_mc_task_76532.free_m_64052 = m_64052;
                futhark_mc_task_76532.free_i64_res_64053 = i64_res_64053;
                futhark_mc_task_76532.free_Y_mem_69552 = Y_mem_69552.mem;
                futhark_mc_task_76532.free_bytes_69875 = bytes_69875;
                futhark_mc_task_76532.free_bytes_69878 = bytes_69878;
                futhark_mc_task_76532.free_bytes_69893 = bytes_69893;
                futhark_mc_task_76532.free_bytes_69896 = bytes_69896;
                futhark_mc_task_76532.free_mem_70040 = mem_70040.mem;
                futhark_mc_task_76532.free_mem_70044 = mem_70044.mem;
                
                struct scheduler_segop futhark_mc_task_76532_task;
                
                futhark_mc_task_76532_task.args = &futhark_mc_task_76532;
                futhark_mc_task_76532_task.top_level_fn =
                    futhark_mc_segmap_task_76533;
                futhark_mc_task_76532_task.name =
                    "futhark_mc_segmap_task_76533";
                futhark_mc_task_76532_task.iterations = m_64027;
                futhark_mc_task_76532_task.task_time =
                    &ctx->futhark_mc_segmap_task_76533_total_time;
                futhark_mc_task_76532_task.task_iter =
                    &ctx->futhark_mc_segmap_task_76533_total_iter;
                futhark_mc_task_76532_task.sched = DYNAMIC;
                futhark_mc_task_76532_task.nested_fn =
                    futhark_mc_segmap_nested_task_76545;
                
                int futhark_mc_segmap_task_76533_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_76532_task);
                
                if (futhark_mc_segmap_task_76533_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_70046, &mem_70040,
                                 "mem_70040") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_70045, &mem_70044,
                                 "mem_70044") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_70044, "mem_70044") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_70040, "mem_70040") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_70048, &ext_mem_70046,
                             "ext_mem_70046") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_70047, &ext_mem_70045,
                             "ext_mem_70045") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70045, "ext_mem_70045") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70046, "ext_mem_70046") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_70777, &ext_mem_70048,
                         "ext_mem_70048") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_70776, &ext_mem_70047,
                         "ext_mem_70047") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_70047, "ext_mem_70047") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_70048, "ext_mem_70048") != 0)
            return 1;
    } else {
        bool match_lit_64754 = (int64_t) 0 == degree_64031;
        int64_t binop_x_70050 = m_64027 * n_m_64039;
        int64_t binop_y_70051 = (int64_t) 4 * binop_x_70050;
        int64_t bytes_70049 = smax64((int64_t) 0, binop_y_70051);
        struct memblock ext_mem_70775;
        
        ext_mem_70775.references = NULL;
        
        struct memblock ext_mem_70774;
        
        ext_mem_70774.references = NULL;
        if (match_lit_64754) {
            struct memblock mem_70052;
            
            mem_70052.references = NULL;
            if (memblock_alloc(ctx, &mem_70052, bytes_70049, "mem_70052")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_73589 = 0; i_73589 < m_64027; i_73589++) {
                for (int64_t i_73590 = 0; i_73590 < n_m_64039; i_73590++) {
                    ((float *) mem_70052.mem)[i_73589 * n_m_64039 + i_73590] =
                        0.0F;
                }
            }
            
            struct memblock mem_70233;
            
            mem_70233.references = NULL;
            if (memblock_alloc(ctx, &mem_70233, bytes_70049, "mem_70233")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_70054 = (int64_t) 8 * n_64028;
            int64_t bytes_70053 = smax64((int64_t) 0, binop_y_70054);
            int64_t binop_y_70057 = (int64_t) 4 * n_64028;
            int64_t bytes_70056 = smax64((int64_t) 0, binop_y_70057);
            int64_t binop_y_70072 = (int64_t) 4 * q_64030;
            int64_t bytes_70071 = smax64((int64_t) 0, binop_y_70072);
            int64_t binop_y_70093 = (int64_t) 4 * n_m_64039;
            int64_t bytes_70092 = smax64((int64_t) 0, binop_y_70093);
            int64_t flat_tid_67275 = (int64_t) 0;
            int32_t num_tasks_73591;
            int64_t flat_tid_67277 = (int64_t) 0;
            struct futhark_mc_task_76603 futhark_mc_task_76603;
            
            futhark_mc_task_76603.ctx = ctx;
            futhark_mc_task_76603.free_m_64027 = m_64027;
            futhark_mc_task_76603.free_n_64028 = n_64028;
            futhark_mc_task_76603.free_q_64030 = q_64030;
            futhark_mc_task_76603.free_jump_64032 = jump_64032;
            futhark_mc_task_76603.free_n_m_64039 = n_m_64039;
            futhark_mc_task_76603.free_i_64040 = i_64040;
            futhark_mc_task_76603.free_x_64041 = x_64041;
            futhark_mc_task_76603.free_min_res_64046 = min_res_64046;
            futhark_mc_task_76603.free_empty_slice_64051 = empty_slice_64051;
            futhark_mc_task_76603.free_m_64052 = m_64052;
            futhark_mc_task_76603.free_i64_res_64053 = i64_res_64053;
            futhark_mc_task_76603.free_Y_mem_69552 = Y_mem_69552.mem;
            futhark_mc_task_76603.free_bytes_70053 = bytes_70053;
            futhark_mc_task_76603.free_bytes_70056 = bytes_70056;
            futhark_mc_task_76603.free_bytes_70071 = bytes_70071;
            futhark_mc_task_76603.free_bytes_70092 = bytes_70092;
            futhark_mc_task_76603.free_mem_70233 = mem_70233.mem;
            
            struct scheduler_segop futhark_mc_task_76603_task;
            
            futhark_mc_task_76603_task.args = &futhark_mc_task_76603;
            futhark_mc_task_76603_task.top_level_fn =
                futhark_mc_segmap_task_76604;
            futhark_mc_task_76603_task.name = "futhark_mc_segmap_task_76604";
            futhark_mc_task_76603_task.iterations = m_64027;
            futhark_mc_task_76603_task.task_time =
                &ctx->futhark_mc_segmap_task_76604_total_time;
            futhark_mc_task_76603_task.task_iter =
                &ctx->futhark_mc_segmap_task_76604_total_iter;
            futhark_mc_task_76603_task.sched = DYNAMIC;
            futhark_mc_task_76603_task.nested_fn =
                futhark_mc_segmap_nested_task_76616;
            
            int futhark_mc_segmap_task_76604_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_76603_task);
            
            if (futhark_mc_segmap_task_76604_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_70775, &mem_70233, "mem_70233") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_70774, &mem_70052, "mem_70052") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_70233, "mem_70233") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_70052, "mem_70052") != 0)
                return 1;
        } else {
            bool match_lit_64944 = (int64_t) 1 == degree_64031;
            struct memblock ext_mem_70773;
            
            ext_mem_70773.references = NULL;
            
            struct memblock ext_mem_70772;
            
            ext_mem_70772.references = NULL;
            if (match_lit_64944) {
                struct memblock mem_70465;
                
                mem_70465.references = NULL;
                if (memblock_alloc(ctx, &mem_70465, bytes_70049, "mem_70465")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_70469;
                
                mem_70469.references = NULL;
                if (memblock_alloc(ctx, &mem_70469, bytes_70049, "mem_70469")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_70235 = (int64_t) 8 * n_64028;
                int64_t bytes_70234 = smax64((int64_t) 0, binop_y_70235);
                int64_t binop_y_70238 = (int64_t) 4 * n_64028;
                int64_t bytes_70237 = smax64((int64_t) 0, binop_y_70238);
                int64_t binop_y_70253 = (int64_t) 4 * q_64030;
                int64_t bytes_70252 = smax64((int64_t) 0, binop_y_70253);
                int64_t binop_y_70292 = (int64_t) 4 * n_m_64039;
                int64_t bytes_70291 = smax64((int64_t) 0, binop_y_70292);
                int64_t flat_tid_67738 = (int64_t) 0;
                int32_t num_tasks_74328;
                int64_t flat_tid_67740 = (int64_t) 0;
                struct futhark_mc_task_76670 futhark_mc_task_76670;
                
                futhark_mc_task_76670.ctx = ctx;
                futhark_mc_task_76670.free_m_64027 = m_64027;
                futhark_mc_task_76670.free_n_64028 = n_64028;
                futhark_mc_task_76670.free_q_64030 = q_64030;
                futhark_mc_task_76670.free_jump_64032 = jump_64032;
                futhark_mc_task_76670.free_n_m_64039 = n_m_64039;
                futhark_mc_task_76670.free_i_64040 = i_64040;
                futhark_mc_task_76670.free_x_64041 = x_64041;
                futhark_mc_task_76670.free_min_res_64046 = min_res_64046;
                futhark_mc_task_76670.free_empty_slice_64051 =
                    empty_slice_64051;
                futhark_mc_task_76670.free_m_64052 = m_64052;
                futhark_mc_task_76670.free_i64_res_64053 = i64_res_64053;
                futhark_mc_task_76670.free_Y_mem_69552 = Y_mem_69552.mem;
                futhark_mc_task_76670.free_bytes_70234 = bytes_70234;
                futhark_mc_task_76670.free_bytes_70237 = bytes_70237;
                futhark_mc_task_76670.free_bytes_70252 = bytes_70252;
                futhark_mc_task_76670.free_bytes_70291 = bytes_70291;
                futhark_mc_task_76670.free_mem_70465 = mem_70465.mem;
                futhark_mc_task_76670.free_mem_70469 = mem_70469.mem;
                
                struct scheduler_segop futhark_mc_task_76670_task;
                
                futhark_mc_task_76670_task.args = &futhark_mc_task_76670;
                futhark_mc_task_76670_task.top_level_fn =
                    futhark_mc_segmap_task_76671;
                futhark_mc_task_76670_task.name =
                    "futhark_mc_segmap_task_76671";
                futhark_mc_task_76670_task.iterations = m_64027;
                futhark_mc_task_76670_task.task_time =
                    &ctx->futhark_mc_segmap_task_76671_total_time;
                futhark_mc_task_76670_task.task_iter =
                    &ctx->futhark_mc_segmap_task_76671_total_iter;
                futhark_mc_task_76670_task.sched = DYNAMIC;
                futhark_mc_task_76670_task.nested_fn =
                    futhark_mc_segmap_nested_task_76685;
                
                int futhark_mc_segmap_task_76671_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_76670_task);
                
                if (futhark_mc_segmap_task_76671_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_70773, &mem_70465,
                                 "mem_70465") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_70772, &mem_70469,
                                 "mem_70469") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_70469, "mem_70469") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_70465, "mem_70465") != 0)
                    return 1;
            } else {
                struct memblock mem_70767;
                
                mem_70767.references = NULL;
                if (memblock_alloc(ctx, &mem_70767, bytes_70049, "mem_70767")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_70771;
                
                mem_70771.references = NULL;
                if (memblock_alloc(ctx, &mem_70771, bytes_70049, "mem_70771")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_70471 = (int64_t) 8 * n_64028;
                int64_t bytes_70470 = smax64((int64_t) 0, binop_y_70471);
                int64_t binop_y_70474 = (int64_t) 4 * n_64028;
                int64_t bytes_70473 = smax64((int64_t) 0, binop_y_70474);
                int64_t binop_y_70489 = (int64_t) 4 * q_64030;
                int64_t bytes_70488 = smax64((int64_t) 0, binop_y_70489);
                int64_t binop_y_70564 = (int64_t) 4 * n_m_64039;
                int64_t bytes_70563 = smax64((int64_t) 0, binop_y_70564);
                int64_t flat_tid_68289 = (int64_t) 0;
                int32_t num_tasks_75218;
                int64_t flat_tid_68291 = (int64_t) 0;
                struct futhark_mc_task_76745 futhark_mc_task_76745;
                
                futhark_mc_task_76745.ctx = ctx;
                futhark_mc_task_76745.free_m_64027 = m_64027;
                futhark_mc_task_76745.free_n_64028 = n_64028;
                futhark_mc_task_76745.free_q_64030 = q_64030;
                futhark_mc_task_76745.free_jump_64032 = jump_64032;
                futhark_mc_task_76745.free_n_m_64039 = n_m_64039;
                futhark_mc_task_76745.free_i_64040 = i_64040;
                futhark_mc_task_76745.free_x_64041 = x_64041;
                futhark_mc_task_76745.free_min_res_64046 = min_res_64046;
                futhark_mc_task_76745.free_empty_slice_64051 =
                    empty_slice_64051;
                futhark_mc_task_76745.free_m_64052 = m_64052;
                futhark_mc_task_76745.free_i64_res_64053 = i64_res_64053;
                futhark_mc_task_76745.free_Y_mem_69552 = Y_mem_69552.mem;
                futhark_mc_task_76745.free_bytes_70470 = bytes_70470;
                futhark_mc_task_76745.free_bytes_70473 = bytes_70473;
                futhark_mc_task_76745.free_bytes_70488 = bytes_70488;
                futhark_mc_task_76745.free_bytes_70563 = bytes_70563;
                futhark_mc_task_76745.free_mem_70767 = mem_70767.mem;
                futhark_mc_task_76745.free_mem_70771 = mem_70771.mem;
                
                struct scheduler_segop futhark_mc_task_76745_task;
                
                futhark_mc_task_76745_task.args = &futhark_mc_task_76745;
                futhark_mc_task_76745_task.top_level_fn =
                    futhark_mc_segmap_task_76746;
                futhark_mc_task_76745_task.name =
                    "futhark_mc_segmap_task_76746";
                futhark_mc_task_76745_task.iterations = m_64027;
                futhark_mc_task_76745_task.task_time =
                    &ctx->futhark_mc_segmap_task_76746_total_time;
                futhark_mc_task_76745_task.task_iter =
                    &ctx->futhark_mc_segmap_task_76746_total_iter;
                futhark_mc_task_76745_task.sched = DYNAMIC;
                futhark_mc_task_76745_task.nested_fn =
                    futhark_mc_segmap_nested_task_76762;
                
                int futhark_mc_segmap_task_76746_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_76745_task);
                
                if (futhark_mc_segmap_task_76746_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_70773, &mem_70767,
                                 "mem_70767") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_70772, &mem_70771,
                                 "mem_70771") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_70771, "mem_70771") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_70767, "mem_70767") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_70775, &ext_mem_70773,
                             "ext_mem_70773") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_70774, &ext_mem_70772,
                             "ext_mem_70772") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70772, "ext_mem_70772") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70773, "ext_mem_70773") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_70777, &ext_mem_70775,
                         "ext_mem_70775") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_70776, &ext_mem_70774,
                         "ext_mem_70774") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_70774, "ext_mem_70774") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_70775, "ext_mem_70775") != 0)
            return 1;
    }
    
    bool cond_65455 = slt64((int64_t) 1, jump_64032);
    int64_t binop_x_70797 = m_64027 * n_64028;
    int64_t binop_y_70798 = (int64_t) 4 * binop_x_70797;
    int64_t bytes_70796 = smax64((int64_t) 0, binop_y_70798);
    int64_t ext_70801;
    
    if (cond_65455) {
        ext_70801 = n_64028;
    } else {
        ext_70801 = n_m_64039;
    }
    
    struct memblock ext_mem_70800;
    
    ext_mem_70800.references = NULL;
    if (cond_65455) {
        bool nonzzero_cert_65457;
        
        if (!nonzzero_64036) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:415:27-34\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:414:3-427:14\n   #4  loess.fut:466:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:465:5-467:29\n   #8  loess.fut:430:1-469:26\n");
            if (memblock_unref(ctx, &ext_mem_70800, "ext_mem_70800") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70776, "ext_mem_70776") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70777, "ext_mem_70777") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_70817, "mem_out_70817") != 0)
                return 1;
            return 1;
        }
        
        struct memblock mem_70799;
        
        mem_70799.references = NULL;
        if (memblock_alloc(ctx, &mem_70799, bytes_70796, "mem_70799")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t binop_y_70779 = (int64_t) 4 * n_64028;
        int64_t bytes_70778 = smax64((int64_t) 0, binop_y_70779);
        int64_t flat_tid_68950 = (int64_t) 0;
        int32_t num_tasks_76290;
        int64_t flat_tid_68952 = (int64_t) 0;
        struct futhark_mc_task_76832 futhark_mc_task_76832;
        
        futhark_mc_task_76832.ctx = ctx;
        futhark_mc_task_76832.free_m_64027 = m_64027;
        futhark_mc_task_76832.free_n_64028 = n_64028;
        futhark_mc_task_76832.free_jump_64032 = jump_64032;
        futhark_mc_task_76832.free_x_64038 = x_64038;
        futhark_mc_task_76832.free_n_m_64039 = n_m_64039;
        futhark_mc_task_76832.free_i_64040 = i_64040;
        futhark_mc_task_76832.free_ext_mem_70776 = ext_mem_70776.mem;
        futhark_mc_task_76832.free_ext_mem_70777 = ext_mem_70777.mem;
        futhark_mc_task_76832.free_bytes_70778 = bytes_70778;
        futhark_mc_task_76832.free_mem_70799 = mem_70799.mem;
        
        struct scheduler_segop futhark_mc_task_76832_task;
        
        futhark_mc_task_76832_task.args = &futhark_mc_task_76832;
        futhark_mc_task_76832_task.top_level_fn = futhark_mc_segmap_task_76833;
        futhark_mc_task_76832_task.name = "futhark_mc_segmap_task_76833";
        futhark_mc_task_76832_task.iterations = m_64027;
        futhark_mc_task_76832_task.task_time =
            &ctx->futhark_mc_segmap_task_76833_total_time;
        futhark_mc_task_76832_task.task_iter =
            &ctx->futhark_mc_segmap_task_76833_total_iter;
        futhark_mc_task_76832_task.sched = STATIC;
        futhark_mc_task_76832_task.nested_fn =
            futhark_mc_segmap_nested_task_76837;
        
        int futhark_mc_segmap_task_76833_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_76832_task);
        
        if (futhark_mc_segmap_task_76833_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_70800, &mem_70799, "mem_70799") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_70799, "mem_70799") != 0)
            return 1;
    } else {
        bool dim_match_65509 = n_64028 == n_m_64039;
        bool empty_or_match_cert_65510;
        
        if (!dim_match_65509) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Value of (core language) shape (",
                          (long long) m_64027, ", ", (long long) n_m_64039,
                          ") cannot match shape of type `[",
                          (long long) m_64027, "][", (long long) n_64028,
                          "]f32`.",
                          "-> #0  loess.fut:469:5-26\n   #1  loess.fut:430:1-469:26\n");
            if (memblock_unref(ctx, &ext_mem_70800, "ext_mem_70800") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70776, "ext_mem_70776") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_70777, "ext_mem_70777") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_70817, "mem_out_70817") != 0)
                return 1;
            return 1;
        }
        if (memblock_set(ctx, &ext_mem_70800, &ext_mem_70777,
                         "ext_mem_70777") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &ext_mem_70776, "ext_mem_70776") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_70777, "ext_mem_70777") != 0)
        return 1;
    
    struct memblock mem_70805;
    
    mem_70805.references = NULL;
    if (memblock_alloc(ctx, &mem_70805, bytes_70796, "mem_70805")) {
        err = 1;
        goto cleanup;
    }
    memmove(mem_70805.mem + (int64_t) 0, ext_mem_70800.mem + (int64_t) 0,
            m_64027 * n_64028 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_70800, "ext_mem_70800") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_70817, &mem_70805, "mem_70805") != 0)
        return 1;
    (*mem_out_p_76398).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_76398, &mem_out_70817, "mem_out_70817") !=
        0)
        return 1;
    if (memblock_unref(ctx, &mem_70805, "mem_70805") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_70800, "ext_mem_70800") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_70776, "ext_mem_70776") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_70777, "ext_mem_70777") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_70817, "mem_out_70817") != 0)
        return 1;
    
  cleanup:
    { }
    return err;
}
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5)
{
    struct memblock Y_mem_69552;
    
    Y_mem_69552.references = NULL;
    
    int64_t m_64027;
    int64_t n_64028;
    int64_t q_64030;
    int64_t degree_64031;
    int64_t jump_64032;
    int64_t jump_threshold_64033;
    int64_t q_threshold_64034;
    struct memblock mem_out_70817;
    
    mem_out_70817.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    Y_mem_69552 = in0->mem;
    m_64027 = in0->shape[0];
    n_64028 = in0->shape[1];
    q_64030 = in1;
    degree_64031 = in2;
    jump_64032 = in3;
    jump_threshold_64033 = in4;
    q_threshold_64034 = in5;
    if (!(m_64027 == in0->shape[0] && n_64028 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_70817, Y_mem_69552, m_64027,
                                n_64028, q_64030, degree_64031, jump_64032,
                                jump_threshold_64033, q_threshold_64034);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_70817;
            (*out0)->shape[0] = m_64027;
            (*out0)->shape[1] = n_64028;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
