// Generated by Futhark 0.20.0
// git: 5cc4d4b (Tue Jul 6 11:53:53 2021 -0700)
#ifndef _GNU_SOURCE
#define _GNU_SOURCE
#endif
#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif
// Headers

#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation

struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_sync(struct futhark_context *ctx);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);

// Arrays

struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5);

// Miscellaneous

char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_multicore
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}


static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, msg...) check_err(err, 0, __func__, __LINE__, msg)
#define CHECK_ERRNO(err, msg...) check_err(err, 1, __func__, __LINE__, msg)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  size_t start = ftell(f);
  fseek(f, 0, SEEK_END);
  size_t src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc(src_size + 1);
  if (fread(s, 1, src_size, f) != src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.

// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>

// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

static inline uint8_t add8(uint8_t x, uint8_t y)
{
    return x + y;
}
static inline uint16_t add16(uint16_t x, uint16_t y)
{
    return x + y;
}
static inline uint32_t add32(uint32_t x, uint32_t y)
{
    return x + y;
}
static inline uint64_t add64(uint64_t x, uint64_t y)
{
    return x + y;
}
static inline uint8_t sub8(uint8_t x, uint8_t y)
{
    return x - y;
}
static inline uint16_t sub16(uint16_t x, uint16_t y)
{
    return x - y;
}
static inline uint32_t sub32(uint32_t x, uint32_t y)
{
    return x - y;
}
static inline uint64_t sub64(uint64_t x, uint64_t y)
{
    return x - y;
}
static inline uint8_t mul8(uint8_t x, uint8_t y)
{
    return x * y;
}
static inline uint16_t mul16(uint16_t x, uint16_t y)
{
    return x * y;
}
static inline uint32_t mul32(uint32_t x, uint32_t y)
{
    return x * y;
}
static inline uint64_t mul64(uint64_t x, uint64_t y)
{
    return x * y;
}
static inline uint8_t udiv8(uint8_t x, uint8_t y)
{
    return x / y;
}
static inline uint16_t udiv16(uint16_t x, uint16_t y)
{
    return x / y;
}
static inline uint32_t udiv32(uint32_t x, uint32_t y)
{
    return x / y;
}
static inline uint64_t udiv64(uint64_t x, uint64_t y)
{
    return x / y;
}
static inline uint8_t udiv_up8(uint8_t x, uint8_t y)
{
    return (x + y - 1) / y;
}
static inline uint16_t udiv_up16(uint16_t x, uint16_t y)
{
    return (x + y - 1) / y;
}
static inline uint32_t udiv_up32(uint32_t x, uint32_t y)
{
    return (x + y - 1) / y;
}
static inline uint64_t udiv_up64(uint64_t x, uint64_t y)
{
    return (x + y - 1) / y;
}
static inline uint8_t umod8(uint8_t x, uint8_t y)
{
    return x % y;
}
static inline uint16_t umod16(uint16_t x, uint16_t y)
{
    return x % y;
}
static inline uint32_t umod32(uint32_t x, uint32_t y)
{
    return x % y;
}
static inline uint64_t umod64(uint64_t x, uint64_t y)
{
    return x % y;
}
static inline uint8_t udiv_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint16_t udiv_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint32_t udiv_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint64_t udiv_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint8_t umod_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint16_t umod_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint32_t umod_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint64_t umod_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t sdiv8(int8_t x, int8_t y)
{
    int8_t q = x / y;
    int8_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int16_t sdiv16(int16_t x, int16_t y)
{
    int16_t q = x / y;
    int16_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int32_t sdiv32(int32_t x, int32_t y)
{
    int32_t q = x / y;
    int32_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int64_t sdiv64(int64_t x, int64_t y)
{
    int64_t q = x / y;
    int64_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int8_t sdiv_up8(int8_t x, int8_t y)
{
    return sdiv8(x + y - 1, y);
}
static inline int16_t sdiv_up16(int16_t x, int16_t y)
{
    return sdiv16(x + y - 1, y);
}
static inline int32_t sdiv_up32(int32_t x, int32_t y)
{
    return sdiv32(x + y - 1, y);
}
static inline int64_t sdiv_up64(int64_t x, int64_t y)
{
    return sdiv64(x + y - 1, y);
}
static inline int8_t smod8(int8_t x, int8_t y)
{
    int8_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int16_t smod16(int16_t x, int16_t y)
{
    int16_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int32_t smod32(int32_t x, int32_t y)
{
    int32_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int64_t smod64(int64_t x, int64_t y)
{
    int64_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int8_t sdiv_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : sdiv8(x, y);
}
static inline int16_t sdiv_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : sdiv16(x, y);
}
static inline int32_t sdiv_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : sdiv32(x, y);
}
static inline int64_t sdiv_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : sdiv64(x, y);
}
static inline int8_t sdiv_up_safe8(int8_t x, int8_t y)
{
    return sdiv_safe8(x + y - 1, y);
}
static inline int16_t sdiv_up_safe16(int16_t x, int16_t y)
{
    return sdiv_safe16(x + y - 1, y);
}
static inline int32_t sdiv_up_safe32(int32_t x, int32_t y)
{
    return sdiv_safe32(x + y - 1, y);
}
static inline int64_t sdiv_up_safe64(int64_t x, int64_t y)
{
    return sdiv_safe64(x + y - 1, y);
}
static inline int8_t smod_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : smod8(x, y);
}
static inline int16_t smod_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : smod16(x, y);
}
static inline int32_t smod_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : smod32(x, y);
}
static inline int64_t smod_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : smod64(x, y);
}
static inline int8_t squot8(int8_t x, int8_t y)
{
    return x / y;
}
static inline int16_t squot16(int16_t x, int16_t y)
{
    return x / y;
}
static inline int32_t squot32(int32_t x, int32_t y)
{
    return x / y;
}
static inline int64_t squot64(int64_t x, int64_t y)
{
    return x / y;
}
static inline int8_t srem8(int8_t x, int8_t y)
{
    return x % y;
}
static inline int16_t srem16(int16_t x, int16_t y)
{
    return x % y;
}
static inline int32_t srem32(int32_t x, int32_t y)
{
    return x % y;
}
static inline int64_t srem64(int64_t x, int64_t y)
{
    return x % y;
}
static inline int8_t squot_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int16_t squot_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int32_t squot_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int64_t squot_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int8_t srem_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int16_t srem_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int32_t srem_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int64_t srem_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t smin8(int8_t x, int8_t y)
{
    return x < y ? x : y;
}
static inline int16_t smin16(int16_t x, int16_t y)
{
    return x < y ? x : y;
}
static inline int32_t smin32(int32_t x, int32_t y)
{
    return x < y ? x : y;
}
static inline int64_t smin64(int64_t x, int64_t y)
{
    return x < y ? x : y;
}
static inline uint8_t umin8(uint8_t x, uint8_t y)
{
    return x < y ? x : y;
}
static inline uint16_t umin16(uint16_t x, uint16_t y)
{
    return x < y ? x : y;
}
static inline uint32_t umin32(uint32_t x, uint32_t y)
{
    return x < y ? x : y;
}
static inline uint64_t umin64(uint64_t x, uint64_t y)
{
    return x < y ? x : y;
}
static inline int8_t smax8(int8_t x, int8_t y)
{
    return x < y ? y : x;
}
static inline int16_t smax16(int16_t x, int16_t y)
{
    return x < y ? y : x;
}
static inline int32_t smax32(int32_t x, int32_t y)
{
    return x < y ? y : x;
}
static inline int64_t smax64(int64_t x, int64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t umax8(uint8_t x, uint8_t y)
{
    return x < y ? y : x;
}
static inline uint16_t umax16(uint16_t x, uint16_t y)
{
    return x < y ? y : x;
}
static inline uint32_t umax32(uint32_t x, uint32_t y)
{
    return x < y ? y : x;
}
static inline uint64_t umax64(uint64_t x, uint64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t shl8(uint8_t x, uint8_t y)
{
    return x << y;
}
static inline uint16_t shl16(uint16_t x, uint16_t y)
{
    return x << y;
}
static inline uint32_t shl32(uint32_t x, uint32_t y)
{
    return x << y;
}
static inline uint64_t shl64(uint64_t x, uint64_t y)
{
    return x << y;
}
static inline uint8_t lshr8(uint8_t x, uint8_t y)
{
    return x >> y;
}
static inline uint16_t lshr16(uint16_t x, uint16_t y)
{
    return x >> y;
}
static inline uint32_t lshr32(uint32_t x, uint32_t y)
{
    return x >> y;
}
static inline uint64_t lshr64(uint64_t x, uint64_t y)
{
    return x >> y;
}
static inline int8_t ashr8(int8_t x, int8_t y)
{
    return x >> y;
}
static inline int16_t ashr16(int16_t x, int16_t y)
{
    return x >> y;
}
static inline int32_t ashr32(int32_t x, int32_t y)
{
    return x >> y;
}
static inline int64_t ashr64(int64_t x, int64_t y)
{
    return x >> y;
}
static inline uint8_t and8(uint8_t x, uint8_t y)
{
    return x & y;
}
static inline uint16_t and16(uint16_t x, uint16_t y)
{
    return x & y;
}
static inline uint32_t and32(uint32_t x, uint32_t y)
{
    return x & y;
}
static inline uint64_t and64(uint64_t x, uint64_t y)
{
    return x & y;
}
static inline uint8_t or8(uint8_t x, uint8_t y)
{
    return x | y;
}
static inline uint16_t or16(uint16_t x, uint16_t y)
{
    return x | y;
}
static inline uint32_t or32(uint32_t x, uint32_t y)
{
    return x | y;
}
static inline uint64_t or64(uint64_t x, uint64_t y)
{
    return x | y;
}
static inline uint8_t xor8(uint8_t x, uint8_t y)
{
    return x ^ y;
}
static inline uint16_t xor16(uint16_t x, uint16_t y)
{
    return x ^ y;
}
static inline uint32_t xor32(uint32_t x, uint32_t y)
{
    return x ^ y;
}
static inline uint64_t xor64(uint64_t x, uint64_t y)
{
    return x ^ y;
}
static inline bool ult8(uint8_t x, uint8_t y)
{
    return x < y;
}
static inline bool ult16(uint16_t x, uint16_t y)
{
    return x < y;
}
static inline bool ult32(uint32_t x, uint32_t y)
{
    return x < y;
}
static inline bool ult64(uint64_t x, uint64_t y)
{
    return x < y;
}
static inline bool ule8(uint8_t x, uint8_t y)
{
    return x <= y;
}
static inline bool ule16(uint16_t x, uint16_t y)
{
    return x <= y;
}
static inline bool ule32(uint32_t x, uint32_t y)
{
    return x <= y;
}
static inline bool ule64(uint64_t x, uint64_t y)
{
    return x <= y;
}
static inline bool slt8(int8_t x, int8_t y)
{
    return x < y;
}
static inline bool slt16(int16_t x, int16_t y)
{
    return x < y;
}
static inline bool slt32(int32_t x, int32_t y)
{
    return x < y;
}
static inline bool slt64(int64_t x, int64_t y)
{
    return x < y;
}
static inline bool sle8(int8_t x, int8_t y)
{
    return x <= y;
}
static inline bool sle16(int16_t x, int16_t y)
{
    return x <= y;
}
static inline bool sle32(int32_t x, int32_t y)
{
    return x <= y;
}
static inline bool sle64(int64_t x, int64_t y)
{
    return x <= y;
}
static inline int8_t pow8(int8_t x, int8_t y)
{
    int8_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int16_t pow16(int16_t x, int16_t y)
{
    int16_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int32_t pow32(int32_t x, int32_t y)
{
    int32_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int64_t pow64(int64_t x, int64_t y)
{
    int64_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline bool itob_i8_bool(int8_t x)
{
    return x;
}
static inline bool itob_i16_bool(int16_t x)
{
    return x;
}
static inline bool itob_i32_bool(int32_t x)
{
    return x;
}
static inline bool itob_i64_bool(int64_t x)
{
    return x;
}
static inline int8_t btoi_bool_i8(bool x)
{
    return x;
}
static inline int16_t btoi_bool_i16(bool x)
{
    return x;
}
static inline int32_t btoi_bool_i32(bool x)
{
    return x;
}
static inline int64_t btoi_bool_i64(bool x)
{
    return x;
}
#define sext_i8_i8(x) ((int8_t) (int8_t) x)
#define sext_i8_i16(x) ((int16_t) (int8_t) x)
#define sext_i8_i32(x) ((int32_t) (int8_t) x)
#define sext_i8_i64(x) ((int64_t) (int8_t) x)
#define sext_i16_i8(x) ((int8_t) (int16_t) x)
#define sext_i16_i16(x) ((int16_t) (int16_t) x)
#define sext_i16_i32(x) ((int32_t) (int16_t) x)
#define sext_i16_i64(x) ((int64_t) (int16_t) x)
#define sext_i32_i8(x) ((int8_t) (int32_t) x)
#define sext_i32_i16(x) ((int16_t) (int32_t) x)
#define sext_i32_i32(x) ((int32_t) (int32_t) x)
#define sext_i32_i64(x) ((int64_t) (int32_t) x)
#define sext_i64_i8(x) ((int8_t) (int64_t) x)
#define sext_i64_i16(x) ((int16_t) (int64_t) x)
#define sext_i64_i32(x) ((int32_t) (int64_t) x)
#define sext_i64_i64(x) ((int64_t) (int64_t) x)
#define zext_i8_i8(x) ((int8_t) (uint8_t) x)
#define zext_i8_i16(x) ((int16_t) (uint8_t) x)
#define zext_i8_i32(x) ((int32_t) (uint8_t) x)
#define zext_i8_i64(x) ((int64_t) (uint8_t) x)
#define zext_i16_i8(x) ((int8_t) (uint16_t) x)
#define zext_i16_i16(x) ((int16_t) (uint16_t) x)
#define zext_i16_i32(x) ((int32_t) (uint16_t) x)
#define zext_i16_i64(x) ((int64_t) (uint16_t) x)
#define zext_i32_i8(x) ((int8_t) (uint32_t) x)
#define zext_i32_i16(x) ((int16_t) (uint32_t) x)
#define zext_i32_i32(x) ((int32_t) (uint32_t) x)
#define zext_i32_i64(x) ((int64_t) (uint32_t) x)
#define zext_i64_i8(x) ((int8_t) (uint64_t) x)
#define zext_i64_i16(x) ((int16_t) (uint64_t) x)
#define zext_i64_i32(x) ((int32_t) (uint64_t) x)
#define zext_i64_i64(x) ((int64_t) (uint64_t) x)
static int8_t abs8(int8_t x)
{
    return abs(x);
}
static int16_t abs16(int16_t x)
{
    return abs(x);
}
static int32_t abs32(int32_t x)
{
    return abs(x);
}
#if defined(__OPENCL_VERSION__)
static int64_t abs64(int64_t x)
{
    return abs(x);
}
#else
static int64_t abs64(int64_t x)
{
    return llabs(x);
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x)
{
    return popcount(x);
}
static int32_t futrts_popc16(int16_t x)
{
    return popcount(x);
}
static int32_t futrts_popc32(int32_t x)
{
    return popcount(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return popcount(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_popc8(int8_t x)
{
    return __popc(zext_i8_i32(x));
}
static int32_t futrts_popc16(int16_t x)
{
    return __popc(zext_i16_i32(x));
}
static int32_t futrts_popc32(int32_t x)
{
    return __popc(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return __popcll(x);
}
#else
static int32_t futrts_popc8(int8_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc16(int16_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc32(int32_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc64(int64_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    return mul_hi(a, b);
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    return mul_hi(a, b);
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mul_hi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul_hi(a, b);
}
#elif defined(__CUDA_ARCH__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mulhi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul64hi(a, b);
}
#else
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    uint64_t aa = a;
    uint64_t bb = b;
    
    return aa * bb >> 32;
}
#ifdef __EMSCRIPTEN__
static uint64_t futrts_mul_hi64(uint64_t x, uint64_t y)
{
    uint64_t a = x >> 32, b = x & 0xffffffff;
    uint64_t c = y >> 32, d = y & 0xffffffff;
    uint64_t ac = a * c;
    uint64_t bc = b * c;
    uint64_t ad = a * d;
    uint64_t bd = b * d;
    uint64_t mid34 = (bd >> 32) + (bc & 0xffffffff) + (ad & 0xffffffff);
    uint64_t upper64 = ac + (bc >> 32) + (ad >> 32) + (mid34 >> 32);
    
    return upper64;
}
#else
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    __uint128_t aa = a;
    __uint128_t bb = b;
    
    return aa * bb >> 64;
}
#endif
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return mad_hi(a, b, c);
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return mad_hi(a, b, c);
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return mad_hi(a, b, c);
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return mad_hi(a, b, c);
}
#else
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return futrts_mul_hi8(a, b) + c;
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return futrts_mul_hi16(a, b) + c;
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return futrts_mul_hi32(a, b) + c;
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return futrts_mul_hi64(a, b) + c;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x)
{
    return clz(x);
}
static int32_t futrts_clzz16(int16_t x)
{
    return clz(x);
}
static int32_t futrts_clzz32(int32_t x)
{
    return clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return clz(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_clzz8(int8_t x)
{
    return __clz(zext_i8_i32(x)) - 24;
}
static int32_t futrts_clzz16(int16_t x)
{
    return __clz(zext_i16_i32(x)) - 16;
}
static int32_t futrts_clzz32(int32_t x)
{
    return __clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return __clzll(x);
}
#else
static int32_t futrts_clzz8(int8_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz16(int16_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz32(int32_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz64(int64_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x)
{
    int i = 0;
    
    for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int i = 0;
    
    for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int i = 0;
    
    for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int i = 0;
    
    for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_ctzz8(int8_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 8 : y - 1;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 16 : y - 1;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 32 : y - 1;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int y = __ffsll(x);
    
    return y == 0 ? 64 : y - 1;
}
#else
static int32_t futrts_ctzz8(int8_t x)
{
    return x == 0 ? 8 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz16(int16_t x)
{
    return x == 0 ? 16 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz32(int32_t x)
{
    return x == 0 ? 32 : __builtin_ctz(x);
}
static int32_t futrts_ctzz64(int64_t x)
{
    return x == 0 ? 64 : __builtin_ctzll(x);
}
#endif
static inline float fdiv32(float x, float y)
{
    return x / y;
}
static inline float fadd32(float x, float y)
{
    return x + y;
}
static inline float fsub32(float x, float y)
{
    return x - y;
}
static inline float fmul32(float x, float y)
{
    return x * y;
}
static inline bool cmplt32(float x, float y)
{
    return x < y;
}
static inline bool cmple32(float x, float y)
{
    return x <= y;
}
static inline float sitofp_i8_f32(int8_t x)
{
    return (float) x;
}
static inline float sitofp_i16_f32(int16_t x)
{
    return (float) x;
}
static inline float sitofp_i32_f32(int32_t x)
{
    return (float) x;
}
static inline float sitofp_i64_f32(int64_t x)
{
    return (float) x;
}
static inline float uitofp_i8_f32(uint8_t x)
{
    return (float) x;
}
static inline float uitofp_i16_f32(uint16_t x)
{
    return (float) x;
}
static inline float uitofp_i32_f32(uint32_t x)
{
    return (float) x;
}
static inline float uitofp_i64_f32(uint64_t x)
{
    return (float) x;
}
static inline int8_t fptosi_f32_i8(float x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f32_i16(float x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f32_i32(float x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f32_i64(float x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f32_i8(float x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f32_i16(float x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f32_i32(float x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f32_i64(float x)
{
    return (uint64_t) x;
}
static inline double fdiv64(double x, double y)
{
    return x / y;
}
static inline double fadd64(double x, double y)
{
    return x + y;
}
static inline double fsub64(double x, double y)
{
    return x - y;
}
static inline double fmul64(double x, double y)
{
    return x * y;
}
static inline bool cmplt64(double x, double y)
{
    return x < y;
}
static inline bool cmple64(double x, double y)
{
    return x <= y;
}
static inline double sitofp_i8_f64(int8_t x)
{
    return (double) x;
}
static inline double sitofp_i16_f64(int16_t x)
{
    return (double) x;
}
static inline double sitofp_i32_f64(int32_t x)
{
    return (double) x;
}
static inline double sitofp_i64_f64(int64_t x)
{
    return (double) x;
}
static inline double uitofp_i8_f64(uint8_t x)
{
    return (double) x;
}
static inline double uitofp_i16_f64(uint16_t x)
{
    return (double) x;
}
static inline double uitofp_i32_f64(uint32_t x)
{
    return (double) x;
}
static inline double uitofp_i64_f64(uint64_t x)
{
    return (double) x;
}
static inline int8_t fptosi_f64_i8(double x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f64_i16(double x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f64_i32(double x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f64_i64(double x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f64_i8(double x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f64_i16(double x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f64_i32(double x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f64_i64(double x)
{
    return (uint64_t) x;
}
static inline float fpconv_f32_f32(float x)
{
    return (float) x;
}
static inline double fpconv_f32_f64(float x)
{
    return (double) x;
}
static inline float fpconv_f64_f32(double x)
{
    return (float) x;
}
static inline double fpconv_f64_f64(double x)
{
    return (double) x;
}
#ifdef __OPENCL_VERSION__
static inline float fabs32(float x)
{
    return fabs(x);
}
static inline float fmax32(float x, float y)
{
    return fmax(x, y);
}
static inline float fmin32(float x, float y)
{
    return fmin(x, y);
}
static inline float fpow32(float x, float y)
{
    return pow(x, y);
}
#else
static inline float fabs32(float x)
{
    return fabsf(x);
}
static inline float fmax32(float x, float y)
{
    return fmaxf(x, y);
}
static inline float fmin32(float x, float y)
{
    return fminf(x, y);
}
static inline float fpow32(float x, float y)
{
    return powf(x, y);
}
#endif
static inline bool futrts_isnan32(float x)
{
    return isnan(x);
}
static inline bool futrts_isinf32(float x)
{
    return isinf(x);
}
#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x)
{
    return log(x);
}
static inline float futrts_log2_32(float x)
{
    return log2(x);
}
static inline float futrts_log10_32(float x)
{
    return log10(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrt(x);
}
static inline float futrts_exp32(float x)
{
    return exp(x);
}
static inline float futrts_cos32(float x)
{
    return cos(x);
}
static inline float futrts_sin32(float x)
{
    return sin(x);
}
static inline float futrts_tan32(float x)
{
    return tan(x);
}
static inline float futrts_acos32(float x)
{
    return acos(x);
}
static inline float futrts_asin32(float x)
{
    return asin(x);
}
static inline float futrts_atan32(float x)
{
    return atan(x);
}
static inline float futrts_cosh32(float x)
{
    return cosh(x);
}
static inline float futrts_sinh32(float x)
{
    return sinh(x);
}
static inline float futrts_tanh32(float x)
{
    return tanh(x);
}
static inline float futrts_acosh32(float x)
{
    return acosh(x);
}
static inline float futrts_asinh32(float x)
{
    return asinh(x);
}
static inline float futrts_atanh32(float x)
{
    return atanh(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypot(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgamma(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgamma(x);
}
static inline float fmod32(float x, float y)
{
    return fmod(x, y);
}
static inline float futrts_round32(float x)
{
    return rint(x);
}
static inline float futrts_floor32(float x)
{
    return floor(x);
}
static inline float futrts_ceil32(float x)
{
    return ceil(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return mix(v0, v1, t);
}
static inline float futrts_mad32(float a, float b, float c)
{
    return mad(a, b, c);
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fma(a, b, c);
}
#else
static inline float futrts_log32(float x)
{
    return logf(x);
}
static inline float futrts_log2_32(float x)
{
    return log2f(x);
}
static inline float futrts_log10_32(float x)
{
    return log10f(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrtf(x);
}
static inline float futrts_exp32(float x)
{
    return expf(x);
}
static inline float futrts_cos32(float x)
{
    return cosf(x);
}
static inline float futrts_sin32(float x)
{
    return sinf(x);
}
static inline float futrts_tan32(float x)
{
    return tanf(x);
}
static inline float futrts_acos32(float x)
{
    return acosf(x);
}
static inline float futrts_asin32(float x)
{
    return asinf(x);
}
static inline float futrts_atan32(float x)
{
    return atanf(x);
}
static inline float futrts_cosh32(float x)
{
    return coshf(x);
}
static inline float futrts_sinh32(float x)
{
    return sinhf(x);
}
static inline float futrts_tanh32(float x)
{
    return tanhf(x);
}
static inline float futrts_acosh32(float x)
{
    return acoshf(x);
}
static inline float futrts_asinh32(float x)
{
    return asinhf(x);
}
static inline float futrts_atanh32(float x)
{
    return atanhf(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2f(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypotf(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgammaf(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgammaf(x);
}
static inline float fmod32(float x, float y)
{
    return fmodf(x, y);
}
static inline float futrts_round32(float x)
{
    return rintf(x);
}
static inline float futrts_floor32(float x)
{
    return floorf(x);
}
static inline float futrts_ceil32(float x)
{
    return ceilf(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return v0 + (v1 - v0) * t;
}
static inline float futrts_mad32(float a, float b, float c)
{
    return a * b + c;
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fmaf(a, b, c);
}
#endif
static inline int32_t futrts_to_bits32(float x)
{
    union {
        float f;
        int32_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float futrts_from_bits32(int32_t x)
{
    union {
        int32_t f;
        float t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float fsignum32(float x)
{
    return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}
static inline double fabs64(double x)
{
    return fabs(x);
}
static inline float fmax64(double x, double y)
{
    return fmax(x, y);
}
static inline float fmin64(double x, double y)
{
    return fmin(x, y);
}
static inline double fpow64(double x, double y)
{
    return pow(x, y);
}
static inline double futrts_log64(double x)
{
    return log(x);
}
static inline double futrts_log2_64(double x)
{
    return log2(x);
}
static inline double futrts_log10_64(double x)
{
    return log10(x);
}
static inline double futrts_sqrt64(double x)
{
    return sqrt(x);
}
static inline double futrts_exp64(double x)
{
    return exp(x);
}
static inline double futrts_cos64(double x)
{
    return cos(x);
}
static inline double futrts_sin64(double x)
{
    return sin(x);
}
static inline double futrts_tan64(double x)
{
    return tan(x);
}
static inline double futrts_acos64(double x)
{
    return acos(x);
}
static inline double futrts_asin64(double x)
{
    return asin(x);
}
static inline double futrts_atan64(double x)
{
    return atan(x);
}
static inline double futrts_cosh64(double x)
{
    return cosh(x);
}
static inline double futrts_sinh64(double x)
{
    return sinh(x);
}
static inline double futrts_tanh64(double x)
{
    return tanh(x);
}
static inline double futrts_acosh64(double x)
{
    return acosh(x);
}
static inline double futrts_asinh64(double x)
{
    return asinh(x);
}
static inline double futrts_atanh64(double x)
{
    return atanh(x);
}
static inline double futrts_atan2_64(double x, double y)
{
    return atan2(x, y);
}
static inline double futrts_hypot64(double x, double y)
{
    return hypot(x, y);
}
static inline double futrts_gamma64(double x)
{
    return tgamma(x);
}
static inline double futrts_lgamma64(double x)
{
    return lgamma(x);
}
static inline double futrts_fma64(double a, double b, double c)
{
    return fma(a, b, c);
}
static inline double futrts_round64(double x)
{
    return rint(x);
}
static inline double futrts_ceil64(double x)
{
    return ceil(x);
}
static inline double futrts_floor64(double x)
{
    return floor(x);
}
static inline bool futrts_isnan64(double x)
{
    return isnan(x);
}
static inline bool futrts_isinf64(double x)
{
    return isinf(x);
}
static inline int64_t futrts_to_bits64(double x)
{
    union {
        double f;
        int64_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double futrts_from_bits64(int64_t x)
{
    union {
        int64_t f;
        double t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double fmod64(double x, double y)
{
    return fmod(x, y);
}
static inline double fsignum64(double x)
{
    return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}
#ifdef __OPENCL_VERSION__
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return mix(v0, v1, t);
}
static inline double futrts_mad64(double a, double b, double c)
{
    return mad(a, b, c);
}
#else
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return v0 + (v1 - v0) * t;
}
static inline double futrts_mad64(double a, double b, double c)
{
    return a * b + c;
}
#endif
static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    char *mem;
    int64_t size;
    const char *desc;
};
// start of scheduler.h

// First, the API that the generated code will access.  In principle,
// we could then compile the scheduler separately and link an object
// file with the generated code.  In practice, we will embed all of
// this in the generated code.

// Scheduler handle.
struct scheduler;

// Initialise a scheduler (and start worker threads).
static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa);

// Shut down a scheduler (and destroy worker threads).
static int scheduler_destroy(struct scheduler *scheduler);

// Figure out the smallest amount of work that amortises task
// creation.
static int determine_kappa(double *kappa);

// How a segop should be scheduled.
enum scheduling {
  DYNAMIC,
  STATIC
};

// How a given task should be executed.  Filled out by the scheduler
// and passed to the segop function
struct scheduler_info {
  int64_t iter_pr_subtask;
  int64_t remainder;
  int nsubtasks;
  enum scheduling sched;
  int wake_up_threads;

  int64_t *task_time;
  int64_t *task_iter;
};

// A segop function.  This is what you hand the scheduler for
// execution.
typedef int (*segop_fn)(void* args,
                        int64_t iterations,
                        int tid,
                        struct scheduler_info info);

// A task for the scheduler to execute.
struct scheduler_segop {
  void *args;
  segop_fn top_level_fn;
  segop_fn nested_fn;
  int64_t iterations;
  enum scheduling sched;

  // Pointers to timer and iter associated with the task
  int64_t *task_time;
  int64_t *task_iter;

  // For debugging
  const char* name;
};

static inline int scheduler_prepare_task(struct scheduler *scheduler,
                                         struct scheduler_segop *task);

typedef int (*parloop_fn)(void* args,
                          int64_t start,
                          int64_t end,
                          int subtask_id,
                          int tid);

// A parallel parloop task.
struct scheduler_parloop {
  void* args;
  parloop_fn fn;
  int64_t iterations;
  struct scheduler_info info;

  // For debugging
  const char* name;
};

static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task);

// Then the API implementation.

#include <signal.h>

#if defined(_WIN32)
#include <windows.h>
#elif defined(__APPLE__)
#include <sys/sysctl.h>
// For getting cpu usage of threads
#include <mach/mach.h>
#include <sys/resource.h>
#elif defined(__linux__)
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#elif defined(__EMSCRIPTEN__)
#include <emscripten/threading.h>
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#endif

/* Multicore Utility functions */

/* A wrapper for getting rusage on Linux and MacOS */
/* TODO maybe figure out this for windows */
static inline int getrusage_thread(struct rusage *rusage)
{
  int err = -1;
#if  defined(__APPLE__)
    thread_basic_info_data_t info = { 0 };
    mach_msg_type_number_t info_count = THREAD_BASIC_INFO_COUNT;
    kern_return_t kern_err;

    kern_err = thread_info(mach_thread_self(),
                           THREAD_BASIC_INFO,
                           (thread_info_t)&info,
                           &info_count);
    if (kern_err == KERN_SUCCESS) {
        memset(rusage, 0, sizeof(struct rusage));
        rusage->ru_utime.tv_sec = info.user_time.seconds;
        rusage->ru_utime.tv_usec = info.user_time.microseconds;
        rusage->ru_stime.tv_sec = info.system_time.seconds;
        rusage->ru_stime.tv_usec = info.system_time.microseconds;
        err = 0;
    } else {
        errno = EINVAL;
    }
#elif defined(__linux__) || __EMSCRIPTEN__
    err = getrusage(RUSAGE_THREAD, rusage);
#endif
    return err;
}

/* returns the number of logical cores */
static int num_processors()
{
#if  defined(_WIN32)
/* https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/ns-sysinfoapi-system_info */
    SYSTEM_INFO sysinfo;
    GetSystemInfo(&sysinfo);
    int ncores = sysinfo.dwNumberOfProcessors;
    fprintf(stderr, "Found %d cores on your Windows machine\n Is that correct?\n", ncores);
    return ncores;
#elif defined(__APPLE__)
    int ncores;
    size_t ncores_size = sizeof(ncores);
    CHECK_ERRNO(sysctlbyname("hw.logicalcpu", &ncores, &ncores_size, NULL, 0),
                "sysctlbyname (hw.logicalcpu)");
    return ncores;
#elif defined(__linux__)
  return get_nprocs();
#elif __EMSCRIPTEN__
  return emscripten_num_logical_cores();
#else
  fprintf(stderr, "operating system not recognised\n");
  return -1;
#endif
}

static unsigned int g_seed;

// Used to seed the generator.
static inline void fast_srand(unsigned int seed) {
    g_seed = seed;
}

// Compute a pseudorandom integer.
// Output value in range [0, 32767]
static inline unsigned int fast_rand(void) {
    g_seed = (214013*g_seed+2531011);
    return (g_seed>>16)&0x7FFF;
}

struct subtask_queue {
  int capacity;             // Size of the buffer.
  int first;                // Index of the start of the ring buffer.
  int num_used;             // Number of used elements in the buffer.
  struct subtask **buffer;

  pthread_mutex_t mutex;    // Mutex used for synchronisation.
  pthread_cond_t cond;      // Condition variable used for synchronisation.
  int dead;

#if defined(MCPROFILE)
  /* Profiling fields */
  uint64_t time_enqueue;
  uint64_t time_dequeue;
  uint64_t n_dequeues;
  uint64_t n_enqueues;
#endif
};

/* A subtask that can be executed by a worker */
struct subtask {
  /* The parloop function */
  parloop_fn fn;
  /* Execution parameters */
  void* args;
  int64_t start, end;
  int id;

  /* Dynamic scheduling parameters */
  int chunkable;
  int64_t chunk_size;

  /* Shared variables across subtasks */
  volatile int *counter; // Counter for ongoing subtasks
  // Shared task timers and iterators
  int64_t *task_time;
  int64_t *task_iter;

  /* For debugging */
  const char *name;
};


struct worker {
  pthread_t thread;
  struct scheduler *scheduler;  /* Reference to the scheduler struct the worker belongs to*/
  struct subtask_queue q;
  int dead;
  int tid;                      /* Just a thread id */

  /* "thread local" time fields used for online algorithm */
  uint64_t timer;
  uint64_t total;
  int nested; /* How nested the current computation is */

  // Profiling fields
  int output_usage;            /* Whether to dump thread usage */
  uint64_t time_spent_working; /* Time spent in parloop functions */
};

static inline void output_worker_usage(struct worker *worker)
{
  struct rusage usage;
  CHECK_ERRNO(getrusage_thread(&usage), "getrusage_thread");
  struct timeval user_cpu_time = usage.ru_utime;
  struct timeval sys_cpu_time = usage.ru_stime;
  fprintf(stderr, "tid: %2d - work time %10llu us - user time: %10llu us - sys: %10llu us\n",
          worker->tid,
          (long long unsigned)worker->time_spent_working / 1000,
          (long long unsigned)(user_cpu_time.tv_sec * 1000000 + user_cpu_time.tv_usec),
          (long long unsigned)(sys_cpu_time.tv_sec * 1000000 + sys_cpu_time.tv_usec));
}

/* Doubles the size of the queue */
static inline int subtask_queue_grow_queue(struct subtask_queue *subtask_queue) {

  int new_capacity = 2 * subtask_queue->capacity;
#ifdef MCDEBUG
  fprintf(stderr, "Growing queue to %d\n", subtask_queue->capacity * 2);
#endif

  struct subtask **new_buffer = calloc(new_capacity, sizeof(struct subtask*));
  for (int i = 0; i < subtask_queue->num_used; i++) {
    new_buffer[i] = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
  }

  free(subtask_queue->buffer);
  subtask_queue->buffer = new_buffer;
  subtask_queue->capacity = new_capacity;
  subtask_queue->first = 0;

  return 0;
}

// Initialise a job queue with the given capacity.  The queue starts out
// empty.  Returns non-zero on error.
static inline int subtask_queue_init(struct subtask_queue *subtask_queue, int capacity)
{
  assert(subtask_queue != NULL);
  memset(subtask_queue, 0, sizeof(struct subtask_queue));

  subtask_queue->capacity = capacity;
  subtask_queue->buffer = calloc(capacity, sizeof(struct subtask*));
  if (subtask_queue->buffer == NULL) {
    return -1;
  }

  CHECK_ERRNO(pthread_mutex_init(&subtask_queue->mutex, NULL), "pthread_mutex_init");
  CHECK_ERRNO(pthread_cond_init(&subtask_queue->cond, NULL), "pthread_cond_init");

  return 0;
}

// Destroy the job queue.  Blocks until the queue is empty before it
// is destroyed.
static inline int subtask_queue_destroy(struct subtask_queue *subtask_queue)
{
  assert(subtask_queue != NULL);

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  while (subtask_queue->num_used != 0) {
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  // Queue is now empty.  Let's kill it!
  subtask_queue->dead = 1;
  free(subtask_queue->buffer);
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline void dump_queue(struct worker *worker)
{
  struct subtask_queue *subtask_queue = &worker->q;
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  for (int i = 0; i < subtask_queue->num_used; i++) {
    struct subtask * subtask = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
    printf("queue tid %d with %d task %s\n", worker->tid, i, subtask->name);
  }
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
}

// Push an element onto the end of the job queue.  Blocks if the
// subtask_queue is full (its size is equal to its capacity).  Returns
// non-zero on error.  It is an error to push a job onto a queue that
// has been destroyed.
static inline int subtask_queue_enqueue(struct worker *worker, struct subtask *subtask )
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  // Wait until there is room in the subtask_queue.
  while (subtask_queue->num_used == subtask_queue->capacity && !subtask_queue->dead) {
    if (subtask_queue->num_used == subtask_queue->capacity) {
      CHECK_ERR(subtask_queue_grow_queue(subtask_queue), "subtask_queue_grow_queue");
      continue;
    }
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // If we made it past the loop, there is room in the subtask_queue.
  subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used) % subtask_queue->capacity] = subtask;
  subtask_queue->num_used++;

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_enqueue += (end - start);
  subtask_queue->n_enqueues++;
#endif
  // Broadcast a reader (if any) that there is now an element.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


/* Like subtask_queue_dequeue, but with two differences:
   1) the subtask is stolen from the __front__ of the queue
   2) returns immediately if there is no subtasks queued,
      as we dont' want to block on another workers queue and
*/
static inline int subtask_queue_steal(struct worker *worker,
                                      struct subtask **subtask)
{
  struct subtask_queue *subtask_queue = &worker->q;
  assert(subtask_queue != NULL);

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  if (subtask_queue->num_used == 0) {
    CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // Tasks gets stolen from the "front"
  struct subtask *cur_back = subtask_queue->buffer[subtask_queue->first];
  struct subtask *new_subtask = NULL;
  int remaining_iter = cur_back->end - cur_back->start;
  // If subtask is chunkable, we steal half of the iterations
  if (cur_back->chunkable && remaining_iter > 1) {
      int64_t half = remaining_iter / 2;
      new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *cur_back;
      new_subtask->start = cur_back->end - half;
      cur_back->end = new_subtask->start;
      __atomic_fetch_add(cur_back->counter, 1, __ATOMIC_RELAXED);
  } else {
    new_subtask = cur_back;
    subtask_queue->num_used--;
    subtask_queue->first = (subtask_queue->first + 1) % subtask_queue->capacity;
  }
  *subtask = new_subtask;

  if (*subtask == NULL) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return 1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


// Pop an element from the back of the job queue.
// Optional argument can be provided to block or not
static inline int subtask_queue_dequeue(struct worker *worker,
                                        struct subtask **subtask, int blocking)
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  if (subtask_queue->num_used == 0 && !blocking) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }
  // Try to steal some work while the subtask_queue is empty
  while (subtask_queue->num_used == 0 && !subtask_queue->dead) {
    pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex);
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // dequeue pops from the back
  *subtask = subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used - 1) % subtask_queue->capacity];
  subtask_queue->num_used--;

  if (*subtask == NULL) {
    assert(!"got NULL ptr");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return -1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline int subtask_queue_is_empty(struct subtask_queue *subtask_queue)
{
  return subtask_queue->num_used == 0;
}

/* Scheduler definitions */

struct scheduler {
  struct worker *workers;
  int num_threads;

  // If there is work to steal => active_work > 0
  volatile int active_work;

  // Only one error can be returned at the time now.  Maybe we can
  // provide a stack like structure for pushing errors onto if we wish
  // to backpropagte multiple errors
  volatile int error;

  // kappa time unit in nanoseconds
  double kappa;
};


// Thread local variable worker struct
// Note that, accesses to tls variables are expensive
// Minimize direct references to this variable
__thread struct worker* worker_local = NULL;

static int64_t total_now(int64_t total, int64_t time) {
  return total + (get_wall_time_ns() - time);
}

static int random_other_worker(struct scheduler *scheduler, int my_id) {
  int my_num_workers = scheduler->num_threads;
  assert(my_num_workers != 1);
  int i = fast_rand() % (my_num_workers - 1);
  if (i >= my_id) {
    i++;
  }
#ifdef MCDEBUG
  assert(i >= 0);
  assert(i < my_num_workers);
  assert(i != my_id);
#endif

  return i;
}


static inline int64_t compute_chunk_size(double kappa, struct subtask* subtask)
{
  double C = (double)*subtask->task_time / (double)*subtask->task_iter;
  if (C == 0.0F) C += DBL_EPSILON;
  return smax64((int64_t)(kappa / C), 1);
}

/* Takes a chunk from subtask and enqueues the remaining iterations onto the worker's queue */
/* A no-op if the subtask is not chunkable */
static inline struct subtask* chunk_subtask(struct worker* worker, struct subtask *subtask)
{
  if (subtask->chunkable) {
    // Do we have information from previous runs avaliable
    if (*subtask->task_iter > 0) {
      subtask->chunk_size = compute_chunk_size(worker->scheduler->kappa, subtask);
      assert(subtask->chunk_size > 0);
    }
    int64_t remaining_iter = subtask->end - subtask->start;
    assert(remaining_iter > 0);
    if (remaining_iter > subtask->chunk_size) {
      struct subtask *new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *subtask;
      // increment the subtask join counter to account for new subtask
      __atomic_fetch_add(subtask->counter, 1, __ATOMIC_RELAXED);
      // Update range parameters
      subtask->end = subtask->start + subtask->chunk_size;
      new_subtask->start = subtask->end;
      subtask_queue_enqueue(worker, new_subtask);
    }
  }
  return subtask;
}

static inline int run_subtask(struct worker* worker, struct subtask* subtask)
{
  assert(subtask != NULL);
  assert(worker != NULL);

  subtask = chunk_subtask(worker, subtask);
  worker->total = 0;
  worker->timer = get_wall_time_ns();
#if defined(MCPROFILE)
  int64_t start = worker->timer;
#endif
  worker->nested++;
  int err = subtask->fn(subtask->args, subtask->start, subtask->end,
                        subtask->chunkable ? worker->tid : subtask->id,
                        worker->tid);
  worker->nested--;
  // Some error occured during some other subtask
  // so we just clean-up and return
  if (worker->scheduler->error != 0) {
    // Even a failed task counts as finished.
    __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
    free(subtask);
    return 0;
  }
  if (err != 0) {
    __atomic_store_n(&worker->scheduler->error, err, __ATOMIC_RELAXED);
  }
  // Total sequential time spent
  int64_t time_elapsed = total_now(worker->total, worker->timer);
#if defined(MCPROFILE)
  worker->time_spent_working += get_wall_time_ns() - start;
#endif
  int64_t iter = subtask->end - subtask->start;
  // report measurements
  // These updates should really be done using a single atomic CAS operation
  __atomic_fetch_add(subtask->task_time, time_elapsed, __ATOMIC_RELAXED);
  __atomic_fetch_add(subtask->task_iter, iter, __ATOMIC_RELAXED);
  // We need a fence here, since if the counter is decremented before either
  // of the two above are updated bad things can happen, e.g. if they are stack-allocated
  __atomic_thread_fence(__ATOMIC_SEQ_CST);
  __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
  free(subtask);
  return 0;
}


static inline int is_small(struct scheduler_segop *task, struct scheduler *scheduler, int *nsubtasks)
{
  int64_t time = *task->task_time;
  int64_t iter = *task->task_iter;

  if (task->sched == DYNAMIC || iter == 0) {
    *nsubtasks = scheduler->num_threads;
    return 0;
  }

  // Estimate the constant C
  double C = (double)time / (double)iter;
  double cur_task_iter = (double) task->iterations;

  // Returns true if the task is small i.e.
  // if the number of iterations times C is smaller
  // than the overhead of subtask creation
  if (C == 0.0F || C * cur_task_iter < scheduler->kappa) {
    *nsubtasks = 1;
    return 1;
  }

  // Else compute how many subtasks this tasks should create
  int64_t min_iter_pr_subtask = smax64(scheduler->kappa / C, 1);
  *nsubtasks = smin64(smax64(task->iterations / min_iter_pr_subtask, 1), scheduler->num_threads);

  return 0;
}

// TODO make this prettier
static inline struct subtask* create_subtask(parloop_fn fn,
                                             void* args,
                                             const char* name,
                                             volatile int* counter,
                                             int64_t *timer,
                                             int64_t *iter,
                                             int64_t start, int64_t end,
                                             int chunkable,
                                             int64_t chunk_size,
                                             int id)
{
  struct subtask* subtask = malloc(sizeof(struct subtask));
  if (subtask == NULL) {
    assert(!"malloc failed in create_subtask");
    return NULL;
  }
  subtask->fn         = fn;
  subtask->args       = args;

  subtask->counter    = counter;
  subtask->task_time  = timer;
  subtask->task_iter  = iter;

  subtask->start      = start;
  subtask->end        = end;
  subtask->id         = id;
  subtask->chunkable  = chunkable;
  subtask->chunk_size = chunk_size;

  subtask->name       = name;
  return subtask;
}

static int dummy_counter = 0;
static int64_t dummy_timer = 0;
static int64_t dummy_iter = 0;

static int dummy_fn(void *args, int64_t start, int64_t end, int subtask_id, int tid) {
  (void)args;
  (void)start;
  (void)end;
  (void)subtask_id;
  (void)tid;
  return 0;
}

// Wake up threads, who are blocking by pushing a dummy task
// onto their queue
static inline void wake_up_threads(struct scheduler *scheduler, int start_tid, int end_tid) {

#if defined(MCDEBUG)
  assert(start_tid >= 1);
  assert(end_tid <= scheduler->num_threads);
#endif
  for (int i = start_tid; i < end_tid; i++) {
    struct subtask *subtask = create_subtask(dummy_fn, NULL, "dummy_fn",
                                            &dummy_counter,
                                            &dummy_timer, &dummy_iter,
                                            0, 0,
                                            0, 0,
                                            0);
    CHECK_ERR(subtask_queue_enqueue(&scheduler->workers[i], subtask), "subtask_queue_enqueue");
  }
}

static inline int is_finished(struct worker *worker) {
  return worker->dead && subtask_queue_is_empty(&worker->q);
}

// Try to steal from a random queue
static inline int steal_from_random_worker(struct worker* worker)
{
  int my_id = worker->tid;
  struct scheduler* scheduler = worker->scheduler;
  int k = random_other_worker(scheduler, my_id);
  struct worker *worker_k = &scheduler->workers[k];
  struct subtask* subtask =  NULL;
  int retval = subtask_queue_steal(worker_k, &subtask);
  if (retval == 0) {
    subtask_queue_enqueue(worker, subtask);
    return 1;
  }
  return 0;
}


static inline void *scheduler_worker(void* args)
{
  struct worker *worker = (struct worker*) args;
  struct scheduler *scheduler = worker->scheduler;
  worker_local = worker;
  struct subtask *subtask = NULL;

  while(!is_finished(worker)) {
    if (!subtask_queue_is_empty(&worker->q)) {
      int retval = subtask_queue_dequeue(worker, &subtask, 0);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      } // else someone stole our work

    } else if (scheduler->active_work) { /* steal */
      while (!is_finished(worker) && scheduler->active_work) {
        if (steal_from_random_worker(worker)) {
          break;
        }
      }
    } else { /* go back to sleep and wait for work */
      int retval = subtask_queue_dequeue(worker, &subtask, 1);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    }
  }

  assert(subtask_queue_is_empty(&worker->q));
#if defined(MCPROFILE)
  if (worker->output_usage)
    output_worker_usage(worker);
#endif
  return NULL;
}


static inline int scheduler_execute_parloop(struct scheduler *scheduler,
                                            struct scheduler_parloop *task,
                                            int64_t *timer)
{

  struct worker *worker = worker_local;

  struct scheduler_info info = task->info;
  int64_t iter_pr_subtask = info.iter_pr_subtask;
  int64_t remainder = info.remainder;
  int nsubtasks = info.nsubtasks;
  volatile int join_counter = nsubtasks;

  // Shared timer used to sum up all
  // sequential work from each subtask
  int64_t task_timer = 0;
  int64_t task_iter = 0;

  enum scheduling sched = info.sched;
  /* If each subtasks should be processed in chunks */
  int chunkable = sched == STATIC ? 0 : 1;
  int64_t chunk_size = 1; // The initial chunk size when no info is avaliable


  if (info.wake_up_threads || sched == DYNAMIC)
    __atomic_add_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);

  int64_t start = 0;
  int64_t end = iter_pr_subtask + (int64_t)(remainder != 0);
  for (int subtask_id = 0; subtask_id < nsubtasks; subtask_id++) {
    struct subtask *subtask = create_subtask(task->fn, task->args, task->name,
                                              &join_counter,
                                              &task_timer, &task_iter,
                                              start, end,
                                              chunkable, chunk_size,
                                              subtask_id);
    assert(subtask != NULL);
    // In most cases we will never have more subtasks than workers,
    // but there can be exceptions (e.g. the kappa tuning function).
    struct worker *subtask_worker =
      worker->nested
      ? &scheduler->workers[worker->tid]
      : &scheduler->workers[subtask_id % scheduler->num_threads];
    CHECK_ERR(subtask_queue_enqueue(subtask_worker, subtask),
              "subtask_queue_enqueue");
    // Update range params
    start = end;
    end += iter_pr_subtask + ((subtask_id + 1) < remainder);
  }

  if (info.wake_up_threads) {
    wake_up_threads(scheduler, nsubtasks, scheduler->num_threads);
  }

  // Join (wait for subtasks to finish)
  while(join_counter != 0) {
    if (!subtask_queue_is_empty(&worker->q)) {
      struct subtask *subtask = NULL;
      int err = subtask_queue_dequeue(worker, &subtask, 0);
      if (err == 0 ) {
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    } else {
      if (steal_from_random_worker(worker)) {
        struct subtask *subtask = NULL;
        int err = subtask_queue_dequeue(worker, &subtask, 0);
        if (err == 0) {
          CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
        }
      }
    }
  }


  if (info.wake_up_threads || sched == DYNAMIC) {
    __atomic_sub_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);
  }

  // Write back timing results of all sequential work
  (*timer) += task_timer;
  return scheduler->error;
}


static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task)
{

  struct worker *worker = worker_local;

  int err = 0;

  // How much sequential work was performed by the task
  int64_t task_timer = 0;

  /* Execute task sequential or parallel based on decision made earlier */
  if (task->info.nsubtasks == 1) {
    int64_t start = get_wall_time_ns();
    err = task->fn(task->args, 0, task->iterations, 0, worker->tid);
    int64_t end = get_wall_time_ns();
    task_timer = end - start;
    worker->time_spent_working += task_timer;
    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);
  } else {
    // Add "before" time if we already are inside a task
    int64_t time_before = 0;
    if (worker->nested > 0) {
      time_before = total_now(worker->total, worker->timer);
    }

    err = scheduler_execute_parloop(scheduler, task, &task_timer);

    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);

    // Update timers to account for new timings
    worker->total = time_before + task_timer;
    worker->timer = get_wall_time_ns();
  }


  return err;
}

/* Decide on how schedule the incoming task i.e. how many subtasks and
   to run sequential or (potentially nested) parallel code body */
static inline int scheduler_prepare_task(struct scheduler* scheduler,
                                         struct scheduler_segop *task)
{
  assert(task != NULL);

  struct worker *worker = worker_local;
  struct scheduler_info info;
  info.task_time = task->task_time;
  info.task_iter = task->task_iter;

  int nsubtasks;
  // Decide if task should be scheduled sequentially
  if (is_small(task, scheduler, &nsubtasks)) {
    info.iter_pr_subtask = task->iterations;
    info.remainder = 0;
    info.nsubtasks = nsubtasks;
    return task->top_level_fn(task->args, task->iterations, worker->tid, info);
  } else {
    info.iter_pr_subtask = task->iterations / nsubtasks;
    info.remainder = task->iterations % nsubtasks;
    info.sched = task->sched;
    switch (task->sched) {
    case STATIC:
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : ((task->iterations - info.remainder) / info.iter_pr_subtask);
      break;
    case DYNAMIC:
      // As any thread can take any subtasks, we are being safe with using
      // an upper bound on the number of tasks such that the task allocate enough memory
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : nsubtasks;
      break;
    default:
      assert(!"Got unknown scheduling");
    }
  }

  info.wake_up_threads = 0;
  // We only use the nested parallel segop function if we can't exchaust all cores
  // using the outer most level
  if (task->nested_fn != NULL && info.nsubtasks < scheduler->num_threads && info.nsubtasks == task->iterations) {
    if (worker->nested == 0)
      info.wake_up_threads = 1;
    return task->nested_fn(task->args, task->iterations, worker->tid, info);
  }

  return task->top_level_fn(task->args, task->iterations, worker->tid, info);
}

// Now some code for finding the proper value of kappa on a given
// machine (the smallest amount of work that amortises the cost of
// task creation).

struct tuning_struct {
  int32_t *free_tuning_res;
  int32_t *array;
};

// Reduction function over an integer array
static int tuning_loop(void *args, int64_t start, int64_t end,
                                     int flat_tid, int tid) {
  (void)flat_tid;
  (void)tid;

  int err = 0;
  struct tuning_struct *tuning_struct = (struct tuning_struct *) args;
  int32_t *array = tuning_struct->array;
  int32_t *tuning_res = tuning_struct->free_tuning_res;

  int32_t sum = 0;
  for (int i = start; i < end; i++) {
    int32_t y = array[i];
    sum = add32(sum, y);
  }
  *tuning_res = sum;
  return err;
}

// The main entry point for the tuning process.  Sets the provided
// variable ``kappa``.
static int determine_kappa(double *kappa) {
  int err = 0;

  int64_t iterations = 100000000;
  int64_t tuning_time = 0;
  int64_t tuning_iter = 0;

  int32_t *array = malloc(sizeof(int32_t) * iterations);
  for (int64_t i = 0; i < iterations; i++) {
    array[i] = fast_rand();
  }

  int64_t start_tuning = get_wall_time_ns();
  /* **************************** */
  /* Run sequential reduce first' */
  /* **************************** */
  int64_t tuning_sequentiual_start = get_wall_time_ns();
  struct tuning_struct tuning_struct;
  int32_t tuning_res;
  tuning_struct.free_tuning_res = &tuning_res;
  tuning_struct.array = array;

  err = tuning_loop(&tuning_struct, 0, iterations, 0, 0);
  int64_t tuning_sequentiual_end = get_wall_time_ns();
  int64_t sequential_elapsed = tuning_sequentiual_end - tuning_sequentiual_start;

  double C = (double)sequential_elapsed / (double)iterations;
  fprintf(stderr, " Time for sequential run is %lld - Found C %f\n", (long long)sequential_elapsed, C);

  /* ********************** */
  /* Now run tuning process */
  /* ********************** */
  // Setup a scheduler with a single worker
  struct scheduler scheduler;
  scheduler.num_threads = 1;
  scheduler.workers = malloc(sizeof(struct worker));
  worker_local = &scheduler.workers[0];
  worker_local->tid = 0;
  CHECK_ERR(subtask_queue_init(&scheduler.workers[0].q, 1024),
            "failed to init queue for worker %d\n", 0);

  // Start tuning for kappa
  double kappa_tune = 1000; // Initial kappa is 1 us
  double ratio;
  int64_t time_elapsed;
  while(1) {
    int64_t min_iter_pr_subtask = (int64_t) (kappa_tune / C) == 0 ? 1 : (kappa_tune / C);
    int nsubtasks = iterations / min_iter_pr_subtask;
    struct scheduler_info info;
    info.iter_pr_subtask = min_iter_pr_subtask;

    info.nsubtasks = iterations / min_iter_pr_subtask;
    info.remainder = iterations % min_iter_pr_subtask;
    info.task_time = &tuning_time;
    info.task_iter = &tuning_iter;
    info.sched = STATIC;

    struct scheduler_parloop parloop;
    parloop.name = "tuning_loop";
    parloop.fn = tuning_loop;
    parloop.args = &tuning_struct;
    parloop.iterations = iterations;
    parloop.info = info;

    int64_t tuning_chunked_start = get_wall_time_ns();
    int determine_kappa_err =
      scheduler_execute_task(&scheduler,
                             &parloop);
    assert(determine_kappa_err == 0);
    int64_t tuning_chunked_end = get_wall_time_ns();
    time_elapsed =  tuning_chunked_end - tuning_chunked_start;

    ratio = (double)time_elapsed / (double)sequential_elapsed;
    if (ratio < 1.055) {
      break;
    }
    kappa_tune += 100; // Increase by 100 ns at the time
    fprintf(stderr, "nsubtask %d - kappa %f - ratio %f\n", nsubtasks, kappa_tune, ratio);
  }

  int64_t end_tuning = get_wall_time_ns();
  fprintf(stderr, "tuning took %lld ns and found kappa %f - time %lld - ratio %f\n",
          (long long)end_tuning - start_tuning,
          kappa_tune,
          (long long)time_elapsed,
          ratio);
  *kappa = kappa_tune;

  // Clean-up
  CHECK_ERR(subtask_queue_destroy(&scheduler.workers[0].q), "failed to destroy queue");
  free(array);
  free(scheduler.workers);
  return err;
}

static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa) {
  assert(num_workers > 0);

  scheduler->kappa = kappa;
  scheduler->num_threads = num_workers;
  scheduler->active_work = 0;
  scheduler->error = 0;

  scheduler->workers = calloc(num_workers, sizeof(struct worker));

  const int queue_capacity = 1024;

  worker_local = &scheduler->workers[0];
  worker_local->tid = 0;
  worker_local->scheduler = scheduler;
  CHECK_ERR(subtask_queue_init(&worker_local->q, queue_capacity),
            "failed to init queue for worker %d\n", 0);

  for (int i = 1; i < num_workers; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    memset(cur_worker, 0, sizeof(struct worker));
    cur_worker->tid = i;
    cur_worker->output_usage = 0;
    cur_worker->scheduler = scheduler;
    CHECK_ERR(subtask_queue_init(&cur_worker->q, queue_capacity),
              "failed to init queue for worker %d\n", i);

    CHECK_ERR(pthread_create(&cur_worker->thread,
                             NULL,
                             &scheduler_worker,
                             cur_worker),
              "Failed to create worker %d\n", i);
  }

  return 0;
}

static int scheduler_destroy(struct scheduler *scheduler) {
  // First mark them all as dead.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    cur_worker->dead = 1;
  }

  // Then destroy their task queues (this will wake up the threads and
  // make them do their shutdown).
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    subtask_queue_destroy(&cur_worker->q);
  }

  // Then actually wait for them to stop.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    CHECK_ERR(pthread_join(scheduler->workers[i].thread, NULL), "pthread_join");
  }

  free(scheduler->workers);

  return 0;
}

// End of scheduler.h

struct futhark_context_config {
    int debugging;
    int profiling;
    int num_threads;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->debugging = 0;
    cfg->profiling = 0;
    cfg->num_threads = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    /* Does nothing for this backend. */
    (void) cfg;
    (void) detail;
}
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n)
{
    cfg->num_threads = n;
}
struct futhark_context {
    struct scheduler scheduler;
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int total_runs;
    long total_runtime;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    int64_t *futhark_mc_segmap_parloop_73830_total_runtime;
    int *futhark_mc_segmap_parloop_73830_runs;
    int64_t *futhark_mc_segmap_parloop_73830_iter;
    int64_t futhark_mc_segmap_parloop_73830_total_total_runtime;
    int futhark_mc_segmap_parloop_73830_total_runs;
    int64_t futhark_mc_segmap_parloop_73830_total_iter;
    int64_t *futhark_mc_segmap_task_73828_total_runtime;
    int *futhark_mc_segmap_task_73828_runs;
    int64_t *futhark_mc_segmap_task_73828_iter;
    int64_t futhark_mc_segmap_task_73828_total_time;
    int64_t futhark_mc_segmap_task_73828_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_73852_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_73852_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_73852_iter;
    int64_t futhark_mc_scan_stage_1_parloop_73852_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_73852_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_73852_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_73854_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_73854_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_73854_iter;
    int64_t futhark_mc_scan_stage_3_parloop_73854_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_73854_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_73854_total_iter;
    int64_t *futhark_mc_segscan_task_73849_total_runtime;
    int *futhark_mc_segscan_task_73849_runs;
    int64_t *futhark_mc_segscan_task_73849_iter;
    int64_t futhark_mc_segscan_task_73849_total_time;
    int64_t futhark_mc_segscan_task_73849_total_iter;
    int64_t *futhark_mc_segmap_parloop_73858_total_runtime;
    int *futhark_mc_segmap_parloop_73858_runs;
    int64_t *futhark_mc_segmap_parloop_73858_iter;
    int64_t futhark_mc_segmap_parloop_73858_total_total_runtime;
    int futhark_mc_segmap_parloop_73858_total_runs;
    int64_t futhark_mc_segmap_parloop_73858_total_iter;
    int64_t *futhark_mc_segmap_task_73856_total_runtime;
    int *futhark_mc_segmap_task_73856_runs;
    int64_t *futhark_mc_segmap_task_73856_iter;
    int64_t futhark_mc_segmap_task_73856_total_time;
    int64_t futhark_mc_segmap_task_73856_total_iter;
    int64_t *futhark_mc_segmap_parloop_73862_total_runtime;
    int *futhark_mc_segmap_parloop_73862_runs;
    int64_t *futhark_mc_segmap_parloop_73862_iter;
    int64_t futhark_mc_segmap_parloop_73862_total_total_runtime;
    int futhark_mc_segmap_parloop_73862_total_runs;
    int64_t futhark_mc_segmap_parloop_73862_total_iter;
    int64_t *futhark_mc_segmap_task_73860_total_runtime;
    int *futhark_mc_segmap_task_73860_runs;
    int64_t *futhark_mc_segmap_task_73860_iter;
    int64_t futhark_mc_segmap_task_73860_total_time;
    int64_t futhark_mc_segmap_task_73860_total_iter;
    int64_t *futhark_mc_segmap_parloop_73866_total_runtime;
    int *futhark_mc_segmap_parloop_73866_runs;
    int64_t *futhark_mc_segmap_parloop_73866_iter;
    int64_t futhark_mc_segmap_parloop_73866_total_total_runtime;
    int futhark_mc_segmap_parloop_73866_total_runs;
    int64_t futhark_mc_segmap_parloop_73866_total_iter;
    int64_t *futhark_mc_segmap_task_73864_total_runtime;
    int *futhark_mc_segmap_task_73864_runs;
    int64_t *futhark_mc_segmap_task_73864_iter;
    int64_t futhark_mc_segmap_task_73864_total_time;
    int64_t futhark_mc_segmap_task_73864_total_iter;
    int64_t *futhark_mc_segmap_parloop_73870_total_runtime;
    int *futhark_mc_segmap_parloop_73870_runs;
    int64_t *futhark_mc_segmap_parloop_73870_iter;
    int64_t futhark_mc_segmap_parloop_73870_total_total_runtime;
    int futhark_mc_segmap_parloop_73870_total_runs;
    int64_t futhark_mc_segmap_parloop_73870_total_iter;
    int64_t *futhark_mc_segmap_task_73868_total_runtime;
    int *futhark_mc_segmap_task_73868_runs;
    int64_t *futhark_mc_segmap_task_73868_iter;
    int64_t futhark_mc_segmap_task_73868_total_time;
    int64_t futhark_mc_segmap_task_73868_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_73878_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_73878_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_73878_iter;
    int64_t futhark_mc_segred_stage_1_parloop_73878_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_73878_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_73878_total_iter;
    int64_t *futhark_mc_segred_task_73875_total_runtime;
    int *futhark_mc_segred_task_73875_runs;
    int64_t *futhark_mc_segred_task_73875_iter;
    int64_t futhark_mc_segred_task_73875_total_time;
    int64_t futhark_mc_segred_task_73875_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_73883_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_73883_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_73883_iter;
    int64_t futhark_mc_segred_stage_1_parloop_73883_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_73883_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_73883_total_iter;
    int64_t *futhark_mc_segred_task_73880_total_runtime;
    int *futhark_mc_segred_task_73880_runs;
    int64_t *futhark_mc_segred_task_73880_iter;
    int64_t futhark_mc_segred_task_73880_total_time;
    int64_t futhark_mc_segred_task_73880_total_iter;
    int64_t *futhark_mc_segmap_parloop_73873_total_runtime;
    int *futhark_mc_segmap_parloop_73873_runs;
    int64_t *futhark_mc_segmap_parloop_73873_iter;
    int64_t futhark_mc_segmap_parloop_73873_total_total_runtime;
    int futhark_mc_segmap_parloop_73873_total_runs;
    int64_t futhark_mc_segmap_parloop_73873_total_iter;
    int64_t *futhark_mc_segmap_nested_task_73871_total_runtime;
    int *futhark_mc_segmap_nested_task_73871_runs;
    int64_t *futhark_mc_segmap_nested_task_73871_iter;
    int64_t *futhark_mc_segmap_parloop_73840_total_runtime;
    int *futhark_mc_segmap_parloop_73840_runs;
    int64_t *futhark_mc_segmap_parloop_73840_iter;
    int64_t futhark_mc_segmap_parloop_73840_total_total_runtime;
    int futhark_mc_segmap_parloop_73840_total_runs;
    int64_t futhark_mc_segmap_parloop_73840_total_iter;
    int64_t *futhark_mc_segmap_nested_task_73838_total_runtime;
    int *futhark_mc_segmap_nested_task_73838_runs;
    int64_t *futhark_mc_segmap_nested_task_73838_iter;
    int64_t *futhark_mc_segmap_parloop_73887_total_runtime;
    int *futhark_mc_segmap_parloop_73887_runs;
    int64_t *futhark_mc_segmap_parloop_73887_iter;
    int64_t futhark_mc_segmap_parloop_73887_total_total_runtime;
    int futhark_mc_segmap_parloop_73887_total_runs;
    int64_t futhark_mc_segmap_parloop_73887_total_iter;
    int64_t *futhark_mc_segmap_task_73885_total_runtime;
    int *futhark_mc_segmap_task_73885_runs;
    int64_t *futhark_mc_segmap_task_73885_iter;
    int64_t futhark_mc_segmap_task_73885_total_time;
    int64_t futhark_mc_segmap_task_73885_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_73911_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_73911_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_73911_iter;
    int64_t futhark_mc_scan_stage_1_parloop_73911_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_73911_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_73911_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_73913_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_73913_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_73913_iter;
    int64_t futhark_mc_scan_stage_3_parloop_73913_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_73913_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_73913_total_iter;
    int64_t *futhark_mc_segscan_task_73908_total_runtime;
    int *futhark_mc_segscan_task_73908_runs;
    int64_t *futhark_mc_segscan_task_73908_iter;
    int64_t futhark_mc_segscan_task_73908_total_time;
    int64_t futhark_mc_segscan_task_73908_total_iter;
    int64_t *futhark_mc_segmap_parloop_73917_total_runtime;
    int *futhark_mc_segmap_parloop_73917_runs;
    int64_t *futhark_mc_segmap_parloop_73917_iter;
    int64_t futhark_mc_segmap_parloop_73917_total_total_runtime;
    int futhark_mc_segmap_parloop_73917_total_runs;
    int64_t futhark_mc_segmap_parloop_73917_total_iter;
    int64_t *futhark_mc_segmap_task_73915_total_runtime;
    int *futhark_mc_segmap_task_73915_runs;
    int64_t *futhark_mc_segmap_task_73915_iter;
    int64_t futhark_mc_segmap_task_73915_total_time;
    int64_t futhark_mc_segmap_task_73915_total_iter;
    int64_t *futhark_mc_segmap_parloop_73921_total_runtime;
    int *futhark_mc_segmap_parloop_73921_runs;
    int64_t *futhark_mc_segmap_parloop_73921_iter;
    int64_t futhark_mc_segmap_parloop_73921_total_total_runtime;
    int futhark_mc_segmap_parloop_73921_total_runs;
    int64_t futhark_mc_segmap_parloop_73921_total_iter;
    int64_t *futhark_mc_segmap_task_73919_total_runtime;
    int *futhark_mc_segmap_task_73919_runs;
    int64_t *futhark_mc_segmap_task_73919_iter;
    int64_t futhark_mc_segmap_task_73919_total_time;
    int64_t futhark_mc_segmap_task_73919_total_iter;
    int64_t *futhark_mc_segmap_parloop_73925_total_runtime;
    int *futhark_mc_segmap_parloop_73925_runs;
    int64_t *futhark_mc_segmap_parloop_73925_iter;
    int64_t futhark_mc_segmap_parloop_73925_total_total_runtime;
    int futhark_mc_segmap_parloop_73925_total_runs;
    int64_t futhark_mc_segmap_parloop_73925_total_iter;
    int64_t *futhark_mc_segmap_task_73923_total_runtime;
    int *futhark_mc_segmap_task_73923_runs;
    int64_t *futhark_mc_segmap_task_73923_iter;
    int64_t futhark_mc_segmap_task_73923_total_time;
    int64_t futhark_mc_segmap_task_73923_total_iter;
    int64_t *futhark_mc_segmap_parloop_73929_total_runtime;
    int *futhark_mc_segmap_parloop_73929_runs;
    int64_t *futhark_mc_segmap_parloop_73929_iter;
    int64_t futhark_mc_segmap_parloop_73929_total_total_runtime;
    int futhark_mc_segmap_parloop_73929_total_runs;
    int64_t futhark_mc_segmap_parloop_73929_total_iter;
    int64_t *futhark_mc_segmap_task_73927_total_runtime;
    int *futhark_mc_segmap_task_73927_runs;
    int64_t *futhark_mc_segmap_task_73927_iter;
    int64_t futhark_mc_segmap_task_73927_total_time;
    int64_t futhark_mc_segmap_task_73927_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_73939_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_73939_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_73939_iter;
    int64_t futhark_mc_segred_stage_1_parloop_73939_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_73939_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_73939_total_iter;
    int64_t *futhark_mc_segred_task_73934_total_runtime;
    int *futhark_mc_segred_task_73934_runs;
    int64_t *futhark_mc_segred_task_73934_iter;
    int64_t futhark_mc_segred_task_73934_total_time;
    int64_t futhark_mc_segred_task_73934_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_73945_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_73945_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_73945_iter;
    int64_t futhark_mc_segred_stage_1_parloop_73945_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_73945_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_73945_total_iter;
    int64_t *futhark_mc_segred_task_73941_total_runtime;
    int *futhark_mc_segred_task_73941_runs;
    int64_t *futhark_mc_segred_task_73941_iter;
    int64_t futhark_mc_segred_task_73941_total_time;
    int64_t futhark_mc_segred_task_73941_total_iter;
    int64_t *futhark_mc_segmap_parloop_73932_total_runtime;
    int *futhark_mc_segmap_parloop_73932_runs;
    int64_t *futhark_mc_segmap_parloop_73932_iter;
    int64_t futhark_mc_segmap_parloop_73932_total_total_runtime;
    int futhark_mc_segmap_parloop_73932_total_runs;
    int64_t futhark_mc_segmap_parloop_73932_total_iter;
    int64_t *futhark_mc_segmap_nested_task_73930_total_runtime;
    int *futhark_mc_segmap_nested_task_73930_runs;
    int64_t *futhark_mc_segmap_nested_task_73930_iter;
    int64_t *futhark_mc_segmap_parloop_73898_total_runtime;
    int *futhark_mc_segmap_parloop_73898_runs;
    int64_t *futhark_mc_segmap_parloop_73898_iter;
    int64_t futhark_mc_segmap_parloop_73898_total_total_runtime;
    int futhark_mc_segmap_parloop_73898_total_runs;
    int64_t futhark_mc_segmap_parloop_73898_total_iter;
    int64_t *futhark_mc_segmap_nested_task_73896_total_runtime;
    int *futhark_mc_segmap_nested_task_73896_runs;
    int64_t *futhark_mc_segmap_nested_task_73896_iter;
    int64_t *futhark_mc_segmap_parloop_73949_total_runtime;
    int *futhark_mc_segmap_parloop_73949_runs;
    int64_t *futhark_mc_segmap_parloop_73949_iter;
    int64_t futhark_mc_segmap_parloop_73949_total_total_runtime;
    int futhark_mc_segmap_parloop_73949_total_runs;
    int64_t futhark_mc_segmap_parloop_73949_total_iter;
    int64_t *futhark_mc_segmap_task_73947_total_runtime;
    int *futhark_mc_segmap_task_73947_runs;
    int64_t *futhark_mc_segmap_task_73947_iter;
    int64_t futhark_mc_segmap_task_73947_total_time;
    int64_t futhark_mc_segmap_task_73947_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_73973_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_73973_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_73973_iter;
    int64_t futhark_mc_scan_stage_1_parloop_73973_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_73973_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_73973_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_73975_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_73975_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_73975_iter;
    int64_t futhark_mc_scan_stage_3_parloop_73975_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_73975_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_73975_total_iter;
    int64_t *futhark_mc_segscan_task_73970_total_runtime;
    int *futhark_mc_segscan_task_73970_runs;
    int64_t *futhark_mc_segscan_task_73970_iter;
    int64_t futhark_mc_segscan_task_73970_total_time;
    int64_t futhark_mc_segscan_task_73970_total_iter;
    int64_t *futhark_mc_segmap_parloop_73979_total_runtime;
    int *futhark_mc_segmap_parloop_73979_runs;
    int64_t *futhark_mc_segmap_parloop_73979_iter;
    int64_t futhark_mc_segmap_parloop_73979_total_total_runtime;
    int futhark_mc_segmap_parloop_73979_total_runs;
    int64_t futhark_mc_segmap_parloop_73979_total_iter;
    int64_t *futhark_mc_segmap_task_73977_total_runtime;
    int *futhark_mc_segmap_task_73977_runs;
    int64_t *futhark_mc_segmap_task_73977_iter;
    int64_t futhark_mc_segmap_task_73977_total_time;
    int64_t futhark_mc_segmap_task_73977_total_iter;
    int64_t *futhark_mc_segmap_parloop_73983_total_runtime;
    int *futhark_mc_segmap_parloop_73983_runs;
    int64_t *futhark_mc_segmap_parloop_73983_iter;
    int64_t futhark_mc_segmap_parloop_73983_total_total_runtime;
    int futhark_mc_segmap_parloop_73983_total_runs;
    int64_t futhark_mc_segmap_parloop_73983_total_iter;
    int64_t *futhark_mc_segmap_task_73981_total_runtime;
    int *futhark_mc_segmap_task_73981_runs;
    int64_t *futhark_mc_segmap_task_73981_iter;
    int64_t futhark_mc_segmap_task_73981_total_time;
    int64_t futhark_mc_segmap_task_73981_total_iter;
    int64_t *futhark_mc_segmap_parloop_73987_total_runtime;
    int *futhark_mc_segmap_parloop_73987_runs;
    int64_t *futhark_mc_segmap_parloop_73987_iter;
    int64_t futhark_mc_segmap_parloop_73987_total_total_runtime;
    int futhark_mc_segmap_parloop_73987_total_runs;
    int64_t futhark_mc_segmap_parloop_73987_total_iter;
    int64_t *futhark_mc_segmap_task_73985_total_runtime;
    int *futhark_mc_segmap_task_73985_runs;
    int64_t *futhark_mc_segmap_task_73985_iter;
    int64_t futhark_mc_segmap_task_73985_total_time;
    int64_t futhark_mc_segmap_task_73985_total_iter;
    int64_t *futhark_mc_segmap_parloop_73991_total_runtime;
    int *futhark_mc_segmap_parloop_73991_runs;
    int64_t *futhark_mc_segmap_parloop_73991_iter;
    int64_t futhark_mc_segmap_parloop_73991_total_total_runtime;
    int futhark_mc_segmap_parloop_73991_total_runs;
    int64_t futhark_mc_segmap_parloop_73991_total_iter;
    int64_t *futhark_mc_segmap_task_73989_total_runtime;
    int *futhark_mc_segmap_task_73989_runs;
    int64_t *futhark_mc_segmap_task_73989_iter;
    int64_t futhark_mc_segmap_task_73989_total_time;
    int64_t futhark_mc_segmap_task_73989_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74003_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74003_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74003_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74003_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74003_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74003_total_iter;
    int64_t *futhark_mc_segred_task_73996_total_runtime;
    int *futhark_mc_segred_task_73996_runs;
    int64_t *futhark_mc_segred_task_73996_iter;
    int64_t futhark_mc_segred_task_73996_total_time;
    int64_t futhark_mc_segred_task_73996_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74009_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74009_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74009_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74009_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74009_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74009_total_iter;
    int64_t *futhark_mc_segred_task_74005_total_runtime;
    int *futhark_mc_segred_task_74005_runs;
    int64_t *futhark_mc_segred_task_74005_iter;
    int64_t futhark_mc_segred_task_74005_total_time;
    int64_t futhark_mc_segred_task_74005_total_iter;
    int64_t *futhark_mc_segmap_parloop_73994_total_runtime;
    int *futhark_mc_segmap_parloop_73994_runs;
    int64_t *futhark_mc_segmap_parloop_73994_iter;
    int64_t futhark_mc_segmap_parloop_73994_total_total_runtime;
    int futhark_mc_segmap_parloop_73994_total_runs;
    int64_t futhark_mc_segmap_parloop_73994_total_iter;
    int64_t *futhark_mc_segmap_nested_task_73992_total_runtime;
    int *futhark_mc_segmap_nested_task_73992_runs;
    int64_t *futhark_mc_segmap_nested_task_73992_iter;
    int64_t *futhark_mc_segmap_parloop_73960_total_runtime;
    int *futhark_mc_segmap_parloop_73960_runs;
    int64_t *futhark_mc_segmap_parloop_73960_iter;
    int64_t futhark_mc_segmap_parloop_73960_total_total_runtime;
    int futhark_mc_segmap_parloop_73960_total_runs;
    int64_t futhark_mc_segmap_parloop_73960_total_iter;
    int64_t *futhark_mc_segmap_nested_task_73958_total_runtime;
    int *futhark_mc_segmap_nested_task_73958_runs;
    int64_t *futhark_mc_segmap_nested_task_73958_iter;
    int64_t *futhark_mc_segmap_parloop_74013_total_runtime;
    int *futhark_mc_segmap_parloop_74013_runs;
    int64_t *futhark_mc_segmap_parloop_74013_iter;
    int64_t futhark_mc_segmap_parloop_74013_total_total_runtime;
    int futhark_mc_segmap_parloop_74013_total_runs;
    int64_t futhark_mc_segmap_parloop_74013_total_iter;
    int64_t *futhark_mc_segmap_task_74011_total_runtime;
    int *futhark_mc_segmap_task_74011_runs;
    int64_t *futhark_mc_segmap_task_74011_iter;
    int64_t futhark_mc_segmap_task_74011_total_time;
    int64_t futhark_mc_segmap_task_74011_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_74036_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_74036_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_74036_iter;
    int64_t futhark_mc_scan_stage_1_parloop_74036_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_74036_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_74036_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_74038_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_74038_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_74038_iter;
    int64_t futhark_mc_scan_stage_3_parloop_74038_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_74038_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_74038_total_iter;
    int64_t *futhark_mc_segscan_task_74033_total_runtime;
    int *futhark_mc_segscan_task_74033_runs;
    int64_t *futhark_mc_segscan_task_74033_iter;
    int64_t futhark_mc_segscan_task_74033_total_time;
    int64_t futhark_mc_segscan_task_74033_total_iter;
    int64_t *futhark_mc_segmap_parloop_74042_total_runtime;
    int *futhark_mc_segmap_parloop_74042_runs;
    int64_t *futhark_mc_segmap_parloop_74042_iter;
    int64_t futhark_mc_segmap_parloop_74042_total_total_runtime;
    int futhark_mc_segmap_parloop_74042_total_runs;
    int64_t futhark_mc_segmap_parloop_74042_total_iter;
    int64_t *futhark_mc_segmap_task_74040_total_runtime;
    int *futhark_mc_segmap_task_74040_runs;
    int64_t *futhark_mc_segmap_task_74040_iter;
    int64_t futhark_mc_segmap_task_74040_total_time;
    int64_t futhark_mc_segmap_task_74040_total_iter;
    int64_t *futhark_mc_segmap_parloop_74046_total_runtime;
    int *futhark_mc_segmap_parloop_74046_runs;
    int64_t *futhark_mc_segmap_parloop_74046_iter;
    int64_t futhark_mc_segmap_parloop_74046_total_total_runtime;
    int futhark_mc_segmap_parloop_74046_total_runs;
    int64_t futhark_mc_segmap_parloop_74046_total_iter;
    int64_t *futhark_mc_segmap_task_74044_total_runtime;
    int *futhark_mc_segmap_task_74044_runs;
    int64_t *futhark_mc_segmap_task_74044_iter;
    int64_t futhark_mc_segmap_task_74044_total_time;
    int64_t futhark_mc_segmap_task_74044_total_iter;
    int64_t *futhark_mc_segmap_parloop_74050_total_runtime;
    int *futhark_mc_segmap_parloop_74050_runs;
    int64_t *futhark_mc_segmap_parloop_74050_iter;
    int64_t futhark_mc_segmap_parloop_74050_total_total_runtime;
    int futhark_mc_segmap_parloop_74050_total_runs;
    int64_t futhark_mc_segmap_parloop_74050_total_iter;
    int64_t *futhark_mc_segmap_task_74048_total_runtime;
    int *futhark_mc_segmap_task_74048_runs;
    int64_t *futhark_mc_segmap_task_74048_iter;
    int64_t futhark_mc_segmap_task_74048_total_time;
    int64_t futhark_mc_segmap_task_74048_total_iter;
    int64_t *futhark_mc_segmap_parloop_74054_total_runtime;
    int *futhark_mc_segmap_parloop_74054_runs;
    int64_t *futhark_mc_segmap_parloop_74054_iter;
    int64_t futhark_mc_segmap_parloop_74054_total_total_runtime;
    int futhark_mc_segmap_parloop_74054_total_runs;
    int64_t futhark_mc_segmap_parloop_74054_total_iter;
    int64_t *futhark_mc_segmap_task_74052_total_runtime;
    int *futhark_mc_segmap_task_74052_runs;
    int64_t *futhark_mc_segmap_task_74052_iter;
    int64_t futhark_mc_segmap_task_74052_total_time;
    int64_t futhark_mc_segmap_task_74052_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74064_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74064_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74064_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74064_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74064_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74064_total_iter;
    int64_t *futhark_mc_segred_task_74061_total_runtime;
    int *futhark_mc_segred_task_74061_runs;
    int64_t *futhark_mc_segred_task_74061_iter;
    int64_t futhark_mc_segred_task_74061_total_time;
    int64_t futhark_mc_segred_task_74061_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74069_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74069_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74069_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74069_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74069_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74069_total_iter;
    int64_t *futhark_mc_segred_task_74066_total_runtime;
    int *futhark_mc_segred_task_74066_runs;
    int64_t *futhark_mc_segred_task_74066_iter;
    int64_t futhark_mc_segred_task_74066_total_time;
    int64_t futhark_mc_segred_task_74066_total_iter;
    int64_t *futhark_mc_segmap_parloop_74058_total_runtime;
    int *futhark_mc_segmap_parloop_74058_runs;
    int64_t *futhark_mc_segmap_parloop_74058_iter;
    int64_t futhark_mc_segmap_parloop_74058_total_total_runtime;
    int futhark_mc_segmap_parloop_74058_total_runs;
    int64_t futhark_mc_segmap_parloop_74058_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74056_total_runtime;
    int *futhark_mc_segmap_nested_task_74056_runs;
    int64_t *futhark_mc_segmap_nested_task_74056_iter;
    int64_t *futhark_mc_segmap_parloop_74024_total_runtime;
    int *futhark_mc_segmap_parloop_74024_runs;
    int64_t *futhark_mc_segmap_parloop_74024_iter;
    int64_t futhark_mc_segmap_parloop_74024_total_total_runtime;
    int futhark_mc_segmap_parloop_74024_total_runs;
    int64_t futhark_mc_segmap_parloop_74024_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74022_total_runtime;
    int *futhark_mc_segmap_nested_task_74022_runs;
    int64_t *futhark_mc_segmap_nested_task_74022_iter;
    int64_t *futhark_mc_segmap_parloop_74073_total_runtime;
    int *futhark_mc_segmap_parloop_74073_runs;
    int64_t *futhark_mc_segmap_parloop_74073_iter;
    int64_t futhark_mc_segmap_parloop_74073_total_total_runtime;
    int futhark_mc_segmap_parloop_74073_total_runs;
    int64_t futhark_mc_segmap_parloop_74073_total_iter;
    int64_t *futhark_mc_segmap_task_74071_total_runtime;
    int *futhark_mc_segmap_task_74071_runs;
    int64_t *futhark_mc_segmap_task_74071_iter;
    int64_t futhark_mc_segmap_task_74071_total_time;
    int64_t futhark_mc_segmap_task_74071_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_74099_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_74099_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_74099_iter;
    int64_t futhark_mc_scan_stage_1_parloop_74099_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_74099_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_74099_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_74101_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_74101_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_74101_iter;
    int64_t futhark_mc_scan_stage_3_parloop_74101_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_74101_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_74101_total_iter;
    int64_t *futhark_mc_segscan_task_74096_total_runtime;
    int *futhark_mc_segscan_task_74096_runs;
    int64_t *futhark_mc_segscan_task_74096_iter;
    int64_t futhark_mc_segscan_task_74096_total_time;
    int64_t futhark_mc_segscan_task_74096_total_iter;
    int64_t *futhark_mc_segmap_parloop_74105_total_runtime;
    int *futhark_mc_segmap_parloop_74105_runs;
    int64_t *futhark_mc_segmap_parloop_74105_iter;
    int64_t futhark_mc_segmap_parloop_74105_total_total_runtime;
    int futhark_mc_segmap_parloop_74105_total_runs;
    int64_t futhark_mc_segmap_parloop_74105_total_iter;
    int64_t *futhark_mc_segmap_task_74103_total_runtime;
    int *futhark_mc_segmap_task_74103_runs;
    int64_t *futhark_mc_segmap_task_74103_iter;
    int64_t futhark_mc_segmap_task_74103_total_time;
    int64_t futhark_mc_segmap_task_74103_total_iter;
    int64_t *futhark_mc_segmap_parloop_74109_total_runtime;
    int *futhark_mc_segmap_parloop_74109_runs;
    int64_t *futhark_mc_segmap_parloop_74109_iter;
    int64_t futhark_mc_segmap_parloop_74109_total_total_runtime;
    int futhark_mc_segmap_parloop_74109_total_runs;
    int64_t futhark_mc_segmap_parloop_74109_total_iter;
    int64_t *futhark_mc_segmap_task_74107_total_runtime;
    int *futhark_mc_segmap_task_74107_runs;
    int64_t *futhark_mc_segmap_task_74107_iter;
    int64_t futhark_mc_segmap_task_74107_total_time;
    int64_t futhark_mc_segmap_task_74107_total_iter;
    int64_t *futhark_mc_segmap_parloop_74113_total_runtime;
    int *futhark_mc_segmap_parloop_74113_runs;
    int64_t *futhark_mc_segmap_parloop_74113_iter;
    int64_t futhark_mc_segmap_parloop_74113_total_total_runtime;
    int futhark_mc_segmap_parloop_74113_total_runs;
    int64_t futhark_mc_segmap_parloop_74113_total_iter;
    int64_t *futhark_mc_segmap_task_74111_total_runtime;
    int *futhark_mc_segmap_task_74111_runs;
    int64_t *futhark_mc_segmap_task_74111_iter;
    int64_t futhark_mc_segmap_task_74111_total_time;
    int64_t futhark_mc_segmap_task_74111_total_iter;
    int64_t *futhark_mc_segmap_parloop_74117_total_runtime;
    int *futhark_mc_segmap_parloop_74117_runs;
    int64_t *futhark_mc_segmap_parloop_74117_iter;
    int64_t futhark_mc_segmap_parloop_74117_total_total_runtime;
    int futhark_mc_segmap_parloop_74117_total_runs;
    int64_t futhark_mc_segmap_parloop_74117_total_iter;
    int64_t *futhark_mc_segmap_task_74115_total_runtime;
    int *futhark_mc_segmap_task_74115_runs;
    int64_t *futhark_mc_segmap_task_74115_iter;
    int64_t futhark_mc_segmap_task_74115_total_time;
    int64_t futhark_mc_segmap_task_74115_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74131_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74131_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74131_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74131_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74131_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74131_total_iter;
    int64_t *futhark_mc_segred_task_74126_total_runtime;
    int *futhark_mc_segred_task_74126_runs;
    int64_t *futhark_mc_segred_task_74126_iter;
    int64_t futhark_mc_segred_task_74126_total_time;
    int64_t futhark_mc_segred_task_74126_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74137_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74137_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74137_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74137_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74137_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74137_total_iter;
    int64_t *futhark_mc_segred_task_74133_total_runtime;
    int *futhark_mc_segred_task_74133_runs;
    int64_t *futhark_mc_segred_task_74133_iter;
    int64_t futhark_mc_segred_task_74133_total_time;
    int64_t futhark_mc_segred_task_74133_total_iter;
    int64_t *futhark_mc_segmap_parloop_74122_total_runtime;
    int *futhark_mc_segmap_parloop_74122_runs;
    int64_t *futhark_mc_segmap_parloop_74122_iter;
    int64_t futhark_mc_segmap_parloop_74122_total_total_runtime;
    int futhark_mc_segmap_parloop_74122_total_runs;
    int64_t futhark_mc_segmap_parloop_74122_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74120_total_runtime;
    int *futhark_mc_segmap_nested_task_74120_runs;
    int64_t *futhark_mc_segmap_nested_task_74120_iter;
    int64_t *futhark_mc_segmap_parloop_74086_total_runtime;
    int *futhark_mc_segmap_parloop_74086_runs;
    int64_t *futhark_mc_segmap_parloop_74086_iter;
    int64_t futhark_mc_segmap_parloop_74086_total_total_runtime;
    int futhark_mc_segmap_parloop_74086_total_runs;
    int64_t futhark_mc_segmap_parloop_74086_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74084_total_runtime;
    int *futhark_mc_segmap_nested_task_74084_runs;
    int64_t *futhark_mc_segmap_nested_task_74084_iter;
    int64_t *futhark_mc_segmap_parloop_74141_total_runtime;
    int *futhark_mc_segmap_parloop_74141_runs;
    int64_t *futhark_mc_segmap_parloop_74141_iter;
    int64_t futhark_mc_segmap_parloop_74141_total_total_runtime;
    int futhark_mc_segmap_parloop_74141_total_runs;
    int64_t futhark_mc_segmap_parloop_74141_total_iter;
    int64_t *futhark_mc_segmap_task_74139_total_runtime;
    int *futhark_mc_segmap_task_74139_runs;
    int64_t *futhark_mc_segmap_task_74139_iter;
    int64_t futhark_mc_segmap_task_74139_total_time;
    int64_t futhark_mc_segmap_task_74139_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_74169_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_74169_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_74169_iter;
    int64_t futhark_mc_scan_stage_1_parloop_74169_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_74169_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_74169_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_74171_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_74171_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_74171_iter;
    int64_t futhark_mc_scan_stage_3_parloop_74171_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_74171_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_74171_total_iter;
    int64_t *futhark_mc_segscan_task_74166_total_runtime;
    int *futhark_mc_segscan_task_74166_runs;
    int64_t *futhark_mc_segscan_task_74166_iter;
    int64_t futhark_mc_segscan_task_74166_total_time;
    int64_t futhark_mc_segscan_task_74166_total_iter;
    int64_t *futhark_mc_segmap_parloop_74175_total_runtime;
    int *futhark_mc_segmap_parloop_74175_runs;
    int64_t *futhark_mc_segmap_parloop_74175_iter;
    int64_t futhark_mc_segmap_parloop_74175_total_total_runtime;
    int futhark_mc_segmap_parloop_74175_total_runs;
    int64_t futhark_mc_segmap_parloop_74175_total_iter;
    int64_t *futhark_mc_segmap_task_74173_total_runtime;
    int *futhark_mc_segmap_task_74173_runs;
    int64_t *futhark_mc_segmap_task_74173_iter;
    int64_t futhark_mc_segmap_task_74173_total_time;
    int64_t futhark_mc_segmap_task_74173_total_iter;
    int64_t *futhark_mc_segmap_parloop_74179_total_runtime;
    int *futhark_mc_segmap_parloop_74179_runs;
    int64_t *futhark_mc_segmap_parloop_74179_iter;
    int64_t futhark_mc_segmap_parloop_74179_total_total_runtime;
    int futhark_mc_segmap_parloop_74179_total_runs;
    int64_t futhark_mc_segmap_parloop_74179_total_iter;
    int64_t *futhark_mc_segmap_task_74177_total_runtime;
    int *futhark_mc_segmap_task_74177_runs;
    int64_t *futhark_mc_segmap_task_74177_iter;
    int64_t futhark_mc_segmap_task_74177_total_time;
    int64_t futhark_mc_segmap_task_74177_total_iter;
    int64_t *futhark_mc_segmap_parloop_74183_total_runtime;
    int *futhark_mc_segmap_parloop_74183_runs;
    int64_t *futhark_mc_segmap_parloop_74183_iter;
    int64_t futhark_mc_segmap_parloop_74183_total_total_runtime;
    int futhark_mc_segmap_parloop_74183_total_runs;
    int64_t futhark_mc_segmap_parloop_74183_total_iter;
    int64_t *futhark_mc_segmap_task_74181_total_runtime;
    int *futhark_mc_segmap_task_74181_runs;
    int64_t *futhark_mc_segmap_task_74181_iter;
    int64_t futhark_mc_segmap_task_74181_total_time;
    int64_t futhark_mc_segmap_task_74181_total_iter;
    int64_t *futhark_mc_segmap_parloop_74187_total_runtime;
    int *futhark_mc_segmap_parloop_74187_runs;
    int64_t *futhark_mc_segmap_parloop_74187_iter;
    int64_t futhark_mc_segmap_parloop_74187_total_total_runtime;
    int futhark_mc_segmap_parloop_74187_total_runs;
    int64_t futhark_mc_segmap_parloop_74187_total_iter;
    int64_t *futhark_mc_segmap_task_74185_total_runtime;
    int *futhark_mc_segmap_task_74185_runs;
    int64_t *futhark_mc_segmap_task_74185_iter;
    int64_t futhark_mc_segmap_task_74185_total_time;
    int64_t futhark_mc_segmap_task_74185_total_iter;
    int64_t *futhark_mc_segmap_parloop_74202_total_runtime;
    int *futhark_mc_segmap_parloop_74202_runs;
    int64_t *futhark_mc_segmap_parloop_74202_iter;
    int64_t futhark_mc_segmap_parloop_74202_total_total_runtime;
    int futhark_mc_segmap_parloop_74202_total_runs;
    int64_t futhark_mc_segmap_parloop_74202_total_iter;
    int64_t *futhark_mc_segmap_task_74200_total_runtime;
    int *futhark_mc_segmap_task_74200_runs;
    int64_t *futhark_mc_segmap_task_74200_iter;
    int64_t futhark_mc_segmap_task_74200_total_time;
    int64_t futhark_mc_segmap_task_74200_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74211_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74211_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74211_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74211_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74211_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74211_total_iter;
    int64_t *futhark_mc_segred_task_74204_total_runtime;
    int *futhark_mc_segred_task_74204_runs;
    int64_t *futhark_mc_segred_task_74204_iter;
    int64_t futhark_mc_segred_task_74204_total_time;
    int64_t futhark_mc_segred_task_74204_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_74217_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_74217_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_74217_iter;
    int64_t futhark_mc_segred_stage_1_parloop_74217_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_74217_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_74217_total_iter;
    int64_t *futhark_mc_segred_task_74213_total_runtime;
    int *futhark_mc_segred_task_74213_runs;
    int64_t *futhark_mc_segred_task_74213_iter;
    int64_t futhark_mc_segred_task_74213_total_time;
    int64_t futhark_mc_segred_task_74213_total_iter;
    int64_t *futhark_mc_segmap_parloop_74194_total_runtime;
    int *futhark_mc_segmap_parloop_74194_runs;
    int64_t *futhark_mc_segmap_parloop_74194_iter;
    int64_t futhark_mc_segmap_parloop_74194_total_total_runtime;
    int futhark_mc_segmap_parloop_74194_total_runs;
    int64_t futhark_mc_segmap_parloop_74194_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74192_total_runtime;
    int *futhark_mc_segmap_nested_task_74192_runs;
    int64_t *futhark_mc_segmap_nested_task_74192_iter;
    int64_t *futhark_mc_segmap_parloop_74156_total_runtime;
    int *futhark_mc_segmap_parloop_74156_runs;
    int64_t *futhark_mc_segmap_parloop_74156_iter;
    int64_t futhark_mc_segmap_parloop_74156_total_total_runtime;
    int futhark_mc_segmap_parloop_74156_total_runs;
    int64_t futhark_mc_segmap_parloop_74156_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74154_total_runtime;
    int *futhark_mc_segmap_nested_task_74154_runs;
    int64_t *futhark_mc_segmap_nested_task_74154_iter;
    int64_t *futhark_mc_segmap_parloop_74221_total_runtime;
    int *futhark_mc_segmap_parloop_74221_runs;
    int64_t *futhark_mc_segmap_parloop_74221_iter;
    int64_t futhark_mc_segmap_parloop_74221_total_total_runtime;
    int futhark_mc_segmap_parloop_74221_total_runs;
    int64_t futhark_mc_segmap_parloop_74221_total_iter;
    int64_t *futhark_mc_segmap_task_74219_total_runtime;
    int *futhark_mc_segmap_task_74219_runs;
    int64_t *futhark_mc_segmap_task_74219_iter;
    int64_t futhark_mc_segmap_task_74219_total_time;
    int64_t futhark_mc_segmap_task_74219_total_iter;
    int64_t *futhark_mc_segmap_parloop_74230_total_runtime;
    int *futhark_mc_segmap_parloop_74230_runs;
    int64_t *futhark_mc_segmap_parloop_74230_iter;
    int64_t futhark_mc_segmap_parloop_74230_total_total_runtime;
    int futhark_mc_segmap_parloop_74230_total_runs;
    int64_t futhark_mc_segmap_parloop_74230_total_iter;
    int64_t *futhark_mc_segmap_task_74228_total_runtime;
    int *futhark_mc_segmap_task_74228_runs;
    int64_t *futhark_mc_segmap_task_74228_iter;
    int64_t futhark_mc_segmap_task_74228_total_time;
    int64_t futhark_mc_segmap_task_74228_total_iter;
    int64_t *futhark_mc_segmap_parloop_74225_total_runtime;
    int *futhark_mc_segmap_parloop_74225_runs;
    int64_t *futhark_mc_segmap_parloop_74225_iter;
    int64_t futhark_mc_segmap_parloop_74225_total_total_runtime;
    int futhark_mc_segmap_parloop_74225_total_runs;
    int64_t futhark_mc_segmap_parloop_74225_total_iter;
    int64_t *futhark_mc_segmap_nested_task_74223_total_runtime;
    int *futhark_mc_segmap_nested_task_74223_runs;
    int64_t *futhark_mc_segmap_nested_task_74223_iter;
    int64_t tuning_timing;
    int64_t tuning_iter;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    fast_srand(time(0));
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->profiling;
    ctx->profiling_paused = 0;
    ctx->logging = 0;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    
    int tune_kappa = 0;
    double kappa = 5.1f * 1000;
    
    if (tune_kappa) {
        if (determine_kappa(&kappa) != 0)
            return NULL;
    }
    if (scheduler_init(&ctx->scheduler, cfg->num_threads >
                       0 ? cfg->num_threads : num_processors(), kappa) != 0)
        return NULL;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->futhark_mc_segmap_parloop_73830_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73830_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73830_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73830_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73830_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73830_total_iter = 0;
    ctx->futhark_mc_segmap_task_73828_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73828_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73828_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73828_total_time = 0;
    ctx->futhark_mc_segmap_task_73828_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73852_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73852_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73852_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73852_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73852_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73852_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73854_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73854_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73854_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73854_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73854_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73854_total_iter = 0;
    ctx->futhark_mc_segscan_task_73849_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73849_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73849_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73849_total_time = 0;
    ctx->futhark_mc_segscan_task_73849_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73858_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73858_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73858_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73858_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73858_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73858_total_iter = 0;
    ctx->futhark_mc_segmap_task_73856_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73856_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73856_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73856_total_time = 0;
    ctx->futhark_mc_segmap_task_73856_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73862_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73862_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73862_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73862_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73862_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73862_total_iter = 0;
    ctx->futhark_mc_segmap_task_73860_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73860_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73860_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73860_total_time = 0;
    ctx->futhark_mc_segmap_task_73860_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73866_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73866_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73866_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73866_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73866_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73866_total_iter = 0;
    ctx->futhark_mc_segmap_task_73864_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73864_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73864_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73864_total_time = 0;
    ctx->futhark_mc_segmap_task_73864_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73870_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73870_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73870_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73870_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73870_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73870_total_iter = 0;
    ctx->futhark_mc_segmap_task_73868_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73868_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73868_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73868_total_time = 0;
    ctx->futhark_mc_segmap_task_73868_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73878_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73878_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73878_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73878_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73878_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73878_total_iter = 0;
    ctx->futhark_mc_segred_task_73875_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73875_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73875_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73875_total_time = 0;
    ctx->futhark_mc_segred_task_73875_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73883_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73883_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73883_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73883_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73883_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73883_total_iter = 0;
    ctx->futhark_mc_segred_task_73880_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73880_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73880_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73880_total_time = 0;
    ctx->futhark_mc_segred_task_73880_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73873_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73873_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73873_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73873_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73873_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73873_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_73871_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73871_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73871_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73840_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73840_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73840_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73840_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73840_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73840_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_73838_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73838_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73838_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73887_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73887_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73887_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73887_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73887_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73887_total_iter = 0;
    ctx->futhark_mc_segmap_task_73885_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73885_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73885_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73885_total_time = 0;
    ctx->futhark_mc_segmap_task_73885_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73911_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73911_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73911_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73911_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73911_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73911_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73913_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73913_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73913_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73913_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73913_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73913_total_iter = 0;
    ctx->futhark_mc_segscan_task_73908_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73908_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73908_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73908_total_time = 0;
    ctx->futhark_mc_segscan_task_73908_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73917_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73917_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73917_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73917_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73917_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73917_total_iter = 0;
    ctx->futhark_mc_segmap_task_73915_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73915_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73915_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73915_total_time = 0;
    ctx->futhark_mc_segmap_task_73915_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73921_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73921_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73921_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73921_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73921_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73921_total_iter = 0;
    ctx->futhark_mc_segmap_task_73919_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73919_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73919_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73919_total_time = 0;
    ctx->futhark_mc_segmap_task_73919_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73925_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73925_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73925_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73925_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73925_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73925_total_iter = 0;
    ctx->futhark_mc_segmap_task_73923_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73923_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73923_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73923_total_time = 0;
    ctx->futhark_mc_segmap_task_73923_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73929_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73929_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73929_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73929_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73929_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73929_total_iter = 0;
    ctx->futhark_mc_segmap_task_73927_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73927_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73927_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73927_total_time = 0;
    ctx->futhark_mc_segmap_task_73927_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73939_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73939_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73939_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73939_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73939_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73939_total_iter = 0;
    ctx->futhark_mc_segred_task_73934_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73934_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73934_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73934_total_time = 0;
    ctx->futhark_mc_segred_task_73934_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73945_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73945_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73945_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_73945_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73945_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_73945_total_iter = 0;
    ctx->futhark_mc_segred_task_73941_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73941_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73941_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73941_total_time = 0;
    ctx->futhark_mc_segred_task_73941_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73932_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73932_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73932_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73932_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73932_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73932_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_73930_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73930_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73930_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73898_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73898_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73898_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73898_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73898_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73898_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_73896_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73896_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73896_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73949_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73949_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73949_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73949_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73949_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73949_total_iter = 0;
    ctx->futhark_mc_segmap_task_73947_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73947_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73947_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73947_total_time = 0;
    ctx->futhark_mc_segmap_task_73947_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73973_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73973_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73973_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_73973_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73973_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_73973_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73975_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73975_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73975_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_73975_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73975_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_73975_total_iter = 0;
    ctx->futhark_mc_segscan_task_73970_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73970_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73970_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_73970_total_time = 0;
    ctx->futhark_mc_segscan_task_73970_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73979_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73979_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73979_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73979_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73979_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73979_total_iter = 0;
    ctx->futhark_mc_segmap_task_73977_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73977_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73977_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73977_total_time = 0;
    ctx->futhark_mc_segmap_task_73977_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73983_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73983_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73983_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73983_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73983_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73983_total_iter = 0;
    ctx->futhark_mc_segmap_task_73981_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73981_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73981_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73981_total_time = 0;
    ctx->futhark_mc_segmap_task_73981_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73987_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73987_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73987_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73987_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73987_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73987_total_iter = 0;
    ctx->futhark_mc_segmap_task_73985_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73985_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73985_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73985_total_time = 0;
    ctx->futhark_mc_segmap_task_73985_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73991_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73991_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73991_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73991_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73991_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73991_total_iter = 0;
    ctx->futhark_mc_segmap_task_73989_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73989_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73989_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_73989_total_time = 0;
    ctx->futhark_mc_segmap_task_73989_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74003_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74003_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74003_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74003_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74003_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74003_total_iter = 0;
    ctx->futhark_mc_segred_task_73996_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73996_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73996_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_73996_total_time = 0;
    ctx->futhark_mc_segred_task_73996_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74009_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74009_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74009_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74009_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74009_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74009_total_iter = 0;
    ctx->futhark_mc_segred_task_74005_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74005_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74005_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74005_total_time = 0;
    ctx->futhark_mc_segred_task_74005_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_73994_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73994_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73994_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73994_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73994_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73994_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_73992_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73992_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73992_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73960_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73960_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73960_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_73960_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_73960_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_73960_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_73958_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73958_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_73958_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74013_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74013_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74013_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74013_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74013_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74013_total_iter = 0;
    ctx->futhark_mc_segmap_task_74011_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74011_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74011_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74011_total_time = 0;
    ctx->futhark_mc_segmap_task_74011_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74036_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74036_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74036_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74036_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74036_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74036_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74038_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74038_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74038_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74038_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74038_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74038_total_iter = 0;
    ctx->futhark_mc_segscan_task_74033_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74033_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74033_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74033_total_time = 0;
    ctx->futhark_mc_segscan_task_74033_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74042_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74042_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74042_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74042_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74042_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74042_total_iter = 0;
    ctx->futhark_mc_segmap_task_74040_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74040_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74040_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74040_total_time = 0;
    ctx->futhark_mc_segmap_task_74040_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74046_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74046_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74046_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74046_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74046_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74046_total_iter = 0;
    ctx->futhark_mc_segmap_task_74044_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74044_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74044_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74044_total_time = 0;
    ctx->futhark_mc_segmap_task_74044_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74050_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74050_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74050_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74050_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74050_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74050_total_iter = 0;
    ctx->futhark_mc_segmap_task_74048_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74048_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74048_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74048_total_time = 0;
    ctx->futhark_mc_segmap_task_74048_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74054_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74054_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74054_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74054_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74054_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74054_total_iter = 0;
    ctx->futhark_mc_segmap_task_74052_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74052_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74052_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74052_total_time = 0;
    ctx->futhark_mc_segmap_task_74052_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74064_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74064_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74064_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74064_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74064_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74064_total_iter = 0;
    ctx->futhark_mc_segred_task_74061_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74061_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74061_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74061_total_time = 0;
    ctx->futhark_mc_segred_task_74061_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74069_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74069_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74069_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74069_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74069_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74069_total_iter = 0;
    ctx->futhark_mc_segred_task_74066_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74066_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74066_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74066_total_time = 0;
    ctx->futhark_mc_segred_task_74066_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74058_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74058_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74058_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74058_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74058_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74058_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74056_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74056_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74056_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74024_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74024_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74024_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74024_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74024_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74024_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74022_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74022_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74022_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74073_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74073_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74073_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74073_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74073_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74073_total_iter = 0;
    ctx->futhark_mc_segmap_task_74071_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74071_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74071_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74071_total_time = 0;
    ctx->futhark_mc_segmap_task_74071_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74099_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74099_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74099_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74099_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74099_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74099_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74101_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74101_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74101_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74101_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74101_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74101_total_iter = 0;
    ctx->futhark_mc_segscan_task_74096_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74096_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74096_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74096_total_time = 0;
    ctx->futhark_mc_segscan_task_74096_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74105_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74105_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74105_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74105_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74105_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74105_total_iter = 0;
    ctx->futhark_mc_segmap_task_74103_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74103_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74103_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74103_total_time = 0;
    ctx->futhark_mc_segmap_task_74103_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74109_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74109_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74109_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74109_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74109_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74109_total_iter = 0;
    ctx->futhark_mc_segmap_task_74107_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74107_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74107_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74107_total_time = 0;
    ctx->futhark_mc_segmap_task_74107_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74113_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74113_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74113_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74113_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74113_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74113_total_iter = 0;
    ctx->futhark_mc_segmap_task_74111_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74111_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74111_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74111_total_time = 0;
    ctx->futhark_mc_segmap_task_74111_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74117_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74117_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74117_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74117_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74117_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74117_total_iter = 0;
    ctx->futhark_mc_segmap_task_74115_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74115_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74115_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74115_total_time = 0;
    ctx->futhark_mc_segmap_task_74115_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74131_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74131_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74131_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74131_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74131_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74131_total_iter = 0;
    ctx->futhark_mc_segred_task_74126_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74126_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74126_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74126_total_time = 0;
    ctx->futhark_mc_segred_task_74126_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74137_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74137_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74137_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74137_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74137_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74137_total_iter = 0;
    ctx->futhark_mc_segred_task_74133_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74133_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74133_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74133_total_time = 0;
    ctx->futhark_mc_segred_task_74133_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74122_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74122_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74122_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74122_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74122_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74122_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74120_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74120_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74120_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74086_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74086_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74086_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74086_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74086_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74086_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74084_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74084_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74084_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74141_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74141_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74141_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74141_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74141_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74141_total_iter = 0;
    ctx->futhark_mc_segmap_task_74139_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74139_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74139_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74139_total_time = 0;
    ctx->futhark_mc_segmap_task_74139_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74169_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74169_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74169_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_74169_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74169_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_74169_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74171_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74171_runs = calloc(sizeof(int),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74171_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_74171_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74171_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_74171_total_iter = 0;
    ctx->futhark_mc_segscan_task_74166_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74166_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74166_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_74166_total_time = 0;
    ctx->futhark_mc_segscan_task_74166_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74175_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74175_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74175_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74175_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74175_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74175_total_iter = 0;
    ctx->futhark_mc_segmap_task_74173_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74173_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74173_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74173_total_time = 0;
    ctx->futhark_mc_segmap_task_74173_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74179_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74179_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74179_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74179_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74179_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74179_total_iter = 0;
    ctx->futhark_mc_segmap_task_74177_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74177_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74177_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74177_total_time = 0;
    ctx->futhark_mc_segmap_task_74177_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74183_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74183_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74183_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74183_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74183_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74183_total_iter = 0;
    ctx->futhark_mc_segmap_task_74181_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74181_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74181_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74181_total_time = 0;
    ctx->futhark_mc_segmap_task_74181_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74187_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74187_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74187_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74187_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74187_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74187_total_iter = 0;
    ctx->futhark_mc_segmap_task_74185_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74185_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74185_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74185_total_time = 0;
    ctx->futhark_mc_segmap_task_74185_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74202_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74202_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74202_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74202_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74202_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74202_total_iter = 0;
    ctx->futhark_mc_segmap_task_74200_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74200_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74200_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74200_total_time = 0;
    ctx->futhark_mc_segmap_task_74200_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74211_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74211_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74211_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74211_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74211_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74211_total_iter = 0;
    ctx->futhark_mc_segred_task_74204_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74204_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74204_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74204_total_time = 0;
    ctx->futhark_mc_segred_task_74204_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74217_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74217_runs = calloc(sizeof(int),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74217_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_74217_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74217_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_74217_total_iter = 0;
    ctx->futhark_mc_segred_task_74213_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74213_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74213_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_74213_total_time = 0;
    ctx->futhark_mc_segred_task_74213_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74194_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74194_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74194_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74194_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74194_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74194_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74192_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74192_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74192_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74156_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74156_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74156_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74156_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74156_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74156_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74154_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74154_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74154_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74221_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74221_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74221_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74221_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74221_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74221_total_iter = 0;
    ctx->futhark_mc_segmap_task_74219_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74219_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74219_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74219_total_time = 0;
    ctx->futhark_mc_segmap_task_74219_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74230_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74230_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74230_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74230_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74230_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74230_total_iter = 0;
    ctx->futhark_mc_segmap_task_74228_total_runtime = calloc(sizeof(int64_t),
                                                             ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74228_runs = calloc(sizeof(int),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74228_iter = calloc(sizeof(sizeof(int64_t)),
                                                    ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_74228_total_time = 0;
    ctx->futhark_mc_segmap_task_74228_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_74225_total_runtime = calloc(sizeof(int64_t),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74225_runs = calloc(sizeof(int),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74225_iter = calloc(sizeof(sizeof(int64_t)),
                                                       ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_74225_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_74225_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_74225_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_74223_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74223_runs = calloc(sizeof(int),
                                                           ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_74223_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    (void) scheduler_destroy(&ctx->scheduler);
    free_lock(&ctx->lock);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *size_names[0];
static const char *size_vars[0];
static const char *size_classes[0];
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    (void) cfg;
    (void) size_name;
    (void) size_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (char *) malloc(size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_num_sizes(void)
{
    return sizeof(size_names) / sizeof(size_names[0]);
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) {
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73830          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73830_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73830_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73830_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73830_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73830_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73830_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73830_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73830_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73830_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73830_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73830_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73830_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73830_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73830_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73830_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73830_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73830_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73830_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73830_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73830_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73830_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73830_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73830_total_iter /
                (ctx->futhark_mc_segmap_parloop_73830_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73830_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73830_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73830_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_73852    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_73852_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73852_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73852_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_73852_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73852_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_73852_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73852_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_73852_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73852_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73852_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73852_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_73852_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_73852_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_73852_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_73852_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_73852_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_73852_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_73852_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_73852_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_73852_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_73852_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_73852_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_73852_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_73852_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_73852_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_73852_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_73852_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_73854    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_73854_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73854_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73854_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_73854_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73854_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_73854_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73854_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_73854_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73854_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73854_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73854_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_73854_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_73854_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_73854_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_73854_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_73854_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_73854_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_73854_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_73854_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_73854_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_73854_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_73854_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_73854_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_73854_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_73854_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_73854_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_73854_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_73849            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_73849_runs[i],
                    (long) ctx->futhark_mc_segscan_task_73849_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_73849_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_73849_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_73849_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_73849_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_73849_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_73849_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_73849_iter[i],
                    (long) ctx->futhark_mc_segscan_task_73849_iter[i] /
                    (ctx->futhark_mc_segscan_task_73849_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_73849_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73858          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73858_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73858_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73858_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73858_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73858_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73858_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73858_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73858_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73858_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73858_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73858_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73858_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73858_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73858_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73858_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73858_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73858_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73858_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73858_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73858_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73858_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73858_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73858_total_iter /
                (ctx->futhark_mc_segmap_parloop_73858_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73858_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73858_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73858_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73856             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73856_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73856_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73856_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73856_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73856_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73856_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73856_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73856_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73856_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73856_iter[i] /
                    (ctx->futhark_mc_segmap_task_73856_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73856_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73862          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73862_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73862_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73862_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73862_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73862_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73862_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73862_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73862_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73862_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73862_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73862_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73862_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73862_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73862_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73862_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73862_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73862_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73862_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73862_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73862_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73862_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73862_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73862_total_iter /
                (ctx->futhark_mc_segmap_parloop_73862_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73862_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73862_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73862_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73860             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73860_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73860_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73860_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73860_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73860_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73860_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73860_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73860_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73860_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73860_iter[i] /
                    (ctx->futhark_mc_segmap_task_73860_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73860_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73866          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73866_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73866_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73866_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73866_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73866_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73866_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73866_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73866_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73866_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73866_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73866_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73866_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73866_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73866_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73866_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73866_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73866_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73866_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73866_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73866_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73866_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73866_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73866_total_iter /
                (ctx->futhark_mc_segmap_parloop_73866_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73866_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73866_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73866_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73864             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73864_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73864_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73864_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73864_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73864_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73864_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73864_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73864_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73864_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73864_iter[i] /
                    (ctx->futhark_mc_segmap_task_73864_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73864_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73870          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73870_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73870_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73870_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73870_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73870_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73870_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73870_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73870_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73870_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73870_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73870_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73870_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73870_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73870_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73870_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73870_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73870_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73870_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73870_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73870_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73870_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73870_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73870_total_iter /
                (ctx->futhark_mc_segmap_parloop_73870_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73870_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73870_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73870_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_73878  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_73878_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73878_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73878_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73878_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73878_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_73878_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73878_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73878_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73878_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73878_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73878_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73878_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_73878_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_73878_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73878_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73878_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73878_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73878_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_73878_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73878_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73878_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73878_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73878_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_73878_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73878_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_73878_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_73878_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_73875             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_73875_runs[i],
                    (long) ctx->futhark_mc_segred_task_73875_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73875_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73875_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_73875_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_73875_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73875_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_73875_iter[i]),
                    (long) ctx->futhark_mc_segred_task_73875_iter[i],
                    (long) ctx->futhark_mc_segred_task_73875_iter[i] /
                    (ctx->futhark_mc_segred_task_73875_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73875_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_73883  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_73883_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73883_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73883_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73883_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73883_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_73883_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73883_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73883_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73883_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73883_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73883_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73883_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_73883_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_73883_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73883_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73883_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73883_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73883_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_73883_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73883_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73883_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73883_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73883_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_73883_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73883_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_73883_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_73883_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_73880             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_73880_runs[i],
                    (long) ctx->futhark_mc_segred_task_73880_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73880_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73880_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_73880_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_73880_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73880_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_73880_iter[i]),
                    (long) ctx->futhark_mc_segred_task_73880_iter[i],
                    (long) ctx->futhark_mc_segred_task_73880_iter[i] /
                    (ctx->futhark_mc_segred_task_73880_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73880_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73873          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73873_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73873_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73873_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73873_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73873_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73873_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73873_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73873_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73873_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73873_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73873_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73873_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73873_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73873_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73873_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73873_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73873_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73873_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73873_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73873_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73873_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73873_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73873_total_iter /
                (ctx->futhark_mc_segmap_parloop_73873_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73873_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73873_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73873_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73868             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73868_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73868_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73868_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73868_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73868_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73868_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73868_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73868_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73868_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73868_iter[i] /
                    (ctx->futhark_mc_segmap_task_73868_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73868_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_73871      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_73871_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73871_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73871_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73871_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_73871_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_73871_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73871_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_73871_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_73871_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73871_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_73871_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73871_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73840          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73840_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73840_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73840_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73840_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73840_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73840_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73840_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73840_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73840_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73840_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73840_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73840_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73840_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73840_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73840_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73840_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73840_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73840_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73840_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73840_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73840_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73840_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73840_total_iter /
                (ctx->futhark_mc_segmap_parloop_73840_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73840_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73840_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73840_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73828             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73828_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73828_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73828_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73828_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73828_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73828_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73828_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73828_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73828_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73828_iter[i] /
                    (ctx->futhark_mc_segmap_task_73828_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73828_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_73838      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_73838_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73838_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73838_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73838_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_73838_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_73838_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73838_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_73838_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_73838_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73838_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_73838_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73838_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73887          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73887_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73887_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73887_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73887_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73887_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73887_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73887_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73887_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73887_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73887_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73887_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73887_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73887_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73887_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73887_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73887_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73887_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73887_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73887_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73887_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73887_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73887_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73887_total_iter /
                (ctx->futhark_mc_segmap_parloop_73887_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73887_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73887_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73887_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_73911    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_73911_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73911_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73911_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_73911_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73911_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_73911_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73911_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_73911_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73911_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73911_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73911_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_73911_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_73911_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_73911_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_73911_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_73911_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_73911_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_73911_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_73911_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_73911_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_73911_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_73911_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_73911_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_73911_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_73911_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_73911_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_73911_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_73913    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_73913_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73913_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73913_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_73913_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73913_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_73913_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73913_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_73913_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73913_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73913_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73913_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_73913_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_73913_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_73913_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_73913_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_73913_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_73913_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_73913_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_73913_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_73913_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_73913_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_73913_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_73913_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_73913_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_73913_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_73913_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_73913_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_73908            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_73908_runs[i],
                    (long) ctx->futhark_mc_segscan_task_73908_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_73908_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_73908_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_73908_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_73908_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_73908_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_73908_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_73908_iter[i],
                    (long) ctx->futhark_mc_segscan_task_73908_iter[i] /
                    (ctx->futhark_mc_segscan_task_73908_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_73908_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73917          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73917_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73917_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73917_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73917_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73917_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73917_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73917_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73917_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73917_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73917_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73917_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73917_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73917_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73917_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73917_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73917_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73917_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73917_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73917_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73917_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73917_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73917_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73917_total_iter /
                (ctx->futhark_mc_segmap_parloop_73917_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73917_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73917_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73917_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73915             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73915_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73915_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73915_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73915_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73915_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73915_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73915_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73915_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73915_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73915_iter[i] /
                    (ctx->futhark_mc_segmap_task_73915_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73915_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73921          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73921_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73921_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73921_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73921_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73921_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73921_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73921_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73921_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73921_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73921_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73921_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73921_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73921_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73921_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73921_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73921_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73921_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73921_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73921_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73921_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73921_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73921_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73921_total_iter /
                (ctx->futhark_mc_segmap_parloop_73921_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73921_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73921_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73921_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73919             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73919_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73919_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73919_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73919_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73919_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73919_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73919_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73919_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73919_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73919_iter[i] /
                    (ctx->futhark_mc_segmap_task_73919_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73919_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73925          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73925_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73925_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73925_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73925_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73925_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73925_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73925_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73925_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73925_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73925_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73925_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73925_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73925_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73925_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73925_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73925_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73925_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73925_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73925_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73925_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73925_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73925_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73925_total_iter /
                (ctx->futhark_mc_segmap_parloop_73925_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73925_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73925_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73925_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73923             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73923_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73923_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73923_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73923_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73923_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73923_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73923_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73923_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73923_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73923_iter[i] /
                    (ctx->futhark_mc_segmap_task_73923_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73923_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73929          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73929_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73929_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73929_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73929_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73929_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73929_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73929_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73929_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73929_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73929_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73929_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73929_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73929_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73929_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73929_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73929_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73929_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73929_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73929_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73929_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73929_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73929_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73929_total_iter /
                (ctx->futhark_mc_segmap_parloop_73929_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73929_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73929_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73929_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_73939  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_73939_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73939_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73939_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73939_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73939_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_73939_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73939_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73939_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73939_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73939_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73939_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73939_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_73939_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_73939_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73939_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73939_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73939_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73939_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_73939_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73939_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73939_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73939_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73939_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_73939_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73939_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_73939_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_73939_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_73934             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_73934_runs[i],
                    (long) ctx->futhark_mc_segred_task_73934_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73934_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73934_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_73934_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_73934_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73934_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_73934_iter[i]),
                    (long) ctx->futhark_mc_segred_task_73934_iter[i],
                    (long) ctx->futhark_mc_segred_task_73934_iter[i] /
                    (ctx->futhark_mc_segred_task_73934_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73934_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_73945  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_73945_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73945_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73945_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73945_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73945_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_73945_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73945_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73945_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73945_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_73945_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_73945_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_73945_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_73945_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_73945_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73945_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73945_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73945_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73945_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_73945_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_73945_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_73945_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_73945_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_73945_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_73945_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_73945_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_73945_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_73945_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_73941             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_73941_runs[i],
                    (long) ctx->futhark_mc_segred_task_73941_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73941_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73941_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_73941_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_73941_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73941_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_73941_iter[i]),
                    (long) ctx->futhark_mc_segred_task_73941_iter[i],
                    (long) ctx->futhark_mc_segred_task_73941_iter[i] /
                    (ctx->futhark_mc_segred_task_73941_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73941_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73932          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73932_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73932_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73932_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73932_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73932_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73932_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73932_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73932_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73932_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73932_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73932_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73932_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73932_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73932_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73932_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73932_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73932_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73932_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73932_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73932_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73932_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73932_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73932_total_iter /
                (ctx->futhark_mc_segmap_parloop_73932_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73932_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73932_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73932_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73927             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73927_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73927_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73927_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73927_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73927_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73927_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73927_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73927_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73927_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73927_iter[i] /
                    (ctx->futhark_mc_segmap_task_73927_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73927_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_73930      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_73930_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73930_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73930_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73930_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_73930_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_73930_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73930_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_73930_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_73930_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73930_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_73930_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73930_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73898          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73898_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73898_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73898_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73898_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73898_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73898_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73898_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73898_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73898_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73898_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73898_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73898_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73898_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73898_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73898_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73898_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73898_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73898_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73898_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73898_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73898_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73898_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73898_total_iter /
                (ctx->futhark_mc_segmap_parloop_73898_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73898_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73898_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73898_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73885             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73885_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73885_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73885_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73885_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73885_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73885_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73885_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73885_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73885_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73885_iter[i] /
                    (ctx->futhark_mc_segmap_task_73885_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73885_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_73896      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_73896_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73896_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73896_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73896_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_73896_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_73896_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73896_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_73896_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_73896_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73896_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_73896_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73896_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73949          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73949_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73949_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73949_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73949_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73949_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73949_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73949_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73949_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73949_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73949_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73949_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73949_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73949_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73949_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73949_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73949_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73949_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73949_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73949_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73949_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73949_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73949_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73949_total_iter /
                (ctx->futhark_mc_segmap_parloop_73949_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73949_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73949_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73949_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_73973    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_73973_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73973_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73973_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_73973_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73973_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_73973_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73973_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_73973_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73973_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_73973_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_73973_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_73973_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_73973_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_73973_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_73973_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_73973_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_73973_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_73973_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_73973_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_73973_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_73973_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_73973_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_73973_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_73973_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_73973_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_73973_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_73973_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_73975    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_73975_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73975_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73975_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_73975_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73975_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_73975_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73975_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_73975_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73975_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_73975_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_73975_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_73975_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_73975_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_73975_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_73975_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_73975_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_73975_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_73975_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_73975_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_73975_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_73975_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_73975_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_73975_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_73975_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_73975_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_73975_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_73975_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_73970            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_73970_runs[i],
                    (long) ctx->futhark_mc_segscan_task_73970_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_73970_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_73970_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_73970_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_73970_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_73970_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_73970_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_73970_iter[i],
                    (long) ctx->futhark_mc_segscan_task_73970_iter[i] /
                    (ctx->futhark_mc_segscan_task_73970_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_73970_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73979          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73979_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73979_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73979_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73979_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73979_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73979_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73979_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73979_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73979_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73979_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73979_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73979_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73979_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73979_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73979_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73979_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73979_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73979_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73979_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73979_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73979_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73979_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73979_total_iter /
                (ctx->futhark_mc_segmap_parloop_73979_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73979_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73979_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73979_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73977             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73977_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73977_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73977_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73977_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73977_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73977_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73977_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73977_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73977_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73977_iter[i] /
                    (ctx->futhark_mc_segmap_task_73977_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73977_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73983          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73983_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73983_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73983_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73983_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73983_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73983_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73983_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73983_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73983_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73983_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73983_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73983_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73983_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73983_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73983_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73983_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73983_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73983_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73983_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73983_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73983_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73983_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73983_total_iter /
                (ctx->futhark_mc_segmap_parloop_73983_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73983_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73983_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73983_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73981             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73981_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73981_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73981_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73981_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73981_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73981_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73981_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73981_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73981_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73981_iter[i] /
                    (ctx->futhark_mc_segmap_task_73981_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73981_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73987          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73987_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73987_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73987_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73987_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73987_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73987_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73987_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73987_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73987_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73987_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73987_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73987_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73987_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73987_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73987_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73987_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73987_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73987_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73987_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73987_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73987_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73987_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73987_total_iter /
                (ctx->futhark_mc_segmap_parloop_73987_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73987_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73987_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73987_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73985             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73985_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73985_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73985_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73985_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73985_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73985_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73985_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73985_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73985_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73985_iter[i] /
                    (ctx->futhark_mc_segmap_task_73985_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73985_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73991          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73991_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73991_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73991_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73991_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73991_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73991_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73991_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73991_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73991_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73991_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73991_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73991_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73991_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73991_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73991_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73991_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73991_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73991_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73991_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73991_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73991_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73991_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73991_total_iter /
                (ctx->futhark_mc_segmap_parloop_73991_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73991_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73991_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73991_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74003  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74003_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74003_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74003_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74003_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74003_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74003_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74003_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74003_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74003_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74003_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74003_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74003_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74003_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74003_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74003_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74003_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74003_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74003_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74003_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74003_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74003_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74003_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74003_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74003_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74003_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74003_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74003_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_73996             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_73996_runs[i],
                    (long) ctx->futhark_mc_segred_task_73996_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73996_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73996_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_73996_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_73996_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_73996_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_73996_iter[i]),
                    (long) ctx->futhark_mc_segred_task_73996_iter[i],
                    (long) ctx->futhark_mc_segred_task_73996_iter[i] /
                    (ctx->futhark_mc_segred_task_73996_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_73996_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74009  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74009_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74009_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74009_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74009_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74009_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74009_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74009_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74009_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74009_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74009_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74009_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74009_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74009_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74009_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74009_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74009_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74009_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74009_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74009_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74009_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74009_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74009_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74009_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74009_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74009_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74009_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74009_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74005             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74005_runs[i],
                    (long) ctx->futhark_mc_segred_task_74005_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74005_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74005_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74005_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74005_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74005_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74005_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74005_iter[i],
                    (long) ctx->futhark_mc_segred_task_74005_iter[i] /
                    (ctx->futhark_mc_segred_task_74005_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74005_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73994          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73994_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73994_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73994_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73994_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73994_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73994_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73994_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73994_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73994_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73994_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73994_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73994_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73994_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73994_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73994_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73994_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73994_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73994_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73994_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73994_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73994_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73994_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73994_total_iter /
                (ctx->futhark_mc_segmap_parloop_73994_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73994_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73994_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73994_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73989             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73989_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73989_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73989_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73989_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73989_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73989_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73989_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73989_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73989_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73989_iter[i] /
                    (ctx->futhark_mc_segmap_task_73989_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73989_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_73992      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_73992_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73992_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73992_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73992_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_73992_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_73992_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73992_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_73992_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_73992_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73992_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_73992_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73992_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_73960          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_73960_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_73960_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73960_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73960_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_73960_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_73960_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_73960_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73960_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_73960_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_73960_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_73960_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_73960_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_73960_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_73960_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_73960_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73960_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73960_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_73960_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_73960_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_73960_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_73960_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_73960_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_73960_total_iter /
                (ctx->futhark_mc_segmap_parloop_73960_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_73960_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_73960_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_73960_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_73947             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_73947_runs[i],
                    (long) ctx->futhark_mc_segmap_task_73947_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73947_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73947_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_73947_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_73947_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_73947_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_73947_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_73947_iter[i],
                    (long) ctx->futhark_mc_segmap_task_73947_iter[i] /
                    (ctx->futhark_mc_segmap_task_73947_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_73947_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_73958      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_73958_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73958_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73958_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73958_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_73958_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_73958_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_73958_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_73958_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_73958_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_73958_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_73958_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_73958_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74013          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74013_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74013_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74013_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74013_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74013_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74013_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74013_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74013_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74013_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74013_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74013_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74013_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74013_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74013_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74013_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74013_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74013_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74013_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74013_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74013_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74013_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74013_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74013_total_iter /
                (ctx->futhark_mc_segmap_parloop_74013_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74013_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74013_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74013_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_74036    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_74036_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74036_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74036_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_74036_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74036_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_74036_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74036_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_74036_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74036_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74036_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74036_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_74036_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_74036_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_74036_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_74036_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_74036_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_74036_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_74036_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_74036_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_74036_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_74036_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_74036_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_74036_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_74036_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_74036_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_74036_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_74036_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_74038    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_74038_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74038_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74038_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_74038_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74038_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_74038_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74038_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_74038_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74038_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74038_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74038_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_74038_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_74038_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_74038_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_74038_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_74038_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_74038_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_74038_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_74038_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_74038_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_74038_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_74038_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_74038_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_74038_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_74038_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_74038_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_74038_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_74033            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_74033_runs[i],
                    (long) ctx->futhark_mc_segscan_task_74033_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_74033_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_74033_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_74033_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_74033_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_74033_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_74033_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_74033_iter[i],
                    (long) ctx->futhark_mc_segscan_task_74033_iter[i] /
                    (ctx->futhark_mc_segscan_task_74033_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_74033_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74042          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74042_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74042_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74042_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74042_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74042_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74042_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74042_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74042_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74042_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74042_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74042_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74042_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74042_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74042_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74042_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74042_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74042_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74042_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74042_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74042_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74042_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74042_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74042_total_iter /
                (ctx->futhark_mc_segmap_parloop_74042_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74042_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74042_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74042_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74040             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74040_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74040_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74040_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74040_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74040_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74040_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74040_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74040_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74040_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74040_iter[i] /
                    (ctx->futhark_mc_segmap_task_74040_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74040_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74046          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74046_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74046_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74046_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74046_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74046_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74046_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74046_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74046_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74046_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74046_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74046_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74046_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74046_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74046_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74046_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74046_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74046_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74046_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74046_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74046_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74046_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74046_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74046_total_iter /
                (ctx->futhark_mc_segmap_parloop_74046_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74046_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74046_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74046_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74044             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74044_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74044_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74044_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74044_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74044_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74044_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74044_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74044_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74044_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74044_iter[i] /
                    (ctx->futhark_mc_segmap_task_74044_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74044_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74050          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74050_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74050_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74050_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74050_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74050_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74050_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74050_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74050_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74050_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74050_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74050_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74050_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74050_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74050_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74050_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74050_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74050_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74050_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74050_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74050_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74050_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74050_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74050_total_iter /
                (ctx->futhark_mc_segmap_parloop_74050_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74050_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74050_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74050_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74048             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74048_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74048_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74048_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74048_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74048_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74048_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74048_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74048_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74048_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74048_iter[i] /
                    (ctx->futhark_mc_segmap_task_74048_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74048_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74054          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74054_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74054_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74054_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74054_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74054_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74054_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74054_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74054_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74054_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74054_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74054_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74054_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74054_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74054_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74054_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74054_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74054_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74054_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74054_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74054_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74054_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74054_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74054_total_iter /
                (ctx->futhark_mc_segmap_parloop_74054_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74054_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74054_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74054_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74064  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74064_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74064_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74064_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74064_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74064_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74064_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74064_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74064_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74064_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74064_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74064_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74064_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74064_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74064_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74064_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74064_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74064_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74064_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74064_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74064_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74064_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74064_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74064_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74064_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74064_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74064_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74064_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74061             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74061_runs[i],
                    (long) ctx->futhark_mc_segred_task_74061_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74061_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74061_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74061_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74061_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74061_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74061_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74061_iter[i],
                    (long) ctx->futhark_mc_segred_task_74061_iter[i] /
                    (ctx->futhark_mc_segred_task_74061_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74061_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74069  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74069_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74069_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74069_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74069_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74069_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74069_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74069_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74069_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74069_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74069_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74069_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74069_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74069_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74069_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74069_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74069_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74069_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74069_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74069_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74069_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74069_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74069_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74069_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74069_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74069_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74069_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74069_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74066             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74066_runs[i],
                    (long) ctx->futhark_mc_segred_task_74066_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74066_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74066_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74066_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74066_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74066_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74066_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74066_iter[i],
                    (long) ctx->futhark_mc_segred_task_74066_iter[i] /
                    (ctx->futhark_mc_segred_task_74066_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74066_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74058          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74058_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74058_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74058_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74058_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74058_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74058_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74058_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74058_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74058_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74058_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74058_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74058_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74058_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74058_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74058_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74058_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74058_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74058_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74058_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74058_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74058_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74058_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74058_total_iter /
                (ctx->futhark_mc_segmap_parloop_74058_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74058_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74058_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74058_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74052             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74052_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74052_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74052_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74052_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74052_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74052_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74052_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74052_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74052_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74052_iter[i] /
                    (ctx->futhark_mc_segmap_task_74052_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74052_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74056      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74056_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74056_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74056_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74056_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74056_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74056_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74056_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74056_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74056_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74056_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74056_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74056_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74024          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74024_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74024_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74024_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74024_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74024_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74024_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74024_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74024_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74024_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74024_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74024_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74024_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74024_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74024_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74024_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74024_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74024_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74024_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74024_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74024_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74024_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74024_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74024_total_iter /
                (ctx->futhark_mc_segmap_parloop_74024_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74024_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74024_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74024_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74011             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74011_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74011_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74011_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74011_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74011_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74011_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74011_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74011_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74011_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74011_iter[i] /
                    (ctx->futhark_mc_segmap_task_74011_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74011_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74022      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74022_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74022_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74022_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74022_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74022_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74022_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74022_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74022_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74022_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74022_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74022_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74022_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74073          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74073_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74073_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74073_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74073_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74073_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74073_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74073_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74073_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74073_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74073_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74073_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74073_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74073_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74073_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74073_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74073_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74073_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74073_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74073_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74073_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74073_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74073_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74073_total_iter /
                (ctx->futhark_mc_segmap_parloop_74073_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74073_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74073_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74073_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_74099    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_74099_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74099_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74099_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_74099_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74099_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_74099_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74099_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_74099_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74099_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74099_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74099_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_74099_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_74099_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_74099_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_74099_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_74099_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_74099_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_74099_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_74099_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_74099_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_74099_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_74099_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_74099_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_74099_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_74099_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_74099_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_74099_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_74101    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_74101_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74101_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74101_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_74101_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74101_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_74101_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74101_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_74101_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74101_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74101_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74101_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_74101_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_74101_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_74101_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_74101_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_74101_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_74101_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_74101_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_74101_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_74101_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_74101_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_74101_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_74101_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_74101_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_74101_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_74101_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_74101_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_74096            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_74096_runs[i],
                    (long) ctx->futhark_mc_segscan_task_74096_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_74096_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_74096_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_74096_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_74096_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_74096_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_74096_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_74096_iter[i],
                    (long) ctx->futhark_mc_segscan_task_74096_iter[i] /
                    (ctx->futhark_mc_segscan_task_74096_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_74096_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74105          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74105_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74105_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74105_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74105_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74105_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74105_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74105_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74105_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74105_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74105_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74105_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74105_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74105_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74105_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74105_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74105_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74105_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74105_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74105_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74105_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74105_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74105_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74105_total_iter /
                (ctx->futhark_mc_segmap_parloop_74105_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74105_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74105_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74105_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74103             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74103_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74103_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74103_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74103_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74103_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74103_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74103_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74103_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74103_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74103_iter[i] /
                    (ctx->futhark_mc_segmap_task_74103_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74103_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74109          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74109_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74109_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74109_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74109_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74109_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74109_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74109_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74109_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74109_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74109_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74109_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74109_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74109_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74109_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74109_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74109_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74109_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74109_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74109_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74109_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74109_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74109_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74109_total_iter /
                (ctx->futhark_mc_segmap_parloop_74109_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74109_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74109_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74109_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74107             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74107_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74107_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74107_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74107_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74107_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74107_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74107_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74107_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74107_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74107_iter[i] /
                    (ctx->futhark_mc_segmap_task_74107_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74107_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74113          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74113_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74113_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74113_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74113_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74113_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74113_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74113_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74113_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74113_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74113_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74113_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74113_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74113_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74113_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74113_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74113_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74113_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74113_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74113_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74113_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74113_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74113_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74113_total_iter /
                (ctx->futhark_mc_segmap_parloop_74113_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74113_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74113_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74113_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74111             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74111_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74111_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74111_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74111_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74111_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74111_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74111_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74111_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74111_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74111_iter[i] /
                    (ctx->futhark_mc_segmap_task_74111_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74111_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74117          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74117_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74117_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74117_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74117_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74117_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74117_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74117_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74117_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74117_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74117_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74117_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74117_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74117_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74117_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74117_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74117_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74117_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74117_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74117_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74117_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74117_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74117_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74117_total_iter /
                (ctx->futhark_mc_segmap_parloop_74117_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74117_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74117_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74117_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74131  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74131_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74131_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74131_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74131_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74131_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74131_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74131_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74131_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74131_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74131_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74131_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74131_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74131_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74131_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74131_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74131_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74131_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74131_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74131_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74131_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74131_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74131_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74131_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74131_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74131_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74131_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74131_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74126             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74126_runs[i],
                    (long) ctx->futhark_mc_segred_task_74126_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74126_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74126_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74126_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74126_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74126_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74126_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74126_iter[i],
                    (long) ctx->futhark_mc_segred_task_74126_iter[i] /
                    (ctx->futhark_mc_segred_task_74126_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74126_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74137  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74137_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74137_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74137_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74137_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74137_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74137_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74137_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74137_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74137_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74137_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74137_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74137_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74137_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74137_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74137_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74137_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74137_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74137_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74137_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74137_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74137_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74137_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74137_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74137_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74137_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74137_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74137_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74133             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74133_runs[i],
                    (long) ctx->futhark_mc_segred_task_74133_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74133_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74133_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74133_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74133_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74133_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74133_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74133_iter[i],
                    (long) ctx->futhark_mc_segred_task_74133_iter[i] /
                    (ctx->futhark_mc_segred_task_74133_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74133_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74122          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74122_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74122_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74122_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74122_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74122_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74122_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74122_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74122_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74122_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74122_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74122_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74122_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74122_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74122_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74122_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74122_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74122_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74122_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74122_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74122_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74122_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74122_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74122_total_iter /
                (ctx->futhark_mc_segmap_parloop_74122_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74122_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74122_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74122_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74115             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74115_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74115_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74115_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74115_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74115_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74115_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74115_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74115_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74115_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74115_iter[i] /
                    (ctx->futhark_mc_segmap_task_74115_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74115_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74120      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74120_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74120_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74120_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74120_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74120_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74120_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74120_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74120_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74120_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74120_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74120_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74120_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74086          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74086_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74086_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74086_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74086_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74086_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74086_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74086_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74086_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74086_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74086_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74086_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74086_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74086_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74086_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74086_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74086_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74086_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74086_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74086_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74086_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74086_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74086_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74086_total_iter /
                (ctx->futhark_mc_segmap_parloop_74086_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74086_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74086_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74086_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74071             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74071_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74071_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74071_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74071_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74071_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74071_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74071_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74071_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74071_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74071_iter[i] /
                    (ctx->futhark_mc_segmap_task_74071_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74071_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74084      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74084_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74084_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74084_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74084_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74084_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74084_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74084_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74084_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74084_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74084_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74084_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74084_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74141          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74141_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74141_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74141_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74141_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74141_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74141_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74141_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74141_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74141_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74141_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74141_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74141_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74141_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74141_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74141_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74141_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74141_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74141_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74141_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74141_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74141_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74141_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74141_total_iter /
                (ctx->futhark_mc_segmap_parloop_74141_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74141_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74141_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74141_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_74169    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_74169_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74169_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74169_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_74169_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74169_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_74169_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74169_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_74169_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74169_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_74169_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_74169_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_74169_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_74169_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_74169_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_74169_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_74169_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_74169_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_74169_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_74169_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_74169_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_74169_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_74169_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_74169_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_74169_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_74169_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_74169_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_74169_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_74171    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_74171_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74171_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74171_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_74171_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74171_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_74171_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74171_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_74171_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74171_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_74171_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_74171_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_74171_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_74171_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_74171_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_74171_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_74171_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_74171_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_74171_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_74171_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_74171_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_74171_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_74171_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_74171_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_74171_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_74171_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_74171_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_74171_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_74166            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_74166_runs[i],
                    (long) ctx->futhark_mc_segscan_task_74166_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_74166_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_74166_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_74166_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_74166_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_74166_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_74166_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_74166_iter[i],
                    (long) ctx->futhark_mc_segscan_task_74166_iter[i] /
                    (ctx->futhark_mc_segscan_task_74166_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_74166_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74175          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74175_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74175_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74175_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74175_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74175_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74175_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74175_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74175_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74175_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74175_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74175_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74175_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74175_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74175_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74175_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74175_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74175_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74175_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74175_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74175_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74175_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74175_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74175_total_iter /
                (ctx->futhark_mc_segmap_parloop_74175_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74175_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74175_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74175_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74173             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74173_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74173_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74173_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74173_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74173_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74173_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74173_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74173_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74173_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74173_iter[i] /
                    (ctx->futhark_mc_segmap_task_74173_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74173_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74179          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74179_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74179_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74179_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74179_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74179_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74179_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74179_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74179_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74179_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74179_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74179_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74179_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74179_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74179_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74179_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74179_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74179_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74179_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74179_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74179_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74179_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74179_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74179_total_iter /
                (ctx->futhark_mc_segmap_parloop_74179_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74179_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74179_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74179_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74177             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74177_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74177_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74177_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74177_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74177_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74177_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74177_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74177_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74177_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74177_iter[i] /
                    (ctx->futhark_mc_segmap_task_74177_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74177_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74183          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74183_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74183_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74183_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74183_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74183_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74183_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74183_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74183_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74183_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74183_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74183_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74183_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74183_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74183_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74183_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74183_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74183_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74183_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74183_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74183_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74183_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74183_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74183_total_iter /
                (ctx->futhark_mc_segmap_parloop_74183_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74183_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74183_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74183_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74181             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74181_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74181_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74181_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74181_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74181_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74181_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74181_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74181_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74181_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74181_iter[i] /
                    (ctx->futhark_mc_segmap_task_74181_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74181_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74187          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74187_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74187_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74187_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74187_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74187_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74187_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74187_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74187_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74187_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74187_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74187_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74187_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74187_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74187_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74187_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74187_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74187_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74187_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74187_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74187_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74187_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74187_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74187_total_iter /
                (ctx->futhark_mc_segmap_parloop_74187_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74187_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74187_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74187_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74202          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74202_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74202_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74202_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74202_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74202_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74202_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74202_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74202_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74202_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74202_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74202_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74202_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74202_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74202_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74202_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74202_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74202_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74202_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74202_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74202_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74202_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74202_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74202_total_iter /
                (ctx->futhark_mc_segmap_parloop_74202_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74202_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74202_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74202_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74200             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74200_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74200_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74200_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74200_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74200_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74200_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74200_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74200_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74200_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74200_iter[i] /
                    (ctx->futhark_mc_segmap_task_74200_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74200_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74211  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74211_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74211_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74211_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74211_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74211_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74211_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74211_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74211_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74211_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74211_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74211_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74211_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74211_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74211_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74211_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74211_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74211_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74211_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74211_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74211_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74211_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74211_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74211_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74211_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74211_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74211_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74211_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74204             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74204_runs[i],
                    (long) ctx->futhark_mc_segred_task_74204_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74204_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74204_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74204_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74204_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74204_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74204_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74204_iter[i],
                    (long) ctx->futhark_mc_segred_task_74204_iter[i] /
                    (ctx->futhark_mc_segred_task_74204_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74204_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_74217  ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_74217_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74217_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74217_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74217_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74217_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_74217_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74217_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74217_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74217_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_74217_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_74217_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_74217_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_74217_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_74217_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74217_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74217_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74217_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74217_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_74217_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_74217_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_74217_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_74217_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_74217_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_74217_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_74217_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_74217_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_74217_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_74213             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_74213_runs[i],
                    (long) ctx->futhark_mc_segred_task_74213_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74213_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74213_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_74213_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_74213_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_74213_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_74213_iter[i]),
                    (long) ctx->futhark_mc_segred_task_74213_iter[i],
                    (long) ctx->futhark_mc_segred_task_74213_iter[i] /
                    (ctx->futhark_mc_segred_task_74213_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_74213_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74194          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74194_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74194_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74194_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74194_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74194_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74194_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74194_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74194_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74194_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74194_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74194_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74194_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74194_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74194_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74194_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74194_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74194_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74194_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74194_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74194_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74194_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74194_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74194_total_iter /
                (ctx->futhark_mc_segmap_parloop_74194_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74194_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74194_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74194_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74185             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74185_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74185_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74185_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74185_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74185_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74185_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74185_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74185_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74185_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74185_iter[i] /
                    (ctx->futhark_mc_segmap_task_74185_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74185_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74192      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74192_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74192_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74192_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74192_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74192_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74192_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74192_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74192_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74192_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74192_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74192_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74192_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74156          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74156_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74156_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74156_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74156_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74156_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74156_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74156_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74156_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74156_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74156_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74156_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74156_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74156_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74156_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74156_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74156_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74156_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74156_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74156_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74156_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74156_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74156_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74156_total_iter /
                (ctx->futhark_mc_segmap_parloop_74156_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74156_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74156_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74156_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74139             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74139_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74139_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74139_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74139_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74139_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74139_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74139_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74139_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74139_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74139_iter[i] /
                    (ctx->futhark_mc_segmap_task_74139_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74139_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74154      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74154_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74154_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74154_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74154_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74154_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74154_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74154_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74154_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74154_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74154_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74154_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74154_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74221          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74221_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74221_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74221_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74221_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74221_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74221_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74221_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74221_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74221_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74221_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74221_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74221_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74221_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74221_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74221_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74221_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74221_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74221_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74221_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74221_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74221_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74221_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74221_total_iter /
                (ctx->futhark_mc_segmap_parloop_74221_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74221_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74221_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74221_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74230          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74230_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74230_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74230_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74230_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74230_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74230_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74230_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74230_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74230_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74230_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74230_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74230_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74230_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74230_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74230_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74230_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74230_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74230_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74230_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74230_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74230_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74230_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74230_total_iter /
                (ctx->futhark_mc_segmap_parloop_74230_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74230_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74230_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74230_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74228             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74228_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74228_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74228_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74228_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74228_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74228_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74228_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74228_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74228_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74228_iter[i] /
                    (ctx->futhark_mc_segmap_task_74228_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74228_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_74225          ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_74225_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_74225_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74225_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74225_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_74225_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_74225_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_74225_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74225_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_74225_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_74225_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_74225_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_74225_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_74225_total    ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_74225_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_74225_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74225_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74225_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_74225_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_74225_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_74225_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_74225_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_74225_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_74225_total_iter /
                (ctx->futhark_mc_segmap_parloop_74225_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_74225_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_74225_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_74225_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_74219             ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_74219_runs[i],
                    (long) ctx->futhark_mc_segmap_task_74219_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74219_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74219_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_74219_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_74219_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_74219_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_74219_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_74219_iter[i],
                    (long) ctx->futhark_mc_segmap_task_74219_iter[i] /
                    (ctx->futhark_mc_segmap_task_74219_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_74219_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_74223      ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_74223_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74223_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74223_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74223_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_74223_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_74223_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_74223_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_74223_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_74223_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_74223_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_74223_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_74223_runs[i] : 1));
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_73826,
                             struct memblock Y_mem_67388, int64_t m_62255,
                             int64_t n_62256, int64_t q_62258,
                             int64_t degree_62259, int64_t jump_62260,
                             int64_t jump_threshold_62261,
                             int64_t q_threshold_62262);
static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_mc_task_73827 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67393;
    int64_t free_bytes_67396;
    int64_t free_bytes_67408;
    int64_t free_bytes_67411;
    char *free_mem_67522;
};
struct futhark_mc_segmap_parloop_struct_73829 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67393;
    int64_t free_bytes_67396;
    int64_t free_bytes_67408;
    int64_t free_bytes_67411;
    char *free_mem_67522;
};
static int futhark_mc_segmap_parloop_73830(void *args, int64_t start,
                                           int64_t end, int flat_tid_63642,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73829
    *futhark_mc_segmap_parloop_struct_73829 =
    (struct futhark_mc_segmap_parloop_struct_73829 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73829->ctx;
    uint64_t futhark_mc_segmap_parloop_73830_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73830_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_segmap_parloop_struct_73829->free_m_62255;
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73829->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73829->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_73829->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_73829->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_73829->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_73829->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_73829->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_73829->free_loop_cond_62281;
    float i64_res_62282 =
          futhark_mc_segmap_parloop_struct_73829->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_73829->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67393 =
            futhark_mc_segmap_parloop_struct_73829->free_bytes_67393;
    int64_t bytes_67396 =
            futhark_mc_segmap_parloop_struct_73829->free_bytes_67396;
    int64_t bytes_67408 =
            futhark_mc_segmap_parloop_struct_73829->free_bytes_67408;
    int64_t bytes_67411 =
            futhark_mc_segmap_parloop_struct_73829->free_bytes_67411;
    struct memblock mem_67522 = {.desc ="mem_67522", .mem =
                                 futhark_mc_segmap_parloop_struct_73829->free_mem_67522,
                                 .size =0, .references =NULL};
    size_t mem_67416_cached_sizze_73831 = 0;
    char *mem_67416 = NULL;
    size_t mem_67431_cached_sizze_73832 = 0;
    char *mem_67431 = NULL;
    size_t mem_67434_cached_sizze_73833 = 0;
    char *mem_67434 = NULL;
    size_t mem_67461_cached_sizze_73834 = 0;
    char *mem_67461 = NULL;
    size_t mem_67464_cached_sizze_73835 = 0;
    char *mem_67464 = NULL;
    size_t mem_67491_cached_sizze_73836 = 0;
    char *mem_67491 = NULL;
    size_t mem_67506_cached_sizze_73837 = 0;
    char *mem_67506 = NULL;
    int64_t iterations = end - start;
    int64_t iter_68549 = start;
    
    if (mem_67416_cached_sizze_73831 < (size_t) bytes_67393) {
        mem_67416 = realloc(mem_67416, bytes_67393);
        mem_67416_cached_sizze_73831 = bytes_67393;
    }
    if (mem_67431_cached_sizze_73832 < (size_t) bytes_67396) {
        mem_67431 = realloc(mem_67431, bytes_67396);
        mem_67431_cached_sizze_73832 = bytes_67396;
    }
    if (mem_67434_cached_sizze_73833 < (size_t) bytes_67393) {
        mem_67434 = realloc(mem_67434, bytes_67393);
        mem_67434_cached_sizze_73833 = bytes_67393;
    }
    if (mem_67461_cached_sizze_73834 < (size_t) bytes_67396) {
        mem_67461 = realloc(mem_67461, bytes_67396);
        mem_67461_cached_sizze_73834 = bytes_67396;
    }
    if (mem_67464_cached_sizze_73835 < (size_t) bytes_67393) {
        mem_67464 = realloc(mem_67464, bytes_67393);
        mem_67464_cached_sizze_73835 = bytes_67393;
    }
    if (mem_67491_cached_sizze_73836 < (size_t) bytes_67408) {
        mem_67491 = realloc(mem_67491, bytes_67408);
        mem_67491_cached_sizze_73836 = bytes_67408;
    }
    if (mem_67506_cached_sizze_73837 < (size_t) bytes_67411) {
        mem_67506 = realloc(mem_67506, bytes_67411);
        mem_67506_cached_sizze_73837 = bytes_67411;
    }
    for (; iter_68549 < end; iter_68549++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_68718 = m_62255;
        int64_t gtid_63643 = iter_68549;
        int64_t remnant_68719 = iter_68549 - gtid_63643;
        int64_t discard_66985;
        int64_t scanacc_68551 = (int64_t) 0;
        
        for (int64_t i_68550 = 0; i_68550 < n_62256; i_68550++) {
            float x_68553 = ((float *) Y_mem_67388.mem)[gtid_63643 * n_62256 +
                                                        i_68550];
            bool isnan_res_68554;
            
            isnan_res_68554 = futrts_isnan32(x_68553);
            
            bool defunc_0_p_res_68555 = !isnan_res_68554;
            int64_t defunc_0_f_res_68556 = btoi_bool_i64(defunc_0_p_res_68555);
            int64_t defunc_1_op_res_68557 = add64(defunc_0_f_res_68556,
                                                  scanacc_68551);
            
            ((int64_t *) mem_67416)[i_68550] = defunc_1_op_res_68557;
            
            int64_t scanacc_tmp_68720 = defunc_1_op_res_68557;
            
            scanacc_68551 = scanacc_tmp_68720;
        }
        discard_66985 = scanacc_68551;
        
        int64_t last_res_62305 = ((int64_t *) mem_67416)[i_62270];
        
        for (int64_t i_68722 = 0; i_68722 < n_62256; i_68722++) {
            ((float *) mem_67431)[i_68722] = 0.0F;
        }
        for (int64_t i_68723 = 0; i_68723 < n_62256; i_68723++) {
            ((int64_t *) mem_67434)[i_68723] = (int64_t) -1;
        }
        for (int64_t write_iter_68559 = 0; write_iter_68559 < n_62256;
             write_iter_68559++) {
            float write_iv_68562 = ((float *) Y_mem_67388.mem)[gtid_63643 *
                                                               n_62256 +
                                                               write_iter_68559];
            bool isnan_res_68563;
            
            isnan_res_68563 = futrts_isnan32(write_iv_68562);
            
            bool defunc_0_p_res_68564 = !isnan_res_68563;
            int64_t defunc_1_f_res_68565;
            
            if (defunc_0_p_res_68564) {
                int64_t write_iv_68566 =
                        ((int64_t *) mem_67416)[write_iter_68559];
                int64_t defunc_1_f_res_t_res_68567 = sub64(write_iv_68566,
                                                           (int64_t) 1);
                
                defunc_1_f_res_68565 = defunc_1_f_res_t_res_68567;
            } else {
                defunc_1_f_res_68565 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_68565) &&
                slt64(defunc_1_f_res_68565, n_62256)) {
                ((int64_t *) mem_67434)[defunc_1_f_res_68565] =
                    write_iter_68559;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_68565) &&
                slt64(defunc_1_f_res_68565, n_62256)) {
                memmove(mem_67431 + defunc_1_f_res_68565 * (int64_t) 4,
                        Y_mem_67388.mem + (gtid_63643 * n_62256 +
                                           write_iter_68559) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_62320 = sub64(last_res_62305, (int64_t) 1);
        int64_t min_arg_62321 = sub64(last_res_62305, min_res_62276);
        int64_t min_res_62322 = smin64(q_62258, last_res_62305);
        float i64_res_62323 = sitofp_i64_f32(last_res_62305);
        float x_62324 = i64_res_62282 - i64_res_62323;
        float max_arg_62325 = x_62324 / 2.0F;
        float max_res_62326 = fmax32(0.0F, max_arg_62325);
        
        for (int64_t i_68571 = 0; i_68571 < n_62256; i_68571++) {
            int64_t x_68574 = ((int64_t *) mem_67434)[i_68571];
            int64_t defunc_0_f_res_68575 = add64((int64_t) 1, x_68574);
            float defunc_0_f_res_68576 = sitofp_i64_f32(x_68574);
            
            ((float *) mem_67461)[i_68571] = defunc_0_f_res_68576;
            ((int64_t *) mem_67464)[i_68571] = defunc_0_f_res_68575;
        }
        for (int64_t i_68579 = 0; i_68579 < q_62258; i_68579++) {
            bool cond_68581 = sle64(last_res_62305, i_68579);
            float defunc_0_f_res_68582;
            
            if (cond_68581) {
                defunc_0_f_res_68582 = 0.0F;
            } else {
                defunc_0_f_res_68582 = 1.0F;
            }
            ((float *) mem_67491)[i_68579] = defunc_0_f_res_68582;
        }
        for (int64_t i_68584 = 0; i_68584 < n_m_62264; i_68584++) {
            int64_t min_arg_68586 = mul64(jump_62260, i_68584);
            int64_t min_res_68587 = smin64(i_62270, min_arg_68586);
            int64_t defunc_0_g_res_68588 = add64((int64_t) 1, min_res_68587);
            bool init_idx_68589;
            int64_t init_idx_68590;
            int64_t init_idx_68591;
            bool loop_while_68592;
            int64_t low_68593;
            int64_t high_68594;
            
            loop_while_68592 = x_62271;
            low_68593 = (int64_t) 0;
            high_68594 = i_62270;
            while (loop_while_68592) {
                int64_t x_68595 = add64(low_68593, high_68594);
                int64_t mid_68596 = sdiv64(x_68595, (int64_t) 2);
                bool x_68597 = sle64((int64_t) 0, mid_68596);
                bool y_68598 = slt64(mid_68596, n_62256);
                bool bounds_check_68599 = x_68597 && y_68598;
                bool index_certs_68600;
                
                if (!bounds_check_68599) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_68596,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t mid_id_68601 = ((int64_t *) mem_67464)[mid_68596];
                bool cond_68602 = slt64(mid_id_68601, (int64_t) 0);
                int64_t mid_idx_68603;
                
                if (cond_68602) {
                    mid_idx_68603 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_68603 = mid_id_68601;
                }
                
                bool cond_68604 = sle64(defunc_0_g_res_68588, mid_idx_68603);
                int64_t loopres_68605;
                int64_t loopres_68606;
                
                if (cond_68604) {
                    int64_t loopres_t_res_68607 = sub64(mid_68596, (int64_t) 1);
                    
                    loopres_68605 = low_68593;
                    loopres_68606 = loopres_t_res_68607;
                } else {
                    int64_t loopres_f_res_68608 = add64((int64_t) 1, mid_68596);
                    
                    loopres_68605 = loopres_f_res_68608;
                    loopres_68606 = high_68594;
                }
                
                bool loop_cond_68609 = sle64(loopres_68605, loopres_68606);
                bool loop_while_tmp_68730 = loop_cond_68609;
                int64_t low_tmp_68731 = loopres_68605;
                int64_t high_tmp_68732 = loopres_68606;
                
                loop_while_68592 = loop_while_tmp_68730;
                low_68593 = low_tmp_68731;
                high_68594 = high_tmp_68732;
            }
            init_idx_68589 = loop_while_68592;
            init_idx_68590 = low_68593;
            init_idx_68591 = high_68594;
            
            bool idx_68610;
            int64_t idx_68611;
            int64_t idx_68612;
            int64_t idx_68613;
            bool loop_while_68614;
            int64_t l_idx_68615;
            int64_t r_idx_68616;
            int64_t span_68617;
            
            loop_while_68614 = loop_cond_62281;
            l_idx_68615 = init_idx_68590;
            r_idx_68616 = init_idx_68590;
            span_68617 = (int64_t) 1;
            while (loop_while_68614) {
                int64_t max_arg_68618 = sub64(l_idx_68615, (int64_t) 1);
                int64_t max_res_68619 = smax64((int64_t) 0, max_arg_68618);
                int64_t min_arg_68620 = add64((int64_t) 1, r_idx_68616);
                int64_t min_res_68621 = smin64(min_arg_62320, min_arg_68620);
                bool x_68622 = sle64((int64_t) 0, max_res_68619);
                bool y_68623 = slt64(max_res_68619, n_62256);
                bool bounds_check_68624 = x_68622 && y_68623;
                bool index_certs_68625;
                
                if (!bounds_check_68624) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_68619,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t x_68626 = ((int64_t *) mem_67464)[max_res_68619];
                int64_t abs_arg_68627 = sub64(x_68626, defunc_0_g_res_68588);
                int64_t abs_res_68628 = abs64(abs_arg_68627);
                bool x_68629 = sle64((int64_t) 0, min_res_68621);
                bool y_68630 = slt64(min_res_68621, n_62256);
                bool bounds_check_68631 = x_68629 && y_68630;
                bool index_certs_68632;
                
                if (!bounds_check_68631) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_68621,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t x_68633 = ((int64_t *) mem_67464)[min_res_68621];
                int64_t abs_arg_68634 = sub64(x_68633, defunc_0_g_res_68588);
                int64_t abs_res_68635 = abs64(abs_arg_68634);
                bool cond_68636 = max_res_68619 == l_idx_68615;
                int64_t loopres_68637;
                int64_t loopres_68638;
                int64_t loopres_68639;
                
                if (cond_68636) {
                    loopres_68637 = l_idx_68615;
                    loopres_68638 = r_idx_68616;
                    loopres_68639 = min_res_62276;
                } else {
                    bool cond_68640 = slt64(abs_res_68628, abs_res_68635);
                    bool cond_f_res_68641 = min_res_68621 == r_idx_68616;
                    bool x_68642 = !cond_68640;
                    bool y_68643 = cond_f_res_68641 && x_68642;
                    bool cond_68644 = cond_68640 || y_68643;
                    int64_t loopres_f_res_68645;
                    
                    if (cond_68644) {
                        loopres_f_res_68645 = max_res_68619;
                    } else {
                        loopres_f_res_68645 = l_idx_68615;
                    }
                    
                    int64_t loopres_f_res_68646;
                    
                    if (cond_68644) {
                        loopres_f_res_68646 = r_idx_68616;
                    } else {
                        loopres_f_res_68646 = min_res_68621;
                    }
                    
                    int64_t loopres_f_res_68647;
                    
                    if (cond_68644) {
                        int64_t loopres_f_res_t_res_68648 = add64((int64_t) 1,
                                                                  span_68617);
                        
                        loopres_f_res_68647 = loopres_f_res_t_res_68648;
                    } else {
                        int64_t loopres_f_res_f_res_68649 = add64((int64_t) 1,
                                                                  span_68617);
                        
                        loopres_f_res_68647 = loopres_f_res_f_res_68649;
                    }
                    loopres_68637 = loopres_f_res_68645;
                    loopres_68638 = loopres_f_res_68646;
                    loopres_68639 = loopres_f_res_68647;
                }
                
                bool loop_cond_68650 = slt64(loopres_68639, min_res_62276);
                bool loop_while_tmp_68733 = loop_cond_68650;
                int64_t l_idx_tmp_68734 = loopres_68637;
                int64_t r_idx_tmp_68735 = loopres_68638;
                int64_t span_tmp_68736 = loopres_68639;
                
                loop_while_68614 = loop_while_tmp_68733;
                l_idx_68615 = l_idx_tmp_68734;
                r_idx_68616 = r_idx_tmp_68735;
                span_68617 = span_tmp_68736;
            }
            idx_68610 = loop_while_68614;
            idx_68611 = l_idx_68615;
            idx_68612 = r_idx_68616;
            idx_68613 = span_68617;
            
            int64_t min_res_68651 = smin64(min_arg_62321, idx_68611);
            int64_t max_res_68652 = smax64((int64_t) 0, min_res_68651);
            int64_t x_68653 = add64(min_res_62322, max_res_68652);
            int64_t r_68654 = sub64(x_68653, (int64_t) 1);
            bool x_68655 = sle64((int64_t) 0, r_68654);
            bool y_68656 = slt64(r_68654, n_62256);
            bool bounds_check_68657 = x_68655 && y_68656;
            bool index_certs_68658;
            
            if (!bounds_check_68657) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_68654,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_68659 = ((int64_t *) mem_67434)[r_68654];
            int64_t abs_arg_68660 = sub64(x_68659, min_res_68587);
            int64_t abs_res_68661 = abs64(abs_arg_68660);
            bool x_68662 = sle64((int64_t) 0, max_res_68652);
            bool y_68663 = slt64(max_res_68652, n_62256);
            bool bounds_check_68664 = x_68662 && y_68663;
            bool index_certs_68665;
            
            if (!bounds_check_68664) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_68652,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_68666 = ((int64_t *) mem_67434)[max_res_68652];
            int64_t abs_arg_68667 = sub64(x_68666, min_res_68587);
            int64_t abs_res_68668 = abs64(abs_arg_68667);
            int64_t max_res_68669 = smax64(abs_res_68661, abs_res_68668);
            float defunc_0_f_res_68670 = sitofp_i64_f32(max_res_68669);
            float defunc_1_f_res_68671 = max_res_62326 + defunc_0_f_res_68670;
            float defunc_0_f_res_68672 = sitofp_i64_f32(min_res_68587);
            float defunc_2_reduce_res_68673;
            float redout_68675 = 0.0F;
            
            for (int64_t i_68674 = 0; i_68674 < q_62258; i_68674++) {
                float x_68676 = ((float *) mem_67491)[i_68674];
                bool cond_68677 = sle64(last_res_62305, i_68674);
                float defunc_0_f_res_68678;
                
                if (cond_68677) {
                    defunc_0_f_res_68678 = 0.0F;
                } else {
                    int64_t i_68679 = add64(max_res_68652, i_68674);
                    float x_68680 = ((float *) mem_67461)[i_68679];
                    float defunc_0_f_res_f_res_68681 = 1.0F + x_68680;
                    
                    defunc_0_f_res_68678 = defunc_0_f_res_f_res_68681;
                }
                
                float x_j_68682 = defunc_0_f_res_68678 - defunc_0_f_res_68672;
                float abs_res_68683 = (float) fabs(x_j_68682);
                float tmp1_68684 = abs_res_68683 / defunc_1_f_res_68671;
                float x_68685 = tmp1_68684 * tmp1_68684;
                float y_68686 = tmp1_68684 * x_68685;
                float tmp2_68687 = 1.0F - y_68686;
                float x_68688 = tmp2_68687 * tmp2_68687;
                float tmp3_68689 = tmp2_68687 * x_68688;
                float w_j_68690 = x_68676 * tmp3_68689;
                float defunc_1_op_res_68691 = w_j_68690 + redout_68675;
                float redout_tmp_68737 = defunc_1_op_res_68691;
                
                redout_68675 = redout_tmp_68737;
            }
            defunc_2_reduce_res_68673 = redout_68675;
            
            float a0_68692 = 1.0F / defunc_2_reduce_res_68673;
            float defunc_2_reduce_res_68693;
            float redout_68695 = 0.0F;
            
            for (int64_t i_68694 = 0; i_68694 < q_62258; i_68694++) {
                float x_68696 = ((float *) mem_67491)[i_68694];
                bool cond_68697 = sle64(last_res_62305, i_68694);
                float defunc_0_f_res_68698;
                
                if (cond_68697) {
                    defunc_0_f_res_68698 = 0.0F;
                } else {
                    int64_t i_68699 = add64(max_res_68652, i_68694);
                    float x_68700 = ((float *) mem_67461)[i_68699];
                    float defunc_0_f_res_f_res_68701 = 1.0F + x_68700;
                    
                    defunc_0_f_res_68698 = defunc_0_f_res_f_res_68701;
                }
                
                float x_j_68702 = defunc_0_f_res_68698 - defunc_0_f_res_68672;
                float abs_res_68703 = (float) fabs(x_j_68702);
                float tmp1_68704 = abs_res_68703 / defunc_1_f_res_68671;
                float x_68705 = tmp1_68704 * tmp1_68704;
                float y_68706 = tmp1_68704 * x_68705;
                float tmp2_68707 = 1.0F - y_68706;
                float x_68708 = tmp2_68707 * tmp2_68707;
                float tmp3_68709 = tmp2_68707 * x_68708;
                float tmp4_68710 = x_68696 * tmp3_68709;
                float defunc_0_f_res_68711;
                
                if (cond_68697) {
                    defunc_0_f_res_68711 = 0.0F;
                } else {
                    int64_t i_68712 = add64(max_res_68652, i_68694);
                    float x_68713 = ((float *) mem_67431)[i_68712];
                    
                    defunc_0_f_res_68711 = x_68713;
                }
                
                float x_68714 = a0_68692 * tmp4_68710;
                float defunc_9_fit_fun_res_68715 = defunc_0_f_res_68711 *
                      x_68714;
                float defunc_1_op_res_68716 = defunc_9_fit_fun_res_68715 +
                      redout_68695;
                float redout_tmp_68738 = defunc_1_op_res_68716;
                
                redout_68695 = redout_tmp_68738;
            }
            defunc_2_reduce_res_68693 = redout_68695;
            ((float *) mem_67506)[i_68584] = defunc_2_reduce_res_68693;
        }
        memmove(mem_67522.mem + gtid_63643 * n_m_62264 * (int64_t) 4,
                mem_67506 + (int64_t) 0, n_m_62264 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67416);
    free(mem_67431);
    free(mem_67434);
    free(mem_67461);
    free(mem_67464);
    free(mem_67491);
    free(mem_67506);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73830_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73830_end -
                 futhark_mc_segmap_parloop_73830_start;
        
        ctx->futhark_mc_segmap_parloop_73830_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73830_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73830_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73828(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63642 = tid;
    int num_tasks_68548 = info.nsubtasks;
    struct futhark_mc_task_73827 *futhark_mc_task_73827 =
                                 (struct futhark_mc_task_73827 *) args;
    struct futhark_context *ctx = futhark_mc_task_73827->ctx;
    uint64_t futhark_mc_segmap_task_73828_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73828_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_task_73827->free_m_62255;
    int64_t n_62256 = futhark_mc_task_73827->free_n_62256;
    int64_t q_62258 = futhark_mc_task_73827->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_73827->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_73827->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_73827->free_i_62270;
    bool x_62271 = futhark_mc_task_73827->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_73827->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_73827->free_loop_cond_62281;
    float i64_res_62282 = futhark_mc_task_73827->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_73827->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67393 = futhark_mc_task_73827->free_bytes_67393;
    int64_t bytes_67396 = futhark_mc_task_73827->free_bytes_67396;
    int64_t bytes_67408 = futhark_mc_task_73827->free_bytes_67408;
    int64_t bytes_67411 = futhark_mc_task_73827->free_bytes_67411;
    struct memblock mem_67522 = {.desc ="mem_67522", .mem =
                                 futhark_mc_task_73827->free_mem_67522, .size =
                                 0, .references =NULL};
    int64_t iter_68549;
    struct futhark_mc_segmap_parloop_struct_73829
    futhark_mc_segmap_parloop_struct_73829;
    
    futhark_mc_segmap_parloop_struct_73829.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73829.free_m_62255 = m_62255;
    futhark_mc_segmap_parloop_struct_73829.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73829.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73829.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_73829.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_73829.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_73829.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_73829.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_73829.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_73829.free_i64_res_62282 = i64_res_62282;
    futhark_mc_segmap_parloop_struct_73829.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_73829.free_bytes_67393 = bytes_67393;
    futhark_mc_segmap_parloop_struct_73829.free_bytes_67396 = bytes_67396;
    futhark_mc_segmap_parloop_struct_73829.free_bytes_67408 = bytes_67408;
    futhark_mc_segmap_parloop_struct_73829.free_bytes_67411 = bytes_67411;
    futhark_mc_segmap_parloop_struct_73829.free_mem_67522 = mem_67522.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73830_task;
    
    futhark_mc_segmap_parloop_73830_task.name =
        "futhark_mc_segmap_parloop_73830";
    futhark_mc_segmap_parloop_73830_task.fn = futhark_mc_segmap_parloop_73830;
    futhark_mc_segmap_parloop_73830_task.args =
        &futhark_mc_segmap_parloop_struct_73829;
    futhark_mc_segmap_parloop_73830_task.iterations = iterations;
    futhark_mc_segmap_parloop_73830_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73830_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73830_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73830_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73830_task);
    
    if (futhark_mc_segmap_parloop_73830_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73830_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73830_total_end -
                 futhark_mc_segmap_parloop_73830_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73830_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73830_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73830_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73828_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73828_end -
                 futhark_mc_segmap_task_73828_start;
        
        ctx->futhark_mc_segmap_task_73828_runs[tid]++;
        ctx->futhark_mc_segmap_task_73828_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73828_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_73839 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67393;
    int64_t free_bytes_67396;
    int64_t free_bytes_67408;
    int64_t free_bytes_67411;
    char *free_mem_67522;
};
struct futhark_mc_task_73848 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_63645;
    char *free_Y_mem_67388;
    char *free_mem_67395;
};
struct futhark_mc_scan_stage_1_parloop_struct_73851 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_63645;
    char *free_Y_mem_67388;
    char *free_mem_67395;
};
static int futhark_mc_scan_stage_1_parloop_73852(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_63646, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_73851
    *futhark_mc_scan_stage_1_parloop_struct_73851 =
    (struct futhark_mc_scan_stage_1_parloop_struct_73851 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_73851->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_73852_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_73852_start = get_wall_time();
    
    int64_t n_62256 =
            futhark_mc_scan_stage_1_parloop_struct_73851->free_n_62256;
    int64_t gtid_63645 =
            futhark_mc_scan_stage_1_parloop_struct_73851->free_gtid_63645;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_73851->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67395 = {.desc ="mem_67395", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_73851->free_mem_67395,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69023 = start;
    int64_t x_68740;
    int64_t x_68741;
    
    x_68740 = (int64_t) 0;
    for (; iter_69023 < end; iter_69023++) {
        int64_t gtid_63647 = iter_69023;
        
        // stage 1 scan body
        {
            float x_68743 = ((float *) Y_mem_67388.mem)[gtid_63645 * n_62256 +
                                                        gtid_63647];
            bool isnan_res_68744;
            
            isnan_res_68744 = futrts_isnan32(x_68743);
            
            bool defunc_0_p_res_68745 = !isnan_res_68744;
            int64_t defunc_0_f_res_68746 = btoi_bool_i64(defunc_0_p_res_68745);
            
            // write mapped values results to memory
            { }
            x_68740 = x_68740;
            // Read next values
            {
                x_68741 = defunc_0_f_res_68746;
            }
            
            int64_t defunc_1_op_res_68742 = add64(x_68740, x_68741);
            
            ((int64_t *) mem_67395.mem)[gtid_63647] = defunc_1_op_res_68742;
            x_68740 = defunc_1_op_res_68742;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_73852_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_73852_end -
                 futhark_mc_scan_stage_1_parloop_73852_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_73852_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_73852_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_73852_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_73853 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_63645;
    char *free_Y_mem_67388;
    char *free_mem_67395;
};
static int futhark_mc_scan_stage_3_parloop_73854(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_63646, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_73853
    *futhark_mc_scan_stage_3_parloop_struct_73853 =
    (struct futhark_mc_scan_stage_3_parloop_struct_73853 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_73853->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_73854_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_73854_start = get_wall_time();
    
    int64_t n_62256 =
            futhark_mc_scan_stage_3_parloop_struct_73853->free_n_62256;
    int64_t gtid_63645 =
            futhark_mc_scan_stage_3_parloop_struct_73853->free_gtid_63645;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_73853->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67395 = {.desc ="mem_67395", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_73853->free_mem_67395,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69035 = start;
    int64_t x_69032;
    int64_t x_69033;
    
    if (iter_69035 == (int64_t) 0) {
        x_69032 = (int64_t) 0;
    } else {
        x_69032 = ((int64_t *) mem_67395.mem)[iter_69035 - (int64_t) 1];
    }
    for (; iter_69035 < end; iter_69035++) {
        int64_t gtid_63647 = iter_69035;
        
        // stage 3 scan body
        {
            float x_68743 = ((float *) Y_mem_67388.mem)[gtid_63645 * n_62256 +
                                                        gtid_63647];
            bool isnan_res_68744;
            
            isnan_res_68744 = futrts_isnan32(x_68743);
            
            bool defunc_0_p_res_68745 = !isnan_res_68744;
            int64_t defunc_0_f_res_68746 = btoi_bool_i64(defunc_0_p_res_68745);
            
            x_69032 = x_69032;
            x_69033 = defunc_0_f_res_68746;
            
            int64_t defunc_1_op_res_69034 = add64(x_69032, x_69033);
            
            ((int64_t *) mem_67395.mem)[gtid_63647] = defunc_1_op_res_69034;
            x_69032 = defunc_1_op_res_69034;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_73854_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_73854_end -
                 futhark_mc_scan_stage_3_parloop_73854_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_73854_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_73854_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_73854_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_73849(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63646 = tid;
    int num_tasks_69022 = info.nsubtasks;
    struct futhark_mc_task_73848 *futhark_mc_task_73848 =
                                 (struct futhark_mc_task_73848 *) args;
    struct futhark_context *ctx = futhark_mc_task_73848->ctx;
    uint64_t futhark_mc_segscan_task_73849_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_73849_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73848->free_n_62256;
    int64_t gtid_63645 = futhark_mc_task_73848->free_gtid_63645;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_73848->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67395 = {.desc ="mem_67395", .mem =
                                 futhark_mc_task_73848->free_mem_67395, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_69029_cached_sizze_73850 = 0;
    char *scan_stage_2_accum_mem_69029 = NULL;
    int64_t iter_69023;
    struct futhark_mc_scan_stage_1_parloop_struct_73851
    futhark_mc_scan_stage_1_parloop_struct_73851;
    
    futhark_mc_scan_stage_1_parloop_struct_73851.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_73851.free_n_62256 = n_62256;
    futhark_mc_scan_stage_1_parloop_struct_73851.free_gtid_63645 = gtid_63645;
    futhark_mc_scan_stage_1_parloop_struct_73851.free_Y_mem_67388 =
        Y_mem_67388.mem;
    futhark_mc_scan_stage_1_parloop_struct_73851.free_mem_67395 = mem_67395.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_73852_task;
    
    futhark_mc_scan_stage_1_parloop_73852_task.name =
        "futhark_mc_scan_stage_1_parloop_73852";
    futhark_mc_scan_stage_1_parloop_73852_task.fn =
        futhark_mc_scan_stage_1_parloop_73852;
    futhark_mc_scan_stage_1_parloop_73852_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_73851;
    futhark_mc_scan_stage_1_parloop_73852_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_73852_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_73852_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_73852_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_73852_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_73852_task);
    
    if (futhark_mc_scan_stage_1_parloop_73852_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_73852_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_73852_total_end -
                 futhark_mc_scan_stage_1_parloop_73852_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73852_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73852_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73852_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_69022)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_69024;
        int64_t x_69025;
        int64_t offset_69027 = (int64_t) 0;
        int64_t offset_index_69028 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_69029_cached_sizze_73850 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_69029 = realloc(scan_stage_2_accum_mem_69029,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_69029_cached_sizze_73850 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_69029)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_69031 = 0; i_69031 < num_tasks_69022 - 1; i_69031++) {
            offset_69027 = squot64(n_62256, sext_i32_i64(num_tasks_69022));
            if (slt64(sext_i32_i64(i_69031), srem64(n_62256,
                                                    sext_i32_i64(num_tasks_69022)))) {
                offset_69027 += (int64_t) 1;
            }
            offset_index_69028 += offset_69027;
            
            int64_t gtid_63647 = offset_index_69028;
            float x_68743 = ((float *) Y_mem_67388.mem)[gtid_63645 * n_62256 +
                                                        gtid_63647];
            bool isnan_res_68744;
            
            isnan_res_68744 = futrts_isnan32(x_68743);
            
            bool defunc_0_p_res_68745 = !isnan_res_68744;
            int64_t defunc_0_f_res_68746 = btoi_bool_i64(defunc_0_p_res_68745);
            
            // Read carry in
            {
                x_69024 =
                    ((int64_t *) scan_stage_2_accum_mem_69029)[(int64_t) 0];
            }
            // Read next values
            {
                x_69025 = ((int64_t *) mem_67395.mem)[offset_index_69028 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_69026 = add64(x_69024, x_69025);
            
            ((int64_t *) mem_67395.mem)[offset_index_69028 - (int64_t) 1] =
                defunc_1_op_res_69026;
            ((int64_t *) scan_stage_2_accum_mem_69029)[(int64_t) 0] =
                defunc_1_op_res_69026;
        }
        
        int64_t iter_69035 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_73853
        futhark_mc_scan_stage_3_parloop_struct_73853;
        
        futhark_mc_scan_stage_3_parloop_struct_73853.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_73853.free_n_62256 = n_62256;
        futhark_mc_scan_stage_3_parloop_struct_73853.free_gtid_63645 =
            gtid_63645;
        futhark_mc_scan_stage_3_parloop_struct_73853.free_Y_mem_67388 =
            Y_mem_67388.mem;
        futhark_mc_scan_stage_3_parloop_struct_73853.free_mem_67395 =
            mem_67395.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_73854_task;
        
        futhark_mc_scan_stage_3_parloop_73854_task.name =
            "futhark_mc_scan_stage_3_parloop_73854";
        futhark_mc_scan_stage_3_parloop_73854_task.fn =
            futhark_mc_scan_stage_3_parloop_73854;
        futhark_mc_scan_stage_3_parloop_73854_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_73853;
        futhark_mc_scan_stage_3_parloop_73854_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_73854_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_73854_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_73854_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_73854_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_73854_task);
        
        if (futhark_mc_scan_stage_3_parloop_73854_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_73854_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_73854_total_end -
                     futhark_mc_scan_stage_3_parloop_73854_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73854_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73854_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73854_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_69029);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_73849_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_73849_end -
                 futhark_mc_segscan_task_73849_start;
        
        ctx->futhark_mc_segscan_task_73849_runs[tid]++;
        ctx->futhark_mc_segscan_task_73849_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_73849_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73855 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_63645;
    char *free_Y_mem_67388;
    char *free_mem_67395;
    char *free_mem_67398;
    char *free_mem_67401;
};
struct futhark_mc_segmap_parloop_struct_73857 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_63645;
    char *free_Y_mem_67388;
    char *free_mem_67395;
    char *free_mem_67398;
    char *free_mem_67401;
};
static int futhark_mc_segmap_parloop_73858(void *args, int64_t start,
                                           int64_t end, int flat_tid_63648,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73857
    *futhark_mc_segmap_parloop_struct_73857 =
    (struct futhark_mc_segmap_parloop_struct_73857 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73857->ctx;
    uint64_t futhark_mc_segmap_parloop_73858_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73858_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73857->free_n_62256;
    int64_t gtid_63645 =
            futhark_mc_segmap_parloop_struct_73857->free_gtid_63645;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_73857->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67395 = {.desc ="mem_67395", .mem =
                                 futhark_mc_segmap_parloop_struct_73857->free_mem_67395,
                                 .size =0, .references =NULL};
    struct memblock mem_67398 = {.desc ="mem_67398", .mem =
                                 futhark_mc_segmap_parloop_struct_73857->free_mem_67398,
                                 .size =0, .references =NULL};
    struct memblock mem_67401 = {.desc ="mem_67401", .mem =
                                 futhark_mc_segmap_parloop_struct_73857->free_mem_67401,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69039 = start;
    
    for (; iter_69039 < end; iter_69039++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69042 = n_62256;
        int64_t gtid_63649 = iter_69039;
        int64_t remnant_69043 = iter_69039 - gtid_63649;
        float x_68747 = ((float *) Y_mem_67388.mem)[gtid_63645 * n_62256 +
                                                    gtid_63649];
        bool isnan_res_68748;
        
        isnan_res_68748 = futrts_isnan32(x_68747);
        
        bool defunc_0_p_res_68749 = !isnan_res_68748;
        int64_t defunc_1_f_res_68750;
        
        if (defunc_0_p_res_68749) {
            int64_t x_69040 = ((int64_t *) mem_67395.mem)[gtid_63649];
            int64_t defunc_1_f_res_t_res_69041 = sub64(x_69040, (int64_t) 1);
            
            defunc_1_f_res_68750 = defunc_1_f_res_t_res_69041;
        } else {
            defunc_1_f_res_68750 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_68750) &&
            slt64(defunc_1_f_res_68750, n_62256)) {
            ((int64_t *) mem_67401.mem)[defunc_1_f_res_68750] = gtid_63649;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_68750) &&
            slt64(defunc_1_f_res_68750, n_62256)) {
            ((float *) mem_67398.mem)[defunc_1_f_res_68750] = x_68747;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73858_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73858_end -
                 futhark_mc_segmap_parloop_73858_start;
        
        ctx->futhark_mc_segmap_parloop_73858_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73858_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73858_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73856(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63648 = tid;
    int num_tasks_69038 = info.nsubtasks;
    struct futhark_mc_task_73855 *futhark_mc_task_73855 =
                                 (struct futhark_mc_task_73855 *) args;
    struct futhark_context *ctx = futhark_mc_task_73855->ctx;
    uint64_t futhark_mc_segmap_task_73856_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73856_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73855->free_n_62256;
    int64_t gtid_63645 = futhark_mc_task_73855->free_gtid_63645;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_73855->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67395 = {.desc ="mem_67395", .mem =
                                 futhark_mc_task_73855->free_mem_67395, .size =
                                 0, .references =NULL};
    struct memblock mem_67398 = {.desc ="mem_67398", .mem =
                                 futhark_mc_task_73855->free_mem_67398, .size =
                                 0, .references =NULL};
    struct memblock mem_67401 = {.desc ="mem_67401", .mem =
                                 futhark_mc_task_73855->free_mem_67401, .size =
                                 0, .references =NULL};
    int64_t iter_69039;
    struct futhark_mc_segmap_parloop_struct_73857
    futhark_mc_segmap_parloop_struct_73857;
    
    futhark_mc_segmap_parloop_struct_73857.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73857.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73857.free_gtid_63645 = gtid_63645;
    futhark_mc_segmap_parloop_struct_73857.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_73857.free_mem_67395 = mem_67395.mem;
    futhark_mc_segmap_parloop_struct_73857.free_mem_67398 = mem_67398.mem;
    futhark_mc_segmap_parloop_struct_73857.free_mem_67401 = mem_67401.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73858_task;
    
    futhark_mc_segmap_parloop_73858_task.name =
        "futhark_mc_segmap_parloop_73858";
    futhark_mc_segmap_parloop_73858_task.fn = futhark_mc_segmap_parloop_73858;
    futhark_mc_segmap_parloop_73858_task.args =
        &futhark_mc_segmap_parloop_struct_73857;
    futhark_mc_segmap_parloop_73858_task.iterations = iterations;
    futhark_mc_segmap_parloop_73858_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73858_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73858_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73858_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73858_task);
    
    if (futhark_mc_segmap_parloop_73858_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73858_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73858_total_end -
                 futhark_mc_segmap_parloop_73858_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73858_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73858_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73858_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73856_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73856_end -
                 futhark_mc_segmap_task_73856_start;
        
        ctx->futhark_mc_segmap_task_73856_runs[tid]++;
        ctx->futhark_mc_segmap_task_73856_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73856_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73859 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    char *free_mem_67401;
    char *free_mem_67404;
    char *free_mem_67407;
};
struct futhark_mc_segmap_parloop_struct_73861 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    char *free_mem_67401;
    char *free_mem_67404;
    char *free_mem_67407;
};
static int futhark_mc_segmap_parloop_73862(void *args, int64_t start,
                                           int64_t end, int flat_tid_63650,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73861
    *futhark_mc_segmap_parloop_struct_73861 =
    (struct futhark_mc_segmap_parloop_struct_73861 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73861->ctx;
    uint64_t futhark_mc_segmap_parloop_73862_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73862_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73861->free_n_62256;
    struct memblock mem_67401 = {.desc ="mem_67401", .mem =
                                 futhark_mc_segmap_parloop_struct_73861->free_mem_67401,
                                 .size =0, .references =NULL};
    struct memblock mem_67404 = {.desc ="mem_67404", .mem =
                                 futhark_mc_segmap_parloop_struct_73861->free_mem_67404,
                                 .size =0, .references =NULL};
    struct memblock mem_67407 = {.desc ="mem_67407", .mem =
                                 futhark_mc_segmap_parloop_struct_73861->free_mem_67407,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69045 = start;
    
    for (; iter_69045 < end; iter_69045++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69046 = n_62256;
        int64_t gtid_63651 = iter_69045;
        int64_t remnant_69047 = iter_69045 - gtid_63651;
        int64_t x_68753 = ((int64_t *) mem_67401.mem)[gtid_63651];
        int64_t defunc_0_f_res_68754 = add64((int64_t) 1, x_68753);
        float defunc_0_f_res_68755 = sitofp_i64_f32(x_68753);
        
        ((float *) mem_67404.mem)[gtid_63651] = defunc_0_f_res_68755;
        ((int64_t *) mem_67407.mem)[gtid_63651] = defunc_0_f_res_68754;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73862_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73862_end -
                 futhark_mc_segmap_parloop_73862_start;
        
        ctx->futhark_mc_segmap_parloop_73862_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73862_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73862_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73860(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63650 = tid;
    int num_tasks_69044 = info.nsubtasks;
    struct futhark_mc_task_73859 *futhark_mc_task_73859 =
                                 (struct futhark_mc_task_73859 *) args;
    struct futhark_context *ctx = futhark_mc_task_73859->ctx;
    uint64_t futhark_mc_segmap_task_73860_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73860_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73859->free_n_62256;
    struct memblock mem_67401 = {.desc ="mem_67401", .mem =
                                 futhark_mc_task_73859->free_mem_67401, .size =
                                 0, .references =NULL};
    struct memblock mem_67404 = {.desc ="mem_67404", .mem =
                                 futhark_mc_task_73859->free_mem_67404, .size =
                                 0, .references =NULL};
    struct memblock mem_67407 = {.desc ="mem_67407", .mem =
                                 futhark_mc_task_73859->free_mem_67407, .size =
                                 0, .references =NULL};
    int64_t iter_69045;
    struct futhark_mc_segmap_parloop_struct_73861
    futhark_mc_segmap_parloop_struct_73861;
    
    futhark_mc_segmap_parloop_struct_73861.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73861.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73861.free_mem_67401 = mem_67401.mem;
    futhark_mc_segmap_parloop_struct_73861.free_mem_67404 = mem_67404.mem;
    futhark_mc_segmap_parloop_struct_73861.free_mem_67407 = mem_67407.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73862_task;
    
    futhark_mc_segmap_parloop_73862_task.name =
        "futhark_mc_segmap_parloop_73862";
    futhark_mc_segmap_parloop_73862_task.fn = futhark_mc_segmap_parloop_73862;
    futhark_mc_segmap_parloop_73862_task.args =
        &futhark_mc_segmap_parloop_struct_73861;
    futhark_mc_segmap_parloop_73862_task.iterations = iterations;
    futhark_mc_segmap_parloop_73862_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73862_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73862_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73862_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73862_task);
    
    if (futhark_mc_segmap_parloop_73862_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73862_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73862_total_end -
                 futhark_mc_segmap_parloop_73862_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73862_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73862_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73862_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73860_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73860_end -
                 futhark_mc_segmap_task_73860_start;
        
        ctx->futhark_mc_segmap_task_73860_runs[tid]++;
        ctx->futhark_mc_segmap_task_73860_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73860_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73863 {
    struct futhark_context *ctx;
    int64_t free_q_62258;
    int64_t free_last_res_63805;
    char *free_mem_67410;
};
struct futhark_mc_segmap_parloop_struct_73865 {
    struct futhark_context *ctx;
    int64_t free_q_62258;
    int64_t free_last_res_63805;
    char *free_mem_67410;
};
static int futhark_mc_segmap_parloop_73866(void *args, int64_t start,
                                           int64_t end, int flat_tid_63652,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73865
    *futhark_mc_segmap_parloop_struct_73865 =
    (struct futhark_mc_segmap_parloop_struct_73865 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73865->ctx;
    uint64_t futhark_mc_segmap_parloop_73866_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73866_start = get_wall_time();
    
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73865->free_q_62258;
    int64_t last_res_63805 =
            futhark_mc_segmap_parloop_struct_73865->free_last_res_63805;
    struct memblock mem_67410 = {.desc ="mem_67410", .mem =
                                 futhark_mc_segmap_parloop_struct_73865->free_mem_67410,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69049 = start;
    
    for (; iter_69049 < end; iter_69049++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69050 = q_62258;
        int64_t gtid_63653 = iter_69049;
        int64_t remnant_69051 = iter_69049 - gtid_63653;
        bool cond_68756 = sle64(last_res_63805, gtid_63653);
        float defunc_0_f_res_68757;
        
        if (cond_68756) {
            defunc_0_f_res_68757 = 0.0F;
        } else {
            defunc_0_f_res_68757 = 1.0F;
        }
        ((float *) mem_67410.mem)[gtid_63653] = defunc_0_f_res_68757;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73866_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73866_end -
                 futhark_mc_segmap_parloop_73866_start;
        
        ctx->futhark_mc_segmap_parloop_73866_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73866_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73866_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73864(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63652 = tid;
    int num_tasks_69048 = info.nsubtasks;
    struct futhark_mc_task_73863 *futhark_mc_task_73863 =
                                 (struct futhark_mc_task_73863 *) args;
    struct futhark_context *ctx = futhark_mc_task_73863->ctx;
    uint64_t futhark_mc_segmap_task_73864_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73864_start = get_wall_time();
    
    int64_t q_62258 = futhark_mc_task_73863->free_q_62258;
    int64_t last_res_63805 = futhark_mc_task_73863->free_last_res_63805;
    struct memblock mem_67410 = {.desc ="mem_67410", .mem =
                                 futhark_mc_task_73863->free_mem_67410, .size =
                                 0, .references =NULL};
    int64_t iter_69049;
    struct futhark_mc_segmap_parloop_struct_73865
    futhark_mc_segmap_parloop_struct_73865;
    
    futhark_mc_segmap_parloop_struct_73865.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73865.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73865.free_last_res_63805 = last_res_63805;
    futhark_mc_segmap_parloop_struct_73865.free_mem_67410 = mem_67410.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73866_task;
    
    futhark_mc_segmap_parloop_73866_task.name =
        "futhark_mc_segmap_parloop_73866";
    futhark_mc_segmap_parloop_73866_task.fn = futhark_mc_segmap_parloop_73866;
    futhark_mc_segmap_parloop_73866_task.args =
        &futhark_mc_segmap_parloop_struct_73865;
    futhark_mc_segmap_parloop_73866_task.iterations = iterations;
    futhark_mc_segmap_parloop_73866_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73866_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73866_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73866_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73866_task);
    
    if (futhark_mc_segmap_parloop_73866_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73866_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73866_total_end -
                 futhark_mc_segmap_parloop_73866_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73866_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73866_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73866_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73864_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73864_end -
                 futhark_mc_segmap_task_73864_start;
        
        ctx->futhark_mc_segmap_task_73864_runs[tid]++;
        ctx->futhark_mc_segmap_task_73864_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73864_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73867 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_63805;
    int64_t free_min_arg_63817;
    int64_t free_min_arg_63818;
    int64_t free_min_res_63819;
    float free_max_res_63823;
    char *free_mem_67398;
    char *free_mem_67401;
    char *free_mem_67404;
    char *free_mem_67407;
    char *free_mem_67410;
    char *free_mem_67413;
};
struct futhark_mc_segmap_parloop_struct_73869 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_63805;
    int64_t free_min_arg_63817;
    int64_t free_min_arg_63818;
    int64_t free_min_res_63819;
    float free_max_res_63823;
    char *free_mem_67398;
    char *free_mem_67401;
    char *free_mem_67404;
    char *free_mem_67407;
    char *free_mem_67410;
    char *free_mem_67413;
};
static int futhark_mc_segmap_parloop_73870(void *args, int64_t start,
                                           int64_t end, int flat_tid_63654,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73869
    *futhark_mc_segmap_parloop_struct_73869 =
    (struct futhark_mc_segmap_parloop_struct_73869 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73869->ctx;
    uint64_t futhark_mc_segmap_parloop_73870_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73870_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73869->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73869->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_73869->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_73869->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_73869->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_73869->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_73869->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_73869->free_loop_cond_62281;
    int64_t last_res_63805 =
            futhark_mc_segmap_parloop_struct_73869->free_last_res_63805;
    int64_t min_arg_63817 =
            futhark_mc_segmap_parloop_struct_73869->free_min_arg_63817;
    int64_t min_arg_63818 =
            futhark_mc_segmap_parloop_struct_73869->free_min_arg_63818;
    int64_t min_res_63819 =
            futhark_mc_segmap_parloop_struct_73869->free_min_res_63819;
    float max_res_63823 =
          futhark_mc_segmap_parloop_struct_73869->free_max_res_63823;
    struct memblock mem_67398 = {.desc ="mem_67398", .mem =
                                 futhark_mc_segmap_parloop_struct_73869->free_mem_67398,
                                 .size =0, .references =NULL};
    struct memblock mem_67401 = {.desc ="mem_67401", .mem =
                                 futhark_mc_segmap_parloop_struct_73869->free_mem_67401,
                                 .size =0, .references =NULL};
    struct memblock mem_67404 = {.desc ="mem_67404", .mem =
                                 futhark_mc_segmap_parloop_struct_73869->free_mem_67404,
                                 .size =0, .references =NULL};
    struct memblock mem_67407 = {.desc ="mem_67407", .mem =
                                 futhark_mc_segmap_parloop_struct_73869->free_mem_67407,
                                 .size =0, .references =NULL};
    struct memblock mem_67410 = {.desc ="mem_67410", .mem =
                                 futhark_mc_segmap_parloop_struct_73869->free_mem_67410,
                                 .size =0, .references =NULL};
    struct memblock mem_67413 = {.desc ="mem_67413", .mem =
                                 futhark_mc_segmap_parloop_struct_73869->free_mem_67413,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69053 = start;
    
    for (; iter_69053 < end; iter_69053++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69150 = n_m_62264;
        int64_t gtid_63655 = iter_69053;
        int64_t remnant_69151 = iter_69053 - gtid_63655;
        int64_t min_arg_68889 = mul64(jump_62260, gtid_63655);
        int64_t min_res_68890 = smin64(i_62270, min_arg_68889);
        int64_t defunc_0_g_res_68891 = add64((int64_t) 1, min_res_68890);
        bool init_idx_68892;
        int64_t init_idx_68893;
        int64_t init_idx_68894;
        bool loop_while_69054;
        int64_t low_69055;
        int64_t high_69056;
        
        loop_while_69054 = x_62271;
        low_69055 = (int64_t) 0;
        high_69056 = i_62270;
        while (loop_while_69054) {
            int64_t x_69057 = add64(low_69055, high_69056);
            int64_t mid_69058 = sdiv64(x_69057, (int64_t) 2);
            bool x_69059 = sle64((int64_t) 0, mid_69058);
            bool y_69060 = slt64(mid_69058, n_62256);
            bool bounds_check_69061 = x_69059 && y_69060;
            bool index_certs_69062;
            
            if (!bounds_check_69061) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_69058,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t mid_id_69063 = ((int64_t *) mem_67407.mem)[mid_69058];
            bool cond_69064 = slt64(mid_id_69063, (int64_t) 0);
            int64_t mid_idx_69065;
            
            if (cond_69064) {
                mid_idx_69065 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_69065 = mid_id_69063;
            }
            
            bool cond_69066 = sle64(defunc_0_g_res_68891, mid_idx_69065);
            int64_t loopres_69067;
            int64_t loopres_69068;
            
            if (cond_69066) {
                int64_t loopres_t_res_69069 = sub64(mid_69058, (int64_t) 1);
                
                loopres_69067 = low_69055;
                loopres_69068 = loopres_t_res_69069;
            } else {
                int64_t loopres_f_res_69070 = add64((int64_t) 1, mid_69058);
                
                loopres_69067 = loopres_f_res_69070;
                loopres_69068 = high_69056;
            }
            
            bool loop_cond_69071 = sle64(loopres_69067, loopres_69068);
            bool loop_while_tmp_69152 = loop_cond_69071;
            int64_t low_tmp_69153 = loopres_69067;
            int64_t high_tmp_69154 = loopres_69068;
            
            loop_while_69054 = loop_while_tmp_69152;
            low_69055 = low_tmp_69153;
            high_69056 = high_tmp_69154;
        }
        init_idx_68892 = loop_while_69054;
        init_idx_68893 = low_69055;
        init_idx_68894 = high_69056;
        
        bool idx_68913;
        int64_t idx_68914;
        int64_t idx_68915;
        int64_t idx_68916;
        bool loop_while_69072;
        int64_t l_idx_69073;
        int64_t r_idx_69074;
        int64_t span_69075;
        
        loop_while_69072 = loop_cond_62281;
        l_idx_69073 = init_idx_68893;
        r_idx_69074 = init_idx_68893;
        span_69075 = (int64_t) 1;
        while (loop_while_69072) {
            int64_t max_arg_69076 = sub64(l_idx_69073, (int64_t) 1);
            int64_t max_res_69077 = smax64((int64_t) 0, max_arg_69076);
            int64_t min_arg_69078 = add64((int64_t) 1, r_idx_69074);
            int64_t min_res_69079 = smin64(min_arg_63817, min_arg_69078);
            bool x_69080 = sle64((int64_t) 0, max_res_69077);
            bool y_69081 = slt64(max_res_69077, n_62256);
            bool bounds_check_69082 = x_69080 && y_69081;
            bool index_certs_69083;
            
            if (!bounds_check_69082) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_69077,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_69084 = ((int64_t *) mem_67407.mem)[max_res_69077];
            int64_t abs_arg_69085 = sub64(x_69084, defunc_0_g_res_68891);
            int64_t abs_res_69086 = abs64(abs_arg_69085);
            bool x_69087 = sle64((int64_t) 0, min_res_69079);
            bool y_69088 = slt64(min_res_69079, n_62256);
            bool bounds_check_69089 = x_69087 && y_69088;
            bool index_certs_69090;
            
            if (!bounds_check_69089) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_69079,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_69091 = ((int64_t *) mem_67407.mem)[min_res_69079];
            int64_t abs_arg_69092 = sub64(x_69091, defunc_0_g_res_68891);
            int64_t abs_res_69093 = abs64(abs_arg_69092);
            bool cond_69094 = max_res_69077 == l_idx_69073;
            int64_t loopres_69095;
            int64_t loopres_69096;
            int64_t loopres_69097;
            
            if (cond_69094) {
                loopres_69095 = l_idx_69073;
                loopres_69096 = r_idx_69074;
                loopres_69097 = min_res_62276;
            } else {
                bool cond_69098 = slt64(abs_res_69086, abs_res_69093);
                bool cond_f_res_69099 = min_res_69079 == r_idx_69074;
                bool x_69100 = !cond_69098;
                bool y_69101 = cond_f_res_69099 && x_69100;
                bool cond_69102 = cond_69098 || y_69101;
                int64_t loopres_f_res_69103;
                
                if (cond_69102) {
                    loopres_f_res_69103 = max_res_69077;
                } else {
                    loopres_f_res_69103 = l_idx_69073;
                }
                
                int64_t loopres_f_res_69104;
                
                if (cond_69102) {
                    loopres_f_res_69104 = r_idx_69074;
                } else {
                    loopres_f_res_69104 = min_res_69079;
                }
                
                int64_t loopres_f_res_69105;
                
                if (cond_69102) {
                    int64_t loopres_f_res_t_res_69106 = add64((int64_t) 1,
                                                              span_69075);
                    
                    loopres_f_res_69105 = loopres_f_res_t_res_69106;
                } else {
                    int64_t loopres_f_res_f_res_69107 = add64((int64_t) 1,
                                                              span_69075);
                    
                    loopres_f_res_69105 = loopres_f_res_f_res_69107;
                }
                loopres_69095 = loopres_f_res_69103;
                loopres_69096 = loopres_f_res_69104;
                loopres_69097 = loopres_f_res_69105;
            }
            
            bool loop_cond_69108 = slt64(loopres_69097, min_res_62276);
            bool loop_while_tmp_69155 = loop_cond_69108;
            int64_t l_idx_tmp_69156 = loopres_69095;
            int64_t r_idx_tmp_69157 = loopres_69096;
            int64_t span_tmp_69158 = loopres_69097;
            
            loop_while_69072 = loop_while_tmp_69155;
            l_idx_69073 = l_idx_tmp_69156;
            r_idx_69074 = r_idx_tmp_69157;
            span_69075 = span_tmp_69158;
        }
        idx_68913 = loop_while_69072;
        idx_68914 = l_idx_69073;
        idx_68915 = r_idx_69074;
        idx_68916 = span_69075;
        
        int64_t min_res_68954 = smin64(min_arg_63818, idx_68914);
        int64_t max_res_68955 = smax64((int64_t) 0, min_res_68954);
        int64_t x_68956 = add64(min_res_63819, max_res_68955);
        int64_t r_68957 = sub64(x_68956, (int64_t) 1);
        bool x_68958 = sle64((int64_t) 0, r_68957);
        bool y_68959 = slt64(r_68957, n_62256);
        bool bounds_check_68960 = x_68958 && y_68959;
        bool index_certs_68961;
        
        if (!bounds_check_68960) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_68957,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_68962 = ((int64_t *) mem_67401.mem)[r_68957];
        int64_t abs_arg_68963 = sub64(x_68962, min_res_68890);
        int64_t abs_res_68964 = abs64(abs_arg_68963);
        bool x_68965 = sle64((int64_t) 0, max_res_68955);
        bool y_68966 = slt64(max_res_68955, n_62256);
        bool bounds_check_68967 = x_68965 && y_68966;
        bool index_certs_68968;
        
        if (!bounds_check_68967) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_68955,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_68969 = ((int64_t *) mem_67401.mem)[max_res_68955];
        int64_t abs_arg_68970 = sub64(x_68969, min_res_68890);
        int64_t abs_res_68971 = abs64(abs_arg_68970);
        int64_t max_res_68972 = smax64(abs_res_68964, abs_res_68971);
        float defunc_0_f_res_68973 = sitofp_i64_f32(max_res_68972);
        float defunc_1_f_res_68974 = max_res_63823 + defunc_0_f_res_68973;
        float defunc_0_f_res_68975 = sitofp_i64_f32(min_res_68890);
        float defunc_2_reduce_res_68976;
        float redout_69110 = 0.0F;
        
        for (int64_t i_69109 = 0; i_69109 < q_62258; i_69109++) {
            float x_69111 = ((float *) mem_67410.mem)[i_69109];
            bool cond_69112 = sle64(last_res_63805, i_69109);
            float defunc_0_f_res_69113;
            
            if (cond_69112) {
                defunc_0_f_res_69113 = 0.0F;
            } else {
                int64_t i_69114 = add64(max_res_68955, i_69109);
                float x_69115 = ((float *) mem_67404.mem)[i_69114];
                float defunc_0_f_res_f_res_69116 = 1.0F + x_69115;
                
                defunc_0_f_res_69113 = defunc_0_f_res_f_res_69116;
            }
            
            float x_j_69117 = defunc_0_f_res_69113 - defunc_0_f_res_68975;
            float abs_res_69118 = (float) fabs(x_j_69117);
            float tmp1_69119 = abs_res_69118 / defunc_1_f_res_68974;
            float x_69120 = tmp1_69119 * tmp1_69119;
            float y_69121 = tmp1_69119 * x_69120;
            float tmp2_69122 = 1.0F - y_69121;
            float x_69123 = tmp2_69122 * tmp2_69122;
            float tmp3_69124 = tmp2_69122 * x_69123;
            float w_j_69125 = x_69111 * tmp3_69124;
            float defunc_1_op_res_69126 = w_j_69125 + redout_69110;
            float redout_tmp_69159 = defunc_1_op_res_69126;
            
            redout_69110 = redout_tmp_69159;
        }
        defunc_2_reduce_res_68976 = redout_69110;
        
        float a0_68995 = 1.0F / defunc_2_reduce_res_68976;
        float defunc_2_reduce_res_68996;
        float redout_69128 = 0.0F;
        
        for (int64_t i_69127 = 0; i_69127 < q_62258; i_69127++) {
            float x_69129 = ((float *) mem_67410.mem)[i_69127];
            bool cond_69130 = sle64(last_res_63805, i_69127);
            float defunc_0_f_res_69131;
            
            if (cond_69130) {
                defunc_0_f_res_69131 = 0.0F;
            } else {
                int64_t i_69132 = add64(max_res_68955, i_69127);
                float x_69133 = ((float *) mem_67404.mem)[i_69132];
                float defunc_0_f_res_f_res_69134 = 1.0F + x_69133;
                
                defunc_0_f_res_69131 = defunc_0_f_res_f_res_69134;
            }
            
            float x_j_69135 = defunc_0_f_res_69131 - defunc_0_f_res_68975;
            float abs_res_69136 = (float) fabs(x_j_69135);
            float tmp1_69137 = abs_res_69136 / defunc_1_f_res_68974;
            float x_69138 = tmp1_69137 * tmp1_69137;
            float y_69139 = tmp1_69137 * x_69138;
            float tmp2_69140 = 1.0F - y_69139;
            float x_69141 = tmp2_69140 * tmp2_69140;
            float tmp3_69142 = tmp2_69140 * x_69141;
            float tmp4_69143 = x_69129 * tmp3_69142;
            float defunc_0_f_res_69144;
            
            if (cond_69130) {
                defunc_0_f_res_69144 = 0.0F;
            } else {
                int64_t i_69145 = add64(max_res_68955, i_69127);
                float x_69146 = ((float *) mem_67398.mem)[i_69145];
                
                defunc_0_f_res_69144 = x_69146;
            }
            
            float x_69147 = a0_68995 * tmp4_69143;
            float defunc_9_fit_fun_res_69148 = defunc_0_f_res_69144 * x_69147;
            float defunc_1_op_res_69149 = defunc_9_fit_fun_res_69148 +
                  redout_69128;
            float redout_tmp_69160 = defunc_1_op_res_69149;
            
            redout_69128 = redout_tmp_69160;
        }
        defunc_2_reduce_res_68996 = redout_69128;
        ((float *) mem_67413.mem)[gtid_63655] = defunc_2_reduce_res_68996;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73870_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73870_end -
                 futhark_mc_segmap_parloop_73870_start;
        
        ctx->futhark_mc_segmap_parloop_73870_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73870_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73870_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73868(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63654 = tid;
    int num_tasks_69052 = info.nsubtasks;
    struct futhark_mc_task_73867 *futhark_mc_task_73867 =
                                 (struct futhark_mc_task_73867 *) args;
    struct futhark_context *ctx = futhark_mc_task_73867->ctx;
    uint64_t futhark_mc_segmap_task_73868_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73868_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73867->free_n_62256;
    int64_t q_62258 = futhark_mc_task_73867->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_73867->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_73867->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_73867->free_i_62270;
    bool x_62271 = futhark_mc_task_73867->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_73867->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_73867->free_loop_cond_62281;
    int64_t last_res_63805 = futhark_mc_task_73867->free_last_res_63805;
    int64_t min_arg_63817 = futhark_mc_task_73867->free_min_arg_63817;
    int64_t min_arg_63818 = futhark_mc_task_73867->free_min_arg_63818;
    int64_t min_res_63819 = futhark_mc_task_73867->free_min_res_63819;
    float max_res_63823 = futhark_mc_task_73867->free_max_res_63823;
    struct memblock mem_67398 = {.desc ="mem_67398", .mem =
                                 futhark_mc_task_73867->free_mem_67398, .size =
                                 0, .references =NULL};
    struct memblock mem_67401 = {.desc ="mem_67401", .mem =
                                 futhark_mc_task_73867->free_mem_67401, .size =
                                 0, .references =NULL};
    struct memblock mem_67404 = {.desc ="mem_67404", .mem =
                                 futhark_mc_task_73867->free_mem_67404, .size =
                                 0, .references =NULL};
    struct memblock mem_67407 = {.desc ="mem_67407", .mem =
                                 futhark_mc_task_73867->free_mem_67407, .size =
                                 0, .references =NULL};
    struct memblock mem_67410 = {.desc ="mem_67410", .mem =
                                 futhark_mc_task_73867->free_mem_67410, .size =
                                 0, .references =NULL};
    struct memblock mem_67413 = {.desc ="mem_67413", .mem =
                                 futhark_mc_task_73867->free_mem_67413, .size =
                                 0, .references =NULL};
    int64_t iter_69053;
    struct futhark_mc_segmap_parloop_struct_73869
    futhark_mc_segmap_parloop_struct_73869;
    
    futhark_mc_segmap_parloop_struct_73869.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73869.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73869.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73869.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_73869.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_73869.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_73869.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_73869.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_73869.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_73869.free_last_res_63805 = last_res_63805;
    futhark_mc_segmap_parloop_struct_73869.free_min_arg_63817 = min_arg_63817;
    futhark_mc_segmap_parloop_struct_73869.free_min_arg_63818 = min_arg_63818;
    futhark_mc_segmap_parloop_struct_73869.free_min_res_63819 = min_res_63819;
    futhark_mc_segmap_parloop_struct_73869.free_max_res_63823 = max_res_63823;
    futhark_mc_segmap_parloop_struct_73869.free_mem_67398 = mem_67398.mem;
    futhark_mc_segmap_parloop_struct_73869.free_mem_67401 = mem_67401.mem;
    futhark_mc_segmap_parloop_struct_73869.free_mem_67404 = mem_67404.mem;
    futhark_mc_segmap_parloop_struct_73869.free_mem_67407 = mem_67407.mem;
    futhark_mc_segmap_parloop_struct_73869.free_mem_67410 = mem_67410.mem;
    futhark_mc_segmap_parloop_struct_73869.free_mem_67413 = mem_67413.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73870_task;
    
    futhark_mc_segmap_parloop_73870_task.name =
        "futhark_mc_segmap_parloop_73870";
    futhark_mc_segmap_parloop_73870_task.fn = futhark_mc_segmap_parloop_73870;
    futhark_mc_segmap_parloop_73870_task.args =
        &futhark_mc_segmap_parloop_struct_73869;
    futhark_mc_segmap_parloop_73870_task.iterations = iterations;
    futhark_mc_segmap_parloop_73870_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73870_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73870_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73870_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73870_task);
    
    if (futhark_mc_segmap_parloop_73870_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73870_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73870_total_end -
                 futhark_mc_segmap_parloop_73870_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73870_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73870_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73870_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73868_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73868_end -
                 futhark_mc_segmap_task_73868_start;
        
        ctx->futhark_mc_segmap_task_73868_runs[tid]++;
        ctx->futhark_mc_segmap_task_73868_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73868_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_73872 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_63805;
    int64_t free_min_arg_63817;
    int64_t free_min_arg_63818;
    int64_t free_min_res_63819;
    float free_max_res_63823;
    char *free_mem_67398;
    char *free_mem_67401;
    char *free_mem_67404;
    char *free_mem_67407;
    char *free_mem_67410;
    char *free_mem_67413;
};
struct futhark_mc_task_73874 {
    struct futhark_context *ctx;
    int64_t free_last_res_63805;
    char *free_mem_67404;
    char *free_mem_67410;
    int64_t free_max_res_68824;
    float free_defunc_1_f_res_68843;
    float free_defunc_0_f_res_68844;
    float *retval_defunc_2_reduce_res_68845;
};
struct futhark_mc_segred_stage_1_parloop_struct_73877 {
    struct futhark_context *ctx;
    int64_t free_last_res_63805;
    char *free_mem_67404;
    char *free_mem_67410;
    int64_t free_max_res_68824;
    float free_defunc_1_f_res_68843;
    float free_defunc_0_f_res_68844;
    char *free_reduce_stage_1_tid_res_arr_mem_69268;
};
static int futhark_mc_segred_stage_1_parloop_73878(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_63658, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_73877
    *futhark_mc_segred_stage_1_parloop_struct_73877 =
    (struct futhark_mc_segred_stage_1_parloop_struct_73877 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_73877->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_73878_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73878_start = get_wall_time();
    
    int64_t last_res_63805 =
            futhark_mc_segred_stage_1_parloop_struct_73877->free_last_res_63805;
    struct memblock mem_67404 = {.desc ="mem_67404", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73877->free_mem_67404,
                                 .size =0, .references =NULL};
    struct memblock mem_67410 = {.desc ="mem_67410", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73877->free_mem_67410,
                                 .size =0, .references =NULL};
    int64_t max_res_68824 =
            futhark_mc_segred_stage_1_parloop_struct_73877->free_max_res_68824;
    float defunc_1_f_res_68843 =
          futhark_mc_segred_stage_1_parloop_struct_73877->free_defunc_1_f_res_68843;
    float defunc_0_f_res_68844 =
          futhark_mc_segred_stage_1_parloop_struct_73877->free_defunc_0_f_res_68844;
    struct memblock reduce_stage_1_tid_res_arr_mem_69268 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_69268",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_73877->free_reduce_stage_1_tid_res_arr_mem_69268,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69270 = start;
    float x_69217;
    float x_69218;
    float local_acc_69271 = 0.0F;
    
    for (; iter_69270 < end; iter_69270++) {
        int64_t gtid_63659 = iter_69270;
        float x_69220 = ((float *) mem_67410.mem)[gtid_63659];
        bool cond_69221 = sle64(last_res_63805, gtid_63659);
        float defunc_0_f_res_69222;
        
        if (cond_69221) {
            defunc_0_f_res_69222 = 0.0F;
        } else {
            int64_t i_69223 = add64(gtid_63659, max_res_68824);
            float x_69224 = ((float *) mem_67404.mem)[i_69223];
            float defunc_0_f_res_f_res_69225 = 1.0F + x_69224;
            
            defunc_0_f_res_69222 = defunc_0_f_res_f_res_69225;
        }
        
        float x_j_69226 = defunc_0_f_res_69222 - defunc_0_f_res_68844;
        float abs_res_69227 = (float) fabs(x_j_69226);
        float tmp1_69228 = abs_res_69227 / defunc_1_f_res_68843;
        float x_69229 = tmp1_69228 * tmp1_69228;
        float y_69230 = tmp1_69228 * x_69229;
        float tmp2_69231 = 1.0F - y_69230;
        float x_69232 = tmp2_69231 * tmp2_69231;
        float tmp3_69233 = tmp2_69231 * x_69232;
        float w_j_69234 = x_69220 * tmp3_69233;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_69217 = local_acc_69271;
        }
        // Load next params
        {
            x_69218 = w_j_69234;
        }
        // Red body
        {
            float defunc_1_op_res_69219 = x_69217 + x_69218;
            
            local_acc_69271 = defunc_1_op_res_69219;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_69268.mem)[flat_tid_63658] =
        local_acc_69271;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73878_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73878_end -
                 futhark_mc_segred_stage_1_parloop_73878_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_73878_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_73878_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_73878_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_73875(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63658 = tid;
    int num_tasks_69267 = info.nsubtasks;
    struct futhark_mc_task_73874 *futhark_mc_task_73874 =
                                 (struct futhark_mc_task_73874 *) args;
    struct futhark_context *ctx = futhark_mc_task_73874->ctx;
    uint64_t futhark_mc_segred_task_73875_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_73875_start = get_wall_time();
    
    int64_t last_res_63805 = futhark_mc_task_73874->free_last_res_63805;
    struct memblock mem_67404 = {.desc ="mem_67404", .mem =
                                 futhark_mc_task_73874->free_mem_67404, .size =
                                 0, .references =NULL};
    struct memblock mem_67410 = {.desc ="mem_67410", .mem =
                                 futhark_mc_task_73874->free_mem_67410, .size =
                                 0, .references =NULL};
    int64_t max_res_68824 = futhark_mc_task_73874->free_max_res_68824;
    float defunc_1_f_res_68843 =
          futhark_mc_task_73874->free_defunc_1_f_res_68843;
    float defunc_0_f_res_68844 =
          futhark_mc_task_73874->free_defunc_0_f_res_68844;
    float defunc_2_reduce_res_68845 =
          *futhark_mc_task_73874->retval_defunc_2_reduce_res_68845;
    size_t reduce_stage_1_tid_res_arr_mem_69268_cached_sizze_73876 = 0;
    char *reduce_stage_1_tid_res_arr_mem_69268 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_69268_cached_sizze_73876 <
        (size_t) ((int64_t) 4 * num_tasks_69267)) {
        reduce_stage_1_tid_res_arr_mem_69268 =
            realloc(reduce_stage_1_tid_res_arr_mem_69268, (int64_t) 4 *
                    num_tasks_69267);
        reduce_stage_1_tid_res_arr_mem_69268_cached_sizze_73876 = (int64_t) 4 *
            num_tasks_69267;
    }
    
    int64_t iter_69270;
    struct futhark_mc_segred_stage_1_parloop_struct_73877
    futhark_mc_segred_stage_1_parloop_struct_73877;
    
    futhark_mc_segred_stage_1_parloop_struct_73877.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_73877.free_last_res_63805 =
        last_res_63805;
    futhark_mc_segred_stage_1_parloop_struct_73877.free_mem_67404 =
        mem_67404.mem;
    futhark_mc_segred_stage_1_parloop_struct_73877.free_mem_67410 =
        mem_67410.mem;
    futhark_mc_segred_stage_1_parloop_struct_73877.free_max_res_68824 =
        max_res_68824;
    futhark_mc_segred_stage_1_parloop_struct_73877.free_defunc_1_f_res_68843 =
        defunc_1_f_res_68843;
    futhark_mc_segred_stage_1_parloop_struct_73877.free_defunc_0_f_res_68844 =
        defunc_0_f_res_68844;
    futhark_mc_segred_stage_1_parloop_struct_73877.free_reduce_stage_1_tid_res_arr_mem_69268 =
        reduce_stage_1_tid_res_arr_mem_69268;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_73878_task;
    
    futhark_mc_segred_stage_1_parloop_73878_task.name =
        "futhark_mc_segred_stage_1_parloop_73878";
    futhark_mc_segred_stage_1_parloop_73878_task.fn =
        futhark_mc_segred_stage_1_parloop_73878;
    futhark_mc_segred_stage_1_parloop_73878_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_73877;
    futhark_mc_segred_stage_1_parloop_73878_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_73878_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_73878_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73878_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_73878_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_73878_task);
    
    if (futhark_mc_segred_stage_1_parloop_73878_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73878_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73878_total_end -
                 futhark_mc_segred_stage_1_parloop_73878_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73878_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73878_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73878_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_68845 = 0.0F;
    }
    
    float x_69272;
    float x_69273;
    
    for (int32_t i_69275 = 0; i_69275 < num_tasks_69267; i_69275++) {
        flat_tid_63658 = i_69275;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_69272 = defunc_2_reduce_res_68845;
            }
            // load next params
            {
                x_69273 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_69268)[flat_tid_63658];
            }
            // red body
            {
                float defunc_1_op_res_69274 = x_69272 + x_69273;
                
                defunc_2_reduce_res_68845 = defunc_1_op_res_69274;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_69268);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_73875_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_73875_end -
                 futhark_mc_segred_task_73875_start;
        
        ctx->futhark_mc_segred_task_73875_runs[tid]++;
        ctx->futhark_mc_segred_task_73875_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_73875_iter[tid] += iterations;
    }
    *futhark_mc_task_73874->retval_defunc_2_reduce_res_68845 =
        defunc_2_reduce_res_68845;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73879 {
    struct futhark_context *ctx;
    int64_t free_last_res_63805;
    char *free_mem_67398;
    char *free_mem_67404;
    char *free_mem_67410;
    int64_t free_max_res_68824;
    float free_defunc_1_f_res_68843;
    float free_defunc_0_f_res_68844;
    float free_a0_68864;
    float *retval_defunc_2_reduce_res_68865;
};
struct futhark_mc_segred_stage_1_parloop_struct_73882 {
    struct futhark_context *ctx;
    int64_t free_last_res_63805;
    char *free_mem_67398;
    char *free_mem_67404;
    char *free_mem_67410;
    int64_t free_max_res_68824;
    float free_defunc_1_f_res_68843;
    float free_defunc_0_f_res_68844;
    float free_a0_68864;
    char *free_reduce_stage_1_tid_res_arr_mem_69277;
};
static int futhark_mc_segred_stage_1_parloop_73883(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_63660, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_73882
    *futhark_mc_segred_stage_1_parloop_struct_73882 =
    (struct futhark_mc_segred_stage_1_parloop_struct_73882 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_73882->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_73883_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73883_start = get_wall_time();
    
    int64_t last_res_63805 =
            futhark_mc_segred_stage_1_parloop_struct_73882->free_last_res_63805;
    struct memblock mem_67398 = {.desc ="mem_67398", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73882->free_mem_67398,
                                 .size =0, .references =NULL};
    struct memblock mem_67404 = {.desc ="mem_67404", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73882->free_mem_67404,
                                 .size =0, .references =NULL};
    struct memblock mem_67410 = {.desc ="mem_67410", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73882->free_mem_67410,
                                 .size =0, .references =NULL};
    int64_t max_res_68824 =
            futhark_mc_segred_stage_1_parloop_struct_73882->free_max_res_68824;
    float defunc_1_f_res_68843 =
          futhark_mc_segred_stage_1_parloop_struct_73882->free_defunc_1_f_res_68843;
    float defunc_0_f_res_68844 =
          futhark_mc_segred_stage_1_parloop_struct_73882->free_defunc_0_f_res_68844;
    float a0_68864 =
          futhark_mc_segred_stage_1_parloop_struct_73882->free_a0_68864;
    struct memblock reduce_stage_1_tid_res_arr_mem_69277 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_69277",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_73882->free_reduce_stage_1_tid_res_arr_mem_69277,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69279 = start;
    float x_69235;
    float x_69236;
    float local_acc_69280 = 0.0F;
    
    for (; iter_69279 < end; iter_69279++) {
        int64_t gtid_63661 = iter_69279;
        float x_69238 = ((float *) mem_67410.mem)[gtid_63661];
        bool cond_69239 = sle64(last_res_63805, gtid_63661);
        float defunc_0_f_res_69240;
        
        if (cond_69239) {
            defunc_0_f_res_69240 = 0.0F;
        } else {
            int64_t i_69241 = add64(gtid_63661, max_res_68824);
            float x_69242 = ((float *) mem_67404.mem)[i_69241];
            float defunc_0_f_res_f_res_69243 = 1.0F + x_69242;
            
            defunc_0_f_res_69240 = defunc_0_f_res_f_res_69243;
        }
        
        float x_j_69244 = defunc_0_f_res_69240 - defunc_0_f_res_68844;
        float abs_res_69245 = (float) fabs(x_j_69244);
        float tmp1_69246 = abs_res_69245 / defunc_1_f_res_68843;
        float x_69247 = tmp1_69246 * tmp1_69246;
        float y_69248 = tmp1_69246 * x_69247;
        float tmp2_69249 = 1.0F - y_69248;
        float x_69250 = tmp2_69249 * tmp2_69249;
        float tmp3_69251 = tmp2_69249 * x_69250;
        float tmp4_69252 = x_69238 * tmp3_69251;
        float defunc_0_f_res_69253;
        
        if (cond_69239) {
            defunc_0_f_res_69253 = 0.0F;
        } else {
            int64_t i_69254 = add64(gtid_63661, max_res_68824);
            float x_69255 = ((float *) mem_67398.mem)[i_69254];
            
            defunc_0_f_res_69253 = x_69255;
        }
        
        float x_69256 = a0_68864 * tmp4_69252;
        float defunc_9_fit_fun_res_69257 = defunc_0_f_res_69253 * x_69256;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_69235 = local_acc_69280;
        }
        // Load next params
        {
            x_69236 = defunc_9_fit_fun_res_69257;
        }
        // Red body
        {
            float defunc_1_op_res_69237 = x_69235 + x_69236;
            
            local_acc_69280 = defunc_1_op_res_69237;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_69277.mem)[flat_tid_63660] =
        local_acc_69280;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73883_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73883_end -
                 futhark_mc_segred_stage_1_parloop_73883_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_73883_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_73883_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_73883_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_73880(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63660 = tid;
    int num_tasks_69276 = info.nsubtasks;
    struct futhark_mc_task_73879 *futhark_mc_task_73879 =
                                 (struct futhark_mc_task_73879 *) args;
    struct futhark_context *ctx = futhark_mc_task_73879->ctx;
    uint64_t futhark_mc_segred_task_73880_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_73880_start = get_wall_time();
    
    int64_t last_res_63805 = futhark_mc_task_73879->free_last_res_63805;
    struct memblock mem_67398 = {.desc ="mem_67398", .mem =
                                 futhark_mc_task_73879->free_mem_67398, .size =
                                 0, .references =NULL};
    struct memblock mem_67404 = {.desc ="mem_67404", .mem =
                                 futhark_mc_task_73879->free_mem_67404, .size =
                                 0, .references =NULL};
    struct memblock mem_67410 = {.desc ="mem_67410", .mem =
                                 futhark_mc_task_73879->free_mem_67410, .size =
                                 0, .references =NULL};
    int64_t max_res_68824 = futhark_mc_task_73879->free_max_res_68824;
    float defunc_1_f_res_68843 =
          futhark_mc_task_73879->free_defunc_1_f_res_68843;
    float defunc_0_f_res_68844 =
          futhark_mc_task_73879->free_defunc_0_f_res_68844;
    float a0_68864 = futhark_mc_task_73879->free_a0_68864;
    float defunc_2_reduce_res_68865 =
          *futhark_mc_task_73879->retval_defunc_2_reduce_res_68865;
    size_t reduce_stage_1_tid_res_arr_mem_69277_cached_sizze_73881 = 0;
    char *reduce_stage_1_tid_res_arr_mem_69277 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_69277_cached_sizze_73881 <
        (size_t) ((int64_t) 4 * num_tasks_69276)) {
        reduce_stage_1_tid_res_arr_mem_69277 =
            realloc(reduce_stage_1_tid_res_arr_mem_69277, (int64_t) 4 *
                    num_tasks_69276);
        reduce_stage_1_tid_res_arr_mem_69277_cached_sizze_73881 = (int64_t) 4 *
            num_tasks_69276;
    }
    
    int64_t iter_69279;
    struct futhark_mc_segred_stage_1_parloop_struct_73882
    futhark_mc_segred_stage_1_parloop_struct_73882;
    
    futhark_mc_segred_stage_1_parloop_struct_73882.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_73882.free_last_res_63805 =
        last_res_63805;
    futhark_mc_segred_stage_1_parloop_struct_73882.free_mem_67398 =
        mem_67398.mem;
    futhark_mc_segred_stage_1_parloop_struct_73882.free_mem_67404 =
        mem_67404.mem;
    futhark_mc_segred_stage_1_parloop_struct_73882.free_mem_67410 =
        mem_67410.mem;
    futhark_mc_segred_stage_1_parloop_struct_73882.free_max_res_68824 =
        max_res_68824;
    futhark_mc_segred_stage_1_parloop_struct_73882.free_defunc_1_f_res_68843 =
        defunc_1_f_res_68843;
    futhark_mc_segred_stage_1_parloop_struct_73882.free_defunc_0_f_res_68844 =
        defunc_0_f_res_68844;
    futhark_mc_segred_stage_1_parloop_struct_73882.free_a0_68864 = a0_68864;
    futhark_mc_segred_stage_1_parloop_struct_73882.free_reduce_stage_1_tid_res_arr_mem_69277 =
        reduce_stage_1_tid_res_arr_mem_69277;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_73883_task;
    
    futhark_mc_segred_stage_1_parloop_73883_task.name =
        "futhark_mc_segred_stage_1_parloop_73883";
    futhark_mc_segred_stage_1_parloop_73883_task.fn =
        futhark_mc_segred_stage_1_parloop_73883;
    futhark_mc_segred_stage_1_parloop_73883_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_73882;
    futhark_mc_segred_stage_1_parloop_73883_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_73883_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_73883_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73883_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_73883_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_73883_task);
    
    if (futhark_mc_segred_stage_1_parloop_73883_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73883_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73883_total_end -
                 futhark_mc_segred_stage_1_parloop_73883_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73883_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73883_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73883_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_68865 = 0.0F;
    }
    
    float x_69281;
    float x_69282;
    
    for (int32_t i_69284 = 0; i_69284 < num_tasks_69276; i_69284++) {
        flat_tid_63660 = i_69284;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_69281 = defunc_2_reduce_res_68865;
            }
            // load next params
            {
                x_69282 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_69277)[flat_tid_63660];
            }
            // red body
            {
                float defunc_1_op_res_69283 = x_69281 + x_69282;
                
                defunc_2_reduce_res_68865 = defunc_1_op_res_69283;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_69277);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_73880_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_73880_end -
                 futhark_mc_segred_task_73880_start;
        
        ctx->futhark_mc_segred_task_73880_runs[tid]++;
        ctx->futhark_mc_segred_task_73880_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_73880_iter[tid] += iterations;
    }
    *futhark_mc_task_73879->retval_defunc_2_reduce_res_68865 =
        defunc_2_reduce_res_68865;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_73873(void *args, int64_t start,
                                           int64_t end, int flat_tid_63656,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73872
    *futhark_mc_segmap_parloop_struct_73872 =
    (struct futhark_mc_segmap_parloop_struct_73872 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73872->ctx;
    uint64_t futhark_mc_segmap_parloop_73873_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73873_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73872->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73872->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_73872->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_73872->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_73872->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_73872->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_73872->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_73872->free_loop_cond_62281;
    int64_t last_res_63805 =
            futhark_mc_segmap_parloop_struct_73872->free_last_res_63805;
    int64_t min_arg_63817 =
            futhark_mc_segmap_parloop_struct_73872->free_min_arg_63817;
    int64_t min_arg_63818 =
            futhark_mc_segmap_parloop_struct_73872->free_min_arg_63818;
    int64_t min_res_63819 =
            futhark_mc_segmap_parloop_struct_73872->free_min_res_63819;
    float max_res_63823 =
          futhark_mc_segmap_parloop_struct_73872->free_max_res_63823;
    struct memblock mem_67398 = {.desc ="mem_67398", .mem =
                                 futhark_mc_segmap_parloop_struct_73872->free_mem_67398,
                                 .size =0, .references =NULL};
    struct memblock mem_67401 = {.desc ="mem_67401", .mem =
                                 futhark_mc_segmap_parloop_struct_73872->free_mem_67401,
                                 .size =0, .references =NULL};
    struct memblock mem_67404 = {.desc ="mem_67404", .mem =
                                 futhark_mc_segmap_parloop_struct_73872->free_mem_67404,
                                 .size =0, .references =NULL};
    struct memblock mem_67407 = {.desc ="mem_67407", .mem =
                                 futhark_mc_segmap_parloop_struct_73872->free_mem_67407,
                                 .size =0, .references =NULL};
    struct memblock mem_67410 = {.desc ="mem_67410", .mem =
                                 futhark_mc_segmap_parloop_struct_73872->free_mem_67410,
                                 .size =0, .references =NULL};
    struct memblock mem_67413 = {.desc ="mem_67413", .mem =
                                 futhark_mc_segmap_parloop_struct_73872->free_mem_67413,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69161 = start;
    
    for (; iter_69161 < end; iter_69161++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69258 = n_m_62264;
        int64_t gtid_63657 = iter_69161;
        int64_t remnant_69259 = iter_69161 - gtid_63657;
        int64_t min_arg_68758 = mul64(jump_62260, gtid_63657);
        int64_t min_res_68759 = smin64(i_62270, min_arg_68758);
        int64_t defunc_0_g_res_68760 = add64((int64_t) 1, min_res_68759);
        bool init_idx_68761;
        int64_t init_idx_68762;
        int64_t init_idx_68763;
        bool loop_while_69162;
        int64_t low_69163;
        int64_t high_69164;
        
        loop_while_69162 = x_62271;
        low_69163 = (int64_t) 0;
        high_69164 = i_62270;
        while (loop_while_69162) {
            int64_t x_69165 = add64(low_69163, high_69164);
            int64_t mid_69166 = sdiv64(x_69165, (int64_t) 2);
            bool x_69167 = sle64((int64_t) 0, mid_69166);
            bool y_69168 = slt64(mid_69166, n_62256);
            bool bounds_check_69169 = x_69167 && y_69168;
            bool index_certs_69170;
            
            if (!bounds_check_69169) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_69166,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t mid_id_69171 = ((int64_t *) mem_67407.mem)[mid_69166];
            bool cond_69172 = slt64(mid_id_69171, (int64_t) 0);
            int64_t mid_idx_69173;
            
            if (cond_69172) {
                mid_idx_69173 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_69173 = mid_id_69171;
            }
            
            bool cond_69174 = sle64(defunc_0_g_res_68760, mid_idx_69173);
            int64_t loopres_69175;
            int64_t loopres_69176;
            
            if (cond_69174) {
                int64_t loopres_t_res_69177 = sub64(mid_69166, (int64_t) 1);
                
                loopres_69175 = low_69163;
                loopres_69176 = loopres_t_res_69177;
            } else {
                int64_t loopres_f_res_69178 = add64((int64_t) 1, mid_69166);
                
                loopres_69175 = loopres_f_res_69178;
                loopres_69176 = high_69164;
            }
            
            bool loop_cond_69179 = sle64(loopres_69175, loopres_69176);
            bool loop_while_tmp_69260 = loop_cond_69179;
            int64_t low_tmp_69261 = loopres_69175;
            int64_t high_tmp_69262 = loopres_69176;
            
            loop_while_69162 = loop_while_tmp_69260;
            low_69163 = low_tmp_69261;
            high_69164 = high_tmp_69262;
        }
        init_idx_68761 = loop_while_69162;
        init_idx_68762 = low_69163;
        init_idx_68763 = high_69164;
        
        bool idx_68782;
        int64_t idx_68783;
        int64_t idx_68784;
        int64_t idx_68785;
        bool loop_while_69180;
        int64_t l_idx_69181;
        int64_t r_idx_69182;
        int64_t span_69183;
        
        loop_while_69180 = loop_cond_62281;
        l_idx_69181 = init_idx_68762;
        r_idx_69182 = init_idx_68762;
        span_69183 = (int64_t) 1;
        while (loop_while_69180) {
            int64_t max_arg_69184 = sub64(l_idx_69181, (int64_t) 1);
            int64_t max_res_69185 = smax64((int64_t) 0, max_arg_69184);
            int64_t min_arg_69186 = add64((int64_t) 1, r_idx_69182);
            int64_t min_res_69187 = smin64(min_arg_63817, min_arg_69186);
            bool x_69188 = sle64((int64_t) 0, max_res_69185);
            bool y_69189 = slt64(max_res_69185, n_62256);
            bool bounds_check_69190 = x_69188 && y_69189;
            bool index_certs_69191;
            
            if (!bounds_check_69190) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_69185,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_69192 = ((int64_t *) mem_67407.mem)[max_res_69185];
            int64_t abs_arg_69193 = sub64(x_69192, defunc_0_g_res_68760);
            int64_t abs_res_69194 = abs64(abs_arg_69193);
            bool x_69195 = sle64((int64_t) 0, min_res_69187);
            bool y_69196 = slt64(min_res_69187, n_62256);
            bool bounds_check_69197 = x_69195 && y_69196;
            bool index_certs_69198;
            
            if (!bounds_check_69197) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_69187,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_69199 = ((int64_t *) mem_67407.mem)[min_res_69187];
            int64_t abs_arg_69200 = sub64(x_69199, defunc_0_g_res_68760);
            int64_t abs_res_69201 = abs64(abs_arg_69200);
            bool cond_69202 = max_res_69185 == l_idx_69181;
            int64_t loopres_69203;
            int64_t loopres_69204;
            int64_t loopres_69205;
            
            if (cond_69202) {
                loopres_69203 = l_idx_69181;
                loopres_69204 = r_idx_69182;
                loopres_69205 = min_res_62276;
            } else {
                bool cond_69206 = slt64(abs_res_69194, abs_res_69201);
                bool cond_f_res_69207 = min_res_69187 == r_idx_69182;
                bool x_69208 = !cond_69206;
                bool y_69209 = cond_f_res_69207 && x_69208;
                bool cond_69210 = cond_69206 || y_69209;
                int64_t loopres_f_res_69211;
                
                if (cond_69210) {
                    loopres_f_res_69211 = max_res_69185;
                } else {
                    loopres_f_res_69211 = l_idx_69181;
                }
                
                int64_t loopres_f_res_69212;
                
                if (cond_69210) {
                    loopres_f_res_69212 = r_idx_69182;
                } else {
                    loopres_f_res_69212 = min_res_69187;
                }
                
                int64_t loopres_f_res_69213;
                
                if (cond_69210) {
                    int64_t loopres_f_res_t_res_69214 = add64((int64_t) 1,
                                                              span_69183);
                    
                    loopres_f_res_69213 = loopres_f_res_t_res_69214;
                } else {
                    int64_t loopres_f_res_f_res_69215 = add64((int64_t) 1,
                                                              span_69183);
                    
                    loopres_f_res_69213 = loopres_f_res_f_res_69215;
                }
                loopres_69203 = loopres_f_res_69211;
                loopres_69204 = loopres_f_res_69212;
                loopres_69205 = loopres_f_res_69213;
            }
            
            bool loop_cond_69216 = slt64(loopres_69205, min_res_62276);
            bool loop_while_tmp_69263 = loop_cond_69216;
            int64_t l_idx_tmp_69264 = loopres_69203;
            int64_t r_idx_tmp_69265 = loopres_69204;
            int64_t span_tmp_69266 = loopres_69205;
            
            loop_while_69180 = loop_while_tmp_69263;
            l_idx_69181 = l_idx_tmp_69264;
            r_idx_69182 = r_idx_tmp_69265;
            span_69183 = span_tmp_69266;
        }
        idx_68782 = loop_while_69180;
        idx_68783 = l_idx_69181;
        idx_68784 = r_idx_69182;
        idx_68785 = span_69183;
        
        int64_t min_res_68823 = smin64(min_arg_63818, idx_68783);
        int64_t max_res_68824 = smax64((int64_t) 0, min_res_68823);
        int64_t x_68825 = add64(min_res_63819, max_res_68824);
        int64_t r_68826 = sub64(x_68825, (int64_t) 1);
        bool x_68827 = sle64((int64_t) 0, r_68826);
        bool y_68828 = slt64(r_68826, n_62256);
        bool bounds_check_68829 = x_68827 && y_68828;
        bool index_certs_68830;
        
        if (!bounds_check_68829) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_68826,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_68831 = ((int64_t *) mem_67401.mem)[r_68826];
        int64_t abs_arg_68832 = sub64(x_68831, min_res_68759);
        int64_t abs_res_68833 = abs64(abs_arg_68832);
        bool x_68834 = sle64((int64_t) 0, max_res_68824);
        bool y_68835 = slt64(max_res_68824, n_62256);
        bool bounds_check_68836 = x_68834 && y_68835;
        bool index_certs_68837;
        
        if (!bounds_check_68836) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_68824,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_68838 = ((int64_t *) mem_67401.mem)[max_res_68824];
        int64_t abs_arg_68839 = sub64(x_68838, min_res_68759);
        int64_t abs_res_68840 = abs64(abs_arg_68839);
        int64_t max_res_68841 = smax64(abs_res_68833, abs_res_68840);
        float defunc_0_f_res_68842 = sitofp_i64_f32(max_res_68841);
        float defunc_1_f_res_68843 = max_res_63823 + defunc_0_f_res_68842;
        float defunc_0_f_res_68844 = sitofp_i64_f32(min_res_68759);
        float defunc_2_reduce_res_68845;
        int64_t flat_tid_63658 = (int64_t) 0;
        int32_t num_tasks_69267;
        struct futhark_mc_task_73874 futhark_mc_task_73874;
        
        futhark_mc_task_73874.ctx = ctx;
        futhark_mc_task_73874.free_last_res_63805 = last_res_63805;
        futhark_mc_task_73874.free_mem_67404 = mem_67404.mem;
        futhark_mc_task_73874.free_mem_67410 = mem_67410.mem;
        futhark_mc_task_73874.free_max_res_68824 = max_res_68824;
        futhark_mc_task_73874.free_defunc_1_f_res_68843 = defunc_1_f_res_68843;
        futhark_mc_task_73874.free_defunc_0_f_res_68844 = defunc_0_f_res_68844;
        futhark_mc_task_73874.retval_defunc_2_reduce_res_68845 =
            &defunc_2_reduce_res_68845;
        
        struct scheduler_segop futhark_mc_task_73874_task;
        
        futhark_mc_task_73874_task.args = &futhark_mc_task_73874;
        futhark_mc_task_73874_task.top_level_fn = futhark_mc_segred_task_73875;
        futhark_mc_task_73874_task.name = "futhark_mc_segred_task_73875";
        futhark_mc_task_73874_task.iterations = q_62258;
        futhark_mc_task_73874_task.task_time =
            &ctx->futhark_mc_segred_task_73875_total_time;
        futhark_mc_task_73874_task.task_iter =
            &ctx->futhark_mc_segred_task_73875_total_iter;
        futhark_mc_task_73874_task.sched = STATIC;
        futhark_mc_task_73874_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_73875_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73874_task);
        
        if (futhark_mc_segred_task_73875_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_68864 = 1.0F / defunc_2_reduce_res_68845;
        float defunc_2_reduce_res_68865;
        int64_t flat_tid_63660 = (int64_t) 0;
        int32_t num_tasks_69276;
        struct futhark_mc_task_73879 futhark_mc_task_73879;
        
        futhark_mc_task_73879.ctx = ctx;
        futhark_mc_task_73879.free_last_res_63805 = last_res_63805;
        futhark_mc_task_73879.free_mem_67398 = mem_67398.mem;
        futhark_mc_task_73879.free_mem_67404 = mem_67404.mem;
        futhark_mc_task_73879.free_mem_67410 = mem_67410.mem;
        futhark_mc_task_73879.free_max_res_68824 = max_res_68824;
        futhark_mc_task_73879.free_defunc_1_f_res_68843 = defunc_1_f_res_68843;
        futhark_mc_task_73879.free_defunc_0_f_res_68844 = defunc_0_f_res_68844;
        futhark_mc_task_73879.free_a0_68864 = a0_68864;
        futhark_mc_task_73879.retval_defunc_2_reduce_res_68865 =
            &defunc_2_reduce_res_68865;
        
        struct scheduler_segop futhark_mc_task_73879_task;
        
        futhark_mc_task_73879_task.args = &futhark_mc_task_73879;
        futhark_mc_task_73879_task.top_level_fn = futhark_mc_segred_task_73880;
        futhark_mc_task_73879_task.name = "futhark_mc_segred_task_73880";
        futhark_mc_task_73879_task.iterations = q_62258;
        futhark_mc_task_73879_task.task_time =
            &ctx->futhark_mc_segred_task_73880_total_time;
        futhark_mc_task_73879_task.task_iter =
            &ctx->futhark_mc_segred_task_73880_total_iter;
        futhark_mc_task_73879_task.sched = STATIC;
        futhark_mc_task_73879_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_73880_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73879_task);
        
        if (futhark_mc_segred_task_73880_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_67413.mem)[gtid_63657] = defunc_2_reduce_res_68865;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73873_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73873_end -
                 futhark_mc_segmap_parloop_73873_start;
        
        ctx->futhark_mc_segmap_parloop_73873_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73873_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73873_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_73871(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63656 = tid;
    int num_tasks_69052 = info.nsubtasks;
    struct futhark_mc_task_73867 *futhark_mc_task_73867 =
                                 (struct futhark_mc_task_73867 *) args;
    struct futhark_context *ctx = futhark_mc_task_73867->ctx;
    uint64_t futhark_mc_segmap_nested_task_73871_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_73871_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73867->free_n_62256;
    int64_t q_62258 = futhark_mc_task_73867->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_73867->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_73867->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_73867->free_i_62270;
    bool x_62271 = futhark_mc_task_73867->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_73867->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_73867->free_loop_cond_62281;
    int64_t last_res_63805 = futhark_mc_task_73867->free_last_res_63805;
    int64_t min_arg_63817 = futhark_mc_task_73867->free_min_arg_63817;
    int64_t min_arg_63818 = futhark_mc_task_73867->free_min_arg_63818;
    int64_t min_res_63819 = futhark_mc_task_73867->free_min_res_63819;
    float max_res_63823 = futhark_mc_task_73867->free_max_res_63823;
    struct memblock mem_67398 = {.desc ="mem_67398", .mem =
                                 futhark_mc_task_73867->free_mem_67398, .size =
                                 0, .references =NULL};
    struct memblock mem_67401 = {.desc ="mem_67401", .mem =
                                 futhark_mc_task_73867->free_mem_67401, .size =
                                 0, .references =NULL};
    struct memblock mem_67404 = {.desc ="mem_67404", .mem =
                                 futhark_mc_task_73867->free_mem_67404, .size =
                                 0, .references =NULL};
    struct memblock mem_67407 = {.desc ="mem_67407", .mem =
                                 futhark_mc_task_73867->free_mem_67407, .size =
                                 0, .references =NULL};
    struct memblock mem_67410 = {.desc ="mem_67410", .mem =
                                 futhark_mc_task_73867->free_mem_67410, .size =
                                 0, .references =NULL};
    struct memblock mem_67413 = {.desc ="mem_67413", .mem =
                                 futhark_mc_task_73867->free_mem_67413, .size =
                                 0, .references =NULL};
    int64_t iter_69161;
    struct futhark_mc_segmap_parloop_struct_73872
    futhark_mc_segmap_parloop_struct_73872;
    
    futhark_mc_segmap_parloop_struct_73872.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73872.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73872.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73872.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_73872.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_73872.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_73872.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_73872.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_73872.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_73872.free_last_res_63805 = last_res_63805;
    futhark_mc_segmap_parloop_struct_73872.free_min_arg_63817 = min_arg_63817;
    futhark_mc_segmap_parloop_struct_73872.free_min_arg_63818 = min_arg_63818;
    futhark_mc_segmap_parloop_struct_73872.free_min_res_63819 = min_res_63819;
    futhark_mc_segmap_parloop_struct_73872.free_max_res_63823 = max_res_63823;
    futhark_mc_segmap_parloop_struct_73872.free_mem_67398 = mem_67398.mem;
    futhark_mc_segmap_parloop_struct_73872.free_mem_67401 = mem_67401.mem;
    futhark_mc_segmap_parloop_struct_73872.free_mem_67404 = mem_67404.mem;
    futhark_mc_segmap_parloop_struct_73872.free_mem_67407 = mem_67407.mem;
    futhark_mc_segmap_parloop_struct_73872.free_mem_67410 = mem_67410.mem;
    futhark_mc_segmap_parloop_struct_73872.free_mem_67413 = mem_67413.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73873_task;
    
    futhark_mc_segmap_parloop_73873_task.name =
        "futhark_mc_segmap_parloop_73873";
    futhark_mc_segmap_parloop_73873_task.fn = futhark_mc_segmap_parloop_73873;
    futhark_mc_segmap_parloop_73873_task.args =
        &futhark_mc_segmap_parloop_struct_73872;
    futhark_mc_segmap_parloop_73873_task.iterations = iterations;
    futhark_mc_segmap_parloop_73873_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73873_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73873_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73873_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73873_task);
    
    if (futhark_mc_segmap_parloop_73873_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73873_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73873_total_end -
                 futhark_mc_segmap_parloop_73873_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73873_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73873_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73873_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_73871_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_73871_end -
                 futhark_mc_segmap_nested_task_73871_start;
        
        ctx->futhark_mc_segmap_nested_task_73871_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_73871_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_73871_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_73840(void *args, int64_t start,
                                           int64_t end, int flat_tid_63644,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73839
    *futhark_mc_segmap_parloop_struct_73839 =
    (struct futhark_mc_segmap_parloop_struct_73839 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73839->ctx;
    uint64_t futhark_mc_segmap_parloop_73840_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73840_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_segmap_parloop_struct_73839->free_m_62255;
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73839->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73839->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_73839->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_73839->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_73839->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_73839->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_73839->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_73839->free_loop_cond_62281;
    float i64_res_62282 =
          futhark_mc_segmap_parloop_struct_73839->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_73839->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67393 =
            futhark_mc_segmap_parloop_struct_73839->free_bytes_67393;
    int64_t bytes_67396 =
            futhark_mc_segmap_parloop_struct_73839->free_bytes_67396;
    int64_t bytes_67408 =
            futhark_mc_segmap_parloop_struct_73839->free_bytes_67408;
    int64_t bytes_67411 =
            futhark_mc_segmap_parloop_struct_73839->free_bytes_67411;
    struct memblock mem_67522 = {.desc ="mem_67522", .mem =
                                 futhark_mc_segmap_parloop_struct_73839->free_mem_67522,
                                 .size =0, .references =NULL};
    size_t mem_67395_cached_sizze_73841 = 0;
    char *mem_67395 = NULL;
    size_t mem_67398_cached_sizze_73842 = 0;
    char *mem_67398 = NULL;
    size_t mem_67401_cached_sizze_73843 = 0;
    char *mem_67401 = NULL;
    size_t mem_67404_cached_sizze_73844 = 0;
    char *mem_67404 = NULL;
    size_t mem_67407_cached_sizze_73845 = 0;
    char *mem_67407 = NULL;
    size_t mem_67410_cached_sizze_73846 = 0;
    char *mem_67410 = NULL;
    size_t mem_67413_cached_sizze_73847 = 0;
    char *mem_67413 = NULL;
    int64_t iterations = end - start;
    int64_t iter_68739 = start;
    
    if (mem_67395_cached_sizze_73841 < (size_t) bytes_67393) {
        mem_67395 = realloc(mem_67395, bytes_67393);
        mem_67395_cached_sizze_73841 = bytes_67393;
    }
    if (mem_67398_cached_sizze_73842 < (size_t) bytes_67396) {
        mem_67398 = realloc(mem_67398, bytes_67396);
        mem_67398_cached_sizze_73842 = bytes_67396;
    }
    if (mem_67401_cached_sizze_73843 < (size_t) bytes_67393) {
        mem_67401 = realloc(mem_67401, bytes_67393);
        mem_67401_cached_sizze_73843 = bytes_67393;
    }
    if (mem_67404_cached_sizze_73844 < (size_t) bytes_67396) {
        mem_67404 = realloc(mem_67404, bytes_67396);
        mem_67404_cached_sizze_73844 = bytes_67396;
    }
    if (mem_67407_cached_sizze_73845 < (size_t) bytes_67393) {
        mem_67407 = realloc(mem_67407, bytes_67393);
        mem_67407_cached_sizze_73845 = bytes_67393;
    }
    if (mem_67410_cached_sizze_73846 < (size_t) bytes_67408) {
        mem_67410 = realloc(mem_67410, bytes_67408);
        mem_67410_cached_sizze_73846 = bytes_67408;
    }
    if (mem_67413_cached_sizze_73847 < (size_t) bytes_67411) {
        mem_67413 = realloc(mem_67413, bytes_67411);
        mem_67413_cached_sizze_73847 = bytes_67411;
    }
    for (; iter_68739 < end; iter_68739++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69020 = m_62255;
        int64_t gtid_63645 = iter_68739;
        int64_t remnant_69021 = iter_68739 - gtid_63645;
        int64_t flat_tid_63646 = (int64_t) 0;
        int32_t num_tasks_69022;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_73848 futhark_mc_task_73848;
        
        futhark_mc_task_73848.ctx = ctx;
        futhark_mc_task_73848.free_n_62256 = n_62256;
        futhark_mc_task_73848.free_gtid_63645 = gtid_63645;
        futhark_mc_task_73848.free_Y_mem_67388 = Y_mem_67388.mem;
        futhark_mc_task_73848.free_mem_67395 = mem_67395;
        
        struct scheduler_segop futhark_mc_task_73848_task;
        
        futhark_mc_task_73848_task.args = &futhark_mc_task_73848;
        futhark_mc_task_73848_task.top_level_fn = futhark_mc_segscan_task_73849;
        futhark_mc_task_73848_task.name = "futhark_mc_segscan_task_73849";
        futhark_mc_task_73848_task.iterations = n_62256;
        futhark_mc_task_73848_task.task_time =
            &ctx->futhark_mc_segscan_task_73849_total_time;
        futhark_mc_task_73848_task.task_iter =
            &ctx->futhark_mc_segscan_task_73849_total_iter;
        futhark_mc_task_73848_task.sched = STATIC;
        futhark_mc_task_73848_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_73849_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73848_task);
        
        if (futhark_mc_segscan_task_73849_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_63805 = ((int64_t *) mem_67395)[i_62270];
        
        for (int64_t i_69036 = 0; i_69036 < n_62256; i_69036++) {
            ((float *) mem_67398)[i_69036] = 0.0F;
        }
        for (int64_t i_69037 = 0; i_69037 < n_62256; i_69037++) {
            ((int64_t *) mem_67401)[i_69037] = (int64_t) -1;
        }
        
        int64_t flat_tid_63648 = (int64_t) 0;
        int32_t num_tasks_69038;
        struct futhark_mc_task_73855 futhark_mc_task_73855;
        
        futhark_mc_task_73855.ctx = ctx;
        futhark_mc_task_73855.free_n_62256 = n_62256;
        futhark_mc_task_73855.free_gtid_63645 = gtid_63645;
        futhark_mc_task_73855.free_Y_mem_67388 = Y_mem_67388.mem;
        futhark_mc_task_73855.free_mem_67395 = mem_67395;
        futhark_mc_task_73855.free_mem_67398 = mem_67398;
        futhark_mc_task_73855.free_mem_67401 = mem_67401;
        
        struct scheduler_segop futhark_mc_task_73855_task;
        
        futhark_mc_task_73855_task.args = &futhark_mc_task_73855;
        futhark_mc_task_73855_task.top_level_fn = futhark_mc_segmap_task_73856;
        futhark_mc_task_73855_task.name = "futhark_mc_segmap_task_73856";
        futhark_mc_task_73855_task.iterations = n_62256;
        futhark_mc_task_73855_task.task_time =
            &ctx->futhark_mc_segmap_task_73856_total_time;
        futhark_mc_task_73855_task.task_iter =
            &ctx->futhark_mc_segmap_task_73856_total_iter;
        futhark_mc_task_73855_task.sched = STATIC;
        futhark_mc_task_73855_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73856_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73855_task);
        
        if (futhark_mc_segmap_task_73856_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_63817 = sub64(last_res_63805, (int64_t) 1);
        int64_t min_arg_63818 = sub64(last_res_63805, min_res_62276);
        int64_t min_res_63819 = smin64(q_62258, last_res_63805);
        float i64_res_63820 = sitofp_i64_f32(last_res_63805);
        float x_63821 = i64_res_62282 - i64_res_63820;
        float max_arg_63822 = x_63821 / 2.0F;
        float max_res_63823 = fmax32(0.0F, max_arg_63822);
        int64_t flat_tid_63650 = (int64_t) 0;
        int32_t num_tasks_69044;
        struct futhark_mc_task_73859 futhark_mc_task_73859;
        
        futhark_mc_task_73859.ctx = ctx;
        futhark_mc_task_73859.free_n_62256 = n_62256;
        futhark_mc_task_73859.free_mem_67401 = mem_67401;
        futhark_mc_task_73859.free_mem_67404 = mem_67404;
        futhark_mc_task_73859.free_mem_67407 = mem_67407;
        
        struct scheduler_segop futhark_mc_task_73859_task;
        
        futhark_mc_task_73859_task.args = &futhark_mc_task_73859;
        futhark_mc_task_73859_task.top_level_fn = futhark_mc_segmap_task_73860;
        futhark_mc_task_73859_task.name = "futhark_mc_segmap_task_73860";
        futhark_mc_task_73859_task.iterations = n_62256;
        futhark_mc_task_73859_task.task_time =
            &ctx->futhark_mc_segmap_task_73860_total_time;
        futhark_mc_task_73859_task.task_iter =
            &ctx->futhark_mc_segmap_task_73860_total_iter;
        futhark_mc_task_73859_task.sched = STATIC;
        futhark_mc_task_73859_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73860_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73859_task);
        
        if (futhark_mc_segmap_task_73860_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_63652 = (int64_t) 0;
        int32_t num_tasks_69048;
        struct futhark_mc_task_73863 futhark_mc_task_73863;
        
        futhark_mc_task_73863.ctx = ctx;
        futhark_mc_task_73863.free_q_62258 = q_62258;
        futhark_mc_task_73863.free_last_res_63805 = last_res_63805;
        futhark_mc_task_73863.free_mem_67410 = mem_67410;
        
        struct scheduler_segop futhark_mc_task_73863_task;
        
        futhark_mc_task_73863_task.args = &futhark_mc_task_73863;
        futhark_mc_task_73863_task.top_level_fn = futhark_mc_segmap_task_73864;
        futhark_mc_task_73863_task.name = "futhark_mc_segmap_task_73864";
        futhark_mc_task_73863_task.iterations = q_62258;
        futhark_mc_task_73863_task.task_time =
            &ctx->futhark_mc_segmap_task_73864_total_time;
        futhark_mc_task_73863_task.task_iter =
            &ctx->futhark_mc_segmap_task_73864_total_iter;
        futhark_mc_task_73863_task.sched = STATIC;
        futhark_mc_task_73863_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73864_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73863_task);
        
        if (futhark_mc_segmap_task_73864_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_63654 = (int64_t) 0;
        int32_t num_tasks_69052;
        int64_t flat_tid_63656 = (int64_t) 0;
        struct futhark_mc_task_73867 futhark_mc_task_73867;
        
        futhark_mc_task_73867.ctx = ctx;
        futhark_mc_task_73867.free_n_62256 = n_62256;
        futhark_mc_task_73867.free_q_62258 = q_62258;
        futhark_mc_task_73867.free_jump_62260 = jump_62260;
        futhark_mc_task_73867.free_n_m_62264 = n_m_62264;
        futhark_mc_task_73867.free_i_62270 = i_62270;
        futhark_mc_task_73867.free_x_62271 = x_62271;
        futhark_mc_task_73867.free_min_res_62276 = min_res_62276;
        futhark_mc_task_73867.free_loop_cond_62281 = loop_cond_62281;
        futhark_mc_task_73867.free_last_res_63805 = last_res_63805;
        futhark_mc_task_73867.free_min_arg_63817 = min_arg_63817;
        futhark_mc_task_73867.free_min_arg_63818 = min_arg_63818;
        futhark_mc_task_73867.free_min_res_63819 = min_res_63819;
        futhark_mc_task_73867.free_max_res_63823 = max_res_63823;
        futhark_mc_task_73867.free_mem_67398 = mem_67398;
        futhark_mc_task_73867.free_mem_67401 = mem_67401;
        futhark_mc_task_73867.free_mem_67404 = mem_67404;
        futhark_mc_task_73867.free_mem_67407 = mem_67407;
        futhark_mc_task_73867.free_mem_67410 = mem_67410;
        futhark_mc_task_73867.free_mem_67413 = mem_67413;
        
        struct scheduler_segop futhark_mc_task_73867_task;
        
        futhark_mc_task_73867_task.args = &futhark_mc_task_73867;
        futhark_mc_task_73867_task.top_level_fn = futhark_mc_segmap_task_73868;
        futhark_mc_task_73867_task.name = "futhark_mc_segmap_task_73868";
        futhark_mc_task_73867_task.iterations = n_m_62264;
        futhark_mc_task_73867_task.task_time =
            &ctx->futhark_mc_segmap_task_73868_total_time;
        futhark_mc_task_73867_task.task_iter =
            &ctx->futhark_mc_segmap_task_73868_total_iter;
        futhark_mc_task_73867_task.sched = DYNAMIC;
        futhark_mc_task_73867_task.nested_fn =
            futhark_mc_segmap_nested_task_73871;
        
        int futhark_mc_segmap_task_73868_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73867_task);
        
        if (futhark_mc_segmap_task_73868_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_67522.mem + gtid_63645 * n_m_62264 * (int64_t) 4,
                mem_67413 + (int64_t) 0, n_m_62264 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67395);
    free(mem_67398);
    free(mem_67401);
    free(mem_67404);
    free(mem_67407);
    free(mem_67410);
    free(mem_67413);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73840_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73840_end -
                 futhark_mc_segmap_parloop_73840_start;
        
        ctx->futhark_mc_segmap_parloop_73840_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73840_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73840_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_73838(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_63644 = tid;
    int num_tasks_68548 = info.nsubtasks;
    struct futhark_mc_task_73827 *futhark_mc_task_73827 =
                                 (struct futhark_mc_task_73827 *) args;
    struct futhark_context *ctx = futhark_mc_task_73827->ctx;
    uint64_t futhark_mc_segmap_nested_task_73838_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_73838_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_task_73827->free_m_62255;
    int64_t n_62256 = futhark_mc_task_73827->free_n_62256;
    int64_t q_62258 = futhark_mc_task_73827->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_73827->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_73827->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_73827->free_i_62270;
    bool x_62271 = futhark_mc_task_73827->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_73827->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_73827->free_loop_cond_62281;
    float i64_res_62282 = futhark_mc_task_73827->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_73827->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67393 = futhark_mc_task_73827->free_bytes_67393;
    int64_t bytes_67396 = futhark_mc_task_73827->free_bytes_67396;
    int64_t bytes_67408 = futhark_mc_task_73827->free_bytes_67408;
    int64_t bytes_67411 = futhark_mc_task_73827->free_bytes_67411;
    struct memblock mem_67522 = {.desc ="mem_67522", .mem =
                                 futhark_mc_task_73827->free_mem_67522, .size =
                                 0, .references =NULL};
    int64_t iter_68739;
    struct futhark_mc_segmap_parloop_struct_73839
    futhark_mc_segmap_parloop_struct_73839;
    
    futhark_mc_segmap_parloop_struct_73839.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73839.free_m_62255 = m_62255;
    futhark_mc_segmap_parloop_struct_73839.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73839.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73839.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_73839.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_73839.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_73839.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_73839.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_73839.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_73839.free_i64_res_62282 = i64_res_62282;
    futhark_mc_segmap_parloop_struct_73839.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_73839.free_bytes_67393 = bytes_67393;
    futhark_mc_segmap_parloop_struct_73839.free_bytes_67396 = bytes_67396;
    futhark_mc_segmap_parloop_struct_73839.free_bytes_67408 = bytes_67408;
    futhark_mc_segmap_parloop_struct_73839.free_bytes_67411 = bytes_67411;
    futhark_mc_segmap_parloop_struct_73839.free_mem_67522 = mem_67522.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73840_task;
    
    futhark_mc_segmap_parloop_73840_task.name =
        "futhark_mc_segmap_parloop_73840";
    futhark_mc_segmap_parloop_73840_task.fn = futhark_mc_segmap_parloop_73840;
    futhark_mc_segmap_parloop_73840_task.args =
        &futhark_mc_segmap_parloop_struct_73839;
    futhark_mc_segmap_parloop_73840_task.iterations = iterations;
    futhark_mc_segmap_parloop_73840_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73840_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73840_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73840_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73840_task);
    
    if (futhark_mc_segmap_parloop_73840_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73840_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73840_total_end -
                 futhark_mc_segmap_parloop_73840_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73840_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73840_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73840_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_73838_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_73838_end -
                 futhark_mc_segmap_nested_task_73838_start;
        
        ctx->futhark_mc_segmap_nested_task_73838_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_73838_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_73838_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73884 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67523;
    int64_t free_bytes_67526;
    int64_t free_bytes_67538;
    int64_t free_bytes_67541;
    char *free_mem_67670;
    char *free_mem_67674;
};
struct futhark_mc_segmap_parloop_struct_73886 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67523;
    int64_t free_bytes_67526;
    int64_t free_bytes_67538;
    int64_t free_bytes_67541;
    char *free_mem_67670;
    char *free_mem_67674;
};
static int futhark_mc_segmap_parloop_73887(void *args, int64_t start,
                                           int64_t end, int flat_tid_64102,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73886
    *futhark_mc_segmap_parloop_struct_73886 =
    (struct futhark_mc_segmap_parloop_struct_73886 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73886->ctx;
    uint64_t futhark_mc_segmap_parloop_73887_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73887_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_segmap_parloop_struct_73886->free_m_62255;
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73886->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73886->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_73886->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_73886->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_73886->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_73886->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_73886->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_73886->free_loop_cond_62281;
    float i64_res_62282 =
          futhark_mc_segmap_parloop_struct_73886->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_73886->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67523 =
            futhark_mc_segmap_parloop_struct_73886->free_bytes_67523;
    int64_t bytes_67526 =
            futhark_mc_segmap_parloop_struct_73886->free_bytes_67526;
    int64_t bytes_67538 =
            futhark_mc_segmap_parloop_struct_73886->free_bytes_67538;
    int64_t bytes_67541 =
            futhark_mc_segmap_parloop_struct_73886->free_bytes_67541;
    struct memblock mem_67670 = {.desc ="mem_67670", .mem =
                                 futhark_mc_segmap_parloop_struct_73886->free_mem_67670,
                                 .size =0, .references =NULL};
    struct memblock mem_67674 = {.desc ="mem_67674", .mem =
                                 futhark_mc_segmap_parloop_struct_73886->free_mem_67674,
                                 .size =0, .references =NULL};
    size_t mem_67549_cached_sizze_73888 = 0;
    char *mem_67549 = NULL;
    size_t mem_67564_cached_sizze_73889 = 0;
    char *mem_67564 = NULL;
    size_t mem_67567_cached_sizze_73890 = 0;
    char *mem_67567 = NULL;
    size_t mem_67594_cached_sizze_73891 = 0;
    char *mem_67594 = NULL;
    size_t mem_67597_cached_sizze_73892 = 0;
    char *mem_67597 = NULL;
    size_t mem_67624_cached_sizze_73893 = 0;
    char *mem_67624 = NULL;
    size_t mem_67639_cached_sizze_73894 = 0;
    char *mem_67639 = NULL;
    size_t mem_67642_cached_sizze_73895 = 0;
    char *mem_67642 = NULL;
    int64_t iterations = end - start;
    int64_t iter_69286 = start;
    
    if (mem_67549_cached_sizze_73888 < (size_t) bytes_67523) {
        mem_67549 = realloc(mem_67549, bytes_67523);
        mem_67549_cached_sizze_73888 = bytes_67523;
    }
    if (mem_67564_cached_sizze_73889 < (size_t) bytes_67526) {
        mem_67564 = realloc(mem_67564, bytes_67526);
        mem_67564_cached_sizze_73889 = bytes_67526;
    }
    if (mem_67567_cached_sizze_73890 < (size_t) bytes_67523) {
        mem_67567 = realloc(mem_67567, bytes_67523);
        mem_67567_cached_sizze_73890 = bytes_67523;
    }
    if (mem_67594_cached_sizze_73891 < (size_t) bytes_67526) {
        mem_67594 = realloc(mem_67594, bytes_67526);
        mem_67594_cached_sizze_73891 = bytes_67526;
    }
    if (mem_67597_cached_sizze_73892 < (size_t) bytes_67523) {
        mem_67597 = realloc(mem_67597, bytes_67523);
        mem_67597_cached_sizze_73892 = bytes_67523;
    }
    if (mem_67624_cached_sizze_73893 < (size_t) bytes_67538) {
        mem_67624 = realloc(mem_67624, bytes_67538);
        mem_67624_cached_sizze_73893 = bytes_67538;
    }
    if (mem_67639_cached_sizze_73894 < (size_t) bytes_67541) {
        mem_67639 = realloc(mem_67639, bytes_67541);
        mem_67639_cached_sizze_73894 = bytes_67541;
    }
    if (mem_67642_cached_sizze_73895 < (size_t) bytes_67541) {
        mem_67642 = realloc(mem_67642, bytes_67541);
        mem_67642_cached_sizze_73895 = bytes_67541;
    }
    for (; iter_69286 < end; iter_69286++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69482 = m_62255;
        int64_t gtid_64103 = iter_69286;
        int64_t remnant_69483 = iter_69286 - gtid_64103;
        int64_t discard_67025;
        int64_t scanacc_69288 = (int64_t) 0;
        
        for (int64_t i_69287 = 0; i_69287 < n_62256; i_69287++) {
            float x_69290 = ((float *) Y_mem_67388.mem)[gtid_64103 * n_62256 +
                                                        i_69287];
            bool isnan_res_69291;
            
            isnan_res_69291 = futrts_isnan32(x_69290);
            
            bool defunc_0_p_res_69292 = !isnan_res_69291;
            int64_t defunc_0_f_res_69293 = btoi_bool_i64(defunc_0_p_res_69292);
            int64_t defunc_1_op_res_69294 = add64(defunc_0_f_res_69293,
                                                  scanacc_69288);
            
            ((int64_t *) mem_67549)[i_69287] = defunc_1_op_res_69294;
            
            int64_t scanacc_tmp_69484 = defunc_1_op_res_69294;
            
            scanacc_69288 = scanacc_tmp_69484;
        }
        discard_67025 = scanacc_69288;
        
        int64_t last_res_62490 = ((int64_t *) mem_67549)[i_62270];
        
        for (int64_t i_69486 = 0; i_69486 < n_62256; i_69486++) {
            ((float *) mem_67564)[i_69486] = 0.0F;
        }
        for (int64_t i_69487 = 0; i_69487 < n_62256; i_69487++) {
            ((int64_t *) mem_67567)[i_69487] = (int64_t) -1;
        }
        for (int64_t write_iter_69296 = 0; write_iter_69296 < n_62256;
             write_iter_69296++) {
            float write_iv_69299 = ((float *) Y_mem_67388.mem)[gtid_64103 *
                                                               n_62256 +
                                                               write_iter_69296];
            bool isnan_res_69300;
            
            isnan_res_69300 = futrts_isnan32(write_iv_69299);
            
            bool defunc_0_p_res_69301 = !isnan_res_69300;
            int64_t defunc_1_f_res_69302;
            
            if (defunc_0_p_res_69301) {
                int64_t write_iv_69303 =
                        ((int64_t *) mem_67549)[write_iter_69296];
                int64_t defunc_1_f_res_t_res_69304 = sub64(write_iv_69303,
                                                           (int64_t) 1);
                
                defunc_1_f_res_69302 = defunc_1_f_res_t_res_69304;
            } else {
                defunc_1_f_res_69302 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_69302) &&
                slt64(defunc_1_f_res_69302, n_62256)) {
                ((int64_t *) mem_67567)[defunc_1_f_res_69302] =
                    write_iter_69296;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_69302) &&
                slt64(defunc_1_f_res_69302, n_62256)) {
                memmove(mem_67564 + defunc_1_f_res_69302 * (int64_t) 4,
                        Y_mem_67388.mem + (gtid_64103 * n_62256 +
                                           write_iter_69296) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_62505 = sub64(last_res_62490, (int64_t) 1);
        int64_t min_arg_62506 = sub64(last_res_62490, min_res_62276);
        int64_t min_res_62507 = smin64(q_62258, last_res_62490);
        float i64_res_62508 = sitofp_i64_f32(last_res_62490);
        float x_62509 = i64_res_62282 - i64_res_62508;
        float max_arg_62510 = x_62509 / 2.0F;
        float max_res_62511 = fmax32(0.0F, max_arg_62510);
        
        for (int64_t i_69308 = 0; i_69308 < n_62256; i_69308++) {
            int64_t x_69311 = ((int64_t *) mem_67567)[i_69308];
            int64_t defunc_0_f_res_69312 = add64((int64_t) 1, x_69311);
            float defunc_0_f_res_69313 = sitofp_i64_f32(x_69311);
            
            ((float *) mem_67594)[i_69308] = defunc_0_f_res_69313;
            ((int64_t *) mem_67597)[i_69308] = defunc_0_f_res_69312;
        }
        for (int64_t i_69316 = 0; i_69316 < q_62258; i_69316++) {
            bool cond_69318 = sle64(last_res_62490, i_69316);
            float defunc_0_f_res_69319;
            
            if (cond_69318) {
                defunc_0_f_res_69319 = 0.0F;
            } else {
                defunc_0_f_res_69319 = 1.0F;
            }
            ((float *) mem_67624)[i_69316] = defunc_0_f_res_69319;
        }
        for (int64_t i_69321 = 0; i_69321 < n_m_62264; i_69321++) {
            int64_t min_arg_69324 = mul64(jump_62260, i_69321);
            int64_t min_res_69325 = smin64(i_62270, min_arg_69324);
            int64_t defunc_0_g_res_69326 = add64((int64_t) 1, min_res_69325);
            bool init_idx_69327;
            int64_t init_idx_69328;
            int64_t init_idx_69329;
            bool loop_while_69330;
            int64_t low_69331;
            int64_t high_69332;
            
            loop_while_69330 = x_62271;
            low_69331 = (int64_t) 0;
            high_69332 = i_62270;
            while (loop_while_69330) {
                int64_t x_69333 = add64(low_69331, high_69332);
                int64_t mid_69334 = sdiv64(x_69333, (int64_t) 2);
                bool x_69335 = sle64((int64_t) 0, mid_69334);
                bool y_69336 = slt64(mid_69334, n_62256);
                bool bounds_check_69337 = x_69335 && y_69336;
                bool index_certs_69338;
                
                if (!bounds_check_69337) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_69334,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t mid_id_69339 = ((int64_t *) mem_67597)[mid_69334];
                bool cond_69340 = slt64(mid_id_69339, (int64_t) 0);
                int64_t mid_idx_69341;
                
                if (cond_69340) {
                    mid_idx_69341 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_69341 = mid_id_69339;
                }
                
                bool cond_69342 = sle64(defunc_0_g_res_69326, mid_idx_69341);
                int64_t loopres_69343;
                int64_t loopres_69344;
                
                if (cond_69342) {
                    int64_t loopres_t_res_69345 = sub64(mid_69334, (int64_t) 1);
                    
                    loopres_69343 = low_69331;
                    loopres_69344 = loopres_t_res_69345;
                } else {
                    int64_t loopres_f_res_69346 = add64((int64_t) 1, mid_69334);
                    
                    loopres_69343 = loopres_f_res_69346;
                    loopres_69344 = high_69332;
                }
                
                bool loop_cond_69347 = sle64(loopres_69343, loopres_69344);
                bool loop_while_tmp_69495 = loop_cond_69347;
                int64_t low_tmp_69496 = loopres_69343;
                int64_t high_tmp_69497 = loopres_69344;
                
                loop_while_69330 = loop_while_tmp_69495;
                low_69331 = low_tmp_69496;
                high_69332 = high_tmp_69497;
            }
            init_idx_69327 = loop_while_69330;
            init_idx_69328 = low_69331;
            init_idx_69329 = high_69332;
            
            bool idx_69348;
            int64_t idx_69349;
            int64_t idx_69350;
            int64_t idx_69351;
            bool loop_while_69352;
            int64_t l_idx_69353;
            int64_t r_idx_69354;
            int64_t span_69355;
            
            loop_while_69352 = loop_cond_62281;
            l_idx_69353 = init_idx_69328;
            r_idx_69354 = init_idx_69328;
            span_69355 = (int64_t) 1;
            while (loop_while_69352) {
                int64_t max_arg_69356 = sub64(l_idx_69353, (int64_t) 1);
                int64_t max_res_69357 = smax64((int64_t) 0, max_arg_69356);
                int64_t min_arg_69358 = add64((int64_t) 1, r_idx_69354);
                int64_t min_res_69359 = smin64(min_arg_62505, min_arg_69358);
                bool x_69360 = sle64((int64_t) 0, max_res_69357);
                bool y_69361 = slt64(max_res_69357, n_62256);
                bool bounds_check_69362 = x_69360 && y_69361;
                bool index_certs_69363;
                
                if (!bounds_check_69362) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_69357,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t x_69364 = ((int64_t *) mem_67597)[max_res_69357];
                int64_t abs_arg_69365 = sub64(x_69364, defunc_0_g_res_69326);
                int64_t abs_res_69366 = abs64(abs_arg_69365);
                bool x_69367 = sle64((int64_t) 0, min_res_69359);
                bool y_69368 = slt64(min_res_69359, n_62256);
                bool bounds_check_69369 = x_69367 && y_69368;
                bool index_certs_69370;
                
                if (!bounds_check_69369) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_69359,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t x_69371 = ((int64_t *) mem_67597)[min_res_69359];
                int64_t abs_arg_69372 = sub64(x_69371, defunc_0_g_res_69326);
                int64_t abs_res_69373 = abs64(abs_arg_69372);
                bool cond_69374 = max_res_69357 == l_idx_69353;
                int64_t loopres_69375;
                int64_t loopres_69376;
                int64_t loopres_69377;
                
                if (cond_69374) {
                    loopres_69375 = l_idx_69353;
                    loopres_69376 = r_idx_69354;
                    loopres_69377 = min_res_62276;
                } else {
                    bool cond_69378 = slt64(abs_res_69366, abs_res_69373);
                    bool cond_f_res_69379 = min_res_69359 == r_idx_69354;
                    bool x_69380 = !cond_69378;
                    bool y_69381 = cond_f_res_69379 && x_69380;
                    bool cond_69382 = cond_69378 || y_69381;
                    int64_t loopres_f_res_69383;
                    
                    if (cond_69382) {
                        loopres_f_res_69383 = max_res_69357;
                    } else {
                        loopres_f_res_69383 = l_idx_69353;
                    }
                    
                    int64_t loopres_f_res_69384;
                    
                    if (cond_69382) {
                        loopres_f_res_69384 = r_idx_69354;
                    } else {
                        loopres_f_res_69384 = min_res_69359;
                    }
                    
                    int64_t loopres_f_res_69385;
                    
                    if (cond_69382) {
                        int64_t loopres_f_res_t_res_69386 = add64((int64_t) 1,
                                                                  span_69355);
                        
                        loopres_f_res_69385 = loopres_f_res_t_res_69386;
                    } else {
                        int64_t loopres_f_res_f_res_69387 = add64((int64_t) 1,
                                                                  span_69355);
                        
                        loopres_f_res_69385 = loopres_f_res_f_res_69387;
                    }
                    loopres_69375 = loopres_f_res_69383;
                    loopres_69376 = loopres_f_res_69384;
                    loopres_69377 = loopres_f_res_69385;
                }
                
                bool loop_cond_69388 = slt64(loopres_69377, min_res_62276);
                bool loop_while_tmp_69498 = loop_cond_69388;
                int64_t l_idx_tmp_69499 = loopres_69375;
                int64_t r_idx_tmp_69500 = loopres_69376;
                int64_t span_tmp_69501 = loopres_69377;
                
                loop_while_69352 = loop_while_tmp_69498;
                l_idx_69353 = l_idx_tmp_69499;
                r_idx_69354 = r_idx_tmp_69500;
                span_69355 = span_tmp_69501;
            }
            idx_69348 = loop_while_69352;
            idx_69349 = l_idx_69353;
            idx_69350 = r_idx_69354;
            idx_69351 = span_69355;
            
            int64_t min_res_69389 = smin64(min_arg_62506, idx_69349);
            int64_t max_res_69390 = smax64((int64_t) 0, min_res_69389);
            int64_t x_69391 = add64(min_res_62507, max_res_69390);
            int64_t r_69392 = sub64(x_69391, (int64_t) 1);
            bool x_69393 = sle64((int64_t) 0, r_69392);
            bool y_69394 = slt64(r_69392, n_62256);
            bool bounds_check_69395 = x_69393 && y_69394;
            bool index_certs_69396;
            
            if (!bounds_check_69395) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_69392,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_69397 = ((int64_t *) mem_67567)[r_69392];
            int64_t abs_arg_69398 = sub64(x_69397, min_res_69325);
            int64_t abs_res_69399 = abs64(abs_arg_69398);
            bool x_69400 = sle64((int64_t) 0, max_res_69390);
            bool y_69401 = slt64(max_res_69390, n_62256);
            bool bounds_check_69402 = x_69400 && y_69401;
            bool index_certs_69403;
            
            if (!bounds_check_69402) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_69390,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_69404 = ((int64_t *) mem_67567)[max_res_69390];
            int64_t abs_arg_69405 = sub64(x_69404, min_res_69325);
            int64_t abs_res_69406 = abs64(abs_arg_69405);
            int64_t max_res_69407 = smax64(abs_res_69399, abs_res_69406);
            float defunc_0_f_res_69408 = sitofp_i64_f32(max_res_69407);
            float defunc_1_f_res_69409 = max_res_62511 + defunc_0_f_res_69408;
            float defunc_0_f_res_69410 = sitofp_i64_f32(min_res_69325);
            float defunc_2_reduce_res_69411;
            float defunc_2_reduce_res_69412;
            float defunc_2_reduce_res_69413;
            float redout_69415;
            float redout_69416;
            float redout_69417;
            
            redout_69415 = 0.0F;
            redout_69416 = 0.0F;
            redout_69417 = 0.0F;
            for (int64_t i_69414 = 0; i_69414 < q_62258; i_69414++) {
                float x_69418 = ((float *) mem_67624)[i_69414];
                bool cond_69419 = sle64(last_res_62490, i_69414);
                float defunc_0_f_res_69420;
                
                if (cond_69419) {
                    defunc_0_f_res_69420 = 0.0F;
                } else {
                    int64_t i_69421 = add64(max_res_69390, i_69414);
                    float x_69422 = ((float *) mem_67594)[i_69421];
                    float defunc_0_f_res_f_res_69423 = 1.0F + x_69422;
                    
                    defunc_0_f_res_69420 = defunc_0_f_res_f_res_69423;
                }
                
                float x_j_69424 = defunc_0_f_res_69420 - defunc_0_f_res_69410;
                float abs_res_69425 = (float) fabs(x_j_69424);
                float tmp1_69426 = abs_res_69425 / defunc_1_f_res_69409;
                float x_69427 = tmp1_69426 * tmp1_69426;
                float y_69428 = tmp1_69426 * x_69427;
                float tmp2_69429 = 1.0F - y_69428;
                float x_69430 = tmp2_69429 * tmp2_69429;
                float tmp3_69431 = tmp2_69429 * x_69430;
                float w_j_69432 = x_69418 * tmp3_69431;
                float xw_j_69433 = x_j_69424 * w_j_69432;
                float x2w_j_69434 = x_j_69424 * xw_j_69433;
                float defunc_1_op_res_69435 = w_j_69432 + redout_69415;
                float defunc_1_op_res_69436 = xw_j_69433 + redout_69416;
                float defunc_1_op_res_69437 = x2w_j_69434 + redout_69417;
                float redout_tmp_69502 = defunc_1_op_res_69435;
                float redout_tmp_69503 = defunc_1_op_res_69436;
                float redout_tmp_69504 = defunc_1_op_res_69437;
                
                redout_69415 = redout_tmp_69502;
                redout_69416 = redout_tmp_69503;
                redout_69417 = redout_tmp_69504;
            }
            defunc_2_reduce_res_69411 = redout_69415;
            defunc_2_reduce_res_69412 = redout_69416;
            defunc_2_reduce_res_69413 = redout_69417;
            
            float x_69438 = defunc_2_reduce_res_69411 *
                  defunc_2_reduce_res_69413;
            float y_69439 = defunc_2_reduce_res_69412 *
                  defunc_2_reduce_res_69412;
            float y_69440 = x_69438 - y_69439;
            float det1_69441 = 1.0F / y_69440;
            float a11_69442 = defunc_2_reduce_res_69413 * det1_69441;
            float negate_arg_69443 = defunc_2_reduce_res_69412 * det1_69441;
            float b11_69444 = 0.0F - negate_arg_69443;
            float c11_69445 = defunc_2_reduce_res_69411 * det1_69441;
            float defunc_2_reduce_res_69446;
            float defunc_2_reduce_res_69447;
            float redout_69449;
            float redout_69450;
            
            redout_69449 = 0.0F;
            redout_69450 = 0.0F;
            for (int64_t i_69448 = 0; i_69448 < q_62258; i_69448++) {
                float x_69451 = ((float *) mem_67624)[i_69448];
                bool cond_69452 = sle64(last_res_62490, i_69448);
                float defunc_0_f_res_69453;
                
                if (cond_69452) {
                    defunc_0_f_res_69453 = 0.0F;
                } else {
                    int64_t i_69454 = add64(max_res_69390, i_69448);
                    float x_69455 = ((float *) mem_67594)[i_69454];
                    float defunc_0_f_res_f_res_69456 = 1.0F + x_69455;
                    
                    defunc_0_f_res_69453 = defunc_0_f_res_f_res_69456;
                }
                
                float x_j_69457 = defunc_0_f_res_69453 - defunc_0_f_res_69410;
                float abs_res_69458 = (float) fabs(x_j_69457);
                float tmp1_69459 = abs_res_69458 / defunc_1_f_res_69409;
                float x_69460 = tmp1_69459 * tmp1_69459;
                float y_69461 = tmp1_69459 * x_69460;
                float tmp2_69462 = 1.0F - y_69461;
                float x_69463 = tmp2_69462 * tmp2_69462;
                float tmp3_69464 = tmp2_69462 * x_69463;
                float tmp4_69465 = x_69451 * tmp3_69464;
                float defunc_1_f_res_69466 = x_j_69457 * tmp4_69465;
                float defunc_0_f_res_69467;
                
                if (cond_69452) {
                    defunc_0_f_res_69467 = 0.0F;
                } else {
                    int64_t i_69468 = add64(max_res_69390, i_69448);
                    float x_69469 = ((float *) mem_67564)[i_69468];
                    
                    defunc_0_f_res_69467 = x_69469;
                }
                
                float x_69470 = a11_69442 * tmp4_69465;
                float y_69471 = b11_69444 * defunc_1_f_res_69466;
                float x_69472 = x_69470 + y_69471;
                float defunc_9_fit_fun_res_69473 = defunc_0_f_res_69467 *
                      x_69472;
                float x_69474 = b11_69444 * tmp4_69465;
                float y_69475 = c11_69445 * defunc_1_f_res_69466;
                float x_69476 = x_69474 + y_69475;
                float defunc_9_slope_fun_res_69477 = defunc_0_f_res_69467 *
                      x_69476;
                float defunc_1_op_res_69478 = defunc_9_fit_fun_res_69473 +
                      redout_69449;
                float defunc_1_op_res_69479 = defunc_9_slope_fun_res_69477 +
                      redout_69450;
                float redout_tmp_69505 = defunc_1_op_res_69478;
                float redout_tmp_69506 = defunc_1_op_res_69479;
                
                redout_69449 = redout_tmp_69505;
                redout_69450 = redout_tmp_69506;
            }
            defunc_2_reduce_res_69446 = redout_69449;
            defunc_2_reduce_res_69447 = redout_69450;
            ((float *) mem_67639)[i_69321] = defunc_2_reduce_res_69446;
            ((float *) mem_67642)[i_69321] = defunc_2_reduce_res_69447;
        }
        memmove(mem_67670.mem + gtid_64103 * n_m_62264 * (int64_t) 4,
                mem_67639 + (int64_t) 0, n_m_62264 * (int64_t) 4);
        memmove(mem_67674.mem + gtid_64103 * n_m_62264 * (int64_t) 4,
                mem_67642 + (int64_t) 0, n_m_62264 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67549);
    free(mem_67564);
    free(mem_67567);
    free(mem_67594);
    free(mem_67597);
    free(mem_67624);
    free(mem_67639);
    free(mem_67642);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73887_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73887_end -
                 futhark_mc_segmap_parloop_73887_start;
        
        ctx->futhark_mc_segmap_parloop_73887_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73887_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73887_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73885(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64102 = tid;
    int num_tasks_69285 = info.nsubtasks;
    struct futhark_mc_task_73884 *futhark_mc_task_73884 =
                                 (struct futhark_mc_task_73884 *) args;
    struct futhark_context *ctx = futhark_mc_task_73884->ctx;
    uint64_t futhark_mc_segmap_task_73885_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73885_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_task_73884->free_m_62255;
    int64_t n_62256 = futhark_mc_task_73884->free_n_62256;
    int64_t q_62258 = futhark_mc_task_73884->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_73884->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_73884->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_73884->free_i_62270;
    bool x_62271 = futhark_mc_task_73884->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_73884->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_73884->free_loop_cond_62281;
    float i64_res_62282 = futhark_mc_task_73884->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_73884->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67523 = futhark_mc_task_73884->free_bytes_67523;
    int64_t bytes_67526 = futhark_mc_task_73884->free_bytes_67526;
    int64_t bytes_67538 = futhark_mc_task_73884->free_bytes_67538;
    int64_t bytes_67541 = futhark_mc_task_73884->free_bytes_67541;
    struct memblock mem_67670 = {.desc ="mem_67670", .mem =
                                 futhark_mc_task_73884->free_mem_67670, .size =
                                 0, .references =NULL};
    struct memblock mem_67674 = {.desc ="mem_67674", .mem =
                                 futhark_mc_task_73884->free_mem_67674, .size =
                                 0, .references =NULL};
    int64_t iter_69286;
    struct futhark_mc_segmap_parloop_struct_73886
    futhark_mc_segmap_parloop_struct_73886;
    
    futhark_mc_segmap_parloop_struct_73886.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73886.free_m_62255 = m_62255;
    futhark_mc_segmap_parloop_struct_73886.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73886.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73886.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_73886.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_73886.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_73886.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_73886.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_73886.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_73886.free_i64_res_62282 = i64_res_62282;
    futhark_mc_segmap_parloop_struct_73886.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_73886.free_bytes_67523 = bytes_67523;
    futhark_mc_segmap_parloop_struct_73886.free_bytes_67526 = bytes_67526;
    futhark_mc_segmap_parloop_struct_73886.free_bytes_67538 = bytes_67538;
    futhark_mc_segmap_parloop_struct_73886.free_bytes_67541 = bytes_67541;
    futhark_mc_segmap_parloop_struct_73886.free_mem_67670 = mem_67670.mem;
    futhark_mc_segmap_parloop_struct_73886.free_mem_67674 = mem_67674.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73887_task;
    
    futhark_mc_segmap_parloop_73887_task.name =
        "futhark_mc_segmap_parloop_73887";
    futhark_mc_segmap_parloop_73887_task.fn = futhark_mc_segmap_parloop_73887;
    futhark_mc_segmap_parloop_73887_task.args =
        &futhark_mc_segmap_parloop_struct_73886;
    futhark_mc_segmap_parloop_73887_task.iterations = iterations;
    futhark_mc_segmap_parloop_73887_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73887_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73887_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73887_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73887_task);
    
    if (futhark_mc_segmap_parloop_73887_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73887_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73887_total_end -
                 futhark_mc_segmap_parloop_73887_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73887_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73887_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73887_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73885_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73885_end -
                 futhark_mc_segmap_task_73885_start;
        
        ctx->futhark_mc_segmap_task_73885_runs[tid]++;
        ctx->futhark_mc_segmap_task_73885_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73885_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_73897 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67523;
    int64_t free_bytes_67526;
    int64_t free_bytes_67538;
    int64_t free_bytes_67541;
    char *free_mem_67670;
    char *free_mem_67674;
};
struct futhark_mc_task_73907 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_64105;
    char *free_Y_mem_67388;
    char *free_mem_67525;
};
struct futhark_mc_scan_stage_1_parloop_struct_73910 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_64105;
    char *free_Y_mem_67388;
    char *free_mem_67525;
};
static int futhark_mc_scan_stage_1_parloop_73911(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_64106, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_73910
    *futhark_mc_scan_stage_1_parloop_struct_73910 =
    (struct futhark_mc_scan_stage_1_parloop_struct_73910 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_73910->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_73911_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_73911_start = get_wall_time();
    
    int64_t n_62256 =
            futhark_mc_scan_stage_1_parloop_struct_73910->free_n_62256;
    int64_t gtid_64105 =
            futhark_mc_scan_stage_1_parloop_struct_73910->free_gtid_64105;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_73910->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67525 = {.desc ="mem_67525", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_73910->free_mem_67525,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69844 = start;
    int64_t x_69508;
    int64_t x_69509;
    
    x_69508 = (int64_t) 0;
    for (; iter_69844 < end; iter_69844++) {
        int64_t gtid_64107 = iter_69844;
        
        // stage 1 scan body
        {
            float x_69511 = ((float *) Y_mem_67388.mem)[gtid_64105 * n_62256 +
                                                        gtid_64107];
            bool isnan_res_69512;
            
            isnan_res_69512 = futrts_isnan32(x_69511);
            
            bool defunc_0_p_res_69513 = !isnan_res_69512;
            int64_t defunc_0_f_res_69514 = btoi_bool_i64(defunc_0_p_res_69513);
            
            // write mapped values results to memory
            { }
            x_69508 = x_69508;
            // Read next values
            {
                x_69509 = defunc_0_f_res_69514;
            }
            
            int64_t defunc_1_op_res_69510 = add64(x_69508, x_69509);
            
            ((int64_t *) mem_67525.mem)[gtid_64107] = defunc_1_op_res_69510;
            x_69508 = defunc_1_op_res_69510;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_73911_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_73911_end -
                 futhark_mc_scan_stage_1_parloop_73911_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_73911_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_73911_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_73911_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_73912 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_64105;
    char *free_Y_mem_67388;
    char *free_mem_67525;
};
static int futhark_mc_scan_stage_3_parloop_73913(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_64106, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_73912
    *futhark_mc_scan_stage_3_parloop_struct_73912 =
    (struct futhark_mc_scan_stage_3_parloop_struct_73912 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_73912->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_73913_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_73913_start = get_wall_time();
    
    int64_t n_62256 =
            futhark_mc_scan_stage_3_parloop_struct_73912->free_n_62256;
    int64_t gtid_64105 =
            futhark_mc_scan_stage_3_parloop_struct_73912->free_gtid_64105;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_73912->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67525 = {.desc ="mem_67525", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_73912->free_mem_67525,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69856 = start;
    int64_t x_69853;
    int64_t x_69854;
    
    if (iter_69856 == (int64_t) 0) {
        x_69853 = (int64_t) 0;
    } else {
        x_69853 = ((int64_t *) mem_67525.mem)[iter_69856 - (int64_t) 1];
    }
    for (; iter_69856 < end; iter_69856++) {
        int64_t gtid_64107 = iter_69856;
        
        // stage 3 scan body
        {
            float x_69511 = ((float *) Y_mem_67388.mem)[gtid_64105 * n_62256 +
                                                        gtid_64107];
            bool isnan_res_69512;
            
            isnan_res_69512 = futrts_isnan32(x_69511);
            
            bool defunc_0_p_res_69513 = !isnan_res_69512;
            int64_t defunc_0_f_res_69514 = btoi_bool_i64(defunc_0_p_res_69513);
            
            x_69853 = x_69853;
            x_69854 = defunc_0_f_res_69514;
            
            int64_t defunc_1_op_res_69855 = add64(x_69853, x_69854);
            
            ((int64_t *) mem_67525.mem)[gtid_64107] = defunc_1_op_res_69855;
            x_69853 = defunc_1_op_res_69855;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_73913_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_73913_end -
                 futhark_mc_scan_stage_3_parloop_73913_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_73913_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_73913_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_73913_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_73908(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64106 = tid;
    int num_tasks_69843 = info.nsubtasks;
    struct futhark_mc_task_73907 *futhark_mc_task_73907 =
                                 (struct futhark_mc_task_73907 *) args;
    struct futhark_context *ctx = futhark_mc_task_73907->ctx;
    uint64_t futhark_mc_segscan_task_73908_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_73908_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73907->free_n_62256;
    int64_t gtid_64105 = futhark_mc_task_73907->free_gtid_64105;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_73907->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67525 = {.desc ="mem_67525", .mem =
                                 futhark_mc_task_73907->free_mem_67525, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_69850_cached_sizze_73909 = 0;
    char *scan_stage_2_accum_mem_69850 = NULL;
    int64_t iter_69844;
    struct futhark_mc_scan_stage_1_parloop_struct_73910
    futhark_mc_scan_stage_1_parloop_struct_73910;
    
    futhark_mc_scan_stage_1_parloop_struct_73910.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_73910.free_n_62256 = n_62256;
    futhark_mc_scan_stage_1_parloop_struct_73910.free_gtid_64105 = gtid_64105;
    futhark_mc_scan_stage_1_parloop_struct_73910.free_Y_mem_67388 =
        Y_mem_67388.mem;
    futhark_mc_scan_stage_1_parloop_struct_73910.free_mem_67525 = mem_67525.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_73911_task;
    
    futhark_mc_scan_stage_1_parloop_73911_task.name =
        "futhark_mc_scan_stage_1_parloop_73911";
    futhark_mc_scan_stage_1_parloop_73911_task.fn =
        futhark_mc_scan_stage_1_parloop_73911;
    futhark_mc_scan_stage_1_parloop_73911_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_73910;
    futhark_mc_scan_stage_1_parloop_73911_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_73911_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_73911_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_73911_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_73911_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_73911_task);
    
    if (futhark_mc_scan_stage_1_parloop_73911_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_73911_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_73911_total_end -
                 futhark_mc_scan_stage_1_parloop_73911_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73911_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73911_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73911_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_69843)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_69845;
        int64_t x_69846;
        int64_t offset_69848 = (int64_t) 0;
        int64_t offset_index_69849 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_69850_cached_sizze_73909 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_69850 = realloc(scan_stage_2_accum_mem_69850,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_69850_cached_sizze_73909 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_69850)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_69852 = 0; i_69852 < num_tasks_69843 - 1; i_69852++) {
            offset_69848 = squot64(n_62256, sext_i32_i64(num_tasks_69843));
            if (slt64(sext_i32_i64(i_69852), srem64(n_62256,
                                                    sext_i32_i64(num_tasks_69843)))) {
                offset_69848 += (int64_t) 1;
            }
            offset_index_69849 += offset_69848;
            
            int64_t gtid_64107 = offset_index_69849;
            float x_69511 = ((float *) Y_mem_67388.mem)[gtid_64105 * n_62256 +
                                                        gtid_64107];
            bool isnan_res_69512;
            
            isnan_res_69512 = futrts_isnan32(x_69511);
            
            bool defunc_0_p_res_69513 = !isnan_res_69512;
            int64_t defunc_0_f_res_69514 = btoi_bool_i64(defunc_0_p_res_69513);
            
            // Read carry in
            {
                x_69845 =
                    ((int64_t *) scan_stage_2_accum_mem_69850)[(int64_t) 0];
            }
            // Read next values
            {
                x_69846 = ((int64_t *) mem_67525.mem)[offset_index_69849 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_69847 = add64(x_69845, x_69846);
            
            ((int64_t *) mem_67525.mem)[offset_index_69849 - (int64_t) 1] =
                defunc_1_op_res_69847;
            ((int64_t *) scan_stage_2_accum_mem_69850)[(int64_t) 0] =
                defunc_1_op_res_69847;
        }
        
        int64_t iter_69856 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_73912
        futhark_mc_scan_stage_3_parloop_struct_73912;
        
        futhark_mc_scan_stage_3_parloop_struct_73912.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_73912.free_n_62256 = n_62256;
        futhark_mc_scan_stage_3_parloop_struct_73912.free_gtid_64105 =
            gtid_64105;
        futhark_mc_scan_stage_3_parloop_struct_73912.free_Y_mem_67388 =
            Y_mem_67388.mem;
        futhark_mc_scan_stage_3_parloop_struct_73912.free_mem_67525 =
            mem_67525.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_73913_task;
        
        futhark_mc_scan_stage_3_parloop_73913_task.name =
            "futhark_mc_scan_stage_3_parloop_73913";
        futhark_mc_scan_stage_3_parloop_73913_task.fn =
            futhark_mc_scan_stage_3_parloop_73913;
        futhark_mc_scan_stage_3_parloop_73913_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_73912;
        futhark_mc_scan_stage_3_parloop_73913_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_73913_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_73913_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_73913_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_73913_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_73913_task);
        
        if (futhark_mc_scan_stage_3_parloop_73913_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_73913_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_73913_total_end -
                     futhark_mc_scan_stage_3_parloop_73913_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73913_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73913_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73913_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_69850);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_73908_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_73908_end -
                 futhark_mc_segscan_task_73908_start;
        
        ctx->futhark_mc_segscan_task_73908_runs[tid]++;
        ctx->futhark_mc_segscan_task_73908_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_73908_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73914 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_64105;
    char *free_Y_mem_67388;
    char *free_mem_67525;
    char *free_mem_67528;
    char *free_mem_67531;
};
struct futhark_mc_segmap_parloop_struct_73916 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_64105;
    char *free_Y_mem_67388;
    char *free_mem_67525;
    char *free_mem_67528;
    char *free_mem_67531;
};
static int futhark_mc_segmap_parloop_73917(void *args, int64_t start,
                                           int64_t end, int flat_tid_64108,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73916
    *futhark_mc_segmap_parloop_struct_73916 =
    (struct futhark_mc_segmap_parloop_struct_73916 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73916->ctx;
    uint64_t futhark_mc_segmap_parloop_73917_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73917_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73916->free_n_62256;
    int64_t gtid_64105 =
            futhark_mc_segmap_parloop_struct_73916->free_gtid_64105;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_73916->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67525 = {.desc ="mem_67525", .mem =
                                 futhark_mc_segmap_parloop_struct_73916->free_mem_67525,
                                 .size =0, .references =NULL};
    struct memblock mem_67528 = {.desc ="mem_67528", .mem =
                                 futhark_mc_segmap_parloop_struct_73916->free_mem_67528,
                                 .size =0, .references =NULL};
    struct memblock mem_67531 = {.desc ="mem_67531", .mem =
                                 futhark_mc_segmap_parloop_struct_73916->free_mem_67531,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69860 = start;
    
    for (; iter_69860 < end; iter_69860++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69863 = n_62256;
        int64_t gtid_64109 = iter_69860;
        int64_t remnant_69864 = iter_69860 - gtid_64109;
        float x_69515 = ((float *) Y_mem_67388.mem)[gtid_64105 * n_62256 +
                                                    gtid_64109];
        bool isnan_res_69516;
        
        isnan_res_69516 = futrts_isnan32(x_69515);
        
        bool defunc_0_p_res_69517 = !isnan_res_69516;
        int64_t defunc_1_f_res_69518;
        
        if (defunc_0_p_res_69517) {
            int64_t x_69861 = ((int64_t *) mem_67525.mem)[gtid_64109];
            int64_t defunc_1_f_res_t_res_69862 = sub64(x_69861, (int64_t) 1);
            
            defunc_1_f_res_69518 = defunc_1_f_res_t_res_69862;
        } else {
            defunc_1_f_res_69518 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_69518) &&
            slt64(defunc_1_f_res_69518, n_62256)) {
            ((int64_t *) mem_67531.mem)[defunc_1_f_res_69518] = gtid_64109;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_69518) &&
            slt64(defunc_1_f_res_69518, n_62256)) {
            ((float *) mem_67528.mem)[defunc_1_f_res_69518] = x_69515;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73917_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73917_end -
                 futhark_mc_segmap_parloop_73917_start;
        
        ctx->futhark_mc_segmap_parloop_73917_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73917_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73917_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73915(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64108 = tid;
    int num_tasks_69859 = info.nsubtasks;
    struct futhark_mc_task_73914 *futhark_mc_task_73914 =
                                 (struct futhark_mc_task_73914 *) args;
    struct futhark_context *ctx = futhark_mc_task_73914->ctx;
    uint64_t futhark_mc_segmap_task_73915_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73915_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73914->free_n_62256;
    int64_t gtid_64105 = futhark_mc_task_73914->free_gtid_64105;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_73914->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67525 = {.desc ="mem_67525", .mem =
                                 futhark_mc_task_73914->free_mem_67525, .size =
                                 0, .references =NULL};
    struct memblock mem_67528 = {.desc ="mem_67528", .mem =
                                 futhark_mc_task_73914->free_mem_67528, .size =
                                 0, .references =NULL};
    struct memblock mem_67531 = {.desc ="mem_67531", .mem =
                                 futhark_mc_task_73914->free_mem_67531, .size =
                                 0, .references =NULL};
    int64_t iter_69860;
    struct futhark_mc_segmap_parloop_struct_73916
    futhark_mc_segmap_parloop_struct_73916;
    
    futhark_mc_segmap_parloop_struct_73916.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73916.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73916.free_gtid_64105 = gtid_64105;
    futhark_mc_segmap_parloop_struct_73916.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_73916.free_mem_67525 = mem_67525.mem;
    futhark_mc_segmap_parloop_struct_73916.free_mem_67528 = mem_67528.mem;
    futhark_mc_segmap_parloop_struct_73916.free_mem_67531 = mem_67531.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73917_task;
    
    futhark_mc_segmap_parloop_73917_task.name =
        "futhark_mc_segmap_parloop_73917";
    futhark_mc_segmap_parloop_73917_task.fn = futhark_mc_segmap_parloop_73917;
    futhark_mc_segmap_parloop_73917_task.args =
        &futhark_mc_segmap_parloop_struct_73916;
    futhark_mc_segmap_parloop_73917_task.iterations = iterations;
    futhark_mc_segmap_parloop_73917_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73917_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73917_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73917_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73917_task);
    
    if (futhark_mc_segmap_parloop_73917_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73917_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73917_total_end -
                 futhark_mc_segmap_parloop_73917_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73917_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73917_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73917_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73915_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73915_end -
                 futhark_mc_segmap_task_73915_start;
        
        ctx->futhark_mc_segmap_task_73915_runs[tid]++;
        ctx->futhark_mc_segmap_task_73915_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73915_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73918 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    char *free_mem_67531;
    char *free_mem_67534;
    char *free_mem_67537;
};
struct futhark_mc_segmap_parloop_struct_73920 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    char *free_mem_67531;
    char *free_mem_67534;
    char *free_mem_67537;
};
static int futhark_mc_segmap_parloop_73921(void *args, int64_t start,
                                           int64_t end, int flat_tid_64110,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73920
    *futhark_mc_segmap_parloop_struct_73920 =
    (struct futhark_mc_segmap_parloop_struct_73920 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73920->ctx;
    uint64_t futhark_mc_segmap_parloop_73921_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73921_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73920->free_n_62256;
    struct memblock mem_67531 = {.desc ="mem_67531", .mem =
                                 futhark_mc_segmap_parloop_struct_73920->free_mem_67531,
                                 .size =0, .references =NULL};
    struct memblock mem_67534 = {.desc ="mem_67534", .mem =
                                 futhark_mc_segmap_parloop_struct_73920->free_mem_67534,
                                 .size =0, .references =NULL};
    struct memblock mem_67537 = {.desc ="mem_67537", .mem =
                                 futhark_mc_segmap_parloop_struct_73920->free_mem_67537,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69866 = start;
    
    for (; iter_69866 < end; iter_69866++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69867 = n_62256;
        int64_t gtid_64111 = iter_69866;
        int64_t remnant_69868 = iter_69866 - gtid_64111;
        int64_t x_69521 = ((int64_t *) mem_67531.mem)[gtid_64111];
        int64_t defunc_0_f_res_69522 = add64((int64_t) 1, x_69521);
        float defunc_0_f_res_69523 = sitofp_i64_f32(x_69521);
        
        ((float *) mem_67534.mem)[gtid_64111] = defunc_0_f_res_69523;
        ((int64_t *) mem_67537.mem)[gtid_64111] = defunc_0_f_res_69522;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73921_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73921_end -
                 futhark_mc_segmap_parloop_73921_start;
        
        ctx->futhark_mc_segmap_parloop_73921_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73921_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73921_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73919(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64110 = tid;
    int num_tasks_69865 = info.nsubtasks;
    struct futhark_mc_task_73918 *futhark_mc_task_73918 =
                                 (struct futhark_mc_task_73918 *) args;
    struct futhark_context *ctx = futhark_mc_task_73918->ctx;
    uint64_t futhark_mc_segmap_task_73919_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73919_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73918->free_n_62256;
    struct memblock mem_67531 = {.desc ="mem_67531", .mem =
                                 futhark_mc_task_73918->free_mem_67531, .size =
                                 0, .references =NULL};
    struct memblock mem_67534 = {.desc ="mem_67534", .mem =
                                 futhark_mc_task_73918->free_mem_67534, .size =
                                 0, .references =NULL};
    struct memblock mem_67537 = {.desc ="mem_67537", .mem =
                                 futhark_mc_task_73918->free_mem_67537, .size =
                                 0, .references =NULL};
    int64_t iter_69866;
    struct futhark_mc_segmap_parloop_struct_73920
    futhark_mc_segmap_parloop_struct_73920;
    
    futhark_mc_segmap_parloop_struct_73920.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73920.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73920.free_mem_67531 = mem_67531.mem;
    futhark_mc_segmap_parloop_struct_73920.free_mem_67534 = mem_67534.mem;
    futhark_mc_segmap_parloop_struct_73920.free_mem_67537 = mem_67537.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73921_task;
    
    futhark_mc_segmap_parloop_73921_task.name =
        "futhark_mc_segmap_parloop_73921";
    futhark_mc_segmap_parloop_73921_task.fn = futhark_mc_segmap_parloop_73921;
    futhark_mc_segmap_parloop_73921_task.args =
        &futhark_mc_segmap_parloop_struct_73920;
    futhark_mc_segmap_parloop_73921_task.iterations = iterations;
    futhark_mc_segmap_parloop_73921_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73921_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73921_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73921_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73921_task);
    
    if (futhark_mc_segmap_parloop_73921_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73921_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73921_total_end -
                 futhark_mc_segmap_parloop_73921_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73921_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73921_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73921_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73919_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73919_end -
                 futhark_mc_segmap_task_73919_start;
        
        ctx->futhark_mc_segmap_task_73919_runs[tid]++;
        ctx->futhark_mc_segmap_task_73919_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73919_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73922 {
    struct futhark_context *ctx;
    int64_t free_q_62258;
    int64_t free_last_res_64293;
    char *free_mem_67540;
};
struct futhark_mc_segmap_parloop_struct_73924 {
    struct futhark_context *ctx;
    int64_t free_q_62258;
    int64_t free_last_res_64293;
    char *free_mem_67540;
};
static int futhark_mc_segmap_parloop_73925(void *args, int64_t start,
                                           int64_t end, int flat_tid_64112,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73924
    *futhark_mc_segmap_parloop_struct_73924 =
    (struct futhark_mc_segmap_parloop_struct_73924 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73924->ctx;
    uint64_t futhark_mc_segmap_parloop_73925_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73925_start = get_wall_time();
    
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73924->free_q_62258;
    int64_t last_res_64293 =
            futhark_mc_segmap_parloop_struct_73924->free_last_res_64293;
    struct memblock mem_67540 = {.desc ="mem_67540", .mem =
                                 futhark_mc_segmap_parloop_struct_73924->free_mem_67540,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69870 = start;
    
    for (; iter_69870 < end; iter_69870++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69871 = q_62258;
        int64_t gtid_64113 = iter_69870;
        int64_t remnant_69872 = iter_69870 - gtid_64113;
        bool cond_69524 = sle64(last_res_64293, gtid_64113);
        float defunc_0_f_res_69525;
        
        if (cond_69524) {
            defunc_0_f_res_69525 = 0.0F;
        } else {
            defunc_0_f_res_69525 = 1.0F;
        }
        ((float *) mem_67540.mem)[gtid_64113] = defunc_0_f_res_69525;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73925_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73925_end -
                 futhark_mc_segmap_parloop_73925_start;
        
        ctx->futhark_mc_segmap_parloop_73925_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73925_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73925_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73923(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64112 = tid;
    int num_tasks_69869 = info.nsubtasks;
    struct futhark_mc_task_73922 *futhark_mc_task_73922 =
                                 (struct futhark_mc_task_73922 *) args;
    struct futhark_context *ctx = futhark_mc_task_73922->ctx;
    uint64_t futhark_mc_segmap_task_73923_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73923_start = get_wall_time();
    
    int64_t q_62258 = futhark_mc_task_73922->free_q_62258;
    int64_t last_res_64293 = futhark_mc_task_73922->free_last_res_64293;
    struct memblock mem_67540 = {.desc ="mem_67540", .mem =
                                 futhark_mc_task_73922->free_mem_67540, .size =
                                 0, .references =NULL};
    int64_t iter_69870;
    struct futhark_mc_segmap_parloop_struct_73924
    futhark_mc_segmap_parloop_struct_73924;
    
    futhark_mc_segmap_parloop_struct_73924.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73924.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73924.free_last_res_64293 = last_res_64293;
    futhark_mc_segmap_parloop_struct_73924.free_mem_67540 = mem_67540.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73925_task;
    
    futhark_mc_segmap_parloop_73925_task.name =
        "futhark_mc_segmap_parloop_73925";
    futhark_mc_segmap_parloop_73925_task.fn = futhark_mc_segmap_parloop_73925;
    futhark_mc_segmap_parloop_73925_task.args =
        &futhark_mc_segmap_parloop_struct_73924;
    futhark_mc_segmap_parloop_73925_task.iterations = iterations;
    futhark_mc_segmap_parloop_73925_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73925_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73925_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73925_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73925_task);
    
    if (futhark_mc_segmap_parloop_73925_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73925_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73925_total_end -
                 futhark_mc_segmap_parloop_73925_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73925_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73925_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73925_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73923_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73923_end -
                 futhark_mc_segmap_task_73923_start;
        
        ctx->futhark_mc_segmap_task_73923_runs[tid]++;
        ctx->futhark_mc_segmap_task_73923_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73923_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73926 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_64293;
    int64_t free_min_arg_64305;
    int64_t free_min_arg_64306;
    int64_t free_min_res_64307;
    float free_max_res_64311;
    char *free_mem_67528;
    char *free_mem_67531;
    char *free_mem_67534;
    char *free_mem_67537;
    char *free_mem_67540;
    char *free_mem_67543;
    char *free_mem_67546;
};
struct futhark_mc_segmap_parloop_struct_73928 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_64293;
    int64_t free_min_arg_64305;
    int64_t free_min_arg_64306;
    int64_t free_min_res_64307;
    float free_max_res_64311;
    char *free_mem_67528;
    char *free_mem_67531;
    char *free_mem_67534;
    char *free_mem_67537;
    char *free_mem_67540;
    char *free_mem_67543;
    char *free_mem_67546;
};
static int futhark_mc_segmap_parloop_73929(void *args, int64_t start,
                                           int64_t end, int flat_tid_64114,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73928
    *futhark_mc_segmap_parloop_struct_73928 =
    (struct futhark_mc_segmap_parloop_struct_73928 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73928->ctx;
    uint64_t futhark_mc_segmap_parloop_73929_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73929_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73928->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73928->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_73928->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_73928->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_73928->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_73928->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_73928->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_73928->free_loop_cond_62281;
    int64_t last_res_64293 =
            futhark_mc_segmap_parloop_struct_73928->free_last_res_64293;
    int64_t min_arg_64305 =
            futhark_mc_segmap_parloop_struct_73928->free_min_arg_64305;
    int64_t min_arg_64306 =
            futhark_mc_segmap_parloop_struct_73928->free_min_arg_64306;
    int64_t min_res_64307 =
            futhark_mc_segmap_parloop_struct_73928->free_min_res_64307;
    float max_res_64311 =
          futhark_mc_segmap_parloop_struct_73928->free_max_res_64311;
    struct memblock mem_67528 = {.desc ="mem_67528", .mem =
                                 futhark_mc_segmap_parloop_struct_73928->free_mem_67528,
                                 .size =0, .references =NULL};
    struct memblock mem_67531 = {.desc ="mem_67531", .mem =
                                 futhark_mc_segmap_parloop_struct_73928->free_mem_67531,
                                 .size =0, .references =NULL};
    struct memblock mem_67534 = {.desc ="mem_67534", .mem =
                                 futhark_mc_segmap_parloop_struct_73928->free_mem_67534,
                                 .size =0, .references =NULL};
    struct memblock mem_67537 = {.desc ="mem_67537", .mem =
                                 futhark_mc_segmap_parloop_struct_73928->free_mem_67537,
                                 .size =0, .references =NULL};
    struct memblock mem_67540 = {.desc ="mem_67540", .mem =
                                 futhark_mc_segmap_parloop_struct_73928->free_mem_67540,
                                 .size =0, .references =NULL};
    struct memblock mem_67543 = {.desc ="mem_67543", .mem =
                                 futhark_mc_segmap_parloop_struct_73928->free_mem_67543,
                                 .size =0, .references =NULL};
    struct memblock mem_67546 = {.desc ="mem_67546", .mem =
                                 futhark_mc_segmap_parloop_struct_73928->free_mem_67546,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_69874 = start;
    
    for (; iter_69874 < end; iter_69874++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69986 = n_m_62264;
        int64_t gtid_64115 = iter_69874;
        int64_t remnant_69987 = iter_69874 - gtid_64115;
        int64_t min_arg_69685 = mul64(jump_62260, gtid_64115);
        int64_t min_res_69686 = smin64(i_62270, min_arg_69685);
        int64_t defunc_0_g_res_69687 = add64((int64_t) 1, min_res_69686);
        bool init_idx_69688;
        int64_t init_idx_69689;
        int64_t init_idx_69690;
        bool loop_while_69875;
        int64_t low_69876;
        int64_t high_69877;
        
        loop_while_69875 = x_62271;
        low_69876 = (int64_t) 0;
        high_69877 = i_62270;
        while (loop_while_69875) {
            int64_t x_69878 = add64(low_69876, high_69877);
            int64_t mid_69879 = sdiv64(x_69878, (int64_t) 2);
            bool x_69880 = sle64((int64_t) 0, mid_69879);
            bool y_69881 = slt64(mid_69879, n_62256);
            bool bounds_check_69882 = x_69880 && y_69881;
            bool index_certs_69883;
            
            if (!bounds_check_69882) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_69879,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t mid_id_69884 = ((int64_t *) mem_67537.mem)[mid_69879];
            bool cond_69885 = slt64(mid_id_69884, (int64_t) 0);
            int64_t mid_idx_69886;
            
            if (cond_69885) {
                mid_idx_69886 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_69886 = mid_id_69884;
            }
            
            bool cond_69887 = sle64(defunc_0_g_res_69687, mid_idx_69886);
            int64_t loopres_69888;
            int64_t loopres_69889;
            
            if (cond_69887) {
                int64_t loopres_t_res_69890 = sub64(mid_69879, (int64_t) 1);
                
                loopres_69888 = low_69876;
                loopres_69889 = loopres_t_res_69890;
            } else {
                int64_t loopres_f_res_69891 = add64((int64_t) 1, mid_69879);
                
                loopres_69888 = loopres_f_res_69891;
                loopres_69889 = high_69877;
            }
            
            bool loop_cond_69892 = sle64(loopres_69888, loopres_69889);
            bool loop_while_tmp_69988 = loop_cond_69892;
            int64_t low_tmp_69989 = loopres_69888;
            int64_t high_tmp_69990 = loopres_69889;
            
            loop_while_69875 = loop_while_tmp_69988;
            low_69876 = low_tmp_69989;
            high_69877 = high_tmp_69990;
        }
        init_idx_69688 = loop_while_69875;
        init_idx_69689 = low_69876;
        init_idx_69690 = high_69877;
        
        bool idx_69709;
        int64_t idx_69710;
        int64_t idx_69711;
        int64_t idx_69712;
        bool loop_while_69893;
        int64_t l_idx_69894;
        int64_t r_idx_69895;
        int64_t span_69896;
        
        loop_while_69893 = loop_cond_62281;
        l_idx_69894 = init_idx_69689;
        r_idx_69895 = init_idx_69689;
        span_69896 = (int64_t) 1;
        while (loop_while_69893) {
            int64_t max_arg_69897 = sub64(l_idx_69894, (int64_t) 1);
            int64_t max_res_69898 = smax64((int64_t) 0, max_arg_69897);
            int64_t min_arg_69899 = add64((int64_t) 1, r_idx_69895);
            int64_t min_res_69900 = smin64(min_arg_64305, min_arg_69899);
            bool x_69901 = sle64((int64_t) 0, max_res_69898);
            bool y_69902 = slt64(max_res_69898, n_62256);
            bool bounds_check_69903 = x_69901 && y_69902;
            bool index_certs_69904;
            
            if (!bounds_check_69903) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_69898,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_69905 = ((int64_t *) mem_67537.mem)[max_res_69898];
            int64_t abs_arg_69906 = sub64(x_69905, defunc_0_g_res_69687);
            int64_t abs_res_69907 = abs64(abs_arg_69906);
            bool x_69908 = sle64((int64_t) 0, min_res_69900);
            bool y_69909 = slt64(min_res_69900, n_62256);
            bool bounds_check_69910 = x_69908 && y_69909;
            bool index_certs_69911;
            
            if (!bounds_check_69910) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_69900,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_69912 = ((int64_t *) mem_67537.mem)[min_res_69900];
            int64_t abs_arg_69913 = sub64(x_69912, defunc_0_g_res_69687);
            int64_t abs_res_69914 = abs64(abs_arg_69913);
            bool cond_69915 = max_res_69898 == l_idx_69894;
            int64_t loopres_69916;
            int64_t loopres_69917;
            int64_t loopres_69918;
            
            if (cond_69915) {
                loopres_69916 = l_idx_69894;
                loopres_69917 = r_idx_69895;
                loopres_69918 = min_res_62276;
            } else {
                bool cond_69919 = slt64(abs_res_69907, abs_res_69914);
                bool cond_f_res_69920 = min_res_69900 == r_idx_69895;
                bool x_69921 = !cond_69919;
                bool y_69922 = cond_f_res_69920 && x_69921;
                bool cond_69923 = cond_69919 || y_69922;
                int64_t loopres_f_res_69924;
                
                if (cond_69923) {
                    loopres_f_res_69924 = max_res_69898;
                } else {
                    loopres_f_res_69924 = l_idx_69894;
                }
                
                int64_t loopres_f_res_69925;
                
                if (cond_69923) {
                    loopres_f_res_69925 = r_idx_69895;
                } else {
                    loopres_f_res_69925 = min_res_69900;
                }
                
                int64_t loopres_f_res_69926;
                
                if (cond_69923) {
                    int64_t loopres_f_res_t_res_69927 = add64((int64_t) 1,
                                                              span_69896);
                    
                    loopres_f_res_69926 = loopres_f_res_t_res_69927;
                } else {
                    int64_t loopres_f_res_f_res_69928 = add64((int64_t) 1,
                                                              span_69896);
                    
                    loopres_f_res_69926 = loopres_f_res_f_res_69928;
                }
                loopres_69916 = loopres_f_res_69924;
                loopres_69917 = loopres_f_res_69925;
                loopres_69918 = loopres_f_res_69926;
            }
            
            bool loop_cond_69929 = slt64(loopres_69918, min_res_62276);
            bool loop_while_tmp_69991 = loop_cond_69929;
            int64_t l_idx_tmp_69992 = loopres_69916;
            int64_t r_idx_tmp_69993 = loopres_69917;
            int64_t span_tmp_69994 = loopres_69918;
            
            loop_while_69893 = loop_while_tmp_69991;
            l_idx_69894 = l_idx_tmp_69992;
            r_idx_69895 = r_idx_tmp_69993;
            span_69896 = span_tmp_69994;
        }
        idx_69709 = loop_while_69893;
        idx_69710 = l_idx_69894;
        idx_69711 = r_idx_69895;
        idx_69712 = span_69896;
        
        int64_t min_res_69750 = smin64(min_arg_64306, idx_69710);
        int64_t max_res_69751 = smax64((int64_t) 0, min_res_69750);
        int64_t x_69752 = add64(min_res_64307, max_res_69751);
        int64_t r_69753 = sub64(x_69752, (int64_t) 1);
        bool x_69754 = sle64((int64_t) 0, r_69753);
        bool y_69755 = slt64(r_69753, n_62256);
        bool bounds_check_69756 = x_69754 && y_69755;
        bool index_certs_69757;
        
        if (!bounds_check_69756) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_69753,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_69758 = ((int64_t *) mem_67531.mem)[r_69753];
        int64_t abs_arg_69759 = sub64(x_69758, min_res_69686);
        int64_t abs_res_69760 = abs64(abs_arg_69759);
        bool x_69761 = sle64((int64_t) 0, max_res_69751);
        bool y_69762 = slt64(max_res_69751, n_62256);
        bool bounds_check_69763 = x_69761 && y_69762;
        bool index_certs_69764;
        
        if (!bounds_check_69763) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_69751,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_69765 = ((int64_t *) mem_67531.mem)[max_res_69751];
        int64_t abs_arg_69766 = sub64(x_69765, min_res_69686);
        int64_t abs_res_69767 = abs64(abs_arg_69766);
        int64_t max_res_69768 = smax64(abs_res_69760, abs_res_69767);
        float defunc_0_f_res_69769 = sitofp_i64_f32(max_res_69768);
        float defunc_1_f_res_69770 = max_res_64311 + defunc_0_f_res_69769;
        float defunc_0_f_res_69771 = sitofp_i64_f32(min_res_69686);
        float defunc_2_reduce_res_69772;
        float defunc_2_reduce_res_69773;
        float defunc_2_reduce_res_69774;
        float redout_69931;
        float redout_69932;
        float redout_69933;
        
        redout_69931 = 0.0F;
        redout_69932 = 0.0F;
        redout_69933 = 0.0F;
        for (int64_t i_69930 = 0; i_69930 < q_62258; i_69930++) {
            float x_69934 = ((float *) mem_67540.mem)[i_69930];
            bool cond_69935 = sle64(last_res_64293, i_69930);
            float defunc_0_f_res_69936;
            
            if (cond_69935) {
                defunc_0_f_res_69936 = 0.0F;
            } else {
                int64_t i_69937 = add64(max_res_69751, i_69930);
                float x_69938 = ((float *) mem_67534.mem)[i_69937];
                float defunc_0_f_res_f_res_69939 = 1.0F + x_69938;
                
                defunc_0_f_res_69936 = defunc_0_f_res_f_res_69939;
            }
            
            float x_j_69940 = defunc_0_f_res_69936 - defunc_0_f_res_69771;
            float abs_res_69941 = (float) fabs(x_j_69940);
            float tmp1_69942 = abs_res_69941 / defunc_1_f_res_69770;
            float x_69943 = tmp1_69942 * tmp1_69942;
            float y_69944 = tmp1_69942 * x_69943;
            float tmp2_69945 = 1.0F - y_69944;
            float x_69946 = tmp2_69945 * tmp2_69945;
            float tmp3_69947 = tmp2_69945 * x_69946;
            float w_j_69948 = x_69934 * tmp3_69947;
            float xw_j_69949 = x_j_69940 * w_j_69948;
            float x2w_j_69950 = x_j_69940 * xw_j_69949;
            float defunc_1_op_res_69951 = w_j_69948 + redout_69931;
            float defunc_1_op_res_69952 = xw_j_69949 + redout_69932;
            float defunc_1_op_res_69953 = x2w_j_69950 + redout_69933;
            float redout_tmp_69995 = defunc_1_op_res_69951;
            float redout_tmp_69996 = defunc_1_op_res_69952;
            float redout_tmp_69997 = defunc_1_op_res_69953;
            
            redout_69931 = redout_tmp_69995;
            redout_69932 = redout_tmp_69996;
            redout_69933 = redout_tmp_69997;
        }
        defunc_2_reduce_res_69772 = redout_69931;
        defunc_2_reduce_res_69773 = redout_69932;
        defunc_2_reduce_res_69774 = redout_69933;
        
        float x_69799 = defunc_2_reduce_res_69772 * defunc_2_reduce_res_69774;
        float y_69800 = defunc_2_reduce_res_69773 * defunc_2_reduce_res_69773;
        float y_69801 = x_69799 - y_69800;
        float det1_69802 = 1.0F / y_69801;
        float a11_69803 = defunc_2_reduce_res_69774 * det1_69802;
        float negate_arg_69804 = defunc_2_reduce_res_69773 * det1_69802;
        float b11_69805 = 0.0F - negate_arg_69804;
        float c11_69806 = defunc_2_reduce_res_69772 * det1_69802;
        float defunc_2_reduce_res_69807;
        float defunc_2_reduce_res_69808;
        float redout_69955;
        float redout_69956;
        
        redout_69955 = 0.0F;
        redout_69956 = 0.0F;
        for (int64_t i_69954 = 0; i_69954 < q_62258; i_69954++) {
            float x_69957 = ((float *) mem_67540.mem)[i_69954];
            bool cond_69958 = sle64(last_res_64293, i_69954);
            float defunc_0_f_res_69959;
            
            if (cond_69958) {
                defunc_0_f_res_69959 = 0.0F;
            } else {
                int64_t i_69960 = add64(max_res_69751, i_69954);
                float x_69961 = ((float *) mem_67534.mem)[i_69960];
                float defunc_0_f_res_f_res_69962 = 1.0F + x_69961;
                
                defunc_0_f_res_69959 = defunc_0_f_res_f_res_69962;
            }
            
            float x_j_69963 = defunc_0_f_res_69959 - defunc_0_f_res_69771;
            float abs_res_69964 = (float) fabs(x_j_69963);
            float tmp1_69965 = abs_res_69964 / defunc_1_f_res_69770;
            float x_69966 = tmp1_69965 * tmp1_69965;
            float y_69967 = tmp1_69965 * x_69966;
            float tmp2_69968 = 1.0F - y_69967;
            float x_69969 = tmp2_69968 * tmp2_69968;
            float tmp3_69970 = tmp2_69968 * x_69969;
            float tmp4_69971 = x_69957 * tmp3_69970;
            float defunc_1_f_res_69972 = x_j_69963 * tmp4_69971;
            float defunc_0_f_res_69973;
            
            if (cond_69958) {
                defunc_0_f_res_69973 = 0.0F;
            } else {
                int64_t i_69974 = add64(max_res_69751, i_69954);
                float x_69975 = ((float *) mem_67528.mem)[i_69974];
                
                defunc_0_f_res_69973 = x_69975;
            }
            
            float x_69976 = a11_69803 * tmp4_69971;
            float y_69977 = b11_69805 * defunc_1_f_res_69972;
            float x_69978 = x_69976 + y_69977;
            float defunc_9_fit_fun_res_69979 = defunc_0_f_res_69973 * x_69978;
            float x_69980 = b11_69805 * tmp4_69971;
            float y_69981 = c11_69806 * defunc_1_f_res_69972;
            float x_69982 = x_69980 + y_69981;
            float defunc_9_slope_fun_res_69983 = defunc_0_f_res_69973 * x_69982;
            float defunc_1_op_res_69984 = defunc_9_fit_fun_res_69979 +
                  redout_69955;
            float defunc_1_op_res_69985 = defunc_9_slope_fun_res_69983 +
                  redout_69956;
            float redout_tmp_69998 = defunc_1_op_res_69984;
            float redout_tmp_69999 = defunc_1_op_res_69985;
            
            redout_69955 = redout_tmp_69998;
            redout_69956 = redout_tmp_69999;
        }
        defunc_2_reduce_res_69807 = redout_69955;
        defunc_2_reduce_res_69808 = redout_69956;
        ((float *) mem_67543.mem)[gtid_64115] = defunc_2_reduce_res_69807;
        ((float *) mem_67546.mem)[gtid_64115] = defunc_2_reduce_res_69808;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73929_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73929_end -
                 futhark_mc_segmap_parloop_73929_start;
        
        ctx->futhark_mc_segmap_parloop_73929_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73929_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73929_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73927(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64114 = tid;
    int num_tasks_69873 = info.nsubtasks;
    struct futhark_mc_task_73926 *futhark_mc_task_73926 =
                                 (struct futhark_mc_task_73926 *) args;
    struct futhark_context *ctx = futhark_mc_task_73926->ctx;
    uint64_t futhark_mc_segmap_task_73927_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73927_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73926->free_n_62256;
    int64_t q_62258 = futhark_mc_task_73926->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_73926->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_73926->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_73926->free_i_62270;
    bool x_62271 = futhark_mc_task_73926->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_73926->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_73926->free_loop_cond_62281;
    int64_t last_res_64293 = futhark_mc_task_73926->free_last_res_64293;
    int64_t min_arg_64305 = futhark_mc_task_73926->free_min_arg_64305;
    int64_t min_arg_64306 = futhark_mc_task_73926->free_min_arg_64306;
    int64_t min_res_64307 = futhark_mc_task_73926->free_min_res_64307;
    float max_res_64311 = futhark_mc_task_73926->free_max_res_64311;
    struct memblock mem_67528 = {.desc ="mem_67528", .mem =
                                 futhark_mc_task_73926->free_mem_67528, .size =
                                 0, .references =NULL};
    struct memblock mem_67531 = {.desc ="mem_67531", .mem =
                                 futhark_mc_task_73926->free_mem_67531, .size =
                                 0, .references =NULL};
    struct memblock mem_67534 = {.desc ="mem_67534", .mem =
                                 futhark_mc_task_73926->free_mem_67534, .size =
                                 0, .references =NULL};
    struct memblock mem_67537 = {.desc ="mem_67537", .mem =
                                 futhark_mc_task_73926->free_mem_67537, .size =
                                 0, .references =NULL};
    struct memblock mem_67540 = {.desc ="mem_67540", .mem =
                                 futhark_mc_task_73926->free_mem_67540, .size =
                                 0, .references =NULL};
    struct memblock mem_67543 = {.desc ="mem_67543", .mem =
                                 futhark_mc_task_73926->free_mem_67543, .size =
                                 0, .references =NULL};
    struct memblock mem_67546 = {.desc ="mem_67546", .mem =
                                 futhark_mc_task_73926->free_mem_67546, .size =
                                 0, .references =NULL};
    int64_t iter_69874;
    struct futhark_mc_segmap_parloop_struct_73928
    futhark_mc_segmap_parloop_struct_73928;
    
    futhark_mc_segmap_parloop_struct_73928.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73928.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73928.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73928.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_73928.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_73928.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_73928.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_73928.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_73928.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_73928.free_last_res_64293 = last_res_64293;
    futhark_mc_segmap_parloop_struct_73928.free_min_arg_64305 = min_arg_64305;
    futhark_mc_segmap_parloop_struct_73928.free_min_arg_64306 = min_arg_64306;
    futhark_mc_segmap_parloop_struct_73928.free_min_res_64307 = min_res_64307;
    futhark_mc_segmap_parloop_struct_73928.free_max_res_64311 = max_res_64311;
    futhark_mc_segmap_parloop_struct_73928.free_mem_67528 = mem_67528.mem;
    futhark_mc_segmap_parloop_struct_73928.free_mem_67531 = mem_67531.mem;
    futhark_mc_segmap_parloop_struct_73928.free_mem_67534 = mem_67534.mem;
    futhark_mc_segmap_parloop_struct_73928.free_mem_67537 = mem_67537.mem;
    futhark_mc_segmap_parloop_struct_73928.free_mem_67540 = mem_67540.mem;
    futhark_mc_segmap_parloop_struct_73928.free_mem_67543 = mem_67543.mem;
    futhark_mc_segmap_parloop_struct_73928.free_mem_67546 = mem_67546.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73929_task;
    
    futhark_mc_segmap_parloop_73929_task.name =
        "futhark_mc_segmap_parloop_73929";
    futhark_mc_segmap_parloop_73929_task.fn = futhark_mc_segmap_parloop_73929;
    futhark_mc_segmap_parloop_73929_task.args =
        &futhark_mc_segmap_parloop_struct_73928;
    futhark_mc_segmap_parloop_73929_task.iterations = iterations;
    futhark_mc_segmap_parloop_73929_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73929_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73929_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73929_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73929_task);
    
    if (futhark_mc_segmap_parloop_73929_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73929_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73929_total_end -
                 futhark_mc_segmap_parloop_73929_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73929_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73929_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73929_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73927_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73927_end -
                 futhark_mc_segmap_task_73927_start;
        
        ctx->futhark_mc_segmap_task_73927_runs[tid]++;
        ctx->futhark_mc_segmap_task_73927_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73927_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_73931 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_64293;
    int64_t free_min_arg_64305;
    int64_t free_min_arg_64306;
    int64_t free_min_res_64307;
    float free_max_res_64311;
    char *free_mem_67528;
    char *free_mem_67531;
    char *free_mem_67534;
    char *free_mem_67537;
    char *free_mem_67540;
    char *free_mem_67543;
    char *free_mem_67546;
};
struct futhark_mc_task_73933 {
    struct futhark_context *ctx;
    int64_t free_last_res_64293;
    char *free_mem_67534;
    char *free_mem_67540;
    int64_t free_max_res_69592;
    float free_defunc_1_f_res_69611;
    float free_defunc_0_f_res_69612;
    float *retval_defunc_2_reduce_res_69613;
    float *retval_defunc_2_reduce_res_69614;
    float *retval_defunc_2_reduce_res_69615;
};
struct futhark_mc_segred_stage_1_parloop_struct_73938 {
    struct futhark_context *ctx;
    int64_t free_last_res_64293;
    char *free_mem_67534;
    char *free_mem_67540;
    int64_t free_max_res_69592;
    float free_defunc_1_f_res_69611;
    float free_defunc_0_f_res_69612;
    char *free_reduce_stage_1_tid_res_arr_mem_70125;
    char *free_reduce_stage_1_tid_res_arr_mem_70127;
    char *free_reduce_stage_1_tid_res_arr_mem_70129;
};
static int futhark_mc_segred_stage_1_parloop_73939(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_64118, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_73938
    *futhark_mc_segred_stage_1_parloop_struct_73938 =
    (struct futhark_mc_segred_stage_1_parloop_struct_73938 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_73938->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_73939_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73939_start = get_wall_time();
    
    int64_t last_res_64293 =
            futhark_mc_segred_stage_1_parloop_struct_73938->free_last_res_64293;
    struct memblock mem_67534 = {.desc ="mem_67534", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73938->free_mem_67534,
                                 .size =0, .references =NULL};
    struct memblock mem_67540 = {.desc ="mem_67540", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73938->free_mem_67540,
                                 .size =0, .references =NULL};
    int64_t max_res_69592 =
            futhark_mc_segred_stage_1_parloop_struct_73938->free_max_res_69592;
    float defunc_1_f_res_69611 =
          futhark_mc_segred_stage_1_parloop_struct_73938->free_defunc_1_f_res_69611;
    float defunc_0_f_res_69612 =
          futhark_mc_segred_stage_1_parloop_struct_73938->free_defunc_0_f_res_69612;
    struct memblock reduce_stage_1_tid_res_arr_mem_70125 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_70125",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_73938->free_reduce_stage_1_tid_res_arr_mem_70125,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_70127 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_70127",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_73938->free_reduce_stage_1_tid_res_arr_mem_70127,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_70129 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_70129",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_73938->free_reduce_stage_1_tid_res_arr_mem_70129,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70131 = start;
    float x_70056;
    float x_70057;
    float x_70059;
    float x_70060;
    float x_70062;
    float x_70063;
    float local_acc_70132 = 0.0F;
    float local_acc_70133 = 0.0F;
    float local_acc_70134 = 0.0F;
    
    for (; iter_70131 < end; iter_70131++) {
        int64_t gtid_64119 = iter_70131;
        float x_70065 = ((float *) mem_67540.mem)[gtid_64119];
        bool cond_70066 = sle64(last_res_64293, gtid_64119);
        float defunc_0_f_res_70067;
        
        if (cond_70066) {
            defunc_0_f_res_70067 = 0.0F;
        } else {
            int64_t i_70068 = add64(gtid_64119, max_res_69592);
            float x_70069 = ((float *) mem_67534.mem)[i_70068];
            float defunc_0_f_res_f_res_70070 = 1.0F + x_70069;
            
            defunc_0_f_res_70067 = defunc_0_f_res_f_res_70070;
        }
        
        float x_j_70071 = defunc_0_f_res_70067 - defunc_0_f_res_69612;
        float abs_res_70072 = (float) fabs(x_j_70071);
        float tmp1_70073 = abs_res_70072 / defunc_1_f_res_69611;
        float x_70074 = tmp1_70073 * tmp1_70073;
        float y_70075 = tmp1_70073 * x_70074;
        float tmp2_70076 = 1.0F - y_70075;
        float x_70077 = tmp2_70076 * tmp2_70076;
        float tmp3_70078 = tmp2_70076 * x_70077;
        float w_j_70079 = x_70065 * tmp3_70078;
        float xw_j_70080 = x_j_70071 * w_j_70079;
        float x2w_j_70081 = x_j_70071 * xw_j_70080;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_70056 = local_acc_70132;
        }
        // Load next params
        {
            x_70057 = w_j_70079;
        }
        // Red body
        {
            float defunc_1_op_res_70058 = x_70056 + x_70057;
            
            local_acc_70132 = defunc_1_op_res_70058;
        }
        // Load accum params
        {
            x_70059 = local_acc_70133;
        }
        // Load next params
        {
            x_70060 = xw_j_70080;
        }
        // Red body
        {
            float defunc_1_op_res_70061 = x_70059 + x_70060;
            
            local_acc_70133 = defunc_1_op_res_70061;
        }
        // Load accum params
        {
            x_70062 = local_acc_70134;
        }
        // Load next params
        {
            x_70063 = x2w_j_70081;
        }
        // Red body
        {
            float defunc_1_op_res_70064 = x_70062 + x_70063;
            
            local_acc_70134 = defunc_1_op_res_70064;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_70125.mem)[flat_tid_64118] =
        local_acc_70132;
    ((float *) reduce_stage_1_tid_res_arr_mem_70127.mem)[flat_tid_64118] =
        local_acc_70133;
    ((float *) reduce_stage_1_tid_res_arr_mem_70129.mem)[flat_tid_64118] =
        local_acc_70134;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73939_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73939_end -
                 futhark_mc_segred_stage_1_parloop_73939_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_73939_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_73939_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_73939_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_73934(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64118 = tid;
    int num_tasks_70124 = info.nsubtasks;
    struct futhark_mc_task_73933 *futhark_mc_task_73933 =
                                 (struct futhark_mc_task_73933 *) args;
    struct futhark_context *ctx = futhark_mc_task_73933->ctx;
    uint64_t futhark_mc_segred_task_73934_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_73934_start = get_wall_time();
    
    int64_t last_res_64293 = futhark_mc_task_73933->free_last_res_64293;
    struct memblock mem_67534 = {.desc ="mem_67534", .mem =
                                 futhark_mc_task_73933->free_mem_67534, .size =
                                 0, .references =NULL};
    struct memblock mem_67540 = {.desc ="mem_67540", .mem =
                                 futhark_mc_task_73933->free_mem_67540, .size =
                                 0, .references =NULL};
    int64_t max_res_69592 = futhark_mc_task_73933->free_max_res_69592;
    float defunc_1_f_res_69611 =
          futhark_mc_task_73933->free_defunc_1_f_res_69611;
    float defunc_0_f_res_69612 =
          futhark_mc_task_73933->free_defunc_0_f_res_69612;
    float defunc_2_reduce_res_69613 =
          *futhark_mc_task_73933->retval_defunc_2_reduce_res_69613;
    float defunc_2_reduce_res_69614 =
          *futhark_mc_task_73933->retval_defunc_2_reduce_res_69614;
    float defunc_2_reduce_res_69615 =
          *futhark_mc_task_73933->retval_defunc_2_reduce_res_69615;
    size_t reduce_stage_1_tid_res_arr_mem_70125_cached_sizze_73935 = 0;
    char *reduce_stage_1_tid_res_arr_mem_70125 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_70127_cached_sizze_73936 = 0;
    char *reduce_stage_1_tid_res_arr_mem_70127 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_70129_cached_sizze_73937 = 0;
    char *reduce_stage_1_tid_res_arr_mem_70129 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_70125_cached_sizze_73935 <
        (size_t) ((int64_t) 4 * num_tasks_70124)) {
        reduce_stage_1_tid_res_arr_mem_70125 =
            realloc(reduce_stage_1_tid_res_arr_mem_70125, (int64_t) 4 *
                    num_tasks_70124);
        reduce_stage_1_tid_res_arr_mem_70125_cached_sizze_73935 = (int64_t) 4 *
            num_tasks_70124;
    }
    if (reduce_stage_1_tid_res_arr_mem_70127_cached_sizze_73936 <
        (size_t) ((int64_t) 4 * num_tasks_70124)) {
        reduce_stage_1_tid_res_arr_mem_70127 =
            realloc(reduce_stage_1_tid_res_arr_mem_70127, (int64_t) 4 *
                    num_tasks_70124);
        reduce_stage_1_tid_res_arr_mem_70127_cached_sizze_73936 = (int64_t) 4 *
            num_tasks_70124;
    }
    if (reduce_stage_1_tid_res_arr_mem_70129_cached_sizze_73937 <
        (size_t) ((int64_t) 4 * num_tasks_70124)) {
        reduce_stage_1_tid_res_arr_mem_70129 =
            realloc(reduce_stage_1_tid_res_arr_mem_70129, (int64_t) 4 *
                    num_tasks_70124);
        reduce_stage_1_tid_res_arr_mem_70129_cached_sizze_73937 = (int64_t) 4 *
            num_tasks_70124;
    }
    
    int64_t iter_70131;
    struct futhark_mc_segred_stage_1_parloop_struct_73938
    futhark_mc_segred_stage_1_parloop_struct_73938;
    
    futhark_mc_segred_stage_1_parloop_struct_73938.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_73938.free_last_res_64293 =
        last_res_64293;
    futhark_mc_segred_stage_1_parloop_struct_73938.free_mem_67534 =
        mem_67534.mem;
    futhark_mc_segred_stage_1_parloop_struct_73938.free_mem_67540 =
        mem_67540.mem;
    futhark_mc_segred_stage_1_parloop_struct_73938.free_max_res_69592 =
        max_res_69592;
    futhark_mc_segred_stage_1_parloop_struct_73938.free_defunc_1_f_res_69611 =
        defunc_1_f_res_69611;
    futhark_mc_segred_stage_1_parloop_struct_73938.free_defunc_0_f_res_69612 =
        defunc_0_f_res_69612;
    futhark_mc_segred_stage_1_parloop_struct_73938.free_reduce_stage_1_tid_res_arr_mem_70125 =
        reduce_stage_1_tid_res_arr_mem_70125;
    futhark_mc_segred_stage_1_parloop_struct_73938.free_reduce_stage_1_tid_res_arr_mem_70127 =
        reduce_stage_1_tid_res_arr_mem_70127;
    futhark_mc_segred_stage_1_parloop_struct_73938.free_reduce_stage_1_tid_res_arr_mem_70129 =
        reduce_stage_1_tid_res_arr_mem_70129;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_73939_task;
    
    futhark_mc_segred_stage_1_parloop_73939_task.name =
        "futhark_mc_segred_stage_1_parloop_73939";
    futhark_mc_segred_stage_1_parloop_73939_task.fn =
        futhark_mc_segred_stage_1_parloop_73939;
    futhark_mc_segred_stage_1_parloop_73939_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_73938;
    futhark_mc_segred_stage_1_parloop_73939_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_73939_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_73939_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73939_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_73939_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_73939_task);
    
    if (futhark_mc_segred_stage_1_parloop_73939_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73939_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73939_total_end -
                 futhark_mc_segred_stage_1_parloop_73939_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73939_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73939_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73939_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_69613 = 0.0F;
        defunc_2_reduce_res_69614 = 0.0F;
        defunc_2_reduce_res_69615 = 0.0F;
    }
    
    float x_70135;
    float x_70136;
    float x_70138;
    float x_70139;
    float x_70141;
    float x_70142;
    
    for (int32_t i_70144 = 0; i_70144 < num_tasks_70124; i_70144++) {
        flat_tid_64118 = i_70144;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_70135 = defunc_2_reduce_res_69613;
            }
            // load next params
            {
                x_70136 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_70125)[flat_tid_64118];
            }
            // red body
            {
                float defunc_1_op_res_70137 = x_70135 + x_70136;
                
                defunc_2_reduce_res_69613 = defunc_1_op_res_70137;
            }
            // load acc params
            {
                x_70138 = defunc_2_reduce_res_69614;
            }
            // load next params
            {
                x_70139 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_70127)[flat_tid_64118];
            }
            // red body
            {
                float defunc_1_op_res_70140 = x_70138 + x_70139;
                
                defunc_2_reduce_res_69614 = defunc_1_op_res_70140;
            }
            // load acc params
            {
                x_70141 = defunc_2_reduce_res_69615;
            }
            // load next params
            {
                x_70142 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_70129)[flat_tid_64118];
            }
            // red body
            {
                float defunc_1_op_res_70143 = x_70141 + x_70142;
                
                defunc_2_reduce_res_69615 = defunc_1_op_res_70143;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_70125);
    free(reduce_stage_1_tid_res_arr_mem_70127);
    free(reduce_stage_1_tid_res_arr_mem_70129);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_73934_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_73934_end -
                 futhark_mc_segred_task_73934_start;
        
        ctx->futhark_mc_segred_task_73934_runs[tid]++;
        ctx->futhark_mc_segred_task_73934_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_73934_iter[tid] += iterations;
    }
    *futhark_mc_task_73933->retval_defunc_2_reduce_res_69613 =
        defunc_2_reduce_res_69613;
    *futhark_mc_task_73933->retval_defunc_2_reduce_res_69614 =
        defunc_2_reduce_res_69614;
    *futhark_mc_task_73933->retval_defunc_2_reduce_res_69615 =
        defunc_2_reduce_res_69615;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73940 {
    struct futhark_context *ctx;
    int64_t free_last_res_64293;
    char *free_mem_67528;
    char *free_mem_67534;
    char *free_mem_67540;
    int64_t free_max_res_69592;
    float free_defunc_1_f_res_69611;
    float free_defunc_0_f_res_69612;
    float free_a11_69646;
    float free_b11_69648;
    float free_c11_69649;
    float *retval_defunc_2_reduce_res_69650;
    float *retval_defunc_2_reduce_res_69651;
};
struct futhark_mc_segred_stage_1_parloop_struct_73944 {
    struct futhark_context *ctx;
    int64_t free_last_res_64293;
    char *free_mem_67528;
    char *free_mem_67534;
    char *free_mem_67540;
    int64_t free_max_res_69592;
    float free_defunc_1_f_res_69611;
    float free_defunc_0_f_res_69612;
    float free_a11_69646;
    float free_b11_69648;
    float free_c11_69649;
    char *free_reduce_stage_1_tid_res_arr_mem_70146;
    char *free_reduce_stage_1_tid_res_arr_mem_70148;
};
static int futhark_mc_segred_stage_1_parloop_73945(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_64120, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_73944
    *futhark_mc_segred_stage_1_parloop_struct_73944 =
    (struct futhark_mc_segred_stage_1_parloop_struct_73944 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_73944->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_73945_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73945_start = get_wall_time();
    
    int64_t last_res_64293 =
            futhark_mc_segred_stage_1_parloop_struct_73944->free_last_res_64293;
    struct memblock mem_67528 = {.desc ="mem_67528", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73944->free_mem_67528,
                                 .size =0, .references =NULL};
    struct memblock mem_67534 = {.desc ="mem_67534", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73944->free_mem_67534,
                                 .size =0, .references =NULL};
    struct memblock mem_67540 = {.desc ="mem_67540", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_73944->free_mem_67540,
                                 .size =0, .references =NULL};
    int64_t max_res_69592 =
            futhark_mc_segred_stage_1_parloop_struct_73944->free_max_res_69592;
    float defunc_1_f_res_69611 =
          futhark_mc_segred_stage_1_parloop_struct_73944->free_defunc_1_f_res_69611;
    float defunc_0_f_res_69612 =
          futhark_mc_segred_stage_1_parloop_struct_73944->free_defunc_0_f_res_69612;
    float a11_69646 =
          futhark_mc_segred_stage_1_parloop_struct_73944->free_a11_69646;
    float b11_69648 =
          futhark_mc_segred_stage_1_parloop_struct_73944->free_b11_69648;
    float c11_69649 =
          futhark_mc_segred_stage_1_parloop_struct_73944->free_c11_69649;
    struct memblock reduce_stage_1_tid_res_arr_mem_70146 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_70146",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_73944->free_reduce_stage_1_tid_res_arr_mem_70146,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_70148 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_70148",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_73944->free_reduce_stage_1_tid_res_arr_mem_70148,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70150 = start;
    float x_70082;
    float x_70083;
    float x_70085;
    float x_70086;
    float local_acc_70151 = 0.0F;
    float local_acc_70152 = 0.0F;
    
    for (; iter_70150 < end; iter_70150++) {
        int64_t gtid_64121 = iter_70150;
        float x_70088 = ((float *) mem_67540.mem)[gtid_64121];
        bool cond_70089 = sle64(last_res_64293, gtid_64121);
        float defunc_0_f_res_70090;
        
        if (cond_70089) {
            defunc_0_f_res_70090 = 0.0F;
        } else {
            int64_t i_70091 = add64(gtid_64121, max_res_69592);
            float x_70092 = ((float *) mem_67534.mem)[i_70091];
            float defunc_0_f_res_f_res_70093 = 1.0F + x_70092;
            
            defunc_0_f_res_70090 = defunc_0_f_res_f_res_70093;
        }
        
        float x_j_70094 = defunc_0_f_res_70090 - defunc_0_f_res_69612;
        float abs_res_70095 = (float) fabs(x_j_70094);
        float tmp1_70096 = abs_res_70095 / defunc_1_f_res_69611;
        float x_70097 = tmp1_70096 * tmp1_70096;
        float y_70098 = tmp1_70096 * x_70097;
        float tmp2_70099 = 1.0F - y_70098;
        float x_70100 = tmp2_70099 * tmp2_70099;
        float tmp3_70101 = tmp2_70099 * x_70100;
        float tmp4_70102 = x_70088 * tmp3_70101;
        float defunc_1_f_res_70103 = x_j_70094 * tmp4_70102;
        float defunc_0_f_res_70104;
        
        if (cond_70089) {
            defunc_0_f_res_70104 = 0.0F;
        } else {
            int64_t i_70105 = add64(gtid_64121, max_res_69592);
            float x_70106 = ((float *) mem_67528.mem)[i_70105];
            
            defunc_0_f_res_70104 = x_70106;
        }
        
        float x_70107 = a11_69646 * tmp4_70102;
        float y_70108 = b11_69648 * defunc_1_f_res_70103;
        float x_70109 = x_70107 + y_70108;
        float defunc_9_fit_fun_res_70110 = defunc_0_f_res_70104 * x_70109;
        float x_70111 = b11_69648 * tmp4_70102;
        float y_70112 = c11_69649 * defunc_1_f_res_70103;
        float x_70113 = x_70111 + y_70112;
        float defunc_9_slope_fun_res_70114 = defunc_0_f_res_70104 * x_70113;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_70082 = local_acc_70151;
        }
        // Load next params
        {
            x_70083 = defunc_9_fit_fun_res_70110;
        }
        // Red body
        {
            float defunc_1_op_res_70084 = x_70082 + x_70083;
            
            local_acc_70151 = defunc_1_op_res_70084;
        }
        // Load accum params
        {
            x_70085 = local_acc_70152;
        }
        // Load next params
        {
            x_70086 = defunc_9_slope_fun_res_70114;
        }
        // Red body
        {
            float defunc_1_op_res_70087 = x_70085 + x_70086;
            
            local_acc_70152 = defunc_1_op_res_70087;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_70146.mem)[flat_tid_64120] =
        local_acc_70151;
    ((float *) reduce_stage_1_tid_res_arr_mem_70148.mem)[flat_tid_64120] =
        local_acc_70152;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73945_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73945_end -
                 futhark_mc_segred_stage_1_parloop_73945_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_73945_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_73945_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_73945_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_73941(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64120 = tid;
    int num_tasks_70145 = info.nsubtasks;
    struct futhark_mc_task_73940 *futhark_mc_task_73940 =
                                 (struct futhark_mc_task_73940 *) args;
    struct futhark_context *ctx = futhark_mc_task_73940->ctx;
    uint64_t futhark_mc_segred_task_73941_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_73941_start = get_wall_time();
    
    int64_t last_res_64293 = futhark_mc_task_73940->free_last_res_64293;
    struct memblock mem_67528 = {.desc ="mem_67528", .mem =
                                 futhark_mc_task_73940->free_mem_67528, .size =
                                 0, .references =NULL};
    struct memblock mem_67534 = {.desc ="mem_67534", .mem =
                                 futhark_mc_task_73940->free_mem_67534, .size =
                                 0, .references =NULL};
    struct memblock mem_67540 = {.desc ="mem_67540", .mem =
                                 futhark_mc_task_73940->free_mem_67540, .size =
                                 0, .references =NULL};
    int64_t max_res_69592 = futhark_mc_task_73940->free_max_res_69592;
    float defunc_1_f_res_69611 =
          futhark_mc_task_73940->free_defunc_1_f_res_69611;
    float defunc_0_f_res_69612 =
          futhark_mc_task_73940->free_defunc_0_f_res_69612;
    float a11_69646 = futhark_mc_task_73940->free_a11_69646;
    float b11_69648 = futhark_mc_task_73940->free_b11_69648;
    float c11_69649 = futhark_mc_task_73940->free_c11_69649;
    float defunc_2_reduce_res_69650 =
          *futhark_mc_task_73940->retval_defunc_2_reduce_res_69650;
    float defunc_2_reduce_res_69651 =
          *futhark_mc_task_73940->retval_defunc_2_reduce_res_69651;
    size_t reduce_stage_1_tid_res_arr_mem_70146_cached_sizze_73942 = 0;
    char *reduce_stage_1_tid_res_arr_mem_70146 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_70148_cached_sizze_73943 = 0;
    char *reduce_stage_1_tid_res_arr_mem_70148 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_70146_cached_sizze_73942 <
        (size_t) ((int64_t) 4 * num_tasks_70145)) {
        reduce_stage_1_tid_res_arr_mem_70146 =
            realloc(reduce_stage_1_tid_res_arr_mem_70146, (int64_t) 4 *
                    num_tasks_70145);
        reduce_stage_1_tid_res_arr_mem_70146_cached_sizze_73942 = (int64_t) 4 *
            num_tasks_70145;
    }
    if (reduce_stage_1_tid_res_arr_mem_70148_cached_sizze_73943 <
        (size_t) ((int64_t) 4 * num_tasks_70145)) {
        reduce_stage_1_tid_res_arr_mem_70148 =
            realloc(reduce_stage_1_tid_res_arr_mem_70148, (int64_t) 4 *
                    num_tasks_70145);
        reduce_stage_1_tid_res_arr_mem_70148_cached_sizze_73943 = (int64_t) 4 *
            num_tasks_70145;
    }
    
    int64_t iter_70150;
    struct futhark_mc_segred_stage_1_parloop_struct_73944
    futhark_mc_segred_stage_1_parloop_struct_73944;
    
    futhark_mc_segred_stage_1_parloop_struct_73944.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_73944.free_last_res_64293 =
        last_res_64293;
    futhark_mc_segred_stage_1_parloop_struct_73944.free_mem_67528 =
        mem_67528.mem;
    futhark_mc_segred_stage_1_parloop_struct_73944.free_mem_67534 =
        mem_67534.mem;
    futhark_mc_segred_stage_1_parloop_struct_73944.free_mem_67540 =
        mem_67540.mem;
    futhark_mc_segred_stage_1_parloop_struct_73944.free_max_res_69592 =
        max_res_69592;
    futhark_mc_segred_stage_1_parloop_struct_73944.free_defunc_1_f_res_69611 =
        defunc_1_f_res_69611;
    futhark_mc_segred_stage_1_parloop_struct_73944.free_defunc_0_f_res_69612 =
        defunc_0_f_res_69612;
    futhark_mc_segred_stage_1_parloop_struct_73944.free_a11_69646 = a11_69646;
    futhark_mc_segred_stage_1_parloop_struct_73944.free_b11_69648 = b11_69648;
    futhark_mc_segred_stage_1_parloop_struct_73944.free_c11_69649 = c11_69649;
    futhark_mc_segred_stage_1_parloop_struct_73944.free_reduce_stage_1_tid_res_arr_mem_70146 =
        reduce_stage_1_tid_res_arr_mem_70146;
    futhark_mc_segred_stage_1_parloop_struct_73944.free_reduce_stage_1_tid_res_arr_mem_70148 =
        reduce_stage_1_tid_res_arr_mem_70148;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_73945_task;
    
    futhark_mc_segred_stage_1_parloop_73945_task.name =
        "futhark_mc_segred_stage_1_parloop_73945";
    futhark_mc_segred_stage_1_parloop_73945_task.fn =
        futhark_mc_segred_stage_1_parloop_73945;
    futhark_mc_segred_stage_1_parloop_73945_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_73944;
    futhark_mc_segred_stage_1_parloop_73945_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_73945_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_73945_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_73945_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_73945_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_73945_task);
    
    if (futhark_mc_segred_stage_1_parloop_73945_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_73945_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_73945_total_end -
                 futhark_mc_segred_stage_1_parloop_73945_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73945_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73945_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_73945_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_69650 = 0.0F;
        defunc_2_reduce_res_69651 = 0.0F;
    }
    
    float x_70153;
    float x_70154;
    float x_70156;
    float x_70157;
    
    for (int32_t i_70159 = 0; i_70159 < num_tasks_70145; i_70159++) {
        flat_tid_64120 = i_70159;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_70153 = defunc_2_reduce_res_69650;
            }
            // load next params
            {
                x_70154 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_70146)[flat_tid_64120];
            }
            // red body
            {
                float defunc_1_op_res_70155 = x_70153 + x_70154;
                
                defunc_2_reduce_res_69650 = defunc_1_op_res_70155;
            }
            // load acc params
            {
                x_70156 = defunc_2_reduce_res_69651;
            }
            // load next params
            {
                x_70157 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_70148)[flat_tid_64120];
            }
            // red body
            {
                float defunc_1_op_res_70158 = x_70156 + x_70157;
                
                defunc_2_reduce_res_69651 = defunc_1_op_res_70158;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_70146);
    free(reduce_stage_1_tid_res_arr_mem_70148);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_73941_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_73941_end -
                 futhark_mc_segred_task_73941_start;
        
        ctx->futhark_mc_segred_task_73941_runs[tid]++;
        ctx->futhark_mc_segred_task_73941_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_73941_iter[tid] += iterations;
    }
    *futhark_mc_task_73940->retval_defunc_2_reduce_res_69650 =
        defunc_2_reduce_res_69650;
    *futhark_mc_task_73940->retval_defunc_2_reduce_res_69651 =
        defunc_2_reduce_res_69651;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_73932(void *args, int64_t start,
                                           int64_t end, int flat_tid_64116,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73931
    *futhark_mc_segmap_parloop_struct_73931 =
    (struct futhark_mc_segmap_parloop_struct_73931 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73931->ctx;
    uint64_t futhark_mc_segmap_parloop_73932_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73932_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73931->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73931->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_73931->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_73931->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_73931->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_73931->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_73931->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_73931->free_loop_cond_62281;
    int64_t last_res_64293 =
            futhark_mc_segmap_parloop_struct_73931->free_last_res_64293;
    int64_t min_arg_64305 =
            futhark_mc_segmap_parloop_struct_73931->free_min_arg_64305;
    int64_t min_arg_64306 =
            futhark_mc_segmap_parloop_struct_73931->free_min_arg_64306;
    int64_t min_res_64307 =
            futhark_mc_segmap_parloop_struct_73931->free_min_res_64307;
    float max_res_64311 =
          futhark_mc_segmap_parloop_struct_73931->free_max_res_64311;
    struct memblock mem_67528 = {.desc ="mem_67528", .mem =
                                 futhark_mc_segmap_parloop_struct_73931->free_mem_67528,
                                 .size =0, .references =NULL};
    struct memblock mem_67531 = {.desc ="mem_67531", .mem =
                                 futhark_mc_segmap_parloop_struct_73931->free_mem_67531,
                                 .size =0, .references =NULL};
    struct memblock mem_67534 = {.desc ="mem_67534", .mem =
                                 futhark_mc_segmap_parloop_struct_73931->free_mem_67534,
                                 .size =0, .references =NULL};
    struct memblock mem_67537 = {.desc ="mem_67537", .mem =
                                 futhark_mc_segmap_parloop_struct_73931->free_mem_67537,
                                 .size =0, .references =NULL};
    struct memblock mem_67540 = {.desc ="mem_67540", .mem =
                                 futhark_mc_segmap_parloop_struct_73931->free_mem_67540,
                                 .size =0, .references =NULL};
    struct memblock mem_67543 = {.desc ="mem_67543", .mem =
                                 futhark_mc_segmap_parloop_struct_73931->free_mem_67543,
                                 .size =0, .references =NULL};
    struct memblock mem_67546 = {.desc ="mem_67546", .mem =
                                 futhark_mc_segmap_parloop_struct_73931->free_mem_67546,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70000 = start;
    
    for (; iter_70000 < end; iter_70000++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_70115 = n_m_62264;
        int64_t gtid_64117 = iter_70000;
        int64_t remnant_70116 = iter_70000 - gtid_64117;
        int64_t min_arg_69526 = mul64(jump_62260, gtid_64117);
        int64_t min_res_69527 = smin64(i_62270, min_arg_69526);
        int64_t defunc_0_g_res_69528 = add64((int64_t) 1, min_res_69527);
        bool init_idx_69529;
        int64_t init_idx_69530;
        int64_t init_idx_69531;
        bool loop_while_70001;
        int64_t low_70002;
        int64_t high_70003;
        
        loop_while_70001 = x_62271;
        low_70002 = (int64_t) 0;
        high_70003 = i_62270;
        while (loop_while_70001) {
            int64_t x_70004 = add64(low_70002, high_70003);
            int64_t mid_70005 = sdiv64(x_70004, (int64_t) 2);
            bool x_70006 = sle64((int64_t) 0, mid_70005);
            bool y_70007 = slt64(mid_70005, n_62256);
            bool bounds_check_70008 = x_70006 && y_70007;
            bool index_certs_70009;
            
            if (!bounds_check_70008) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_70005,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t mid_id_70010 = ((int64_t *) mem_67537.mem)[mid_70005];
            bool cond_70011 = slt64(mid_id_70010, (int64_t) 0);
            int64_t mid_idx_70012;
            
            if (cond_70011) {
                mid_idx_70012 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_70012 = mid_id_70010;
            }
            
            bool cond_70013 = sle64(defunc_0_g_res_69528, mid_idx_70012);
            int64_t loopres_70014;
            int64_t loopres_70015;
            
            if (cond_70013) {
                int64_t loopres_t_res_70016 = sub64(mid_70005, (int64_t) 1);
                
                loopres_70014 = low_70002;
                loopres_70015 = loopres_t_res_70016;
            } else {
                int64_t loopres_f_res_70017 = add64((int64_t) 1, mid_70005);
                
                loopres_70014 = loopres_f_res_70017;
                loopres_70015 = high_70003;
            }
            
            bool loop_cond_70018 = sle64(loopres_70014, loopres_70015);
            bool loop_while_tmp_70117 = loop_cond_70018;
            int64_t low_tmp_70118 = loopres_70014;
            int64_t high_tmp_70119 = loopres_70015;
            
            loop_while_70001 = loop_while_tmp_70117;
            low_70002 = low_tmp_70118;
            high_70003 = high_tmp_70119;
        }
        init_idx_69529 = loop_while_70001;
        init_idx_69530 = low_70002;
        init_idx_69531 = high_70003;
        
        bool idx_69550;
        int64_t idx_69551;
        int64_t idx_69552;
        int64_t idx_69553;
        bool loop_while_70019;
        int64_t l_idx_70020;
        int64_t r_idx_70021;
        int64_t span_70022;
        
        loop_while_70019 = loop_cond_62281;
        l_idx_70020 = init_idx_69530;
        r_idx_70021 = init_idx_69530;
        span_70022 = (int64_t) 1;
        while (loop_while_70019) {
            int64_t max_arg_70023 = sub64(l_idx_70020, (int64_t) 1);
            int64_t max_res_70024 = smax64((int64_t) 0, max_arg_70023);
            int64_t min_arg_70025 = add64((int64_t) 1, r_idx_70021);
            int64_t min_res_70026 = smin64(min_arg_64305, min_arg_70025);
            bool x_70027 = sle64((int64_t) 0, max_res_70024);
            bool y_70028 = slt64(max_res_70024, n_62256);
            bool bounds_check_70029 = x_70027 && y_70028;
            bool index_certs_70030;
            
            if (!bounds_check_70029) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_70024,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_70031 = ((int64_t *) mem_67537.mem)[max_res_70024];
            int64_t abs_arg_70032 = sub64(x_70031, defunc_0_g_res_69528);
            int64_t abs_res_70033 = abs64(abs_arg_70032);
            bool x_70034 = sle64((int64_t) 0, min_res_70026);
            bool y_70035 = slt64(min_res_70026, n_62256);
            bool bounds_check_70036 = x_70034 && y_70035;
            bool index_certs_70037;
            
            if (!bounds_check_70036) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_70026,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_70038 = ((int64_t *) mem_67537.mem)[min_res_70026];
            int64_t abs_arg_70039 = sub64(x_70038, defunc_0_g_res_69528);
            int64_t abs_res_70040 = abs64(abs_arg_70039);
            bool cond_70041 = max_res_70024 == l_idx_70020;
            int64_t loopres_70042;
            int64_t loopres_70043;
            int64_t loopres_70044;
            
            if (cond_70041) {
                loopres_70042 = l_idx_70020;
                loopres_70043 = r_idx_70021;
                loopres_70044 = min_res_62276;
            } else {
                bool cond_70045 = slt64(abs_res_70033, abs_res_70040);
                bool cond_f_res_70046 = min_res_70026 == r_idx_70021;
                bool x_70047 = !cond_70045;
                bool y_70048 = cond_f_res_70046 && x_70047;
                bool cond_70049 = cond_70045 || y_70048;
                int64_t loopres_f_res_70050;
                
                if (cond_70049) {
                    loopres_f_res_70050 = max_res_70024;
                } else {
                    loopres_f_res_70050 = l_idx_70020;
                }
                
                int64_t loopres_f_res_70051;
                
                if (cond_70049) {
                    loopres_f_res_70051 = r_idx_70021;
                } else {
                    loopres_f_res_70051 = min_res_70026;
                }
                
                int64_t loopres_f_res_70052;
                
                if (cond_70049) {
                    int64_t loopres_f_res_t_res_70053 = add64((int64_t) 1,
                                                              span_70022);
                    
                    loopres_f_res_70052 = loopres_f_res_t_res_70053;
                } else {
                    int64_t loopres_f_res_f_res_70054 = add64((int64_t) 1,
                                                              span_70022);
                    
                    loopres_f_res_70052 = loopres_f_res_f_res_70054;
                }
                loopres_70042 = loopres_f_res_70050;
                loopres_70043 = loopres_f_res_70051;
                loopres_70044 = loopres_f_res_70052;
            }
            
            bool loop_cond_70055 = slt64(loopres_70044, min_res_62276);
            bool loop_while_tmp_70120 = loop_cond_70055;
            int64_t l_idx_tmp_70121 = loopres_70042;
            int64_t r_idx_tmp_70122 = loopres_70043;
            int64_t span_tmp_70123 = loopres_70044;
            
            loop_while_70019 = loop_while_tmp_70120;
            l_idx_70020 = l_idx_tmp_70121;
            r_idx_70021 = r_idx_tmp_70122;
            span_70022 = span_tmp_70123;
        }
        idx_69550 = loop_while_70019;
        idx_69551 = l_idx_70020;
        idx_69552 = r_idx_70021;
        idx_69553 = span_70022;
        
        int64_t min_res_69591 = smin64(min_arg_64306, idx_69551);
        int64_t max_res_69592 = smax64((int64_t) 0, min_res_69591);
        int64_t x_69593 = add64(min_res_64307, max_res_69592);
        int64_t r_69594 = sub64(x_69593, (int64_t) 1);
        bool x_69595 = sle64((int64_t) 0, r_69594);
        bool y_69596 = slt64(r_69594, n_62256);
        bool bounds_check_69597 = x_69595 && y_69596;
        bool index_certs_69598;
        
        if (!bounds_check_69597) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_69594,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_69599 = ((int64_t *) mem_67531.mem)[r_69594];
        int64_t abs_arg_69600 = sub64(x_69599, min_res_69527);
        int64_t abs_res_69601 = abs64(abs_arg_69600);
        bool x_69602 = sle64((int64_t) 0, max_res_69592);
        bool y_69603 = slt64(max_res_69592, n_62256);
        bool bounds_check_69604 = x_69602 && y_69603;
        bool index_certs_69605;
        
        if (!bounds_check_69604) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_69592,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_69606 = ((int64_t *) mem_67531.mem)[max_res_69592];
        int64_t abs_arg_69607 = sub64(x_69606, min_res_69527);
        int64_t abs_res_69608 = abs64(abs_arg_69607);
        int64_t max_res_69609 = smax64(abs_res_69601, abs_res_69608);
        float defunc_0_f_res_69610 = sitofp_i64_f32(max_res_69609);
        float defunc_1_f_res_69611 = max_res_64311 + defunc_0_f_res_69610;
        float defunc_0_f_res_69612 = sitofp_i64_f32(min_res_69527);
        float defunc_2_reduce_res_69613;
        float defunc_2_reduce_res_69614;
        float defunc_2_reduce_res_69615;
        int64_t flat_tid_64118 = (int64_t) 0;
        int32_t num_tasks_70124;
        struct futhark_mc_task_73933 futhark_mc_task_73933;
        
        futhark_mc_task_73933.ctx = ctx;
        futhark_mc_task_73933.free_last_res_64293 = last_res_64293;
        futhark_mc_task_73933.free_mem_67534 = mem_67534.mem;
        futhark_mc_task_73933.free_mem_67540 = mem_67540.mem;
        futhark_mc_task_73933.free_max_res_69592 = max_res_69592;
        futhark_mc_task_73933.free_defunc_1_f_res_69611 = defunc_1_f_res_69611;
        futhark_mc_task_73933.free_defunc_0_f_res_69612 = defunc_0_f_res_69612;
        futhark_mc_task_73933.retval_defunc_2_reduce_res_69613 =
            &defunc_2_reduce_res_69613;
        futhark_mc_task_73933.retval_defunc_2_reduce_res_69614 =
            &defunc_2_reduce_res_69614;
        futhark_mc_task_73933.retval_defunc_2_reduce_res_69615 =
            &defunc_2_reduce_res_69615;
        
        struct scheduler_segop futhark_mc_task_73933_task;
        
        futhark_mc_task_73933_task.args = &futhark_mc_task_73933;
        futhark_mc_task_73933_task.top_level_fn = futhark_mc_segred_task_73934;
        futhark_mc_task_73933_task.name = "futhark_mc_segred_task_73934";
        futhark_mc_task_73933_task.iterations = q_62258;
        futhark_mc_task_73933_task.task_time =
            &ctx->futhark_mc_segred_task_73934_total_time;
        futhark_mc_task_73933_task.task_iter =
            &ctx->futhark_mc_segred_task_73934_total_iter;
        futhark_mc_task_73933_task.sched = STATIC;
        futhark_mc_task_73933_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_73934_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73933_task);
        
        if (futhark_mc_segred_task_73934_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_69642 = defunc_2_reduce_res_69613 * defunc_2_reduce_res_69615;
        float y_69643 = defunc_2_reduce_res_69614 * defunc_2_reduce_res_69614;
        float y_69644 = x_69642 - y_69643;
        float det1_69645 = 1.0F / y_69644;
        float a11_69646 = defunc_2_reduce_res_69615 * det1_69645;
        float negate_arg_69647 = defunc_2_reduce_res_69614 * det1_69645;
        float b11_69648 = 0.0F - negate_arg_69647;
        float c11_69649 = defunc_2_reduce_res_69613 * det1_69645;
        float defunc_2_reduce_res_69650;
        float defunc_2_reduce_res_69651;
        int64_t flat_tid_64120 = (int64_t) 0;
        int32_t num_tasks_70145;
        struct futhark_mc_task_73940 futhark_mc_task_73940;
        
        futhark_mc_task_73940.ctx = ctx;
        futhark_mc_task_73940.free_last_res_64293 = last_res_64293;
        futhark_mc_task_73940.free_mem_67528 = mem_67528.mem;
        futhark_mc_task_73940.free_mem_67534 = mem_67534.mem;
        futhark_mc_task_73940.free_mem_67540 = mem_67540.mem;
        futhark_mc_task_73940.free_max_res_69592 = max_res_69592;
        futhark_mc_task_73940.free_defunc_1_f_res_69611 = defunc_1_f_res_69611;
        futhark_mc_task_73940.free_defunc_0_f_res_69612 = defunc_0_f_res_69612;
        futhark_mc_task_73940.free_a11_69646 = a11_69646;
        futhark_mc_task_73940.free_b11_69648 = b11_69648;
        futhark_mc_task_73940.free_c11_69649 = c11_69649;
        futhark_mc_task_73940.retval_defunc_2_reduce_res_69650 =
            &defunc_2_reduce_res_69650;
        futhark_mc_task_73940.retval_defunc_2_reduce_res_69651 =
            &defunc_2_reduce_res_69651;
        
        struct scheduler_segop futhark_mc_task_73940_task;
        
        futhark_mc_task_73940_task.args = &futhark_mc_task_73940;
        futhark_mc_task_73940_task.top_level_fn = futhark_mc_segred_task_73941;
        futhark_mc_task_73940_task.name = "futhark_mc_segred_task_73941";
        futhark_mc_task_73940_task.iterations = q_62258;
        futhark_mc_task_73940_task.task_time =
            &ctx->futhark_mc_segred_task_73941_total_time;
        futhark_mc_task_73940_task.task_iter =
            &ctx->futhark_mc_segred_task_73941_total_iter;
        futhark_mc_task_73940_task.sched = STATIC;
        futhark_mc_task_73940_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_73941_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73940_task);
        
        if (futhark_mc_segred_task_73941_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_67543.mem)[gtid_64117] = defunc_2_reduce_res_69650;
        ((float *) mem_67546.mem)[gtid_64117] = defunc_2_reduce_res_69651;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73932_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73932_end -
                 futhark_mc_segmap_parloop_73932_start;
        
        ctx->futhark_mc_segmap_parloop_73932_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73932_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73932_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_73930(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64116 = tid;
    int num_tasks_69873 = info.nsubtasks;
    struct futhark_mc_task_73926 *futhark_mc_task_73926 =
                                 (struct futhark_mc_task_73926 *) args;
    struct futhark_context *ctx = futhark_mc_task_73926->ctx;
    uint64_t futhark_mc_segmap_nested_task_73930_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_73930_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73926->free_n_62256;
    int64_t q_62258 = futhark_mc_task_73926->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_73926->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_73926->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_73926->free_i_62270;
    bool x_62271 = futhark_mc_task_73926->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_73926->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_73926->free_loop_cond_62281;
    int64_t last_res_64293 = futhark_mc_task_73926->free_last_res_64293;
    int64_t min_arg_64305 = futhark_mc_task_73926->free_min_arg_64305;
    int64_t min_arg_64306 = futhark_mc_task_73926->free_min_arg_64306;
    int64_t min_res_64307 = futhark_mc_task_73926->free_min_res_64307;
    float max_res_64311 = futhark_mc_task_73926->free_max_res_64311;
    struct memblock mem_67528 = {.desc ="mem_67528", .mem =
                                 futhark_mc_task_73926->free_mem_67528, .size =
                                 0, .references =NULL};
    struct memblock mem_67531 = {.desc ="mem_67531", .mem =
                                 futhark_mc_task_73926->free_mem_67531, .size =
                                 0, .references =NULL};
    struct memblock mem_67534 = {.desc ="mem_67534", .mem =
                                 futhark_mc_task_73926->free_mem_67534, .size =
                                 0, .references =NULL};
    struct memblock mem_67537 = {.desc ="mem_67537", .mem =
                                 futhark_mc_task_73926->free_mem_67537, .size =
                                 0, .references =NULL};
    struct memblock mem_67540 = {.desc ="mem_67540", .mem =
                                 futhark_mc_task_73926->free_mem_67540, .size =
                                 0, .references =NULL};
    struct memblock mem_67543 = {.desc ="mem_67543", .mem =
                                 futhark_mc_task_73926->free_mem_67543, .size =
                                 0, .references =NULL};
    struct memblock mem_67546 = {.desc ="mem_67546", .mem =
                                 futhark_mc_task_73926->free_mem_67546, .size =
                                 0, .references =NULL};
    int64_t iter_70000;
    struct futhark_mc_segmap_parloop_struct_73931
    futhark_mc_segmap_parloop_struct_73931;
    
    futhark_mc_segmap_parloop_struct_73931.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73931.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73931.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73931.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_73931.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_73931.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_73931.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_73931.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_73931.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_73931.free_last_res_64293 = last_res_64293;
    futhark_mc_segmap_parloop_struct_73931.free_min_arg_64305 = min_arg_64305;
    futhark_mc_segmap_parloop_struct_73931.free_min_arg_64306 = min_arg_64306;
    futhark_mc_segmap_parloop_struct_73931.free_min_res_64307 = min_res_64307;
    futhark_mc_segmap_parloop_struct_73931.free_max_res_64311 = max_res_64311;
    futhark_mc_segmap_parloop_struct_73931.free_mem_67528 = mem_67528.mem;
    futhark_mc_segmap_parloop_struct_73931.free_mem_67531 = mem_67531.mem;
    futhark_mc_segmap_parloop_struct_73931.free_mem_67534 = mem_67534.mem;
    futhark_mc_segmap_parloop_struct_73931.free_mem_67537 = mem_67537.mem;
    futhark_mc_segmap_parloop_struct_73931.free_mem_67540 = mem_67540.mem;
    futhark_mc_segmap_parloop_struct_73931.free_mem_67543 = mem_67543.mem;
    futhark_mc_segmap_parloop_struct_73931.free_mem_67546 = mem_67546.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73932_task;
    
    futhark_mc_segmap_parloop_73932_task.name =
        "futhark_mc_segmap_parloop_73932";
    futhark_mc_segmap_parloop_73932_task.fn = futhark_mc_segmap_parloop_73932;
    futhark_mc_segmap_parloop_73932_task.args =
        &futhark_mc_segmap_parloop_struct_73931;
    futhark_mc_segmap_parloop_73932_task.iterations = iterations;
    futhark_mc_segmap_parloop_73932_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73932_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73932_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73932_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73932_task);
    
    if (futhark_mc_segmap_parloop_73932_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73932_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73932_total_end -
                 futhark_mc_segmap_parloop_73932_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73932_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73932_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73932_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_73930_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_73930_end -
                 futhark_mc_segmap_nested_task_73930_start;
        
        ctx->futhark_mc_segmap_nested_task_73930_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_73930_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_73930_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_73898(void *args, int64_t start,
                                           int64_t end, int flat_tid_64104,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73897
    *futhark_mc_segmap_parloop_struct_73897 =
    (struct futhark_mc_segmap_parloop_struct_73897 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73897->ctx;
    uint64_t futhark_mc_segmap_parloop_73898_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73898_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_segmap_parloop_struct_73897->free_m_62255;
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73897->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73897->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_73897->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_73897->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_73897->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_73897->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_73897->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_73897->free_loop_cond_62281;
    float i64_res_62282 =
          futhark_mc_segmap_parloop_struct_73897->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_73897->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67523 =
            futhark_mc_segmap_parloop_struct_73897->free_bytes_67523;
    int64_t bytes_67526 =
            futhark_mc_segmap_parloop_struct_73897->free_bytes_67526;
    int64_t bytes_67538 =
            futhark_mc_segmap_parloop_struct_73897->free_bytes_67538;
    int64_t bytes_67541 =
            futhark_mc_segmap_parloop_struct_73897->free_bytes_67541;
    struct memblock mem_67670 = {.desc ="mem_67670", .mem =
                                 futhark_mc_segmap_parloop_struct_73897->free_mem_67670,
                                 .size =0, .references =NULL};
    struct memblock mem_67674 = {.desc ="mem_67674", .mem =
                                 futhark_mc_segmap_parloop_struct_73897->free_mem_67674,
                                 .size =0, .references =NULL};
    size_t mem_67525_cached_sizze_73899 = 0;
    char *mem_67525 = NULL;
    size_t mem_67528_cached_sizze_73900 = 0;
    char *mem_67528 = NULL;
    size_t mem_67531_cached_sizze_73901 = 0;
    char *mem_67531 = NULL;
    size_t mem_67534_cached_sizze_73902 = 0;
    char *mem_67534 = NULL;
    size_t mem_67537_cached_sizze_73903 = 0;
    char *mem_67537 = NULL;
    size_t mem_67540_cached_sizze_73904 = 0;
    char *mem_67540 = NULL;
    size_t mem_67543_cached_sizze_73905 = 0;
    char *mem_67543 = NULL;
    size_t mem_67546_cached_sizze_73906 = 0;
    char *mem_67546 = NULL;
    int64_t iterations = end - start;
    int64_t iter_69507 = start;
    
    if (mem_67525_cached_sizze_73899 < (size_t) bytes_67523) {
        mem_67525 = realloc(mem_67525, bytes_67523);
        mem_67525_cached_sizze_73899 = bytes_67523;
    }
    if (mem_67528_cached_sizze_73900 < (size_t) bytes_67526) {
        mem_67528 = realloc(mem_67528, bytes_67526);
        mem_67528_cached_sizze_73900 = bytes_67526;
    }
    if (mem_67531_cached_sizze_73901 < (size_t) bytes_67523) {
        mem_67531 = realloc(mem_67531, bytes_67523);
        mem_67531_cached_sizze_73901 = bytes_67523;
    }
    if (mem_67534_cached_sizze_73902 < (size_t) bytes_67526) {
        mem_67534 = realloc(mem_67534, bytes_67526);
        mem_67534_cached_sizze_73902 = bytes_67526;
    }
    if (mem_67537_cached_sizze_73903 < (size_t) bytes_67523) {
        mem_67537 = realloc(mem_67537, bytes_67523);
        mem_67537_cached_sizze_73903 = bytes_67523;
    }
    if (mem_67540_cached_sizze_73904 < (size_t) bytes_67538) {
        mem_67540 = realloc(mem_67540, bytes_67538);
        mem_67540_cached_sizze_73904 = bytes_67538;
    }
    if (mem_67543_cached_sizze_73905 < (size_t) bytes_67541) {
        mem_67543 = realloc(mem_67543, bytes_67541);
        mem_67543_cached_sizze_73905 = bytes_67541;
    }
    if (mem_67546_cached_sizze_73906 < (size_t) bytes_67541) {
        mem_67546 = realloc(mem_67546, bytes_67541);
        mem_67546_cached_sizze_73906 = bytes_67541;
    }
    for (; iter_69507 < end; iter_69507++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_69841 = m_62255;
        int64_t gtid_64105 = iter_69507;
        int64_t remnant_69842 = iter_69507 - gtid_64105;
        int64_t flat_tid_64106 = (int64_t) 0;
        int32_t num_tasks_69843;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_73907 futhark_mc_task_73907;
        
        futhark_mc_task_73907.ctx = ctx;
        futhark_mc_task_73907.free_n_62256 = n_62256;
        futhark_mc_task_73907.free_gtid_64105 = gtid_64105;
        futhark_mc_task_73907.free_Y_mem_67388 = Y_mem_67388.mem;
        futhark_mc_task_73907.free_mem_67525 = mem_67525;
        
        struct scheduler_segop futhark_mc_task_73907_task;
        
        futhark_mc_task_73907_task.args = &futhark_mc_task_73907;
        futhark_mc_task_73907_task.top_level_fn = futhark_mc_segscan_task_73908;
        futhark_mc_task_73907_task.name = "futhark_mc_segscan_task_73908";
        futhark_mc_task_73907_task.iterations = n_62256;
        futhark_mc_task_73907_task.task_time =
            &ctx->futhark_mc_segscan_task_73908_total_time;
        futhark_mc_task_73907_task.task_iter =
            &ctx->futhark_mc_segscan_task_73908_total_iter;
        futhark_mc_task_73907_task.sched = STATIC;
        futhark_mc_task_73907_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_73908_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73907_task);
        
        if (futhark_mc_segscan_task_73908_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_64293 = ((int64_t *) mem_67525)[i_62270];
        
        for (int64_t i_69857 = 0; i_69857 < n_62256; i_69857++) {
            ((float *) mem_67528)[i_69857] = 0.0F;
        }
        for (int64_t i_69858 = 0; i_69858 < n_62256; i_69858++) {
            ((int64_t *) mem_67531)[i_69858] = (int64_t) -1;
        }
        
        int64_t flat_tid_64108 = (int64_t) 0;
        int32_t num_tasks_69859;
        struct futhark_mc_task_73914 futhark_mc_task_73914;
        
        futhark_mc_task_73914.ctx = ctx;
        futhark_mc_task_73914.free_n_62256 = n_62256;
        futhark_mc_task_73914.free_gtid_64105 = gtid_64105;
        futhark_mc_task_73914.free_Y_mem_67388 = Y_mem_67388.mem;
        futhark_mc_task_73914.free_mem_67525 = mem_67525;
        futhark_mc_task_73914.free_mem_67528 = mem_67528;
        futhark_mc_task_73914.free_mem_67531 = mem_67531;
        
        struct scheduler_segop futhark_mc_task_73914_task;
        
        futhark_mc_task_73914_task.args = &futhark_mc_task_73914;
        futhark_mc_task_73914_task.top_level_fn = futhark_mc_segmap_task_73915;
        futhark_mc_task_73914_task.name = "futhark_mc_segmap_task_73915";
        futhark_mc_task_73914_task.iterations = n_62256;
        futhark_mc_task_73914_task.task_time =
            &ctx->futhark_mc_segmap_task_73915_total_time;
        futhark_mc_task_73914_task.task_iter =
            &ctx->futhark_mc_segmap_task_73915_total_iter;
        futhark_mc_task_73914_task.sched = STATIC;
        futhark_mc_task_73914_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73915_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73914_task);
        
        if (futhark_mc_segmap_task_73915_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_64305 = sub64(last_res_64293, (int64_t) 1);
        int64_t min_arg_64306 = sub64(last_res_64293, min_res_62276);
        int64_t min_res_64307 = smin64(q_62258, last_res_64293);
        float i64_res_64308 = sitofp_i64_f32(last_res_64293);
        float x_64309 = i64_res_62282 - i64_res_64308;
        float max_arg_64310 = x_64309 / 2.0F;
        float max_res_64311 = fmax32(0.0F, max_arg_64310);
        int64_t flat_tid_64110 = (int64_t) 0;
        int32_t num_tasks_69865;
        struct futhark_mc_task_73918 futhark_mc_task_73918;
        
        futhark_mc_task_73918.ctx = ctx;
        futhark_mc_task_73918.free_n_62256 = n_62256;
        futhark_mc_task_73918.free_mem_67531 = mem_67531;
        futhark_mc_task_73918.free_mem_67534 = mem_67534;
        futhark_mc_task_73918.free_mem_67537 = mem_67537;
        
        struct scheduler_segop futhark_mc_task_73918_task;
        
        futhark_mc_task_73918_task.args = &futhark_mc_task_73918;
        futhark_mc_task_73918_task.top_level_fn = futhark_mc_segmap_task_73919;
        futhark_mc_task_73918_task.name = "futhark_mc_segmap_task_73919";
        futhark_mc_task_73918_task.iterations = n_62256;
        futhark_mc_task_73918_task.task_time =
            &ctx->futhark_mc_segmap_task_73919_total_time;
        futhark_mc_task_73918_task.task_iter =
            &ctx->futhark_mc_segmap_task_73919_total_iter;
        futhark_mc_task_73918_task.sched = STATIC;
        futhark_mc_task_73918_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73919_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73918_task);
        
        if (futhark_mc_segmap_task_73919_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_64112 = (int64_t) 0;
        int32_t num_tasks_69869;
        struct futhark_mc_task_73922 futhark_mc_task_73922;
        
        futhark_mc_task_73922.ctx = ctx;
        futhark_mc_task_73922.free_q_62258 = q_62258;
        futhark_mc_task_73922.free_last_res_64293 = last_res_64293;
        futhark_mc_task_73922.free_mem_67540 = mem_67540;
        
        struct scheduler_segop futhark_mc_task_73922_task;
        
        futhark_mc_task_73922_task.args = &futhark_mc_task_73922;
        futhark_mc_task_73922_task.top_level_fn = futhark_mc_segmap_task_73923;
        futhark_mc_task_73922_task.name = "futhark_mc_segmap_task_73923";
        futhark_mc_task_73922_task.iterations = q_62258;
        futhark_mc_task_73922_task.task_time =
            &ctx->futhark_mc_segmap_task_73923_total_time;
        futhark_mc_task_73922_task.task_iter =
            &ctx->futhark_mc_segmap_task_73923_total_iter;
        futhark_mc_task_73922_task.sched = STATIC;
        futhark_mc_task_73922_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73923_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73922_task);
        
        if (futhark_mc_segmap_task_73923_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_64114 = (int64_t) 0;
        int32_t num_tasks_69873;
        int64_t flat_tid_64116 = (int64_t) 0;
        struct futhark_mc_task_73926 futhark_mc_task_73926;
        
        futhark_mc_task_73926.ctx = ctx;
        futhark_mc_task_73926.free_n_62256 = n_62256;
        futhark_mc_task_73926.free_q_62258 = q_62258;
        futhark_mc_task_73926.free_jump_62260 = jump_62260;
        futhark_mc_task_73926.free_n_m_62264 = n_m_62264;
        futhark_mc_task_73926.free_i_62270 = i_62270;
        futhark_mc_task_73926.free_x_62271 = x_62271;
        futhark_mc_task_73926.free_min_res_62276 = min_res_62276;
        futhark_mc_task_73926.free_loop_cond_62281 = loop_cond_62281;
        futhark_mc_task_73926.free_last_res_64293 = last_res_64293;
        futhark_mc_task_73926.free_min_arg_64305 = min_arg_64305;
        futhark_mc_task_73926.free_min_arg_64306 = min_arg_64306;
        futhark_mc_task_73926.free_min_res_64307 = min_res_64307;
        futhark_mc_task_73926.free_max_res_64311 = max_res_64311;
        futhark_mc_task_73926.free_mem_67528 = mem_67528;
        futhark_mc_task_73926.free_mem_67531 = mem_67531;
        futhark_mc_task_73926.free_mem_67534 = mem_67534;
        futhark_mc_task_73926.free_mem_67537 = mem_67537;
        futhark_mc_task_73926.free_mem_67540 = mem_67540;
        futhark_mc_task_73926.free_mem_67543 = mem_67543;
        futhark_mc_task_73926.free_mem_67546 = mem_67546;
        
        struct scheduler_segop futhark_mc_task_73926_task;
        
        futhark_mc_task_73926_task.args = &futhark_mc_task_73926;
        futhark_mc_task_73926_task.top_level_fn = futhark_mc_segmap_task_73927;
        futhark_mc_task_73926_task.name = "futhark_mc_segmap_task_73927";
        futhark_mc_task_73926_task.iterations = n_m_62264;
        futhark_mc_task_73926_task.task_time =
            &ctx->futhark_mc_segmap_task_73927_total_time;
        futhark_mc_task_73926_task.task_iter =
            &ctx->futhark_mc_segmap_task_73927_total_iter;
        futhark_mc_task_73926_task.sched = DYNAMIC;
        futhark_mc_task_73926_task.nested_fn =
            futhark_mc_segmap_nested_task_73930;
        
        int futhark_mc_segmap_task_73927_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73926_task);
        
        if (futhark_mc_segmap_task_73927_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_67670.mem + gtid_64105 * n_m_62264 * (int64_t) 4,
                mem_67543 + (int64_t) 0, n_m_62264 * (int64_t) 4);
        memmove(mem_67674.mem + gtid_64105 * n_m_62264 * (int64_t) 4,
                mem_67546 + (int64_t) 0, n_m_62264 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67525);
    free(mem_67528);
    free(mem_67531);
    free(mem_67534);
    free(mem_67537);
    free(mem_67540);
    free(mem_67543);
    free(mem_67546);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73898_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73898_end -
                 futhark_mc_segmap_parloop_73898_start;
        
        ctx->futhark_mc_segmap_parloop_73898_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73898_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73898_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_73896(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64104 = tid;
    int num_tasks_69285 = info.nsubtasks;
    struct futhark_mc_task_73884 *futhark_mc_task_73884 =
                                 (struct futhark_mc_task_73884 *) args;
    struct futhark_context *ctx = futhark_mc_task_73884->ctx;
    uint64_t futhark_mc_segmap_nested_task_73896_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_73896_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_task_73884->free_m_62255;
    int64_t n_62256 = futhark_mc_task_73884->free_n_62256;
    int64_t q_62258 = futhark_mc_task_73884->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_73884->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_73884->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_73884->free_i_62270;
    bool x_62271 = futhark_mc_task_73884->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_73884->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_73884->free_loop_cond_62281;
    float i64_res_62282 = futhark_mc_task_73884->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_73884->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67523 = futhark_mc_task_73884->free_bytes_67523;
    int64_t bytes_67526 = futhark_mc_task_73884->free_bytes_67526;
    int64_t bytes_67538 = futhark_mc_task_73884->free_bytes_67538;
    int64_t bytes_67541 = futhark_mc_task_73884->free_bytes_67541;
    struct memblock mem_67670 = {.desc ="mem_67670", .mem =
                                 futhark_mc_task_73884->free_mem_67670, .size =
                                 0, .references =NULL};
    struct memblock mem_67674 = {.desc ="mem_67674", .mem =
                                 futhark_mc_task_73884->free_mem_67674, .size =
                                 0, .references =NULL};
    int64_t iter_69507;
    struct futhark_mc_segmap_parloop_struct_73897
    futhark_mc_segmap_parloop_struct_73897;
    
    futhark_mc_segmap_parloop_struct_73897.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73897.free_m_62255 = m_62255;
    futhark_mc_segmap_parloop_struct_73897.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73897.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73897.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_73897.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_73897.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_73897.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_73897.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_73897.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_73897.free_i64_res_62282 = i64_res_62282;
    futhark_mc_segmap_parloop_struct_73897.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_73897.free_bytes_67523 = bytes_67523;
    futhark_mc_segmap_parloop_struct_73897.free_bytes_67526 = bytes_67526;
    futhark_mc_segmap_parloop_struct_73897.free_bytes_67538 = bytes_67538;
    futhark_mc_segmap_parloop_struct_73897.free_bytes_67541 = bytes_67541;
    futhark_mc_segmap_parloop_struct_73897.free_mem_67670 = mem_67670.mem;
    futhark_mc_segmap_parloop_struct_73897.free_mem_67674 = mem_67674.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73898_task;
    
    futhark_mc_segmap_parloop_73898_task.name =
        "futhark_mc_segmap_parloop_73898";
    futhark_mc_segmap_parloop_73898_task.fn = futhark_mc_segmap_parloop_73898;
    futhark_mc_segmap_parloop_73898_task.args =
        &futhark_mc_segmap_parloop_struct_73897;
    futhark_mc_segmap_parloop_73898_task.iterations = iterations;
    futhark_mc_segmap_parloop_73898_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73898_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73898_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73898_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73898_task);
    
    if (futhark_mc_segmap_parloop_73898_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73898_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73898_total_end -
                 futhark_mc_segmap_parloop_73898_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73898_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73898_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73898_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_73896_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_73896_end -
                 futhark_mc_segmap_nested_task_73896_start;
        
        ctx->futhark_mc_segmap_nested_task_73896_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_73896_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_73896_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73946 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67675;
    int64_t free_bytes_67678;
    int64_t free_bytes_67690;
    int64_t free_bytes_67693;
    char *free_mem_67822;
    char *free_mem_67826;
};
struct futhark_mc_segmap_parloop_struct_73948 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67675;
    int64_t free_bytes_67678;
    int64_t free_bytes_67690;
    int64_t free_bytes_67693;
    char *free_mem_67822;
    char *free_mem_67826;
};
static int futhark_mc_segmap_parloop_73949(void *args, int64_t start,
                                           int64_t end, int flat_tid_64647,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73948
    *futhark_mc_segmap_parloop_struct_73948 =
    (struct futhark_mc_segmap_parloop_struct_73948 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73948->ctx;
    uint64_t futhark_mc_segmap_parloop_73949_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73949_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_segmap_parloop_struct_73948->free_m_62255;
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73948->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73948->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_73948->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_73948->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_73948->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_73948->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_73948->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_73948->free_loop_cond_62281;
    float i64_res_62282 =
          futhark_mc_segmap_parloop_struct_73948->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_73948->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67675 =
            futhark_mc_segmap_parloop_struct_73948->free_bytes_67675;
    int64_t bytes_67678 =
            futhark_mc_segmap_parloop_struct_73948->free_bytes_67678;
    int64_t bytes_67690 =
            futhark_mc_segmap_parloop_struct_73948->free_bytes_67690;
    int64_t bytes_67693 =
            futhark_mc_segmap_parloop_struct_73948->free_bytes_67693;
    struct memblock mem_67822 = {.desc ="mem_67822", .mem =
                                 futhark_mc_segmap_parloop_struct_73948->free_mem_67822,
                                 .size =0, .references =NULL};
    struct memblock mem_67826 = {.desc ="mem_67826", .mem =
                                 futhark_mc_segmap_parloop_struct_73948->free_mem_67826,
                                 .size =0, .references =NULL};
    size_t mem_67701_cached_sizze_73950 = 0;
    char *mem_67701 = NULL;
    size_t mem_67716_cached_sizze_73951 = 0;
    char *mem_67716 = NULL;
    size_t mem_67719_cached_sizze_73952 = 0;
    char *mem_67719 = NULL;
    size_t mem_67746_cached_sizze_73953 = 0;
    char *mem_67746 = NULL;
    size_t mem_67749_cached_sizze_73954 = 0;
    char *mem_67749 = NULL;
    size_t mem_67776_cached_sizze_73955 = 0;
    char *mem_67776 = NULL;
    size_t mem_67791_cached_sizze_73956 = 0;
    char *mem_67791 = NULL;
    size_t mem_67794_cached_sizze_73957 = 0;
    char *mem_67794 = NULL;
    int64_t iterations = end - start;
    int64_t iter_70161 = start;
    
    if (mem_67701_cached_sizze_73950 < (size_t) bytes_67675) {
        mem_67701 = realloc(mem_67701, bytes_67675);
        mem_67701_cached_sizze_73950 = bytes_67675;
    }
    if (mem_67716_cached_sizze_73951 < (size_t) bytes_67678) {
        mem_67716 = realloc(mem_67716, bytes_67678);
        mem_67716_cached_sizze_73951 = bytes_67678;
    }
    if (mem_67719_cached_sizze_73952 < (size_t) bytes_67675) {
        mem_67719 = realloc(mem_67719, bytes_67675);
        mem_67719_cached_sizze_73952 = bytes_67675;
    }
    if (mem_67746_cached_sizze_73953 < (size_t) bytes_67678) {
        mem_67746 = realloc(mem_67746, bytes_67678);
        mem_67746_cached_sizze_73953 = bytes_67678;
    }
    if (mem_67749_cached_sizze_73954 < (size_t) bytes_67675) {
        mem_67749 = realloc(mem_67749, bytes_67675);
        mem_67749_cached_sizze_73954 = bytes_67675;
    }
    if (mem_67776_cached_sizze_73955 < (size_t) bytes_67690) {
        mem_67776 = realloc(mem_67776, bytes_67690);
        mem_67776_cached_sizze_73955 = bytes_67690;
    }
    if (mem_67791_cached_sizze_73956 < (size_t) bytes_67693) {
        mem_67791 = realloc(mem_67791, bytes_67693);
        mem_67791_cached_sizze_73956 = bytes_67693;
    }
    if (mem_67794_cached_sizze_73957 < (size_t) bytes_67693) {
        mem_67794 = realloc(mem_67794, bytes_67693);
        mem_67794_cached_sizze_73957 = bytes_67693;
    }
    for (; iter_70161 < end; iter_70161++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_70387 = m_62255;
        int64_t gtid_64648 = iter_70161;
        int64_t remnant_70388 = iter_70161 - gtid_64648;
        int64_t discard_67073;
        int64_t scanacc_70163 = (int64_t) 0;
        
        for (int64_t i_70162 = 0; i_70162 < n_62256; i_70162++) {
            float x_70165 = ((float *) Y_mem_67388.mem)[gtid_64648 * n_62256 +
                                                        i_70162];
            bool isnan_res_70166;
            
            isnan_res_70166 = futrts_isnan32(x_70165);
            
            bool defunc_0_p_res_70167 = !isnan_res_70166;
            int64_t defunc_0_f_res_70168 = btoi_bool_i64(defunc_0_p_res_70167);
            int64_t defunc_1_op_res_70169 = add64(defunc_0_f_res_70168,
                                                  scanacc_70163);
            
            ((int64_t *) mem_67701)[i_70162] = defunc_1_op_res_70169;
            
            int64_t scanacc_tmp_70389 = defunc_1_op_res_70169;
            
            scanacc_70163 = scanacc_tmp_70389;
        }
        discard_67073 = scanacc_70163;
        
        int64_t last_res_62701 = ((int64_t *) mem_67701)[i_62270];
        
        for (int64_t i_70391 = 0; i_70391 < n_62256; i_70391++) {
            ((float *) mem_67716)[i_70391] = 0.0F;
        }
        for (int64_t i_70392 = 0; i_70392 < n_62256; i_70392++) {
            ((int64_t *) mem_67719)[i_70392] = (int64_t) -1;
        }
        for (int64_t write_iter_70171 = 0; write_iter_70171 < n_62256;
             write_iter_70171++) {
            float write_iv_70174 = ((float *) Y_mem_67388.mem)[gtid_64648 *
                                                               n_62256 +
                                                               write_iter_70171];
            bool isnan_res_70175;
            
            isnan_res_70175 = futrts_isnan32(write_iv_70174);
            
            bool defunc_0_p_res_70176 = !isnan_res_70175;
            int64_t defunc_1_f_res_70177;
            
            if (defunc_0_p_res_70176) {
                int64_t write_iv_70178 =
                        ((int64_t *) mem_67701)[write_iter_70171];
                int64_t defunc_1_f_res_t_res_70179 = sub64(write_iv_70178,
                                                           (int64_t) 1);
                
                defunc_1_f_res_70177 = defunc_1_f_res_t_res_70179;
            } else {
                defunc_1_f_res_70177 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_70177) &&
                slt64(defunc_1_f_res_70177, n_62256)) {
                ((int64_t *) mem_67719)[defunc_1_f_res_70177] =
                    write_iter_70171;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_70177) &&
                slt64(defunc_1_f_res_70177, n_62256)) {
                memmove(mem_67716 + defunc_1_f_res_70177 * (int64_t) 4,
                        Y_mem_67388.mem + (gtid_64648 * n_62256 +
                                           write_iter_70171) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_62716 = sub64(last_res_62701, (int64_t) 1);
        int64_t min_arg_62717 = sub64(last_res_62701, min_res_62276);
        int64_t min_res_62718 = smin64(q_62258, last_res_62701);
        float i64_res_62719 = sitofp_i64_f32(last_res_62701);
        float x_62720 = i64_res_62282 - i64_res_62719;
        float max_arg_62721 = x_62720 / 2.0F;
        float max_res_62722 = fmax32(0.0F, max_arg_62721);
        
        for (int64_t i_70183 = 0; i_70183 < n_62256; i_70183++) {
            int64_t x_70186 = ((int64_t *) mem_67719)[i_70183];
            int64_t defunc_0_f_res_70187 = add64((int64_t) 1, x_70186);
            float defunc_0_f_res_70188 = sitofp_i64_f32(x_70186);
            
            ((float *) mem_67746)[i_70183] = defunc_0_f_res_70188;
            ((int64_t *) mem_67749)[i_70183] = defunc_0_f_res_70187;
        }
        for (int64_t i_70191 = 0; i_70191 < q_62258; i_70191++) {
            bool cond_70193 = sle64(last_res_62701, i_70191);
            float defunc_0_f_res_70194;
            
            if (cond_70193) {
                defunc_0_f_res_70194 = 0.0F;
            } else {
                defunc_0_f_res_70194 = 1.0F;
            }
            ((float *) mem_67776)[i_70191] = defunc_0_f_res_70194;
        }
        for (int64_t i_70196 = 0; i_70196 < n_m_62264; i_70196++) {
            int64_t min_arg_70199 = mul64(jump_62260, i_70196);
            int64_t min_res_70200 = smin64(i_62270, min_arg_70199);
            int64_t defunc_0_g_res_70201 = add64((int64_t) 1, min_res_70200);
            bool init_idx_70202;
            int64_t init_idx_70203;
            int64_t init_idx_70204;
            bool loop_while_70205;
            int64_t low_70206;
            int64_t high_70207;
            
            loop_while_70205 = x_62271;
            low_70206 = (int64_t) 0;
            high_70207 = i_62270;
            while (loop_while_70205) {
                int64_t x_70208 = add64(low_70206, high_70207);
                int64_t mid_70209 = sdiv64(x_70208, (int64_t) 2);
                bool x_70210 = sle64((int64_t) 0, mid_70209);
                bool y_70211 = slt64(mid_70209, n_62256);
                bool bounds_check_70212 = x_70210 && y_70211;
                bool index_certs_70213;
                
                if (!bounds_check_70212) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_70209,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t mid_id_70214 = ((int64_t *) mem_67749)[mid_70209];
                bool cond_70215 = slt64(mid_id_70214, (int64_t) 0);
                int64_t mid_idx_70216;
                
                if (cond_70215) {
                    mid_idx_70216 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_70216 = mid_id_70214;
                }
                
                bool cond_70217 = sle64(defunc_0_g_res_70201, mid_idx_70216);
                int64_t loopres_70218;
                int64_t loopres_70219;
                
                if (cond_70217) {
                    int64_t loopres_t_res_70220 = sub64(mid_70209, (int64_t) 1);
                    
                    loopres_70218 = low_70206;
                    loopres_70219 = loopres_t_res_70220;
                } else {
                    int64_t loopres_f_res_70221 = add64((int64_t) 1, mid_70209);
                    
                    loopres_70218 = loopres_f_res_70221;
                    loopres_70219 = high_70207;
                }
                
                bool loop_cond_70222 = sle64(loopres_70218, loopres_70219);
                bool loop_while_tmp_70400 = loop_cond_70222;
                int64_t low_tmp_70401 = loopres_70218;
                int64_t high_tmp_70402 = loopres_70219;
                
                loop_while_70205 = loop_while_tmp_70400;
                low_70206 = low_tmp_70401;
                high_70207 = high_tmp_70402;
            }
            init_idx_70202 = loop_while_70205;
            init_idx_70203 = low_70206;
            init_idx_70204 = high_70207;
            
            bool idx_70223;
            int64_t idx_70224;
            int64_t idx_70225;
            int64_t idx_70226;
            bool loop_while_70227;
            int64_t l_idx_70228;
            int64_t r_idx_70229;
            int64_t span_70230;
            
            loop_while_70227 = loop_cond_62281;
            l_idx_70228 = init_idx_70203;
            r_idx_70229 = init_idx_70203;
            span_70230 = (int64_t) 1;
            while (loop_while_70227) {
                int64_t max_arg_70231 = sub64(l_idx_70228, (int64_t) 1);
                int64_t max_res_70232 = smax64((int64_t) 0, max_arg_70231);
                int64_t min_arg_70233 = add64((int64_t) 1, r_idx_70229);
                int64_t min_res_70234 = smin64(min_arg_62716, min_arg_70233);
                bool x_70235 = sle64((int64_t) 0, max_res_70232);
                bool y_70236 = slt64(max_res_70232, n_62256);
                bool bounds_check_70237 = x_70235 && y_70236;
                bool index_certs_70238;
                
                if (!bounds_check_70237) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_70232,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t x_70239 = ((int64_t *) mem_67749)[max_res_70232];
                int64_t abs_arg_70240 = sub64(x_70239, defunc_0_g_res_70201);
                int64_t abs_res_70241 = abs64(abs_arg_70240);
                bool x_70242 = sle64((int64_t) 0, min_res_70234);
                bool y_70243 = slt64(min_res_70234, n_62256);
                bool bounds_check_70244 = x_70242 && y_70243;
                bool index_certs_70245;
                
                if (!bounds_check_70244) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_70234,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t x_70246 = ((int64_t *) mem_67749)[min_res_70234];
                int64_t abs_arg_70247 = sub64(x_70246, defunc_0_g_res_70201);
                int64_t abs_res_70248 = abs64(abs_arg_70247);
                bool cond_70249 = max_res_70232 == l_idx_70228;
                int64_t loopres_70250;
                int64_t loopres_70251;
                int64_t loopres_70252;
                
                if (cond_70249) {
                    loopres_70250 = l_idx_70228;
                    loopres_70251 = r_idx_70229;
                    loopres_70252 = min_res_62276;
                } else {
                    bool cond_70253 = slt64(abs_res_70241, abs_res_70248);
                    bool cond_f_res_70254 = min_res_70234 == r_idx_70229;
                    bool x_70255 = !cond_70253;
                    bool y_70256 = cond_f_res_70254 && x_70255;
                    bool cond_70257 = cond_70253 || y_70256;
                    int64_t loopres_f_res_70258;
                    
                    if (cond_70257) {
                        loopres_f_res_70258 = max_res_70232;
                    } else {
                        loopres_f_res_70258 = l_idx_70228;
                    }
                    
                    int64_t loopres_f_res_70259;
                    
                    if (cond_70257) {
                        loopres_f_res_70259 = r_idx_70229;
                    } else {
                        loopres_f_res_70259 = min_res_70234;
                    }
                    
                    int64_t loopres_f_res_70260;
                    
                    if (cond_70257) {
                        int64_t loopres_f_res_t_res_70261 = add64((int64_t) 1,
                                                                  span_70230);
                        
                        loopres_f_res_70260 = loopres_f_res_t_res_70261;
                    } else {
                        int64_t loopres_f_res_f_res_70262 = add64((int64_t) 1,
                                                                  span_70230);
                        
                        loopres_f_res_70260 = loopres_f_res_f_res_70262;
                    }
                    loopres_70250 = loopres_f_res_70258;
                    loopres_70251 = loopres_f_res_70259;
                    loopres_70252 = loopres_f_res_70260;
                }
                
                bool loop_cond_70263 = slt64(loopres_70252, min_res_62276);
                bool loop_while_tmp_70403 = loop_cond_70263;
                int64_t l_idx_tmp_70404 = loopres_70250;
                int64_t r_idx_tmp_70405 = loopres_70251;
                int64_t span_tmp_70406 = loopres_70252;
                
                loop_while_70227 = loop_while_tmp_70403;
                l_idx_70228 = l_idx_tmp_70404;
                r_idx_70229 = r_idx_tmp_70405;
                span_70230 = span_tmp_70406;
            }
            idx_70223 = loop_while_70227;
            idx_70224 = l_idx_70228;
            idx_70225 = r_idx_70229;
            idx_70226 = span_70230;
            
            int64_t min_res_70264 = smin64(min_arg_62717, idx_70224);
            int64_t max_res_70265 = smax64((int64_t) 0, min_res_70264);
            int64_t x_70266 = add64(min_res_62718, max_res_70265);
            int64_t r_70267 = sub64(x_70266, (int64_t) 1);
            bool x_70268 = sle64((int64_t) 0, r_70267);
            bool y_70269 = slt64(r_70267, n_62256);
            bool bounds_check_70270 = x_70268 && y_70269;
            bool index_certs_70271;
            
            if (!bounds_check_70270) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_70267,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_70272 = ((int64_t *) mem_67719)[r_70267];
            int64_t abs_arg_70273 = sub64(x_70272, min_res_70200);
            int64_t abs_res_70274 = abs64(abs_arg_70273);
            bool x_70275 = sle64((int64_t) 0, max_res_70265);
            bool y_70276 = slt64(max_res_70265, n_62256);
            bool bounds_check_70277 = x_70275 && y_70276;
            bool index_certs_70278;
            
            if (!bounds_check_70277) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_70265,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_70279 = ((int64_t *) mem_67719)[max_res_70265];
            int64_t abs_arg_70280 = sub64(x_70279, min_res_70200);
            int64_t abs_res_70281 = abs64(abs_arg_70280);
            int64_t max_res_70282 = smax64(abs_res_70274, abs_res_70281);
            float defunc_0_f_res_70283 = sitofp_i64_f32(max_res_70282);
            float defunc_1_f_res_70284 = max_res_62722 + defunc_0_f_res_70283;
            float defunc_0_f_res_70285 = sitofp_i64_f32(min_res_70200);
            float defunc_2_reduce_res_70286;
            float defunc_2_reduce_res_70287;
            float defunc_2_reduce_res_70288;
            float defunc_2_reduce_res_70289;
            float defunc_2_reduce_res_70290;
            float redout_70292;
            float redout_70293;
            float redout_70294;
            float redout_70295;
            float redout_70296;
            
            redout_70292 = 0.0F;
            redout_70293 = 0.0F;
            redout_70294 = 0.0F;
            redout_70295 = 0.0F;
            redout_70296 = 0.0F;
            for (int64_t i_70291 = 0; i_70291 < q_62258; i_70291++) {
                float x_70297 = ((float *) mem_67776)[i_70291];
                bool cond_70298 = sle64(last_res_62701, i_70291);
                float defunc_0_f_res_70299;
                
                if (cond_70298) {
                    defunc_0_f_res_70299 = 0.0F;
                } else {
                    int64_t i_70300 = add64(max_res_70265, i_70291);
                    float x_70301 = ((float *) mem_67746)[i_70300];
                    float defunc_0_f_res_f_res_70302 = 1.0F + x_70301;
                    
                    defunc_0_f_res_70299 = defunc_0_f_res_f_res_70302;
                }
                
                float x_j_70303 = defunc_0_f_res_70299 - defunc_0_f_res_70285;
                float abs_res_70304 = (float) fabs(x_j_70303);
                float tmp1_70305 = abs_res_70304 / defunc_1_f_res_70284;
                float x_70306 = tmp1_70305 * tmp1_70305;
                float y_70307 = tmp1_70305 * x_70306;
                float tmp2_70308 = 1.0F - y_70307;
                float x_70309 = tmp2_70308 * tmp2_70308;
                float tmp3_70310 = tmp2_70308 * x_70309;
                float w_j_70311 = x_70297 * tmp3_70310;
                float xw_j_70312 = x_j_70303 * w_j_70311;
                float x2w_j_70313 = x_j_70303 * xw_j_70312;
                float x3w_j_70314 = x_j_70303 * x2w_j_70313;
                float x4w_j_70315 = x_j_70303 * x3w_j_70314;
                float defunc_1_op_res_70316 = w_j_70311 + redout_70292;
                float defunc_1_op_res_70317 = xw_j_70312 + redout_70293;
                float defunc_1_op_res_70318 = x2w_j_70313 + redout_70294;
                float defunc_1_op_res_70319 = x3w_j_70314 + redout_70295;
                float defunc_1_op_res_70320 = x4w_j_70315 + redout_70296;
                float redout_tmp_70407 = defunc_1_op_res_70316;
                float redout_tmp_70408 = defunc_1_op_res_70317;
                float redout_tmp_70409 = defunc_1_op_res_70318;
                float redout_tmp_70410 = defunc_1_op_res_70319;
                float redout_tmp_70411 = defunc_1_op_res_70320;
                
                redout_70292 = redout_tmp_70407;
                redout_70293 = redout_tmp_70408;
                redout_70294 = redout_tmp_70409;
                redout_70295 = redout_tmp_70410;
                redout_70296 = redout_tmp_70411;
            }
            defunc_2_reduce_res_70286 = redout_70292;
            defunc_2_reduce_res_70287 = redout_70293;
            defunc_2_reduce_res_70288 = redout_70294;
            defunc_2_reduce_res_70289 = redout_70295;
            defunc_2_reduce_res_70290 = redout_70296;
            
            float x_70321 = defunc_2_reduce_res_70288 *
                  defunc_2_reduce_res_70290;
            float y_70322 = defunc_2_reduce_res_70289 *
                  defunc_2_reduce_res_70289;
            float a12_70323 = x_70321 - y_70322;
            float x_70324 = defunc_2_reduce_res_70288 *
                  defunc_2_reduce_res_70289;
            float y_70325 = defunc_2_reduce_res_70287 *
                  defunc_2_reduce_res_70290;
            float b12_70326 = x_70324 - y_70325;
            float x_70327 = defunc_2_reduce_res_70287 *
                  defunc_2_reduce_res_70289;
            float y_70328 = defunc_2_reduce_res_70288 *
                  defunc_2_reduce_res_70288;
            float c12_70329 = x_70327 - y_70328;
            float x_70330 = defunc_2_reduce_res_70286 *
                  defunc_2_reduce_res_70290;
            float b2_70331 = x_70330 - y_70328;
            float x_70332 = defunc_2_reduce_res_70287 *
                  defunc_2_reduce_res_70288;
            float y_70333 = defunc_2_reduce_res_70286 *
                  defunc_2_reduce_res_70289;
            float c2_70334 = x_70332 - y_70333;
            float x_70335 = defunc_2_reduce_res_70286 * a12_70323;
            float y_70336 = defunc_2_reduce_res_70287 * b12_70326;
            float x_70337 = x_70335 + y_70336;
            float y_70338 = defunc_2_reduce_res_70288 * c12_70329;
            float y_70339 = x_70337 + y_70338;
            float det_70340 = 1.0F / y_70339;
            float a12_70341 = a12_70323 * det_70340;
            float b12_70342 = b12_70326 * det_70340;
            float c12_70343 = c12_70329 * det_70340;
            float b2_70344 = b2_70331 * det_70340;
            float c2_70345 = c2_70334 * det_70340;
            float defunc_2_reduce_res_70346;
            float defunc_2_reduce_res_70347;
            float redout_70349;
            float redout_70350;
            
            redout_70349 = 0.0F;
            redout_70350 = 0.0F;
            for (int64_t i_70348 = 0; i_70348 < q_62258; i_70348++) {
                float x_70351 = ((float *) mem_67776)[i_70348];
                bool cond_70352 = sle64(last_res_62701, i_70348);
                float defunc_0_f_res_70353;
                
                if (cond_70352) {
                    defunc_0_f_res_70353 = 0.0F;
                } else {
                    int64_t i_70354 = add64(max_res_70265, i_70348);
                    float x_70355 = ((float *) mem_67746)[i_70354];
                    float defunc_0_f_res_f_res_70356 = 1.0F + x_70355;
                    
                    defunc_0_f_res_70353 = defunc_0_f_res_f_res_70356;
                }
                
                float x_j_70357 = defunc_0_f_res_70353 - defunc_0_f_res_70285;
                float abs_res_70358 = (float) fabs(x_j_70357);
                float tmp1_70359 = abs_res_70358 / defunc_1_f_res_70284;
                float x_70360 = tmp1_70359 * tmp1_70359;
                float y_70361 = tmp1_70359 * x_70360;
                float tmp2_70362 = 1.0F - y_70361;
                float x_70363 = tmp2_70362 * tmp2_70362;
                float tmp3_70364 = tmp2_70362 * x_70363;
                float tmp4_70365 = x_70351 * tmp3_70364;
                float defunc_1_f_res_70366 = x_j_70357 * tmp4_70365;
                float defunc_1_f_res_70367 = x_j_70357 * defunc_1_f_res_70366;
                float defunc_0_f_res_70368;
                
                if (cond_70352) {
                    defunc_0_f_res_70368 = 0.0F;
                } else {
                    int64_t i_70369 = add64(max_res_70265, i_70348);
                    float x_70370 = ((float *) mem_67716)[i_70369];
                    
                    defunc_0_f_res_70368 = x_70370;
                }
                
                float x_70371 = a12_70341 * tmp4_70365;
                float y_70372 = b12_70342 * defunc_1_f_res_70366;
                float x_70373 = x_70371 + y_70372;
                float y_70374 = c12_70343 * defunc_1_f_res_70367;
                float x_70375 = x_70373 + y_70374;
                float defunc_9_fit_fun_res_70376 = defunc_0_f_res_70368 *
                      x_70375;
                float x_70377 = b12_70342 * tmp4_70365;
                float y_70378 = b2_70344 * defunc_1_f_res_70366;
                float x_70379 = x_70377 + y_70378;
                float y_70380 = c2_70345 * defunc_1_f_res_70367;
                float x_70381 = x_70379 + y_70380;
                float defunc_9_slope_fun_res_70382 = defunc_0_f_res_70368 *
                      x_70381;
                float defunc_1_op_res_70383 = defunc_9_fit_fun_res_70376 +
                      redout_70349;
                float defunc_1_op_res_70384 = defunc_9_slope_fun_res_70382 +
                      redout_70350;
                float redout_tmp_70412 = defunc_1_op_res_70383;
                float redout_tmp_70413 = defunc_1_op_res_70384;
                
                redout_70349 = redout_tmp_70412;
                redout_70350 = redout_tmp_70413;
            }
            defunc_2_reduce_res_70346 = redout_70349;
            defunc_2_reduce_res_70347 = redout_70350;
            ((float *) mem_67791)[i_70196] = defunc_2_reduce_res_70346;
            ((float *) mem_67794)[i_70196] = defunc_2_reduce_res_70347;
        }
        memmove(mem_67822.mem + gtid_64648 * n_m_62264 * (int64_t) 4,
                mem_67791 + (int64_t) 0, n_m_62264 * (int64_t) 4);
        memmove(mem_67826.mem + gtid_64648 * n_m_62264 * (int64_t) 4,
                mem_67794 + (int64_t) 0, n_m_62264 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67701);
    free(mem_67716);
    free(mem_67719);
    free(mem_67746);
    free(mem_67749);
    free(mem_67776);
    free(mem_67791);
    free(mem_67794);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73949_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73949_end -
                 futhark_mc_segmap_parloop_73949_start;
        
        ctx->futhark_mc_segmap_parloop_73949_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73949_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73949_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73947(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64647 = tid;
    int num_tasks_70160 = info.nsubtasks;
    struct futhark_mc_task_73946 *futhark_mc_task_73946 =
                                 (struct futhark_mc_task_73946 *) args;
    struct futhark_context *ctx = futhark_mc_task_73946->ctx;
    uint64_t futhark_mc_segmap_task_73947_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73947_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_task_73946->free_m_62255;
    int64_t n_62256 = futhark_mc_task_73946->free_n_62256;
    int64_t q_62258 = futhark_mc_task_73946->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_73946->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_73946->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_73946->free_i_62270;
    bool x_62271 = futhark_mc_task_73946->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_73946->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_73946->free_loop_cond_62281;
    float i64_res_62282 = futhark_mc_task_73946->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_73946->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67675 = futhark_mc_task_73946->free_bytes_67675;
    int64_t bytes_67678 = futhark_mc_task_73946->free_bytes_67678;
    int64_t bytes_67690 = futhark_mc_task_73946->free_bytes_67690;
    int64_t bytes_67693 = futhark_mc_task_73946->free_bytes_67693;
    struct memblock mem_67822 = {.desc ="mem_67822", .mem =
                                 futhark_mc_task_73946->free_mem_67822, .size =
                                 0, .references =NULL};
    struct memblock mem_67826 = {.desc ="mem_67826", .mem =
                                 futhark_mc_task_73946->free_mem_67826, .size =
                                 0, .references =NULL};
    int64_t iter_70161;
    struct futhark_mc_segmap_parloop_struct_73948
    futhark_mc_segmap_parloop_struct_73948;
    
    futhark_mc_segmap_parloop_struct_73948.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73948.free_m_62255 = m_62255;
    futhark_mc_segmap_parloop_struct_73948.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73948.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73948.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_73948.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_73948.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_73948.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_73948.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_73948.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_73948.free_i64_res_62282 = i64_res_62282;
    futhark_mc_segmap_parloop_struct_73948.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_73948.free_bytes_67675 = bytes_67675;
    futhark_mc_segmap_parloop_struct_73948.free_bytes_67678 = bytes_67678;
    futhark_mc_segmap_parloop_struct_73948.free_bytes_67690 = bytes_67690;
    futhark_mc_segmap_parloop_struct_73948.free_bytes_67693 = bytes_67693;
    futhark_mc_segmap_parloop_struct_73948.free_mem_67822 = mem_67822.mem;
    futhark_mc_segmap_parloop_struct_73948.free_mem_67826 = mem_67826.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73949_task;
    
    futhark_mc_segmap_parloop_73949_task.name =
        "futhark_mc_segmap_parloop_73949";
    futhark_mc_segmap_parloop_73949_task.fn = futhark_mc_segmap_parloop_73949;
    futhark_mc_segmap_parloop_73949_task.args =
        &futhark_mc_segmap_parloop_struct_73948;
    futhark_mc_segmap_parloop_73949_task.iterations = iterations;
    futhark_mc_segmap_parloop_73949_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73949_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73949_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73949_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73949_task);
    
    if (futhark_mc_segmap_parloop_73949_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73949_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73949_total_end -
                 futhark_mc_segmap_parloop_73949_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73949_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73949_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73949_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73947_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73947_end -
                 futhark_mc_segmap_task_73947_start;
        
        ctx->futhark_mc_segmap_task_73947_runs[tid]++;
        ctx->futhark_mc_segmap_task_73947_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73947_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_73959 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67675;
    int64_t free_bytes_67678;
    int64_t free_bytes_67690;
    int64_t free_bytes_67693;
    char *free_mem_67822;
    char *free_mem_67826;
};
struct futhark_mc_task_73969 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_64650;
    char *free_Y_mem_67388;
    char *free_mem_67677;
};
struct futhark_mc_scan_stage_1_parloop_struct_73972 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_64650;
    char *free_Y_mem_67388;
    char *free_mem_67677;
};
static int futhark_mc_scan_stage_1_parloop_73973(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_64651, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_73972
    *futhark_mc_scan_stage_1_parloop_struct_73972 =
    (struct futhark_mc_scan_stage_1_parloop_struct_73972 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_73972->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_73973_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_73973_start = get_wall_time();
    
    int64_t n_62256 =
            futhark_mc_scan_stage_1_parloop_struct_73972->free_n_62256;
    int64_t gtid_64650 =
            futhark_mc_scan_stage_1_parloop_struct_73972->free_gtid_64650;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_73972->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67677 = {.desc ="mem_67677", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_73972->free_mem_67677,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70813 = start;
    int64_t x_70415;
    int64_t x_70416;
    
    x_70415 = (int64_t) 0;
    for (; iter_70813 < end; iter_70813++) {
        int64_t gtid_64652 = iter_70813;
        
        // stage 1 scan body
        {
            float x_70418 = ((float *) Y_mem_67388.mem)[gtid_64650 * n_62256 +
                                                        gtid_64652];
            bool isnan_res_70419;
            
            isnan_res_70419 = futrts_isnan32(x_70418);
            
            bool defunc_0_p_res_70420 = !isnan_res_70419;
            int64_t defunc_0_f_res_70421 = btoi_bool_i64(defunc_0_p_res_70420);
            
            // write mapped values results to memory
            { }
            x_70415 = x_70415;
            // Read next values
            {
                x_70416 = defunc_0_f_res_70421;
            }
            
            int64_t defunc_1_op_res_70417 = add64(x_70415, x_70416);
            
            ((int64_t *) mem_67677.mem)[gtid_64652] = defunc_1_op_res_70417;
            x_70415 = defunc_1_op_res_70417;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_73973_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_73973_end -
                 futhark_mc_scan_stage_1_parloop_73973_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_73973_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_73973_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_73973_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_73974 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_64650;
    char *free_Y_mem_67388;
    char *free_mem_67677;
};
static int futhark_mc_scan_stage_3_parloop_73975(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_64651, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_73974
    *futhark_mc_scan_stage_3_parloop_struct_73974 =
    (struct futhark_mc_scan_stage_3_parloop_struct_73974 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_73974->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_73975_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_73975_start = get_wall_time();
    
    int64_t n_62256 =
            futhark_mc_scan_stage_3_parloop_struct_73974->free_n_62256;
    int64_t gtid_64650 =
            futhark_mc_scan_stage_3_parloop_struct_73974->free_gtid_64650;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_73974->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67677 = {.desc ="mem_67677", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_73974->free_mem_67677,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70825 = start;
    int64_t x_70822;
    int64_t x_70823;
    
    if (iter_70825 == (int64_t) 0) {
        x_70822 = (int64_t) 0;
    } else {
        x_70822 = ((int64_t *) mem_67677.mem)[iter_70825 - (int64_t) 1];
    }
    for (; iter_70825 < end; iter_70825++) {
        int64_t gtid_64652 = iter_70825;
        
        // stage 3 scan body
        {
            float x_70418 = ((float *) Y_mem_67388.mem)[gtid_64650 * n_62256 +
                                                        gtid_64652];
            bool isnan_res_70419;
            
            isnan_res_70419 = futrts_isnan32(x_70418);
            
            bool defunc_0_p_res_70420 = !isnan_res_70419;
            int64_t defunc_0_f_res_70421 = btoi_bool_i64(defunc_0_p_res_70420);
            
            x_70822 = x_70822;
            x_70823 = defunc_0_f_res_70421;
            
            int64_t defunc_1_op_res_70824 = add64(x_70822, x_70823);
            
            ((int64_t *) mem_67677.mem)[gtid_64652] = defunc_1_op_res_70824;
            x_70822 = defunc_1_op_res_70824;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_73975_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_73975_end -
                 futhark_mc_scan_stage_3_parloop_73975_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_73975_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_73975_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_73975_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_73970(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64651 = tid;
    int num_tasks_70812 = info.nsubtasks;
    struct futhark_mc_task_73969 *futhark_mc_task_73969 =
                                 (struct futhark_mc_task_73969 *) args;
    struct futhark_context *ctx = futhark_mc_task_73969->ctx;
    uint64_t futhark_mc_segscan_task_73970_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_73970_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73969->free_n_62256;
    int64_t gtid_64650 = futhark_mc_task_73969->free_gtid_64650;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_73969->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67677 = {.desc ="mem_67677", .mem =
                                 futhark_mc_task_73969->free_mem_67677, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_70819_cached_sizze_73971 = 0;
    char *scan_stage_2_accum_mem_70819 = NULL;
    int64_t iter_70813;
    struct futhark_mc_scan_stage_1_parloop_struct_73972
    futhark_mc_scan_stage_1_parloop_struct_73972;
    
    futhark_mc_scan_stage_1_parloop_struct_73972.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_73972.free_n_62256 = n_62256;
    futhark_mc_scan_stage_1_parloop_struct_73972.free_gtid_64650 = gtid_64650;
    futhark_mc_scan_stage_1_parloop_struct_73972.free_Y_mem_67388 =
        Y_mem_67388.mem;
    futhark_mc_scan_stage_1_parloop_struct_73972.free_mem_67677 = mem_67677.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_73973_task;
    
    futhark_mc_scan_stage_1_parloop_73973_task.name =
        "futhark_mc_scan_stage_1_parloop_73973";
    futhark_mc_scan_stage_1_parloop_73973_task.fn =
        futhark_mc_scan_stage_1_parloop_73973;
    futhark_mc_scan_stage_1_parloop_73973_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_73972;
    futhark_mc_scan_stage_1_parloop_73973_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_73973_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_73973_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_73973_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_73973_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_73973_task);
    
    if (futhark_mc_scan_stage_1_parloop_73973_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_73973_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_73973_total_end -
                 futhark_mc_scan_stage_1_parloop_73973_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73973_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73973_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_73973_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_70812)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_70814;
        int64_t x_70815;
        int64_t offset_70817 = (int64_t) 0;
        int64_t offset_index_70818 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_70819_cached_sizze_73971 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_70819 = realloc(scan_stage_2_accum_mem_70819,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_70819_cached_sizze_73971 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_70819)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_70821 = 0; i_70821 < num_tasks_70812 - 1; i_70821++) {
            offset_70817 = squot64(n_62256, sext_i32_i64(num_tasks_70812));
            if (slt64(sext_i32_i64(i_70821), srem64(n_62256,
                                                    sext_i32_i64(num_tasks_70812)))) {
                offset_70817 += (int64_t) 1;
            }
            offset_index_70818 += offset_70817;
            
            int64_t gtid_64652 = offset_index_70818;
            float x_70418 = ((float *) Y_mem_67388.mem)[gtid_64650 * n_62256 +
                                                        gtid_64652];
            bool isnan_res_70419;
            
            isnan_res_70419 = futrts_isnan32(x_70418);
            
            bool defunc_0_p_res_70420 = !isnan_res_70419;
            int64_t defunc_0_f_res_70421 = btoi_bool_i64(defunc_0_p_res_70420);
            
            // Read carry in
            {
                x_70814 =
                    ((int64_t *) scan_stage_2_accum_mem_70819)[(int64_t) 0];
            }
            // Read next values
            {
                x_70815 = ((int64_t *) mem_67677.mem)[offset_index_70818 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_70816 = add64(x_70814, x_70815);
            
            ((int64_t *) mem_67677.mem)[offset_index_70818 - (int64_t) 1] =
                defunc_1_op_res_70816;
            ((int64_t *) scan_stage_2_accum_mem_70819)[(int64_t) 0] =
                defunc_1_op_res_70816;
        }
        
        int64_t iter_70825 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_73974
        futhark_mc_scan_stage_3_parloop_struct_73974;
        
        futhark_mc_scan_stage_3_parloop_struct_73974.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_73974.free_n_62256 = n_62256;
        futhark_mc_scan_stage_3_parloop_struct_73974.free_gtid_64650 =
            gtid_64650;
        futhark_mc_scan_stage_3_parloop_struct_73974.free_Y_mem_67388 =
            Y_mem_67388.mem;
        futhark_mc_scan_stage_3_parloop_struct_73974.free_mem_67677 =
            mem_67677.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_73975_task;
        
        futhark_mc_scan_stage_3_parloop_73975_task.name =
            "futhark_mc_scan_stage_3_parloop_73975";
        futhark_mc_scan_stage_3_parloop_73975_task.fn =
            futhark_mc_scan_stage_3_parloop_73975;
        futhark_mc_scan_stage_3_parloop_73975_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_73974;
        futhark_mc_scan_stage_3_parloop_73975_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_73975_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_73975_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_73975_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_73975_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_73975_task);
        
        if (futhark_mc_scan_stage_3_parloop_73975_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_73975_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_73975_total_end -
                     futhark_mc_scan_stage_3_parloop_73975_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73975_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73975_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_73975_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_70819);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_73970_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_73970_end -
                 futhark_mc_segscan_task_73970_start;
        
        ctx->futhark_mc_segscan_task_73970_runs[tid]++;
        ctx->futhark_mc_segscan_task_73970_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_73970_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73976 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_64650;
    char *free_Y_mem_67388;
    char *free_mem_67677;
    char *free_mem_67680;
    char *free_mem_67683;
};
struct futhark_mc_segmap_parloop_struct_73978 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_64650;
    char *free_Y_mem_67388;
    char *free_mem_67677;
    char *free_mem_67680;
    char *free_mem_67683;
};
static int futhark_mc_segmap_parloop_73979(void *args, int64_t start,
                                           int64_t end, int flat_tid_64653,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73978
    *futhark_mc_segmap_parloop_struct_73978 =
    (struct futhark_mc_segmap_parloop_struct_73978 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73978->ctx;
    uint64_t futhark_mc_segmap_parloop_73979_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73979_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73978->free_n_62256;
    int64_t gtid_64650 =
            futhark_mc_segmap_parloop_struct_73978->free_gtid_64650;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_73978->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67677 = {.desc ="mem_67677", .mem =
                                 futhark_mc_segmap_parloop_struct_73978->free_mem_67677,
                                 .size =0, .references =NULL};
    struct memblock mem_67680 = {.desc ="mem_67680", .mem =
                                 futhark_mc_segmap_parloop_struct_73978->free_mem_67680,
                                 .size =0, .references =NULL};
    struct memblock mem_67683 = {.desc ="mem_67683", .mem =
                                 futhark_mc_segmap_parloop_struct_73978->free_mem_67683,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70829 = start;
    
    for (; iter_70829 < end; iter_70829++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_70832 = n_62256;
        int64_t gtid_64654 = iter_70829;
        int64_t remnant_70833 = iter_70829 - gtid_64654;
        float x_70422 = ((float *) Y_mem_67388.mem)[gtid_64650 * n_62256 +
                                                    gtid_64654];
        bool isnan_res_70423;
        
        isnan_res_70423 = futrts_isnan32(x_70422);
        
        bool defunc_0_p_res_70424 = !isnan_res_70423;
        int64_t defunc_1_f_res_70425;
        
        if (defunc_0_p_res_70424) {
            int64_t x_70830 = ((int64_t *) mem_67677.mem)[gtid_64654];
            int64_t defunc_1_f_res_t_res_70831 = sub64(x_70830, (int64_t) 1);
            
            defunc_1_f_res_70425 = defunc_1_f_res_t_res_70831;
        } else {
            defunc_1_f_res_70425 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_70425) &&
            slt64(defunc_1_f_res_70425, n_62256)) {
            ((int64_t *) mem_67683.mem)[defunc_1_f_res_70425] = gtid_64654;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_70425) &&
            slt64(defunc_1_f_res_70425, n_62256)) {
            ((float *) mem_67680.mem)[defunc_1_f_res_70425] = x_70422;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73979_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73979_end -
                 futhark_mc_segmap_parloop_73979_start;
        
        ctx->futhark_mc_segmap_parloop_73979_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73979_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73979_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73977(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64653 = tid;
    int num_tasks_70828 = info.nsubtasks;
    struct futhark_mc_task_73976 *futhark_mc_task_73976 =
                                 (struct futhark_mc_task_73976 *) args;
    struct futhark_context *ctx = futhark_mc_task_73976->ctx;
    uint64_t futhark_mc_segmap_task_73977_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73977_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73976->free_n_62256;
    int64_t gtid_64650 = futhark_mc_task_73976->free_gtid_64650;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_73976->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67677 = {.desc ="mem_67677", .mem =
                                 futhark_mc_task_73976->free_mem_67677, .size =
                                 0, .references =NULL};
    struct memblock mem_67680 = {.desc ="mem_67680", .mem =
                                 futhark_mc_task_73976->free_mem_67680, .size =
                                 0, .references =NULL};
    struct memblock mem_67683 = {.desc ="mem_67683", .mem =
                                 futhark_mc_task_73976->free_mem_67683, .size =
                                 0, .references =NULL};
    int64_t iter_70829;
    struct futhark_mc_segmap_parloop_struct_73978
    futhark_mc_segmap_parloop_struct_73978;
    
    futhark_mc_segmap_parloop_struct_73978.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73978.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73978.free_gtid_64650 = gtid_64650;
    futhark_mc_segmap_parloop_struct_73978.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_73978.free_mem_67677 = mem_67677.mem;
    futhark_mc_segmap_parloop_struct_73978.free_mem_67680 = mem_67680.mem;
    futhark_mc_segmap_parloop_struct_73978.free_mem_67683 = mem_67683.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73979_task;
    
    futhark_mc_segmap_parloop_73979_task.name =
        "futhark_mc_segmap_parloop_73979";
    futhark_mc_segmap_parloop_73979_task.fn = futhark_mc_segmap_parloop_73979;
    futhark_mc_segmap_parloop_73979_task.args =
        &futhark_mc_segmap_parloop_struct_73978;
    futhark_mc_segmap_parloop_73979_task.iterations = iterations;
    futhark_mc_segmap_parloop_73979_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73979_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73979_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73979_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73979_task);
    
    if (futhark_mc_segmap_parloop_73979_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73979_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73979_total_end -
                 futhark_mc_segmap_parloop_73979_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73979_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73979_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73979_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73977_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73977_end -
                 futhark_mc_segmap_task_73977_start;
        
        ctx->futhark_mc_segmap_task_73977_runs[tid]++;
        ctx->futhark_mc_segmap_task_73977_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73977_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73980 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    char *free_mem_67683;
    char *free_mem_67686;
    char *free_mem_67689;
};
struct futhark_mc_segmap_parloop_struct_73982 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    char *free_mem_67683;
    char *free_mem_67686;
    char *free_mem_67689;
};
static int futhark_mc_segmap_parloop_73983(void *args, int64_t start,
                                           int64_t end, int flat_tid_64655,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73982
    *futhark_mc_segmap_parloop_struct_73982 =
    (struct futhark_mc_segmap_parloop_struct_73982 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73982->ctx;
    uint64_t futhark_mc_segmap_parloop_73983_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73983_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73982->free_n_62256;
    struct memblock mem_67683 = {.desc ="mem_67683", .mem =
                                 futhark_mc_segmap_parloop_struct_73982->free_mem_67683,
                                 .size =0, .references =NULL};
    struct memblock mem_67686 = {.desc ="mem_67686", .mem =
                                 futhark_mc_segmap_parloop_struct_73982->free_mem_67686,
                                 .size =0, .references =NULL};
    struct memblock mem_67689 = {.desc ="mem_67689", .mem =
                                 futhark_mc_segmap_parloop_struct_73982->free_mem_67689,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70835 = start;
    
    for (; iter_70835 < end; iter_70835++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_70836 = n_62256;
        int64_t gtid_64656 = iter_70835;
        int64_t remnant_70837 = iter_70835 - gtid_64656;
        int64_t x_70428 = ((int64_t *) mem_67683.mem)[gtid_64656];
        int64_t defunc_0_f_res_70429 = add64((int64_t) 1, x_70428);
        float defunc_0_f_res_70430 = sitofp_i64_f32(x_70428);
        
        ((float *) mem_67686.mem)[gtid_64656] = defunc_0_f_res_70430;
        ((int64_t *) mem_67689.mem)[gtid_64656] = defunc_0_f_res_70429;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73983_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73983_end -
                 futhark_mc_segmap_parloop_73983_start;
        
        ctx->futhark_mc_segmap_parloop_73983_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73983_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73983_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73981(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64655 = tid;
    int num_tasks_70834 = info.nsubtasks;
    struct futhark_mc_task_73980 *futhark_mc_task_73980 =
                                 (struct futhark_mc_task_73980 *) args;
    struct futhark_context *ctx = futhark_mc_task_73980->ctx;
    uint64_t futhark_mc_segmap_task_73981_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73981_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73980->free_n_62256;
    struct memblock mem_67683 = {.desc ="mem_67683", .mem =
                                 futhark_mc_task_73980->free_mem_67683, .size =
                                 0, .references =NULL};
    struct memblock mem_67686 = {.desc ="mem_67686", .mem =
                                 futhark_mc_task_73980->free_mem_67686, .size =
                                 0, .references =NULL};
    struct memblock mem_67689 = {.desc ="mem_67689", .mem =
                                 futhark_mc_task_73980->free_mem_67689, .size =
                                 0, .references =NULL};
    int64_t iter_70835;
    struct futhark_mc_segmap_parloop_struct_73982
    futhark_mc_segmap_parloop_struct_73982;
    
    futhark_mc_segmap_parloop_struct_73982.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73982.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73982.free_mem_67683 = mem_67683.mem;
    futhark_mc_segmap_parloop_struct_73982.free_mem_67686 = mem_67686.mem;
    futhark_mc_segmap_parloop_struct_73982.free_mem_67689 = mem_67689.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73983_task;
    
    futhark_mc_segmap_parloop_73983_task.name =
        "futhark_mc_segmap_parloop_73983";
    futhark_mc_segmap_parloop_73983_task.fn = futhark_mc_segmap_parloop_73983;
    futhark_mc_segmap_parloop_73983_task.args =
        &futhark_mc_segmap_parloop_struct_73982;
    futhark_mc_segmap_parloop_73983_task.iterations = iterations;
    futhark_mc_segmap_parloop_73983_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73983_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73983_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73983_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73983_task);
    
    if (futhark_mc_segmap_parloop_73983_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73983_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73983_total_end -
                 futhark_mc_segmap_parloop_73983_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73983_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73983_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73983_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73981_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73981_end -
                 futhark_mc_segmap_task_73981_start;
        
        ctx->futhark_mc_segmap_task_73981_runs[tid]++;
        ctx->futhark_mc_segmap_task_73981_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73981_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73984 {
    struct futhark_context *ctx;
    int64_t free_q_62258;
    int64_t free_last_res_64870;
    char *free_mem_67692;
};
struct futhark_mc_segmap_parloop_struct_73986 {
    struct futhark_context *ctx;
    int64_t free_q_62258;
    int64_t free_last_res_64870;
    char *free_mem_67692;
};
static int futhark_mc_segmap_parloop_73987(void *args, int64_t start,
                                           int64_t end, int flat_tid_64657,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73986
    *futhark_mc_segmap_parloop_struct_73986 =
    (struct futhark_mc_segmap_parloop_struct_73986 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73986->ctx;
    uint64_t futhark_mc_segmap_parloop_73987_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73987_start = get_wall_time();
    
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73986->free_q_62258;
    int64_t last_res_64870 =
            futhark_mc_segmap_parloop_struct_73986->free_last_res_64870;
    struct memblock mem_67692 = {.desc ="mem_67692", .mem =
                                 futhark_mc_segmap_parloop_struct_73986->free_mem_67692,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70839 = start;
    
    for (; iter_70839 < end; iter_70839++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_70840 = q_62258;
        int64_t gtid_64658 = iter_70839;
        int64_t remnant_70841 = iter_70839 - gtid_64658;
        bool cond_70431 = sle64(last_res_64870, gtid_64658);
        float defunc_0_f_res_70432;
        
        if (cond_70431) {
            defunc_0_f_res_70432 = 0.0F;
        } else {
            defunc_0_f_res_70432 = 1.0F;
        }
        ((float *) mem_67692.mem)[gtid_64658] = defunc_0_f_res_70432;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73987_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73987_end -
                 futhark_mc_segmap_parloop_73987_start;
        
        ctx->futhark_mc_segmap_parloop_73987_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73987_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73987_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73985(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64657 = tid;
    int num_tasks_70838 = info.nsubtasks;
    struct futhark_mc_task_73984 *futhark_mc_task_73984 =
                                 (struct futhark_mc_task_73984 *) args;
    struct futhark_context *ctx = futhark_mc_task_73984->ctx;
    uint64_t futhark_mc_segmap_task_73985_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73985_start = get_wall_time();
    
    int64_t q_62258 = futhark_mc_task_73984->free_q_62258;
    int64_t last_res_64870 = futhark_mc_task_73984->free_last_res_64870;
    struct memblock mem_67692 = {.desc ="mem_67692", .mem =
                                 futhark_mc_task_73984->free_mem_67692, .size =
                                 0, .references =NULL};
    int64_t iter_70839;
    struct futhark_mc_segmap_parloop_struct_73986
    futhark_mc_segmap_parloop_struct_73986;
    
    futhark_mc_segmap_parloop_struct_73986.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73986.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73986.free_last_res_64870 = last_res_64870;
    futhark_mc_segmap_parloop_struct_73986.free_mem_67692 = mem_67692.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73987_task;
    
    futhark_mc_segmap_parloop_73987_task.name =
        "futhark_mc_segmap_parloop_73987";
    futhark_mc_segmap_parloop_73987_task.fn = futhark_mc_segmap_parloop_73987;
    futhark_mc_segmap_parloop_73987_task.args =
        &futhark_mc_segmap_parloop_struct_73986;
    futhark_mc_segmap_parloop_73987_task.iterations = iterations;
    futhark_mc_segmap_parloop_73987_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73987_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73987_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73987_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73987_task);
    
    if (futhark_mc_segmap_parloop_73987_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73987_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73987_total_end -
                 futhark_mc_segmap_parloop_73987_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73987_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73987_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73987_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73985_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73985_end -
                 futhark_mc_segmap_task_73985_start;
        
        ctx->futhark_mc_segmap_task_73985_runs[tid]++;
        ctx->futhark_mc_segmap_task_73985_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73985_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_73988 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_64870;
    int64_t free_min_arg_64882;
    int64_t free_min_arg_64883;
    int64_t free_min_res_64884;
    float free_max_res_64888;
    char *free_mem_67680;
    char *free_mem_67683;
    char *free_mem_67686;
    char *free_mem_67689;
    char *free_mem_67692;
    char *free_mem_67695;
    char *free_mem_67698;
};
struct futhark_mc_segmap_parloop_struct_73990 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_64870;
    int64_t free_min_arg_64882;
    int64_t free_min_arg_64883;
    int64_t free_min_res_64884;
    float free_max_res_64888;
    char *free_mem_67680;
    char *free_mem_67683;
    char *free_mem_67686;
    char *free_mem_67689;
    char *free_mem_67692;
    char *free_mem_67695;
    char *free_mem_67698;
};
static int futhark_mc_segmap_parloop_73991(void *args, int64_t start,
                                           int64_t end, int flat_tid_64659,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73990
    *futhark_mc_segmap_parloop_struct_73990 =
    (struct futhark_mc_segmap_parloop_struct_73990 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73990->ctx;
    uint64_t futhark_mc_segmap_parloop_73991_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73991_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73990->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73990->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_73990->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_73990->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_73990->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_73990->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_73990->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_73990->free_loop_cond_62281;
    int64_t last_res_64870 =
            futhark_mc_segmap_parloop_struct_73990->free_last_res_64870;
    int64_t min_arg_64882 =
            futhark_mc_segmap_parloop_struct_73990->free_min_arg_64882;
    int64_t min_arg_64883 =
            futhark_mc_segmap_parloop_struct_73990->free_min_arg_64883;
    int64_t min_res_64884 =
            futhark_mc_segmap_parloop_struct_73990->free_min_res_64884;
    float max_res_64888 =
          futhark_mc_segmap_parloop_struct_73990->free_max_res_64888;
    struct memblock mem_67680 = {.desc ="mem_67680", .mem =
                                 futhark_mc_segmap_parloop_struct_73990->free_mem_67680,
                                 .size =0, .references =NULL};
    struct memblock mem_67683 = {.desc ="mem_67683", .mem =
                                 futhark_mc_segmap_parloop_struct_73990->free_mem_67683,
                                 .size =0, .references =NULL};
    struct memblock mem_67686 = {.desc ="mem_67686", .mem =
                                 futhark_mc_segmap_parloop_struct_73990->free_mem_67686,
                                 .size =0, .references =NULL};
    struct memblock mem_67689 = {.desc ="mem_67689", .mem =
                                 futhark_mc_segmap_parloop_struct_73990->free_mem_67689,
                                 .size =0, .references =NULL};
    struct memblock mem_67692 = {.desc ="mem_67692", .mem =
                                 futhark_mc_segmap_parloop_struct_73990->free_mem_67692,
                                 .size =0, .references =NULL};
    struct memblock mem_67695 = {.desc ="mem_67695", .mem =
                                 futhark_mc_segmap_parloop_struct_73990->free_mem_67695,
                                 .size =0, .references =NULL};
    struct memblock mem_67698 = {.desc ="mem_67698", .mem =
                                 futhark_mc_segmap_parloop_struct_73990->free_mem_67698,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70843 = start;
    
    for (; iter_70843 < end; iter_70843++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_70966 = n_m_62264;
        int64_t gtid_64660 = iter_70843;
        int64_t remnant_70967 = iter_70843 - gtid_64660;
        int64_t min_arg_70624 = mul64(jump_62260, gtid_64660);
        int64_t min_res_70625 = smin64(i_62270, min_arg_70624);
        int64_t defunc_0_g_res_70626 = add64((int64_t) 1, min_res_70625);
        bool init_idx_70627;
        int64_t init_idx_70628;
        int64_t init_idx_70629;
        bool loop_while_70844;
        int64_t low_70845;
        int64_t high_70846;
        
        loop_while_70844 = x_62271;
        low_70845 = (int64_t) 0;
        high_70846 = i_62270;
        while (loop_while_70844) {
            int64_t x_70847 = add64(low_70845, high_70846);
            int64_t mid_70848 = sdiv64(x_70847, (int64_t) 2);
            bool x_70849 = sle64((int64_t) 0, mid_70848);
            bool y_70850 = slt64(mid_70848, n_62256);
            bool bounds_check_70851 = x_70849 && y_70850;
            bool index_certs_70852;
            
            if (!bounds_check_70851) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_70848,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t mid_id_70853 = ((int64_t *) mem_67689.mem)[mid_70848];
            bool cond_70854 = slt64(mid_id_70853, (int64_t) 0);
            int64_t mid_idx_70855;
            
            if (cond_70854) {
                mid_idx_70855 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_70855 = mid_id_70853;
            }
            
            bool cond_70856 = sle64(defunc_0_g_res_70626, mid_idx_70855);
            int64_t loopres_70857;
            int64_t loopres_70858;
            
            if (cond_70856) {
                int64_t loopres_t_res_70859 = sub64(mid_70848, (int64_t) 1);
                
                loopres_70857 = low_70845;
                loopres_70858 = loopres_t_res_70859;
            } else {
                int64_t loopres_f_res_70860 = add64((int64_t) 1, mid_70848);
                
                loopres_70857 = loopres_f_res_70860;
                loopres_70858 = high_70846;
            }
            
            bool loop_cond_70861 = sle64(loopres_70857, loopres_70858);
            bool loop_while_tmp_70968 = loop_cond_70861;
            int64_t low_tmp_70969 = loopres_70857;
            int64_t high_tmp_70970 = loopres_70858;
            
            loop_while_70844 = loop_while_tmp_70968;
            low_70845 = low_tmp_70969;
            high_70846 = high_tmp_70970;
        }
        init_idx_70627 = loop_while_70844;
        init_idx_70628 = low_70845;
        init_idx_70629 = high_70846;
        
        bool idx_70648;
        int64_t idx_70649;
        int64_t idx_70650;
        int64_t idx_70651;
        bool loop_while_70862;
        int64_t l_idx_70863;
        int64_t r_idx_70864;
        int64_t span_70865;
        
        loop_while_70862 = loop_cond_62281;
        l_idx_70863 = init_idx_70628;
        r_idx_70864 = init_idx_70628;
        span_70865 = (int64_t) 1;
        while (loop_while_70862) {
            int64_t max_arg_70866 = sub64(l_idx_70863, (int64_t) 1);
            int64_t max_res_70867 = smax64((int64_t) 0, max_arg_70866);
            int64_t min_arg_70868 = add64((int64_t) 1, r_idx_70864);
            int64_t min_res_70869 = smin64(min_arg_64882, min_arg_70868);
            bool x_70870 = sle64((int64_t) 0, max_res_70867);
            bool y_70871 = slt64(max_res_70867, n_62256);
            bool bounds_check_70872 = x_70870 && y_70871;
            bool index_certs_70873;
            
            if (!bounds_check_70872) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_70867,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_70874 = ((int64_t *) mem_67689.mem)[max_res_70867];
            int64_t abs_arg_70875 = sub64(x_70874, defunc_0_g_res_70626);
            int64_t abs_res_70876 = abs64(abs_arg_70875);
            bool x_70877 = sle64((int64_t) 0, min_res_70869);
            bool y_70878 = slt64(min_res_70869, n_62256);
            bool bounds_check_70879 = x_70877 && y_70878;
            bool index_certs_70880;
            
            if (!bounds_check_70879) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_70869,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_70881 = ((int64_t *) mem_67689.mem)[min_res_70869];
            int64_t abs_arg_70882 = sub64(x_70881, defunc_0_g_res_70626);
            int64_t abs_res_70883 = abs64(abs_arg_70882);
            bool cond_70884 = max_res_70867 == l_idx_70863;
            int64_t loopres_70885;
            int64_t loopres_70886;
            int64_t loopres_70887;
            
            if (cond_70884) {
                loopres_70885 = l_idx_70863;
                loopres_70886 = r_idx_70864;
                loopres_70887 = min_res_62276;
            } else {
                bool cond_70888 = slt64(abs_res_70876, abs_res_70883);
                bool cond_f_res_70889 = min_res_70869 == r_idx_70864;
                bool x_70890 = !cond_70888;
                bool y_70891 = cond_f_res_70889 && x_70890;
                bool cond_70892 = cond_70888 || y_70891;
                int64_t loopres_f_res_70893;
                
                if (cond_70892) {
                    loopres_f_res_70893 = max_res_70867;
                } else {
                    loopres_f_res_70893 = l_idx_70863;
                }
                
                int64_t loopres_f_res_70894;
                
                if (cond_70892) {
                    loopres_f_res_70894 = r_idx_70864;
                } else {
                    loopres_f_res_70894 = min_res_70869;
                }
                
                int64_t loopres_f_res_70895;
                
                if (cond_70892) {
                    int64_t loopres_f_res_t_res_70896 = add64((int64_t) 1,
                                                              span_70865);
                    
                    loopres_f_res_70895 = loopres_f_res_t_res_70896;
                } else {
                    int64_t loopres_f_res_f_res_70897 = add64((int64_t) 1,
                                                              span_70865);
                    
                    loopres_f_res_70895 = loopres_f_res_f_res_70897;
                }
                loopres_70885 = loopres_f_res_70893;
                loopres_70886 = loopres_f_res_70894;
                loopres_70887 = loopres_f_res_70895;
            }
            
            bool loop_cond_70898 = slt64(loopres_70887, min_res_62276);
            bool loop_while_tmp_70971 = loop_cond_70898;
            int64_t l_idx_tmp_70972 = loopres_70885;
            int64_t r_idx_tmp_70973 = loopres_70886;
            int64_t span_tmp_70974 = loopres_70887;
            
            loop_while_70862 = loop_while_tmp_70971;
            l_idx_70863 = l_idx_tmp_70972;
            r_idx_70864 = r_idx_tmp_70973;
            span_70865 = span_tmp_70974;
        }
        idx_70648 = loop_while_70862;
        idx_70649 = l_idx_70863;
        idx_70650 = r_idx_70864;
        idx_70651 = span_70865;
        
        int64_t min_res_70689 = smin64(min_arg_64883, idx_70649);
        int64_t max_res_70690 = smax64((int64_t) 0, min_res_70689);
        int64_t x_70691 = add64(min_res_64884, max_res_70690);
        int64_t r_70692 = sub64(x_70691, (int64_t) 1);
        bool x_70693 = sle64((int64_t) 0, r_70692);
        bool y_70694 = slt64(r_70692, n_62256);
        bool bounds_check_70695 = x_70693 && y_70694;
        bool index_certs_70696;
        
        if (!bounds_check_70695) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_70692,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_70697 = ((int64_t *) mem_67683.mem)[r_70692];
        int64_t abs_arg_70698 = sub64(x_70697, min_res_70625);
        int64_t abs_res_70699 = abs64(abs_arg_70698);
        bool x_70700 = sle64((int64_t) 0, max_res_70690);
        bool y_70701 = slt64(max_res_70690, n_62256);
        bool bounds_check_70702 = x_70700 && y_70701;
        bool index_certs_70703;
        
        if (!bounds_check_70702) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_70690,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_70704 = ((int64_t *) mem_67683.mem)[max_res_70690];
        int64_t abs_arg_70705 = sub64(x_70704, min_res_70625);
        int64_t abs_res_70706 = abs64(abs_arg_70705);
        int64_t max_res_70707 = smax64(abs_res_70699, abs_res_70706);
        float defunc_0_f_res_70708 = sitofp_i64_f32(max_res_70707);
        float defunc_1_f_res_70709 = max_res_64888 + defunc_0_f_res_70708;
        float defunc_0_f_res_70710 = sitofp_i64_f32(min_res_70625);
        float defunc_2_reduce_res_70711;
        float defunc_2_reduce_res_70712;
        float defunc_2_reduce_res_70713;
        float defunc_2_reduce_res_70714;
        float defunc_2_reduce_res_70715;
        float redout_70900;
        float redout_70901;
        float redout_70902;
        float redout_70903;
        float redout_70904;
        
        redout_70900 = 0.0F;
        redout_70901 = 0.0F;
        redout_70902 = 0.0F;
        redout_70903 = 0.0F;
        redout_70904 = 0.0F;
        for (int64_t i_70899 = 0; i_70899 < q_62258; i_70899++) {
            float x_70905 = ((float *) mem_67692.mem)[i_70899];
            bool cond_70906 = sle64(last_res_64870, i_70899);
            float defunc_0_f_res_70907;
            
            if (cond_70906) {
                defunc_0_f_res_70907 = 0.0F;
            } else {
                int64_t i_70908 = add64(max_res_70690, i_70899);
                float x_70909 = ((float *) mem_67686.mem)[i_70908];
                float defunc_0_f_res_f_res_70910 = 1.0F + x_70909;
                
                defunc_0_f_res_70907 = defunc_0_f_res_f_res_70910;
            }
            
            float x_j_70911 = defunc_0_f_res_70907 - defunc_0_f_res_70710;
            float abs_res_70912 = (float) fabs(x_j_70911);
            float tmp1_70913 = abs_res_70912 / defunc_1_f_res_70709;
            float x_70914 = tmp1_70913 * tmp1_70913;
            float y_70915 = tmp1_70913 * x_70914;
            float tmp2_70916 = 1.0F - y_70915;
            float x_70917 = tmp2_70916 * tmp2_70916;
            float tmp3_70918 = tmp2_70916 * x_70917;
            float w_j_70919 = x_70905 * tmp3_70918;
            float xw_j_70920 = x_j_70911 * w_j_70919;
            float x2w_j_70921 = x_j_70911 * xw_j_70920;
            float x3w_j_70922 = x_j_70911 * x2w_j_70921;
            float x4w_j_70923 = x_j_70911 * x3w_j_70922;
            float defunc_1_op_res_70924 = w_j_70919 + redout_70900;
            float defunc_1_op_res_70925 = xw_j_70920 + redout_70901;
            float defunc_1_op_res_70926 = x2w_j_70921 + redout_70902;
            float defunc_1_op_res_70927 = x3w_j_70922 + redout_70903;
            float defunc_1_op_res_70928 = x4w_j_70923 + redout_70904;
            float redout_tmp_70975 = defunc_1_op_res_70924;
            float redout_tmp_70976 = defunc_1_op_res_70925;
            float redout_tmp_70977 = defunc_1_op_res_70926;
            float redout_tmp_70978 = defunc_1_op_res_70927;
            float redout_tmp_70979 = defunc_1_op_res_70928;
            
            redout_70900 = redout_tmp_70975;
            redout_70901 = redout_tmp_70976;
            redout_70902 = redout_tmp_70977;
            redout_70903 = redout_tmp_70978;
            redout_70904 = redout_tmp_70979;
        }
        defunc_2_reduce_res_70711 = redout_70900;
        defunc_2_reduce_res_70712 = redout_70901;
        defunc_2_reduce_res_70713 = redout_70902;
        defunc_2_reduce_res_70714 = redout_70903;
        defunc_2_reduce_res_70715 = redout_70904;
        
        float x_70746 = defunc_2_reduce_res_70713 * defunc_2_reduce_res_70715;
        float y_70747 = defunc_2_reduce_res_70714 * defunc_2_reduce_res_70714;
        float a12_70748 = x_70746 - y_70747;
        float x_70749 = defunc_2_reduce_res_70713 * defunc_2_reduce_res_70714;
        float y_70750 = defunc_2_reduce_res_70712 * defunc_2_reduce_res_70715;
        float b12_70751 = x_70749 - y_70750;
        float x_70752 = defunc_2_reduce_res_70712 * defunc_2_reduce_res_70714;
        float y_70753 = defunc_2_reduce_res_70713 * defunc_2_reduce_res_70713;
        float c12_70754 = x_70752 - y_70753;
        float x_70755 = defunc_2_reduce_res_70711 * defunc_2_reduce_res_70715;
        float b2_70756 = x_70755 - y_70753;
        float x_70757 = defunc_2_reduce_res_70712 * defunc_2_reduce_res_70713;
        float y_70758 = defunc_2_reduce_res_70711 * defunc_2_reduce_res_70714;
        float c2_70759 = x_70757 - y_70758;
        float x_70760 = defunc_2_reduce_res_70711 * a12_70748;
        float y_70761 = defunc_2_reduce_res_70712 * b12_70751;
        float x_70762 = x_70760 + y_70761;
        float y_70763 = defunc_2_reduce_res_70713 * c12_70754;
        float y_70764 = x_70762 + y_70763;
        float det_70765 = 1.0F / y_70764;
        float a12_70766 = a12_70748 * det_70765;
        float b12_70767 = b12_70751 * det_70765;
        float c12_70768 = c12_70754 * det_70765;
        float b2_70769 = b2_70756 * det_70765;
        float c2_70770 = c2_70759 * det_70765;
        float defunc_2_reduce_res_70771;
        float defunc_2_reduce_res_70772;
        float redout_70930;
        float redout_70931;
        
        redout_70930 = 0.0F;
        redout_70931 = 0.0F;
        for (int64_t i_70929 = 0; i_70929 < q_62258; i_70929++) {
            float x_70932 = ((float *) mem_67692.mem)[i_70929];
            bool cond_70933 = sle64(last_res_64870, i_70929);
            float defunc_0_f_res_70934;
            
            if (cond_70933) {
                defunc_0_f_res_70934 = 0.0F;
            } else {
                int64_t i_70935 = add64(max_res_70690, i_70929);
                float x_70936 = ((float *) mem_67686.mem)[i_70935];
                float defunc_0_f_res_f_res_70937 = 1.0F + x_70936;
                
                defunc_0_f_res_70934 = defunc_0_f_res_f_res_70937;
            }
            
            float x_j_70938 = defunc_0_f_res_70934 - defunc_0_f_res_70710;
            float abs_res_70939 = (float) fabs(x_j_70938);
            float tmp1_70940 = abs_res_70939 / defunc_1_f_res_70709;
            float x_70941 = tmp1_70940 * tmp1_70940;
            float y_70942 = tmp1_70940 * x_70941;
            float tmp2_70943 = 1.0F - y_70942;
            float x_70944 = tmp2_70943 * tmp2_70943;
            float tmp3_70945 = tmp2_70943 * x_70944;
            float tmp4_70946 = x_70932 * tmp3_70945;
            float defunc_1_f_res_70947 = x_j_70938 * tmp4_70946;
            float defunc_1_f_res_70948 = x_j_70938 * defunc_1_f_res_70947;
            float defunc_0_f_res_70949;
            
            if (cond_70933) {
                defunc_0_f_res_70949 = 0.0F;
            } else {
                int64_t i_70950 = add64(max_res_70690, i_70929);
                float x_70951 = ((float *) mem_67680.mem)[i_70950];
                
                defunc_0_f_res_70949 = x_70951;
            }
            
            float x_70952 = a12_70766 * tmp4_70946;
            float y_70953 = b12_70767 * defunc_1_f_res_70947;
            float x_70954 = x_70952 + y_70953;
            float y_70955 = c12_70768 * defunc_1_f_res_70948;
            float x_70956 = x_70954 + y_70955;
            float defunc_9_fit_fun_res_70957 = defunc_0_f_res_70949 * x_70956;
            float x_70958 = b12_70767 * tmp4_70946;
            float y_70959 = b2_70769 * defunc_1_f_res_70947;
            float x_70960 = x_70958 + y_70959;
            float y_70961 = c2_70770 * defunc_1_f_res_70948;
            float x_70962 = x_70960 + y_70961;
            float defunc_9_slope_fun_res_70963 = defunc_0_f_res_70949 * x_70962;
            float defunc_1_op_res_70964 = defunc_9_fit_fun_res_70957 +
                  redout_70930;
            float defunc_1_op_res_70965 = defunc_9_slope_fun_res_70963 +
                  redout_70931;
            float redout_tmp_70980 = defunc_1_op_res_70964;
            float redout_tmp_70981 = defunc_1_op_res_70965;
            
            redout_70930 = redout_tmp_70980;
            redout_70931 = redout_tmp_70981;
        }
        defunc_2_reduce_res_70771 = redout_70930;
        defunc_2_reduce_res_70772 = redout_70931;
        ((float *) mem_67695.mem)[gtid_64660] = defunc_2_reduce_res_70771;
        ((float *) mem_67698.mem)[gtid_64660] = defunc_2_reduce_res_70772;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73991_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73991_end -
                 futhark_mc_segmap_parloop_73991_start;
        
        ctx->futhark_mc_segmap_parloop_73991_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73991_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73991_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_73989(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64659 = tid;
    int num_tasks_70842 = info.nsubtasks;
    struct futhark_mc_task_73988 *futhark_mc_task_73988 =
                                 (struct futhark_mc_task_73988 *) args;
    struct futhark_context *ctx = futhark_mc_task_73988->ctx;
    uint64_t futhark_mc_segmap_task_73989_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_73989_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73988->free_n_62256;
    int64_t q_62258 = futhark_mc_task_73988->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_73988->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_73988->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_73988->free_i_62270;
    bool x_62271 = futhark_mc_task_73988->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_73988->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_73988->free_loop_cond_62281;
    int64_t last_res_64870 = futhark_mc_task_73988->free_last_res_64870;
    int64_t min_arg_64882 = futhark_mc_task_73988->free_min_arg_64882;
    int64_t min_arg_64883 = futhark_mc_task_73988->free_min_arg_64883;
    int64_t min_res_64884 = futhark_mc_task_73988->free_min_res_64884;
    float max_res_64888 = futhark_mc_task_73988->free_max_res_64888;
    struct memblock mem_67680 = {.desc ="mem_67680", .mem =
                                 futhark_mc_task_73988->free_mem_67680, .size =
                                 0, .references =NULL};
    struct memblock mem_67683 = {.desc ="mem_67683", .mem =
                                 futhark_mc_task_73988->free_mem_67683, .size =
                                 0, .references =NULL};
    struct memblock mem_67686 = {.desc ="mem_67686", .mem =
                                 futhark_mc_task_73988->free_mem_67686, .size =
                                 0, .references =NULL};
    struct memblock mem_67689 = {.desc ="mem_67689", .mem =
                                 futhark_mc_task_73988->free_mem_67689, .size =
                                 0, .references =NULL};
    struct memblock mem_67692 = {.desc ="mem_67692", .mem =
                                 futhark_mc_task_73988->free_mem_67692, .size =
                                 0, .references =NULL};
    struct memblock mem_67695 = {.desc ="mem_67695", .mem =
                                 futhark_mc_task_73988->free_mem_67695, .size =
                                 0, .references =NULL};
    struct memblock mem_67698 = {.desc ="mem_67698", .mem =
                                 futhark_mc_task_73988->free_mem_67698, .size =
                                 0, .references =NULL};
    int64_t iter_70843;
    struct futhark_mc_segmap_parloop_struct_73990
    futhark_mc_segmap_parloop_struct_73990;
    
    futhark_mc_segmap_parloop_struct_73990.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73990.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73990.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73990.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_73990.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_73990.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_73990.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_73990.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_73990.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_73990.free_last_res_64870 = last_res_64870;
    futhark_mc_segmap_parloop_struct_73990.free_min_arg_64882 = min_arg_64882;
    futhark_mc_segmap_parloop_struct_73990.free_min_arg_64883 = min_arg_64883;
    futhark_mc_segmap_parloop_struct_73990.free_min_res_64884 = min_res_64884;
    futhark_mc_segmap_parloop_struct_73990.free_max_res_64888 = max_res_64888;
    futhark_mc_segmap_parloop_struct_73990.free_mem_67680 = mem_67680.mem;
    futhark_mc_segmap_parloop_struct_73990.free_mem_67683 = mem_67683.mem;
    futhark_mc_segmap_parloop_struct_73990.free_mem_67686 = mem_67686.mem;
    futhark_mc_segmap_parloop_struct_73990.free_mem_67689 = mem_67689.mem;
    futhark_mc_segmap_parloop_struct_73990.free_mem_67692 = mem_67692.mem;
    futhark_mc_segmap_parloop_struct_73990.free_mem_67695 = mem_67695.mem;
    futhark_mc_segmap_parloop_struct_73990.free_mem_67698 = mem_67698.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73991_task;
    
    futhark_mc_segmap_parloop_73991_task.name =
        "futhark_mc_segmap_parloop_73991";
    futhark_mc_segmap_parloop_73991_task.fn = futhark_mc_segmap_parloop_73991;
    futhark_mc_segmap_parloop_73991_task.args =
        &futhark_mc_segmap_parloop_struct_73990;
    futhark_mc_segmap_parloop_73991_task.iterations = iterations;
    futhark_mc_segmap_parloop_73991_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73991_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73991_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73991_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73991_task);
    
    if (futhark_mc_segmap_parloop_73991_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73991_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73991_total_end -
                 futhark_mc_segmap_parloop_73991_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73991_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73991_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73991_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_73989_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_73989_end -
                 futhark_mc_segmap_task_73989_start;
        
        ctx->futhark_mc_segmap_task_73989_runs[tid]++;
        ctx->futhark_mc_segmap_task_73989_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_73989_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_73993 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_64870;
    int64_t free_min_arg_64882;
    int64_t free_min_arg_64883;
    int64_t free_min_res_64884;
    float free_max_res_64888;
    char *free_mem_67680;
    char *free_mem_67683;
    char *free_mem_67686;
    char *free_mem_67689;
    char *free_mem_67692;
    char *free_mem_67695;
    char *free_mem_67698;
};
struct futhark_mc_task_73995 {
    struct futhark_context *ctx;
    int64_t free_last_res_64870;
    char *free_mem_67686;
    char *free_mem_67692;
    int64_t free_max_res_70499;
    float free_defunc_1_f_res_70518;
    float free_defunc_0_f_res_70519;
    float *retval_defunc_2_reduce_res_70520;
    float *retval_defunc_2_reduce_res_70521;
    float *retval_defunc_2_reduce_res_70522;
    float *retval_defunc_2_reduce_res_70523;
    float *retval_defunc_2_reduce_res_70524;
};
struct futhark_mc_segred_stage_1_parloop_struct_74002 {
    struct futhark_context *ctx;
    int64_t free_last_res_64870;
    char *free_mem_67686;
    char *free_mem_67692;
    int64_t free_max_res_70499;
    float free_defunc_1_f_res_70518;
    float free_defunc_0_f_res_70519;
    char *free_reduce_stage_1_tid_res_arr_mem_71120;
    char *free_reduce_stage_1_tid_res_arr_mem_71122;
    char *free_reduce_stage_1_tid_res_arr_mem_71124;
    char *free_reduce_stage_1_tid_res_arr_mem_71126;
    char *free_reduce_stage_1_tid_res_arr_mem_71128;
};
static int futhark_mc_segred_stage_1_parloop_74003(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_64663, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74002
    *futhark_mc_segred_stage_1_parloop_struct_74002 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74002 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74002->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74003_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74003_start = get_wall_time();
    
    int64_t last_res_64870 =
            futhark_mc_segred_stage_1_parloop_struct_74002->free_last_res_64870;
    struct memblock mem_67686 = {.desc ="mem_67686", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74002->free_mem_67686,
                                 .size =0, .references =NULL};
    struct memblock mem_67692 = {.desc ="mem_67692", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74002->free_mem_67692,
                                 .size =0, .references =NULL};
    int64_t max_res_70499 =
            futhark_mc_segred_stage_1_parloop_struct_74002->free_max_res_70499;
    float defunc_1_f_res_70518 =
          futhark_mc_segred_stage_1_parloop_struct_74002->free_defunc_1_f_res_70518;
    float defunc_0_f_res_70519 =
          futhark_mc_segred_stage_1_parloop_struct_74002->free_defunc_0_f_res_70519;
    struct memblock reduce_stage_1_tid_res_arr_mem_71120 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71120",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74002->free_reduce_stage_1_tid_res_arr_mem_71120,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_71122 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71122",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74002->free_reduce_stage_1_tid_res_arr_mem_71122,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_71124 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71124",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74002->free_reduce_stage_1_tid_res_arr_mem_71124,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_71126 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71126",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74002->free_reduce_stage_1_tid_res_arr_mem_71126,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_71128 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71128",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74002->free_reduce_stage_1_tid_res_arr_mem_71128,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71130 = start;
    float x_71038;
    float x_71039;
    float x_71041;
    float x_71042;
    float x_71044;
    float x_71045;
    float x_71047;
    float x_71048;
    float x_71050;
    float x_71051;
    float local_acc_71131 = 0.0F;
    float local_acc_71132 = 0.0F;
    float local_acc_71133 = 0.0F;
    float local_acc_71134 = 0.0F;
    float local_acc_71135 = 0.0F;
    
    for (; iter_71130 < end; iter_71130++) {
        int64_t gtid_64664 = iter_71130;
        float x_71053 = ((float *) mem_67692.mem)[gtid_64664];
        bool cond_71054 = sle64(last_res_64870, gtid_64664);
        float defunc_0_f_res_71055;
        
        if (cond_71054) {
            defunc_0_f_res_71055 = 0.0F;
        } else {
            int64_t i_71056 = add64(gtid_64664, max_res_70499);
            float x_71057 = ((float *) mem_67686.mem)[i_71056];
            float defunc_0_f_res_f_res_71058 = 1.0F + x_71057;
            
            defunc_0_f_res_71055 = defunc_0_f_res_f_res_71058;
        }
        
        float x_j_71059 = defunc_0_f_res_71055 - defunc_0_f_res_70519;
        float abs_res_71060 = (float) fabs(x_j_71059);
        float tmp1_71061 = abs_res_71060 / defunc_1_f_res_70518;
        float x_71062 = tmp1_71061 * tmp1_71061;
        float y_71063 = tmp1_71061 * x_71062;
        float tmp2_71064 = 1.0F - y_71063;
        float x_71065 = tmp2_71064 * tmp2_71064;
        float tmp3_71066 = tmp2_71064 * x_71065;
        float w_j_71067 = x_71053 * tmp3_71066;
        float xw_j_71068 = x_j_71059 * w_j_71067;
        float x2w_j_71069 = x_j_71059 * xw_j_71068;
        float x3w_j_71070 = x_j_71059 * x2w_j_71069;
        float x4w_j_71071 = x_j_71059 * x3w_j_71070;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_71038 = local_acc_71131;
        }
        // Load next params
        {
            x_71039 = w_j_71067;
        }
        // Red body
        {
            float defunc_1_op_res_71040 = x_71038 + x_71039;
            
            local_acc_71131 = defunc_1_op_res_71040;
        }
        // Load accum params
        {
            x_71041 = local_acc_71132;
        }
        // Load next params
        {
            x_71042 = xw_j_71068;
        }
        // Red body
        {
            float defunc_1_op_res_71043 = x_71041 + x_71042;
            
            local_acc_71132 = defunc_1_op_res_71043;
        }
        // Load accum params
        {
            x_71044 = local_acc_71133;
        }
        // Load next params
        {
            x_71045 = x2w_j_71069;
        }
        // Red body
        {
            float defunc_1_op_res_71046 = x_71044 + x_71045;
            
            local_acc_71133 = defunc_1_op_res_71046;
        }
        // Load accum params
        {
            x_71047 = local_acc_71134;
        }
        // Load next params
        {
            x_71048 = x3w_j_71070;
        }
        // Red body
        {
            float defunc_1_op_res_71049 = x_71047 + x_71048;
            
            local_acc_71134 = defunc_1_op_res_71049;
        }
        // Load accum params
        {
            x_71050 = local_acc_71135;
        }
        // Load next params
        {
            x_71051 = x4w_j_71071;
        }
        // Red body
        {
            float defunc_1_op_res_71052 = x_71050 + x_71051;
            
            local_acc_71135 = defunc_1_op_res_71052;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_71120.mem)[flat_tid_64663] =
        local_acc_71131;
    ((float *) reduce_stage_1_tid_res_arr_mem_71122.mem)[flat_tid_64663] =
        local_acc_71132;
    ((float *) reduce_stage_1_tid_res_arr_mem_71124.mem)[flat_tid_64663] =
        local_acc_71133;
    ((float *) reduce_stage_1_tid_res_arr_mem_71126.mem)[flat_tid_64663] =
        local_acc_71134;
    ((float *) reduce_stage_1_tid_res_arr_mem_71128.mem)[flat_tid_64663] =
        local_acc_71135;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74003_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74003_end -
                 futhark_mc_segred_stage_1_parloop_74003_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74003_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74003_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74003_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_73996(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64663 = tid;
    int num_tasks_71119 = info.nsubtasks;
    struct futhark_mc_task_73995 *futhark_mc_task_73995 =
                                 (struct futhark_mc_task_73995 *) args;
    struct futhark_context *ctx = futhark_mc_task_73995->ctx;
    uint64_t futhark_mc_segred_task_73996_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_73996_start = get_wall_time();
    
    int64_t last_res_64870 = futhark_mc_task_73995->free_last_res_64870;
    struct memblock mem_67686 = {.desc ="mem_67686", .mem =
                                 futhark_mc_task_73995->free_mem_67686, .size =
                                 0, .references =NULL};
    struct memblock mem_67692 = {.desc ="mem_67692", .mem =
                                 futhark_mc_task_73995->free_mem_67692, .size =
                                 0, .references =NULL};
    int64_t max_res_70499 = futhark_mc_task_73995->free_max_res_70499;
    float defunc_1_f_res_70518 =
          futhark_mc_task_73995->free_defunc_1_f_res_70518;
    float defunc_0_f_res_70519 =
          futhark_mc_task_73995->free_defunc_0_f_res_70519;
    float defunc_2_reduce_res_70520 =
          *futhark_mc_task_73995->retval_defunc_2_reduce_res_70520;
    float defunc_2_reduce_res_70521 =
          *futhark_mc_task_73995->retval_defunc_2_reduce_res_70521;
    float defunc_2_reduce_res_70522 =
          *futhark_mc_task_73995->retval_defunc_2_reduce_res_70522;
    float defunc_2_reduce_res_70523 =
          *futhark_mc_task_73995->retval_defunc_2_reduce_res_70523;
    float defunc_2_reduce_res_70524 =
          *futhark_mc_task_73995->retval_defunc_2_reduce_res_70524;
    size_t reduce_stage_1_tid_res_arr_mem_71120_cached_sizze_73997 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71120 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_71122_cached_sizze_73998 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71122 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_71124_cached_sizze_73999 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71124 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_71126_cached_sizze_74000 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71126 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_71128_cached_sizze_74001 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71128 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_71120_cached_sizze_73997 <
        (size_t) ((int64_t) 4 * num_tasks_71119)) {
        reduce_stage_1_tid_res_arr_mem_71120 =
            realloc(reduce_stage_1_tid_res_arr_mem_71120, (int64_t) 4 *
                    num_tasks_71119);
        reduce_stage_1_tid_res_arr_mem_71120_cached_sizze_73997 = (int64_t) 4 *
            num_tasks_71119;
    }
    if (reduce_stage_1_tid_res_arr_mem_71122_cached_sizze_73998 <
        (size_t) ((int64_t) 4 * num_tasks_71119)) {
        reduce_stage_1_tid_res_arr_mem_71122 =
            realloc(reduce_stage_1_tid_res_arr_mem_71122, (int64_t) 4 *
                    num_tasks_71119);
        reduce_stage_1_tid_res_arr_mem_71122_cached_sizze_73998 = (int64_t) 4 *
            num_tasks_71119;
    }
    if (reduce_stage_1_tid_res_arr_mem_71124_cached_sizze_73999 <
        (size_t) ((int64_t) 4 * num_tasks_71119)) {
        reduce_stage_1_tid_res_arr_mem_71124 =
            realloc(reduce_stage_1_tid_res_arr_mem_71124, (int64_t) 4 *
                    num_tasks_71119);
        reduce_stage_1_tid_res_arr_mem_71124_cached_sizze_73999 = (int64_t) 4 *
            num_tasks_71119;
    }
    if (reduce_stage_1_tid_res_arr_mem_71126_cached_sizze_74000 <
        (size_t) ((int64_t) 4 * num_tasks_71119)) {
        reduce_stage_1_tid_res_arr_mem_71126 =
            realloc(reduce_stage_1_tid_res_arr_mem_71126, (int64_t) 4 *
                    num_tasks_71119);
        reduce_stage_1_tid_res_arr_mem_71126_cached_sizze_74000 = (int64_t) 4 *
            num_tasks_71119;
    }
    if (reduce_stage_1_tid_res_arr_mem_71128_cached_sizze_74001 <
        (size_t) ((int64_t) 4 * num_tasks_71119)) {
        reduce_stage_1_tid_res_arr_mem_71128 =
            realloc(reduce_stage_1_tid_res_arr_mem_71128, (int64_t) 4 *
                    num_tasks_71119);
        reduce_stage_1_tid_res_arr_mem_71128_cached_sizze_74001 = (int64_t) 4 *
            num_tasks_71119;
    }
    
    int64_t iter_71130;
    struct futhark_mc_segred_stage_1_parloop_struct_74002
    futhark_mc_segred_stage_1_parloop_struct_74002;
    
    futhark_mc_segred_stage_1_parloop_struct_74002.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74002.free_last_res_64870 =
        last_res_64870;
    futhark_mc_segred_stage_1_parloop_struct_74002.free_mem_67686 =
        mem_67686.mem;
    futhark_mc_segred_stage_1_parloop_struct_74002.free_mem_67692 =
        mem_67692.mem;
    futhark_mc_segred_stage_1_parloop_struct_74002.free_max_res_70499 =
        max_res_70499;
    futhark_mc_segred_stage_1_parloop_struct_74002.free_defunc_1_f_res_70518 =
        defunc_1_f_res_70518;
    futhark_mc_segred_stage_1_parloop_struct_74002.free_defunc_0_f_res_70519 =
        defunc_0_f_res_70519;
    futhark_mc_segred_stage_1_parloop_struct_74002.free_reduce_stage_1_tid_res_arr_mem_71120 =
        reduce_stage_1_tid_res_arr_mem_71120;
    futhark_mc_segred_stage_1_parloop_struct_74002.free_reduce_stage_1_tid_res_arr_mem_71122 =
        reduce_stage_1_tid_res_arr_mem_71122;
    futhark_mc_segred_stage_1_parloop_struct_74002.free_reduce_stage_1_tid_res_arr_mem_71124 =
        reduce_stage_1_tid_res_arr_mem_71124;
    futhark_mc_segred_stage_1_parloop_struct_74002.free_reduce_stage_1_tid_res_arr_mem_71126 =
        reduce_stage_1_tid_res_arr_mem_71126;
    futhark_mc_segred_stage_1_parloop_struct_74002.free_reduce_stage_1_tid_res_arr_mem_71128 =
        reduce_stage_1_tid_res_arr_mem_71128;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74003_task;
    
    futhark_mc_segred_stage_1_parloop_74003_task.name =
        "futhark_mc_segred_stage_1_parloop_74003";
    futhark_mc_segred_stage_1_parloop_74003_task.fn =
        futhark_mc_segred_stage_1_parloop_74003;
    futhark_mc_segred_stage_1_parloop_74003_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74002;
    futhark_mc_segred_stage_1_parloop_74003_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74003_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74003_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74003_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74003_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74003_task);
    
    if (futhark_mc_segred_stage_1_parloop_74003_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74003_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74003_total_end -
                 futhark_mc_segred_stage_1_parloop_74003_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74003_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74003_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74003_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_70520 = 0.0F;
        defunc_2_reduce_res_70521 = 0.0F;
        defunc_2_reduce_res_70522 = 0.0F;
        defunc_2_reduce_res_70523 = 0.0F;
        defunc_2_reduce_res_70524 = 0.0F;
    }
    
    float x_71136;
    float x_71137;
    float x_71139;
    float x_71140;
    float x_71142;
    float x_71143;
    float x_71145;
    float x_71146;
    float x_71148;
    float x_71149;
    
    for (int32_t i_71151 = 0; i_71151 < num_tasks_71119; i_71151++) {
        flat_tid_64663 = i_71151;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_71136 = defunc_2_reduce_res_70520;
            }
            // load next params
            {
                x_71137 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71120)[flat_tid_64663];
            }
            // red body
            {
                float defunc_1_op_res_71138 = x_71136 + x_71137;
                
                defunc_2_reduce_res_70520 = defunc_1_op_res_71138;
            }
            // load acc params
            {
                x_71139 = defunc_2_reduce_res_70521;
            }
            // load next params
            {
                x_71140 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71122)[flat_tid_64663];
            }
            // red body
            {
                float defunc_1_op_res_71141 = x_71139 + x_71140;
                
                defunc_2_reduce_res_70521 = defunc_1_op_res_71141;
            }
            // load acc params
            {
                x_71142 = defunc_2_reduce_res_70522;
            }
            // load next params
            {
                x_71143 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71124)[flat_tid_64663];
            }
            // red body
            {
                float defunc_1_op_res_71144 = x_71142 + x_71143;
                
                defunc_2_reduce_res_70522 = defunc_1_op_res_71144;
            }
            // load acc params
            {
                x_71145 = defunc_2_reduce_res_70523;
            }
            // load next params
            {
                x_71146 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71126)[flat_tid_64663];
            }
            // red body
            {
                float defunc_1_op_res_71147 = x_71145 + x_71146;
                
                defunc_2_reduce_res_70523 = defunc_1_op_res_71147;
            }
            // load acc params
            {
                x_71148 = defunc_2_reduce_res_70524;
            }
            // load next params
            {
                x_71149 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71128)[flat_tid_64663];
            }
            // red body
            {
                float defunc_1_op_res_71150 = x_71148 + x_71149;
                
                defunc_2_reduce_res_70524 = defunc_1_op_res_71150;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_71120);
    free(reduce_stage_1_tid_res_arr_mem_71122);
    free(reduce_stage_1_tid_res_arr_mem_71124);
    free(reduce_stage_1_tid_res_arr_mem_71126);
    free(reduce_stage_1_tid_res_arr_mem_71128);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_73996_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_73996_end -
                 futhark_mc_segred_task_73996_start;
        
        ctx->futhark_mc_segred_task_73996_runs[tid]++;
        ctx->futhark_mc_segred_task_73996_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_73996_iter[tid] += iterations;
    }
    *futhark_mc_task_73995->retval_defunc_2_reduce_res_70520 =
        defunc_2_reduce_res_70520;
    *futhark_mc_task_73995->retval_defunc_2_reduce_res_70521 =
        defunc_2_reduce_res_70521;
    *futhark_mc_task_73995->retval_defunc_2_reduce_res_70522 =
        defunc_2_reduce_res_70522;
    *futhark_mc_task_73995->retval_defunc_2_reduce_res_70523 =
        defunc_2_reduce_res_70523;
    *futhark_mc_task_73995->retval_defunc_2_reduce_res_70524 =
        defunc_2_reduce_res_70524;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74004 {
    struct futhark_context *ctx;
    int64_t free_last_res_64870;
    char *free_mem_67680;
    char *free_mem_67686;
    char *free_mem_67692;
    int64_t free_max_res_70499;
    float free_defunc_1_f_res_70518;
    float free_defunc_0_f_res_70519;
    float free_a12_70579;
    float free_b12_70580;
    float free_c12_70581;
    float free_b2_70582;
    float free_c2_70583;
    float *retval_defunc_2_reduce_res_70584;
    float *retval_defunc_2_reduce_res_70585;
};
struct futhark_mc_segred_stage_1_parloop_struct_74008 {
    struct futhark_context *ctx;
    int64_t free_last_res_64870;
    char *free_mem_67680;
    char *free_mem_67686;
    char *free_mem_67692;
    int64_t free_max_res_70499;
    float free_defunc_1_f_res_70518;
    float free_defunc_0_f_res_70519;
    float free_a12_70579;
    float free_b12_70580;
    float free_c12_70581;
    float free_b2_70582;
    float free_c2_70583;
    char *free_reduce_stage_1_tid_res_arr_mem_71153;
    char *free_reduce_stage_1_tid_res_arr_mem_71155;
};
static int futhark_mc_segred_stage_1_parloop_74009(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_64665, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74008
    *futhark_mc_segred_stage_1_parloop_struct_74008 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74008 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74008->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74009_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74009_start = get_wall_time();
    
    int64_t last_res_64870 =
            futhark_mc_segred_stage_1_parloop_struct_74008->free_last_res_64870;
    struct memblock mem_67680 = {.desc ="mem_67680", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74008->free_mem_67680,
                                 .size =0, .references =NULL};
    struct memblock mem_67686 = {.desc ="mem_67686", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74008->free_mem_67686,
                                 .size =0, .references =NULL};
    struct memblock mem_67692 = {.desc ="mem_67692", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74008->free_mem_67692,
                                 .size =0, .references =NULL};
    int64_t max_res_70499 =
            futhark_mc_segred_stage_1_parloop_struct_74008->free_max_res_70499;
    float defunc_1_f_res_70518 =
          futhark_mc_segred_stage_1_parloop_struct_74008->free_defunc_1_f_res_70518;
    float defunc_0_f_res_70519 =
          futhark_mc_segred_stage_1_parloop_struct_74008->free_defunc_0_f_res_70519;
    float a12_70579 =
          futhark_mc_segred_stage_1_parloop_struct_74008->free_a12_70579;
    float b12_70580 =
          futhark_mc_segred_stage_1_parloop_struct_74008->free_b12_70580;
    float c12_70581 =
          futhark_mc_segred_stage_1_parloop_struct_74008->free_c12_70581;
    float b2_70582 =
          futhark_mc_segred_stage_1_parloop_struct_74008->free_b2_70582;
    float c2_70583 =
          futhark_mc_segred_stage_1_parloop_struct_74008->free_c2_70583;
    struct memblock reduce_stage_1_tid_res_arr_mem_71153 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71153",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74008->free_reduce_stage_1_tid_res_arr_mem_71153,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_71155 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71155",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74008->free_reduce_stage_1_tid_res_arr_mem_71155,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71157 = start;
    float x_71072;
    float x_71073;
    float x_71075;
    float x_71076;
    float local_acc_71158 = 0.0F;
    float local_acc_71159 = 0.0F;
    
    for (; iter_71157 < end; iter_71157++) {
        int64_t gtid_64666 = iter_71157;
        float x_71078 = ((float *) mem_67692.mem)[gtid_64666];
        bool cond_71079 = sle64(last_res_64870, gtid_64666);
        float defunc_0_f_res_71080;
        
        if (cond_71079) {
            defunc_0_f_res_71080 = 0.0F;
        } else {
            int64_t i_71081 = add64(gtid_64666, max_res_70499);
            float x_71082 = ((float *) mem_67686.mem)[i_71081];
            float defunc_0_f_res_f_res_71083 = 1.0F + x_71082;
            
            defunc_0_f_res_71080 = defunc_0_f_res_f_res_71083;
        }
        
        float x_j_71084 = defunc_0_f_res_71080 - defunc_0_f_res_70519;
        float abs_res_71085 = (float) fabs(x_j_71084);
        float tmp1_71086 = abs_res_71085 / defunc_1_f_res_70518;
        float x_71087 = tmp1_71086 * tmp1_71086;
        float y_71088 = tmp1_71086 * x_71087;
        float tmp2_71089 = 1.0F - y_71088;
        float x_71090 = tmp2_71089 * tmp2_71089;
        float tmp3_71091 = tmp2_71089 * x_71090;
        float tmp4_71092 = x_71078 * tmp3_71091;
        float defunc_1_f_res_71093 = x_j_71084 * tmp4_71092;
        float defunc_1_f_res_71094 = x_j_71084 * defunc_1_f_res_71093;
        float defunc_0_f_res_71095;
        
        if (cond_71079) {
            defunc_0_f_res_71095 = 0.0F;
        } else {
            int64_t i_71096 = add64(gtid_64666, max_res_70499);
            float x_71097 = ((float *) mem_67680.mem)[i_71096];
            
            defunc_0_f_res_71095 = x_71097;
        }
        
        float x_71098 = a12_70579 * tmp4_71092;
        float y_71099 = b12_70580 * defunc_1_f_res_71093;
        float x_71100 = x_71098 + y_71099;
        float y_71101 = c12_70581 * defunc_1_f_res_71094;
        float x_71102 = x_71100 + y_71101;
        float defunc_9_fit_fun_res_71103 = defunc_0_f_res_71095 * x_71102;
        float x_71104 = b12_70580 * tmp4_71092;
        float y_71105 = b2_70582 * defunc_1_f_res_71093;
        float x_71106 = x_71104 + y_71105;
        float y_71107 = c2_70583 * defunc_1_f_res_71094;
        float x_71108 = x_71106 + y_71107;
        float defunc_9_slope_fun_res_71109 = defunc_0_f_res_71095 * x_71108;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_71072 = local_acc_71158;
        }
        // Load next params
        {
            x_71073 = defunc_9_fit_fun_res_71103;
        }
        // Red body
        {
            float defunc_1_op_res_71074 = x_71072 + x_71073;
            
            local_acc_71158 = defunc_1_op_res_71074;
        }
        // Load accum params
        {
            x_71075 = local_acc_71159;
        }
        // Load next params
        {
            x_71076 = defunc_9_slope_fun_res_71109;
        }
        // Red body
        {
            float defunc_1_op_res_71077 = x_71075 + x_71076;
            
            local_acc_71159 = defunc_1_op_res_71077;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_71153.mem)[flat_tid_64665] =
        local_acc_71158;
    ((float *) reduce_stage_1_tid_res_arr_mem_71155.mem)[flat_tid_64665] =
        local_acc_71159;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74009_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74009_end -
                 futhark_mc_segred_stage_1_parloop_74009_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74009_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74009_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74009_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74005(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64665 = tid;
    int num_tasks_71152 = info.nsubtasks;
    struct futhark_mc_task_74004 *futhark_mc_task_74004 =
                                 (struct futhark_mc_task_74004 *) args;
    struct futhark_context *ctx = futhark_mc_task_74004->ctx;
    uint64_t futhark_mc_segred_task_74005_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74005_start = get_wall_time();
    
    int64_t last_res_64870 = futhark_mc_task_74004->free_last_res_64870;
    struct memblock mem_67680 = {.desc ="mem_67680", .mem =
                                 futhark_mc_task_74004->free_mem_67680, .size =
                                 0, .references =NULL};
    struct memblock mem_67686 = {.desc ="mem_67686", .mem =
                                 futhark_mc_task_74004->free_mem_67686, .size =
                                 0, .references =NULL};
    struct memblock mem_67692 = {.desc ="mem_67692", .mem =
                                 futhark_mc_task_74004->free_mem_67692, .size =
                                 0, .references =NULL};
    int64_t max_res_70499 = futhark_mc_task_74004->free_max_res_70499;
    float defunc_1_f_res_70518 =
          futhark_mc_task_74004->free_defunc_1_f_res_70518;
    float defunc_0_f_res_70519 =
          futhark_mc_task_74004->free_defunc_0_f_res_70519;
    float a12_70579 = futhark_mc_task_74004->free_a12_70579;
    float b12_70580 = futhark_mc_task_74004->free_b12_70580;
    float c12_70581 = futhark_mc_task_74004->free_c12_70581;
    float b2_70582 = futhark_mc_task_74004->free_b2_70582;
    float c2_70583 = futhark_mc_task_74004->free_c2_70583;
    float defunc_2_reduce_res_70584 =
          *futhark_mc_task_74004->retval_defunc_2_reduce_res_70584;
    float defunc_2_reduce_res_70585 =
          *futhark_mc_task_74004->retval_defunc_2_reduce_res_70585;
    size_t reduce_stage_1_tid_res_arr_mem_71153_cached_sizze_74006 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71153 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_71155_cached_sizze_74007 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71155 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_71153_cached_sizze_74006 <
        (size_t) ((int64_t) 4 * num_tasks_71152)) {
        reduce_stage_1_tid_res_arr_mem_71153 =
            realloc(reduce_stage_1_tid_res_arr_mem_71153, (int64_t) 4 *
                    num_tasks_71152);
        reduce_stage_1_tid_res_arr_mem_71153_cached_sizze_74006 = (int64_t) 4 *
            num_tasks_71152;
    }
    if (reduce_stage_1_tid_res_arr_mem_71155_cached_sizze_74007 <
        (size_t) ((int64_t) 4 * num_tasks_71152)) {
        reduce_stage_1_tid_res_arr_mem_71155 =
            realloc(reduce_stage_1_tid_res_arr_mem_71155, (int64_t) 4 *
                    num_tasks_71152);
        reduce_stage_1_tid_res_arr_mem_71155_cached_sizze_74007 = (int64_t) 4 *
            num_tasks_71152;
    }
    
    int64_t iter_71157;
    struct futhark_mc_segred_stage_1_parloop_struct_74008
    futhark_mc_segred_stage_1_parloop_struct_74008;
    
    futhark_mc_segred_stage_1_parloop_struct_74008.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74008.free_last_res_64870 =
        last_res_64870;
    futhark_mc_segred_stage_1_parloop_struct_74008.free_mem_67680 =
        mem_67680.mem;
    futhark_mc_segred_stage_1_parloop_struct_74008.free_mem_67686 =
        mem_67686.mem;
    futhark_mc_segred_stage_1_parloop_struct_74008.free_mem_67692 =
        mem_67692.mem;
    futhark_mc_segred_stage_1_parloop_struct_74008.free_max_res_70499 =
        max_res_70499;
    futhark_mc_segred_stage_1_parloop_struct_74008.free_defunc_1_f_res_70518 =
        defunc_1_f_res_70518;
    futhark_mc_segred_stage_1_parloop_struct_74008.free_defunc_0_f_res_70519 =
        defunc_0_f_res_70519;
    futhark_mc_segred_stage_1_parloop_struct_74008.free_a12_70579 = a12_70579;
    futhark_mc_segred_stage_1_parloop_struct_74008.free_b12_70580 = b12_70580;
    futhark_mc_segred_stage_1_parloop_struct_74008.free_c12_70581 = c12_70581;
    futhark_mc_segred_stage_1_parloop_struct_74008.free_b2_70582 = b2_70582;
    futhark_mc_segred_stage_1_parloop_struct_74008.free_c2_70583 = c2_70583;
    futhark_mc_segred_stage_1_parloop_struct_74008.free_reduce_stage_1_tid_res_arr_mem_71153 =
        reduce_stage_1_tid_res_arr_mem_71153;
    futhark_mc_segred_stage_1_parloop_struct_74008.free_reduce_stage_1_tid_res_arr_mem_71155 =
        reduce_stage_1_tid_res_arr_mem_71155;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74009_task;
    
    futhark_mc_segred_stage_1_parloop_74009_task.name =
        "futhark_mc_segred_stage_1_parloop_74009";
    futhark_mc_segred_stage_1_parloop_74009_task.fn =
        futhark_mc_segred_stage_1_parloop_74009;
    futhark_mc_segred_stage_1_parloop_74009_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74008;
    futhark_mc_segred_stage_1_parloop_74009_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74009_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74009_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74009_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74009_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74009_task);
    
    if (futhark_mc_segred_stage_1_parloop_74009_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74009_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74009_total_end -
                 futhark_mc_segred_stage_1_parloop_74009_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74009_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74009_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74009_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_70584 = 0.0F;
        defunc_2_reduce_res_70585 = 0.0F;
    }
    
    float x_71160;
    float x_71161;
    float x_71163;
    float x_71164;
    
    for (int32_t i_71166 = 0; i_71166 < num_tasks_71152; i_71166++) {
        flat_tid_64665 = i_71166;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_71160 = defunc_2_reduce_res_70584;
            }
            // load next params
            {
                x_71161 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71153)[flat_tid_64665];
            }
            // red body
            {
                float defunc_1_op_res_71162 = x_71160 + x_71161;
                
                defunc_2_reduce_res_70584 = defunc_1_op_res_71162;
            }
            // load acc params
            {
                x_71163 = defunc_2_reduce_res_70585;
            }
            // load next params
            {
                x_71164 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71155)[flat_tid_64665];
            }
            // red body
            {
                float defunc_1_op_res_71165 = x_71163 + x_71164;
                
                defunc_2_reduce_res_70585 = defunc_1_op_res_71165;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_71153);
    free(reduce_stage_1_tid_res_arr_mem_71155);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74005_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74005_end -
                 futhark_mc_segred_task_74005_start;
        
        ctx->futhark_mc_segred_task_74005_runs[tid]++;
        ctx->futhark_mc_segred_task_74005_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74005_iter[tid] += iterations;
    }
    *futhark_mc_task_74004->retval_defunc_2_reduce_res_70584 =
        defunc_2_reduce_res_70584;
    *futhark_mc_task_74004->retval_defunc_2_reduce_res_70585 =
        defunc_2_reduce_res_70585;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_73994(void *args, int64_t start,
                                           int64_t end, int flat_tid_64661,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73993
    *futhark_mc_segmap_parloop_struct_73993 =
    (struct futhark_mc_segmap_parloop_struct_73993 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73993->ctx;
    uint64_t futhark_mc_segmap_parloop_73994_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73994_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73993->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73993->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_73993->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_73993->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_73993->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_73993->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_73993->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_73993->free_loop_cond_62281;
    int64_t last_res_64870 =
            futhark_mc_segmap_parloop_struct_73993->free_last_res_64870;
    int64_t min_arg_64882 =
            futhark_mc_segmap_parloop_struct_73993->free_min_arg_64882;
    int64_t min_arg_64883 =
            futhark_mc_segmap_parloop_struct_73993->free_min_arg_64883;
    int64_t min_res_64884 =
            futhark_mc_segmap_parloop_struct_73993->free_min_res_64884;
    float max_res_64888 =
          futhark_mc_segmap_parloop_struct_73993->free_max_res_64888;
    struct memblock mem_67680 = {.desc ="mem_67680", .mem =
                                 futhark_mc_segmap_parloop_struct_73993->free_mem_67680,
                                 .size =0, .references =NULL};
    struct memblock mem_67683 = {.desc ="mem_67683", .mem =
                                 futhark_mc_segmap_parloop_struct_73993->free_mem_67683,
                                 .size =0, .references =NULL};
    struct memblock mem_67686 = {.desc ="mem_67686", .mem =
                                 futhark_mc_segmap_parloop_struct_73993->free_mem_67686,
                                 .size =0, .references =NULL};
    struct memblock mem_67689 = {.desc ="mem_67689", .mem =
                                 futhark_mc_segmap_parloop_struct_73993->free_mem_67689,
                                 .size =0, .references =NULL};
    struct memblock mem_67692 = {.desc ="mem_67692", .mem =
                                 futhark_mc_segmap_parloop_struct_73993->free_mem_67692,
                                 .size =0, .references =NULL};
    struct memblock mem_67695 = {.desc ="mem_67695", .mem =
                                 futhark_mc_segmap_parloop_struct_73993->free_mem_67695,
                                 .size =0, .references =NULL};
    struct memblock mem_67698 = {.desc ="mem_67698", .mem =
                                 futhark_mc_segmap_parloop_struct_73993->free_mem_67698,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_70982 = start;
    
    for (; iter_70982 < end; iter_70982++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71110 = n_m_62264;
        int64_t gtid_64662 = iter_70982;
        int64_t remnant_71111 = iter_70982 - gtid_64662;
        int64_t min_arg_70433 = mul64(jump_62260, gtid_64662);
        int64_t min_res_70434 = smin64(i_62270, min_arg_70433);
        int64_t defunc_0_g_res_70435 = add64((int64_t) 1, min_res_70434);
        bool init_idx_70436;
        int64_t init_idx_70437;
        int64_t init_idx_70438;
        bool loop_while_70983;
        int64_t low_70984;
        int64_t high_70985;
        
        loop_while_70983 = x_62271;
        low_70984 = (int64_t) 0;
        high_70985 = i_62270;
        while (loop_while_70983) {
            int64_t x_70986 = add64(low_70984, high_70985);
            int64_t mid_70987 = sdiv64(x_70986, (int64_t) 2);
            bool x_70988 = sle64((int64_t) 0, mid_70987);
            bool y_70989 = slt64(mid_70987, n_62256);
            bool bounds_check_70990 = x_70988 && y_70989;
            bool index_certs_70991;
            
            if (!bounds_check_70990) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_70987,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t mid_id_70992 = ((int64_t *) mem_67689.mem)[mid_70987];
            bool cond_70993 = slt64(mid_id_70992, (int64_t) 0);
            int64_t mid_idx_70994;
            
            if (cond_70993) {
                mid_idx_70994 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_70994 = mid_id_70992;
            }
            
            bool cond_70995 = sle64(defunc_0_g_res_70435, mid_idx_70994);
            int64_t loopres_70996;
            int64_t loopres_70997;
            
            if (cond_70995) {
                int64_t loopres_t_res_70998 = sub64(mid_70987, (int64_t) 1);
                
                loopres_70996 = low_70984;
                loopres_70997 = loopres_t_res_70998;
            } else {
                int64_t loopres_f_res_70999 = add64((int64_t) 1, mid_70987);
                
                loopres_70996 = loopres_f_res_70999;
                loopres_70997 = high_70985;
            }
            
            bool loop_cond_71000 = sle64(loopres_70996, loopres_70997);
            bool loop_while_tmp_71112 = loop_cond_71000;
            int64_t low_tmp_71113 = loopres_70996;
            int64_t high_tmp_71114 = loopres_70997;
            
            loop_while_70983 = loop_while_tmp_71112;
            low_70984 = low_tmp_71113;
            high_70985 = high_tmp_71114;
        }
        init_idx_70436 = loop_while_70983;
        init_idx_70437 = low_70984;
        init_idx_70438 = high_70985;
        
        bool idx_70457;
        int64_t idx_70458;
        int64_t idx_70459;
        int64_t idx_70460;
        bool loop_while_71001;
        int64_t l_idx_71002;
        int64_t r_idx_71003;
        int64_t span_71004;
        
        loop_while_71001 = loop_cond_62281;
        l_idx_71002 = init_idx_70437;
        r_idx_71003 = init_idx_70437;
        span_71004 = (int64_t) 1;
        while (loop_while_71001) {
            int64_t max_arg_71005 = sub64(l_idx_71002, (int64_t) 1);
            int64_t max_res_71006 = smax64((int64_t) 0, max_arg_71005);
            int64_t min_arg_71007 = add64((int64_t) 1, r_idx_71003);
            int64_t min_res_71008 = smin64(min_arg_64882, min_arg_71007);
            bool x_71009 = sle64((int64_t) 0, max_res_71006);
            bool y_71010 = slt64(max_res_71006, n_62256);
            bool bounds_check_71011 = x_71009 && y_71010;
            bool index_certs_71012;
            
            if (!bounds_check_71011) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_71006,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_71013 = ((int64_t *) mem_67689.mem)[max_res_71006];
            int64_t abs_arg_71014 = sub64(x_71013, defunc_0_g_res_70435);
            int64_t abs_res_71015 = abs64(abs_arg_71014);
            bool x_71016 = sle64((int64_t) 0, min_res_71008);
            bool y_71017 = slt64(min_res_71008, n_62256);
            bool bounds_check_71018 = x_71016 && y_71017;
            bool index_certs_71019;
            
            if (!bounds_check_71018) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_71008,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_71020 = ((int64_t *) mem_67689.mem)[min_res_71008];
            int64_t abs_arg_71021 = sub64(x_71020, defunc_0_g_res_70435);
            int64_t abs_res_71022 = abs64(abs_arg_71021);
            bool cond_71023 = max_res_71006 == l_idx_71002;
            int64_t loopres_71024;
            int64_t loopres_71025;
            int64_t loopres_71026;
            
            if (cond_71023) {
                loopres_71024 = l_idx_71002;
                loopres_71025 = r_idx_71003;
                loopres_71026 = min_res_62276;
            } else {
                bool cond_71027 = slt64(abs_res_71015, abs_res_71022);
                bool cond_f_res_71028 = min_res_71008 == r_idx_71003;
                bool x_71029 = !cond_71027;
                bool y_71030 = cond_f_res_71028 && x_71029;
                bool cond_71031 = cond_71027 || y_71030;
                int64_t loopres_f_res_71032;
                
                if (cond_71031) {
                    loopres_f_res_71032 = max_res_71006;
                } else {
                    loopres_f_res_71032 = l_idx_71002;
                }
                
                int64_t loopres_f_res_71033;
                
                if (cond_71031) {
                    loopres_f_res_71033 = r_idx_71003;
                } else {
                    loopres_f_res_71033 = min_res_71008;
                }
                
                int64_t loopres_f_res_71034;
                
                if (cond_71031) {
                    int64_t loopres_f_res_t_res_71035 = add64((int64_t) 1,
                                                              span_71004);
                    
                    loopres_f_res_71034 = loopres_f_res_t_res_71035;
                } else {
                    int64_t loopres_f_res_f_res_71036 = add64((int64_t) 1,
                                                              span_71004);
                    
                    loopres_f_res_71034 = loopres_f_res_f_res_71036;
                }
                loopres_71024 = loopres_f_res_71032;
                loopres_71025 = loopres_f_res_71033;
                loopres_71026 = loopres_f_res_71034;
            }
            
            bool loop_cond_71037 = slt64(loopres_71026, min_res_62276);
            bool loop_while_tmp_71115 = loop_cond_71037;
            int64_t l_idx_tmp_71116 = loopres_71024;
            int64_t r_idx_tmp_71117 = loopres_71025;
            int64_t span_tmp_71118 = loopres_71026;
            
            loop_while_71001 = loop_while_tmp_71115;
            l_idx_71002 = l_idx_tmp_71116;
            r_idx_71003 = r_idx_tmp_71117;
            span_71004 = span_tmp_71118;
        }
        idx_70457 = loop_while_71001;
        idx_70458 = l_idx_71002;
        idx_70459 = r_idx_71003;
        idx_70460 = span_71004;
        
        int64_t min_res_70498 = smin64(min_arg_64883, idx_70458);
        int64_t max_res_70499 = smax64((int64_t) 0, min_res_70498);
        int64_t x_70500 = add64(min_res_64884, max_res_70499);
        int64_t r_70501 = sub64(x_70500, (int64_t) 1);
        bool x_70502 = sle64((int64_t) 0, r_70501);
        bool y_70503 = slt64(r_70501, n_62256);
        bool bounds_check_70504 = x_70502 && y_70503;
        bool index_certs_70505;
        
        if (!bounds_check_70504) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_70501,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_70506 = ((int64_t *) mem_67683.mem)[r_70501];
        int64_t abs_arg_70507 = sub64(x_70506, min_res_70434);
        int64_t abs_res_70508 = abs64(abs_arg_70507);
        bool x_70509 = sle64((int64_t) 0, max_res_70499);
        bool y_70510 = slt64(max_res_70499, n_62256);
        bool bounds_check_70511 = x_70509 && y_70510;
        bool index_certs_70512;
        
        if (!bounds_check_70511) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_70499,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_70513 = ((int64_t *) mem_67683.mem)[max_res_70499];
        int64_t abs_arg_70514 = sub64(x_70513, min_res_70434);
        int64_t abs_res_70515 = abs64(abs_arg_70514);
        int64_t max_res_70516 = smax64(abs_res_70508, abs_res_70515);
        float defunc_0_f_res_70517 = sitofp_i64_f32(max_res_70516);
        float defunc_1_f_res_70518 = max_res_64888 + defunc_0_f_res_70517;
        float defunc_0_f_res_70519 = sitofp_i64_f32(min_res_70434);
        float defunc_2_reduce_res_70520;
        float defunc_2_reduce_res_70521;
        float defunc_2_reduce_res_70522;
        float defunc_2_reduce_res_70523;
        float defunc_2_reduce_res_70524;
        int64_t flat_tid_64663 = (int64_t) 0;
        int32_t num_tasks_71119;
        struct futhark_mc_task_73995 futhark_mc_task_73995;
        
        futhark_mc_task_73995.ctx = ctx;
        futhark_mc_task_73995.free_last_res_64870 = last_res_64870;
        futhark_mc_task_73995.free_mem_67686 = mem_67686.mem;
        futhark_mc_task_73995.free_mem_67692 = mem_67692.mem;
        futhark_mc_task_73995.free_max_res_70499 = max_res_70499;
        futhark_mc_task_73995.free_defunc_1_f_res_70518 = defunc_1_f_res_70518;
        futhark_mc_task_73995.free_defunc_0_f_res_70519 = defunc_0_f_res_70519;
        futhark_mc_task_73995.retval_defunc_2_reduce_res_70520 =
            &defunc_2_reduce_res_70520;
        futhark_mc_task_73995.retval_defunc_2_reduce_res_70521 =
            &defunc_2_reduce_res_70521;
        futhark_mc_task_73995.retval_defunc_2_reduce_res_70522 =
            &defunc_2_reduce_res_70522;
        futhark_mc_task_73995.retval_defunc_2_reduce_res_70523 =
            &defunc_2_reduce_res_70523;
        futhark_mc_task_73995.retval_defunc_2_reduce_res_70524 =
            &defunc_2_reduce_res_70524;
        
        struct scheduler_segop futhark_mc_task_73995_task;
        
        futhark_mc_task_73995_task.args = &futhark_mc_task_73995;
        futhark_mc_task_73995_task.top_level_fn = futhark_mc_segred_task_73996;
        futhark_mc_task_73995_task.name = "futhark_mc_segred_task_73996";
        futhark_mc_task_73995_task.iterations = q_62258;
        futhark_mc_task_73995_task.task_time =
            &ctx->futhark_mc_segred_task_73996_total_time;
        futhark_mc_task_73995_task.task_iter =
            &ctx->futhark_mc_segred_task_73996_total_iter;
        futhark_mc_task_73995_task.sched = STATIC;
        futhark_mc_task_73995_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_73996_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73995_task);
        
        if (futhark_mc_segred_task_73996_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_70559 = defunc_2_reduce_res_70522 * defunc_2_reduce_res_70524;
        float y_70560 = defunc_2_reduce_res_70523 * defunc_2_reduce_res_70523;
        float a12_70561 = x_70559 - y_70560;
        float x_70562 = defunc_2_reduce_res_70522 * defunc_2_reduce_res_70523;
        float y_70563 = defunc_2_reduce_res_70521 * defunc_2_reduce_res_70524;
        float b12_70564 = x_70562 - y_70563;
        float x_70565 = defunc_2_reduce_res_70521 * defunc_2_reduce_res_70523;
        float y_70566 = defunc_2_reduce_res_70522 * defunc_2_reduce_res_70522;
        float c12_70567 = x_70565 - y_70566;
        float x_70568 = defunc_2_reduce_res_70520 * defunc_2_reduce_res_70524;
        float b2_70569 = x_70568 - y_70566;
        float x_70570 = defunc_2_reduce_res_70521 * defunc_2_reduce_res_70522;
        float y_70571 = defunc_2_reduce_res_70520 * defunc_2_reduce_res_70523;
        float c2_70572 = x_70570 - y_70571;
        float x_70573 = defunc_2_reduce_res_70520 * a12_70561;
        float y_70574 = defunc_2_reduce_res_70521 * b12_70564;
        float x_70575 = x_70573 + y_70574;
        float y_70576 = defunc_2_reduce_res_70522 * c12_70567;
        float y_70577 = x_70575 + y_70576;
        float det_70578 = 1.0F / y_70577;
        float a12_70579 = a12_70561 * det_70578;
        float b12_70580 = b12_70564 * det_70578;
        float c12_70581 = c12_70567 * det_70578;
        float b2_70582 = b2_70569 * det_70578;
        float c2_70583 = c2_70572 * det_70578;
        float defunc_2_reduce_res_70584;
        float defunc_2_reduce_res_70585;
        int64_t flat_tid_64665 = (int64_t) 0;
        int32_t num_tasks_71152;
        struct futhark_mc_task_74004 futhark_mc_task_74004;
        
        futhark_mc_task_74004.ctx = ctx;
        futhark_mc_task_74004.free_last_res_64870 = last_res_64870;
        futhark_mc_task_74004.free_mem_67680 = mem_67680.mem;
        futhark_mc_task_74004.free_mem_67686 = mem_67686.mem;
        futhark_mc_task_74004.free_mem_67692 = mem_67692.mem;
        futhark_mc_task_74004.free_max_res_70499 = max_res_70499;
        futhark_mc_task_74004.free_defunc_1_f_res_70518 = defunc_1_f_res_70518;
        futhark_mc_task_74004.free_defunc_0_f_res_70519 = defunc_0_f_res_70519;
        futhark_mc_task_74004.free_a12_70579 = a12_70579;
        futhark_mc_task_74004.free_b12_70580 = b12_70580;
        futhark_mc_task_74004.free_c12_70581 = c12_70581;
        futhark_mc_task_74004.free_b2_70582 = b2_70582;
        futhark_mc_task_74004.free_c2_70583 = c2_70583;
        futhark_mc_task_74004.retval_defunc_2_reduce_res_70584 =
            &defunc_2_reduce_res_70584;
        futhark_mc_task_74004.retval_defunc_2_reduce_res_70585 =
            &defunc_2_reduce_res_70585;
        
        struct scheduler_segop futhark_mc_task_74004_task;
        
        futhark_mc_task_74004_task.args = &futhark_mc_task_74004;
        futhark_mc_task_74004_task.top_level_fn = futhark_mc_segred_task_74005;
        futhark_mc_task_74004_task.name = "futhark_mc_segred_task_74005";
        futhark_mc_task_74004_task.iterations = q_62258;
        futhark_mc_task_74004_task.task_time =
            &ctx->futhark_mc_segred_task_74005_total_time;
        futhark_mc_task_74004_task.task_iter =
            &ctx->futhark_mc_segred_task_74005_total_iter;
        futhark_mc_task_74004_task.sched = STATIC;
        futhark_mc_task_74004_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74005_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74004_task);
        
        if (futhark_mc_segred_task_74005_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_67695.mem)[gtid_64662] = defunc_2_reduce_res_70584;
        ((float *) mem_67698.mem)[gtid_64662] = defunc_2_reduce_res_70585;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73994_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73994_end -
                 futhark_mc_segmap_parloop_73994_start;
        
        ctx->futhark_mc_segmap_parloop_73994_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73994_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73994_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_73992(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64661 = tid;
    int num_tasks_70842 = info.nsubtasks;
    struct futhark_mc_task_73988 *futhark_mc_task_73988 =
                                 (struct futhark_mc_task_73988 *) args;
    struct futhark_context *ctx = futhark_mc_task_73988->ctx;
    uint64_t futhark_mc_segmap_nested_task_73992_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_73992_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_73988->free_n_62256;
    int64_t q_62258 = futhark_mc_task_73988->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_73988->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_73988->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_73988->free_i_62270;
    bool x_62271 = futhark_mc_task_73988->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_73988->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_73988->free_loop_cond_62281;
    int64_t last_res_64870 = futhark_mc_task_73988->free_last_res_64870;
    int64_t min_arg_64882 = futhark_mc_task_73988->free_min_arg_64882;
    int64_t min_arg_64883 = futhark_mc_task_73988->free_min_arg_64883;
    int64_t min_res_64884 = futhark_mc_task_73988->free_min_res_64884;
    float max_res_64888 = futhark_mc_task_73988->free_max_res_64888;
    struct memblock mem_67680 = {.desc ="mem_67680", .mem =
                                 futhark_mc_task_73988->free_mem_67680, .size =
                                 0, .references =NULL};
    struct memblock mem_67683 = {.desc ="mem_67683", .mem =
                                 futhark_mc_task_73988->free_mem_67683, .size =
                                 0, .references =NULL};
    struct memblock mem_67686 = {.desc ="mem_67686", .mem =
                                 futhark_mc_task_73988->free_mem_67686, .size =
                                 0, .references =NULL};
    struct memblock mem_67689 = {.desc ="mem_67689", .mem =
                                 futhark_mc_task_73988->free_mem_67689, .size =
                                 0, .references =NULL};
    struct memblock mem_67692 = {.desc ="mem_67692", .mem =
                                 futhark_mc_task_73988->free_mem_67692, .size =
                                 0, .references =NULL};
    struct memblock mem_67695 = {.desc ="mem_67695", .mem =
                                 futhark_mc_task_73988->free_mem_67695, .size =
                                 0, .references =NULL};
    struct memblock mem_67698 = {.desc ="mem_67698", .mem =
                                 futhark_mc_task_73988->free_mem_67698, .size =
                                 0, .references =NULL};
    int64_t iter_70982;
    struct futhark_mc_segmap_parloop_struct_73993
    futhark_mc_segmap_parloop_struct_73993;
    
    futhark_mc_segmap_parloop_struct_73993.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73993.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73993.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73993.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_73993.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_73993.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_73993.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_73993.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_73993.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_73993.free_last_res_64870 = last_res_64870;
    futhark_mc_segmap_parloop_struct_73993.free_min_arg_64882 = min_arg_64882;
    futhark_mc_segmap_parloop_struct_73993.free_min_arg_64883 = min_arg_64883;
    futhark_mc_segmap_parloop_struct_73993.free_min_res_64884 = min_res_64884;
    futhark_mc_segmap_parloop_struct_73993.free_max_res_64888 = max_res_64888;
    futhark_mc_segmap_parloop_struct_73993.free_mem_67680 = mem_67680.mem;
    futhark_mc_segmap_parloop_struct_73993.free_mem_67683 = mem_67683.mem;
    futhark_mc_segmap_parloop_struct_73993.free_mem_67686 = mem_67686.mem;
    futhark_mc_segmap_parloop_struct_73993.free_mem_67689 = mem_67689.mem;
    futhark_mc_segmap_parloop_struct_73993.free_mem_67692 = mem_67692.mem;
    futhark_mc_segmap_parloop_struct_73993.free_mem_67695 = mem_67695.mem;
    futhark_mc_segmap_parloop_struct_73993.free_mem_67698 = mem_67698.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73994_task;
    
    futhark_mc_segmap_parloop_73994_task.name =
        "futhark_mc_segmap_parloop_73994";
    futhark_mc_segmap_parloop_73994_task.fn = futhark_mc_segmap_parloop_73994;
    futhark_mc_segmap_parloop_73994_task.args =
        &futhark_mc_segmap_parloop_struct_73993;
    futhark_mc_segmap_parloop_73994_task.iterations = iterations;
    futhark_mc_segmap_parloop_73994_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73994_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73994_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73994_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73994_task);
    
    if (futhark_mc_segmap_parloop_73994_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73994_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73994_total_end -
                 futhark_mc_segmap_parloop_73994_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73994_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73994_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73994_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_73992_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_73992_end -
                 futhark_mc_segmap_nested_task_73992_start;
        
        ctx->futhark_mc_segmap_nested_task_73992_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_73992_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_73992_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_73960(void *args, int64_t start,
                                           int64_t end, int flat_tid_64649,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_73959
    *futhark_mc_segmap_parloop_struct_73959 =
    (struct futhark_mc_segmap_parloop_struct_73959 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_73959->ctx;
    uint64_t futhark_mc_segmap_parloop_73960_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73960_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_segmap_parloop_struct_73959->free_m_62255;
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_73959->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_73959->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_73959->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_73959->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_73959->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_73959->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_73959->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_73959->free_loop_cond_62281;
    float i64_res_62282 =
          futhark_mc_segmap_parloop_struct_73959->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_73959->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67675 =
            futhark_mc_segmap_parloop_struct_73959->free_bytes_67675;
    int64_t bytes_67678 =
            futhark_mc_segmap_parloop_struct_73959->free_bytes_67678;
    int64_t bytes_67690 =
            futhark_mc_segmap_parloop_struct_73959->free_bytes_67690;
    int64_t bytes_67693 =
            futhark_mc_segmap_parloop_struct_73959->free_bytes_67693;
    struct memblock mem_67822 = {.desc ="mem_67822", .mem =
                                 futhark_mc_segmap_parloop_struct_73959->free_mem_67822,
                                 .size =0, .references =NULL};
    struct memblock mem_67826 = {.desc ="mem_67826", .mem =
                                 futhark_mc_segmap_parloop_struct_73959->free_mem_67826,
                                 .size =0, .references =NULL};
    size_t mem_67677_cached_sizze_73961 = 0;
    char *mem_67677 = NULL;
    size_t mem_67680_cached_sizze_73962 = 0;
    char *mem_67680 = NULL;
    size_t mem_67683_cached_sizze_73963 = 0;
    char *mem_67683 = NULL;
    size_t mem_67686_cached_sizze_73964 = 0;
    char *mem_67686 = NULL;
    size_t mem_67689_cached_sizze_73965 = 0;
    char *mem_67689 = NULL;
    size_t mem_67692_cached_sizze_73966 = 0;
    char *mem_67692 = NULL;
    size_t mem_67695_cached_sizze_73967 = 0;
    char *mem_67695 = NULL;
    size_t mem_67698_cached_sizze_73968 = 0;
    char *mem_67698 = NULL;
    int64_t iterations = end - start;
    int64_t iter_70414 = start;
    
    if (mem_67677_cached_sizze_73961 < (size_t) bytes_67675) {
        mem_67677 = realloc(mem_67677, bytes_67675);
        mem_67677_cached_sizze_73961 = bytes_67675;
    }
    if (mem_67680_cached_sizze_73962 < (size_t) bytes_67678) {
        mem_67680 = realloc(mem_67680, bytes_67678);
        mem_67680_cached_sizze_73962 = bytes_67678;
    }
    if (mem_67683_cached_sizze_73963 < (size_t) bytes_67675) {
        mem_67683 = realloc(mem_67683, bytes_67675);
        mem_67683_cached_sizze_73963 = bytes_67675;
    }
    if (mem_67686_cached_sizze_73964 < (size_t) bytes_67678) {
        mem_67686 = realloc(mem_67686, bytes_67678);
        mem_67686_cached_sizze_73964 = bytes_67678;
    }
    if (mem_67689_cached_sizze_73965 < (size_t) bytes_67675) {
        mem_67689 = realloc(mem_67689, bytes_67675);
        mem_67689_cached_sizze_73965 = bytes_67675;
    }
    if (mem_67692_cached_sizze_73966 < (size_t) bytes_67690) {
        mem_67692 = realloc(mem_67692, bytes_67690);
        mem_67692_cached_sizze_73966 = bytes_67690;
    }
    if (mem_67695_cached_sizze_73967 < (size_t) bytes_67693) {
        mem_67695 = realloc(mem_67695, bytes_67693);
        mem_67695_cached_sizze_73967 = bytes_67693;
    }
    if (mem_67698_cached_sizze_73968 < (size_t) bytes_67693) {
        mem_67698 = realloc(mem_67698, bytes_67693);
        mem_67698_cached_sizze_73968 = bytes_67693;
    }
    for (; iter_70414 < end; iter_70414++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_70810 = m_62255;
        int64_t gtid_64650 = iter_70414;
        int64_t remnant_70811 = iter_70414 - gtid_64650;
        int64_t flat_tid_64651 = (int64_t) 0;
        int32_t num_tasks_70812;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_73969 futhark_mc_task_73969;
        
        futhark_mc_task_73969.ctx = ctx;
        futhark_mc_task_73969.free_n_62256 = n_62256;
        futhark_mc_task_73969.free_gtid_64650 = gtid_64650;
        futhark_mc_task_73969.free_Y_mem_67388 = Y_mem_67388.mem;
        futhark_mc_task_73969.free_mem_67677 = mem_67677;
        
        struct scheduler_segop futhark_mc_task_73969_task;
        
        futhark_mc_task_73969_task.args = &futhark_mc_task_73969;
        futhark_mc_task_73969_task.top_level_fn = futhark_mc_segscan_task_73970;
        futhark_mc_task_73969_task.name = "futhark_mc_segscan_task_73970";
        futhark_mc_task_73969_task.iterations = n_62256;
        futhark_mc_task_73969_task.task_time =
            &ctx->futhark_mc_segscan_task_73970_total_time;
        futhark_mc_task_73969_task.task_iter =
            &ctx->futhark_mc_segscan_task_73970_total_iter;
        futhark_mc_task_73969_task.sched = STATIC;
        futhark_mc_task_73969_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_73970_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73969_task);
        
        if (futhark_mc_segscan_task_73970_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_64870 = ((int64_t *) mem_67677)[i_62270];
        
        for (int64_t i_70826 = 0; i_70826 < n_62256; i_70826++) {
            ((float *) mem_67680)[i_70826] = 0.0F;
        }
        for (int64_t i_70827 = 0; i_70827 < n_62256; i_70827++) {
            ((int64_t *) mem_67683)[i_70827] = (int64_t) -1;
        }
        
        int64_t flat_tid_64653 = (int64_t) 0;
        int32_t num_tasks_70828;
        struct futhark_mc_task_73976 futhark_mc_task_73976;
        
        futhark_mc_task_73976.ctx = ctx;
        futhark_mc_task_73976.free_n_62256 = n_62256;
        futhark_mc_task_73976.free_gtid_64650 = gtid_64650;
        futhark_mc_task_73976.free_Y_mem_67388 = Y_mem_67388.mem;
        futhark_mc_task_73976.free_mem_67677 = mem_67677;
        futhark_mc_task_73976.free_mem_67680 = mem_67680;
        futhark_mc_task_73976.free_mem_67683 = mem_67683;
        
        struct scheduler_segop futhark_mc_task_73976_task;
        
        futhark_mc_task_73976_task.args = &futhark_mc_task_73976;
        futhark_mc_task_73976_task.top_level_fn = futhark_mc_segmap_task_73977;
        futhark_mc_task_73976_task.name = "futhark_mc_segmap_task_73977";
        futhark_mc_task_73976_task.iterations = n_62256;
        futhark_mc_task_73976_task.task_time =
            &ctx->futhark_mc_segmap_task_73977_total_time;
        futhark_mc_task_73976_task.task_iter =
            &ctx->futhark_mc_segmap_task_73977_total_iter;
        futhark_mc_task_73976_task.sched = STATIC;
        futhark_mc_task_73976_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73977_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73976_task);
        
        if (futhark_mc_segmap_task_73977_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_64882 = sub64(last_res_64870, (int64_t) 1);
        int64_t min_arg_64883 = sub64(last_res_64870, min_res_62276);
        int64_t min_res_64884 = smin64(q_62258, last_res_64870);
        float i64_res_64885 = sitofp_i64_f32(last_res_64870);
        float x_64886 = i64_res_62282 - i64_res_64885;
        float max_arg_64887 = x_64886 / 2.0F;
        float max_res_64888 = fmax32(0.0F, max_arg_64887);
        int64_t flat_tid_64655 = (int64_t) 0;
        int32_t num_tasks_70834;
        struct futhark_mc_task_73980 futhark_mc_task_73980;
        
        futhark_mc_task_73980.ctx = ctx;
        futhark_mc_task_73980.free_n_62256 = n_62256;
        futhark_mc_task_73980.free_mem_67683 = mem_67683;
        futhark_mc_task_73980.free_mem_67686 = mem_67686;
        futhark_mc_task_73980.free_mem_67689 = mem_67689;
        
        struct scheduler_segop futhark_mc_task_73980_task;
        
        futhark_mc_task_73980_task.args = &futhark_mc_task_73980;
        futhark_mc_task_73980_task.top_level_fn = futhark_mc_segmap_task_73981;
        futhark_mc_task_73980_task.name = "futhark_mc_segmap_task_73981";
        futhark_mc_task_73980_task.iterations = n_62256;
        futhark_mc_task_73980_task.task_time =
            &ctx->futhark_mc_segmap_task_73981_total_time;
        futhark_mc_task_73980_task.task_iter =
            &ctx->futhark_mc_segmap_task_73981_total_iter;
        futhark_mc_task_73980_task.sched = STATIC;
        futhark_mc_task_73980_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73981_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73980_task);
        
        if (futhark_mc_segmap_task_73981_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_64657 = (int64_t) 0;
        int32_t num_tasks_70838;
        struct futhark_mc_task_73984 futhark_mc_task_73984;
        
        futhark_mc_task_73984.ctx = ctx;
        futhark_mc_task_73984.free_q_62258 = q_62258;
        futhark_mc_task_73984.free_last_res_64870 = last_res_64870;
        futhark_mc_task_73984.free_mem_67692 = mem_67692;
        
        struct scheduler_segop futhark_mc_task_73984_task;
        
        futhark_mc_task_73984_task.args = &futhark_mc_task_73984;
        futhark_mc_task_73984_task.top_level_fn = futhark_mc_segmap_task_73985;
        futhark_mc_task_73984_task.name = "futhark_mc_segmap_task_73985";
        futhark_mc_task_73984_task.iterations = q_62258;
        futhark_mc_task_73984_task.task_time =
            &ctx->futhark_mc_segmap_task_73985_total_time;
        futhark_mc_task_73984_task.task_iter =
            &ctx->futhark_mc_segmap_task_73985_total_iter;
        futhark_mc_task_73984_task.sched = STATIC;
        futhark_mc_task_73984_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_73985_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73984_task);
        
        if (futhark_mc_segmap_task_73985_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_64659 = (int64_t) 0;
        int32_t num_tasks_70842;
        int64_t flat_tid_64661 = (int64_t) 0;
        struct futhark_mc_task_73988 futhark_mc_task_73988;
        
        futhark_mc_task_73988.ctx = ctx;
        futhark_mc_task_73988.free_n_62256 = n_62256;
        futhark_mc_task_73988.free_q_62258 = q_62258;
        futhark_mc_task_73988.free_jump_62260 = jump_62260;
        futhark_mc_task_73988.free_n_m_62264 = n_m_62264;
        futhark_mc_task_73988.free_i_62270 = i_62270;
        futhark_mc_task_73988.free_x_62271 = x_62271;
        futhark_mc_task_73988.free_min_res_62276 = min_res_62276;
        futhark_mc_task_73988.free_loop_cond_62281 = loop_cond_62281;
        futhark_mc_task_73988.free_last_res_64870 = last_res_64870;
        futhark_mc_task_73988.free_min_arg_64882 = min_arg_64882;
        futhark_mc_task_73988.free_min_arg_64883 = min_arg_64883;
        futhark_mc_task_73988.free_min_res_64884 = min_res_64884;
        futhark_mc_task_73988.free_max_res_64888 = max_res_64888;
        futhark_mc_task_73988.free_mem_67680 = mem_67680;
        futhark_mc_task_73988.free_mem_67683 = mem_67683;
        futhark_mc_task_73988.free_mem_67686 = mem_67686;
        futhark_mc_task_73988.free_mem_67689 = mem_67689;
        futhark_mc_task_73988.free_mem_67692 = mem_67692;
        futhark_mc_task_73988.free_mem_67695 = mem_67695;
        futhark_mc_task_73988.free_mem_67698 = mem_67698;
        
        struct scheduler_segop futhark_mc_task_73988_task;
        
        futhark_mc_task_73988_task.args = &futhark_mc_task_73988;
        futhark_mc_task_73988_task.top_level_fn = futhark_mc_segmap_task_73989;
        futhark_mc_task_73988_task.name = "futhark_mc_segmap_task_73989";
        futhark_mc_task_73988_task.iterations = n_m_62264;
        futhark_mc_task_73988_task.task_time =
            &ctx->futhark_mc_segmap_task_73989_total_time;
        futhark_mc_task_73988_task.task_iter =
            &ctx->futhark_mc_segmap_task_73989_total_iter;
        futhark_mc_task_73988_task.sched = DYNAMIC;
        futhark_mc_task_73988_task.nested_fn =
            futhark_mc_segmap_nested_task_73992;
        
        int futhark_mc_segmap_task_73989_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_73988_task);
        
        if (futhark_mc_segmap_task_73989_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_67822.mem + gtid_64650 * n_m_62264 * (int64_t) 4,
                mem_67695 + (int64_t) 0, n_m_62264 * (int64_t) 4);
        memmove(mem_67826.mem + gtid_64650 * n_m_62264 * (int64_t) 4,
                mem_67698 + (int64_t) 0, n_m_62264 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67677);
    free(mem_67680);
    free(mem_67683);
    free(mem_67686);
    free(mem_67689);
    free(mem_67692);
    free(mem_67695);
    free(mem_67698);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73960_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73960_end -
                 futhark_mc_segmap_parloop_73960_start;
        
        ctx->futhark_mc_segmap_parloop_73960_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_73960_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_73960_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_73958(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_64649 = tid;
    int num_tasks_70160 = info.nsubtasks;
    struct futhark_mc_task_73946 *futhark_mc_task_73946 =
                                 (struct futhark_mc_task_73946 *) args;
    struct futhark_context *ctx = futhark_mc_task_73946->ctx;
    uint64_t futhark_mc_segmap_nested_task_73958_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_73958_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_task_73946->free_m_62255;
    int64_t n_62256 = futhark_mc_task_73946->free_n_62256;
    int64_t q_62258 = futhark_mc_task_73946->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_73946->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_73946->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_73946->free_i_62270;
    bool x_62271 = futhark_mc_task_73946->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_73946->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_73946->free_loop_cond_62281;
    float i64_res_62282 = futhark_mc_task_73946->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_73946->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67675 = futhark_mc_task_73946->free_bytes_67675;
    int64_t bytes_67678 = futhark_mc_task_73946->free_bytes_67678;
    int64_t bytes_67690 = futhark_mc_task_73946->free_bytes_67690;
    int64_t bytes_67693 = futhark_mc_task_73946->free_bytes_67693;
    struct memblock mem_67822 = {.desc ="mem_67822", .mem =
                                 futhark_mc_task_73946->free_mem_67822, .size =
                                 0, .references =NULL};
    struct memblock mem_67826 = {.desc ="mem_67826", .mem =
                                 futhark_mc_task_73946->free_mem_67826, .size =
                                 0, .references =NULL};
    int64_t iter_70414;
    struct futhark_mc_segmap_parloop_struct_73959
    futhark_mc_segmap_parloop_struct_73959;
    
    futhark_mc_segmap_parloop_struct_73959.ctx = ctx;
    futhark_mc_segmap_parloop_struct_73959.free_m_62255 = m_62255;
    futhark_mc_segmap_parloop_struct_73959.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_73959.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_73959.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_73959.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_73959.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_73959.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_73959.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_73959.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_73959.free_i64_res_62282 = i64_res_62282;
    futhark_mc_segmap_parloop_struct_73959.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_73959.free_bytes_67675 = bytes_67675;
    futhark_mc_segmap_parloop_struct_73959.free_bytes_67678 = bytes_67678;
    futhark_mc_segmap_parloop_struct_73959.free_bytes_67690 = bytes_67690;
    futhark_mc_segmap_parloop_struct_73959.free_bytes_67693 = bytes_67693;
    futhark_mc_segmap_parloop_struct_73959.free_mem_67822 = mem_67822.mem;
    futhark_mc_segmap_parloop_struct_73959.free_mem_67826 = mem_67826.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_73960_task;
    
    futhark_mc_segmap_parloop_73960_task.name =
        "futhark_mc_segmap_parloop_73960";
    futhark_mc_segmap_parloop_73960_task.fn = futhark_mc_segmap_parloop_73960;
    futhark_mc_segmap_parloop_73960_task.args =
        &futhark_mc_segmap_parloop_struct_73959;
    futhark_mc_segmap_parloop_73960_task.iterations = iterations;
    futhark_mc_segmap_parloop_73960_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_73960_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_73960_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_73960_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_73960_task);
    
    if (futhark_mc_segmap_parloop_73960_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_73960_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_73960_total_end -
                 futhark_mc_segmap_parloop_73960_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73960_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73960_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_73960_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_73958_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_73958_end -
                 futhark_mc_segmap_nested_task_73958_start;
        
        ctx->futhark_mc_segmap_nested_task_73958_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_73958_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_73958_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74010 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67835;
    int64_t free_bytes_67838;
    int64_t free_bytes_67850;
    int64_t free_bytes_67871;
    char *free_mem_67997;
};
struct futhark_mc_segmap_parloop_struct_74012 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67835;
    int64_t free_bytes_67838;
    int64_t free_bytes_67850;
    int64_t free_bytes_67871;
    char *free_mem_67997;
};
static int futhark_mc_segmap_parloop_74013(void *args, int64_t start,
                                           int64_t end, int flat_tid_65288,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74012
    *futhark_mc_segmap_parloop_struct_74012 =
    (struct futhark_mc_segmap_parloop_struct_74012 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74012->ctx;
    uint64_t futhark_mc_segmap_parloop_74013_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74013_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_segmap_parloop_struct_74012->free_m_62255;
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74012->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74012->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74012->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74012->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74012->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_74012->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_74012->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_74012->free_loop_cond_62281;
    float i64_res_62282 =
          futhark_mc_segmap_parloop_struct_74012->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_74012->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67835 =
            futhark_mc_segmap_parloop_struct_74012->free_bytes_67835;
    int64_t bytes_67838 =
            futhark_mc_segmap_parloop_struct_74012->free_bytes_67838;
    int64_t bytes_67850 =
            futhark_mc_segmap_parloop_struct_74012->free_bytes_67850;
    int64_t bytes_67871 =
            futhark_mc_segmap_parloop_struct_74012->free_bytes_67871;
    struct memblock mem_67997 = {.desc ="mem_67997", .mem =
                                 futhark_mc_segmap_parloop_struct_74012->free_mem_67997,
                                 .size =0, .references =NULL};
    size_t mem_67876_cached_sizze_74014 = 0;
    char *mem_67876 = NULL;
    size_t mem_67891_cached_sizze_74015 = 0;
    char *mem_67891 = NULL;
    size_t mem_67894_cached_sizze_74016 = 0;
    char *mem_67894 = NULL;
    size_t mem_67921_cached_sizze_74017 = 0;
    char *mem_67921 = NULL;
    size_t mem_67924_cached_sizze_74018 = 0;
    char *mem_67924 = NULL;
    size_t mem_67951_cached_sizze_74019 = 0;
    char *mem_67951 = NULL;
    size_t mem_67966_cached_sizze_74020 = 0;
    char *mem_67966 = NULL;
    size_t mem_67976_cached_sizze_74021 = 0;
    char *mem_67976 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71170 = start;
    
    if (mem_67876_cached_sizze_74014 < (size_t) bytes_67835) {
        mem_67876 = realloc(mem_67876, bytes_67835);
        mem_67876_cached_sizze_74014 = bytes_67835;
    }
    if (mem_67891_cached_sizze_74015 < (size_t) bytes_67838) {
        mem_67891 = realloc(mem_67891, bytes_67838);
        mem_67891_cached_sizze_74015 = bytes_67838;
    }
    if (mem_67894_cached_sizze_74016 < (size_t) bytes_67835) {
        mem_67894 = realloc(mem_67894, bytes_67835);
        mem_67894_cached_sizze_74016 = bytes_67835;
    }
    if (mem_67921_cached_sizze_74017 < (size_t) bytes_67838) {
        mem_67921 = realloc(mem_67921, bytes_67838);
        mem_67921_cached_sizze_74017 = bytes_67838;
    }
    if (mem_67924_cached_sizze_74018 < (size_t) bytes_67835) {
        mem_67924 = realloc(mem_67924, bytes_67835);
        mem_67924_cached_sizze_74018 = bytes_67835;
    }
    if (mem_67951_cached_sizze_74019 < (size_t) bytes_67850) {
        mem_67951 = realloc(mem_67951, bytes_67850);
        mem_67951_cached_sizze_74019 = bytes_67850;
    }
    if (mem_67966_cached_sizze_74020 < (size_t) bytes_67871) {
        mem_67966 = realloc(mem_67966, bytes_67871);
        mem_67966_cached_sizze_74020 = bytes_67871;
    }
    if (mem_67976_cached_sizze_74021 < (size_t) bytes_67850) {
        mem_67976 = realloc(mem_67976, bytes_67850);
        mem_67976_cached_sizze_74021 = bytes_67850;
    }
    for (; iter_71170 < end; iter_71170++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71330 = m_62255;
        int64_t gtid_65289 = iter_71170;
        int64_t remnant_71331 = iter_71170 - gtid_65289;
        int64_t discard_67121;
        int64_t scanacc_71172 = (int64_t) 0;
        
        for (int64_t i_71171 = 0; i_71171 < n_62256; i_71171++) {
            float x_71174 = ((float *) Y_mem_67388.mem)[gtid_65289 * n_62256 +
                                                        i_71171];
            bool isnan_res_71175;
            
            isnan_res_71175 = futrts_isnan32(x_71174);
            
            bool defunc_0_p_res_71176 = !isnan_res_71175;
            int64_t defunc_0_f_res_71177 = btoi_bool_i64(defunc_0_p_res_71176);
            int64_t defunc_1_op_res_71178 = add64(defunc_0_f_res_71177,
                                                  scanacc_71172);
            
            ((int64_t *) mem_67876)[i_71171] = defunc_1_op_res_71178;
            
            int64_t scanacc_tmp_71332 = defunc_1_op_res_71178;
            
            scanacc_71172 = scanacc_tmp_71332;
        }
        discard_67121 = scanacc_71172;
        
        int64_t last_res_62947 = ((int64_t *) mem_67876)[i_62270];
        
        for (int64_t i_71334 = 0; i_71334 < n_62256; i_71334++) {
            ((float *) mem_67891)[i_71334] = 0.0F;
        }
        for (int64_t i_71335 = 0; i_71335 < n_62256; i_71335++) {
            ((int64_t *) mem_67894)[i_71335] = (int64_t) -1;
        }
        for (int64_t write_iter_71180 = 0; write_iter_71180 < n_62256;
             write_iter_71180++) {
            float write_iv_71183 = ((float *) Y_mem_67388.mem)[gtid_65289 *
                                                               n_62256 +
                                                               write_iter_71180];
            bool isnan_res_71184;
            
            isnan_res_71184 = futrts_isnan32(write_iv_71183);
            
            bool defunc_0_p_res_71185 = !isnan_res_71184;
            int64_t defunc_1_f_res_71186;
            
            if (defunc_0_p_res_71185) {
                int64_t write_iv_71187 =
                        ((int64_t *) mem_67876)[write_iter_71180];
                int64_t defunc_1_f_res_t_res_71188 = sub64(write_iv_71187,
                                                           (int64_t) 1);
                
                defunc_1_f_res_71186 = defunc_1_f_res_t_res_71188;
            } else {
                defunc_1_f_res_71186 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_71186) &&
                slt64(defunc_1_f_res_71186, n_62256)) {
                ((int64_t *) mem_67894)[defunc_1_f_res_71186] =
                    write_iter_71180;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_71186) &&
                slt64(defunc_1_f_res_71186, n_62256)) {
                memmove(mem_67891 + defunc_1_f_res_71186 * (int64_t) 4,
                        Y_mem_67388.mem + (gtid_65289 * n_62256 +
                                           write_iter_71180) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_62962 = sub64(last_res_62947, (int64_t) 1);
        int64_t min_arg_62963 = sub64(last_res_62947, min_res_62276);
        int64_t min_res_62964 = smin64(q_62258, last_res_62947);
        float i64_res_62965 = sitofp_i64_f32(last_res_62947);
        float x_62966 = i64_res_62282 - i64_res_62965;
        float max_arg_62967 = x_62966 / 2.0F;
        float max_res_62968 = fmax32(0.0F, max_arg_62967);
        
        for (int64_t i_71192 = 0; i_71192 < n_62256; i_71192++) {
            int64_t x_71195 = ((int64_t *) mem_67894)[i_71192];
            int64_t defunc_0_f_res_71196 = add64((int64_t) 1, x_71195);
            float defunc_0_f_res_71197 = sitofp_i64_f32(x_71195);
            
            ((float *) mem_67921)[i_71192] = defunc_0_f_res_71197;
            ((int64_t *) mem_67924)[i_71192] = defunc_0_f_res_71196;
        }
        for (int64_t i_71200 = 0; i_71200 < q_62258; i_71200++) {
            bool cond_71202 = sle64(last_res_62947, i_71200);
            float defunc_0_f_res_71203;
            
            if (cond_71202) {
                defunc_0_f_res_71203 = 0.0F;
            } else {
                defunc_0_f_res_71203 = 1.0F;
            }
            ((float *) mem_67951)[i_71200] = defunc_0_f_res_71203;
        }
        for (int64_t i_71205 = 0; i_71205 < n_m_62264; i_71205++) {
            int64_t min_arg_71207 = mul64(jump_62260, i_71205);
            int64_t min_res_71208 = smin64(i_62270, min_arg_71207);
            int64_t defunc_0_g_res_71209 = add64((int64_t) 1, min_res_71208);
            bool init_idx_71210;
            int64_t init_idx_71211;
            int64_t init_idx_71212;
            bool loop_while_71213;
            int64_t low_71214;
            int64_t high_71215;
            
            loop_while_71213 = x_62271;
            low_71214 = (int64_t) 0;
            high_71215 = i_62270;
            while (loop_while_71213) {
                int64_t x_71216 = add64(low_71214, high_71215);
                int64_t mid_71217 = sdiv64(x_71216, (int64_t) 2);
                bool x_71218 = sle64((int64_t) 0, mid_71217);
                bool y_71219 = slt64(mid_71217, n_62256);
                bool bounds_check_71220 = x_71218 && y_71219;
                bool index_certs_71221;
                
                if (!bounds_check_71220) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_71217,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t mid_id_71222 = ((int64_t *) mem_67924)[mid_71217];
                bool cond_71223 = slt64(mid_id_71222, (int64_t) 0);
                int64_t mid_idx_71224;
                
                if (cond_71223) {
                    mid_idx_71224 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_71224 = mid_id_71222;
                }
                
                bool cond_71225 = sle64(defunc_0_g_res_71209, mid_idx_71224);
                int64_t loopres_71226;
                int64_t loopres_71227;
                
                if (cond_71225) {
                    int64_t loopres_t_res_71228 = sub64(mid_71217, (int64_t) 1);
                    
                    loopres_71226 = low_71214;
                    loopres_71227 = loopres_t_res_71228;
                } else {
                    int64_t loopres_f_res_71229 = add64((int64_t) 1, mid_71217);
                    
                    loopres_71226 = loopres_f_res_71229;
                    loopres_71227 = high_71215;
                }
                
                bool loop_cond_71230 = sle64(loopres_71226, loopres_71227);
                bool loop_while_tmp_71342 = loop_cond_71230;
                int64_t low_tmp_71343 = loopres_71226;
                int64_t high_tmp_71344 = loopres_71227;
                
                loop_while_71213 = loop_while_tmp_71342;
                low_71214 = low_tmp_71343;
                high_71215 = high_tmp_71344;
            }
            init_idx_71210 = loop_while_71213;
            init_idx_71211 = low_71214;
            init_idx_71212 = high_71215;
            
            bool idx_71231;
            int64_t idx_71232;
            int64_t idx_71233;
            int64_t idx_71234;
            bool loop_while_71235;
            int64_t l_idx_71236;
            int64_t r_idx_71237;
            int64_t span_71238;
            
            loop_while_71235 = loop_cond_62281;
            l_idx_71236 = init_idx_71211;
            r_idx_71237 = init_idx_71211;
            span_71238 = (int64_t) 1;
            while (loop_while_71235) {
                int64_t max_arg_71239 = sub64(l_idx_71236, (int64_t) 1);
                int64_t max_res_71240 = smax64((int64_t) 0, max_arg_71239);
                int64_t min_arg_71241 = add64((int64_t) 1, r_idx_71237);
                int64_t min_res_71242 = smin64(min_arg_62962, min_arg_71241);
                bool x_71243 = sle64((int64_t) 0, max_res_71240);
                bool y_71244 = slt64(max_res_71240, n_62256);
                bool bounds_check_71245 = x_71243 && y_71244;
                bool index_certs_71246;
                
                if (!bounds_check_71245) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_71240,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t x_71247 = ((int64_t *) mem_67924)[max_res_71240];
                int64_t abs_arg_71248 = sub64(x_71247, defunc_0_g_res_71209);
                int64_t abs_res_71249 = abs64(abs_arg_71248);
                bool x_71250 = sle64((int64_t) 0, min_res_71242);
                bool y_71251 = slt64(min_res_71242, n_62256);
                bool bounds_check_71252 = x_71250 && y_71251;
                bool index_certs_71253;
                
                if (!bounds_check_71252) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_71242,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t x_71254 = ((int64_t *) mem_67924)[min_res_71242];
                int64_t abs_arg_71255 = sub64(x_71254, defunc_0_g_res_71209);
                int64_t abs_res_71256 = abs64(abs_arg_71255);
                bool cond_71257 = max_res_71240 == l_idx_71236;
                int64_t loopres_71258;
                int64_t loopres_71259;
                int64_t loopres_71260;
                
                if (cond_71257) {
                    loopres_71258 = l_idx_71236;
                    loopres_71259 = r_idx_71237;
                    loopres_71260 = min_res_62276;
                } else {
                    bool cond_71261 = slt64(abs_res_71249, abs_res_71256);
                    bool cond_f_res_71262 = min_res_71242 == r_idx_71237;
                    bool x_71263 = !cond_71261;
                    bool y_71264 = cond_f_res_71262 && x_71263;
                    bool cond_71265 = cond_71261 || y_71264;
                    int64_t loopres_f_res_71266;
                    
                    if (cond_71265) {
                        loopres_f_res_71266 = max_res_71240;
                    } else {
                        loopres_f_res_71266 = l_idx_71236;
                    }
                    
                    int64_t loopres_f_res_71267;
                    
                    if (cond_71265) {
                        loopres_f_res_71267 = r_idx_71237;
                    } else {
                        loopres_f_res_71267 = min_res_71242;
                    }
                    
                    int64_t loopres_f_res_71268;
                    
                    if (cond_71265) {
                        int64_t loopres_f_res_t_res_71269 = add64((int64_t) 1,
                                                                  span_71238);
                        
                        loopres_f_res_71268 = loopres_f_res_t_res_71269;
                    } else {
                        int64_t loopres_f_res_f_res_71270 = add64((int64_t) 1,
                                                                  span_71238);
                        
                        loopres_f_res_71268 = loopres_f_res_f_res_71270;
                    }
                    loopres_71258 = loopres_f_res_71266;
                    loopres_71259 = loopres_f_res_71267;
                    loopres_71260 = loopres_f_res_71268;
                }
                
                bool loop_cond_71271 = slt64(loopres_71260, min_res_62276);
                bool loop_while_tmp_71345 = loop_cond_71271;
                int64_t l_idx_tmp_71346 = loopres_71258;
                int64_t r_idx_tmp_71347 = loopres_71259;
                int64_t span_tmp_71348 = loopres_71260;
                
                loop_while_71235 = loop_while_tmp_71345;
                l_idx_71236 = l_idx_tmp_71346;
                r_idx_71237 = r_idx_tmp_71347;
                span_71238 = span_tmp_71348;
            }
            idx_71231 = loop_while_71235;
            idx_71232 = l_idx_71236;
            idx_71233 = r_idx_71237;
            idx_71234 = span_71238;
            
            int64_t min_res_71272 = smin64(min_arg_62963, idx_71232);
            int64_t max_res_71273 = smax64((int64_t) 0, min_res_71272);
            int64_t x_71274 = add64(min_res_62964, max_res_71273);
            int64_t r_71275 = sub64(x_71274, (int64_t) 1);
            bool x_71276 = sle64((int64_t) 0, r_71275);
            bool y_71277 = slt64(r_71275, n_62256);
            bool bounds_check_71278 = x_71276 && y_71277;
            bool index_certs_71279;
            
            if (!bounds_check_71278) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_71275,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_71280 = ((int64_t *) mem_67894)[r_71275];
            int64_t abs_arg_71281 = sub64(x_71280, min_res_71208);
            int64_t abs_res_71282 = abs64(abs_arg_71281);
            bool x_71283 = sle64((int64_t) 0, max_res_71273);
            bool y_71284 = slt64(max_res_71273, n_62256);
            bool bounds_check_71285 = x_71283 && y_71284;
            bool index_certs_71286;
            
            if (!bounds_check_71285) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_71273,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_71287 = ((int64_t *) mem_67894)[max_res_71273];
            int64_t abs_arg_71288 = sub64(x_71287, min_res_71208);
            int64_t abs_res_71289 = abs64(abs_arg_71288);
            int64_t max_res_71290 = smax64(abs_res_71282, abs_res_71289);
            float defunc_0_f_res_71291 = sitofp_i64_f32(max_res_71290);
            float defunc_1_f_res_71292 = max_res_62968 + defunc_0_f_res_71291;
            float defunc_0_f_res_71293 = sitofp_i64_f32(min_res_71208);
            float defunc_2_reduce_res_71295;
            float redout_71298 = 0.0F;
            
            for (int64_t i_71297 = 0; i_71297 < q_62258; i_71297++) {
                float x_71300 = ((float *) mem_67951)[i_71297];
                bool cond_71301 = sle64(last_res_62947, i_71297);
                float defunc_0_f_res_71302;
                
                if (cond_71301) {
                    defunc_0_f_res_71302 = 0.0F;
                } else {
                    int64_t i_71303 = add64(max_res_71273, i_71297);
                    float x_71304 = ((float *) mem_67921)[i_71303];
                    float defunc_0_f_res_f_res_71305 = 1.0F + x_71304;
                    
                    defunc_0_f_res_71302 = defunc_0_f_res_f_res_71305;
                }
                
                float x_j_71306 = defunc_0_f_res_71302 - defunc_0_f_res_71293;
                float abs_res_71307 = (float) fabs(x_j_71306);
                float tmp1_71308 = abs_res_71307 / defunc_1_f_res_71292;
                float x_71309 = tmp1_71308 * tmp1_71308;
                float y_71310 = tmp1_71308 * x_71309;
                float tmp2_71311 = 1.0F - y_71310;
                float x_71312 = tmp2_71311 * tmp2_71311;
                float tmp3_71313 = tmp2_71311 * x_71312;
                float tmp4_71314 = x_71300 * tmp3_71313;
                float defunc_1_op_res_71315 = tmp4_71314 + redout_71298;
                
                ((float *) mem_67976)[i_71297] = tmp4_71314;
                
                float redout_tmp_71349 = defunc_1_op_res_71315;
                
                redout_71298 = redout_tmp_71349;
            }
            defunc_2_reduce_res_71295 = redout_71298;
            
            float a0_71317 = 1.0F / defunc_2_reduce_res_71295;
            float defunc_2_reduce_res_71318;
            float redout_71320 = 0.0F;
            
            for (int64_t i_71319 = 0; i_71319 < q_62258; i_71319++) {
                float x_71321 = ((float *) mem_67976)[i_71319];
                bool cond_71322 = sle64(last_res_62947, i_71319);
                float defunc_0_f_res_71323;
                
                if (cond_71322) {
                    defunc_0_f_res_71323 = 0.0F;
                } else {
                    int64_t i_71324 = add64(max_res_71273, i_71319);
                    float x_71325 = ((float *) mem_67891)[i_71324];
                    
                    defunc_0_f_res_71323 = x_71325;
                }
                
                float x_71326 = a0_71317 * x_71321;
                float defunc_9_fit_fun_res_71327 = defunc_0_f_res_71323 *
                      x_71326;
                float defunc_1_op_res_71328 = defunc_9_fit_fun_res_71327 +
                      redout_71320;
                float redout_tmp_71351 = defunc_1_op_res_71328;
                
                redout_71320 = redout_tmp_71351;
            }
            defunc_2_reduce_res_71318 = redout_71320;
            ((float *) mem_67966)[i_71205] = defunc_2_reduce_res_71318;
        }
        memmove(mem_67997.mem + gtid_65289 * n_m_62264 * (int64_t) 4,
                mem_67966 + (int64_t) 0, n_m_62264 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67876);
    free(mem_67891);
    free(mem_67894);
    free(mem_67921);
    free(mem_67924);
    free(mem_67951);
    free(mem_67966);
    free(mem_67976);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74013_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74013_end -
                 futhark_mc_segmap_parloop_74013_start;
        
        ctx->futhark_mc_segmap_parloop_74013_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74013_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74013_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74011(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65288 = tid;
    int num_tasks_71169 = info.nsubtasks;
    struct futhark_mc_task_74010 *futhark_mc_task_74010 =
                                 (struct futhark_mc_task_74010 *) args;
    struct futhark_context *ctx = futhark_mc_task_74010->ctx;
    uint64_t futhark_mc_segmap_task_74011_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74011_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_task_74010->free_m_62255;
    int64_t n_62256 = futhark_mc_task_74010->free_n_62256;
    int64_t q_62258 = futhark_mc_task_74010->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_74010->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74010->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74010->free_i_62270;
    bool x_62271 = futhark_mc_task_74010->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_74010->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_74010->free_loop_cond_62281;
    float i64_res_62282 = futhark_mc_task_74010->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_74010->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67835 = futhark_mc_task_74010->free_bytes_67835;
    int64_t bytes_67838 = futhark_mc_task_74010->free_bytes_67838;
    int64_t bytes_67850 = futhark_mc_task_74010->free_bytes_67850;
    int64_t bytes_67871 = futhark_mc_task_74010->free_bytes_67871;
    struct memblock mem_67997 = {.desc ="mem_67997", .mem =
                                 futhark_mc_task_74010->free_mem_67997, .size =
                                 0, .references =NULL};
    int64_t iter_71170;
    struct futhark_mc_segmap_parloop_struct_74012
    futhark_mc_segmap_parloop_struct_74012;
    
    futhark_mc_segmap_parloop_struct_74012.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74012.free_m_62255 = m_62255;
    futhark_mc_segmap_parloop_struct_74012.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74012.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74012.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74012.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74012.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74012.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_74012.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_74012.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_74012.free_i64_res_62282 = i64_res_62282;
    futhark_mc_segmap_parloop_struct_74012.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_74012.free_bytes_67835 = bytes_67835;
    futhark_mc_segmap_parloop_struct_74012.free_bytes_67838 = bytes_67838;
    futhark_mc_segmap_parloop_struct_74012.free_bytes_67850 = bytes_67850;
    futhark_mc_segmap_parloop_struct_74012.free_bytes_67871 = bytes_67871;
    futhark_mc_segmap_parloop_struct_74012.free_mem_67997 = mem_67997.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74013_task;
    
    futhark_mc_segmap_parloop_74013_task.name =
        "futhark_mc_segmap_parloop_74013";
    futhark_mc_segmap_parloop_74013_task.fn = futhark_mc_segmap_parloop_74013;
    futhark_mc_segmap_parloop_74013_task.args =
        &futhark_mc_segmap_parloop_struct_74012;
    futhark_mc_segmap_parloop_74013_task.iterations = iterations;
    futhark_mc_segmap_parloop_74013_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74013_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74013_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74013_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74013_task);
    
    if (futhark_mc_segmap_parloop_74013_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74013_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74013_total_end -
                 futhark_mc_segmap_parloop_74013_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74013_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74013_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74013_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74011_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74011_end -
                 futhark_mc_segmap_task_74011_start;
        
        ctx->futhark_mc_segmap_task_74011_runs[tid]++;
        ctx->futhark_mc_segmap_task_74011_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74011_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74023 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67835;
    int64_t free_bytes_67838;
    int64_t free_bytes_67850;
    int64_t free_bytes_67871;
    char *free_mem_67997;
};
struct futhark_mc_task_74032 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_65291;
    char *free_Y_mem_67388;
    char *free_mem_67837;
};
struct futhark_mc_scan_stage_1_parloop_struct_74035 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_65291;
    char *free_Y_mem_67388;
    char *free_mem_67837;
};
static int futhark_mc_scan_stage_1_parloop_74036(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_65292, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_74035
    *futhark_mc_scan_stage_1_parloop_struct_74035 =
    (struct futhark_mc_scan_stage_1_parloop_struct_74035 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_74035->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_74036_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_74036_start = get_wall_time();
    
    int64_t n_62256 =
            futhark_mc_scan_stage_1_parloop_struct_74035->free_n_62256;
    int64_t gtid_65291 =
            futhark_mc_scan_stage_1_parloop_struct_74035->free_gtid_65291;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_74035->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67837 = {.desc ="mem_67837", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_74035->free_mem_67837,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71617 = start;
    int64_t x_71353;
    int64_t x_71354;
    
    x_71353 = (int64_t) 0;
    for (; iter_71617 < end; iter_71617++) {
        int64_t gtid_65293 = iter_71617;
        
        // stage 1 scan body
        {
            float x_71356 = ((float *) Y_mem_67388.mem)[gtid_65291 * n_62256 +
                                                        gtid_65293];
            bool isnan_res_71357;
            
            isnan_res_71357 = futrts_isnan32(x_71356);
            
            bool defunc_0_p_res_71358 = !isnan_res_71357;
            int64_t defunc_0_f_res_71359 = btoi_bool_i64(defunc_0_p_res_71358);
            
            // write mapped values results to memory
            { }
            x_71353 = x_71353;
            // Read next values
            {
                x_71354 = defunc_0_f_res_71359;
            }
            
            int64_t defunc_1_op_res_71355 = add64(x_71353, x_71354);
            
            ((int64_t *) mem_67837.mem)[gtid_65293] = defunc_1_op_res_71355;
            x_71353 = defunc_1_op_res_71355;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_74036_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_74036_end -
                 futhark_mc_scan_stage_1_parloop_74036_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_74036_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_74036_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_74036_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_74037 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_65291;
    char *free_Y_mem_67388;
    char *free_mem_67837;
};
static int futhark_mc_scan_stage_3_parloop_74038(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_65292, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_74037
    *futhark_mc_scan_stage_3_parloop_struct_74037 =
    (struct futhark_mc_scan_stage_3_parloop_struct_74037 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_74037->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_74038_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_74038_start = get_wall_time();
    
    int64_t n_62256 =
            futhark_mc_scan_stage_3_parloop_struct_74037->free_n_62256;
    int64_t gtid_65291 =
            futhark_mc_scan_stage_3_parloop_struct_74037->free_gtid_65291;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_74037->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67837 = {.desc ="mem_67837", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_74037->free_mem_67837,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71629 = start;
    int64_t x_71626;
    int64_t x_71627;
    
    if (iter_71629 == (int64_t) 0) {
        x_71626 = (int64_t) 0;
    } else {
        x_71626 = ((int64_t *) mem_67837.mem)[iter_71629 - (int64_t) 1];
    }
    for (; iter_71629 < end; iter_71629++) {
        int64_t gtid_65293 = iter_71629;
        
        // stage 3 scan body
        {
            float x_71356 = ((float *) Y_mem_67388.mem)[gtid_65291 * n_62256 +
                                                        gtid_65293];
            bool isnan_res_71357;
            
            isnan_res_71357 = futrts_isnan32(x_71356);
            
            bool defunc_0_p_res_71358 = !isnan_res_71357;
            int64_t defunc_0_f_res_71359 = btoi_bool_i64(defunc_0_p_res_71358);
            
            x_71626 = x_71626;
            x_71627 = defunc_0_f_res_71359;
            
            int64_t defunc_1_op_res_71628 = add64(x_71626, x_71627);
            
            ((int64_t *) mem_67837.mem)[gtid_65293] = defunc_1_op_res_71628;
            x_71626 = defunc_1_op_res_71628;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_74038_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_74038_end -
                 futhark_mc_scan_stage_3_parloop_74038_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_74038_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_74038_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_74038_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_74033(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65292 = tid;
    int num_tasks_71616 = info.nsubtasks;
    struct futhark_mc_task_74032 *futhark_mc_task_74032 =
                                 (struct futhark_mc_task_74032 *) args;
    struct futhark_context *ctx = futhark_mc_task_74032->ctx;
    uint64_t futhark_mc_segscan_task_74033_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_74033_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74032->free_n_62256;
    int64_t gtid_65291 = futhark_mc_task_74032->free_gtid_65291;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_74032->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67837 = {.desc ="mem_67837", .mem =
                                 futhark_mc_task_74032->free_mem_67837, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_71623_cached_sizze_74034 = 0;
    char *scan_stage_2_accum_mem_71623 = NULL;
    int64_t iter_71617;
    struct futhark_mc_scan_stage_1_parloop_struct_74035
    futhark_mc_scan_stage_1_parloop_struct_74035;
    
    futhark_mc_scan_stage_1_parloop_struct_74035.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_74035.free_n_62256 = n_62256;
    futhark_mc_scan_stage_1_parloop_struct_74035.free_gtid_65291 = gtid_65291;
    futhark_mc_scan_stage_1_parloop_struct_74035.free_Y_mem_67388 =
        Y_mem_67388.mem;
    futhark_mc_scan_stage_1_parloop_struct_74035.free_mem_67837 = mem_67837.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_74036_task;
    
    futhark_mc_scan_stage_1_parloop_74036_task.name =
        "futhark_mc_scan_stage_1_parloop_74036";
    futhark_mc_scan_stage_1_parloop_74036_task.fn =
        futhark_mc_scan_stage_1_parloop_74036;
    futhark_mc_scan_stage_1_parloop_74036_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_74035;
    futhark_mc_scan_stage_1_parloop_74036_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_74036_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_74036_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_74036_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_74036_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_74036_task);
    
    if (futhark_mc_scan_stage_1_parloop_74036_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_74036_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_74036_total_end -
                 futhark_mc_scan_stage_1_parloop_74036_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74036_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74036_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74036_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_71616)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_71618;
        int64_t x_71619;
        int64_t offset_71621 = (int64_t) 0;
        int64_t offset_index_71622 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_71623_cached_sizze_74034 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_71623 = realloc(scan_stage_2_accum_mem_71623,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_71623_cached_sizze_74034 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_71623)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_71625 = 0; i_71625 < num_tasks_71616 - 1; i_71625++) {
            offset_71621 = squot64(n_62256, sext_i32_i64(num_tasks_71616));
            if (slt64(sext_i32_i64(i_71625), srem64(n_62256,
                                                    sext_i32_i64(num_tasks_71616)))) {
                offset_71621 += (int64_t) 1;
            }
            offset_index_71622 += offset_71621;
            
            int64_t gtid_65293 = offset_index_71622;
            float x_71356 = ((float *) Y_mem_67388.mem)[gtid_65291 * n_62256 +
                                                        gtid_65293];
            bool isnan_res_71357;
            
            isnan_res_71357 = futrts_isnan32(x_71356);
            
            bool defunc_0_p_res_71358 = !isnan_res_71357;
            int64_t defunc_0_f_res_71359 = btoi_bool_i64(defunc_0_p_res_71358);
            
            // Read carry in
            {
                x_71618 =
                    ((int64_t *) scan_stage_2_accum_mem_71623)[(int64_t) 0];
            }
            // Read next values
            {
                x_71619 = ((int64_t *) mem_67837.mem)[offset_index_71622 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_71620 = add64(x_71618, x_71619);
            
            ((int64_t *) mem_67837.mem)[offset_index_71622 - (int64_t) 1] =
                defunc_1_op_res_71620;
            ((int64_t *) scan_stage_2_accum_mem_71623)[(int64_t) 0] =
                defunc_1_op_res_71620;
        }
        
        int64_t iter_71629 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_74037
        futhark_mc_scan_stage_3_parloop_struct_74037;
        
        futhark_mc_scan_stage_3_parloop_struct_74037.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_74037.free_n_62256 = n_62256;
        futhark_mc_scan_stage_3_parloop_struct_74037.free_gtid_65291 =
            gtid_65291;
        futhark_mc_scan_stage_3_parloop_struct_74037.free_Y_mem_67388 =
            Y_mem_67388.mem;
        futhark_mc_scan_stage_3_parloop_struct_74037.free_mem_67837 =
            mem_67837.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_74038_task;
        
        futhark_mc_scan_stage_3_parloop_74038_task.name =
            "futhark_mc_scan_stage_3_parloop_74038";
        futhark_mc_scan_stage_3_parloop_74038_task.fn =
            futhark_mc_scan_stage_3_parloop_74038;
        futhark_mc_scan_stage_3_parloop_74038_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_74037;
        futhark_mc_scan_stage_3_parloop_74038_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_74038_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_74038_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_74038_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_74038_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_74038_task);
        
        if (futhark_mc_scan_stage_3_parloop_74038_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_74038_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_74038_total_end -
                     futhark_mc_scan_stage_3_parloop_74038_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74038_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74038_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74038_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_71623);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_74033_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_74033_end -
                 futhark_mc_segscan_task_74033_start;
        
        ctx->futhark_mc_segscan_task_74033_runs[tid]++;
        ctx->futhark_mc_segscan_task_74033_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_74033_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74039 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_65291;
    char *free_Y_mem_67388;
    char *free_mem_67837;
    char *free_mem_67840;
    char *free_mem_67843;
};
struct futhark_mc_segmap_parloop_struct_74041 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_65291;
    char *free_Y_mem_67388;
    char *free_mem_67837;
    char *free_mem_67840;
    char *free_mem_67843;
};
static int futhark_mc_segmap_parloop_74042(void *args, int64_t start,
                                           int64_t end, int flat_tid_65294,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74041
    *futhark_mc_segmap_parloop_struct_74041 =
    (struct futhark_mc_segmap_parloop_struct_74041 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74041->ctx;
    uint64_t futhark_mc_segmap_parloop_74042_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74042_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74041->free_n_62256;
    int64_t gtid_65291 =
            futhark_mc_segmap_parloop_struct_74041->free_gtid_65291;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_74041->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67837 = {.desc ="mem_67837", .mem =
                                 futhark_mc_segmap_parloop_struct_74041->free_mem_67837,
                                 .size =0, .references =NULL};
    struct memblock mem_67840 = {.desc ="mem_67840", .mem =
                                 futhark_mc_segmap_parloop_struct_74041->free_mem_67840,
                                 .size =0, .references =NULL};
    struct memblock mem_67843 = {.desc ="mem_67843", .mem =
                                 futhark_mc_segmap_parloop_struct_74041->free_mem_67843,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71633 = start;
    
    for (; iter_71633 < end; iter_71633++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71636 = n_62256;
        int64_t gtid_65295 = iter_71633;
        int64_t remnant_71637 = iter_71633 - gtid_65295;
        float x_71360 = ((float *) Y_mem_67388.mem)[gtid_65291 * n_62256 +
                                                    gtid_65295];
        bool isnan_res_71361;
        
        isnan_res_71361 = futrts_isnan32(x_71360);
        
        bool defunc_0_p_res_71362 = !isnan_res_71361;
        int64_t defunc_1_f_res_71363;
        
        if (defunc_0_p_res_71362) {
            int64_t x_71634 = ((int64_t *) mem_67837.mem)[gtid_65295];
            int64_t defunc_1_f_res_t_res_71635 = sub64(x_71634, (int64_t) 1);
            
            defunc_1_f_res_71363 = defunc_1_f_res_t_res_71635;
        } else {
            defunc_1_f_res_71363 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_71363) &&
            slt64(defunc_1_f_res_71363, n_62256)) {
            ((int64_t *) mem_67843.mem)[defunc_1_f_res_71363] = gtid_65295;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_71363) &&
            slt64(defunc_1_f_res_71363, n_62256)) {
            ((float *) mem_67840.mem)[defunc_1_f_res_71363] = x_71360;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74042_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74042_end -
                 futhark_mc_segmap_parloop_74042_start;
        
        ctx->futhark_mc_segmap_parloop_74042_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74042_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74042_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74040(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65294 = tid;
    int num_tasks_71632 = info.nsubtasks;
    struct futhark_mc_task_74039 *futhark_mc_task_74039 =
                                 (struct futhark_mc_task_74039 *) args;
    struct futhark_context *ctx = futhark_mc_task_74039->ctx;
    uint64_t futhark_mc_segmap_task_74040_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74040_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74039->free_n_62256;
    int64_t gtid_65291 = futhark_mc_task_74039->free_gtid_65291;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_74039->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_67837 = {.desc ="mem_67837", .mem =
                                 futhark_mc_task_74039->free_mem_67837, .size =
                                 0, .references =NULL};
    struct memblock mem_67840 = {.desc ="mem_67840", .mem =
                                 futhark_mc_task_74039->free_mem_67840, .size =
                                 0, .references =NULL};
    struct memblock mem_67843 = {.desc ="mem_67843", .mem =
                                 futhark_mc_task_74039->free_mem_67843, .size =
                                 0, .references =NULL};
    int64_t iter_71633;
    struct futhark_mc_segmap_parloop_struct_74041
    futhark_mc_segmap_parloop_struct_74041;
    
    futhark_mc_segmap_parloop_struct_74041.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74041.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74041.free_gtid_65291 = gtid_65291;
    futhark_mc_segmap_parloop_struct_74041.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_74041.free_mem_67837 = mem_67837.mem;
    futhark_mc_segmap_parloop_struct_74041.free_mem_67840 = mem_67840.mem;
    futhark_mc_segmap_parloop_struct_74041.free_mem_67843 = mem_67843.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74042_task;
    
    futhark_mc_segmap_parloop_74042_task.name =
        "futhark_mc_segmap_parloop_74042";
    futhark_mc_segmap_parloop_74042_task.fn = futhark_mc_segmap_parloop_74042;
    futhark_mc_segmap_parloop_74042_task.args =
        &futhark_mc_segmap_parloop_struct_74041;
    futhark_mc_segmap_parloop_74042_task.iterations = iterations;
    futhark_mc_segmap_parloop_74042_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74042_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74042_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74042_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74042_task);
    
    if (futhark_mc_segmap_parloop_74042_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74042_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74042_total_end -
                 futhark_mc_segmap_parloop_74042_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74042_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74042_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74042_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74040_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74040_end -
                 futhark_mc_segmap_task_74040_start;
        
        ctx->futhark_mc_segmap_task_74040_runs[tid]++;
        ctx->futhark_mc_segmap_task_74040_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74040_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74043 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    char *free_mem_67843;
    char *free_mem_67846;
    char *free_mem_67849;
};
struct futhark_mc_segmap_parloop_struct_74045 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    char *free_mem_67843;
    char *free_mem_67846;
    char *free_mem_67849;
};
static int futhark_mc_segmap_parloop_74046(void *args, int64_t start,
                                           int64_t end, int flat_tid_65296,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74045
    *futhark_mc_segmap_parloop_struct_74045 =
    (struct futhark_mc_segmap_parloop_struct_74045 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74045->ctx;
    uint64_t futhark_mc_segmap_parloop_74046_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74046_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74045->free_n_62256;
    struct memblock mem_67843 = {.desc ="mem_67843", .mem =
                                 futhark_mc_segmap_parloop_struct_74045->free_mem_67843,
                                 .size =0, .references =NULL};
    struct memblock mem_67846 = {.desc ="mem_67846", .mem =
                                 futhark_mc_segmap_parloop_struct_74045->free_mem_67846,
                                 .size =0, .references =NULL};
    struct memblock mem_67849 = {.desc ="mem_67849", .mem =
                                 futhark_mc_segmap_parloop_struct_74045->free_mem_67849,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71639 = start;
    
    for (; iter_71639 < end; iter_71639++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71640 = n_62256;
        int64_t gtid_65297 = iter_71639;
        int64_t remnant_71641 = iter_71639 - gtid_65297;
        int64_t x_71366 = ((int64_t *) mem_67843.mem)[gtid_65297];
        int64_t defunc_0_f_res_71367 = add64((int64_t) 1, x_71366);
        float defunc_0_f_res_71368 = sitofp_i64_f32(x_71366);
        
        ((float *) mem_67846.mem)[gtid_65297] = defunc_0_f_res_71368;
        ((int64_t *) mem_67849.mem)[gtid_65297] = defunc_0_f_res_71367;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74046_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74046_end -
                 futhark_mc_segmap_parloop_74046_start;
        
        ctx->futhark_mc_segmap_parloop_74046_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74046_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74046_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74044(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65296 = tid;
    int num_tasks_71638 = info.nsubtasks;
    struct futhark_mc_task_74043 *futhark_mc_task_74043 =
                                 (struct futhark_mc_task_74043 *) args;
    struct futhark_context *ctx = futhark_mc_task_74043->ctx;
    uint64_t futhark_mc_segmap_task_74044_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74044_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74043->free_n_62256;
    struct memblock mem_67843 = {.desc ="mem_67843", .mem =
                                 futhark_mc_task_74043->free_mem_67843, .size =
                                 0, .references =NULL};
    struct memblock mem_67846 = {.desc ="mem_67846", .mem =
                                 futhark_mc_task_74043->free_mem_67846, .size =
                                 0, .references =NULL};
    struct memblock mem_67849 = {.desc ="mem_67849", .mem =
                                 futhark_mc_task_74043->free_mem_67849, .size =
                                 0, .references =NULL};
    int64_t iter_71639;
    struct futhark_mc_segmap_parloop_struct_74045
    futhark_mc_segmap_parloop_struct_74045;
    
    futhark_mc_segmap_parloop_struct_74045.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74045.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74045.free_mem_67843 = mem_67843.mem;
    futhark_mc_segmap_parloop_struct_74045.free_mem_67846 = mem_67846.mem;
    futhark_mc_segmap_parloop_struct_74045.free_mem_67849 = mem_67849.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74046_task;
    
    futhark_mc_segmap_parloop_74046_task.name =
        "futhark_mc_segmap_parloop_74046";
    futhark_mc_segmap_parloop_74046_task.fn = futhark_mc_segmap_parloop_74046;
    futhark_mc_segmap_parloop_74046_task.args =
        &futhark_mc_segmap_parloop_struct_74045;
    futhark_mc_segmap_parloop_74046_task.iterations = iterations;
    futhark_mc_segmap_parloop_74046_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74046_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74046_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74046_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74046_task);
    
    if (futhark_mc_segmap_parloop_74046_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74046_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74046_total_end -
                 futhark_mc_segmap_parloop_74046_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74046_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74046_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74046_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74044_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74044_end -
                 futhark_mc_segmap_task_74044_start;
        
        ctx->futhark_mc_segmap_task_74044_runs[tid]++;
        ctx->futhark_mc_segmap_task_74044_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74044_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74047 {
    struct futhark_context *ctx;
    int64_t free_q_62258;
    int64_t free_last_res_65439;
    char *free_mem_67852;
};
struct futhark_mc_segmap_parloop_struct_74049 {
    struct futhark_context *ctx;
    int64_t free_q_62258;
    int64_t free_last_res_65439;
    char *free_mem_67852;
};
static int futhark_mc_segmap_parloop_74050(void *args, int64_t start,
                                           int64_t end, int flat_tid_65298,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74049
    *futhark_mc_segmap_parloop_struct_74049 =
    (struct futhark_mc_segmap_parloop_struct_74049 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74049->ctx;
    uint64_t futhark_mc_segmap_parloop_74050_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74050_start = get_wall_time();
    
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74049->free_q_62258;
    int64_t last_res_65439 =
            futhark_mc_segmap_parloop_struct_74049->free_last_res_65439;
    struct memblock mem_67852 = {.desc ="mem_67852", .mem =
                                 futhark_mc_segmap_parloop_struct_74049->free_mem_67852,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71643 = start;
    
    for (; iter_71643 < end; iter_71643++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71644 = q_62258;
        int64_t gtid_65299 = iter_71643;
        int64_t remnant_71645 = iter_71643 - gtid_65299;
        bool cond_71369 = sle64(last_res_65439, gtid_65299);
        float defunc_0_f_res_71370;
        
        if (cond_71369) {
            defunc_0_f_res_71370 = 0.0F;
        } else {
            defunc_0_f_res_71370 = 1.0F;
        }
        ((float *) mem_67852.mem)[gtid_65299] = defunc_0_f_res_71370;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74050_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74050_end -
                 futhark_mc_segmap_parloop_74050_start;
        
        ctx->futhark_mc_segmap_parloop_74050_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74050_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74050_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74048(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65298 = tid;
    int num_tasks_71642 = info.nsubtasks;
    struct futhark_mc_task_74047 *futhark_mc_task_74047 =
                                 (struct futhark_mc_task_74047 *) args;
    struct futhark_context *ctx = futhark_mc_task_74047->ctx;
    uint64_t futhark_mc_segmap_task_74048_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74048_start = get_wall_time();
    
    int64_t q_62258 = futhark_mc_task_74047->free_q_62258;
    int64_t last_res_65439 = futhark_mc_task_74047->free_last_res_65439;
    struct memblock mem_67852 = {.desc ="mem_67852", .mem =
                                 futhark_mc_task_74047->free_mem_67852, .size =
                                 0, .references =NULL};
    int64_t iter_71643;
    struct futhark_mc_segmap_parloop_struct_74049
    futhark_mc_segmap_parloop_struct_74049;
    
    futhark_mc_segmap_parloop_struct_74049.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74049.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74049.free_last_res_65439 = last_res_65439;
    futhark_mc_segmap_parloop_struct_74049.free_mem_67852 = mem_67852.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74050_task;
    
    futhark_mc_segmap_parloop_74050_task.name =
        "futhark_mc_segmap_parloop_74050";
    futhark_mc_segmap_parloop_74050_task.fn = futhark_mc_segmap_parloop_74050;
    futhark_mc_segmap_parloop_74050_task.args =
        &futhark_mc_segmap_parloop_struct_74049;
    futhark_mc_segmap_parloop_74050_task.iterations = iterations;
    futhark_mc_segmap_parloop_74050_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74050_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74050_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74050_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74050_task);
    
    if (futhark_mc_segmap_parloop_74050_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74050_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74050_total_end -
                 futhark_mc_segmap_parloop_74050_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74050_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74050_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74050_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74048_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74048_end -
                 futhark_mc_segmap_task_74048_start;
        
        ctx->futhark_mc_segmap_task_74048_runs[tid]++;
        ctx->futhark_mc_segmap_task_74048_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74048_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74051 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_65439;
    int64_t free_min_arg_65451;
    int64_t free_min_arg_65452;
    int64_t free_min_res_65453;
    float free_max_res_65457;
    char *free_mem_67840;
    char *free_mem_67843;
    char *free_mem_67846;
    char *free_mem_67849;
    int64_t free_bytes_67850;
    char *free_mem_67852;
    char *free_mem_67873;
};
struct futhark_mc_segmap_parloop_struct_74053 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_65439;
    int64_t free_min_arg_65451;
    int64_t free_min_arg_65452;
    int64_t free_min_res_65453;
    float free_max_res_65457;
    char *free_mem_67840;
    char *free_mem_67843;
    char *free_mem_67846;
    char *free_mem_67849;
    int64_t free_bytes_67850;
    char *free_mem_67852;
    char *free_mem_67873;
};
static int futhark_mc_segmap_parloop_74054(void *args, int64_t start,
                                           int64_t end, int flat_tid_65300,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74053
    *futhark_mc_segmap_parloop_struct_74053 =
    (struct futhark_mc_segmap_parloop_struct_74053 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74053->ctx;
    uint64_t futhark_mc_segmap_parloop_74054_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74054_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74053->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74053->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74053->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74053->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74053->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_74053->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_74053->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_74053->free_loop_cond_62281;
    int64_t last_res_65439 =
            futhark_mc_segmap_parloop_struct_74053->free_last_res_65439;
    int64_t min_arg_65451 =
            futhark_mc_segmap_parloop_struct_74053->free_min_arg_65451;
    int64_t min_arg_65452 =
            futhark_mc_segmap_parloop_struct_74053->free_min_arg_65452;
    int64_t min_res_65453 =
            futhark_mc_segmap_parloop_struct_74053->free_min_res_65453;
    float max_res_65457 =
          futhark_mc_segmap_parloop_struct_74053->free_max_res_65457;
    struct memblock mem_67840 = {.desc ="mem_67840", .mem =
                                 futhark_mc_segmap_parloop_struct_74053->free_mem_67840,
                                 .size =0, .references =NULL};
    struct memblock mem_67843 = {.desc ="mem_67843", .mem =
                                 futhark_mc_segmap_parloop_struct_74053->free_mem_67843,
                                 .size =0, .references =NULL};
    struct memblock mem_67846 = {.desc ="mem_67846", .mem =
                                 futhark_mc_segmap_parloop_struct_74053->free_mem_67846,
                                 .size =0, .references =NULL};
    struct memblock mem_67849 = {.desc ="mem_67849", .mem =
                                 futhark_mc_segmap_parloop_struct_74053->free_mem_67849,
                                 .size =0, .references =NULL};
    int64_t bytes_67850 =
            futhark_mc_segmap_parloop_struct_74053->free_bytes_67850;
    struct memblock mem_67852 = {.desc ="mem_67852", .mem =
                                 futhark_mc_segmap_parloop_struct_74053->free_mem_67852,
                                 .size =0, .references =NULL};
    struct memblock mem_67873 = {.desc ="mem_67873", .mem =
                                 futhark_mc_segmap_parloop_struct_74053->free_mem_67873,
                                 .size =0, .references =NULL};
    size_t mem_71578_cached_sizze_74055 = 0;
    char *mem_71578 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71647 = start;
    
    if (mem_71578_cached_sizze_74055 < (size_t) bytes_67850) {
        mem_71578 = realloc(mem_71578, bytes_67850);
        mem_71578_cached_sizze_74055 = bytes_67850;
    }
    for (; iter_71647 < end; iter_71647++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71733 = n_m_62264;
        int64_t gtid_65301 = iter_71647;
        int64_t remnant_71734 = iter_71647 - gtid_65301;
        int64_t min_arg_71491 = mul64(jump_62260, gtid_65301);
        int64_t min_res_71492 = smin64(i_62270, min_arg_71491);
        int64_t defunc_0_g_res_71493 = add64((int64_t) 1, min_res_71492);
        bool init_idx_71494;
        int64_t init_idx_71495;
        int64_t init_idx_71496;
        bool loop_while_71648;
        int64_t low_71649;
        int64_t high_71650;
        
        loop_while_71648 = x_62271;
        low_71649 = (int64_t) 0;
        high_71650 = i_62270;
        while (loop_while_71648) {
            int64_t x_71651 = add64(low_71649, high_71650);
            int64_t mid_71652 = sdiv64(x_71651, (int64_t) 2);
            bool x_71653 = sle64((int64_t) 0, mid_71652);
            bool y_71654 = slt64(mid_71652, n_62256);
            bool bounds_check_71655 = x_71653 && y_71654;
            bool index_certs_71656;
            
            if (!bounds_check_71655) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_71652,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t mid_id_71657 = ((int64_t *) mem_67849.mem)[mid_71652];
            bool cond_71658 = slt64(mid_id_71657, (int64_t) 0);
            int64_t mid_idx_71659;
            
            if (cond_71658) {
                mid_idx_71659 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_71659 = mid_id_71657;
            }
            
            bool cond_71660 = sle64(defunc_0_g_res_71493, mid_idx_71659);
            int64_t loopres_71661;
            int64_t loopres_71662;
            
            if (cond_71660) {
                int64_t loopres_t_res_71663 = sub64(mid_71652, (int64_t) 1);
                
                loopres_71661 = low_71649;
                loopres_71662 = loopres_t_res_71663;
            } else {
                int64_t loopres_f_res_71664 = add64((int64_t) 1, mid_71652);
                
                loopres_71661 = loopres_f_res_71664;
                loopres_71662 = high_71650;
            }
            
            bool loop_cond_71665 = sle64(loopres_71661, loopres_71662);
            bool loop_while_tmp_71735 = loop_cond_71665;
            int64_t low_tmp_71736 = loopres_71661;
            int64_t high_tmp_71737 = loopres_71662;
            
            loop_while_71648 = loop_while_tmp_71735;
            low_71649 = low_tmp_71736;
            high_71650 = high_tmp_71737;
        }
        init_idx_71494 = loop_while_71648;
        init_idx_71495 = low_71649;
        init_idx_71496 = high_71650;
        
        bool idx_71515;
        int64_t idx_71516;
        int64_t idx_71517;
        int64_t idx_71518;
        bool loop_while_71666;
        int64_t l_idx_71667;
        int64_t r_idx_71668;
        int64_t span_71669;
        
        loop_while_71666 = loop_cond_62281;
        l_idx_71667 = init_idx_71495;
        r_idx_71668 = init_idx_71495;
        span_71669 = (int64_t) 1;
        while (loop_while_71666) {
            int64_t max_arg_71670 = sub64(l_idx_71667, (int64_t) 1);
            int64_t max_res_71671 = smax64((int64_t) 0, max_arg_71670);
            int64_t min_arg_71672 = add64((int64_t) 1, r_idx_71668);
            int64_t min_res_71673 = smin64(min_arg_65451, min_arg_71672);
            bool x_71674 = sle64((int64_t) 0, max_res_71671);
            bool y_71675 = slt64(max_res_71671, n_62256);
            bool bounds_check_71676 = x_71674 && y_71675;
            bool index_certs_71677;
            
            if (!bounds_check_71676) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_71671,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_71678 = ((int64_t *) mem_67849.mem)[max_res_71671];
            int64_t abs_arg_71679 = sub64(x_71678, defunc_0_g_res_71493);
            int64_t abs_res_71680 = abs64(abs_arg_71679);
            bool x_71681 = sle64((int64_t) 0, min_res_71673);
            bool y_71682 = slt64(min_res_71673, n_62256);
            bool bounds_check_71683 = x_71681 && y_71682;
            bool index_certs_71684;
            
            if (!bounds_check_71683) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_71673,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_71685 = ((int64_t *) mem_67849.mem)[min_res_71673];
            int64_t abs_arg_71686 = sub64(x_71685, defunc_0_g_res_71493);
            int64_t abs_res_71687 = abs64(abs_arg_71686);
            bool cond_71688 = max_res_71671 == l_idx_71667;
            int64_t loopres_71689;
            int64_t loopres_71690;
            int64_t loopres_71691;
            
            if (cond_71688) {
                loopres_71689 = l_idx_71667;
                loopres_71690 = r_idx_71668;
                loopres_71691 = min_res_62276;
            } else {
                bool cond_71692 = slt64(abs_res_71680, abs_res_71687);
                bool cond_f_res_71693 = min_res_71673 == r_idx_71668;
                bool x_71694 = !cond_71692;
                bool y_71695 = cond_f_res_71693 && x_71694;
                bool cond_71696 = cond_71692 || y_71695;
                int64_t loopres_f_res_71697;
                
                if (cond_71696) {
                    loopres_f_res_71697 = max_res_71671;
                } else {
                    loopres_f_res_71697 = l_idx_71667;
                }
                
                int64_t loopres_f_res_71698;
                
                if (cond_71696) {
                    loopres_f_res_71698 = r_idx_71668;
                } else {
                    loopres_f_res_71698 = min_res_71673;
                }
                
                int64_t loopres_f_res_71699;
                
                if (cond_71696) {
                    int64_t loopres_f_res_t_res_71700 = add64((int64_t) 1,
                                                              span_71669);
                    
                    loopres_f_res_71699 = loopres_f_res_t_res_71700;
                } else {
                    int64_t loopres_f_res_f_res_71701 = add64((int64_t) 1,
                                                              span_71669);
                    
                    loopres_f_res_71699 = loopres_f_res_f_res_71701;
                }
                loopres_71689 = loopres_f_res_71697;
                loopres_71690 = loopres_f_res_71698;
                loopres_71691 = loopres_f_res_71699;
            }
            
            bool loop_cond_71702 = slt64(loopres_71691, min_res_62276);
            bool loop_while_tmp_71738 = loop_cond_71702;
            int64_t l_idx_tmp_71739 = loopres_71689;
            int64_t r_idx_tmp_71740 = loopres_71690;
            int64_t span_tmp_71741 = loopres_71691;
            
            loop_while_71666 = loop_while_tmp_71738;
            l_idx_71667 = l_idx_tmp_71739;
            r_idx_71668 = r_idx_tmp_71740;
            span_71669 = span_tmp_71741;
        }
        idx_71515 = loop_while_71666;
        idx_71516 = l_idx_71667;
        idx_71517 = r_idx_71668;
        idx_71518 = span_71669;
        
        int64_t min_res_71556 = smin64(min_arg_65452, idx_71516);
        int64_t max_res_71557 = smax64((int64_t) 0, min_res_71556);
        int64_t x_71558 = add64(min_res_65453, max_res_71557);
        int64_t r_71559 = sub64(x_71558, (int64_t) 1);
        bool x_71560 = sle64((int64_t) 0, r_71559);
        bool y_71561 = slt64(r_71559, n_62256);
        bool bounds_check_71562 = x_71560 && y_71561;
        bool index_certs_71563;
        
        if (!bounds_check_71562) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_71559,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_71564 = ((int64_t *) mem_67843.mem)[r_71559];
        int64_t abs_arg_71565 = sub64(x_71564, min_res_71492);
        int64_t abs_res_71566 = abs64(abs_arg_71565);
        bool x_71567 = sle64((int64_t) 0, max_res_71557);
        bool y_71568 = slt64(max_res_71557, n_62256);
        bool bounds_check_71569 = x_71567 && y_71568;
        bool index_certs_71570;
        
        if (!bounds_check_71569) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_71557,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_71571 = ((int64_t *) mem_67843.mem)[max_res_71557];
        int64_t abs_arg_71572 = sub64(x_71571, min_res_71492);
        int64_t abs_res_71573 = abs64(abs_arg_71572);
        int64_t max_res_71574 = smax64(abs_res_71566, abs_res_71573);
        float defunc_0_f_res_71575 = sitofp_i64_f32(max_res_71574);
        float defunc_1_f_res_71576 = max_res_65457 + defunc_0_f_res_71575;
        float defunc_0_f_res_71577 = sitofp_i64_f32(min_res_71492);
        float defunc_2_reduce_res_71580;
        float redout_71704 = 0.0F;
        
        for (int64_t i_71703 = 0; i_71703 < q_62258; i_71703++) {
            float x_71706 = ((float *) mem_67852.mem)[i_71703];
            bool cond_71707 = sle64(last_res_65439, i_71703);
            float defunc_0_f_res_71708;
            
            if (cond_71707) {
                defunc_0_f_res_71708 = 0.0F;
            } else {
                int64_t i_71709 = add64(max_res_71557, i_71703);
                float x_71710 = ((float *) mem_67846.mem)[i_71709];
                float defunc_0_f_res_f_res_71711 = 1.0F + x_71710;
                
                defunc_0_f_res_71708 = defunc_0_f_res_f_res_71711;
            }
            
            float x_j_71712 = defunc_0_f_res_71708 - defunc_0_f_res_71577;
            float abs_res_71713 = (float) fabs(x_j_71712);
            float tmp1_71714 = abs_res_71713 / defunc_1_f_res_71576;
            float x_71715 = tmp1_71714 * tmp1_71714;
            float y_71716 = tmp1_71714 * x_71715;
            float tmp2_71717 = 1.0F - y_71716;
            float x_71718 = tmp2_71717 * tmp2_71717;
            float tmp3_71719 = tmp2_71717 * x_71718;
            float tmp4_71720 = x_71706 * tmp3_71719;
            float defunc_1_op_res_71721 = tmp4_71720 + redout_71704;
            
            ((float *) mem_71578)[i_71703] = tmp4_71720;
            
            float redout_tmp_71742 = defunc_1_op_res_71721;
            
            redout_71704 = redout_tmp_71742;
        }
        defunc_2_reduce_res_71580 = redout_71704;
        
        float a0_71602 = 1.0F / defunc_2_reduce_res_71580;
        float defunc_2_reduce_res_71603;
        float redout_71724 = 0.0F;
        
        for (int64_t i_71723 = 0; i_71723 < q_62258; i_71723++) {
            float x_71725 = ((float *) mem_71578)[i_71723];
            bool cond_71726 = sle64(last_res_65439, i_71723);
            float defunc_0_f_res_71727;
            
            if (cond_71726) {
                defunc_0_f_res_71727 = 0.0F;
            } else {
                int64_t i_71728 = add64(max_res_71557, i_71723);
                float x_71729 = ((float *) mem_67840.mem)[i_71728];
                
                defunc_0_f_res_71727 = x_71729;
            }
            
            float x_71730 = a0_71602 * x_71725;
            float defunc_9_fit_fun_res_71731 = defunc_0_f_res_71727 * x_71730;
            float defunc_1_op_res_71732 = defunc_9_fit_fun_res_71731 +
                  redout_71724;
            float redout_tmp_71744 = defunc_1_op_res_71732;
            
            redout_71724 = redout_tmp_71744;
        }
        defunc_2_reduce_res_71603 = redout_71724;
        ((float *) mem_67873.mem)[gtid_65301] = defunc_2_reduce_res_71603;
    }
    
  cleanup:
    { }
    free(mem_71578);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74054_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74054_end -
                 futhark_mc_segmap_parloop_74054_start;
        
        ctx->futhark_mc_segmap_parloop_74054_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74054_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74054_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74052(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65300 = tid;
    int num_tasks_71646 = info.nsubtasks;
    struct futhark_mc_task_74051 *futhark_mc_task_74051 =
                                 (struct futhark_mc_task_74051 *) args;
    struct futhark_context *ctx = futhark_mc_task_74051->ctx;
    uint64_t futhark_mc_segmap_task_74052_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74052_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74051->free_n_62256;
    int64_t q_62258 = futhark_mc_task_74051->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_74051->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74051->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74051->free_i_62270;
    bool x_62271 = futhark_mc_task_74051->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_74051->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_74051->free_loop_cond_62281;
    int64_t last_res_65439 = futhark_mc_task_74051->free_last_res_65439;
    int64_t min_arg_65451 = futhark_mc_task_74051->free_min_arg_65451;
    int64_t min_arg_65452 = futhark_mc_task_74051->free_min_arg_65452;
    int64_t min_res_65453 = futhark_mc_task_74051->free_min_res_65453;
    float max_res_65457 = futhark_mc_task_74051->free_max_res_65457;
    struct memblock mem_67840 = {.desc ="mem_67840", .mem =
                                 futhark_mc_task_74051->free_mem_67840, .size =
                                 0, .references =NULL};
    struct memblock mem_67843 = {.desc ="mem_67843", .mem =
                                 futhark_mc_task_74051->free_mem_67843, .size =
                                 0, .references =NULL};
    struct memblock mem_67846 = {.desc ="mem_67846", .mem =
                                 futhark_mc_task_74051->free_mem_67846, .size =
                                 0, .references =NULL};
    struct memblock mem_67849 = {.desc ="mem_67849", .mem =
                                 futhark_mc_task_74051->free_mem_67849, .size =
                                 0, .references =NULL};
    int64_t bytes_67850 = futhark_mc_task_74051->free_bytes_67850;
    struct memblock mem_67852 = {.desc ="mem_67852", .mem =
                                 futhark_mc_task_74051->free_mem_67852, .size =
                                 0, .references =NULL};
    struct memblock mem_67873 = {.desc ="mem_67873", .mem =
                                 futhark_mc_task_74051->free_mem_67873, .size =
                                 0, .references =NULL};
    int64_t iter_71647;
    struct futhark_mc_segmap_parloop_struct_74053
    futhark_mc_segmap_parloop_struct_74053;
    
    futhark_mc_segmap_parloop_struct_74053.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74053.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74053.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74053.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74053.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74053.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74053.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_74053.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_74053.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_74053.free_last_res_65439 = last_res_65439;
    futhark_mc_segmap_parloop_struct_74053.free_min_arg_65451 = min_arg_65451;
    futhark_mc_segmap_parloop_struct_74053.free_min_arg_65452 = min_arg_65452;
    futhark_mc_segmap_parloop_struct_74053.free_min_res_65453 = min_res_65453;
    futhark_mc_segmap_parloop_struct_74053.free_max_res_65457 = max_res_65457;
    futhark_mc_segmap_parloop_struct_74053.free_mem_67840 = mem_67840.mem;
    futhark_mc_segmap_parloop_struct_74053.free_mem_67843 = mem_67843.mem;
    futhark_mc_segmap_parloop_struct_74053.free_mem_67846 = mem_67846.mem;
    futhark_mc_segmap_parloop_struct_74053.free_mem_67849 = mem_67849.mem;
    futhark_mc_segmap_parloop_struct_74053.free_bytes_67850 = bytes_67850;
    futhark_mc_segmap_parloop_struct_74053.free_mem_67852 = mem_67852.mem;
    futhark_mc_segmap_parloop_struct_74053.free_mem_67873 = mem_67873.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74054_task;
    
    futhark_mc_segmap_parloop_74054_task.name =
        "futhark_mc_segmap_parloop_74054";
    futhark_mc_segmap_parloop_74054_task.fn = futhark_mc_segmap_parloop_74054;
    futhark_mc_segmap_parloop_74054_task.args =
        &futhark_mc_segmap_parloop_struct_74053;
    futhark_mc_segmap_parloop_74054_task.iterations = iterations;
    futhark_mc_segmap_parloop_74054_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74054_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74054_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74054_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74054_task);
    
    if (futhark_mc_segmap_parloop_74054_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74054_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74054_total_end -
                 futhark_mc_segmap_parloop_74054_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74054_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74054_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74054_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74052_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74052_end -
                 futhark_mc_segmap_task_74052_start;
        
        ctx->futhark_mc_segmap_task_74052_runs[tid]++;
        ctx->futhark_mc_segmap_task_74052_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74052_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74057 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_65439;
    int64_t free_min_arg_65451;
    int64_t free_min_arg_65452;
    int64_t free_min_res_65453;
    float free_max_res_65457;
    char *free_mem_67840;
    char *free_mem_67843;
    char *free_mem_67846;
    char *free_mem_67849;
    int64_t free_bytes_67850;
    char *free_mem_67852;
    char *free_mem_67873;
};
struct futhark_mc_task_74060 {
    struct futhark_context *ctx;
    int64_t free_last_res_65439;
    char *free_mem_67846;
    char *free_mem_67852;
    int64_t free_max_res_71437;
    float free_defunc_1_f_res_71456;
    float free_defunc_0_f_res_71457;
    float *retval_defunc_2_reduce_res_71459;
    char *retval_mem_71458;
};
struct futhark_mc_segred_stage_1_parloop_struct_74063 {
    struct futhark_context *ctx;
    int64_t free_last_res_65439;
    char *free_mem_67846;
    char *free_mem_67852;
    int64_t free_max_res_71437;
    float free_defunc_1_f_res_71456;
    float free_defunc_0_f_res_71457;
    char *free_mem_71458;
    char *free_reduce_stage_1_tid_res_arr_mem_71839;
};
static int futhark_mc_segred_stage_1_parloop_74064(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_65304, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74063
    *futhark_mc_segred_stage_1_parloop_struct_74063 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74063 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74063->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74064_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74064_start = get_wall_time();
    
    int64_t last_res_65439 =
            futhark_mc_segred_stage_1_parloop_struct_74063->free_last_res_65439;
    struct memblock mem_67846 = {.desc ="mem_67846", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74063->free_mem_67846,
                                 .size =0, .references =NULL};
    struct memblock mem_67852 = {.desc ="mem_67852", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74063->free_mem_67852,
                                 .size =0, .references =NULL};
    int64_t max_res_71437 =
            futhark_mc_segred_stage_1_parloop_struct_74063->free_max_res_71437;
    float defunc_1_f_res_71456 =
          futhark_mc_segred_stage_1_parloop_struct_74063->free_defunc_1_f_res_71456;
    float defunc_0_f_res_71457 =
          futhark_mc_segred_stage_1_parloop_struct_74063->free_defunc_0_f_res_71457;
    struct memblock mem_71458 = {.desc ="mem_71458", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74063->free_mem_71458,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_71839 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71839",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74063->free_reduce_stage_1_tid_res_arr_mem_71839,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71841 = start;
    float x_71801;
    float x_71802;
    float local_acc_71842 = 0.0F;
    
    for (; iter_71841 < end; iter_71841++) {
        int64_t gtid_65305 = iter_71841;
        float x_71804 = ((float *) mem_67852.mem)[gtid_65305];
        bool cond_71805 = sle64(last_res_65439, gtid_65305);
        float defunc_0_f_res_71806;
        
        if (cond_71805) {
            defunc_0_f_res_71806 = 0.0F;
        } else {
            int64_t i_71807 = add64(gtid_65305, max_res_71437);
            float x_71808 = ((float *) mem_67846.mem)[i_71807];
            float defunc_0_f_res_f_res_71809 = 1.0F + x_71808;
            
            defunc_0_f_res_71806 = defunc_0_f_res_f_res_71809;
        }
        
        float x_j_71810 = defunc_0_f_res_71806 - defunc_0_f_res_71457;
        float abs_res_71811 = (float) fabs(x_j_71810);
        float tmp1_71812 = abs_res_71811 / defunc_1_f_res_71456;
        float x_71813 = tmp1_71812 * tmp1_71812;
        float y_71814 = tmp1_71812 * x_71813;
        float tmp2_71815 = 1.0F - y_71814;
        float x_71816 = tmp2_71815 * tmp2_71815;
        float tmp3_71817 = tmp2_71815 * x_71816;
        float tmp4_71818 = x_71804 * tmp3_71817;
        
        // save map-out results
        {
            ((float *) mem_71458.mem)[gtid_65305] = tmp4_71818;
        }
        // Load accum params
        {
            x_71801 = local_acc_71842;
        }
        // Load next params
        {
            x_71802 = tmp4_71818;
        }
        // Red body
        {
            float defunc_1_op_res_71803 = x_71801 + x_71802;
            
            local_acc_71842 = defunc_1_op_res_71803;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_71839.mem)[flat_tid_65304] =
        local_acc_71842;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74064_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74064_end -
                 futhark_mc_segred_stage_1_parloop_74064_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74064_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74064_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74064_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74061(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65304 = tid;
    int num_tasks_71838 = info.nsubtasks;
    struct futhark_mc_task_74060 *futhark_mc_task_74060 =
                                 (struct futhark_mc_task_74060 *) args;
    struct futhark_context *ctx = futhark_mc_task_74060->ctx;
    uint64_t futhark_mc_segred_task_74061_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74061_start = get_wall_time();
    
    int64_t last_res_65439 = futhark_mc_task_74060->free_last_res_65439;
    struct memblock mem_67846 = {.desc ="mem_67846", .mem =
                                 futhark_mc_task_74060->free_mem_67846, .size =
                                 0, .references =NULL};
    struct memblock mem_67852 = {.desc ="mem_67852", .mem =
                                 futhark_mc_task_74060->free_mem_67852, .size =
                                 0, .references =NULL};
    int64_t max_res_71437 = futhark_mc_task_74060->free_max_res_71437;
    float defunc_1_f_res_71456 =
          futhark_mc_task_74060->free_defunc_1_f_res_71456;
    float defunc_0_f_res_71457 =
          futhark_mc_task_74060->free_defunc_0_f_res_71457;
    float defunc_2_reduce_res_71459 =
          *futhark_mc_task_74060->retval_defunc_2_reduce_res_71459;
    struct memblock mem_71458 = {.desc ="mem_71458", .mem =
                                 futhark_mc_task_74060->retval_mem_71458,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_71839_cached_sizze_74062 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71839 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_71839_cached_sizze_74062 <
        (size_t) ((int64_t) 4 * num_tasks_71838)) {
        reduce_stage_1_tid_res_arr_mem_71839 =
            realloc(reduce_stage_1_tid_res_arr_mem_71839, (int64_t) 4 *
                    num_tasks_71838);
        reduce_stage_1_tid_res_arr_mem_71839_cached_sizze_74062 = (int64_t) 4 *
            num_tasks_71838;
    }
    
    int64_t iter_71841;
    struct futhark_mc_segred_stage_1_parloop_struct_74063
    futhark_mc_segred_stage_1_parloop_struct_74063;
    
    futhark_mc_segred_stage_1_parloop_struct_74063.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74063.free_last_res_65439 =
        last_res_65439;
    futhark_mc_segred_stage_1_parloop_struct_74063.free_mem_67846 =
        mem_67846.mem;
    futhark_mc_segred_stage_1_parloop_struct_74063.free_mem_67852 =
        mem_67852.mem;
    futhark_mc_segred_stage_1_parloop_struct_74063.free_max_res_71437 =
        max_res_71437;
    futhark_mc_segred_stage_1_parloop_struct_74063.free_defunc_1_f_res_71456 =
        defunc_1_f_res_71456;
    futhark_mc_segred_stage_1_parloop_struct_74063.free_defunc_0_f_res_71457 =
        defunc_0_f_res_71457;
    futhark_mc_segred_stage_1_parloop_struct_74063.free_mem_71458 =
        mem_71458.mem;
    futhark_mc_segred_stage_1_parloop_struct_74063.free_reduce_stage_1_tid_res_arr_mem_71839 =
        reduce_stage_1_tid_res_arr_mem_71839;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74064_task;
    
    futhark_mc_segred_stage_1_parloop_74064_task.name =
        "futhark_mc_segred_stage_1_parloop_74064";
    futhark_mc_segred_stage_1_parloop_74064_task.fn =
        futhark_mc_segred_stage_1_parloop_74064;
    futhark_mc_segred_stage_1_parloop_74064_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74063;
    futhark_mc_segred_stage_1_parloop_74064_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74064_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74064_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74064_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74064_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74064_task);
    
    if (futhark_mc_segred_stage_1_parloop_74064_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74064_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74064_total_end -
                 futhark_mc_segred_stage_1_parloop_74064_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74064_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74064_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74064_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_71459 = 0.0F;
    }
    
    float x_71843;
    float x_71844;
    
    for (int32_t i_71846 = 0; i_71846 < num_tasks_71838; i_71846++) {
        flat_tid_65304 = i_71846;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_71843 = defunc_2_reduce_res_71459;
            }
            // load next params
            {
                x_71844 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71839)[flat_tid_65304];
            }
            // red body
            {
                float defunc_1_op_res_71845 = x_71843 + x_71844;
                
                defunc_2_reduce_res_71459 = defunc_1_op_res_71845;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_71839);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74061_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74061_end -
                 futhark_mc_segred_task_74061_start;
        
        ctx->futhark_mc_segred_task_74061_runs[tid]++;
        ctx->futhark_mc_segred_task_74061_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74061_iter[tid] += iterations;
    }
    *futhark_mc_task_74060->retval_defunc_2_reduce_res_71459 =
        defunc_2_reduce_res_71459;
    futhark_mc_task_74060->retval_mem_71458 = mem_71458.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74065 {
    struct futhark_context *ctx;
    int64_t free_last_res_65439;
    char *free_mem_67840;
    int64_t free_max_res_71437;
    char *free_mem_71458;
    float free_a0_71479;
    float *retval_defunc_2_reduce_res_71480;
};
struct futhark_mc_segred_stage_1_parloop_struct_74068 {
    struct futhark_context *ctx;
    int64_t free_last_res_65439;
    char *free_mem_67840;
    int64_t free_max_res_71437;
    char *free_mem_71458;
    float free_a0_71479;
    char *free_reduce_stage_1_tid_res_arr_mem_71848;
};
static int futhark_mc_segred_stage_1_parloop_74069(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_65306, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74068
    *futhark_mc_segred_stage_1_parloop_struct_74068 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74068 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74068->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74069_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74069_start = get_wall_time();
    
    int64_t last_res_65439 =
            futhark_mc_segred_stage_1_parloop_struct_74068->free_last_res_65439;
    struct memblock mem_67840 = {.desc ="mem_67840", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74068->free_mem_67840,
                                 .size =0, .references =NULL};
    int64_t max_res_71437 =
            futhark_mc_segred_stage_1_parloop_struct_74068->free_max_res_71437;
    struct memblock mem_71458 = {.desc ="mem_71458", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74068->free_mem_71458,
                                 .size =0, .references =NULL};
    float a0_71479 =
          futhark_mc_segred_stage_1_parloop_struct_74068->free_a0_71479;
    struct memblock reduce_stage_1_tid_res_arr_mem_71848 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_71848",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74068->free_reduce_stage_1_tid_res_arr_mem_71848,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_71850 = start;
    float x_71819;
    float x_71820;
    float local_acc_71851 = 0.0F;
    
    for (; iter_71850 < end; iter_71850++) {
        int64_t gtid_65307 = iter_71850;
        float x_71822 = ((float *) mem_71458.mem)[gtid_65307];
        bool cond_71823 = sle64(last_res_65439, gtid_65307);
        float defunc_0_f_res_71824;
        
        if (cond_71823) {
            defunc_0_f_res_71824 = 0.0F;
        } else {
            int64_t i_71825 = add64(gtid_65307, max_res_71437);
            float x_71826 = ((float *) mem_67840.mem)[i_71825];
            
            defunc_0_f_res_71824 = x_71826;
        }
        
        float x_71827 = a0_71479 * x_71822;
        float defunc_9_fit_fun_res_71828 = defunc_0_f_res_71824 * x_71827;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_71819 = local_acc_71851;
        }
        // Load next params
        {
            x_71820 = defunc_9_fit_fun_res_71828;
        }
        // Red body
        {
            float defunc_1_op_res_71821 = x_71819 + x_71820;
            
            local_acc_71851 = defunc_1_op_res_71821;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_71848.mem)[flat_tid_65306] =
        local_acc_71851;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74069_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74069_end -
                 futhark_mc_segred_stage_1_parloop_74069_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74069_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74069_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74069_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74066(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65306 = tid;
    int num_tasks_71847 = info.nsubtasks;
    struct futhark_mc_task_74065 *futhark_mc_task_74065 =
                                 (struct futhark_mc_task_74065 *) args;
    struct futhark_context *ctx = futhark_mc_task_74065->ctx;
    uint64_t futhark_mc_segred_task_74066_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74066_start = get_wall_time();
    
    int64_t last_res_65439 = futhark_mc_task_74065->free_last_res_65439;
    struct memblock mem_67840 = {.desc ="mem_67840", .mem =
                                 futhark_mc_task_74065->free_mem_67840, .size =
                                 0, .references =NULL};
    int64_t max_res_71437 = futhark_mc_task_74065->free_max_res_71437;
    struct memblock mem_71458 = {.desc ="mem_71458", .mem =
                                 futhark_mc_task_74065->free_mem_71458, .size =
                                 0, .references =NULL};
    float a0_71479 = futhark_mc_task_74065->free_a0_71479;
    float defunc_2_reduce_res_71480 =
          *futhark_mc_task_74065->retval_defunc_2_reduce_res_71480;
    size_t reduce_stage_1_tid_res_arr_mem_71848_cached_sizze_74067 = 0;
    char *reduce_stage_1_tid_res_arr_mem_71848 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_71848_cached_sizze_74067 <
        (size_t) ((int64_t) 4 * num_tasks_71847)) {
        reduce_stage_1_tid_res_arr_mem_71848 =
            realloc(reduce_stage_1_tid_res_arr_mem_71848, (int64_t) 4 *
                    num_tasks_71847);
        reduce_stage_1_tid_res_arr_mem_71848_cached_sizze_74067 = (int64_t) 4 *
            num_tasks_71847;
    }
    
    int64_t iter_71850;
    struct futhark_mc_segred_stage_1_parloop_struct_74068
    futhark_mc_segred_stage_1_parloop_struct_74068;
    
    futhark_mc_segred_stage_1_parloop_struct_74068.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74068.free_last_res_65439 =
        last_res_65439;
    futhark_mc_segred_stage_1_parloop_struct_74068.free_mem_67840 =
        mem_67840.mem;
    futhark_mc_segred_stage_1_parloop_struct_74068.free_max_res_71437 =
        max_res_71437;
    futhark_mc_segred_stage_1_parloop_struct_74068.free_mem_71458 =
        mem_71458.mem;
    futhark_mc_segred_stage_1_parloop_struct_74068.free_a0_71479 = a0_71479;
    futhark_mc_segred_stage_1_parloop_struct_74068.free_reduce_stage_1_tid_res_arr_mem_71848 =
        reduce_stage_1_tid_res_arr_mem_71848;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74069_task;
    
    futhark_mc_segred_stage_1_parloop_74069_task.name =
        "futhark_mc_segred_stage_1_parloop_74069";
    futhark_mc_segred_stage_1_parloop_74069_task.fn =
        futhark_mc_segred_stage_1_parloop_74069;
    futhark_mc_segred_stage_1_parloop_74069_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74068;
    futhark_mc_segred_stage_1_parloop_74069_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74069_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74069_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74069_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74069_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74069_task);
    
    if (futhark_mc_segred_stage_1_parloop_74069_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74069_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74069_total_end -
                 futhark_mc_segred_stage_1_parloop_74069_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74069_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74069_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74069_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_71480 = 0.0F;
    }
    
    float x_71852;
    float x_71853;
    
    for (int32_t i_71855 = 0; i_71855 < num_tasks_71847; i_71855++) {
        flat_tid_65306 = i_71855;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_71852 = defunc_2_reduce_res_71480;
            }
            // load next params
            {
                x_71853 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_71848)[flat_tid_65306];
            }
            // red body
            {
                float defunc_1_op_res_71854 = x_71852 + x_71853;
                
                defunc_2_reduce_res_71480 = defunc_1_op_res_71854;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_71848);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74066_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74066_end -
                 futhark_mc_segred_task_74066_start;
        
        ctx->futhark_mc_segred_task_74066_runs[tid]++;
        ctx->futhark_mc_segred_task_74066_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74066_iter[tid] += iterations;
    }
    *futhark_mc_task_74065->retval_defunc_2_reduce_res_71480 =
        defunc_2_reduce_res_71480;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74058(void *args, int64_t start,
                                           int64_t end, int flat_tid_65302,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74057
    *futhark_mc_segmap_parloop_struct_74057 =
    (struct futhark_mc_segmap_parloop_struct_74057 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74057->ctx;
    uint64_t futhark_mc_segmap_parloop_74058_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74058_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74057->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74057->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74057->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74057->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74057->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_74057->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_74057->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_74057->free_loop_cond_62281;
    int64_t last_res_65439 =
            futhark_mc_segmap_parloop_struct_74057->free_last_res_65439;
    int64_t min_arg_65451 =
            futhark_mc_segmap_parloop_struct_74057->free_min_arg_65451;
    int64_t min_arg_65452 =
            futhark_mc_segmap_parloop_struct_74057->free_min_arg_65452;
    int64_t min_res_65453 =
            futhark_mc_segmap_parloop_struct_74057->free_min_res_65453;
    float max_res_65457 =
          futhark_mc_segmap_parloop_struct_74057->free_max_res_65457;
    struct memblock mem_67840 = {.desc ="mem_67840", .mem =
                                 futhark_mc_segmap_parloop_struct_74057->free_mem_67840,
                                 .size =0, .references =NULL};
    struct memblock mem_67843 = {.desc ="mem_67843", .mem =
                                 futhark_mc_segmap_parloop_struct_74057->free_mem_67843,
                                 .size =0, .references =NULL};
    struct memblock mem_67846 = {.desc ="mem_67846", .mem =
                                 futhark_mc_segmap_parloop_struct_74057->free_mem_67846,
                                 .size =0, .references =NULL};
    struct memblock mem_67849 = {.desc ="mem_67849", .mem =
                                 futhark_mc_segmap_parloop_struct_74057->free_mem_67849,
                                 .size =0, .references =NULL};
    int64_t bytes_67850 =
            futhark_mc_segmap_parloop_struct_74057->free_bytes_67850;
    struct memblock mem_67852 = {.desc ="mem_67852", .mem =
                                 futhark_mc_segmap_parloop_struct_74057->free_mem_67852,
                                 .size =0, .references =NULL};
    struct memblock mem_67873 = {.desc ="mem_67873", .mem =
                                 futhark_mc_segmap_parloop_struct_74057->free_mem_67873,
                                 .size =0, .references =NULL};
    size_t mem_71458_cached_sizze_74059 = 0;
    char *mem_71458 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71745 = start;
    
    if (mem_71458_cached_sizze_74059 < (size_t) bytes_67850) {
        mem_71458 = realloc(mem_71458, bytes_67850);
        mem_71458_cached_sizze_74059 = bytes_67850;
    }
    for (; iter_71745 < end; iter_71745++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71829 = n_m_62264;
        int64_t gtid_65303 = iter_71745;
        int64_t remnant_71830 = iter_71745 - gtid_65303;
        int64_t min_arg_71371 = mul64(jump_62260, gtid_65303);
        int64_t min_res_71372 = smin64(i_62270, min_arg_71371);
        int64_t defunc_0_g_res_71373 = add64((int64_t) 1, min_res_71372);
        bool init_idx_71374;
        int64_t init_idx_71375;
        int64_t init_idx_71376;
        bool loop_while_71746;
        int64_t low_71747;
        int64_t high_71748;
        
        loop_while_71746 = x_62271;
        low_71747 = (int64_t) 0;
        high_71748 = i_62270;
        while (loop_while_71746) {
            int64_t x_71749 = add64(low_71747, high_71748);
            int64_t mid_71750 = sdiv64(x_71749, (int64_t) 2);
            bool x_71751 = sle64((int64_t) 0, mid_71750);
            bool y_71752 = slt64(mid_71750, n_62256);
            bool bounds_check_71753 = x_71751 && y_71752;
            bool index_certs_71754;
            
            if (!bounds_check_71753) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_71750,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t mid_id_71755 = ((int64_t *) mem_67849.mem)[mid_71750];
            bool cond_71756 = slt64(mid_id_71755, (int64_t) 0);
            int64_t mid_idx_71757;
            
            if (cond_71756) {
                mid_idx_71757 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_71757 = mid_id_71755;
            }
            
            bool cond_71758 = sle64(defunc_0_g_res_71373, mid_idx_71757);
            int64_t loopres_71759;
            int64_t loopres_71760;
            
            if (cond_71758) {
                int64_t loopres_t_res_71761 = sub64(mid_71750, (int64_t) 1);
                
                loopres_71759 = low_71747;
                loopres_71760 = loopres_t_res_71761;
            } else {
                int64_t loopres_f_res_71762 = add64((int64_t) 1, mid_71750);
                
                loopres_71759 = loopres_f_res_71762;
                loopres_71760 = high_71748;
            }
            
            bool loop_cond_71763 = sle64(loopres_71759, loopres_71760);
            bool loop_while_tmp_71831 = loop_cond_71763;
            int64_t low_tmp_71832 = loopres_71759;
            int64_t high_tmp_71833 = loopres_71760;
            
            loop_while_71746 = loop_while_tmp_71831;
            low_71747 = low_tmp_71832;
            high_71748 = high_tmp_71833;
        }
        init_idx_71374 = loop_while_71746;
        init_idx_71375 = low_71747;
        init_idx_71376 = high_71748;
        
        bool idx_71395;
        int64_t idx_71396;
        int64_t idx_71397;
        int64_t idx_71398;
        bool loop_while_71764;
        int64_t l_idx_71765;
        int64_t r_idx_71766;
        int64_t span_71767;
        
        loop_while_71764 = loop_cond_62281;
        l_idx_71765 = init_idx_71375;
        r_idx_71766 = init_idx_71375;
        span_71767 = (int64_t) 1;
        while (loop_while_71764) {
            int64_t max_arg_71768 = sub64(l_idx_71765, (int64_t) 1);
            int64_t max_res_71769 = smax64((int64_t) 0, max_arg_71768);
            int64_t min_arg_71770 = add64((int64_t) 1, r_idx_71766);
            int64_t min_res_71771 = smin64(min_arg_65451, min_arg_71770);
            bool x_71772 = sle64((int64_t) 0, max_res_71769);
            bool y_71773 = slt64(max_res_71769, n_62256);
            bool bounds_check_71774 = x_71772 && y_71773;
            bool index_certs_71775;
            
            if (!bounds_check_71774) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_71769,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_71776 = ((int64_t *) mem_67849.mem)[max_res_71769];
            int64_t abs_arg_71777 = sub64(x_71776, defunc_0_g_res_71373);
            int64_t abs_res_71778 = abs64(abs_arg_71777);
            bool x_71779 = sle64((int64_t) 0, min_res_71771);
            bool y_71780 = slt64(min_res_71771, n_62256);
            bool bounds_check_71781 = x_71779 && y_71780;
            bool index_certs_71782;
            
            if (!bounds_check_71781) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_71771,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_71783 = ((int64_t *) mem_67849.mem)[min_res_71771];
            int64_t abs_arg_71784 = sub64(x_71783, defunc_0_g_res_71373);
            int64_t abs_res_71785 = abs64(abs_arg_71784);
            bool cond_71786 = max_res_71769 == l_idx_71765;
            int64_t loopres_71787;
            int64_t loopres_71788;
            int64_t loopres_71789;
            
            if (cond_71786) {
                loopres_71787 = l_idx_71765;
                loopres_71788 = r_idx_71766;
                loopres_71789 = min_res_62276;
            } else {
                bool cond_71790 = slt64(abs_res_71778, abs_res_71785);
                bool cond_f_res_71791 = min_res_71771 == r_idx_71766;
                bool x_71792 = !cond_71790;
                bool y_71793 = cond_f_res_71791 && x_71792;
                bool cond_71794 = cond_71790 || y_71793;
                int64_t loopres_f_res_71795;
                
                if (cond_71794) {
                    loopres_f_res_71795 = max_res_71769;
                } else {
                    loopres_f_res_71795 = l_idx_71765;
                }
                
                int64_t loopres_f_res_71796;
                
                if (cond_71794) {
                    loopres_f_res_71796 = r_idx_71766;
                } else {
                    loopres_f_res_71796 = min_res_71771;
                }
                
                int64_t loopres_f_res_71797;
                
                if (cond_71794) {
                    int64_t loopres_f_res_t_res_71798 = add64((int64_t) 1,
                                                              span_71767);
                    
                    loopres_f_res_71797 = loopres_f_res_t_res_71798;
                } else {
                    int64_t loopres_f_res_f_res_71799 = add64((int64_t) 1,
                                                              span_71767);
                    
                    loopres_f_res_71797 = loopres_f_res_f_res_71799;
                }
                loopres_71787 = loopres_f_res_71795;
                loopres_71788 = loopres_f_res_71796;
                loopres_71789 = loopres_f_res_71797;
            }
            
            bool loop_cond_71800 = slt64(loopres_71789, min_res_62276);
            bool loop_while_tmp_71834 = loop_cond_71800;
            int64_t l_idx_tmp_71835 = loopres_71787;
            int64_t r_idx_tmp_71836 = loopres_71788;
            int64_t span_tmp_71837 = loopres_71789;
            
            loop_while_71764 = loop_while_tmp_71834;
            l_idx_71765 = l_idx_tmp_71835;
            r_idx_71766 = r_idx_tmp_71836;
            span_71767 = span_tmp_71837;
        }
        idx_71395 = loop_while_71764;
        idx_71396 = l_idx_71765;
        idx_71397 = r_idx_71766;
        idx_71398 = span_71767;
        
        int64_t min_res_71436 = smin64(min_arg_65452, idx_71396);
        int64_t max_res_71437 = smax64((int64_t) 0, min_res_71436);
        int64_t x_71438 = add64(min_res_65453, max_res_71437);
        int64_t r_71439 = sub64(x_71438, (int64_t) 1);
        bool x_71440 = sle64((int64_t) 0, r_71439);
        bool y_71441 = slt64(r_71439, n_62256);
        bool bounds_check_71442 = x_71440 && y_71441;
        bool index_certs_71443;
        
        if (!bounds_check_71442) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_71439,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_71444 = ((int64_t *) mem_67843.mem)[r_71439];
        int64_t abs_arg_71445 = sub64(x_71444, min_res_71372);
        int64_t abs_res_71446 = abs64(abs_arg_71445);
        bool x_71447 = sle64((int64_t) 0, max_res_71437);
        bool y_71448 = slt64(max_res_71437, n_62256);
        bool bounds_check_71449 = x_71447 && y_71448;
        bool index_certs_71450;
        
        if (!bounds_check_71449) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_71437,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_71451 = ((int64_t *) mem_67843.mem)[max_res_71437];
        int64_t abs_arg_71452 = sub64(x_71451, min_res_71372);
        int64_t abs_res_71453 = abs64(abs_arg_71452);
        int64_t max_res_71454 = smax64(abs_res_71446, abs_res_71453);
        float defunc_0_f_res_71455 = sitofp_i64_f32(max_res_71454);
        float defunc_1_f_res_71456 = max_res_65457 + defunc_0_f_res_71455;
        float defunc_0_f_res_71457 = sitofp_i64_f32(min_res_71372);
        float defunc_2_reduce_res_71459;
        int64_t flat_tid_65304 = (int64_t) 0;
        int32_t num_tasks_71838;
        struct futhark_mc_task_74060 futhark_mc_task_74060;
        
        futhark_mc_task_74060.ctx = ctx;
        futhark_mc_task_74060.free_last_res_65439 = last_res_65439;
        futhark_mc_task_74060.free_mem_67846 = mem_67846.mem;
        futhark_mc_task_74060.free_mem_67852 = mem_67852.mem;
        futhark_mc_task_74060.free_max_res_71437 = max_res_71437;
        futhark_mc_task_74060.free_defunc_1_f_res_71456 = defunc_1_f_res_71456;
        futhark_mc_task_74060.free_defunc_0_f_res_71457 = defunc_0_f_res_71457;
        futhark_mc_task_74060.retval_defunc_2_reduce_res_71459 =
            &defunc_2_reduce_res_71459;
        futhark_mc_task_74060.retval_mem_71458 = mem_71458;
        
        struct scheduler_segop futhark_mc_task_74060_task;
        
        futhark_mc_task_74060_task.args = &futhark_mc_task_74060;
        futhark_mc_task_74060_task.top_level_fn = futhark_mc_segred_task_74061;
        futhark_mc_task_74060_task.name = "futhark_mc_segred_task_74061";
        futhark_mc_task_74060_task.iterations = q_62258;
        futhark_mc_task_74060_task.task_time =
            &ctx->futhark_mc_segred_task_74061_total_time;
        futhark_mc_task_74060_task.task_iter =
            &ctx->futhark_mc_segred_task_74061_total_iter;
        futhark_mc_task_74060_task.sched = STATIC;
        futhark_mc_task_74060_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74061_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74060_task);
        
        if (futhark_mc_segred_task_74061_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_71479 = 1.0F / defunc_2_reduce_res_71459;
        float defunc_2_reduce_res_71480;
        int64_t flat_tid_65306 = (int64_t) 0;
        int32_t num_tasks_71847;
        struct futhark_mc_task_74065 futhark_mc_task_74065;
        
        futhark_mc_task_74065.ctx = ctx;
        futhark_mc_task_74065.free_last_res_65439 = last_res_65439;
        futhark_mc_task_74065.free_mem_67840 = mem_67840.mem;
        futhark_mc_task_74065.free_max_res_71437 = max_res_71437;
        futhark_mc_task_74065.free_mem_71458 = mem_71458;
        futhark_mc_task_74065.free_a0_71479 = a0_71479;
        futhark_mc_task_74065.retval_defunc_2_reduce_res_71480 =
            &defunc_2_reduce_res_71480;
        
        struct scheduler_segop futhark_mc_task_74065_task;
        
        futhark_mc_task_74065_task.args = &futhark_mc_task_74065;
        futhark_mc_task_74065_task.top_level_fn = futhark_mc_segred_task_74066;
        futhark_mc_task_74065_task.name = "futhark_mc_segred_task_74066";
        futhark_mc_task_74065_task.iterations = q_62258;
        futhark_mc_task_74065_task.task_time =
            &ctx->futhark_mc_segred_task_74066_total_time;
        futhark_mc_task_74065_task.task_iter =
            &ctx->futhark_mc_segred_task_74066_total_iter;
        futhark_mc_task_74065_task.sched = STATIC;
        futhark_mc_task_74065_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74066_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74065_task);
        
        if (futhark_mc_segred_task_74066_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_67873.mem)[gtid_65303] = defunc_2_reduce_res_71480;
    }
    
  cleanup:
    { }
    free(mem_71458);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74058_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74058_end -
                 futhark_mc_segmap_parloop_74058_start;
        
        ctx->futhark_mc_segmap_parloop_74058_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74058_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74058_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74056(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65302 = tid;
    int num_tasks_71646 = info.nsubtasks;
    struct futhark_mc_task_74051 *futhark_mc_task_74051 =
                                 (struct futhark_mc_task_74051 *) args;
    struct futhark_context *ctx = futhark_mc_task_74051->ctx;
    uint64_t futhark_mc_segmap_nested_task_74056_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74056_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74051->free_n_62256;
    int64_t q_62258 = futhark_mc_task_74051->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_74051->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74051->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74051->free_i_62270;
    bool x_62271 = futhark_mc_task_74051->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_74051->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_74051->free_loop_cond_62281;
    int64_t last_res_65439 = futhark_mc_task_74051->free_last_res_65439;
    int64_t min_arg_65451 = futhark_mc_task_74051->free_min_arg_65451;
    int64_t min_arg_65452 = futhark_mc_task_74051->free_min_arg_65452;
    int64_t min_res_65453 = futhark_mc_task_74051->free_min_res_65453;
    float max_res_65457 = futhark_mc_task_74051->free_max_res_65457;
    struct memblock mem_67840 = {.desc ="mem_67840", .mem =
                                 futhark_mc_task_74051->free_mem_67840, .size =
                                 0, .references =NULL};
    struct memblock mem_67843 = {.desc ="mem_67843", .mem =
                                 futhark_mc_task_74051->free_mem_67843, .size =
                                 0, .references =NULL};
    struct memblock mem_67846 = {.desc ="mem_67846", .mem =
                                 futhark_mc_task_74051->free_mem_67846, .size =
                                 0, .references =NULL};
    struct memblock mem_67849 = {.desc ="mem_67849", .mem =
                                 futhark_mc_task_74051->free_mem_67849, .size =
                                 0, .references =NULL};
    int64_t bytes_67850 = futhark_mc_task_74051->free_bytes_67850;
    struct memblock mem_67852 = {.desc ="mem_67852", .mem =
                                 futhark_mc_task_74051->free_mem_67852, .size =
                                 0, .references =NULL};
    struct memblock mem_67873 = {.desc ="mem_67873", .mem =
                                 futhark_mc_task_74051->free_mem_67873, .size =
                                 0, .references =NULL};
    int64_t iter_71745;
    struct futhark_mc_segmap_parloop_struct_74057
    futhark_mc_segmap_parloop_struct_74057;
    
    futhark_mc_segmap_parloop_struct_74057.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74057.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74057.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74057.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74057.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74057.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74057.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_74057.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_74057.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_74057.free_last_res_65439 = last_res_65439;
    futhark_mc_segmap_parloop_struct_74057.free_min_arg_65451 = min_arg_65451;
    futhark_mc_segmap_parloop_struct_74057.free_min_arg_65452 = min_arg_65452;
    futhark_mc_segmap_parloop_struct_74057.free_min_res_65453 = min_res_65453;
    futhark_mc_segmap_parloop_struct_74057.free_max_res_65457 = max_res_65457;
    futhark_mc_segmap_parloop_struct_74057.free_mem_67840 = mem_67840.mem;
    futhark_mc_segmap_parloop_struct_74057.free_mem_67843 = mem_67843.mem;
    futhark_mc_segmap_parloop_struct_74057.free_mem_67846 = mem_67846.mem;
    futhark_mc_segmap_parloop_struct_74057.free_mem_67849 = mem_67849.mem;
    futhark_mc_segmap_parloop_struct_74057.free_bytes_67850 = bytes_67850;
    futhark_mc_segmap_parloop_struct_74057.free_mem_67852 = mem_67852.mem;
    futhark_mc_segmap_parloop_struct_74057.free_mem_67873 = mem_67873.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74058_task;
    
    futhark_mc_segmap_parloop_74058_task.name =
        "futhark_mc_segmap_parloop_74058";
    futhark_mc_segmap_parloop_74058_task.fn = futhark_mc_segmap_parloop_74058;
    futhark_mc_segmap_parloop_74058_task.args =
        &futhark_mc_segmap_parloop_struct_74057;
    futhark_mc_segmap_parloop_74058_task.iterations = iterations;
    futhark_mc_segmap_parloop_74058_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74058_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74058_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74058_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74058_task);
    
    if (futhark_mc_segmap_parloop_74058_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74058_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74058_total_end -
                 futhark_mc_segmap_parloop_74058_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74058_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74058_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74058_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74056_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74056_end -
                 futhark_mc_segmap_nested_task_74056_start;
        
        ctx->futhark_mc_segmap_nested_task_74056_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74056_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74056_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74024(void *args, int64_t start,
                                           int64_t end, int flat_tid_65290,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74023
    *futhark_mc_segmap_parloop_struct_74023 =
    (struct futhark_mc_segmap_parloop_struct_74023 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74023->ctx;
    uint64_t futhark_mc_segmap_parloop_74024_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74024_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_segmap_parloop_struct_74023->free_m_62255;
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74023->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74023->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74023->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74023->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74023->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_74023->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_74023->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_74023->free_loop_cond_62281;
    float i64_res_62282 =
          futhark_mc_segmap_parloop_struct_74023->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_74023->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67835 =
            futhark_mc_segmap_parloop_struct_74023->free_bytes_67835;
    int64_t bytes_67838 =
            futhark_mc_segmap_parloop_struct_74023->free_bytes_67838;
    int64_t bytes_67850 =
            futhark_mc_segmap_parloop_struct_74023->free_bytes_67850;
    int64_t bytes_67871 =
            futhark_mc_segmap_parloop_struct_74023->free_bytes_67871;
    struct memblock mem_67997 = {.desc ="mem_67997", .mem =
                                 futhark_mc_segmap_parloop_struct_74023->free_mem_67997,
                                 .size =0, .references =NULL};
    size_t mem_67837_cached_sizze_74025 = 0;
    char *mem_67837 = NULL;
    size_t mem_67840_cached_sizze_74026 = 0;
    char *mem_67840 = NULL;
    size_t mem_67843_cached_sizze_74027 = 0;
    char *mem_67843 = NULL;
    size_t mem_67846_cached_sizze_74028 = 0;
    char *mem_67846 = NULL;
    size_t mem_67849_cached_sizze_74029 = 0;
    char *mem_67849 = NULL;
    size_t mem_67852_cached_sizze_74030 = 0;
    char *mem_67852 = NULL;
    size_t mem_67873_cached_sizze_74031 = 0;
    char *mem_67873 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71352 = start;
    
    if (mem_67837_cached_sizze_74025 < (size_t) bytes_67835) {
        mem_67837 = realloc(mem_67837, bytes_67835);
        mem_67837_cached_sizze_74025 = bytes_67835;
    }
    if (mem_67840_cached_sizze_74026 < (size_t) bytes_67838) {
        mem_67840 = realloc(mem_67840, bytes_67838);
        mem_67840_cached_sizze_74026 = bytes_67838;
    }
    if (mem_67843_cached_sizze_74027 < (size_t) bytes_67835) {
        mem_67843 = realloc(mem_67843, bytes_67835);
        mem_67843_cached_sizze_74027 = bytes_67835;
    }
    if (mem_67846_cached_sizze_74028 < (size_t) bytes_67838) {
        mem_67846 = realloc(mem_67846, bytes_67838);
        mem_67846_cached_sizze_74028 = bytes_67838;
    }
    if (mem_67849_cached_sizze_74029 < (size_t) bytes_67835) {
        mem_67849 = realloc(mem_67849, bytes_67835);
        mem_67849_cached_sizze_74029 = bytes_67835;
    }
    if (mem_67852_cached_sizze_74030 < (size_t) bytes_67850) {
        mem_67852 = realloc(mem_67852, bytes_67850);
        mem_67852_cached_sizze_74030 = bytes_67850;
    }
    if (mem_67873_cached_sizze_74031 < (size_t) bytes_67871) {
        mem_67873 = realloc(mem_67873, bytes_67871);
        mem_67873_cached_sizze_74031 = bytes_67871;
    }
    for (; iter_71352 < end; iter_71352++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_71614 = m_62255;
        int64_t gtid_65291 = iter_71352;
        int64_t remnant_71615 = iter_71352 - gtid_65291;
        int64_t flat_tid_65292 = (int64_t) 0;
        int32_t num_tasks_71616;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_74032 futhark_mc_task_74032;
        
        futhark_mc_task_74032.ctx = ctx;
        futhark_mc_task_74032.free_n_62256 = n_62256;
        futhark_mc_task_74032.free_gtid_65291 = gtid_65291;
        futhark_mc_task_74032.free_Y_mem_67388 = Y_mem_67388.mem;
        futhark_mc_task_74032.free_mem_67837 = mem_67837;
        
        struct scheduler_segop futhark_mc_task_74032_task;
        
        futhark_mc_task_74032_task.args = &futhark_mc_task_74032;
        futhark_mc_task_74032_task.top_level_fn = futhark_mc_segscan_task_74033;
        futhark_mc_task_74032_task.name = "futhark_mc_segscan_task_74033";
        futhark_mc_task_74032_task.iterations = n_62256;
        futhark_mc_task_74032_task.task_time =
            &ctx->futhark_mc_segscan_task_74033_total_time;
        futhark_mc_task_74032_task.task_iter =
            &ctx->futhark_mc_segscan_task_74033_total_iter;
        futhark_mc_task_74032_task.sched = STATIC;
        futhark_mc_task_74032_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_74033_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74032_task);
        
        if (futhark_mc_segscan_task_74033_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_65439 = ((int64_t *) mem_67837)[i_62270];
        
        for (int64_t i_71630 = 0; i_71630 < n_62256; i_71630++) {
            ((float *) mem_67840)[i_71630] = 0.0F;
        }
        for (int64_t i_71631 = 0; i_71631 < n_62256; i_71631++) {
            ((int64_t *) mem_67843)[i_71631] = (int64_t) -1;
        }
        
        int64_t flat_tid_65294 = (int64_t) 0;
        int32_t num_tasks_71632;
        struct futhark_mc_task_74039 futhark_mc_task_74039;
        
        futhark_mc_task_74039.ctx = ctx;
        futhark_mc_task_74039.free_n_62256 = n_62256;
        futhark_mc_task_74039.free_gtid_65291 = gtid_65291;
        futhark_mc_task_74039.free_Y_mem_67388 = Y_mem_67388.mem;
        futhark_mc_task_74039.free_mem_67837 = mem_67837;
        futhark_mc_task_74039.free_mem_67840 = mem_67840;
        futhark_mc_task_74039.free_mem_67843 = mem_67843;
        
        struct scheduler_segop futhark_mc_task_74039_task;
        
        futhark_mc_task_74039_task.args = &futhark_mc_task_74039;
        futhark_mc_task_74039_task.top_level_fn = futhark_mc_segmap_task_74040;
        futhark_mc_task_74039_task.name = "futhark_mc_segmap_task_74040";
        futhark_mc_task_74039_task.iterations = n_62256;
        futhark_mc_task_74039_task.task_time =
            &ctx->futhark_mc_segmap_task_74040_total_time;
        futhark_mc_task_74039_task.task_iter =
            &ctx->futhark_mc_segmap_task_74040_total_iter;
        futhark_mc_task_74039_task.sched = STATIC;
        futhark_mc_task_74039_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74040_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74039_task);
        
        if (futhark_mc_segmap_task_74040_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_65451 = sub64(last_res_65439, (int64_t) 1);
        int64_t min_arg_65452 = sub64(last_res_65439, min_res_62276);
        int64_t min_res_65453 = smin64(q_62258, last_res_65439);
        float i64_res_65454 = sitofp_i64_f32(last_res_65439);
        float x_65455 = i64_res_62282 - i64_res_65454;
        float max_arg_65456 = x_65455 / 2.0F;
        float max_res_65457 = fmax32(0.0F, max_arg_65456);
        int64_t flat_tid_65296 = (int64_t) 0;
        int32_t num_tasks_71638;
        struct futhark_mc_task_74043 futhark_mc_task_74043;
        
        futhark_mc_task_74043.ctx = ctx;
        futhark_mc_task_74043.free_n_62256 = n_62256;
        futhark_mc_task_74043.free_mem_67843 = mem_67843;
        futhark_mc_task_74043.free_mem_67846 = mem_67846;
        futhark_mc_task_74043.free_mem_67849 = mem_67849;
        
        struct scheduler_segop futhark_mc_task_74043_task;
        
        futhark_mc_task_74043_task.args = &futhark_mc_task_74043;
        futhark_mc_task_74043_task.top_level_fn = futhark_mc_segmap_task_74044;
        futhark_mc_task_74043_task.name = "futhark_mc_segmap_task_74044";
        futhark_mc_task_74043_task.iterations = n_62256;
        futhark_mc_task_74043_task.task_time =
            &ctx->futhark_mc_segmap_task_74044_total_time;
        futhark_mc_task_74043_task.task_iter =
            &ctx->futhark_mc_segmap_task_74044_total_iter;
        futhark_mc_task_74043_task.sched = STATIC;
        futhark_mc_task_74043_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74044_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74043_task);
        
        if (futhark_mc_segmap_task_74044_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_65298 = (int64_t) 0;
        int32_t num_tasks_71642;
        struct futhark_mc_task_74047 futhark_mc_task_74047;
        
        futhark_mc_task_74047.ctx = ctx;
        futhark_mc_task_74047.free_q_62258 = q_62258;
        futhark_mc_task_74047.free_last_res_65439 = last_res_65439;
        futhark_mc_task_74047.free_mem_67852 = mem_67852;
        
        struct scheduler_segop futhark_mc_task_74047_task;
        
        futhark_mc_task_74047_task.args = &futhark_mc_task_74047;
        futhark_mc_task_74047_task.top_level_fn = futhark_mc_segmap_task_74048;
        futhark_mc_task_74047_task.name = "futhark_mc_segmap_task_74048";
        futhark_mc_task_74047_task.iterations = q_62258;
        futhark_mc_task_74047_task.task_time =
            &ctx->futhark_mc_segmap_task_74048_total_time;
        futhark_mc_task_74047_task.task_iter =
            &ctx->futhark_mc_segmap_task_74048_total_iter;
        futhark_mc_task_74047_task.sched = STATIC;
        futhark_mc_task_74047_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74048_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74047_task);
        
        if (futhark_mc_segmap_task_74048_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_65300 = (int64_t) 0;
        int32_t num_tasks_71646;
        int64_t flat_tid_65302 = (int64_t) 0;
        struct futhark_mc_task_74051 futhark_mc_task_74051;
        
        futhark_mc_task_74051.ctx = ctx;
        futhark_mc_task_74051.free_n_62256 = n_62256;
        futhark_mc_task_74051.free_q_62258 = q_62258;
        futhark_mc_task_74051.free_jump_62260 = jump_62260;
        futhark_mc_task_74051.free_n_m_62264 = n_m_62264;
        futhark_mc_task_74051.free_i_62270 = i_62270;
        futhark_mc_task_74051.free_x_62271 = x_62271;
        futhark_mc_task_74051.free_min_res_62276 = min_res_62276;
        futhark_mc_task_74051.free_loop_cond_62281 = loop_cond_62281;
        futhark_mc_task_74051.free_last_res_65439 = last_res_65439;
        futhark_mc_task_74051.free_min_arg_65451 = min_arg_65451;
        futhark_mc_task_74051.free_min_arg_65452 = min_arg_65452;
        futhark_mc_task_74051.free_min_res_65453 = min_res_65453;
        futhark_mc_task_74051.free_max_res_65457 = max_res_65457;
        futhark_mc_task_74051.free_mem_67840 = mem_67840;
        futhark_mc_task_74051.free_mem_67843 = mem_67843;
        futhark_mc_task_74051.free_mem_67846 = mem_67846;
        futhark_mc_task_74051.free_mem_67849 = mem_67849;
        futhark_mc_task_74051.free_bytes_67850 = bytes_67850;
        futhark_mc_task_74051.free_mem_67852 = mem_67852;
        futhark_mc_task_74051.free_mem_67873 = mem_67873;
        
        struct scheduler_segop futhark_mc_task_74051_task;
        
        futhark_mc_task_74051_task.args = &futhark_mc_task_74051;
        futhark_mc_task_74051_task.top_level_fn = futhark_mc_segmap_task_74052;
        futhark_mc_task_74051_task.name = "futhark_mc_segmap_task_74052";
        futhark_mc_task_74051_task.iterations = n_m_62264;
        futhark_mc_task_74051_task.task_time =
            &ctx->futhark_mc_segmap_task_74052_total_time;
        futhark_mc_task_74051_task.task_iter =
            &ctx->futhark_mc_segmap_task_74052_total_iter;
        futhark_mc_task_74051_task.sched = DYNAMIC;
        futhark_mc_task_74051_task.nested_fn =
            futhark_mc_segmap_nested_task_74056;
        
        int futhark_mc_segmap_task_74052_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74051_task);
        
        if (futhark_mc_segmap_task_74052_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_67997.mem + gtid_65291 * n_m_62264 * (int64_t) 4,
                mem_67873 + (int64_t) 0, n_m_62264 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_67837);
    free(mem_67840);
    free(mem_67843);
    free(mem_67846);
    free(mem_67849);
    free(mem_67852);
    free(mem_67873);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74024_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74024_end -
                 futhark_mc_segmap_parloop_74024_start;
        
        ctx->futhark_mc_segmap_parloop_74024_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74024_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74024_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74022(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65290 = tid;
    int num_tasks_71169 = info.nsubtasks;
    struct futhark_mc_task_74010 *futhark_mc_task_74010 =
                                 (struct futhark_mc_task_74010 *) args;
    struct futhark_context *ctx = futhark_mc_task_74010->ctx;
    uint64_t futhark_mc_segmap_nested_task_74022_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74022_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_task_74010->free_m_62255;
    int64_t n_62256 = futhark_mc_task_74010->free_n_62256;
    int64_t q_62258 = futhark_mc_task_74010->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_74010->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74010->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74010->free_i_62270;
    bool x_62271 = futhark_mc_task_74010->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_74010->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_74010->free_loop_cond_62281;
    float i64_res_62282 = futhark_mc_task_74010->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_74010->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67835 = futhark_mc_task_74010->free_bytes_67835;
    int64_t bytes_67838 = futhark_mc_task_74010->free_bytes_67838;
    int64_t bytes_67850 = futhark_mc_task_74010->free_bytes_67850;
    int64_t bytes_67871 = futhark_mc_task_74010->free_bytes_67871;
    struct memblock mem_67997 = {.desc ="mem_67997", .mem =
                                 futhark_mc_task_74010->free_mem_67997, .size =
                                 0, .references =NULL};
    int64_t iter_71352;
    struct futhark_mc_segmap_parloop_struct_74023
    futhark_mc_segmap_parloop_struct_74023;
    
    futhark_mc_segmap_parloop_struct_74023.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74023.free_m_62255 = m_62255;
    futhark_mc_segmap_parloop_struct_74023.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74023.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74023.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74023.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74023.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74023.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_74023.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_74023.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_74023.free_i64_res_62282 = i64_res_62282;
    futhark_mc_segmap_parloop_struct_74023.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_74023.free_bytes_67835 = bytes_67835;
    futhark_mc_segmap_parloop_struct_74023.free_bytes_67838 = bytes_67838;
    futhark_mc_segmap_parloop_struct_74023.free_bytes_67850 = bytes_67850;
    futhark_mc_segmap_parloop_struct_74023.free_bytes_67871 = bytes_67871;
    futhark_mc_segmap_parloop_struct_74023.free_mem_67997 = mem_67997.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74024_task;
    
    futhark_mc_segmap_parloop_74024_task.name =
        "futhark_mc_segmap_parloop_74024";
    futhark_mc_segmap_parloop_74024_task.fn = futhark_mc_segmap_parloop_74024;
    futhark_mc_segmap_parloop_74024_task.args =
        &futhark_mc_segmap_parloop_struct_74023;
    futhark_mc_segmap_parloop_74024_task.iterations = iterations;
    futhark_mc_segmap_parloop_74024_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74024_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74024_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74024_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74024_task);
    
    if (futhark_mc_segmap_parloop_74024_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74024_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74024_total_end -
                 futhark_mc_segmap_parloop_74024_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74024_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74024_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74024_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74022_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74022_end -
                 futhark_mc_segmap_nested_task_74022_start;
        
        ctx->futhark_mc_segmap_nested_task_74022_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74022_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74022_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74070 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67998;
    int64_t free_bytes_68001;
    int64_t free_bytes_68013;
    int64_t free_bytes_68052;
    char *free_mem_68211;
    char *free_mem_68215;
};
struct futhark_mc_segmap_parloop_struct_74072 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67998;
    int64_t free_bytes_68001;
    int64_t free_bytes_68013;
    int64_t free_bytes_68052;
    char *free_mem_68211;
    char *free_mem_68215;
};
static int futhark_mc_segmap_parloop_74073(void *args, int64_t start,
                                           int64_t end, int flat_tid_65712,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74072
    *futhark_mc_segmap_parloop_struct_74072 =
    (struct futhark_mc_segmap_parloop_struct_74072 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74072->ctx;
    uint64_t futhark_mc_segmap_parloop_74073_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74073_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_segmap_parloop_struct_74072->free_m_62255;
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74072->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74072->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74072->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74072->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74072->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_74072->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_74072->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_74072->free_loop_cond_62281;
    float i64_res_62282 =
          futhark_mc_segmap_parloop_struct_74072->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_74072->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67998 =
            futhark_mc_segmap_parloop_struct_74072->free_bytes_67998;
    int64_t bytes_68001 =
            futhark_mc_segmap_parloop_struct_74072->free_bytes_68001;
    int64_t bytes_68013 =
            futhark_mc_segmap_parloop_struct_74072->free_bytes_68013;
    int64_t bytes_68052 =
            futhark_mc_segmap_parloop_struct_74072->free_bytes_68052;
    struct memblock mem_68211 = {.desc ="mem_68211", .mem =
                                 futhark_mc_segmap_parloop_struct_74072->free_mem_68211,
                                 .size =0, .references =NULL};
    struct memblock mem_68215 = {.desc ="mem_68215", .mem =
                                 futhark_mc_segmap_parloop_struct_74072->free_mem_68215,
                                 .size =0, .references =NULL};
    size_t mem_68060_cached_sizze_74074 = 0;
    char *mem_68060 = NULL;
    size_t mem_68075_cached_sizze_74075 = 0;
    char *mem_68075 = NULL;
    size_t mem_68078_cached_sizze_74076 = 0;
    char *mem_68078 = NULL;
    size_t mem_68105_cached_sizze_74077 = 0;
    char *mem_68105 = NULL;
    size_t mem_68108_cached_sizze_74078 = 0;
    char *mem_68108 = NULL;
    size_t mem_68135_cached_sizze_74079 = 0;
    char *mem_68135 = NULL;
    size_t mem_68150_cached_sizze_74080 = 0;
    char *mem_68150 = NULL;
    size_t mem_68153_cached_sizze_74081 = 0;
    char *mem_68153 = NULL;
    size_t mem_68170_cached_sizze_74082 = 0;
    char *mem_68170 = NULL;
    size_t mem_68173_cached_sizze_74083 = 0;
    char *mem_68173 = NULL;
    int64_t iterations = end - start;
    int64_t iter_71857 = start;
    
    if (mem_68060_cached_sizze_74074 < (size_t) bytes_67998) {
        mem_68060 = realloc(mem_68060, bytes_67998);
        mem_68060_cached_sizze_74074 = bytes_67998;
    }
    if (mem_68075_cached_sizze_74075 < (size_t) bytes_68001) {
        mem_68075 = realloc(mem_68075, bytes_68001);
        mem_68075_cached_sizze_74075 = bytes_68001;
    }
    if (mem_68078_cached_sizze_74076 < (size_t) bytes_67998) {
        mem_68078 = realloc(mem_68078, bytes_67998);
        mem_68078_cached_sizze_74076 = bytes_67998;
    }
    if (mem_68105_cached_sizze_74077 < (size_t) bytes_68001) {
        mem_68105 = realloc(mem_68105, bytes_68001);
        mem_68105_cached_sizze_74077 = bytes_68001;
    }
    if (mem_68108_cached_sizze_74078 < (size_t) bytes_67998) {
        mem_68108 = realloc(mem_68108, bytes_67998);
        mem_68108_cached_sizze_74078 = bytes_67998;
    }
    if (mem_68135_cached_sizze_74079 < (size_t) bytes_68013) {
        mem_68135 = realloc(mem_68135, bytes_68013);
        mem_68135_cached_sizze_74079 = bytes_68013;
    }
    if (mem_68150_cached_sizze_74080 < (size_t) bytes_68052) {
        mem_68150 = realloc(mem_68150, bytes_68052);
        mem_68150_cached_sizze_74080 = bytes_68052;
    }
    if (mem_68153_cached_sizze_74081 < (size_t) bytes_68052) {
        mem_68153 = realloc(mem_68153, bytes_68052);
        mem_68153_cached_sizze_74081 = bytes_68052;
    }
    if (mem_68170_cached_sizze_74082 < (size_t) bytes_68013) {
        mem_68170 = realloc(mem_68170, bytes_68013);
        mem_68170_cached_sizze_74082 = bytes_68013;
    }
    if (mem_68173_cached_sizze_74083 < (size_t) bytes_68013) {
        mem_68173 = realloc(mem_68173, bytes_68013);
        mem_68173_cached_sizze_74083 = bytes_68013;
    }
    for (; iter_71857 < end; iter_71857++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72048 = m_62255;
        int64_t gtid_65713 = iter_71857;
        int64_t remnant_72049 = iter_71857 - gtid_65713;
        int64_t discard_67170;
        int64_t scanacc_71859 = (int64_t) 0;
        
        for (int64_t i_71858 = 0; i_71858 < n_62256; i_71858++) {
            float x_71861 = ((float *) Y_mem_67388.mem)[gtid_65713 * n_62256 +
                                                        i_71858];
            bool isnan_res_71862;
            
            isnan_res_71862 = futrts_isnan32(x_71861);
            
            bool defunc_0_p_res_71863 = !isnan_res_71862;
            int64_t defunc_0_f_res_71864 = btoi_bool_i64(defunc_0_p_res_71863);
            int64_t defunc_1_op_res_71865 = add64(defunc_0_f_res_71864,
                                                  scanacc_71859);
            
            ((int64_t *) mem_68060)[i_71858] = defunc_1_op_res_71865;
            
            int64_t scanacc_tmp_72050 = defunc_1_op_res_71865;
            
            scanacc_71859 = scanacc_tmp_72050;
        }
        discard_67170 = scanacc_71859;
        
        int64_t last_res_63120 = ((int64_t *) mem_68060)[i_62270];
        
        for (int64_t i_72052 = 0; i_72052 < n_62256; i_72052++) {
            ((float *) mem_68075)[i_72052] = 0.0F;
        }
        for (int64_t i_72053 = 0; i_72053 < n_62256; i_72053++) {
            ((int64_t *) mem_68078)[i_72053] = (int64_t) -1;
        }
        for (int64_t write_iter_71867 = 0; write_iter_71867 < n_62256;
             write_iter_71867++) {
            float write_iv_71870 = ((float *) Y_mem_67388.mem)[gtid_65713 *
                                                               n_62256 +
                                                               write_iter_71867];
            bool isnan_res_71871;
            
            isnan_res_71871 = futrts_isnan32(write_iv_71870);
            
            bool defunc_0_p_res_71872 = !isnan_res_71871;
            int64_t defunc_1_f_res_71873;
            
            if (defunc_0_p_res_71872) {
                int64_t write_iv_71874 =
                        ((int64_t *) mem_68060)[write_iter_71867];
                int64_t defunc_1_f_res_t_res_71875 = sub64(write_iv_71874,
                                                           (int64_t) 1);
                
                defunc_1_f_res_71873 = defunc_1_f_res_t_res_71875;
            } else {
                defunc_1_f_res_71873 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_71873) &&
                slt64(defunc_1_f_res_71873, n_62256)) {
                ((int64_t *) mem_68078)[defunc_1_f_res_71873] =
                    write_iter_71867;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_71873) &&
                slt64(defunc_1_f_res_71873, n_62256)) {
                memmove(mem_68075 + defunc_1_f_res_71873 * (int64_t) 4,
                        Y_mem_67388.mem + (gtid_65713 * n_62256 +
                                           write_iter_71867) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_63135 = sub64(last_res_63120, (int64_t) 1);
        int64_t min_arg_63136 = sub64(last_res_63120, min_res_62276);
        int64_t min_res_63137 = smin64(q_62258, last_res_63120);
        float i64_res_63138 = sitofp_i64_f32(last_res_63120);
        float x_63139 = i64_res_62282 - i64_res_63138;
        float max_arg_63140 = x_63139 / 2.0F;
        float max_res_63141 = fmax32(0.0F, max_arg_63140);
        
        for (int64_t i_71879 = 0; i_71879 < n_62256; i_71879++) {
            int64_t x_71882 = ((int64_t *) mem_68078)[i_71879];
            int64_t defunc_0_f_res_71883 = add64((int64_t) 1, x_71882);
            float defunc_0_f_res_71884 = sitofp_i64_f32(x_71882);
            
            ((float *) mem_68105)[i_71879] = defunc_0_f_res_71884;
            ((int64_t *) mem_68108)[i_71879] = defunc_0_f_res_71883;
        }
        for (int64_t i_71887 = 0; i_71887 < q_62258; i_71887++) {
            bool cond_71889 = sle64(last_res_63120, i_71887);
            float defunc_0_f_res_71890;
            
            if (cond_71889) {
                defunc_0_f_res_71890 = 0.0F;
            } else {
                defunc_0_f_res_71890 = 1.0F;
            }
            ((float *) mem_68135)[i_71887] = defunc_0_f_res_71890;
        }
        for (int64_t i_71892 = 0; i_71892 < n_m_62264; i_71892++) {
            int64_t min_arg_71895 = mul64(jump_62260, i_71892);
            int64_t min_res_71896 = smin64(i_62270, min_arg_71895);
            int64_t defunc_0_g_res_71897 = add64((int64_t) 1, min_res_71896);
            bool init_idx_71898;
            int64_t init_idx_71899;
            int64_t init_idx_71900;
            bool loop_while_71901;
            int64_t low_71902;
            int64_t high_71903;
            
            loop_while_71901 = x_62271;
            low_71902 = (int64_t) 0;
            high_71903 = i_62270;
            while (loop_while_71901) {
                int64_t x_71904 = add64(low_71902, high_71903);
                int64_t mid_71905 = sdiv64(x_71904, (int64_t) 2);
                bool x_71906 = sle64((int64_t) 0, mid_71905);
                bool y_71907 = slt64(mid_71905, n_62256);
                bool bounds_check_71908 = x_71906 && y_71907;
                bool index_certs_71909;
                
                if (!bounds_check_71908) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_71905,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t mid_id_71910 = ((int64_t *) mem_68108)[mid_71905];
                bool cond_71911 = slt64(mid_id_71910, (int64_t) 0);
                int64_t mid_idx_71912;
                
                if (cond_71911) {
                    mid_idx_71912 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_71912 = mid_id_71910;
                }
                
                bool cond_71913 = sle64(defunc_0_g_res_71897, mid_idx_71912);
                int64_t loopres_71914;
                int64_t loopres_71915;
                
                if (cond_71913) {
                    int64_t loopres_t_res_71916 = sub64(mid_71905, (int64_t) 1);
                    
                    loopres_71914 = low_71902;
                    loopres_71915 = loopres_t_res_71916;
                } else {
                    int64_t loopres_f_res_71917 = add64((int64_t) 1, mid_71905);
                    
                    loopres_71914 = loopres_f_res_71917;
                    loopres_71915 = high_71903;
                }
                
                bool loop_cond_71918 = sle64(loopres_71914, loopres_71915);
                bool loop_while_tmp_72061 = loop_cond_71918;
                int64_t low_tmp_72062 = loopres_71914;
                int64_t high_tmp_72063 = loopres_71915;
                
                loop_while_71901 = loop_while_tmp_72061;
                low_71902 = low_tmp_72062;
                high_71903 = high_tmp_72063;
            }
            init_idx_71898 = loop_while_71901;
            init_idx_71899 = low_71902;
            init_idx_71900 = high_71903;
            
            bool idx_71919;
            int64_t idx_71920;
            int64_t idx_71921;
            int64_t idx_71922;
            bool loop_while_71923;
            int64_t l_idx_71924;
            int64_t r_idx_71925;
            int64_t span_71926;
            
            loop_while_71923 = loop_cond_62281;
            l_idx_71924 = init_idx_71899;
            r_idx_71925 = init_idx_71899;
            span_71926 = (int64_t) 1;
            while (loop_while_71923) {
                int64_t max_arg_71927 = sub64(l_idx_71924, (int64_t) 1);
                int64_t max_res_71928 = smax64((int64_t) 0, max_arg_71927);
                int64_t min_arg_71929 = add64((int64_t) 1, r_idx_71925);
                int64_t min_res_71930 = smin64(min_arg_63135, min_arg_71929);
                bool x_71931 = sle64((int64_t) 0, max_res_71928);
                bool y_71932 = slt64(max_res_71928, n_62256);
                bool bounds_check_71933 = x_71931 && y_71932;
                bool index_certs_71934;
                
                if (!bounds_check_71933) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_71928,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t x_71935 = ((int64_t *) mem_68108)[max_res_71928];
                int64_t abs_arg_71936 = sub64(x_71935, defunc_0_g_res_71897);
                int64_t abs_res_71937 = abs64(abs_arg_71936);
                bool x_71938 = sle64((int64_t) 0, min_res_71930);
                bool y_71939 = slt64(min_res_71930, n_62256);
                bool bounds_check_71940 = x_71938 && y_71939;
                bool index_certs_71941;
                
                if (!bounds_check_71940) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_71930,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t x_71942 = ((int64_t *) mem_68108)[min_res_71930];
                int64_t abs_arg_71943 = sub64(x_71942, defunc_0_g_res_71897);
                int64_t abs_res_71944 = abs64(abs_arg_71943);
                bool cond_71945 = max_res_71928 == l_idx_71924;
                int64_t loopres_71946;
                int64_t loopres_71947;
                int64_t loopres_71948;
                
                if (cond_71945) {
                    loopres_71946 = l_idx_71924;
                    loopres_71947 = r_idx_71925;
                    loopres_71948 = min_res_62276;
                } else {
                    bool cond_71949 = slt64(abs_res_71937, abs_res_71944);
                    bool cond_f_res_71950 = min_res_71930 == r_idx_71925;
                    bool x_71951 = !cond_71949;
                    bool y_71952 = cond_f_res_71950 && x_71951;
                    bool cond_71953 = cond_71949 || y_71952;
                    int64_t loopres_f_res_71954;
                    
                    if (cond_71953) {
                        loopres_f_res_71954 = max_res_71928;
                    } else {
                        loopres_f_res_71954 = l_idx_71924;
                    }
                    
                    int64_t loopres_f_res_71955;
                    
                    if (cond_71953) {
                        loopres_f_res_71955 = r_idx_71925;
                    } else {
                        loopres_f_res_71955 = min_res_71930;
                    }
                    
                    int64_t loopres_f_res_71956;
                    
                    if (cond_71953) {
                        int64_t loopres_f_res_t_res_71957 = add64((int64_t) 1,
                                                                  span_71926);
                        
                        loopres_f_res_71956 = loopres_f_res_t_res_71957;
                    } else {
                        int64_t loopres_f_res_f_res_71958 = add64((int64_t) 1,
                                                                  span_71926);
                        
                        loopres_f_res_71956 = loopres_f_res_f_res_71958;
                    }
                    loopres_71946 = loopres_f_res_71954;
                    loopres_71947 = loopres_f_res_71955;
                    loopres_71948 = loopres_f_res_71956;
                }
                
                bool loop_cond_71959 = slt64(loopres_71948, min_res_62276);
                bool loop_while_tmp_72064 = loop_cond_71959;
                int64_t l_idx_tmp_72065 = loopres_71946;
                int64_t r_idx_tmp_72066 = loopres_71947;
                int64_t span_tmp_72067 = loopres_71948;
                
                loop_while_71923 = loop_while_tmp_72064;
                l_idx_71924 = l_idx_tmp_72065;
                r_idx_71925 = r_idx_tmp_72066;
                span_71926 = span_tmp_72067;
            }
            idx_71919 = loop_while_71923;
            idx_71920 = l_idx_71924;
            idx_71921 = r_idx_71925;
            idx_71922 = span_71926;
            
            int64_t min_res_71960 = smin64(min_arg_63136, idx_71920);
            int64_t max_res_71961 = smax64((int64_t) 0, min_res_71960);
            int64_t x_71962 = add64(min_res_63137, max_res_71961);
            int64_t r_71963 = sub64(x_71962, (int64_t) 1);
            bool x_71964 = sle64((int64_t) 0, r_71963);
            bool y_71965 = slt64(r_71963, n_62256);
            bool bounds_check_71966 = x_71964 && y_71965;
            bool index_certs_71967;
            
            if (!bounds_check_71966) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_71963,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_71968 = ((int64_t *) mem_68078)[r_71963];
            int64_t abs_arg_71969 = sub64(x_71968, min_res_71896);
            int64_t abs_res_71970 = abs64(abs_arg_71969);
            bool x_71971 = sle64((int64_t) 0, max_res_71961);
            bool y_71972 = slt64(max_res_71961, n_62256);
            bool bounds_check_71973 = x_71971 && y_71972;
            bool index_certs_71974;
            
            if (!bounds_check_71973) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_71961,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_71975 = ((int64_t *) mem_68078)[max_res_71961];
            int64_t abs_arg_71976 = sub64(x_71975, min_res_71896);
            int64_t abs_res_71977 = abs64(abs_arg_71976);
            int64_t max_res_71978 = smax64(abs_res_71970, abs_res_71977);
            float defunc_0_f_res_71979 = sitofp_i64_f32(max_res_71978);
            float defunc_1_f_res_71980 = max_res_63141 + defunc_0_f_res_71979;
            float defunc_0_f_res_71981 = sitofp_i64_f32(min_res_71896);
            float defunc_2_reduce_res_71984;
            float defunc_2_reduce_res_71985;
            float defunc_2_reduce_res_71986;
            float redout_71990;
            float redout_71991;
            float redout_71992;
            
            redout_71990 = 0.0F;
            redout_71991 = 0.0F;
            redout_71992 = 0.0F;
            for (int64_t i_71989 = 0; i_71989 < q_62258; i_71989++) {
                float x_71995 = ((float *) mem_68135)[i_71989];
                bool cond_71996 = sle64(last_res_63120, i_71989);
                float defunc_0_f_res_71997;
                
                if (cond_71996) {
                    defunc_0_f_res_71997 = 0.0F;
                } else {
                    int64_t i_71998 = add64(max_res_71961, i_71989);
                    float x_71999 = ((float *) mem_68105)[i_71998];
                    float defunc_0_f_res_f_res_72000 = 1.0F + x_71999;
                    
                    defunc_0_f_res_71997 = defunc_0_f_res_f_res_72000;
                }
                
                float x_j_72001 = defunc_0_f_res_71997 - defunc_0_f_res_71981;
                float abs_res_72002 = (float) fabs(x_j_72001);
                float tmp1_72003 = abs_res_72002 / defunc_1_f_res_71980;
                float x_72004 = tmp1_72003 * tmp1_72003;
                float y_72005 = tmp1_72003 * x_72004;
                float tmp2_72006 = 1.0F - y_72005;
                float x_72007 = tmp2_72006 * tmp2_72006;
                float tmp3_72008 = tmp2_72006 * x_72007;
                float tmp4_72009 = x_71995 * tmp3_72008;
                float defunc_1_f_res_72010 = x_j_72001 * tmp4_72009;
                float defunc_1_f_res_72011 = x_j_72001 * defunc_1_f_res_72010;
                float defunc_1_op_res_72012 = tmp4_72009 + redout_71990;
                float defunc_1_op_res_72013 = defunc_1_f_res_72010 +
                      redout_71991;
                float defunc_1_op_res_72014 = defunc_1_f_res_72011 +
                      redout_71992;
                
                ((float *) mem_68170)[i_71989] = defunc_1_f_res_72010;
                ((float *) mem_68173)[i_71989] = tmp4_72009;
                
                float redout_tmp_72068 = defunc_1_op_res_72012;
                float redout_tmp_72069 = defunc_1_op_res_72013;
                float redout_tmp_72070 = defunc_1_op_res_72014;
                
                redout_71990 = redout_tmp_72068;
                redout_71991 = redout_tmp_72069;
                redout_71992 = redout_tmp_72070;
            }
            defunc_2_reduce_res_71984 = redout_71990;
            defunc_2_reduce_res_71985 = redout_71991;
            defunc_2_reduce_res_71986 = redout_71992;
            
            float x_72017 = defunc_2_reduce_res_71984 *
                  defunc_2_reduce_res_71986;
            float y_72018 = defunc_2_reduce_res_71985 *
                  defunc_2_reduce_res_71985;
            float y_72019 = x_72017 - y_72018;
            float det1_72020 = 1.0F / y_72019;
            float a11_72021 = defunc_2_reduce_res_71986 * det1_72020;
            float negate_arg_72022 = defunc_2_reduce_res_71985 * det1_72020;
            float b11_72023 = 0.0F - negate_arg_72022;
            float c11_72024 = defunc_2_reduce_res_71984 * det1_72020;
            float defunc_2_reduce_res_72025;
            float defunc_2_reduce_res_72026;
            float redout_72028;
            float redout_72029;
            
            redout_72028 = 0.0F;
            redout_72029 = 0.0F;
            for (int64_t i_72027 = 0; i_72027 < q_62258; i_72027++) {
                float x_72030 = ((float *) mem_68173)[i_72027];
                float x_72031 = ((float *) mem_68170)[i_72027];
                bool cond_72032 = sle64(last_res_63120, i_72027);
                float defunc_0_f_res_72033;
                
                if (cond_72032) {
                    defunc_0_f_res_72033 = 0.0F;
                } else {
                    int64_t i_72034 = add64(max_res_71961, i_72027);
                    float x_72035 = ((float *) mem_68075)[i_72034];
                    
                    defunc_0_f_res_72033 = x_72035;
                }
                
                float x_72036 = a11_72021 * x_72030;
                float y_72037 = b11_72023 * x_72031;
                float x_72038 = x_72036 + y_72037;
                float defunc_9_fit_fun_res_72039 = defunc_0_f_res_72033 *
                      x_72038;
                float x_72040 = b11_72023 * x_72030;
                float y_72041 = c11_72024 * x_72031;
                float x_72042 = x_72040 + y_72041;
                float defunc_9_slope_fun_res_72043 = defunc_0_f_res_72033 *
                      x_72042;
                float defunc_1_op_res_72044 = defunc_9_fit_fun_res_72039 +
                      redout_72028;
                float defunc_1_op_res_72045 = defunc_9_slope_fun_res_72043 +
                      redout_72029;
                float redout_tmp_72073 = defunc_1_op_res_72044;
                float redout_tmp_72074 = defunc_1_op_res_72045;
                
                redout_72028 = redout_tmp_72073;
                redout_72029 = redout_tmp_72074;
            }
            defunc_2_reduce_res_72025 = redout_72028;
            defunc_2_reduce_res_72026 = redout_72029;
            ((float *) mem_68150)[i_71892] = defunc_2_reduce_res_72025;
            ((float *) mem_68153)[i_71892] = defunc_2_reduce_res_72026;
        }
        memmove(mem_68211.mem + gtid_65713 * n_m_62264 * (int64_t) 4,
                mem_68150 + (int64_t) 0, n_m_62264 * (int64_t) 4);
        memmove(mem_68215.mem + gtid_65713 * n_m_62264 * (int64_t) 4,
                mem_68153 + (int64_t) 0, n_m_62264 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_68060);
    free(mem_68075);
    free(mem_68078);
    free(mem_68105);
    free(mem_68108);
    free(mem_68135);
    free(mem_68150);
    free(mem_68153);
    free(mem_68170);
    free(mem_68173);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74073_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74073_end -
                 futhark_mc_segmap_parloop_74073_start;
        
        ctx->futhark_mc_segmap_parloop_74073_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74073_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74073_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74071(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65712 = tid;
    int num_tasks_71856 = info.nsubtasks;
    struct futhark_mc_task_74070 *futhark_mc_task_74070 =
                                 (struct futhark_mc_task_74070 *) args;
    struct futhark_context *ctx = futhark_mc_task_74070->ctx;
    uint64_t futhark_mc_segmap_task_74071_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74071_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_task_74070->free_m_62255;
    int64_t n_62256 = futhark_mc_task_74070->free_n_62256;
    int64_t q_62258 = futhark_mc_task_74070->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_74070->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74070->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74070->free_i_62270;
    bool x_62271 = futhark_mc_task_74070->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_74070->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_74070->free_loop_cond_62281;
    float i64_res_62282 = futhark_mc_task_74070->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_74070->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67998 = futhark_mc_task_74070->free_bytes_67998;
    int64_t bytes_68001 = futhark_mc_task_74070->free_bytes_68001;
    int64_t bytes_68013 = futhark_mc_task_74070->free_bytes_68013;
    int64_t bytes_68052 = futhark_mc_task_74070->free_bytes_68052;
    struct memblock mem_68211 = {.desc ="mem_68211", .mem =
                                 futhark_mc_task_74070->free_mem_68211, .size =
                                 0, .references =NULL};
    struct memblock mem_68215 = {.desc ="mem_68215", .mem =
                                 futhark_mc_task_74070->free_mem_68215, .size =
                                 0, .references =NULL};
    int64_t iter_71857;
    struct futhark_mc_segmap_parloop_struct_74072
    futhark_mc_segmap_parloop_struct_74072;
    
    futhark_mc_segmap_parloop_struct_74072.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74072.free_m_62255 = m_62255;
    futhark_mc_segmap_parloop_struct_74072.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74072.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74072.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74072.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74072.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74072.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_74072.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_74072.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_74072.free_i64_res_62282 = i64_res_62282;
    futhark_mc_segmap_parloop_struct_74072.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_74072.free_bytes_67998 = bytes_67998;
    futhark_mc_segmap_parloop_struct_74072.free_bytes_68001 = bytes_68001;
    futhark_mc_segmap_parloop_struct_74072.free_bytes_68013 = bytes_68013;
    futhark_mc_segmap_parloop_struct_74072.free_bytes_68052 = bytes_68052;
    futhark_mc_segmap_parloop_struct_74072.free_mem_68211 = mem_68211.mem;
    futhark_mc_segmap_parloop_struct_74072.free_mem_68215 = mem_68215.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74073_task;
    
    futhark_mc_segmap_parloop_74073_task.name =
        "futhark_mc_segmap_parloop_74073";
    futhark_mc_segmap_parloop_74073_task.fn = futhark_mc_segmap_parloop_74073;
    futhark_mc_segmap_parloop_74073_task.args =
        &futhark_mc_segmap_parloop_struct_74072;
    futhark_mc_segmap_parloop_74073_task.iterations = iterations;
    futhark_mc_segmap_parloop_74073_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74073_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74073_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74073_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74073_task);
    
    if (futhark_mc_segmap_parloop_74073_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74073_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74073_total_end -
                 futhark_mc_segmap_parloop_74073_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74073_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74073_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74073_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74071_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74071_end -
                 futhark_mc_segmap_task_74071_start;
        
        ctx->futhark_mc_segmap_task_74071_runs[tid]++;
        ctx->futhark_mc_segmap_task_74071_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74071_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74085 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_67998;
    int64_t free_bytes_68001;
    int64_t free_bytes_68013;
    int64_t free_bytes_68052;
    char *free_mem_68211;
    char *free_mem_68215;
};
struct futhark_mc_task_74095 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_65715;
    char *free_Y_mem_67388;
    char *free_mem_68000;
};
struct futhark_mc_scan_stage_1_parloop_struct_74098 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_65715;
    char *free_Y_mem_67388;
    char *free_mem_68000;
};
static int futhark_mc_scan_stage_1_parloop_74099(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_65716, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_74098
    *futhark_mc_scan_stage_1_parloop_struct_74098 =
    (struct futhark_mc_scan_stage_1_parloop_struct_74098 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_74098->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_74099_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_74099_start = get_wall_time();
    
    int64_t n_62256 =
            futhark_mc_scan_stage_1_parloop_struct_74098->free_n_62256;
    int64_t gtid_65715 =
            futhark_mc_scan_stage_1_parloop_struct_74098->free_gtid_65715;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_74098->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_68000 = {.desc ="mem_68000", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_74098->free_mem_68000,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72400 = start;
    int64_t x_72076;
    int64_t x_72077;
    
    x_72076 = (int64_t) 0;
    for (; iter_72400 < end; iter_72400++) {
        int64_t gtid_65717 = iter_72400;
        
        // stage 1 scan body
        {
            float x_72079 = ((float *) Y_mem_67388.mem)[gtid_65715 * n_62256 +
                                                        gtid_65717];
            bool isnan_res_72080;
            
            isnan_res_72080 = futrts_isnan32(x_72079);
            
            bool defunc_0_p_res_72081 = !isnan_res_72080;
            int64_t defunc_0_f_res_72082 = btoi_bool_i64(defunc_0_p_res_72081);
            
            // write mapped values results to memory
            { }
            x_72076 = x_72076;
            // Read next values
            {
                x_72077 = defunc_0_f_res_72082;
            }
            
            int64_t defunc_1_op_res_72078 = add64(x_72076, x_72077);
            
            ((int64_t *) mem_68000.mem)[gtid_65717] = defunc_1_op_res_72078;
            x_72076 = defunc_1_op_res_72078;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_74099_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_74099_end -
                 futhark_mc_scan_stage_1_parloop_74099_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_74099_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_74099_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_74099_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_74100 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_65715;
    char *free_Y_mem_67388;
    char *free_mem_68000;
};
static int futhark_mc_scan_stage_3_parloop_74101(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_65716, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_74100
    *futhark_mc_scan_stage_3_parloop_struct_74100 =
    (struct futhark_mc_scan_stage_3_parloop_struct_74100 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_74100->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_74101_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_74101_start = get_wall_time();
    
    int64_t n_62256 =
            futhark_mc_scan_stage_3_parloop_struct_74100->free_n_62256;
    int64_t gtid_65715 =
            futhark_mc_scan_stage_3_parloop_struct_74100->free_gtid_65715;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_74100->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_68000 = {.desc ="mem_68000", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_74100->free_mem_68000,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72412 = start;
    int64_t x_72409;
    int64_t x_72410;
    
    if (iter_72412 == (int64_t) 0) {
        x_72409 = (int64_t) 0;
    } else {
        x_72409 = ((int64_t *) mem_68000.mem)[iter_72412 - (int64_t) 1];
    }
    for (; iter_72412 < end; iter_72412++) {
        int64_t gtid_65717 = iter_72412;
        
        // stage 3 scan body
        {
            float x_72079 = ((float *) Y_mem_67388.mem)[gtid_65715 * n_62256 +
                                                        gtid_65717];
            bool isnan_res_72080;
            
            isnan_res_72080 = futrts_isnan32(x_72079);
            
            bool defunc_0_p_res_72081 = !isnan_res_72080;
            int64_t defunc_0_f_res_72082 = btoi_bool_i64(defunc_0_p_res_72081);
            
            x_72409 = x_72409;
            x_72410 = defunc_0_f_res_72082;
            
            int64_t defunc_1_op_res_72411 = add64(x_72409, x_72410);
            
            ((int64_t *) mem_68000.mem)[gtid_65717] = defunc_1_op_res_72411;
            x_72409 = defunc_1_op_res_72411;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_74101_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_74101_end -
                 futhark_mc_scan_stage_3_parloop_74101_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_74101_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_74101_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_74101_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_74096(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65716 = tid;
    int num_tasks_72399 = info.nsubtasks;
    struct futhark_mc_task_74095 *futhark_mc_task_74095 =
                                 (struct futhark_mc_task_74095 *) args;
    struct futhark_context *ctx = futhark_mc_task_74095->ctx;
    uint64_t futhark_mc_segscan_task_74096_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_74096_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74095->free_n_62256;
    int64_t gtid_65715 = futhark_mc_task_74095->free_gtid_65715;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_74095->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_68000 = {.desc ="mem_68000", .mem =
                                 futhark_mc_task_74095->free_mem_68000, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_72406_cached_sizze_74097 = 0;
    char *scan_stage_2_accum_mem_72406 = NULL;
    int64_t iter_72400;
    struct futhark_mc_scan_stage_1_parloop_struct_74098
    futhark_mc_scan_stage_1_parloop_struct_74098;
    
    futhark_mc_scan_stage_1_parloop_struct_74098.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_74098.free_n_62256 = n_62256;
    futhark_mc_scan_stage_1_parloop_struct_74098.free_gtid_65715 = gtid_65715;
    futhark_mc_scan_stage_1_parloop_struct_74098.free_Y_mem_67388 =
        Y_mem_67388.mem;
    futhark_mc_scan_stage_1_parloop_struct_74098.free_mem_68000 = mem_68000.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_74099_task;
    
    futhark_mc_scan_stage_1_parloop_74099_task.name =
        "futhark_mc_scan_stage_1_parloop_74099";
    futhark_mc_scan_stage_1_parloop_74099_task.fn =
        futhark_mc_scan_stage_1_parloop_74099;
    futhark_mc_scan_stage_1_parloop_74099_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_74098;
    futhark_mc_scan_stage_1_parloop_74099_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_74099_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_74099_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_74099_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_74099_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_74099_task);
    
    if (futhark_mc_scan_stage_1_parloop_74099_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_74099_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_74099_total_end -
                 futhark_mc_scan_stage_1_parloop_74099_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74099_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74099_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74099_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_72399)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_72401;
        int64_t x_72402;
        int64_t offset_72404 = (int64_t) 0;
        int64_t offset_index_72405 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_72406_cached_sizze_74097 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_72406 = realloc(scan_stage_2_accum_mem_72406,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_72406_cached_sizze_74097 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_72406)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_72408 = 0; i_72408 < num_tasks_72399 - 1; i_72408++) {
            offset_72404 = squot64(n_62256, sext_i32_i64(num_tasks_72399));
            if (slt64(sext_i32_i64(i_72408), srem64(n_62256,
                                                    sext_i32_i64(num_tasks_72399)))) {
                offset_72404 += (int64_t) 1;
            }
            offset_index_72405 += offset_72404;
            
            int64_t gtid_65717 = offset_index_72405;
            float x_72079 = ((float *) Y_mem_67388.mem)[gtid_65715 * n_62256 +
                                                        gtid_65717];
            bool isnan_res_72080;
            
            isnan_res_72080 = futrts_isnan32(x_72079);
            
            bool defunc_0_p_res_72081 = !isnan_res_72080;
            int64_t defunc_0_f_res_72082 = btoi_bool_i64(defunc_0_p_res_72081);
            
            // Read carry in
            {
                x_72401 =
                    ((int64_t *) scan_stage_2_accum_mem_72406)[(int64_t) 0];
            }
            // Read next values
            {
                x_72402 = ((int64_t *) mem_68000.mem)[offset_index_72405 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_72403 = add64(x_72401, x_72402);
            
            ((int64_t *) mem_68000.mem)[offset_index_72405 - (int64_t) 1] =
                defunc_1_op_res_72403;
            ((int64_t *) scan_stage_2_accum_mem_72406)[(int64_t) 0] =
                defunc_1_op_res_72403;
        }
        
        int64_t iter_72412 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_74100
        futhark_mc_scan_stage_3_parloop_struct_74100;
        
        futhark_mc_scan_stage_3_parloop_struct_74100.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_74100.free_n_62256 = n_62256;
        futhark_mc_scan_stage_3_parloop_struct_74100.free_gtid_65715 =
            gtid_65715;
        futhark_mc_scan_stage_3_parloop_struct_74100.free_Y_mem_67388 =
            Y_mem_67388.mem;
        futhark_mc_scan_stage_3_parloop_struct_74100.free_mem_68000 =
            mem_68000.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_74101_task;
        
        futhark_mc_scan_stage_3_parloop_74101_task.name =
            "futhark_mc_scan_stage_3_parloop_74101";
        futhark_mc_scan_stage_3_parloop_74101_task.fn =
            futhark_mc_scan_stage_3_parloop_74101;
        futhark_mc_scan_stage_3_parloop_74101_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_74100;
        futhark_mc_scan_stage_3_parloop_74101_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_74101_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_74101_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_74101_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_74101_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_74101_task);
        
        if (futhark_mc_scan_stage_3_parloop_74101_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_74101_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_74101_total_end -
                     futhark_mc_scan_stage_3_parloop_74101_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74101_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74101_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74101_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_72406);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_74096_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_74096_end -
                 futhark_mc_segscan_task_74096_start;
        
        ctx->futhark_mc_segscan_task_74096_runs[tid]++;
        ctx->futhark_mc_segscan_task_74096_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_74096_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74102 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_65715;
    char *free_Y_mem_67388;
    char *free_mem_68000;
    char *free_mem_68003;
    char *free_mem_68006;
};
struct futhark_mc_segmap_parloop_struct_74104 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_65715;
    char *free_Y_mem_67388;
    char *free_mem_68000;
    char *free_mem_68003;
    char *free_mem_68006;
};
static int futhark_mc_segmap_parloop_74105(void *args, int64_t start,
                                           int64_t end, int flat_tid_65718,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74104
    *futhark_mc_segmap_parloop_struct_74104 =
    (struct futhark_mc_segmap_parloop_struct_74104 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74104->ctx;
    uint64_t futhark_mc_segmap_parloop_74105_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74105_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74104->free_n_62256;
    int64_t gtid_65715 =
            futhark_mc_segmap_parloop_struct_74104->free_gtid_65715;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_74104->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_68000 = {.desc ="mem_68000", .mem =
                                 futhark_mc_segmap_parloop_struct_74104->free_mem_68000,
                                 .size =0, .references =NULL};
    struct memblock mem_68003 = {.desc ="mem_68003", .mem =
                                 futhark_mc_segmap_parloop_struct_74104->free_mem_68003,
                                 .size =0, .references =NULL};
    struct memblock mem_68006 = {.desc ="mem_68006", .mem =
                                 futhark_mc_segmap_parloop_struct_74104->free_mem_68006,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72416 = start;
    
    for (; iter_72416 < end; iter_72416++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72419 = n_62256;
        int64_t gtid_65719 = iter_72416;
        int64_t remnant_72420 = iter_72416 - gtid_65719;
        float x_72083 = ((float *) Y_mem_67388.mem)[gtid_65715 * n_62256 +
                                                    gtid_65719];
        bool isnan_res_72084;
        
        isnan_res_72084 = futrts_isnan32(x_72083);
        
        bool defunc_0_p_res_72085 = !isnan_res_72084;
        int64_t defunc_1_f_res_72086;
        
        if (defunc_0_p_res_72085) {
            int64_t x_72417 = ((int64_t *) mem_68000.mem)[gtid_65719];
            int64_t defunc_1_f_res_t_res_72418 = sub64(x_72417, (int64_t) 1);
            
            defunc_1_f_res_72086 = defunc_1_f_res_t_res_72418;
        } else {
            defunc_1_f_res_72086 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_72086) &&
            slt64(defunc_1_f_res_72086, n_62256)) {
            ((int64_t *) mem_68006.mem)[defunc_1_f_res_72086] = gtid_65719;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_72086) &&
            slt64(defunc_1_f_res_72086, n_62256)) {
            ((float *) mem_68003.mem)[defunc_1_f_res_72086] = x_72083;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74105_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74105_end -
                 futhark_mc_segmap_parloop_74105_start;
        
        ctx->futhark_mc_segmap_parloop_74105_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74105_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74105_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74103(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65718 = tid;
    int num_tasks_72415 = info.nsubtasks;
    struct futhark_mc_task_74102 *futhark_mc_task_74102 =
                                 (struct futhark_mc_task_74102 *) args;
    struct futhark_context *ctx = futhark_mc_task_74102->ctx;
    uint64_t futhark_mc_segmap_task_74103_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74103_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74102->free_n_62256;
    int64_t gtid_65715 = futhark_mc_task_74102->free_gtid_65715;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_74102->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_68000 = {.desc ="mem_68000", .mem =
                                 futhark_mc_task_74102->free_mem_68000, .size =
                                 0, .references =NULL};
    struct memblock mem_68003 = {.desc ="mem_68003", .mem =
                                 futhark_mc_task_74102->free_mem_68003, .size =
                                 0, .references =NULL};
    struct memblock mem_68006 = {.desc ="mem_68006", .mem =
                                 futhark_mc_task_74102->free_mem_68006, .size =
                                 0, .references =NULL};
    int64_t iter_72416;
    struct futhark_mc_segmap_parloop_struct_74104
    futhark_mc_segmap_parloop_struct_74104;
    
    futhark_mc_segmap_parloop_struct_74104.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74104.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74104.free_gtid_65715 = gtid_65715;
    futhark_mc_segmap_parloop_struct_74104.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_74104.free_mem_68000 = mem_68000.mem;
    futhark_mc_segmap_parloop_struct_74104.free_mem_68003 = mem_68003.mem;
    futhark_mc_segmap_parloop_struct_74104.free_mem_68006 = mem_68006.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74105_task;
    
    futhark_mc_segmap_parloop_74105_task.name =
        "futhark_mc_segmap_parloop_74105";
    futhark_mc_segmap_parloop_74105_task.fn = futhark_mc_segmap_parloop_74105;
    futhark_mc_segmap_parloop_74105_task.args =
        &futhark_mc_segmap_parloop_struct_74104;
    futhark_mc_segmap_parloop_74105_task.iterations = iterations;
    futhark_mc_segmap_parloop_74105_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74105_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74105_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74105_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74105_task);
    
    if (futhark_mc_segmap_parloop_74105_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74105_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74105_total_end -
                 futhark_mc_segmap_parloop_74105_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74105_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74105_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74105_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74103_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74103_end -
                 futhark_mc_segmap_task_74103_start;
        
        ctx->futhark_mc_segmap_task_74103_runs[tid]++;
        ctx->futhark_mc_segmap_task_74103_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74103_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74106 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    char *free_mem_68006;
    char *free_mem_68009;
    char *free_mem_68012;
};
struct futhark_mc_segmap_parloop_struct_74108 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    char *free_mem_68006;
    char *free_mem_68009;
    char *free_mem_68012;
};
static int futhark_mc_segmap_parloop_74109(void *args, int64_t start,
                                           int64_t end, int flat_tid_65720,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74108
    *futhark_mc_segmap_parloop_struct_74108 =
    (struct futhark_mc_segmap_parloop_struct_74108 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74108->ctx;
    uint64_t futhark_mc_segmap_parloop_74109_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74109_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74108->free_n_62256;
    struct memblock mem_68006 = {.desc ="mem_68006", .mem =
                                 futhark_mc_segmap_parloop_struct_74108->free_mem_68006,
                                 .size =0, .references =NULL};
    struct memblock mem_68009 = {.desc ="mem_68009", .mem =
                                 futhark_mc_segmap_parloop_struct_74108->free_mem_68009,
                                 .size =0, .references =NULL};
    struct memblock mem_68012 = {.desc ="mem_68012", .mem =
                                 futhark_mc_segmap_parloop_struct_74108->free_mem_68012,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72422 = start;
    
    for (; iter_72422 < end; iter_72422++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72423 = n_62256;
        int64_t gtid_65721 = iter_72422;
        int64_t remnant_72424 = iter_72422 - gtid_65721;
        int64_t x_72089 = ((int64_t *) mem_68006.mem)[gtid_65721];
        int64_t defunc_0_f_res_72090 = add64((int64_t) 1, x_72089);
        float defunc_0_f_res_72091 = sitofp_i64_f32(x_72089);
        
        ((float *) mem_68009.mem)[gtid_65721] = defunc_0_f_res_72091;
        ((int64_t *) mem_68012.mem)[gtid_65721] = defunc_0_f_res_72090;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74109_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74109_end -
                 futhark_mc_segmap_parloop_74109_start;
        
        ctx->futhark_mc_segmap_parloop_74109_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74109_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74109_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74107(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65720 = tid;
    int num_tasks_72421 = info.nsubtasks;
    struct futhark_mc_task_74106 *futhark_mc_task_74106 =
                                 (struct futhark_mc_task_74106 *) args;
    struct futhark_context *ctx = futhark_mc_task_74106->ctx;
    uint64_t futhark_mc_segmap_task_74107_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74107_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74106->free_n_62256;
    struct memblock mem_68006 = {.desc ="mem_68006", .mem =
                                 futhark_mc_task_74106->free_mem_68006, .size =
                                 0, .references =NULL};
    struct memblock mem_68009 = {.desc ="mem_68009", .mem =
                                 futhark_mc_task_74106->free_mem_68009, .size =
                                 0, .references =NULL};
    struct memblock mem_68012 = {.desc ="mem_68012", .mem =
                                 futhark_mc_task_74106->free_mem_68012, .size =
                                 0, .references =NULL};
    int64_t iter_72422;
    struct futhark_mc_segmap_parloop_struct_74108
    futhark_mc_segmap_parloop_struct_74108;
    
    futhark_mc_segmap_parloop_struct_74108.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74108.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74108.free_mem_68006 = mem_68006.mem;
    futhark_mc_segmap_parloop_struct_74108.free_mem_68009 = mem_68009.mem;
    futhark_mc_segmap_parloop_struct_74108.free_mem_68012 = mem_68012.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74109_task;
    
    futhark_mc_segmap_parloop_74109_task.name =
        "futhark_mc_segmap_parloop_74109";
    futhark_mc_segmap_parloop_74109_task.fn = futhark_mc_segmap_parloop_74109;
    futhark_mc_segmap_parloop_74109_task.args =
        &futhark_mc_segmap_parloop_struct_74108;
    futhark_mc_segmap_parloop_74109_task.iterations = iterations;
    futhark_mc_segmap_parloop_74109_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74109_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74109_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74109_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74109_task);
    
    if (futhark_mc_segmap_parloop_74109_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74109_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74109_total_end -
                 futhark_mc_segmap_parloop_74109_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74109_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74109_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74109_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74107_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74107_end -
                 futhark_mc_segmap_task_74107_start;
        
        ctx->futhark_mc_segmap_task_74107_runs[tid]++;
        ctx->futhark_mc_segmap_task_74107_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74107_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74110 {
    struct futhark_context *ctx;
    int64_t free_q_62258;
    int64_t free_last_res_65892;
    char *free_mem_68015;
};
struct futhark_mc_segmap_parloop_struct_74112 {
    struct futhark_context *ctx;
    int64_t free_q_62258;
    int64_t free_last_res_65892;
    char *free_mem_68015;
};
static int futhark_mc_segmap_parloop_74113(void *args, int64_t start,
                                           int64_t end, int flat_tid_65722,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74112
    *futhark_mc_segmap_parloop_struct_74112 =
    (struct futhark_mc_segmap_parloop_struct_74112 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74112->ctx;
    uint64_t futhark_mc_segmap_parloop_74113_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74113_start = get_wall_time();
    
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74112->free_q_62258;
    int64_t last_res_65892 =
            futhark_mc_segmap_parloop_struct_74112->free_last_res_65892;
    struct memblock mem_68015 = {.desc ="mem_68015", .mem =
                                 futhark_mc_segmap_parloop_struct_74112->free_mem_68015,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72426 = start;
    
    for (; iter_72426 < end; iter_72426++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72427 = q_62258;
        int64_t gtid_65723 = iter_72426;
        int64_t remnant_72428 = iter_72426 - gtid_65723;
        bool cond_72092 = sle64(last_res_65892, gtid_65723);
        float defunc_0_f_res_72093;
        
        if (cond_72092) {
            defunc_0_f_res_72093 = 0.0F;
        } else {
            defunc_0_f_res_72093 = 1.0F;
        }
        ((float *) mem_68015.mem)[gtid_65723] = defunc_0_f_res_72093;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74113_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74113_end -
                 futhark_mc_segmap_parloop_74113_start;
        
        ctx->futhark_mc_segmap_parloop_74113_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74113_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74113_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74111(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65722 = tid;
    int num_tasks_72425 = info.nsubtasks;
    struct futhark_mc_task_74110 *futhark_mc_task_74110 =
                                 (struct futhark_mc_task_74110 *) args;
    struct futhark_context *ctx = futhark_mc_task_74110->ctx;
    uint64_t futhark_mc_segmap_task_74111_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74111_start = get_wall_time();
    
    int64_t q_62258 = futhark_mc_task_74110->free_q_62258;
    int64_t last_res_65892 = futhark_mc_task_74110->free_last_res_65892;
    struct memblock mem_68015 = {.desc ="mem_68015", .mem =
                                 futhark_mc_task_74110->free_mem_68015, .size =
                                 0, .references =NULL};
    int64_t iter_72426;
    struct futhark_mc_segmap_parloop_struct_74112
    futhark_mc_segmap_parloop_struct_74112;
    
    futhark_mc_segmap_parloop_struct_74112.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74112.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74112.free_last_res_65892 = last_res_65892;
    futhark_mc_segmap_parloop_struct_74112.free_mem_68015 = mem_68015.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74113_task;
    
    futhark_mc_segmap_parloop_74113_task.name =
        "futhark_mc_segmap_parloop_74113";
    futhark_mc_segmap_parloop_74113_task.fn = futhark_mc_segmap_parloop_74113;
    futhark_mc_segmap_parloop_74113_task.args =
        &futhark_mc_segmap_parloop_struct_74112;
    futhark_mc_segmap_parloop_74113_task.iterations = iterations;
    futhark_mc_segmap_parloop_74113_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74113_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74113_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74113_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74113_task);
    
    if (futhark_mc_segmap_parloop_74113_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74113_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74113_total_end -
                 futhark_mc_segmap_parloop_74113_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74113_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74113_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74113_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74111_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74111_end -
                 futhark_mc_segmap_task_74111_start;
        
        ctx->futhark_mc_segmap_task_74111_runs[tid]++;
        ctx->futhark_mc_segmap_task_74111_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74111_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74114 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_65892;
    int64_t free_min_arg_65904;
    int64_t free_min_arg_65905;
    int64_t free_min_res_65906;
    float free_max_res_65910;
    char *free_mem_68003;
    char *free_mem_68006;
    char *free_mem_68009;
    char *free_mem_68012;
    int64_t free_bytes_68013;
    char *free_mem_68015;
    char *free_mem_68054;
    char *free_mem_68057;
};
struct futhark_mc_segmap_parloop_struct_74116 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_65892;
    int64_t free_min_arg_65904;
    int64_t free_min_arg_65905;
    int64_t free_min_res_65906;
    float free_max_res_65910;
    char *free_mem_68003;
    char *free_mem_68006;
    char *free_mem_68009;
    char *free_mem_68012;
    int64_t free_bytes_68013;
    char *free_mem_68015;
    char *free_mem_68054;
    char *free_mem_68057;
};
static int futhark_mc_segmap_parloop_74117(void *args, int64_t start,
                                           int64_t end, int flat_tid_65724,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74116
    *futhark_mc_segmap_parloop_struct_74116 =
    (struct futhark_mc_segmap_parloop_struct_74116 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74116->ctx;
    uint64_t futhark_mc_segmap_parloop_74117_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74117_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74116->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74116->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74116->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74116->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74116->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_74116->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_74116->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_74116->free_loop_cond_62281;
    int64_t last_res_65892 =
            futhark_mc_segmap_parloop_struct_74116->free_last_res_65892;
    int64_t min_arg_65904 =
            futhark_mc_segmap_parloop_struct_74116->free_min_arg_65904;
    int64_t min_arg_65905 =
            futhark_mc_segmap_parloop_struct_74116->free_min_arg_65905;
    int64_t min_res_65906 =
            futhark_mc_segmap_parloop_struct_74116->free_min_res_65906;
    float max_res_65910 =
          futhark_mc_segmap_parloop_struct_74116->free_max_res_65910;
    struct memblock mem_68003 = {.desc ="mem_68003", .mem =
                                 futhark_mc_segmap_parloop_struct_74116->free_mem_68003,
                                 .size =0, .references =NULL};
    struct memblock mem_68006 = {.desc ="mem_68006", .mem =
                                 futhark_mc_segmap_parloop_struct_74116->free_mem_68006,
                                 .size =0, .references =NULL};
    struct memblock mem_68009 = {.desc ="mem_68009", .mem =
                                 futhark_mc_segmap_parloop_struct_74116->free_mem_68009,
                                 .size =0, .references =NULL};
    struct memblock mem_68012 = {.desc ="mem_68012", .mem =
                                 futhark_mc_segmap_parloop_struct_74116->free_mem_68012,
                                 .size =0, .references =NULL};
    int64_t bytes_68013 =
            futhark_mc_segmap_parloop_struct_74116->free_bytes_68013;
    struct memblock mem_68015 = {.desc ="mem_68015", .mem =
                                 futhark_mc_segmap_parloop_struct_74116->free_mem_68015,
                                 .size =0, .references =NULL};
    struct memblock mem_68054 = {.desc ="mem_68054", .mem =
                                 futhark_mc_segmap_parloop_struct_74116->free_mem_68054,
                                 .size =0, .references =NULL};
    struct memblock mem_68057 = {.desc ="mem_68057", .mem =
                                 futhark_mc_segmap_parloop_struct_74116->free_mem_68057,
                                 .size =0, .references =NULL};
    size_t mem_72331_cached_sizze_74118 = 0;
    char *mem_72331 = NULL;
    size_t mem_72333_cached_sizze_74119 = 0;
    char *mem_72333 = NULL;
    int64_t iterations = end - start;
    int64_t iter_72430 = start;
    
    if (mem_72331_cached_sizze_74118 < (size_t) bytes_68013) {
        mem_72331 = realloc(mem_72331, bytes_68013);
        mem_72331_cached_sizze_74118 = bytes_68013;
    }
    if (mem_72333_cached_sizze_74119 < (size_t) bytes_68013) {
        mem_72333 = realloc(mem_72333, bytes_68013);
        mem_72333_cached_sizze_74119 = bytes_68013;
    }
    for (; iter_72430 < end; iter_72430++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72533 = n_m_62264;
        int64_t gtid_65725 = iter_72430;
        int64_t remnant_72534 = iter_72430 - gtid_65725;
        int64_t min_arg_72244 = mul64(jump_62260, gtid_65725);
        int64_t min_res_72245 = smin64(i_62270, min_arg_72244);
        int64_t defunc_0_g_res_72246 = add64((int64_t) 1, min_res_72245);
        bool init_idx_72247;
        int64_t init_idx_72248;
        int64_t init_idx_72249;
        bool loop_while_72431;
        int64_t low_72432;
        int64_t high_72433;
        
        loop_while_72431 = x_62271;
        low_72432 = (int64_t) 0;
        high_72433 = i_62270;
        while (loop_while_72431) {
            int64_t x_72434 = add64(low_72432, high_72433);
            int64_t mid_72435 = sdiv64(x_72434, (int64_t) 2);
            bool x_72436 = sle64((int64_t) 0, mid_72435);
            bool y_72437 = slt64(mid_72435, n_62256);
            bool bounds_check_72438 = x_72436 && y_72437;
            bool index_certs_72439;
            
            if (!bounds_check_72438) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_72435,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t mid_id_72440 = ((int64_t *) mem_68012.mem)[mid_72435];
            bool cond_72441 = slt64(mid_id_72440, (int64_t) 0);
            int64_t mid_idx_72442;
            
            if (cond_72441) {
                mid_idx_72442 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_72442 = mid_id_72440;
            }
            
            bool cond_72443 = sle64(defunc_0_g_res_72246, mid_idx_72442);
            int64_t loopres_72444;
            int64_t loopres_72445;
            
            if (cond_72443) {
                int64_t loopres_t_res_72446 = sub64(mid_72435, (int64_t) 1);
                
                loopres_72444 = low_72432;
                loopres_72445 = loopres_t_res_72446;
            } else {
                int64_t loopres_f_res_72447 = add64((int64_t) 1, mid_72435);
                
                loopres_72444 = loopres_f_res_72447;
                loopres_72445 = high_72433;
            }
            
            bool loop_cond_72448 = sle64(loopres_72444, loopres_72445);
            bool loop_while_tmp_72535 = loop_cond_72448;
            int64_t low_tmp_72536 = loopres_72444;
            int64_t high_tmp_72537 = loopres_72445;
            
            loop_while_72431 = loop_while_tmp_72535;
            low_72432 = low_tmp_72536;
            high_72433 = high_tmp_72537;
        }
        init_idx_72247 = loop_while_72431;
        init_idx_72248 = low_72432;
        init_idx_72249 = high_72433;
        
        bool idx_72268;
        int64_t idx_72269;
        int64_t idx_72270;
        int64_t idx_72271;
        bool loop_while_72449;
        int64_t l_idx_72450;
        int64_t r_idx_72451;
        int64_t span_72452;
        
        loop_while_72449 = loop_cond_62281;
        l_idx_72450 = init_idx_72248;
        r_idx_72451 = init_idx_72248;
        span_72452 = (int64_t) 1;
        while (loop_while_72449) {
            int64_t max_arg_72453 = sub64(l_idx_72450, (int64_t) 1);
            int64_t max_res_72454 = smax64((int64_t) 0, max_arg_72453);
            int64_t min_arg_72455 = add64((int64_t) 1, r_idx_72451);
            int64_t min_res_72456 = smin64(min_arg_65904, min_arg_72455);
            bool x_72457 = sle64((int64_t) 0, max_res_72454);
            bool y_72458 = slt64(max_res_72454, n_62256);
            bool bounds_check_72459 = x_72457 && y_72458;
            bool index_certs_72460;
            
            if (!bounds_check_72459) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_72454,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_72461 = ((int64_t *) mem_68012.mem)[max_res_72454];
            int64_t abs_arg_72462 = sub64(x_72461, defunc_0_g_res_72246);
            int64_t abs_res_72463 = abs64(abs_arg_72462);
            bool x_72464 = sle64((int64_t) 0, min_res_72456);
            bool y_72465 = slt64(min_res_72456, n_62256);
            bool bounds_check_72466 = x_72464 && y_72465;
            bool index_certs_72467;
            
            if (!bounds_check_72466) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_72456,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_72468 = ((int64_t *) mem_68012.mem)[min_res_72456];
            int64_t abs_arg_72469 = sub64(x_72468, defunc_0_g_res_72246);
            int64_t abs_res_72470 = abs64(abs_arg_72469);
            bool cond_72471 = max_res_72454 == l_idx_72450;
            int64_t loopres_72472;
            int64_t loopres_72473;
            int64_t loopres_72474;
            
            if (cond_72471) {
                loopres_72472 = l_idx_72450;
                loopres_72473 = r_idx_72451;
                loopres_72474 = min_res_62276;
            } else {
                bool cond_72475 = slt64(abs_res_72463, abs_res_72470);
                bool cond_f_res_72476 = min_res_72456 == r_idx_72451;
                bool x_72477 = !cond_72475;
                bool y_72478 = cond_f_res_72476 && x_72477;
                bool cond_72479 = cond_72475 || y_72478;
                int64_t loopres_f_res_72480;
                
                if (cond_72479) {
                    loopres_f_res_72480 = max_res_72454;
                } else {
                    loopres_f_res_72480 = l_idx_72450;
                }
                
                int64_t loopres_f_res_72481;
                
                if (cond_72479) {
                    loopres_f_res_72481 = r_idx_72451;
                } else {
                    loopres_f_res_72481 = min_res_72456;
                }
                
                int64_t loopres_f_res_72482;
                
                if (cond_72479) {
                    int64_t loopres_f_res_t_res_72483 = add64((int64_t) 1,
                                                              span_72452);
                    
                    loopres_f_res_72482 = loopres_f_res_t_res_72483;
                } else {
                    int64_t loopres_f_res_f_res_72484 = add64((int64_t) 1,
                                                              span_72452);
                    
                    loopres_f_res_72482 = loopres_f_res_f_res_72484;
                }
                loopres_72472 = loopres_f_res_72480;
                loopres_72473 = loopres_f_res_72481;
                loopres_72474 = loopres_f_res_72482;
            }
            
            bool loop_cond_72485 = slt64(loopres_72474, min_res_62276);
            bool loop_while_tmp_72538 = loop_cond_72485;
            int64_t l_idx_tmp_72539 = loopres_72472;
            int64_t r_idx_tmp_72540 = loopres_72473;
            int64_t span_tmp_72541 = loopres_72474;
            
            loop_while_72449 = loop_while_tmp_72538;
            l_idx_72450 = l_idx_tmp_72539;
            r_idx_72451 = r_idx_tmp_72540;
            span_72452 = span_tmp_72541;
        }
        idx_72268 = loop_while_72449;
        idx_72269 = l_idx_72450;
        idx_72270 = r_idx_72451;
        idx_72271 = span_72452;
        
        int64_t min_res_72309 = smin64(min_arg_65905, idx_72269);
        int64_t max_res_72310 = smax64((int64_t) 0, min_res_72309);
        int64_t x_72311 = add64(min_res_65906, max_res_72310);
        int64_t r_72312 = sub64(x_72311, (int64_t) 1);
        bool x_72313 = sle64((int64_t) 0, r_72312);
        bool y_72314 = slt64(r_72312, n_62256);
        bool bounds_check_72315 = x_72313 && y_72314;
        bool index_certs_72316;
        
        if (!bounds_check_72315) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_72312,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_72317 = ((int64_t *) mem_68006.mem)[r_72312];
        int64_t abs_arg_72318 = sub64(x_72317, min_res_72245);
        int64_t abs_res_72319 = abs64(abs_arg_72318);
        bool x_72320 = sle64((int64_t) 0, max_res_72310);
        bool y_72321 = slt64(max_res_72310, n_62256);
        bool bounds_check_72322 = x_72320 && y_72321;
        bool index_certs_72323;
        
        if (!bounds_check_72322) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_72310,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_72324 = ((int64_t *) mem_68006.mem)[max_res_72310];
        int64_t abs_arg_72325 = sub64(x_72324, min_res_72245);
        int64_t abs_res_72326 = abs64(abs_arg_72325);
        int64_t max_res_72327 = smax64(abs_res_72319, abs_res_72326);
        float defunc_0_f_res_72328 = sitofp_i64_f32(max_res_72327);
        float defunc_1_f_res_72329 = max_res_65910 + defunc_0_f_res_72328;
        float defunc_0_f_res_72330 = sitofp_i64_f32(min_res_72245);
        float defunc_2_reduce_res_72335;
        float defunc_2_reduce_res_72336;
        float defunc_2_reduce_res_72337;
        float redout_72487;
        float redout_72488;
        float redout_72489;
        
        redout_72487 = 0.0F;
        redout_72488 = 0.0F;
        redout_72489 = 0.0F;
        for (int64_t i_72486 = 0; i_72486 < q_62258; i_72486++) {
            float x_72492 = ((float *) mem_68015.mem)[i_72486];
            bool cond_72493 = sle64(last_res_65892, i_72486);
            float defunc_0_f_res_72494;
            
            if (cond_72493) {
                defunc_0_f_res_72494 = 0.0F;
            } else {
                int64_t i_72495 = add64(max_res_72310, i_72486);
                float x_72496 = ((float *) mem_68009.mem)[i_72495];
                float defunc_0_f_res_f_res_72497 = 1.0F + x_72496;
                
                defunc_0_f_res_72494 = defunc_0_f_res_f_res_72497;
            }
            
            float x_j_72498 = defunc_0_f_res_72494 - defunc_0_f_res_72330;
            float abs_res_72499 = (float) fabs(x_j_72498);
            float tmp1_72500 = abs_res_72499 / defunc_1_f_res_72329;
            float x_72501 = tmp1_72500 * tmp1_72500;
            float y_72502 = tmp1_72500 * x_72501;
            float tmp2_72503 = 1.0F - y_72502;
            float x_72504 = tmp2_72503 * tmp2_72503;
            float tmp3_72505 = tmp2_72503 * x_72504;
            float tmp4_72506 = x_72492 * tmp3_72505;
            float defunc_1_f_res_72507 = x_j_72498 * tmp4_72506;
            float defunc_1_f_res_72508 = x_j_72498 * defunc_1_f_res_72507;
            float defunc_1_op_res_72509 = tmp4_72506 + redout_72487;
            float defunc_1_op_res_72510 = defunc_1_f_res_72507 + redout_72488;
            float defunc_1_op_res_72511 = defunc_1_f_res_72508 + redout_72489;
            
            ((float *) mem_72331)[i_72486] = defunc_1_f_res_72507;
            ((float *) mem_72333)[i_72486] = tmp4_72506;
            
            float redout_tmp_72542 = defunc_1_op_res_72509;
            float redout_tmp_72543 = defunc_1_op_res_72510;
            float redout_tmp_72544 = defunc_1_op_res_72511;
            
            redout_72487 = redout_tmp_72542;
            redout_72488 = redout_tmp_72543;
            redout_72489 = redout_tmp_72544;
        }
        defunc_2_reduce_res_72335 = redout_72487;
        defunc_2_reduce_res_72336 = redout_72488;
        defunc_2_reduce_res_72337 = redout_72489;
        
        float x_72368 = defunc_2_reduce_res_72335 * defunc_2_reduce_res_72337;
        float y_72369 = defunc_2_reduce_res_72336 * defunc_2_reduce_res_72336;
        float y_72370 = x_72368 - y_72369;
        float det1_72371 = 1.0F / y_72370;
        float a11_72372 = defunc_2_reduce_res_72337 * det1_72371;
        float negate_arg_72373 = defunc_2_reduce_res_72336 * det1_72371;
        float b11_72374 = 0.0F - negate_arg_72373;
        float c11_72375 = defunc_2_reduce_res_72335 * det1_72371;
        float defunc_2_reduce_res_72376;
        float defunc_2_reduce_res_72377;
        float redout_72515;
        float redout_72516;
        
        redout_72515 = 0.0F;
        redout_72516 = 0.0F;
        for (int64_t i_72514 = 0; i_72514 < q_62258; i_72514++) {
            float x_72517 = ((float *) mem_72333)[i_72514];
            float x_72518 = ((float *) mem_72331)[i_72514];
            bool cond_72519 = sle64(last_res_65892, i_72514);
            float defunc_0_f_res_72520;
            
            if (cond_72519) {
                defunc_0_f_res_72520 = 0.0F;
            } else {
                int64_t i_72521 = add64(max_res_72310, i_72514);
                float x_72522 = ((float *) mem_68003.mem)[i_72521];
                
                defunc_0_f_res_72520 = x_72522;
            }
            
            float x_72523 = a11_72372 * x_72517;
            float y_72524 = b11_72374 * x_72518;
            float x_72525 = x_72523 + y_72524;
            float defunc_9_fit_fun_res_72526 = defunc_0_f_res_72520 * x_72525;
            float x_72527 = b11_72374 * x_72517;
            float y_72528 = c11_72375 * x_72518;
            float x_72529 = x_72527 + y_72528;
            float defunc_9_slope_fun_res_72530 = defunc_0_f_res_72520 * x_72529;
            float defunc_1_op_res_72531 = defunc_9_fit_fun_res_72526 +
                  redout_72515;
            float defunc_1_op_res_72532 = defunc_9_slope_fun_res_72530 +
                  redout_72516;
            float redout_tmp_72547 = defunc_1_op_res_72531;
            float redout_tmp_72548 = defunc_1_op_res_72532;
            
            redout_72515 = redout_tmp_72547;
            redout_72516 = redout_tmp_72548;
        }
        defunc_2_reduce_res_72376 = redout_72515;
        defunc_2_reduce_res_72377 = redout_72516;
        ((float *) mem_68054.mem)[gtid_65725] = defunc_2_reduce_res_72376;
        ((float *) mem_68057.mem)[gtid_65725] = defunc_2_reduce_res_72377;
    }
    
  cleanup:
    { }
    free(mem_72331);
    free(mem_72333);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74117_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74117_end -
                 futhark_mc_segmap_parloop_74117_start;
        
        ctx->futhark_mc_segmap_parloop_74117_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74117_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74117_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74115(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65724 = tid;
    int num_tasks_72429 = info.nsubtasks;
    struct futhark_mc_task_74114 *futhark_mc_task_74114 =
                                 (struct futhark_mc_task_74114 *) args;
    struct futhark_context *ctx = futhark_mc_task_74114->ctx;
    uint64_t futhark_mc_segmap_task_74115_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74115_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74114->free_n_62256;
    int64_t q_62258 = futhark_mc_task_74114->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_74114->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74114->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74114->free_i_62270;
    bool x_62271 = futhark_mc_task_74114->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_74114->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_74114->free_loop_cond_62281;
    int64_t last_res_65892 = futhark_mc_task_74114->free_last_res_65892;
    int64_t min_arg_65904 = futhark_mc_task_74114->free_min_arg_65904;
    int64_t min_arg_65905 = futhark_mc_task_74114->free_min_arg_65905;
    int64_t min_res_65906 = futhark_mc_task_74114->free_min_res_65906;
    float max_res_65910 = futhark_mc_task_74114->free_max_res_65910;
    struct memblock mem_68003 = {.desc ="mem_68003", .mem =
                                 futhark_mc_task_74114->free_mem_68003, .size =
                                 0, .references =NULL};
    struct memblock mem_68006 = {.desc ="mem_68006", .mem =
                                 futhark_mc_task_74114->free_mem_68006, .size =
                                 0, .references =NULL};
    struct memblock mem_68009 = {.desc ="mem_68009", .mem =
                                 futhark_mc_task_74114->free_mem_68009, .size =
                                 0, .references =NULL};
    struct memblock mem_68012 = {.desc ="mem_68012", .mem =
                                 futhark_mc_task_74114->free_mem_68012, .size =
                                 0, .references =NULL};
    int64_t bytes_68013 = futhark_mc_task_74114->free_bytes_68013;
    struct memblock mem_68015 = {.desc ="mem_68015", .mem =
                                 futhark_mc_task_74114->free_mem_68015, .size =
                                 0, .references =NULL};
    struct memblock mem_68054 = {.desc ="mem_68054", .mem =
                                 futhark_mc_task_74114->free_mem_68054, .size =
                                 0, .references =NULL};
    struct memblock mem_68057 = {.desc ="mem_68057", .mem =
                                 futhark_mc_task_74114->free_mem_68057, .size =
                                 0, .references =NULL};
    int64_t iter_72430;
    struct futhark_mc_segmap_parloop_struct_74116
    futhark_mc_segmap_parloop_struct_74116;
    
    futhark_mc_segmap_parloop_struct_74116.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74116.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74116.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74116.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74116.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74116.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74116.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_74116.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_74116.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_74116.free_last_res_65892 = last_res_65892;
    futhark_mc_segmap_parloop_struct_74116.free_min_arg_65904 = min_arg_65904;
    futhark_mc_segmap_parloop_struct_74116.free_min_arg_65905 = min_arg_65905;
    futhark_mc_segmap_parloop_struct_74116.free_min_res_65906 = min_res_65906;
    futhark_mc_segmap_parloop_struct_74116.free_max_res_65910 = max_res_65910;
    futhark_mc_segmap_parloop_struct_74116.free_mem_68003 = mem_68003.mem;
    futhark_mc_segmap_parloop_struct_74116.free_mem_68006 = mem_68006.mem;
    futhark_mc_segmap_parloop_struct_74116.free_mem_68009 = mem_68009.mem;
    futhark_mc_segmap_parloop_struct_74116.free_mem_68012 = mem_68012.mem;
    futhark_mc_segmap_parloop_struct_74116.free_bytes_68013 = bytes_68013;
    futhark_mc_segmap_parloop_struct_74116.free_mem_68015 = mem_68015.mem;
    futhark_mc_segmap_parloop_struct_74116.free_mem_68054 = mem_68054.mem;
    futhark_mc_segmap_parloop_struct_74116.free_mem_68057 = mem_68057.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74117_task;
    
    futhark_mc_segmap_parloop_74117_task.name =
        "futhark_mc_segmap_parloop_74117";
    futhark_mc_segmap_parloop_74117_task.fn = futhark_mc_segmap_parloop_74117;
    futhark_mc_segmap_parloop_74117_task.args =
        &futhark_mc_segmap_parloop_struct_74116;
    futhark_mc_segmap_parloop_74117_task.iterations = iterations;
    futhark_mc_segmap_parloop_74117_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74117_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74117_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74117_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74117_task);
    
    if (futhark_mc_segmap_parloop_74117_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74117_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74117_total_end -
                 futhark_mc_segmap_parloop_74117_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74117_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74117_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74117_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74115_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74115_end -
                 futhark_mc_segmap_task_74115_start;
        
        ctx->futhark_mc_segmap_task_74115_runs[tid]++;
        ctx->futhark_mc_segmap_task_74115_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74115_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74121 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_65892;
    int64_t free_min_arg_65904;
    int64_t free_min_arg_65905;
    int64_t free_min_res_65906;
    float free_max_res_65910;
    char *free_mem_68003;
    char *free_mem_68006;
    char *free_mem_68009;
    char *free_mem_68012;
    int64_t free_bytes_68013;
    char *free_mem_68015;
    char *free_mem_68054;
    char *free_mem_68057;
};
struct futhark_mc_task_74125 {
    struct futhark_context *ctx;
    int64_t free_last_res_65892;
    char *free_mem_68009;
    char *free_mem_68015;
    int64_t free_max_res_72160;
    float free_defunc_1_f_res_72179;
    float free_defunc_0_f_res_72180;
    float *retval_defunc_2_reduce_res_72183;
    float *retval_defunc_2_reduce_res_72184;
    float *retval_defunc_2_reduce_res_72185;
    char *retval_mem_72181;
    char *retval_mem_72182;
};
struct futhark_mc_segred_stage_1_parloop_struct_74130 {
    struct futhark_context *ctx;
    int64_t free_last_res_65892;
    char *free_mem_68009;
    char *free_mem_68015;
    int64_t free_max_res_72160;
    float free_defunc_1_f_res_72179;
    float free_defunc_0_f_res_72180;
    char *free_mem_72181;
    char *free_mem_72182;
    char *free_reduce_stage_1_tid_res_arr_mem_72661;
    char *free_reduce_stage_1_tid_res_arr_mem_72663;
    char *free_reduce_stage_1_tid_res_arr_mem_72665;
};
static int futhark_mc_segred_stage_1_parloop_74131(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_65728, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74130
    *futhark_mc_segred_stage_1_parloop_struct_74130 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74130 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74130->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74131_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74131_start = get_wall_time();
    
    int64_t last_res_65892 =
            futhark_mc_segred_stage_1_parloop_struct_74130->free_last_res_65892;
    struct memblock mem_68009 = {.desc ="mem_68009", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74130->free_mem_68009,
                                 .size =0, .references =NULL};
    struct memblock mem_68015 = {.desc ="mem_68015", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74130->free_mem_68015,
                                 .size =0, .references =NULL};
    int64_t max_res_72160 =
            futhark_mc_segred_stage_1_parloop_struct_74130->free_max_res_72160;
    float defunc_1_f_res_72179 =
          futhark_mc_segred_stage_1_parloop_struct_74130->free_defunc_1_f_res_72179;
    float defunc_0_f_res_72180 =
          futhark_mc_segred_stage_1_parloop_struct_74130->free_defunc_0_f_res_72180;
    struct memblock mem_72181 = {.desc ="mem_72181", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74130->free_mem_72181,
                                 .size =0, .references =NULL};
    struct memblock mem_72182 = {.desc ="mem_72182", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74130->free_mem_72182,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_72661 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72661",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74130->free_reduce_stage_1_tid_res_arr_mem_72661,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_72663 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72663",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74130->free_reduce_stage_1_tid_res_arr_mem_72663,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_72665 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72665",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74130->free_reduce_stage_1_tid_res_arr_mem_72665,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72667 = start;
    float x_72605;
    float x_72606;
    float x_72608;
    float x_72609;
    float x_72611;
    float x_72612;
    float local_acc_72668 = 0.0F;
    float local_acc_72669 = 0.0F;
    float local_acc_72670 = 0.0F;
    
    for (; iter_72667 < end; iter_72667++) {
        int64_t gtid_65729 = iter_72667;
        float x_72614 = ((float *) mem_68015.mem)[gtid_65729];
        bool cond_72615 = sle64(last_res_65892, gtid_65729);
        float defunc_0_f_res_72616;
        
        if (cond_72615) {
            defunc_0_f_res_72616 = 0.0F;
        } else {
            int64_t i_72617 = add64(gtid_65729, max_res_72160);
            float x_72618 = ((float *) mem_68009.mem)[i_72617];
            float defunc_0_f_res_f_res_72619 = 1.0F + x_72618;
            
            defunc_0_f_res_72616 = defunc_0_f_res_f_res_72619;
        }
        
        float x_j_72620 = defunc_0_f_res_72616 - defunc_0_f_res_72180;
        float abs_res_72621 = (float) fabs(x_j_72620);
        float tmp1_72622 = abs_res_72621 / defunc_1_f_res_72179;
        float x_72623 = tmp1_72622 * tmp1_72622;
        float y_72624 = tmp1_72622 * x_72623;
        float tmp2_72625 = 1.0F - y_72624;
        float x_72626 = tmp2_72625 * tmp2_72625;
        float tmp3_72627 = tmp2_72625 * x_72626;
        float tmp4_72628 = x_72614 * tmp3_72627;
        float defunc_1_f_res_72629 = x_j_72620 * tmp4_72628;
        float defunc_1_f_res_72630 = x_j_72620 * defunc_1_f_res_72629;
        
        // save map-out results
        {
            ((float *) mem_72181.mem)[gtid_65729] = defunc_1_f_res_72629;
            ((float *) mem_72182.mem)[gtid_65729] = tmp4_72628;
        }
        // Load accum params
        {
            x_72605 = local_acc_72668;
        }
        // Load next params
        {
            x_72606 = tmp4_72628;
        }
        // Red body
        {
            float defunc_1_op_res_72607 = x_72605 + x_72606;
            
            local_acc_72668 = defunc_1_op_res_72607;
        }
        // Load accum params
        {
            x_72608 = local_acc_72669;
        }
        // Load next params
        {
            x_72609 = defunc_1_f_res_72629;
        }
        // Red body
        {
            float defunc_1_op_res_72610 = x_72608 + x_72609;
            
            local_acc_72669 = defunc_1_op_res_72610;
        }
        // Load accum params
        {
            x_72611 = local_acc_72670;
        }
        // Load next params
        {
            x_72612 = defunc_1_f_res_72630;
        }
        // Red body
        {
            float defunc_1_op_res_72613 = x_72611 + x_72612;
            
            local_acc_72670 = defunc_1_op_res_72613;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_72661.mem)[flat_tid_65728] =
        local_acc_72668;
    ((float *) reduce_stage_1_tid_res_arr_mem_72663.mem)[flat_tid_65728] =
        local_acc_72669;
    ((float *) reduce_stage_1_tid_res_arr_mem_72665.mem)[flat_tid_65728] =
        local_acc_72670;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74131_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74131_end -
                 futhark_mc_segred_stage_1_parloop_74131_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74131_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74131_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74131_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74126(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65728 = tid;
    int num_tasks_72660 = info.nsubtasks;
    struct futhark_mc_task_74125 *futhark_mc_task_74125 =
                                 (struct futhark_mc_task_74125 *) args;
    struct futhark_context *ctx = futhark_mc_task_74125->ctx;
    uint64_t futhark_mc_segred_task_74126_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74126_start = get_wall_time();
    
    int64_t last_res_65892 = futhark_mc_task_74125->free_last_res_65892;
    struct memblock mem_68009 = {.desc ="mem_68009", .mem =
                                 futhark_mc_task_74125->free_mem_68009, .size =
                                 0, .references =NULL};
    struct memblock mem_68015 = {.desc ="mem_68015", .mem =
                                 futhark_mc_task_74125->free_mem_68015, .size =
                                 0, .references =NULL};
    int64_t max_res_72160 = futhark_mc_task_74125->free_max_res_72160;
    float defunc_1_f_res_72179 =
          futhark_mc_task_74125->free_defunc_1_f_res_72179;
    float defunc_0_f_res_72180 =
          futhark_mc_task_74125->free_defunc_0_f_res_72180;
    float defunc_2_reduce_res_72183 =
          *futhark_mc_task_74125->retval_defunc_2_reduce_res_72183;
    float defunc_2_reduce_res_72184 =
          *futhark_mc_task_74125->retval_defunc_2_reduce_res_72184;
    float defunc_2_reduce_res_72185 =
          *futhark_mc_task_74125->retval_defunc_2_reduce_res_72185;
    struct memblock mem_72181 = {.desc ="mem_72181", .mem =
                                 futhark_mc_task_74125->retval_mem_72181,
                                 .size =0, .references =NULL};
    struct memblock mem_72182 = {.desc ="mem_72182", .mem =
                                 futhark_mc_task_74125->retval_mem_72182,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_72661_cached_sizze_74127 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72661 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_72663_cached_sizze_74128 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72663 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_72665_cached_sizze_74129 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72665 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_72661_cached_sizze_74127 <
        (size_t) ((int64_t) 4 * num_tasks_72660)) {
        reduce_stage_1_tid_res_arr_mem_72661 =
            realloc(reduce_stage_1_tid_res_arr_mem_72661, (int64_t) 4 *
                    num_tasks_72660);
        reduce_stage_1_tid_res_arr_mem_72661_cached_sizze_74127 = (int64_t) 4 *
            num_tasks_72660;
    }
    if (reduce_stage_1_tid_res_arr_mem_72663_cached_sizze_74128 <
        (size_t) ((int64_t) 4 * num_tasks_72660)) {
        reduce_stage_1_tid_res_arr_mem_72663 =
            realloc(reduce_stage_1_tid_res_arr_mem_72663, (int64_t) 4 *
                    num_tasks_72660);
        reduce_stage_1_tid_res_arr_mem_72663_cached_sizze_74128 = (int64_t) 4 *
            num_tasks_72660;
    }
    if (reduce_stage_1_tid_res_arr_mem_72665_cached_sizze_74129 <
        (size_t) ((int64_t) 4 * num_tasks_72660)) {
        reduce_stage_1_tid_res_arr_mem_72665 =
            realloc(reduce_stage_1_tid_res_arr_mem_72665, (int64_t) 4 *
                    num_tasks_72660);
        reduce_stage_1_tid_res_arr_mem_72665_cached_sizze_74129 = (int64_t) 4 *
            num_tasks_72660;
    }
    
    int64_t iter_72667;
    struct futhark_mc_segred_stage_1_parloop_struct_74130
    futhark_mc_segred_stage_1_parloop_struct_74130;
    
    futhark_mc_segred_stage_1_parloop_struct_74130.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74130.free_last_res_65892 =
        last_res_65892;
    futhark_mc_segred_stage_1_parloop_struct_74130.free_mem_68009 =
        mem_68009.mem;
    futhark_mc_segred_stage_1_parloop_struct_74130.free_mem_68015 =
        mem_68015.mem;
    futhark_mc_segred_stage_1_parloop_struct_74130.free_max_res_72160 =
        max_res_72160;
    futhark_mc_segred_stage_1_parloop_struct_74130.free_defunc_1_f_res_72179 =
        defunc_1_f_res_72179;
    futhark_mc_segred_stage_1_parloop_struct_74130.free_defunc_0_f_res_72180 =
        defunc_0_f_res_72180;
    futhark_mc_segred_stage_1_parloop_struct_74130.free_mem_72181 =
        mem_72181.mem;
    futhark_mc_segred_stage_1_parloop_struct_74130.free_mem_72182 =
        mem_72182.mem;
    futhark_mc_segred_stage_1_parloop_struct_74130.free_reduce_stage_1_tid_res_arr_mem_72661 =
        reduce_stage_1_tid_res_arr_mem_72661;
    futhark_mc_segred_stage_1_parloop_struct_74130.free_reduce_stage_1_tid_res_arr_mem_72663 =
        reduce_stage_1_tid_res_arr_mem_72663;
    futhark_mc_segred_stage_1_parloop_struct_74130.free_reduce_stage_1_tid_res_arr_mem_72665 =
        reduce_stage_1_tid_res_arr_mem_72665;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74131_task;
    
    futhark_mc_segred_stage_1_parloop_74131_task.name =
        "futhark_mc_segred_stage_1_parloop_74131";
    futhark_mc_segred_stage_1_parloop_74131_task.fn =
        futhark_mc_segred_stage_1_parloop_74131;
    futhark_mc_segred_stage_1_parloop_74131_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74130;
    futhark_mc_segred_stage_1_parloop_74131_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74131_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74131_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74131_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74131_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74131_task);
    
    if (futhark_mc_segred_stage_1_parloop_74131_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74131_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74131_total_end -
                 futhark_mc_segred_stage_1_parloop_74131_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74131_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74131_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74131_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_72183 = 0.0F;
        defunc_2_reduce_res_72184 = 0.0F;
        defunc_2_reduce_res_72185 = 0.0F;
    }
    
    float x_72671;
    float x_72672;
    float x_72674;
    float x_72675;
    float x_72677;
    float x_72678;
    
    for (int32_t i_72680 = 0; i_72680 < num_tasks_72660; i_72680++) {
        flat_tid_65728 = i_72680;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_72671 = defunc_2_reduce_res_72183;
            }
            // load next params
            {
                x_72672 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72661)[flat_tid_65728];
            }
            // red body
            {
                float defunc_1_op_res_72673 = x_72671 + x_72672;
                
                defunc_2_reduce_res_72183 = defunc_1_op_res_72673;
            }
            // load acc params
            {
                x_72674 = defunc_2_reduce_res_72184;
            }
            // load next params
            {
                x_72675 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72663)[flat_tid_65728];
            }
            // red body
            {
                float defunc_1_op_res_72676 = x_72674 + x_72675;
                
                defunc_2_reduce_res_72184 = defunc_1_op_res_72676;
            }
            // load acc params
            {
                x_72677 = defunc_2_reduce_res_72185;
            }
            // load next params
            {
                x_72678 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72665)[flat_tid_65728];
            }
            // red body
            {
                float defunc_1_op_res_72679 = x_72677 + x_72678;
                
                defunc_2_reduce_res_72185 = defunc_1_op_res_72679;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_72661);
    free(reduce_stage_1_tid_res_arr_mem_72663);
    free(reduce_stage_1_tid_res_arr_mem_72665);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74126_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74126_end -
                 futhark_mc_segred_task_74126_start;
        
        ctx->futhark_mc_segred_task_74126_runs[tid]++;
        ctx->futhark_mc_segred_task_74126_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74126_iter[tid] += iterations;
    }
    *futhark_mc_task_74125->retval_defunc_2_reduce_res_72183 =
        defunc_2_reduce_res_72183;
    *futhark_mc_task_74125->retval_defunc_2_reduce_res_72184 =
        defunc_2_reduce_res_72184;
    *futhark_mc_task_74125->retval_defunc_2_reduce_res_72185 =
        defunc_2_reduce_res_72185;
    futhark_mc_task_74125->retval_mem_72181 = mem_72181.mem;
    futhark_mc_task_74125->retval_mem_72182 = mem_72182.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74132 {
    struct futhark_context *ctx;
    int64_t free_last_res_65892;
    char *free_mem_68003;
    int64_t free_max_res_72160;
    char *free_mem_72181;
    char *free_mem_72182;
    float free_a11_72218;
    float free_b11_72220;
    float free_c11_72221;
    float *retval_defunc_2_reduce_res_72222;
    float *retval_defunc_2_reduce_res_72223;
};
struct futhark_mc_segred_stage_1_parloop_struct_74136 {
    struct futhark_context *ctx;
    int64_t free_last_res_65892;
    char *free_mem_68003;
    int64_t free_max_res_72160;
    char *free_mem_72181;
    char *free_mem_72182;
    float free_a11_72218;
    float free_b11_72220;
    float free_c11_72221;
    char *free_reduce_stage_1_tid_res_arr_mem_72682;
    char *free_reduce_stage_1_tid_res_arr_mem_72684;
};
static int futhark_mc_segred_stage_1_parloop_74137(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_65730, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74136
    *futhark_mc_segred_stage_1_parloop_struct_74136 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74136 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74136->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74137_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74137_start = get_wall_time();
    
    int64_t last_res_65892 =
            futhark_mc_segred_stage_1_parloop_struct_74136->free_last_res_65892;
    struct memblock mem_68003 = {.desc ="mem_68003", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74136->free_mem_68003,
                                 .size =0, .references =NULL};
    int64_t max_res_72160 =
            futhark_mc_segred_stage_1_parloop_struct_74136->free_max_res_72160;
    struct memblock mem_72181 = {.desc ="mem_72181", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74136->free_mem_72181,
                                 .size =0, .references =NULL};
    struct memblock mem_72182 = {.desc ="mem_72182", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74136->free_mem_72182,
                                 .size =0, .references =NULL};
    float a11_72218 =
          futhark_mc_segred_stage_1_parloop_struct_74136->free_a11_72218;
    float b11_72220 =
          futhark_mc_segred_stage_1_parloop_struct_74136->free_b11_72220;
    float c11_72221 =
          futhark_mc_segred_stage_1_parloop_struct_74136->free_c11_72221;
    struct memblock reduce_stage_1_tid_res_arr_mem_72682 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72682",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74136->free_reduce_stage_1_tid_res_arr_mem_72682,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_72684 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_72684",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74136->free_reduce_stage_1_tid_res_arr_mem_72684,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_72686 = start;
    float x_72631;
    float x_72632;
    float x_72634;
    float x_72635;
    float local_acc_72687 = 0.0F;
    float local_acc_72688 = 0.0F;
    
    for (; iter_72686 < end; iter_72686++) {
        int64_t gtid_65731 = iter_72686;
        float x_72637 = ((float *) mem_72182.mem)[gtid_65731];
        float x_72638 = ((float *) mem_72181.mem)[gtid_65731];
        bool cond_72639 = sle64(last_res_65892, gtid_65731);
        float defunc_0_f_res_72640;
        
        if (cond_72639) {
            defunc_0_f_res_72640 = 0.0F;
        } else {
            int64_t i_72641 = add64(gtid_65731, max_res_72160);
            float x_72642 = ((float *) mem_68003.mem)[i_72641];
            
            defunc_0_f_res_72640 = x_72642;
        }
        
        float x_72643 = a11_72218 * x_72637;
        float y_72644 = b11_72220 * x_72638;
        float x_72645 = x_72643 + y_72644;
        float defunc_9_fit_fun_res_72646 = defunc_0_f_res_72640 * x_72645;
        float x_72647 = b11_72220 * x_72637;
        float y_72648 = c11_72221 * x_72638;
        float x_72649 = x_72647 + y_72648;
        float defunc_9_slope_fun_res_72650 = defunc_0_f_res_72640 * x_72649;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_72631 = local_acc_72687;
        }
        // Load next params
        {
            x_72632 = defunc_9_fit_fun_res_72646;
        }
        // Red body
        {
            float defunc_1_op_res_72633 = x_72631 + x_72632;
            
            local_acc_72687 = defunc_1_op_res_72633;
        }
        // Load accum params
        {
            x_72634 = local_acc_72688;
        }
        // Load next params
        {
            x_72635 = defunc_9_slope_fun_res_72650;
        }
        // Red body
        {
            float defunc_1_op_res_72636 = x_72634 + x_72635;
            
            local_acc_72688 = defunc_1_op_res_72636;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_72682.mem)[flat_tid_65730] =
        local_acc_72687;
    ((float *) reduce_stage_1_tid_res_arr_mem_72684.mem)[flat_tid_65730] =
        local_acc_72688;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74137_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74137_end -
                 futhark_mc_segred_stage_1_parloop_74137_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74137_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74137_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74137_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74133(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65730 = tid;
    int num_tasks_72681 = info.nsubtasks;
    struct futhark_mc_task_74132 *futhark_mc_task_74132 =
                                 (struct futhark_mc_task_74132 *) args;
    struct futhark_context *ctx = futhark_mc_task_74132->ctx;
    uint64_t futhark_mc_segred_task_74133_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74133_start = get_wall_time();
    
    int64_t last_res_65892 = futhark_mc_task_74132->free_last_res_65892;
    struct memblock mem_68003 = {.desc ="mem_68003", .mem =
                                 futhark_mc_task_74132->free_mem_68003, .size =
                                 0, .references =NULL};
    int64_t max_res_72160 = futhark_mc_task_74132->free_max_res_72160;
    struct memblock mem_72181 = {.desc ="mem_72181", .mem =
                                 futhark_mc_task_74132->free_mem_72181, .size =
                                 0, .references =NULL};
    struct memblock mem_72182 = {.desc ="mem_72182", .mem =
                                 futhark_mc_task_74132->free_mem_72182, .size =
                                 0, .references =NULL};
    float a11_72218 = futhark_mc_task_74132->free_a11_72218;
    float b11_72220 = futhark_mc_task_74132->free_b11_72220;
    float c11_72221 = futhark_mc_task_74132->free_c11_72221;
    float defunc_2_reduce_res_72222 =
          *futhark_mc_task_74132->retval_defunc_2_reduce_res_72222;
    float defunc_2_reduce_res_72223 =
          *futhark_mc_task_74132->retval_defunc_2_reduce_res_72223;
    size_t reduce_stage_1_tid_res_arr_mem_72682_cached_sizze_74134 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72682 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_72684_cached_sizze_74135 = 0;
    char *reduce_stage_1_tid_res_arr_mem_72684 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_72682_cached_sizze_74134 <
        (size_t) ((int64_t) 4 * num_tasks_72681)) {
        reduce_stage_1_tid_res_arr_mem_72682 =
            realloc(reduce_stage_1_tid_res_arr_mem_72682, (int64_t) 4 *
                    num_tasks_72681);
        reduce_stage_1_tid_res_arr_mem_72682_cached_sizze_74134 = (int64_t) 4 *
            num_tasks_72681;
    }
    if (reduce_stage_1_tid_res_arr_mem_72684_cached_sizze_74135 <
        (size_t) ((int64_t) 4 * num_tasks_72681)) {
        reduce_stage_1_tid_res_arr_mem_72684 =
            realloc(reduce_stage_1_tid_res_arr_mem_72684, (int64_t) 4 *
                    num_tasks_72681);
        reduce_stage_1_tid_res_arr_mem_72684_cached_sizze_74135 = (int64_t) 4 *
            num_tasks_72681;
    }
    
    int64_t iter_72686;
    struct futhark_mc_segred_stage_1_parloop_struct_74136
    futhark_mc_segred_stage_1_parloop_struct_74136;
    
    futhark_mc_segred_stage_1_parloop_struct_74136.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74136.free_last_res_65892 =
        last_res_65892;
    futhark_mc_segred_stage_1_parloop_struct_74136.free_mem_68003 =
        mem_68003.mem;
    futhark_mc_segred_stage_1_parloop_struct_74136.free_max_res_72160 =
        max_res_72160;
    futhark_mc_segred_stage_1_parloop_struct_74136.free_mem_72181 =
        mem_72181.mem;
    futhark_mc_segred_stage_1_parloop_struct_74136.free_mem_72182 =
        mem_72182.mem;
    futhark_mc_segred_stage_1_parloop_struct_74136.free_a11_72218 = a11_72218;
    futhark_mc_segred_stage_1_parloop_struct_74136.free_b11_72220 = b11_72220;
    futhark_mc_segred_stage_1_parloop_struct_74136.free_c11_72221 = c11_72221;
    futhark_mc_segred_stage_1_parloop_struct_74136.free_reduce_stage_1_tid_res_arr_mem_72682 =
        reduce_stage_1_tid_res_arr_mem_72682;
    futhark_mc_segred_stage_1_parloop_struct_74136.free_reduce_stage_1_tid_res_arr_mem_72684 =
        reduce_stage_1_tid_res_arr_mem_72684;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74137_task;
    
    futhark_mc_segred_stage_1_parloop_74137_task.name =
        "futhark_mc_segred_stage_1_parloop_74137";
    futhark_mc_segred_stage_1_parloop_74137_task.fn =
        futhark_mc_segred_stage_1_parloop_74137;
    futhark_mc_segred_stage_1_parloop_74137_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74136;
    futhark_mc_segred_stage_1_parloop_74137_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74137_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74137_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74137_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74137_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74137_task);
    
    if (futhark_mc_segred_stage_1_parloop_74137_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74137_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74137_total_end -
                 futhark_mc_segred_stage_1_parloop_74137_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74137_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74137_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74137_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_72222 = 0.0F;
        defunc_2_reduce_res_72223 = 0.0F;
    }
    
    float x_72689;
    float x_72690;
    float x_72692;
    float x_72693;
    
    for (int32_t i_72695 = 0; i_72695 < num_tasks_72681; i_72695++) {
        flat_tid_65730 = i_72695;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_72689 = defunc_2_reduce_res_72222;
            }
            // load next params
            {
                x_72690 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72682)[flat_tid_65730];
            }
            // red body
            {
                float defunc_1_op_res_72691 = x_72689 + x_72690;
                
                defunc_2_reduce_res_72222 = defunc_1_op_res_72691;
            }
            // load acc params
            {
                x_72692 = defunc_2_reduce_res_72223;
            }
            // load next params
            {
                x_72693 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_72684)[flat_tid_65730];
            }
            // red body
            {
                float defunc_1_op_res_72694 = x_72692 + x_72693;
                
                defunc_2_reduce_res_72223 = defunc_1_op_res_72694;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_72682);
    free(reduce_stage_1_tid_res_arr_mem_72684);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74133_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74133_end -
                 futhark_mc_segred_task_74133_start;
        
        ctx->futhark_mc_segred_task_74133_runs[tid]++;
        ctx->futhark_mc_segred_task_74133_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74133_iter[tid] += iterations;
    }
    *futhark_mc_task_74132->retval_defunc_2_reduce_res_72222 =
        defunc_2_reduce_res_72222;
    *futhark_mc_task_74132->retval_defunc_2_reduce_res_72223 =
        defunc_2_reduce_res_72223;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74122(void *args, int64_t start,
                                           int64_t end, int flat_tid_65726,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74121
    *futhark_mc_segmap_parloop_struct_74121 =
    (struct futhark_mc_segmap_parloop_struct_74121 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74121->ctx;
    uint64_t futhark_mc_segmap_parloop_74122_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74122_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74121->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74121->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74121->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74121->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74121->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_74121->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_74121->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_74121->free_loop_cond_62281;
    int64_t last_res_65892 =
            futhark_mc_segmap_parloop_struct_74121->free_last_res_65892;
    int64_t min_arg_65904 =
            futhark_mc_segmap_parloop_struct_74121->free_min_arg_65904;
    int64_t min_arg_65905 =
            futhark_mc_segmap_parloop_struct_74121->free_min_arg_65905;
    int64_t min_res_65906 =
            futhark_mc_segmap_parloop_struct_74121->free_min_res_65906;
    float max_res_65910 =
          futhark_mc_segmap_parloop_struct_74121->free_max_res_65910;
    struct memblock mem_68003 = {.desc ="mem_68003", .mem =
                                 futhark_mc_segmap_parloop_struct_74121->free_mem_68003,
                                 .size =0, .references =NULL};
    struct memblock mem_68006 = {.desc ="mem_68006", .mem =
                                 futhark_mc_segmap_parloop_struct_74121->free_mem_68006,
                                 .size =0, .references =NULL};
    struct memblock mem_68009 = {.desc ="mem_68009", .mem =
                                 futhark_mc_segmap_parloop_struct_74121->free_mem_68009,
                                 .size =0, .references =NULL};
    struct memblock mem_68012 = {.desc ="mem_68012", .mem =
                                 futhark_mc_segmap_parloop_struct_74121->free_mem_68012,
                                 .size =0, .references =NULL};
    int64_t bytes_68013 =
            futhark_mc_segmap_parloop_struct_74121->free_bytes_68013;
    struct memblock mem_68015 = {.desc ="mem_68015", .mem =
                                 futhark_mc_segmap_parloop_struct_74121->free_mem_68015,
                                 .size =0, .references =NULL};
    struct memblock mem_68054 = {.desc ="mem_68054", .mem =
                                 futhark_mc_segmap_parloop_struct_74121->free_mem_68054,
                                 .size =0, .references =NULL};
    struct memblock mem_68057 = {.desc ="mem_68057", .mem =
                                 futhark_mc_segmap_parloop_struct_74121->free_mem_68057,
                                 .size =0, .references =NULL};
    size_t mem_72181_cached_sizze_74123 = 0;
    char *mem_72181 = NULL;
    size_t mem_72182_cached_sizze_74124 = 0;
    char *mem_72182 = NULL;
    int64_t iterations = end - start;
    int64_t iter_72549 = start;
    
    if (mem_72181_cached_sizze_74123 < (size_t) bytes_68013) {
        mem_72181 = realloc(mem_72181, bytes_68013);
        mem_72181_cached_sizze_74123 = bytes_68013;
    }
    if (mem_72182_cached_sizze_74124 < (size_t) bytes_68013) {
        mem_72182 = realloc(mem_72182, bytes_68013);
        mem_72182_cached_sizze_74124 = bytes_68013;
    }
    for (; iter_72549 < end; iter_72549++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72651 = n_m_62264;
        int64_t gtid_65727 = iter_72549;
        int64_t remnant_72652 = iter_72549 - gtid_65727;
        int64_t min_arg_72094 = mul64(jump_62260, gtid_65727);
        int64_t min_res_72095 = smin64(i_62270, min_arg_72094);
        int64_t defunc_0_g_res_72096 = add64((int64_t) 1, min_res_72095);
        bool init_idx_72097;
        int64_t init_idx_72098;
        int64_t init_idx_72099;
        bool loop_while_72550;
        int64_t low_72551;
        int64_t high_72552;
        
        loop_while_72550 = x_62271;
        low_72551 = (int64_t) 0;
        high_72552 = i_62270;
        while (loop_while_72550) {
            int64_t x_72553 = add64(low_72551, high_72552);
            int64_t mid_72554 = sdiv64(x_72553, (int64_t) 2);
            bool x_72555 = sle64((int64_t) 0, mid_72554);
            bool y_72556 = slt64(mid_72554, n_62256);
            bool bounds_check_72557 = x_72555 && y_72556;
            bool index_certs_72558;
            
            if (!bounds_check_72557) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_72554,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t mid_id_72559 = ((int64_t *) mem_68012.mem)[mid_72554];
            bool cond_72560 = slt64(mid_id_72559, (int64_t) 0);
            int64_t mid_idx_72561;
            
            if (cond_72560) {
                mid_idx_72561 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_72561 = mid_id_72559;
            }
            
            bool cond_72562 = sle64(defunc_0_g_res_72096, mid_idx_72561);
            int64_t loopres_72563;
            int64_t loopres_72564;
            
            if (cond_72562) {
                int64_t loopres_t_res_72565 = sub64(mid_72554, (int64_t) 1);
                
                loopres_72563 = low_72551;
                loopres_72564 = loopres_t_res_72565;
            } else {
                int64_t loopres_f_res_72566 = add64((int64_t) 1, mid_72554);
                
                loopres_72563 = loopres_f_res_72566;
                loopres_72564 = high_72552;
            }
            
            bool loop_cond_72567 = sle64(loopres_72563, loopres_72564);
            bool loop_while_tmp_72653 = loop_cond_72567;
            int64_t low_tmp_72654 = loopres_72563;
            int64_t high_tmp_72655 = loopres_72564;
            
            loop_while_72550 = loop_while_tmp_72653;
            low_72551 = low_tmp_72654;
            high_72552 = high_tmp_72655;
        }
        init_idx_72097 = loop_while_72550;
        init_idx_72098 = low_72551;
        init_idx_72099 = high_72552;
        
        bool idx_72118;
        int64_t idx_72119;
        int64_t idx_72120;
        int64_t idx_72121;
        bool loop_while_72568;
        int64_t l_idx_72569;
        int64_t r_idx_72570;
        int64_t span_72571;
        
        loop_while_72568 = loop_cond_62281;
        l_idx_72569 = init_idx_72098;
        r_idx_72570 = init_idx_72098;
        span_72571 = (int64_t) 1;
        while (loop_while_72568) {
            int64_t max_arg_72572 = sub64(l_idx_72569, (int64_t) 1);
            int64_t max_res_72573 = smax64((int64_t) 0, max_arg_72572);
            int64_t min_arg_72574 = add64((int64_t) 1, r_idx_72570);
            int64_t min_res_72575 = smin64(min_arg_65904, min_arg_72574);
            bool x_72576 = sle64((int64_t) 0, max_res_72573);
            bool y_72577 = slt64(max_res_72573, n_62256);
            bool bounds_check_72578 = x_72576 && y_72577;
            bool index_certs_72579;
            
            if (!bounds_check_72578) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_72573,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_72580 = ((int64_t *) mem_68012.mem)[max_res_72573];
            int64_t abs_arg_72581 = sub64(x_72580, defunc_0_g_res_72096);
            int64_t abs_res_72582 = abs64(abs_arg_72581);
            bool x_72583 = sle64((int64_t) 0, min_res_72575);
            bool y_72584 = slt64(min_res_72575, n_62256);
            bool bounds_check_72585 = x_72583 && y_72584;
            bool index_certs_72586;
            
            if (!bounds_check_72585) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_72575,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_72587 = ((int64_t *) mem_68012.mem)[min_res_72575];
            int64_t abs_arg_72588 = sub64(x_72587, defunc_0_g_res_72096);
            int64_t abs_res_72589 = abs64(abs_arg_72588);
            bool cond_72590 = max_res_72573 == l_idx_72569;
            int64_t loopres_72591;
            int64_t loopres_72592;
            int64_t loopres_72593;
            
            if (cond_72590) {
                loopres_72591 = l_idx_72569;
                loopres_72592 = r_idx_72570;
                loopres_72593 = min_res_62276;
            } else {
                bool cond_72594 = slt64(abs_res_72582, abs_res_72589);
                bool cond_f_res_72595 = min_res_72575 == r_idx_72570;
                bool x_72596 = !cond_72594;
                bool y_72597 = cond_f_res_72595 && x_72596;
                bool cond_72598 = cond_72594 || y_72597;
                int64_t loopres_f_res_72599;
                
                if (cond_72598) {
                    loopres_f_res_72599 = max_res_72573;
                } else {
                    loopres_f_res_72599 = l_idx_72569;
                }
                
                int64_t loopres_f_res_72600;
                
                if (cond_72598) {
                    loopres_f_res_72600 = r_idx_72570;
                } else {
                    loopres_f_res_72600 = min_res_72575;
                }
                
                int64_t loopres_f_res_72601;
                
                if (cond_72598) {
                    int64_t loopres_f_res_t_res_72602 = add64((int64_t) 1,
                                                              span_72571);
                    
                    loopres_f_res_72601 = loopres_f_res_t_res_72602;
                } else {
                    int64_t loopres_f_res_f_res_72603 = add64((int64_t) 1,
                                                              span_72571);
                    
                    loopres_f_res_72601 = loopres_f_res_f_res_72603;
                }
                loopres_72591 = loopres_f_res_72599;
                loopres_72592 = loopres_f_res_72600;
                loopres_72593 = loopres_f_res_72601;
            }
            
            bool loop_cond_72604 = slt64(loopres_72593, min_res_62276);
            bool loop_while_tmp_72656 = loop_cond_72604;
            int64_t l_idx_tmp_72657 = loopres_72591;
            int64_t r_idx_tmp_72658 = loopres_72592;
            int64_t span_tmp_72659 = loopres_72593;
            
            loop_while_72568 = loop_while_tmp_72656;
            l_idx_72569 = l_idx_tmp_72657;
            r_idx_72570 = r_idx_tmp_72658;
            span_72571 = span_tmp_72659;
        }
        idx_72118 = loop_while_72568;
        idx_72119 = l_idx_72569;
        idx_72120 = r_idx_72570;
        idx_72121 = span_72571;
        
        int64_t min_res_72159 = smin64(min_arg_65905, idx_72119);
        int64_t max_res_72160 = smax64((int64_t) 0, min_res_72159);
        int64_t x_72161 = add64(min_res_65906, max_res_72160);
        int64_t r_72162 = sub64(x_72161, (int64_t) 1);
        bool x_72163 = sle64((int64_t) 0, r_72162);
        bool y_72164 = slt64(r_72162, n_62256);
        bool bounds_check_72165 = x_72163 && y_72164;
        bool index_certs_72166;
        
        if (!bounds_check_72165) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_72162,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_72167 = ((int64_t *) mem_68006.mem)[r_72162];
        int64_t abs_arg_72168 = sub64(x_72167, min_res_72095);
        int64_t abs_res_72169 = abs64(abs_arg_72168);
        bool x_72170 = sle64((int64_t) 0, max_res_72160);
        bool y_72171 = slt64(max_res_72160, n_62256);
        bool bounds_check_72172 = x_72170 && y_72171;
        bool index_certs_72173;
        
        if (!bounds_check_72172) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_72160,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_72174 = ((int64_t *) mem_68006.mem)[max_res_72160];
        int64_t abs_arg_72175 = sub64(x_72174, min_res_72095);
        int64_t abs_res_72176 = abs64(abs_arg_72175);
        int64_t max_res_72177 = smax64(abs_res_72169, abs_res_72176);
        float defunc_0_f_res_72178 = sitofp_i64_f32(max_res_72177);
        float defunc_1_f_res_72179 = max_res_65910 + defunc_0_f_res_72178;
        float defunc_0_f_res_72180 = sitofp_i64_f32(min_res_72095);
        float defunc_2_reduce_res_72183;
        float defunc_2_reduce_res_72184;
        float defunc_2_reduce_res_72185;
        int64_t flat_tid_65728 = (int64_t) 0;
        int32_t num_tasks_72660;
        struct futhark_mc_task_74125 futhark_mc_task_74125;
        
        futhark_mc_task_74125.ctx = ctx;
        futhark_mc_task_74125.free_last_res_65892 = last_res_65892;
        futhark_mc_task_74125.free_mem_68009 = mem_68009.mem;
        futhark_mc_task_74125.free_mem_68015 = mem_68015.mem;
        futhark_mc_task_74125.free_max_res_72160 = max_res_72160;
        futhark_mc_task_74125.free_defunc_1_f_res_72179 = defunc_1_f_res_72179;
        futhark_mc_task_74125.free_defunc_0_f_res_72180 = defunc_0_f_res_72180;
        futhark_mc_task_74125.retval_defunc_2_reduce_res_72183 =
            &defunc_2_reduce_res_72183;
        futhark_mc_task_74125.retval_defunc_2_reduce_res_72184 =
            &defunc_2_reduce_res_72184;
        futhark_mc_task_74125.retval_defunc_2_reduce_res_72185 =
            &defunc_2_reduce_res_72185;
        futhark_mc_task_74125.retval_mem_72181 = mem_72181;
        futhark_mc_task_74125.retval_mem_72182 = mem_72182;
        
        struct scheduler_segop futhark_mc_task_74125_task;
        
        futhark_mc_task_74125_task.args = &futhark_mc_task_74125;
        futhark_mc_task_74125_task.top_level_fn = futhark_mc_segred_task_74126;
        futhark_mc_task_74125_task.name = "futhark_mc_segred_task_74126";
        futhark_mc_task_74125_task.iterations = q_62258;
        futhark_mc_task_74125_task.task_time =
            &ctx->futhark_mc_segred_task_74126_total_time;
        futhark_mc_task_74125_task.task_iter =
            &ctx->futhark_mc_segred_task_74126_total_iter;
        futhark_mc_task_74125_task.sched = STATIC;
        futhark_mc_task_74125_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74126_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74125_task);
        
        if (futhark_mc_segred_task_74126_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_72214 = defunc_2_reduce_res_72183 * defunc_2_reduce_res_72185;
        float y_72215 = defunc_2_reduce_res_72184 * defunc_2_reduce_res_72184;
        float y_72216 = x_72214 - y_72215;
        float det1_72217 = 1.0F / y_72216;
        float a11_72218 = defunc_2_reduce_res_72185 * det1_72217;
        float negate_arg_72219 = defunc_2_reduce_res_72184 * det1_72217;
        float b11_72220 = 0.0F - negate_arg_72219;
        float c11_72221 = defunc_2_reduce_res_72183 * det1_72217;
        float defunc_2_reduce_res_72222;
        float defunc_2_reduce_res_72223;
        int64_t flat_tid_65730 = (int64_t) 0;
        int32_t num_tasks_72681;
        struct futhark_mc_task_74132 futhark_mc_task_74132;
        
        futhark_mc_task_74132.ctx = ctx;
        futhark_mc_task_74132.free_last_res_65892 = last_res_65892;
        futhark_mc_task_74132.free_mem_68003 = mem_68003.mem;
        futhark_mc_task_74132.free_max_res_72160 = max_res_72160;
        futhark_mc_task_74132.free_mem_72181 = mem_72181;
        futhark_mc_task_74132.free_mem_72182 = mem_72182;
        futhark_mc_task_74132.free_a11_72218 = a11_72218;
        futhark_mc_task_74132.free_b11_72220 = b11_72220;
        futhark_mc_task_74132.free_c11_72221 = c11_72221;
        futhark_mc_task_74132.retval_defunc_2_reduce_res_72222 =
            &defunc_2_reduce_res_72222;
        futhark_mc_task_74132.retval_defunc_2_reduce_res_72223 =
            &defunc_2_reduce_res_72223;
        
        struct scheduler_segop futhark_mc_task_74132_task;
        
        futhark_mc_task_74132_task.args = &futhark_mc_task_74132;
        futhark_mc_task_74132_task.top_level_fn = futhark_mc_segred_task_74133;
        futhark_mc_task_74132_task.name = "futhark_mc_segred_task_74133";
        futhark_mc_task_74132_task.iterations = q_62258;
        futhark_mc_task_74132_task.task_time =
            &ctx->futhark_mc_segred_task_74133_total_time;
        futhark_mc_task_74132_task.task_iter =
            &ctx->futhark_mc_segred_task_74133_total_iter;
        futhark_mc_task_74132_task.sched = STATIC;
        futhark_mc_task_74132_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74133_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74132_task);
        
        if (futhark_mc_segred_task_74133_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_68054.mem)[gtid_65727] = defunc_2_reduce_res_72222;
        ((float *) mem_68057.mem)[gtid_65727] = defunc_2_reduce_res_72223;
    }
    
  cleanup:
    { }
    free(mem_72181);
    free(mem_72182);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74122_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74122_end -
                 futhark_mc_segmap_parloop_74122_start;
        
        ctx->futhark_mc_segmap_parloop_74122_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74122_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74122_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74120(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65726 = tid;
    int num_tasks_72429 = info.nsubtasks;
    struct futhark_mc_task_74114 *futhark_mc_task_74114 =
                                 (struct futhark_mc_task_74114 *) args;
    struct futhark_context *ctx = futhark_mc_task_74114->ctx;
    uint64_t futhark_mc_segmap_nested_task_74120_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74120_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74114->free_n_62256;
    int64_t q_62258 = futhark_mc_task_74114->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_74114->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74114->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74114->free_i_62270;
    bool x_62271 = futhark_mc_task_74114->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_74114->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_74114->free_loop_cond_62281;
    int64_t last_res_65892 = futhark_mc_task_74114->free_last_res_65892;
    int64_t min_arg_65904 = futhark_mc_task_74114->free_min_arg_65904;
    int64_t min_arg_65905 = futhark_mc_task_74114->free_min_arg_65905;
    int64_t min_res_65906 = futhark_mc_task_74114->free_min_res_65906;
    float max_res_65910 = futhark_mc_task_74114->free_max_res_65910;
    struct memblock mem_68003 = {.desc ="mem_68003", .mem =
                                 futhark_mc_task_74114->free_mem_68003, .size =
                                 0, .references =NULL};
    struct memblock mem_68006 = {.desc ="mem_68006", .mem =
                                 futhark_mc_task_74114->free_mem_68006, .size =
                                 0, .references =NULL};
    struct memblock mem_68009 = {.desc ="mem_68009", .mem =
                                 futhark_mc_task_74114->free_mem_68009, .size =
                                 0, .references =NULL};
    struct memblock mem_68012 = {.desc ="mem_68012", .mem =
                                 futhark_mc_task_74114->free_mem_68012, .size =
                                 0, .references =NULL};
    int64_t bytes_68013 = futhark_mc_task_74114->free_bytes_68013;
    struct memblock mem_68015 = {.desc ="mem_68015", .mem =
                                 futhark_mc_task_74114->free_mem_68015, .size =
                                 0, .references =NULL};
    struct memblock mem_68054 = {.desc ="mem_68054", .mem =
                                 futhark_mc_task_74114->free_mem_68054, .size =
                                 0, .references =NULL};
    struct memblock mem_68057 = {.desc ="mem_68057", .mem =
                                 futhark_mc_task_74114->free_mem_68057, .size =
                                 0, .references =NULL};
    int64_t iter_72549;
    struct futhark_mc_segmap_parloop_struct_74121
    futhark_mc_segmap_parloop_struct_74121;
    
    futhark_mc_segmap_parloop_struct_74121.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74121.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74121.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74121.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74121.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74121.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74121.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_74121.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_74121.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_74121.free_last_res_65892 = last_res_65892;
    futhark_mc_segmap_parloop_struct_74121.free_min_arg_65904 = min_arg_65904;
    futhark_mc_segmap_parloop_struct_74121.free_min_arg_65905 = min_arg_65905;
    futhark_mc_segmap_parloop_struct_74121.free_min_res_65906 = min_res_65906;
    futhark_mc_segmap_parloop_struct_74121.free_max_res_65910 = max_res_65910;
    futhark_mc_segmap_parloop_struct_74121.free_mem_68003 = mem_68003.mem;
    futhark_mc_segmap_parloop_struct_74121.free_mem_68006 = mem_68006.mem;
    futhark_mc_segmap_parloop_struct_74121.free_mem_68009 = mem_68009.mem;
    futhark_mc_segmap_parloop_struct_74121.free_mem_68012 = mem_68012.mem;
    futhark_mc_segmap_parloop_struct_74121.free_bytes_68013 = bytes_68013;
    futhark_mc_segmap_parloop_struct_74121.free_mem_68015 = mem_68015.mem;
    futhark_mc_segmap_parloop_struct_74121.free_mem_68054 = mem_68054.mem;
    futhark_mc_segmap_parloop_struct_74121.free_mem_68057 = mem_68057.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74122_task;
    
    futhark_mc_segmap_parloop_74122_task.name =
        "futhark_mc_segmap_parloop_74122";
    futhark_mc_segmap_parloop_74122_task.fn = futhark_mc_segmap_parloop_74122;
    futhark_mc_segmap_parloop_74122_task.args =
        &futhark_mc_segmap_parloop_struct_74121;
    futhark_mc_segmap_parloop_74122_task.iterations = iterations;
    futhark_mc_segmap_parloop_74122_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74122_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74122_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74122_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74122_task);
    
    if (futhark_mc_segmap_parloop_74122_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74122_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74122_total_end -
                 futhark_mc_segmap_parloop_74122_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74122_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74122_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74122_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74120_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74120_end -
                 futhark_mc_segmap_nested_task_74120_start;
        
        ctx->futhark_mc_segmap_nested_task_74120_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74120_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74120_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74086(void *args, int64_t start,
                                           int64_t end, int flat_tid_65714,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74085
    *futhark_mc_segmap_parloop_struct_74085 =
    (struct futhark_mc_segmap_parloop_struct_74085 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74085->ctx;
    uint64_t futhark_mc_segmap_parloop_74086_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74086_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_segmap_parloop_struct_74085->free_m_62255;
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74085->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74085->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74085->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74085->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74085->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_74085->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_74085->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_74085->free_loop_cond_62281;
    float i64_res_62282 =
          futhark_mc_segmap_parloop_struct_74085->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_74085->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67998 =
            futhark_mc_segmap_parloop_struct_74085->free_bytes_67998;
    int64_t bytes_68001 =
            futhark_mc_segmap_parloop_struct_74085->free_bytes_68001;
    int64_t bytes_68013 =
            futhark_mc_segmap_parloop_struct_74085->free_bytes_68013;
    int64_t bytes_68052 =
            futhark_mc_segmap_parloop_struct_74085->free_bytes_68052;
    struct memblock mem_68211 = {.desc ="mem_68211", .mem =
                                 futhark_mc_segmap_parloop_struct_74085->free_mem_68211,
                                 .size =0, .references =NULL};
    struct memblock mem_68215 = {.desc ="mem_68215", .mem =
                                 futhark_mc_segmap_parloop_struct_74085->free_mem_68215,
                                 .size =0, .references =NULL};
    size_t mem_68000_cached_sizze_74087 = 0;
    char *mem_68000 = NULL;
    size_t mem_68003_cached_sizze_74088 = 0;
    char *mem_68003 = NULL;
    size_t mem_68006_cached_sizze_74089 = 0;
    char *mem_68006 = NULL;
    size_t mem_68009_cached_sizze_74090 = 0;
    char *mem_68009 = NULL;
    size_t mem_68012_cached_sizze_74091 = 0;
    char *mem_68012 = NULL;
    size_t mem_68015_cached_sizze_74092 = 0;
    char *mem_68015 = NULL;
    size_t mem_68054_cached_sizze_74093 = 0;
    char *mem_68054 = NULL;
    size_t mem_68057_cached_sizze_74094 = 0;
    char *mem_68057 = NULL;
    int64_t iterations = end - start;
    int64_t iter_72075 = start;
    
    if (mem_68000_cached_sizze_74087 < (size_t) bytes_67998) {
        mem_68000 = realloc(mem_68000, bytes_67998);
        mem_68000_cached_sizze_74087 = bytes_67998;
    }
    if (mem_68003_cached_sizze_74088 < (size_t) bytes_68001) {
        mem_68003 = realloc(mem_68003, bytes_68001);
        mem_68003_cached_sizze_74088 = bytes_68001;
    }
    if (mem_68006_cached_sizze_74089 < (size_t) bytes_67998) {
        mem_68006 = realloc(mem_68006, bytes_67998);
        mem_68006_cached_sizze_74089 = bytes_67998;
    }
    if (mem_68009_cached_sizze_74090 < (size_t) bytes_68001) {
        mem_68009 = realloc(mem_68009, bytes_68001);
        mem_68009_cached_sizze_74090 = bytes_68001;
    }
    if (mem_68012_cached_sizze_74091 < (size_t) bytes_67998) {
        mem_68012 = realloc(mem_68012, bytes_67998);
        mem_68012_cached_sizze_74091 = bytes_67998;
    }
    if (mem_68015_cached_sizze_74092 < (size_t) bytes_68013) {
        mem_68015 = realloc(mem_68015, bytes_68013);
        mem_68015_cached_sizze_74092 = bytes_68013;
    }
    if (mem_68054_cached_sizze_74093 < (size_t) bytes_68052) {
        mem_68054 = realloc(mem_68054, bytes_68052);
        mem_68054_cached_sizze_74093 = bytes_68052;
    }
    if (mem_68057_cached_sizze_74094 < (size_t) bytes_68052) {
        mem_68057 = realloc(mem_68057, bytes_68052);
        mem_68057_cached_sizze_74094 = bytes_68052;
    }
    for (; iter_72075 < end; iter_72075++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72397 = m_62255;
        int64_t gtid_65715 = iter_72075;
        int64_t remnant_72398 = iter_72075 - gtid_65715;
        int64_t flat_tid_65716 = (int64_t) 0;
        int32_t num_tasks_72399;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_74095 futhark_mc_task_74095;
        
        futhark_mc_task_74095.ctx = ctx;
        futhark_mc_task_74095.free_n_62256 = n_62256;
        futhark_mc_task_74095.free_gtid_65715 = gtid_65715;
        futhark_mc_task_74095.free_Y_mem_67388 = Y_mem_67388.mem;
        futhark_mc_task_74095.free_mem_68000 = mem_68000;
        
        struct scheduler_segop futhark_mc_task_74095_task;
        
        futhark_mc_task_74095_task.args = &futhark_mc_task_74095;
        futhark_mc_task_74095_task.top_level_fn = futhark_mc_segscan_task_74096;
        futhark_mc_task_74095_task.name = "futhark_mc_segscan_task_74096";
        futhark_mc_task_74095_task.iterations = n_62256;
        futhark_mc_task_74095_task.task_time =
            &ctx->futhark_mc_segscan_task_74096_total_time;
        futhark_mc_task_74095_task.task_iter =
            &ctx->futhark_mc_segscan_task_74096_total_iter;
        futhark_mc_task_74095_task.sched = STATIC;
        futhark_mc_task_74095_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_74096_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74095_task);
        
        if (futhark_mc_segscan_task_74096_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_65892 = ((int64_t *) mem_68000)[i_62270];
        
        for (int64_t i_72413 = 0; i_72413 < n_62256; i_72413++) {
            ((float *) mem_68003)[i_72413] = 0.0F;
        }
        for (int64_t i_72414 = 0; i_72414 < n_62256; i_72414++) {
            ((int64_t *) mem_68006)[i_72414] = (int64_t) -1;
        }
        
        int64_t flat_tid_65718 = (int64_t) 0;
        int32_t num_tasks_72415;
        struct futhark_mc_task_74102 futhark_mc_task_74102;
        
        futhark_mc_task_74102.ctx = ctx;
        futhark_mc_task_74102.free_n_62256 = n_62256;
        futhark_mc_task_74102.free_gtid_65715 = gtid_65715;
        futhark_mc_task_74102.free_Y_mem_67388 = Y_mem_67388.mem;
        futhark_mc_task_74102.free_mem_68000 = mem_68000;
        futhark_mc_task_74102.free_mem_68003 = mem_68003;
        futhark_mc_task_74102.free_mem_68006 = mem_68006;
        
        struct scheduler_segop futhark_mc_task_74102_task;
        
        futhark_mc_task_74102_task.args = &futhark_mc_task_74102;
        futhark_mc_task_74102_task.top_level_fn = futhark_mc_segmap_task_74103;
        futhark_mc_task_74102_task.name = "futhark_mc_segmap_task_74103";
        futhark_mc_task_74102_task.iterations = n_62256;
        futhark_mc_task_74102_task.task_time =
            &ctx->futhark_mc_segmap_task_74103_total_time;
        futhark_mc_task_74102_task.task_iter =
            &ctx->futhark_mc_segmap_task_74103_total_iter;
        futhark_mc_task_74102_task.sched = STATIC;
        futhark_mc_task_74102_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74103_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74102_task);
        
        if (futhark_mc_segmap_task_74103_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_65904 = sub64(last_res_65892, (int64_t) 1);
        int64_t min_arg_65905 = sub64(last_res_65892, min_res_62276);
        int64_t min_res_65906 = smin64(q_62258, last_res_65892);
        float i64_res_65907 = sitofp_i64_f32(last_res_65892);
        float x_65908 = i64_res_62282 - i64_res_65907;
        float max_arg_65909 = x_65908 / 2.0F;
        float max_res_65910 = fmax32(0.0F, max_arg_65909);
        int64_t flat_tid_65720 = (int64_t) 0;
        int32_t num_tasks_72421;
        struct futhark_mc_task_74106 futhark_mc_task_74106;
        
        futhark_mc_task_74106.ctx = ctx;
        futhark_mc_task_74106.free_n_62256 = n_62256;
        futhark_mc_task_74106.free_mem_68006 = mem_68006;
        futhark_mc_task_74106.free_mem_68009 = mem_68009;
        futhark_mc_task_74106.free_mem_68012 = mem_68012;
        
        struct scheduler_segop futhark_mc_task_74106_task;
        
        futhark_mc_task_74106_task.args = &futhark_mc_task_74106;
        futhark_mc_task_74106_task.top_level_fn = futhark_mc_segmap_task_74107;
        futhark_mc_task_74106_task.name = "futhark_mc_segmap_task_74107";
        futhark_mc_task_74106_task.iterations = n_62256;
        futhark_mc_task_74106_task.task_time =
            &ctx->futhark_mc_segmap_task_74107_total_time;
        futhark_mc_task_74106_task.task_iter =
            &ctx->futhark_mc_segmap_task_74107_total_iter;
        futhark_mc_task_74106_task.sched = STATIC;
        futhark_mc_task_74106_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74107_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74106_task);
        
        if (futhark_mc_segmap_task_74107_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_65722 = (int64_t) 0;
        int32_t num_tasks_72425;
        struct futhark_mc_task_74110 futhark_mc_task_74110;
        
        futhark_mc_task_74110.ctx = ctx;
        futhark_mc_task_74110.free_q_62258 = q_62258;
        futhark_mc_task_74110.free_last_res_65892 = last_res_65892;
        futhark_mc_task_74110.free_mem_68015 = mem_68015;
        
        struct scheduler_segop futhark_mc_task_74110_task;
        
        futhark_mc_task_74110_task.args = &futhark_mc_task_74110;
        futhark_mc_task_74110_task.top_level_fn = futhark_mc_segmap_task_74111;
        futhark_mc_task_74110_task.name = "futhark_mc_segmap_task_74111";
        futhark_mc_task_74110_task.iterations = q_62258;
        futhark_mc_task_74110_task.task_time =
            &ctx->futhark_mc_segmap_task_74111_total_time;
        futhark_mc_task_74110_task.task_iter =
            &ctx->futhark_mc_segmap_task_74111_total_iter;
        futhark_mc_task_74110_task.sched = STATIC;
        futhark_mc_task_74110_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74111_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74110_task);
        
        if (futhark_mc_segmap_task_74111_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_65724 = (int64_t) 0;
        int32_t num_tasks_72429;
        int64_t flat_tid_65726 = (int64_t) 0;
        struct futhark_mc_task_74114 futhark_mc_task_74114;
        
        futhark_mc_task_74114.ctx = ctx;
        futhark_mc_task_74114.free_n_62256 = n_62256;
        futhark_mc_task_74114.free_q_62258 = q_62258;
        futhark_mc_task_74114.free_jump_62260 = jump_62260;
        futhark_mc_task_74114.free_n_m_62264 = n_m_62264;
        futhark_mc_task_74114.free_i_62270 = i_62270;
        futhark_mc_task_74114.free_x_62271 = x_62271;
        futhark_mc_task_74114.free_min_res_62276 = min_res_62276;
        futhark_mc_task_74114.free_loop_cond_62281 = loop_cond_62281;
        futhark_mc_task_74114.free_last_res_65892 = last_res_65892;
        futhark_mc_task_74114.free_min_arg_65904 = min_arg_65904;
        futhark_mc_task_74114.free_min_arg_65905 = min_arg_65905;
        futhark_mc_task_74114.free_min_res_65906 = min_res_65906;
        futhark_mc_task_74114.free_max_res_65910 = max_res_65910;
        futhark_mc_task_74114.free_mem_68003 = mem_68003;
        futhark_mc_task_74114.free_mem_68006 = mem_68006;
        futhark_mc_task_74114.free_mem_68009 = mem_68009;
        futhark_mc_task_74114.free_mem_68012 = mem_68012;
        futhark_mc_task_74114.free_bytes_68013 = bytes_68013;
        futhark_mc_task_74114.free_mem_68015 = mem_68015;
        futhark_mc_task_74114.free_mem_68054 = mem_68054;
        futhark_mc_task_74114.free_mem_68057 = mem_68057;
        
        struct scheduler_segop futhark_mc_task_74114_task;
        
        futhark_mc_task_74114_task.args = &futhark_mc_task_74114;
        futhark_mc_task_74114_task.top_level_fn = futhark_mc_segmap_task_74115;
        futhark_mc_task_74114_task.name = "futhark_mc_segmap_task_74115";
        futhark_mc_task_74114_task.iterations = n_m_62264;
        futhark_mc_task_74114_task.task_time =
            &ctx->futhark_mc_segmap_task_74115_total_time;
        futhark_mc_task_74114_task.task_iter =
            &ctx->futhark_mc_segmap_task_74115_total_iter;
        futhark_mc_task_74114_task.sched = DYNAMIC;
        futhark_mc_task_74114_task.nested_fn =
            futhark_mc_segmap_nested_task_74120;
        
        int futhark_mc_segmap_task_74115_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74114_task);
        
        if (futhark_mc_segmap_task_74115_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_68211.mem + gtid_65715 * n_m_62264 * (int64_t) 4,
                mem_68054 + (int64_t) 0, n_m_62264 * (int64_t) 4);
        memmove(mem_68215.mem + gtid_65715 * n_m_62264 * (int64_t) 4,
                mem_68057 + (int64_t) 0, n_m_62264 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_68000);
    free(mem_68003);
    free(mem_68006);
    free(mem_68009);
    free(mem_68012);
    free(mem_68015);
    free(mem_68054);
    free(mem_68057);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74086_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74086_end -
                 futhark_mc_segmap_parloop_74086_start;
        
        ctx->futhark_mc_segmap_parloop_74086_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74086_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74086_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74084(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_65714 = tid;
    int num_tasks_71856 = info.nsubtasks;
    struct futhark_mc_task_74070 *futhark_mc_task_74070 =
                                 (struct futhark_mc_task_74070 *) args;
    struct futhark_context *ctx = futhark_mc_task_74070->ctx;
    uint64_t futhark_mc_segmap_nested_task_74084_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74084_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_task_74070->free_m_62255;
    int64_t n_62256 = futhark_mc_task_74070->free_n_62256;
    int64_t q_62258 = futhark_mc_task_74070->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_74070->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74070->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74070->free_i_62270;
    bool x_62271 = futhark_mc_task_74070->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_74070->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_74070->free_loop_cond_62281;
    float i64_res_62282 = futhark_mc_task_74070->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_74070->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_67998 = futhark_mc_task_74070->free_bytes_67998;
    int64_t bytes_68001 = futhark_mc_task_74070->free_bytes_68001;
    int64_t bytes_68013 = futhark_mc_task_74070->free_bytes_68013;
    int64_t bytes_68052 = futhark_mc_task_74070->free_bytes_68052;
    struct memblock mem_68211 = {.desc ="mem_68211", .mem =
                                 futhark_mc_task_74070->free_mem_68211, .size =
                                 0, .references =NULL};
    struct memblock mem_68215 = {.desc ="mem_68215", .mem =
                                 futhark_mc_task_74070->free_mem_68215, .size =
                                 0, .references =NULL};
    int64_t iter_72075;
    struct futhark_mc_segmap_parloop_struct_74085
    futhark_mc_segmap_parloop_struct_74085;
    
    futhark_mc_segmap_parloop_struct_74085.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74085.free_m_62255 = m_62255;
    futhark_mc_segmap_parloop_struct_74085.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74085.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74085.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74085.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74085.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74085.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_74085.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_74085.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_74085.free_i64_res_62282 = i64_res_62282;
    futhark_mc_segmap_parloop_struct_74085.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_74085.free_bytes_67998 = bytes_67998;
    futhark_mc_segmap_parloop_struct_74085.free_bytes_68001 = bytes_68001;
    futhark_mc_segmap_parloop_struct_74085.free_bytes_68013 = bytes_68013;
    futhark_mc_segmap_parloop_struct_74085.free_bytes_68052 = bytes_68052;
    futhark_mc_segmap_parloop_struct_74085.free_mem_68211 = mem_68211.mem;
    futhark_mc_segmap_parloop_struct_74085.free_mem_68215 = mem_68215.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74086_task;
    
    futhark_mc_segmap_parloop_74086_task.name =
        "futhark_mc_segmap_parloop_74086";
    futhark_mc_segmap_parloop_74086_task.fn = futhark_mc_segmap_parloop_74086;
    futhark_mc_segmap_parloop_74086_task.args =
        &futhark_mc_segmap_parloop_struct_74085;
    futhark_mc_segmap_parloop_74086_task.iterations = iterations;
    futhark_mc_segmap_parloop_74086_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74086_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74086_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74086_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74086_task);
    
    if (futhark_mc_segmap_parloop_74086_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74086_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74086_total_end -
                 futhark_mc_segmap_parloop_74086_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74086_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74086_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74086_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74084_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74084_end -
                 futhark_mc_segmap_nested_task_74084_start;
        
        ctx->futhark_mc_segmap_nested_task_74084_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74084_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74084_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74138 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_68216;
    int64_t free_bytes_68219;
    int64_t free_bytes_68231;
    int64_t free_bytes_68306;
    char *free_mem_68495;
    char *free_mem_68499;
};
struct futhark_mc_segmap_parloop_struct_74140 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_68216;
    int64_t free_bytes_68219;
    int64_t free_bytes_68231;
    int64_t free_bytes_68306;
    char *free_mem_68495;
    char *free_mem_68499;
};
static int futhark_mc_segmap_parloop_74141(void *args, int64_t start,
                                           int64_t end, int flat_tid_66224,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74140
    *futhark_mc_segmap_parloop_struct_74140 =
    (struct futhark_mc_segmap_parloop_struct_74140 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74140->ctx;
    uint64_t futhark_mc_segmap_parloop_74141_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74141_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_segmap_parloop_struct_74140->free_m_62255;
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74140->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74140->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74140->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74140->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74140->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_74140->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_74140->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_74140->free_loop_cond_62281;
    float i64_res_62282 =
          futhark_mc_segmap_parloop_struct_74140->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_74140->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_68216 =
            futhark_mc_segmap_parloop_struct_74140->free_bytes_68216;
    int64_t bytes_68219 =
            futhark_mc_segmap_parloop_struct_74140->free_bytes_68219;
    int64_t bytes_68231 =
            futhark_mc_segmap_parloop_struct_74140->free_bytes_68231;
    int64_t bytes_68306 =
            futhark_mc_segmap_parloop_struct_74140->free_bytes_68306;
    struct memblock mem_68495 = {.desc ="mem_68495", .mem =
                                 futhark_mc_segmap_parloop_struct_74140->free_mem_68495,
                                 .size =0, .references =NULL};
    struct memblock mem_68499 = {.desc ="mem_68499", .mem =
                                 futhark_mc_segmap_parloop_struct_74140->free_mem_68499,
                                 .size =0, .references =NULL};
    size_t mem_68314_cached_sizze_74142 = 0;
    char *mem_68314 = NULL;
    size_t mem_68329_cached_sizze_74143 = 0;
    char *mem_68329 = NULL;
    size_t mem_68332_cached_sizze_74144 = 0;
    char *mem_68332 = NULL;
    size_t mem_68359_cached_sizze_74145 = 0;
    char *mem_68359 = NULL;
    size_t mem_68362_cached_sizze_74146 = 0;
    char *mem_68362 = NULL;
    size_t mem_68389_cached_sizze_74147 = 0;
    char *mem_68389 = NULL;
    size_t mem_68404_cached_sizze_74148 = 0;
    char *mem_68404 = NULL;
    size_t mem_68407_cached_sizze_74149 = 0;
    char *mem_68407 = NULL;
    size_t mem_68424_cached_sizze_74150 = 0;
    char *mem_68424 = NULL;
    size_t mem_68427_cached_sizze_74151 = 0;
    char *mem_68427 = NULL;
    size_t mem_68454_cached_sizze_74152 = 0;
    char *mem_68454 = NULL;
    size_t mem_68457_cached_sizze_74153 = 0;
    char *mem_68457 = NULL;
    int64_t iterations = end - start;
    int64_t iter_72697 = start;
    
    if (mem_68314_cached_sizze_74142 < (size_t) bytes_68216) {
        mem_68314 = realloc(mem_68314, bytes_68216);
        mem_68314_cached_sizze_74142 = bytes_68216;
    }
    if (mem_68329_cached_sizze_74143 < (size_t) bytes_68219) {
        mem_68329 = realloc(mem_68329, bytes_68219);
        mem_68329_cached_sizze_74143 = bytes_68219;
    }
    if (mem_68332_cached_sizze_74144 < (size_t) bytes_68216) {
        mem_68332 = realloc(mem_68332, bytes_68216);
        mem_68332_cached_sizze_74144 = bytes_68216;
    }
    if (mem_68359_cached_sizze_74145 < (size_t) bytes_68219) {
        mem_68359 = realloc(mem_68359, bytes_68219);
        mem_68359_cached_sizze_74145 = bytes_68219;
    }
    if (mem_68362_cached_sizze_74146 < (size_t) bytes_68216) {
        mem_68362 = realloc(mem_68362, bytes_68216);
        mem_68362_cached_sizze_74146 = bytes_68216;
    }
    if (mem_68389_cached_sizze_74147 < (size_t) bytes_68231) {
        mem_68389 = realloc(mem_68389, bytes_68231);
        mem_68389_cached_sizze_74147 = bytes_68231;
    }
    if (mem_68404_cached_sizze_74148 < (size_t) bytes_68306) {
        mem_68404 = realloc(mem_68404, bytes_68306);
        mem_68404_cached_sizze_74148 = bytes_68306;
    }
    if (mem_68407_cached_sizze_74149 < (size_t) bytes_68306) {
        mem_68407 = realloc(mem_68407, bytes_68306);
        mem_68407_cached_sizze_74149 = bytes_68306;
    }
    if (mem_68424_cached_sizze_74150 < (size_t) bytes_68231) {
        mem_68424 = realloc(mem_68424, bytes_68231);
        mem_68424_cached_sizze_74150 = bytes_68231;
    }
    if (mem_68427_cached_sizze_74151 < (size_t) bytes_68231) {
        mem_68427 = realloc(mem_68427, bytes_68231);
        mem_68427_cached_sizze_74151 = bytes_68231;
    }
    if (mem_68454_cached_sizze_74152 < (size_t) bytes_68231) {
        mem_68454 = realloc(mem_68454, bytes_68231);
        mem_68454_cached_sizze_74152 = bytes_68231;
    }
    if (mem_68457_cached_sizze_74153 < (size_t) bytes_68231) {
        mem_68457 = realloc(mem_68457, bytes_68231);
        mem_68457_cached_sizze_74153 = bytes_68231;
    }
    for (; iter_72697 < end; iter_72697++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_72929 = m_62255;
        int64_t gtid_66225 = iter_72697;
        int64_t remnant_72930 = iter_72697 - gtid_66225;
        int64_t discard_67237;
        int64_t scanacc_72699 = (int64_t) 0;
        
        for (int64_t i_72698 = 0; i_72698 < n_62256; i_72698++) {
            float x_72701 = ((float *) Y_mem_67388.mem)[gtid_66225 * n_62256 +
                                                        i_72698];
            bool isnan_res_72702;
            
            isnan_res_72702 = futrts_isnan32(x_72701);
            
            bool defunc_0_p_res_72703 = !isnan_res_72702;
            int64_t defunc_0_f_res_72704 = btoi_bool_i64(defunc_0_p_res_72703);
            int64_t defunc_1_op_res_72705 = add64(defunc_0_f_res_72704,
                                                  scanacc_72699);
            
            ((int64_t *) mem_68314)[i_72698] = defunc_1_op_res_72705;
            
            int64_t scanacc_tmp_72931 = defunc_1_op_res_72705;
            
            scanacc_72699 = scanacc_tmp_72931;
        }
        discard_67237 = scanacc_72699;
        
        int64_t last_res_63345 = ((int64_t *) mem_68314)[i_62270];
        
        for (int64_t i_72933 = 0; i_72933 < n_62256; i_72933++) {
            ((float *) mem_68329)[i_72933] = 0.0F;
        }
        for (int64_t i_72934 = 0; i_72934 < n_62256; i_72934++) {
            ((int64_t *) mem_68332)[i_72934] = (int64_t) -1;
        }
        for (int64_t write_iter_72707 = 0; write_iter_72707 < n_62256;
             write_iter_72707++) {
            float write_iv_72710 = ((float *) Y_mem_67388.mem)[gtid_66225 *
                                                               n_62256 +
                                                               write_iter_72707];
            bool isnan_res_72711;
            
            isnan_res_72711 = futrts_isnan32(write_iv_72710);
            
            bool defunc_0_p_res_72712 = !isnan_res_72711;
            int64_t defunc_1_f_res_72713;
            
            if (defunc_0_p_res_72712) {
                int64_t write_iv_72714 =
                        ((int64_t *) mem_68314)[write_iter_72707];
                int64_t defunc_1_f_res_t_res_72715 = sub64(write_iv_72714,
                                                           (int64_t) 1);
                
                defunc_1_f_res_72713 = defunc_1_f_res_t_res_72715;
            } else {
                defunc_1_f_res_72713 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_72713) &&
                slt64(defunc_1_f_res_72713, n_62256)) {
                ((int64_t *) mem_68332)[defunc_1_f_res_72713] =
                    write_iter_72707;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_72713) &&
                slt64(defunc_1_f_res_72713, n_62256)) {
                memmove(mem_68329 + defunc_1_f_res_72713 * (int64_t) 4,
                        Y_mem_67388.mem + (gtid_66225 * n_62256 +
                                           write_iter_72707) * (int64_t) 4,
                        (int64_t) 4);
            }
        }
        
        int64_t min_arg_63360 = sub64(last_res_63345, (int64_t) 1);
        int64_t min_arg_63361 = sub64(last_res_63345, min_res_62276);
        int64_t min_res_63362 = smin64(q_62258, last_res_63345);
        float i64_res_63363 = sitofp_i64_f32(last_res_63345);
        float x_63364 = i64_res_62282 - i64_res_63363;
        float max_arg_63365 = x_63364 / 2.0F;
        float max_res_63366 = fmax32(0.0F, max_arg_63365);
        
        for (int64_t i_72719 = 0; i_72719 < n_62256; i_72719++) {
            int64_t x_72722 = ((int64_t *) mem_68332)[i_72719];
            int64_t defunc_0_f_res_72723 = add64((int64_t) 1, x_72722);
            float defunc_0_f_res_72724 = sitofp_i64_f32(x_72722);
            
            ((float *) mem_68359)[i_72719] = defunc_0_f_res_72724;
            ((int64_t *) mem_68362)[i_72719] = defunc_0_f_res_72723;
        }
        for (int64_t i_72727 = 0; i_72727 < q_62258; i_72727++) {
            bool cond_72729 = sle64(last_res_63345, i_72727);
            float defunc_0_f_res_72730;
            
            if (cond_72729) {
                defunc_0_f_res_72730 = 0.0F;
            } else {
                defunc_0_f_res_72730 = 1.0F;
            }
            ((float *) mem_68389)[i_72727] = defunc_0_f_res_72730;
        }
        for (int64_t i_72732 = 0; i_72732 < n_m_62264; i_72732++) {
            int64_t min_arg_72735 = mul64(jump_62260, i_72732);
            int64_t min_res_72736 = smin64(i_62270, min_arg_72735);
            int64_t defunc_0_g_res_72737 = add64((int64_t) 1, min_res_72736);
            bool init_idx_72738;
            int64_t init_idx_72739;
            int64_t init_idx_72740;
            bool loop_while_72741;
            int64_t low_72742;
            int64_t high_72743;
            
            loop_while_72741 = x_62271;
            low_72742 = (int64_t) 0;
            high_72743 = i_62270;
            while (loop_while_72741) {
                int64_t x_72744 = add64(low_72742, high_72743);
                int64_t mid_72745 = sdiv64(x_72744, (int64_t) 2);
                bool x_72746 = sle64((int64_t) 0, mid_72745);
                bool y_72747 = slt64(mid_72745, n_62256);
                bool bounds_check_72748 = x_72746 && y_72747;
                bool index_certs_72749;
                
                if (!bounds_check_72748) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_72745,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t mid_id_72750 = ((int64_t *) mem_68362)[mid_72745];
                bool cond_72751 = slt64(mid_id_72750, (int64_t) 0);
                int64_t mid_idx_72752;
                
                if (cond_72751) {
                    mid_idx_72752 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_72752 = mid_id_72750;
                }
                
                bool cond_72753 = sle64(defunc_0_g_res_72737, mid_idx_72752);
                int64_t loopres_72754;
                int64_t loopres_72755;
                
                if (cond_72753) {
                    int64_t loopres_t_res_72756 = sub64(mid_72745, (int64_t) 1);
                    
                    loopres_72754 = low_72742;
                    loopres_72755 = loopres_t_res_72756;
                } else {
                    int64_t loopres_f_res_72757 = add64((int64_t) 1, mid_72745);
                    
                    loopres_72754 = loopres_f_res_72757;
                    loopres_72755 = high_72743;
                }
                
                bool loop_cond_72758 = sle64(loopres_72754, loopres_72755);
                bool loop_while_tmp_72942 = loop_cond_72758;
                int64_t low_tmp_72943 = loopres_72754;
                int64_t high_tmp_72944 = loopres_72755;
                
                loop_while_72741 = loop_while_tmp_72942;
                low_72742 = low_tmp_72943;
                high_72743 = high_tmp_72944;
            }
            init_idx_72738 = loop_while_72741;
            init_idx_72739 = low_72742;
            init_idx_72740 = high_72743;
            
            bool idx_72759;
            int64_t idx_72760;
            int64_t idx_72761;
            int64_t idx_72762;
            bool loop_while_72763;
            int64_t l_idx_72764;
            int64_t r_idx_72765;
            int64_t span_72766;
            
            loop_while_72763 = loop_cond_62281;
            l_idx_72764 = init_idx_72739;
            r_idx_72765 = init_idx_72739;
            span_72766 = (int64_t) 1;
            while (loop_while_72763) {
                int64_t max_arg_72767 = sub64(l_idx_72764, (int64_t) 1);
                int64_t max_res_72768 = smax64((int64_t) 0, max_arg_72767);
                int64_t min_arg_72769 = add64((int64_t) 1, r_idx_72765);
                int64_t min_res_72770 = smin64(min_arg_63360, min_arg_72769);
                bool x_72771 = sle64((int64_t) 0, max_res_72768);
                bool y_72772 = slt64(max_res_72768, n_62256);
                bool bounds_check_72773 = x_72771 && y_72772;
                bool index_certs_72774;
                
                if (!bounds_check_72773) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_72768,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t x_72775 = ((int64_t *) mem_68362)[max_res_72768];
                int64_t abs_arg_72776 = sub64(x_72775, defunc_0_g_res_72737);
                int64_t abs_res_72777 = abs64(abs_arg_72776);
                bool x_72778 = sle64((int64_t) 0, min_res_72770);
                bool y_72779 = slt64(min_res_72770, n_62256);
                bool bounds_check_72780 = x_72778 && y_72779;
                bool index_certs_72781;
                
                if (!bounds_check_72780) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_72770,
                                  "] out of bounds for array of shape [",
                                  (long long) n_62256, "].",
                                  "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                    return 1;
                }
                
                int64_t x_72782 = ((int64_t *) mem_68362)[min_res_72770];
                int64_t abs_arg_72783 = sub64(x_72782, defunc_0_g_res_72737);
                int64_t abs_res_72784 = abs64(abs_arg_72783);
                bool cond_72785 = max_res_72768 == l_idx_72764;
                int64_t loopres_72786;
                int64_t loopres_72787;
                int64_t loopres_72788;
                
                if (cond_72785) {
                    loopres_72786 = l_idx_72764;
                    loopres_72787 = r_idx_72765;
                    loopres_72788 = min_res_62276;
                } else {
                    bool cond_72789 = slt64(abs_res_72777, abs_res_72784);
                    bool cond_f_res_72790 = min_res_72770 == r_idx_72765;
                    bool x_72791 = !cond_72789;
                    bool y_72792 = cond_f_res_72790 && x_72791;
                    bool cond_72793 = cond_72789 || y_72792;
                    int64_t loopres_f_res_72794;
                    
                    if (cond_72793) {
                        loopres_f_res_72794 = max_res_72768;
                    } else {
                        loopres_f_res_72794 = l_idx_72764;
                    }
                    
                    int64_t loopres_f_res_72795;
                    
                    if (cond_72793) {
                        loopres_f_res_72795 = r_idx_72765;
                    } else {
                        loopres_f_res_72795 = min_res_72770;
                    }
                    
                    int64_t loopres_f_res_72796;
                    
                    if (cond_72793) {
                        int64_t loopres_f_res_t_res_72797 = add64((int64_t) 1,
                                                                  span_72766);
                        
                        loopres_f_res_72796 = loopres_f_res_t_res_72797;
                    } else {
                        int64_t loopres_f_res_f_res_72798 = add64((int64_t) 1,
                                                                  span_72766);
                        
                        loopres_f_res_72796 = loopres_f_res_f_res_72798;
                    }
                    loopres_72786 = loopres_f_res_72794;
                    loopres_72787 = loopres_f_res_72795;
                    loopres_72788 = loopres_f_res_72796;
                }
                
                bool loop_cond_72799 = slt64(loopres_72788, min_res_62276);
                bool loop_while_tmp_72945 = loop_cond_72799;
                int64_t l_idx_tmp_72946 = loopres_72786;
                int64_t r_idx_tmp_72947 = loopres_72787;
                int64_t span_tmp_72948 = loopres_72788;
                
                loop_while_72763 = loop_while_tmp_72945;
                l_idx_72764 = l_idx_tmp_72946;
                r_idx_72765 = r_idx_tmp_72947;
                span_72766 = span_tmp_72948;
            }
            idx_72759 = loop_while_72763;
            idx_72760 = l_idx_72764;
            idx_72761 = r_idx_72765;
            idx_72762 = span_72766;
            
            int64_t min_res_72800 = smin64(min_arg_63361, idx_72760);
            int64_t max_res_72801 = smax64((int64_t) 0, min_res_72800);
            int64_t x_72802 = add64(min_res_63362, max_res_72801);
            int64_t r_72803 = sub64(x_72802, (int64_t) 1);
            bool x_72804 = sle64((int64_t) 0, r_72803);
            bool y_72805 = slt64(r_72803, n_62256);
            bool bounds_check_72806 = x_72804 && y_72805;
            bool index_certs_72807;
            
            if (!bounds_check_72806) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_72803,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_72808 = ((int64_t *) mem_68332)[r_72803];
            int64_t abs_arg_72809 = sub64(x_72808, min_res_72736);
            int64_t abs_res_72810 = abs64(abs_arg_72809);
            bool x_72811 = sle64((int64_t) 0, max_res_72801);
            bool y_72812 = slt64(max_res_72801, n_62256);
            bool bounds_check_72813 = x_72811 && y_72812;
            bool index_certs_72814;
            
            if (!bounds_check_72813) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_72801,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_72815 = ((int64_t *) mem_68332)[max_res_72801];
            int64_t abs_arg_72816 = sub64(x_72815, min_res_72736);
            int64_t abs_res_72817 = abs64(abs_arg_72816);
            int64_t max_res_72818 = smax64(abs_res_72810, abs_res_72817);
            float defunc_0_f_res_72819 = sitofp_i64_f32(max_res_72818);
            float defunc_1_f_res_72820 = max_res_63366 + defunc_0_f_res_72819;
            float defunc_0_f_res_72821 = sitofp_i64_f32(min_res_72736);
            
            for (int64_t i_72826 = 0; i_72826 < q_62258; i_72826++) {
                float x_72829 = ((float *) mem_68389)[i_72826];
                bool cond_72830 = sle64(last_res_63345, i_72826);
                float defunc_0_f_res_72831;
                
                if (cond_72830) {
                    defunc_0_f_res_72831 = 0.0F;
                } else {
                    int64_t i_72832 = add64(max_res_72801, i_72826);
                    float x_72833 = ((float *) mem_68359)[i_72832];
                    float defunc_0_f_res_f_res_72834 = 1.0F + x_72833;
                    
                    defunc_0_f_res_72831 = defunc_0_f_res_f_res_72834;
                }
                
                float x_j_72835 = defunc_0_f_res_72831 - defunc_0_f_res_72821;
                float abs_res_72836 = (float) fabs(x_j_72835);
                float tmp1_72837 = abs_res_72836 / defunc_1_f_res_72820;
                float x_72838 = tmp1_72837 * tmp1_72837;
                float y_72839 = tmp1_72837 * x_72838;
                float tmp2_72840 = 1.0F - y_72839;
                float x_72841 = tmp2_72840 * tmp2_72840;
                float tmp3_72842 = tmp2_72840 * x_72841;
                float tmp4_72843 = x_72829 * tmp3_72842;
                
                ((float *) mem_68424)[i_72826] = x_j_72835;
                ((float *) mem_68427)[i_72826] = tmp4_72843;
            }
            
            float defunc_2_reduce_res_72848;
            float defunc_2_reduce_res_72849;
            float defunc_2_reduce_res_72850;
            float defunc_2_reduce_res_72851;
            float defunc_2_reduce_res_72852;
            float redout_72856;
            float redout_72857;
            float redout_72858;
            float redout_72859;
            float redout_72860;
            
            redout_72856 = 0.0F;
            redout_72857 = 0.0F;
            redout_72858 = 0.0F;
            redout_72859 = 0.0F;
            redout_72860 = 0.0F;
            for (int64_t i_72855 = 0; i_72855 < q_62258; i_72855++) {
                float x_72863 = ((float *) mem_68424)[i_72855];
                float x_72864 = ((float *) mem_68427)[i_72855];
                float defunc_1_f_res_72865 = x_72863 * x_72864;
                float defunc_1_f_res_72866 = x_72863 * defunc_1_f_res_72865;
                float defunc_1_f_res_72867 = x_72863 * defunc_1_f_res_72866;
                float defunc_1_f_res_72868 = x_72863 * defunc_1_f_res_72867;
                float defunc_1_op_res_72869 = x_72864 + redout_72856;
                float defunc_1_op_res_72870 = defunc_1_f_res_72865 +
                      redout_72857;
                float defunc_1_op_res_72871 = defunc_1_f_res_72866 +
                      redout_72858;
                float defunc_1_op_res_72872 = defunc_1_f_res_72867 +
                      redout_72859;
                float defunc_1_op_res_72873 = defunc_1_f_res_72868 +
                      redout_72860;
                
                ((float *) mem_68454)[i_72855] = defunc_1_f_res_72866;
                ((float *) mem_68457)[i_72855] = defunc_1_f_res_72865;
                
                float redout_tmp_72951 = defunc_1_op_res_72869;
                float redout_tmp_72952 = defunc_1_op_res_72870;
                float redout_tmp_72953 = defunc_1_op_res_72871;
                float redout_tmp_72954 = defunc_1_op_res_72872;
                float redout_tmp_72955 = defunc_1_op_res_72873;
                
                redout_72856 = redout_tmp_72951;
                redout_72857 = redout_tmp_72952;
                redout_72858 = redout_tmp_72953;
                redout_72859 = redout_tmp_72954;
                redout_72860 = redout_tmp_72955;
            }
            defunc_2_reduce_res_72848 = redout_72856;
            defunc_2_reduce_res_72849 = redout_72857;
            defunc_2_reduce_res_72850 = redout_72858;
            defunc_2_reduce_res_72851 = redout_72859;
            defunc_2_reduce_res_72852 = redout_72860;
            
            float x_72876 = defunc_2_reduce_res_72850 *
                  defunc_2_reduce_res_72852;
            float y_72877 = defunc_2_reduce_res_72851 *
                  defunc_2_reduce_res_72851;
            float a12_72878 = x_72876 - y_72877;
            float x_72879 = defunc_2_reduce_res_72850 *
                  defunc_2_reduce_res_72851;
            float y_72880 = defunc_2_reduce_res_72849 *
                  defunc_2_reduce_res_72852;
            float b12_72881 = x_72879 - y_72880;
            float x_72882 = defunc_2_reduce_res_72849 *
                  defunc_2_reduce_res_72851;
            float y_72883 = defunc_2_reduce_res_72850 *
                  defunc_2_reduce_res_72850;
            float c12_72884 = x_72882 - y_72883;
            float x_72885 = defunc_2_reduce_res_72848 *
                  defunc_2_reduce_res_72852;
            float b2_72886 = x_72885 - y_72883;
            float x_72887 = defunc_2_reduce_res_72849 *
                  defunc_2_reduce_res_72850;
            float y_72888 = defunc_2_reduce_res_72848 *
                  defunc_2_reduce_res_72851;
            float c2_72889 = x_72887 - y_72888;
            float x_72890 = defunc_2_reduce_res_72848 * a12_72878;
            float y_72891 = defunc_2_reduce_res_72849 * b12_72881;
            float x_72892 = x_72890 + y_72891;
            float y_72893 = defunc_2_reduce_res_72850 * c12_72884;
            float y_72894 = x_72892 + y_72893;
            float det_72895 = 1.0F / y_72894;
            float a12_72896 = a12_72878 * det_72895;
            float b12_72897 = b12_72881 * det_72895;
            float c12_72898 = c12_72884 * det_72895;
            float b2_72899 = b2_72886 * det_72895;
            float c2_72900 = c2_72889 * det_72895;
            float defunc_2_reduce_res_72901;
            float defunc_2_reduce_res_72902;
            float redout_72904;
            float redout_72905;
            
            redout_72904 = 0.0F;
            redout_72905 = 0.0F;
            for (int64_t i_72903 = 0; i_72903 < q_62258; i_72903++) {
                float x_72906 = ((float *) mem_68427)[i_72903];
                float x_72907 = ((float *) mem_68457)[i_72903];
                float x_72908 = ((float *) mem_68454)[i_72903];
                bool cond_72909 = sle64(last_res_63345, i_72903);
                float defunc_0_f_res_72910;
                
                if (cond_72909) {
                    defunc_0_f_res_72910 = 0.0F;
                } else {
                    int64_t i_72911 = add64(max_res_72801, i_72903);
                    float x_72912 = ((float *) mem_68329)[i_72911];
                    
                    defunc_0_f_res_72910 = x_72912;
                }
                
                float x_72913 = a12_72896 * x_72906;
                float y_72914 = b12_72897 * x_72907;
                float x_72915 = x_72913 + y_72914;
                float y_72916 = c12_72898 * x_72908;
                float x_72917 = x_72915 + y_72916;
                float defunc_9_fit_fun_res_72918 = defunc_0_f_res_72910 *
                      x_72917;
                float x_72919 = b12_72897 * x_72906;
                float y_72920 = b2_72899 * x_72907;
                float x_72921 = x_72919 + y_72920;
                float y_72922 = c2_72900 * x_72908;
                float x_72923 = x_72921 + y_72922;
                float defunc_9_slope_fun_res_72924 = defunc_0_f_res_72910 *
                      x_72923;
                float defunc_1_op_res_72925 = defunc_9_fit_fun_res_72918 +
                      redout_72904;
                float defunc_1_op_res_72926 = defunc_9_slope_fun_res_72924 +
                      redout_72905;
                float redout_tmp_72958 = defunc_1_op_res_72925;
                float redout_tmp_72959 = defunc_1_op_res_72926;
                
                redout_72904 = redout_tmp_72958;
                redout_72905 = redout_tmp_72959;
            }
            defunc_2_reduce_res_72901 = redout_72904;
            defunc_2_reduce_res_72902 = redout_72905;
            ((float *) mem_68404)[i_72732] = defunc_2_reduce_res_72901;
            ((float *) mem_68407)[i_72732] = defunc_2_reduce_res_72902;
        }
        memmove(mem_68495.mem + gtid_66225 * n_m_62264 * (int64_t) 4,
                mem_68404 + (int64_t) 0, n_m_62264 * (int64_t) 4);
        memmove(mem_68499.mem + gtid_66225 * n_m_62264 * (int64_t) 4,
                mem_68407 + (int64_t) 0, n_m_62264 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_68314);
    free(mem_68329);
    free(mem_68332);
    free(mem_68359);
    free(mem_68362);
    free(mem_68389);
    free(mem_68404);
    free(mem_68407);
    free(mem_68424);
    free(mem_68427);
    free(mem_68454);
    free(mem_68457);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74141_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74141_end -
                 futhark_mc_segmap_parloop_74141_start;
        
        ctx->futhark_mc_segmap_parloop_74141_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74141_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74141_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74139(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66224 = tid;
    int num_tasks_72696 = info.nsubtasks;
    struct futhark_mc_task_74138 *futhark_mc_task_74138 =
                                 (struct futhark_mc_task_74138 *) args;
    struct futhark_context *ctx = futhark_mc_task_74138->ctx;
    uint64_t futhark_mc_segmap_task_74139_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74139_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_task_74138->free_m_62255;
    int64_t n_62256 = futhark_mc_task_74138->free_n_62256;
    int64_t q_62258 = futhark_mc_task_74138->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_74138->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74138->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74138->free_i_62270;
    bool x_62271 = futhark_mc_task_74138->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_74138->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_74138->free_loop_cond_62281;
    float i64_res_62282 = futhark_mc_task_74138->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_74138->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_68216 = futhark_mc_task_74138->free_bytes_68216;
    int64_t bytes_68219 = futhark_mc_task_74138->free_bytes_68219;
    int64_t bytes_68231 = futhark_mc_task_74138->free_bytes_68231;
    int64_t bytes_68306 = futhark_mc_task_74138->free_bytes_68306;
    struct memblock mem_68495 = {.desc ="mem_68495", .mem =
                                 futhark_mc_task_74138->free_mem_68495, .size =
                                 0, .references =NULL};
    struct memblock mem_68499 = {.desc ="mem_68499", .mem =
                                 futhark_mc_task_74138->free_mem_68499, .size =
                                 0, .references =NULL};
    int64_t iter_72697;
    struct futhark_mc_segmap_parloop_struct_74140
    futhark_mc_segmap_parloop_struct_74140;
    
    futhark_mc_segmap_parloop_struct_74140.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74140.free_m_62255 = m_62255;
    futhark_mc_segmap_parloop_struct_74140.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74140.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74140.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74140.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74140.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74140.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_74140.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_74140.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_74140.free_i64_res_62282 = i64_res_62282;
    futhark_mc_segmap_parloop_struct_74140.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_74140.free_bytes_68216 = bytes_68216;
    futhark_mc_segmap_parloop_struct_74140.free_bytes_68219 = bytes_68219;
    futhark_mc_segmap_parloop_struct_74140.free_bytes_68231 = bytes_68231;
    futhark_mc_segmap_parloop_struct_74140.free_bytes_68306 = bytes_68306;
    futhark_mc_segmap_parloop_struct_74140.free_mem_68495 = mem_68495.mem;
    futhark_mc_segmap_parloop_struct_74140.free_mem_68499 = mem_68499.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74141_task;
    
    futhark_mc_segmap_parloop_74141_task.name =
        "futhark_mc_segmap_parloop_74141";
    futhark_mc_segmap_parloop_74141_task.fn = futhark_mc_segmap_parloop_74141;
    futhark_mc_segmap_parloop_74141_task.args =
        &futhark_mc_segmap_parloop_struct_74140;
    futhark_mc_segmap_parloop_74141_task.iterations = iterations;
    futhark_mc_segmap_parloop_74141_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74141_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74141_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74141_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74141_task);
    
    if (futhark_mc_segmap_parloop_74141_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74141_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74141_total_end -
                 futhark_mc_segmap_parloop_74141_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74141_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74141_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74141_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74139_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74139_end -
                 futhark_mc_segmap_task_74139_start;
        
        ctx->futhark_mc_segmap_task_74139_runs[tid]++;
        ctx->futhark_mc_segmap_task_74139_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74139_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74155 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    float free_i64_res_62282;
    char *free_Y_mem_67388;
    int64_t free_bytes_68216;
    int64_t free_bytes_68219;
    int64_t free_bytes_68231;
    int64_t free_bytes_68306;
    char *free_mem_68495;
    char *free_mem_68499;
};
struct futhark_mc_task_74165 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_66227;
    char *free_Y_mem_67388;
    char *free_mem_68218;
};
struct futhark_mc_scan_stage_1_parloop_struct_74168 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_66227;
    char *free_Y_mem_67388;
    char *free_mem_68218;
};
static int futhark_mc_scan_stage_1_parloop_74169(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_66228, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_74168
    *futhark_mc_scan_stage_1_parloop_struct_74168 =
    (struct futhark_mc_scan_stage_1_parloop_struct_74168 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_74168->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_74169_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_74169_start = get_wall_time();
    
    int64_t n_62256 =
            futhark_mc_scan_stage_1_parloop_struct_74168->free_n_62256;
    int64_t gtid_66227 =
            futhark_mc_scan_stage_1_parloop_struct_74168->free_gtid_66227;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_scan_stage_1_parloop_struct_74168->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_68218 = {.desc ="mem_68218", .mem =
                                 futhark_mc_scan_stage_1_parloop_struct_74168->free_mem_68218,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73366 = start;
    int64_t x_72961;
    int64_t x_72962;
    
    x_72961 = (int64_t) 0;
    for (; iter_73366 < end; iter_73366++) {
        int64_t gtid_66229 = iter_73366;
        
        // stage 1 scan body
        {
            float x_72964 = ((float *) Y_mem_67388.mem)[gtid_66227 * n_62256 +
                                                        gtid_66229];
            bool isnan_res_72965;
            
            isnan_res_72965 = futrts_isnan32(x_72964);
            
            bool defunc_0_p_res_72966 = !isnan_res_72965;
            int64_t defunc_0_f_res_72967 = btoi_bool_i64(defunc_0_p_res_72966);
            
            // write mapped values results to memory
            { }
            x_72961 = x_72961;
            // Read next values
            {
                x_72962 = defunc_0_f_res_72967;
            }
            
            int64_t defunc_1_op_res_72963 = add64(x_72961, x_72962);
            
            ((int64_t *) mem_68218.mem)[gtid_66229] = defunc_1_op_res_72963;
            x_72961 = defunc_1_op_res_72963;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_74169_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_74169_end -
                 futhark_mc_scan_stage_1_parloop_74169_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_74169_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_74169_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_74169_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_74170 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_66227;
    char *free_Y_mem_67388;
    char *free_mem_68218;
};
static int futhark_mc_scan_stage_3_parloop_74171(void *args, int64_t start,
                                                 int64_t end,
                                                 int flat_tid_66228, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_74170
    *futhark_mc_scan_stage_3_parloop_struct_74170 =
    (struct futhark_mc_scan_stage_3_parloop_struct_74170 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_74170->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_74171_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_74171_start = get_wall_time();
    
    int64_t n_62256 =
            futhark_mc_scan_stage_3_parloop_struct_74170->free_n_62256;
    int64_t gtid_66227 =
            futhark_mc_scan_stage_3_parloop_struct_74170->free_gtid_66227;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_scan_stage_3_parloop_struct_74170->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_68218 = {.desc ="mem_68218", .mem =
                                 futhark_mc_scan_stage_3_parloop_struct_74170->free_mem_68218,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73378 = start;
    int64_t x_73375;
    int64_t x_73376;
    
    if (iter_73378 == (int64_t) 0) {
        x_73375 = (int64_t) 0;
    } else {
        x_73375 = ((int64_t *) mem_68218.mem)[iter_73378 - (int64_t) 1];
    }
    for (; iter_73378 < end; iter_73378++) {
        int64_t gtid_66229 = iter_73378;
        
        // stage 3 scan body
        {
            float x_72964 = ((float *) Y_mem_67388.mem)[gtid_66227 * n_62256 +
                                                        gtid_66229];
            bool isnan_res_72965;
            
            isnan_res_72965 = futrts_isnan32(x_72964);
            
            bool defunc_0_p_res_72966 = !isnan_res_72965;
            int64_t defunc_0_f_res_72967 = btoi_bool_i64(defunc_0_p_res_72966);
            
            x_73375 = x_73375;
            x_73376 = defunc_0_f_res_72967;
            
            int64_t defunc_1_op_res_73377 = add64(x_73375, x_73376);
            
            ((int64_t *) mem_68218.mem)[gtid_66229] = defunc_1_op_res_73377;
            x_73375 = defunc_1_op_res_73377;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_74171_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_74171_end -
                 futhark_mc_scan_stage_3_parloop_74171_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_74171_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_74171_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_74171_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_74166(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66228 = tid;
    int num_tasks_73365 = info.nsubtasks;
    struct futhark_mc_task_74165 *futhark_mc_task_74165 =
                                 (struct futhark_mc_task_74165 *) args;
    struct futhark_context *ctx = futhark_mc_task_74165->ctx;
    uint64_t futhark_mc_segscan_task_74166_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_74166_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74165->free_n_62256;
    int64_t gtid_66227 = futhark_mc_task_74165->free_gtid_66227;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_74165->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_68218 = {.desc ="mem_68218", .mem =
                                 futhark_mc_task_74165->free_mem_68218, .size =
                                 0, .references =NULL};
    size_t scan_stage_2_accum_mem_73372_cached_sizze_74167 = 0;
    char *scan_stage_2_accum_mem_73372 = NULL;
    int64_t iter_73366;
    struct futhark_mc_scan_stage_1_parloop_struct_74168
    futhark_mc_scan_stage_1_parloop_struct_74168;
    
    futhark_mc_scan_stage_1_parloop_struct_74168.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_74168.free_n_62256 = n_62256;
    futhark_mc_scan_stage_1_parloop_struct_74168.free_gtid_66227 = gtid_66227;
    futhark_mc_scan_stage_1_parloop_struct_74168.free_Y_mem_67388 =
        Y_mem_67388.mem;
    futhark_mc_scan_stage_1_parloop_struct_74168.free_mem_68218 = mem_68218.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_74169_task;
    
    futhark_mc_scan_stage_1_parloop_74169_task.name =
        "futhark_mc_scan_stage_1_parloop_74169";
    futhark_mc_scan_stage_1_parloop_74169_task.fn =
        futhark_mc_scan_stage_1_parloop_74169;
    futhark_mc_scan_stage_1_parloop_74169_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_74168;
    futhark_mc_scan_stage_1_parloop_74169_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_74169_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_74169_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_74169_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_74169_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_74169_task);
    
    if (futhark_mc_scan_stage_1_parloop_74169_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_74169_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_74169_total_end -
                 futhark_mc_scan_stage_1_parloop_74169_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74169_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74169_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_74169_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_73365)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_73367;
        int64_t x_73368;
        int64_t offset_73370 = (int64_t) 0;
        int64_t offset_index_73371 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_73372_cached_sizze_74167 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_73372 = realloc(scan_stage_2_accum_mem_73372,
                                                   (int64_t) 8);
            scan_stage_2_accum_mem_73372_cached_sizze_74167 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_73372)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_73374 = 0; i_73374 < num_tasks_73365 - 1; i_73374++) {
            offset_73370 = squot64(n_62256, sext_i32_i64(num_tasks_73365));
            if (slt64(sext_i32_i64(i_73374), srem64(n_62256,
                                                    sext_i32_i64(num_tasks_73365)))) {
                offset_73370 += (int64_t) 1;
            }
            offset_index_73371 += offset_73370;
            
            int64_t gtid_66229 = offset_index_73371;
            float x_72964 = ((float *) Y_mem_67388.mem)[gtid_66227 * n_62256 +
                                                        gtid_66229];
            bool isnan_res_72965;
            
            isnan_res_72965 = futrts_isnan32(x_72964);
            
            bool defunc_0_p_res_72966 = !isnan_res_72965;
            int64_t defunc_0_f_res_72967 = btoi_bool_i64(defunc_0_p_res_72966);
            
            // Read carry in
            {
                x_73367 =
                    ((int64_t *) scan_stage_2_accum_mem_73372)[(int64_t) 0];
            }
            // Read next values
            {
                x_73368 = ((int64_t *) mem_68218.mem)[offset_index_73371 -
                                                      (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_73369 = add64(x_73367, x_73368);
            
            ((int64_t *) mem_68218.mem)[offset_index_73371 - (int64_t) 1] =
                defunc_1_op_res_73369;
            ((int64_t *) scan_stage_2_accum_mem_73372)[(int64_t) 0] =
                defunc_1_op_res_73369;
        }
        
        int64_t iter_73378 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_74170
        futhark_mc_scan_stage_3_parloop_struct_74170;
        
        futhark_mc_scan_stage_3_parloop_struct_74170.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_74170.free_n_62256 = n_62256;
        futhark_mc_scan_stage_3_parloop_struct_74170.free_gtid_66227 =
            gtid_66227;
        futhark_mc_scan_stage_3_parloop_struct_74170.free_Y_mem_67388 =
            Y_mem_67388.mem;
        futhark_mc_scan_stage_3_parloop_struct_74170.free_mem_68218 =
            mem_68218.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_74171_task;
        
        futhark_mc_scan_stage_3_parloop_74171_task.name =
            "futhark_mc_scan_stage_3_parloop_74171";
        futhark_mc_scan_stage_3_parloop_74171_task.fn =
            futhark_mc_scan_stage_3_parloop_74171;
        futhark_mc_scan_stage_3_parloop_74171_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_74170;
        futhark_mc_scan_stage_3_parloop_74171_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_74171_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_74171_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_74171_total_start = get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_74171_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_74171_task);
        
        if (futhark_mc_scan_stage_3_parloop_74171_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_74171_total_end =
                     get_wall_time();
            uint64_t elapsed = futhark_mc_scan_stage_3_parloop_74171_total_end -
                     futhark_mc_scan_stage_3_parloop_74171_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74171_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74171_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_74171_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_73372);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_74166_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_74166_end -
                 futhark_mc_segscan_task_74166_start;
        
        ctx->futhark_mc_segscan_task_74166_runs[tid]++;
        ctx->futhark_mc_segscan_task_74166_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_74166_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74172 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_66227;
    char *free_Y_mem_67388;
    char *free_mem_68218;
    char *free_mem_68221;
    char *free_mem_68224;
};
struct futhark_mc_segmap_parloop_struct_74174 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_gtid_66227;
    char *free_Y_mem_67388;
    char *free_mem_68218;
    char *free_mem_68221;
    char *free_mem_68224;
};
static int futhark_mc_segmap_parloop_74175(void *args, int64_t start,
                                           int64_t end, int flat_tid_66230,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74174
    *futhark_mc_segmap_parloop_struct_74174 =
    (struct futhark_mc_segmap_parloop_struct_74174 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74174->ctx;
    uint64_t futhark_mc_segmap_parloop_74175_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74175_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74174->free_n_62256;
    int64_t gtid_66227 =
            futhark_mc_segmap_parloop_struct_74174->free_gtid_66227;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_74174->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_68218 = {.desc ="mem_68218", .mem =
                                 futhark_mc_segmap_parloop_struct_74174->free_mem_68218,
                                 .size =0, .references =NULL};
    struct memblock mem_68221 = {.desc ="mem_68221", .mem =
                                 futhark_mc_segmap_parloop_struct_74174->free_mem_68221,
                                 .size =0, .references =NULL};
    struct memblock mem_68224 = {.desc ="mem_68224", .mem =
                                 futhark_mc_segmap_parloop_struct_74174->free_mem_68224,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73382 = start;
    
    for (; iter_73382 < end; iter_73382++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73385 = n_62256;
        int64_t gtid_66231 = iter_73382;
        int64_t remnant_73386 = iter_73382 - gtid_66231;
        float x_72968 = ((float *) Y_mem_67388.mem)[gtid_66227 * n_62256 +
                                                    gtid_66231];
        bool isnan_res_72969;
        
        isnan_res_72969 = futrts_isnan32(x_72968);
        
        bool defunc_0_p_res_72970 = !isnan_res_72969;
        int64_t defunc_1_f_res_72971;
        
        if (defunc_0_p_res_72970) {
            int64_t x_73383 = ((int64_t *) mem_68218.mem)[gtid_66231];
            int64_t defunc_1_f_res_t_res_73384 = sub64(x_73383, (int64_t) 1);
            
            defunc_1_f_res_72971 = defunc_1_f_res_t_res_73384;
        } else {
            defunc_1_f_res_72971 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_72971) &&
            slt64(defunc_1_f_res_72971, n_62256)) {
            ((int64_t *) mem_68224.mem)[defunc_1_f_res_72971] = gtid_66231;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_72971) &&
            slt64(defunc_1_f_res_72971, n_62256)) {
            ((float *) mem_68221.mem)[defunc_1_f_res_72971] = x_72968;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74175_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74175_end -
                 futhark_mc_segmap_parloop_74175_start;
        
        ctx->futhark_mc_segmap_parloop_74175_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74175_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74175_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74173(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66230 = tid;
    int num_tasks_73381 = info.nsubtasks;
    struct futhark_mc_task_74172 *futhark_mc_task_74172 =
                                 (struct futhark_mc_task_74172 *) args;
    struct futhark_context *ctx = futhark_mc_task_74172->ctx;
    uint64_t futhark_mc_segmap_task_74173_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74173_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74172->free_n_62256;
    int64_t gtid_66227 = futhark_mc_task_74172->free_gtid_66227;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_74172->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    struct memblock mem_68218 = {.desc ="mem_68218", .mem =
                                 futhark_mc_task_74172->free_mem_68218, .size =
                                 0, .references =NULL};
    struct memblock mem_68221 = {.desc ="mem_68221", .mem =
                                 futhark_mc_task_74172->free_mem_68221, .size =
                                 0, .references =NULL};
    struct memblock mem_68224 = {.desc ="mem_68224", .mem =
                                 futhark_mc_task_74172->free_mem_68224, .size =
                                 0, .references =NULL};
    int64_t iter_73382;
    struct futhark_mc_segmap_parloop_struct_74174
    futhark_mc_segmap_parloop_struct_74174;
    
    futhark_mc_segmap_parloop_struct_74174.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74174.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74174.free_gtid_66227 = gtid_66227;
    futhark_mc_segmap_parloop_struct_74174.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_74174.free_mem_68218 = mem_68218.mem;
    futhark_mc_segmap_parloop_struct_74174.free_mem_68221 = mem_68221.mem;
    futhark_mc_segmap_parloop_struct_74174.free_mem_68224 = mem_68224.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74175_task;
    
    futhark_mc_segmap_parloop_74175_task.name =
        "futhark_mc_segmap_parloop_74175";
    futhark_mc_segmap_parloop_74175_task.fn = futhark_mc_segmap_parloop_74175;
    futhark_mc_segmap_parloop_74175_task.args =
        &futhark_mc_segmap_parloop_struct_74174;
    futhark_mc_segmap_parloop_74175_task.iterations = iterations;
    futhark_mc_segmap_parloop_74175_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74175_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74175_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74175_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74175_task);
    
    if (futhark_mc_segmap_parloop_74175_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74175_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74175_total_end -
                 futhark_mc_segmap_parloop_74175_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74175_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74175_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74175_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74173_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74173_end -
                 futhark_mc_segmap_task_74173_start;
        
        ctx->futhark_mc_segmap_task_74173_runs[tid]++;
        ctx->futhark_mc_segmap_task_74173_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74173_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74176 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    char *free_mem_68224;
    char *free_mem_68227;
    char *free_mem_68230;
};
struct futhark_mc_segmap_parloop_struct_74178 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    char *free_mem_68224;
    char *free_mem_68227;
    char *free_mem_68230;
};
static int futhark_mc_segmap_parloop_74179(void *args, int64_t start,
                                           int64_t end, int flat_tid_66232,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74178
    *futhark_mc_segmap_parloop_struct_74178 =
    (struct futhark_mc_segmap_parloop_struct_74178 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74178->ctx;
    uint64_t futhark_mc_segmap_parloop_74179_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74179_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74178->free_n_62256;
    struct memblock mem_68224 = {.desc ="mem_68224", .mem =
                                 futhark_mc_segmap_parloop_struct_74178->free_mem_68224,
                                 .size =0, .references =NULL};
    struct memblock mem_68227 = {.desc ="mem_68227", .mem =
                                 futhark_mc_segmap_parloop_struct_74178->free_mem_68227,
                                 .size =0, .references =NULL};
    struct memblock mem_68230 = {.desc ="mem_68230", .mem =
                                 futhark_mc_segmap_parloop_struct_74178->free_mem_68230,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73388 = start;
    
    for (; iter_73388 < end; iter_73388++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73389 = n_62256;
        int64_t gtid_66233 = iter_73388;
        int64_t remnant_73390 = iter_73388 - gtid_66233;
        int64_t x_72974 = ((int64_t *) mem_68224.mem)[gtid_66233];
        int64_t defunc_0_f_res_72975 = add64((int64_t) 1, x_72974);
        float defunc_0_f_res_72976 = sitofp_i64_f32(x_72974);
        
        ((float *) mem_68227.mem)[gtid_66233] = defunc_0_f_res_72976;
        ((int64_t *) mem_68230.mem)[gtid_66233] = defunc_0_f_res_72975;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74179_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74179_end -
                 futhark_mc_segmap_parloop_74179_start;
        
        ctx->futhark_mc_segmap_parloop_74179_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74179_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74179_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74177(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66232 = tid;
    int num_tasks_73387 = info.nsubtasks;
    struct futhark_mc_task_74176 *futhark_mc_task_74176 =
                                 (struct futhark_mc_task_74176 *) args;
    struct futhark_context *ctx = futhark_mc_task_74176->ctx;
    uint64_t futhark_mc_segmap_task_74177_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74177_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74176->free_n_62256;
    struct memblock mem_68224 = {.desc ="mem_68224", .mem =
                                 futhark_mc_task_74176->free_mem_68224, .size =
                                 0, .references =NULL};
    struct memblock mem_68227 = {.desc ="mem_68227", .mem =
                                 futhark_mc_task_74176->free_mem_68227, .size =
                                 0, .references =NULL};
    struct memblock mem_68230 = {.desc ="mem_68230", .mem =
                                 futhark_mc_task_74176->free_mem_68230, .size =
                                 0, .references =NULL};
    int64_t iter_73388;
    struct futhark_mc_segmap_parloop_struct_74178
    futhark_mc_segmap_parloop_struct_74178;
    
    futhark_mc_segmap_parloop_struct_74178.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74178.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74178.free_mem_68224 = mem_68224.mem;
    futhark_mc_segmap_parloop_struct_74178.free_mem_68227 = mem_68227.mem;
    futhark_mc_segmap_parloop_struct_74178.free_mem_68230 = mem_68230.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74179_task;
    
    futhark_mc_segmap_parloop_74179_task.name =
        "futhark_mc_segmap_parloop_74179";
    futhark_mc_segmap_parloop_74179_task.fn = futhark_mc_segmap_parloop_74179;
    futhark_mc_segmap_parloop_74179_task.args =
        &futhark_mc_segmap_parloop_struct_74178;
    futhark_mc_segmap_parloop_74179_task.iterations = iterations;
    futhark_mc_segmap_parloop_74179_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74179_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74179_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74179_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74179_task);
    
    if (futhark_mc_segmap_parloop_74179_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74179_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74179_total_end -
                 futhark_mc_segmap_parloop_74179_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74179_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74179_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74179_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74177_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74177_end -
                 futhark_mc_segmap_task_74177_start;
        
        ctx->futhark_mc_segmap_task_74177_runs[tid]++;
        ctx->futhark_mc_segmap_task_74177_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74177_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74180 {
    struct futhark_context *ctx;
    int64_t free_q_62258;
    int64_t free_last_res_66442;
    char *free_mem_68233;
};
struct futhark_mc_segmap_parloop_struct_74182 {
    struct futhark_context *ctx;
    int64_t free_q_62258;
    int64_t free_last_res_66442;
    char *free_mem_68233;
};
static int futhark_mc_segmap_parloop_74183(void *args, int64_t start,
                                           int64_t end, int flat_tid_66234,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74182
    *futhark_mc_segmap_parloop_struct_74182 =
    (struct futhark_mc_segmap_parloop_struct_74182 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74182->ctx;
    uint64_t futhark_mc_segmap_parloop_74183_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74183_start = get_wall_time();
    
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74182->free_q_62258;
    int64_t last_res_66442 =
            futhark_mc_segmap_parloop_struct_74182->free_last_res_66442;
    struct memblock mem_68233 = {.desc ="mem_68233", .mem =
                                 futhark_mc_segmap_parloop_struct_74182->free_mem_68233,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73392 = start;
    
    for (; iter_73392 < end; iter_73392++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73393 = q_62258;
        int64_t gtid_66235 = iter_73392;
        int64_t remnant_73394 = iter_73392 - gtid_66235;
        bool cond_72977 = sle64(last_res_66442, gtid_66235);
        float defunc_0_f_res_72978;
        
        if (cond_72977) {
            defunc_0_f_res_72978 = 0.0F;
        } else {
            defunc_0_f_res_72978 = 1.0F;
        }
        ((float *) mem_68233.mem)[gtid_66235] = defunc_0_f_res_72978;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74183_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74183_end -
                 futhark_mc_segmap_parloop_74183_start;
        
        ctx->futhark_mc_segmap_parloop_74183_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74183_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74183_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74181(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66234 = tid;
    int num_tasks_73391 = info.nsubtasks;
    struct futhark_mc_task_74180 *futhark_mc_task_74180 =
                                 (struct futhark_mc_task_74180 *) args;
    struct futhark_context *ctx = futhark_mc_task_74180->ctx;
    uint64_t futhark_mc_segmap_task_74181_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74181_start = get_wall_time();
    
    int64_t q_62258 = futhark_mc_task_74180->free_q_62258;
    int64_t last_res_66442 = futhark_mc_task_74180->free_last_res_66442;
    struct memblock mem_68233 = {.desc ="mem_68233", .mem =
                                 futhark_mc_task_74180->free_mem_68233, .size =
                                 0, .references =NULL};
    int64_t iter_73392;
    struct futhark_mc_segmap_parloop_struct_74182
    futhark_mc_segmap_parloop_struct_74182;
    
    futhark_mc_segmap_parloop_struct_74182.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74182.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74182.free_last_res_66442 = last_res_66442;
    futhark_mc_segmap_parloop_struct_74182.free_mem_68233 = mem_68233.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74183_task;
    
    futhark_mc_segmap_parloop_74183_task.name =
        "futhark_mc_segmap_parloop_74183";
    futhark_mc_segmap_parloop_74183_task.fn = futhark_mc_segmap_parloop_74183;
    futhark_mc_segmap_parloop_74183_task.args =
        &futhark_mc_segmap_parloop_struct_74182;
    futhark_mc_segmap_parloop_74183_task.iterations = iterations;
    futhark_mc_segmap_parloop_74183_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74183_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74183_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74183_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74183_task);
    
    if (futhark_mc_segmap_parloop_74183_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74183_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74183_total_end -
                 futhark_mc_segmap_parloop_74183_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74183_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74183_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74183_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74181_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74181_end -
                 futhark_mc_segmap_task_74181_start;
        
        ctx->futhark_mc_segmap_task_74181_runs[tid]++;
        ctx->futhark_mc_segmap_task_74181_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74181_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74184 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_66442;
    int64_t free_min_arg_66454;
    int64_t free_min_arg_66455;
    int64_t free_min_res_66456;
    float free_max_res_66460;
    char *free_mem_68221;
    char *free_mem_68224;
    char *free_mem_68227;
    char *free_mem_68230;
    int64_t free_bytes_68231;
    char *free_mem_68233;
    char *free_mem_68308;
    char *free_mem_68311;
};
struct futhark_mc_segmap_parloop_struct_74186 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_66442;
    int64_t free_min_arg_66454;
    int64_t free_min_arg_66455;
    int64_t free_min_res_66456;
    float free_max_res_66460;
    char *free_mem_68221;
    char *free_mem_68224;
    char *free_mem_68227;
    char *free_mem_68230;
    int64_t free_bytes_68231;
    char *free_mem_68233;
    char *free_mem_68308;
    char *free_mem_68311;
};
static int futhark_mc_segmap_parloop_74187(void *args, int64_t start,
                                           int64_t end, int flat_tid_66236,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74186
    *futhark_mc_segmap_parloop_struct_74186 =
    (struct futhark_mc_segmap_parloop_struct_74186 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74186->ctx;
    uint64_t futhark_mc_segmap_parloop_74187_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74187_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74186->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74186->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74186->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74186->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74186->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_74186->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_74186->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_74186->free_loop_cond_62281;
    int64_t last_res_66442 =
            futhark_mc_segmap_parloop_struct_74186->free_last_res_66442;
    int64_t min_arg_66454 =
            futhark_mc_segmap_parloop_struct_74186->free_min_arg_66454;
    int64_t min_arg_66455 =
            futhark_mc_segmap_parloop_struct_74186->free_min_arg_66455;
    int64_t min_res_66456 =
            futhark_mc_segmap_parloop_struct_74186->free_min_res_66456;
    float max_res_66460 =
          futhark_mc_segmap_parloop_struct_74186->free_max_res_66460;
    struct memblock mem_68221 = {.desc ="mem_68221", .mem =
                                 futhark_mc_segmap_parloop_struct_74186->free_mem_68221,
                                 .size =0, .references =NULL};
    struct memblock mem_68224 = {.desc ="mem_68224", .mem =
                                 futhark_mc_segmap_parloop_struct_74186->free_mem_68224,
                                 .size =0, .references =NULL};
    struct memblock mem_68227 = {.desc ="mem_68227", .mem =
                                 futhark_mc_segmap_parloop_struct_74186->free_mem_68227,
                                 .size =0, .references =NULL};
    struct memblock mem_68230 = {.desc ="mem_68230", .mem =
                                 futhark_mc_segmap_parloop_struct_74186->free_mem_68230,
                                 .size =0, .references =NULL};
    int64_t bytes_68231 =
            futhark_mc_segmap_parloop_struct_74186->free_bytes_68231;
    struct memblock mem_68233 = {.desc ="mem_68233", .mem =
                                 futhark_mc_segmap_parloop_struct_74186->free_mem_68233,
                                 .size =0, .references =NULL};
    struct memblock mem_68308 = {.desc ="mem_68308", .mem =
                                 futhark_mc_segmap_parloop_struct_74186->free_mem_68308,
                                 .size =0, .references =NULL};
    struct memblock mem_68311 = {.desc ="mem_68311", .mem =
                                 futhark_mc_segmap_parloop_struct_74186->free_mem_68311,
                                 .size =0, .references =NULL};
    size_t mem_73254_cached_sizze_74188 = 0;
    char *mem_73254 = NULL;
    size_t mem_73256_cached_sizze_74189 = 0;
    char *mem_73256 = NULL;
    size_t mem_73280_cached_sizze_74190 = 0;
    char *mem_73280 = NULL;
    size_t mem_73282_cached_sizze_74191 = 0;
    char *mem_73282 = NULL;
    int64_t iterations = end - start;
    int64_t iter_73396 = start;
    
    if (mem_73254_cached_sizze_74188 < (size_t) bytes_68231) {
        mem_73254 = realloc(mem_73254, bytes_68231);
        mem_73254_cached_sizze_74188 = bytes_68231;
    }
    if (mem_73256_cached_sizze_74189 < (size_t) bytes_68231) {
        mem_73256 = realloc(mem_73256, bytes_68231);
        mem_73256_cached_sizze_74189 = bytes_68231;
    }
    if (mem_73280_cached_sizze_74190 < (size_t) bytes_68231) {
        mem_73280 = realloc(mem_73280, bytes_68231);
        mem_73280_cached_sizze_74190 = bytes_68231;
    }
    if (mem_73282_cached_sizze_74191 < (size_t) bytes_68231) {
        mem_73282 = realloc(mem_73282, bytes_68231);
        mem_73282_cached_sizze_74191 = bytes_68231;
    }
    for (; iter_73396 < end; iter_73396++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73517 = n_m_62264;
        int64_t gtid_66237 = iter_73396;
        int64_t remnant_73518 = iter_73396 - gtid_66237;
        int64_t min_arg_73167 = mul64(jump_62260, gtid_66237);
        int64_t min_res_73168 = smin64(i_62270, min_arg_73167);
        int64_t defunc_0_g_res_73169 = add64((int64_t) 1, min_res_73168);
        bool init_idx_73170;
        int64_t init_idx_73171;
        int64_t init_idx_73172;
        bool loop_while_73397;
        int64_t low_73398;
        int64_t high_73399;
        
        loop_while_73397 = x_62271;
        low_73398 = (int64_t) 0;
        high_73399 = i_62270;
        while (loop_while_73397) {
            int64_t x_73400 = add64(low_73398, high_73399);
            int64_t mid_73401 = sdiv64(x_73400, (int64_t) 2);
            bool x_73402 = sle64((int64_t) 0, mid_73401);
            bool y_73403 = slt64(mid_73401, n_62256);
            bool bounds_check_73404 = x_73402 && y_73403;
            bool index_certs_73405;
            
            if (!bounds_check_73404) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_73401,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t mid_id_73406 = ((int64_t *) mem_68230.mem)[mid_73401];
            bool cond_73407 = slt64(mid_id_73406, (int64_t) 0);
            int64_t mid_idx_73408;
            
            if (cond_73407) {
                mid_idx_73408 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_73408 = mid_id_73406;
            }
            
            bool cond_73409 = sle64(defunc_0_g_res_73169, mid_idx_73408);
            int64_t loopres_73410;
            int64_t loopres_73411;
            
            if (cond_73409) {
                int64_t loopres_t_res_73412 = sub64(mid_73401, (int64_t) 1);
                
                loopres_73410 = low_73398;
                loopres_73411 = loopres_t_res_73412;
            } else {
                int64_t loopres_f_res_73413 = add64((int64_t) 1, mid_73401);
                
                loopres_73410 = loopres_f_res_73413;
                loopres_73411 = high_73399;
            }
            
            bool loop_cond_73414 = sle64(loopres_73410, loopres_73411);
            bool loop_while_tmp_73519 = loop_cond_73414;
            int64_t low_tmp_73520 = loopres_73410;
            int64_t high_tmp_73521 = loopres_73411;
            
            loop_while_73397 = loop_while_tmp_73519;
            low_73398 = low_tmp_73520;
            high_73399 = high_tmp_73521;
        }
        init_idx_73170 = loop_while_73397;
        init_idx_73171 = low_73398;
        init_idx_73172 = high_73399;
        
        bool idx_73191;
        int64_t idx_73192;
        int64_t idx_73193;
        int64_t idx_73194;
        bool loop_while_73415;
        int64_t l_idx_73416;
        int64_t r_idx_73417;
        int64_t span_73418;
        
        loop_while_73415 = loop_cond_62281;
        l_idx_73416 = init_idx_73171;
        r_idx_73417 = init_idx_73171;
        span_73418 = (int64_t) 1;
        while (loop_while_73415) {
            int64_t max_arg_73419 = sub64(l_idx_73416, (int64_t) 1);
            int64_t max_res_73420 = smax64((int64_t) 0, max_arg_73419);
            int64_t min_arg_73421 = add64((int64_t) 1, r_idx_73417);
            int64_t min_res_73422 = smin64(min_arg_66454, min_arg_73421);
            bool x_73423 = sle64((int64_t) 0, max_res_73420);
            bool y_73424 = slt64(max_res_73420, n_62256);
            bool bounds_check_73425 = x_73423 && y_73424;
            bool index_certs_73426;
            
            if (!bounds_check_73425) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_73420,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_73427 = ((int64_t *) mem_68230.mem)[max_res_73420];
            int64_t abs_arg_73428 = sub64(x_73427, defunc_0_g_res_73169);
            int64_t abs_res_73429 = abs64(abs_arg_73428);
            bool x_73430 = sle64((int64_t) 0, min_res_73422);
            bool y_73431 = slt64(min_res_73422, n_62256);
            bool bounds_check_73432 = x_73430 && y_73431;
            bool index_certs_73433;
            
            if (!bounds_check_73432) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_73422,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_73434 = ((int64_t *) mem_68230.mem)[min_res_73422];
            int64_t abs_arg_73435 = sub64(x_73434, defunc_0_g_res_73169);
            int64_t abs_res_73436 = abs64(abs_arg_73435);
            bool cond_73437 = max_res_73420 == l_idx_73416;
            int64_t loopres_73438;
            int64_t loopres_73439;
            int64_t loopres_73440;
            
            if (cond_73437) {
                loopres_73438 = l_idx_73416;
                loopres_73439 = r_idx_73417;
                loopres_73440 = min_res_62276;
            } else {
                bool cond_73441 = slt64(abs_res_73429, abs_res_73436);
                bool cond_f_res_73442 = min_res_73422 == r_idx_73417;
                bool x_73443 = !cond_73441;
                bool y_73444 = cond_f_res_73442 && x_73443;
                bool cond_73445 = cond_73441 || y_73444;
                int64_t loopres_f_res_73446;
                
                if (cond_73445) {
                    loopres_f_res_73446 = max_res_73420;
                } else {
                    loopres_f_res_73446 = l_idx_73416;
                }
                
                int64_t loopres_f_res_73447;
                
                if (cond_73445) {
                    loopres_f_res_73447 = r_idx_73417;
                } else {
                    loopres_f_res_73447 = min_res_73422;
                }
                
                int64_t loopres_f_res_73448;
                
                if (cond_73445) {
                    int64_t loopres_f_res_t_res_73449 = add64((int64_t) 1,
                                                              span_73418);
                    
                    loopres_f_res_73448 = loopres_f_res_t_res_73449;
                } else {
                    int64_t loopres_f_res_f_res_73450 = add64((int64_t) 1,
                                                              span_73418);
                    
                    loopres_f_res_73448 = loopres_f_res_f_res_73450;
                }
                loopres_73438 = loopres_f_res_73446;
                loopres_73439 = loopres_f_res_73447;
                loopres_73440 = loopres_f_res_73448;
            }
            
            bool loop_cond_73451 = slt64(loopres_73440, min_res_62276);
            bool loop_while_tmp_73522 = loop_cond_73451;
            int64_t l_idx_tmp_73523 = loopres_73438;
            int64_t r_idx_tmp_73524 = loopres_73439;
            int64_t span_tmp_73525 = loopres_73440;
            
            loop_while_73415 = loop_while_tmp_73522;
            l_idx_73416 = l_idx_tmp_73523;
            r_idx_73417 = r_idx_tmp_73524;
            span_73418 = span_tmp_73525;
        }
        idx_73191 = loop_while_73415;
        idx_73192 = l_idx_73416;
        idx_73193 = r_idx_73417;
        idx_73194 = span_73418;
        
        int64_t min_res_73232 = smin64(min_arg_66455, idx_73192);
        int64_t max_res_73233 = smax64((int64_t) 0, min_res_73232);
        int64_t x_73234 = add64(min_res_66456, max_res_73233);
        int64_t r_73235 = sub64(x_73234, (int64_t) 1);
        bool x_73236 = sle64((int64_t) 0, r_73235);
        bool y_73237 = slt64(r_73235, n_62256);
        bool bounds_check_73238 = x_73236 && y_73237;
        bool index_certs_73239;
        
        if (!bounds_check_73238) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_73235,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_73240 = ((int64_t *) mem_68224.mem)[r_73235];
        int64_t abs_arg_73241 = sub64(x_73240, min_res_73168);
        int64_t abs_res_73242 = abs64(abs_arg_73241);
        bool x_73243 = sle64((int64_t) 0, max_res_73233);
        bool y_73244 = slt64(max_res_73233, n_62256);
        bool bounds_check_73245 = x_73243 && y_73244;
        bool index_certs_73246;
        
        if (!bounds_check_73245) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_73233,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_73247 = ((int64_t *) mem_68224.mem)[max_res_73233];
        int64_t abs_arg_73248 = sub64(x_73247, min_res_73168);
        int64_t abs_res_73249 = abs64(abs_arg_73248);
        int64_t max_res_73250 = smax64(abs_res_73242, abs_res_73249);
        float defunc_0_f_res_73251 = sitofp_i64_f32(max_res_73250);
        float defunc_1_f_res_73252 = max_res_66460 + defunc_0_f_res_73251;
        float defunc_0_f_res_73253 = sitofp_i64_f32(min_res_73168);
        
        for (int64_t i_73452 = 0; i_73452 < q_62258; i_73452++) {
            float x_73455 = ((float *) mem_68233.mem)[i_73452];
            bool cond_73456 = sle64(last_res_66442, i_73452);
            float defunc_0_f_res_73457;
            
            if (cond_73456) {
                defunc_0_f_res_73457 = 0.0F;
            } else {
                int64_t i_73458 = add64(max_res_73233, i_73452);
                float x_73459 = ((float *) mem_68227.mem)[i_73458];
                float defunc_0_f_res_f_res_73460 = 1.0F + x_73459;
                
                defunc_0_f_res_73457 = defunc_0_f_res_f_res_73460;
            }
            
            float x_j_73461 = defunc_0_f_res_73457 - defunc_0_f_res_73253;
            float abs_res_73462 = (float) fabs(x_j_73461);
            float tmp1_73463 = abs_res_73462 / defunc_1_f_res_73252;
            float x_73464 = tmp1_73463 * tmp1_73463;
            float y_73465 = tmp1_73463 * x_73464;
            float tmp2_73466 = 1.0F - y_73465;
            float x_73467 = tmp2_73466 * tmp2_73466;
            float tmp3_73468 = tmp2_73466 * x_73467;
            float tmp4_73469 = x_73455 * tmp3_73468;
            
            ((float *) mem_73254)[i_73452] = x_j_73461;
            ((float *) mem_73256)[i_73452] = tmp4_73469;
        }
        
        float defunc_2_reduce_res_73284;
        float defunc_2_reduce_res_73285;
        float defunc_2_reduce_res_73286;
        float defunc_2_reduce_res_73287;
        float defunc_2_reduce_res_73288;
        float redout_73473;
        float redout_73474;
        float redout_73475;
        float redout_73476;
        float redout_73477;
        
        redout_73473 = 0.0F;
        redout_73474 = 0.0F;
        redout_73475 = 0.0F;
        redout_73476 = 0.0F;
        redout_73477 = 0.0F;
        for (int64_t i_73472 = 0; i_73472 < q_62258; i_73472++) {
            float x_73480 = ((float *) mem_73254)[i_73472];
            float x_73481 = ((float *) mem_73256)[i_73472];
            float defunc_1_f_res_73482 = x_73480 * x_73481;
            float defunc_1_f_res_73483 = x_73480 * defunc_1_f_res_73482;
            float defunc_1_f_res_73484 = x_73480 * defunc_1_f_res_73483;
            float defunc_1_f_res_73485 = x_73480 * defunc_1_f_res_73484;
            float defunc_1_op_res_73486 = x_73481 + redout_73473;
            float defunc_1_op_res_73487 = defunc_1_f_res_73482 + redout_73474;
            float defunc_1_op_res_73488 = defunc_1_f_res_73483 + redout_73475;
            float defunc_1_op_res_73489 = defunc_1_f_res_73484 + redout_73476;
            float defunc_1_op_res_73490 = defunc_1_f_res_73485 + redout_73477;
            
            ((float *) mem_73280)[i_73472] = defunc_1_f_res_73483;
            ((float *) mem_73282)[i_73472] = defunc_1_f_res_73482;
            
            float redout_tmp_73528 = defunc_1_op_res_73486;
            float redout_tmp_73529 = defunc_1_op_res_73487;
            float redout_tmp_73530 = defunc_1_op_res_73488;
            float redout_tmp_73531 = defunc_1_op_res_73489;
            float redout_tmp_73532 = defunc_1_op_res_73490;
            
            redout_73473 = redout_tmp_73528;
            redout_73474 = redout_tmp_73529;
            redout_73475 = redout_tmp_73530;
            redout_73476 = redout_tmp_73531;
            redout_73477 = redout_tmp_73532;
        }
        defunc_2_reduce_res_73284 = redout_73473;
        defunc_2_reduce_res_73285 = redout_73474;
        defunc_2_reduce_res_73286 = redout_73475;
        defunc_2_reduce_res_73287 = redout_73476;
        defunc_2_reduce_res_73288 = redout_73477;
        
        float x_73312 = defunc_2_reduce_res_73286 * defunc_2_reduce_res_73288;
        float y_73313 = defunc_2_reduce_res_73287 * defunc_2_reduce_res_73287;
        float a12_73314 = x_73312 - y_73313;
        float x_73315 = defunc_2_reduce_res_73286 * defunc_2_reduce_res_73287;
        float y_73316 = defunc_2_reduce_res_73285 * defunc_2_reduce_res_73288;
        float b12_73317 = x_73315 - y_73316;
        float x_73318 = defunc_2_reduce_res_73285 * defunc_2_reduce_res_73287;
        float y_73319 = defunc_2_reduce_res_73286 * defunc_2_reduce_res_73286;
        float c12_73320 = x_73318 - y_73319;
        float x_73321 = defunc_2_reduce_res_73284 * defunc_2_reduce_res_73288;
        float b2_73322 = x_73321 - y_73319;
        float x_73323 = defunc_2_reduce_res_73285 * defunc_2_reduce_res_73286;
        float y_73324 = defunc_2_reduce_res_73284 * defunc_2_reduce_res_73287;
        float c2_73325 = x_73323 - y_73324;
        float x_73326 = defunc_2_reduce_res_73284 * a12_73314;
        float y_73327 = defunc_2_reduce_res_73285 * b12_73317;
        float x_73328 = x_73326 + y_73327;
        float y_73329 = defunc_2_reduce_res_73286 * c12_73320;
        float y_73330 = x_73328 + y_73329;
        float det_73331 = 1.0F / y_73330;
        float a12_73332 = a12_73314 * det_73331;
        float b12_73333 = b12_73317 * det_73331;
        float c12_73334 = c12_73320 * det_73331;
        float b2_73335 = b2_73322 * det_73331;
        float c2_73336 = c2_73325 * det_73331;
        float defunc_2_reduce_res_73337;
        float defunc_2_reduce_res_73338;
        float redout_73494;
        float redout_73495;
        
        redout_73494 = 0.0F;
        redout_73495 = 0.0F;
        for (int64_t i_73493 = 0; i_73493 < q_62258; i_73493++) {
            float x_73496 = ((float *) mem_73256)[i_73493];
            float x_73497 = ((float *) mem_73282)[i_73493];
            float x_73498 = ((float *) mem_73280)[i_73493];
            bool cond_73499 = sle64(last_res_66442, i_73493);
            float defunc_0_f_res_73500;
            
            if (cond_73499) {
                defunc_0_f_res_73500 = 0.0F;
            } else {
                int64_t i_73501 = add64(max_res_73233, i_73493);
                float x_73502 = ((float *) mem_68221.mem)[i_73501];
                
                defunc_0_f_res_73500 = x_73502;
            }
            
            float x_73503 = a12_73332 * x_73496;
            float y_73504 = b12_73333 * x_73497;
            float x_73505 = x_73503 + y_73504;
            float y_73506 = c12_73334 * x_73498;
            float x_73507 = x_73505 + y_73506;
            float defunc_9_fit_fun_res_73508 = defunc_0_f_res_73500 * x_73507;
            float x_73509 = b12_73333 * x_73496;
            float y_73510 = b2_73335 * x_73497;
            float x_73511 = x_73509 + y_73510;
            float y_73512 = c2_73336 * x_73498;
            float x_73513 = x_73511 + y_73512;
            float defunc_9_slope_fun_res_73514 = defunc_0_f_res_73500 * x_73513;
            float defunc_1_op_res_73515 = defunc_9_fit_fun_res_73508 +
                  redout_73494;
            float defunc_1_op_res_73516 = defunc_9_slope_fun_res_73514 +
                  redout_73495;
            float redout_tmp_73535 = defunc_1_op_res_73515;
            float redout_tmp_73536 = defunc_1_op_res_73516;
            
            redout_73494 = redout_tmp_73535;
            redout_73495 = redout_tmp_73536;
        }
        defunc_2_reduce_res_73337 = redout_73494;
        defunc_2_reduce_res_73338 = redout_73495;
        ((float *) mem_68308.mem)[gtid_66237] = defunc_2_reduce_res_73337;
        ((float *) mem_68311.mem)[gtid_66237] = defunc_2_reduce_res_73338;
    }
    
  cleanup:
    { }
    free(mem_73254);
    free(mem_73256);
    free(mem_73280);
    free(mem_73282);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74187_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74187_end -
                 futhark_mc_segmap_parloop_74187_start;
        
        ctx->futhark_mc_segmap_parloop_74187_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74187_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74187_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74185(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66236 = tid;
    int num_tasks_73395 = info.nsubtasks;
    struct futhark_mc_task_74184 *futhark_mc_task_74184 =
                                 (struct futhark_mc_task_74184 *) args;
    struct futhark_context *ctx = futhark_mc_task_74184->ctx;
    uint64_t futhark_mc_segmap_task_74185_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74185_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74184->free_n_62256;
    int64_t q_62258 = futhark_mc_task_74184->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_74184->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74184->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74184->free_i_62270;
    bool x_62271 = futhark_mc_task_74184->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_74184->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_74184->free_loop_cond_62281;
    int64_t last_res_66442 = futhark_mc_task_74184->free_last_res_66442;
    int64_t min_arg_66454 = futhark_mc_task_74184->free_min_arg_66454;
    int64_t min_arg_66455 = futhark_mc_task_74184->free_min_arg_66455;
    int64_t min_res_66456 = futhark_mc_task_74184->free_min_res_66456;
    float max_res_66460 = futhark_mc_task_74184->free_max_res_66460;
    struct memblock mem_68221 = {.desc ="mem_68221", .mem =
                                 futhark_mc_task_74184->free_mem_68221, .size =
                                 0, .references =NULL};
    struct memblock mem_68224 = {.desc ="mem_68224", .mem =
                                 futhark_mc_task_74184->free_mem_68224, .size =
                                 0, .references =NULL};
    struct memblock mem_68227 = {.desc ="mem_68227", .mem =
                                 futhark_mc_task_74184->free_mem_68227, .size =
                                 0, .references =NULL};
    struct memblock mem_68230 = {.desc ="mem_68230", .mem =
                                 futhark_mc_task_74184->free_mem_68230, .size =
                                 0, .references =NULL};
    int64_t bytes_68231 = futhark_mc_task_74184->free_bytes_68231;
    struct memblock mem_68233 = {.desc ="mem_68233", .mem =
                                 futhark_mc_task_74184->free_mem_68233, .size =
                                 0, .references =NULL};
    struct memblock mem_68308 = {.desc ="mem_68308", .mem =
                                 futhark_mc_task_74184->free_mem_68308, .size =
                                 0, .references =NULL};
    struct memblock mem_68311 = {.desc ="mem_68311", .mem =
                                 futhark_mc_task_74184->free_mem_68311, .size =
                                 0, .references =NULL};
    int64_t iter_73396;
    struct futhark_mc_segmap_parloop_struct_74186
    futhark_mc_segmap_parloop_struct_74186;
    
    futhark_mc_segmap_parloop_struct_74186.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74186.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74186.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74186.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74186.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74186.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74186.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_74186.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_74186.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_74186.free_last_res_66442 = last_res_66442;
    futhark_mc_segmap_parloop_struct_74186.free_min_arg_66454 = min_arg_66454;
    futhark_mc_segmap_parloop_struct_74186.free_min_arg_66455 = min_arg_66455;
    futhark_mc_segmap_parloop_struct_74186.free_min_res_66456 = min_res_66456;
    futhark_mc_segmap_parloop_struct_74186.free_max_res_66460 = max_res_66460;
    futhark_mc_segmap_parloop_struct_74186.free_mem_68221 = mem_68221.mem;
    futhark_mc_segmap_parloop_struct_74186.free_mem_68224 = mem_68224.mem;
    futhark_mc_segmap_parloop_struct_74186.free_mem_68227 = mem_68227.mem;
    futhark_mc_segmap_parloop_struct_74186.free_mem_68230 = mem_68230.mem;
    futhark_mc_segmap_parloop_struct_74186.free_bytes_68231 = bytes_68231;
    futhark_mc_segmap_parloop_struct_74186.free_mem_68233 = mem_68233.mem;
    futhark_mc_segmap_parloop_struct_74186.free_mem_68308 = mem_68308.mem;
    futhark_mc_segmap_parloop_struct_74186.free_mem_68311 = mem_68311.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74187_task;
    
    futhark_mc_segmap_parloop_74187_task.name =
        "futhark_mc_segmap_parloop_74187";
    futhark_mc_segmap_parloop_74187_task.fn = futhark_mc_segmap_parloop_74187;
    futhark_mc_segmap_parloop_74187_task.args =
        &futhark_mc_segmap_parloop_struct_74186;
    futhark_mc_segmap_parloop_74187_task.iterations = iterations;
    futhark_mc_segmap_parloop_74187_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74187_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74187_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74187_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74187_task);
    
    if (futhark_mc_segmap_parloop_74187_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74187_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74187_total_end -
                 futhark_mc_segmap_parloop_74187_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74187_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74187_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74187_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74185_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74185_end -
                 futhark_mc_segmap_task_74185_start;
        
        ctx->futhark_mc_segmap_task_74185_runs[tid]++;
        ctx->futhark_mc_segmap_task_74185_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74185_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74193 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_q_62258;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    bool free_x_62271;
    int64_t free_min_res_62276;
    bool free_loop_cond_62281;
    int64_t free_last_res_66442;
    int64_t free_min_arg_66454;
    int64_t free_min_arg_66455;
    int64_t free_min_res_66456;
    float free_max_res_66460;
    char *free_mem_68221;
    char *free_mem_68224;
    char *free_mem_68227;
    char *free_mem_68230;
    int64_t free_bytes_68231;
    char *free_mem_68233;
    char *free_mem_68308;
    char *free_mem_68311;
};
struct futhark_mc_task_74199 {
    struct futhark_context *ctx;
    int64_t free_q_62258;
    int64_t free_last_res_66442;
    char *free_mem_68227;
    char *free_mem_68233;
    int64_t free_max_res_73045;
    float free_defunc_1_f_res_73064;
    float free_defunc_0_f_res_73065;
    char *free_mem_73066;
    char *free_mem_73067;
};
struct futhark_mc_segmap_parloop_struct_74201 {
    struct futhark_context *ctx;
    int64_t free_q_62258;
    int64_t free_last_res_66442;
    char *free_mem_68227;
    char *free_mem_68233;
    int64_t free_max_res_73045;
    float free_defunc_1_f_res_73064;
    float free_defunc_0_f_res_73065;
    char *free_mem_73066;
    char *free_mem_73067;
};
static int futhark_mc_segmap_parloop_74202(void *args, int64_t start,
                                           int64_t end, int flat_tid_66240,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74201
    *futhark_mc_segmap_parloop_struct_74201 =
    (struct futhark_mc_segmap_parloop_struct_74201 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74201->ctx;
    uint64_t futhark_mc_segmap_parloop_74202_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74202_start = get_wall_time();
    
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74201->free_q_62258;
    int64_t last_res_66442 =
            futhark_mc_segmap_parloop_struct_74201->free_last_res_66442;
    struct memblock mem_68227 = {.desc ="mem_68227", .mem =
                                 futhark_mc_segmap_parloop_struct_74201->free_mem_68227,
                                 .size =0, .references =NULL};
    struct memblock mem_68233 = {.desc ="mem_68233", .mem =
                                 futhark_mc_segmap_parloop_struct_74201->free_mem_68233,
                                 .size =0, .references =NULL};
    int64_t max_res_73045 =
            futhark_mc_segmap_parloop_struct_74201->free_max_res_73045;
    float defunc_1_f_res_73064 =
          futhark_mc_segmap_parloop_struct_74201->free_defunc_1_f_res_73064;
    float defunc_0_f_res_73065 =
          futhark_mc_segmap_parloop_struct_74201->free_defunc_0_f_res_73065;
    struct memblock mem_73066 = {.desc ="mem_73066", .mem =
                                 futhark_mc_segmap_parloop_struct_74201->free_mem_73066,
                                 .size =0, .references =NULL};
    struct memblock mem_73067 = {.desc ="mem_73067", .mem =
                                 futhark_mc_segmap_parloop_struct_74201->free_mem_73067,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73664 = start;
    
    for (; iter_73664 < end; iter_73664++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73668 = q_62258;
        int64_t gtid_66241 = iter_73664;
        int64_t remnant_73669 = iter_73664 - gtid_66241;
        float x_73593 = ((float *) mem_68233.mem)[gtid_66241];
        bool cond_73594 = sle64(last_res_66442, gtid_66241);
        float defunc_0_f_res_73595;
        
        if (cond_73594) {
            defunc_0_f_res_73595 = 0.0F;
        } else {
            int64_t i_73665 = add64(gtid_66241, max_res_73045);
            float x_73666 = ((float *) mem_68227.mem)[i_73665];
            float defunc_0_f_res_f_res_73667 = 1.0F + x_73666;
            
            defunc_0_f_res_73595 = defunc_0_f_res_f_res_73667;
        }
        
        float x_j_73599 = defunc_0_f_res_73595 - defunc_0_f_res_73065;
        float abs_res_73600 = (float) fabs(x_j_73599);
        float tmp1_73601 = abs_res_73600 / defunc_1_f_res_73064;
        float x_73602 = tmp1_73601 * tmp1_73601;
        float y_73603 = tmp1_73601 * x_73602;
        float tmp2_73604 = 1.0F - y_73603;
        float x_73605 = tmp2_73604 * tmp2_73604;
        float tmp3_73606 = tmp2_73604 * x_73605;
        float tmp4_73607 = x_73593 * tmp3_73606;
        
        ((float *) mem_73066.mem)[gtid_66241] = x_j_73599;
        ((float *) mem_73067.mem)[gtid_66241] = tmp4_73607;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74202_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74202_end -
                 futhark_mc_segmap_parloop_74202_start;
        
        ctx->futhark_mc_segmap_parloop_74202_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74202_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74202_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74200(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66240 = tid;
    int num_tasks_73663 = info.nsubtasks;
    struct futhark_mc_task_74199 *futhark_mc_task_74199 =
                                 (struct futhark_mc_task_74199 *) args;
    struct futhark_context *ctx = futhark_mc_task_74199->ctx;
    uint64_t futhark_mc_segmap_task_74200_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74200_start = get_wall_time();
    
    int64_t q_62258 = futhark_mc_task_74199->free_q_62258;
    int64_t last_res_66442 = futhark_mc_task_74199->free_last_res_66442;
    struct memblock mem_68227 = {.desc ="mem_68227", .mem =
                                 futhark_mc_task_74199->free_mem_68227, .size =
                                 0, .references =NULL};
    struct memblock mem_68233 = {.desc ="mem_68233", .mem =
                                 futhark_mc_task_74199->free_mem_68233, .size =
                                 0, .references =NULL};
    int64_t max_res_73045 = futhark_mc_task_74199->free_max_res_73045;
    float defunc_1_f_res_73064 =
          futhark_mc_task_74199->free_defunc_1_f_res_73064;
    float defunc_0_f_res_73065 =
          futhark_mc_task_74199->free_defunc_0_f_res_73065;
    struct memblock mem_73066 = {.desc ="mem_73066", .mem =
                                 futhark_mc_task_74199->free_mem_73066, .size =
                                 0, .references =NULL};
    struct memblock mem_73067 = {.desc ="mem_73067", .mem =
                                 futhark_mc_task_74199->free_mem_73067, .size =
                                 0, .references =NULL};
    int64_t iter_73664;
    struct futhark_mc_segmap_parloop_struct_74201
    futhark_mc_segmap_parloop_struct_74201;
    
    futhark_mc_segmap_parloop_struct_74201.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74201.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74201.free_last_res_66442 = last_res_66442;
    futhark_mc_segmap_parloop_struct_74201.free_mem_68227 = mem_68227.mem;
    futhark_mc_segmap_parloop_struct_74201.free_mem_68233 = mem_68233.mem;
    futhark_mc_segmap_parloop_struct_74201.free_max_res_73045 = max_res_73045;
    futhark_mc_segmap_parloop_struct_74201.free_defunc_1_f_res_73064 =
        defunc_1_f_res_73064;
    futhark_mc_segmap_parloop_struct_74201.free_defunc_0_f_res_73065 =
        defunc_0_f_res_73065;
    futhark_mc_segmap_parloop_struct_74201.free_mem_73066 = mem_73066.mem;
    futhark_mc_segmap_parloop_struct_74201.free_mem_73067 = mem_73067.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74202_task;
    
    futhark_mc_segmap_parloop_74202_task.name =
        "futhark_mc_segmap_parloop_74202";
    futhark_mc_segmap_parloop_74202_task.fn = futhark_mc_segmap_parloop_74202;
    futhark_mc_segmap_parloop_74202_task.args =
        &futhark_mc_segmap_parloop_struct_74201;
    futhark_mc_segmap_parloop_74202_task.iterations = iterations;
    futhark_mc_segmap_parloop_74202_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74202_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74202_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74202_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74202_task);
    
    if (futhark_mc_segmap_parloop_74202_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74202_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74202_total_end -
                 futhark_mc_segmap_parloop_74202_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74202_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74202_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74202_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74200_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74200_end -
                 futhark_mc_segmap_task_74200_start;
        
        ctx->futhark_mc_segmap_task_74200_runs[tid]++;
        ctx->futhark_mc_segmap_task_74200_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74200_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74203 {
    struct futhark_context *ctx;
    char *free_mem_73066;
    char *free_mem_73067;
    float *retval_defunc_2_reduce_res_73087;
    float *retval_defunc_2_reduce_res_73088;
    float *retval_defunc_2_reduce_res_73089;
    float *retval_defunc_2_reduce_res_73090;
    float *retval_defunc_2_reduce_res_73091;
    char *retval_mem_73085;
    char *retval_mem_73086;
};
struct futhark_mc_segred_stage_1_parloop_struct_74210 {
    struct futhark_context *ctx;
    char *free_mem_73066;
    char *free_mem_73067;
    char *free_mem_73085;
    char *free_mem_73086;
    char *free_reduce_stage_1_tid_res_arr_mem_73671;
    char *free_reduce_stage_1_tid_res_arr_mem_73673;
    char *free_reduce_stage_1_tid_res_arr_mem_73675;
    char *free_reduce_stage_1_tid_res_arr_mem_73677;
    char *free_reduce_stage_1_tid_res_arr_mem_73679;
};
static int futhark_mc_segred_stage_1_parloop_74211(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66242, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74210
    *futhark_mc_segred_stage_1_parloop_struct_74210 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74210 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74210->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74211_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74211_start = get_wall_time();
    
    struct memblock mem_73066 = {.desc ="mem_73066", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74210->free_mem_73066,
                                 .size =0, .references =NULL};
    struct memblock mem_73067 = {.desc ="mem_73067", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74210->free_mem_73067,
                                 .size =0, .references =NULL};
    struct memblock mem_73085 = {.desc ="mem_73085", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74210->free_mem_73085,
                                 .size =0, .references =NULL};
    struct memblock mem_73086 = {.desc ="mem_73086", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74210->free_mem_73086,
                                 .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73671 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73671",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74210->free_reduce_stage_1_tid_res_arr_mem_73671,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73673 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73673",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74210->free_reduce_stage_1_tid_res_arr_mem_73673,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73675 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73675",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74210->free_reduce_stage_1_tid_res_arr_mem_73675,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73677 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73677",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74210->free_reduce_stage_1_tid_res_arr_mem_73677,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73679 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73679",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74210->free_reduce_stage_1_tid_res_arr_mem_73679,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73681 = start;
    float x_73608;
    float x_73609;
    float x_73611;
    float x_73612;
    float x_73614;
    float x_73615;
    float x_73617;
    float x_73618;
    float x_73620;
    float x_73621;
    float local_acc_73682 = 0.0F;
    float local_acc_73683 = 0.0F;
    float local_acc_73684 = 0.0F;
    float local_acc_73685 = 0.0F;
    float local_acc_73686 = 0.0F;
    
    for (; iter_73681 < end; iter_73681++) {
        int64_t gtid_66243 = iter_73681;
        float x_73623 = ((float *) mem_73066.mem)[gtid_66243];
        float x_73624 = ((float *) mem_73067.mem)[gtid_66243];
        float defunc_1_f_res_73625 = x_73623 * x_73624;
        float defunc_1_f_res_73626 = x_73623 * defunc_1_f_res_73625;
        float defunc_1_f_res_73627 = x_73623 * defunc_1_f_res_73626;
        float defunc_1_f_res_73628 = x_73623 * defunc_1_f_res_73627;
        
        // save map-out results
        {
            ((float *) mem_73085.mem)[gtid_66243] = defunc_1_f_res_73626;
            ((float *) mem_73086.mem)[gtid_66243] = defunc_1_f_res_73625;
        }
        // Load accum params
        {
            x_73608 = local_acc_73682;
        }
        // Load next params
        {
            x_73609 = x_73624;
        }
        // Red body
        {
            float defunc_1_op_res_73610 = x_73608 + x_73609;
            
            local_acc_73682 = defunc_1_op_res_73610;
        }
        // Load accum params
        {
            x_73611 = local_acc_73683;
        }
        // Load next params
        {
            x_73612 = defunc_1_f_res_73625;
        }
        // Red body
        {
            float defunc_1_op_res_73613 = x_73611 + x_73612;
            
            local_acc_73683 = defunc_1_op_res_73613;
        }
        // Load accum params
        {
            x_73614 = local_acc_73684;
        }
        // Load next params
        {
            x_73615 = defunc_1_f_res_73626;
        }
        // Red body
        {
            float defunc_1_op_res_73616 = x_73614 + x_73615;
            
            local_acc_73684 = defunc_1_op_res_73616;
        }
        // Load accum params
        {
            x_73617 = local_acc_73685;
        }
        // Load next params
        {
            x_73618 = defunc_1_f_res_73627;
        }
        // Red body
        {
            float defunc_1_op_res_73619 = x_73617 + x_73618;
            
            local_acc_73685 = defunc_1_op_res_73619;
        }
        // Load accum params
        {
            x_73620 = local_acc_73686;
        }
        // Load next params
        {
            x_73621 = defunc_1_f_res_73628;
        }
        // Red body
        {
            float defunc_1_op_res_73622 = x_73620 + x_73621;
            
            local_acc_73686 = defunc_1_op_res_73622;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_73671.mem)[flat_tid_66242] =
        local_acc_73682;
    ((float *) reduce_stage_1_tid_res_arr_mem_73673.mem)[flat_tid_66242] =
        local_acc_73683;
    ((float *) reduce_stage_1_tid_res_arr_mem_73675.mem)[flat_tid_66242] =
        local_acc_73684;
    ((float *) reduce_stage_1_tid_res_arr_mem_73677.mem)[flat_tid_66242] =
        local_acc_73685;
    ((float *) reduce_stage_1_tid_res_arr_mem_73679.mem)[flat_tid_66242] =
        local_acc_73686;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74211_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74211_end -
                 futhark_mc_segred_stage_1_parloop_74211_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74211_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74211_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74211_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74204(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66242 = tid;
    int num_tasks_73670 = info.nsubtasks;
    struct futhark_mc_task_74203 *futhark_mc_task_74203 =
                                 (struct futhark_mc_task_74203 *) args;
    struct futhark_context *ctx = futhark_mc_task_74203->ctx;
    uint64_t futhark_mc_segred_task_74204_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74204_start = get_wall_time();
    
    struct memblock mem_73066 = {.desc ="mem_73066", .mem =
                                 futhark_mc_task_74203->free_mem_73066, .size =
                                 0, .references =NULL};
    struct memblock mem_73067 = {.desc ="mem_73067", .mem =
                                 futhark_mc_task_74203->free_mem_73067, .size =
                                 0, .references =NULL};
    float defunc_2_reduce_res_73087 =
          *futhark_mc_task_74203->retval_defunc_2_reduce_res_73087;
    float defunc_2_reduce_res_73088 =
          *futhark_mc_task_74203->retval_defunc_2_reduce_res_73088;
    float defunc_2_reduce_res_73089 =
          *futhark_mc_task_74203->retval_defunc_2_reduce_res_73089;
    float defunc_2_reduce_res_73090 =
          *futhark_mc_task_74203->retval_defunc_2_reduce_res_73090;
    float defunc_2_reduce_res_73091 =
          *futhark_mc_task_74203->retval_defunc_2_reduce_res_73091;
    struct memblock mem_73085 = {.desc ="mem_73085", .mem =
                                 futhark_mc_task_74203->retval_mem_73085,
                                 .size =0, .references =NULL};
    struct memblock mem_73086 = {.desc ="mem_73086", .mem =
                                 futhark_mc_task_74203->retval_mem_73086,
                                 .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_73671_cached_sizze_74205 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73671 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73673_cached_sizze_74206 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73673 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73675_cached_sizze_74207 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73675 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73677_cached_sizze_74208 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73677 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73679_cached_sizze_74209 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73679 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_73671_cached_sizze_74205 <
        (size_t) ((int64_t) 4 * num_tasks_73670)) {
        reduce_stage_1_tid_res_arr_mem_73671 =
            realloc(reduce_stage_1_tid_res_arr_mem_73671, (int64_t) 4 *
                    num_tasks_73670);
        reduce_stage_1_tid_res_arr_mem_73671_cached_sizze_74205 = (int64_t) 4 *
            num_tasks_73670;
    }
    if (reduce_stage_1_tid_res_arr_mem_73673_cached_sizze_74206 <
        (size_t) ((int64_t) 4 * num_tasks_73670)) {
        reduce_stage_1_tid_res_arr_mem_73673 =
            realloc(reduce_stage_1_tid_res_arr_mem_73673, (int64_t) 4 *
                    num_tasks_73670);
        reduce_stage_1_tid_res_arr_mem_73673_cached_sizze_74206 = (int64_t) 4 *
            num_tasks_73670;
    }
    if (reduce_stage_1_tid_res_arr_mem_73675_cached_sizze_74207 <
        (size_t) ((int64_t) 4 * num_tasks_73670)) {
        reduce_stage_1_tid_res_arr_mem_73675 =
            realloc(reduce_stage_1_tid_res_arr_mem_73675, (int64_t) 4 *
                    num_tasks_73670);
        reduce_stage_1_tid_res_arr_mem_73675_cached_sizze_74207 = (int64_t) 4 *
            num_tasks_73670;
    }
    if (reduce_stage_1_tid_res_arr_mem_73677_cached_sizze_74208 <
        (size_t) ((int64_t) 4 * num_tasks_73670)) {
        reduce_stage_1_tid_res_arr_mem_73677 =
            realloc(reduce_stage_1_tid_res_arr_mem_73677, (int64_t) 4 *
                    num_tasks_73670);
        reduce_stage_1_tid_res_arr_mem_73677_cached_sizze_74208 = (int64_t) 4 *
            num_tasks_73670;
    }
    if (reduce_stage_1_tid_res_arr_mem_73679_cached_sizze_74209 <
        (size_t) ((int64_t) 4 * num_tasks_73670)) {
        reduce_stage_1_tid_res_arr_mem_73679 =
            realloc(reduce_stage_1_tid_res_arr_mem_73679, (int64_t) 4 *
                    num_tasks_73670);
        reduce_stage_1_tid_res_arr_mem_73679_cached_sizze_74209 = (int64_t) 4 *
            num_tasks_73670;
    }
    
    int64_t iter_73681;
    struct futhark_mc_segred_stage_1_parloop_struct_74210
    futhark_mc_segred_stage_1_parloop_struct_74210;
    
    futhark_mc_segred_stage_1_parloop_struct_74210.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74210.free_mem_73066 =
        mem_73066.mem;
    futhark_mc_segred_stage_1_parloop_struct_74210.free_mem_73067 =
        mem_73067.mem;
    futhark_mc_segred_stage_1_parloop_struct_74210.free_mem_73085 =
        mem_73085.mem;
    futhark_mc_segred_stage_1_parloop_struct_74210.free_mem_73086 =
        mem_73086.mem;
    futhark_mc_segred_stage_1_parloop_struct_74210.free_reduce_stage_1_tid_res_arr_mem_73671 =
        reduce_stage_1_tid_res_arr_mem_73671;
    futhark_mc_segred_stage_1_parloop_struct_74210.free_reduce_stage_1_tid_res_arr_mem_73673 =
        reduce_stage_1_tid_res_arr_mem_73673;
    futhark_mc_segred_stage_1_parloop_struct_74210.free_reduce_stage_1_tid_res_arr_mem_73675 =
        reduce_stage_1_tid_res_arr_mem_73675;
    futhark_mc_segred_stage_1_parloop_struct_74210.free_reduce_stage_1_tid_res_arr_mem_73677 =
        reduce_stage_1_tid_res_arr_mem_73677;
    futhark_mc_segred_stage_1_parloop_struct_74210.free_reduce_stage_1_tid_res_arr_mem_73679 =
        reduce_stage_1_tid_res_arr_mem_73679;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74211_task;
    
    futhark_mc_segred_stage_1_parloop_74211_task.name =
        "futhark_mc_segred_stage_1_parloop_74211";
    futhark_mc_segred_stage_1_parloop_74211_task.fn =
        futhark_mc_segred_stage_1_parloop_74211;
    futhark_mc_segred_stage_1_parloop_74211_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74210;
    futhark_mc_segred_stage_1_parloop_74211_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74211_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74211_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74211_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74211_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74211_task);
    
    if (futhark_mc_segred_stage_1_parloop_74211_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74211_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74211_total_end -
                 futhark_mc_segred_stage_1_parloop_74211_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74211_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74211_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74211_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_73087 = 0.0F;
        defunc_2_reduce_res_73088 = 0.0F;
        defunc_2_reduce_res_73089 = 0.0F;
        defunc_2_reduce_res_73090 = 0.0F;
        defunc_2_reduce_res_73091 = 0.0F;
    }
    
    float x_73687;
    float x_73688;
    float x_73690;
    float x_73691;
    float x_73693;
    float x_73694;
    float x_73696;
    float x_73697;
    float x_73699;
    float x_73700;
    
    for (int32_t i_73702 = 0; i_73702 < num_tasks_73670; i_73702++) {
        flat_tid_66242 = i_73702;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_73687 = defunc_2_reduce_res_73087;
            }
            // load next params
            {
                x_73688 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73671)[flat_tid_66242];
            }
            // red body
            {
                float defunc_1_op_res_73689 = x_73687 + x_73688;
                
                defunc_2_reduce_res_73087 = defunc_1_op_res_73689;
            }
            // load acc params
            {
                x_73690 = defunc_2_reduce_res_73088;
            }
            // load next params
            {
                x_73691 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73673)[flat_tid_66242];
            }
            // red body
            {
                float defunc_1_op_res_73692 = x_73690 + x_73691;
                
                defunc_2_reduce_res_73088 = defunc_1_op_res_73692;
            }
            // load acc params
            {
                x_73693 = defunc_2_reduce_res_73089;
            }
            // load next params
            {
                x_73694 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73675)[flat_tid_66242];
            }
            // red body
            {
                float defunc_1_op_res_73695 = x_73693 + x_73694;
                
                defunc_2_reduce_res_73089 = defunc_1_op_res_73695;
            }
            // load acc params
            {
                x_73696 = defunc_2_reduce_res_73090;
            }
            // load next params
            {
                x_73697 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73677)[flat_tid_66242];
            }
            // red body
            {
                float defunc_1_op_res_73698 = x_73696 + x_73697;
                
                defunc_2_reduce_res_73090 = defunc_1_op_res_73698;
            }
            // load acc params
            {
                x_73699 = defunc_2_reduce_res_73091;
            }
            // load next params
            {
                x_73700 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73679)[flat_tid_66242];
            }
            // red body
            {
                float defunc_1_op_res_73701 = x_73699 + x_73700;
                
                defunc_2_reduce_res_73091 = defunc_1_op_res_73701;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_73671);
    free(reduce_stage_1_tid_res_arr_mem_73673);
    free(reduce_stage_1_tid_res_arr_mem_73675);
    free(reduce_stage_1_tid_res_arr_mem_73677);
    free(reduce_stage_1_tid_res_arr_mem_73679);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74204_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74204_end -
                 futhark_mc_segred_task_74204_start;
        
        ctx->futhark_mc_segred_task_74204_runs[tid]++;
        ctx->futhark_mc_segred_task_74204_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74204_iter[tid] += iterations;
    }
    *futhark_mc_task_74203->retval_defunc_2_reduce_res_73087 =
        defunc_2_reduce_res_73087;
    *futhark_mc_task_74203->retval_defunc_2_reduce_res_73088 =
        defunc_2_reduce_res_73088;
    *futhark_mc_task_74203->retval_defunc_2_reduce_res_73089 =
        defunc_2_reduce_res_73089;
    *futhark_mc_task_74203->retval_defunc_2_reduce_res_73090 =
        defunc_2_reduce_res_73090;
    *futhark_mc_task_74203->retval_defunc_2_reduce_res_73091 =
        defunc_2_reduce_res_73091;
    futhark_mc_task_74203->retval_mem_73085 = mem_73085.mem;
    futhark_mc_task_74203->retval_mem_73086 = mem_73086.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74212 {
    struct futhark_context *ctx;
    int64_t free_last_res_66442;
    char *free_mem_68221;
    int64_t free_max_res_73045;
    char *free_mem_73067;
    char *free_mem_73085;
    char *free_mem_73086;
    float free_a12_73135;
    float free_b12_73136;
    float free_c12_73137;
    float free_b2_73138;
    float free_c2_73139;
    float *retval_defunc_2_reduce_res_73140;
    float *retval_defunc_2_reduce_res_73141;
};
struct futhark_mc_segred_stage_1_parloop_struct_74216 {
    struct futhark_context *ctx;
    int64_t free_last_res_66442;
    char *free_mem_68221;
    int64_t free_max_res_73045;
    char *free_mem_73067;
    char *free_mem_73085;
    char *free_mem_73086;
    float free_a12_73135;
    float free_b12_73136;
    float free_c12_73137;
    float free_b2_73138;
    float free_c2_73139;
    char *free_reduce_stage_1_tid_res_arr_mem_73704;
    char *free_reduce_stage_1_tid_res_arr_mem_73706;
};
static int futhark_mc_segred_stage_1_parloop_74217(void *args, int64_t start,
                                                   int64_t end,
                                                   int flat_tid_66244, int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_74216
    *futhark_mc_segred_stage_1_parloop_struct_74216 =
    (struct futhark_mc_segred_stage_1_parloop_struct_74216 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_74216->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_74217_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74217_start = get_wall_time();
    
    int64_t last_res_66442 =
            futhark_mc_segred_stage_1_parloop_struct_74216->free_last_res_66442;
    struct memblock mem_68221 = {.desc ="mem_68221", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74216->free_mem_68221,
                                 .size =0, .references =NULL};
    int64_t max_res_73045 =
            futhark_mc_segred_stage_1_parloop_struct_74216->free_max_res_73045;
    struct memblock mem_73067 = {.desc ="mem_73067", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74216->free_mem_73067,
                                 .size =0, .references =NULL};
    struct memblock mem_73085 = {.desc ="mem_73085", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74216->free_mem_73085,
                                 .size =0, .references =NULL};
    struct memblock mem_73086 = {.desc ="mem_73086", .mem =
                                 futhark_mc_segred_stage_1_parloop_struct_74216->free_mem_73086,
                                 .size =0, .references =NULL};
    float a12_73135 =
          futhark_mc_segred_stage_1_parloop_struct_74216->free_a12_73135;
    float b12_73136 =
          futhark_mc_segred_stage_1_parloop_struct_74216->free_b12_73136;
    float c12_73137 =
          futhark_mc_segred_stage_1_parloop_struct_74216->free_c12_73137;
    float b2_73138 =
          futhark_mc_segred_stage_1_parloop_struct_74216->free_b2_73138;
    float c2_73139 =
          futhark_mc_segred_stage_1_parloop_struct_74216->free_c2_73139;
    struct memblock reduce_stage_1_tid_res_arr_mem_73704 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73704",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74216->free_reduce_stage_1_tid_res_arr_mem_73704,
                                                            .size =0,
                                                            .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_73706 = {.desc =
                                                            "reduce_stage_1_tid_res_arr_mem_73706",
                                                            .mem =
                                                            futhark_mc_segred_stage_1_parloop_struct_74216->free_reduce_stage_1_tid_res_arr_mem_73706,
                                                            .size =0,
                                                            .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73708 = start;
    float x_73629;
    float x_73630;
    float x_73632;
    float x_73633;
    float local_acc_73709 = 0.0F;
    float local_acc_73710 = 0.0F;
    
    for (; iter_73708 < end; iter_73708++) {
        int64_t gtid_66245 = iter_73708;
        float x_73635 = ((float *) mem_73067.mem)[gtid_66245];
        float x_73636 = ((float *) mem_73086.mem)[gtid_66245];
        float x_73637 = ((float *) mem_73085.mem)[gtid_66245];
        bool cond_73638 = sle64(last_res_66442, gtid_66245);
        float defunc_0_f_res_73639;
        
        if (cond_73638) {
            defunc_0_f_res_73639 = 0.0F;
        } else {
            int64_t i_73640 = add64(gtid_66245, max_res_73045);
            float x_73641 = ((float *) mem_68221.mem)[i_73640];
            
            defunc_0_f_res_73639 = x_73641;
        }
        
        float x_73642 = a12_73135 * x_73635;
        float y_73643 = b12_73136 * x_73636;
        float x_73644 = x_73642 + y_73643;
        float y_73645 = c12_73137 * x_73637;
        float x_73646 = x_73644 + y_73645;
        float defunc_9_fit_fun_res_73647 = defunc_0_f_res_73639 * x_73646;
        float x_73648 = b12_73136 * x_73635;
        float y_73649 = b2_73138 * x_73636;
        float x_73650 = x_73648 + y_73649;
        float y_73651 = c2_73139 * x_73637;
        float x_73652 = x_73650 + y_73651;
        float defunc_9_slope_fun_res_73653 = defunc_0_f_res_73639 * x_73652;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_73629 = local_acc_73709;
        }
        // Load next params
        {
            x_73630 = defunc_9_fit_fun_res_73647;
        }
        // Red body
        {
            float defunc_1_op_res_73631 = x_73629 + x_73630;
            
            local_acc_73709 = defunc_1_op_res_73631;
        }
        // Load accum params
        {
            x_73632 = local_acc_73710;
        }
        // Load next params
        {
            x_73633 = defunc_9_slope_fun_res_73653;
        }
        // Red body
        {
            float defunc_1_op_res_73634 = x_73632 + x_73633;
            
            local_acc_73710 = defunc_1_op_res_73634;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_73704.mem)[flat_tid_66244] =
        local_acc_73709;
    ((float *) reduce_stage_1_tid_res_arr_mem_73706.mem)[flat_tid_66244] =
        local_acc_73710;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74217_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74217_end -
                 futhark_mc_segred_stage_1_parloop_74217_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_74217_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_74217_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_74217_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_74213(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66244 = tid;
    int num_tasks_73703 = info.nsubtasks;
    struct futhark_mc_task_74212 *futhark_mc_task_74212 =
                                 (struct futhark_mc_task_74212 *) args;
    struct futhark_context *ctx = futhark_mc_task_74212->ctx;
    uint64_t futhark_mc_segred_task_74213_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_74213_start = get_wall_time();
    
    int64_t last_res_66442 = futhark_mc_task_74212->free_last_res_66442;
    struct memblock mem_68221 = {.desc ="mem_68221", .mem =
                                 futhark_mc_task_74212->free_mem_68221, .size =
                                 0, .references =NULL};
    int64_t max_res_73045 = futhark_mc_task_74212->free_max_res_73045;
    struct memblock mem_73067 = {.desc ="mem_73067", .mem =
                                 futhark_mc_task_74212->free_mem_73067, .size =
                                 0, .references =NULL};
    struct memblock mem_73085 = {.desc ="mem_73085", .mem =
                                 futhark_mc_task_74212->free_mem_73085, .size =
                                 0, .references =NULL};
    struct memblock mem_73086 = {.desc ="mem_73086", .mem =
                                 futhark_mc_task_74212->free_mem_73086, .size =
                                 0, .references =NULL};
    float a12_73135 = futhark_mc_task_74212->free_a12_73135;
    float b12_73136 = futhark_mc_task_74212->free_b12_73136;
    float c12_73137 = futhark_mc_task_74212->free_c12_73137;
    float b2_73138 = futhark_mc_task_74212->free_b2_73138;
    float c2_73139 = futhark_mc_task_74212->free_c2_73139;
    float defunc_2_reduce_res_73140 =
          *futhark_mc_task_74212->retval_defunc_2_reduce_res_73140;
    float defunc_2_reduce_res_73141 =
          *futhark_mc_task_74212->retval_defunc_2_reduce_res_73141;
    size_t reduce_stage_1_tid_res_arr_mem_73704_cached_sizze_74214 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73704 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_73706_cached_sizze_74215 = 0;
    char *reduce_stage_1_tid_res_arr_mem_73706 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_73704_cached_sizze_74214 <
        (size_t) ((int64_t) 4 * num_tasks_73703)) {
        reduce_stage_1_tid_res_arr_mem_73704 =
            realloc(reduce_stage_1_tid_res_arr_mem_73704, (int64_t) 4 *
                    num_tasks_73703);
        reduce_stage_1_tid_res_arr_mem_73704_cached_sizze_74214 = (int64_t) 4 *
            num_tasks_73703;
    }
    if (reduce_stage_1_tid_res_arr_mem_73706_cached_sizze_74215 <
        (size_t) ((int64_t) 4 * num_tasks_73703)) {
        reduce_stage_1_tid_res_arr_mem_73706 =
            realloc(reduce_stage_1_tid_res_arr_mem_73706, (int64_t) 4 *
                    num_tasks_73703);
        reduce_stage_1_tid_res_arr_mem_73706_cached_sizze_74215 = (int64_t) 4 *
            num_tasks_73703;
    }
    
    int64_t iter_73708;
    struct futhark_mc_segred_stage_1_parloop_struct_74216
    futhark_mc_segred_stage_1_parloop_struct_74216;
    
    futhark_mc_segred_stage_1_parloop_struct_74216.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_74216.free_last_res_66442 =
        last_res_66442;
    futhark_mc_segred_stage_1_parloop_struct_74216.free_mem_68221 =
        mem_68221.mem;
    futhark_mc_segred_stage_1_parloop_struct_74216.free_max_res_73045 =
        max_res_73045;
    futhark_mc_segred_stage_1_parloop_struct_74216.free_mem_73067 =
        mem_73067.mem;
    futhark_mc_segred_stage_1_parloop_struct_74216.free_mem_73085 =
        mem_73085.mem;
    futhark_mc_segred_stage_1_parloop_struct_74216.free_mem_73086 =
        mem_73086.mem;
    futhark_mc_segred_stage_1_parloop_struct_74216.free_a12_73135 = a12_73135;
    futhark_mc_segred_stage_1_parloop_struct_74216.free_b12_73136 = b12_73136;
    futhark_mc_segred_stage_1_parloop_struct_74216.free_c12_73137 = c12_73137;
    futhark_mc_segred_stage_1_parloop_struct_74216.free_b2_73138 = b2_73138;
    futhark_mc_segred_stage_1_parloop_struct_74216.free_c2_73139 = c2_73139;
    futhark_mc_segred_stage_1_parloop_struct_74216.free_reduce_stage_1_tid_res_arr_mem_73704 =
        reduce_stage_1_tid_res_arr_mem_73704;
    futhark_mc_segred_stage_1_parloop_struct_74216.free_reduce_stage_1_tid_res_arr_mem_73706 =
        reduce_stage_1_tid_res_arr_mem_73706;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_74217_task;
    
    futhark_mc_segred_stage_1_parloop_74217_task.name =
        "futhark_mc_segred_stage_1_parloop_74217";
    futhark_mc_segred_stage_1_parloop_74217_task.fn =
        futhark_mc_segred_stage_1_parloop_74217;
    futhark_mc_segred_stage_1_parloop_74217_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_74216;
    futhark_mc_segred_stage_1_parloop_74217_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_74217_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_74217_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_74217_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_74217_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_74217_task);
    
    if (futhark_mc_segred_stage_1_parloop_74217_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_74217_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_74217_total_end -
                 futhark_mc_segred_stage_1_parloop_74217_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74217_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74217_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_74217_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_73140 = 0.0F;
        defunc_2_reduce_res_73141 = 0.0F;
    }
    
    float x_73711;
    float x_73712;
    float x_73714;
    float x_73715;
    
    for (int32_t i_73717 = 0; i_73717 < num_tasks_73703; i_73717++) {
        flat_tid_66244 = i_73717;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_73711 = defunc_2_reduce_res_73140;
            }
            // load next params
            {
                x_73712 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73704)[flat_tid_66244];
            }
            // red body
            {
                float defunc_1_op_res_73713 = x_73711 + x_73712;
                
                defunc_2_reduce_res_73140 = defunc_1_op_res_73713;
            }
            // load acc params
            {
                x_73714 = defunc_2_reduce_res_73141;
            }
            // load next params
            {
                x_73715 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_73706)[flat_tid_66244];
            }
            // red body
            {
                float defunc_1_op_res_73716 = x_73714 + x_73715;
                
                defunc_2_reduce_res_73141 = defunc_1_op_res_73716;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_73704);
    free(reduce_stage_1_tid_res_arr_mem_73706);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_74213_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_74213_end -
                 futhark_mc_segred_task_74213_start;
        
        ctx->futhark_mc_segred_task_74213_runs[tid]++;
        ctx->futhark_mc_segred_task_74213_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_74213_iter[tid] += iterations;
    }
    *futhark_mc_task_74212->retval_defunc_2_reduce_res_73140 =
        defunc_2_reduce_res_73140;
    *futhark_mc_task_74212->retval_defunc_2_reduce_res_73141 =
        defunc_2_reduce_res_73141;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74194(void *args, int64_t start,
                                           int64_t end, int flat_tid_66238,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74193
    *futhark_mc_segmap_parloop_struct_74193 =
    (struct futhark_mc_segmap_parloop_struct_74193 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74193->ctx;
    uint64_t futhark_mc_segmap_parloop_74194_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74194_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74193->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74193->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74193->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74193->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74193->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_74193->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_74193->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_74193->free_loop_cond_62281;
    int64_t last_res_66442 =
            futhark_mc_segmap_parloop_struct_74193->free_last_res_66442;
    int64_t min_arg_66454 =
            futhark_mc_segmap_parloop_struct_74193->free_min_arg_66454;
    int64_t min_arg_66455 =
            futhark_mc_segmap_parloop_struct_74193->free_min_arg_66455;
    int64_t min_res_66456 =
            futhark_mc_segmap_parloop_struct_74193->free_min_res_66456;
    float max_res_66460 =
          futhark_mc_segmap_parloop_struct_74193->free_max_res_66460;
    struct memblock mem_68221 = {.desc ="mem_68221", .mem =
                                 futhark_mc_segmap_parloop_struct_74193->free_mem_68221,
                                 .size =0, .references =NULL};
    struct memblock mem_68224 = {.desc ="mem_68224", .mem =
                                 futhark_mc_segmap_parloop_struct_74193->free_mem_68224,
                                 .size =0, .references =NULL};
    struct memblock mem_68227 = {.desc ="mem_68227", .mem =
                                 futhark_mc_segmap_parloop_struct_74193->free_mem_68227,
                                 .size =0, .references =NULL};
    struct memblock mem_68230 = {.desc ="mem_68230", .mem =
                                 futhark_mc_segmap_parloop_struct_74193->free_mem_68230,
                                 .size =0, .references =NULL};
    int64_t bytes_68231 =
            futhark_mc_segmap_parloop_struct_74193->free_bytes_68231;
    struct memblock mem_68233 = {.desc ="mem_68233", .mem =
                                 futhark_mc_segmap_parloop_struct_74193->free_mem_68233,
                                 .size =0, .references =NULL};
    struct memblock mem_68308 = {.desc ="mem_68308", .mem =
                                 futhark_mc_segmap_parloop_struct_74193->free_mem_68308,
                                 .size =0, .references =NULL};
    struct memblock mem_68311 = {.desc ="mem_68311", .mem =
                                 futhark_mc_segmap_parloop_struct_74193->free_mem_68311,
                                 .size =0, .references =NULL};
    size_t mem_73066_cached_sizze_74195 = 0;
    char *mem_73066 = NULL;
    size_t mem_73067_cached_sizze_74196 = 0;
    char *mem_73067 = NULL;
    size_t mem_73085_cached_sizze_74197 = 0;
    char *mem_73085 = NULL;
    size_t mem_73086_cached_sizze_74198 = 0;
    char *mem_73086 = NULL;
    int64_t iterations = end - start;
    int64_t iter_73537 = start;
    
    if (mem_73066_cached_sizze_74195 < (size_t) bytes_68231) {
        mem_73066 = realloc(mem_73066, bytes_68231);
        mem_73066_cached_sizze_74195 = bytes_68231;
    }
    if (mem_73067_cached_sizze_74196 < (size_t) bytes_68231) {
        mem_73067 = realloc(mem_73067, bytes_68231);
        mem_73067_cached_sizze_74196 = bytes_68231;
    }
    if (mem_73085_cached_sizze_74197 < (size_t) bytes_68231) {
        mem_73085 = realloc(mem_73085, bytes_68231);
        mem_73085_cached_sizze_74197 = bytes_68231;
    }
    if (mem_73086_cached_sizze_74198 < (size_t) bytes_68231) {
        mem_73086 = realloc(mem_73086, bytes_68231);
        mem_73086_cached_sizze_74198 = bytes_68231;
    }
    for (; iter_73537 < end; iter_73537++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73654 = n_m_62264;
        int64_t gtid_66239 = iter_73537;
        int64_t remnant_73655 = iter_73537 - gtid_66239;
        int64_t min_arg_72979 = mul64(jump_62260, gtid_66239);
        int64_t min_res_72980 = smin64(i_62270, min_arg_72979);
        int64_t defunc_0_g_res_72981 = add64((int64_t) 1, min_res_72980);
        bool init_idx_72982;
        int64_t init_idx_72983;
        int64_t init_idx_72984;
        bool loop_while_73538;
        int64_t low_73539;
        int64_t high_73540;
        
        loop_while_73538 = x_62271;
        low_73539 = (int64_t) 0;
        high_73540 = i_62270;
        while (loop_while_73538) {
            int64_t x_73541 = add64(low_73539, high_73540);
            int64_t mid_73542 = sdiv64(x_73541, (int64_t) 2);
            bool x_73543 = sle64((int64_t) 0, mid_73542);
            bool y_73544 = slt64(mid_73542, n_62256);
            bool bounds_check_73545 = x_73543 && y_73544;
            bool index_certs_73546;
            
            if (!bounds_check_73545) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_73542,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t mid_id_73547 = ((int64_t *) mem_68230.mem)[mid_73542];
            bool cond_73548 = slt64(mid_id_73547, (int64_t) 0);
            int64_t mid_idx_73549;
            
            if (cond_73548) {
                mid_idx_73549 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_73549 = mid_id_73547;
            }
            
            bool cond_73550 = sle64(defunc_0_g_res_72981, mid_idx_73549);
            int64_t loopres_73551;
            int64_t loopres_73552;
            
            if (cond_73550) {
                int64_t loopres_t_res_73553 = sub64(mid_73542, (int64_t) 1);
                
                loopres_73551 = low_73539;
                loopres_73552 = loopres_t_res_73553;
            } else {
                int64_t loopres_f_res_73554 = add64((int64_t) 1, mid_73542);
                
                loopres_73551 = loopres_f_res_73554;
                loopres_73552 = high_73540;
            }
            
            bool loop_cond_73555 = sle64(loopres_73551, loopres_73552);
            bool loop_while_tmp_73656 = loop_cond_73555;
            int64_t low_tmp_73657 = loopres_73551;
            int64_t high_tmp_73658 = loopres_73552;
            
            loop_while_73538 = loop_while_tmp_73656;
            low_73539 = low_tmp_73657;
            high_73540 = high_tmp_73658;
        }
        init_idx_72982 = loop_while_73538;
        init_idx_72983 = low_73539;
        init_idx_72984 = high_73540;
        
        bool idx_73003;
        int64_t idx_73004;
        int64_t idx_73005;
        int64_t idx_73006;
        bool loop_while_73556;
        int64_t l_idx_73557;
        int64_t r_idx_73558;
        int64_t span_73559;
        
        loop_while_73556 = loop_cond_62281;
        l_idx_73557 = init_idx_72983;
        r_idx_73558 = init_idx_72983;
        span_73559 = (int64_t) 1;
        while (loop_while_73556) {
            int64_t max_arg_73560 = sub64(l_idx_73557, (int64_t) 1);
            int64_t max_res_73561 = smax64((int64_t) 0, max_arg_73560);
            int64_t min_arg_73562 = add64((int64_t) 1, r_idx_73558);
            int64_t min_res_73563 = smin64(min_arg_66454, min_arg_73562);
            bool x_73564 = sle64((int64_t) 0, max_res_73561);
            bool y_73565 = slt64(max_res_73561, n_62256);
            bool bounds_check_73566 = x_73564 && y_73565;
            bool index_certs_73567;
            
            if (!bounds_check_73566) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_73561,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_73568 = ((int64_t *) mem_68230.mem)[max_res_73561];
            int64_t abs_arg_73569 = sub64(x_73568, defunc_0_g_res_72981);
            int64_t abs_res_73570 = abs64(abs_arg_73569);
            bool x_73571 = sle64((int64_t) 0, min_res_73563);
            bool y_73572 = slt64(min_res_73563, n_62256);
            bool bounds_check_73573 = x_73571 && y_73572;
            bool index_certs_73574;
            
            if (!bounds_check_73573) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_73563,
                              "] out of bounds for array of shape [",
                              (long long) n_62256, "].",
                              "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            int64_t x_73575 = ((int64_t *) mem_68230.mem)[min_res_73563];
            int64_t abs_arg_73576 = sub64(x_73575, defunc_0_g_res_72981);
            int64_t abs_res_73577 = abs64(abs_arg_73576);
            bool cond_73578 = max_res_73561 == l_idx_73557;
            int64_t loopres_73579;
            int64_t loopres_73580;
            int64_t loopres_73581;
            
            if (cond_73578) {
                loopres_73579 = l_idx_73557;
                loopres_73580 = r_idx_73558;
                loopres_73581 = min_res_62276;
            } else {
                bool cond_73582 = slt64(abs_res_73570, abs_res_73577);
                bool cond_f_res_73583 = min_res_73563 == r_idx_73558;
                bool x_73584 = !cond_73582;
                bool y_73585 = cond_f_res_73583 && x_73584;
                bool cond_73586 = cond_73582 || y_73585;
                int64_t loopres_f_res_73587;
                
                if (cond_73586) {
                    loopres_f_res_73587 = max_res_73561;
                } else {
                    loopres_f_res_73587 = l_idx_73557;
                }
                
                int64_t loopres_f_res_73588;
                
                if (cond_73586) {
                    loopres_f_res_73588 = r_idx_73558;
                } else {
                    loopres_f_res_73588 = min_res_73563;
                }
                
                int64_t loopres_f_res_73589;
                
                if (cond_73586) {
                    int64_t loopres_f_res_t_res_73590 = add64((int64_t) 1,
                                                              span_73559);
                    
                    loopres_f_res_73589 = loopres_f_res_t_res_73590;
                } else {
                    int64_t loopres_f_res_f_res_73591 = add64((int64_t) 1,
                                                              span_73559);
                    
                    loopres_f_res_73589 = loopres_f_res_f_res_73591;
                }
                loopres_73579 = loopres_f_res_73587;
                loopres_73580 = loopres_f_res_73588;
                loopres_73581 = loopres_f_res_73589;
            }
            
            bool loop_cond_73592 = slt64(loopres_73581, min_res_62276);
            bool loop_while_tmp_73659 = loop_cond_73592;
            int64_t l_idx_tmp_73660 = loopres_73579;
            int64_t r_idx_tmp_73661 = loopres_73580;
            int64_t span_tmp_73662 = loopres_73581;
            
            loop_while_73556 = loop_while_tmp_73659;
            l_idx_73557 = l_idx_tmp_73660;
            r_idx_73558 = r_idx_tmp_73661;
            span_73559 = span_tmp_73662;
        }
        idx_73003 = loop_while_73556;
        idx_73004 = l_idx_73557;
        idx_73005 = r_idx_73558;
        idx_73006 = span_73559;
        
        int64_t min_res_73044 = smin64(min_arg_66455, idx_73004);
        int64_t max_res_73045 = smax64((int64_t) 0, min_res_73044);
        int64_t x_73046 = add64(min_res_66456, max_res_73045);
        int64_t r_73047 = sub64(x_73046, (int64_t) 1);
        bool x_73048 = sle64((int64_t) 0, r_73047);
        bool y_73049 = slt64(r_73047, n_62256);
        bool bounds_check_73050 = x_73048 && y_73049;
        bool index_certs_73051;
        
        if (!bounds_check_73050) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_73047,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_73052 = ((int64_t *) mem_68224.mem)[r_73047];
        int64_t abs_arg_73053 = sub64(x_73052, min_res_72980);
        int64_t abs_res_73054 = abs64(abs_arg_73053);
        bool x_73055 = sle64((int64_t) 0, max_res_73045);
        bool y_73056 = slt64(max_res_73045, n_62256);
        bool bounds_check_73057 = x_73055 && y_73056;
        bool index_certs_73058;
        
        if (!bounds_check_73057) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_73045,
                                   "] out of bounds for array of shape [",
                                   (long long) n_62256, "].",
                                   "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  loess.fut:456:13-56\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  loess.fut:455:5-457:26\n   #9  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        int64_t x_73059 = ((int64_t *) mem_68224.mem)[max_res_73045];
        int64_t abs_arg_73060 = sub64(x_73059, min_res_72980);
        int64_t abs_res_73061 = abs64(abs_arg_73060);
        int64_t max_res_73062 = smax64(abs_res_73054, abs_res_73061);
        float defunc_0_f_res_73063 = sitofp_i64_f32(max_res_73062);
        float defunc_1_f_res_73064 = max_res_66460 + defunc_0_f_res_73063;
        float defunc_0_f_res_73065 = sitofp_i64_f32(min_res_72980);
        int64_t flat_tid_66240 = (int64_t) 0;
        int32_t num_tasks_73663;
        struct futhark_mc_task_74199 futhark_mc_task_74199;
        
        futhark_mc_task_74199.ctx = ctx;
        futhark_mc_task_74199.free_q_62258 = q_62258;
        futhark_mc_task_74199.free_last_res_66442 = last_res_66442;
        futhark_mc_task_74199.free_mem_68227 = mem_68227.mem;
        futhark_mc_task_74199.free_mem_68233 = mem_68233.mem;
        futhark_mc_task_74199.free_max_res_73045 = max_res_73045;
        futhark_mc_task_74199.free_defunc_1_f_res_73064 = defunc_1_f_res_73064;
        futhark_mc_task_74199.free_defunc_0_f_res_73065 = defunc_0_f_res_73065;
        futhark_mc_task_74199.free_mem_73066 = mem_73066;
        futhark_mc_task_74199.free_mem_73067 = mem_73067;
        
        struct scheduler_segop futhark_mc_task_74199_task;
        
        futhark_mc_task_74199_task.args = &futhark_mc_task_74199;
        futhark_mc_task_74199_task.top_level_fn = futhark_mc_segmap_task_74200;
        futhark_mc_task_74199_task.name = "futhark_mc_segmap_task_74200";
        futhark_mc_task_74199_task.iterations = q_62258;
        futhark_mc_task_74199_task.task_time =
            &ctx->futhark_mc_segmap_task_74200_total_time;
        futhark_mc_task_74199_task.task_iter =
            &ctx->futhark_mc_segmap_task_74200_total_iter;
        futhark_mc_task_74199_task.sched = STATIC;
        futhark_mc_task_74199_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74200_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74199_task);
        
        if (futhark_mc_segmap_task_74200_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_73087;
        float defunc_2_reduce_res_73088;
        float defunc_2_reduce_res_73089;
        float defunc_2_reduce_res_73090;
        float defunc_2_reduce_res_73091;
        int64_t flat_tid_66242 = (int64_t) 0;
        int32_t num_tasks_73670;
        struct futhark_mc_task_74203 futhark_mc_task_74203;
        
        futhark_mc_task_74203.ctx = ctx;
        futhark_mc_task_74203.free_mem_73066 = mem_73066;
        futhark_mc_task_74203.free_mem_73067 = mem_73067;
        futhark_mc_task_74203.retval_defunc_2_reduce_res_73087 =
            &defunc_2_reduce_res_73087;
        futhark_mc_task_74203.retval_defunc_2_reduce_res_73088 =
            &defunc_2_reduce_res_73088;
        futhark_mc_task_74203.retval_defunc_2_reduce_res_73089 =
            &defunc_2_reduce_res_73089;
        futhark_mc_task_74203.retval_defunc_2_reduce_res_73090 =
            &defunc_2_reduce_res_73090;
        futhark_mc_task_74203.retval_defunc_2_reduce_res_73091 =
            &defunc_2_reduce_res_73091;
        futhark_mc_task_74203.retval_mem_73085 = mem_73085;
        futhark_mc_task_74203.retval_mem_73086 = mem_73086;
        
        struct scheduler_segop futhark_mc_task_74203_task;
        
        futhark_mc_task_74203_task.args = &futhark_mc_task_74203;
        futhark_mc_task_74203_task.top_level_fn = futhark_mc_segred_task_74204;
        futhark_mc_task_74203_task.name = "futhark_mc_segred_task_74204";
        futhark_mc_task_74203_task.iterations = q_62258;
        futhark_mc_task_74203_task.task_time =
            &ctx->futhark_mc_segred_task_74204_total_time;
        futhark_mc_task_74203_task.task_iter =
            &ctx->futhark_mc_segred_task_74204_total_iter;
        futhark_mc_task_74203_task.sched = STATIC;
        futhark_mc_task_74203_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74204_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74203_task);
        
        if (futhark_mc_segred_task_74204_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_73115 = defunc_2_reduce_res_73089 * defunc_2_reduce_res_73091;
        float y_73116 = defunc_2_reduce_res_73090 * defunc_2_reduce_res_73090;
        float a12_73117 = x_73115 - y_73116;
        float x_73118 = defunc_2_reduce_res_73089 * defunc_2_reduce_res_73090;
        float y_73119 = defunc_2_reduce_res_73088 * defunc_2_reduce_res_73091;
        float b12_73120 = x_73118 - y_73119;
        float x_73121 = defunc_2_reduce_res_73088 * defunc_2_reduce_res_73090;
        float y_73122 = defunc_2_reduce_res_73089 * defunc_2_reduce_res_73089;
        float c12_73123 = x_73121 - y_73122;
        float x_73124 = defunc_2_reduce_res_73087 * defunc_2_reduce_res_73091;
        float b2_73125 = x_73124 - y_73122;
        float x_73126 = defunc_2_reduce_res_73088 * defunc_2_reduce_res_73089;
        float y_73127 = defunc_2_reduce_res_73087 * defunc_2_reduce_res_73090;
        float c2_73128 = x_73126 - y_73127;
        float x_73129 = defunc_2_reduce_res_73087 * a12_73117;
        float y_73130 = defunc_2_reduce_res_73088 * b12_73120;
        float x_73131 = x_73129 + y_73130;
        float y_73132 = defunc_2_reduce_res_73089 * c12_73123;
        float y_73133 = x_73131 + y_73132;
        float det_73134 = 1.0F / y_73133;
        float a12_73135 = a12_73117 * det_73134;
        float b12_73136 = b12_73120 * det_73134;
        float c12_73137 = c12_73123 * det_73134;
        float b2_73138 = b2_73125 * det_73134;
        float c2_73139 = c2_73128 * det_73134;
        float defunc_2_reduce_res_73140;
        float defunc_2_reduce_res_73141;
        int64_t flat_tid_66244 = (int64_t) 0;
        int32_t num_tasks_73703;
        struct futhark_mc_task_74212 futhark_mc_task_74212;
        
        futhark_mc_task_74212.ctx = ctx;
        futhark_mc_task_74212.free_last_res_66442 = last_res_66442;
        futhark_mc_task_74212.free_mem_68221 = mem_68221.mem;
        futhark_mc_task_74212.free_max_res_73045 = max_res_73045;
        futhark_mc_task_74212.free_mem_73067 = mem_73067;
        futhark_mc_task_74212.free_mem_73085 = mem_73085;
        futhark_mc_task_74212.free_mem_73086 = mem_73086;
        futhark_mc_task_74212.free_a12_73135 = a12_73135;
        futhark_mc_task_74212.free_b12_73136 = b12_73136;
        futhark_mc_task_74212.free_c12_73137 = c12_73137;
        futhark_mc_task_74212.free_b2_73138 = b2_73138;
        futhark_mc_task_74212.free_c2_73139 = c2_73139;
        futhark_mc_task_74212.retval_defunc_2_reduce_res_73140 =
            &defunc_2_reduce_res_73140;
        futhark_mc_task_74212.retval_defunc_2_reduce_res_73141 =
            &defunc_2_reduce_res_73141;
        
        struct scheduler_segop futhark_mc_task_74212_task;
        
        futhark_mc_task_74212_task.args = &futhark_mc_task_74212;
        futhark_mc_task_74212_task.top_level_fn = futhark_mc_segred_task_74213;
        futhark_mc_task_74212_task.name = "futhark_mc_segred_task_74213";
        futhark_mc_task_74212_task.iterations = q_62258;
        futhark_mc_task_74212_task.task_time =
            &ctx->futhark_mc_segred_task_74213_total_time;
        futhark_mc_task_74212_task.task_iter =
            &ctx->futhark_mc_segred_task_74213_total_iter;
        futhark_mc_task_74212_task.sched = STATIC;
        futhark_mc_task_74212_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_74213_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74212_task);
        
        if (futhark_mc_segred_task_74213_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_68308.mem)[gtid_66239] = defunc_2_reduce_res_73140;
        ((float *) mem_68311.mem)[gtid_66239] = defunc_2_reduce_res_73141;
    }
    
  cleanup:
    { }
    free(mem_73066);
    free(mem_73067);
    free(mem_73085);
    free(mem_73086);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74194_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74194_end -
                 futhark_mc_segmap_parloop_74194_start;
        
        ctx->futhark_mc_segmap_parloop_74194_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74194_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74194_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74192(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66238 = tid;
    int num_tasks_73395 = info.nsubtasks;
    struct futhark_mc_task_74184 *futhark_mc_task_74184 =
                                 (struct futhark_mc_task_74184 *) args;
    struct futhark_context *ctx = futhark_mc_task_74184->ctx;
    uint64_t futhark_mc_segmap_nested_task_74192_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74192_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74184->free_n_62256;
    int64_t q_62258 = futhark_mc_task_74184->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_74184->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74184->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74184->free_i_62270;
    bool x_62271 = futhark_mc_task_74184->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_74184->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_74184->free_loop_cond_62281;
    int64_t last_res_66442 = futhark_mc_task_74184->free_last_res_66442;
    int64_t min_arg_66454 = futhark_mc_task_74184->free_min_arg_66454;
    int64_t min_arg_66455 = futhark_mc_task_74184->free_min_arg_66455;
    int64_t min_res_66456 = futhark_mc_task_74184->free_min_res_66456;
    float max_res_66460 = futhark_mc_task_74184->free_max_res_66460;
    struct memblock mem_68221 = {.desc ="mem_68221", .mem =
                                 futhark_mc_task_74184->free_mem_68221, .size =
                                 0, .references =NULL};
    struct memblock mem_68224 = {.desc ="mem_68224", .mem =
                                 futhark_mc_task_74184->free_mem_68224, .size =
                                 0, .references =NULL};
    struct memblock mem_68227 = {.desc ="mem_68227", .mem =
                                 futhark_mc_task_74184->free_mem_68227, .size =
                                 0, .references =NULL};
    struct memblock mem_68230 = {.desc ="mem_68230", .mem =
                                 futhark_mc_task_74184->free_mem_68230, .size =
                                 0, .references =NULL};
    int64_t bytes_68231 = futhark_mc_task_74184->free_bytes_68231;
    struct memblock mem_68233 = {.desc ="mem_68233", .mem =
                                 futhark_mc_task_74184->free_mem_68233, .size =
                                 0, .references =NULL};
    struct memblock mem_68308 = {.desc ="mem_68308", .mem =
                                 futhark_mc_task_74184->free_mem_68308, .size =
                                 0, .references =NULL};
    struct memblock mem_68311 = {.desc ="mem_68311", .mem =
                                 futhark_mc_task_74184->free_mem_68311, .size =
                                 0, .references =NULL};
    int64_t iter_73537;
    struct futhark_mc_segmap_parloop_struct_74193
    futhark_mc_segmap_parloop_struct_74193;
    
    futhark_mc_segmap_parloop_struct_74193.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74193.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74193.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74193.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74193.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74193.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74193.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_74193.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_74193.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_74193.free_last_res_66442 = last_res_66442;
    futhark_mc_segmap_parloop_struct_74193.free_min_arg_66454 = min_arg_66454;
    futhark_mc_segmap_parloop_struct_74193.free_min_arg_66455 = min_arg_66455;
    futhark_mc_segmap_parloop_struct_74193.free_min_res_66456 = min_res_66456;
    futhark_mc_segmap_parloop_struct_74193.free_max_res_66460 = max_res_66460;
    futhark_mc_segmap_parloop_struct_74193.free_mem_68221 = mem_68221.mem;
    futhark_mc_segmap_parloop_struct_74193.free_mem_68224 = mem_68224.mem;
    futhark_mc_segmap_parloop_struct_74193.free_mem_68227 = mem_68227.mem;
    futhark_mc_segmap_parloop_struct_74193.free_mem_68230 = mem_68230.mem;
    futhark_mc_segmap_parloop_struct_74193.free_bytes_68231 = bytes_68231;
    futhark_mc_segmap_parloop_struct_74193.free_mem_68233 = mem_68233.mem;
    futhark_mc_segmap_parloop_struct_74193.free_mem_68308 = mem_68308.mem;
    futhark_mc_segmap_parloop_struct_74193.free_mem_68311 = mem_68311.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74194_task;
    
    futhark_mc_segmap_parloop_74194_task.name =
        "futhark_mc_segmap_parloop_74194";
    futhark_mc_segmap_parloop_74194_task.fn = futhark_mc_segmap_parloop_74194;
    futhark_mc_segmap_parloop_74194_task.args =
        &futhark_mc_segmap_parloop_struct_74193;
    futhark_mc_segmap_parloop_74194_task.iterations = iterations;
    futhark_mc_segmap_parloop_74194_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74194_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74194_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74194_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74194_task);
    
    if (futhark_mc_segmap_parloop_74194_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74194_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74194_total_end -
                 futhark_mc_segmap_parloop_74194_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74194_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74194_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74194_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74192_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74192_end -
                 futhark_mc_segmap_nested_task_74192_start;
        
        ctx->futhark_mc_segmap_nested_task_74192_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74192_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74192_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74156(void *args, int64_t start,
                                           int64_t end, int flat_tid_66226,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74155
    *futhark_mc_segmap_parloop_struct_74155 =
    (struct futhark_mc_segmap_parloop_struct_74155 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74155->ctx;
    uint64_t futhark_mc_segmap_parloop_74156_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74156_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_segmap_parloop_struct_74155->free_m_62255;
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74155->free_n_62256;
    int64_t q_62258 = futhark_mc_segmap_parloop_struct_74155->free_q_62258;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74155->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74155->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74155->free_i_62270;
    bool x_62271 = futhark_mc_segmap_parloop_struct_74155->free_x_62271;
    int64_t min_res_62276 =
            futhark_mc_segmap_parloop_struct_74155->free_min_res_62276;
    bool loop_cond_62281 =
         futhark_mc_segmap_parloop_struct_74155->free_loop_cond_62281;
    float i64_res_62282 =
          futhark_mc_segmap_parloop_struct_74155->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_segmap_parloop_struct_74155->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_68216 =
            futhark_mc_segmap_parloop_struct_74155->free_bytes_68216;
    int64_t bytes_68219 =
            futhark_mc_segmap_parloop_struct_74155->free_bytes_68219;
    int64_t bytes_68231 =
            futhark_mc_segmap_parloop_struct_74155->free_bytes_68231;
    int64_t bytes_68306 =
            futhark_mc_segmap_parloop_struct_74155->free_bytes_68306;
    struct memblock mem_68495 = {.desc ="mem_68495", .mem =
                                 futhark_mc_segmap_parloop_struct_74155->free_mem_68495,
                                 .size =0, .references =NULL};
    struct memblock mem_68499 = {.desc ="mem_68499", .mem =
                                 futhark_mc_segmap_parloop_struct_74155->free_mem_68499,
                                 .size =0, .references =NULL};
    size_t mem_68218_cached_sizze_74157 = 0;
    char *mem_68218 = NULL;
    size_t mem_68221_cached_sizze_74158 = 0;
    char *mem_68221 = NULL;
    size_t mem_68224_cached_sizze_74159 = 0;
    char *mem_68224 = NULL;
    size_t mem_68227_cached_sizze_74160 = 0;
    char *mem_68227 = NULL;
    size_t mem_68230_cached_sizze_74161 = 0;
    char *mem_68230 = NULL;
    size_t mem_68233_cached_sizze_74162 = 0;
    char *mem_68233 = NULL;
    size_t mem_68308_cached_sizze_74163 = 0;
    char *mem_68308 = NULL;
    size_t mem_68311_cached_sizze_74164 = 0;
    char *mem_68311 = NULL;
    int64_t iterations = end - start;
    int64_t iter_72960 = start;
    
    if (mem_68218_cached_sizze_74157 < (size_t) bytes_68216) {
        mem_68218 = realloc(mem_68218, bytes_68216);
        mem_68218_cached_sizze_74157 = bytes_68216;
    }
    if (mem_68221_cached_sizze_74158 < (size_t) bytes_68219) {
        mem_68221 = realloc(mem_68221, bytes_68219);
        mem_68221_cached_sizze_74158 = bytes_68219;
    }
    if (mem_68224_cached_sizze_74159 < (size_t) bytes_68216) {
        mem_68224 = realloc(mem_68224, bytes_68216);
        mem_68224_cached_sizze_74159 = bytes_68216;
    }
    if (mem_68227_cached_sizze_74160 < (size_t) bytes_68219) {
        mem_68227 = realloc(mem_68227, bytes_68219);
        mem_68227_cached_sizze_74160 = bytes_68219;
    }
    if (mem_68230_cached_sizze_74161 < (size_t) bytes_68216) {
        mem_68230 = realloc(mem_68230, bytes_68216);
        mem_68230_cached_sizze_74161 = bytes_68216;
    }
    if (mem_68233_cached_sizze_74162 < (size_t) bytes_68231) {
        mem_68233 = realloc(mem_68233, bytes_68231);
        mem_68233_cached_sizze_74162 = bytes_68231;
    }
    if (mem_68308_cached_sizze_74163 < (size_t) bytes_68306) {
        mem_68308 = realloc(mem_68308, bytes_68306);
        mem_68308_cached_sizze_74163 = bytes_68306;
    }
    if (mem_68311_cached_sizze_74164 < (size_t) bytes_68306) {
        mem_68311 = realloc(mem_68311, bytes_68306);
        mem_68311_cached_sizze_74164 = bytes_68306;
    }
    for (; iter_72960 < end; iter_72960++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73363 = m_62255;
        int64_t gtid_66227 = iter_72960;
        int64_t remnant_73364 = iter_72960 - gtid_66227;
        int64_t flat_tid_66228 = (int64_t) 0;
        int32_t num_tasks_73365;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_74165 futhark_mc_task_74165;
        
        futhark_mc_task_74165.ctx = ctx;
        futhark_mc_task_74165.free_n_62256 = n_62256;
        futhark_mc_task_74165.free_gtid_66227 = gtid_66227;
        futhark_mc_task_74165.free_Y_mem_67388 = Y_mem_67388.mem;
        futhark_mc_task_74165.free_mem_68218 = mem_68218;
        
        struct scheduler_segop futhark_mc_task_74165_task;
        
        futhark_mc_task_74165_task.args = &futhark_mc_task_74165;
        futhark_mc_task_74165_task.top_level_fn = futhark_mc_segscan_task_74166;
        futhark_mc_task_74165_task.name = "futhark_mc_segscan_task_74166";
        futhark_mc_task_74165_task.iterations = n_62256;
        futhark_mc_task_74165_task.task_time =
            &ctx->futhark_mc_segscan_task_74166_total_time;
        futhark_mc_task_74165_task.task_iter =
            &ctx->futhark_mc_segscan_task_74166_total_iter;
        futhark_mc_task_74165_task.sched = STATIC;
        futhark_mc_task_74165_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_74166_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74165_task);
        
        if (futhark_mc_segscan_task_74166_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_66442 = ((int64_t *) mem_68218)[i_62270];
        
        for (int64_t i_73379 = 0; i_73379 < n_62256; i_73379++) {
            ((float *) mem_68221)[i_73379] = 0.0F;
        }
        for (int64_t i_73380 = 0; i_73380 < n_62256; i_73380++) {
            ((int64_t *) mem_68224)[i_73380] = (int64_t) -1;
        }
        
        int64_t flat_tid_66230 = (int64_t) 0;
        int32_t num_tasks_73381;
        struct futhark_mc_task_74172 futhark_mc_task_74172;
        
        futhark_mc_task_74172.ctx = ctx;
        futhark_mc_task_74172.free_n_62256 = n_62256;
        futhark_mc_task_74172.free_gtid_66227 = gtid_66227;
        futhark_mc_task_74172.free_Y_mem_67388 = Y_mem_67388.mem;
        futhark_mc_task_74172.free_mem_68218 = mem_68218;
        futhark_mc_task_74172.free_mem_68221 = mem_68221;
        futhark_mc_task_74172.free_mem_68224 = mem_68224;
        
        struct scheduler_segop futhark_mc_task_74172_task;
        
        futhark_mc_task_74172_task.args = &futhark_mc_task_74172;
        futhark_mc_task_74172_task.top_level_fn = futhark_mc_segmap_task_74173;
        futhark_mc_task_74172_task.name = "futhark_mc_segmap_task_74173";
        futhark_mc_task_74172_task.iterations = n_62256;
        futhark_mc_task_74172_task.task_time =
            &ctx->futhark_mc_segmap_task_74173_total_time;
        futhark_mc_task_74172_task.task_iter =
            &ctx->futhark_mc_segmap_task_74173_total_iter;
        futhark_mc_task_74172_task.sched = STATIC;
        futhark_mc_task_74172_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74173_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74172_task);
        
        if (futhark_mc_segmap_task_74173_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_66454 = sub64(last_res_66442, (int64_t) 1);
        int64_t min_arg_66455 = sub64(last_res_66442, min_res_62276);
        int64_t min_res_66456 = smin64(q_62258, last_res_66442);
        float i64_res_66457 = sitofp_i64_f32(last_res_66442);
        float x_66458 = i64_res_62282 - i64_res_66457;
        float max_arg_66459 = x_66458 / 2.0F;
        float max_res_66460 = fmax32(0.0F, max_arg_66459);
        int64_t flat_tid_66232 = (int64_t) 0;
        int32_t num_tasks_73387;
        struct futhark_mc_task_74176 futhark_mc_task_74176;
        
        futhark_mc_task_74176.ctx = ctx;
        futhark_mc_task_74176.free_n_62256 = n_62256;
        futhark_mc_task_74176.free_mem_68224 = mem_68224;
        futhark_mc_task_74176.free_mem_68227 = mem_68227;
        futhark_mc_task_74176.free_mem_68230 = mem_68230;
        
        struct scheduler_segop futhark_mc_task_74176_task;
        
        futhark_mc_task_74176_task.args = &futhark_mc_task_74176;
        futhark_mc_task_74176_task.top_level_fn = futhark_mc_segmap_task_74177;
        futhark_mc_task_74176_task.name = "futhark_mc_segmap_task_74177";
        futhark_mc_task_74176_task.iterations = n_62256;
        futhark_mc_task_74176_task.task_time =
            &ctx->futhark_mc_segmap_task_74177_total_time;
        futhark_mc_task_74176_task.task_iter =
            &ctx->futhark_mc_segmap_task_74177_total_iter;
        futhark_mc_task_74176_task.sched = STATIC;
        futhark_mc_task_74176_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74177_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74176_task);
        
        if (futhark_mc_segmap_task_74177_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_66234 = (int64_t) 0;
        int32_t num_tasks_73391;
        struct futhark_mc_task_74180 futhark_mc_task_74180;
        
        futhark_mc_task_74180.ctx = ctx;
        futhark_mc_task_74180.free_q_62258 = q_62258;
        futhark_mc_task_74180.free_last_res_66442 = last_res_66442;
        futhark_mc_task_74180.free_mem_68233 = mem_68233;
        
        struct scheduler_segop futhark_mc_task_74180_task;
        
        futhark_mc_task_74180_task.args = &futhark_mc_task_74180;
        futhark_mc_task_74180_task.top_level_fn = futhark_mc_segmap_task_74181;
        futhark_mc_task_74180_task.name = "futhark_mc_segmap_task_74181";
        futhark_mc_task_74180_task.iterations = q_62258;
        futhark_mc_task_74180_task.task_time =
            &ctx->futhark_mc_segmap_task_74181_total_time;
        futhark_mc_task_74180_task.task_iter =
            &ctx->futhark_mc_segmap_task_74181_total_iter;
        futhark_mc_task_74180_task.sched = STATIC;
        futhark_mc_task_74180_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74181_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74180_task);
        
        if (futhark_mc_segmap_task_74181_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_66236 = (int64_t) 0;
        int32_t num_tasks_73395;
        int64_t flat_tid_66238 = (int64_t) 0;
        struct futhark_mc_task_74184 futhark_mc_task_74184;
        
        futhark_mc_task_74184.ctx = ctx;
        futhark_mc_task_74184.free_n_62256 = n_62256;
        futhark_mc_task_74184.free_q_62258 = q_62258;
        futhark_mc_task_74184.free_jump_62260 = jump_62260;
        futhark_mc_task_74184.free_n_m_62264 = n_m_62264;
        futhark_mc_task_74184.free_i_62270 = i_62270;
        futhark_mc_task_74184.free_x_62271 = x_62271;
        futhark_mc_task_74184.free_min_res_62276 = min_res_62276;
        futhark_mc_task_74184.free_loop_cond_62281 = loop_cond_62281;
        futhark_mc_task_74184.free_last_res_66442 = last_res_66442;
        futhark_mc_task_74184.free_min_arg_66454 = min_arg_66454;
        futhark_mc_task_74184.free_min_arg_66455 = min_arg_66455;
        futhark_mc_task_74184.free_min_res_66456 = min_res_66456;
        futhark_mc_task_74184.free_max_res_66460 = max_res_66460;
        futhark_mc_task_74184.free_mem_68221 = mem_68221;
        futhark_mc_task_74184.free_mem_68224 = mem_68224;
        futhark_mc_task_74184.free_mem_68227 = mem_68227;
        futhark_mc_task_74184.free_mem_68230 = mem_68230;
        futhark_mc_task_74184.free_bytes_68231 = bytes_68231;
        futhark_mc_task_74184.free_mem_68233 = mem_68233;
        futhark_mc_task_74184.free_mem_68308 = mem_68308;
        futhark_mc_task_74184.free_mem_68311 = mem_68311;
        
        struct scheduler_segop futhark_mc_task_74184_task;
        
        futhark_mc_task_74184_task.args = &futhark_mc_task_74184;
        futhark_mc_task_74184_task.top_level_fn = futhark_mc_segmap_task_74185;
        futhark_mc_task_74184_task.name = "futhark_mc_segmap_task_74185";
        futhark_mc_task_74184_task.iterations = n_m_62264;
        futhark_mc_task_74184_task.task_time =
            &ctx->futhark_mc_segmap_task_74185_total_time;
        futhark_mc_task_74184_task.task_iter =
            &ctx->futhark_mc_segmap_task_74185_total_iter;
        futhark_mc_task_74184_task.sched = DYNAMIC;
        futhark_mc_task_74184_task.nested_fn =
            futhark_mc_segmap_nested_task_74192;
        
        int futhark_mc_segmap_task_74185_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74184_task);
        
        if (futhark_mc_segmap_task_74185_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_68495.mem + gtid_66227 * n_m_62264 * (int64_t) 4,
                mem_68308 + (int64_t) 0, n_m_62264 * (int64_t) 4);
        memmove(mem_68499.mem + gtid_66227 * n_m_62264 * (int64_t) 4,
                mem_68311 + (int64_t) 0, n_m_62264 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_68218);
    free(mem_68221);
    free(mem_68224);
    free(mem_68227);
    free(mem_68230);
    free(mem_68233);
    free(mem_68308);
    free(mem_68311);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74156_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74156_end -
                 futhark_mc_segmap_parloop_74156_start;
        
        ctx->futhark_mc_segmap_parloop_74156_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74156_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74156_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74154(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66226 = tid;
    int num_tasks_72696 = info.nsubtasks;
    struct futhark_mc_task_74138 *futhark_mc_task_74138 =
                                 (struct futhark_mc_task_74138 *) args;
    struct futhark_context *ctx = futhark_mc_task_74138->ctx;
    uint64_t futhark_mc_segmap_nested_task_74154_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74154_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_task_74138->free_m_62255;
    int64_t n_62256 = futhark_mc_task_74138->free_n_62256;
    int64_t q_62258 = futhark_mc_task_74138->free_q_62258;
    int64_t jump_62260 = futhark_mc_task_74138->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74138->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74138->free_i_62270;
    bool x_62271 = futhark_mc_task_74138->free_x_62271;
    int64_t min_res_62276 = futhark_mc_task_74138->free_min_res_62276;
    bool loop_cond_62281 = futhark_mc_task_74138->free_loop_cond_62281;
    float i64_res_62282 = futhark_mc_task_74138->free_i64_res_62282;
    struct memblock Y_mem_67388 = {.desc ="Y_mem_67388", .mem =
                                   futhark_mc_task_74138->free_Y_mem_67388,
                                   .size =0, .references =NULL};
    int64_t bytes_68216 = futhark_mc_task_74138->free_bytes_68216;
    int64_t bytes_68219 = futhark_mc_task_74138->free_bytes_68219;
    int64_t bytes_68231 = futhark_mc_task_74138->free_bytes_68231;
    int64_t bytes_68306 = futhark_mc_task_74138->free_bytes_68306;
    struct memblock mem_68495 = {.desc ="mem_68495", .mem =
                                 futhark_mc_task_74138->free_mem_68495, .size =
                                 0, .references =NULL};
    struct memblock mem_68499 = {.desc ="mem_68499", .mem =
                                 futhark_mc_task_74138->free_mem_68499, .size =
                                 0, .references =NULL};
    int64_t iter_72960;
    struct futhark_mc_segmap_parloop_struct_74155
    futhark_mc_segmap_parloop_struct_74155;
    
    futhark_mc_segmap_parloop_struct_74155.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74155.free_m_62255 = m_62255;
    futhark_mc_segmap_parloop_struct_74155.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74155.free_q_62258 = q_62258;
    futhark_mc_segmap_parloop_struct_74155.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74155.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74155.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74155.free_x_62271 = x_62271;
    futhark_mc_segmap_parloop_struct_74155.free_min_res_62276 = min_res_62276;
    futhark_mc_segmap_parloop_struct_74155.free_loop_cond_62281 =
        loop_cond_62281;
    futhark_mc_segmap_parloop_struct_74155.free_i64_res_62282 = i64_res_62282;
    futhark_mc_segmap_parloop_struct_74155.free_Y_mem_67388 = Y_mem_67388.mem;
    futhark_mc_segmap_parloop_struct_74155.free_bytes_68216 = bytes_68216;
    futhark_mc_segmap_parloop_struct_74155.free_bytes_68219 = bytes_68219;
    futhark_mc_segmap_parloop_struct_74155.free_bytes_68231 = bytes_68231;
    futhark_mc_segmap_parloop_struct_74155.free_bytes_68306 = bytes_68306;
    futhark_mc_segmap_parloop_struct_74155.free_mem_68495 = mem_68495.mem;
    futhark_mc_segmap_parloop_struct_74155.free_mem_68499 = mem_68499.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74156_task;
    
    futhark_mc_segmap_parloop_74156_task.name =
        "futhark_mc_segmap_parloop_74156";
    futhark_mc_segmap_parloop_74156_task.fn = futhark_mc_segmap_parloop_74156;
    futhark_mc_segmap_parloop_74156_task.args =
        &futhark_mc_segmap_parloop_struct_74155;
    futhark_mc_segmap_parloop_74156_task.iterations = iterations;
    futhark_mc_segmap_parloop_74156_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74156_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74156_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74156_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74156_task);
    
    if (futhark_mc_segmap_parloop_74156_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74156_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74156_total_end -
                 futhark_mc_segmap_parloop_74156_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74156_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74156_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74156_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74154_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74154_end -
                 futhark_mc_segmap_nested_task_74154_start;
        
        ctx->futhark_mc_segmap_nested_task_74154_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74154_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74154_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_74218 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    int64_t free_y_63587;
    char *free_ext_mem_68504;
    char *free_ext_mem_68505;
    int64_t free_bytes_68506;
    char *free_mem_68527;
};
struct futhark_mc_segmap_parloop_struct_74220 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    int64_t free_y_63587;
    char *free_ext_mem_68504;
    char *free_ext_mem_68505;
    int64_t free_bytes_68506;
    char *free_mem_68527;
};
static int futhark_mc_segmap_parloop_74221(void *args, int64_t start,
                                           int64_t end, int flat_tid_66846,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74220
    *futhark_mc_segmap_parloop_struct_74220 =
    (struct futhark_mc_segmap_parloop_struct_74220 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74220->ctx;
    uint64_t futhark_mc_segmap_parloop_74221_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74221_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_segmap_parloop_struct_74220->free_m_62255;
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74220->free_n_62256;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74220->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74220->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74220->free_i_62270;
    int64_t y_63587 = futhark_mc_segmap_parloop_struct_74220->free_y_63587;
    struct memblock ext_mem_68504 = {.desc ="ext_mem_68504", .mem =
                                     futhark_mc_segmap_parloop_struct_74220->free_ext_mem_68504,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_68505 = {.desc ="ext_mem_68505", .mem =
                                     futhark_mc_segmap_parloop_struct_74220->free_ext_mem_68505,
                                     .size =0, .references =NULL};
    int64_t bytes_68506 =
            futhark_mc_segmap_parloop_struct_74220->free_bytes_68506;
    struct memblock mem_68527 = {.desc ="mem_68527", .mem =
                                 futhark_mc_segmap_parloop_struct_74220->free_mem_68527,
                                 .size =0, .references =NULL};
    size_t mem_68511_cached_sizze_74222 = 0;
    char *mem_68511 = NULL;
    int64_t iterations = end - start;
    int64_t iter_73719 = start;
    
    if (mem_68511_cached_sizze_74222 < (size_t) bytes_68506) {
        mem_68511 = realloc(mem_68511, bytes_68506);
        mem_68511_cached_sizze_74222 = bytes_68506;
    }
    for (; iter_73719 < end; iter_73719++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73769 = m_62255;
        int64_t gtid_66847 = iter_73719;
        int64_t remnant_73770 = iter_73719 - gtid_66847;
        
        for (int64_t i_73720 = 0; i_73720 < n_62256; i_73720++) {
            int64_t m_v_73722 = sdiv64(i_73720, jump_62260);
            bool cond_73723 = m_v_73722 == y_63587;
            int64_t j_73724;
            
            if (cond_73723) {
                int64_t j_t_res_73725 = sub64(m_v_73722, (int64_t) 1);
                
                j_73724 = j_t_res_73725;
            } else {
                j_73724 = m_v_73722;
            }
            
            int64_t min_arg_73726 = mul64(jump_62260, j_73724);
            int64_t min_res_73727 = smin64(i_62270, min_arg_73726);
            int64_t defunc_0_m_fun_arg_73728 = add64((int64_t) 1, j_73724);
            int64_t min_arg_73729 = mul64(jump_62260, defunc_0_m_fun_arg_73728);
            int64_t min_res_73730 = smin64(i_62270, min_arg_73729);
            int64_t i64_arg_73731 = sub64(min_res_73730, min_res_73727);
            float i64_res_73732 = sitofp_i64_f32(i64_arg_73731);
            int64_t i64_arg_73733 = sub64(i_73720, min_res_73727);
            float i64_res_73734 = sitofp_i64_f32(i64_arg_73733);
            float u_73735 = i64_res_73734 / i64_res_73732;
            float u2_73736 = u_73735 * u_73735;
            float u3_73737 = u_73735 * u2_73736;
            float x_73738 = 2.0F * u3_73737;
            float y_73739 = 3.0F * u2_73736;
            float x_73740 = x_73738 - y_73739;
            float x_73741 = 1.0F + x_73740;
            bool x_73742 = sle64((int64_t) 0, j_73724);
            bool y_73743 = slt64(j_73724, n_m_62264);
            bool bounds_check_73744 = x_73742 && y_73743;
            bool index_certs_73745;
            
            if (!bounds_check_73744) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_73724,
                              "] out of bounds for array of shape [",
                              (long long) n_m_62264, "].",
                              "-> #0  loess.fut:431:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  loess.fut:476:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:475:5-477:29\n   #8  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            float y_73746 = ((float *) ext_mem_68505.mem)[gtid_66847 *
                                                          n_m_62264 + j_73724];
            float x_73747 = x_73741 * y_73746;
            float x_73748 = y_73739 - x_73738;
            bool x_73749 = sle64((int64_t) 0, defunc_0_m_fun_arg_73728);
            bool y_73750 = slt64(defunc_0_m_fun_arg_73728, n_m_62264);
            bool bounds_check_73751 = x_73749 && y_73750;
            bool index_certs_73752;
            
            if (!bounds_check_73751) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_73728,
                              "] out of bounds for array of shape [",
                              (long long) n_m_62264, "].",
                              "-> #0  loess.fut:432:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  loess.fut:476:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:475:5-477:29\n   #8  loess.fut:439:1-479:26\n");
                return 1;
            }
            
            float y_73753 = ((float *) ext_mem_68505.mem)[gtid_66847 *
                                                          n_m_62264 +
                                                          defunc_0_m_fun_arg_73728];
            float y_73754 = x_73748 * y_73753;
            float x_73755 = x_73747 + y_73754;
            float y_73756 = 2.0F * u2_73736;
            float x_73757 = u3_73737 - y_73756;
            float x_73758 = u_73735 + x_73757;
            float y_73759 = ((float *) ext_mem_68504.mem)[gtid_66847 *
                                                          n_m_62264 + j_73724];
            float x_73760 = x_73758 * y_73759;
            float y_73761 = i64_res_73732 * x_73760;
            float x_73762 = x_73755 + y_73761;
            float x_73763 = u3_73737 - u2_73736;
            float y_73764 = ((float *) ext_mem_68504.mem)[gtid_66847 *
                                                          n_m_62264 +
                                                          defunc_0_m_fun_arg_73728];
            float x_73765 = x_73763 * y_73764;
            float y_73766 = i64_res_73732 * x_73765;
            float defunc_0_f_res_73767 = x_73762 + y_73766;
            
            ((float *) mem_68511)[i_73720] = defunc_0_f_res_73767;
        }
        memmove(mem_68527.mem + gtid_66847 * n_62256 * (int64_t) 4, mem_68511 +
                (int64_t) 0, n_62256 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_68511);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74221_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74221_end -
                 futhark_mc_segmap_parloop_74221_start;
        
        ctx->futhark_mc_segmap_parloop_74221_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74221_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74221_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74219(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66846 = tid;
    int num_tasks_73718 = info.nsubtasks;
    struct futhark_mc_task_74218 *futhark_mc_task_74218 =
                                 (struct futhark_mc_task_74218 *) args;
    struct futhark_context *ctx = futhark_mc_task_74218->ctx;
    uint64_t futhark_mc_segmap_task_74219_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74219_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_task_74218->free_m_62255;
    int64_t n_62256 = futhark_mc_task_74218->free_n_62256;
    int64_t jump_62260 = futhark_mc_task_74218->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74218->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74218->free_i_62270;
    int64_t y_63587 = futhark_mc_task_74218->free_y_63587;
    struct memblock ext_mem_68504 = {.desc ="ext_mem_68504", .mem =
                                     futhark_mc_task_74218->free_ext_mem_68504,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_68505 = {.desc ="ext_mem_68505", .mem =
                                     futhark_mc_task_74218->free_ext_mem_68505,
                                     .size =0, .references =NULL};
    int64_t bytes_68506 = futhark_mc_task_74218->free_bytes_68506;
    struct memblock mem_68527 = {.desc ="mem_68527", .mem =
                                 futhark_mc_task_74218->free_mem_68527, .size =
                                 0, .references =NULL};
    int64_t iter_73719;
    struct futhark_mc_segmap_parloop_struct_74220
    futhark_mc_segmap_parloop_struct_74220;
    
    futhark_mc_segmap_parloop_struct_74220.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74220.free_m_62255 = m_62255;
    futhark_mc_segmap_parloop_struct_74220.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74220.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74220.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74220.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74220.free_y_63587 = y_63587;
    futhark_mc_segmap_parloop_struct_74220.free_ext_mem_68504 =
        ext_mem_68504.mem;
    futhark_mc_segmap_parloop_struct_74220.free_ext_mem_68505 =
        ext_mem_68505.mem;
    futhark_mc_segmap_parloop_struct_74220.free_bytes_68506 = bytes_68506;
    futhark_mc_segmap_parloop_struct_74220.free_mem_68527 = mem_68527.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74221_task;
    
    futhark_mc_segmap_parloop_74221_task.name =
        "futhark_mc_segmap_parloop_74221";
    futhark_mc_segmap_parloop_74221_task.fn = futhark_mc_segmap_parloop_74221;
    futhark_mc_segmap_parloop_74221_task.args =
        &futhark_mc_segmap_parloop_struct_74220;
    futhark_mc_segmap_parloop_74221_task.iterations = iterations;
    futhark_mc_segmap_parloop_74221_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74221_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74221_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74221_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74221_task);
    
    if (futhark_mc_segmap_parloop_74221_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74221_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74221_total_end -
                 futhark_mc_segmap_parloop_74221_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74221_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74221_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74221_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74219_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74219_end -
                 futhark_mc_segmap_task_74219_start;
        
        ctx->futhark_mc_segmap_task_74219_runs[tid]++;
        ctx->futhark_mc_segmap_task_74219_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74219_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_74224 {
    struct futhark_context *ctx;
    int64_t free_m_62255;
    int64_t free_n_62256;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    int64_t free_y_63587;
    char *free_ext_mem_68504;
    char *free_ext_mem_68505;
    int64_t free_bytes_68506;
    char *free_mem_68527;
};
struct futhark_mc_task_74227 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    int64_t free_y_63587;
    int64_t free_gtid_66849;
    char *free_ext_mem_68504;
    char *free_ext_mem_68505;
    char *free_mem_68508;
};
struct futhark_mc_segmap_parloop_struct_74229 {
    struct futhark_context *ctx;
    int64_t free_n_62256;
    int64_t free_jump_62260;
    int64_t free_n_m_62264;
    int64_t free_i_62270;
    int64_t free_y_63587;
    int64_t free_gtid_66849;
    char *free_ext_mem_68504;
    char *free_ext_mem_68505;
    char *free_mem_68508;
};
static int futhark_mc_segmap_parloop_74230(void *args, int64_t start,
                                           int64_t end, int flat_tid_66850,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74229
    *futhark_mc_segmap_parloop_struct_74229 =
    (struct futhark_mc_segmap_parloop_struct_74229 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74229->ctx;
    uint64_t futhark_mc_segmap_parloop_74230_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74230_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74229->free_n_62256;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74229->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74229->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74229->free_i_62270;
    int64_t y_63587 = futhark_mc_segmap_parloop_struct_74229->free_y_63587;
    int64_t gtid_66849 =
            futhark_mc_segmap_parloop_struct_74229->free_gtid_66849;
    struct memblock ext_mem_68504 = {.desc ="ext_mem_68504", .mem =
                                     futhark_mc_segmap_parloop_struct_74229->free_ext_mem_68504,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_68505 = {.desc ="ext_mem_68505", .mem =
                                     futhark_mc_segmap_parloop_struct_74229->free_ext_mem_68505,
                                     .size =0, .references =NULL};
    struct memblock mem_68508 = {.desc ="mem_68508", .mem =
                                 futhark_mc_segmap_parloop_struct_74229->free_mem_68508,
                                 .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_73822 = start;
    
    for (; iter_73822 < end; iter_73822++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73824 = n_62256;
        int64_t gtid_66851 = iter_73822;
        int64_t remnant_73825 = iter_73822 - gtid_66851;
        int64_t m_v_73773 = sdiv64(gtid_66851, jump_62260);
        bool cond_73774 = m_v_73773 == y_63587;
        int64_t j_73775;
        
        if (cond_73774) {
            int64_t j_t_res_73823 = sub64(m_v_73773, (int64_t) 1);
            
            j_73775 = j_t_res_73823;
        } else {
            j_73775 = m_v_73773;
        }
        
        int64_t min_arg_73777 = mul64(jump_62260, j_73775);
        int64_t min_res_73778 = smin64(i_62270, min_arg_73777);
        int64_t defunc_0_m_fun_arg_73779 = add64((int64_t) 1, j_73775);
        int64_t min_arg_73780 = mul64(jump_62260, defunc_0_m_fun_arg_73779);
        int64_t min_res_73781 = smin64(i_62270, min_arg_73780);
        int64_t i64_arg_73782 = sub64(min_res_73781, min_res_73778);
        float i64_res_73783 = sitofp_i64_f32(i64_arg_73782);
        int64_t i64_arg_73784 = sub64(gtid_66851, min_res_73778);
        float i64_res_73785 = sitofp_i64_f32(i64_arg_73784);
        float u_73786 = i64_res_73785 / i64_res_73783;
        float u2_73787 = u_73786 * u_73786;
        float u3_73788 = u_73786 * u2_73787;
        float x_73789 = 2.0F * u3_73788;
        float y_73790 = 3.0F * u2_73787;
        float x_73791 = x_73789 - y_73790;
        float x_73792 = 1.0F + x_73791;
        bool x_73793 = sle64((int64_t) 0, j_73775);
        bool y_73794 = slt64(j_73775, n_m_62264);
        bool bounds_check_73795 = x_73793 && y_73794;
        bool index_certs_73796;
        
        if (!bounds_check_73795) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_73775,
                                   "] out of bounds for array of shape [",
                                   (long long) n_m_62264, "].",
                                   "-> #0  loess.fut:431:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  loess.fut:476:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:475:5-477:29\n   #8  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        float y_73797 = ((float *) ext_mem_68505.mem)[gtid_66849 * n_m_62264 +
                                                      j_73775];
        float x_73798 = x_73792 * y_73797;
        float x_73799 = y_73790 - x_73789;
        bool x_73800 = sle64((int64_t) 0, defunc_0_m_fun_arg_73779);
        bool y_73801 = slt64(defunc_0_m_fun_arg_73779, n_m_62264);
        bool bounds_check_73802 = x_73800 && y_73801;
        bool index_certs_73803;
        
        if (!bounds_check_73802) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_73779,
                                   "] out of bounds for array of shape [",
                                   (long long) n_m_62264, "].",
                                   "-> #0  loess.fut:432:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  loess.fut:476:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:475:5-477:29\n   #8  loess.fut:439:1-479:26\n");
            return 1;
        }
        
        float y_73804 = ((float *) ext_mem_68505.mem)[gtid_66849 * n_m_62264 +
                                                      defunc_0_m_fun_arg_73779];
        float y_73805 = x_73799 * y_73804;
        float x_73806 = x_73798 + y_73805;
        float y_73807 = 2.0F * u2_73787;
        float x_73808 = u3_73788 - y_73807;
        float x_73809 = u_73786 + x_73808;
        float y_73810 = ((float *) ext_mem_68504.mem)[gtid_66849 * n_m_62264 +
                                                      j_73775];
        float x_73811 = x_73809 * y_73810;
        float y_73812 = i64_res_73783 * x_73811;
        float x_73813 = x_73806 + y_73812;
        float x_73814 = u3_73788 - u2_73787;
        float y_73815 = ((float *) ext_mem_68504.mem)[gtid_66849 * n_m_62264 +
                                                      defunc_0_m_fun_arg_73779];
        float x_73816 = x_73814 * y_73815;
        float y_73817 = i64_res_73783 * x_73816;
        float defunc_0_f_res_73818 = x_73813 + y_73817;
        
        ((float *) mem_68508.mem)[gtid_66851] = defunc_0_f_res_73818;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74230_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74230_end -
                 futhark_mc_segmap_parloop_74230_start;
        
        ctx->futhark_mc_segmap_parloop_74230_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74230_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74230_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_74228(void *args, int64_t iterations, int tid,
                                 struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66850 = tid;
    int num_tasks_73821 = info.nsubtasks;
    struct futhark_mc_task_74227 *futhark_mc_task_74227 =
                                 (struct futhark_mc_task_74227 *) args;
    struct futhark_context *ctx = futhark_mc_task_74227->ctx;
    uint64_t futhark_mc_segmap_task_74228_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_74228_start = get_wall_time();
    
    int64_t n_62256 = futhark_mc_task_74227->free_n_62256;
    int64_t jump_62260 = futhark_mc_task_74227->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74227->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74227->free_i_62270;
    int64_t y_63587 = futhark_mc_task_74227->free_y_63587;
    int64_t gtid_66849 = futhark_mc_task_74227->free_gtid_66849;
    struct memblock ext_mem_68504 = {.desc ="ext_mem_68504", .mem =
                                     futhark_mc_task_74227->free_ext_mem_68504,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_68505 = {.desc ="ext_mem_68505", .mem =
                                     futhark_mc_task_74227->free_ext_mem_68505,
                                     .size =0, .references =NULL};
    struct memblock mem_68508 = {.desc ="mem_68508", .mem =
                                 futhark_mc_task_74227->free_mem_68508, .size =
                                 0, .references =NULL};
    int64_t iter_73822;
    struct futhark_mc_segmap_parloop_struct_74229
    futhark_mc_segmap_parloop_struct_74229;
    
    futhark_mc_segmap_parloop_struct_74229.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74229.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74229.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74229.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74229.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74229.free_y_63587 = y_63587;
    futhark_mc_segmap_parloop_struct_74229.free_gtid_66849 = gtid_66849;
    futhark_mc_segmap_parloop_struct_74229.free_ext_mem_68504 =
        ext_mem_68504.mem;
    futhark_mc_segmap_parloop_struct_74229.free_ext_mem_68505 =
        ext_mem_68505.mem;
    futhark_mc_segmap_parloop_struct_74229.free_mem_68508 = mem_68508.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74230_task;
    
    futhark_mc_segmap_parloop_74230_task.name =
        "futhark_mc_segmap_parloop_74230";
    futhark_mc_segmap_parloop_74230_task.fn = futhark_mc_segmap_parloop_74230;
    futhark_mc_segmap_parloop_74230_task.args =
        &futhark_mc_segmap_parloop_struct_74229;
    futhark_mc_segmap_parloop_74230_task.iterations = iterations;
    futhark_mc_segmap_parloop_74230_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74230_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74230_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74230_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74230_task);
    
    if (futhark_mc_segmap_parloop_74230_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74230_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74230_total_end -
                 futhark_mc_segmap_parloop_74230_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74230_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74230_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74230_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_74228_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_74228_end -
                 futhark_mc_segmap_task_74228_start;
        
        ctx->futhark_mc_segmap_task_74228_runs[tid]++;
        ctx->futhark_mc_segmap_task_74228_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_74228_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_74225(void *args, int64_t start,
                                           int64_t end, int flat_tid_66848,
                                           int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_74224
    *futhark_mc_segmap_parloop_struct_74224 =
    (struct futhark_mc_segmap_parloop_struct_74224 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_74224->ctx;
    uint64_t futhark_mc_segmap_parloop_74225_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74225_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_segmap_parloop_struct_74224->free_m_62255;
    int64_t n_62256 = futhark_mc_segmap_parloop_struct_74224->free_n_62256;
    int64_t jump_62260 =
            futhark_mc_segmap_parloop_struct_74224->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_segmap_parloop_struct_74224->free_n_m_62264;
    int64_t i_62270 = futhark_mc_segmap_parloop_struct_74224->free_i_62270;
    int64_t y_63587 = futhark_mc_segmap_parloop_struct_74224->free_y_63587;
    struct memblock ext_mem_68504 = {.desc ="ext_mem_68504", .mem =
                                     futhark_mc_segmap_parloop_struct_74224->free_ext_mem_68504,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_68505 = {.desc ="ext_mem_68505", .mem =
                                     futhark_mc_segmap_parloop_struct_74224->free_ext_mem_68505,
                                     .size =0, .references =NULL};
    int64_t bytes_68506 =
            futhark_mc_segmap_parloop_struct_74224->free_bytes_68506;
    struct memblock mem_68527 = {.desc ="mem_68527", .mem =
                                 futhark_mc_segmap_parloop_struct_74224->free_mem_68527,
                                 .size =0, .references =NULL};
    size_t mem_68508_cached_sizze_74226 = 0;
    char *mem_68508 = NULL;
    int64_t iterations = end - start;
    int64_t iter_73772 = start;
    
    if (mem_68508_cached_sizze_74226 < (size_t) bytes_68506) {
        mem_68508 = realloc(mem_68508, bytes_68506);
        mem_68508_cached_sizze_74226 = bytes_68506;
    }
    for (; iter_73772 < end; iter_73772++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_73819 = m_62255;
        int64_t gtid_66849 = iter_73772;
        int64_t remnant_73820 = iter_73772 - gtid_66849;
        int64_t flat_tid_66850 = (int64_t) 0;
        int32_t num_tasks_73821;
        struct futhark_mc_task_74227 futhark_mc_task_74227;
        
        futhark_mc_task_74227.ctx = ctx;
        futhark_mc_task_74227.free_n_62256 = n_62256;
        futhark_mc_task_74227.free_jump_62260 = jump_62260;
        futhark_mc_task_74227.free_n_m_62264 = n_m_62264;
        futhark_mc_task_74227.free_i_62270 = i_62270;
        futhark_mc_task_74227.free_y_63587 = y_63587;
        futhark_mc_task_74227.free_gtid_66849 = gtid_66849;
        futhark_mc_task_74227.free_ext_mem_68504 = ext_mem_68504.mem;
        futhark_mc_task_74227.free_ext_mem_68505 = ext_mem_68505.mem;
        futhark_mc_task_74227.free_mem_68508 = mem_68508;
        
        struct scheduler_segop futhark_mc_task_74227_task;
        
        futhark_mc_task_74227_task.args = &futhark_mc_task_74227;
        futhark_mc_task_74227_task.top_level_fn = futhark_mc_segmap_task_74228;
        futhark_mc_task_74227_task.name = "futhark_mc_segmap_task_74228";
        futhark_mc_task_74227_task.iterations = n_62256;
        futhark_mc_task_74227_task.task_time =
            &ctx->futhark_mc_segmap_task_74228_total_time;
        futhark_mc_task_74227_task.task_iter =
            &ctx->futhark_mc_segmap_task_74228_total_iter;
        futhark_mc_task_74227_task.sched = STATIC;
        futhark_mc_task_74227_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_74228_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74227_task);
        
        if (futhark_mc_segmap_task_74228_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_68527.mem + gtid_66849 * n_62256 * (int64_t) 4, mem_68508 +
                (int64_t) 0, n_62256 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_68508);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74225_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74225_end -
                 futhark_mc_segmap_parloop_74225_start;
        
        ctx->futhark_mc_segmap_parloop_74225_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_74225_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_74225_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_74223(void *args, int64_t iterations, int tid,
                                        struct scheduler_info info)
{
    int err = 0;
    int flat_tid_66848 = tid;
    int num_tasks_73718 = info.nsubtasks;
    struct futhark_mc_task_74218 *futhark_mc_task_74218 =
                                 (struct futhark_mc_task_74218 *) args;
    struct futhark_context *ctx = futhark_mc_task_74218->ctx;
    uint64_t futhark_mc_segmap_nested_task_74223_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_74223_start = get_wall_time();
    
    int64_t m_62255 = futhark_mc_task_74218->free_m_62255;
    int64_t n_62256 = futhark_mc_task_74218->free_n_62256;
    int64_t jump_62260 = futhark_mc_task_74218->free_jump_62260;
    int64_t n_m_62264 = futhark_mc_task_74218->free_n_m_62264;
    int64_t i_62270 = futhark_mc_task_74218->free_i_62270;
    int64_t y_63587 = futhark_mc_task_74218->free_y_63587;
    struct memblock ext_mem_68504 = {.desc ="ext_mem_68504", .mem =
                                     futhark_mc_task_74218->free_ext_mem_68504,
                                     .size =0, .references =NULL};
    struct memblock ext_mem_68505 = {.desc ="ext_mem_68505", .mem =
                                     futhark_mc_task_74218->free_ext_mem_68505,
                                     .size =0, .references =NULL};
    int64_t bytes_68506 = futhark_mc_task_74218->free_bytes_68506;
    struct memblock mem_68527 = {.desc ="mem_68527", .mem =
                                 futhark_mc_task_74218->free_mem_68527, .size =
                                 0, .references =NULL};
    int64_t iter_73772;
    struct futhark_mc_segmap_parloop_struct_74224
    futhark_mc_segmap_parloop_struct_74224;
    
    futhark_mc_segmap_parloop_struct_74224.ctx = ctx;
    futhark_mc_segmap_parloop_struct_74224.free_m_62255 = m_62255;
    futhark_mc_segmap_parloop_struct_74224.free_n_62256 = n_62256;
    futhark_mc_segmap_parloop_struct_74224.free_jump_62260 = jump_62260;
    futhark_mc_segmap_parloop_struct_74224.free_n_m_62264 = n_m_62264;
    futhark_mc_segmap_parloop_struct_74224.free_i_62270 = i_62270;
    futhark_mc_segmap_parloop_struct_74224.free_y_63587 = y_63587;
    futhark_mc_segmap_parloop_struct_74224.free_ext_mem_68504 =
        ext_mem_68504.mem;
    futhark_mc_segmap_parloop_struct_74224.free_ext_mem_68505 =
        ext_mem_68505.mem;
    futhark_mc_segmap_parloop_struct_74224.free_bytes_68506 = bytes_68506;
    futhark_mc_segmap_parloop_struct_74224.free_mem_68527 = mem_68527.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_74225_task;
    
    futhark_mc_segmap_parloop_74225_task.name =
        "futhark_mc_segmap_parloop_74225";
    futhark_mc_segmap_parloop_74225_task.fn = futhark_mc_segmap_parloop_74225;
    futhark_mc_segmap_parloop_74225_task.args =
        &futhark_mc_segmap_parloop_struct_74224;
    futhark_mc_segmap_parloop_74225_task.iterations = iterations;
    futhark_mc_segmap_parloop_74225_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_74225_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_74225_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_74225_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_74225_task);
    
    if (futhark_mc_segmap_parloop_74225_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_74225_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_74225_total_end -
                 futhark_mc_segmap_parloop_74225_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74225_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74225_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_74225_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_74223_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_74223_end -
                 futhark_mc_segmap_nested_task_74223_start;
        
        ctx->futhark_mc_segmap_nested_task_74223_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_74223_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_74223_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                  arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_73826,
                             struct memblock Y_mem_67388, int64_t m_62255,
                             int64_t n_62256, int64_t q_62258,
                             int64_t degree_62259, int64_t jump_62260,
                             int64_t jump_threshold_62261,
                             int64_t q_threshold_62262)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_out_68545;
    
    mem_out_68545.references = NULL;
    
    bool cond_62263 = jump_62260 == (int64_t) 1;
    int64_t n_m_62264;
    
    if (cond_62263) {
        n_m_62264 = n_62256;
    } else {
        bool zzero_62265 = jump_62260 == (int64_t) 0;
        bool nonzzero_62266 = !zzero_62265;
        bool nonzzero_cert_62267;
        
        if (!nonzzero_62266) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:446:38-45\n   #1  loess.fut:439:1-479:26\n");
            if (memblock_unref(ctx, &mem_out_68545, "mem_out_68545") != 0)
                return 1;
            return 1;
        }
        
        int64_t x_62268 = sdiv64(n_62256, jump_62260);
        int64_t n_m_f_res_62269 = add64((int64_t) 1, x_62268);
        
        n_m_62264 = n_m_f_res_62269;
    }
    
    int64_t i_62270 = sub64(n_62256, (int64_t) 1);
    bool x_62271 = sle64((int64_t) 0, i_62270);
    bool y_62272 = slt64(i_62270, n_62256);
    bool bounds_check_62273 = x_62271 && y_62272;
    bool index_certs_62274;
    
    if (!bounds_check_62273) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_62270,
                               "] out of bounds for array of shape [",
                               (long long) n_62256, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:38:13-20\n   #2  loess.fut:451:5-54\n   #3  loess.fut:439:1-479:26\n");
        if (memblock_unref(ctx, &mem_out_68545, "mem_out_68545") != 0)
            return 1;
        return 1;
    }
    
    int64_t min_res_62276 = smin64(n_62256, q_62258);
    bool bounds_invalid_upwards_62277 = slt64(n_m_62264, (int64_t) 0);
    bool valid_62278 = !bounds_invalid_upwards_62277;
    bool range_valid_c_62279;
    
    if (!valid_62278) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_m_62264, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  loess.fut:345:3-374:7\n   #3  loess.fut:409:15-61\n   #4  loess.fut:456:13-56\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:455:5-457:26\n   #8  loess.fut:439:1-479:26\n");
        if (memblock_unref(ctx, &mem_out_68545, "mem_out_68545") != 0)
            return 1;
        return 1;
    }
    
    bool loop_cond_62281 = slt64((int64_t) 1, min_res_62276);
    float i64_res_62282 = sitofp_i64_f32(q_62258);
    bool cond_62283 = slt64(jump_62260, jump_threshold_62261);
    bool cond_f_res_62284 = slt64(q_threshold_62262, q_62258);
    bool x_62285 = !cond_62283;
    bool y_62286 = cond_f_res_62284 && x_62285;
    bool cond_62287 = cond_62283 || y_62286;
    struct memblock ext_mem_68505;
    
    ext_mem_68505.references = NULL;
    
    struct memblock ext_mem_68504;
    
    ext_mem_68504.references = NULL;
    if (cond_62287) {
        bool match_lit_62290 = (int64_t) 0 == degree_62259;
        int64_t binop_x_67390 = m_62255 * n_m_62264;
        int64_t binop_y_67391 = (int64_t) 4 * binop_x_67390;
        int64_t bytes_67389 = smax64((int64_t) 0, binop_y_67391);
        struct memblock ext_mem_67830;
        
        ext_mem_67830.references = NULL;
        
        struct memblock ext_mem_67829;
        
        ext_mem_67829.references = NULL;
        if (match_lit_62290) {
            struct memblock mem_67392;
            
            mem_67392.references = NULL;
            if (memblock_alloc(ctx, &mem_67392, bytes_67389, "mem_67392")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_68546 = 0; i_68546 < m_62255; i_68546++) {
                for (int64_t i_68547 = 0; i_68547 < n_m_62264; i_68547++) {
                    ((float *) mem_67392.mem)[i_68546 * n_m_62264 + i_68547] =
                        0.0F;
                }
            }
            
            struct memblock mem_67522;
            
            mem_67522.references = NULL;
            if (memblock_alloc(ctx, &mem_67522, bytes_67389, "mem_67522")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_67394 = (int64_t) 8 * n_62256;
            int64_t bytes_67393 = smax64((int64_t) 0, binop_y_67394);
            int64_t binop_y_67397 = (int64_t) 4 * n_62256;
            int64_t bytes_67396 = smax64((int64_t) 0, binop_y_67397);
            int64_t binop_y_67409 = (int64_t) 4 * q_62258;
            int64_t bytes_67408 = smax64((int64_t) 0, binop_y_67409);
            int64_t binop_y_67412 = (int64_t) 4 * n_m_62264;
            int64_t bytes_67411 = smax64((int64_t) 0, binop_y_67412);
            int64_t flat_tid_63642 = (int64_t) 0;
            int32_t num_tasks_68548;
            int64_t flat_tid_63644 = (int64_t) 0;
            struct futhark_mc_task_73827 futhark_mc_task_73827;
            
            futhark_mc_task_73827.ctx = ctx;
            futhark_mc_task_73827.free_m_62255 = m_62255;
            futhark_mc_task_73827.free_n_62256 = n_62256;
            futhark_mc_task_73827.free_q_62258 = q_62258;
            futhark_mc_task_73827.free_jump_62260 = jump_62260;
            futhark_mc_task_73827.free_n_m_62264 = n_m_62264;
            futhark_mc_task_73827.free_i_62270 = i_62270;
            futhark_mc_task_73827.free_x_62271 = x_62271;
            futhark_mc_task_73827.free_min_res_62276 = min_res_62276;
            futhark_mc_task_73827.free_loop_cond_62281 = loop_cond_62281;
            futhark_mc_task_73827.free_i64_res_62282 = i64_res_62282;
            futhark_mc_task_73827.free_Y_mem_67388 = Y_mem_67388.mem;
            futhark_mc_task_73827.free_bytes_67393 = bytes_67393;
            futhark_mc_task_73827.free_bytes_67396 = bytes_67396;
            futhark_mc_task_73827.free_bytes_67408 = bytes_67408;
            futhark_mc_task_73827.free_bytes_67411 = bytes_67411;
            futhark_mc_task_73827.free_mem_67522 = mem_67522.mem;
            
            struct scheduler_segop futhark_mc_task_73827_task;
            
            futhark_mc_task_73827_task.args = &futhark_mc_task_73827;
            futhark_mc_task_73827_task.top_level_fn =
                futhark_mc_segmap_task_73828;
            futhark_mc_task_73827_task.name = "futhark_mc_segmap_task_73828";
            futhark_mc_task_73827_task.iterations = m_62255;
            futhark_mc_task_73827_task.task_time =
                &ctx->futhark_mc_segmap_task_73828_total_time;
            futhark_mc_task_73827_task.task_iter =
                &ctx->futhark_mc_segmap_task_73828_total_iter;
            futhark_mc_task_73827_task.sched = DYNAMIC;
            futhark_mc_task_73827_task.nested_fn =
                futhark_mc_segmap_nested_task_73838;
            
            int futhark_mc_segmap_task_73828_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_73827_task);
            
            if (futhark_mc_segmap_task_73828_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_67830, &mem_67522, "mem_67522") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_67829, &mem_67392, "mem_67392") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_67522, "mem_67522") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_67392, "mem_67392") != 0)
                return 1;
        } else {
            bool match_lit_62475 = (int64_t) 1 == degree_62259;
            struct memblock ext_mem_67828;
            
            ext_mem_67828.references = NULL;
            
            struct memblock ext_mem_67827;
            
            ext_mem_67827.references = NULL;
            if (match_lit_62475) {
                struct memblock mem_67670;
                
                mem_67670.references = NULL;
                if (memblock_alloc(ctx, &mem_67670, bytes_67389, "mem_67670")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_67674;
                
                mem_67674.references = NULL;
                if (memblock_alloc(ctx, &mem_67674, bytes_67389, "mem_67674")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_67524 = (int64_t) 8 * n_62256;
                int64_t bytes_67523 = smax64((int64_t) 0, binop_y_67524);
                int64_t binop_y_67527 = (int64_t) 4 * n_62256;
                int64_t bytes_67526 = smax64((int64_t) 0, binop_y_67527);
                int64_t binop_y_67539 = (int64_t) 4 * q_62258;
                int64_t bytes_67538 = smax64((int64_t) 0, binop_y_67539);
                int64_t binop_y_67542 = (int64_t) 4 * n_m_62264;
                int64_t bytes_67541 = smax64((int64_t) 0, binop_y_67542);
                int64_t flat_tid_64102 = (int64_t) 0;
                int32_t num_tasks_69285;
                int64_t flat_tid_64104 = (int64_t) 0;
                struct futhark_mc_task_73884 futhark_mc_task_73884;
                
                futhark_mc_task_73884.ctx = ctx;
                futhark_mc_task_73884.free_m_62255 = m_62255;
                futhark_mc_task_73884.free_n_62256 = n_62256;
                futhark_mc_task_73884.free_q_62258 = q_62258;
                futhark_mc_task_73884.free_jump_62260 = jump_62260;
                futhark_mc_task_73884.free_n_m_62264 = n_m_62264;
                futhark_mc_task_73884.free_i_62270 = i_62270;
                futhark_mc_task_73884.free_x_62271 = x_62271;
                futhark_mc_task_73884.free_min_res_62276 = min_res_62276;
                futhark_mc_task_73884.free_loop_cond_62281 = loop_cond_62281;
                futhark_mc_task_73884.free_i64_res_62282 = i64_res_62282;
                futhark_mc_task_73884.free_Y_mem_67388 = Y_mem_67388.mem;
                futhark_mc_task_73884.free_bytes_67523 = bytes_67523;
                futhark_mc_task_73884.free_bytes_67526 = bytes_67526;
                futhark_mc_task_73884.free_bytes_67538 = bytes_67538;
                futhark_mc_task_73884.free_bytes_67541 = bytes_67541;
                futhark_mc_task_73884.free_mem_67670 = mem_67670.mem;
                futhark_mc_task_73884.free_mem_67674 = mem_67674.mem;
                
                struct scheduler_segop futhark_mc_task_73884_task;
                
                futhark_mc_task_73884_task.args = &futhark_mc_task_73884;
                futhark_mc_task_73884_task.top_level_fn =
                    futhark_mc_segmap_task_73885;
                futhark_mc_task_73884_task.name =
                    "futhark_mc_segmap_task_73885";
                futhark_mc_task_73884_task.iterations = m_62255;
                futhark_mc_task_73884_task.task_time =
                    &ctx->futhark_mc_segmap_task_73885_total_time;
                futhark_mc_task_73884_task.task_iter =
                    &ctx->futhark_mc_segmap_task_73885_total_iter;
                futhark_mc_task_73884_task.sched = DYNAMIC;
                futhark_mc_task_73884_task.nested_fn =
                    futhark_mc_segmap_nested_task_73896;
                
                int futhark_mc_segmap_task_73885_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_73884_task);
                
                if (futhark_mc_segmap_task_73885_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_67828, &mem_67670,
                                 "mem_67670") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_67827, &mem_67674,
                                 "mem_67674") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_67674, "mem_67674") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_67670, "mem_67670") != 0)
                    return 1;
            } else {
                struct memblock mem_67822;
                
                mem_67822.references = NULL;
                if (memblock_alloc(ctx, &mem_67822, bytes_67389, "mem_67822")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_67826;
                
                mem_67826.references = NULL;
                if (memblock_alloc(ctx, &mem_67826, bytes_67389, "mem_67826")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_67676 = (int64_t) 8 * n_62256;
                int64_t bytes_67675 = smax64((int64_t) 0, binop_y_67676);
                int64_t binop_y_67679 = (int64_t) 4 * n_62256;
                int64_t bytes_67678 = smax64((int64_t) 0, binop_y_67679);
                int64_t binop_y_67691 = (int64_t) 4 * q_62258;
                int64_t bytes_67690 = smax64((int64_t) 0, binop_y_67691);
                int64_t binop_y_67694 = (int64_t) 4 * n_m_62264;
                int64_t bytes_67693 = smax64((int64_t) 0, binop_y_67694);
                int64_t flat_tid_64647 = (int64_t) 0;
                int32_t num_tasks_70160;
                int64_t flat_tid_64649 = (int64_t) 0;
                struct futhark_mc_task_73946 futhark_mc_task_73946;
                
                futhark_mc_task_73946.ctx = ctx;
                futhark_mc_task_73946.free_m_62255 = m_62255;
                futhark_mc_task_73946.free_n_62256 = n_62256;
                futhark_mc_task_73946.free_q_62258 = q_62258;
                futhark_mc_task_73946.free_jump_62260 = jump_62260;
                futhark_mc_task_73946.free_n_m_62264 = n_m_62264;
                futhark_mc_task_73946.free_i_62270 = i_62270;
                futhark_mc_task_73946.free_x_62271 = x_62271;
                futhark_mc_task_73946.free_min_res_62276 = min_res_62276;
                futhark_mc_task_73946.free_loop_cond_62281 = loop_cond_62281;
                futhark_mc_task_73946.free_i64_res_62282 = i64_res_62282;
                futhark_mc_task_73946.free_Y_mem_67388 = Y_mem_67388.mem;
                futhark_mc_task_73946.free_bytes_67675 = bytes_67675;
                futhark_mc_task_73946.free_bytes_67678 = bytes_67678;
                futhark_mc_task_73946.free_bytes_67690 = bytes_67690;
                futhark_mc_task_73946.free_bytes_67693 = bytes_67693;
                futhark_mc_task_73946.free_mem_67822 = mem_67822.mem;
                futhark_mc_task_73946.free_mem_67826 = mem_67826.mem;
                
                struct scheduler_segop futhark_mc_task_73946_task;
                
                futhark_mc_task_73946_task.args = &futhark_mc_task_73946;
                futhark_mc_task_73946_task.top_level_fn =
                    futhark_mc_segmap_task_73947;
                futhark_mc_task_73946_task.name =
                    "futhark_mc_segmap_task_73947";
                futhark_mc_task_73946_task.iterations = m_62255;
                futhark_mc_task_73946_task.task_time =
                    &ctx->futhark_mc_segmap_task_73947_total_time;
                futhark_mc_task_73946_task.task_iter =
                    &ctx->futhark_mc_segmap_task_73947_total_iter;
                futhark_mc_task_73946_task.sched = DYNAMIC;
                futhark_mc_task_73946_task.nested_fn =
                    futhark_mc_segmap_nested_task_73958;
                
                int futhark_mc_segmap_task_73947_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_73946_task);
                
                if (futhark_mc_segmap_task_73947_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_67828, &mem_67822,
                                 "mem_67822") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_67827, &mem_67826,
                                 "mem_67826") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_67826, "mem_67826") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_67822, "mem_67822") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_67830, &ext_mem_67828,
                             "ext_mem_67828") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_67829, &ext_mem_67827,
                             "ext_mem_67827") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67827, "ext_mem_67827") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_67828, "ext_mem_67828") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_68505, &ext_mem_67830,
                         "ext_mem_67830") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_68504, &ext_mem_67829,
                         "ext_mem_67829") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_67829, "ext_mem_67829") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_67830, "ext_mem_67830") != 0)
            return 1;
    } else {
        bool match_lit_62932 = (int64_t) 0 == degree_62259;
        int64_t binop_x_67832 = m_62255 * n_m_62264;
        int64_t binop_y_67833 = (int64_t) 4 * binop_x_67832;
        int64_t bytes_67831 = smax64((int64_t) 0, binop_y_67833);
        struct memblock ext_mem_68503;
        
        ext_mem_68503.references = NULL;
        
        struct memblock ext_mem_68502;
        
        ext_mem_68502.references = NULL;
        if (match_lit_62932) {
            struct memblock mem_67834;
            
            mem_67834.references = NULL;
            if (memblock_alloc(ctx, &mem_67834, bytes_67831, "mem_67834")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_71167 = 0; i_71167 < m_62255; i_71167++) {
                for (int64_t i_71168 = 0; i_71168 < n_m_62264; i_71168++) {
                    ((float *) mem_67834.mem)[i_71167 * n_m_62264 + i_71168] =
                        0.0F;
                }
            }
            
            struct memblock mem_67997;
            
            mem_67997.references = NULL;
            if (memblock_alloc(ctx, &mem_67997, bytes_67831, "mem_67997")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t binop_y_67836 = (int64_t) 8 * n_62256;
            int64_t bytes_67835 = smax64((int64_t) 0, binop_y_67836);
            int64_t binop_y_67839 = (int64_t) 4 * n_62256;
            int64_t bytes_67838 = smax64((int64_t) 0, binop_y_67839);
            int64_t binop_y_67851 = (int64_t) 4 * q_62258;
            int64_t bytes_67850 = smax64((int64_t) 0, binop_y_67851);
            int64_t binop_y_67872 = (int64_t) 4 * n_m_62264;
            int64_t bytes_67871 = smax64((int64_t) 0, binop_y_67872);
            int64_t flat_tid_65288 = (int64_t) 0;
            int32_t num_tasks_71169;
            int64_t flat_tid_65290 = (int64_t) 0;
            struct futhark_mc_task_74010 futhark_mc_task_74010;
            
            futhark_mc_task_74010.ctx = ctx;
            futhark_mc_task_74010.free_m_62255 = m_62255;
            futhark_mc_task_74010.free_n_62256 = n_62256;
            futhark_mc_task_74010.free_q_62258 = q_62258;
            futhark_mc_task_74010.free_jump_62260 = jump_62260;
            futhark_mc_task_74010.free_n_m_62264 = n_m_62264;
            futhark_mc_task_74010.free_i_62270 = i_62270;
            futhark_mc_task_74010.free_x_62271 = x_62271;
            futhark_mc_task_74010.free_min_res_62276 = min_res_62276;
            futhark_mc_task_74010.free_loop_cond_62281 = loop_cond_62281;
            futhark_mc_task_74010.free_i64_res_62282 = i64_res_62282;
            futhark_mc_task_74010.free_Y_mem_67388 = Y_mem_67388.mem;
            futhark_mc_task_74010.free_bytes_67835 = bytes_67835;
            futhark_mc_task_74010.free_bytes_67838 = bytes_67838;
            futhark_mc_task_74010.free_bytes_67850 = bytes_67850;
            futhark_mc_task_74010.free_bytes_67871 = bytes_67871;
            futhark_mc_task_74010.free_mem_67997 = mem_67997.mem;
            
            struct scheduler_segop futhark_mc_task_74010_task;
            
            futhark_mc_task_74010_task.args = &futhark_mc_task_74010;
            futhark_mc_task_74010_task.top_level_fn =
                futhark_mc_segmap_task_74011;
            futhark_mc_task_74010_task.name = "futhark_mc_segmap_task_74011";
            futhark_mc_task_74010_task.iterations = m_62255;
            futhark_mc_task_74010_task.task_time =
                &ctx->futhark_mc_segmap_task_74011_total_time;
            futhark_mc_task_74010_task.task_iter =
                &ctx->futhark_mc_segmap_task_74011_total_iter;
            futhark_mc_task_74010_task.sched = DYNAMIC;
            futhark_mc_task_74010_task.nested_fn =
                futhark_mc_segmap_nested_task_74022;
            
            int futhark_mc_segmap_task_74011_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_74010_task);
            
            if (futhark_mc_segmap_task_74011_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_68503, &mem_67997, "mem_67997") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_68502, &mem_67834, "mem_67834") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_67997, "mem_67997") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_67834, "mem_67834") != 0)
                return 1;
        } else {
            bool match_lit_63105 = (int64_t) 1 == degree_62259;
            struct memblock ext_mem_68501;
            
            ext_mem_68501.references = NULL;
            
            struct memblock ext_mem_68500;
            
            ext_mem_68500.references = NULL;
            if (match_lit_63105) {
                struct memblock mem_68211;
                
                mem_68211.references = NULL;
                if (memblock_alloc(ctx, &mem_68211, bytes_67831, "mem_68211")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_68215;
                
                mem_68215.references = NULL;
                if (memblock_alloc(ctx, &mem_68215, bytes_67831, "mem_68215")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_67999 = (int64_t) 8 * n_62256;
                int64_t bytes_67998 = smax64((int64_t) 0, binop_y_67999);
                int64_t binop_y_68002 = (int64_t) 4 * n_62256;
                int64_t bytes_68001 = smax64((int64_t) 0, binop_y_68002);
                int64_t binop_y_68014 = (int64_t) 4 * q_62258;
                int64_t bytes_68013 = smax64((int64_t) 0, binop_y_68014);
                int64_t binop_y_68053 = (int64_t) 4 * n_m_62264;
                int64_t bytes_68052 = smax64((int64_t) 0, binop_y_68053);
                int64_t flat_tid_65712 = (int64_t) 0;
                int32_t num_tasks_71856;
                int64_t flat_tid_65714 = (int64_t) 0;
                struct futhark_mc_task_74070 futhark_mc_task_74070;
                
                futhark_mc_task_74070.ctx = ctx;
                futhark_mc_task_74070.free_m_62255 = m_62255;
                futhark_mc_task_74070.free_n_62256 = n_62256;
                futhark_mc_task_74070.free_q_62258 = q_62258;
                futhark_mc_task_74070.free_jump_62260 = jump_62260;
                futhark_mc_task_74070.free_n_m_62264 = n_m_62264;
                futhark_mc_task_74070.free_i_62270 = i_62270;
                futhark_mc_task_74070.free_x_62271 = x_62271;
                futhark_mc_task_74070.free_min_res_62276 = min_res_62276;
                futhark_mc_task_74070.free_loop_cond_62281 = loop_cond_62281;
                futhark_mc_task_74070.free_i64_res_62282 = i64_res_62282;
                futhark_mc_task_74070.free_Y_mem_67388 = Y_mem_67388.mem;
                futhark_mc_task_74070.free_bytes_67998 = bytes_67998;
                futhark_mc_task_74070.free_bytes_68001 = bytes_68001;
                futhark_mc_task_74070.free_bytes_68013 = bytes_68013;
                futhark_mc_task_74070.free_bytes_68052 = bytes_68052;
                futhark_mc_task_74070.free_mem_68211 = mem_68211.mem;
                futhark_mc_task_74070.free_mem_68215 = mem_68215.mem;
                
                struct scheduler_segop futhark_mc_task_74070_task;
                
                futhark_mc_task_74070_task.args = &futhark_mc_task_74070;
                futhark_mc_task_74070_task.top_level_fn =
                    futhark_mc_segmap_task_74071;
                futhark_mc_task_74070_task.name =
                    "futhark_mc_segmap_task_74071";
                futhark_mc_task_74070_task.iterations = m_62255;
                futhark_mc_task_74070_task.task_time =
                    &ctx->futhark_mc_segmap_task_74071_total_time;
                futhark_mc_task_74070_task.task_iter =
                    &ctx->futhark_mc_segmap_task_74071_total_iter;
                futhark_mc_task_74070_task.sched = DYNAMIC;
                futhark_mc_task_74070_task.nested_fn =
                    futhark_mc_segmap_nested_task_74084;
                
                int futhark_mc_segmap_task_74071_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_74070_task);
                
                if (futhark_mc_segmap_task_74071_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_68501, &mem_68211,
                                 "mem_68211") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_68500, &mem_68215,
                                 "mem_68215") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_68215, "mem_68215") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_68211, "mem_68211") != 0)
                    return 1;
            } else {
                struct memblock mem_68495;
                
                mem_68495.references = NULL;
                if (memblock_alloc(ctx, &mem_68495, bytes_67831, "mem_68495")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock mem_68499;
                
                mem_68499.references = NULL;
                if (memblock_alloc(ctx, &mem_68499, bytes_67831, "mem_68499")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t binop_y_68217 = (int64_t) 8 * n_62256;
                int64_t bytes_68216 = smax64((int64_t) 0, binop_y_68217);
                int64_t binop_y_68220 = (int64_t) 4 * n_62256;
                int64_t bytes_68219 = smax64((int64_t) 0, binop_y_68220);
                int64_t binop_y_68232 = (int64_t) 4 * q_62258;
                int64_t bytes_68231 = smax64((int64_t) 0, binop_y_68232);
                int64_t binop_y_68307 = (int64_t) 4 * n_m_62264;
                int64_t bytes_68306 = smax64((int64_t) 0, binop_y_68307);
                int64_t flat_tid_66224 = (int64_t) 0;
                int32_t num_tasks_72696;
                int64_t flat_tid_66226 = (int64_t) 0;
                struct futhark_mc_task_74138 futhark_mc_task_74138;
                
                futhark_mc_task_74138.ctx = ctx;
                futhark_mc_task_74138.free_m_62255 = m_62255;
                futhark_mc_task_74138.free_n_62256 = n_62256;
                futhark_mc_task_74138.free_q_62258 = q_62258;
                futhark_mc_task_74138.free_jump_62260 = jump_62260;
                futhark_mc_task_74138.free_n_m_62264 = n_m_62264;
                futhark_mc_task_74138.free_i_62270 = i_62270;
                futhark_mc_task_74138.free_x_62271 = x_62271;
                futhark_mc_task_74138.free_min_res_62276 = min_res_62276;
                futhark_mc_task_74138.free_loop_cond_62281 = loop_cond_62281;
                futhark_mc_task_74138.free_i64_res_62282 = i64_res_62282;
                futhark_mc_task_74138.free_Y_mem_67388 = Y_mem_67388.mem;
                futhark_mc_task_74138.free_bytes_68216 = bytes_68216;
                futhark_mc_task_74138.free_bytes_68219 = bytes_68219;
                futhark_mc_task_74138.free_bytes_68231 = bytes_68231;
                futhark_mc_task_74138.free_bytes_68306 = bytes_68306;
                futhark_mc_task_74138.free_mem_68495 = mem_68495.mem;
                futhark_mc_task_74138.free_mem_68499 = mem_68499.mem;
                
                struct scheduler_segop futhark_mc_task_74138_task;
                
                futhark_mc_task_74138_task.args = &futhark_mc_task_74138;
                futhark_mc_task_74138_task.top_level_fn =
                    futhark_mc_segmap_task_74139;
                futhark_mc_task_74138_task.name =
                    "futhark_mc_segmap_task_74139";
                futhark_mc_task_74138_task.iterations = m_62255;
                futhark_mc_task_74138_task.task_time =
                    &ctx->futhark_mc_segmap_task_74139_total_time;
                futhark_mc_task_74138_task.task_iter =
                    &ctx->futhark_mc_segmap_task_74139_total_iter;
                futhark_mc_task_74138_task.sched = DYNAMIC;
                futhark_mc_task_74138_task.nested_fn =
                    futhark_mc_segmap_nested_task_74154;
                
                int futhark_mc_segmap_task_74139_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_74138_task);
                
                if (futhark_mc_segmap_task_74139_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_68501, &mem_68495,
                                 "mem_68495") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_68500, &mem_68499,
                                 "mem_68499") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_68499, "mem_68499") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_68495, "mem_68495") != 0)
                    return 1;
            }
            if (memblock_set(ctx, &ext_mem_68503, &ext_mem_68501,
                             "ext_mem_68501") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_68502, &ext_mem_68500,
                             "ext_mem_68500") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_68500, "ext_mem_68500") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_68501, "ext_mem_68501") != 0)
                return 1;
        }
        if (memblock_set(ctx, &ext_mem_68505, &ext_mem_68503,
                         "ext_mem_68503") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_68504, &ext_mem_68502,
                         "ext_mem_68502") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_68502, "ext_mem_68502") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_68503, "ext_mem_68503") != 0)
            return 1;
    }
    
    bool cond_63582 = slt64((int64_t) 1, jump_62260);
    int64_t binop_x_68525 = m_62255 * n_62256;
    int64_t binop_y_68526 = (int64_t) 4 * binop_x_68525;
    int64_t bytes_68524 = smax64((int64_t) 0, binop_y_68526);
    int64_t ext_68529;
    
    if (cond_63582) {
        ext_68529 = n_62256;
    } else {
        ext_68529 = n_m_62264;
    }
    
    struct memblock ext_mem_68528;
    
    ext_mem_68528.references = NULL;
    if (cond_63582) {
        bool zzero_63584 = jump_62260 == (int64_t) 0;
        bool nonzzero_63585 = !zzero_63584;
        bool nonzzero_cert_63586;
        
        if (!nonzzero_63585) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  loess.fut:423:27-34\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  loess.fut:476:13-59\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  loess.fut:475:5-477:29\n   #8  loess.fut:439:1-479:26\n");
            if (memblock_unref(ctx, &ext_mem_68528, "ext_mem_68528") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_68504, "ext_mem_68504") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_68505, "ext_mem_68505") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_68545, "mem_out_68545") != 0)
                return 1;
            return 1;
        }
        
        int64_t y_63587 = sub64(n_m_62264, (int64_t) 1);
        struct memblock mem_68527;
        
        mem_68527.references = NULL;
        if (memblock_alloc(ctx, &mem_68527, bytes_68524, "mem_68527")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t binop_y_68507 = (int64_t) 4 * n_62256;
        int64_t bytes_68506 = smax64((int64_t) 0, binop_y_68507);
        int64_t flat_tid_66846 = (int64_t) 0;
        int32_t num_tasks_73718;
        int64_t flat_tid_66848 = (int64_t) 0;
        struct futhark_mc_task_74218 futhark_mc_task_74218;
        
        futhark_mc_task_74218.ctx = ctx;
        futhark_mc_task_74218.free_m_62255 = m_62255;
        futhark_mc_task_74218.free_n_62256 = n_62256;
        futhark_mc_task_74218.free_jump_62260 = jump_62260;
        futhark_mc_task_74218.free_n_m_62264 = n_m_62264;
        futhark_mc_task_74218.free_i_62270 = i_62270;
        futhark_mc_task_74218.free_y_63587 = y_63587;
        futhark_mc_task_74218.free_ext_mem_68504 = ext_mem_68504.mem;
        futhark_mc_task_74218.free_ext_mem_68505 = ext_mem_68505.mem;
        futhark_mc_task_74218.free_bytes_68506 = bytes_68506;
        futhark_mc_task_74218.free_mem_68527 = mem_68527.mem;
        
        struct scheduler_segop futhark_mc_task_74218_task;
        
        futhark_mc_task_74218_task.args = &futhark_mc_task_74218;
        futhark_mc_task_74218_task.top_level_fn = futhark_mc_segmap_task_74219;
        futhark_mc_task_74218_task.name = "futhark_mc_segmap_task_74219";
        futhark_mc_task_74218_task.iterations = m_62255;
        futhark_mc_task_74218_task.task_time =
            &ctx->futhark_mc_segmap_task_74219_total_time;
        futhark_mc_task_74218_task.task_iter =
            &ctx->futhark_mc_segmap_task_74219_total_iter;
        futhark_mc_task_74218_task.sched = STATIC;
        futhark_mc_task_74218_task.nested_fn =
            futhark_mc_segmap_nested_task_74223;
        
        int futhark_mc_segmap_task_74219_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_74218_task);
        
        if (futhark_mc_segmap_task_74219_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_68528, &mem_68527, "mem_68527") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_68527, "mem_68527") != 0)
            return 1;
    } else {
        bool dim_match_63639 = n_62256 == n_m_62264;
        bool empty_or_match_cert_63640;
        
        if (!dim_match_63639) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Value of (core language) shape (",
                          (long long) m_62255, ", ", (long long) n_m_62264,
                          ") cannot match shape of type `[",
                          (long long) m_62255, "][", (long long) n_62256,
                          "]f32`.",
                          "-> #0  loess.fut:479:5-26\n   #1  loess.fut:439:1-479:26\n");
            if (memblock_unref(ctx, &ext_mem_68528, "ext_mem_68528") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_68504, "ext_mem_68504") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_68505, "ext_mem_68505") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_68545, "mem_out_68545") != 0)
                return 1;
            return 1;
        }
        if (memblock_set(ctx, &ext_mem_68528, &ext_mem_68505,
                         "ext_mem_68505") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &ext_mem_68504, "ext_mem_68504") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_68505, "ext_mem_68505") != 0)
        return 1;
    
    struct memblock mem_68533;
    
    mem_68533.references = NULL;
    if (memblock_alloc(ctx, &mem_68533, bytes_68524, "mem_68533")) {
        err = 1;
        goto cleanup;
    }
    memmove(mem_68533.mem + (int64_t) 0, ext_mem_68528.mem + (int64_t) 0,
            m_62255 * n_62256 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_68528, "ext_mem_68528") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_68545, &mem_68533, "mem_68533") != 0)
        return 1;
    (*mem_out_p_73826).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_73826, &mem_out_68545, "mem_out_68545") !=
        0)
        return 1;
    if (memblock_unref(ctx, &mem_68533, "mem_68533") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_68528, "ext_mem_68528") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_68504, "ext_mem_68504") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_68505, "ext_mem_68505") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_68545, "mem_out_68545") != 0)
        return 1;
    
  cleanup:
    { }
    return err;
}
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5)
{
    struct memblock Y_mem_67388;
    
    Y_mem_67388.references = NULL;
    
    int64_t m_62255;
    int64_t n_62256;
    int64_t q_62258;
    int64_t degree_62259;
    int64_t jump_62260;
    int64_t jump_threshold_62261;
    int64_t q_threshold_62262;
    struct memblock mem_out_68545;
    
    mem_out_68545.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    Y_mem_67388 = in0->mem;
    m_62255 = in0->shape[0];
    n_62256 = in0->shape[1];
    q_62258 = in1;
    degree_62259 = in2;
    jump_62260 = in3;
    jump_threshold_62261 = in4;
    q_threshold_62262 = in5;
    if (!(m_62255 == in0->shape[0] && n_62256 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_68545, Y_mem_67388, m_62255,
                                n_62256, q_62258, degree_62259, jump_62260,
                                jump_threshold_62261, q_threshold_62262);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_68545;
            (*out0)->shape[0] = m_62255;
            (*out0)->shape[1] = n_62256;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
